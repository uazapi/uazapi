const a0_0x4bc873=a0_0x59bb;(function(_0x4331a7,_0x459035){const _0x59ecd9=a0_0x59bb,_0x3f1285=_0x4331a7();while(!![]){try{const _0x19206d=parseInt(_0x59ecd9(0x29c))/0x1*(parseInt(_0x59ecd9(0x256))/0x2)+parseInt(_0x59ecd9(0x1e7))/0x3*(parseInt(_0x59ecd9(0x447))/0x4)+parseInt(_0x59ecd9(0x3ed))/0x5*(-parseInt(_0x59ecd9(0x6e8))/0x6)+parseInt(_0x59ecd9(0x883))/0x7*(-parseInt(_0x59ecd9(0x832))/0x8)+parseInt(_0x59ecd9(0x386))/0x9+parseInt(_0x59ecd9(0x8eb))/0xa*(parseInt(_0x59ecd9(0x5da))/0xb)+parseInt(_0x59ecd9(0x769))/0xc*(-parseInt(_0x59ecd9(0x2f6))/0xd);if(_0x19206d===_0x459035)break;else _0x3f1285['push'](_0x3f1285['shift']());}catch(_0x5c1baa){_0x3f1285['push'](_0x3f1285['shift']());}}}(a0_0x4d46,0x49e15));var Bi=Object['create'],qe=Object['defineProperty'],Wi=Object[a0_0x4bc873(0x335)],zi=Object[a0_0x4bc873(0x2c0)],Hi=Object[a0_0x4bc873(0x5bc)],Ki=Object[a0_0x4bc873(0x373)][a0_0x4bc873(0x80c)],Qi=(_0x164016,_0xa83999)=>{for(var _0x815d7e in _0xa83999)qe(_0x164016,_0x815d7e,{'get':_0xa83999[_0x815d7e],'enumerable':!0x0});},Bs=(_0x33c32b,_0x10a524,_0x4fac48,_0x53168e)=>{const _0x3a5d99=a0_0x4bc873;if(_0x10a524&&typeof _0x10a524==_0x3a5d99(0x801)||typeof _0x10a524==_0x3a5d99(0x41a)){for(let _0x5034c5 of zi(_0x10a524))!Ki['call'](_0x33c32b,_0x5034c5)&&_0x5034c5!==_0x4fac48&&qe(_0x33c32b,_0x5034c5,{'get':()=>_0x10a524[_0x5034c5],'enumerable':!(_0x53168e=Wi(_0x10a524,_0x5034c5))||_0x53168e['enumerable']});}return _0x33c32b;},T=(_0x29f48b,_0xd30d47,_0x22101e)=>(_0x22101e=_0x29f48b!=null?Bi(Hi(_0x29f48b)):{},Bs(_0xd30d47||!_0x29f48b||!_0x29f48b[a0_0x4bc873(0x78a)]?qe(_0x22101e,a0_0x4bc873(0x323),{'value':_0x29f48b,'enumerable':!0x0}):_0x22101e,_0x29f48b)),Yi=_0x1261b5=>Bs(qe({},a0_0x4bc873(0x78a),{'value':!0x0}),_0x1261b5),hr={};Qi(hr,{'fullURL':()=>Gs,'subdomain':()=>B}),module[a0_0x4bc873(0x501)]=Yi(hr);var Ui=T(require(a0_0x4bc873(0x37f))),zs=require('fs'),Hs=require(a0_0x4bc873(0x4e5)),Ks=require(a0_0x4bc873(0x8f3)),Ve=require(a0_0x4bc873(0x8f3)),le=process[a0_0x4bc873(0x33f)](),Se=(0x0,Ve[a0_0x4bc873(0x6a2)])(le,a0_0x4bc873(0x761)),Ws=(0x0,Ve['join'])(le,a0_0x4bc873(0x741)),gn=(0x0,Ve['join'])(le,'store',a0_0x4bc873(0x4a9)),us=class{constructor(){const _0xf2791f=a0_0x4bc873;this[_0xf2791f(0x493)]();}['get'](_0x5e1765){const _0x2d4d55=a0_0x4bc873;return this[_0x2d4d55(0x28b)][_0x5e1765];}[a0_0x4bc873(0x493)](){const _0x436f8c=a0_0x4bc873;this[_0x436f8c(0x28b)]=process[_0x436f8c(0x28b)]?.[_0x436f8c(0x6ac)]!==_0x436f8c(0x4b4)?this['envYaml']():this[_0x436f8c(0x3ad)](),process['env']?.[_0x436f8c(0x6ac)]===_0x436f8c(0x4b4)&&(this[_0x436f8c(0x28b)][_0x436f8c(0x220)][_0x436f8c(0x7de)]=_0x436f8c(0x378),this[_0x436f8c(0x28b)]['SERVER'][_0x436f8c(0x6da)]=Number['parseInt'](process[_0x436f8c(0x28b)]?.['SERVER_PORT']??_0x436f8c(0x522)));}[a0_0x4bc873(0x6ec)](){const _0x33a4a2=a0_0x4bc873;return(0x0,Hs['load'])((0x0,zs[_0x33a4a2(0x500)])((0x0,Ks[_0x33a4a2(0x6a2)])(Ws,_0x33a4a2(0x41e)),{'encoding':_0x33a4a2(0x5a6)}));}[a0_0x4bc873(0x3ad)](){const _0x4f93a6=a0_0x4bc873;return{'SERVER':{'TYPE':process[_0x4f93a6(0x28b)][_0x4f93a6(0x427)],'PORT':Number[_0x4f93a6(0x7bc)](process[_0x4f93a6(0x28b)]['SERVER_PORT']),'URL':process['env']['SERVER_URL']},'CORS':{'ORIGIN':process['env'][_0x4f93a6(0x353)][_0x4f93a6(0x51b)](','),'METHODS':process['env'][_0x4f93a6(0x5cd)][_0x4f93a6(0x51b)](','),'CREDENTIALS':process['env']?.[_0x4f93a6(0x468)]===_0x4f93a6(0x4b4)},'SSL_CONF':{'PRIVKEY':process[_0x4f93a6(0x28b)]?.['SSL_CONF_PRIVKEY'],'FULLCHAIN':process[_0x4f93a6(0x28b)]?.['SSL_CONF_FULLCHAIN']},'STORE':{'CLEANING_INTERVAL':Number['isInteger'](process['env']?.[_0x4f93a6(0x59f)])?Number[_0x4f93a6(0x7bc)](process['env']['STORE_CLEANING_TERMINAL']):void 0x0,'MESSAGES':process['env']?.[_0x4f93a6(0x56b)]===_0x4f93a6(0x4b4),'CONTACTS':process['env']?.[_0x4f93a6(0x2d4)]===_0x4f93a6(0x4b4),'CHATS':process[_0x4f93a6(0x28b)]?.[_0x4f93a6(0x30b)]===_0x4f93a6(0x4b4)},'DATABASE':{'CONNECTION':{'HOST':process[_0x4f93a6(0x28b)]?.['DATABASE_CONNECTION_HOST'],'PORT':Number[_0x4f93a6(0x7bc)](process['env']?.['DATABASE_CONNECTION_HOST']),'USER':process['env']['DATABASE_CONNECTION_USER'],'PASSWORD':process['env'][_0x4f93a6(0x6a0)],'URI':process[_0x4f93a6(0x28b)][_0x4f93a6(0x662)],'DB_PREFIX_NAME':process['env'][_0x4f93a6(0x3f1)]},'ENABLED':process['env']?.[_0x4f93a6(0x229)]===_0x4f93a6(0x4b4)},'REDIS':{'ENABLED':process[_0x4f93a6(0x28b)]?.[_0x4f93a6(0x6b2)]==='true','URI':process[_0x4f93a6(0x28b)][_0x4f93a6(0x415)]||_0x4f93a6(0x42f),'PREFIX_KEY':process['env'][_0x4f93a6(0x8d2)]||_0x4f93a6(0x473)},'LOG':{'LEVEL':process[_0x4f93a6(0x28b)]?.['LOG_LEVEL']['split'](','),'COLOR':process['env']?.['LOG_COLOR']===_0x4f93a6(0x4b4)},'PROXY':process['env']?.[_0x4f93a6(0x402)]==='true','AUTHENTICATION':{'TYPE':process[_0x4f93a6(0x28b)][_0x4f93a6(0x7c6)],'API_KEY':{'KEY':process[_0x4f93a6(0x28b)][_0x4f93a6(0x2b6)]},'JWT':{'EXPIRIN_IN':Number['isInteger'](process[_0x4f93a6(0x28b)]?.[_0x4f93a6(0x2d8)])?Number[_0x4f93a6(0x7bc)](process['env'][_0x4f93a6(0x2d8)]):0xe10,'SECRET':process['env'][_0x4f93a6(0x31b)]}}};}},S=new us(),ji=T(require('cors')),ye=T(require('express')),qs=require('path'),ds=T(require(a0_0x4bc873(0x847))),ps=(_0x30f719=>(_0x30f719['LOG']=a0_0x4bc873(0x70b),_0x30f719['INFO']=a0_0x4bc873(0x326),_0x30f719[a0_0x4bc873(0x489)]=a0_0x4bc873(0x2db),_0x30f719[a0_0x4bc873(0x534)]='\x1b[31m',_0x30f719[a0_0x4bc873(0x4e1)]=a0_0x4bc873(0x7ce),_0x30f719[a0_0x4bc873(0x5fd)]=a0_0x4bc873(0x578),_0x30f719['DARK']=a0_0x4bc873(0x204),_0x30f719))(ps||{}),Qs=(_0x39d04e=>(_0x39d04e['LOG']=a0_0x4bc873(0x8b4),_0x39d04e[a0_0x4bc873(0x7b0)]=a0_0x4bc873(0x853),_0x39d04e[a0_0x4bc873(0x6fa)]=a0_0x4bc873(0x3ac),_0x39d04e[a0_0x4bc873(0x489)]='\x1b[33m%s\x1b[0m',_0x39d04e[a0_0x4bc873(0x534)]=a0_0x4bc873(0x7a6),_0x39d04e[a0_0x4bc873(0x4e1)]=a0_0x4bc873(0x3a6),_0x39d04e[a0_0x4bc873(0x5fd)]=a0_0x4bc873(0x677),_0x39d04e))(Qs||{}),Ys=(_0x19ce60=>(_0x19ce60[a0_0x4bc873(0x5c6)]=a0_0x4bc873(0x5c6),_0x19ce60[a0_0x4bc873(0x489)]='WARN',_0x19ce60[a0_0x4bc873(0x6fa)]=a0_0x4bc873(0x6fa),_0x19ce60[a0_0x4bc873(0x7b0)]='DARK',_0x19ce60[a0_0x4bc873(0x534)]=a0_0x4bc873(0x534),_0x19ce60[a0_0x4bc873(0x4e1)]='DEBUG',_0x19ce60[a0_0x4bc873(0x5fd)]='VERBOSE',_0x19ce60))(Ys||{}),Xs=(_0x44cd0f=>(_0x44cd0f[a0_0x4bc873(0x5c6)]='\x1b[42m',_0x44cd0f[a0_0x4bc873(0x6fa)]=a0_0x4bc873(0x44a),_0x44cd0f['WARN']=a0_0x4bc873(0x869),_0x44cd0f['DARK']='\x1b[40m',_0x44cd0f[a0_0x4bc873(0x534)]=a0_0x4bc873(0x56c),_0x44cd0f['DEBUG']=a0_0x4bc873(0x789),_0x44cd0f[a0_0x4bc873(0x5fd)]='\x1b[47m',_0x44cd0f))(Xs||{}),$=class{constructor(_0x14c7ab='Logger'){this['context']=_0x14c7ab,this['configService']=S;}[a0_0x4bc873(0x203)](_0xab174){const _0x459a40=a0_0x4bc873;this[_0x459a40(0x502)]=_0xab174;}[a0_0x4bc873(0x75a)](_0x5f1447,_0x12afc2){const _0x2d2636=a0_0x4bc873;let _0x1e9a53=[];this[_0x2d2636(0x251)][_0x2d2636(0x62f)]('LOG')[_0x2d2636(0x84b)][_0x2d2636(0x426)](_0x27d9f1=>_0x1e9a53[_0x2d2636(0x7f1)](Ys[_0x27d9f1]));let _0x13f17d=typeof _0x5f1447;_0x1e9a53['includes'](_0x12afc2)&&(S[_0x2d2636(0x62f)](_0x2d2636(0x5c6))[_0x2d2636(0x51d)]?(console['log'](_0x2d2636(0x638)+Qs[_0x12afc2],_0x2d2636(0x5ca),(0x0,ds['default'])()[_0x2d2636(0x885)]('DD/MM\x20HH:mm:ss'),'\x1b[0m',ps[_0x12afc2]+Xs[_0x12afc2]+_0x2d2636(0x638),_0x12afc2+'\x20\x1b[0m',_0x2d2636(0x20b),this[_0x2d2636(0x502)]+_0x2d2636(0x816),ps[_0x12afc2],_0x13f17d!==_0x2d2636(0x801)?_0x5f1447:'',_0x2d2636(0x816)),_0x13f17d===_0x2d2636(0x801)&&console[_0x2d2636(0x6d2)](_0x5f1447,'\x0a')):console[_0x2d2636(0x6d2)]((0x0,ds[_0x2d2636(0x323)])()['format'](_0x2d2636(0x7e8)),_0x12afc2+'\x20',''+this['context'],_0x5f1447));}[a0_0x4bc873(0x6d2)](_0xe61b8){const _0x47d9b7=a0_0x4bc873;this[_0x47d9b7(0x75a)](_0xe61b8,'LOG');}['info'](_0x59ac16){this['console'](_0x59ac16,'INFO');}[a0_0x4bc873(0x5b6)](_0x468234){this['console'](_0x468234,'WARN');}[a0_0x4bc873(0x47a)](_0x466e13){this['console'](_0x466e13,'ERROR');}['verbose'](_0x3e6863){const _0x32d3c2=a0_0x4bc873;this['console'](_0x3e6863,_0x32d3c2(0x5fd));}[a0_0x4bc873(0x84a)](_0x3d43dd){const _0x4555ce=a0_0x4bc873;this[_0x4555ce(0x75a)](_0x3d43dd,_0x4555ce(0x4e1));}['dark'](_0x1d0fd4){const _0x300140=a0_0x4bc873;this[_0x300140(0x75a)](_0x1d0fd4,_0x300140(0x7b0));}};function Zs(){const _0x38a769=a0_0x4bc873;process['on'](_0x38a769(0x602),(_0x315d08,_0x10d1ba)=>{const _0xe83c24=_0x38a769;new $(_0xe83c24(0x602))[_0xe83c24(0x47a)]({'origin':_0x10d1ba,'stderr':process[_0xe83c24(0x31e)]['fd'],'error':_0x315d08});}),process['on'](_0x38a769(0x6ca),(_0x272ca0,_0x177b69)=>{const _0x29b32f=_0x38a769;new $(_0x29b32f(0x6ca))[_0x29b32f(0x47a)]({'origin':_0x177b69,'stderr':process[_0x29b32f(0x31e)]['fd'],'error':_0x272ca0});});}var ea=T(require(a0_0x4bc873(0x7ff))),hs=new ea['default']({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Me=require(a0_0x4bc873(0x923)),Ae=T(require('mongoose')),Ge=new $(a0_0x4bc873(0x337)),L=S[a0_0x4bc873(0x62f)](a0_0x4bc873(0x5b9)),I=L[a0_0x4bc873(0x8f9)]?L[a0_0x4bc873(0x867)][a0_0x4bc873(0x3cd)]?Ae[a0_0x4bc873(0x323)]['createConnection'](L[a0_0x4bc873(0x867)][a0_0x4bc873(0x3cd)],{'dbName':L[a0_0x4bc873(0x867)]['DB_PREFIX_NAME']+'-whatsapp-api'}):Ae[a0_0x4bc873(0x323)][a0_0x4bc873(0x54f)](a0_0x4bc873(0x2c1)+L[a0_0x4bc873(0x867)][a0_0x4bc873(0x88c)]+':'+L[a0_0x4bc873(0x867)][a0_0x4bc873(0x6da)]+a0_0x4bc873(0x7b8),{'user':L[a0_0x4bc873(0x867)]['USER'],'pass':L['CONNECTION']['PASSWORD'],'dbName':L[a0_0x4bc873(0x867)][a0_0x4bc873(0x577)]+a0_0x4bc873(0x634)}):null;L[a0_0x4bc873(0x8f9)]&&Ge['info'](a0_0x4bc873(0x8f2)+I[a0_0x4bc873(0x32c)]);var X=L['ENABLED']?L[a0_0x4bc873(0x867)]['URI']?Ae['default'][a0_0x4bc873(0x54f)](L[a0_0x4bc873(0x867)]['URI'],{'dbName':a0_0x4bc873(0x6e6)}):Ae[a0_0x4bc873(0x323)]['createConnection']('mongodb://'+L['CONNECTION'][a0_0x4bc873(0x88c)]+':'+L[a0_0x4bc873(0x867)][a0_0x4bc873(0x6da)]+a0_0x4bc873(0x7b8),{'user':L[a0_0x4bc873(0x867)][a0_0x4bc873(0x1f5)],'pass':L[a0_0x4bc873(0x867)][a0_0x4bc873(0x3ce)],'dbName':a0_0x4bc873(0x59d)}):null;X&&Ge[a0_0x4bc873(0x636)]('ON\x20-\x20dbName:\x20'+X[a0_0x4bc873(0x32c)]),process['on'](a0_0x4bc873(0x538),()=>{I&&I['close'](()=>{const _0x578c62=a0_0x59bb;Ge[_0x578c62(0x636)](_0x578c62(0x73d));}),X&&X['close'](()=>{const _0x3717eb=a0_0x59bb;Ge['info'](_0x3717eb(0x3e0));});});var Xi=new Me[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),Zi=new Me['Schema']({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),eo=new Me[(a0_0x4bc873(0x7be))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),to=new Me[(a0_0x4bc873(0x7be))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Xi],'default':[]}},{'_id':!0x1}),so=new Me[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':to,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':Zi},'groupdata':{'type':eo,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),ta=_0x541320=>{const _0x3f3ef0=a0_0x4bc873;let _0x16a0e5='z_'+_0x541320+'_Chats';return I?.[_0x3f3ef0(0x725)](_0x3f3ef0(0x732),so,_0x16a0e5);},sa=require('mongoose'),ao=new sa[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),aa=_0x177fd3=>{const _0x59627e=a0_0x4bc873;let _0x4612c8='z_'+_0x177fd3+_0x59627e(0x2f9);return I?.[_0x59627e(0x725)](_0x59627e(0x626),ao,_0x4612c8);},ia=require(a0_0x4bc873(0x923)),gs=class{},io=new ia[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),oa=X?.[a0_0x4bc873(0x725)](gs[a0_0x4bc873(0x60f)],io,a0_0x4bc873(0x542)),ra=require('mongoose'),ms=class{},oo=new ra[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),Be=X?.['model'](ms[a0_0x4bc873(0x60f)],oo,'instances'),ws=require(a0_0x4bc873(0x923)),fs=class{},ro=new ws[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),no=new ws['Schema']({'_id':{'type':String},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),na=X?.[a0_0x4bc873(0x725)](fs['name'],no,a0_0x4bc873(0x4ee)),ca=_0x11d868=>{const _0x53560d=a0_0x4bc873;let _0xbb4f46='z_'+_0x11d868+'_Messages';return I?.[_0x53560d(0x725)]('MessageModel',ro,_0xbb4f46);},la=require(a0_0x4bc873(0x923)),ys=class{},co=new la[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ua=I?.['model'](ys[a0_0x4bc873(0x60f)],co,a0_0x4bc873(0x516)),da=require(a0_0x4bc873(0x923)),bs=class{},pa=new da[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});pa['pre']('save',function(_0x1a4e8d){const _0x40229f=a0_0x4bc873;delete this['flowActive'],delete this['flowIgnoreGroups'],delete this[_0x40229f(0x331)],delete this[_0x40229f(0x314)],delete this[_0x40229f(0x3e2)],_0x1a4e8d();});var ha=I?.[a0_0x4bc873(0x725)](bs['name'],pa,a0_0x4bc873(0x5d8)),P=require(a0_0x4bc873(0x923)),Ss=require(a0_0x4bc873(0x787)),We=class{},Ms=class{},ma=new P[(a0_0x4bc873(0x7be))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Cs=new P[(a0_0x4bc873(0x7be))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),lo=new P['Schema']({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x4bc873(0x588)},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x4bc873(0x527)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'pollErrorMessage':{'type':String,'default':a0_0x4bc873(0x699)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),fa=new P['Schema']({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),uo=new P[(a0_0x4bc873(0x7be))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),po=new P['Schema']({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),vs=new P[(a0_0x4bc873(0x7be))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),ho=new P['Schema']({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),wa=new P[(a0_0x4bc873(0x7be))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':lo},'apirequest':uo,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':ho,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),ya=new P['Schema']({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),ba=new P[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[vs],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x4c58d4=a0_0x4bc873;return'!cmd_'+Math[_0x4c58d4(0x748)]()[_0x4c58d4(0x529)](0x24)['slice'](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x4bc873(0x4e3)},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});ba[a0_0x4bc873(0x83d)](a0_0x4bc873(0x39d),function(_0x25a317){const _0x61c314=a0_0x4bc873;let _0x18c0e9=this['getUpdate']();if(_0x18c0e9&&typeof _0x18c0e9==_0x61c314(0x801)&&_0x61c314(0x8e9)in _0x18c0e9){let _0x113a52=_0x18c0e9[_0x61c314(0x8e9)];if(_0x113a52){let _0x349ad3=new Set(),_0x3d7988=new Set(_0x113a52['variables']?.['map'](_0x301a32=>_0x301a32[_0x61c314(0x60f)])),_0x4c114d=JSON[_0x61c314(0x573)](_0x113a52),_0x45ed1a=/{{(?!_)([^}]*)}}/g,_0x1cc019;for(;(_0x1cc019=_0x45ed1a[_0x61c314(0x8c5)](_0x4c114d))!==null;)_0x3d7988[_0x61c314(0x772)](_0x1cc019[0x1])||_0x349ad3[_0x61c314(0x840)](_0x1cc019[0x1]);_0x349ad3[_0x61c314(0x800)]>0x0?(console[_0x61c314(0x5b6)](_0x61c314(0x27b),Array[_0x61c314(0x25a)](_0x349ad3)),_0x113a52[_0x61c314(0x7cf)]=Array[_0x61c314(0x25a)](_0x349ad3)):_0x113a52[_0x61c314(0x7cf)]=[],this[_0x61c314(0x429)]({'$set':_0x113a52});}}_0x25a317();});var Ce=I?.[a0_0x4bc873(0x725)](Ms[a0_0x4bc873(0x60f)],ba,'allFlows'),go=new P[(a0_0x4bc873(0x7be))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[vs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[po]},{'_id':!0x1}),mo=new P[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[vs],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'chatLog':go,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x4bc873(0x808)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'waitingMenu_replyOptions':{'type':[Cs],'default':[]}}),Sa=_0x415fd9=>{const _0x9e1d9e=a0_0x4bc873;let _0x2bb88f='z_'+_0x415fd9+_0x9e1d9e(0x521);return I?.[_0x9e1d9e(0x725)](_0x9e1d9e(0x62d),mo,_0x2bb88f);},fo=new P[(a0_0x4bc873(0x7be))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ga=new P[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),wo=new P[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[ga],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':'scheduled'},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[fo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':ga,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ma=_0x2c842b=>{const _0x418171=a0_0x4bc873;let _0x2ab786='z_'+_0x2c842b+_0x418171(0x6e3);return I?.[_0x418171(0x725)](_0x418171(0x4f1),wo,_0x2ab786);},Es=class{},yo=new P[(a0_0x4bc873(0x7be))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),bo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),So=new P[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Mo=new P[(a0_0x4bc873(0x7be))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':'!stop'},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),Co=new P[(a0_0x4bc873(0x7be))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Eo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'agents':{'type':[Co]},'customFields':{'type':[So]},'flowConfig':{'type':Mo,'default':{}},'flows':{'type':[bo],'default':[]},'autoCompleteMessages':{'type':[yo],'default':[]}}),Ie=I?.[a0_0x4bc873(0x725)](Es[a0_0x4bc873(0x60f)],Eo,a0_0x4bc873(0x5a5)),Ca=require(a0_0x4bc873(0x923)),vo=new Ca[(a0_0x4bc873(0x7be))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Ea=_0x1f6a82=>{const _0x557920=a0_0x4bc873;let _0x220bcb='z_'+_0x1f6a82+'_Labels';return I?.[_0x557920(0x725)](_0x557920(0x64f),vo,_0x220bcb);},_=class{constructor(_0x32cbc8){const _0x51ddc4=a0_0x4bc873;this[_0x51ddc4(0x4ca)]=_0x32cbc8[_0x51ddc4(0x62f)](_0x51ddc4(0x5b9));}};function A(_0x1c0d12){const _0x3ddc10=a0_0x4bc873;let _0x281cfc={};for(let [_0x256d4c,_0x393300]of Object[_0x3ddc10(0x52e)](_0x1c0d12))if(typeof _0x393300==_0x3ddc10(0x801)&&!Array[_0x3ddc10(0x719)](_0x393300)){for(let [_0x2d85b2,_0x1fb22d]of Object[_0x3ddc10(0x52e)](_0x393300))_0x281cfc[_0x256d4c+'.'+_0x2d85b2]=_0x1fb22d;}else _0x281cfc[_0x256d4c]=_0x393300;return _0x281cfc;}var ze=class{constructor(_0x42ef76,_0x552531,_0x1e250f,_0x5d1351,_0x4f7d97,_0x27df63,_0x205b9d,_0x361d4e,_0x5ddb3a,_0x5a1301,_0x33b0fc,_0x53da72,_0x5f2159,_0x41306a){const _0x4cc855=a0_0x4bc873;this[_0x4cc855(0x805)]=_0x42ef76,this[_0x4cc855(0x69a)]=_0x552531,this['contact']=_0x1e250f,this[_0x4cc855(0x813)]=_0x5d1351,this[_0x4cc855(0x29f)]=_0x4f7d97,this['webhook']=_0x27df63,this[_0x4cc855(0x4a9)]=_0x205b9d,this['instance']=_0x361d4e,this['flow']=_0x5ddb3a,this[_0x4cc855(0x43a)]=_0x5a1301,this[_0x4cc855(0x442)]=_0x33b0fc,this[_0x4cc855(0x922)]=_0x53da72,this['automateSystem']=_0x5f2159,this[_0x4cc855(0x75e)]=_0x41306a;}get['dbServer'](){const _0x2bed21=a0_0x4bc873;return this[_0x2bed21(0x75e)];}},He=class{},Ke=class extends _{[a0_0x4bc873(0x6e9)](_0xa405a9){return ca(_0xa405a9);}async[a0_0x4bc873(0x246)](_0x4507cb,_0x278ba2){const _0x42da6f=a0_0x4bc873;if(_0x4507cb[_0x42da6f(0x825)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x42da6f(0x6e9)](_0x278ba2)[_0x42da6f(0x7f9)]([..._0x4507cb]))['length']};}catch(_0x513cf3){return _0x513cf3;}}async[a0_0x4bc873(0x8aa)](_0x2c189f,_0x30d12f){const _0x44fe25=a0_0x4bc873;try{let _0x3b14f2=this[_0x44fe25(0x6e9)](_0x30d12f),_0x264649=A(_0x2c189f['where']);return await _0x3b14f2[_0x44fe25(0x8aa)](_0x264649)['sort']({'messageTimestamp':-0x1})['limit'](_0x2c189f?.[_0x44fe25(0x903)]??0x0)[_0x44fe25(0x439)]();}catch{return[];}}async[a0_0x4bc873(0x4a8)](_0x4dac31,_0x27680c){const _0x3ed776=a0_0x4bc873;try{let _0x1c0fe8=this[_0x3ed776(0x6e9)](_0x27680c),_0x34f295=A(_0x4dac31[_0x3ed776(0x797)]);await _0x1c0fe8[_0x3ed776(0x612)](_0x34f295);}catch(_0x4a8b89){console[_0x3ed776(0x47a)](_0x4a8b89);}}async[a0_0x4bc873(0x275)](_0x363f6d,_0x169a82,_0x4cd3ac){const _0x4a171c=a0_0x4bc873;try{let _0x3fe23f=this[_0x4a171c(0x6e9)](_0x4cd3ac),_0xf66fcb=A(_0x363f6d[_0x4a171c(0x797)]);return await _0x3fe23f[_0x4a171c(0x39d)](_0xf66fcb,{'$set':_0x169a82},{'new':!0x0});}catch(_0x4e47a3){throw console[_0x4a171c(0x47a)](_0x4e47a3),_0x4e47a3;}}async[a0_0x4bc873(0x7f9)](_0x27e4ca,_0x4e93de){const _0x32398a=a0_0x4bc873;if(_0x27e4ca['length']===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x32398a(0x6e9)](_0x4e93de)[_0x32398a(0x7f9)]([..._0x27e4ca]))[_0x32398a(0x825)]};}catch(_0x2d3b63){return console[_0x32398a(0x6d2)]('ERROR:\x20',_0x2d3b63),_0x2d3b63;}}async[a0_0x4bc873(0x665)](_0x55f22a){const _0x5a0734=a0_0x4bc873;try{return await this[_0x5a0734(0x6e9)](_0x55f22a)[_0x5a0734(0x2a6)]['drop'](),{'success':!0x0};}catch(_0xf50e3c){return console[_0x5a0734(0x47a)](_0xf50e3c),{'success':!0x1,'error':_0xf50e3c};}}},Ps=T(require(a0_0x4bc873(0x405))),w=T(require(a0_0x4bc873(0x8d6))),Le=require('fs'),j=T(require('path')),Q=T(require(a0_0x4bc873(0x6cb))),Ii=require(a0_0x4bc873(0x787)),Ti=T(require('qrcode')),_i=T(require('qrcode-terminal')),va=['imageMessage',a0_0x4bc873(0x861),a0_0x4bc873(0x93e),'videoMessage',a0_0x4bc873(0x49a)],Na=['ephemeralMessage',a0_0x4bc873(0x557),a0_0x4bc873(0x50c),a0_0x4bc873(0x8bd)],Ds=require('os'),Ft=T(require(a0_0x4bc873(0x833))),Fe=require('child_process'),Oi=require('node-mime-types'),ge=T(require(a0_0x4bc873(0x923))),J=require(a0_0x4bc873(0x383)),ue=class{constructor(_0x5913e2,_0x459f10,_0xff0f3b){const _0x54c960=a0_0x4bc873;this[_0x54c960(0x82f)]=_0x5913e2,this['exists']=_0x459f10,this[_0x54c960(0x60f)]=_0xff0f3b;}},Qe=class{},Ye=class{},Te=class{},Xe=class{},Ze=class{},Ee=class{},et=class{},tt=class{},st=class{},at=class{},Ot=T(require(a0_0x4bc873(0x6a5))),$a=require('fs'),Ra=require(a0_0x4bc873(0x8f3));async function _e(_0x2291ed){const _0x4ed21f=a0_0x4bc873;let _0x32de20=G['waInstances'][_0x2291ed];if(L['ENABLED']){let _0x27e621=I[_0x4ed21f(0x6db)]()['db'](L['CONNECTION']['DB_PREFIX_NAME']+_0x4ed21f(0x6e5))[_0x4ed21f(0x2a6)](_0x2291ed);return _0x32de20||(await _0x27e621[_0x4ed21f(0x8aa)]({})[_0x4ed21f(0x207)]())[_0x4ed21f(0x825)]>0x0;}return _0x32de20||(0x0,$a['existsSync'])((0x0,Ra[_0x4ed21f(0x6a2)])(Se,_0x2291ed));}async function Aa(_0x56714d,_0x3af6a1,_0x333f96){const _0x2143e7=a0_0x4bc873;if(_0x56714d['originalUrl'][_0x2143e7(0x5f5)]('/instance/create')||_0x56714d[_0x2143e7(0x4e8)][_0x2143e7(0x5f5)](_0x2143e7(0x210))||_0x56714d['originalUrl'][_0x2143e7(0x5f5)]('/exit')||_0x56714d[_0x2143e7(0x4e8)][_0x2143e7(0x5f5)]('/config')||_0x56714d[_0x2143e7(0x4e8)][_0x2143e7(0x5f5)]('/instance/connect')||_0x56714d[_0x2143e7(0x4e8)]['includes'](_0x2143e7(0x7ea))||_0x56714d['originalUrl'][_0x2143e7(0x5f5)]('/instance/delete'))return _0x333f96();let _0x45e26f=_0x56714d[_0x2143e7(0x753)];if(!_0x45e26f?.[_0x2143e7(0x616)])throw new m(_0x2143e7(0x79b));if(!await _e(_0x45e26f[_0x2143e7(0x616)]))throw new U('The\x20'+_0x45e26f[_0x2143e7(0x616)]+_0x2143e7(0x34d));_0x333f96();}async function Ia(_0x5d1b14,_0x1859ae,_0x3424b1){const _0x57c26c=a0_0x4bc873;if(_0x5d1b14[_0x57c26c(0x4e8)]['includes']('/instance/create')){let _0x322428=_0x5d1b14[_0x57c26c(0x8a3)];if(await _e(_0x322428[_0x57c26c(0x616)]))throw new Z(_0x57c26c(0x8af)+_0x322428[_0x57c26c(0x616)]+'\x20is\x20already\x20in\x20use.');G['waInstances'][_0x322428[_0x57c26c(0x616)]]&&delete G[_0x57c26c(0x7d7)][_0x322428['instanceName']];}_0x3424b1();}var Ta=require('class-validator'),_a=T(require(a0_0x4bc873(0x8cd))),it=a0_0x4bc873(0x473),$o=new $(a0_0x4bc873(0x912));async function Ro(_0x147588,_0x710969,_0x2002da){const _0x55cd2f=a0_0x4bc873;let _0x3f5058=_0x147588[_0x55cd2f(0x62f)](_0x55cd2f(0x393));if(_0x3f5058&&S['get'](_0x55cd2f(0x66f))['API_KEY'][_0x55cd2f(0x2bd)]!==_0x3f5058)throw new ie();if(S['get']('AUTHENTICATION')[_0x55cd2f(0x90a)]['KEY']===_0x3f5058)return _0x2002da();if((_0x147588[_0x55cd2f(0x4e8)]['includes']('/instance/create')||_0x147588[_0x55cd2f(0x4e8)][_0x55cd2f(0x5f5)]('/instance/fetchInstances'))&&!_0x3f5058)throw new Z(_0x55cd2f(0x607),_0x55cd2f(0x38b));let _0xbf3020=S[_0x55cd2f(0x62f)](_0x55cd2f(0x66f))[_0x55cd2f(0x71b)];try{let [_0x502145,_0x30ed4f]=_0x147588[_0x55cd2f(0x62f)]('authorization')[_0x55cd2f(0x51b)]('\x20');if(_0x502145[_0x55cd2f(0x511)]()!==_0x55cd2f(0x6ff))throw new ie();if(!(0x0,Ta[_0x55cd2f(0x911)])(_0x30ed4f))throw new ie();let _0x31ef6f=_0x147588[_0x55cd2f(0x753)],_0x346598=_a['default'][_0x55cd2f(0x45b)](_0x30ed4f,_0xbf3020[_0x55cd2f(0x7ef)],{'ignoreExpiration':_0xbf3020['EXPIRIN_IN']===0x0});if(_0x31ef6f[_0x55cd2f(0x616)]!==_0x346598['instanceName']||it!==_0x346598[_0x55cd2f(0x499)])throw new ie();return _0x2002da();}catch(_0xa1ff49){throw $o[_0x55cd2f(0x47a)](_0xa1ff49),new ie();}}async function Ao(_0x13a182,_0x5ef6a1,_0x57feee){const _0x1b10b6=a0_0x4bc873;let _0x36dd85=S[_0x1b10b6(0x62f)](_0x1b10b6(0x66f))['API_KEY'],_0x3cd3d3=_0x13a182[_0x1b10b6(0x62f)]('apikey');if(_0x36dd85[_0x1b10b6(0x2bd)]===_0x3cd3d3)return _0x57feee();if(_0x13a182[_0x1b10b6(0x4e8)]['includes'](_0x1b10b6(0x91b))){let _0x16d9ad=xa,_0x3edc2c=_0x13a182[_0x1b10b6(0x8a3)][_0x1b10b6(0x616)];if(_0x16d9ad&&_0x3edc2c[_0x1b10b6(0x511)]()[_0x1b10b6(0x668)](_0x16d9ad[_0x1b10b6(0x511)]()))return _0x57feee();if(!_0x3cd3d3)throw new Z(_0x1b10b6(0x607),_0x1b10b6(0x38b));}if(_0x13a182['originalUrl'][_0x1b10b6(0x5f5)]('/instance/fetchInstances')&&!_0x3cd3d3)throw new Z(_0x1b10b6(0x607),_0x1b10b6(0x38b));if(_0x13a182['originalUrl'][_0x1b10b6(0x5f5)](_0x1b10b6(0x318))&&!_0x3cd3d3)throw new Z('Missing\x20global\x20api\x20key',_0x1b10b6(0x38b));if(_0x13a182[_0x1b10b6(0x4e8)][_0x1b10b6(0x5f5)](_0x1b10b6(0x5c5))&&!_0x3cd3d3)throw new Z(_0x1b10b6(0x607),_0x1b10b6(0x38b));try{let _0x179f6d=_0x13a182[_0x1b10b6(0x753)],_0x5e7884=await fe[_0x1b10b6(0x4a9)][_0x1b10b6(0x8aa)](_0x179f6d['instanceName']);if(_0x5e7884&&_0x5e7884[_0x1b10b6(0x393)]===_0x3cd3d3)return _0x57feee();}catch{}throw new ie();}var Oa={'jwt':Ro,'apikey':Ao},pi=require(a0_0x4bc873(0x6a5)),C=require(a0_0x4bc873(0x787)),E=(..._0xe2d0cc)=>{const _0x3d4714=a0_0x4bc873;let _0x3e1266={};return _0xe2d0cc[_0x3d4714(0x426)](_0x3620bb=>_0x3e1266[_0x3620bb]={'minLength':0x1,'description':_0x3d4714(0x309)+_0x3620bb+_0x3d4714(0x57e)}),{'if':{'propertyNames':{'enum':[..._0xe2d0cc]}},'then':{'properties':_0x3e1266}};},N={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'instanceName':{'type':a0_0x4bc873(0x792)}},...E(a0_0x4bc873(0x616))},Rc={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'oldToken':{'type':'string'}},'required':[a0_0x4bc873(0x6de)],...E(a0_0x4bc873(0x6de))},Ac={'properties':{'key':{'type':'object','properties':{'id':{'type':a0_0x4bc873(0x792)},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]}},'required':['id',a0_0x4bc873(0x8d4),a0_0x4bc873(0x45e)],...E('id',a0_0x4bc873(0x8d4))},'message':{'type':a0_0x4bc873(0x801)}}},oe={'properties':{'delay':{'type':a0_0x4bc873(0x497),'description':'Enter\x20a\x20value\x20in\x20milliseconds'},'presence':{'type':a0_0x4bc873(0x792),'enum':['unavailable','available','composing',a0_0x4bc873(0x3a1),a0_0x4bc873(0x78c)]}}},ee={'type':'string','description':'Invalid\x20format'},Pa={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...ee},'options':{...oe},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x23c)],...E(a0_0x4bc873(0x23c))}},'required':[a0_0x4bc873(0x7a0),a0_0x4bc873(0x8e3)]},Da={'type':a0_0x4bc873(0x792),'pattern':a0_0x4bc873(0x5af),'description':a0_0x4bc873(0x611)},Ic={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...Da},'options':{...oe},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x23c)],...E(a0_0x4bc873(0x23c))}},'required':['textMessage',a0_0x4bc873(0x8e3)]},Tc={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...Da},'options':{...oe},'mediaMessage':{'type':a0_0x4bc873(0x801),'properties':{'mediatype':{'type':a0_0x4bc873(0x792),'enum':[a0_0x4bc873(0x8ed),'document','video',a0_0x4bc873(0x77a)]},'media':{'type':a0_0x4bc873(0x792)},'fileName':{'type':a0_0x4bc873(0x792)},'caption':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x6aa),a0_0x4bc873(0x8c3)],...E('fileName',a0_0x4bc873(0x52b),a0_0x4bc873(0x8c3))}},'required':[a0_0x4bc873(0x817),'number']},ka={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...ee},'options':{...oe},'stickerMessage':{'type':a0_0x4bc873(0x801),'properties':{'image':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x8ed)],...E('image')}},'required':[a0_0x4bc873(0x49a),'number']},La={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'statusMessage':{'type':a0_0x4bc873(0x801),'properties':{'type':{'type':a0_0x4bc873(0x792),'enum':[a0_0x4bc873(0x23c),a0_0x4bc873(0x8ed),'audio','video']},'content':{'type':a0_0x4bc873(0x792)},'caption':{'type':a0_0x4bc873(0x792)},'backgroundColor':{'type':a0_0x4bc873(0x792)},'font':{'type':a0_0x4bc873(0x497),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x4bc873(0x338),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4bc873(0x792),'pattern':'^\x5cd+','description':'\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}},'allContacts':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]}},'required':['type',a0_0x4bc873(0x565)],...E(a0_0x4bc873(0x8c8),'content')}},'required':[a0_0x4bc873(0x910)]},Fa={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...ee},'options':{...oe},'mediaMessage':{'type':a0_0x4bc873(0x801),'properties':{'mediatype':{'type':a0_0x4bc873(0x792),'enum':[a0_0x4bc873(0x8ed),a0_0x4bc873(0x8df),'video',a0_0x4bc873(0x77a)]},'media':{'type':a0_0x4bc873(0x792)},'fileName':{'type':'string'},'caption':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x6aa),'media'],...E(a0_0x4bc873(0x36d),'caption','media')}},'required':[a0_0x4bc873(0x817),a0_0x4bc873(0x8e3)]},Ua={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...ee},'options':{...oe},'audioMessage':{'type':a0_0x4bc873(0x801),'properties':{'audio':{'type':a0_0x4bc873(0x792)}},'required':['audio'],...E(a0_0x4bc873(0x77a))}},'required':['audioMessage',a0_0x4bc873(0x8e3)]},ja={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...ee},'pollMessage':{'type':'object','properties':{'name':{'type':a0_0x4bc873(0x792)},'selectableCount':{'type':a0_0x4bc873(0x8e3)},'values':{'type':a0_0x4bc873(0x338),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x4bc873(0x60f),a0_0x4bc873(0x31a),a0_0x4bc873(0x5b2)],...E('name',a0_0x4bc873(0x31a),a0_0x4bc873(0x5b2))}},'required':[a0_0x4bc873(0x8e3),'pollMessage']},Ja={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...ee},'menuMessage':{'type':a0_0x4bc873(0x801),'properties':{'text':{'type':a0_0x4bc873(0x792)},'choices':{'type':a0_0x4bc873(0x338),'uniqueItems':!0x0}},'required':[a0_0x4bc873(0x23c),a0_0x4bc873(0x5dd)],...E(a0_0x4bc873(0x23c),'choices')}},'required':['number',a0_0x4bc873(0x299)]},qa={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...ee},'options':{...oe},'locationMessage':{'type':a0_0x4bc873(0x801),'properties':{'latitude':{'type':a0_0x4bc873(0x8e3)},'longitude':{'type':a0_0x4bc873(0x8e3)},'name':{'type':a0_0x4bc873(0x792)},'address':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x551),a0_0x4bc873(0x38d)],...E('name','addresss')}},'required':[a0_0x4bc873(0x8e3),a0_0x4bc873(0x771)]},Va={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...ee},'options':{...oe},'listMessage':{'type':a0_0x4bc873(0x801),'properties':{'title':{'type':a0_0x4bc873(0x792)},'description':{'type':a0_0x4bc873(0x792)},'footerText':{'type':a0_0x4bc873(0x792)},'buttonText':{'type':'string'},'sections':{'type':a0_0x4bc873(0x338),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':'string'},'rows':{'type':a0_0x4bc873(0x338),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':'string'},'description':{'type':'string'},'rowId':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x33a),a0_0x4bc873(0x803)],...E(a0_0x4bc873(0x33a),'rowId')}}},'required':[a0_0x4bc873(0x33a),a0_0x4bc873(0x93a)],...E(a0_0x4bc873(0x33a))}}},'required':[a0_0x4bc873(0x33a),a0_0x4bc873(0x2e5),a0_0x4bc873(0x6c7),a0_0x4bc873(0x49d)],...E(a0_0x4bc873(0x33a),a0_0x4bc873(0x2e5),a0_0x4bc873(0x6c7),a0_0x4bc873(0x3c1))}},'required':[a0_0x4bc873(0x8e3),a0_0x4bc873(0x3d5)]},Ga={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...ee},'options':{...oe},'contactMessage':{'type':'array','items':{'type':a0_0x4bc873(0x801),'properties':{'fullName':{'type':a0_0x4bc873(0x792)},'phoneNumber':{'type':a0_0x4bc873(0x792),'minLength':0xa}},'required':['fullName',a0_0x4bc873(0x282)],...E(a0_0x4bc873(0x75d))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x4bc873(0x8e3),a0_0x4bc873(0x688)]},Ba={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'reactionMessage':{'type':a0_0x4bc873(0x801),'properties':{'key':{'type':a0_0x4bc873(0x801),'properties':{'id':{'type':a0_0x4bc873(0x792)},'remoteJid':{'type':a0_0x4bc873(0x792)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x4bc873(0x45e)],...E('id',a0_0x4bc873(0x8d4))},'reaction':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x678),a0_0x4bc873(0x8ba)],...E(a0_0x4bc873(0x8ba))}},'required':[a0_0x4bc873(0x7f8)]},Wa={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'numbers':{'type':a0_0x4bc873(0x338),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x4bc873(0x3d6),'description':a0_0x4bc873(0x935)}}}},za={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'readMessages':{'type':a0_0x4bc873(0x338),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x4bc873(0x792)},'fromMe':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x4bc873(0x792)}},'required':['id',a0_0x4bc873(0x45e),a0_0x4bc873(0x8d4)],...E('id','remoteJid')}}},'required':[a0_0x4bc873(0x596)]},Ha={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'privacySettings':{'type':a0_0x4bc873(0x801),'properties':{'readreceipts':{'type':a0_0x4bc873(0x792),'enum':[a0_0x4bc873(0x844),a0_0x4bc873(0x360)]},'profile':{'type':'string','enum':[a0_0x4bc873(0x844),a0_0x4bc873(0x734),a0_0x4bc873(0x72f),a0_0x4bc873(0x360)]},'status':{'type':'string','enum':[a0_0x4bc873(0x844),'contacts',a0_0x4bc873(0x72f),a0_0x4bc873(0x360)]},'online':{'type':a0_0x4bc873(0x792),'enum':['all','match_last_seen']},'last':{'type':a0_0x4bc873(0x792),'enum':[a0_0x4bc873(0x844),a0_0x4bc873(0x734),a0_0x4bc873(0x72f),'none']},'groupadd':{'type':a0_0x4bc873(0x792),'enum':[a0_0x4bc873(0x844),a0_0x4bc873(0x734),'contact_blacklist',a0_0x4bc873(0x360)]}},'required':[a0_0x4bc873(0x369),a0_0x4bc873(0x566),a0_0x4bc873(0x4ed),a0_0x4bc873(0x709),a0_0x4bc873(0x7b2),'groupadd'],...E(a0_0x4bc873(0x369),'profile',a0_0x4bc873(0x4ed),a0_0x4bc873(0x709),a0_0x4bc873(0x7b2),'groupadd')}},'required':['privacySettings']},Ka={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'lastMessage':{'type':'object','properties':{'key':{'type':a0_0x4bc873(0x801),'properties':{'id':{'type':'string'},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]}},'required':['id','fromMe',a0_0x4bc873(0x8d4)],...E('id',a0_0x4bc873(0x8d4))},'messageTimestamp':{'type':a0_0x4bc873(0x497),'minLength':0x1}},'required':['key'],...E('messageTimestamp')},'archive':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['lastMessage','archive']},Qa={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'id':{'type':a0_0x4bc873(0x792)},'fromMe':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x4bc873(0x792)},'participant':{'type':'string'}},'required':['id',a0_0x4bc873(0x45e),'remoteJid'],...E('id',a0_0x4bc873(0x8d4),a0_0x4bc873(0x406))},Ya={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x4bc873(0x792),'minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':a0_0x4bc873(0x792),'minLength':0x1}},...E(a0_0x4bc873(0x618),'id',a0_0x4bc873(0x687))}}},Xa={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'name':{'type':a0_0x4bc873(0x792)}},...E(a0_0x4bc873(0x60f))},Za={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'status':{'type':a0_0x4bc873(0x792)}},...E(a0_0x4bc873(0x4ed))},Oe={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{'type':'string'},'picture':{'type':a0_0x4bc873(0x792)}}},ei={'type':a0_0x4bc873(0x801),'properties':{'wuid':{'type':'string'},'name':{'type':'string'},'picture':{'type':a0_0x4bc873(0x792)},'status':{'type':a0_0x4bc873(0x792)},'isBusiness':{'type':'boolean'}}},ti={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'where':{'type':a0_0x4bc873(0x801),'properties':{'_id':{'type':a0_0x4bc873(0x792),'minLength':0x1},'key':{'type':a0_0x4bc873(0x801),'if':{'propertyNames':{'enum':[a0_0x4bc873(0x45e),a0_0x4bc873(0x8d4),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x4bc873(0x792),'minLength':0x1,'description':a0_0x4bc873(0x4ef)},'id':{'type':a0_0x4bc873(0x792),'minLength':0x1,'description':a0_0x4bc873(0x4ef)},'fromMe':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x4bc873(0x801)}},...E(a0_0x4bc873(0x618))},'limit':{'type':'integer'}}},_c={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'where':{'type':a0_0x4bc873(0x801),'properties':{'_id':{'type':a0_0x4bc873(0x792)},'remoteJid':{'type':'string'},'id':{'type':a0_0x4bc873(0x792)},'fromMe':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x4bc873(0x792)},'status':{'type':'string','enum':['ERROR','PENDING','SERVER_ACK',a0_0x4bc873(0x4c0),a0_0x4bc873(0x599),a0_0x4bc873(0x1e3)]}},...E(a0_0x4bc873(0x618),a0_0x4bc873(0x8d4),'id',a0_0x4bc873(0x4ed))},'limit':{'type':a0_0x4bc873(0x497)}}},si={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'number':{...ee},'presence':{'type':a0_0x4bc873(0x792),'enum':[a0_0x4bc873(0x494),'available',a0_0x4bc873(0x937),a0_0x4bc873(0x3a1),'paused']}},'required':[a0_0x4bc873(0x689),a0_0x4bc873(0x8e3)]},ai={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'subject':{'type':'string'},'description':{'type':a0_0x4bc873(0x792)},'profilePicture':{'type':a0_0x4bc873(0x792)},'participants':{'type':a0_0x4bc873(0x338),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4bc873(0x792),'minLength':0xa,'pattern':a0_0x4bc873(0x89c),'description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':[a0_0x4bc873(0x72e),a0_0x4bc873(0x5ea)],...E(a0_0x4bc873(0x72e),a0_0x4bc873(0x2e5),a0_0x4bc873(0x828))},xe={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x4bc873(0x792),'pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':['groupJid'],...E(a0_0x4bc873(0x31d))},ii={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'groupJid':{'type':a0_0x4bc873(0x792)},'action':{'type':'string','enum':[a0_0x4bc873(0x840),a0_0x4bc873(0x32f),a0_0x4bc873(0x8e1),a0_0x4bc873(0x76f),a0_0x4bc873(0x8b2),'approve']},'participants':{'type':a0_0x4bc873(0x338),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x4bc873(0x89c),'description':a0_0x4bc873(0x26b)}}},'required':[a0_0x4bc873(0x31d),'action',a0_0x4bc873(0x5ea)],...E(a0_0x4bc873(0x31d),a0_0x4bc873(0x53b))},oi={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'groupJid':{'type':'string'},'expiration':{'type':'number','enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':['groupJid','expiration'],...E(a0_0x4bc873(0x31d),'expiration')},ri={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'groupJid':{'type':a0_0x4bc873(0x792)},'image':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x31d),a0_0x4bc873(0x8ed)],...E('groupJid',a0_0x4bc873(0x8ed))},ni={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'groupJid':{'type':'string'},'description':{'type':'string'}},'required':[a0_0x4bc873(0x31d),a0_0x4bc873(0x2e5)],...E(a0_0x4bc873(0x31d),'description')},ci={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'groupJid':{'type':a0_0x4bc873(0x792)},'name':{'type':'string'}},'required':['groupJid',a0_0x4bc873(0x60f)],...E(a0_0x4bc873(0x31d),'name')},li={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'groupJid':{'type':a0_0x4bc873(0x792)},'setting':{'type':'string','enum':[a0_0x4bc873(0x900),'not_announcement',a0_0x4bc873(0x8ee),a0_0x4bc873(0x440)]}},'required':['groupJid',a0_0x4bc873(0x8f0)],...E(a0_0x4bc873(0x31d),'setting')},ui={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'groupJid':{'type':a0_0x4bc873(0x792)},'restrict':{'type':a0_0x4bc873(0x890)},'announce':{'type':a0_0x4bc873(0x890)},'memberAddMode':{'type':a0_0x4bc873(0x890)},'joinApprovalMode':{'type':a0_0x4bc873(0x890)},'expiration':{'type':a0_0x4bc873(0x497),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x4bc873(0x792)},'description':{'type':'string'},'image':{'type':a0_0x4bc873(0x792)}}},Ns={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'inviteCode':{'type':a0_0x4bc873(0x792)}},'required':[a0_0x4bc873(0x6fc)],...E(a0_0x4bc873(0x6fc))},di={'$id':(0x0,C['v4'])(),'type':a0_0x4bc873(0x801),'properties':{'url':{'type':a0_0x4bc873(0x792)},'enabled':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]}},'required':[a0_0x4bc873(0x8ab),'enabled']},Oc={'$id':(0x0,C['v4'])(),'type':'object','properties':{'local_map':{'type':'boolean','enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x4bc873(0x890),'enum':[!0x0,!0x1]}},'required':[a0_0x4bc873(0x6f0),a0_0x4bc873(0x4d4),'QRCODE_UPDATED',a0_0x4bc873(0x6b7),a0_0x4bc873(0x681),a0_0x4bc873(0x4ea),a0_0x4bc873(0x58f),'CONTACTS_SET',a0_0x4bc873(0x39b),a0_0x4bc873(0x4c5),'PRESENCE_UPDATE',a0_0x4bc873(0x714),a0_0x4bc873(0x622),a0_0x4bc873(0x659),'CHATS_DELETE','CONNECTION_UPDATE','GROUPS_UPSERT','GROUPS_UPDATE',a0_0x4bc873(0x208)],...E(a0_0x4bc873(0x6f0),a0_0x4bc873(0x4d4),a0_0x4bc873(0x3a5),'MESSAGES_SET',a0_0x4bc873(0x681),a0_0x4bc873(0x4ea),a0_0x4bc873(0x58f),a0_0x4bc873(0x22e),'CONTACTS_UPSERT',a0_0x4bc873(0x4c5),a0_0x4bc873(0x6d4),a0_0x4bc873(0x714),a0_0x4bc873(0x622),'CHATS_UPDATE','CHATS_DELETE',a0_0x4bc873(0x7d8),'GROUPS_UPSERT',a0_0x4bc873(0x354),a0_0x4bc873(0x208))},ot=class{},rt=class extends _{[a0_0x4bc873(0x8fb)](_0x5bc4e7){return aa(_0x5bc4e7);}async['insert'](_0x638545){const _0x504b03=a0_0x4bc873;if(_0x638545[_0x504b03(0x825)]!==0x0)try{return{'insertCount':(await this['getContactModelForOwner'](_0x638545[0x0][_0x504b03(0x6dd)])['insertMany']([..._0x638545]))[_0x504b03(0x825)]};}catch(_0x30b2f7){return _0x30b2f7;}}async['delete'](_0x1f8086,_0x1ef5a2){const _0x3d9b66=a0_0x4bc873;try{return{'deletedCount':(await this[_0x3d9b66(0x8fb)](_0x1ef5a2)[_0x3d9b66(0x612)]({..._0x1f8086[_0x3d9b66(0x797)]}))[_0x3d9b66(0x44f)]};}catch(_0x43dc3b){return{'error':_0x43dc3b?.[_0x3d9b66(0x529)]()};}}async[a0_0x4bc873(0x275)](_0x55385b,_0x2eaa99){const _0x107c6d=a0_0x4bc873;try{if(_0x55385b[_0x107c6d(0x825)]===0x0)return;let _0x32e1b6=this[_0x107c6d(0x8fb)](_0x2eaa99),_0xa0bfac=_0x55385b[_0x107c6d(0x347)](_0x4a6cde=>({'updateOne':{'filter':{'_id':_0x4a6cde['_id'],'owner':_0x2eaa99},'update':{..._0x4a6cde}}})),{modifiedCount:_0x252cde}=await _0x32e1b6[_0x107c6d(0x5f2)](_0xa0bfac);return{'insertCount':_0x252cde};}catch{return;}}async[a0_0x4bc873(0x8aa)](_0x513a18,_0x88c366){const _0x27fa62=a0_0x4bc873;try{let _0x5b8135=this[_0x27fa62(0x8fb)](_0x88c366),_0x46fbee=A(_0x513a18[_0x27fa62(0x797)]);return await _0x5b8135[_0x27fa62(0x8aa)](_0x46fbee)[_0x27fa62(0x903)](_0x513a18?.[_0x27fa62(0x903)]??0x0)[_0x27fa62(0x439)]();}catch{return[];}}async[a0_0x4bc873(0x6e7)](_0x57ad71,_0x1febf3){const _0x5aefa0=a0_0x4bc873;try{let _0xb500fe=this[_0x5aefa0(0x8fb)](_0x1febf3),_0x39f029=A(_0x57ad71[_0x5aefa0(0x797)]);return await _0xb500fe[_0x5aefa0(0x6e7)](_0x39f029)[_0x5aefa0(0x439)]();}catch{return null;}}async['deleteAll'](_0x4a130b){const _0x3807a0=a0_0x4bc873;try{return await this[_0x3807a0(0x8fb)](_0x4a130b)[_0x3807a0(0x2a6)][_0x3807a0(0x260)](),{'success':!0x0};}catch(_0x390318){return console[_0x3807a0(0x47a)](_0x390318),{'success':!0x1,'error':_0x390318};}}},nt=require('jsonschema'),Jc=require('express-async-errors'),$s=new $(a0_0x4bc873(0x3a7)),V=class{['routerPath'](_0x1c3099,_0x42f892=!0x0){const _0x2f3b91=a0_0x4bc873;let _0x201d2d='/'+_0x1c3099;return _0x42f892&&(_0x201d2d+=_0x2f3b91(0x933)),_0x201d2d;}async['dataValidate'](_0x4efa9b){const _0x499243=a0_0x4bc873;let {request:_0x377d07,schema:_0x2f5c86,ClassRef:_0x1e55c5,execute:_0x151420}=_0x4efa9b,_0x2bc149=new _0x1e55c5(),_0x21ac5c=_0x377d07['body'],_0x65469e=_0x377d07['params'];_0x377d07?.[_0x499243(0x2a0)]&&Object['keys'](_0x377d07[_0x499243(0x2a0)])['length']>0x0&&Object['assign'](_0x65469e,_0x377d07[_0x499243(0x2a0)]),_0x377d07[_0x499243(0x4e8)][_0x499243(0x5f5)]('/instance/create')&&Object[_0x499243(0x310)](_0x65469e,_0x21ac5c),Object[_0x499243(0x310)](_0x2bc149,_0x21ac5c);let _0x225cda=_0x2f5c86?(0x0,nt['validate'])(_0x2bc149,_0x2f5c86):{'valid':!0x0,'errors':[]};if(!_0x225cda[_0x499243(0x55d)]){let _0x5c171f=_0x225cda[_0x499243(0x876)][_0x499243(0x347)](({property:_0x1aae2c,stack:_0x25b1ed,schema:_0x2170d3})=>{const _0x4bc6f6=_0x499243;let _0x51d5c3;return _0x2170d3['description']?_0x51d5c3=_0x2170d3[_0x4bc6f6(0x2e5)]:_0x51d5c3=_0x25b1ed[_0x4bc6f6(0x242)]('instance.',''),{'property':_0x1aae2c[_0x4bc6f6(0x242)](_0x4bc6f6(0x669),''),'message':_0x51d5c3};});throw $s['error']([..._0x5c171f]),new m(..._0x5c171f);}return await _0x151420(_0x65469e,_0x2bc149);}async[a0_0x4bc873(0x711)](_0xa965da){const _0x3580b2=a0_0x4bc873;let {request:_0x4508d7,ClassRef:_0x312ca0,schema:_0x32b344,execute:_0x1b1805}=_0xa965da,_0x3081fc=_0x4508d7[_0x3580b2(0x2a0)];if(!_0x3081fc?.[_0x3580b2(0x31d)])throw new m(_0x3580b2(0x2c8),_0x3580b2(0x705));let _0x3e599a=_0x4508d7[_0x3580b2(0x753)],_0x2701a8=_0x4508d7[_0x3580b2(0x8a3)],_0x141927=new _0x312ca0();Object['assign'](_0x2701a8,_0x3081fc),Object[_0x3580b2(0x310)](_0x141927,_0x2701a8);let _0x2762ad=(0x0,nt[_0x3580b2(0x3bf)])(_0x141927,_0x32b344);if(!_0x2762ad[_0x3580b2(0x55d)]){let _0x70aed7=_0x2762ad[_0x3580b2(0x876)][_0x3580b2(0x347)](({property:_0x4ce5d3,stack:_0x51c584,schema:_0x5a8d72})=>{const _0xb63109=_0x3580b2;let _0x250df4;return _0x5a8d72[_0xb63109(0x2e5)]?_0x250df4=_0x5a8d72[_0xb63109(0x2e5)]:_0x250df4=_0x51c584['replace'](_0xb63109(0x669),''),{'property':_0x4ce5d3[_0xb63109(0x242)](_0xb63109(0x669),''),'message':_0x250df4};});throw $s[_0x3580b2(0x47a)]([..._0x70aed7]),new m(..._0x70aed7);}return await _0x1b1805(_0x3e599a,_0x141927);}async['joinGroupValidate'](_0xe7f356){const _0x33fa62=a0_0x4bc873;let {request:_0x2dd714,ClassRef:_0x447521,schema:_0x3b4252,execute:_0x44b4ea}=_0xe7f356,_0x5b6f05=_0x2dd714[_0x33fa62(0x8a3)];if(!_0x5b6f05?.['inviteCode'])throw new m('The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22');let _0x3b0651=_0x2dd714[_0x33fa62(0x753)],_0x3f1271=_0x2dd714[_0x33fa62(0x8a3)],_0x1e21ec=new _0x447521();Object[_0x33fa62(0x310)](_0x3f1271,_0x5b6f05),Object['assign'](_0x1e21ec,_0x3f1271);let _0x6affbd=(0x0,nt['validate'])(_0x1e21ec,_0x3b4252);if(!_0x6affbd[_0x33fa62(0x55d)]){let _0x45deec=_0x6affbd[_0x33fa62(0x876)][_0x33fa62(0x347)](({property:_0xcd84b5,stack:_0x4eefee,schema:_0x511185})=>{const _0x3f79b3=_0x33fa62;let _0x2131f0;return _0x511185[_0x3f79b3(0x2e5)]?_0x2131f0=_0x511185[_0x3f79b3(0x2e5)]:_0x2131f0=_0x4eefee[_0x3f79b3(0x242)]('instance.',''),{'property':_0xcd84b5[_0x3f79b3(0x242)](_0x3f79b3(0x669),''),'message':_0x2131f0};});throw $s[_0x33fa62(0x47a)]([..._0x45deec]),new m(..._0x45deec);}return await _0x44b4ea(_0x3b0651,_0x1e21ec);}},M=class{},sl=new $(a0_0x4bc873(0x49c)),ct=class extends V{constructor(..._0x20bff8){const _0x2841e5=a0_0x4bc873;super(),this[_0x2841e5(0x8da)]=(0x0,pi[_0x2841e5(0x327)])(),this[_0x2841e5(0x8da)][_0x2841e5(0x4bd)](this[_0x2841e5(0x39f)](_0x2841e5(0x27d)),..._0x20bff8,async(_0x3bd4ad,_0x1b3f53)=>{const _0x532f9a=_0x2841e5;let _0x25b389=await this[_0x532f9a(0x884)]({'request':_0x3bd4ad,'schema':si,'ClassRef':Qe,'execute':(_0x14b2de,_0x191b80)=>D[_0x532f9a(0x27d)](_0x14b2de,_0x191b80)});return _0x1b3f53[_0x532f9a(0x4ed)](0xc9)[_0x532f9a(0x2e2)](_0x25b389);})[_0x2841e5(0x4bd)](this[_0x2841e5(0x39f)]('whatsappNumbers'),..._0x20bff8,async(_0x434c48,_0x1fc7c)=>{const _0xa4fdc5=_0x2841e5;let _0x403722=await this[_0xa4fdc5(0x884)]({'request':_0x434c48,'schema':Wa,'ClassRef':Ye,'execute':(_0x39f3d8,_0x5bda94)=>D[_0xa4fdc5(0x71c)](_0x39f3d8,_0x5bda94)});return _0x1fc7c[_0xa4fdc5(0x4ed)](0xc9)[_0xa4fdc5(0x2e2)](_0x403722);})['post'](this[_0x2841e5(0x39f)]('editChat'),..._0x20bff8,async(_0x3952b6,_0x52aa39)=>{const _0x185110=_0x2841e5;let _0x45b779=await this[_0x185110(0x884)]({'request':_0x3952b6,'schema':N,'ClassRef':M,'execute':(_0x268277,_0xa3ac4b)=>D[_0x185110(0x7f3)](_0x268277,_0xa3ac4b)});return _0x52aa39[_0x185110(0x4ed)](0xc9)['json'](_0x45b779);})['put'](this[_0x2841e5(0x39f)](_0x2841e5(0x325)),..._0x20bff8,async(_0x177835,_0x18d047)=>{const _0x4afa32=_0x2841e5;let _0x3913a8=await this[_0x4afa32(0x884)]({'request':_0x177835,'schema':za,'ClassRef':et,'execute':(_0x31d319,_0x4db140)=>D[_0x4afa32(0x7c9)](_0x31d319,_0x4db140)});return _0x18d047[_0x4afa32(0x4ed)](0xc9)[_0x4afa32(0x2e2)](_0x3913a8);})[_0x2841e5(0x3de)](this[_0x2841e5(0x39f)](_0x2841e5(0x8fd)),..._0x20bff8,async(_0x59beb8,_0x5b02e5)=>{const _0x373fbe=_0x2841e5;let _0x5677f4=await this[_0x373fbe(0x884)]({'request':_0x59beb8,'schema':Ka,'ClassRef':tt,'execute':(_0xfe65b6,_0x38dcc2)=>D[_0x373fbe(0x8fd)](_0xfe65b6,_0x38dcc2)});return _0x5b02e5['status'](0xc9)[_0x373fbe(0x2e2)](_0x5677f4);})['delete'](this[_0x2841e5(0x39f)](_0x2841e5(0x8f6)),..._0x20bff8,async(_0x5583b9,_0x266bed)=>{const _0x37ed5d=_0x2841e5;let _0x122006=await this[_0x37ed5d(0x884)]({'request':_0x5583b9,'schema':Qa,'ClassRef':at,'execute':(_0x11538e,_0x3db83e)=>D[_0x37ed5d(0x556)](_0x11538e,_0x3db83e)});return _0x266bed[_0x37ed5d(0x4ed)](0xc9)['json'](_0x122006);})[_0x2841e5(0x4bd)](this['routerPath']('fetchProfilePictureUrl'),..._0x20bff8,async(_0x57574d,_0x28767d)=>{const _0x46b38d=_0x2841e5;let _0xca1506=await this['dataValidate']({'request':_0x57574d,'schema':Oe,'ClassRef':Te,'execute':(_0x135973,_0x4eb958)=>D[_0x46b38d(0x582)](_0x135973,_0x4eb958)});return _0x28767d[_0x46b38d(0x4ed)](0xc8)[_0x46b38d(0x2e2)](_0xca1506);})[_0x2841e5(0x4bd)](this['routerPath'](_0x2841e5(0x5e1)),..._0x20bff8,async(_0x313234,_0x4d948d)=>{const _0x5edc45=_0x2841e5;let _0x1b14c4=await this[_0x5edc45(0x884)]({'request':_0x313234,'schema':ei,'ClassRef':Te,'execute':(_0x5d4f07,_0x494610)=>D[_0x5edc45(0x5e1)](_0x5d4f07,_0x494610)});return _0x4d948d['status'](0xc8)[_0x5edc45(0x2e2)](_0x1b14c4);})[_0x2841e5(0x4bd)](this[_0x2841e5(0x39f)](_0x2841e5(0x575)),..._0x20bff8,async(_0x20b11f,_0xc05465)=>{const _0x416e35=_0x2841e5;let _0x471d81=await this[_0x416e35(0x884)]({'request':_0x20b11f,'schema':Ya,'ClassRef':ot,'execute':(_0x200ce0,_0x107511)=>D[_0x416e35(0x3f5)](_0x200ce0,_0x107511)});return _0xc05465[_0x416e35(0x4ed)](0xc8)[_0x416e35(0x2e2)](_0x471d81);})['post'](this[_0x2841e5(0x39f)](_0x2841e5(0x28d)),..._0x20bff8,async(_0x95e39d,_0x43b9e9)=>{const _0x1b36cf=_0x2841e5;let _0x5a0422=await this['dataValidate']({'request':_0x95e39d,'schema':null,'ClassRef':Object,'execute':(_0x95524e,_0x44ad95)=>D[_0x1b36cf(0x28d)](_0x95524e,_0x44ad95)});return _0x43b9e9[_0x1b36cf(0x4ed)](0xc9)[_0x1b36cf(0x2e2)](_0x5a0422);})[_0x2841e5(0x4bd)](this[_0x2841e5(0x39f)](_0x2841e5(0x5eb)),..._0x20bff8,async(_0x34b3ce,_0x30fa60)=>{const _0x345245=_0x2841e5;let _0x5cfa5d=await this[_0x345245(0x884)]({'request':_0x34b3ce,'schema':ti,'ClassRef':He,'execute':(_0x6341cf,_0x4e38ca)=>D[_0x345245(0x3ae)](_0x6341cf,_0x4e38ca)});return _0x30fa60[_0x345245(0x4ed)](0xc8)['json'](_0x5cfa5d);})[_0x2841e5(0x62f)](this[_0x2841e5(0x39f)](_0x2841e5(0x821)),..._0x20bff8,async(_0x5b9831,_0x44c20c)=>{const _0x4525e2=_0x2841e5;let _0x1b7f6b=await this[_0x4525e2(0x884)]({'request':_0x5b9831,'schema':null,'ClassRef':M,'execute':_0xba9b8=>D[_0x4525e2(0x7f2)](_0xba9b8)});return _0x44c20c[_0x4525e2(0x4ed)](0xc8)['json'](_0x1b7f6b);})[_0x2841e5(0x62f)](this[_0x2841e5(0x39f)](_0x2841e5(0x2c2)),..._0x20bff8,async(_0x540c0b,_0x17f4d3)=>{const _0x40e7b5=_0x2841e5;let _0x40c55e=await this[_0x40e7b5(0x884)]({'request':_0x540c0b,'schema':null,'ClassRef':M,'execute':_0x566e4e=>D[_0x40e7b5(0x7b3)](_0x566e4e)});return _0x17f4d3[_0x40e7b5(0x4ed)](0xc8)['json'](_0x40c55e);})[_0x2841e5(0x3de)](this[_0x2841e5(0x39f)](_0x2841e5(0x584)),..._0x20bff8,async(_0x167e46,_0x5f22a7)=>{const _0x2504fd=_0x2841e5;let _0x5dcc29=await this[_0x2504fd(0x884)]({'request':_0x167e46,'schema':null,'ClassRef':Array,'execute':(_0x21db76,_0x486238)=>D[_0x2504fd(0x584)](_0x21db76,_0x486238)});return _0x5f22a7[_0x2504fd(0x4ed)](0xc8)[_0x2504fd(0x2e2)](_0x5dcc29);})['get'](this[_0x2841e5(0x39f)](_0x2841e5(0x69f)),..._0x20bff8,async(_0xd514b2,_0x8f5df)=>{const _0x2e4e2f=_0x2841e5;let _0x2230d2=await this[_0x2e4e2f(0x884)]({'request':_0xd514b2,'schema':null,'ClassRef':M,'execute':_0x325b57=>D[_0x2e4e2f(0x69f)](_0x325b57)});return _0x8f5df[_0x2e4e2f(0x4ed)](0xc8)[_0x2e4e2f(0x2e2)](_0x2230d2);})[_0x2841e5(0x3de)](this[_0x2841e5(0x39f)](_0x2841e5(0x75b)),..._0x20bff8,async(_0xd87d07,_0x2aff97)=>{const _0x1e547b=_0x2841e5;let _0x4cbf84=await this['dataValidate']({'request':_0xd87d07,'schema':Ha,'ClassRef':st,'execute':(_0x12ff45,_0x35b1e5)=>D['updatePrivacySettings'](_0x12ff45,_0x35b1e5)});return _0x2aff97[_0x1e547b(0x4ed)](0xc9)[_0x1e547b(0x2e2)](_0x4cbf84);})[_0x2841e5(0x4bd)](this[_0x2841e5(0x39f)](_0x2841e5(0x508)),..._0x20bff8,async(_0x3f4fd9,_0x5e3433)=>{const _0x20abbc=_0x2841e5;let _0x4f4738=await this[_0x20abbc(0x884)]({'request':_0x3f4fd9,'schema':Oe,'ClassRef':Ee,'execute':(_0xfab1fc,_0xc5d629)=>D['fetchBusinessProfile'](_0xfab1fc,_0xc5d629)});return _0x5e3433['status'](0xc8)[_0x20abbc(0x2e2)](_0x4f4738);})[_0x2841e5(0x4bd)](this[_0x2841e5(0x39f)](_0x2841e5(0x2a2)),..._0x20bff8,async(_0x58737b,_0xf368e5)=>{const _0xa4a68e=_0x2841e5;let _0xf3d998=await this[_0xa4a68e(0x884)]({'request':_0x58737b,'schema':Xa,'ClassRef':Xe,'execute':(_0x32ab2f,_0x45b5be)=>D['updateProfileName'](_0x32ab2f,_0x45b5be)});return _0xf368e5[_0xa4a68e(0x4ed)](0xc8)[_0xa4a68e(0x2e2)](_0xf3d998);})[_0x2841e5(0x4bd)](this[_0x2841e5(0x39f)](_0x2841e5(0x823)),..._0x20bff8,async(_0x4a92ff,_0x108025)=>{const _0x134f38=_0x2841e5;let _0x4e0185=await this[_0x134f38(0x884)]({'request':_0x4a92ff,'schema':Za,'ClassRef':Ze,'execute':(_0xf23f6e,_0x19e15a)=>D['updateProfileStatus'](_0xf23f6e,_0x19e15a)});return _0x108025[_0x134f38(0x4ed)](0xc8)[_0x134f38(0x2e2)](_0x4e0185);})[_0x2841e5(0x3de)](this['routerPath'](_0x2841e5(0x4ac)),..._0x20bff8,async(_0x4f67e3,_0x8aeb07)=>{const _0x2869d1=_0x2841e5;let _0x38bb58=await this[_0x2869d1(0x884)]({'request':_0x4f67e3,'schema':Oe,'ClassRef':Ee,'execute':(_0x5349f0,_0x1949c0)=>D[_0x2869d1(0x4ac)](_0x5349f0,_0x1949c0)});return _0x8aeb07[_0x2869d1(0x4ed)](0xc8)[_0x2869d1(0x2e2)](_0x38bb58);})['delete'](this[_0x2841e5(0x39f)](_0x2841e5(0x56a)),..._0x20bff8,async(_0x480ae4,_0xf33b13)=>{const _0x33174f=_0x2841e5;let _0x23960f=await this[_0x33174f(0x884)]({'request':_0x480ae4,'schema':Oe,'ClassRef':Ee,'execute':(_0x43beee,_0xa7a77c)=>D[_0x33174f(0x56a)](_0x43beee,_0xa7a77c)});return _0xf33b13[_0x33174f(0x4ed)](0xc8)[_0x33174f(0x2e2)](_0x23960f);});}},hi=require(a0_0x4bc873(0x6a5)),lt=class{},ut=class{},dt=class{},pt=class{},ht=class{},gt=class{},te=class{},Pe=class{},mt=class extends te{},ft=class extends te{},wt=class extends V{constructor(..._0x39b682){const _0x10f616=a0_0x4bc873;super(),this[_0x10f616(0x8da)]=(0x0,hi['Router'])(),this[_0x10f616(0x8da)][_0x10f616(0x4bd)](this[_0x10f616(0x39f)](_0x10f616(0x75f)),..._0x39b682,async(_0x3ec668,_0x36ec6d)=>{const _0x23e77a=_0x10f616;let _0x29f50e=await this[_0x23e77a(0x884)]({'request':_0x3ec668,'schema':ai,'ClassRef':lt,'execute':(_0x5979ca,_0x246f92)=>q[_0x23e77a(0x4d8)](_0x5979ca,_0x246f92)});_0x36ec6d[_0x23e77a(0x4ed)](0xc9)[_0x23e77a(0x2e2)](_0x29f50e);})['put'](this[_0x10f616(0x39f)](_0x10f616(0x3e9)),..._0x39b682,async(_0x34e67c,_0x58825a)=>{const _0x240db6=_0x10f616;let _0x599175=await this[_0x240db6(0x711)]({'request':_0x34e67c,'schema':ri,'ClassRef':ut,'execute':(_0x2f0730,_0x30fdcb)=>q['updateGroupPicture'](_0x2f0730,_0x30fdcb)});_0x58825a['status'](0xc9)[_0x240db6(0x2e2)](_0x599175);})[_0x10f616(0x3de)](this['routerPath'](_0x10f616(0x7ba)),..._0x39b682,async(_0x36f117,_0x44d632)=>{const _0x2de6d4=_0x10f616;let _0x208c47=await this[_0x2de6d4(0x711)]({'request':_0x36f117,'schema':ni,'ClassRef':dt,'execute':(_0x229fe5,_0xab05a2)=>q[_0x2de6d4(0x7ba)](_0x229fe5,_0xab05a2)});_0x44d632[_0x2de6d4(0x4ed)](0xc9)['json'](_0x208c47);})[_0x10f616(0x3de)](this['routerPath'](_0x10f616(0x6c2)),..._0x39b682,async(_0x47acc9,_0x9a625c)=>{const _0x5d6e81=_0x10f616;let _0x42c921=await this[_0x5d6e81(0x711)]({'request':_0x47acc9,'schema':ci,'ClassRef':pt,'execute':(_0x4a02f6,_0x4b4d65)=>q[_0x5d6e81(0x6c2)](_0x4a02f6,_0x4b4d65)});_0x9a625c[_0x5d6e81(0x4ed)](0xc9)['json'](_0x42c921);})[_0x10f616(0x3de)](this[_0x10f616(0x39f)](_0x10f616(0x28e)),..._0x39b682,async(_0x786c05,_0x331eee)=>{const _0x5d715c=_0x10f616;let _0x1f8206=await this[_0x5d715c(0x711)]({'request':_0x786c05,'schema':ui,'ClassRef':gt,'execute':(_0x59010d,_0x1dc5bf)=>q[_0x5d715c(0x28e)](_0x59010d,_0x1dc5bf)});_0x331eee['status'](0xc9)[_0x5d715c(0x2e2)](_0x1f8206);})[_0x10f616(0x3de)](this['routerPath'](_0x10f616(0x5e8)),..._0x39b682,async(_0x11c40c,_0x37aa07)=>{const _0x3969ab=_0x10f616;let _0x3bfb98=await this[_0x3969ab(0x711)]({'request':_0x11c40c,'schema':li,'ClassRef':ht,'execute':(_0x468402,_0x54c41a)=>q['groupSetting'](_0x468402,_0x54c41a)});_0x37aa07[_0x3969ab(0x4ed)](0xc9)[_0x3969ab(0x2e2)](_0x3bfb98);})[_0x10f616(0x3de)](this['routerPath'](_0x10f616(0x8de)),..._0x39b682,async(_0x1367eb,_0x28924e)=>{const _0x120fc3=_0x10f616;let _0xdac7d9=await this[_0x120fc3(0x711)]({'request':_0x1367eb,'schema':oi,'ClassRef':ft,'execute':(_0x477814,_0x7f91b3)=>q[_0x120fc3(0x8de)](_0x477814,_0x7f91b3)});_0x28924e[_0x120fc3(0x4ed)](0xc9)['json'](_0xdac7d9);})[_0x10f616(0x62f)](this[_0x10f616(0x39f)](_0x10f616(0x3e8)),..._0x39b682,async(_0x334516,_0x103b78)=>{const _0x2ecd79=_0x10f616;let _0xd564e7=await this['groupValidate']({'request':_0x334516,'schema':xe,'ClassRef':te,'execute':(_0x432cc3,_0x13da0e)=>q['findGroupInfo'](_0x432cc3,_0x13da0e)});_0x103b78[_0x2ecd79(0x4ed)](0xc8)[_0x2ecd79(0x2e2)](_0xd564e7);})[_0x10f616(0x62f)](this[_0x10f616(0x39f)](_0x10f616(0x352)),..._0x39b682,async(_0x2d46a0,_0x27a055)=>{const _0x1a8e22=_0x10f616;let _0xb3367c=await this[_0x1a8e22(0x884)]({'request':_0x2d46a0,'schema':N,'ClassRef':M,'execute':_0x117585=>q[_0x1a8e22(0x352)](_0x117585)});_0x27a055[_0x1a8e22(0x4ed)](0xc8)[_0x1a8e22(0x2e2)](_0xb3367c);})[_0x10f616(0x62f)](this[_0x10f616(0x39f)]('participants'),..._0x39b682,async(_0x5568c0,_0x1fda0d)=>{const _0x551dfb=_0x10f616;let _0x76a8c3=await this[_0x551dfb(0x711)]({'request':_0x5568c0,'schema':xe,'ClassRef':te,'execute':(_0x161300,_0x55a078)=>q['findParticipants'](_0x161300,_0x55a078)});_0x1fda0d['status'](0xc8)['json'](_0x76a8c3);})['get'](this['routerPath'](_0x10f616(0x6fc)),..._0x39b682,async(_0x22645b,_0xb71e6d)=>{const _0x587e54=_0x10f616;let _0x2022e5=await this[_0x587e54(0x711)]({'request':_0x22645b,'schema':xe,'ClassRef':te,'execute':(_0xb4029d,_0x211228)=>q[_0x587e54(0x6fc)](_0xb4029d,_0x211228)});_0xb71e6d[_0x587e54(0x4ed)](0xc8)[_0x587e54(0x2e2)](_0x2022e5);})[_0x10f616(0x4bd)](this['routerPath'](_0x10f616(0x4c1)),..._0x39b682,async(_0x49eb34,_0x32dbe8)=>{const _0x2dcb05=_0x10f616;let _0x13a366=await this[_0x2dcb05(0x3c7)]({'request':_0x49eb34,'schema':Ns,'ClassRef':Pe,'execute':(_0x3e8804,_0x3cd8dc)=>q[_0x2dcb05(0x85b)](_0x3e8804,_0x3cd8dc)});_0x32dbe8['status'](0xc9)[_0x2dcb05(0x2e2)](_0x13a366);})['put'](this[_0x10f616(0x39f)](_0x10f616(0x498)),..._0x39b682,async(_0x543ef0,_0x45dd5f)=>{const _0x98447f=_0x10f616;let _0x3c5ef1=await this[_0x98447f(0x3c7)]({'request':_0x543ef0,'schema':Ns,'ClassRef':Pe,'execute':(_0x51e14c,_0x4b4de7)=>q['joinGroup'](_0x51e14c,_0x4b4de7)});_0x45dd5f[_0x98447f(0x4ed)](0xc9)[_0x98447f(0x2e2)](_0x3c5ef1);})['put'](this[_0x10f616(0x39f)](_0x10f616(0x1fd)),..._0x39b682,async(_0x245d80,_0x2ad2a3)=>{const _0x13fa7e=_0x10f616;let _0x3cf813=await this['groupValidate']({'request':_0x245d80,'schema':xe,'ClassRef':te,'execute':(_0x30d251,_0x4ad3a8)=>q[_0x13fa7e(0x1fd)](_0x30d251,_0x4ad3a8)});_0x2ad2a3[_0x13fa7e(0x4ed)](0xc9)[_0x13fa7e(0x2e2)](_0x3cf813);})[_0x10f616(0x3de)](this['routerPath']('updateParticipant'),..._0x39b682,async(_0x41179d,_0x25c1df)=>{const _0x14a86b=_0x10f616;let _0x210658=await this[_0x14a86b(0x711)]({'request':_0x41179d,'schema':ii,'ClassRef':mt,'execute':(_0x2bf498,_0xc88b1d)=>q[_0x14a86b(0x425)](_0x2bf498,_0xc88b1d)});_0x25c1df[_0x14a86b(0x4ed)](0xc9)['json'](_0x210658);})['delete'](this[_0x10f616(0x39f)](_0x10f616(0x57c)),..._0x39b682,async(_0x552c12,_0x2d8376)=>{let _0x19f1f5=await this['groupValidate']({'request':_0x552c12,'schema':{},'ClassRef':te,'execute':(_0xe35fdd,_0x11dbcb)=>q['leaveGroup'](_0xe35fdd,_0x11dbcb)});_0x2d8376['status'](0xc8)['json'](_0x19f1f5);});}},gi=require('express'),yt=class extends V{constructor(_0x42e272,..._0x1f0091){const _0xc427f6=a0_0x4bc873;super(),this['configService']=_0x42e272,this[_0xc427f6(0x8da)]=(0x0,gi[_0xc427f6(0x327)])();let _0x3b1dcb=_0x42e272['get']('AUTHENTICATION');this['router'][_0xc427f6(0x4bd)](_0xc427f6(0x2c6),..._0x1f0091,async(_0x228f01,_0x5956b7)=>{const _0x4b2564=_0xc427f6;let {instanceName:_0x15cef8,apikey:_0x5437e5,number:_0x5756af}=_0x228f01[_0x4b2564(0x8a3)],_0x251889=await de['createInstance']({'instanceName':_0x15cef8,'apikey':_0x5437e5,'number':_0x5756af});return _0x5956b7['status'](0xc9)[_0x4b2564(0x2e2)](_0x251889);})[_0xc427f6(0x3de)](this[_0xc427f6(0x39f)](_0xc427f6(0x872)),..._0x1f0091,async(_0x29b4a0,_0x57de11)=>{const _0x1a5771=_0xc427f6;let _0x3974bf=await this['dataValidate']({'request':_0x29b4a0,'schema':N,'ClassRef':M,'execute':_0x1833bf=>de[_0x1a5771(0x436)](_0x1833bf)});return _0x57de11[_0x1a5771(0x4ed)](0xc8)[_0x1a5771(0x2e2)](_0x3974bf);})['get'](this[_0xc427f6(0x39f)](_0xc427f6(0x23e)),..._0x1f0091,async(_0x16ad80,_0x3934bb)=>{const _0x5948f3=_0xc427f6;let _0x547fd4=await this['dataValidate']({'request':_0x16ad80,'schema':N,'ClassRef':M,'execute':_0x1562b7=>de[_0x5948f3(0x90f)](_0x1562b7)});return _0x3934bb[_0x5948f3(0x4ed)](0xc8)[_0x5948f3(0x2e2)](_0x547fd4);})['get'](this[_0xc427f6(0x39f)](_0xc427f6(0x5a9)),..._0x1f0091,async(_0x57f46c,_0x2b2ce7)=>{const _0x192911=_0xc427f6;let _0x2729cf=await this['dataValidate']({'request':_0x57f46c,'schema':N,'ClassRef':M,'execute':_0x307c76=>de[_0x192911(0x5a9)](_0x307c76)});return _0x2b2ce7[_0x192911(0x4ed)](0xc8)[_0x192911(0x2e2)](_0x2729cf);})[_0xc427f6(0x62f)](this[_0xc427f6(0x39f)](_0xc427f6(0x509),!0x1),..._0x1f0091,async(_0x4b9813,_0x3097a5)=>{const _0x2b7335=_0xc427f6;let _0x426544=await this['dataValidate']({'request':_0x4b9813,'schema':null,'ClassRef':M,'execute':_0x18d830=>de['fetchInstances'](_0x18d830)});return _0x3097a5[_0x2b7335(0x4ed)](0xc8)['json'](_0x426544);})[_0xc427f6(0x4a8)](this[_0xc427f6(0x39f)](_0xc427f6(0x93d)),..._0x1f0091,async(_0x4bd4c3,_0x2adc42)=>{const _0x45b945=_0xc427f6;let _0x1269ea=await this[_0x45b945(0x884)]({'request':_0x4bd4c3,'schema':N,'ClassRef':M,'execute':_0x1dc1ba=>de[_0x45b945(0x93d)](_0x1dc1ba)});return _0x2adc42[_0x45b945(0x4ed)](0xc8)[_0x45b945(0x2e2)](_0x1269ea);})['delete'](this['routerPath'](_0xc427f6(0x4a8)),..._0x1f0091,async(_0x2a4d83,_0x3a63d0)=>{const _0x2fab11=_0xc427f6;let _0x2a5742=await this[_0x2fab11(0x884)]({'request':_0x2a4d83,'schema':N,'ClassRef':M,'execute':_0x367f81=>de[_0x2fab11(0x59c)](_0x367f81)});return _0x3a63d0[_0x2fab11(0x4ed)](0xc8)[_0x2fab11(0x2e2)](_0x2a5742);});}},mi=require(a0_0x4bc873(0x6a5)),Rs=class{},K=class extends Rs{},bt=class extends K{},St=class extends K{},Mt=class extends K{},Ct=class extends K{},De=class extends K{},Et=class extends K{},vt=class extends K{},Nt=class extends K{},$t=class extends K{},Rt=class{},At=class extends V{constructor(..._0x294718){const _0x59e633=a0_0x4bc873;super(),this[_0x59e633(0x8da)]=(0x0,mi[_0x59e633(0x327)])(),this[_0x59e633(0x8da)]['post'](this['routerPath']('sendText'),..._0x294718,async(_0x4b607a,_0x58295a)=>{const _0x2858ec=_0x59e633;let _0x84e9eb=await this[_0x2858ec(0x884)]({'request':_0x4b607a,'schema':Pa,'ClassRef':bt,'execute':(_0x5cc487,_0x3cdb2c)=>W['sendText'](_0x5cc487,_0x3cdb2c)});return _0x58295a[_0x2858ec(0x4ed)](0xc9)[_0x2858ec(0x2e2)](_0x84e9eb);})[_0x59e633(0x4bd)](this[_0x59e633(0x39f)](_0x59e633(0x46d)),..._0x294718,async(_0x5d98fe,_0x56cd40)=>{const _0x2330d0=_0x59e633;let _0x465c38=await this[_0x2330d0(0x884)]({'request':_0x5d98fe,'schema':Fa,'ClassRef':De,'execute':(_0x22f3c8,_0x283291)=>W[_0x2330d0(0x46d)](_0x22f3c8,_0x283291)});return _0x56cd40[_0x2330d0(0x4ed)](0xc9)['json'](_0x465c38);})[_0x59e633(0x4bd)](this[_0x59e633(0x39f)](_0x59e633(0x6c4)),..._0x294718,async(_0x27d1f5,_0x2da3c0)=>{const _0x26b5eb=_0x59e633;let _0x38d54b=await this[_0x26b5eb(0x884)]({'request':_0x27d1f5,'schema':Ja,'ClassRef':Ct,'execute':(_0x5ba600,_0x3ba654)=>W[_0x26b5eb(0x6c4)](_0x5ba600,_0x3ba654)});return _0x2da3c0[_0x26b5eb(0x4ed)](0xc9)[_0x26b5eb(0x2e2)](_0x38d54b);})[_0x59e633(0x4bd)](this[_0x59e633(0x39f)]('sendWhatsAppAudio'),..._0x294718,async(_0x4d1f66,_0x3b863d)=>{const _0x1367f1=_0x59e633;let _0x470372=await this[_0x1367f1(0x884)]({'request':_0x4d1f66,'schema':Ua,'ClassRef':De,'execute':(_0x3612c2,_0x34cf02)=>W[_0x1367f1(0x857)](_0x3612c2,_0x34cf02)});return _0x3b863d[_0x1367f1(0x4ed)](0xc9)[_0x1367f1(0x2e2)](_0x470372);})[_0x59e633(0x4bd)](this[_0x59e633(0x39f)]('sendLocation'),..._0x294718,async(_0x47baee,_0x5c70b8)=>{const _0x466455=_0x59e633;let _0x3b0366=await this[_0x466455(0x884)]({'request':_0x47baee,'schema':qa,'ClassRef':vt,'execute':(_0x49139a,_0x2742c2)=>W['sendLocation'](_0x49139a,_0x2742c2)});return _0x5c70b8['status'](0xc9)[_0x466455(0x2e2)](_0x3b0366);})['post'](this[_0x59e633(0x39f)](_0x59e633(0x7f6)),..._0x294718,async(_0x412e2a,_0x3aead3)=>{const _0x4c24c7=_0x59e633;let _0x56f18e=await this[_0x4c24c7(0x884)]({'request':_0x412e2a,'schema':Va,'ClassRef':Nt,'execute':(_0x3b518e,_0x5b8431)=>W[_0x4c24c7(0x7f6)](_0x3b518e,_0x5b8431)});return _0x3aead3['status'](0xc9)[_0x4c24c7(0x2e2)](_0x56f18e);})['post'](this['routerPath']('sendContact'),..._0x294718,async(_0x4299c3,_0x5d14cd)=>{const _0x18aa62=_0x59e633;let _0x4abeea=await this[_0x18aa62(0x884)]({'request':_0x4299c3,'schema':Ga,'ClassRef':$t,'execute':(_0x24a467,_0x3e415d)=>W[_0x18aa62(0x838)](_0x24a467,_0x3e415d)});return _0x5d14cd['status'](0xc9)[_0x18aa62(0x2e2)](_0x4abeea);})['post'](this[_0x59e633(0x39f)]('sendReaction'),..._0x294718,async(_0x418adf,_0x359685)=>{const _0x1cd3a8=_0x59e633;let _0x2d9c43=await this[_0x1cd3a8(0x884)]({'request':_0x418adf,'schema':Ba,'ClassRef':Rt,'execute':(_0x305418,_0x3c63e1)=>W['sendReaction'](_0x305418,_0x3c63e1)});return _0x359685[_0x1cd3a8(0x4ed)](0xc9)[_0x1cd3a8(0x2e2)](_0x2d9c43);})[_0x59e633(0x4bd)](this[_0x59e633(0x39f)](_0x59e633(0x850)),..._0x294718,async(_0x5c8345,_0x1cb1d1)=>{const _0x1b6dab=_0x59e633;let _0x1795fb=await this[_0x1b6dab(0x884)]({'request':_0x5c8345,'schema':ja,'ClassRef':Mt,'execute':(_0x2a5e43,_0x124962)=>W[_0x1b6dab(0x850)](_0x2a5e43,_0x124962)});return _0x1cb1d1['status'](0xc9)['json'](_0x1795fb);})[_0x59e633(0x4bd)](this[_0x59e633(0x39f)](_0x59e633(0x745)),..._0x294718,async(_0x464811,_0x26e1e8)=>{const _0x45bd0e=_0x59e633;let _0x3303a0=await this[_0x45bd0e(0x884)]({'request':_0x464811,'schema':La,'ClassRef':St,'execute':(_0x407130,_0x2de5c8)=>W[_0x45bd0e(0x745)](_0x407130,_0x2de5c8)});return _0x26e1e8[_0x45bd0e(0x4ed)](0xc9)[_0x45bd0e(0x2e2)](_0x3303a0);})[_0x59e633(0x4bd)](this[_0x59e633(0x39f)](_0x59e633(0x8fa)),..._0x294718,async(_0x54a54b,_0x3048bf)=>{const _0x29e019=_0x59e633;let _0x2c9af3=await this[_0x29e019(0x884)]({'request':_0x54a54b,'schema':ka,'ClassRef':Et,'execute':(_0x4cce6d,_0x222d04)=>W[_0x29e019(0x8fa)](_0x4cce6d,_0x222d04)});return _0x3048bf[_0x29e019(0x4ed)](0xc9)[_0x29e019(0x2e2)](_0x2c9af3);});}},fi=require(a0_0x4bc873(0x6a5)),It=class{},Tt=class extends V{constructor(..._0x4f165f){const _0x23f293=a0_0x4bc873;super(),this[_0x23f293(0x8da)]=(0x0,fi[_0x23f293(0x327)])(),this[_0x23f293(0x8da)][_0x23f293(0x4bd)](this[_0x23f293(0x39f)](_0x23f293(0x6f5)),..._0x4f165f,async(_0x53b3c8,_0x5126e2)=>{const _0x158009=_0x23f293;let _0x5c1b5e=await this[_0x158009(0x884)]({'request':_0x53b3c8,'schema':di,'ClassRef':It,'execute':(_0x567708,_0x2f40f6)=>As[_0x158009(0x52f)](_0x567708,_0x2f40f6)});_0x5126e2[_0x158009(0x4ed)](0xc9)['json'](_0x5c1b5e);})['get'](this[_0x23f293(0x39f)](_0x23f293(0x8aa)),..._0x4f165f,async(_0x48148f,_0x197159)=>{const _0x6fce7e=_0x23f293;let _0x575d68=await this[_0x6fce7e(0x884)]({'request':_0x48148f,'schema':N,'ClassRef':M,'execute':_0x4f9c26=>As[_0x6fce7e(0x733)](_0x4f9c26)});_0x197159['status'](0xc8)[_0x6fce7e(0x2e2)](_0x575d68);});}},wi=require('express'),y=new $(a0_0x4bc873(0x4c4)),_t=class extends V{constructor(..._0x62816){const _0x247f40=a0_0x4bc873;super(),this[_0x247f40(0x8da)]=(0x0,wi[_0x247f40(0x327)])(),this['router'][_0x247f40(0x4bd)](this['routerPath'](_0x247f40(0x922)),..._0x62816,async(_0x4e681d,_0x5765c7)=>{const _0x417105=_0x247f40;let _0x586b98=_0x4e681d[_0x417105(0x8a3)];y[_0x417105(0x377)](_0x417105(0x281)),y['verbose'](_0x417105(0x632)),y[_0x417105(0x377)](_0x4e681d[_0x417105(0x8a3)]);let _0x5a5dd8=await this['dataValidate']({'request':_0x4e681d,'schema':N,'ClassRef':M,'execute':_0x41bfe2=>O[_0x417105(0x8db)](_0x41bfe2,_0x586b98)});_0x5765c7['status'](0xc8)[_0x417105(0x2e2)](_0x5a5dd8);})[_0x247f40(0x62f)](this[_0x247f40(0x39f)](_0x247f40(0x922)),..._0x62816,async(_0x43c9eb,_0x1eaf5b)=>{const _0x53df07=_0x247f40;let _0x166a0e=await this['dataValidate']({'request':_0x43c9eb,'schema':N,'ClassRef':M,'execute':_0xf883fe=>O[_0x53df07(0x451)](_0xf883fe)});_0x1eaf5b[_0x53df07(0x4ed)](0xc8)['json'](_0x166a0e);})[_0x247f40(0x4a8)](this[_0x247f40(0x39f)](_0x247f40(0x367)),..._0x62816,async(_0x4b3975,_0x5e61df)=>{const _0x305ee2=_0x247f40;y[_0x305ee2(0x377)]('request\x20received\x20in\x20deleteDoneMessages');let _0x22adb0=await this[_0x305ee2(0x884)]({'request':_0x4b3975,'schema':N,'ClassRef':M,'execute':_0x45f48e=>O[_0x305ee2(0x367)](_0x45f48e)});_0x5e61df[_0x305ee2(0x4ed)](0xc8)['json'](_0x22adb0);})['post'](this[_0x247f40(0x39f)](_0x247f40(0x690)),..._0x62816,async(_0x1e98ee,_0x506bba)=>{const _0x558882=_0x247f40;let _0x17d8bb=_0x1e98ee[_0x558882(0x8a3)];y[_0x558882(0x377)](_0x558882(0x812)),y[_0x558882(0x377)]('request\x20body:\x20'),y['verbose'](_0x1e98ee[_0x558882(0x8a3)]);let _0x455d57=await this[_0x558882(0x884)]({'request':_0x1e98ee,'schema':N,'ClassRef':M,'execute':_0x54279d=>O['startFlow'](_0x54279d,_0x17d8bb)});_0x506bba[_0x558882(0x4ed)](0xc8)[_0x558882(0x2e2)](_0x455d57);})['get'](this[_0x247f40(0x39f)](_0x247f40(0x209)),..._0x62816,async(_0x2d4197,_0x1b1952)=>{const _0x474e0e=_0x247f40;y['verbose'](_0x474e0e(0x5cb));let _0x5c9e1f=await this[_0x474e0e(0x884)]({'request':_0x2d4197,'schema':N,'ClassRef':M,'execute':_0x5d3b3e=>O['getAutomateSystem'](_0x5d3b3e)});_0x1b1952[_0x474e0e(0x4ed)](0xc8)['json'](_0x5c9e1f);})[_0x247f40(0x62f)](this[_0x247f40(0x39f)]('getTicketSystem'),..._0x62816,async(_0x203789,_0x46d20d)=>{const _0x4c098f=_0x247f40;y['verbose'](_0x4c098f(0x1eb));let _0x3d3c28=await this[_0x4c098f(0x884)]({'request':_0x203789,'schema':N,'ClassRef':M,'execute':_0x3ebd6a=>O[_0x4c098f(0x209)](_0x3ebd6a)});_0x46d20d[_0x4c098f(0x4ed)](0xc8)[_0x4c098f(0x2e2)](_0x3d3c28);})[_0x247f40(0x4bd)](this[_0x247f40(0x39f)](_0x247f40(0x244)),..._0x62816,async(_0x50c0a6,_0x1ac3f9)=>{const _0x4a9d46=_0x247f40;let _0x34b58e=_0x50c0a6[_0x4a9d46(0x8a3)];y[_0x4a9d46(0x377)](_0x4a9d46(0x3c4)),y[_0x4a9d46(0x377)](_0x4a9d46(0x632)),y[_0x4a9d46(0x377)](_0x50c0a6[_0x4a9d46(0x8a3)]);let _0x43aa74=await this[_0x4a9d46(0x884)]({'request':_0x50c0a6,'schema':N,'ClassRef':M,'execute':_0x539a82=>O[_0x4a9d46(0x244)](_0x539a82,_0x34b58e)});_0x1ac3f9[_0x4a9d46(0x4ed)](0xc8)[_0x4a9d46(0x2e2)](_0x43aa74);})['post'](this[_0x247f40(0x39f)](_0x247f40(0x720)),..._0x62816,async(_0x1e979c,_0xc9823f)=>{const _0x1662e8=_0x247f40;let _0x298b8c=_0x1e979c['body'];y['verbose']('request\x20received\x20in\x20updateCustomFields'),y['verbose'](_0x1662e8(0x632)),y[_0x1662e8(0x377)](_0x1e979c[_0x1662e8(0x8a3)]);let _0x2578b7=await this[_0x1662e8(0x884)]({'request':_0x1e979c,'schema':N,'ClassRef':M,'execute':_0x32f80a=>O[_0x1662e8(0x720)](_0x32f80a,_0x298b8c)});_0xc9823f['status'](0xc8)[_0x1662e8(0x2e2)](_0x2578b7);})[_0x247f40(0x4bd)](this['routerPath'](_0x247f40(0x695)),..._0x62816,async(_0x24b668,_0x1fb5b3)=>{const _0x2eca42=_0x247f40;let _0x655c2=_0x24b668[_0x2eca42(0x8a3)];y['verbose'](_0x2eca42(0x1f9)),y[_0x2eca42(0x377)](_0x2eca42(0x632)),y[_0x2eca42(0x377)](_0x24b668['body']);let _0x46a6bd=await this['dataValidate']({'request':_0x24b668,'schema':N,'ClassRef':M,'execute':_0x4a475c=>O[_0x2eca42(0x695)](_0x4a475c,_0x655c2)});_0x1fb5b3['status'](0xc8)['json'](_0x46a6bd);})['post'](this[_0x247f40(0x39f)](_0x247f40(0x908)),..._0x62816,async(_0x110fcc,_0x5b4b73)=>{const _0x1f9d63=_0x247f40;let _0x215de9=_0x110fcc['body'];y['verbose']('request\x20received\x20in\x20updateFlowConfig'),y[_0x1f9d63(0x377)]('request\x20body:\x20'),y[_0x1f9d63(0x377)](_0x110fcc[_0x1f9d63(0x8a3)]);let _0x49754e=await this['dataValidate']({'request':_0x110fcc,'schema':N,'ClassRef':M,'execute':_0x2b3a42=>O[_0x1f9d63(0x908)](_0x2b3a42,_0x215de9)});_0x5b4b73[_0x1f9d63(0x4ed)](0xc8)[_0x1f9d63(0x2e2)](_0x49754e);})[_0x247f40(0x4bd)](this['routerPath']('getConversation'),..._0x62816,async(_0x52b983,_0x2e21cb)=>{const _0x5d683b=_0x247f40;let _0x2a0694=_0x52b983['body'];y['verbose'](_0x5d683b(0x231)),y['verbose']('request\x20body:\x20'),y['verbose'](_0x52b983[_0x5d683b(0x8a3)]);let _0x39632e=await this['dataValidate']({'request':_0x52b983,'schema':N,'ClassRef':M,'execute':_0x41c445=>O['getConversation'](_0x41c445,_0x2a0694)});_0x2e21cb[_0x5d683b(0x4ed)](0xc8)[_0x5d683b(0x2e2)](_0x39632e);})[_0x247f40(0x4bd)](this[_0x247f40(0x39f)]('fetchConversation'),..._0x62816,async(_0x4d032e,_0x26a6a6)=>{const _0x1bf3bf=_0x247f40;let _0xda34e7=_0x4d032e[_0x1bf3bf(0x8a3)];y['verbose'](_0x1bf3bf(0x3cb)),y['verbose'](_0x1bf3bf(0x632)),y['verbose'](_0x4d032e[_0x1bf3bf(0x8a3)]);let _0x477c40=await this[_0x1bf3bf(0x884)]({'request':_0x4d032e,'schema':N,'ClassRef':M,'execute':_0xd61adb=>O[_0x1bf3bf(0x31f)](_0xd61adb,_0xda34e7)});_0x26a6a6[_0x1bf3bf(0x4ed)](0xc8)['json'](_0x477c40);})[_0x247f40(0x4bd)](this[_0x247f40(0x39f)]('editConversation'),..._0x62816,async(_0xd2aa46,_0x91c1dc)=>{const _0xd22568=_0x247f40;let _0x24cc38=_0xd2aa46[_0xd22568(0x8a3)];y[_0xd22568(0x377)]('request\x20received\x20in\x20editConversation'),y[_0xd22568(0x377)](_0xd22568(0x632)),y[_0xd22568(0x377)](_0xd2aa46[_0xd22568(0x8a3)]);let _0xb7443=await this[_0xd22568(0x884)]({'request':_0xd2aa46,'schema':N,'ClassRef':M,'execute':_0x5e8f17=>O[_0xd22568(0x452)](_0x5e8f17,_0x24cc38)});_0x91c1dc[_0xd22568(0x4ed)](0xc8)['json'](_0xb7443);})[_0x247f40(0x4a8)](this[_0x247f40(0x39f)]('deleteConversation'),..._0x62816,async(_0x345169,_0x274dcc)=>{const _0x2d29e3=_0x247f40;let _0x344779=_0x345169[_0x2d29e3(0x8a3)];y[_0x2d29e3(0x377)](_0x2d29e3(0x7cd)),y[_0x2d29e3(0x377)]('request\x20body:\x20'),y[_0x2d29e3(0x377)](_0x345169[_0x2d29e3(0x8a3)]);let _0x33ad38=await this[_0x2d29e3(0x884)]({'request':_0x345169,'schema':N,'ClassRef':M,'execute':_0x1366c7=>O[_0x2d29e3(0x321)](_0x1366c7,_0x344779)});_0x274dcc['status'](0xc8)[_0x2d29e3(0x2e2)](_0x33ad38);})[_0x247f40(0x4bd)](this[_0x247f40(0x39f)](_0x247f40(0x856)),..._0x62816,async(_0x43eab6,_0x596a43)=>{const _0x1f7d46=_0x247f40;let _0x50a64d=_0x43eab6['body'],_0xf5c227=_0x43eab6[_0x1f7d46(0x686)][_0x1f7d46(0x393)];y[_0x1f7d46(0x377)](_0x1f7d46(0x5a3)),y[_0x1f7d46(0x377)](_0x1f7d46(0x632)),y['verbose'](_0x43eab6[_0x1f7d46(0x8a3)]);let _0xd5845a=await this[_0x1f7d46(0x884)]({'request':_0x43eab6,'schema':N,'ClassRef':M,'execute':_0x17ebc6=>O['createFlow'](_0x17ebc6,_0x50a64d,_0xf5c227)});_0x596a43[_0x1f7d46(0x4ed)](0xc8)[_0x1f7d46(0x2e2)](_0xd5845a);})[_0x247f40(0x4bd)](this[_0x247f40(0x39f)]('editflow'),..._0x62816,async(_0x3df50a,_0x20cc3a)=>{const _0x1419fd=_0x247f40;let _0x46ce3e=_0x3df50a['body'],_0x4746e5=_0x3df50a[_0x1419fd(0x686)][_0x1419fd(0x393)];y['verbose'](_0x1419fd(0x2da)),y[_0x1419fd(0x377)](_0x1419fd(0x632)),y[_0x1419fd(0x377)](_0x3df50a[_0x1419fd(0x8a3)]),delete _0x46ce3e[_0x1419fd(0x8ac)],delete _0x46ce3e[_0x1419fd(0x46b)],delete _0x46ce3e[_0x1419fd(0x543)],delete _0x46ce3e[_0x1419fd(0x5a4)];let _0x298c84=await this[_0x1419fd(0x884)]({'request':_0x3df50a,'schema':N,'ClassRef':M,'execute':_0x23b8a4=>O[_0x1419fd(0x384)](_0x23b8a4,_0x46ce3e,_0x4746e5)});_0x20cc3a[_0x1419fd(0x4ed)](0xc8)[_0x1419fd(0x2e2)](_0x298c84);})[_0x247f40(0x4bd)](this[_0x247f40(0x39f)](_0x247f40(0x2fe)),..._0x62816,async(_0x43a905,_0x2998e9)=>{const _0x4f8196=_0x247f40;let _0x5f3a8c=_0x43a905['body'];y[_0x4f8196(0x377)](_0x4f8196(0x2da)),y[_0x4f8196(0x377)](_0x4f8196(0x632)),y[_0x4f8196(0x377)](_0x43a905[_0x4f8196(0x8a3)]);let _0x4e5964=await this[_0x4f8196(0x884)]({'request':_0x43a905,'schema':N,'ClassRef':M,'execute':_0x488b18=>O[_0x4f8196(0x6df)](_0x488b18,_0x5f3a8c)});_0x2998e9[_0x4f8196(0x4ed)](0xc8)[_0x4f8196(0x2e2)](_0x4e5964);})['post'](this[_0x247f40(0x39f)](_0x247f40(0x671)),..._0x62816,async(_0x198fb5,_0x326025)=>{const _0x1488e1=_0x247f40;let _0x304d9b=_0x198fb5['body'];y[_0x1488e1(0x377)]('request\x20received\x20in\x20editFlow'),y[_0x1488e1(0x377)](_0x1488e1(0x632)),y[_0x1488e1(0x377)](_0x198fb5[_0x1488e1(0x8a3)]);let _0x5aeb06=await this[_0x1488e1(0x884)]({'request':_0x198fb5,'schema':N,'ClassRef':M,'execute':_0x3aeba5=>O['editFlowReply'](_0x3aeba5,_0x304d9b)});_0x326025['status'](0xc8)[_0x1488e1(0x2e2)](_0x5aeb06);})['post'](this[_0x247f40(0x39f)](_0x247f40(0x657)),..._0x62816,async(_0x5e190d,_0x1b2974)=>{const _0x40b9e1=_0x247f40;let _0x4815d6=_0x5e190d['body'];y[_0x40b9e1(0x377)](_0x40b9e1(0x2da)),y[_0x40b9e1(0x377)](_0x40b9e1(0x632)),y[_0x40b9e1(0x377)](_0x5e190d[_0x40b9e1(0x8a3)]);let _0x165f35=await this[_0x40b9e1(0x884)]({'request':_0x5e190d,'schema':N,'ClassRef':M,'execute':_0x4ab77d=>O['editFlowVaredit'](_0x4ab77d,_0x4815d6)});_0x1b2974[_0x40b9e1(0x4ed)](0xc8)[_0x40b9e1(0x2e2)](_0x165f35);})['post'](this[_0x247f40(0x39f)](_0x247f40(0x5ce)),..._0x62816,async(_0xb2d12e,_0x2160e1)=>{const _0x51e825=_0x247f40;let _0x4c0a52=_0xb2d12e[_0x51e825(0x8a3)];y['verbose'](_0x51e825(0x938)),y[_0x51e825(0x377)]('request\x20body:\x20'),y[_0x51e825(0x377)](_0xb2d12e[_0x51e825(0x8a3)]);let _0x24ea5c=await this[_0x51e825(0x884)]({'request':_0xb2d12e,'schema':N,'ClassRef':M,'execute':_0x13a56d=>O[_0x51e825(0x6ea)](_0x13a56d,_0x4c0a52)});_0x2160e1['status'](0xc8)[_0x51e825(0x2e2)](_0x24ea5c);})[_0x247f40(0x4bd)](this[_0x247f40(0x39f)](_0x247f40(0x8cf)),..._0x62816,async(_0x4d3112,_0x4c1e0c)=>{const _0x83c497=_0x247f40;let _0x14542b=_0x4d3112[_0x83c497(0x8a3)];y[_0x83c497(0x377)](_0x83c497(0x8bc)),y[_0x83c497(0x377)]('request\x20body:\x20'),y[_0x83c497(0x377)](_0x4d3112['body']);let _0xa45bb0=await this[_0x83c497(0x884)]({'request':_0x4d3112,'schema':N,'ClassRef':M,'execute':_0x3fc69b=>O[_0x83c497(0x1e4)](_0x3fc69b,_0x14542b)});_0x4c1e0c[_0x83c497(0x4ed)](0xc8)['json'](_0xa45bb0);})[_0x247f40(0x4bd)](this[_0x247f40(0x39f)](_0x247f40(0x731)),..._0x62816,async(_0x1b6a7b,_0x4f977b)=>{const _0x4c4196=_0x247f40;let _0x14f3cb=_0x1b6a7b[_0x4c4196(0x8a3)];y[_0x4c4196(0x377)](_0x4c4196(0x6bb)),y[_0x4c4196(0x377)](_0x4c4196(0x632)),y[_0x4c4196(0x377)](_0x1b6a7b[_0x4c4196(0x8a3)]);let _0x13ad7c=await this['dataValidate']({'request':_0x1b6a7b,'schema':N,'ClassRef':M,'execute':_0x10db80=>O[_0x4c4196(0x3bc)](_0x10db80,_0x14f3cb)});_0x4f977b[_0x4c4196(0x4ed)](0xc8)[_0x4c4196(0x2e2)](_0x13ad7c);})[_0x247f40(0x4bd)](this[_0x247f40(0x39f)]('getflow'),..._0x62816,async(_0xfe02e3,_0x26d541)=>{const _0x7b1bbb=_0x247f40;let _0x92712d=_0xfe02e3['body'];y[_0x7b1bbb(0x377)](_0x7b1bbb(0x8f1)),y[_0x7b1bbb(0x377)](_0x7b1bbb(0x632)),y[_0x7b1bbb(0x377)](_0xfe02e3[_0x7b1bbb(0x8a3)]);let _0x1cd6b0=await this['dataValidate']({'request':_0xfe02e3,'schema':N,'ClassRef':M,'execute':_0x3c0ccc=>O['getFlow'](_0x3c0ccc,_0x92712d)});_0x26d541['status'](0xc8)[_0x7b1bbb(0x2e2)](_0x1cd6b0);})[_0x247f40(0x4a8)](this[_0x247f40(0x39f)](_0x247f40(0x5e9)),..._0x62816,async(_0x3fe157,_0x3ba7d6)=>{const _0x2b7c5d=_0x247f40;let _0x5caf10=_0x3fe157[_0x2b7c5d(0x8a3)];y['verbose'](_0x2b7c5d(0x85e)),y['verbose'](_0x2b7c5d(0x632)),y[_0x2b7c5d(0x377)](_0x3fe157[_0x2b7c5d(0x8a3)]);let _0x3a2621=await this['dataValidate']({'request':_0x3fe157,'schema':N,'ClassRef':M,'execute':_0x5f2431=>O[_0x2b7c5d(0x421)](_0x5f2431,_0x5caf10)});_0x3ba7d6[_0x2b7c5d(0x4ed)](0xc8)['json'](_0x3a2621);})[_0x247f40(0x62f)](this['routerPath'](_0x247f40(0x7ca)),..._0x62816,async(_0x1d88a4,_0x55844e)=>{const _0x16ce56=_0x247f40;y[_0x16ce56(0x377)]('request\x20received\x20in\x20allFlows');let _0x5dfc89=await this['dataValidate']({'request':_0x1d88a4,'schema':N,'ClassRef':M,'execute':_0x2f74e2=>O[_0x16ce56(0x7af)](_0x2f74e2)});_0x55844e[_0x16ce56(0x4ed)](0xc8)[_0x16ce56(0x2e2)](_0x5dfc89);});}},Mi=T(require(a0_0x4bc873(0x8f3))),se={};function yi(_0x1a2002,_0x5ac13a,_0x30c1cb,_0x1a1a94){se[_0x1a2002]||(se[_0x1a2002]={}),se[_0x1a2002][_0x5ac13a]={'id':_0x5ac13a,'response':_0x30c1cb,'events':_0x1a1a94};}function bi(_0x4a3c03,_0xfb78dc){!se[_0x4a3c03]||!se[_0x4a3c03][_0xfb78dc]||delete se[_0x4a3c03][_0xfb78dc];}function F(_0x4a51a7,_0xb437af,_0x2f7f14){const _0x259b3a=a0_0x4bc873;if(!se[_0x4a51a7])return;let _0x424ab6=_0x259b3a(0x410)+JSON[_0x259b3a(0x573)](_0x2f7f14)+'\x0a\x0a';Object[_0x259b3a(0x5b2)](se[_0x4a51a7])['forEach'](_0x1dcd92=>{const _0x4b0b85=_0x259b3a;_0x1dcd92['events'][_0x4b0b85(0x5f5)](_0xb437af)&&_0x1dcd92[_0x4b0b85(0x843)][_0x4b0b85(0x431)](_0x424ab6);});}function a0_0x4d46(){const _0x13f578=['pollMessage','):\x20Fluxo\x20\x27','awaitingApproval','demote','):\x20teve\x20mudanas\x20chat.muteEndTime:\x20','locationMessage','has','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','stopMinutesMaxActives','.\x20Aguardando\x20','toLocaleString','reorderReplyOptions','createHash','Garbage\x20collection\x20no\x20est\x20disponvel.','audio','replaceValue','myAppStateKeyId','):\x20[messages.update]\x20group\x20ignored','groupRequestParticipantsList','mimetype','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','Erro\x20ao\x20buscar\x20Schedule\x20Messages','#56ccb4','\x20mensagens\x20de\x20','getLabelModelForOwner','getDevice','upperCase','uuid','importChatsBatch','\x1b[46m','__esModule','hex','paused','clearVariables','Parte\x20do\x20domnio\x20do\x20caminho\x20FULLCHAIN:','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','off','username','string','updateStopChat','groupUpdateSubject','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','_fromMe','where','):\x20Tipo\x20de\x20contedo\x20identificado:\x20','sendMessage','toDataURL','instanceName\x20not\x20provided.','\x27\x20no\x20encontrado','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','menuIgnoreNonVotes','Flow\x20iniciado\x20com\x20','textMessage','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','memberAddMode','chats.set','getAllData','\x1b[31m%s\x1b[0m','sending','Erro\x20ao\x20remover\x20label\x20','CLEANING_INTERVAL','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','findGroupInfo','newStoppedUntil','Error\x20updating\x20cache\x20contact:','waitingMenu_ExpiredMessage','allFlows','DARK','inet6','last','fetchLabels','Erro\x20ao\x20buscar\x20o\x20fluxo','editOperator','Resultado\x20da\x20correspondncia\x20de\x20URL:','requestPairingCode','?authSource=admin&readPreference=primary&directConnection=true','presenceSubscribe','groupDesc','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20prepareMediaMessage','parseInt','\x20no\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','Schema','Usando\x20IP\x20existente:\x20','3EB0','pollCreationMessage','\x27\x20do\x20banco\x20de\x20dados...','connectionStatus','):Image\x20is\x20url','pollCreationMessageKey','AUTHENTICATION_TYPE','list2','updateMissingTags','readMessage','allflows','.jpg','SendScheduleMessage','request\x20received\x20in\x20deleteConversation','\x1b[36m','variablesNotFound','this.reconnectAttempts:\x20','Configured\x20IPv6:\x20','):\x20Iniciando\x20processReadyMessages','readMessageBot','varedits','):\x20whoCanEdit\x20before\x20validation:\x20','groupToggleEphemeral','waInstances','CONNECTION_UPDATE','release','Types','Grupo\x20no\x20encontrado','Erro\x20ao\x20editar\x20o\x20chat','Falha\x20ao\x20processar\x20a\x20solicitao\x20getBase64FromMediaMessage','TYPE','item','File\x20written\x20to\x20path:\x20','Error\x20updating\x20message\x20status:','deleteImportedChat','iniciando\x20fluxo\x20router','transformScheduledMessagesByType','sectionsToString','Somente\x20\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padro','saveConversationToDatabase','HH:mm:ss','mentions','/instance/connectionState','updateOne','interval\x20no\x20\x20um\x20nmero','parse','whoCanUse','SECRET','sticker','push','fetchChats','editChat','):Image\x20created','vote','sendList','):\x20Buscando\x20flow,\x20id:\x20','reactionMessage','insertMany','namespace','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','removeUnusedChatFields','apirequest','contact','eventemitter2','size','object','formatBRNumber','rowId','isBusiness','message','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','pictureUrl','open',',\x20received\x20','ReplyOption\x20com\x20ID\x20','):\x20whoCanEdit\x20after\x20validation:\x20','hasOwnProperty','randomBytes','endSession','Subdomnio\x20final:','Connection','):\x20\x27Deletando\x20fluxo,\x20id:\x20','request\x20received\x20in\x20starFlow','cacheContact','getDelay','createClient','\x1b[0m','mediaMessage','):\x20delete\x20=\x20true','privacySettings','\x0aitem','#ffffff','updateProfilePicturePrivacy','group','Instance\x20\x22','\x20minutos...','.doc','findChats','delayChatLabel_RETRY_DELAY_MS','updateProfileStatus','getMinutes','length','optionDescription','\x20horas\x20e\x20','profilePicture','\x20depois\x20','lastUpdate','events','waUploadToServer','whoCanEdit','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','jid','/media','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','3040568XXdXbb','pino','generateHash','Failed\x20to\x20send\x20buttons\x20message','\x20segundos\x20antes\x20de\x20reconectar...','static','sendContact','role','approve','block','No\x20\x20permitido\x20deletar\x20o\x20grupo\x20padro','pre','Rtulo\x20invlido\x20ou\x20sem\x20ID.','Valor\x20invlido\x20para\x20converso\x20em\x20BRL:\x20','add','.mp4','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Cdigo\x20de\x20sada\x20','response','all','sem\x20texto\x20na\x20mensagem','findAll','dayjs','copy','ip6eui','debug','LEVEL','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia.','Erro\x20ao\x20avaliar\x20a\x20condio:\x20','waitingMenu_replyOptions','groupRequestParticipantsUpdate','sendPoll','dropCollection','https://v6.ident.me','\x1b[30m%s\x1b[0m','findManyByIds','https://chat.whatsapp.com/','createflow','sendWhatsAppAudio','chatId','):\x20sender\x20=\x20number:\x20','chats','groupGetInviteInfo','#9568cf','Database\x20update\x20result:','request\x20received\x20in\x20deleteFlow','ephemeralExpiration','isRunning','documentMessage','fileUrl','#dfaef0','desc','tags','creds.update','CONNECTION','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','\x1b[43m','isBusinessInstance','oldValue','hSet','error\x20get\x20vote','findAndReplaceRegex','insertCount','updateChatGroupData','call','restart','GROUPS_UPSERT','findGroup','linkPreview','errors','client','\x0a*Voc\x20respondeu*:\x0a','initializeQueue','Nmero:\x20','\x20tentativas.','lastCondition','):\x20A\x20mensagem\x20no\x20foi\x20enviada\x20pelo\x20bot','indexOf','Erro\x20ao\x20editar\x20agentes','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','findRealGroups','getScheduleMessageModelForOwner','7oUKRAo','dataValidate','format','Erro\x20ao\x20alterar\x20fluxo','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','waitingForReplyMenu','reference','Falha\x20ao\x20processar\x20a\x20solicitao\x20leaveGroup','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','HOST','messages','convertaudio','URL:','boolean','findByIdAndUpdate','pollCreationMessageV3','URL','startID','\x20removido\x20do\x20chat\x20','enabled','CHATS_DELETE','moreLogs','isAdmin','urlencoded','):\x20Grupo\x20no\x20encontrado\x20ou\x20groupdata\x20no\x20definido:\x20','\x5cd+','notify','groupUpdateDescription','\x20no\x20encontrado\x20para\x20cpia','):\x20newFirstValue\x20aps\x20replaceVariables:','replaceVariables',',\x20Comparador:\x20','body','):\x20Entrou\x20na\x20funo\x20saveReply','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','ListType','):\x20Enviando\x20localizao','empty','removed','find','url','blocks','isConnected','The\x20instance\x20needs\x20to\x20be\x20disconnected','This\x20name\x20','Falha\x20ao\x20processar\x20a\x20solicitao','IPv6\x20recriado\x20aps\x20falhas\x20de\x20reconexo.','reject','@s.whatsapp.net','\x1b[32m%s\x1b[0m','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','Falha\x20ao\x20processar\x20a\x20solicitao\x20send_message,\x20numero:\x20','REDIS','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','authModel','reaction','createConversationforgoToFlow','request\x20received\x20in\x20editFlowcondition','viewOnceMessageV2','sendButtons','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','Error\x20finding\x20many\x20contacts:','.xlsx','\x20no\x20encontrado\x20para\x20atualizao.','media','Instance\x20ID:','exec','messageSecret','createButtonsFromValues','type','):\x20Erro\x20ao\x20salvar\x20variveis\x20do\x20chat\x20no\x20BD:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','#000000','):\x20transformedCustomFieldVariables','jsonwebtoken','generateRandomIPv6','editflowcondition','CORS','.mp3','REDIS_PREFIX_KEY','https://api.openai.com/v1/audio/speech','remoteJid','createInstance','@whiskeysockets/baileys','Incio','fetchStatus','dbServer','router','editScheduleMessage','chatModify','.error','toggleEphemeral','document','Fluxo\x20no\x20encontrado\x20para\x20o\x20ID:','promote','done','number','Fluxo\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.','eventEmitter','docker','):\x20atualizao\x20chat:\x20','upsertedCount','$set','saveVariable','70GUwaba','beautifyWithPlaceholders','image','unlocked','saveChatVariables','setting','request\x20received\x20in\x20getFlow','ON\x20-\x20dbName:\x20','path','setRestartTimeout','redirect','deleteMessageForEveryone','\x20:\x20','):\x20[RETRY]:\x20Mximo\x20de\x20tentativas\x20alcanado,\x20desistindo\x20de\x20recuperar','ENABLED','sendSticker','getContactModelForOwner','):\x20conversation.waitingMenu_name','archiveChat','Error\x20removing\x20IPv6\x20address:\x20','\x22reaction\x22\x20must\x20be\x20an\x20emoji','announcement','convertToWebP','STORE','limit','):\x20Entrou\x20na\x20funo\x20processawaitSeconds','reconnectAttempts','send.message','):Converted\x20image\x20deleted','updateFlowConfig','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','API_KEY','blockId\x20\x20necessrio\x20para\x20deletar\x20um\x20bloco','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','/64\x20dev\x20','cpf','connectToWhatsappController','statusMessage','isJWT','GUARD','selectedId','deleteBlock','express-async-errors','saveTextReply','Flow\x20\x27','minutesToClose','buffer','onTime','/instance/create','convertaudioMP3','Instance\x20Name:','Partes\x20do\x20caminho\x20FULLCHAIN:','Valor\x20de\x20find\x20ou\x20replace\x20ausente','.png','):Image\x20converted\x20to\x20WebP','scheduleMessage','mongoose','.xls','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','./.git/config','trimmed','/events','createButtonSectionsFromValues','createServer','flowConfig','scheduled','descOwner','muteEndTime','Para\x20marcar\x20esse\x20fluxo\x20como\x20visvel\x20globalmente,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20Global.','setNewValue','):Processing\x20audio','getContentType','/:instanceName','startCommand','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20','composing','request\x20received\x20in\x20editFlowgroup','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','rows','setWebhook','findFlow','logout','audioMessage','\x22\x20-\x20REMOVED','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','scheduleSendMedia','Comando\x20desconhecido','PLAYED','editFlowCondition','retrySendMessage','ORG:','1744719IxSbTe','):\x20Os\x20fluxos\x20esto\x20desativados\x20para\x20','editFlowReply','error_log','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','lastSendMessage','Voc\x20no\x20tem\x20permisso\x20para\x20ver\x20o\x20fluxo\x20\x27','sign','imageMessage','Esse\x20fluxo\x20no\x20permite\x20importao.','.webm','capitalizedWords','initAuthCreds','stopIfLastReturnedError','USER','):\x20Buscando\x20conversas...','lastFetchAwaitingApproval','imgUrl','request\x20received\x20in\x20updateAutoCompleteMessages','):\x20Conversa\x20atualizada\x20em\x20memria','width','normalizeMessage','revokeInviteCode','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcanada,\x20crie\x20outra\x20instncia...','/wa-all-message','\x20no\x20\x20um\x20voto\x20enviado\x20pelo\x20usurio','updateOneById','Close\x20connection','setContext','\x1b[30m','Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp.','bodyStringErrorParse','toArray','GROUP_PARTICIPANTS_UPDATE','getAutomateSystem','StartBot','\x1b[33m\x1b[1m','Atualizao:\x20','Input\x20deve\x20ser\x20um\x20array\x20no\x20vazio\x20de\x20chats.','50mb','flow','/instance/fetchInstances','#92ceac','toUpperCase','WA\x20MODULE','):\x20Fluxos\x20no\x20esto\x20ativados','updateMediaMessage','messageHandle','Falha\x20ao\x20recriar\x20IPv6.','Falha\x20ao\x20processar\x20a\x20solicitao\x20createGroup',',\x20qrcodeCount:\x20','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualizao\x20do\x20git\x20e\x20npm\x20install.','creation','Falhou\x20ao\x20encontrar\x20chat\x20','Falha\x20ao\x20processar\x20a\x20solicitao\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','Not\x20Found','triedToSend','SERVER','GET','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','WebhookGlobal','updateGroupParticipantsWebhook','isJidGroup','result','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','):\x20condies\x20no\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','DATABASE_ENABLED','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','success','sleep','changeVariables','CONTACTS_SET','unreadCount','sha256','request\x20received\x20in\x20getConversation','condition','notEqual','remoteJids','RemoteJid:',':\x20Verificando\x20se\x20h\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao.','delayChatLabel','):\x20Erro\x20na\x20atualizao\x20da\x20conversa\x20no\x20BD:\x20','getLastMessage','reviver','text','applyvaredit','connect','.pptx','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','\x20minutos','replace','qrcode.updated','updateAgent','):Getting\x20image\x20from\x20url','insert','padStart','flushHeaders','contains','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','eventHandler','editFlowVaredit','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','findOrCreate','cache','button','configService','toBrazilianNumberFormat','Servidor\x20de\x20autenticao\x20offline.\x20Nova\x20tentativa\x20em\x20','Flow\x20iniciado','):\x20Current\x20Time:\x20','512RYJrNX','Erro\x20ao\x20buscar\x20a\x20conversa',']\x20(','lastReceivedMessage','from','notContains','isListOfNumbers','flows','Generated\x20IPv6:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio.','drop','remove.instance','delaySecMin','matchRegex','updateGroupWebhook','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupSetting','Removendo\x20package-lock.json\x20e\x20a\x20dependncia\x20especfica...','readFile','order','bodyString','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupBetterSetting','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','processawaitSeconds','processclearVariables','catch','Falta\x20informao\x20para\x20a\x20chamada\x20API','expiration','Erro\x20ao\x20adicionar\x20label\x20','IPv6\x20address\x20configured:\x20','subjectTime','selectedOptions','update',',\x20pairCode:\x20','optionName','messages.upsert','Erro\x20ao\x20aplicar\x20varedit:\x20','contactHandle','Variveis\x20no\x20encontradas:','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','updatePresence','\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.','isLong','):Output\x20path:\x20','request\x20received\x20in\x20scheduleMessage','phoneNumber','jwt','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','EXPIRIN_IN','firstValue','view\x20engine','convertToString','\x5c$&','menuType','env','Erro\x20ao\x20arquivar\x20chat','getBase64FromMediaMessage','groupBetterSetting','delayChatLabel_MAX_RETRIES','delaySecMax',',\x20valor\x20a\x20encontrar:\x20\x22','addMessagesToGroup','saveCreds','Erro\x20ao\x20encerrar\x20a\x20API','https://uazapi-plugin.bubbleapps.io/?url=','updateMessage','Type\x20not\x20found','_hour','menuMessage','closed','Erro\x20ao\x20atualizar\x20AutomateSystem:','1293abTeIG','groupadd','):\x20Editando\x20mensagens\x20no\x20grupo...','messageLogs','query','):\x20Editando\x20grupo\x20do\x20fluxo...','updateProfileName','promisify','SINGLE_SELECT','Erro\x20ao\x20importar\x20chats','collection','verifyWhatsAppNumber','listen','buttonParamsJson','):\x20No\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padro...','joinApprovalMode',',\x20canSendMessage:\x20','Erro\x20ao\x20criar\x20fluxo','Unauthorized','presence.update','views','cta_url','inviteUrl','normalizeMessageContent','editMessagesInGroup','mentioned','AUTHENTICATION_API_KEY','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','cleanDisconnectedInstances','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','digest','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','Para\x20criar\x20fluxo\x20global,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20global','KEY','Erro\x20de\x20duplicidade\x20no\x20ndice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20ndice...','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','getOwnPropertyNames','mongodb://','findLabels','when','No\x20\x20possvel\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','headerString','/create','basename','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','poll','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','Erro\x20ao\x20copiar\x20o\x20documento','restrict','Falha\x20ao\x20processar\x20a\x20solicitao\x20findRealGroups','https://github.com/uazapi/uazapi.git','app','):\x20Transformao\x20de\x20mensagens\x20agendadas\x20concluda!','child_process','):\x20Conversa\x20inserida\x20com\x20sucesso.','ini','STORE_CONTACTS','No\x20\x20possvel\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20est\x20em\x20processamento.','g.us','Font\x20is\x20required','AUTHENTICATION_JWT_EXPIRIN_IN','):\x20isVote:\x20','request\x20received\x20in\x20editFlow','\x1b[33m','pollMessageOnDelete','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','findMany','realVariables','connectedName','\x20foi\x20interrompido\x20pelo\x20usurio.','json','last_update','https://ifconfig.me/ip','description','Erro\x20ao\x20inserir\x20chats:','request_method','):\x20Encontradas\x20e\x20removidas\x20as\x20variveis:\x20','global','createConversationforStartFlow','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','addReplyOption','extractPhoneNumber','.svg','toNumber','Instance\x20Key\x20from\x20DB:','):Desconectado,\x20parando\x20execuo.','messageContextInfo','Error\x20while\x20deleting\x20message\x20for\x20everyone','AddUserFlow','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','13NBSxFi','Erro\x20desconhecido\x20ao\x20tentar\x20enviar\x20mensagem\x20para\x20o\x20grupo','selectedDisplayText','_Contacts','max','chats.delete','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','):\x20Flow\x20ativado\x20e\x20no\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificaes','editflowblock','createIPv6','_activedCount','data',',\x20Segundo\x20Valor:\x20','DisconnectReason','varedit','Sem\x20permisso\x20para\x20enviar\x20para\x20esse\x20grupo','/chat','):\x20Bloco\x20original\x20para\x20cpia:\x20','.fileUrl','The\x20\x22','groupHandler','STORE_CHATS','Fluxo\x20agendado\x20pelo\x20fluxo\x20','hGet','crypto','):\x20Erro\x20durante\x20a\x20atualizao:\x20','assign','rm\x20-rf\x20','EMAIL:','):Audio\x20processed','flowStopConversation','Request\x20Body:','vcard','https://','/exit','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','selectableCount','AUTHENTICATION_JWT_SECRET','/webhook','groupJid','stderr','fetchConversation','):\x20\x27Enviando\x20mdia\x20para\x20\x27','deleteConversation','):\x20lastBlockId:\x20','default','lastRealGroupsFetch','markMessageAsRead','\x1b[34m','Router','ip\x20-6\x20addr\x20add\x20','website','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','unreadcount','$dbName','inner','sort','remove','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','flowPrefixCommand','):\x20Conversa\x20est\x20expirada\x20-\x20voto','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','ListMessage','getOwnPropertyDescriptor','goNextblock','Db\x20Connection','array','dbInstance','title','NextBlock','SUCCESS','remote\x20\x22origin\x22','webhookModel','cwd','toBRL','https://api.openai.com/v1/images/generations','@g.us','groupParticipantsUpdate','leadInfo','not_announcement','Error\x20in\x20buttonsMessage\x20function:','map','/group','getChatModelForOwner','labelId','EMAIL','sendReaction','\x20instance\x20does\x20not\x20exist','removeInstance','contacts.update','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','):\x20Deletando\x20mensagem','findGroups','CORS_ORIGIN','GROUPS_UPDATE','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos','):\x20[messages.upsert]\x20group\x20ignored','ip\x20-6\x20addr\x20show\x20dev\x20','O\x20campo\x20id\x20\x20obrigatrio\x20para\x20editar/criar\x20um\x20chat.',',\x20resultado:\x20','):\x20no\x20\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','AddChatLabel','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','\x20-i\x20','localWebhook','none','ff:fe','interactiveResponseMessage','setHeader','isValidAndUniqueIPv6','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64',',\x20Minutes\x20to\x20Close:\x20','deleteDoneMessages','createFlow','readreceipts','O\x20campo\x20_id\x20\x20obrigatrio\x20para\x20editar\x20uma\x20conversa.','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','test','fileName','evaluateConditionTest','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','redisEnv','Type\x20is\x20required','\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo','prototype','END:VCARD','Last\x20message\x20not\x20found\x20for\x20number:\x20','reconnectTimestamps','verbose','http','DELETED','):\x20Mensagem\x20j\x20enviada\x20para\x20','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','nome','creds','SERVER_ACK','compression','groupLeave','shareOwners','recebido\x20de','class-validator','editFlow','No\x20\x20permitido\x20adicionar\x20outro\x20bloco\x20padro','4997880LrVPYh','):Archiving\x20chat','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','updateChatWithMessage','generate','The\x20global\x20api\x20key\x20must\x20be\x20set','all_member_add','longitude','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','contactsArrayMessage','}}\x20->\x20\x22','createSectionsFromValues','quoted','apikey','OrAnd','Erro\x20ao\x20normalizar\x20a\x20mensagem:','processblock','Instance\x20restarted','responsavelid','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','processPollUpdateMessage','CONTACTS_UPSERT','delAll','findOneAndUpdate','Error\x20removing\x20unused\x20chat\x20fields:','routerPath','globalShow','recording','height','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edio.','start','QRCODE_UPDATED','\x1b[36m%s\x1b[0m','Validate','stopMinutes','.extension','uazapiSendMedia','Fluxo\x20\x27','\x1b[34m%s\x1b[0m','envProcess','fetchMessages','findGroupsEspecial','apiResponse','Not\x20is\x20business\x20profile','chatHandle','Valor\x20invlido\x20para\x20formatao\x20brasileira:\x20','instanceCount','testIPv6','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','Authentication\x20error','Forbidden','configureIPv6','updateGroupsAddPrivacy','https://jsonip.com','editFlowVariable','now','getConversation','validate','isValidIPv6Config','footerText','content-type','maxActives','request\x20received\x20in\x20updateAgent','etiquetas','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','joinGroupValidate','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mdia:\x20','delay','findById','request\x20received\x20in\x20fetchConversation','cacheContactModel','URI','PASSWORD','.url','\x0aFN:','queue','/wa-qrcode','connectToWhatsapp','):\x20Enviando\x20contato','listMessage','^\x5cd+','StatusJidList\x20is\x20required','groupdata','listResponseMessage','preview','notas','use','imported','put','lastSend','CacheContacts\x20database\x20connection\x20closed.','interactiveMessage','flowStopMinutes','checkAndRestartProcess','DaysToDelete','--------------------------------------','InstancesAlterarTodas','Internal\x20Server\x20Error','findGroupInfos','updateGroupPicture','config','cachedContact','label_jid','2265yDuvet','):\x20Editando\x20varivel\x20do\x20fluxo...','padEnd','Falha\x20ao\x20processar\x20a\x20solicitao\x20inviteCode','DATABASE_CONNECTION_DB_PREFIX_NAME','instanceKeys','Instncia:\x20','truncatedtoEnd','fetchContacts','api','):\x20newSecondValue\x20aps\x20replaceVariables:','generateWAMessageFromContent','https://api64.ipify.org?format=json','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','lastInteraction','finish','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','del','):\x20Deletando\x20conversa...','):\x20Conversa\x20est\x20expirada','\x22\x20not\x20found','PROXY','No\x20foi\x20possvel\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automao.','pow','@ffmpeg-installer/ffmpeg','participant','):\x20Chat\x20','output','Nome\x20do\x20campo\x20personalizado\x20j\x20existe.','Network\x20interfaces\x20detected:\x20','count','autoCompleteMessages','errorLog','automateSystem','ipv6Prefix','data:\x20','filter','lowerCase','Deletion\x20failed','):\x20Going\x20to\x20','REDIS_URI','findIndex','stdout','updateMany','keys','function','pt-BR','less','):\x20No\x20encontrado\x20prxima\x20mensagem,\x20far\x20nova\x20verificao\x20em\x20','../env.yml','getProfileName','nativeFlowMessage','deleteFlow','):Audio\x20converted\x20and\x20stored\x20in\x20cache','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupName','updateGParticipant','updateGParticipate','forEach','SERVER_TYPE','):\x20Bloco\x20com\x20ID\x20','setUpdate','Erro\x20ao\x20tentar\x20updateCustomFields','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','uazapi\x20no\x20est\x20instalado\x20pelo\x20git','findParticipants','Rodap\x20de\x20Teste','redis://127.0.0.1:6379','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','write','conversationTimestamp','emit','fromObject','):\x20Ler\x20mensagem','restartInstance','Erro\x20ao\x20executar\x20bulkWrite:','fakeReceived','lean','flowConversation','removeIPv6ById','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','collections','Subscribed\x20Events:','flowName','locked','Erro\x20na\x20funo\x20updateChatWithMessage:\x20','label','isCommunity','leadInfo.desativadoFluxoAte','uazapiSendLocation','option','4YrRWBF','startCommandWord','):\x20nextBlock.uazapi.name','\x1b[44m','):\x20Editando\x20condio\x20do\x20fluxo...','msgRetryCounterCache','newValue','\x20inseridos\x20no\x20banco\x20de\x20dados...','deletedCount','):\x20no\x20encontrou','getScheduleMessage','editConversation','):\x20Detalhes\x20da\x20mdia\x20salvos\x20para\x20\x27','stack','secondValue','some','shift','unknown\x20operation\x20type\x20[','PREFIX_KEY','Instncia\x20no\x20encontrada.','verify','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessrios.','Erro\x20ao\x20atualizar\x20agendamento\x20','fromMe','[\x20SYSTEM\x20-\x20UAZAPI\x20]\x20-\x20Mensagem\x20perdida,\x20no\x20foi\x20possvel\x20descriptograf-la,\x20abra\x20o\x20WhatsApp\x20no\x20seu\x20celular\x20para\x20visualiz-la','):\x20Criando\x20fluxo...','subjectOwner','Last\x20message\x20not\x20found','sendDataWebhook','groupSettingUpdate','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','options','Group\x20not\x20found','CORS_CREDENTIALS','deleteOne','Fluxos\x20no\x20esto\x20ativados','variables','Opo\x20Falsa\x20','sendMedia','*Teste\x20de\x20Ttulo*\x0a\x0aDescrio\x20de\x20Teste\x0a','AutomateSystem\x20no\x20foi\x20inicializado','Bad\x20Request','deleted','defineAuthState','uazapi','isJidUser','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','):Error\x20in\x20converting\x20audio','):\x20Editando\x20edio\x20do\x20fluxo...','ScheduleMessage','Bloco\x20com\x20ID\x20','error','@newsletter','stanzaId','updateReadReceiptsPrivacy','fone','/wa-message','audio/ogg','temp-','next_groupId','makeCacheableSignalKeyStore','font','leadInfo.customFields','/wa-connection-update','Subdomnio\x20extrado\x20do\x20caminho\x20SSL:','replyOptionId\x20\x20necessrio\x20para\x20deletar\x20um\x20replyOption','WARN','menuExpiredMessage','uazapiSendMenu','):\x20Condies\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','enviado\x20para','deviceSentMessage','saveMediaToFile','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio:\x20','urlOrBase64','profileName','loadEnv','unavailable','cacheInstanceRepository','Erro\x20ao\x20atualizar\x20o\x20flow.','integer','joinGroup','apiName','stickerMessage','Log\x20out\x20instance:\x20','ChatRouter','sections','):Notifying\x20clients\x20for\x20chat:\x20','findConversation','):Trying\x20to\x20get\x20business\x20profile','upsertChats','):\x20Entrou\x20na\x20funo\x20stop','):\x20ndice\x20do\x20bloco\x20a\x20ser\x20atualizado:','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','synchronizeAndMapFlows','labels.edit','lastMessage','delete','auth','lastBlockId','replaceVariablesChat','updateProfilePicture','#fed428','ip\x20-6\x20addr\x20del\x20','):\x20Instancia\x20isBusiness:\x20','pollUpdateMessage','creds.json','/wa-message-update','cleanStore','true','_month','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','#fe9dfe','Erro\x20ao\x20iniciar\x20o\x20fluxo.','ObjectId','ms\x20(tentativa\x20','writeFileSync','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','post','autoCompleteMessages.command_1','_p_','DELIVERY_ACK','inviteCodeDetails','pendingMessages','):\x20Falha\x20ao\x20atualizar\x20as\x20variveis\x20do\x20chat\x20no\x20BD','FlowRouter','CONTACTS_UPDATE','\x20and\x20data:','convertedOptions','\x20foi\x20removido\x20por\x20no\x20ser\x20vlido.','.ogg','dbSettings','RECONNECT_TIME_FRAME','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperao','BRL','E-mail:\x20','trim','.X-ABLabel:Celular\x0a','Error\x20parsing\x20JSON:','splice','noConnection','STATUS_INSTANCE','backgroundColor','send','Erro\x20ao\x20iniciar\x20fluxo:\x20','createGroup','audioWhatsapp','):\x20mediaMessageInfoId\x20:\x20','variable','detail','\x27...','isInteger','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','DEBUG','keyPattern','false','encoding','js-yaml','):\x20Criando\x20fluxo\x20compartilhado...','Campo\x20personalizado\x20no\x20encontrado\x20para\x20o\x20nome\x20','originalUrl','Falha\x20ao\x20processar\x20a\x20solicitao\x20removeProfilePicture','MESSAGES_UPSERT','Fluxo\x20no\x20encontrado\x20na\x20memria.','replyOptions','status','messagesLogs','The\x20property\x20cannot\x20be\x20empty','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','ScheduleMessageModel','getReadyToSendMessages','replaceOne','API\x20Key\x20invlida\x20ou\x20instncia\x20no\x20encontrada.','scheduleFlow','messageLogsModel','getFullYear','addBlock','node-cache','activatedCount','chats.update','):\x20No\x20achou\x20nenhum\x20flow','Error\x20in\x20chatModify\x20for\x20number\x20','Falha\x20ao\x20processar\x20a\x20solicitao\x20findGroups','pollErrorMessage','readFileSync','exports','context','processScheduleFlow','awaitSeconds','getTime','readdirSync','replyOption','fetchBusinessProfile','fetchInstances','footer','getBusinessProfile','viewOnceMessage','authService','extractRegex','Message','Erro\x20ao\x20atualizar\x20conversa:\x20','toLowerCase','Dados\x20invlidos\x20para\x20edio\x20de\x20mensagens\x20no\x20grupo.','mongodb','expression','messageStubParameters','authentication','StartID:','):\x20teve\x20mudanas\x20chat.ephemeralExpiration:\x20',',\x20saindo.','copyBlock','split','https://ipv6.jsonip.com','COLOR','ip:\x20','messageId','qrCode','_FlowHistorico','8080','):Sending\x20audio\x20whatsapp','reorderBlocks','authState','close','Selecione','):Alterar\x20configurao\x20de\x20mudo\x20para\x20o\x20chat:\x20','toString','updateReplyOption','caption','and','evaluateCondition','entries','createWebhook','imagechat','Varivel\x20no\x20encontrada!','cleaningUp','method','ERROR','):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','editedMessage','message_normalized','beforeExit','):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20voc\x20no\x20tem\x20permisso\x20para\x20us-lo','):\x20debug\x20alterando\x20this.AutomateSystem','action','getSeconds','stopWhenYouSendMsg','hDel','No\x20\x20permitido\x20editar\x20uma\x20varivel\x20com\x20leadInfo\x20definido\x20como\x20true.','\x20-y','):\x20Procurando\x20PRONTAS\x20mensagens\x20para\x20envio','ContactsAndGroups','groups','Rtulo\x20deletado:\x27,\x20','_sender','\x22\x20-\x20NOT\x20CONNECTION','$addToSet','createNewConversation','notEmpty','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','createAndSave','connectionClosed','getValidWhatsAppNumbers','requestFile','createConnection','sharp','latitude','state','env.KEY\x20!==\x20key','):\x20Editando\x20replyOption...','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileStatus','deleteMessage','documentWithCaptionMessage','processConditions','.TEL;waid=','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','groupRevokeInvite','):\x20Comando\x20desconhecido:\x20','valid','findByIdAndDelete','instancias:\x20','ip\x20-br\x20link\x20show','stopped','writeData','logger','prepareWAMessageMedia','content','profile','https://api.ipify.org?format=json','instance','.ppt','removeProfilePicture','STORE_MESSAGE','\x1b[41m','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','RemoveChatLabel','Erro\x20ao\x20editar\x20condio\x20do\x20fluxo','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','Valor\x20inicial:\x20\x22','audio/ogg;\x20codecs=opus','stringify','):\x20updateResult:','findContacts','yes','DB_PREFIX_NAME','\x1b[37m','superadmin','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','leaveGroup','out','\x22\x20cannot\x20be\x20empty','qrcode','displayName','code','fetchProfilePicture','_error','importChats','startFlowWebhook','\x0a\x0a\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','redis','list','Falha\x20ao\x20criar\x20IPv6.','Configurao\x20SSL\x20recuperada:','instanceInfo','variablesToObject','pollCreationMessageV2','folder','SEND_MESSAGE','chatLog','replacer','Subdomnio\x20no\x20encontrado','ephemeralDuration','exit','):\x20Procurando\x20conversa','readMessages','goToFlow','Message\x20absent\x20from\x20node','READ','existsSync','notMatchRegex','deleteInstance','cachedContacts-whatsapp','Erro\x20ao\x20editar\x20o\x20bloco:\x20','STORE_CLEANING_TERMINAL','shareFlow','updateMissingEtiquetas','groupCreate','request\x20received\x20in\x20createFlow','conditions','AutomateSystem','utf-8','isURL','pollOnReplyDelete','connectionState','webhookMap','groups.upsert','silent','updateLastSeenPrivacy','loadWebhook','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','):Delete\x20chat','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','values','sendText','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','/media/','warn','Erro\x20ao\x20buscar\x20conversas','Erro\x20ao\x20atualizar\x20mltiplas\x20conversas:','DATABASE','prepareMediaMessage','loadInstance','getPrototypeOf','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20updatePresence','AutomateFunctions','All_Instances_Config','blockLogs','BufferJSON','No\x20respondeu\x20com\x20a\x20enquete.','0123456789ABCDEF','Cannot\x20','/config','LOG','replaceVariablesInReplyOptions','):\x20tem\x20blocks','):\x20Extenso\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','\x1b[1m\x1b[37m','request\x20received\x20in\x20getAutomateSystem','):\x20Usando\x20extenso\x20padro:\x20','CORS_METHODS','editflowgroup','reorderMessages','/wa-chats','currency','sendCommand','):Temp\x20image\x20deleted','color','FULLCHAIN','connectionUpdate','No\x20\x20permitido\x20deletar\x20o\x20bloco\x20padro','webhook','):\x20Criando\x20nova\x20conversa[createNewConversation]','387398HJQkmo','unlinkSync',',\x20Novo\x20tamanho:\x20','choices','slice','labels.association','Nenhum\x20participante\x20vlido\x20encontrado.','fetchProfile','fileLength','.mimetype','charAt','detectIPv6PrefixAndInterface','addChatLabel','updateAll','groupSetting','deleteflow','participants','findMessages','admin_add','mkdirSync','flush','):\x20Removendo\x20\x27','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','.pdf','bulkWrite','userDevicesCache','/wa-contacts','includes','statusCode','throwAndLogError','scheduleSendAudio','thumbnailUrl','URL\x20no\x20disponvel','getFlow','uazapiSendAudio','VERBOSE','messageType','protocolMessage','groupFetchAllParticipating','p-queue','uncaughtException','processConditionsTest','Erro\x20ao\x20limpar\x20instncias\x20desconectadas:','No\x20suitable\x20network\x20interface\x20found','PRODUCT_LIST','Missing\x20global\x20api\x20key','processUazapi','METHODS','_day','match','#f64847','Fluxo\x20id\x20\x27','getStatus','name','groupId','Invalid\x20format','deleteMany','connectedClient','storePath','/instance','instanceName','[all]','_id','):\x20Flow\x20\x27','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','desativadoFluxoAte','stopConversation','.docx','.txt','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','testingWith','connection.update','CHATS_UPSERT','undefined','modifiedCount','https','ContactModel','}}\x20->\x20valor\x20no\x20encontrado','API\x20Key\x20from\x20Request:','long','webp','waMonitor','quick_reply','ConversationModel','hbs','get','Erro\x20ao\x20alterar\x20privacidade','Mac\x20OS','request\x20body:\x20','messages.set','-whatsapp-api','announce','info','Error\x20in\x20prepareMediaMessage:','\x1b[1m','save','#ff9484','):\x20Editando\x20bloco...',',\x20far\x20nova\x20verificao\x20em\x20','loggedOut','archive','getVariablesChat','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','single_select','util','/wa-groups','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupDesc','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','processgoToFlow','birthtime','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','getMessage','):\x20Query\x20params:\x20','uazapiSendContact','getMonth','):Hash\x20to\x20image\x20name:\x20','customFields','LabelModel','command','proto','ignoreGroups','email','\x20com\x20sucesso.','sendLocation','Module\x20-\x20ON','editflowvaredit','scheduleNextCheck','CHATS_UPDATE','Adicionando\x20novo\x20participante:\x20','uazapiSendText','writeFile','telefone','/events/:instance','):\x20Buscando\x20conversa...','toFile','No\x20\x20permitido\x20adicionar\x20outro\x20grupo\x20padro','DATABASE_CONNECTION_URI','base64','):\x20Criou\x20conversa\x20no\x20startFlow','deleteAll','blockId','pairingCode','startsWith','instance.','PENDING','):\x20alterando\x20this.AutomateSystem','Primeiro\x20Valor:\x20','min','):\x20error:\x20','AUTHENTICATION','replaceVariablesLogs','editflowreply','status@broadcast','LICENSE_INVALID','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','verifiedName','stateConnection','\x1b[37m%s\x1b[0m','key','spawn','app-state-sync-key','processReadyMessages','groupMetadata','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','):\x20Entrou\x20na\x20funo\x20goToFlow','flattenObject','.jwt','MESSAGES_UPDATE','API\x20Key\x20invlida.','apply','dbConnection','nomecompleto','headers','pushName','contactMessage','presence','greater','.ogv','):\x20A\x20mensagem\x20\x20\x22stopConversation\x22\x20=\x20','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','https://uazapi-plugin.bubbleapps.io/','Error\x20adding\x20IPv6\x20address:\x20','startFlow','agents',',\x20valor\x20passado:\x20\x22','Partes\x20do\x20domnio:','isJidBroadcast','updateAutoCompleteMessages','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','Tentando\x20reconectar...','readData','Por\x20favor,\x20responda\x20\x20ltima\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opes\x20disponveis,\x20sem\x20digitar\x20sua\x20resposta.','chat','substring','findAndUpdateCacheContact','):\x20Flow\x20desativado','bateu\x20events','fetchPrivacySettings','DATABASE_CONNECTION_PASSWORD','TEL','join','Encerrando\x20a\x20API\x20por\x20solicitao\x20via\x20rota\x20/exit','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','express','arraybuffer','):\x20Grupo\x20','):\x20A\x20atualizao\x20no\x20BD\x20da\x20conversa\x20no\x20foi\x20bem\x20sucedida','templateButtonReplyMessage','mediatype','Instance\x20logged\x20out','DOCKER_ENV','downloads','canSendMessage','Detalhes\x20do\x20erro:','):\x20Falha\x20ao\x20deletar\x20mensagem.','equal','REDIS_ENABLED','timeInMinutes','removeData','leadInfo.','MAX_SAFE_INTEGER','MESSAGES_SET','updateOnlinePrivacy','_year','public','request\x20received\x20in\x20editFlowvariable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','replaceVariablesInObject','messages.update','Retornando\x20grupos\x20SEM\x20cache','):\x20','\x20inseridas\x20no\x20banco\x20de\x20dados...','groupName','groupInviteCode','sendMenu','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','repository','buttonText','endsWith','@broadcast','unhandledRejection','axios','Erro\x20ao\x20iniciar\x20a\x20aplicao:\x20','isBase64','no.connection','networkInterface','\x20no\x20encontrado','removeIPv6','log','statusJidList','PRESENCE_UPDATE','mediaSticker','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','exists','updateBlock','findAndReplace','PORT','getClient','organization','owner','oldToken','editFlowBlock','chats.upsert','atendimentoAberto','Prxima\x20verificao\x20de\x20licena\x20e\x20se\x20tem\x20atualizao\x20em\x20','_ScheduleMessages','groupJoinApprovalMode','-instances','cachedData-whatsapp','findOne','768xnQrxx','getMessageModelForOwner','editFlowGroup','):\x20Rtulo\x20atualizado:\x20','envYaml','):\x20Limpando\x20delayMessage','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileName','Parando\x20aplicao,\x20atualizao\x20recebida','local_map','group-participants.update','updateConversation','archived','sendAudio','set','Boto\x201','Regularize\x20sua\x20licena\x20no\x20site\x20https://uazapi.dev/','Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.','):Image\x20path:\x20','INFO','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','inviteCode','value','Erro\x20ao\x20editar\x20configurao\x20de\x20fluxos','bearer','round','waitingMenu_text','conversation','dropIndex','\x20do\x20chat\x20','ex:\x20\x22groupJid=120362@g.us\x22','listType','Falha\x20ao\x20processar\x20a\x20solicitao\x20toggleEphemeral','deleteChat','online','floor','\x1b[32m','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao:\x20','getHours','[TESTE\x20RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperao','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','buttonMessage','groupValidate','end','contacts.upsert','CHATS_SET','processApiRequest','isCommunityAnnounce','messageTimestamp','):\x20Loop\x20externo\x20interrompido\x20devido\x20\x20flag\x20isConnected','isArray','formatVCard','JWT','whatsappNumber','sendPresenceUpdate','\x27\x20removido\x20do\x20AutomateSystem.','Deleted\x20','updateCustomFields','video','repeat','groups.update','selectedRowId','model','gifPlayback','SSL_CONF','sendMessageWithTyping','):\x20Mensagens\x20PRONTAS\x20para\x20envio\x20encontradas:\x20','profilePictureUrl','#b4ebff','removeChatLabel','wuid','subject','contact_blacklist','contextInfo','editflowvariable','ChatModel','findWebhook','contacts','groups_ignore','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','messaging-history.set','singleSelectReply','):\x20Enviando\x20mdia','cacheInstanceModel','idSchedule','allContacts','Database\x20connection\x20closed.','delayMessage','?timestamp=','request_time','src','Nenhum\x20campo\x20vlido\x20para\x20atualizao\x20fornecido.','Erro\x20de\x20atualizao:\x20','Content\x20is\x20required','sendStatus','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','admin','random','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','proxy:\x20','):\x20enviado\x20para\x20[','status.instance','header','waitingMenu_id','Read\x20messages','user','processingGroup','sendMessageWithTypingButtons','params','Limpando\x20logs\x20do\x20PM2...','):\x20Envio\x20interrompido\x20devido\x20\x20desconexo.','Telefone:\x20','_activatedCount','closeExistingConversations','AppStateSyncKeyData','console','updatePrivacySettings','randomMac','fullName','dbClient','create','processvaredits','instances','Conexo\x20estabelecida','senderKeyDistributionMessage','createJid','):\x20Entrou\x20na\x20funo\x20scheduleFlow','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfilePicture','buttons','):\x20Iniciando\x20bot...','11685108GkYMQN','getConversationModelForOwner','webhookService'];a0_0x4d46=function(){return _0x13f578;};return a0_0x4d46();}function Si(){const _0x516475=a0_0x4bc873;let _0x143dc1={};for(let _0x37ca3f in se)_0x143dc1[_0x37ca3f]=Object[_0x516475(0x5b2)](se[_0x37ca3f])['map'](_0x4b4cf6=>({'id':_0x4b4cf6['id'],'events':_0x4b4cf6[_0x516475(0x82b)]}));return _0x143dc1;}var Ci=require(a0_0x4bc873(0x787)),Ts=require('mongoose'),Is=class{},Io=new Ts[(a0_0x4bc873(0x7be))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),To=new Ts['Schema']({'_id':{'type':String,'default':a0_0x4bc873(0x3ea)},'WebhookGlobal':{'type':Io},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),ve=I?.['model'](Is[a0_0x4bc873(0x60f)],To,a0_0x4bc873(0x5bf)),_o=Mi[a0_0x4bc873(0x323)]['join'](__dirname,a0_0x4bc873(0x6ad)),ke=(0x0,Ot[a0_0x4bc873(0x327)])(),Oo=S['get']('AUTHENTICATION')[a0_0x4bc873(0x7de)],re=[Aa,Ia,Oa[Oo]];ke['use'](a0_0x4bc873(0x830),Ot[a0_0x4bc873(0x323)][a0_0x4bc873(0x837)](_o))[a0_0x4bc873(0x62f)](a0_0x4bc873(0x65e),async(_0x5f3f4b,_0xd6620f)=>{const _0x4f33c7=a0_0x4bc873;console[_0x4f33c7(0x6d2)](_0x4f33c7(0x69e));let _0x11172a=_0x5f3f4b[_0x4f33c7(0x753)][_0x4f33c7(0x568)],_0x31b6fb=(_0x5f3f4b['query'][_0x4f33c7(0x82b)]||'')[_0x4f33c7(0x51b)](','),_0x581d25=(0x0,Ci['v4'])();console[_0x4f33c7(0x6d2)](_0x4f33c7(0x8c4),_0x11172a),console[_0x4f33c7(0x6d2)](_0x4f33c7(0x43e),_0x31b6fb);let _0x53ad72=S[_0x4f33c7(0x62f)](_0x4f33c7(0x66f))[_0x4f33c7(0x90a)],_0x221481=_0x5f3f4b['query'][_0x4f33c7(0x393)];if(console[_0x4f33c7(0x6d2)](_0x4f33c7(0x628),_0x221481),_0x53ad72[_0x4f33c7(0x2bd)]!==_0x221481){console[_0x4f33c7(0x6d2)](_0x4f33c7(0x553));try{let _0x1e1d64=await fe[_0x4f33c7(0x4a9)]['find'](_0x11172a);if(console[_0x4f33c7(0x6d2)](_0x4f33c7(0x2f0),_0x1e1d64),!_0x1e1d64||_0x1e1d64[_0x4f33c7(0x393)]!==_0x221481)return console[_0x4f33c7(0x6d2)](_0x4f33c7(0x78f)),_0xd6620f[_0x4f33c7(0x4ed)](0x191)[_0x4f33c7(0x4d6)](_0x4f33c7(0x682));}catch(_0x27b090){return console[_0x4f33c7(0x47a)]('Error\x20retrieving\x20instance\x20or\x20API\x20Key:',_0x27b090),_0xd6620f[_0x4f33c7(0x4ed)](0x191)[_0x4f33c7(0x4d6)](_0x4f33c7(0x4f4));}}if(!await _e(_0x11172a))return _0xd6620f[_0x4f33c7(0x4ed)](0x194)[_0x4f33c7(0x4d6)](_0x4f33c7(0x45a));_0xd6620f[_0x4f33c7(0x363)]('Content-Type','text/event-stream'),_0xd6620f[_0x4f33c7(0x363)]('Cache-Control','no-cache'),_0xd6620f['setHeader'](_0x4f33c7(0x810),'keep-alive'),_0xd6620f[_0x4f33c7(0x248)]();let _0x5c6ac4=_0x4f33c7(0x410)+JSON[_0x4f33c7(0x573)]({'info':_0x4f33c7(0x762)})+'\x0a\x0a';_0xd6620f[_0x4f33c7(0x431)](_0x5c6ac4),yi(_0x11172a,_0x581d25,_0xd6620f,_0x31b6fb),_0x5f3f4b['on']('close',()=>{const _0x58c6bf=_0x4f33c7;console[_0x58c6bf(0x6d2)]('Connection\x20closed\x20for\x20instance:\x20'+_0x11172a),bi(_0x11172a,_0x581d25);});}),ke['post']('/startFlow/:instance/:startID',async(_0x51674b,_0x433c5c)=>{const _0x5ba24c=a0_0x4bc873;console[_0x5ba24c(0x6d2)](_0x5ba24c(0x7e3));let _0x31058b=_0x51674b[_0x5ba24c(0x753)][_0x5ba24c(0x568)],_0xfeeb44=_0x51674b[_0x5ba24c(0x753)][_0x5ba24c(0x894)],_0x25e504=_0x51674b['query'][_0x5ba24c(0x8d4)]||'',_0x9e3f1c=_0x51674b[_0x5ba24c(0x8a3)];console[_0x5ba24c(0x6d2)](_0x5ba24c(0x91d),_0x31058b),console['log'](_0x5ba24c(0x517),_0xfeeb44),console[_0x5ba24c(0x6d2)](_0x5ba24c(0x235),_0x25e504),console[_0x5ba24c(0x6d2)](_0x5ba24c(0x315),_0x9e3f1c);try{if(!await _e(_0x31058b))return _0x433c5c['status'](0x194)[_0x5ba24c(0x4d6)](_0x5ba24c(0x45a));let _0x49f43f=await O[_0x5ba24c(0x585)](_0x31058b,_0xfeeb44,_0x25e504,_0x9e3f1c);_0x433c5c['send'](_0x49f43f);}catch(_0x3127c3){console[_0x5ba24c(0x47a)](_0x3127c3),_0x433c5c['status'](0x1f4)['send'](_0x5ba24c(0x4b8));}}),ke[a0_0x4bc873(0x62f)]('/clients-info',(_0xfb9bd2,_0x1e6705)=>{const _0x2705c6=a0_0x4bc873;let _0x35e3ec=Si();_0x1e6705[_0x2705c6(0x2e2)](_0x35e3ec);})['get']('/',(_0x4186f8,_0x350607)=>{const _0x4c6deb=a0_0x4bc873;let _0x9ad35f=S[_0x4c6deb(0x62f)]('SERVER')[_0x4c6deb(0x893)];if(_0x9ad35f){let _0xbed9c7=encodeURIComponent(''+_0x9ad35f);_0x350607[_0x4c6deb(0x8f5)](_0x4c6deb(0x295)+_0xbed9c7);return;}let _0x5f4cfb=S[_0x4c6deb(0x62f)]('SSL_CONF'),_0xf3c575=_0x5f4cfb&&_0x5f4cfb['FULLCHAIN'][_0x4c6deb(0x51b)]('/')[0x4];if(_0xf3c575){let _0x402f1c=encodeURIComponent('https://'+_0xf3c575);_0x350607[_0x4c6deb(0x8f5)](_0x4c6deb(0x295)+_0x402f1c);}else _0x350607[_0x4c6deb(0x8f5)](_0x4c6deb(0x68e));})[a0_0x4bc873(0x3de)](a0_0x4bc873(0x318),...re,async(_0x59def4,_0x5cbe00)=>{const _0xc5276b=a0_0x4bc873;try{console['log'](_0xc5276b(0x6a3)),_0x5cbe00[_0xc5276b(0x4ed)](0xc8)[_0xc5276b(0x2e2)]({'message':'API\x20encerrada\x20com\x20sucesso.\x20Ela\x20ser\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos'}),_0x5cbe00['on'](_0xc5276b(0x3fc),()=>process[_0xc5276b(0x594)](0x0));}catch(_0x3f8be0){console[_0xc5276b(0x47a)](_0xc5276b(0x806),_0x3f8be0),_0x5cbe00[_0xc5276b(0x4ed)](0x1f4)[_0xc5276b(0x2e2)]({'message':_0xc5276b(0x294)});}})[a0_0x4bc873(0x3de)](a0_0x4bc873(0x5c5),...re,async(_0x43e865,_0x36acd6)=>{const _0x986615=a0_0x4bc873;try{let _0x451e1a=_0x43e865['body'];await ve[_0x986615(0x7eb)]({},{'$set':_0x451e1a},{'upsert':!0x0});let _0x12b3c3=await ve[_0x986615(0x6e7)]();_0x36acd6['json'](_0x12b3c3);}catch(_0xd02d41){_0x36acd6[_0x986615(0x4ed)](0x190)[_0x986615(0x4d6)](_0xd02d41['message']);}})['get'](a0_0x4bc873(0x5c5),...re,async(_0x2b8757,_0x316eae)=>{const _0x48af6d=a0_0x4bc873;try{let _0x3be791=await ve['findOne']();if(!_0x3be791)return _0x316eae[_0x48af6d(0x2e2)]({});_0x316eae[_0x48af6d(0x2e2)](_0x3be791);}catch(_0x1ea012){_0x316eae[_0x48af6d(0x4ed)](0x1f4)[_0x48af6d(0x4d6)](_0x1ea012[_0x48af6d(0x805)]);}})[a0_0x4bc873(0x3dc)](a0_0x4bc873(0x615),new yt(S,...re)[a0_0x4bc873(0x8da)])[a0_0x4bc873(0x3dc)]('/message',new At(...re)[a0_0x4bc873(0x8da)])[a0_0x4bc873(0x3dc)](a0_0x4bc873(0x306),new ct(...re)['router'])[a0_0x4bc873(0x3dc)](a0_0x4bc873(0x348),new wt(...re)[a0_0x4bc873(0x8da)])[a0_0x4bc873(0x3dc)](a0_0x4bc873(0x31c),new Tt(...re)[a0_0x4bc873(0x8da)])[a0_0x4bc873(0x3dc)]('/automate',new _t(...re)['router']);function a0_0x59bb(_0x2d5abe,_0x454d2c){const _0x4d46fb=a0_0x4d46();return a0_0x59bb=function(_0x59bbb8,_0x440c79){_0x59bbb8=_0x59bbb8-0x1e2;let _0x302954=_0x4d46fb[_0x59bbb8];return _0x302954;},a0_0x59bb(_0x2d5abe,_0x454d2c);}var m=class{constructor(..._0xf1fa33){const _0x4b70a0=a0_0x4bc873;throw{'status':0x190,'error':_0x4b70a0(0x470),'message':_0xf1fa33[_0x4b70a0(0x825)]>0x0?_0xf1fa33:void 0x0};}},ie=class{constructor(..._0x3cb9de){const _0x5b8f52=a0_0x4bc873;throw{'status':0x191,'error':_0x5b8f52(0x2ae),'message':_0x3cb9de[_0x5b8f52(0x825)]>0x0?_0x3cb9de:void 0x0};}},Z=class{constructor(..._0x37569e){const _0xd02fc3=a0_0x4bc873;throw{'status':0x193,'error':_0xd02fc3(0x3b8),'message':_0x37569e[_0xd02fc3(0x825)]>0x0?_0x37569e:void 0x0};}},U=class{constructor(..._0x415d5c){const _0x29f193=a0_0x4bc873;throw{'status':0x194,'error':_0x29f193(0x21e),'message':_0x415d5c[_0x29f193(0x825)]>0x0?_0x415d5c:void 0x0};}},x=class{constructor(..._0x1883c8){const _0x3a463d=a0_0x4bc873;throw{'status':0x1f4,'error':_0x3a463d(0x3e7),'message':_0x1883c8[_0x3a463d(0x825)]>0x0?_0x1883c8:void 0x0};}},we=require(a0_0x4bc873(0x8d6));async function _s(_0x308e93){const _0x4b4956=a0_0x4bc873;let _0x2db68f=new $(_s['name']),_0x38afe5=I[_0x4b4956(0x6db)](),_0x33a71b=_0x38afe5['db'](S[_0x4b4956(0x62f)](_0x4b4956(0x5b9))[_0x4b4956(0x867)][_0x4b4956(0x577)]+'-instances')[_0x4b4956(0x2a6)](_0x308e93),_0x458710=async(_0xadb606,_0x452d9a)=>{const _0x4b4636=_0x4b4956;try{return await _0x38afe5[_0x4b4636(0x23e)](),await _0x33a71b[_0x4b4636(0x4f3)]({'_id':_0x452d9a},JSON[_0x4b4636(0x7ed)](JSON['stringify'](_0xadb606,we[_0x4b4636(0x5c1)][_0x4b4636(0x591)])),{'upsert':!0x0});}catch{}},_0x9ce002=async _0x133c3a=>{const _0xd933f1=_0x4b4956;try{await _0x38afe5['connect']();let _0x269b20=await _0x33a71b[_0xd933f1(0x6e7)]({'_id':_0x133c3a}),_0x1ec9e0=JSON['stringify'](_0x269b20);return JSON[_0xd933f1(0x7ed)](_0x1ec9e0,we[_0xd933f1(0x5c1)][_0xd933f1(0x23b)]);}catch{}},_0x4e288b=async _0x5cd40a=>{const _0x2f32a9=_0x4b4956;try{return await _0x38afe5[_0x2f32a9(0x23e)](),await _0x33a71b[_0x2f32a9(0x469)]({'_id':_0x5cd40a});}catch{}},_0x469b12=await _0x9ce002(_0x4b4956(0x37d))||(0x0,we[_0x4b4956(0x1f3)])();return{'state':{'creds':_0x469b12,'keys':{'get':async(_0x4c7aeb,_0x2dcf49)=>{const _0x1b8d26=_0x4b4956;let _0x9a49aa={};return await Promise[_0x1b8d26(0x844)](_0x2dcf49[_0x1b8d26(0x347)](async _0x53aac7=>{const _0x726b0b=_0x1b8d26;let _0x5a27a3=await _0x9ce002(_0x4c7aeb+'-'+_0x53aac7);_0x4c7aeb===_0x726b0b(0x67a)&&_0x5a27a3&&(_0x5a27a3=we[_0x726b0b(0x651)][_0x726b0b(0x50f)]['AppStateSyncKeyData'][_0x726b0b(0x434)](_0x5a27a3)),_0x9a49aa[_0x53aac7]=_0x5a27a3;})),_0x9a49aa;},'set':async _0x2da98d=>{const _0x25345b=_0x4b4956;let _0x2b4260=[];for(let _0x1aaa99 in _0x2da98d)for(let _0x6eb5f6 in _0x2da98d[_0x1aaa99]){let _0x80a031=_0x2da98d[_0x1aaa99][_0x6eb5f6],_0x101f8c=_0x1aaa99+'-'+_0x6eb5f6;_0x2b4260['push'](_0x80a031?_0x458710(_0x80a031,_0x101f8c):_0x4e288b(_0x101f8c));}await Promise[_0x25345b(0x844)](_0x2b4260);}}},'saveCreds':async()=>_0x458710(_0x469b12,_0x4b4956(0x37d))};}var ks=T(require(a0_0x4bc873(0x629))),Ls=T(require(a0_0x4bc873(0x4f9))),Dt=require(a0_0x4bc873(0x8d6)),Ei=require('@redis/client'),Pt=require('@whiskeysockets/baileys'),xt;function xo(_0x41c038){const _0xfbb320=a0_0x4bc873;return xt||(xt=(0x0,Ei[_0xfbb320(0x815)])({'url':_0x41c038[_0xfbb320(0x3cd)]}),xt[_0xfbb320(0x23e)]()),xt;}var pe=class u{constructor(_0x4bb180,_0xc80a1a){const _0x193547=a0_0x4bc873;this[_0x193547(0x370)]=_0x4bb180,this[_0x193547(0x616)]=_0xc80a1a,this['logger']=new $(u[_0x193547(0x60f)]),this[_0x193547(0x877)]=xo(_0x4bb180);}set[a0_0x4bc873(0x889)](_0x5d4cb8){const _0x37c52f=a0_0x4bc873;this[_0x37c52f(0x616)]=_0x5d4cb8;}async[a0_0x4bc873(0x3f2)](){const _0x447ad9=a0_0x4bc873;try{return await this[_0x447ad9(0x877)][_0x447ad9(0x5d2)]([_0x447ad9(0x419),this[_0x447ad9(0x370)][_0x447ad9(0x459)]+':*']);}catch(_0xe41a9e){this[_0x447ad9(0x563)]['error'](_0xe41a9e);}}async[a0_0x4bc873(0x562)](_0xacd2f3,_0x177ad5){const _0x13bf55=a0_0x4bc873;try{let _0x4e8d29=JSON[_0x13bf55(0x573)](_0x177ad5,Pt[_0x13bf55(0x5c1)][_0x13bf55(0x591)]);return await this['client'][_0x13bf55(0x86c)](this[_0x13bf55(0x370)][_0x13bf55(0x459)]+':'+this['instanceName'],_0xacd2f3,_0x4e8d29);}catch(_0x3d5611){this[_0x13bf55(0x563)][_0x13bf55(0x47a)](_0x3d5611);}}async[a0_0x4bc873(0x7a5)](){const _0x1e8457=a0_0x4bc873;try{let _0x5e0284=await this[_0x1e8457(0x877)]['hGetAll'](this[_0x1e8457(0x370)][_0x1e8457(0x459)]+':'+this[_0x1e8457(0x616)]);if(_0x5e0284){for(let _0x3bdf39 in _0x5e0284)Object['prototype'][_0x1e8457(0x80c)][_0x1e8457(0x871)](_0x5e0284,_0x3bdf39)&&(_0x5e0284[_0x3bdf39]=JSON[_0x1e8457(0x7ed)](_0x5e0284[_0x3bdf39],Pt[_0x1e8457(0x5c1)]['reviver']));return _0x5e0284;}}catch(_0x5e61d1){this[_0x1e8457(0x563)]['error'](_0x5e61d1);}}async[a0_0x4bc873(0x698)](_0x1e0625){const _0x59c277=a0_0x4bc873;try{let _0x857b5a=await this[_0x59c277(0x877)][_0x59c277(0x30d)](this[_0x59c277(0x370)][_0x59c277(0x459)]+':'+this[_0x59c277(0x616)],_0x1e0625);if(_0x857b5a)return JSON[_0x59c277(0x7ed)](_0x857b5a,Pt[_0x59c277(0x5c1)][_0x59c277(0x23b)]);}catch(_0x12163c){this[_0x59c277(0x563)][_0x59c277(0x47a)](_0x12163c);}}async[a0_0x4bc873(0x6b4)](_0x14da4a){const _0x5357a4=a0_0x4bc873;try{return await this[_0x5357a4(0x877)][_0x5357a4(0x53e)](this[_0x5357a4(0x370)][_0x5357a4(0x459)]+':'+this[_0x5357a4(0x616)],_0x14da4a);}catch(_0x4feab5){this[_0x5357a4(0x563)][_0x5357a4(0x47a)](_0x4feab5);}}async[a0_0x4bc873(0x39c)](_0x4377ba){const _0x410b18=a0_0x4bc873;try{return await this[_0x410b18(0x877)][_0x410b18(0x3fe)](_0x4377ba||this[_0x410b18(0x370)][_0x410b18(0x459)]+':'+this['instanceName']);}catch(_0x56bfbf){this[_0x410b18(0x563)][_0x410b18(0x47a)](_0x56bfbf);}}};async function Os(_0x44bea6,_0x10ee8f){const _0x3caf7=a0_0x4bc873;let _0x2fc96c=new $(Os[_0x3caf7(0x60f)]),_0x4f8e0f=new pe(_0x44bea6,_0x10ee8f),_0x1d3d37=async(_0x1fbfad,_0x271fd4)=>{const _0x50d2db=_0x3caf7;try{return await _0x4f8e0f[_0x50d2db(0x562)](_0x271fd4,_0x1fbfad);}catch(_0x107def){return _0x2fc96c[_0x50d2db(0x47a)]({'localError':_0x50d2db(0x562),'error':_0x107def});}},_0xc40477=async _0x51ca2a=>{const _0x2dd852=_0x3caf7;try{return await _0x4f8e0f[_0x2dd852(0x698)](_0x51ca2a);}catch(_0x147385){_0x2fc96c[_0x2dd852(0x47a)]({'readData':_0x2dd852(0x562),'error':_0x147385});return;}},_0x4c4001=async _0x45f378=>{const _0x4eaf5d=_0x3caf7;try{return await _0x4f8e0f['removeData'](_0x45f378);}catch(_0x11097b){_0x2fc96c[_0x4eaf5d(0x47a)]({'readData':_0x4eaf5d(0x6b4),'error':_0x11097b});}},_0x50be16=await _0xc40477(_0x3caf7(0x37d))||(0x0,Dt['initAuthCreds'])();return{'state':{'creds':_0x50be16,'keys':{'get':async(_0x4ebba8,_0x1285b4)=>{let _0x141bb5={};return await Promise['all'](_0x1285b4['map'](async _0x4e94e1=>{const _0xf291c3=a0_0x59bb;let _0x560862=await _0xc40477(_0x4ebba8+'-'+_0x4e94e1);_0x4ebba8===_0xf291c3(0x67a)&&_0x560862&&(_0x560862=Dt[_0xf291c3(0x651)][_0xf291c3(0x50f)][_0xf291c3(0x759)][_0xf291c3(0x434)](_0x560862)),_0x141bb5[_0x4e94e1]=_0x560862;})),_0x141bb5;},'set':async _0x4e561c=>{const _0x805d35=_0x3caf7;let _0x1c025=[];for(let _0x5c1135 in _0x4e561c)for(let _0x1393d3 in _0x4e561c[_0x5c1135]){let _0x3dbd4d=_0x4e561c[_0x5c1135][_0x1393d3],_0x5cdc75=_0x5c1135+'-'+_0x1393d3;_0x1c025[_0x805d35(0x7f1)](_0x3dbd4d?await _0x1d3d37(_0x3dbd4d,_0x5cdc75):await _0x4c4001(_0x5cdc75));}await Promise[_0x805d35(0x844)](_0x1c025);}}},'saveCreds':async()=>await _0x1d3d37(_0x50be16,_0x3caf7(0x37d))};}var k=T(require('fs')),Y=require(a0_0x4bc873(0x787)),Ut=T(require(a0_0x4bc873(0x550))),ne=require(a0_0x4bc873(0x30e)),vi=require(a0_0x4bc873(0x2d1)),Ni=require(a0_0x4bc873(0x642)),$i=T(require(a0_0x4bc873(0x6cb))),Ne=class extends _{constructor(_0x39a154,_0x4a0db8,_0x7a6e39){const _0x5b9cf9=a0_0x4bc873;super(_0x4a0db8),this[_0x5b9cf9(0x73a)]=_0x39a154,this[_0x5b9cf9(0x251)]=_0x4a0db8,this['dbConnection']=_0x7a6e39;}async['createOrUpdate'](_0x4d584b,_0x5e5de9){const _0x3cbd5d=a0_0x4bc873;try{if(this['dbSettings'][_0x3cbd5d(0x8f9)]){console[_0x3cbd5d(0x6d2)](_0x3cbd5d(0x56d)+_0x5e5de9+_0x3cbd5d(0x4c6),_0x4d584b);let _0x3ffe45=await this[_0x3cbd5d(0x73a)][_0x3cbd5d(0x39d)]({'_id':_0x5e5de9},{'$set':_0x4d584b},{'new':!0x0,'upsert':!0x0});return console[_0x3cbd5d(0x6d2)](_0x3cbd5d(0x85d),_0x3ffe45),_0x3ffe45;}}catch(_0x3243cd){throw console['error']('Erro\x20ao\x20atualizar\x20cacheInstance:',_0x3243cd),_0x3243cd;}return null;}async[a0_0x4bc873(0x469)](_0x4c6314){const _0x2cb599=a0_0x4bc873;try{let _0x2709c0=A(_0x4c6314[_0x2cb599(0x797)]);return{'deletedCount':(await this[_0x2cb599(0x73a)]['deleteOne'](_0x2709c0))[_0x2cb599(0x44f)]};}catch(_0x3eea02){return{'error':_0x3eea02?.[_0x2cb599(0x529)]()};}}async[a0_0x4bc873(0x6e7)](_0x1b2d18){const _0x1d3167=a0_0x4bc873;try{let _0x33d84d=A(_0x1b2d18[_0x1d3167(0x797)]);return await this['cacheInstanceModel'][_0x1d3167(0x6e7)](_0x33d84d)[_0x1d3167(0x439)]();}catch{return null;}}},kt=(0x0,Ni[a0_0x4bc873(0x2a3)])(vi[a0_0x4bc873(0x8c5)]),Po=S[a0_0x4bc873(0x62f)](a0_0x4bc873(0x402)),xs=class{constructor(){const _0x4608ef=a0_0x4bc873;this[_0x4608ef(0x495)]=new Ne(Be,S),(!this[_0x4608ef(0x40f)]||!this[_0x4608ef(0x6cf)])&&Po&&this[_0x4608ef(0x5e5)]()['then'](()=>{const _0x3c33bd=_0x4608ef;console[_0x3c33bd(0x6d2)]('IPv6\x20Prefix\x20detected:\x20'+this['ipv6Prefix']),console[_0x3c33bd(0x6d2)]('Network\x20Interface\x20detected:\x20'+this[_0x3c33bd(0x6cf)]);})[_0x4608ef(0x26e)](_0x33d948=>{const _0x431875=_0x4608ef;console[_0x431875(0x47a)](_0x431875(0x90c)+_0x33d948[_0x431875(0x805)]);});}async[a0_0x4bc873(0x5e5)](){const _0x1f060=a0_0x4bc873;try{let {stdout:_0x11e2df}=await kt(_0x1f060(0x560));console[_0x1f060(0x6d2)](_0x1f060(0x40a)+_0x11e2df);let _0x14c49d=_0x11e2df[_0x1f060(0x51b)]('\x0a')[_0x1f060(0x347)](_0x44794d=>_0x44794d[_0x1f060(0x51b)]('\x20')[0x0])[_0x1f060(0x411)](_0x29bf88=>!_0x29bf88[_0x1f060(0x5f5)]('lo')&&!_0x29bf88[_0x1f060(0x5f5)](_0x1f060(0x8e6))&&!_0x29bf88[_0x1f060(0x5f5)]('vir')&&!_0x29bf88[_0x1f060(0x5f5)]('wl')&&!_0x29bf88[_0x1f060(0x5f5)]('@'));if(console[_0x1f060(0x6d2)]('Filtered\x20network\x20interfaces:\x20'+_0x14c49d),_0x14c49d[_0x1f060(0x825)]===0x0)throw new Error(_0x1f060(0x605));this['networkInterface']=_0x14c49d[0x0];let {stdout:_0x26ff32}=await kt(_0x1f060(0x358)+this['networkInterface']);console[_0x1f060(0x6d2)]('IPv6\x20addresses\x20detected:\x20'+_0x26ff32);let _0x22b6d0=_0x26ff32['split']('\x0a')[_0x1f060(0x8aa)](_0x7ffa28=>_0x7ffa28['includes'](_0x1f060(0x7b1))&&_0x7ffa28[_0x1f060(0x5f5)]('global'));if(!_0x22b6d0)throw new Error('No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface');let _0x30da20=_0x22b6d0[_0x1f060(0x60b)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x30da20)throw new Error(_0x1f060(0x5b1));let [_0x34a689,_0x1002da,_0x48b9a4]=_0x30da20,_0x5c1ea7=Math[_0x1f060(0x70a)](Number(_0x48b9a4)/0x10),_0xf3108c=Number(_0x48b9a4)%0x10,_0x5432e7=_0x1002da[_0x1f060(0x51b)](':')[_0x1f060(0x5de)](0x0,_0x5c1ea7)[_0x1f060(0x6a2)](':');if(_0xf3108c>0x0){let _0x314519=_0x1002da[_0x1f060(0x51b)](':')[_0x5c1ea7],_0x36b306=0xffff<<0x10-_0xf3108c&0xffff,_0x2197f5=(parseInt(_0x314519,0x10)&_0x36b306)[_0x1f060(0x529)](0x10)[_0x1f060(0x247)](0x4,'0');_0x5432e7+=':'+_0x2197f5;}this[_0x1f060(0x40f)]=_0x5432e7+':';}catch(_0x12bc4a){console[_0x1f060(0x47a)](_0x1f060(0x36b),_0x12bc4a);}}async[a0_0x4bc873(0x3b9)](_0x54b2bd){const _0x1d3349=a0_0x4bc873;let _0x4223f6=_0x1d3349(0x328)+_0x54b2bd+_0x1d3349(0x90d)+this['networkInterface'];try{await kt(_0x4223f6),console[_0x1d3349(0x6d2)](_0x1d3349(0x272)+_0x54b2bd);}catch(_0x26319a){console[_0x1d3349(0x47a)](_0x1d3349(0x68f)+_0x26319a);}}async[a0_0x4bc873(0x6d1)](_0x41332c){const _0x3ef2fb=a0_0x4bc873;let _0x1ad4ba=_0x3ef2fb(0x4ae)+_0x41332c+_0x3ef2fb(0x90d)+this[_0x3ef2fb(0x6cf)];try{await kt(_0x1ad4ba),console[_0x3ef2fb(0x6d2)]('IPv6\x20address\x20removed:\x20'+_0x41332c);}catch(_0x363db8){console[_0x3ef2fb(0x47a)](_0x3ef2fb(0x8fe)+_0x363db8);}}['randomMac'](){const _0x464ca4=a0_0x4bc873;return'XX:XX:XX:XX:XX:XX'[_0x464ca4(0x242)](/X/g,()=>_0x464ca4(0x5c3)[_0x464ca4(0x5e4)](Math[_0x464ca4(0x70a)](Math[_0x464ca4(0x748)]()*0x10)));}[a0_0x4bc873(0x849)](_0x43df2c,_0x106c5d){const _0x2350ad=a0_0x4bc873;let _0x222e78=_0x106c5d['split'](':');return _0x222e78[0x0]=(parseInt(_0x222e78[0x0],0x10)^0x2)[_0x2350ad(0x529)](0x10)[_0x2350ad(0x247)](0x2,'0'),''+_0x43df2c+_0x222e78[0x0]+_0x222e78[0x1]+':'+_0x222e78[0x2]+_0x2350ad(0x361)+_0x222e78[0x3]+':'+_0x222e78[0x4]+_0x222e78[0x5];}[a0_0x4bc873(0x8ce)](){const _0x4021ae=a0_0x4bc873;let _0x482e75=this[_0x4021ae(0x40f)];_0x482e75[_0x4021ae(0x6c8)](':')||(_0x482e75+=':');let _0x322760=this[_0x4021ae(0x75c)]();return this['ip6eui'](_0x482e75,_0x322760);}[a0_0x4bc873(0x3c0)](_0x413df3){const _0x1b218b=a0_0x4bc873;return new RegExp(_0x1b218b(0x61f))['test'](_0x413df3);}async[a0_0x4bc873(0x3b5)](_0x243abc){const _0x4e7b13=a0_0x4bc873;let _0x375734=[{'url':_0x4e7b13(0x51c),'parse':_0x527c8c=>_0x527c8c['ip']},{'url':_0x4e7b13(0x3f9),'parse':_0x37b06d=>_0x37b06d['ip']},{'url':_0x4e7b13(0x2e4),'parse':_0x2c2323=>_0x2c2323[_0x4e7b13(0x4cf)]()},{'url':_0x4e7b13(0x852),'parse':_0x2bfb96=>_0x2bfb96[_0x4e7b13(0x4cf)]()}],_0x5e3ef2=_0x375734[Math[_0x4e7b13(0x70a)](Math[_0x4e7b13(0x748)]()*_0x375734[_0x4e7b13(0x825)])];try{let _0x4ee6ea=await $i[_0x4e7b13(0x323)][_0x4e7b13(0x62f)](_0x5e3ef2['url'],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x243abc}}),_0x35401e=_0x5e3ef2[_0x4e7b13(0x7ed)](_0x4ee6ea[_0x4e7b13(0x301)]);return _0x35401e['toLowerCase']()===_0x243abc[_0x4e7b13(0x511)]()?(console['log']('IP\x20confirmed:\x20'+_0x243abc),!0x0):(console[_0x4e7b13(0x47a)]('IP\x20mismatch:\x20configured\x20'+_0x243abc+_0x4e7b13(0x809)+_0x35401e),!0x1);}catch(_0x4f0045){return console['error']('Error\x20testing\x20IP\x20with\x20'+_0x5e3ef2['url']+':\x20'+_0x4f0045[_0x4e7b13(0x805)]),!0x1;}}async[a0_0x4bc873(0x2ff)](_0x15222a,_0x31d5af){const _0x588c91=a0_0x4bc873;if(!this[_0x588c91(0x40f)]||!this[_0x588c91(0x6cf)])return console['error'](_0x588c91(0x37b)),null;let _0x26f657;do _0x26f657=this[_0x588c91(0x8ce)](),console[_0x588c91(0x6d2)](_0x588c91(0x25e)+_0x26f657);while(!await this[_0x588c91(0x364)](_0x26f657));await this[_0x588c91(0x3b9)](_0x26f657),console[_0x588c91(0x6d2)](_0x588c91(0x7d1)+_0x26f657);let _0x4c9a38={'_id':_0x15222a+'-'+_0x31d5af,'ip':_0x26f657},_0x37cf04=await this[_0x588c91(0x495)]['createOrUpdate'](_0x4c9a38,_0x4c9a38[_0x588c91(0x618)]);return console[_0x588c91(0x6d2)]('Cache\x20instance\x20update\x20result:\x20'+_0x37cf04),_0x26f657;}async[a0_0x4bc873(0x364)](_0x5482f7){const _0x18c337=a0_0x4bc873;return this[_0x18c337(0x3c0)](_0x5482f7)?!await this['cacheInstanceRepository'][_0x18c337(0x6e7)]({'where':{'ip':_0x5482f7}}):!0x1;}async[a0_0x4bc873(0x43b)](_0x530826,_0x505db2){const _0xd91320=a0_0x4bc873;let _0xec099c=_0x530826+'-'+_0x505db2,_0x328225=await this[_0xd91320(0x495)][_0xd91320(0x6e7)]({'where':{'_id':_0xec099c}});_0x328225&&_0x328225['ip']&&(await this[_0xd91320(0x6d1)](_0x328225['ip']),await this['cacheInstanceRepository'][_0xd91320(0x469)]({'where':{'_id':_0xec099c}}));}},Do=new xs(),ae=Do,Fs='Safari',xi,he=null,xa=null,ko=0x3,Lo=null,Ri=S[a0_0x4bc873(0x62f)](a0_0x4bc873(0x66f))['API_KEY'][a0_0x4bc873(0x2bd)],Ai=S[a0_0x4bc873(0x62f)](a0_0x4bc873(0x402));async function Fo(){const _0x5dbe26=a0_0x4bc873;let _0x4c6527=await ve['findOne']();he=_0x4c6527?.[_0x5dbe26(0x223)]??null,Lo=_0x4c6527?.[_0x5dbe26(0x3e4)]??null,Fs=_0x4c6527?.[_0x5dbe26(0x613)]??'Safari',xi=_0x4c6527?.[_0x5dbe26(0x2e0)]??B??_0x5dbe26(0x473);}async function Uo(){await Fo();}Uo();var Lt={},$e=class u{constructor(_0x23ecf4,_0x124247,_0x4639d8){const _0x3af30c=a0_0x4bc873;this[_0x3af30c(0x251)]=_0x23ecf4,this[_0x3af30c(0x8e5)]=_0x124247,this['repository']=_0x4639d8,this[_0x3af30c(0x5a5)]=null,this[_0x3af30c(0x563)]=new $(u[_0x3af30c(0x60f)]),this[_0x3af30c(0x568)]={},this[_0x3af30c(0x35f)]={},this[_0x3af30c(0x676)]={'state':'close'},this[_0x3af30c(0x614)]=(0x0,j[_0x3af30c(0x6a2)])(le,'downloads'),this['msgRetryCounterCache']=new Ls['default'](),this[_0x3af30c(0x5f3)]=new Ls[(_0x3af30c(0x323))](),this[_0x3af30c(0x80e)]=!0x1,this[_0x3af30c(0x5aa)]={'status.instance':'/wa-connection-update','connection.update':_0x3af30c(0x486),'qrcode.updated':_0x3af30c(0x3d2),'messages.upsert':_0x3af30c(0x47f),'send.message':_0x3af30c(0x47f),'messages.update':_0x3af30c(0x4b2),'group.upsert':_0x3af30c(0x643),'group.update':_0x3af30c(0x643),'group-participants.update':_0x3af30c(0x643),'messages.set':_0x3af30c(0x1ff),'contacts.set':_0x3af30c(0x5f4),'contacts.upsert':_0x3af30c(0x5f4),'contacts.update':_0x3af30c(0x5f4),'presence.update':'/wa-presence','chats.set':'/wa-chats','chats.update':_0x3af30c(0x5d0),'chats.upsert':'/wa-chats','chats.delete':_0x3af30c(0x5d0)},this[_0x3af30c(0x905)]=0x0,this['reconnectTimestamps']=[],this['RECONNECT_TIME_FRAME']=0xea60,this['isRunning']=!0x1,this[_0x3af30c(0x3b2)]={'chats.upsert':async(_0x52b8d7,_0x5b1623)=>{const _0x842db0=_0x3af30c;let _0x2aed90=[];for await(let _0xc8a2f3 of _0x52b8d7)_0x2aed90[_0x842db0(0x7f1)]({'_id':_0xc8a2f3['id'],'owner':this['instance'][_0x842db0(0x72d)],'group':_0xc8a2f3['id'][_0x842db0(0x6c8)](_0x842db0(0x342)),'name':_0xc8a2f3[_0x842db0(0x60f)]||_0xc8a2f3['displayName']||null,'contactname':null,'lastmsg':_0xc8a2f3[_0x842db0(0x432)]&&_0xc8a2f3[_0x842db0(0x432)][_0x842db0(0x529)]()[_0x842db0(0x825)]<0xd?_0xc8a2f3[_0x842db0(0x432)]*0x3e8:_0xc8a2f3[_0x842db0(0x432)]||null,'archived':_0xc8a2f3['archived']||!0x1,'unreadcount':_0xc8a2f3['unreadCount']||0x0,'ephemeralExpiration':_0xc8a2f3[_0x842db0(0x85f)]||0x0});this[_0x842db0(0x463)]('chats.upsert',_0x2aed90);},'chats.update':async(_0x3f0513,_0x5b2bfc)=>{const _0x1ed096=_0x3af30c;for(let _0x2cbb94 of _0x3f0513){let _0x2fd3a2={'_id':_0x2cbb94['id'],'owner':this['instance'][_0x1ed096(0x72d)],'archived':_0x2cbb94[_0x1ed096(0x6f3)],'muteEndTime':_0x2cbb94[_0x1ed096(0x92e)],'ephemeralExpiration':_0x2cbb94[_0x1ed096(0x85f)]},_0x5f0479=!0x1,_0x584be2={};_0x2fd3a2['archived']!=null&&(this['logger'][_0x1ed096(0x377)](this[_0x1ed096(0x616)]+'\x20('+this[_0x1ed096(0x568)][_0x1ed096(0x72d)]+'):\x20teve\x20mudanas\x20chat.archived:\x20'+_0x2cbb94['id']+_0x1ed096(0x8f7)+_0x2cbb94[_0x1ed096(0x6f3)]),_0x5f0479=!0x0,_0x584be2[_0x1ed096(0x6f3)]=_0x2cbb94[_0x1ed096(0x6f3)]),_0x1ed096(0x92e)in _0x2cbb94&&(this[_0x1ed096(0x563)][_0x1ed096(0x377)](this[_0x1ed096(0x616)]+'\x20('+this[_0x1ed096(0x568)][_0x1ed096(0x72d)]+_0x1ed096(0x770)+_0x2cbb94['id']+'\x20:\x20'+(_0x2cbb94['muteEndTime']??'0')),_0x5f0479=!0x0,_0x584be2['muteEndTime']=_0x2cbb94[_0x1ed096(0x92e)]??0x0),_0x1ed096(0x85f)in _0x2cbb94&&(this[_0x1ed096(0x563)][_0x1ed096(0x377)](this[_0x1ed096(0x616)]+'\x20('+this[_0x1ed096(0x568)][_0x1ed096(0x72d)]+_0x1ed096(0x518)+_0x2cbb94['id']+'\x20:\x20'+(_0x2cbb94[_0x1ed096(0x85f)]!==void 0x0?_0x2cbb94['ephemeralExpiration']:_0x1ed096(0x623))),_0x584be2[_0x1ed096(0x85f)]=_0x2cbb94['ephemeralExpiration']===null?0x0:_0x2cbb94[_0x1ed096(0x85f)],_0x5f0479=!0x0);let _0x119a52;_0x5f0479&&(_0x119a52=await this[_0x1ed096(0x6c6)][_0x1ed096(0x69a)][_0x1ed096(0x7eb)]({'where':{'_id':_0x2cbb94['id']}},_0x584be2,this[_0x1ed096(0x568)][_0x1ed096(0x72d)])),_0x119a52&&F(this[_0x1ed096(0x616)],_0x1ed096(0x85a),{'chat':_0x119a52});}},'chats.delete':async _0x382fc7=>{const _0xc7f0a9=_0x3af30c;for(let _0x10c96f of _0x382fc7)if(_0x10c96f['endsWith']('@g.us')){await this[_0xc7f0a9(0x6c6)][_0xc7f0a9(0x69a)][_0xc7f0a9(0x4a8)]({'where':{'_id':_0x10c96f}},this['instance'][_0xc7f0a9(0x72d)]);let _0x1a3146={'where':{'key':{'remoteJid':_0x10c96f}}};await this[_0xc7f0a9(0x6c6)][_0xc7f0a9(0x805)][_0xc7f0a9(0x4a8)](_0x1a3146,this[_0xc7f0a9(0x568)][_0xc7f0a9(0x72d)]);}else{await this[_0xc7f0a9(0x6c6)][_0xc7f0a9(0x69a)][_0xc7f0a9(0x7eb)]({'where':{'_id':_0x10c96f}},{'lastmsg':0x0,'unreadcount':0x0},this['instance']['wuid']);let _0x1bb86c={'where':{'key':{'remoteJid':_0x10c96f}}};await this[_0xc7f0a9(0x6c6)]['message']['delete'](_0x1bb86c,this['instance'][_0xc7f0a9(0x72d)]);}this[_0xc7f0a9(0x463)]('chats.delete',[..._0x382fc7]);}},this[_0x3af30c(0x27a)]={'contacts.upsert':async(_0x7a2ae8,_0xa33ff0)=>{const _0x1e2c00=_0x3af30c;let _0x2827ee=await this[_0x1e2c00(0x6c6)][_0x1e2c00(0x7fe)][_0x1e2c00(0x8aa)]({'where':{}},this['instance']['wuid']),_0x52cad=[];for await(let _0x214aeb of _0x7a2ae8)_0x2827ee[_0x1e2c00(0x8aa)](_0x4d23b6=>_0x4d23b6[_0x1e2c00(0x618)]===_0x214aeb['id'])||_0x52cad[_0x1e2c00(0x7f1)]({'_id':_0x214aeb['id'],'pushName':_0x214aeb?.[_0x1e2c00(0x60f)]||_0x214aeb?.[_0x1e2c00(0x675)],'owner':this[_0x1e2c00(0x568)]['wuid']});this[_0x1e2c00(0x463)](_0x1e2c00(0x713),_0x52cad),await this['repository']['contact'][_0x1e2c00(0x246)](_0x52cad);},'contacts.update':async(_0x36698c,_0x17f35f)=>{const _0xc62563=_0x3af30c;let _0x29a385=[];for await(let _0x1ee15b of _0x36698c)_0x29a385['push']({'_id':_0x1ee15b['id'],'pushName':_0x1ee15b?.[_0xc62563(0x60f)]??_0x1ee15b?.[_0xc62563(0x675)],'owner':this[_0xc62563(0x568)][_0xc62563(0x72d)]});this[_0xc62563(0x463)](_0xc62563(0x34f),_0x29a385);}},this[_0x3af30c(0x216)]={'messaging-history.set':async({messages:_0xce7f2,chats:_0xb499ad,isLatest:_0x1e6ed2},_0x28772d)=>{const _0xe9f644=_0x3af30c;if(_0x1e6ed2){let _0x41c704=await Promise[_0xe9f644(0x844)](_0xb499ad['map'](async _0x3e075a=>({'_id':_0x3e075a['id'],'owner':this[_0xe9f644(0x568)][_0xe9f644(0x72d)],'group':_0x3e075a['id'][_0xe9f644(0x6c8)](_0xe9f644(0x342)),'name':_0x3e075a[_0xe9f644(0x60f)]||_0x3e075a[_0xe9f644(0x580)]||_0x3e075a[_0xe9f644(0x791)]||null,'contactname':null,'lastmsg':_0x3e075a[_0xe9f644(0x432)]&&_0x3e075a['conversationTimestamp'][_0xe9f644(0x529)]()[_0xe9f644(0x825)]<0xd?_0x3e075a[_0xe9f644(0x432)]*0x3e8:_0x3e075a['conversationTimestamp']||null,'archived':_0x3e075a['archived']||!0x1,'unreadcount':_0x3e075a[_0xe9f644(0x22f)]||0x0,'ephemeralExpiration':_0x3e075a[_0xe9f644(0x85f)]||0x0,'muteEndTime':_0x3e075a[_0xe9f644(0x92e)]||0x0})));this['sendDataWebhook'](_0xe9f644(0x7a4),_0x41c704),await this[_0xe9f644(0x4a1)](_0x41c704,_0x28772d);}let _0x359ee2=[],_0x32fbda=Date[_0xe9f644(0x3bd)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0xb28ed1]of Object['entries'](_0xce7f2)){if(_0xb28ed1['message']?.[_0xe9f644(0x5ff)]||_0xb28ed1['message']?.[_0xe9f644(0x763)]||!_0xb28ed1['message']||_0xb28ed1[_0xe9f644(0x678)][_0xe9f644(0x8d4)]===_0xe9f644(0x672)||(ks[_0xe9f644(0x323)][_0xe9f644(0x27f)](_0xb28ed1?.[_0xe9f644(0x717)])&&(_0xb28ed1[_0xe9f644(0x717)]=_0xb28ed1[_0xe9f644(0x717)]?.[_0xe9f644(0x2ef)]()),_0xb28ed1[_0xe9f644(0x717)]&&_0xb28ed1['messageTimestamp'][_0xe9f644(0x529)]()[_0xe9f644(0x825)]<0xd&&(_0xb28ed1['messageTimestamp']=_0xb28ed1['messageTimestamp']*0x3e8),_0xb28ed1[_0xe9f644(0x717)]<_0x32fbda))continue;let _0x17c9bc=(0x0,w[_0xe9f644(0x2b3)])(_0xb28ed1[_0xe9f644(0x805)]),_0xcd9a65=(0x0,w[_0xe9f644(0x932)])(_0x17c9bc),{message_normalized:_0x37fd44}=this['normalizeMessage'](_0x17c9bc,_0xcd9a65,null);Object[_0xe9f644(0x419)](_0x37fd44)[_0xe9f644(0x825)]>0x0&&_0x359ee2[_0xe9f644(0x7f1)]({'_id':_0xb28ed1[_0xe9f644(0x678)]['id'],'key':_0xb28ed1['key'],'pushName':_0xb28ed1[_0xe9f644(0x687)],'participant':_0xb28ed1[_0xe9f644(0x406)],'message':_0x17c9bc,'messageType':_0xcd9a65,'message_normalized':{'key':_0xb28ed1[_0xe9f644(0x678)],'pushName':_0xb28ed1[_0xe9f644(0x687)],'messageTimestamp':_0xb28ed1['messageTimestamp'],..._0x37fd44},'messageTimestamp':_0xb28ed1[_0xe9f644(0x717)],'owner':this[_0xe9f644(0x568)][_0xe9f644(0x72d)]});}_0x28772d[_0xe9f644(0x8f9)]&&_0x359ee2[_0xe9f644(0x825)]>0x0&&(this[_0xe9f644(0x563)][_0xe9f644(0x377)](this[_0xe9f644(0x616)]+'\x20('+this[_0xe9f644(0x568)][_0xe9f644(0x72d)]+_0xe9f644(0x6c0)+_0x359ee2[_0xe9f644(0x825)]+_0xe9f644(0x783)+this['instance'][_0xe9f644(0x72d)]+_0xe9f644(0x6c1)),await this[_0xe9f644(0x6c6)][_0xe9f644(0x805)][_0xe9f644(0x246)]([..._0x359ee2],this[_0xe9f644(0x568)][_0xe9f644(0x72d)])),this['sendDataWebhook'](_0xe9f644(0x633),[..._0x359ee2]),_0xce7f2=void 0x0;},'messages.upsert':async({messages:_0x1eb00d,type:_0x27f708},_0x591c82)=>{const _0x2259c1=_0x3af30c;for(let _0x541972 of _0x1eb00d){if(this[_0x2259c1(0x35f)]?.[_0x2259c1(0x735)]&&_0x541972['key'][_0x2259c1(0x8d4)]['includes'](_0x2259c1(0x342))){this[_0x2259c1(0x563)]['verbose'](this[_0x2259c1(0x616)]+'\x20('+this[_0x2259c1(0x568)][_0x2259c1(0x72d)]+_0x2259c1(0x357));return;}if(_0x541972['key'][_0x2259c1(0x8d4)][_0x2259c1(0x5f5)](_0x2259c1(0x47b))||_0x541972[_0x2259c1(0x678)]['remoteJid']===_0x2259c1(0x672))return;if(_0x541972[_0x2259c1(0x515)]&&_0x541972['messageStubParameters'][0x0]===_0x2259c1(0x598)){console[_0x2259c1(0x47a)](_0x2259c1(0x4cc)),await this[_0x2259c1(0x438)](_0x541972),Lt[_0x541972[_0x2259c1(0x678)]['id']]=_0x541972,this[_0x2259c1(0x1e5)](_0x541972,0x0);return;}if(_0x27f708!=='notify'||!_0x541972?.['message']||_0x541972[_0x2259c1(0x805)]?.['protocolMessage']||_0x541972[_0x2259c1(0x805)]?.[_0x2259c1(0x763)])return;let _0x12f9e7=null,_0x1e8089=null;Lt[_0x541972[_0x2259c1(0x678)]['id']]&&(console[_0x2259c1(0x47a)]('[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache'),await this[_0x2259c1(0x6c6)]['messageLogs']['delete']({'where':{'_id':_0x541972['key']['id']}}),delete Lt[_0x541972[_0x2259c1(0x678)]['id']]);try{_0x12f9e7=await this[_0x2259c1(0x39a)](_0x541972),_0x1e8089=_0x12f9e7?_0x12f9e7['join'](','):null;}catch(_0x429578){this[_0x2259c1(0x563)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20'+(_0x429578 instanceof Error?_0x429578[_0x2259c1(0x805)]:JSON['stringify'](_0x429578,null,0x2))),_0x1e8089=_0x2259c1(0x86d);}this[_0x2259c1(0x877)]['sendPresenceUpdate'](_0x2259c1(0x494)),ks[_0x2259c1(0x323)][_0x2259c1(0x27f)](_0x541972[_0x2259c1(0x717)])&&(_0x541972[_0x2259c1(0x717)]=_0x541972[_0x2259c1(0x717)]?.['toNumber']()),_0x541972['messageTimestamp']&&_0x541972['messageTimestamp'][_0x2259c1(0x529)]()[_0x2259c1(0x825)]<0xd&&(_0x541972[_0x2259c1(0x717)]=_0x541972[_0x2259c1(0x717)]*0x3e8);let _0x5b8bee=_0x541972['message'],_0x4e929c=(0x0,w[_0x2259c1(0x2b3)])(_0x5b8bee),_0x2ea6de=(0x0,w[_0x2259c1(0x932)])(_0x4e929c),{messageContent:_0x43eaeb,message_normalized:_0x12de0f}=this[_0x2259c1(0x1fc)](_0x4e929c,_0x2ea6de,_0x1e8089);if(_0x2ea6de===_0x2259c1(0x5ff)&&_0x43eaeb?.[_0x2259c1(0x536)]&&(_0x2ea6de='editedMessage'),_0x2ea6de==='interactiveMessage'&&_0x541972['key']['fromMe'])return;let _0xb03e13,_0x4cbd84=_0x541972[_0x2259c1(0x678)]['remoteJid'][_0x2259c1(0x6c8)](_0x2259c1(0x342));if(_0x541972[_0x2259c1(0x678)][_0x2259c1(0x45e)])_0xb03e13=this['instance'][_0x2259c1(0x72a)];else{let _0x344931=_0x4cbd84?_0x541972[_0x2259c1(0x678)][_0x2259c1(0x406)]:_0x541972['key'][_0x2259c1(0x8d4)];_0xb03e13=(await this[_0x2259c1(0x69c)](_0x344931,_0x541972[_0x2259c1(0x687)],!0x1))['cachedContact'][_0x2259c1(0x807)];}let _0x10c0ab={'_id':_0x541972['key']['id'],'key':_0x541972[_0x2259c1(0x678)],'isGroup':_0x4cbd84,'profilePictureUrl':_0xb03e13,'pushName':_0x541972['pushName'],'message':_0x4e929c,'messageType':_0x2ea6de,'message_normalized':{'key':_0x541972[_0x2259c1(0x678)],'pushName':_0x541972[_0x2259c1(0x687)],'messageTimestamp':_0x541972[_0x2259c1(0x717)],'source':(0x0,w[_0x2259c1(0x785)])(_0x541972[_0x2259c1(0x678)]['id']),..._0x12de0f},'messageTimestamp':_0x541972['messageTimestamp'],'owner':this[_0x2259c1(0x568)][_0x2259c1(0x72d)],'source':(0x0,w[_0x2259c1(0x785)])(_0x541972[_0x2259c1(0x678)]['id']),'expiration':_0x43eaeb?.[_0x2259c1(0x730)]?.[_0x2259c1(0x270)]||0x0};if(_0x43eaeb||(this[_0x2259c1(0x563)][_0x2259c1(0x47a)]('Mensagem\x20no\x20suportada'),this['logger']['error'](_0x10c0ab)),_0x12de0f[_0x2259c1(0x23c)]==='${Message\x20absent\x20from\x20node}'){console[_0x2259c1(0x47a)](_0x2259c1(0x70e)),await this[_0x2259c1(0x438)](_0x541972);return;}this[_0x2259c1(0x563)]['log'](this[_0x2259c1(0x616)]+'\x20('+this[_0x2259c1(0x568)][_0x2259c1(0x72d)]+'):\x20'+(_0x10c0ab[_0x2259c1(0x678)]?.[_0x2259c1(0x45e)]?'enviado\x20para':_0x2259c1(0x382))+'\x20['+_0x10c0ab[_0x2259c1(0x678)]?.[_0x2259c1(0x8d4)][_0x2259c1(0x242)]('@s.whatsapp.net','')+']\x20('+_0x10c0ab[_0x2259c1(0x5fe)]+')'),_0x10c0ab[_0x2259c1(0x537)]?.['text']&&this[_0x2259c1(0x563)][_0x2259c1(0x6d2)](_0x541972['key']['id']+':\x20'+_0x10c0ab[_0x2259c1(0x537)]?.[_0x2259c1(0x23c)]),await this[_0x2259c1(0x6c6)][_0x2259c1(0x805)][_0x2259c1(0x246)]([_0x10c0ab],this[_0x2259c1(0x568)][_0x2259c1(0x72d)]),this['sendDataWebhook']('messages.upsert',_0x10c0ab),F(this[_0x2259c1(0x616)],_0x2259c1(0x88d),{'message':_0x10c0ab}),_0x541972[_0x2259c1(0x678)][_0x2259c1(0x8d4)]!==_0x2259c1(0x672)&&await this[_0x2259c1(0x389)](_0x591c82,_0x10c0ab,_0x2259c1(0x4ea));}},'messages.update':async(_0x39078e,_0x35738f)=>{const _0x1b94a4=_0x3af30c;let _0x4798a0={0x0:'ERROR',0x1:_0x1b94a4(0x66a),0x2:_0x1b94a4(0x37e),0x3:'DELIVERY_ACK',0x4:_0x1b94a4(0x599),0x5:_0x1b94a4(0x1e3)};for await(let {key:_0x29eb18,update:_0x1faf7d}of _0x39078e){if(this[_0x1b94a4(0x35f)]?.['groups_ignore']&&_0x29eb18['remoteJid'][_0x1b94a4(0x5f5)](_0x1b94a4(0x342))){this[_0x1b94a4(0x563)][_0x1b94a4(0x377)](this[_0x1b94a4(0x616)]+'\x20('+this[_0x1b94a4(0x568)][_0x1b94a4(0x72d)]+_0x1b94a4(0x77d));return;}if(_0x29eb18[_0x1b94a4(0x8d4)]!==_0x1b94a4(0x672)){let _0x1613dd=Date[_0x1b94a4(0x3bd)](),_0x3cb7f6;_0x1faf7d[_0x1b94a4(0x805)]===null&&_0x1faf7d[_0x1b94a4(0x4ed)]===void 0x0?_0x3cb7f6=_0x1b94a4(0x379):_0x3cb7f6=_0x4798a0[_0x1faf7d[_0x1b94a4(0x4ed)]];let _0x33db44=_0x29eb18[_0x1b94a4(0x8d4)][_0x1b94a4(0x242)](/:\d{1,2}@/g,'@'),_0x5b0cad={..._0x29eb18,'remoteJid':_0x33db44,'status':_0x3cb7f6,'datetime':_0x1613dd,'owner':this[_0x1b94a4(0x568)][_0x1b94a4(0x72d)]};this['sendDataWebhook']('messages.update',_0x5b0cad),await this[_0x1b94a4(0x296)](_0x29eb18,_0x5b0cad);}}},'labels.association':async({type:_0x3da6aa,association:_0x267728})=>{const _0x2fcf2d=_0x3af30c;if(_0x267728[_0x2fcf2d(0x8c8)]===_0x2fcf2d(0x3ec)){let _0x158872,_0x28516f=0x0;for(;!_0x158872&&_0x28516f<this[_0x2fcf2d(0x28f)];)_0x158872=await this[_0x2fcf2d(0x6c6)][_0x2fcf2d(0x69a)][_0x2fcf2d(0x6e7)]({'where':{'_id':_0x267728[_0x2fcf2d(0x858)]}},this[_0x2fcf2d(0x568)][_0x2fcf2d(0x72d)]),_0x158872||(_0x28516f++,this[_0x2fcf2d(0x563)][_0x2fcf2d(0x636)](this[_0x2fcf2d(0x616)]+'\x20('+this[_0x2fcf2d(0x568)]['wuid']+_0x2fcf2d(0x407)+_0x267728[_0x2fcf2d(0x858)]+_0x2fcf2d(0x7bd)+this[_0x2fcf2d(0x822)]+_0x2fcf2d(0x4ba)+_0x28516f+'/'+this['delayChatLabel_MAX_RETRIES']+')'),await this[_0x2fcf2d(0x238)](this[_0x2fcf2d(0x822)]));if(!_0x158872){this[_0x2fcf2d(0x563)]['error'](_0x2fcf2d(0x21c)+_0x267728['chatId']+_0x2fcf2d(0x829)+this[_0x2fcf2d(0x28f)]+_0x2fcf2d(0x87b));return;}switch(_0x3da6aa){case _0x2fcf2d(0x840):console[_0x2fcf2d(0x6d2)](_0x267728),await this[_0x2fcf2d(0x6c6)][_0x2fcf2d(0x69a)]['updateOne']({'where':{'_id':_0x267728[_0x2fcf2d(0x858)]}},{'leadInfo.etiquetas':_0x267728[_0x2fcf2d(0x34a)]},this[_0x2fcf2d(0x568)][_0x2fcf2d(0x72d)],void 0x0,_0x2fcf2d(0x547));break;case'remove':console[_0x2fcf2d(0x6d2)](_0x267728),await this['repository'][_0x2fcf2d(0x69a)][_0x2fcf2d(0x7eb)]({'where':{'_id':_0x267728[_0x2fcf2d(0x858)]}},{'leadInfo.etiquetas':_0x267728[_0x2fcf2d(0x34a)]},this[_0x2fcf2d(0x568)][_0x2fcf2d(0x72d)],void 0x0,'$pull');break;default:this['logger']['error'](_0x2fcf2d(0x458)+_0x3da6aa+']');}}},'labels.edit':async _0xfd1f66=>{const _0x1fb2b5=_0x3af30c;if(!_0xfd1f66||!_0xfd1f66['id']){this['logger']['error'](_0x1fb2b5(0x83e));return;}if(!_0xfd1f66[_0x1fb2b5(0x471)]){let _0x548705=[_0x1fb2b5(0x63a),'#64c4ff',_0x1fb2b5(0x4ad),_0x1fb2b5(0x863),'#9ab6c1',_0x1fb2b5(0x782),_0x1fb2b5(0x4b7),'#d3a91f','#6f7bcf','#d8e651','#01d0e2','#ffc5c7',_0x1fb2b5(0x211),_0x1fb2b5(0x60c),'#00a1f2','#83e421','#ffae04',_0x1fb2b5(0x72b),'#9ba6ff',_0x1fb2b5(0x85c)],_0x3fe765;typeof _0xfd1f66[_0x1fb2b5(0x5d4)]=='number'&&_0xfd1f66[_0x1fb2b5(0x5d4)]>=0x0&&_0xfd1f66['color']<_0x548705[_0x1fb2b5(0x825)]?_0x3fe765=_0x548705[_0xfd1f66[_0x1fb2b5(0x5d4)]]:(this[_0x1fb2b5(0x563)]['error']('Nmero\x20da\x20cor\x20invlido\x20ou\x20fora\x20do\x20intervalo:\x20'+_0xfd1f66['color']),_0x3fe765=_0x1fb2b5(0x8cb));let _0x315d1e={'_id':_0xfd1f66['id'],'colorHex':_0x3fe765,'color':_0xfd1f66?.[_0x1fb2b5(0x5d4)],'name':_0xfd1f66?.[_0x1fb2b5(0x60f)],'owner':this[_0x1fb2b5(0x568)][_0x1fb2b5(0x72d)]};await this[_0x1fb2b5(0x6c6)]['label'][_0x1fb2b5(0x7eb)]({'where':{'_id':_0xfd1f66['id']}},_0x315d1e,this[_0x1fb2b5(0x568)][_0x1fb2b5(0x72d)]),this[_0x1fb2b5(0x563)][_0x1fb2b5(0x636)](this['instanceName']+'\x20('+this[_0x1fb2b5(0x568)][_0x1fb2b5(0x72d)]+_0x1fb2b5(0x6eb)+_0xfd1f66);}_0xfd1f66[_0x1fb2b5(0x471)]&&(await this[_0x1fb2b5(0x6c6)]['label'][_0x1fb2b5(0x4a8)]({'where':{'_id':_0xfd1f66['id']}},this['instance'][_0x1fb2b5(0x72d)]),this['logger'][_0x1fb2b5(0x636)](_0x1fb2b5(0x544)+_0xfd1f66['id']));}},this[_0x3af30c(0x30a)]={'groups.upsert':async _0x14d23d=>{const _0x361079=_0x3af30c;this[_0x361079(0x35f)]?.[_0x361079(0x735)]||this[_0x361079(0x463)](_0x361079(0x5ab),_0x14d23d);for(let _0x5b3510 of _0x14d23d)await this['updateGroupWebhook'](_0x5b3510);},'groups.update':async _0x340a09=>{const _0xb94b3c=_0x3af30c;this[_0xb94b3c(0x35f)]?.[_0xb94b3c(0x735)]||this[_0xb94b3c(0x463)](_0xb94b3c(0x723),_0x340a09);for(let _0x52d652 of _0x340a09)await this[_0xb94b3c(0x264)](_0x52d652);},'group-participants.update':async _0x289436=>{const _0xed5efe=_0x3af30c;this[_0xed5efe(0x35f)]?.[_0xed5efe(0x735)]||this['sendDataWebhook'](_0xed5efe(0x6f1),_0x289436),await this[_0xed5efe(0x224)](_0x289436);}},this[_0x3af30c(0x28f)]=0x5,this[_0x3af30c(0x822)]=0x1388,this['lastRealGroupsFetch']=0x0,this[_0x3af30c(0x39a)]=async _0x524f4d=>{const _0x2659c6=_0x3af30c;if(_0x524f4d[_0x2659c6(0x805)]?.['pollUpdateMessage']){let _0x36499c=await this[_0x2659c6(0x649)](_0x524f4d['message']['pollUpdateMessage'][_0x2659c6(0x7c5)],!0x0);if(_0x36499c){let _0x35bd12=_0x36499c[_0x2659c6(0x678)][_0x2659c6(0x45e)]?this['instance'][_0x2659c6(0x72d)]+_0x2659c6(0x8b3):_0x36499c[_0x2659c6(0x678)][_0x2659c6(0x406)]||_0x36499c[_0x2659c6(0x678)][_0x2659c6(0x8d4)],_0x240940=_0x36499c[_0x2659c6(0x678)]['id'],_0x8b9837=_0x36499c[_0x2659c6(0x805)],_0x58bba2=Buffer[_0x2659c6(0x25a)](_0x8b9837[_0x2659c6(0x2f2)][_0x2659c6(0x8c6)][_0x2659c6(0x529)](_0x2659c6(0x78b)),_0x2659c6(0x78b)),_0x9baa34=(0x0,w['decryptPollVote'])(_0x524f4d[_0x2659c6(0x805)][_0x2659c6(0x4b0)][_0x2659c6(0x7f5)],{'pollCreatorJid':_0x35bd12,'pollMsgId':_0x240940,'pollEncKey':_0x58bba2,'voterJid':_0x524f4d[_0x2659c6(0x678)][_0x2659c6(0x45e)]?this['instance'][_0x2659c6(0x72d)]+_0x2659c6(0x8b3):_0x524f4d['key'][_0x2659c6(0x8d4)][_0x2659c6(0x6c8)](_0x2659c6(0x2d6))?_0x524f4d[_0x2659c6(0x678)][_0x2659c6(0x406)]:_0x524f4d[_0x2659c6(0x678)][_0x2659c6(0x8d4)]}),_0x4527a5=[],_0x43053e=_0x9baa34[_0x2659c6(0x274)]['map'](_0x5b25a0=>Buffer[_0x2659c6(0x25a)](_0x5b25a0)[_0x2659c6(0x529)](_0x2659c6(0x78b)));for(let {optionName:_0x3a485}of _0x8b9837[_0x2659c6(0x7c1)]?.[_0x2659c6(0x466)]||_0x8b9837[_0x2659c6(0x892)]?.[_0x2659c6(0x466)]||_0x8b9837[_0x2659c6(0x58d)]?.['options'])_0x43053e[_0x2659c6(0x87e)]((0x0,w['sha256'])(Buffer[_0x2659c6(0x25a)](_0x3a485))[_0x2659c6(0x529)](_0x2659c6(0x78b)))>-0x1&&_0x4527a5['push'](_0x3a485);return _0x4527a5;}}return null;},this['normalizeMessage']=(_0x306065,_0x4258c6,_0xa2a103)=>{const _0x3712be=_0x3af30c;try{let _0x5d76d9=_0x306065?(0x0,w['extractMessageContent'])(_0x306065)[_0x4258c6]:void 0x0,_0xa02f38={},_0x289e39=null,_0x4bda22=null,_0x50f6af=null,_0x805639=null;_0x4258c6===_0x3712be(0x5ff)&&_0x5d76d9?.[_0x3712be(0x536)]&&(_0x4258c6=(0x0,w[_0x3712be(0x932)])(_0x5d76d9['editedMessage']),_0x289e39=_0x306065[_0x3712be(0x5ff)][_0x3712be(0x678)]['id'],_0x5d76d9=_0x306065[_0x3712be(0x5ff)][_0x3712be(0x536)][_0x4258c6]),_0x306065[_0x4258c6]?.['contextInfo']?.['stanzaId']&&_0x306065[_0x4258c6]?.[_0x3712be(0x730)]?.['quotedMessage']&&(_0x4bda22=_0x306065[_0x4258c6][_0x3712be(0x730)][_0x3712be(0x47c)]),_0x306065[_0x3712be(0x7f8)]&&(_0x50f6af=_0x306065['reactionMessage'][_0x3712be(0x678)]['id']);let _0x1c16b2;if(_0x5d76d9&&typeof _0x5d76d9==_0x3712be(0x801)&&'pollCreationMessageKey'in _0x5d76d9&&({pollCreationMessageKey:_0x1c16b2}=_0x5d76d9),_0x4258c6===_0x3712be(0x7c1)||_0x4258c6===_0x3712be(0x58d)||_0x4258c6===_0x3712be(0x892)){let _0x4a5ec0=_0x5d76d9[_0x3712be(0x466)]['map'](_0x46c3e3=>_0x46c3e3[_0x3712be(0x277)])[_0x3712be(0x6a2)]('|');_0xa02f38[_0x3712be(0x4c7)]=_0x4a5ec0;}if(_0x4258c6===_0x3712be(0x3e1)){let _0x2d0c3f=_0x5d76d9[_0x3712be(0x420)][_0x3712be(0x767)][_0x3712be(0x347)](_0x4037fa=>JSON[_0x3712be(0x7ed)](_0x4037fa[_0x3712be(0x2a9)])['display_text'])[_0x3712be(0x6a2)]('|');_0xa02f38[_0x3712be(0x4c7)]=_0x2d0c3f;}_0x4258c6==='listResponseMessage'&&(_0xa02f38['buttonOrList_id']=_0x5d76d9?.[_0x3712be(0x738)]?.[_0x3712be(0x724)]);let _0x2aad1c='';if(_0x5d76d9&&(_0x2aad1c+=_0x5d76d9[_0x3712be(0x60f)]?_0x5d76d9[_0x3712be(0x60f)]:'',_0x2aad1c+=_0x5d76d9[_0x3712be(0x52b)]?'\x20'+_0x5d76d9[_0x3712be(0x52b)]:'',_0x2aad1c+=_0x5d76d9['conversation']?'\x20'+_0x5d76d9[_0x3712be(0x702)]:'',_0x2aad1c+=_0x5d76d9[_0x3712be(0x580)]?'\x20'+_0x5d76d9[_0x3712be(0x580)]:'',_0x4258c6!==_0x3712be(0x362)&&(_0x2aad1c+=_0x5d76d9[_0x3712be(0x8a3)]?.[_0x3712be(0x23c)]?'\x20'+_0x5d76d9['body'][_0x3712be(0x23c)]:''),_0x2aad1c+=_0x5d76d9?.[_0x3712be(0x50a)]?.[_0x3712be(0x23c)]?'\x20'+_0x5d76d9?.[_0x3712be(0x50a)]?.[_0x3712be(0x23c)]:''),_0x4258c6===_0x3712be(0x3d5)){_0x2aad1c=(_0x5d76d9[_0x3712be(0x33a)]||'')+'\x0a'+(_0x5d76d9[_0x3712be(0x2e5)]||'')+'\x0a'+(_0x5d76d9['footerText']||'');let _0x76e7e8=this['sectionsToString'](_0x5d76d9[_0x3712be(0x49d)]);_0xa02f38[_0x3712be(0x4c7)]=_0x76e7e8;}if(_0x4258c6===_0x3712be(0x3d9)&&(_0xa2a103=_0x5d76d9[_0x3712be(0x33a)],_0x805639=_0x5d76d9?.[_0x3712be(0x738)]?.[_0x3712be(0x724)]),_0x4258c6===_0x3712be(0x362)&&(_0xa2a103=_0x5d76d9?.[_0x3712be(0x8a3)]?.[_0x3712be(0x23c)]),_0x4258c6===_0x3712be(0x6a9)&&(_0xa2a103=_0x5d76d9?.[_0x3712be(0x2f8)],_0x805639=_0x5d76d9?.[_0x3712be(0x913)]),_0x5d76d9&&_0x5d76d9[_0x3712be(0x316)]){let _0x323718=this[_0x3712be(0x71a)](JSON['stringify'](_0x5d76d9[_0x3712be(0x316)],null,0x2));_0x2aad1c=_0x2aad1c+'\x0a'+_0x323718;}if(_0x5d76d9){let {nativeFlowResponseMessage:_0x15e0d4,selectedId:_0x46f19d,selectedDisplayText:_0x27708f,selectedIndex:_0x44978e,body:_0x27707c,nativeFlowMessage:_0x1c3da3,singleSelectReply:_0x336f68,sections:_0x23ea6d,listType:_0x4765ea,displayName:_0xb0b7c8,vcard:_0x5a8cf,contactVcard:_0x366a3d,name:_0x52221d,caption:_0x5cca6d,conversation:_0x5793eb,pollCreationMessageKey:_0x56c58c,footerText:_0x52fbc2,contentText:_0x201cbc,pageCount:_0x443fde,headerType:_0xdde212,isAvatar:_0x3ed12a,isAnimated:_0x2a8c52,fallbackLc:_0x27a8a3,fallbackLg:_0x54c3d4,namespace:_0x46193d,elementName:_0x3e77bc,localizableParams:_0x2fddf3,viewOnce:_0x22266f,height:_0x32c4f0,width:_0x38f207,key:_0x297c85,firstScanLength:_0x368bd2,firstScanSidecar:_0x56b444,gifPlayback:_0x157ca4,gifAttribution:_0x460926,midQualityFileSha256:_0xda748d,scansSidecar:_0x2d9e95,streamingSidecar:_0x4584e7,thumbnailHeight:_0x2d6f02,thumbnailWidth:_0x93a47c,thumbnailEncSha256:_0x34433e,thumbnailDirectPath:_0x2be63e,canonicalUrl:_0x419982,matchedText:_0x20ff38,previewType:_0x59b631,thumbnailSha256:_0x37bdac,deviceListMetadataVersion:_0x3387be,inviteLinkGroupTypeV2:_0x2191ef,interactiveAnnotations:_0x1ed8f4,scanLengths:_0x5dc7fc,jpegThumbnail:_0x5b820e,url:_0x31285d,mediaKeyTimestamp:_0x1abd9c,waveform:_0x1340f1,stickerSentTs:_0x20e2b8,firstFrameLength:_0x316b8c,fileEncSha256:_0x23ea90,contextInfo:_0x4880b5,firstFrameSidecar:_0xad5187,directPath:_0x1ecaa7,fileSha256:_0xd8017d,mediaKey:_0x2a7bfd,senderTimestampMs:_0x47d1b3,..._0xa3c610}=_0x5d76d9;(_0x4258c6===_0x3712be(0x3d5)||_0x4258c6===_0x3712be(0x3d9))&&(delete _0xa3c610[_0x3712be(0x33a)],delete _0xa3c610[_0x3712be(0x2e5)]),typeof _0x5d76d9==_0x3712be(0x792)?_0xa02f38={'text':_0x5d76d9,'type':_0x4258c6||_0x3712be(0x702),..._0x289e39&&{'edited':_0x289e39},..._0x4bda22&&{'quoted':_0x4bda22},..._0x50f6af&&{'reaction':_0x50f6af}}:_0xa02f38={'text':_0x2aad1c,..._0xa3c610,..._0x4258c6==='pollUpdateMessage'?{'poll_id':_0x5d76d9['pollCreationMessageKey']['id'],'quoted':_0x5d76d9[_0x3712be(0x7c5)]['id'],'vote':_0xa2a103}:{},..._0x4258c6===_0x3712be(0x3d9)?{'buttonOrList_id':_0x805639,'vote':_0xa2a103}:{},..._0x4258c6==='interactiveResponseMessage'?{'vote':_0xa2a103}:{},..._0x4258c6==='templateButtonReplyMessage'?{'buttonOrList_id':_0x805639,'vote':_0xa2a103}:{},'type':_0x4258c6,..._0x289e39&&{'edited':_0x289e39},..._0x4bda22&&{'quoted':_0x4bda22},..._0x50f6af&&{'reaction':_0x50f6af},...(_0x4258c6===_0x3712be(0x7c1)||_0x4258c6===_0x3712be(0x58d)||_0x4258c6===_0x3712be(0x892)||_0x4258c6===_0x3712be(0x3d5)||_0x4258c6===_0x3712be(0x3e1))&&{'convertedOptions':_0xa02f38[_0x3712be(0x4c7)]}};}return{'messageType':_0x4258c6,'messageContent':_0x5d76d9,'message_normalized':_0xa02f38};}catch(_0x56cc66){return this[_0x3712be(0x563)][_0x3712be(0x47a)](_0x3712be(0x395)+_0x56cc66),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x3af30c(0x4c2)]=[],(this[_0x3af30c(0x4b3)](),this['initializeQueue'](),this['instance'][_0x3af30c(0x57f)]={'count':0x0},this[_0x3af30c(0x568)][_0x3af30c(0x478)]={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}set['instanceName'](_0xac4da2){const _0x5703bf=a0_0x4bc873;if(!_0xac4da2){this[_0x5703bf(0x568)][_0x5703bf(0x60f)]=(0x0,Ii['v4'])();return;}this['instance'][_0x5703bf(0x60f)]=_0xac4da2,this[_0x5703bf(0x463)](_0x5703bf(0x74c),{'instance':this[_0x5703bf(0x568)][_0x5703bf(0x60f)],'status':'created'});}get[a0_0x4bc873(0x616)](){const _0x259fc4=a0_0x4bc873;return this[_0x259fc4(0x568)][_0x259fc4(0x60f)];}get[a0_0x4bc873(0x72d)](){return this['instance']['wuid'];}async['getProfileName'](){const _0x413092=a0_0x4bc873;let _0x2fb4b5=this[_0x413092(0x877)]['user']?.['name']??this['client'][_0x413092(0x750)]?.[_0x413092(0x675)];if(!_0x2fb4b5){if(this[_0x413092(0x251)][_0x413092(0x62f)](_0x413092(0x5b9))[_0x413092(0x8f9)]){let _0x13f4a6=await I['getClient']()['db'](this[_0x413092(0x251)][_0x413092(0x62f)](_0x413092(0x5b9))[_0x413092(0x867)]['DB_PREFIX_NAME']+'-instances')[_0x413092(0x2a6)](this['instanceName'])['findOne']({'_id':'creds'});if(_0x13f4a6){let _0x29eca2=JSON['parse'](JSON[_0x413092(0x573)](_0x13f4a6),w[_0x413092(0x5c1)][_0x413092(0x23b)]);_0x2fb4b5=_0x29eca2['me']?.[_0x413092(0x60f)]||_0x29eca2['me']?.[_0x413092(0x675)];}}else{if((0x0,Le[_0x413092(0x59a)])((0x0,j[_0x413092(0x6a2)])(Se,this['instanceName'],_0x413092(0x4b1)))){let _0x1231d2=JSON['parse']((0x0,Le[_0x413092(0x500)])((0x0,j[_0x413092(0x6a2)])(Se,this[_0x413092(0x616)],_0x413092(0x4b1)),{'encoding':'utf-8'}));_0x2fb4b5=_0x1231d2['me']?.[_0x413092(0x60f)]||_0x1231d2['me']?.['verifiedName'];}}}return _0x2fb4b5;}get['profilePictureUrl'](){const _0x1751b6=a0_0x4bc873;return this[_0x1751b6(0x568)]['profilePictureUrl'];}async['isBusinessInstance'](){const _0x355c83=a0_0x4bc873;let _0x466adb=this[_0x355c83(0x568)][_0x355c83(0x72d)]+'@s.whatsapp.net';try{await this['client'][_0x355c83(0x50b)](_0x466adb)?this[_0x355c83(0x568)][_0x355c83(0x804)]=!0x0:this['instance'][_0x355c83(0x804)]=!0x1;}catch{this['instance'][_0x355c83(0x804)]=!0x1;}return this[_0x355c83(0x563)][_0x355c83(0x636)](this[_0x355c83(0x616)]+'\x20('+this[_0x355c83(0x568)][_0x355c83(0x72d)]+_0x355c83(0x4af)+this['instance'][_0x355c83(0x804)]),this[_0x355c83(0x568)]['isBusiness'];}get['qrCode'](){const _0x404e6c=a0_0x4bc873;return this['instance'][_0x404e6c(0x57f)]?.[_0x404e6c(0x667)]?{'pairingCode':this[_0x404e6c(0x568)][_0x404e6c(0x57f)]?.[_0x404e6c(0x667)]}:{'code':this['instance'][_0x404e6c(0x57f)]?.[_0x404e6c(0x581)],'base64':this[_0x404e6c(0x568)][_0x404e6c(0x57f)]?.[_0x404e6c(0x663)]};}async[a0_0x4bc873(0x5ae)](){const _0x12b32d=a0_0x4bc873;let _0x369fd3=await this[_0x12b32d(0x6c6)][_0x12b32d(0x5d8)][_0x12b32d(0x8aa)](this[_0x12b32d(0x616)]);this[_0x12b32d(0x35f)][_0x12b32d(0x8ab)]=_0x369fd3?.['url'],this[_0x12b32d(0x35f)][_0x12b32d(0x896)]=_0x369fd3?.['enabled'],this[_0x12b32d(0x35f)][_0x12b32d(0x6f0)]=_0x369fd3?.[_0x12b32d(0x6f0)],this[_0x12b32d(0x35f)]['STATUS_INSTANCE']=_0x369fd3?.[_0x12b32d(0x4d4)],this[_0x12b32d(0x35f)]['QRCODE_UPDATED']=_0x369fd3?.[_0x12b32d(0x3a5)],this[_0x12b32d(0x35f)][_0x12b32d(0x58f)]=_0x369fd3?.['SEND_MESSAGE'],this[_0x12b32d(0x35f)][_0x12b32d(0x4ea)]=_0x369fd3?.[_0x12b32d(0x4ea)],this[_0x12b32d(0x35f)][_0x12b32d(0x681)]=_0x369fd3?.[_0x12b32d(0x681)],this['localWebhook'][_0x12b32d(0x873)]=_0x369fd3?.[_0x12b32d(0x873)],this[_0x12b32d(0x35f)]['GROUPS_UPDATE']=_0x369fd3?.[_0x12b32d(0x354)],this[_0x12b32d(0x35f)][_0x12b32d(0x208)]=_0x369fd3?.[_0x12b32d(0x208)],this[_0x12b32d(0x35f)][_0x12b32d(0x714)]=_0x369fd3?.[_0x12b32d(0x714)],this[_0x12b32d(0x35f)][_0x12b32d(0x622)]=_0x369fd3?.[_0x12b32d(0x622)],this[_0x12b32d(0x35f)][_0x12b32d(0x659)]=_0x369fd3?.[_0x12b32d(0x659)],this['localWebhook']['CHATS_DELETE']=_0x369fd3?.[_0x12b32d(0x897)],this[_0x12b32d(0x35f)][_0x12b32d(0x22e)]=_0x369fd3?.[_0x12b32d(0x22e)],this[_0x12b32d(0x35f)][_0x12b32d(0x39b)]=_0x369fd3?.[_0x12b32d(0x39b)],this['localWebhook'][_0x12b32d(0x4c5)]=_0x369fd3?.[_0x12b32d(0x4c5)],this['localWebhook'][_0x12b32d(0x6d4)]=_0x369fd3?.[_0x12b32d(0x6d4)],this[_0x12b32d(0x35f)][_0x12b32d(0x6b7)]=_0x369fd3?.['MESSAGES_SET'],this[_0x12b32d(0x35f)][_0x12b32d(0x7d8)]=_0x369fd3?.[_0x12b32d(0x7d8)],this[_0x12b32d(0x35f)]['groups_ignore']=_0x369fd3?.[_0x12b32d(0x735)];}async[a0_0x4bc873(0x93b)](_0x1b299e){const _0x385e4=a0_0x4bc873;let _0x17c17e=[_0x385e4(0x618),_0x385e4(0x8ab),_0x385e4(0x896),_0x385e4(0x6f0),_0x385e4(0x4d4),_0x385e4(0x3a5),_0x385e4(0x681),_0x385e4(0x4ea),_0x385e4(0x58f),_0x385e4(0x873),_0x385e4(0x354),_0x385e4(0x208),_0x385e4(0x714),_0x385e4(0x622),'CHATS_UPDATE','CHATS_DELETE',_0x385e4(0x22e),_0x385e4(0x39b),'CONTACTS_UPDATE',_0x385e4(0x6d4),_0x385e4(0x6b7),'CONNECTION_UPDATE',_0x385e4(0x735)],_0x4949e0={};return _0x17c17e[_0x385e4(0x426)](_0x565d26=>{_0x1b299e[_0x565d26]!==void 0x0&&(_0x4949e0[_0x565d26]=_0x1b299e[_0x565d26]);}),_0x4949e0['url']&&(_0x4949e0[_0x385e4(0x8ab)]=_0x4949e0['url']['trim']()),await this[_0x385e4(0x6c6)][_0x385e4(0x5d8)][_0x385e4(0x75f)](_0x4949e0,this[_0x385e4(0x616)]),Object['assign'](this[_0x385e4(0x35f)],_0x4949e0),await this['repository']['webhook']['find'](this[_0x385e4(0x616)]);}async['findWebhook'](){const _0x30d2b9=a0_0x4bc873;return await this[_0x30d2b9(0x6c6)]['webhook'][_0x30d2b9(0x8aa)](this[_0x30d2b9(0x616)]);}async[a0_0x4bc873(0x463)](_0x128dd0,_0x10bd24){const _0x556fc3=a0_0x4bc873;let _0x19d3d4=_0x128dd0[_0x556fc3(0x242)](/[\.-]/gm,'_')[_0x556fc3(0x212)](),_0x3d82b0=this[_0x556fc3(0x35f)][_0x556fc3(0x896)]&&(0x0,J[_0x556fc3(0x5a7)])(this[_0x556fc3(0x35f)][_0x556fc3(0x8ab)])?this[_0x556fc3(0x35f)][_0x556fc3(0x8ab)]+(this[_0x556fc3(0x35f)][_0x556fc3(0x6f0)]?this[_0x556fc3(0x5aa)][_0x128dd0]:''):null,_0x504824=this[_0x556fc3(0x35f)][_0x19d3d4],_0x4926fa=he&&he[_0x556fc3(0x896)]&&(0x0,J['isURL'])(he[_0x556fc3(0x8ab)])?he[_0x556fc3(0x8ab)]+(he[_0x556fc3(0x6f0)]?this[_0x556fc3(0x5aa)][_0x128dd0]:''):null,_0x1c0852=he?he[_0x19d3d4]:null;if(_0x504824&&_0x3d82b0)try{await Q[_0x556fc3(0x323)][_0x556fc3(0x75f)]({'baseURL':_0x3d82b0})[_0x556fc3(0x4bd)]('',{'event':_0x128dd0,'instance':this[_0x556fc3(0x568)]['name'],'apikey':this[_0x556fc3(0x568)][_0x556fc3(0x393)],'data':_0x10bd24}),this[_0x556fc3(0x563)][_0x556fc3(0x6d2)](this[_0x556fc3(0x616)]+'\x20('+this[_0x556fc3(0x568)][_0x556fc3(0x72d)]+_0x556fc3(0x4df)+_0x128dd0+':\x20'+_0x3d82b0);}catch{this[_0x556fc3(0x563)][_0x556fc3(0x47a)](this[_0x556fc3(0x616)]+'\x20('+this[_0x556fc3(0x568)][_0x556fc3(0x72d)]+_0x556fc3(0x68d)+_0x128dd0+':\x20'+_0x3d82b0);}if(_0x1c0852&&_0x4926fa)try{await Q['default']['create']({'baseURL':_0x4926fa})[_0x556fc3(0x4bd)]('',{'event':_0x128dd0,'instance':this[_0x556fc3(0x568)][_0x556fc3(0x60f)],'apikey':this[_0x556fc3(0x568)]['apikey'],'data':_0x10bd24}),this[_0x556fc3(0x563)][_0x556fc3(0x6d2)](this['instanceName']+'\x20('+this[_0x556fc3(0x568)][_0x556fc3(0x72d)]+_0x556fc3(0x2b7)+_0x128dd0+':\x20'+_0x4926fa);}catch{this[_0x556fc3(0x563)][_0x556fc3(0x47a)](this[_0x556fc3(0x616)]+'\x20('+this['instance'][_0x556fc3(0x72d)]+'):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20'+_0x128dd0+':\x20'+_0x4926fa);}}async[a0_0x4bc873(0x5d6)]({qr:_0x28f43b,connection:_0x4b39cb,lastDisconnect:_0x480f0b}){const _0x3646d2=a0_0x4bc873;if(_0x28f43b){if(this[_0x3646d2(0x568)][_0x3646d2(0x57f)][_0x3646d2(0x40b)]===ko)return this[_0x3646d2(0x463)](_0x3646d2(0x243),{'message':_0x3646d2(0x1fe),'statusCode':w[_0x3646d2(0x303)]['badSession']}),this['stateConnection']={'state':'refused','statusReason':w[_0x3646d2(0x303)][_0x3646d2(0x54c)]},this[_0x3646d2(0x463)](_0x3646d2(0x621),{'instance':this[_0x3646d2(0x568)][_0x3646d2(0x60f)],...this['stateConnection']}),this[_0x3646d2(0x463)](_0x3646d2(0x74c),{'instance':this[_0x3646d2(0x568)][_0x3646d2(0x60f)],'status':_0x3646d2(0x8a9)}),this[_0x3646d2(0x6c6)][_0x3646d2(0x4a9)][_0x3646d2(0x4a8)](this[_0x3646d2(0x568)][_0x3646d2(0x60f)]),this[_0x3646d2(0x80e)]=!0x0,ae['removeIPv6ById'](B,this[_0x3646d2(0x568)][_0x3646d2(0x60f)]),this[_0x3646d2(0x8e5)]['emit'](_0x3646d2(0x6ce),this['instance'][_0x3646d2(0x60f)]);this['instance'][_0x3646d2(0x57f)][_0x3646d2(0x40b)]++;let _0x5dbb47={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x3646d2(0x81b),'dark':'#000000'}};Ti[_0x3646d2(0x323)][_0x3646d2(0x79a)](_0x28f43b,_0x5dbb47,(_0x3ebdf4,_0x26fee4)=>{const _0x17594f=_0x3646d2;if(_0x3ebdf4){this['logger'][_0x17594f(0x47a)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x17594f(0x7aa)+(_0x3ebdf4 instanceof Error?_0x3ebdf4['message']:JSON['stringify'](_0x3ebdf4,null,0x2)));return;}this[_0x17594f(0x568)][_0x17594f(0x57f)][_0x17594f(0x663)]=_0x26fee4,this['instance']['qrcode'][_0x17594f(0x581)]=_0x28f43b,!this[_0x17594f(0x282)]&&this[_0x17594f(0x463)](_0x17594f(0x243),{'qrcode':{'instance':this[_0x17594f(0x568)]['name'],'pairingCode':this[_0x17594f(0x568)][_0x17594f(0x57f)][_0x17594f(0x667)],'code':_0x28f43b,'base64':_0x26fee4}});}),this[_0x3646d2(0x282)]?this[_0x3646d2(0x568)][_0x3646d2(0x57f)][_0x3646d2(0x667)]||(await(0x0,w[_0x3646d2(0x3c9)])(0x7d0),this[_0x3646d2(0x568)][_0x3646d2(0x57f)][_0x3646d2(0x667)]=await this['client'][_0x3646d2(0x7b7)](this[_0x3646d2(0x282)])):this[_0x3646d2(0x568)][_0x3646d2(0x57f)][_0x3646d2(0x667)]=null,_i[_0x3646d2(0x323)][_0x3646d2(0x38a)](_0x28f43b,{'small':!0x0},_0x49fecd=>this['logger'][_0x3646d2(0x6d2)]('\x0a{\x20instance:\x20'+this['instance'][_0x3646d2(0x60f)]+_0x3646d2(0x219)+this[_0x3646d2(0x568)][_0x3646d2(0x57f)][_0x3646d2(0x40b)]+_0x3646d2(0x276)+this['instance'][_0x3646d2(0x57f)][_0x3646d2(0x667)]+'\x20}\x0a'+_0x49fecd));}if(_0x4b39cb&&(this[_0x3646d2(0x676)]={'state':_0x4b39cb,'statusReason':_0x480f0b?.[_0x3646d2(0x47a)]?.[_0x3646d2(0x408)]?.['statusCode']??0xc8},this[_0x3646d2(0x463)](_0x3646d2(0x621),{'instance':this[_0x3646d2(0x568)][_0x3646d2(0x60f)],...this['stateConnection']})),_0x4b39cb===_0x3646d2(0x526)){if(this[_0x3646d2(0x905)]++,this[_0x3646d2(0x376)]['push'](Date['now']()),this[_0x3646d2(0x376)]=this[_0x3646d2(0x376)][_0x3646d2(0x411)](_0x4cfee8=>Date[_0x3646d2(0x3bd)]()-_0x4cfee8<this[_0x3646d2(0x4cb)]),_0x480f0b[_0x3646d2(0x47a)]?.[_0x3646d2(0x408)]?.[_0x3646d2(0x5f6)]!==w[_0x3646d2(0x303)][_0x3646d2(0x63d)]){let _0x3ec950=this[_0x3646d2(0x905)]<=0x1?0x0:Math['min'](Math[_0x3646d2(0x404)](0x2,this[_0x3646d2(0x905)]-0x1)*0x3e8,0x493e0);console[_0x3646d2(0x6d2)](this[_0x3646d2(0x616)]+'\x20Tentativa\x20de\x20reconexo\x20'+this['reconnectAttempts']+_0x3646d2(0x775)+_0x3ec950/0x3e8+_0x3646d2(0x836)),await new Promise(_0x1a47ad=>setTimeout(_0x1a47ad,_0x3ec950)),console['log'](_0x3646d2(0x697)),await this[_0x3646d2(0x3d3)]();}else{this[_0x3646d2(0x463)](_0x3646d2(0x74c),{'instance':this[_0x3646d2(0x568)][_0x3646d2(0x60f)],'status':_0x3646d2(0x8a9)}),this[_0x3646d2(0x568)][_0x3646d2(0x478)][_0x3646d2(0x8ad)]=!0x1,this['repository'][_0x3646d2(0x5d8)][_0x3646d2(0x4a8)](this[_0x3646d2(0x616)]),this[_0x3646d2(0x6c6)][_0x3646d2(0x4a9)][_0x3646d2(0x75f)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x3646d2(0x3bd)]()},this[_0x3646d2(0x568)][_0x3646d2(0x60f)]),ae[_0x3646d2(0x43b)](B,this[_0x3646d2(0x568)][_0x3646d2(0x60f)]);try{this['logger'][_0x3646d2(0x377)](this[_0x3646d2(0x616)]+'\x20('+this[_0x3646d2(0x568)][_0x3646d2(0x72d)]+_0x3646d2(0x795));let _0x4a9f61=await this[_0x3646d2(0x6c6)][_0x3646d2(0x805)][_0x3646d2(0x665)](this[_0x3646d2(0x568)][_0x3646d2(0x72d)]);_0x4a9f61[_0x3646d2(0x22b)]?this[_0x3646d2(0x563)][_0x3646d2(0x377)](this[_0x3646d2(0x616)]+'\x20('+this[_0x3646d2(0x568)][_0x3646d2(0x72d)]+'):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.'):this[_0x3646d2(0x563)]['error']('Falha\x20ao\x20deletar\x20a\x20coleo\x20de\x20mensagens:\x20'+_0x4a9f61['error']);}catch(_0x23a295){this[_0x3646d2(0x563)][_0x3646d2(0x47a)]('Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20'+_0x23a295[_0x3646d2(0x805)]);}this[_0x3646d2(0x568)][_0x3646d2(0x478)]['delayMessage']!==null&&(this[_0x3646d2(0x563)][_0x3646d2(0x377)](this['instanceName']+'\x20('+this[_0x3646d2(0x568)][_0x3646d2(0x72d)]+_0x3646d2(0x6ed)),clearInterval(this[_0x3646d2(0x568)]['ScheduleMessage'][_0x3646d2(0x73e)]),this[_0x3646d2(0x568)][_0x3646d2(0x478)][_0x3646d2(0x73e)]=null),this[_0x3646d2(0x563)][_0x3646d2(0x377)](this['instanceName']+'\x20('+this[_0x3646d2(0x568)][_0x3646d2(0x72d)]+'):\x20Limpando\x20AutomateSystem'),this['AutomateSystem']=null,this[_0x3646d2(0x8e5)][_0x3646d2(0x433)](_0x3646d2(0x261),this[_0x3646d2(0x568)][_0x3646d2(0x60f)],'inner'),this['client']?.['ws']?.['close'](),this[_0x3646d2(0x877)][_0x3646d2(0x712)](new Error(_0x3646d2(0x202)));}}if(_0x4b39cb===_0x3646d2(0x808)){this['logger'][_0x3646d2(0x5b6)](this['instanceName']+'\x20('+this[_0x3646d2(0x568)][_0x3646d2(0x72d)]+'):\x20this.client.authState.creds?.myAppStateKeyId:\x20'+this[_0x3646d2(0x877)][_0x3646d2(0x525)][_0x3646d2(0x37d)]?.[_0x3646d2(0x77c)]),this[_0x3646d2(0x877)][_0x3646d2(0x525)][_0x3646d2(0x37d)]?.[_0x3646d2(0x77c)]||(this[_0x3646d2(0x563)][_0x3646d2(0x5b6)](this[_0x3646d2(0x616)]+'\x20('+this[_0x3646d2(0x568)][_0x3646d2(0x72d)]+'):\x20ev.flush\x20realizado'),this[_0x3646d2(0x877)]['ev'][_0x3646d2(0x5ee)]()),this['resetReconnectionVariables'],this[_0x3646d2(0x568)][_0x3646d2(0x72d)]=this[_0x3646d2(0x877)][_0x3646d2(0x750)]['id'][_0x3646d2(0x242)](/:\d+/,'')[_0x3646d2(0x242)](_0x3646d2(0x8b3),''),this[_0x3646d2(0x568)]['profilePictureUrl']=(await this[_0x3646d2(0x828)](this[_0x3646d2(0x568)][_0x3646d2(0x72d)]+_0x3646d2(0x8b3)))[_0x3646d2(0x72a)],this['repository'][_0x3646d2(0x4a9)][_0x3646d2(0x75f)]({'online':!0x0,'owner':this[_0x3646d2(0x568)]['wuid'],'lastDisconnect':null},this['instance'][_0x3646d2(0x60f)]);let _0x328883=_0x3646d2(0x87a)+this[_0x3646d2(0x568)][_0x3646d2(0x72d)],_0x512e3d=0x28,_0x57aef5=Math[_0x3646d2(0x70a)]((_0x512e3d-_0x328883[_0x3646d2(0x825)])/0x2),_0x375588='\x20'[_0x3646d2(0x722)](_0x57aef5),_0x3ddf19='CONECTADO\x20\x20UAZAPI',_0xee44dc=_0x3646d2(0x3f3)+this[_0x3646d2(0x568)][_0x3646d2(0x60f)],_0x303d04=(''+_0x375588+_0x328883+_0x375588)['padEnd'](_0x512e3d,'\x20'),_0x52d756=(''+_0x375588+_0x3ddf19+_0x375588)[_0x3646d2(0x3ef)](_0x512e3d,'\x20'),_0x17bf02=(''+_0x375588+_0xee44dc+_0x375588)[_0x3646d2(0x3ef)](_0x512e3d,'\x20'),_0x174232=Math[_0x3646d2(0x2fa)](_0x303d04['length'],_0x52d756[_0x3646d2(0x825)],_0x17bf02[_0x3646d2(0x825)]),_0x38042f=_0x303d04[_0x3646d2(0x3ef)](_0x174232,'\x20'),_0x14eaa0=_0x52d756[_0x3646d2(0x3ef)](_0x174232,'\x20'),_0x128f71=_0x17bf02['padEnd'](_0x174232,'\x20');this[_0x3646d2(0x563)][_0x3646d2(0x636)]((_0x3646d2(0x940)+''[_0x3646d2(0x722)](_0x174232)+_0x3646d2(0x6bc)+_0x14eaa0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x128f71+_0x3646d2(0x57a)+_0x38042f+_0x3646d2(0x7fb)+''[_0x3646d2(0x722)](_0x174232)+'')[_0x3646d2(0x242)](/^ +/gm,'\x20\x20')),this[_0x3646d2(0x5be)](),this['instance'][_0x3646d2(0x478)][_0x3646d2(0x8ad)]=!0x0;}}['resetReconnectionVariables'](){const _0x538bfd=a0_0x4bc873;this[_0x538bfd(0x905)]=0x0,this[_0x538bfd(0x376)]=[];}async[a0_0x4bc873(0x649)](_0x33ec67,_0x512ec2=!0x1){const _0x1671a3=a0_0x4bc873;try{let _0x2908c1=await this['repository'][_0x1671a3(0x805)][_0x1671a3(0x8aa)]({'where':{'_id':_0x33ec67['id']}},this[_0x1671a3(0x568)][_0x1671a3(0x72d)]);return _0x512ec2?_0x2908c1[0x0]:_0x2908c1[0x0][_0x1671a3(0x805)];}catch{return{'conversation':''};}}[a0_0x4bc873(0x4b3)](){const _0x3ce868=a0_0x4bc873;let _0xd79dd9=this[_0x3ce868(0x251)][_0x3ce868(0x62f)](_0x3ce868(0x902)),_0x2fdc0b=this[_0x3ce868(0x251)][_0x3ce868(0x62f)](_0x3ce868(0x5b9));_0xd79dd9?.['CLEANING_INTERVAL']&&!_0x2fdc0b[_0x3ce868(0x8f9)]&&setInterval(()=>{const _0x507fd7=_0x3ce868;try{for(let [_0xfbd04e,_0x2ea34d]of Object['entries'](_0xd79dd9))_0x2ea34d===!0x0&&(0x0,Fe['execSync'])(_0x507fd7(0x311)+(0x0,j[_0x507fd7(0x6a2)])(this[_0x507fd7(0x614)],_0xfbd04e[_0x507fd7(0x511)](),this[_0x507fd7(0x568)]['wuid'])+'/*.json');}catch{}},(_0xd79dd9?.[_0x3ce868(0x7a9)]??0xe10)*0x3e8);}async[a0_0x4bc873(0x472)](){const _0x16f1f0=a0_0x4bc873;let _0x38295f=this[_0x16f1f0(0x251)]['get']('DATABASE'),_0x5a440d=this[_0x16f1f0(0x251)][_0x16f1f0(0x62f)](_0x16f1f0(0x8b7));return _0x5a440d?.[_0x16f1f0(0x8f9)]?await Os(_0x5a440d,this[_0x16f1f0(0x568)][_0x16f1f0(0x60f)]):_0x38295f[_0x16f1f0(0x8f9)]?await _s(this[_0x16f1f0(0x568)][_0x16f1f0(0x60f)]):await(0x0,w['useMultiFileAuthState'])((0x0,j[_0x16f1f0(0x6a2)])(Se,this[_0x16f1f0(0x568)][_0x16f1f0(0x60f)]));}async[a0_0x4bc873(0x5be)](){const _0x1186bc=a0_0x4bc873;let _0x1d937a=()=>Math[_0x1186bc(0x70a)](Math[_0x1186bc(0x748)]()*0x4e21)+0x7d0,_0x5c9358=async()=>{const _0x3317fc=_0x1186bc;if(!this[_0x3317fc(0x568)][_0x3317fc(0x478)]['isConnected']){this['logger'][_0x3317fc(0x377)](this[_0x3317fc(0x616)]+'\x20('+this[_0x3317fc(0x568)][_0x3317fc(0x72d)]+_0x3317fc(0x2f1)),this[_0x3317fc(0x860)]=!0x1;return;}if(this[_0x3317fc(0x568)][_0x3317fc(0x72d)]&&this['AutomateSystem']&&this[_0x3317fc(0x568)]['ScheduleMessage'][_0x3317fc(0x73e)]!==null&&this['instance']['ScheduleMessage']['delayMessage']!==void 0x0){let _0x5e97ff=Math[_0x3317fc(0x700)](this[_0x3317fc(0x568)][_0x3317fc(0x478)][_0x3317fc(0x73e)]/0xea60);this[_0x3317fc(0x563)][_0x3317fc(0x377)](this['instanceName']+'\x20('+this['instance'][_0x3317fc(0x72d)]+'):\x20condies\x20atendidas,\x20parando\x20verificao...\x20em\x20'+_0x5e97ff+'\x20minutos\x20verificar\x20novas\x20mensagens'),this['isRunning']=!0x1;return;}else this[_0x3317fc(0x568)][_0x3317fc(0x72d)]&&(this[_0x3317fc(0x563)][_0x3317fc(0x377)](this['instanceName']+'\x20('+this[_0x3317fc(0x568)][_0x3317fc(0x72d)]+_0x3317fc(0x228)),this[_0x3317fc(0x5a5)]||(await this[_0x3317fc(0x209)](),this[_0x3317fc(0x881)](),this[_0x3317fc(0x4a5)]()),(this[_0x3317fc(0x568)][_0x3317fc(0x478)][_0x3317fc(0x73e)]===null||this[_0x3317fc(0x568)][_0x3317fc(0x478)][_0x3317fc(0x73e)]===void 0x0)&&await this[_0x3317fc(0x658)]());if(this[_0x3317fc(0x860)]){let _0x5179b9=_0x1d937a();this[_0x3317fc(0x563)][_0x3317fc(0x377)](this[_0x3317fc(0x616)]+_0x3317fc(0x236)+_0x5179b9/0x3e8+'\x20segundos'),setTimeout(_0x5c9358,_0x5179b9);}};if(this['isRunning'])return;this['isRunning']=!0x0;let _0x2c52ac=_0x1d937a();setTimeout(_0x5c9358,_0x2c52ac);}async['synchronizeAndMapFlows'](){const _0x53f814=a0_0x4bc873;let _0x1a095a=this['instance']['wuid'];try{let _0x322b3e=await this[_0x53f814(0x6c6)][_0x53f814(0x20f)]['findAll']({'where':{'$or':[{'owner':_0x1a095a},{'whoCanUse':{'$in':[_0x1a095a]}},{'shareOwners':{'$in':[_0x1a095a]}}]}}),_0x51d305=new Map(this[_0x53f814(0x5a5)][_0x53f814(0x25d)][_0x53f814(0x347)](_0x177058=>[_0x177058['_id'],_0x177058])),_0x44be73=_0x322b3e[_0x53f814(0x347)](_0x18f8cf=>{const _0x413f05=_0x53f814;let _0x225b8d=_0x51d305['get'](_0x18f8cf[_0x413f05(0x618)]?.[_0x413f05(0x529)]());return{'_id':_0x18f8cf['_id']?.[_0x413f05(0x529)](),'name':_0x225b8d?.[_0x413f05(0x60f)]??_0x18f8cf[_0x413f05(0x60f)],'default':_0x225b8d?.[_0x413f05(0x323)]??_0x18f8cf[_0x413f05(0x323)]??!0x1,'startCommand':_0x225b8d?.['startCommand']??_0x18f8cf[_0x413f05(0x448)],'minutesToClose':_0x225b8d?.[_0x413f05(0x918)]??_0x18f8cf[_0x413f05(0x918)]??0xa,'readMessages':_0x225b8d?.[_0x413f05(0x596)]??_0x18f8cf[_0x413f05(0x596)]??!0x1,'testingWith':_0x225b8d?.[_0x413f05(0x620)]??_0x18f8cf['testingWith'],'canEdit':_0x18f8cf['owner']===_0x1a095a||(_0x18f8cf['whoCanEdit']??[])[_0x413f05(0x5f5)](_0x1a095a),'usersCount':(_0x18f8cf[_0x413f05(0x381)]??[])[_0x413f05(0x825)]??0x0};}),_0x31646c=!0x1;_0x44be73[_0x53f814(0x426)](_0x3b143d=>{const _0x3bb02f=_0x53f814;_0x3b143d['default']&&(_0x31646c?_0x3b143d[_0x3bb02f(0x323)]=!0x1:_0x31646c=!0x0);}),this[_0x53f814(0x5a5)]['flows']=_0x44be73;let _0x3f13d1={'flows':_0x44be73};return await this[_0x53f814(0x6c6)][_0x53f814(0x40e)][_0x53f814(0x275)](_0x3f13d1,_0x1a095a),this[_0x53f814(0x563)][_0x53f814(0x377)](this[_0x53f814(0x616)]+'\x20('+_0x1a095a+_0x53f814(0x333)),_0x44be73['length'];}catch(_0x51582a){return this['logger'][_0x53f814(0x47a)](this[_0x53f814(0x616)]+'\x20('+_0x1a095a+_0x53f814(0x4b6)+(_0x51582a instanceof Error?_0x51582a[_0x53f814(0x805)]:JSON[_0x53f814(0x573)](_0x51582a,null,0x2))),{'message':_0x53f814(0x674)+(_0x51582a instanceof Error?_0x51582a['message']:JSON[_0x53f814(0x573)](_0x51582a,null,0x2))};}}async[a0_0x4bc873(0x3d3)](_0x4ca062){const _0x199876=a0_0x4bc873;try{let _0x4b2273=await this[_0x199876(0x6c6)][_0x199876(0x568)]['findOne']({'where':{'_id':B+'-'+this['instanceName']}}),_0x3f7034,_0x68609a=!ae[_0x199876(0x40f)]||!ae[_0x199876(0x6cf)];console[_0x199876(0x6d2)](_0x199876(0x3e5)),console[_0x199876(0x6d2)](_0x199876(0x74a),Ai),console[_0x199876(0x6d2)](_0x199876(0x7d0),this['reconnectAttempts']),console[_0x199876(0x6d2)](_0x199876(0x3e5)),Ai&&!_0x68609a&&(this[_0x199876(0x905)]<0x4||!this[_0x199876(0x905)]?_0x4b2273&&_0x4b2273['ip']?(_0x3f7034=_0x4b2273['ip'],console[_0x199876(0x6d2)](_0x199876(0x7bf)+_0x3f7034)):(_0x3f7034=await ae[_0x199876(0x2ff)](B,this[_0x199876(0x568)][_0x199876(0x60f)]),_0x3f7034?(console[_0x199876(0x6d2)]('Novo\x20IP\x20criado:\x20'+_0x3f7034),await(0x0,w[_0x199876(0x3c9)])(0x7d0)):console['error'](_0x199876(0x589))):this[_0x199876(0x905)]<0x6&&(await ae['removeIPv6ById'](B,this[_0x199876(0x568)][_0x199876(0x60f)]),console['log'](_0x199876(0x8b1)),_0x3f7034=await ae['createIPv6'](B,this[_0x199876(0x568)][_0x199876(0x60f)]),_0x3f7034?(console['log']('Novo\x20IP\x20criado:\x20'+_0x3f7034),await(0x0,w[_0x199876(0x3c9)])(0x7d0)):console[_0x199876(0x47a)](_0x199876(0x217)))),this[_0x199876(0x5ae)](),this[_0x199876(0x568)][_0x199876(0x393)]=(await this[_0x199876(0x6c6)]['auth'][_0x199876(0x8aa)](this[_0x199876(0x568)]['name']))[_0x199876(0x393)],this[_0x199876(0x568)][_0x199876(0x525)]=await this['defineAuthState']();let {version:_0x43152a}=await(0x0,w['fetchLatestBaileysVersion'])(),_0x3ffddb=[xi,Fs,(0x0,Ds[_0x199876(0x7d9)])()],_0x2cb56f={'localAddress':_0x3f7034,'auth':{'creds':this['instance'][_0x199876(0x525)][_0x199876(0x552)]['creds'],'keys':(0x0,w[_0x199876(0x483)])(this[_0x199876(0x568)][_0x199876(0x525)]['state'][_0x199876(0x419)],(0x0,Ft[_0x199876(0x323)])({'level':_0x199876(0x47a)}))},'logger':(0x0,Ft[_0x199876(0x323)])({'level':_0x199876(0x47a)}),'printQRInTerminal':!0x1,'browser':_0x4ca062?[_0x199876(0x631),Fs,(0x0,Ds['release'])()]:_0x3ffddb,'version':_0x43152a,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x21fa92=>{const _0x5e9c2e=_0x199876;let _0x2fdb3e=this[_0x5e9c2e(0x35f)]?.[_0x5e9c2e(0x735)]&&(0x0,w['isJidGroup'])(_0x21fa92);return(0x0,w[_0x5e9c2e(0x694)])(_0x21fa92)||_0x2fdb3e;},'msgRetryCounterCache':this[_0x199876(0x44c)],'getMessage':async _0x28065c=>await this[_0x199876(0x649)](_0x28065c),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this['userDevicesCache'],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x476758){const _0x5801bc=_0x199876;return _0x476758[_0x5801bc(0x48e)]?.[_0x5801bc(0x805)]?.[_0x5801bc(0x3d5)]?.[_0x5801bc(0x706)]===w['proto'][_0x5801bc(0x50f)][_0x5801bc(0x334)][_0x5801bc(0x8a6)][_0x5801bc(0x606)]&&(_0x476758=JSON[_0x5801bc(0x7ed)](JSON[_0x5801bc(0x573)](_0x476758)),_0x476758[_0x5801bc(0x48e)][_0x5801bc(0x805)][_0x5801bc(0x3d5)]['listType']=w[_0x5801bc(0x651)][_0x5801bc(0x50f)][_0x5801bc(0x334)][_0x5801bc(0x8a6)][_0x5801bc(0x2a4)]),_0x476758['listMessage']?.['listType']==w[_0x5801bc(0x651)][_0x5801bc(0x50f)][_0x5801bc(0x334)][_0x5801bc(0x8a6)]['PRODUCT_LIST']&&(_0x476758=JSON[_0x5801bc(0x7ed)](JSON[_0x5801bc(0x573)](_0x476758)),_0x476758[_0x5801bc(0x3d5)][_0x5801bc(0x706)]=w[_0x5801bc(0x651)][_0x5801bc(0x50f)][_0x5801bc(0x334)][_0x5801bc(0x8a6)]['SINGLE_SELECT']),_0x476758;}};return this[_0x199876(0x80e)]=!0x1,this['client']=(0x0,w[_0x199876(0x323)])(_0x2cb56f),this[_0x199876(0x24b)](),this['phoneNumber']=_0x4ca062,this[_0x199876(0x877)];}catch(_0x16e2b0){let _0x32f840='Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20conectar\x20ao\x20whatsapp',_0x474d06=_0x16e2b0 instanceof Error?_0x16e2b0[_0x199876(0x805)]:typeof _0x16e2b0=='object'?JSON[_0x199876(0x573)](_0x16e2b0):_0x16e2b0,_0x11ae40=_0x32f840+':\x20'+_0x474d06;throw this[_0x199876(0x563)]['error'](this[_0x199876(0x616)]+'\x20('+this[_0x199876(0x568)][_0x199876(0x72d)]+'):\x20'+_0x11ae40),console[_0x199876(0x47a)](_0x199876(0x6af),_0x16e2b0),_0x16e2b0 instanceof Error&&console[_0x199876(0x47a)]('Stack\x20trace:',_0x16e2b0[_0x199876(0x454)]),new x(_0x11ae40);}}[a0_0x4bc873(0x24b)](){const _0x38b825=a0_0x4bc873;this[_0x38b825(0x877)]['ev']['process'](_0x40e7e7=>{const _0x2460ca=_0x38b825;if(!this[_0x2460ca(0x80e)]){let _0x385631=this['configService'][_0x2460ca(0x62f)](_0x2460ca(0x5b9));if(_0x40e7e7['labels.edit']){let _0x58d5eb=_0x40e7e7[_0x2460ca(0x4a6)];this[_0x2460ca(0x216)][_0x2460ca(0x4a6)](_0x58d5eb);}if(_0x40e7e7[_0x2460ca(0x5df)]){let _0x42fe13=_0x40e7e7['labels.association'];this['messageHandle'][_0x2460ca(0x5df)](_0x42fe13);}if(_0x40e7e7[_0x2460ca(0x621)]&&this[_0x2460ca(0x5d6)](_0x40e7e7[_0x2460ca(0x621)]),_0x40e7e7[_0x2460ca(0x866)]&&this[_0x2460ca(0x568)]['authState'][_0x2460ca(0x293)](),_0x40e7e7[_0x2460ca(0x737)]){let _0x86f134=_0x40e7e7[_0x2460ca(0x737)];this[_0x2460ca(0x216)][_0x2460ca(0x737)](_0x86f134,_0x385631);}if(_0x40e7e7['messages.upsert']){let _0x454783=_0x40e7e7['messages.upsert'];this[_0x2460ca(0x216)]['messages.upsert'](_0x454783,_0x385631);}if(_0x40e7e7[_0x2460ca(0x6be)]){let _0x85e53c=_0x40e7e7['messages.update'];this[_0x2460ca(0x216)]['messages.update'](_0x85e53c,_0x385631);}if(_0x40e7e7[_0x2460ca(0x2af)]){let _0x1e0a05=_0x40e7e7[_0x2460ca(0x2af)];if(this[_0x2460ca(0x35f)]?.[_0x2460ca(0x735)]&&_0x1e0a05['id']['includes'](_0x2460ca(0x342)))return;this[_0x2460ca(0x463)](_0x2460ca(0x2af),_0x1e0a05);}if(_0x40e7e7[_0x2460ca(0x5ab)]){let _0x596294=_0x40e7e7[_0x2460ca(0x5ab)];this[_0x2460ca(0x30a)][_0x2460ca(0x5ab)](_0x596294);}if(_0x40e7e7[_0x2460ca(0x723)]){let _0x49e34c=_0x40e7e7[_0x2460ca(0x723)];this[_0x2460ca(0x30a)][_0x2460ca(0x723)](_0x49e34c);}if(_0x40e7e7[_0x2460ca(0x6f1)]){let _0x27fd76=_0x40e7e7[_0x2460ca(0x6f1)];this[_0x2460ca(0x30a)]['group-participants.update'](_0x27fd76);}if(_0x40e7e7[_0x2460ca(0x6e0)]){let _0x219609=_0x40e7e7['chats.upsert'];this[_0x2460ca(0x3b2)][_0x2460ca(0x6e0)](_0x219609,_0x385631);}if(_0x40e7e7['chats.update']){let _0x57ea63=_0x40e7e7[_0x2460ca(0x4fb)];this[_0x2460ca(0x3b2)]['chats.update'](_0x57ea63,_0x385631);}if(_0x40e7e7[_0x2460ca(0x2fb)]){let _0x3820f1=_0x40e7e7[_0x2460ca(0x2fb)];this[_0x2460ca(0x3b2)][_0x2460ca(0x2fb)](_0x3820f1);}if(_0x40e7e7[_0x2460ca(0x713)]){let _0x285951=_0x40e7e7['contacts.upsert'];this[_0x2460ca(0x27a)][_0x2460ca(0x713)](_0x285951,_0x385631);}if(_0x40e7e7[_0x2460ca(0x34f)]){let _0x37d9c9=_0x40e7e7[_0x2460ca(0x34f)];this[_0x2460ca(0x27a)][_0x2460ca(0x34f)](_0x37d9c9,_0x385631);}}});}async[a0_0x4bc873(0x1e5)](_0x5c86ca,_0x2d5cbb){const _0x5cd14b=a0_0x4bc873;if(_0x2d5cbb>=0xa){console[_0x5cd14b(0x47a)](this[_0x5cd14b(0x616)]+'\x20('+this['instance']['wuid']+_0x5cd14b(0x8f8)),delete Lt[_0x5c86ca['key']['id']];return;}try{console[_0x5cd14b(0x47a)](this[_0x5cd14b(0x616)]+'\x20('+this['instance'][_0x5cd14b(0x72d)]+_0x5cd14b(0x936)+(_0x2d5cbb+0x1)),await this[_0x5cd14b(0x877)]['sendMessageAck'](JSON[_0x5cd14b(0x7ed)](_0x5c86ca[_0x5cd14b(0x515)][0x1],w[_0x5cd14b(0x5c1)]['reviver'])),console[_0x5cd14b(0x47a)](_0x5cd14b(0x388));}catch(_0x908a9e){console[_0x5cd14b(0x47a)](this[_0x5cd14b(0x616)]+'\x20('+this['instance'][_0x5cd14b(0x72d)]+_0x5cd14b(0x67d)+_0x908a9e),setTimeout(()=>this[_0x5cd14b(0x1e5)](_0x5c86ca,_0x2d5cbb+0x1),Math[_0x5cd14b(0x404)](0x2,_0x2d5cbb)*0x3e8);}}async[a0_0x4bc873(0x438)](_0x2ab414){const _0x35d5e9=a0_0x4bc873;let _0x1ae9f5=_0x2ab414[_0x35d5e9(0x678)][_0x35d5e9(0x8d4)]['endsWith']('@g.us'),_0x4fa581;if(_0x2ab414[_0x35d5e9(0x678)][_0x35d5e9(0x45e)])_0x4fa581=this[_0x35d5e9(0x568)]['profilePictureUrl'];else{let _0x1a998b=_0x1ae9f5?_0x2ab414['key'][_0x35d5e9(0x406)]:_0x2ab414[_0x35d5e9(0x678)][_0x35d5e9(0x8d4)];_0x4fa581=(await this[_0x35d5e9(0x69c)](_0x1a998b,_0x2ab414['pushName'],!0x1))[_0x35d5e9(0x3eb)][_0x35d5e9(0x807)];}let _0x1e317b={'_id':_0x2ab414[_0x35d5e9(0x678)]['id'],'key':_0x2ab414['key'],'isGroup':_0x1ae9f5,'profilePictureUrl':_0x4fa581,'pushName':_0x2ab414[_0x35d5e9(0x687)],'message':{'text':_0x35d5e9(0x45f)},'messageType':_0x35d5e9(0x47a),'message_normalized':{'key':_0x2ab414['key'],'pushName':_0x2ab414['pushName'],'messageTimestamp':_0x2ab414[_0x35d5e9(0x717)],'source':(0x0,w[_0x35d5e9(0x785)])(_0x2ab414[_0x35d5e9(0x678)]['id']),'text':_0x35d5e9(0x45f)},'messageTimestamp':_0x2ab414[_0x35d5e9(0x717)],'owner':this[_0x35d5e9(0x568)]['wuid'],'source':(0x0,w['getDevice'])(_0x2ab414['key']['id'])};this[_0x35d5e9(0x563)]['error'](this['instanceName']+'\x20('+this['instance'][_0x35d5e9(0x72d)]+_0x35d5e9(0x6c0)+(_0x1e317b[_0x35d5e9(0x678)]?.['fromMe']?_0x35d5e9(0x48d):_0x35d5e9(0x382))+'\x20['+_0x1e317b[_0x35d5e9(0x678)]?.[_0x35d5e9(0x8d4)][_0x35d5e9(0x242)](_0x35d5e9(0x8b3),'')+']\x20('+_0x1e317b[_0x35d5e9(0x5fe)]+')'),_0x1e317b[_0x35d5e9(0x537)]?.[_0x35d5e9(0x23c)]&&this[_0x35d5e9(0x563)][_0x35d5e9(0x47a)](_0x2ab414[_0x35d5e9(0x678)]['id']+':\x20'+_0x1e317b[_0x35d5e9(0x537)]?.['text']),await this[_0x35d5e9(0x6c6)][_0x35d5e9(0x805)][_0x35d5e9(0x246)]([_0x1e317b],this[_0x35d5e9(0x568)][_0x35d5e9(0x72d)]),await this[_0x35d5e9(0x6c6)][_0x35d5e9(0x29f)][_0x35d5e9(0x246)]([_0x1e317b]),this['sendDataWebhook'](_0x35d5e9(0x278),_0x1e317b),F(this['instanceName'],_0x35d5e9(0x88d),{'message':_0x1e317b});}[a0_0x4bc873(0x238)](_0x2e008f){return new Promise(_0x23e7a4=>setTimeout(_0x23e7a4,_0x2e008f));}['formatBRNumber'](_0x9e54da){const _0x5aa34b=a0_0x4bc873;_0x9e54da=_0x9e54da[_0x5aa34b(0x242)](/\D/g,'');let _0x2d71c2=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x5aa34b(0x8c5)](_0x9e54da);if(_0x2d71c2&&_0x2d71c2[0x1]==='55'){let _0x4b3817=_0x2d71c2[0x2],_0x5beb09=_0x2d71c2[0x3],_0x27e609=_0x2d71c2[0x4];if(parseInt(_0x4b3817)>=0x1f&&_0x5beb09==='9')return _0x2d71c2[0x1]+_0x4b3817+_0x27e609;}return _0x9e54da;}[a0_0x4bc873(0x764)](_0x3fea48){const _0x169695=a0_0x4bc873;return _0x3fea48[_0x169695(0x5f5)]('@g.us')||_0x3fea48['includes']('@s.whatsapp.net')||_0x3fea48[_0x169695(0x5f5)](_0x169695(0x6c9))?_0x3fea48:(_0x3fea48=_0x3fea48?.[_0x169695(0x242)](/\s/g,'')[_0x169695(0x242)](/\+/g,'')[_0x169695(0x242)](/\(/g,'')[_0x169695(0x242)](/\)/g,'')[_0x169695(0x51b)](/\:/)[0x0][_0x169695(0x51b)]('@')[0x0],_0x3fea48[_0x169695(0x825)]>=0x12?(_0x3fea48=_0x3fea48[_0x169695(0x242)](/[^\d-]/g,''),_0x3fea48+_0x169695(0x342)):(_0x3fea48=_0x3fea48[_0x169695(0x242)](/\D/g,''),_0x3fea48+_0x169695(0x8b3)));}async[a0_0x4bc873(0x27d)](_0x1fe54e){const _0x5f2ccd=a0_0x4bc873;let _0x2833eb=(await this['whatsappNumber']({'numbers':[_0x1fe54e[_0x5f2ccd(0x8e3)]]}))[0x0];if(!_0x2833eb[_0x5f2ccd(0x6d7)]&&!(0x0,w[_0x5f2ccd(0x225)])(_0x2833eb['jid'])&&!_0x2833eb[_0x5f2ccd(0x82f)][_0x5f2ccd(0x5f5)](_0x5f2ccd(0x6c9)))throw new m(_0x2833eb);let _0x328c50=_0x2833eb['jid'];try{return await this['client'][_0x5f2ccd(0x7b9)](_0x328c50),await this[_0x5f2ccd(0x877)][_0x5f2ccd(0x71d)](_0x1fe54e[_0x5f2ccd(0x689)],_0x328c50),{'status':0xc8,'presence':_0x1fe54e[_0x5f2ccd(0x689)]};}catch(_0x230685){let _0x2b2253=_0x5f2ccd(0x5bd),_0x4f8913=_0x230685 instanceof Error?_0x230685[_0x5f2ccd(0x805)]:typeof _0x230685=='object'?JSON['stringify'](_0x230685):_0x230685,_0x4aee97=_0x2b2253+':\x20'+_0x4f8913;throw this[_0x5f2ccd(0x563)]['error'](this[_0x5f2ccd(0x616)]+'\x20('+this[_0x5f2ccd(0x568)]['wuid']+_0x5f2ccd(0x6c0)+_0x4aee97),new m(_0x4aee97);}}async[a0_0x4bc873(0x69c)](_0x557fc5,_0x3c5db8,_0x4b71b5,_0x34627a=!0x0){const _0x1b5c6e=a0_0x4bc873;let _0x28b8c1=await this[_0x1b5c6e(0x6c6)][_0x1b5c6e(0x813)][_0x1b5c6e(0x6e7)]({'where':{'_id':_0x557fc5}});if(!_0x28b8c1&&!_0x34627a)return;let _0x508295={'lastUpdate':Date[_0x1b5c6e(0x3bd)]()};if(_0x4b71b5||!_0x28b8c1?.['lastUpdate']||Date['now']()-_0x28b8c1[_0x1b5c6e(0x82a)]>0x18*0x3c*0x3c*0x3e8)try{let _0x57b7f7=(await this[_0x1b5c6e(0x828)](_0x557fc5))[_0x1b5c6e(0x72a)];_0x508295[_0x1b5c6e(0x807)]=_0x57b7f7;}catch(_0x1594f8){let _0x428476='Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20findAndUpdateCacheContact',_0x22412a=_0x1594f8 instanceof Error?_0x1594f8['message']:typeof _0x1594f8==_0x1b5c6e(0x801)?JSON[_0x1b5c6e(0x573)](_0x1594f8):_0x1594f8,_0xaa051a=_0x428476+':\x20'+_0x22412a;throw this['logger']['error'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x1b5c6e(0x6c0)+_0xaa051a),new m(_0xaa051a);}return _0x3c5db8&&_0x28b8c1?.[_0x1b5c6e(0x60f)]!==_0x3c5db8&&(_0x508295[_0x1b5c6e(0x60f)]=_0x3c5db8),Object[_0x1b5c6e(0x419)](_0x508295)[_0x1b5c6e(0x825)]>0x1&&(_0x28b8c1?await this[_0x1b5c6e(0x6c6)]['cacheContact'][_0x1b5c6e(0x275)]({'where':{'_id':_0x557fc5}},_0x508295):await this[_0x1b5c6e(0x6c6)][_0x1b5c6e(0x813)]['insert']([{'_id':_0x557fc5,..._0x508295}]),_0x28b8c1={..._0x28b8c1,..._0x508295}),{'cachedContact':_0x28b8c1};}async[a0_0x4bc873(0x828)](_0x4616cf){const _0x35168c=a0_0x4bc873;let _0x43ba83=this['createJid'](_0x4616cf);try{return{'wuid':_0x43ba83,'profilePictureUrl':await this[_0x35168c(0x877)][_0x35168c(0x72a)](_0x43ba83,_0x35168c(0x8ed))};}catch{return{'wuid':_0x43ba83,'profilePictureUrl':null};}}async[a0_0x4bc873(0x728)](_0x1e5867,_0x1f4f51,_0x9a42ee){const _0xb00b65=a0_0x4bc873;let _0x1591f4;try{let _0x5962bb=(await this['whatsappNumber']({'numbers':[_0x1e5867]}))?.['shift']();if(!_0x5962bb[_0xb00b65(0x6d7)]&&!(0x0,w['isJidGroup'])(_0x5962bb['jid'])&&!_0x5962bb[_0xb00b65(0x82f)][_0xb00b65(0x5f5)](_0xb00b65(0x6c9)))throw new m(_0x5962bb);_0x1591f4=_0x5962bb['jid'];}catch(_0x589ba2){_0x1591f4=_0x1e5867,this['logger'][_0xb00b65(0x5b6)](this[_0xb00b65(0x616)]+'\x20('+this['instance'][_0xb00b65(0x72d)]+_0xb00b65(0x66e)+_0x589ba2['message']),this[_0xb00b65(0x563)][_0xb00b65(0x5b6)](this[_0xb00b65(0x616)]+'\x20('+this['instance'][_0xb00b65(0x72d)]+_0xb00b65(0x859)+_0x1591f4);}try{if(_0x1591f4||(_0x1591f4=_0x1e5867,this[_0xb00b65(0x563)][_0xb00b65(0x5b6)](this['instanceName']+'\x20('+this[_0xb00b65(0x568)][_0xb00b65(0x72d)]+_0xb00b65(0x887)+_0x1591f4)),_0x9a42ee||(_0x9a42ee={}),_0x9a42ee?.[_0xb00b65(0x3c9)]){await this[_0xb00b65(0x877)][_0xb00b65(0x7b9)](_0x1591f4),await this['client'][_0xb00b65(0x71d)](_0x9a42ee?.[_0xb00b65(0x689)]??_0xb00b65(0x937),_0x1591f4);let _0x551293=Math[_0xb00b65(0x66d)](_0x9a42ee[_0xb00b65(0x3c9)],0x2710);await(0x0,w['delay'])(_0x551293),await this[_0xb00b65(0x877)][_0xb00b65(0x71d)](_0xb00b65(0x78c),_0x1591f4);}let _0x55f8d4=_0x9a42ee?.['linkPreview']!=!0x1?void 0x0:!0x1,_0x5da60c;if(_0x9a42ee?.[_0xb00b65(0x392)]){let _0x1615c2=_0x9a42ee?.[_0xb00b65(0x392)],_0x5c4435=_0x1615c2?.[_0xb00b65(0x805)]?_0x1615c2:await this[_0xb00b65(0x649)](_0x1615c2['key'],!0x0);_0x5c4435&&(_0x5da60c=_0x5c4435);}let _0x222805=await this['repository'][_0xb00b65(0x69a)]['findOne']({'where':{'_id':_0x1591f4}},this[_0xb00b65(0x568)][_0xb00b65(0x72d)]),_0x53d786,_0x2dd8e2=null;if((0x0,w[_0xb00b65(0x225)])(_0x1591f4))try{if(_0x2dd8e2=_0x222805[_0xb00b65(0x3d8)],!_0x2dd8e2)throw new U(_0xb00b65(0x7db));if(!_0x2dd8e2[_0xb00b65(0x6ae)])throw new m(_0xb00b65(0x305));_0x9a42ee?.[_0xb00b65(0x7e9)]&&(_0x9a42ee[_0xb00b65(0x7e9)]?.['everyOne']?_0x53d786=_0x2dd8e2[_0xb00b65(0x5ea)]['map'](_0x2a2316=>_0x2a2316['id']):_0x9a42ee[_0xb00b65(0x7e9)]?.[_0xb00b65(0x2b5)]?.[_0xb00b65(0x825)]&&(_0x53d786=_0x9a42ee[_0xb00b65(0x7e9)]['mentioned'][_0xb00b65(0x347)](_0x3ce111=>{const _0x4d0681=_0xb00b65;let _0x4021d3=this[_0x4d0681(0x764)](_0x3ce111);return(0x0,w[_0x4d0681(0x225)])(_0x4021d3)?null:_0x4021d3;})));}catch(_0x2284f8){throw _0x2284f8 instanceof U?new U('Grupo\x20no\x20encontrado'):_0x2284f8 instanceof m?new m(_0xb00b65(0x305)):new Error(_0xb00b65(0x2f7));}let _0x236b45=await((async()=>{const _0x30f2c8=_0xb00b65;let _0x3182a6={'quoted':_0x5da60c,'ephemeralExpiration':_0x222805?.[_0x30f2c8(0x85f)]??0x0};if(!_0x1f4f51[_0x30f2c8(0x77a)]&&!_0x1f4f51[_0x30f2c8(0x2c9)]&&!_0x1f4f51[_0x30f2c8(0x7f0)]&&!_0x1f4f51['conversation']&&_0x1591f4!==_0x30f2c8(0x672)&&_0x1f4f51[_0x30f2c8(0x7f8)])return await this['client'][_0x30f2c8(0x799)](_0x1591f4,{'react':{'text':_0x1f4f51[_0x30f2c8(0x7f8)][_0x30f2c8(0x23c)],'key':_0x1f4f51['reactionMessage'][_0x30f2c8(0x678)]}},_0x3182a6);if(_0x1f4f51[_0x30f2c8(0x702)]){let _0x21717f=_0x1f4f51[_0x30f2c8(0x702)];return _0x9a42ee?.[_0x30f2c8(0x22d)]&&(_0x21717f=await this[_0x30f2c8(0x4ab)](_0x21717f,_0x1591f4)),await this[_0x30f2c8(0x877)][_0x30f2c8(0x799)](_0x1591f4,{'text':_0x21717f,'mentions':_0x53d786,'linkPreview':_0x55f8d4},_0x3182a6);}return!_0x1f4f51[_0x30f2c8(0x77a)]&&!_0x1f4f51[_0x30f2c8(0x2c9)]&&_0x1591f4!=_0x30f2c8(0x672)?await this[_0x30f2c8(0x877)]['sendMessage'](_0x1591f4,{'forward':{'key':{'remoteJid':this['instance'][_0x30f2c8(0x72d)],'fromMe':!0x0},'message':_0x1f4f51},'mentions':_0x53d786},_0x3182a6):_0x1591f4===_0x30f2c8(0x672)?await this[_0x30f2c8(0x877)]['sendMessage'](_0x1591f4,_0x1f4f51[_0x30f2c8(0x4ed)][_0x30f2c8(0x565)],{'backgroundColor':_0x1f4f51['status'][_0x30f2c8(0x446)][_0x30f2c8(0x4d5)],'font':_0x1f4f51['status'][_0x30f2c8(0x446)][_0x30f2c8(0x484)],'statusJidList':_0x1f4f51['status'][_0x30f2c8(0x446)]['statusJidList']}):await this[_0x30f2c8(0x877)][_0x30f2c8(0x799)](_0x1591f4,_0x1f4f51,_0x3182a6);})()),_0xcab0c2=(0x0,w[_0xb00b65(0x2b3)])(_0x236b45[_0xb00b65(0x805)]),_0x412687=(0x0,w['getContentType'])(_0xcab0c2),{message_normalized:_0x40847e}=this['normalizeMessage'](_0xcab0c2,_0x412687,null),_0x1b976c={'_id':_0x236b45[_0xb00b65(0x678)]['id'],'key':_0x236b45[_0xb00b65(0x678)],'pushName':_0x236b45['pushName'],'isGroup':_0x236b45[_0xb00b65(0x678)]['remoteJid'][_0xb00b65(0x6c8)](_0xb00b65(0x342)),'profilePictureUrl':this['instance'][_0xb00b65(0x72a)],'message':_0xcab0c2,'messageType':_0x412687,'message_normalized':{'key':_0x236b45['key'],'pushName':_0x236b45[_0xb00b65(0x687)],'messageTimestamp':_0x236b45[_0xb00b65(0x717)]&&_0x236b45[_0xb00b65(0x717)][_0xb00b65(0x529)]()[_0xb00b65(0x825)]<0xd?_0x236b45[_0xb00b65(0x717)]*0x3e8:_0x236b45[_0xb00b65(0x717)]||null,'source':(0x0,w['getDevice'])(_0x236b45['key']['id']),..._0x40847e},'messageTimestamp':_0x236b45[_0xb00b65(0x717)]&&_0x236b45[_0xb00b65(0x717)]['toString']()[_0xb00b65(0x825)]<0xd?_0x236b45[_0xb00b65(0x717)]*0x3e8:_0x236b45[_0xb00b65(0x717)]||null,'owner':this[_0xb00b65(0x568)][_0xb00b65(0x72d)],'source':(0x0,w['getDevice'])(_0x236b45[_0xb00b65(0x678)]['id'])};return this[_0xb00b65(0x563)][_0xb00b65(0x5b6)](this[_0xb00b65(0x616)]+'\x20('+this[_0xb00b65(0x568)][_0xb00b65(0x72d)]+'):\x20enviado\x20para\x20['+_0x1b976c[_0xb00b65(0x678)]?.[_0xb00b65(0x8d4)]['replace'](_0xb00b65(0x8b3),'')+']\x20('+_0x1b976c[_0xb00b65(0x5fe)]+')'),_0x1b976c[_0xb00b65(0x537)]?.[_0xb00b65(0x23c)]&&this[_0xb00b65(0x563)]['warn'](_0x1b976c[_0xb00b65(0x537)]?.[_0xb00b65(0x23c)]),this[_0xb00b65(0x463)](_0xb00b65(0x906),_0x1b976c),F(this[_0xb00b65(0x616)],'messages',{'message':_0x1b976c}),this['updateChatWithMessage'](this['configService']['get'](_0xb00b65(0x5b9)),_0x1b976c,_0xb00b65(0x58f),_0x222805),await this['repository'][_0xb00b65(0x805)][_0xb00b65(0x246)]([_0x1b976c],this[_0xb00b65(0x568)][_0xb00b65(0x72d)]),_0x236b45;}catch(_0xd6a581){let _0x486bb4=_0xb00b65(0x8b6)+_0x1591f4,_0x256ba9=_0xd6a581 instanceof Error?_0xd6a581['message']:typeof _0xd6a581==_0xb00b65(0x801)?JSON[_0xb00b65(0x573)](_0xd6a581):_0xd6a581,_0x4016de=_0x486bb4+':\x20'+_0x256ba9;throw this[_0xb00b65(0x563)]['error'](this[_0xb00b65(0x616)]+'\x20('+this[_0xb00b65(0x568)]['wuid']+_0xb00b65(0x6c0)+_0x4016de),new m(_0x4016de);}}async['sendMessageWithTypingButtons'](_0x518cfe,_0x382c72,_0x35d1a0){const _0x3521e2=a0_0x4bc873;let _0x256bef=this[_0x3521e2(0x764)](_0x518cfe),_0x2cd16c=(await this[_0x3521e2(0x71c)]({'numbers':[_0x256bef]}))[0x0];if(!_0x2cd16c[_0x3521e2(0x6d7)]&&!(0x0,w[_0x3521e2(0x225)])(_0x2cd16c[_0x3521e2(0x82f)]))throw new m(_0x2cd16c);let _0x317276=(0x0,w[_0x3521e2(0x225)])(_0x256bef)?_0x256bef:_0x2cd16c[_0x3521e2(0x82f)];if((0x0,w[_0x3521e2(0x225)])(_0x317276))try{await this['client'][_0x3521e2(0x67c)](_0x317276);}catch{throw new m(_0x3521e2(0x467));}try{_0x35d1a0?.['delay']&&(await this[_0x3521e2(0x877)]['presenceSubscribe'](_0x317276),await this[_0x3521e2(0x877)][_0x3521e2(0x71d)](_0x35d1a0?.['presence']??_0x3521e2(0x937),_0x256bef),await(0x0,w[_0x3521e2(0x3c9)])(_0x35d1a0[_0x3521e2(0x3c9)]),await this[_0x3521e2(0x877)][_0x3521e2(0x71d)](_0x3521e2(0x78c),_0x317276));let _0x2e6702=await((async()=>{const _0x324740=_0x3521e2;let _0xf266b,_0x150a5b='3EB0'+(0x0,ne[_0x324740(0x80d)])(0x12)[_0x324740(0x529)](_0x324740(0x78b))[_0x324740(0x212)](),_0x4f3075=(0x0,w[_0x324740(0x3f8)])(_0x317276,_0x382c72,{'timestamp':new Date(),'userJid':this['instance'][_0x324740(0x72d)],'messageId':_0x150a5b,'quoted':_0xf266b}),_0x5912a2=await this['client']['relayMessage'](_0x317276,_0x4f3075[_0x324740(0x805)],{'messageId':_0x150a5b});_0x4f3075[_0x324740(0x678)]={'id':_0x5912a2,'remoteJid':_0x256bef,'participant':(0x0,w[_0x324740(0x474)])(_0x256bef)?void 0x0:_0x256bef,'fromMe':!0x0};for(let [_0x41ff81,_0xb5d7a2]of Object[_0x324740(0x52e)](_0x4f3075))(!_0xb5d7a2||Array['isArray'](_0xb5d7a2)&&_0xb5d7a2[_0x324740(0x825)]===0x0)&&delete _0x4f3075[_0x41ff81];return this[_0x324740(0x877)]['ev'][_0x324740(0x433)](_0x324740(0x278),{'messages':[_0x4f3075],'type':_0x324740(0x89d)}),_0x4f3075;})()),_0x5aac6c=await this[_0x3521e2(0x6c6)]['chat'][_0x3521e2(0x6e7)]({'where':{'_id':_0x317276}},this['instance'][_0x3521e2(0x72d)]),_0x319588=(0x0,w[_0x3521e2(0x2b3)])(_0x2e6702['message']),_0x2cf16b=(0x0,w[_0x3521e2(0x932)])(_0x319588),{message_normalized:_0x179d32}=this['normalizeMessage'](_0x319588,_0x2cf16b,null),_0x1e84bf={'_id':_0x2e6702['key']['id'],'key':_0x2e6702[_0x3521e2(0x678)],'pushName':_0x2e6702['pushName'],'isGroup':_0x2e6702[_0x3521e2(0x678)]['remoteJid']['endsWith'](_0x3521e2(0x342)),'profilePictureUrl':this['instance'][_0x3521e2(0x72a)],'message':_0x319588,'messageType':_0x2cf16b,'message_normalized':{'key':_0x2e6702[_0x3521e2(0x678)],'pushName':_0x2e6702[_0x3521e2(0x687)],'messageTimestamp':_0x2e6702[_0x3521e2(0x717)]&&_0x2e6702[_0x3521e2(0x717)]['toString']()[_0x3521e2(0x825)]<0xd?_0x2e6702[_0x3521e2(0x717)]*0x3e8:_0x2e6702[_0x3521e2(0x717)]||null,'source':(0x0,w[_0x3521e2(0x785)])(_0x2e6702[_0x3521e2(0x678)]['id']),..._0x179d32},'messageTimestamp':_0x2e6702[_0x3521e2(0x717)]&&_0x2e6702['messageTimestamp']['toString']()['length']<0xd?_0x2e6702['messageTimestamp']*0x3e8:_0x2e6702['messageTimestamp']||null,'owner':this[_0x3521e2(0x568)]['wuid'],'source':(0x0,w[_0x3521e2(0x785)])(_0x2e6702[_0x3521e2(0x678)]['id'])};return this[_0x3521e2(0x563)][_0x3521e2(0x5b6)](this[_0x3521e2(0x616)]+'\x20('+this[_0x3521e2(0x568)]['wuid']+_0x3521e2(0x74b)+_0x1e84bf['key']?.[_0x3521e2(0x8d4)][_0x3521e2(0x242)](_0x3521e2(0x8b3),'')+_0x3521e2(0x258)+_0x1e84bf[_0x3521e2(0x5fe)]+')'),_0x1e84bf[_0x3521e2(0x537)]?.[_0x3521e2(0x23c)]&&this[_0x3521e2(0x563)][_0x3521e2(0x5b6)](_0x1e84bf['message_normalized']?.[_0x3521e2(0x23c)]),this[_0x3521e2(0x463)](_0x3521e2(0x906),_0x1e84bf),F(this[_0x3521e2(0x616)],_0x3521e2(0x88d),{'message':_0x1e84bf}),this[_0x3521e2(0x389)](this[_0x3521e2(0x251)][_0x3521e2(0x62f)](_0x3521e2(0x5b9)),_0x1e84bf,'SEND_MESSAGE',_0x5aac6c),await this['repository']['message'][_0x3521e2(0x246)]([_0x1e84bf],this[_0x3521e2(0x568)][_0x3521e2(0x72d)]),_0x2e6702;}catch(_0x5a0e59){throw this['logger'][_0x3521e2(0x47a)](_0x5a0e59),new m(_0x5a0e59[_0x3521e2(0x529)]());}}get[a0_0x4bc873(0x7c3)](){const _0x37a3a5=a0_0x4bc873;return this[_0x37a3a5(0x676)];}async[a0_0x4bc873(0x7a0)](_0x26533e){const _0x4bd433=a0_0x4bc873;return await this['sendMessageWithTyping'](_0x26533e[_0x4bd433(0x8e3)],{'conversation':_0x26533e['textMessage'][_0x4bd433(0x23c)]},_0x26533e?.[_0x4bd433(0x466)]);}async['formatStatusMessage'](_0x1a5e69){const _0x29884b=a0_0x4bc873;if(!_0x1a5e69[_0x29884b(0x8c8)])throw new m(_0x29884b(0x371));if(!_0x1a5e69[_0x29884b(0x565)])throw new m(_0x29884b(0x744));if(_0x1a5e69['allContacts']){let _0x27e868=await this[_0x29884b(0x6c6)][_0x29884b(0x7fe)]['find']({'where':{}},this[_0x29884b(0x568)]['wuid']);if(!_0x27e868[_0x29884b(0x825)])throw new m('Contacts\x20not\x20found');_0x1a5e69['statusJidList']=_0x27e868[_0x29884b(0x411)](_0x40c60b=>_0x40c60b[_0x29884b(0x687)])[_0x29884b(0x347)](_0x176118=>_0x176118[_0x29884b(0x618)]);}if(!_0x1a5e69[_0x29884b(0x6d3)]?.[_0x29884b(0x825)]&&!_0x1a5e69[_0x29884b(0x73c)])throw new m(_0x29884b(0x3d7));if(_0x1a5e69[_0x29884b(0x8c8)]===_0x29884b(0x23c)){if(!_0x1a5e69['backgroundColor'])throw new m('Background\x20color\x20is\x20required');if(!_0x1a5e69[_0x29884b(0x484)])throw new m(_0x29884b(0x2d7));return{'content':{'text':_0x1a5e69[_0x29884b(0x565)]},'option':{'backgroundColor':_0x1a5e69[_0x29884b(0x4d5)],'font':_0x1a5e69[_0x29884b(0x484)],'statusJidList':_0x1a5e69[_0x29884b(0x6d3)]}};}if(_0x1a5e69['type']===_0x29884b(0x8ed))return{'content':{'image':{'url':_0x1a5e69[_0x29884b(0x565)]},'caption':_0x1a5e69[_0x29884b(0x52b)]},'option':{'statusJidList':_0x1a5e69[_0x29884b(0x6d3)]}};if(_0x1a5e69[_0x29884b(0x8c8)]===_0x29884b(0x721))return{'content':{'video':{'url':_0x1a5e69[_0x29884b(0x565)]},'caption':_0x1a5e69[_0x29884b(0x52b)]},'option':{'statusJidList':_0x1a5e69[_0x29884b(0x6d3)]}};if(_0x1a5e69[_0x29884b(0x8c8)]==='audio'){this[_0x29884b(0x563)][_0x29884b(0x377)](this[_0x29884b(0x616)]+'\x20('+this[_0x29884b(0x568)]['wuid']+'):Type\x20defined\x20as\x20audio'),this['logger'][_0x29884b(0x377)](this['instanceName']+'\x20('+this[_0x29884b(0x568)][_0x29884b(0x72d)]+_0x29884b(0x931));let _0x5e2038=await this[_0x29884b(0x88e)](_0x1a5e69[_0x29884b(0x565)]);if(typeof _0x5e2038=='string'){this[_0x29884b(0x563)]['verbose'](this['instanceName']+'\x20('+this[_0x29884b(0x568)]['wuid']+_0x29884b(0x313));let _0x513a09=k[_0x29884b(0x500)](_0x5e2038)[_0x29884b(0x529)](_0x29884b(0x663));return{'content':{'audio':Buffer[_0x29884b(0x25a)](_0x513a09,_0x29884b(0x663)),'ptt':!0x0,'mimetype':_0x29884b(0x480)},'option':{'statusJidList':_0x1a5e69['statusJidList']}};}else throw new x(_0x5e2038);}throw new m(_0x29884b(0x297));}async['statusMessage'](_0x25575d){const _0x3b41e5=a0_0x4bc873;return await this['sendMessageWithTyping'](_0x3b41e5(0x672),{'status':await this['formatStatusMessage'](_0x25575d[_0x3b41e5(0x910)])});}async[a0_0x4bc873(0x5ba)](_0x11b99f){const _0x34f5db=a0_0x4bc873;try{let _0x5be7f9=await(0x0,w[_0x34f5db(0x564)])({[_0x11b99f['mediatype']]:(0x0,J[_0x34f5db(0x5a7)])(_0x11b99f['media'])?{'url':_0x11b99f['media']}:Buffer['from'](_0x11b99f['media'],_0x34f5db(0x663))},{'upload':this['client'][_0x34f5db(0x82c)]}),_0x12c997=_0x11b99f[_0x34f5db(0x6aa)]+_0x34f5db(0x50f);if(_0x11b99f[_0x34f5db(0x6aa)]===_0x34f5db(0x8df)&&!_0x11b99f[_0x34f5db(0x36d)]){let _0xc1ac01=new RegExp(/.*\/(.+?)\./)[_0x34f5db(0x8c5)](_0x11b99f[_0x34f5db(0x8c3)]);_0x11b99f['fileName']=_0xc1ac01?_0xc1ac01[0x1]:null;}let _0x20460a;return(0x0,J['isURL'])(_0x11b99f[_0x34f5db(0x8c3)])?_0x20460a=(await Q[_0x34f5db(0x323)]['get'](_0x11b99f[_0x34f5db(0x8c3)],{'responseType':_0x34f5db(0x6a6)}))['headers'][_0x34f5db(0x3c2)]:_0x20460a=(0x0,Oi['getMIMEType'])(_0x11b99f[_0x34f5db(0x36d)]),_0x5be7f9[_0x12c997]['caption']=_0x11b99f?.[_0x34f5db(0x52b)],_0x5be7f9[_0x12c997][_0x34f5db(0x77f)]=_0x20460a,_0x5be7f9[_0x12c997]['fileName']=_0x11b99f['fileName'],_0x11b99f[_0x34f5db(0x6aa)]===_0x34f5db(0x721)&&(_0x5be7f9[_0x12c997]['jpegThumbnail']=Uint8Array['from']((0x0,Le[_0x34f5db(0x500)])((0x0,j[_0x34f5db(0x6a2)])(process[_0x34f5db(0x33f)](),'video-cover.png'))),_0x5be7f9[_0x12c997][_0x34f5db(0x726)]=!0x1),(0x0,w['generateWAMessageFromContent'])('',{[_0x12c997]:{..._0x5be7f9[_0x12c997]}},{'userJid':this[_0x34f5db(0x568)]['wuid']});}catch(_0x3701e8){let _0xbfdcb7=_0x34f5db(0x7bb),_0xe17eb5=_0x3701e8 instanceof Error?_0x3701e8[_0x34f5db(0x805)]:typeof _0x3701e8==_0x34f5db(0x801)?JSON[_0x34f5db(0x573)](_0x3701e8):_0x3701e8,_0x3179b2=_0xbfdcb7+':\x20'+_0xe17eb5;throw this[_0x34f5db(0x563)][_0x34f5db(0x47a)](this[_0x34f5db(0x616)]+'\x20('+this[_0x34f5db(0x568)][_0x34f5db(0x72d)]+_0x34f5db(0x6c0)+_0x3179b2),new x(_0x3179b2);}}async[a0_0x4bc873(0x817)](_0x12945d){const _0x12b74e=a0_0x4bc873;let _0x212c8d=await this[_0x12b74e(0x5ba)](_0x12945d[_0x12b74e(0x817)]);return await this[_0x12b74e(0x728)](_0x12945d[_0x12b74e(0x8e3)],{..._0x212c8d[_0x12b74e(0x805)]},_0x12945d?.['options']);}async[a0_0x4bc873(0x901)](_0xd3fdc2,_0x3314be){const _0x3fbc5d=a0_0x4bc873;try{this['logger']['verbose'](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)]['wuid']+_0x3fbc5d(0x79d));let _0x18ea5a,_0x4fa54a=_0x3314be+'-'+new Date()[_0x3fbc5d(0x505)]();this[_0x3fbc5d(0x563)][_0x3fbc5d(0x377)](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)]['wuid']+_0x3fbc5d(0x64d)+_0x4fa54a);let _0x5e2349=''+(0x0,j[_0x3fbc5d(0x6a2)])(this[_0x3fbc5d(0x614)],_0x4fa54a+'.webp');if(this[_0x3fbc5d(0x563)][_0x3fbc5d(0x377)](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)][_0x3fbc5d(0x72d)]+_0x3fbc5d(0x280)+_0x5e2349),(0x0,J[_0x3fbc5d(0x6cd)])(_0xd3fdc2)){this['logger'][_0x3fbc5d(0x377)](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)][_0x3fbc5d(0x72d)]+'):Image\x20is\x20base64');let _0x5cd4db=_0xd3fdc2[_0x3fbc5d(0x242)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x2d2808=Buffer['from'](_0x5cd4db,_0x3fbc5d(0x663));_0x18ea5a=''+(0x0,j[_0x3fbc5d(0x6a2)])(this['storePath'],_0x3fbc5d(0x481)+_0x4fa54a+_0x3fbc5d(0x920)),this['logger'][_0x3fbc5d(0x377)](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)][_0x3fbc5d(0x72d)]+_0x3fbc5d(0x6f9)+_0x18ea5a),await(0x0,Ut[_0x3fbc5d(0x323)])(_0x2d2808)[_0x3fbc5d(0x660)](_0x18ea5a),this[_0x3fbc5d(0x563)][_0x3fbc5d(0x377)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x3fbc5d(0x7f4));}else{this[_0x3fbc5d(0x563)][_0x3fbc5d(0x377)](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)]['wuid']+_0x3fbc5d(0x7c4));let _0x341047=new Date()['getTime'](),_0x3176b5=_0xd3fdc2+'?timestamp='+_0x341047;this[_0x3fbc5d(0x563)][_0x3fbc5d(0x377)](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)][_0x3fbc5d(0x72d)]+'):including\x20timestamp\x20in\x20url:\x20'+_0x3176b5);let _0x666e4b=await Q[_0x3fbc5d(0x323)][_0x3fbc5d(0x62f)](_0x3176b5,{'responseType':'arraybuffer'});this[_0x3fbc5d(0x563)][_0x3fbc5d(0x377)](this['instanceName']+'\x20('+this[_0x3fbc5d(0x568)][_0x3fbc5d(0x72d)]+_0x3fbc5d(0x245));let _0x5c432b=Buffer['from'](_0x666e4b[_0x3fbc5d(0x301)],'binary');_0x18ea5a=''+(0x0,j[_0x3fbc5d(0x6a2)])(this[_0x3fbc5d(0x614)],_0x3fbc5d(0x481)+_0x4fa54a+_0x3fbc5d(0x920)),this[_0x3fbc5d(0x563)][_0x3fbc5d(0x377)](this['instanceName']+'\x20('+this['instance']['wuid']+'):Image\x20path:\x20'+_0x18ea5a),await(0x0,Ut[_0x3fbc5d(0x323)])(_0x5c432b)[_0x3fbc5d(0x660)](_0x18ea5a),this[_0x3fbc5d(0x563)][_0x3fbc5d(0x377)](this['instanceName']+'\x20('+this[_0x3fbc5d(0x568)][_0x3fbc5d(0x72d)]+_0x3fbc5d(0x7f4));}return await(0x0,Ut[_0x3fbc5d(0x323)])(_0x18ea5a)[_0x3fbc5d(0x62a)]()[_0x3fbc5d(0x660)](_0x5e2349),this[_0x3fbc5d(0x563)][_0x3fbc5d(0x377)](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)]['wuid']+_0x3fbc5d(0x921)),k[_0x3fbc5d(0x5db)](_0x18ea5a),this['logger'][_0x3fbc5d(0x377)](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)][_0x3fbc5d(0x72d)]+_0x3fbc5d(0x5d3)),_0x5e2349;}catch(_0x2d7875){let _0x30d63a=_0x3fbc5d(0x350),_0x172c4d=_0x2d7875 instanceof Error?_0x2d7875[_0x3fbc5d(0x805)]:typeof _0x2d7875=='object'?JSON[_0x3fbc5d(0x573)](_0x2d7875):_0x2d7875,_0x436d9e=_0x30d63a+':\x20'+_0x172c4d;this[_0x3fbc5d(0x563)][_0x3fbc5d(0x47a)](this[_0x3fbc5d(0x616)]+'\x20('+this[_0x3fbc5d(0x568)][_0x3fbc5d(0x72d)]+_0x3fbc5d(0x6c0)+_0x436d9e);}}async[a0_0x4bc873(0x6d5)](_0x3189a4){const _0x357e13=a0_0x4bc873;let _0x4457df=await this['convertToWebP'](_0x3189a4[_0x357e13(0x49a)][_0x357e13(0x8ed)],_0x3189a4[_0x357e13(0x8e3)]),_0x12ac37=await this[_0x357e13(0x728)](_0x3189a4[_0x357e13(0x8e3)],{'sticker':{'url':_0x4457df}},_0x3189a4?.[_0x357e13(0x466)]);return k['unlinkSync'](_0x4457df),this[_0x357e13(0x563)][_0x357e13(0x377)](this[_0x357e13(0x616)]+'\x20('+this[_0x357e13(0x568)]['wuid']+_0x357e13(0x907)),_0x12ac37;}async[a0_0x4bc873(0x4d9)](_0x201547){const _0x273f0c=a0_0x4bc873;if(this['logger'][_0x273f0c(0x377)](this['instanceName']+'\x20('+this[_0x273f0c(0x568)]['wuid']+_0x273f0c(0x523)),!_0x201547[_0x273f0c(0x466)]?.[_0x273f0c(0x4e4)]&&_0x201547[_0x273f0c(0x466)]?.[_0x273f0c(0x4e4)]!==!0x1&&(_0x201547[_0x273f0c(0x466)][_0x273f0c(0x4e4)]=!0x0),_0x201547[_0x273f0c(0x466)]?.[_0x273f0c(0x4e4)]){let _0x3b9f01=await this[_0x273f0c(0x88e)](_0x201547[_0x273f0c(0x93e)][_0x273f0c(0x77a)]);if(typeof _0x3b9f01==_0x273f0c(0x792)){let _0x69dde=k['readFileSync'](_0x3b9f01)[_0x273f0c(0x529)](_0x273f0c(0x663));return this['sendMessageWithTyping'](_0x201547[_0x273f0c(0x8e3)],{'audio':Buffer[_0x273f0c(0x25a)](_0x69dde,_0x273f0c(0x663)),'ptt':!0x0,'mimetype':_0x273f0c(0x572)},{'presence':_0x273f0c(0x3a1),'delay':_0x201547?.[_0x273f0c(0x466)]?.[_0x273f0c(0x3c9)]});}else throw new x(_0x3b9f01);}return await this['sendMessageWithTyping'](_0x201547[_0x273f0c(0x8e3)],{'audio':(0x0,J[_0x273f0c(0x5a7)])(_0x201547[_0x273f0c(0x93e)][_0x273f0c(0x77a)])?{'url':_0x201547[_0x273f0c(0x93e)][_0x273f0c(0x77a)]}:Buffer[_0x273f0c(0x25a)](_0x201547[_0x273f0c(0x93e)][_0x273f0c(0x77a)],_0x273f0c(0x663)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x273f0c(0x3a1),'delay':_0x201547?.['options']?.[_0x273f0c(0x3c9)]});}async[a0_0x4bc873(0x88e)](_0x3bc1ee){const _0x2b5c6e=a0_0x4bc873;this[_0x2b5c6e(0x563)]['verbose'](this[_0x2b5c6e(0x616)]+'\x20('+this[_0x2b5c6e(0x568)][_0x2b5c6e(0x72d)]+_0x2b5c6e(0x931));let _0x24b859=(0x0,J[_0x2b5c6e(0x5a7)])(_0x3bc1ee)?(0x0,ne[_0x2b5c6e(0x778)])(_0x2b5c6e(0x230))[_0x2b5c6e(0x275)](_0x3bc1ee)[_0x2b5c6e(0x2ba)](_0x2b5c6e(0x78b)):(0x0,ne[_0x2b5c6e(0x778)])('sha256')['update'](_0x3bc1ee)['digest'](_0x2b5c6e(0x78b)),_0x35b1ae=''+(0x0,j[_0x2b5c6e(0x6a2)])(this[_0x2b5c6e(0x614)],_0x24b859+_0x2b5c6e(0x4c9));if(k['existsSync'](_0x35b1ae))return this[_0x2b5c6e(0x563)][_0x2b5c6e(0x377)](this[_0x2b5c6e(0x616)]+'\x20('+this['instance'][_0x2b5c6e(0x72d)]+_0x2b5c6e(0x3fd)),_0x35b1ae;let _0x541798=''+(0x0,j['join'])(this[_0x2b5c6e(0x614)],'temp-'+(0x0,Y['v4'])()+_0x2b5c6e(0x8d1));if((0x0,J['isURL'])(_0x3bc1ee)){let _0x55a0a6=new Date()[_0x2b5c6e(0x505)](),_0x4e9d18=_0x3bc1ee+_0x2b5c6e(0x73f)+_0x55a0a6,_0x4791ea=await Q['default'][_0x2b5c6e(0x62f)](_0x4e9d18,{'responseType':_0x2b5c6e(0x6a6)});k[_0x2b5c6e(0x4bb)](_0x541798,_0x4791ea[_0x2b5c6e(0x301)]);}else{let _0x3c4444=Buffer['from'](_0x3bc1ee,'base64');k[_0x2b5c6e(0x4bb)](_0x541798,_0x3c4444);}return new Promise((_0x5a43ce,_0x327603)=>{const _0x8b25a7=_0x2b5c6e;(0x0,Fe['exec'])(Ps['default']['path']+_0x8b25a7(0x35e)+_0x541798+_0x8b25a7(0x909)+_0x35b1ae+_0x8b25a7(0x540),_0x3a33b9=>{const _0x232a39=_0x8b25a7;if(k[_0x232a39(0x5db)](_0x541798),_0x3a33b9){this['logger'][_0x232a39(0x377)](this['instanceName']+'\x20('+this[_0x232a39(0x568)][_0x232a39(0x72d)]+_0x232a39(0x476)),_0x327603(_0x3a33b9);return;}this[_0x232a39(0x563)]['verbose'](this['instanceName']+'\x20('+this[_0x232a39(0x568)][_0x232a39(0x72d)]+'):Audio\x20converted\x20and\x20stored\x20in\x20cache'),_0x5a43ce(_0x35b1ae);});});}async[a0_0x4bc873(0x91c)](_0xa51eeb){const _0x1e55ce=a0_0x4bc873;this['logger'][_0x1e55ce(0x377)](this['instanceName']+'\x20('+this[_0x1e55ce(0x568)][_0x1e55ce(0x72d)]+_0x1e55ce(0x931));let _0x3649ed=(0x0,ne['createHash'])(_0x1e55ce(0x230))[_0x1e55ce(0x275)](_0xa51eeb)['digest'](_0x1e55ce(0x78b)),_0x4ccfdb=''+(0x0,j['join'])(this[_0x1e55ce(0x614)],_0x3649ed+_0x1e55ce(0x8d1));if(k[_0x1e55ce(0x59a)](_0x4ccfdb))return this['logger']['verbose'](this[_0x1e55ce(0x616)]+'\x20('+this[_0x1e55ce(0x568)]['wuid']+_0x1e55ce(0x3fd)),j[_0x1e55ce(0x323)][_0x1e55ce(0x2c7)](_0x4ccfdb);let _0x4c2b38=''+(0x0,j[_0x1e55ce(0x6a2)])(this[_0x1e55ce(0x614)],_0x1e55ce(0x481)+_0x3649ed+_0x1e55ce(0x4c9));if((0x0,J[_0x1e55ce(0x5a7)])(_0xa51eeb)){let _0x4c6895=new Date()[_0x1e55ce(0x505)](),_0x3fd28a=_0xa51eeb+_0x1e55ce(0x73f)+_0x4c6895,_0x5e7fec=await Q[_0x1e55ce(0x323)][_0x1e55ce(0x62f)](_0x3fd28a,{'responseType':_0x1e55ce(0x6a6)});k[_0x1e55ce(0x4bb)](_0x4c2b38,_0x5e7fec[_0x1e55ce(0x301)]);}else{let _0x288731=Buffer['from'](_0xa51eeb,'base64');k[_0x1e55ce(0x4bb)](_0x4c2b38,_0x288731);}return new Promise((_0x42c273,_0x3c87b5)=>{const _0x4794b5=_0x1e55ce;(0x0,Fe['exec'])(Ps[_0x4794b5(0x323)]['path']+_0x4794b5(0x35e)+_0x4c2b38+_0x4794b5(0x2f5)+_0x4ccfdb+'\x20-y',_0xe2bf52=>{const _0x5e1bdc=_0x4794b5;if(k[_0x5e1bdc(0x5db)](_0x4c2b38),_0xe2bf52){this['logger'][_0x5e1bdc(0x377)](this['instanceName']+'\x20('+this[_0x5e1bdc(0x568)][_0x5e1bdc(0x72d)]+_0x5e1bdc(0x476)),_0x3c87b5(_0xe2bf52);return;}this[_0x5e1bdc(0x563)][_0x5e1bdc(0x377)](this[_0x5e1bdc(0x616)]+'\x20('+this[_0x5e1bdc(0x568)]['wuid']+_0x5e1bdc(0x422)),_0x42c273(j['default']['basename'](_0x4ccfdb));});});}async[a0_0x4bc873(0x710)](_0x49af7f){const _0x3ae73f=a0_0x4bc873;console[_0x3ae73f(0x6d2)]('[service]\x20request\x20received\x20in\x20sendButtons',_0x49af7f);let _0x268ee2;try{_0x49af7f[_0x3ae73f(0x710)]?.[_0x3ae73f(0x5f9)]&&(_0x268ee2=await this['prepareMediaMessage']({'mediatype':_0x3ae73f(0x8ed),'media':_0x49af7f[_0x3ae73f(0x710)][_0x3ae73f(0x5f9)]}));}catch(_0x255292){throw console[_0x3ae73f(0x47a)](_0x3ae73f(0x637),_0x255292),new Error('Failed\x20to\x20prepare\x20media\x20message');}try{let _0x41638a={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x3ae73f(0x46e)},'footer':{'text':_0x3ae73f(0x42e)},'header':((()=>{const _0x4bb6e9=_0x3ae73f;if(_0x268ee2?.[_0x4bb6e9(0x805)]?.['imageMessage'])return{'hasMediaAttachment':!!_0x268ee2[_0x4bb6e9(0x805)]['imageMessage'],'imageMessage':_0x268ee2['message'][_0x4bb6e9(0x1ef)]};})()),'nativeFlowMessage':{'buttons':[{'name':_0x3ae73f(0x62c),'buttonParamsJson':JSON[_0x3ae73f(0x573)]({'display_text':_0x3ae73f(0x6f6),'id':'1'})},{'name':'quick_reply','buttonParamsJson':JSON['stringify']({'display_text':'Boto\x202','id':'2'})}],'messageParamsJson':JSON[_0x3ae73f(0x573)]({'from':_0x3ae73f(0x3f6),'templateId':_0x3ae73f(0x7c0)+(0x0,ne[_0x3ae73f(0x80d)])(0x12)[_0x3ae73f(0x529)]('hex')[_0x3ae73f(0x212)]()})}}}}};return await this[_0x3ae73f(0x752)](_0x49af7f[_0x3ae73f(0x8e3)],_0x41638a,_0x49af7f?.[_0x3ae73f(0x466)]);}catch(_0x5702c4){throw console[_0x3ae73f(0x47a)](_0x3ae73f(0x346),_0x5702c4),new Error(_0x3ae73f(0x835));}}async[a0_0x4bc873(0x771)](_0x2302d3){const _0x26f961=a0_0x4bc873;return await this['sendMessageWithTyping'](_0x2302d3[_0x26f961(0x8e3)],{'locationMessage':{'degreesLatitude':_0x2302d3['locationMessage'][_0x26f961(0x551)],'degreesLongitude':_0x2302d3['locationMessage'][_0x26f961(0x38d)],'name':_0x2302d3[_0x26f961(0x771)]?.[_0x26f961(0x60f)],'address':_0x2302d3[_0x26f961(0x771)]?.['address']}},_0x2302d3?.[_0x26f961(0x466)]);}async[a0_0x4bc873(0x688)](_0x141d06){const _0x21ff8b=a0_0x4bc873;let _0x3f2011={},_0x117232=async _0x34ea20=>{const _0x2a5aaa=a0_0x59bb;let _0x439b90=_0x2a5aaa(0x6a4)+_0x34ea20[_0x2a5aaa(0x75d)]+_0x2a5aaa(0x3d0)+_0x34ea20['fullName']+'\x0a';_0x34ea20['organization']&&(_0x439b90+=_0x2a5aaa(0x1e6)+_0x34ea20[_0x2a5aaa(0x6dc)]+';\x0a'),_0x34ea20['email']&&(_0x439b90+=_0x2a5aaa(0x312)+_0x34ea20['email']+'\x0a'),_0x34ea20[_0x2a5aaa(0x8ab)]&&(_0x439b90+=_0x2a5aaa(0x88f)+_0x34ea20[_0x2a5aaa(0x8ab)]+'\x0a');let _0x16981a='',_0x53cae1=0x1;if(_0x34ea20[_0x2a5aaa(0x282)]){let _0x1cef58=_0x34ea20['phoneNumber']['split']('|');for(let _0x5377f7 of _0x1cef58){let _0x47a501=await this[_0x2a5aaa(0x71c)]({'numbers':[_0x5377f7]}),_0x27bf5f=(_0x47a501[_0x2a5aaa(0x825)]>0x0?_0x47a501[0x0][_0x2a5aaa(0x82f)]:this[_0x2a5aaa(0x764)](_0x5377f7))[_0x2a5aaa(0x242)](_0x2a5aaa(0x8b3),'');_0x16981a+=_0x2a5aaa(0x7df)+_0x53cae1+_0x2a5aaa(0x559)+_0x27bf5f+':'+_0x5377f7+_0x2a5aaa(0x81a)+_0x53cae1+_0x2a5aaa(0x4d0),_0x53cae1++;}}return _0x439b90+=_0x16981a+_0x2a5aaa(0x374),_0x439b90;};return _0x141d06['contactMessage'][_0x21ff8b(0x825)]===0x1?_0x3f2011[_0x21ff8b(0x688)]={'displayName':_0x141d06[_0x21ff8b(0x688)][0x0]['fullName'],'vcard':await _0x117232(_0x141d06[_0x21ff8b(0x688)][0x0])}:_0x3f2011[_0x21ff8b(0x38f)]={'displayName':_0x141d06[_0x21ff8b(0x688)]['length']+'\x20contacts','contacts':await Promise[_0x21ff8b(0x844)](_0x141d06[_0x21ff8b(0x688)][_0x21ff8b(0x347)](async _0xb31eb8=>({'displayName':_0xb31eb8[_0x21ff8b(0x75d)],'vcard':await _0x117232(_0xb31eb8)})))},await this[_0x21ff8b(0x728)](_0x141d06[_0x21ff8b(0x8e3)],{..._0x3f2011},_0x141d06?.['options']);}async[a0_0x4bc873(0x7f8)](_0x1e0964){const _0x2fc132=a0_0x4bc873;return await this[_0x2fc132(0x728)](_0x1e0964['reactionMessage'][_0x2fc132(0x678)][_0x2fc132(0x8d4)],{'reactionMessage':{'key':_0x1e0964[_0x2fc132(0x7f8)]['key'],'text':_0x1e0964[_0x2fc132(0x7f8)][_0x2fc132(0x8ba)]}});}async[a0_0x4bc873(0x71c)](_0x218917){const _0x440d86=a0_0x4bc873;let _0x2adf20=[];for await(let _0xb6957d of _0x218917['numbers']){let _0x542571=this['createJid'](_0xb6957d),_0x564a1e=!0x1;try{if((0x0,w[_0x440d86(0x225)])(_0x542571)){let _0x56166f=(await this[_0x440d86(0x6c6)][_0x440d86(0x69a)][_0x440d86(0x6e7)]({'where':{'_id':_0x542571}},this['instance'][_0x440d86(0x72d)]))[_0x440d86(0x3d8)];_0x56166f?(_0x564a1e=!0x0,_0x2adf20[_0x440d86(0x7f1)](new ue(_0x56166f['id'],_0x564a1e,_0x56166f?.[_0x440d86(0x72e)]))):(_0x56166f=await this['findGroup']({'groupJid':_0x542571},'inner'),_0x2adf20[_0x440d86(0x7f1)](new ue(_0x56166f['id'],!!_0x56166f?.['id'],_0x56166f?.[_0x440d86(0x72e)])));}else{if(_0x542571[_0x440d86(0x5f5)]('@broadcast'))_0x2adf20['push'](new ue(_0x542571,!0x0));else{let _0x168647=(await this['client']['onWhatsApp'](_0x542571))[0x0];_0x2adf20[_0x440d86(0x7f1)](new ue(_0x168647[_0x440d86(0x82f)],_0x168647['exists']));}}}catch{(0x0,w[_0x440d86(0x225)])(_0x542571)||await this['deleteImportedChat'](_0x542571),_0x2adf20['push'](new ue(_0xb6957d,!0x1));}}return _0x2adf20;}async[a0_0x4bc873(0x7e2)](_0x46e9d6){const _0x52c4a9=a0_0x4bc873;try{await this['repository'][_0x52c4a9(0x69a)][_0x52c4a9(0x6e7)]({'where':{'_id':_0x46e9d6,'imported':!0x0}},this['instance'][_0x52c4a9(0x72d)])&&(await this[_0x52c4a9(0x6c6)][_0x52c4a9(0x69a)]['deleteChat'](_0x46e9d6,this[_0x52c4a9(0x568)]['wuid']),this[_0x52c4a9(0x563)][_0x52c4a9(0x636)]('Chat\x20com\x20ID\x20'+_0x46e9d6+_0x52c4a9(0x4c8)));}catch(_0x2fd9cd){let _0x3b74d5=_0x52c4a9(0x696),_0x532ca3=_0x2fd9cd instanceof Error?_0x2fd9cd[_0x52c4a9(0x805)]:typeof _0x2fd9cd==_0x52c4a9(0x801)?JSON[_0x52c4a9(0x573)](_0x2fd9cd):_0x2fd9cd,_0x53d6f3=_0x3b74d5+':\x20'+_0x532ca3;this['logger'][_0x52c4a9(0x47a)](this[_0x52c4a9(0x616)]+'\x20('+this['instance'][_0x52c4a9(0x72d)]+_0x52c4a9(0x6c0)+_0x53d6f3);}}async[a0_0x4bc873(0x325)](_0x41778c){const _0x31f52f=a0_0x4bc873;try{let _0x38a00f=_0x41778c['readMessages'][_0x31f52f(0x411)](_0xf4c058=>(0x0,w[_0x31f52f(0x225)])(_0xf4c058[_0x31f52f(0x8d4)])||(0x0,w[_0x31f52f(0x474)])(_0xf4c058['remoteJid']))[_0x31f52f(0x347)](_0x2957a6=>({'remoteJid':_0x2957a6['remoteJid'],'fromMe':_0x2957a6[_0x31f52f(0x45e)],'id':_0x2957a6['id']}));await this[_0x31f52f(0x877)][_0x31f52f(0x596)](_0x38a00f);let _0x48633d=_0x38a00f['map'](_0x171c93=>this[_0x31f52f(0x296)](_0x171c93,{'status':_0x31f52f(0x599),'owner':this[_0x31f52f(0x568)][_0x31f52f(0x72d)]})),_0xfaec06=_0x38a00f[_0x31f52f(0x347)](_0xdbb882=>this['repository']['chat'][_0x31f52f(0x7eb)]({'where':{'_id':_0xdbb882[_0x31f52f(0x8d4)]}},{'unreadcount':0x0},this['instance']['wuid'])),[_0x119d6b,_0x28afb8]=await Promise['all']([Promise[_0x31f52f(0x844)](_0x48633d),Promise[_0x31f52f(0x844)](_0xfaec06)]);return _0x28afb8[_0x31f52f(0x411)](_0x170156=>_0x170156!==null)['forEach'](_0x24e541=>{const _0x1ba043=_0x31f52f;F(this[_0x1ba043(0x616)],'chats',{'chat':_0x24e541});}),{'message':_0x31f52f(0x74f),'read':_0x31f52f(0x22b)};}catch(_0x273792){let _0x21b22a=_0x31f52f(0x648),_0x332cec=_0x273792 instanceof Error?_0x273792[_0x31f52f(0x805)]:typeof _0x273792==_0x31f52f(0x801)?JSON[_0x31f52f(0x573)](_0x273792):_0x273792,_0x38409a=_0x21b22a+':\x20'+_0x332cec;throw this[_0x31f52f(0x563)][_0x31f52f(0x47a)](this[_0x31f52f(0x616)]+'\x20('+this['instance'][_0x31f52f(0x72d)]+_0x31f52f(0x6c0)+_0x38409a),new x(_0x38409a);}}async[a0_0x4bc873(0x23a)](_0x549816){const _0xc0076c=a0_0x4bc873;let _0x267891={'where':{'key':{'remoteJid':_0x549816}},'limit':0x1},_0x47d299=await this[_0xc0076c(0x3ae)](_0x267891);return _0x47d299||(this[_0xc0076c(0x563)][_0xc0076c(0x47a)](_0xc0076c(0x375)+_0x549816),null);}async[a0_0x4bc873(0x8fd)](_0x50af98){const _0x3482ad=a0_0x4bc873;this['logger'][_0x3482ad(0x377)](this[_0x3482ad(0x616)]+'\x20('+this[_0x3482ad(0x568)]['wuid']+_0x3482ad(0x387));try{let _0xd2b7ed=_0x50af98[_0x3482ad(0x4a7)],_0x36a579=_0x50af98[_0x3482ad(0x69a)];if(!_0xd2b7ed&&_0x36a579?_0xd2b7ed=await this[_0x3482ad(0x23a)](_0x36a579):(_0xd2b7ed=_0x50af98['lastMessage'],_0xd2b7ed['messageTimestamp']=_0xd2b7ed?.[_0x3482ad(0x717)]??Date['now'](),_0x36a579=_0xd2b7ed?.[_0x3482ad(0x678)]?.[_0x3482ad(0x8d4)]),!_0xd2b7ed||Object[_0x3482ad(0x419)](_0xd2b7ed)[_0x3482ad(0x825)]===0x0)throw new U(_0x3482ad(0x462));this['logger'][_0x3482ad(0x377)](this[_0x3482ad(0x616)]+'\x20('+this[_0x3482ad(0x568)][_0x3482ad(0x72d)]+'):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x36a579);try{await this[_0x3482ad(0x877)]['chatModify']({'archive':_0x50af98[_0x3482ad(0x63e)],'lastMessages':[_0xd2b7ed]},this['createJid'](_0x36a579));}catch(_0x8e99fe){let _0x272044=_0x3482ad(0x4fd)+_0x36a579,_0x77bf16=_0x8e99fe instanceof Error?_0x8e99fe[_0x3482ad(0x805)]:typeof _0x8e99fe=='object'?JSON[_0x3482ad(0x573)](_0x8e99fe):_0x8e99fe,_0x537d4f=_0x272044+':\x20'+_0x77bf16;this[_0x3482ad(0x563)]['error'](this['instanceName']+'\x20('+this[_0x3482ad(0x568)][_0x3482ad(0x72d)]+'):\x20'+_0x537d4f);}this[_0x3482ad(0x563)][_0x3482ad(0x377)](this[_0x3482ad(0x616)]+'\x20('+this[_0x3482ad(0x568)][_0x3482ad(0x72d)]+_0x3482ad(0x4a4)+_0x36a579);let _0x4e3025=await this['repository'][_0x3482ad(0x69a)]['updateOne']({'where':{'_id':_0xd2b7ed?.[_0x3482ad(0x678)]?.[_0x3482ad(0x8d4)]}},{'archived':_0x50af98[_0x3482ad(0x63e)]},this['instance']['wuid']);return _0x4e3025?(this[_0x3482ad(0x563)][_0x3482ad(0x377)](this[_0x3482ad(0x616)]+'\x20('+this[_0x3482ad(0x568)]['wuid']+_0x3482ad(0x49e)+JSON[_0x3482ad(0x573)](_0x4e3025)),F(this[_0x3482ad(0x616)],_0x3482ad(0x85a),{'chat':_0x4e3025})):this['logger'][_0x3482ad(0x47a)](this[_0x3482ad(0x616)]+'\x20('+this['instance']['wuid']+'):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x36a579),{'chatId':_0x36a579,'archived':_0x50af98[_0x3482ad(0x63e)]};}catch(_0x41b93e){let _0x382093=_0x3482ad(0x28c),_0x3dc841=_0x41b93e instanceof Error?_0x41b93e['message']:typeof _0x41b93e=='object'?JSON['stringify'](_0x41b93e):_0x41b93e,_0x2bfffa=_0x382093+':\x20'+_0x3dc841;throw this['logger'][_0x3482ad(0x47a)](this[_0x3482ad(0x616)]+'\x20('+this[_0x3482ad(0x568)][_0x3482ad(0x72d)]+_0x3482ad(0x6c0)+_0x2bfffa),new x(_0x2bfffa);}}async[a0_0x4bc873(0x708)](_0x4142e2){const _0x5ca843=a0_0x4bc873;this[_0x5ca843(0x563)][_0x5ca843(0x377)](this[_0x5ca843(0x616)]+'\x20('+this[_0x5ca843(0x568)][_0x5ca843(0x72d)]+_0x5ca843(0x5b0));try{let _0x587e29=await this[_0x5ca843(0x23a)](_0x4142e2);if(!_0x587e29||Object[_0x5ca843(0x419)](_0x587e29)['length']===0x0)throw new U('Last\x20message\x20not\x20found');let _0x478cd0=_0x587e29[0x0];this[_0x5ca843(0x563)][_0x5ca843(0x377)](this[_0x5ca843(0x616)]+'\x20('+this['instance']['wuid']+'):Delete\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x4142e2);try{await this['client'][_0x5ca843(0x8dc)]({'delete':!0x0,'lastMessages':[{'key':_0x478cd0[_0x5ca843(0x678)],'messageTimestamp':_0x478cd0[_0x5ca843(0x717)]}]},this['createJid'](_0x4142e2));}catch(_0x2d0d20){this[_0x5ca843(0x563)][_0x5ca843(0x47a)]('Error\x20in\x20chatModify\x20for\x20number\x20'+_0x4142e2+':\x20'+_0x2d0d20[_0x5ca843(0x529)]());}this['logger'][_0x5ca843(0x377)](this[_0x5ca843(0x616)]+'\x20('+this['instance'][_0x5ca843(0x72d)]+_0x5ca843(0x4a4)+_0x4142e2);return;}catch(_0x55fa70){throw this[_0x5ca843(0x563)][_0x5ca843(0x47a)](this['instanceName']+'\x20('+this[_0x5ca843(0x568)]['wuid']+_0x5ca843(0x570)+_0x55fa70[_0x5ca843(0x529)]()),new x({'archived':!0x1,'message':[_0x5ca843(0x465),_0x55fa70['toString']()]});}}async[a0_0x4bc873(0x556)](_0xc372b5){const _0x189569=a0_0x4bc873;try{let _0x3f2ff9=await this['client'][_0x189569(0x799)](_0xc372b5[_0x189569(0x8d4)],{'delete':_0xc372b5});try{let _0xdd5d95=await this['updateMessage'](_0xc372b5,{'status':_0x189569(0x379),'owner':this['instance']['wuid']});this[_0x189569(0x563)]['verbose'](this[_0x189569(0x616)]+'\x20('+this['instance'][_0x189569(0x72d)]+_0x189569(0x574)+_0xdd5d95);}catch(_0xeaa3b7){this[_0x189569(0x563)][_0x189569(0x47a)](_0x189569(0x7e1)+_0xeaa3b7);}return _0x3f2ff9;}catch(_0x518fd1){throw new x(_0x189569(0x2f3),_0x518fd1?.['toString']());}}async[a0_0x4bc873(0x28d)](_0x44ff44){const _0x20a282=a0_0x4bc873;try{let _0x2ba5a6=_0x44ff44?.['message']?_0x44ff44:await this[_0x20a282(0x649)](_0x44ff44['key'],!0x0);for(let _0x2c1ccc of Na)_0x2ba5a6[_0x20a282(0x805)][_0x2c1ccc]&&(_0x2ba5a6[_0x20a282(0x805)]=_0x2ba5a6[_0x20a282(0x805)][_0x2c1ccc][_0x20a282(0x805)]);let _0x402443,_0x18c983;for(let _0x2836e5 of va)if(_0x402443=_0x2ba5a6['message'][_0x2836e5],_0x402443){_0x18c983=_0x2836e5;break;}if(!_0x402443)throw _0x20a282(0x6c5);typeof _0x402443['mediaKey']==_0x20a282(0x801)&&(_0x2ba5a6['message']=JSON[_0x20a282(0x7ed)](JSON[_0x20a282(0x573)](_0x2ba5a6['message'])));let _0x5e844c=await(0x0,w['downloadMediaMessage'])({'key':_0x2ba5a6?.['key'],'message':_0x2ba5a6?.['message']},_0x20a282(0x919),{},{'logger':(0x0,Ft[_0x20a282(0x323)])({'level':_0x20a282(0x5ac)}),'reuploadRequest':this[_0x20a282(0x877)][_0x20a282(0x215)]});if(!(_0x5e844c instanceof Buffer))throw new Error('Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.');let _0x33f9be=this[_0x20a282(0x251)][_0x20a282(0x62f)](_0x20a282(0x5b9)),_0x1cf4b9,_0x3c0980;if(_0x402443['fileName'])_0x1cf4b9=_0x402443[_0x20a282(0x36d)];else{let _0x1b84cf=_0x402443[_0x20a282(0x77f)]?.[_0x20a282(0x60b)](/\/(\w+)/),_0x5ce97d=_0x1b84cf?_0x1b84cf[0x1]:null;if(!_0x5ce97d)throw new Error(_0x20a282(0x4bc));_0x1cf4b9=(0x0,Y['v4'])()+'.'+_0x5ce97d;}_0x18c983===_0x20a282(0x93e)?_0x3c0980='/media/'+await this[_0x20a282(0x91c)](_0x5e844c[_0x20a282(0x529)]('base64')):(await this[_0x20a282(0x48f)](_0x5e844c,_0x1cf4b9),_0x3c0980=_0x20a282(0x5b5)+_0x1cf4b9);let _0x1b3ab2=this[_0x20a282(0x251)][_0x20a282(0x62f)]('SERVER')[_0x20a282(0x893)];if(!_0x1b3ab2){let _0x2ee387=this[_0x20a282(0x251)]['get'](_0x20a282(0x727));_0x1b3ab2=_0x20a282(0x317)+(_0x2ee387&&_0x2ee387[_0x20a282(0x5d5)]['split']('/')[0x4]);}_0x3c0980=''+_0x1b3ab2+_0x3c0980;let _0xda4ea6=0xc*0x3c*0x3c*0x3e8,_0x5eedb4={'where':{'_id':_0x2ba5a6[_0x20a282(0x678)]['id']}},_0x33cabb={'message_normalized.fileUrl':_0x3c0980,'message_normalized.expires_fileUrl':Date[_0x20a282(0x3bd)]()+_0xda4ea6};try{let _0x7a96e5=await this[_0x20a282(0x6c6)][_0x20a282(0x805)]['update'](_0x5eedb4,_0x33cabb,this[_0x20a282(0x568)][_0x20a282(0x72d)]);_0x7a96e5&&F(this[_0x20a282(0x616)],_0x20a282(0x88d),{'message':_0x7a96e5});}catch(_0x21980a){let _0x395163=_0x20a282(0x7dd),_0x12cb69=_0x21980a instanceof Error?_0x21980a[_0x20a282(0x805)]:typeof _0x21980a==_0x20a282(0x801)?JSON[_0x20a282(0x573)](_0x21980a):_0x21980a,_0x2ce39b=_0x395163+':\x20'+_0x12cb69;this[_0x20a282(0x563)][_0x20a282(0x47a)](this[_0x20a282(0x616)]+'\x20('+this[_0x20a282(0x568)]['wuid']+_0x20a282(0x6c0)+_0x2ce39b);}return{'mediaType':_0x18c983,'fileName':_0x402443[_0x20a282(0x36d)],'caption':_0x402443[_0x20a282(0x52b)],'size':{'fileLength':_0x402443[_0x20a282(0x5e2)],'height':_0x402443[_0x20a282(0x3a2)],'width':_0x402443[_0x20a282(0x1fb)]},'mimetype':_0x402443[_0x20a282(0x77f)],'base64':_0x5e844c[_0x20a282(0x529)](_0x20a282(0x663)),'fileUrl':_0x3c0980,'expires_fileUrl':Date['now']()+_0xda4ea6};}catch(_0x4ef7a2){let _0x4178ad=_0x20a282(0x8b0),_0x2f0931=_0x4ef7a2 instanceof Error?_0x4ef7a2[_0x20a282(0x805)]:typeof _0x4ef7a2==_0x20a282(0x801)?JSON[_0x20a282(0x573)](_0x4ef7a2):_0x4ef7a2,_0x24c95a=_0x4178ad+':\x20'+_0x2f0931;throw this[_0x20a282(0x563)]['error'](this['instanceName']+'\x20('+this[_0x20a282(0x568)][_0x20a282(0x72d)]+'):\x20'+_0x24c95a),new m(_0x24c95a);}}async['saveMediaToFile'](_0xab8550,_0xd5856e){const _0x6e29d0=a0_0x4bc873;let _0x1b4657=j['default']['join'](__dirname,_0x6e29d0(0x6ad));k[_0x6e29d0(0x59a)](_0x1b4657)||k[_0x6e29d0(0x5ed)](_0x1b4657,{'recursive':!0x0});let _0x22fc73=j['default'][_0x6e29d0(0x6a2)](_0x1b4657,_0xd5856e);return new Promise((_0x18652f,_0x16d646)=>{const _0x23e9e5=_0x6e29d0;k[_0x23e9e5(0x65c)](_0x22fc73,_0xab8550,_0x4dbae9=>{const _0x84f727=_0x23e9e5;_0x4dbae9?(this[_0x84f727(0x563)][_0x84f727(0x47a)]('Error\x20writing\x20file:\x20'+(_0x4dbae9 instanceof Error?_0x4dbae9['message']:JSON[_0x84f727(0x573)](_0x4dbae9,null,0x2))),_0x16d646(_0x4dbae9)):(this[_0x84f727(0x563)][_0x84f727(0x6d2)](_0x84f727(0x7e0)+_0x22fc73),_0x18652f(_0x22fc73));});});}async[a0_0x4bc873(0x3f5)](_0xe5d0ca){const _0x2ba655=a0_0x4bc873;return await this[_0x2ba655(0x6c6)]['contact']['find'](_0xe5d0ca,this[_0x2ba655(0x568)]['wuid']);}async[a0_0x4bc873(0x7b3)](){const _0x1958b5=a0_0x4bc873;return await this[_0x1958b5(0x6c6)][_0x1958b5(0x442)]['find']({'where':{}},this[_0x1958b5(0x568)]['wuid']);}async[a0_0x4bc873(0x3ae)](_0x44000a){const _0x5cf42e=a0_0x4bc873;return await this[_0x5cf42e(0x6c6)][_0x5cf42e(0x805)][_0x5cf42e(0x8aa)](_0x44000a,this[_0x5cf42e(0x568)]['wuid']);}async[a0_0x4bc873(0x7f2)](){const _0x671f25=a0_0x4bc873;return this['repository'][_0x671f25(0x69a)]['removeUnusedChatFields'](this[_0x671f25(0x568)][_0x671f25(0x72d)]),this['repository'][_0x671f25(0x69a)][_0x671f25(0x5a1)](this[_0x671f25(0x568)][_0x671f25(0x72d)]),this[_0x671f25(0x6c6)]['chat'][_0x671f25(0x7c8)](this[_0x671f25(0x568)][_0x671f25(0x72d)]),this[_0x671f25(0x6c6)][_0x671f25(0x69a)]['updateMissingCustomFields'](this[_0x671f25(0x568)][_0x671f25(0x72d)]),await this[_0x671f25(0x6c6)][_0x671f25(0x69a)][_0x671f25(0x8aa)]({'where':{}},this[_0x671f25(0x568)][_0x671f25(0x72d)]);}async['importChatsAntigo'](_0x24bca3){const _0x18d8d2=a0_0x4bc873;try{if(!Array['isArray'](_0x24bca3)||_0x24bca3[_0x18d8d2(0x825)]===0x0)throw new Error(_0x18d8d2(0x20d));let _0x51c389=[],_0x1101df=[];for(let _0x57cd6c of _0x24bca3){if(_0x57cd6c[_0x18d8d2(0x618)])_0x57cd6c[_0x18d8d2(0x618)]=this[_0x18d8d2(0x764)](_0x57cd6c[_0x18d8d2(0x618)]);else continue;await this[_0x18d8d2(0x6c6)][_0x18d8d2(0x69a)][_0x18d8d2(0x6e7)]({'where':{'_id':_0x57cd6c[_0x18d8d2(0x618)]}},this[_0x18d8d2(0x568)][_0x18d8d2(0x72d)])?_0x1101df[_0x18d8d2(0x7f1)]({'_id':_0x57cd6c[_0x18d8d2(0x618)],'leadInfo':_0x57cd6c[_0x18d8d2(0x344)],'owner':this[_0x18d8d2(0x568)]['wuid']}):_0x51c389[_0x18d8d2(0x7f1)]({'_id':_0x57cd6c[_0x18d8d2(0x618)],'owner':this[_0x18d8d2(0x568)][_0x18d8d2(0x72d)],'leadInfo':_0x57cd6c[_0x18d8d2(0x344)],'imported':!0x0});}return _0x1101df['length']>0x0&&await this['repository'][_0x18d8d2(0x69a)][_0x18d8d2(0x418)](_0x1101df[_0x18d8d2(0x347)](_0x29cb5d=>({'query':{'where':{'_id':_0x29cb5d[_0x18d8d2(0x618)],'owner':this[_0x18d8d2(0x568)][_0x18d8d2(0x72d)]}},'update':_0x29cb5d}))),_0x51c389['length']>0x0&&await this[_0x18d8d2(0x6c6)][_0x18d8d2(0x69a)][_0x18d8d2(0x7f9)](_0x51c389,this['instance'][_0x18d8d2(0x72d)]),{'updated':_0x1101df[_0x18d8d2(0x825)],'inserted':_0x51c389[_0x18d8d2(0x825)]};}catch(_0x4db0c9){let _0x3db709=_0x18d8d2(0x2a5),_0x599b73=_0x4db0c9 instanceof Error?_0x4db0c9[_0x18d8d2(0x805)]:typeof _0x4db0c9=='object'?JSON['stringify'](_0x4db0c9):_0x4db0c9,_0xdba9da=_0x3db709+':\x20'+_0x599b73;throw this[_0x18d8d2(0x563)][_0x18d8d2(0x47a)](this[_0x18d8d2(0x616)]+'\x20('+this[_0x18d8d2(0x568)][_0x18d8d2(0x72d)]+_0x18d8d2(0x6c0)+_0xdba9da),new m(_0xdba9da);}}async[a0_0x4bc873(0x584)](_0x5ac4eb){const _0xd20356=a0_0x4bc873;try{if(!Array[_0xd20356(0x719)](_0x5ac4eb)||_0x5ac4eb[_0xd20356(0x825)]===0x0)throw new Error(_0xd20356(0x20d));let _0x3ef42e=0x64,_0x5b2c48=0x0;for(let _0x241ced=0x0;_0x241ced<_0x5ac4eb['length'];_0x241ced+=_0x3ef42e){let _0x581b0e=_0x5ac4eb[_0xd20356(0x5de)](_0x241ced,_0x241ced+_0x3ef42e),{updated:_0x4aaf20}=await this[_0xd20356(0x788)](_0x581b0e);_0x5b2c48+=_0x4aaf20;}return{'updated':_0x5b2c48};}catch(_0x11d80a){let _0x921889='Erro\x20ao\x20importar\x20chats',_0x33cb01=_0x11d80a instanceof Error?_0x11d80a[_0xd20356(0x805)]:typeof _0x11d80a==_0xd20356(0x801)?JSON[_0xd20356(0x573)](_0x11d80a):_0x11d80a,_0x39f8dd=_0x921889+':\x20'+_0x33cb01;throw this[_0xd20356(0x563)][_0xd20356(0x47a)](this[_0xd20356(0x616)]+'\x20('+this[_0xd20356(0x568)][_0xd20356(0x72d)]+_0xd20356(0x6c0)+_0x39f8dd),new m(_0x39f8dd);}}async[a0_0x4bc873(0x788)](_0x325aa7){const _0x10cb36=a0_0x4bc873;try{let _0x1d0238=await this['repository'][_0x10cb36(0x442)][_0x10cb36(0x8aa)]({'where':{}},this['instance'][_0x10cb36(0x72d)]),_0x3a2737=new Set(_0x1d0238[_0x10cb36(0x347)](_0x2ebdb6=>_0x2ebdb6[_0x10cb36(0x618)])),_0x1abf45=[],_0x1e14b5=[];for(let _0x42bb18 of _0x325aa7){if(!_0x42bb18[_0x10cb36(0x618)])continue;_0x42bb18[_0x10cb36(0x618)]=this[_0x10cb36(0x764)](_0x42bb18[_0x10cb36(0x618)]);let _0x55e35d=await this['repository'][_0x10cb36(0x69a)][_0x10cb36(0x6e7)]({'where':{'_id':_0x42bb18[_0x10cb36(0x618)]}},this[_0x10cb36(0x568)][_0x10cb36(0x72d)]),_0x49abad={};if(Object[_0x10cb36(0x52e)](_0x42bb18[_0x10cb36(0x344)])[_0x10cb36(0x426)](([_0x58fb32,_0xaa0d52])=>{const _0x24be81=_0x10cb36;_0x49abad[_0x24be81(0x6b5)+_0x58fb32]=_0xaa0d52;}),_0x55e35d&&!_0x55e35d[_0x10cb36(0x3dd)]){let _0x5a285b=(_0x42bb18[_0x10cb36(0x344)]['etiquetas']||[])[_0x10cb36(0x411)](_0x547962=>_0x3a2737[_0x10cb36(0x772)](_0x547962)),_0x2e616a=new Set(_0x55e35d[_0x10cb36(0x344)][_0x10cb36(0x3c5)]||[]),_0x18f659=_0x5a285b[_0x10cb36(0x411)](_0x6e9758=>!_0x2e616a[_0x10cb36(0x772)](_0x6e9758)),_0x17754c=[..._0x2e616a][_0x10cb36(0x411)](_0x1104c6=>!_0x5a285b[_0x10cb36(0x5f5)](_0x1104c6));_0x1e14b5['push'](..._0x18f659[_0x10cb36(0x347)](_0x351f4a=>this[_0x10cb36(0x35c)](_0x351f4a,_0x42bb18[_0x10cb36(0x618)]))),_0x1e14b5['push'](..._0x17754c[_0x10cb36(0x347)](_0x4c22cb=>this[_0x10cb36(0x56e)](_0x4c22cb,_0x42bb18[_0x10cb36(0x618)]))),_0x42bb18[_0x10cb36(0x344)][_0x10cb36(0x3c5)]=_0x5a285b,_0x1abf45[_0x10cb36(0x7f1)]({'query':{'where':{'_id':_0x42bb18[_0x10cb36(0x618)],'owner':this['instance'][_0x10cb36(0x72d)]}},'update':_0x49abad});}else _0x49abad[_0x10cb36(0x3dd)]=!0x0,_0x1abf45[_0x10cb36(0x7f1)]({'query':{'where':{'_id':_0x42bb18[_0x10cb36(0x618)],'owner':this[_0x10cb36(0x568)][_0x10cb36(0x72d)]}},'update':_0x49abad});}let _0x16fd33=await this[_0x10cb36(0x6c6)][_0x10cb36(0x69a)][_0x10cb36(0x418)](_0x1abf45);return await Promise[_0x10cb36(0x844)](_0x1e14b5),{'updated':_0x16fd33};}catch(_0x2e5550){let _0x1826d0=_0x10cb36(0x2a5),_0x2909a3=_0x2e5550 instanceof Error?_0x2e5550['message']:typeof _0x2e5550==_0x10cb36(0x801)?JSON[_0x10cb36(0x573)](_0x2e5550):_0x2e5550,_0x374e89=_0x1826d0+':\x20'+_0x2909a3;throw this[_0x10cb36(0x563)][_0x10cb36(0x47a)](this[_0x10cb36(0x616)]+'\x20('+this[_0x10cb36(0x568)][_0x10cb36(0x72d)]+_0x10cb36(0x6c0)+_0x374e89),new m(_0x374e89);}}async[a0_0x4bc873(0x69f)](){const _0x400e77=a0_0x4bc873;return await this[_0x400e77(0x877)][_0x400e77(0x69f)]();}async[a0_0x4bc873(0x75b)](_0x806e2e){const _0x386f73=a0_0x4bc873;try{return await this['client'][_0x386f73(0x47d)](_0x806e2e['privacySettings']['readreceipts']),await this[_0x386f73(0x877)][_0x386f73(0x81c)](_0x806e2e[_0x386f73(0x819)][_0x386f73(0x566)]),await this[_0x386f73(0x877)]['updateStatusPrivacy'](_0x806e2e[_0x386f73(0x819)][_0x386f73(0x4ed)]),await this[_0x386f73(0x877)][_0x386f73(0x6b8)](_0x806e2e['privacySettings'][_0x386f73(0x709)]),await this[_0x386f73(0x877)][_0x386f73(0x5ad)](_0x806e2e[_0x386f73(0x819)][_0x386f73(0x7b2)]),await this[_0x386f73(0x877)][_0x386f73(0x3ba)](_0x806e2e['privacySettings'][_0x386f73(0x29d)]),this['client']?.['ws']?.[_0x386f73(0x526)](),{'update':_0x386f73(0x22b),'data':{'readreceipts':_0x806e2e['privacySettings'][_0x386f73(0x369)],'profile':_0x806e2e[_0x386f73(0x819)]['profile'],'status':_0x806e2e[_0x386f73(0x819)]['status'],'online':_0x806e2e[_0x386f73(0x819)][_0x386f73(0x709)],'last':_0x806e2e[_0x386f73(0x819)][_0x386f73(0x7b2)],'groupadd':_0x806e2e['privacySettings'][_0x386f73(0x29d)]}};}catch(_0x392c8a){let _0x3fbcb6=_0x386f73(0x630),_0x5a95d8=_0x392c8a instanceof Error?_0x392c8a['message']:typeof _0x392c8a=='object'?JSON['stringify'](_0x392c8a):_0x392c8a,_0xda4908=_0x3fbcb6+':\x20'+_0x5a95d8;throw this[_0x386f73(0x563)][_0x386f73(0x47a)](this[_0x386f73(0x616)]+'\x20('+this['instance'][_0x386f73(0x72d)]+_0x386f73(0x6c0)+_0xda4908),new m(_0xda4908);}}async['fetchProfile'](_0x4b68d1){const _0x4dfd06=a0_0x4bc873;let _0x460515=(_0x4b68d1?this['createJid'](_0x4b68d1):this[_0x4dfd06(0x877)]?.[_0x4dfd06(0x750)]?.['id'])['replace'](/:\d{1,2}@/g,'@');this[_0x4dfd06(0x563)][_0x4dfd06(0x377)](this[_0x4dfd06(0x616)]+'\x20('+this[_0x4dfd06(0x568)]['wuid']+_0x4dfd06(0x3fa)+_0x460515);let _0x1dc36d=await this[_0x4dfd06(0x6c6)][_0x4dfd06(0x7fe)][_0x4dfd06(0x6e7)]({'where':{'_id':_0x460515}},this[_0x4dfd06(0x568)]['wuid']),_0x14b158=_0x1dc36d?_0x1dc36d['pushName']:null;try{let _0x2c4a6d=(await this[_0x4dfd06(0x71c)]({'numbers':[_0x460515]}))?.[_0x4dfd06(0x457)](),_0x55b7b2=(await this[_0x4dfd06(0x69c)](_0x460515,null,!0x1))[_0x4dfd06(0x3eb)][_0x4dfd06(0x807)],_0x388f4d=await this[_0x4dfd06(0x60e)](_0x2c4a6d?.[_0x4dfd06(0x82f)]),_0xdab48b=await this[_0x4dfd06(0x508)](_0x2c4a6d?.['jid']),_0xa4beb3=(await this[_0x4dfd06(0x69c)](_0x460515,null,!0x1))[_0x4dfd06(0x3eb)][_0x4dfd06(0x60f)],_0x502874=await this[_0x4dfd06(0x6c6)][_0x4dfd06(0x69a)][_0x4dfd06(0x6e7)]({'where':{'_id':_0x460515}},this[_0x4dfd06(0x568)][_0x4dfd06(0x72d)]),_0x1d564d={'imagechat':_0x55b7b2,'contactname':_0x14b158||null,'pushName':_0xa4beb3,'status':_0x388f4d?.[_0x4dfd06(0x4ed)],'isBusiness':_0xdab48b[_0x4dfd06(0x804)],'email':_0xdab48b?.[_0x4dfd06(0x653)],'description':_0xdab48b?.[_0x4dfd06(0x2e5)],'website':_0xdab48b?.[_0x4dfd06(0x329)]?.[_0x4dfd06(0x457)](),'lastcache':Date[_0x4dfd06(0x3bd)](),'imported':!_0x502874},_0x3a93f1=await this[_0x4dfd06(0x6c6)][_0x4dfd06(0x69a)][_0x4dfd06(0x7eb)]({'where':{'_id':_0x460515}},_0x1d564d,this[_0x4dfd06(0x568)][_0x4dfd06(0x72d)]),_0x489678={'owner':this[_0x4dfd06(0x568)]['wuid'],'_id':_0x460515,'profilePictureUrl':_0x55b7b2,'status':_0x388f4d?.['status']};return this[_0x4dfd06(0x6c6)][_0x4dfd06(0x7fe)][_0x4dfd06(0x275)]([_0x489678],this['instance'][_0x4dfd06(0x72d)]),_0x3a93f1&&F(this[_0x4dfd06(0x616)],'chats',{'chat':_0x3a93f1}),{'wuid':_0x2c4a6d?.[_0x4dfd06(0x82f)]||_0x460515,'name':_0x2c4a6d?.['name'],'pushName':_0xa4beb3,'numberExists':_0x2c4a6d?.[_0x4dfd06(0x6d7)],'picture':_0x55b7b2,'status':_0x388f4d?.['status'],'isBusiness':_0xdab48b['isBusiness'],'email':_0xdab48b?.[_0x4dfd06(0x653)],'description':_0xdab48b?.[_0x4dfd06(0x2e5)],'website':_0xdab48b?.['website']?.[_0x4dfd06(0x457)]()};}catch(_0x3f5e28){return this['logger']['error']('Error\x20fetching\x20and\x20updating\x20profile:\x20'+(_0x3f5e28 instanceof Error?_0x3f5e28[_0x4dfd06(0x805)]:JSON[_0x4dfd06(0x573)](_0x3f5e28,null,0x2))),{};}}async['fetchBusinessProfile'](_0x5ed6fa){const _0x286f23=a0_0x4bc873;this[_0x286f23(0x563)][_0x286f23(0x377)](this[_0x286f23(0x616)]+'\x20('+this[_0x286f23(0x568)][_0x286f23(0x72d)]+'):Fetching\x20business\x20profile');try{let _0x15dcb=_0x5ed6fa?this['createJid'](_0x5ed6fa):this[_0x286f23(0x568)][_0x286f23(0x72d)],_0x2dd400=await this[_0x286f23(0x877)][_0x286f23(0x50b)](_0x15dcb);return this[_0x286f23(0x563)][_0x286f23(0x377)](this[_0x286f23(0x616)]+'\x20('+this['instance'][_0x286f23(0x72d)]+_0x286f23(0x4a0)),_0x2dd400?(this[_0x286f23(0x563)][_0x286f23(0x377)](this['instanceName']+'\x20('+this[_0x286f23(0x568)][_0x286f23(0x72d)]+'):Business\x20profile\x20fetched'),{'isBusiness':!0x0,..._0x2dd400}):{'isBusiness':!0x1,'message':_0x286f23(0x3b1),...(await this[_0x286f23(0x71c)]({'numbers':[_0x15dcb]}))?.[_0x286f23(0x457)]()};}catch(_0x48f7de){let _0x2185df='Falha\x20ao\x20processar\x20fetchBusinessProfile',_0x19035b=_0x48f7de instanceof Error?_0x48f7de['message']:typeof _0x48f7de==_0x286f23(0x801)?JSON[_0x286f23(0x573)](_0x48f7de):_0x48f7de,_0x27f4af=_0x2185df+':\x20'+_0x19035b;throw this['logger'][_0x286f23(0x47a)](this[_0x286f23(0x616)]+'\x20('+this[_0x286f23(0x568)][_0x286f23(0x72d)]+'):\x20'+_0x27f4af),new x(_0x27f4af);}}async['getStatus'](_0x2dae66){const _0x23c805=a0_0x4bc873;let _0x1ee12e=this[_0x23c805(0x764)](_0x2dae66);try{return{'wuid':_0x1ee12e,'status':(await this[_0x23c805(0x877)][_0x23c805(0x8d8)](_0x1ee12e))[0x0]?.[_0x23c805(0x4ed)]};}catch{return{'wuid':_0x1ee12e,'status':null};}}async[a0_0x4bc873(0x2a2)](_0x41dc94){const _0x58cafe=a0_0x4bc873;try{return await this['client'][_0x58cafe(0x2a2)](_0x41dc94),{'update':_0x58cafe(0x22b)};}catch(_0x3358b8){let _0x1cff58=_0x58cafe(0x6ee),_0x44951f=_0x3358b8 instanceof Error?_0x3358b8['message']:typeof _0x3358b8=='object'?JSON[_0x58cafe(0x573)](_0x3358b8):_0x3358b8,_0xf47046=_0x1cff58+':\x20'+_0x44951f;throw this[_0x58cafe(0x563)][_0x58cafe(0x47a)](this[_0x58cafe(0x616)]+'\x20('+this[_0x58cafe(0x568)][_0x58cafe(0x72d)]+_0x58cafe(0x6c0)+_0xf47046),new x(_0xf47046);}}async[a0_0x4bc873(0x823)](_0x36857e){const _0x445081=a0_0x4bc873;try{return await this[_0x445081(0x877)][_0x445081(0x823)](_0x36857e),{'update':'success'};}catch(_0x54bd0b){let _0x58c6e5=_0x445081(0x555),_0x49f222=_0x54bd0b instanceof Error?_0x54bd0b['message']:typeof _0x54bd0b=='object'?JSON['stringify'](_0x54bd0b):_0x54bd0b,_0x54ed53=_0x58c6e5+':\x20'+_0x49f222;throw this[_0x445081(0x563)][_0x445081(0x47a)](this['instanceName']+'\x20('+this[_0x445081(0x568)][_0x445081(0x72d)]+_0x445081(0x6c0)+_0x54ed53),new x(_0x54ed53);}}async[a0_0x4bc873(0x4ac)](_0x132572){const _0x232dbf=a0_0x4bc873;try{let _0x50c435;if((0x0,J[_0x232dbf(0x5a7)])(_0x132572)){let _0x2454e2=new Date()[_0x232dbf(0x505)](),_0x58c9ae=_0x132572+'?timestamp='+_0x2454e2;_0x50c435=(await Q['default'][_0x232dbf(0x62f)](_0x58c9ae,{'responseType':_0x232dbf(0x6a6)}))[_0x232dbf(0x301)];}else{if((0x0,J['isBase64'])(_0x132572))_0x50c435=Buffer[_0x232dbf(0x25a)](_0x132572,_0x232dbf(0x663));else throw new m(_0x232dbf(0x7a1));}return await this[_0x232dbf(0x877)][_0x232dbf(0x4ac)](this[_0x232dbf(0x568)]['wuid'],_0x50c435),{'update':_0x232dbf(0x22b)};}catch(_0xee4b2e){let _0x59584c=_0x232dbf(0x766),_0x510a9d=_0xee4b2e instanceof Error?_0xee4b2e[_0x232dbf(0x805)]:typeof _0xee4b2e==_0x232dbf(0x801)?JSON[_0x232dbf(0x573)](_0xee4b2e):_0xee4b2e,_0x392f15=_0x59584c+':\x20'+_0x510a9d;throw this[_0x232dbf(0x563)]['error'](this[_0x232dbf(0x616)]+'\x20('+this[_0x232dbf(0x568)][_0x232dbf(0x72d)]+_0x232dbf(0x6c0)+_0x392f15),new x(_0x392f15);}}async[a0_0x4bc873(0x56a)](){const _0x1cd999=a0_0x4bc873;try{return await this[_0x1cd999(0x877)][_0x1cd999(0x56a)](this[_0x1cd999(0x568)][_0x1cd999(0x72d)]),{'update':_0x1cd999(0x22b)};}catch(_0x1db946){let _0x11a94e=_0x1cd999(0x4e9),_0x32761b=_0x1db946 instanceof Error?_0x1db946['message']:typeof _0x1db946==_0x1cd999(0x801)?JSON[_0x1cd999(0x573)](_0x1db946):_0x1db946,_0x38086f=_0x11a94e+':\x20'+_0x32761b;throw this['logger'][_0x1cd999(0x47a)](this[_0x1cd999(0x616)]+'\x20('+this[_0x1cd999(0x568)][_0x1cd999(0x72d)]+'):\x20'+_0x38086f),new x(_0x38086f);}}async['createGroup'](_0x341357){const _0x4f3fe5=a0_0x4bc873;try{let _0x1f6092=(await this['whatsappNumber']({'numbers':_0x341357[_0x4f3fe5(0x5ea)]}))[_0x4f3fe5(0x411)](_0x59cd18=>_0x59cd18['exists'])['map'](_0x4259da=>_0x4259da[_0x4f3fe5(0x82f)]),{id:_0x85ebe6}=await this[_0x4f3fe5(0x877)][_0x4f3fe5(0x5a2)](_0x341357[_0x4f3fe5(0x72e)],_0x1f6092);_0x341357?.[_0x4f3fe5(0x2e5)]&&await this[_0x4f3fe5(0x877)][_0x4f3fe5(0x89e)](_0x85ebe6,_0x341357['description']);let _0x51ddf4=await this[_0x4f3fe5(0x877)]['groupMetadata'](_0x85ebe6);return _0x51ddf4[_0x4f3fe5(0x76e)]=[],await this[_0x4f3fe5(0x870)](_0x51ddf4),{'metadata':_0x51ddf4};}catch(_0x137c4d){let _0x49cc77=_0x4f3fe5(0x218),_0x58a623=_0x137c4d instanceof Error?_0x137c4d[_0x4f3fe5(0x805)]:typeof _0x137c4d=='object'?JSON[_0x4f3fe5(0x573)](_0x137c4d):_0x137c4d,_0x199374=_0x49cc77+':\x20'+_0x58a623;throw this[_0x4f3fe5(0x563)][_0x4f3fe5(0x47a)](this['instanceName']+'\x20('+this[_0x4f3fe5(0x568)][_0x4f3fe5(0x72d)]+_0x4f3fe5(0x6c0)+_0x199374),new x(_0x199374);}}async[a0_0x4bc873(0x28e)](_0x4090fe){const _0x2fa733=a0_0x4bc873;try{if(_0x4090fe[_0x2fa733(0x2cc)]===!0x0&&await this[_0x2fa733(0x877)][_0x2fa733(0x464)](_0x4090fe[_0x2fa733(0x31d)],_0x2fa733(0x440)),_0x4090fe['restrict']===!0x1&&await this['client'][_0x2fa733(0x464)](_0x4090fe[_0x2fa733(0x31d)],_0x2fa733(0x8ee)),_0x4090fe[_0x2fa733(0x635)]===!0x0&&await this[_0x2fa733(0x877)][_0x2fa733(0x464)](_0x4090fe[_0x2fa733(0x31d)],_0x2fa733(0x900)),_0x4090fe[_0x2fa733(0x635)]===!0x1&&await this[_0x2fa733(0x877)][_0x2fa733(0x464)](_0x4090fe[_0x2fa733(0x31d)],_0x2fa733(0x345)),_0x4090fe[_0x2fa733(0x7a3)]===!0x0&&await this[_0x2fa733(0x877)]['groupMemberAddMode'](_0x4090fe[_0x2fa733(0x31d)],_0x2fa733(0x38c)),_0x4090fe[_0x2fa733(0x7a3)]===!0x1&&await this[_0x2fa733(0x877)]['groupMemberAddMode'](_0x4090fe[_0x2fa733(0x31d)],_0x2fa733(0x5ec)),_0x4090fe[_0x2fa733(0x2ab)]===!0x0&&await this[_0x2fa733(0x877)][_0x2fa733(0x6e4)](_0x4090fe[_0x2fa733(0x31d)],'on'),_0x4090fe['joinApprovalMode']===!0x1&&await this[_0x2fa733(0x877)][_0x2fa733(0x6e4)](_0x4090fe[_0x2fa733(0x31d)],_0x2fa733(0x790)),typeof _0x4090fe[_0x2fa733(0x270)]<'u'&&_0x4090fe[_0x2fa733(0x270)]!==null&&await this[_0x2fa733(0x877)]['groupToggleEphemeral'](_0x4090fe[_0x2fa733(0x31d)],_0x4090fe['expiration']),_0x4090fe[_0x2fa733(0x60f)]&&await this[_0x2fa733(0x877)][_0x2fa733(0x794)](_0x4090fe[_0x2fa733(0x31d)],_0x4090fe[_0x2fa733(0x60f)]),_0x4090fe[_0x2fa733(0x2e5)]&&await this[_0x2fa733(0x877)][_0x2fa733(0x89e)](_0x4090fe[_0x2fa733(0x31d)],_0x4090fe['description']),_0x4090fe[_0x2fa733(0x8ed)]){let _0x24c1df;if((0x0,J[_0x2fa733(0x5a7)])(_0x4090fe['image'])){let _0x2f6a31=new Date()[_0x2fa733(0x505)](),_0x5df094=_0x4090fe[_0x2fa733(0x8ed)]+_0x2fa733(0x73f)+_0x2f6a31;_0x24c1df=(await Q[_0x2fa733(0x323)][_0x2fa733(0x62f)](_0x5df094,{'responseType':_0x2fa733(0x6a6)}))['data'];}else{if((0x0,J[_0x2fa733(0x6cd)])(_0x4090fe[_0x2fa733(0x8ed)]))_0x24c1df=Buffer['from'](_0x4090fe[_0x2fa733(0x8ed)],'base64');else throw new m(_0x2fa733(0x7a1));}await this[_0x2fa733(0x877)][_0x2fa733(0x4ac)](_0x4090fe[_0x2fa733(0x31d)],_0x24c1df);}return await this[_0x2fa733(0x874)]({'groupJid':_0x4090fe[_0x2fa733(0x31d)]});}catch(_0x2cdfca){let _0x48cb15=_0x2fa733(0x26a),_0x2d024f=_0x2cdfca instanceof Error?_0x2cdfca[_0x2fa733(0x805)]:typeof _0x2cdfca==_0x2fa733(0x801)?JSON['stringify'](_0x2cdfca):_0x2cdfca,_0x345f01=_0x48cb15+':\x20'+_0x2d024f;throw this[_0x2fa733(0x563)][_0x2fa733(0x47a)](this[_0x2fa733(0x616)]+'\x20('+this[_0x2fa733(0x568)][_0x2fa733(0x72d)]+_0x2fa733(0x6c0)+_0x345f01),new x(_0x345f01);}}async[a0_0x4bc873(0x424)](_0xcafa5b){const _0x373d0d=a0_0x4bc873;try{let _0x20aab2=_0xcafa5b['participants'][_0x373d0d(0x347)](_0x415c4c=>this[_0x373d0d(0x764)](_0x415c4c));if(_0xcafa5b[_0x373d0d(0x53b)]===_0x373d0d(0x83a)||_0xcafa5b[_0x373d0d(0x53b)]===_0x373d0d(0x8b2))await this[_0x373d0d(0x877)][_0x373d0d(0x84f)](_0xcafa5b[_0x373d0d(0x31d)],_0x20aab2,_0xcafa5b[_0x373d0d(0x53b)]);else{if(_0xcafa5b['action']===_0x373d0d(0x840)){let _0x3bed1b=(await this[_0x373d0d(0x71c)]({'numbers':_0xcafa5b[_0x373d0d(0x5ea)]}))[_0x373d0d(0x411)](_0x1f0d1e=>_0x1f0d1e[_0x373d0d(0x6d7)])[_0x373d0d(0x347)](_0x3053fe=>this[_0x373d0d(0x764)](_0x3053fe['jid']));if(_0x3bed1b[_0x373d0d(0x825)]===0x0)throw new m(_0x373d0d(0x5e0));await this[_0x373d0d(0x877)]['groupParticipantsUpdate'](_0xcafa5b[_0x373d0d(0x31d)],_0x3bed1b,'add');}else await this[_0x373d0d(0x877)][_0x373d0d(0x343)](_0xcafa5b['groupJid'],_0x20aab2,_0xcafa5b[_0x373d0d(0x53b)]);}return await this[_0x373d0d(0x874)]({'groupJid':_0xcafa5b[_0x373d0d(0x31d)]});}catch(_0x4f5527){let _0x36f572='Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGParticipant',_0x2538ba=_0x4f5527 instanceof Error?_0x4f5527[_0x373d0d(0x805)]:typeof _0x4f5527==_0x373d0d(0x801)?JSON[_0x373d0d(0x573)](_0x4f5527):_0x4f5527,_0x2a1209=_0x36f572+':\x20'+_0x2538ba;throw this['logger'][_0x373d0d(0x47a)](this[_0x373d0d(0x616)]+'\x20('+this[_0x373d0d(0x568)]['wuid']+_0x373d0d(0x6c0)+_0x2a1209),new m(_0x2a1209);}}async[a0_0x4bc873(0x85b)](_0x2ff0e1){const _0x9d694=a0_0x4bc873;try{return await this[_0x9d694(0x877)]['groupGetInviteInfo'](_0x2ff0e1[_0x9d694(0x6fc)]);}catch(_0x593ec1){let _0x3ec15a='Falha\x20ao\x20processar\x20a\x20solicitao\x20groupGetInviteInfo',_0x5a215a=_0x593ec1 instanceof Error?_0x593ec1['message']:typeof _0x593ec1=='object'?JSON[_0x9d694(0x573)](_0x593ec1):_0x593ec1,_0x3464c6=_0x3ec15a+':\x20'+_0x5a215a;throw this[_0x9d694(0x563)][_0x9d694(0x47a)](this[_0x9d694(0x616)]+'\x20('+this[_0x9d694(0x568)][_0x9d694(0x72d)]+_0x9d694(0x6c0)+_0x3464c6),new m(_0x3464c6);}}async[a0_0x4bc873(0x874)](_0x2a52cf,_0xb5947f=a0_0x4bc873(0x57d)){const _0x3d1c85=a0_0x4bc873;try{let _0x4602e3=await this['repository']['chat']['findOne']({'where':{'_id':_0x2a52cf[_0x3d1c85(0x31d)]}},this['instance'][_0x3d1c85(0x72d)]),_0x3abcf1=_0x4602e3?_0x4602e3['groupdata']:null,_0x2070b7=0x18*0x3c*0x3c*0x3e8;if(!_0x3abcf1||_0x3abcf1[_0x3d1c85(0x82a)]&&Date['now']()-_0x3abcf1[_0x3d1c85(0x82a)]>_0x2070b7){let _0x654e9b=await this[_0x3d1c85(0x877)][_0x3d1c85(0x67c)](_0x2a52cf[_0x3d1c85(0x31d)]);if(_0x654e9b[_0x3d1c85(0x273)]=_0x654e9b?.[_0x3d1c85(0x273)]&&_0x654e9b[_0x3d1c85(0x273)]['toString']()['length']<0xd?_0x654e9b?.[_0x3d1c85(0x273)]*0x3e8:_0x654e9b?.[_0x3d1c85(0x273)]||null,_0x654e9b[_0x3d1c85(0x21b)]=_0x654e9b?.[_0x3d1c85(0x21b)]&&_0x654e9b['creation'][_0x3d1c85(0x529)]()[_0x3d1c85(0x825)]<0xd?_0x654e9b?.[_0x3d1c85(0x21b)]*0x3e8:_0x654e9b?.[_0x3d1c85(0x21b)]||null,_0x3abcf1={..._0x654e9b,'lastUpdate':Date['now']()},!_0x654e9b)return;}let _0x213227=_0x3abcf1[_0x3d1c85(0x5ea)]?.[_0x3d1c85(0x456)](_0x8c5bad=>_0x8c5bad['id']===this['instance'][_0x3d1c85(0x72d)]+_0x3d1c85(0x8b3)&&_0x8c5bad[_0x3d1c85(0x747)]!=null)||!0x1;!_0x3abcf1[_0x3d1c85(0x6fc)]&&_0x213227&&(_0x3abcf1[_0x3d1c85(0x6fc)]=(await this['inviteCode'](_0x2a52cf,!0x1))[_0x3d1c85(0x2b2)]);let _0x76360d=(!_0x3abcf1[_0x3d1c85(0x635)]||_0x213227)&&(!_0x3abcf1['isCommunity']||_0x3abcf1[_0x3d1c85(0x443)]&&_0x3abcf1[_0x3d1c85(0x716)]&&_0x213227);_0x3abcf1[_0x3d1c85(0x899)]=_0x213227,_0x3abcf1['canSendMessage']=_0x76360d;let _0x153110=[];if(_0x213227&&_0x3abcf1[_0x3d1c85(0x2ab)])try{_0x153110=await this[_0x3d1c85(0x877)][_0x3d1c85(0x77e)](_0x2a52cf['groupJid']),_0x3abcf1['lastFetchAwaitingApproval']=Date[_0x3d1c85(0x3bd)]();}catch(_0x1da77a){this[_0x3d1c85(0x563)]['verbose'](this[_0x3d1c85(0x616)]+'\x20('+this[_0x3d1c85(0x568)][_0x3d1c85(0x72d)]+_0x3d1c85(0x8a5)+_0x2a52cf['groupJid']+':\x20'+(_0x1da77a instanceof Error?_0x1da77a[_0x3d1c85(0x805)]:JSON[_0x3d1c85(0x573)](_0x1da77a,null,0x2)));}try{_0x3abcf1[_0x3d1c85(0x8ed)]=(await this[_0x3d1c85(0x69c)](_0x2a52cf[_0x3d1c85(0x31d)],null,!0x0))[_0x3d1c85(0x3eb)][_0x3d1c85(0x807)];}catch(_0x2adebc){this['logger']['verbose'](this[_0x3d1c85(0x616)]+'\x20('+this[_0x3d1c85(0x568)][_0x3d1c85(0x72d)]+_0x3d1c85(0x36f)+_0x2a52cf['groupJid']+':\x20'+(_0x2adebc instanceof Error?_0x2adebc['message']:JSON[_0x3d1c85(0x573)](_0x2adebc,null,0x2)));}let _0x3f0714=_0x3abcf1[_0x3d1c85(0x5ea)][_0x3d1c85(0x347)](_0x572264=>_0x572264['id']),_0x1cb4c9=_0x153110[_0x3d1c85(0x347)](_0x54966a=>_0x54966a[_0x3d1c85(0x82f)]),_0x35f48d=await this[_0x3d1c85(0x6c6)]['cacheContact'][_0x3d1c85(0x854)]([..._0x3f0714,..._0x1cb4c9]);_0x3abcf1['participants']=_0x3abcf1[_0x3d1c85(0x5ea)][_0x3d1c85(0x347)](_0x26b405=>{const _0x5ab82=_0x3d1c85;let _0x104942=_0x35f48d[_0x5ab82(0x8aa)](_0x44dfb0=>_0x44dfb0['_id']===_0x26b405['id']);return{'id':_0x26b405['id'],'isAdmin':[_0x5ab82(0x747),_0x5ab82(0x579)]['includes'](_0x26b405[_0x5ab82(0x747)]),'admin':_0x26b405[_0x5ab82(0x747)],'pushName':_0x104942?.['name'],'profilePictureUrl':_0x104942?.[_0x5ab82(0x807)]};}),_0x3abcf1[_0x3d1c85(0x76e)]=_0x153110[_0x3d1c85(0x347)](_0xaff8a2=>{const _0x5130e7=_0x3d1c85;let _0x32be75=_0x35f48d[_0x5130e7(0x8aa)](_0x344b90=>_0x344b90[_0x5130e7(0x618)]===_0xaff8a2[_0x5130e7(0x82f)]);return{'id':_0xaff8a2[_0x5130e7(0x82f)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x32be75?.[_0x5130e7(0x60f)],'profilePictureUrl':_0x32be75?.[_0x5130e7(0x807)],'request_method':_0xaff8a2[_0x5130e7(0x2e7)],'request_time':_0xaff8a2[_0x5130e7(0x740)]};});let _0x1ecd0b=await this[_0x3d1c85(0x6c6)]['chat'][_0x3d1c85(0x7eb)]({'where':{'_id':_0x2a52cf[_0x3d1c85(0x31d)]}},{'imagechat':_0x3abcf1[_0x3d1c85(0x8ed)],'name':_0x3abcf1[_0x3d1c85(0x72e)],'lastcache':Date[_0x3d1c85(0x3bd)](),'groupdata':_0x3abcf1},this[_0x3d1c85(0x568)][_0x3d1c85(0x72d)]);return F(this[_0x3d1c85(0x616)],_0x3d1c85(0x85a),{'chat':_0x1ecd0b}),{'metadata':_0x3abcf1};}catch(_0x2ae7dd){if(_0xb5947f===_0x3d1c85(0x32d))return;throw new U('Error\x20fetching\x20group',_0x2ae7dd['message']['toString']());}}async[a0_0x4bc873(0x352)](){const _0x5eb3c2=a0_0x4bc873;try{this[_0x5eb3c2(0x563)][_0x5eb3c2(0x636)]('Retornando\x20grupos\x20COM\x20cache');let _0x3bb87b=Date['now'](),_0x129367=0x3*0x3c*0x3c*0x3e8;return _0x3bb87b-this[_0x5eb3c2(0x324)]>_0x129367&&(this[_0x5eb3c2(0x881)](),this['lastRealGroupsFetch']=_0x3bb87b),(await this[_0x5eb3c2(0x6c6)][_0x5eb3c2(0x69a)][_0x5eb3c2(0x3af)]({'where':{'group':!0x0}},this[_0x5eb3c2(0x568)][_0x5eb3c2(0x72d)]))['map'](_0x3c9a5e=>({..._0x3c9a5e['groupdata'],'groupJid':_0x3c9a5e?.[_0x5eb3c2(0x618)],'participants':_0x3c9a5e?.[_0x5eb3c2(0x3d8)]?.[_0x5eb3c2(0x5ea)]||[],'awaitingApproval':_0x3c9a5e?.[_0x5eb3c2(0x3d8)]?.[_0x5eb3c2(0x76e)]||[],'image':_0x3c9a5e?.[_0x5eb3c2(0x530)]}));}catch(_0xfe92d4){let _0x24fbba=_0x5eb3c2(0x4fe),_0xcc928e=_0xfe92d4 instanceof Error?_0xfe92d4[_0x5eb3c2(0x805)]:typeof _0xfe92d4==_0x5eb3c2(0x801)?JSON['stringify'](_0xfe92d4):_0xfe92d4,_0x447245=_0x24fbba+':\x20'+_0xcc928e;throw this['logger']['error'](this[_0x5eb3c2(0x616)]+'\x20('+this[_0x5eb3c2(0x568)]['wuid']+_0x5eb3c2(0x6c0)+_0x447245),new U(_0x447245);}}async[a0_0x4bc873(0x881)](){const _0xb29bdf=a0_0x4bc873;try{this[_0xb29bdf(0x563)]['info'](_0xb29bdf(0x6bf));let _0x31ecad=[],_0x4a2ecd=await this['client'][_0xb29bdf(0x600)](),_0x4fb4ef=Object[_0xb29bdf(0x5b2)](_0x4a2ecd),_0x4ff05b=_0x4fb4ef[_0xb29bdf(0x411)](_0x4050a6=>(0x0,w['isJidGroup'])(_0x4050a6?.['id']))[_0xb29bdf(0x347)](async _0xe3e7d5=>{const _0x40f0b9=_0xb29bdf;try{return await this[_0x40f0b9(0x877)][_0x40f0b9(0x72a)](_0xe3e7d5['id'],_0x40f0b9(0x3da));}catch(_0x174a03){return this['logger']['verbose'](this[_0x40f0b9(0x616)]+'\x20('+this[_0x40f0b9(0x568)][_0x40f0b9(0x72d)]+'):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20'+_0xe3e7d5['id']+':\x20'+(_0x174a03 instanceof Error?_0x174a03['message']:JSON[_0x40f0b9(0x573)](_0x174a03,null,0x2))),null;}}),_0x1bcf91=await Promise[_0xb29bdf(0x844)](_0x4ff05b);for(let _0x37414c=0x0;_0x37414c<_0x4fb4ef[_0xb29bdf(0x825)];_0x37414c++){let _0x481e7e=_0x4fb4ef[_0x37414c];(0x0,w[_0xb29bdf(0x225)])(_0x481e7e?.['id'])&&(_0x31ecad[_0xb29bdf(0x7f1)]({'groupJid':_0x481e7e?.['id'],'subject':_0x481e7e?.['subject'],'subjectOwner':_0x481e7e?.[_0xb29bdf(0x461)]?.['split']('@')[0x0],'subjectTime':_0x481e7e?.[_0xb29bdf(0x273)],'creation':_0x481e7e?.[_0xb29bdf(0x21b)],'size':_0x481e7e?.[_0xb29bdf(0x5ea)]?.[_0xb29bdf(0x825)],'owner':_0x481e7e?.['owner']?.[_0xb29bdf(0x51b)]('@')[0x0],'desc':_0x481e7e?.[_0xb29bdf(0x864)],'restrict':_0x481e7e?.[_0xb29bdf(0x2cc)],'announce':_0x481e7e?.[_0xb29bdf(0x635)],'image':_0x1bcf91[_0x37414c],'isCommunity':_0x481e7e?.[_0xb29bdf(0x443)],'joinApprovalMode':_0x481e7e?.['joinApprovalMode'],'memberCanAddParticipant':_0x481e7e?.[_0xb29bdf(0x7a3)],'participants':_0x481e7e?.[_0xb29bdf(0x5ea)],'descOwner':_0x481e7e?.[_0xb29bdf(0x92d)],'descId':_0x481e7e?.['descId'],'memberAddMode':_0x481e7e?.[_0xb29bdf(0x7a3)],'isCommunityAnnounce':_0x481e7e?.[_0xb29bdf(0x716)],'ephemeralDuration':_0x481e7e?.[_0xb29bdf(0x593)]||0x0,'author':_0x481e7e?.['author']}),this[_0xb29bdf(0x870)](_0x4fb4ef[_0x37414c]));}return _0x31ecad;}catch(_0x299ee6){let _0x2d2157=_0xb29bdf(0x2cd),_0x2abf2b=_0x299ee6 instanceof Error?_0x299ee6[_0xb29bdf(0x805)]:typeof _0x299ee6==_0xb29bdf(0x801)?JSON['stringify'](_0x299ee6):_0x299ee6,_0x5f5cc6=_0x2d2157+':\x20'+_0x2abf2b;throw this[_0xb29bdf(0x563)][_0xb29bdf(0x47a)](this[_0xb29bdf(0x616)]+'\x20('+this['instance'][_0xb29bdf(0x72d)]+_0xb29bdf(0x6c0)+_0x5f5cc6),new U(_0x5f5cc6);}}async[a0_0x4bc873(0x870)](_0x51932c){const _0x3ac3f0=a0_0x4bc873;let _0x114ad2=await this[_0x3ac3f0(0x6c6)][_0x3ac3f0(0x69a)][_0x3ac3f0(0x6e7)]({'where':{'_id':_0x51932c['id']}},this['instance'][_0x3ac3f0(0x72d)]);_0x51932c[_0x3ac3f0(0x273)]=_0x51932c?.['subjectTime']&&_0x51932c[_0x3ac3f0(0x273)][_0x3ac3f0(0x529)]()[_0x3ac3f0(0x825)]<0xd?_0x51932c?.[_0x3ac3f0(0x273)]*0x3e8:_0x51932c?.['subjectTime']||null,_0x51932c[_0x3ac3f0(0x21b)]=_0x51932c?.['creation']&&_0x51932c[_0x3ac3f0(0x21b)]['toString']()[_0x3ac3f0(0x825)]<0xd?_0x51932c?.[_0x3ac3f0(0x21b)]*0x3e8:_0x51932c?.[_0x3ac3f0(0x21b)]||null;let _0x13dc0d=_0x114ad2?.['groupdata']?.[_0x3ac3f0(0x76e)]||[],_0xf61823=_0x114ad2?.['groupdata']?.[_0x3ac3f0(0x1f7)],_0x395b74=_0x51932c[_0x3ac3f0(0x5ea)][_0x3ac3f0(0x347)](_0xc178a4=>{const _0x3d0243=_0x3ac3f0;let _0x47bc46=_0x114ad2?.[_0x3d0243(0x3d8)]?.[_0x3d0243(0x5ea)][_0x3d0243(0x8aa)](_0x4741b5=>_0x4741b5['id']===_0xc178a4['id']);return{..._0xc178a4,'isAdmin':[_0x3d0243(0x747),_0x3d0243(0x579)][_0x3d0243(0x5f5)](_0xc178a4[_0x3d0243(0x747)]),'admin':_0xc178a4[_0x3d0243(0x747)],'name':_0x47bc46?.[_0x3d0243(0x60f)]||_0xc178a4['name'],'imgUrl':_0x47bc46?.[_0x3d0243(0x1f8)]||_0xc178a4['imgUrl']};}),_0x1b2f5e=_0x395b74[_0x3ac3f0(0x456)](_0x3ba7a5=>_0x3ba7a5['id']===this[_0x3ac3f0(0x568)]['wuid']+_0x3ac3f0(0x8b3)&&_0x3ba7a5[_0x3ac3f0(0x747)]!=null)||!0x1,_0x59f62a=(!_0x51932c['announce']||_0x1b2f5e)&&(!_0x51932c[_0x3ac3f0(0x443)]||_0x51932c[_0x3ac3f0(0x443)]&&_0x51932c[_0x3ac3f0(0x716)]&&_0x1b2f5e),_0x4e18d2={..._0x51932c,'participants':_0x395b74,'awaitingApproval':_0x13dc0d,'lastFetchAwaitingApproval':_0xf61823,'isAdmin':_0x1b2f5e,'canSendMessage':_0x59f62a,'lastUpdate':Date[_0x3ac3f0(0x3bd)]()};await this[_0x3ac3f0(0x6c6)][_0x3ac3f0(0x69a)][_0x3ac3f0(0x7eb)]({'where':{'_id':_0x51932c['id']}},{'name':_0x51932c['subject'],'group':!0x0,'groupdata':_0x4e18d2,'lastcache':Date['now']()},this[_0x3ac3f0(0x568)][_0x3ac3f0(0x72d)]),F(this[_0x3ac3f0(0x616)],_0x3ac3f0(0x85a),{'chat':_0x51932c});}async[a0_0x4bc873(0x264)](_0x2ef34a){const _0x4de0a2=a0_0x4bc873;let _0x977949=await this['repository'][_0x4de0a2(0x69a)][_0x4de0a2(0x6e7)]({'where':{'_id':_0x2ef34a['id']}},this[_0x4de0a2(0x568)][_0x4de0a2(0x72d)]);_0x2ef34a[_0x4de0a2(0x273)]=_0x2ef34a?.['subjectTime']&&_0x2ef34a[_0x4de0a2(0x273)][_0x4de0a2(0x529)]()['length']<0xd?_0x2ef34a?.[_0x4de0a2(0x273)]*0x3e8:_0x2ef34a?.[_0x4de0a2(0x273)]||null,_0x2ef34a['creation']=_0x2ef34a?.[_0x4de0a2(0x21b)]&&_0x2ef34a['creation']['toString']()[_0x4de0a2(0x825)]<0xd?_0x2ef34a?.[_0x4de0a2(0x21b)]*0x3e8:_0x2ef34a?.['creation']||null,_0x2ef34a['inviteCode']&&(_0x2ef34a[_0x4de0a2(0x6fc)]=_0x4de0a2(0x855)+_0x2ef34a['inviteCode']);let _0x2a3917=_0x977949?.[_0x4de0a2(0x3d8)]?{..._0x977949[_0x4de0a2(0x3d8)]}:{};Object['keys'](_0x2ef34a)[_0x4de0a2(0x426)](_0x398c3a=>{_0x398c3a!=='id'&&(_0x2a3917[_0x398c3a]=_0x2ef34a[_0x398c3a]);});let _0x1ce3fb=_0x2a3917[_0x4de0a2(0x5ea)]?.['some'](_0x26e415=>_0x26e415['id']===this[_0x4de0a2(0x568)][_0x4de0a2(0x72d)]+_0x4de0a2(0x8b3)&&_0x26e415['admin']!=null)||!0x1;_0x2a3917[_0x4de0a2(0x899)]=_0x1ce3fb;let _0x470ea8=(!_0x2a3917[_0x4de0a2(0x635)]||_0x1ce3fb)&&(!_0x2a3917[_0x4de0a2(0x443)]||_0x2a3917[_0x4de0a2(0x443)]&&_0x2a3917[_0x4de0a2(0x716)]&&_0x1ce3fb);_0x2a3917['canSendMessage']=_0x470ea8;let _0x43014b={'group':!0x0,'groupdata':_0x2a3917};_0x2ef34a[_0x4de0a2(0x72e)]&&(_0x43014b['name']=_0x2ef34a[_0x4de0a2(0x72e)]),await this[_0x4de0a2(0x6c6)][_0x4de0a2(0x69a)][_0x4de0a2(0x7eb)]({'where':{'_id':_0x2ef34a['id']}},_0x43014b,this['instance'][_0x4de0a2(0x72d)],{'upsert':!0x0}),F(this[_0x4de0a2(0x616)],_0x4de0a2(0x85a),{'chat':_0x43014b});}async['updateGroupParticipantsWebhook'](_0xbaf8de){const _0x2c5fad=a0_0x4bc873;let _0x278d5d=await this[_0x2c5fad(0x6c6)][_0x2c5fad(0x69a)][_0x2c5fad(0x6e7)]({'where':{'_id':_0xbaf8de['id']}},this['instance'][_0x2c5fad(0x72d)]);if(!_0x278d5d||!_0x278d5d['groupdata']){this['logger'][_0x2c5fad(0x636)](this['instanceName']+'\x20('+this[_0x2c5fad(0x568)][_0x2c5fad(0x72d)]+_0x2c5fad(0x89b)+_0xbaf8de['id']);return;}let _0x3fa2c3=await this[_0x2c5fad(0x6c6)][_0x2c5fad(0x813)][_0x2c5fad(0x854)](_0xbaf8de[_0x2c5fad(0x5ea)]),_0x1baef3=[..._0x278d5d[_0x2c5fad(0x3d8)]?.[_0x2c5fad(0x5ea)]];switch(_0xbaf8de[_0x2c5fad(0x53b)]){case _0x2c5fad(0x840):_0x3fa2c3['map'](_0x5ed9ed=>({'id':_0x5ed9ed['_id'],'isAdmin':!0x1,'name':_0x5ed9ed[_0x2c5fad(0x60f)],'imgUrl':_0x5ed9ed[_0x2c5fad(0x807)]}))[_0x2c5fad(0x426)](_0xedb2c7=>{const _0x183fa5=_0x2c5fad;_0x1baef3[_0x183fa5(0x456)](_0x1491cb=>_0x1491cb['id']===_0xedb2c7['id'])||(_0x1baef3[_0x183fa5(0x7f1)](_0xedb2c7),this[_0x183fa5(0x563)][_0x183fa5(0x636)](_0x183fa5(0x65a)+JSON['stringify'](_0xedb2c7)));});break;case _0x2c5fad(0x32f):_0x1baef3=_0x1baef3[_0x2c5fad(0x411)](_0x1297a0=>!_0xbaf8de[_0x2c5fad(0x5ea)][_0x2c5fad(0x5f5)](_0x1297a0['id']));break;case'promote':_0x1baef3=_0x1baef3['map'](_0x519534=>_0xbaf8de[_0x2c5fad(0x5ea)][_0x2c5fad(0x5f5)](_0x519534['id'])?{..._0x519534,'isAdmin':!0x0,'admin':_0x2c5fad(0x747)}:_0x519534);break;case _0x2c5fad(0x76f):_0x1baef3=_0x1baef3[_0x2c5fad(0x347)](_0x1f9227=>_0xbaf8de[_0x2c5fad(0x5ea)]['includes'](_0x1f9227['id'])?{..._0x1f9227,'isAdmin':!0x1,'admin':null}:_0x1f9227);break;}let _0x3da0ff=_0x1baef3['length'],_0xef4aff=_0x1baef3[_0x2c5fad(0x456)](_0x45aef3=>_0x45aef3['id']===this['instance']['wuid']+_0x2c5fad(0x8b3)),_0xb30f57=_0xef4aff&&_0x1baef3[_0x2c5fad(0x456)](_0x224d30=>_0x224d30['id']===this[_0x2c5fad(0x568)][_0x2c5fad(0x72d)]+_0x2c5fad(0x8b3)&&_0x224d30['admin']!=null)||!0x1,_0x2eca41=_0xef4aff&&(!_0x278d5d[_0x2c5fad(0x3d8)][_0x2c5fad(0x635)]||_0xb30f57)&&(!_0x278d5d['groupdata'][_0x2c5fad(0x443)]||_0x278d5d[_0x2c5fad(0x3d8)]['isCommunity']&&_0xb30f57);await this[_0x2c5fad(0x6c6)]['chat']['updateOne']({'where':{'_id':_0xbaf8de['id']}},{'groupdata':{..._0x278d5d[_0x2c5fad(0x3d8)],'participants':_0x1baef3,'size':_0x3da0ff,'isAdmin':_0xb30f57,'canSendMessage':_0x2eca41}},this['instance'][_0x2c5fad(0x72d)]),this['logger'][_0x2c5fad(0x636)](this[_0x2c5fad(0x616)]+'\x20('+this[_0x2c5fad(0x568)][_0x2c5fad(0x72d)]+_0x2c5fad(0x6a7)+_0xbaf8de['id']+'\x20atualizado\x20com\x20sucesso.\x20Ao:\x20'+_0xbaf8de['action']+_0x2c5fad(0x5dc)+_0x3da0ff+',\x20isAdmin:\x20'+_0xb30f57+_0x2c5fad(0x2ac)+_0x2eca41);}async[a0_0x4bc873(0x6fc)](_0x2210b0,_0x14cbc0=!0x0){const _0x425190=a0_0x4bc873;try{let _0xac4e90=await this[_0x425190(0x877)][_0x425190(0x6c3)](_0x2210b0['groupJid']),_0x12c28e={'groupdata.inviteCode':_0x425190(0x855)+_0xac4e90};if(_0x14cbc0){let _0xaa5439=await this[_0x425190(0x6c6)][_0x425190(0x69a)]['updateOne']({'where':{'_id':_0x2210b0[_0x425190(0x31d)]}},_0x12c28e,this['instance'][_0x425190(0x72d)]);}return{'inviteUrl':_0x425190(0x855)+_0xac4e90,'inviteCode':_0xac4e90};}catch(_0x3e16ba){let _0x345836=_0x425190(0x3f0),_0x107683=_0x3e16ba instanceof Error?_0x3e16ba[_0x425190(0x805)]:typeof _0x3e16ba==_0x425190(0x801)?JSON[_0x425190(0x573)](_0x3e16ba):_0x3e16ba,_0x1cfe75=_0x345836+':\x20'+_0x107683;throw this[_0x425190(0x563)]['error'](this[_0x425190(0x616)]+'\x20('+this['instance'][_0x425190(0x72d)]+_0x425190(0x6c0)+_0x1cfe75),new U(_0x1cfe75);}}async['revokeInviteCode'](_0x223c22){const _0x32463a=a0_0x4bc873;try{let _0x110082=await this['client'][_0x32463a(0x55b)](_0x223c22[_0x32463a(0x31d)]);return{'revoked':!0x0,'inviteUrl':_0x32463a(0x855)+_0x110082,'inviteCode':_0x110082};}catch(_0x2eeb8a){let _0xbe4586='Falha\x20ao\x20processar\x20a\x20solicitao\x20revokeInviteCode',_0x2e27e6=_0x2eeb8a instanceof Error?_0x2eeb8a[_0x32463a(0x805)]:typeof _0x2eeb8a=='object'?JSON['stringify'](_0x2eeb8a):_0x2eeb8a,_0x88343b=_0xbe4586+':\x20'+_0x2e27e6;throw this[_0x32463a(0x563)][_0x32463a(0x47a)](this[_0x32463a(0x616)]+'\x20('+this[_0x32463a(0x568)]['wuid']+_0x32463a(0x6c0)+_0x88343b),new U(_0x88343b);}}async[a0_0x4bc873(0x498)](_0x1ec42b){const _0x5dfdb6=a0_0x4bc873;try{if((0x0,J[_0x5dfdb6(0x5a7)])(_0x1ec42b[_0x5dfdb6(0x6fc)]))var _0x1a8adb=_0x1ec42b[_0x5dfdb6(0x6fc)][_0x5dfdb6(0x51b)]('/')[0x3];else var _0x1a8adb=_0x1ec42b['inviteCode'];let _0x67fd57=await this['client']['groupAcceptInvite'](_0x1a8adb);return this['logger'][_0x5dfdb6(0x377)](this[_0x5dfdb6(0x616)]+'\x20('+this[_0x5dfdb6(0x568)][_0x5dfdb6(0x72d)]+_0x5dfdb6(0x6c0)+_0x67fd57),{'join':!0x0,'inviteCode':_0x1a8adb,'groupJid':_0x67fd57};}catch(_0x1ea7c8){let _0x5a1a64=_0x5dfdb6(0x21d),_0x5bfeda=_0x1ea7c8 instanceof Error?_0x1ea7c8[_0x5dfdb6(0x805)]:typeof _0x1ea7c8=='object'?JSON[_0x5dfdb6(0x573)](_0x1ea7c8):_0x1ea7c8,_0x284528=_0x5a1a64+':\x20'+_0x5bfeda;throw this[_0x5dfdb6(0x563)][_0x5dfdb6(0x47a)](this[_0x5dfdb6(0x616)]+'\x20('+this[_0x5dfdb6(0x568)]['wuid']+_0x5dfdb6(0x6c0)+_0x284528),new U(_0x284528);}}async[a0_0x4bc873(0x42d)](_0x4f21d3){const _0x5a8c36=a0_0x4bc873;try{return{'participants':(await this[_0x5a8c36(0x6c6)][_0x5a8c36(0x69a)][_0x5a8c36(0x6e7)]({'where':{'_id':_0x4f21d3[_0x5a8c36(0x31d)]}},this[_0x5a8c36(0x568)][_0x5a8c36(0x72d)]))['groupdata']['participants']};}catch(_0xf1e62f){let _0x4ad28c='Falha\x20ao\x20processar\x20a\x20solicitao\x20findParticipants',_0x587deb=_0xf1e62f instanceof Error?_0xf1e62f[_0x5a8c36(0x805)]:typeof _0xf1e62f==_0x5a8c36(0x801)?JSON[_0x5a8c36(0x573)](_0xf1e62f):_0xf1e62f,_0x2e84e7=_0x4ad28c+':\x20'+_0x587deb;throw this[_0x5a8c36(0x563)]['error'](this[_0x5a8c36(0x616)]+'\x20('+this[_0x5a8c36(0x568)][_0x5a8c36(0x72d)]+_0x5a8c36(0x6c0)+_0x2e84e7),new U(_0x2e84e7);}}async[a0_0x4bc873(0x57c)](_0x48eb77){const _0x4f7d90=a0_0x4bc873;try{return await this[_0x4f7d90(0x877)][_0x4f7d90(0x380)](_0x48eb77[_0x4f7d90(0x31d)]),{'groupJid':_0x48eb77[_0x4f7d90(0x31d)],'leave':!0x0};}catch(_0x47dfa1){let _0x451a47=_0x4f7d90(0x88a),_0xa10c9a=_0x47dfa1 instanceof Error?_0x47dfa1['message']:typeof _0x47dfa1==_0x4f7d90(0x801)?JSON['stringify'](_0x47dfa1):_0x47dfa1,_0x1e8241=_0x451a47+':\x20'+_0xa10c9a;throw this[_0x4f7d90(0x563)][_0x4f7d90(0x47a)](this[_0x4f7d90(0x616)]+'\x20('+this[_0x4f7d90(0x568)][_0x4f7d90(0x72d)]+_0x4f7d90(0x6c0)+_0x1e8241),new m(_0x1e8241);}}async[a0_0x4bc873(0x76c)](_0x84186f){const _0x3c0e57=a0_0x4bc873;return await this[_0x3c0e57(0x728)](_0x84186f['number'],{'poll':{'name':_0x84186f[_0x3c0e57(0x76c)]?.[_0x3c0e57(0x60f)],'selectableCount':_0x84186f[_0x3c0e57(0x76c)][_0x3c0e57(0x31a)],'values':_0x84186f[_0x3c0e57(0x76c)][_0x3c0e57(0x5b2)]}},_0x84186f?.['options']);}async[a0_0x4bc873(0x3d5)](_0x2d7fed){const _0x46f93c=a0_0x4bc873;return await this[_0x46f93c(0x728)](_0x2d7fed['number'],{'listMessage':{'title':_0x2d7fed[_0x46f93c(0x3d5)]['title'],'description':_0x2d7fed['listMessage'][_0x46f93c(0x2e5)],'buttonText':_0x2d7fed[_0x46f93c(0x3d5)]?.['buttonText'],'footerText':_0x2d7fed[_0x46f93c(0x3d5)]?.['footerText'],'sections':_0x2d7fed[_0x46f93c(0x3d5)][_0x46f93c(0x49d)],'listType':0x2}},_0x2d7fed?.[_0x46f93c(0x466)]);}async[a0_0x4bc873(0x299)](_0x480eb7){const _0x32b276=a0_0x4bc873;this['instance'][_0x32b276(0x804)]===void 0x0&&await this[_0x32b276(0x86a)](),_0x480eb7[_0x32b276(0x299)][_0x32b276(0x8c8)]==='list'&&!this[_0x32b276(0x568)]['isBusiness']&&(_0x480eb7[_0x32b276(0x299)][_0x32b276(0x8c8)]=_0x32b276(0x7c7));let _0x338485;if(_0x480eb7['menuMessage'][_0x32b276(0x8c8)]===_0x32b276(0x7c7)){let _0x1ffa56=_0x480eb7[_0x32b276(0x299)]['text'][_0x32b276(0x87e)]('\x0a'),_0x290c8f='',_0xb638fb='';_0x1ffa56!==-0x1?(_0x290c8f=_0x480eb7[_0x32b276(0x299)][_0x32b276(0x23c)]['substring'](0x0,_0x1ffa56)[_0x32b276(0x4cf)](),_0xb638fb=_0x480eb7[_0x32b276(0x299)][_0x32b276(0x23c)]['substring'](_0x1ffa56+0x1)):_0xb638fb=_0x480eb7[_0x32b276(0x299)][_0x32b276(0x23c)];let _0x4e8acd=_0x480eb7[_0x32b276(0x299)][_0x32b276(0x5dd)][_0x32b276(0x411)](_0x42da53=>_0x42da53['trim']()!==''),_0x6ee96e=this[_0x32b276(0x391)](_0x4e8acd);_0x338485={'listMessage':{'title':_0x290c8f,'description':_0xb638fb,'buttonText':_0x480eb7[_0x32b276(0x299)][_0x32b276(0x6c7)]||'Selecione','footerText':_0x480eb7['menuMessage']['footerText'],'sections':_0x6ee96e,'listType':0x2}};}else{if(_0x480eb7[_0x32b276(0x299)][_0x32b276(0x8c8)]===_0x32b276(0x2c9)){let _0x4f1b28=_0x480eb7[_0x32b276(0x299)][_0x32b276(0x5dd)][_0x32b276(0x411)](_0xd569cb=>!(_0xd569cb[_0x32b276(0x668)]('[')&&_0xd569cb[_0x32b276(0x6c8)](']'))&&_0xd569cb[_0x32b276(0x4cf)]()!=='')[_0x32b276(0x347)](_0x268d74=>_0x268d74[_0x32b276(0x51b)]('\x0a')[0x0]);for(;_0x4f1b28[_0x32b276(0x825)]<0x2;)_0x4f1b28[_0x32b276(0x7f1)](_0x32b276(0x46c)+(_0x4f1b28[_0x32b276(0x825)]+0x1));_0x338485={'poll':{'name':_0x480eb7[_0x32b276(0x299)][_0x32b276(0x23c)],'selectableCount':_0x480eb7['menuMessage']['selectableCount']||0x1,'values':_0x4f1b28}};}else{if(_0x480eb7['menuMessage'][_0x32b276(0x8c8)]===_0x32b276(0x250)){let _0x5ca796=this[_0x32b276(0x8c7)](_0x480eb7['menuMessage'][_0x32b276(0x5dd)][_0x32b276(0x411)](_0x34b381=>!(_0x34b381[_0x32b276(0x668)]('[')&&_0x34b381['endsWith'](']'))));return _0x338485={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x480eb7[_0x32b276(0x299)][_0x32b276(0x23c)]},'footer':_0x480eb7[_0x32b276(0x299)][_0x32b276(0x3c1)]?{'text':_0x480eb7[_0x32b276(0x299)]['footerText']}:void 0x0,'nativeFlowMessage':{'buttons':_0x5ca796,'messageParamsJson':JSON['stringify']({'from':'api','templateId':'3EB0'+(0x0,ne[_0x32b276(0x80d)])(0x12)[_0x32b276(0x529)](_0x32b276(0x78b))[_0x32b276(0x212)]()})}}}}},await this['sendMessageWithTypingButtons'](_0x480eb7[_0x32b276(0x8e3)],_0x338485,_0x480eb7?.[_0x32b276(0x466)]);}else{if(_0x480eb7[_0x32b276(0x299)][_0x32b276(0x8c8)]==='list'){let _0x585e6a=this[_0x32b276(0x929)](_0x480eb7['menuMessage']['choices']);return _0x338485={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x480eb7[_0x32b276(0x299)]['text']},'footer':_0x480eb7[_0x32b276(0x299)][_0x32b276(0x3c1)]?{'text':_0x480eb7['menuMessage']['footerText']}:void 0x0,'nativeFlowMessage':{'buttons':_0x585e6a,'messageParamsJson':JSON[_0x32b276(0x573)]({'from':_0x32b276(0x3f6),'templateId':_0x32b276(0x7c0)+(0x0,ne[_0x32b276(0x80d)])(0x12)[_0x32b276(0x529)](_0x32b276(0x78b))[_0x32b276(0x212)]()})}}}}},await this['sendMessageWithTypingButtons'](_0x480eb7[_0x32b276(0x8e3)],_0x338485,_0x480eb7?.['options']);}}}}return await this['sendMessageWithTyping'](_0x480eb7[_0x32b276(0x8e3)],_0x338485,_0x480eb7?.[_0x32b276(0x466)]);}[a0_0x4bc873(0x8c7)](_0x748bc9){const _0x1fc46a=a0_0x4bc873;return _0x748bc9[_0x1fc46a(0x347)](_0x21cf32=>{const _0x5b0234=_0x1fc46a;let _0x28e2d0=_0x21cf32['split']('\x0a')[_0x5b0234(0x347)](_0x3b8d4f=>_0x3b8d4f[_0x5b0234(0x4cf)]()),_0x3e5949=_0x28e2d0[0x0],_0x1a2ede=_0x28e2d0[0x1]||_0x3e5949,_0x1220f3=_0x1a2ede['startsWith'](_0x5b0234(0x378))?_0x5b0234(0x2b1):'quick_reply';return{'name':_0x1220f3,'buttonParamsJson':JSON[_0x5b0234(0x573)]({'display_text':_0x3e5949,'id':_0x1220f3===_0x5b0234(0x62c)?_0x1a2ede:void 0x0,'url':_0x1220f3===_0x5b0234(0x2b1)?_0x1a2ede:void 0x0})};});}[a0_0x4bc873(0x929)](_0x287ede){const _0x4492c2=a0_0x4bc873;let _0x4cf43b=[],_0x14522a={'title':'','rows':[]};return _0x287ede[_0x4492c2(0x426)](_0x44bfd2=>{const _0xc007ff=_0x4492c2;if(_0x44bfd2[_0xc007ff(0x668)]('[')&&_0x44bfd2[_0xc007ff(0x6c8)](']'))_0x14522a[_0xc007ff(0x93a)][_0xc007ff(0x825)]>0x0&&_0x4cf43b['push'](_0x14522a),_0x14522a={'title':_0x44bfd2[_0xc007ff(0x5de)](0x1,-0x1),'rows':[]};else{let _0x494cb3=_0x44bfd2[_0xc007ff(0x51b)]('\x0a')[_0xc007ff(0x347)](_0x1b6926=>_0x1b6926[_0xc007ff(0x4cf)]()),_0x127870=_0x494cb3[0x0],_0x4c0b2f=_0x494cb3[0x1]?_0x494cb3[0x1]:void 0x0,_0x4f6f0f=_0x494cb3[0x2]||_0x127870;_0x14522a['rows'][_0xc007ff(0x7f1)]({'title':_0x127870,'description':_0x4c0b2f,'id':_0x4f6f0f});}}),_0x14522a[_0x4492c2(0x93a)][_0x4492c2(0x825)]>0x0&&_0x4cf43b[_0x4492c2(0x7f1)](_0x14522a),[{'name':_0x4492c2(0x641),'buttonParamsJson':JSON[_0x4492c2(0x573)]({'title':'Selecione\x20uma\x20opo','sections':_0x4cf43b})}];}[a0_0x4bc873(0x391)](_0x6cbe40){const _0x2533cb=a0_0x4bc873;let _0x517f4=[],_0x457267={'rows':[]};return _0x6cbe40['forEach'](_0xb4bfed=>{const _0x3637e7=a0_0x59bb;if(_0xb4bfed['startsWith']('[')&&_0xb4bfed[_0x3637e7(0x6c8)](']'))_0x457267[_0x3637e7(0x93a)][_0x3637e7(0x825)]>0x0&&_0x517f4[_0x3637e7(0x7f1)](_0x457267),_0x457267={'title':_0xb4bfed[_0x3637e7(0x5de)](0x1,-0x1),'rows':[]};else{let _0x5d2e8d=_0xb4bfed[_0x3637e7(0x51b)]('\x0a')[_0x3637e7(0x347)](_0x59989b=>_0x59989b['trim']()),_0x5070d0=_0x5d2e8d[0x0],_0x3cf9f8=_0x5d2e8d[0x1]||null,_0x30efd1=_0x5d2e8d[0x2]||_0x5070d0;_0x457267[_0x3637e7(0x93a)][_0x3637e7(0x7f1)]({'title':_0x5070d0,'description':_0x3cf9f8,'rowId':_0x30efd1});}}),_0x457267[_0x2533cb(0x93a)][_0x2533cb(0x825)]>0x0&&_0x517f4[_0x2533cb(0x7f1)](_0x457267),_0x517f4;}async['updateMessage'](_0x32a3bc,_0x1bfa0a){const _0x2ef7f3=a0_0x4bc873;if(await this[_0x2ef7f3(0x649)](_0x32a3bc,!0x0)){let _0x52700d={'where':{'_id':_0x32a3bc['id']}},_0xc3ccc7={'status':[_0x1bfa0a[_0x2ef7f3(0x4ed)]][0x0]};try{let _0x33fb3a=await this[_0x2ef7f3(0x6c6)][_0x2ef7f3(0x805)][_0x2ef7f3(0x275)](_0x52700d,_0xc3ccc7,this['instance'][_0x2ef7f3(0x72d)]);_0x33fb3a&&F(this[_0x2ef7f3(0x616)],_0x2ef7f3(0x88d),{'message':_0x33fb3a});}catch{}}}[a0_0x4bc873(0x7e5)](_0x3c366a){const _0x5dffa5=a0_0x4bc873;let _0x5541e5=[];return _0x3c366a[_0x5dffa5(0x426)](_0x44448e=>{const _0xc7894a=_0x5dffa5;_0x44448e[_0xc7894a(0x33a)]&&_0x5541e5[_0xc7894a(0x7f1)]('['+_0x44448e['title']+']'),_0x44448e['rows'][_0xc7894a(0x426)](_0x5dafbc=>{const _0x11dd09=_0xc7894a;_0x5541e5[_0x11dd09(0x7f1)](_0x5dafbc[_0x11dd09(0x33a)]);});}),_0x5541e5[_0x5dffa5(0x6a2)]('|');}[a0_0x4bc873(0x71a)](_0x2c4622){const _0x457d08=a0_0x4bc873;let _0x3ae032=_0x2c4622[_0x457d08(0x242)](/\\n/g,'\x0a')['split']('\x0a')[_0x457d08(0x411)](_0x19b7e3=>_0x19b7e3[_0x457d08(0x5f5)](_0x457d08(0x6a1))||_0x19b7e3[_0x457d08(0x5f5)](_0x457d08(0x34b))),_0x1d9f46='';return _0x3ae032[_0x457d08(0x426)](_0x558553=>{const _0x3cf04a=_0x457d08;let _0xb32a25=/TEL(?:.*):(.+)/,_0x2bb7cf=/EMAIL(?:.*):(.+)/,_0x4654af=_0x558553[_0x3cf04a(0x60b)](_0xb32a25),_0x5e415f=_0x558553[_0x3cf04a(0x60b)](_0x2bb7cf);if(_0x4654af){let _0x161a72=_0x4654af[0x1][_0x3cf04a(0x242)](/-| |\+|\(|\)/g,'')['trim']();_0x1d9f46+=_0x3cf04a(0x756)+_0x161a72+'\x0a';}else{if(_0x5e415f){let _0x5012b5=_0x5e415f[0x1][_0x3cf04a(0x4cf)]();_0x1d9f46+=_0x3cf04a(0x4ce)+_0x5012b5+'\x0a';}}}),_0x1d9f46['trim']();}async[a0_0x4bc873(0x389)](_0x3efd40,_0x1780d9,_0x581da4,_0x2979b9=null){const _0x1ed787=a0_0x4bc873;if(_0x3efd40[_0x1ed787(0x8f9)])try{let _0x48028b=_0x1780d9[_0x1ed787(0x678)]['remoteJid']['replace'](/:\d{1,2}@/g,'@'),_0x4170bb=_0x1780d9[_0x1ed787(0x678)]['fromMe'],_0x2a7d1f=_0x48028b['endsWith'](_0x1ed787(0x342)),_0x4bfd44=_0x1780d9[_0x1ed787(0x406)]?.[_0x1ed787(0x242)](/:\d{1,2}@/g,'@')||'',_0x1ab305=_0x1780d9['message_normalized']?.['text']||_0x1780d9[_0x1ed787(0x537)]?.[_0x1ed787(0x52b)]||_0x1780d9[_0x1ed787(0x537)]?.['vote']||_0x1780d9[_0x1ed787(0x537)]?.[_0x1ed787(0x60f)]||'',_0xdfdab8={'_id':_0x1780d9[_0x1ed787(0x618)],'remoteJid':_0x4170bb?this[_0x1ed787(0x568)][_0x1ed787(0x72d)]:_0x2a7d1f?_0x4bfd44:_0x48028b,'pushName':_0x4170bb?this[_0x1ed787(0x568)][_0x1ed787(0x492)]||'Eu':_0x1780d9['pushName'],'text':_0x1ab305,'type':_0x1780d9[_0x1ed787(0x5fe)],'when':_0x1780d9[_0x1ed787(0x717)]||Date[_0x1ed787(0x3bd)]()};_0x2979b9||(_0x2979b9=await this[_0x1ed787(0x6c6)]['chat'][_0x1ed787(0x6e7)]({'where':{'_id':_0x48028b}},this['instance'][_0x1ed787(0x72d)]));let _0x229091=_0x4170bb?0x0:_0x2979b9?(_0x2979b9[_0x1ed787(0x32b)]||0x0)+0x1:0x1,_0x165c8e={'lastmsg':_0x1780d9[_0x1ed787(0x717)]||Date[_0x1ed787(0x3bd)](),'ephemeralExpiration':_0x1780d9[_0x1ed787(0x270)],'lastMessage':_0xdfdab8,'unreadcount':_0x229091,..._0x4170bb||_0x2a7d1f?{}:{'name':_0x1780d9[_0x1ed787(0x687)]},..._0x2a7d1f?{'group':_0x2a7d1f}:{},...!_0x4170bb&&!_0x2a7d1f&&_0x1780d9[_0x1ed787(0x72a)]?{'imagechat':_0x1780d9[_0x1ed787(0x72a)]}:{}};if(!_0x2a7d1f&&(!_0x2979b9?.[_0x1ed787(0x344)]||!_0x2979b9[_0x1ed787(0x344)][_0x1ed787(0x37c)])&&_0x1780d9['pushName']&&!_0x4170bb&&(_0x165c8e={..._0x165c8e,'leadInfo.nome':_0x1780d9[_0x1ed787(0x687)]}),_0x2979b9?.['leadInfo']['etiquetas']||(_0x165c8e={..._0x165c8e,'leadInfo.etiquetas':[]}),_0x2979b9?.[_0x1ed787(0x344)][_0x1ed787(0x64e)]||(_0x165c8e={..._0x165c8e,'leadInfo.customFields':[]}),_0x2979b9?.[_0x1ed787(0x344)]['tags']||(_0x165c8e={..._0x165c8e,'leadInfo.tags':[]}),_0x2979b9&&_0x2979b9?.[_0x1ed787(0x3dd)]){let _0x1655cc=await this['repository']['label']['find']({'where':{}},this[_0x1ed787(0x568)][_0x1ed787(0x72d)]),_0x2b0220=new Set(_0x1655cc[_0x1ed787(0x347)](_0x216cda=>_0x216cda[_0x1ed787(0x618)])),_0xe2a6e0=(_0x2979b9[_0x1ed787(0x344)]?.['etiquetas']||[])['filter'](_0x53fa23=>_0x2b0220[_0x1ed787(0x772)](_0x53fa23));_0x165c8e={..._0x165c8e,'imported':!0x1,'leadInfo.etiquetas':_0xe2a6e0};for(let _0x291769 of _0xe2a6e0)await this[_0x1ed787(0x35c)](_0x291769,_0x48028b);}if(!this['AutomateSystem'][_0x1ed787(0x25d)][_0x1ed787(0x8aa)](_0x2e04a6=>_0x2e04a6['startCommand']&&_0x1ab305[_0x1ed787(0x5f5)](_0x2e04a6['startCommand']))&&_0x581da4===_0x1ed787(0x4ea)&&_0x4170bb&&this['AutomateSystem']?.[_0x1ed787(0x92b)][_0x1ed787(0x896)]&&_0x1ab305[_0x1ed787(0x4cf)]()!==this['AutomateSystem']?.['flowConfig']['stopConversation'][_0x1ed787(0x4cf)]()){let _0xe98fdd=(this['AutomateSystem']?.['flowConfig'][_0x1ed787(0x53d)]||0x0)*0xea60,_0x3459c0=Date[_0x1ed787(0x3bd)]()+_0xe98fdd;_0x2979b9?.[_0x1ed787(0x344)]?.[_0x1ed787(0x61b)]===0x0||(_0x165c8e={..._0x165c8e,'leadInfo.desativadoFluxoAte':_0x3459c0},this[_0x1ed787(0x563)][_0x1ed787(0x377)](this[_0x1ed787(0x616)]+'\x20('+this[_0x1ed787(0x568)][_0x1ed787(0x72d)]+'):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20at\x20'+_0x3459c0+'.'));}if(_0x1ab305['trim']()===this[_0x1ed787(0x5a5)]?.[_0x1ed787(0x92b)]['stopConversation'][_0x1ed787(0x4cf)]()){this[_0x1ed787(0x563)][_0x1ed787(0x377)](this[_0x1ed787(0x616)]+'\x20('+this['instance'][_0x1ed787(0x72d)]+_0x1ed787(0x68c)+_0x1ab305);let _0x3225a3=Date[_0x1ed787(0x3bd)]();this[_0x1ed787(0x5a5)]?.['flowConfig'][_0x1ed787(0x3a8)]===0x0?_0x165c8e={..._0x165c8e,'leadInfo.desativadoFluxoAte':_0x3225a3+0x7591f6200}:_0x165c8e={..._0x165c8e,'leadInfo.desativadoFluxoAte':_0x3225a3+this[_0x1ed787(0x5a5)]?.[_0x1ed787(0x92b)]['stopMinutes']*0x3c*0x3e8};}if(_0x2979b9=await this['repository']['chat'][_0x1ed787(0x7eb)]({'where':{'_id':_0x48028b}},_0x165c8e,this[_0x1ed787(0x568)][_0x1ed787(0x72d)],{'new':!0x0,'upsert':!0x0}),_0x2979b9)F(this[_0x1ed787(0x616)],_0x1ed787(0x85a),{'chat':_0x2979b9});else{this['logger']['error'](this['instanceName']+'\x20('+this[_0x1ed787(0x568)]['wuid']+'):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat');return;}if(_0x4170bb)return this['logger']['verbose'](this[_0x1ed787(0x616)]+'\x20('+this[_0x1ed787(0x568)][_0x1ed787(0x72d)]+'):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...'),null;if(!this['AutomateSystem']?.[_0x1ed787(0x92b)][_0x1ed787(0x896)])return this[_0x1ed787(0x563)][_0x1ed787(0x377)](this[_0x1ed787(0x616)]+'\x20('+this['instance'][_0x1ed787(0x72d)]+_0x1ed787(0x69d)),null;if(_0x2979b9['_id']['includes'](_0x1ed787(0x342))&&this['AutomateSystem']?.['flowConfig'][_0x1ed787(0x652)]===!0x0)return this[_0x1ed787(0x563)][_0x1ed787(0x377)](this[_0x1ed787(0x616)]+'\x20('+this[_0x1ed787(0x568)][_0x1ed787(0x72d)]+'):\x20Ignoring\x20group\x20messages.'),null;if(_0x2979b9['leadInfo']){if(_0x2979b9[_0x1ed787(0x344)][_0x1ed787(0x61b)]===0x0||_0x2979b9['leadInfo'][_0x1ed787(0x6e1)])return this['logger'][_0x1ed787(0x377)](this[_0x1ed787(0x616)]+'\x20('+this[_0x1ed787(0x568)]['wuid']+_0x1ed787(0x1e8)+_0x48028b+_0x1ed787(0x519)),null;if(_0x2979b9[_0x1ed787(0x344)][_0x1ed787(0x61b)]>Date[_0x1ed787(0x3bd)]()&&!_0x1780d9[_0x1ed787(0x537)]?.[_0x1ed787(0x7f5)])return this[_0x1ed787(0x563)][_0x1ed787(0x377)](this[_0x1ed787(0x616)]+'\x20('+this[_0x1ed787(0x568)][_0x1ed787(0x72d)]+'):\x20Est\x20configurado\x20para\x20parar\x20at\x20'+new Date(_0x2979b9['leadInfo'][_0x1ed787(0x61b)])[_0x1ed787(0x776)]()+_0x1ed787(0x519)),null;}this[_0x1ed787(0x563)][_0x1ed787(0x377)](this[_0x1ed787(0x616)]+'\x20('+this[_0x1ed787(0x568)][_0x1ed787(0x72d)]+_0x1ed787(0x2fd)),this[_0x1ed787(0x20a)](_0x1780d9,_0x581da4);}catch(_0x5a5a84){let _0x5aa684=_0x1ed787(0x441),_0x39428f=_0x5a5a84 instanceof Error?_0x5a5a84['message']:typeof _0x5a5a84=='object'?JSON[_0x1ed787(0x573)](_0x5a5a84):_0x5a5a84,_0x3f6078=_0x5aa684+':\x20'+_0x39428f;return this[_0x1ed787(0x563)][_0x1ed787(0x47a)](this['instanceName']+'\x20('+this['instance'][_0x1ed787(0x72d)]+_0x1ed787(0x6c0)+_0x3f6078),null;}}async[a0_0x4bc873(0x4a1)](_0x565c3e,_0x538747){const _0x42fdb1=a0_0x4bc873;if(_0x538747[_0x42fdb1(0x8f9)]){let _0x4d191c=_0x565c3e[_0x42fdb1(0x347)](async _0x2929a6=>{const _0x2a41ff=_0x42fdb1;try{let _0x58a3fd={'_id':_0x2929a6['_id'],'owner':_0x2929a6[_0x2a41ff(0x6dd)],'lastcache':0x0};if(Object['keys'](_0x2929a6)[_0x2a41ff(0x426)](_0x36d295=>{_0x2929a6[_0x36d295]!==null&&(_0x58a3fd[_0x36d295]=_0x2929a6[_0x36d295]);}),_0x58a3fd[_0x2a41ff(0x530)]===null&&(_0x58a3fd[_0x2a41ff(0x530)]='Imagem\x20no\x20encontrada'),Object[_0x2a41ff(0x419)](_0x58a3fd)[_0x2a41ff(0x825)]>0x0)return await this[_0x2a41ff(0x6c6)][_0x2a41ff(0x69a)][_0x2a41ff(0x7eb)]({'where':{'_id':_0x2929a6[_0x2a41ff(0x618)]}},_0x58a3fd,this[_0x2a41ff(0x568)]['wuid']);}catch(_0x41031c){let _0x3df8b3=_0x2a41ff(0x868)+_0x2929a6[_0x2a41ff(0x618)],_0x3b382b=_0x41031c instanceof Error?_0x41031c[_0x2a41ff(0x805)]:typeof _0x41031c=='object'?JSON[_0x2a41ff(0x573)](_0x41031c):_0x41031c,_0x3b3df0=_0x3df8b3+':\x20'+_0x3b382b;return this[_0x2a41ff(0x563)][_0x2a41ff(0x47a)](this['instanceName']+'\x20('+this[_0x2a41ff(0x568)][_0x2a41ff(0x72d)]+_0x2a41ff(0x6c0)+_0x3b3df0),null;}}),_0x10880d=(await Promise['all'](_0x4d191c))[_0x42fdb1(0x411)](_0x1c22b5=>_0x1c22b5!==null)[_0x42fdb1(0x825)];this['logger'][_0x42fdb1(0x377)](this[_0x42fdb1(0x616)]+'\x20('+this[_0x42fdb1(0x568)][_0x42fdb1(0x72d)]+_0x42fdb1(0x6c0)+_0x10880d+'\x20chats\x20de\x20'+this['instance'][_0x42fdb1(0x72d)]+_0x42fdb1(0x44e));}}async[a0_0x4bc873(0x7d3)](_0x2f42e7){const _0x274e4c=a0_0x4bc873;this[_0x274e4c(0x563)][_0x274e4c(0x377)](this['instanceName']+'\x20('+this[_0x274e4c(0x568)][_0x274e4c(0x72d)]+_0x274e4c(0x435));let _0x23ba9f={'readMessages':[{'remoteJid':_0x2f42e7['chatLog']['lastReceivedMessage'][_0x274e4c(0x678)][_0x274e4c(0x8d4)],'fromMe':_0x2f42e7[_0x274e4c(0x590)][_0x274e4c(0x259)][_0x274e4c(0x678)][_0x274e4c(0x45e)],'id':_0x2f42e7[_0x274e4c(0x590)][_0x274e4c(0x259)][_0x274e4c(0x678)]['id']}]};await this[_0x274e4c(0x325)](_0x23ba9f);}async[a0_0x4bc873(0x20a)](_0x54fb8d,_0x122efb){const _0x3fd199=a0_0x4bc873;try{let {key:_0x575e81,message_normalized:_0x3b3041}=_0x54fb8d,_0x56963b=_0x3b3041,_0x3a8eab=_0x3b3041['text']||_0x3b3041['caption']||_0x3b3041[_0x3fd199(0x7f5)]||_0x3b3041['name']||'',_0x2992e5=_0x575e81[_0x3fd199(0x8d4)],_0xcecba8=null,_0x3e4bf1=this[_0x3fd199(0x5a5)][_0x3fd199(0x25d)]['find'](_0x3c57fe=>_0x3c57fe['startCommand']&&_0x3a8eab['includes'](_0x3c57fe['startCommand']));if(_0x3e4bf1&&_0x122efb===_0x3fd199(0x4ea)){let _0x47107b=await this['repository'][_0x3fd199(0x20f)][_0x3fd199(0x6e7)]({'where':{'_id':_0x3e4bf1[_0x3fd199(0x618)]}});if(this[_0x3fd199(0x563)][_0x3fd199(0x377)](this[_0x3fd199(0x616)]+'\x20('+this[_0x3fd199(0x568)][_0x3fd199(0x72d)]+_0x3fd199(0x48c)),_0x47107b&&_0x47107b[_0x3fd199(0x7ee)]?.[_0x3fd199(0x5f5)](this[_0x3fd199(0x568)][_0x3fd199(0x72d)]))_0xcecba8=await this[_0x3fd199(0x548)](_0x47107b,_0x575e81,_0x56963b);else return this['logger']['verbose'](this[_0x3fd199(0x616)]+'\x20('+this[_0x3fd199(0x568)][_0x3fd199(0x72d)]+_0x3fd199(0x539)),null;}else this[_0x3fd199(0x563)][_0x3fd199(0x377)](this[_0x3fd199(0x616)]+'\x20('+this[_0x3fd199(0x568)][_0x3fd199(0x72d)]+_0x3fd199(0x535));if(_0xcecba8=await this[_0x3fd199(0x49f)](_0x2992e5,_0x56963b),_0xcecba8){this[_0x3fd199(0x563)][_0x3fd199(0x377)](this[_0x3fd199(0x616)]+'\x20('+this[_0x3fd199(0x568)][_0x3fd199(0x72d)]+_0x3fd199(0x880)),!_0x575e81['fromMe']&&_0xcecba8[_0x3fd199(0x596)]&&this[_0x3fd199(0x7d3)](_0xcecba8);let _0x5a7b53=await this[_0x3fd199(0x33b)](_0xcecba8);_0x5a7b53&&await this[_0x3fd199(0x396)](_0xcecba8,_0x5a7b53);}}catch(_0x3092d5){this['logger'][_0x3fd199(0x47a)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20'+(_0x3092d5 instanceof Error?_0x3092d5[_0x3fd199(0x805)]:JSON[_0x3fd199(0x573)](_0x3092d5,null,0x2)));}}[a0_0x4bc873(0x67f)](_0x3a7894,_0x23a72d='',_0x16315f={}){const _0x41be9a=a0_0x4bc873;return typeof _0x3a7894!='object'||_0x3a7894===null?(_0x23a72d&&(_0x16315f[_0x23a72d]=_0x3a7894),_0x16315f):(Object[_0x41be9a(0x52e)](_0x3a7894)[_0x41be9a(0x426)](([_0x52dc66,_0x2dd701])=>{const _0x4c89c2=_0x41be9a;let _0x5f2376=_0x23a72d?_0x23a72d+'.'+_0x52dc66:'_'+_0x52dc66;Array[_0x4c89c2(0x719)](_0x2dd701)?_0x2dd701['forEach']((_0x5605a6,_0x3e9723)=>{const _0x321867=_0x4c89c2;this[_0x321867(0x67f)](_0x5605a6,_0x5f2376+'['+_0x3e9723+']',_0x16315f);}):typeof _0x2dd701==_0x4c89c2(0x801)&&_0x2dd701!==null?this[_0x4c89c2(0x67f)](_0x2dd701,_0x5f2376,_0x16315f):_0x16315f[_0x5f2376]=String(_0x2dd701);}),_0x16315f);}[a0_0x4bc873(0x58c)](_0x3a730c){const _0x176531=a0_0x4bc873;let _0x582c71={};for(let _0xd89e50 of _0x3a730c)typeof _0xd89e50[_0x176531(0x60f)]==_0x176531(0x792)&&typeof _0xd89e50[_0x176531(0x6fd)]==_0x176531(0x792)&&(_0x582c71[_0xd89e50['name']]=_0xd89e50['value']);return _0x582c71;}async['NextBlock'](_0x1538d0){const _0x278181=a0_0x4bc873;if(!this[_0x278181(0x5a5)]?.[_0x278181(0x92b)][_0x278181(0x896)]||_0x1538d0[_0x278181(0x4ed)]!==_0x278181(0x808)&&_0x1538d0[_0x278181(0x74e)]==='')return null;let _0x4b90dc=_0x1538d0[_0x278181(0x590)]['lastBlockId']||'start';typeof _0x1538d0[_0x278181(0x590)][_0x278181(0x87c)]>'u'&&(_0x1538d0[_0x278181(0x590)][_0x278181(0x87c)]=!0x0);let _0x791e88=_0x1538d0['chatLog'][_0x278181(0x87c)];this[_0x278181(0x563)][_0x278181(0x377)](this[_0x278181(0x616)]+'\x20('+this[_0x278181(0x568)][_0x278181(0x72d)]+_0x278181(0x322)+_0x4b90dc+',\x20lastCondition:\x20'+_0x791e88);let _0x1089f8=_0x4b90dc===_0x278181(0x3a4)?_0x1538d0[_0x278181(0x8ac)][_0x278181(0x8aa)](_0x106e9e=>_0x106e9e['type']===_0x278181(0x3a4)):_0x1538d0[_0x278181(0x8ac)][_0x278181(0x8aa)](_0x6d6d5e=>_0x6d6d5e[_0x278181(0x618)][_0x278181(0x529)]()===_0x4b90dc[_0x278181(0x529)]());if(!_0x1089f8)return this[_0x278181(0x563)]['error'](this[_0x278181(0x616)]+'\x20('+this[_0x278181(0x568)][_0x278181(0x72d)]+'):\x20currentBlock\x20\x20null.\x20No\x20foi\x20possvel\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20'+_0x4b90dc),null;let _0x5ee185={'_pushName':_0x1538d0?.['chatLog']?.[_0x278181(0x259)]?.[_0x278181(0x687)]||'','_sender':this[_0x278181(0x568)][_0x278181(0x72d)]||'',..._0x1538d0[_0x278181(0x590)]['realVariables']},_0x9af801=new Date();_0x5ee185[_0x278181(0x60a)]=_0x9af801['getDate'](),_0x5ee185[_0x278181(0x4b5)]=_0x9af801[_0x278181(0x64c)]()+0x1,_0x5ee185[_0x278181(0x6b9)]=_0x9af801[_0x278181(0x4f7)](),_0x5ee185[_0x278181(0x298)]=_0x9af801[_0x278181(0x70d)](),_0x5ee185['_minute']=_0x9af801[_0x278181(0x824)](),_0x5ee185['_second']=_0x9af801[_0x278181(0x53c)]();let _0x499268=null;if(_0x1538d0[_0x278181(0x74e)]){let _0xb67a5c=_0x1538d0[_0x278181(0x590)]['lastReceivedMessage'][_0x278181(0x7f5)],_0x3dc824=_0x1538d0['waitingMenu_replyOptions'][_0x278181(0x8aa)](_0x3ab77a=>_0x3ab77a[_0x278181(0x446)]===_0xb67a5c);if(_0x3dc824){let _0x5c9acc=_0x3dc824[_0x278181(0x482)];if(_0x499268=_0x1538d0['blocks']['find'](_0xfebbe0=>_0xfebbe0[_0x278181(0x610)]===_0x5c9acc&&_0xfebbe0['order']===0x1),_0x1089f8[_0x278181(0x473)][_0x278181(0x5a8)]){let _0x53fd9b={'id':_0x1538d0['waitingMenu_id'],'remoteJid':_0x1538d0[_0x278181(0x8d4)],'fromMe':!0x0};await this[_0x278181(0x556)](_0x53fd9b);}if(_0x1089f8[_0x278181(0x473)]['pollOnReplyDelete']&&_0x1089f8[_0x278181(0x473)][_0x278181(0x2dc)]&&_0x1089f8[_0x278181(0x473)]['menuType']===_0x278181(0x2c9)){let _0x1d2305={'number':_0x1538d0[_0x278181(0x8d4)],'options':{'delay':0x0},'textMessage':{'text':'*Pergunta*:\x20\x0a'+_0x1538d0[_0x278181(0x701)]+_0x278181(0x878)+_0xb67a5c}};await this[_0x278181(0x7a0)](_0x1d2305);}_0x5ee185['_lastVote']=_0xb67a5c,_0x1538d0[_0x278181(0x4ed)]=_0x278181(0x808),_0x1538d0['waitingMenu_id']='',_0x1538d0[_0x278181(0x701)]='',_0x1538d0[_0x278181(0x84e)]=[];}else{this[_0x278181(0x563)][_0x278181(0x377)](this['instanceName']+'\x20('+this['instance'][_0x278181(0x72d)]+_0x278181(0x35b));let _0x3ad89d={'activatedCount':_0x1538d0['chatLog'][_0x278181(0x5c0)][_0x278181(0x411)](_0x2f4105=>String(_0x2f4105[_0x278181(0x666)])===String(_0x4b90dc))[_0x278181(0x825)],'moreLogs':[_0x278181(0x5c2)]};if(_0x1089f8[_0x278181(0x473)]['pollErrorMessage']){let _0x1f8929={'number':_0x1538d0[_0x278181(0x8d4)],'options':{'delay':0x0},'textMessage':{'text':_0x1089f8[_0x278181(0x473)][_0x278181(0x4ff)]}};await this[_0x278181(0x7a0)](_0x1f8929);}if(_0x1089f8[_0x278181(0x3c3)]!==void 0x0&&_0x3ad89d[_0x278181(0x4fa)]>=_0x1089f8[_0x278181(0x3c3)]){let _0x1bb1ce=Date[_0x278181(0x3bd)](),_0x3a7984=_0x1089f8[_0x278181(0x774)]??0xa;isNaN(_0x3a7984)&&(_0x3a7984=0xa);let _0x20e683=_0x1bb1ce+_0x3a7984*0x3c*0x3e8;_0x3ad89d[_0x278181(0x7ac)]=_0x20e683,_0x3ad89d[_0x278181(0x898)][_0x278181(0x7f1)]('Atingido\x20interaes\x20mximas,\x20parando\x20fluxo'),this[_0x278181(0x793)](_0x1538d0,_0x20e683),_0x1538d0['waitingMenu_id']='',_0x1538d0[_0x278181(0x701)]='',_0x1538d0[_0x278181(0x84e)]=[];}return this[_0x278181(0x6f2)](_0x1538d0,_0x1089f8,_0x3ad89d,!0x0),null;}}if(_0x791e88&&_0x1089f8[_0x278181(0x482)]&&!_0x1538d0[_0x278181(0x74e)]){let _0x4945f3=_0x1538d0[_0x278181(0x8ac)][_0x278181(0x411)](_0x318228=>_0x318228[_0x278181(0x610)][_0x278181(0x529)]()===_0x1089f8[_0x278181(0x482)][_0x278181(0x529)]())['sort']((_0x335b67,_0x110696)=>_0x335b67[_0x278181(0x268)]-_0x110696[_0x278181(0x268)]);_0x4945f3[_0x278181(0x825)]>0x0&&(_0x499268=_0x4945f3[0x0]);}if(!_0x499268){let _0x4babe0=_0x1089f8['groupId'],_0x15c57b=_0x1538d0['blocks']['filter'](_0x517db2=>_0x517db2[_0x278181(0x610)]===_0x4babe0&&_0x517db2[_0x278181(0x268)]>_0x1089f8[_0x278181(0x268)])[_0x278181(0x32e)]((_0x53db59,_0x361eb8)=>_0x53db59[_0x278181(0x268)]-_0x361eb8[_0x278181(0x268)]);_0x15c57b['length']>0x0&&(_0x499268=_0x15c57b[0x0]);}if(!_0x499268)return _0x1538d0[_0x278181(0x4ed)]='closed',null;_0x1538d0[_0x278181(0x590)]['realVariables']=_0x5ee185;let _0x17984d=JSON[_0x278181(0x7ed)](JSON['stringify'](_0x499268));return this[_0x278181(0x6bd)](_0x17984d,_0x1538d0[_0x278181(0x590)][_0x278181(0x2df)]),_0x1538d0[_0x278181(0x590)][_0x278181(0x4aa)]=_0x17984d[_0x278181(0x618)],_0x1538d0['chatLog'][_0x278181(0x87c)]=!0x0,_0x17984d;}[a0_0x4bc873(0x8a1)](_0x5ac7be,_0x4ad468){const _0x542e44=a0_0x4bc873;return _0x5ac7be[_0x542e44(0x242)](/\{\{([^}]+)\}\}/g,(_0x40900b,_0x8f39f4)=>_0x4ad468[_0x8f39f4]||'');}[a0_0x4bc873(0x6bd)](_0x4f23eb,_0x397cbc){const _0x3f1968=a0_0x4bc873;for(let _0x21e87f in _0x4f23eb)typeof _0x4f23eb[_0x21e87f]==_0x3f1968(0x792)?_0x4f23eb[_0x21e87f]=this['replaceVariables'](_0x4f23eb[_0x21e87f],_0x397cbc):typeof _0x4f23eb[_0x21e87f]==_0x3f1968(0x801)&&this[_0x3f1968(0x6bd)](_0x4f23eb[_0x21e87f],_0x397cbc);}async[a0_0x4bc873(0x336)](_0x4ddc44,_0x4d8d5c){const _0x3225a0=a0_0x4bc873;let _0x19cc33=_0x4d8d5c[_0x3225a0(0x618)];if(_0x4ddc44[_0x3225a0(0x590)]&&_0x4ddc44[_0x3225a0(0x590)][_0x3225a0(0x5c0)]){let _0x5f06f1=_0x4ddc44['chatLog'][_0x3225a0(0x5c0)]['filter'](_0x2bee3e=>String(_0x2bee3e[_0x3225a0(0x666)])===String(_0x19cc33))['pop']();if(_0x5f06f1&&_0x5f06f1[_0x3225a0(0x47a)]&&_0x4d8d5c[_0x3225a0(0x1f4)])return _0x4ddc44[_0x3225a0(0x4ed)]=_0x3225a0(0x29a),await this[_0x3225a0(0x7e7)](_0x4ddc44),null;}if(_0x4d8d5c[_0x3225a0(0x8c8)]===_0x3225a0(0x473)&&_0x4d8d5c[_0x3225a0(0x473)][_0x3225a0(0x650)]===_0x3225a0(0x850)&&_0x4ddc44[_0x3225a0(0x74e)])return _0x4ddc44[_0x3225a0(0x590)][_0x3225a0(0x4aa)]=_0x19cc33,await this[_0x3225a0(0x7e7)](_0x4ddc44),null;let _0xa8810=await this[_0x3225a0(0x33b)](_0x4ddc44);if(_0x4ddc44[_0x3225a0(0x590)]&&_0x4ddc44[_0x3225a0(0x590)][_0x3225a0(0x5c0)]){let _0x1fcee7=_0x4ddc44[_0x3225a0(0x590)][_0x3225a0(0x5c0)][_0x3225a0(0x411)](_0x477dae=>String(_0x477dae[_0x3225a0(0x666)])===String(_0x19cc33))['length'];if(_0x4d8d5c['maxActives']!==void 0x0&&_0x1fcee7>=_0x4d8d5c['maxActives']){let _0x56a926=Date[_0x3225a0(0x3bd)](),_0x5b2566=_0x4d8d5c[_0x3225a0(0x774)]??0xa;isNaN(_0x5b2566)&&(_0x5b2566=0xa);let _0x2dbd7e=_0x56a926+_0x5b2566*0x3c*0x3e8,_0x595c3c={'newStoppedUntil':_0x2dbd7e};return this[_0x3225a0(0x793)](_0x4ddc44,_0x2dbd7e),this['updateConversation'](_0x4ddc44,_0x4d8d5c,_0x595c3c,!0x0),null;}}_0xa8810&&_0xa8810[_0x3225a0(0x8c8)]!==_0x3225a0(0x639)&&await this[_0x3225a0(0x396)](_0x4ddc44,_0xa8810),_0xa8810||await this[_0x3225a0(0x7e7)](_0x4ddc44),_0xa8810&&_0xa8810[_0x3225a0(0x8c8)]==='save'&&(_0x4ddc44[_0x3225a0(0x590)][_0x3225a0(0x4aa)]=_0x19cc33,await this['saveConversationToDatabase'](_0x4ddc44));}async[a0_0x4bc873(0x396)](_0x37668e,_0x2becf6){const _0x2580b6=a0_0x4bc873;try{let _0x51cf05=_0x2becf6[_0x2580b6(0x8c8)];this[_0x2580b6(0x563)][_0x2580b6(0x377)](this[_0x2580b6(0x616)]+'\x20('+this['instance'][_0x2580b6(0x72d)]+_0x2580b6(0x414)+_0x51cf05);let _0x433a4c={'uazapi':()=>this['processUazapi'](_0x37668e,_0x2becf6),'save':()=>this['saveTextReply'](_0x37668e,_0x2becf6),'stop':()=>this[_0x2580b6(0x61c)](_0x37668e,_0x2becf6),'condition':()=>this['processConditions'](_0x37668e,_0x2becf6),'varedit':()=>this[_0x2580b6(0x760)](_0x37668e,_0x2becf6),'apirequest':()=>this[_0x2580b6(0x715)](_0x37668e,_0x2becf6),'goToFlow':()=>this[_0x2580b6(0x646)](_0x37668e,_0x2becf6),'scheduleFlow':()=>this[_0x2580b6(0x503)](_0x37668e,_0x2becf6),'awaitSeconds':()=>this[_0x2580b6(0x26c)](_0x37668e,_0x2becf6),'clearVariables':()=>this[_0x2580b6(0x26d)](_0x37668e,_0x2becf6)}[_0x51cf05];_0x433a4c&&await _0x433a4c();}catch(_0x5cc667){this[_0x2580b6(0x563)][_0x2580b6(0x47a)](this[_0x2580b6(0x616)]+'\x20('+this[_0x2580b6(0x568)][_0x2580b6(0x72d)]+'):\x20Error\x20processing\x20the\x20block:\x20'+(_0x5cc667 instanceof Error?_0x5cc667['message']:JSON[_0x2580b6(0x573)](_0x5cc667,null,0x2)));}}async[a0_0x4bc873(0x26c)](_0x34be06,_0x4f0ecc){const _0x15a2ed=a0_0x4bc873;if(this[_0x15a2ed(0x563)][_0x15a2ed(0x377)](this['instanceName']+'\x20('+this[_0x15a2ed(0x568)][_0x15a2ed(0x72d)]+_0x15a2ed(0x904)),!_0x34be06||!_0x4f0ecc)return this[_0x15a2ed(0x563)][_0x15a2ed(0x47a)](this['instanceName']+'\x20('+this[_0x15a2ed(0x568)][_0x15a2ed(0x72d)]+_0x15a2ed(0x356)),null;let _0x180e9a=+_0x4f0ecc[_0x15a2ed(0x504)];isNaN(_0x180e9a)&&(_0x180e9a=0x0),_0x180e9a=Math['min'](_0x180e9a,0x3c),await(0x0,w[_0x15a2ed(0x3c9)])(_0x180e9a*0x3e8);let _0xe10054={'moreLogs':['Pausado\x20por\x20'+_0x180e9a+'\x20segundos']};return await this[_0x15a2ed(0x6f2)](_0x34be06,_0x4f0ecc,_0xe10054),_0x180e9a;}async[a0_0x4bc873(0x26d)](_0x197605,_0x2458b3){const _0x490bd3=a0_0x4bc873;if(this[_0x490bd3(0x563)][_0x490bd3(0x377)](this[_0x490bd3(0x616)]+'\x20('+this[_0x490bd3(0x568)][_0x490bd3(0x72d)]+'):\x20Entrou\x20na\x20funo\x20clearVariables'),!_0x197605||!_0x2458b3)return this['logger'][_0x490bd3(0x47a)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x490bd3(0x356)),null;let _0x523957=[];if(_0x2458b3[_0x490bd3(0x78d)][_0x490bd3(0x4cf)]()===_0x490bd3(0x617)){let _0x846eda=[_0x490bd3(0x545),'_pushName',_0x490bd3(0x583),_0x490bd3(0x300),'_remoteJid','_id',_0x490bd3(0x796)];_0x523957=Object[_0x490bd3(0x419)](_0x197605[_0x490bd3(0x590)][_0x490bd3(0x2df)])[_0x490bd3(0x411)](_0x346dcc=>_0x346dcc[_0x490bd3(0x668)]('_')&&!_0x846eda[_0x490bd3(0x5f5)](_0x346dcc));}else _0x523957=_0x2458b3[_0x490bd3(0x78d)][_0x490bd3(0x51b)]('|')[_0x490bd3(0x347)](_0x5bc2d1=>(_0x5bc2d1=_0x5bc2d1[_0x490bd3(0x242)](/[{}]/g,'')[_0x490bd3(0x4cf)](),_0x5bc2d1[_0x490bd3(0x668)]('_')?_0x5bc2d1:'_'+_0x5bc2d1));let _0x472ace=[];_0x523957['forEach'](_0x43a59d=>{const _0x188d9a=_0x490bd3;_0x43a59d in _0x197605[_0x188d9a(0x590)][_0x188d9a(0x2df)]&&(delete _0x197605[_0x188d9a(0x590)][_0x188d9a(0x2df)][_0x43a59d],_0x472ace[_0x188d9a(0x7f1)](_0x43a59d));}),_0x472ace[_0x490bd3(0x825)]>0x0?this['logger'][_0x490bd3(0x377)](this[_0x490bd3(0x616)]+'\x20('+this[_0x490bd3(0x568)][_0x490bd3(0x72d)]+_0x490bd3(0x2e8)+_0x472ace[_0x490bd3(0x6a2)](',\x20')):this[_0x490bd3(0x563)][_0x490bd3(0x377)](this['instanceName']+'\x20('+this[_0x490bd3(0x568)][_0x490bd3(0x72d)]+'):\x20Nenhuma\x20varivel\x20especificada\x20foi\x20encontrada\x20para\x20remoo');let _0x3804e0={'moreLogs':['Removidas\x20as\x20variveis:\x20'+_0x472ace[_0x490bd3(0x6a2)](',\x20')]};return await this['updateConversation'](_0x197605,_0x2458b3,_0x3804e0),null;}async['processScheduleFlow'](_0x322abe,_0x4c1d11){const _0x247fe8=a0_0x4bc873;if(this[_0x247fe8(0x563)]['verbose'](this[_0x247fe8(0x616)]+'\x20('+this['instance']['wuid']+_0x247fe8(0x765)),!_0x322abe||!_0x4c1d11)return this[_0x247fe8(0x563)][_0x247fe8(0x47a)](this[_0x247fe8(0x616)]+'\x20('+this[_0x247fe8(0x568)][_0x247fe8(0x72d)]+_0x247fe8(0x356)),null;let _0xaab1b5=_0x322abe[_0x247fe8(0x8d4)];_0x4c1d11[_0x247fe8(0x4f5)][_0x247fe8(0x8d4)]&&_0x4c1d11['scheduleFlow']['remoteJid'][_0x247fe8(0x4cf)]()!==''&&(_0xaab1b5=_0x4c1d11[_0x247fe8(0x473)][_0x247fe8(0x8d4)]['trim']());let _0x585711=_0x4c1d11[_0x247fe8(0x4f5)][_0x247fe8(0x6b3)]*0xea60,_0xee1da5=Date['now']()+_0x585711,_0x3886a9={'status':'scheduled','info':_0x247fe8(0x30c)+_0x322abe[_0x247fe8(0x60f)],'remoteJids':[_0xaab1b5],'when':_0xee1da5,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x247fe8(0x20f),'flowName':_0x4c1d11[_0x247fe8(0x4f5)][_0x247fe8(0x43f)]};this[_0x247fe8(0x8db)](_0x3886a9);let _0xd1b3ec=await this[_0x247fe8(0x33b)](_0x322abe);_0xd1b3ec&&await this[_0x247fe8(0x396)](_0x322abe,_0xd1b3ec);}async[a0_0x4bc873(0x646)](_0x242c53,_0x32805f){const _0x41df4f=a0_0x4bc873;if(this[_0x41df4f(0x563)]['verbose'](this['instanceName']+'\x20('+this[_0x41df4f(0x568)][_0x41df4f(0x72d)]+_0x41df4f(0x67e)),!_0x242c53||!_0x32805f)return this[_0x41df4f(0x563)][_0x41df4f(0x47a)](this[_0x41df4f(0x616)]+'\x20('+this[_0x41df4f(0x568)]['wuid']+_0x41df4f(0x356)),null;await this[_0x41df4f(0x6f2)](_0x242c53,_0x32805f,{},!0x0,!0x0);let _0x338cc0=_0x32805f[_0x41df4f(0x597)];_0x242c53=await this[_0x41df4f(0x8bb)](_0x338cc0,_0x242c53[_0x41df4f(0x8d4)],_0x242c53[_0x41df4f(0x590)][_0x41df4f(0x2df)]);let _0x16c0a7=await this[_0x41df4f(0x33b)](_0x242c53);_0x16c0a7&&await this['processblock'](_0x242c53,_0x16c0a7);}async['createConversationforgoToFlow'](_0xc6116,_0x371810,_0x15658a){const _0x19e05c=a0_0x4bc873;this['logger'][_0x19e05c(0x377)](this[_0x19e05c(0x616)]+'\x20('+this[_0x19e05c(0x568)][_0x19e05c(0x72d)]+_0x19e05c(0x88b));try{let _0x554511=this[_0x19e05c(0x5a5)]['flows'][_0x19e05c(0x8aa)](_0x331130=>_0x331130[_0x19e05c(0x618)]===_0xc6116);_0x554511||this[_0x19e05c(0x563)][_0x19e05c(0x47a)](this[_0x19e05c(0x616)]+'\x20('+this[_0x19e05c(0x568)][_0x19e05c(0x72d)]+_0x19e05c(0x619)+_0xc6116+'\x27\x20no\x20encontrado\x20na\x20memria');let _0x30d239=await this[_0x19e05c(0x6c6)][_0x19e05c(0x20f)][_0x19e05c(0x6e7)]({'where':{'_id':_0x554511['_id']}});if(!_0x30d239||!_0x30d239[_0x19e05c(0x7ee)]?.['includes'](this[_0x19e05c(0x568)]['wuid']))throw this[_0x19e05c(0x563)][_0x19e05c(0x47a)](this[_0x19e05c(0x616)]+'\x20('+this[_0x19e05c(0x568)][_0x19e05c(0x72d)]+'):\x20Flow\x20\x27'+_0xc6116+_0x19e05c(0x372)),new m(_0x19e05c(0x917)+_0xc6116+_0x19e05c(0x372));let _0x48627f=require(_0x19e05c(0x513))[_0x19e05c(0x4b9)],_0x41dcd8=Date['now'](),_0x3e4b1a=_0x19e05c(0x3a4),_0x586498={},_0x3397ed={},_0x306623=this[_0x19e05c(0x5a5)]['flows'][_0x19e05c(0x8aa)](_0x4e5d70=>_0x4e5d70[_0x19e05c(0x618)]===_0x30d239[_0x19e05c(0x618)]?.[_0x19e05c(0x529)]()),_0x33140f=_0x306623?.[_0x19e05c(0x918)]??_0x30d239['minutesToClose']??0x0,_0x2555f2=_0x306623?.[_0x19e05c(0x596)]??_0x30d239[_0x19e05c(0x596)]??!0x1,_0x5a6f69={'flowId':_0x554511[_0x19e05c(0x618)],'readMessages':_0x554511[_0x19e05c(0x596)],..._0x30d239,'chatLog':null},_0x138d27={'lastReceivedMessage':_0x586498,'lastSendMessage':_0x3397ed,'lastBlockId':_0x3e4b1a,'lastCondition':!0x0,'realVariables':_0x15658a};_0x5a6f69[_0x19e05c(0x590)]=_0x138d27,_0x5a6f69['chatLog'][_0x19e05c(0x2df)]={..._0x15658a},delete _0x5a6f69[_0x19e05c(0x618)],_0x5a6f69[_0x19e05c(0x618)]=new _0x48627f(),_0x5a6f69[_0x19e05c(0x3fb)]=_0x41dcd8,_0x5a6f69['status']=_0x19e05c(0x808),_0x5a6f69['remoteJid']=_0x371810,_0x5a6f69[_0x19e05c(0x918)]=_0x33140f,_0x5a6f69[_0x19e05c(0x596)]=_0x2555f2;let _0x30c202=await this[_0x19e05c(0x6c6)][_0x19e05c(0x43a)][_0x19e05c(0x7eb)](_0x5a6f69[_0x19e05c(0x618)],_0x5a6f69,this['instance']['wuid']);return this[_0x19e05c(0x563)][_0x19e05c(0x377)](this[_0x19e05c(0x616)]+'\x20('+this[_0x19e05c(0x568)][_0x19e05c(0x72d)]+_0x19e05c(0x2d2)),_0x30c202?_0x5a6f69:null;}catch(_0x3e973e){let _0x240a2b='Erro\x20ao\x20copiar\x20o\x20documento',_0x14f69f=_0x3e973e instanceof Error?_0x3e973e[_0x19e05c(0x805)]:typeof _0x3e973e==_0x19e05c(0x801)?JSON[_0x19e05c(0x573)](_0x3e973e):_0x3e973e,_0x21206b=_0x240a2b+':\x20'+_0x14f69f;throw this[_0x19e05c(0x563)][_0x19e05c(0x47a)](this['instanceName']+'\x20('+this[_0x19e05c(0x568)][_0x19e05c(0x72d)]+_0x19e05c(0x6c0)+_0x21206b),new m(_0x21206b);}}async['processApiRequest'](_0x43b108,_0x6fcd9d){const _0x4e4ba8=a0_0x4bc873;let _0x143dd3,_0x4b9659;try{let _0x598fce=_0x6fcd9d[_0x4e4ba8(0x7fd)];if(!_0x598fce||!_0x598fce[_0x4e4ba8(0x8ab)]||!_0x598fce[_0x4e4ba8(0x533)])throw new Error(_0x4e4ba8(0x26f));let _0x3142fc;([_0x4e4ba8(0x8d3),_0x4e4ba8(0x341),'https://api.elevenlabs.io/v1/text-to-speech/'][_0x4e4ba8(0x456)](_0x5af619=>_0x598fce[_0x4e4ba8(0x8ab)][_0x4e4ba8(0x5f5)](_0x5af619))||_0x598fce[_0x4e4ba8(0x54e)])&&(_0x3142fc='arraybuffer');let _0x5c0976='\u205f',_0x2d5f9d;try{_0x2d5f9d=JSON[_0x4e4ba8(0x7ed)](_0x598fce[_0x4e4ba8(0x269)][_0x4e4ba8(0x242)](new RegExp(_0x5c0976,'g'),''));}catch(_0x4e3c01){throw _0x4e3c01;}let _0x3dd0ce={'method':_0x598fce[_0x4e4ba8(0x533)],'url':_0x598fce[_0x4e4ba8(0x8ab)],'headers':_0x598fce[_0x4e4ba8(0x74d)]||{},..._0x598fce[_0x4e4ba8(0x533)]['toUpperCase']()!==_0x4e4ba8(0x221)&&_0x598fce[_0x4e4ba8(0x269)]?{'data':JSON['parse'](_0x598fce[_0x4e4ba8(0x269)][_0x4e4ba8(0x242)](new RegExp(_0x5c0976,'g'),''))}:{},..._0x3142fc&&{'responseType':_0x3142fc}},_0x3a197a=await(0x0,Q[_0x4e4ba8(0x323)])(_0x3dd0ce),_0x3c11d9=_0x3a197a['headers'][_0x4e4ba8(0x3c2)];if(_0x3c11d9&&_0x3c11d9[_0x4e4ba8(0x5f5)]('application/json')||typeof _0x3a197a[_0x4e4ba8(0x301)]==_0x4e4ba8(0x792)){if(typeof _0x3a197a[_0x4e4ba8(0x301)]==_0x4e4ba8(0x792)){let _0x312ba8=_0x3a197a[_0x4e4ba8(0x301)][_0x4e4ba8(0x242)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x4e4ba8(0x4cf)]();try{_0x143dd3=JSON[_0x4e4ba8(0x7ed)](_0x312ba8);}catch(_0x16575e){this['logger'][_0x4e4ba8(0x47a)](_0x4e4ba8(0x227)+_0x16575e['message']),_0x143dd3={'_apiResponse':_0x3a197a[_0x4e4ba8(0x301)]};}}else _0x143dd3=_0x3a197a['data'];let _0x57b8b4=_0x43b108[_0x4e4ba8(0x590)][_0x4e4ba8(0x2df)],_0xcfdba0=this['flattenObject'](_0x143dd3);return Object[_0x4e4ba8(0x310)](_0x57b8b4,_0xcfdba0),_0x43b108[_0x4e4ba8(0x590)][_0x4e4ba8(0x2df)]=_0x57b8b4,_0x4b9659={'error':!0x1,'apiResponse':_0x143dd3},this[_0x4e4ba8(0x6f2)](_0x43b108,_0x6fcd9d,_0x4b9659),_0x143dd3;}if(_0x3c11d9&&(_0x3c11d9[_0x4e4ba8(0x5f5)]('application/octet-stream')||_0x3c11d9['includes']('image')||_0x3c11d9[_0x4e4ba8(0x5f5)](_0x4e4ba8(0x77a))||_0x3c11d9['includes'](_0x4e4ba8(0x721)))){this[_0x4e4ba8(0x563)][_0x4e4ba8(0x377)](this[_0x4e4ba8(0x616)]+'\x20('+this[_0x4e4ba8(0x568)][_0x4e4ba8(0x72d)]+_0x4e4ba8(0x798)+_0x3c11d9);let _0x3fb1bb=(0x0,Y['v4'])(),_0x5aa52a='',_0x3a6517={'image/jpeg':_0x4e4ba8(0x7cb),'image/png':_0x4e4ba8(0x920),'image/gif':'.gif','image/webp':'.webp','image/svg+xml':_0x4e4ba8(0x2ee),'audio/mpeg':_0x4e4ba8(0x8d1),'audio/ogg':'.ogg','audio/wav':'.wav','video/mp4':_0x4e4ba8(0x841),'video/webm':_0x4e4ba8(0x1f1),'video/ogg':_0x4e4ba8(0x68b),'text/plain':_0x4e4ba8(0x61e),'application/pdf':_0x4e4ba8(0x5f1),'application/msword':_0x4e4ba8(0x820),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x4e4ba8(0x61d),'application/vnd.ms-excel':_0x4e4ba8(0x924),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x4e4ba8(0x8c1),'application/vnd.ms-powerpoint':_0x4e4ba8(0x569),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x4e4ba8(0x23f)};_0x3a6517[_0x3c11d9]?(_0x5aa52a=_0x3a6517[_0x3c11d9],this[_0x4e4ba8(0x563)][_0x4e4ba8(0x377)](this[_0x4e4ba8(0x616)]+'\x20('+this['instance'][_0x4e4ba8(0x72d)]+_0x4e4ba8(0x5c9)+_0x5aa52a)):(_0x5aa52a=_0x4e4ba8(0x8dd),this[_0x4e4ba8(0x563)]['verbose'](this[_0x4e4ba8(0x616)]+'\x20('+this['instance']['wuid']+_0x4e4ba8(0x5cc)+_0x5aa52a)),_0x3fb1bb+=_0x5aa52a,this[_0x4e4ba8(0x563)]['verbose'](this[_0x4e4ba8(0x616)]+'\x20('+this[_0x4e4ba8(0x568)]['wuid']+_0x4e4ba8(0x43c)+_0x3fb1bb);let _0x42efa5=this[_0x4e4ba8(0x251)][_0x4e4ba8(0x62f)]('SERVER')['URL'];if(!_0x42efa5){let _0x52ee26=this[_0x4e4ba8(0x251)][_0x4e4ba8(0x62f)](_0x4e4ba8(0x727));_0x42efa5=_0x4e4ba8(0x317)+(_0x52ee26&&_0x52ee26[_0x4e4ba8(0x5d5)][_0x4e4ba8(0x51b)]('/')[0x4]);}let _0x35bffc=Buffer[_0x4e4ba8(0x25a)](_0x3a197a[_0x4e4ba8(0x301)]);await this[_0x4e4ba8(0x48f)](_0x35bffc,_0x3fb1bb);let _0x4a0c82=_0x4e4ba8(0x5b5)+_0x3fb1bb;_0x4a0c82=''+_0x42efa5+_0x4a0c82,_0x143dd3={'fileUrl':_0x4a0c82},_0x43b108[_0x4e4ba8(0x590)][_0x4e4ba8(0x2df)][_0x4e4ba8(0x862)]=_0x4a0c82;let _0xec5f8=_0x43b108['chatLog']['realVariables'],_0x15f9b8=this[_0x4e4ba8(0x67f)](_0x143dd3);return Object[_0x4e4ba8(0x310)](_0xec5f8,_0x15f9b8),_0x43b108[_0x4e4ba8(0x590)][_0x4e4ba8(0x2df)]=_0xec5f8,_0x4b9659={'error':!0x1,'apiResponse':{'fileUrl':_0x4a0c82}},this[_0x4e4ba8(0x6f2)](_0x43b108,_0x6fcd9d,_0x4b9659),_0x143dd3;}}catch(_0x34397a){this[_0x4e4ba8(0x563)][_0x4e4ba8(0x47a)]('Erro\x20ao\x20processar\x20a\x20chamada\x20API:'+_0x34397a[_0x4e4ba8(0x805)]),_0x34397a[_0x4e4ba8(0x843)]&&(_0x143dd3=_0x34397a[_0x4e4ba8(0x843)][_0x4e4ba8(0x301)]);let _0x1f9418=_0x43b108[_0x4e4ba8(0x590)][_0x4e4ba8(0x2df)],_0x297c91=this[_0x4e4ba8(0x67f)](_0x143dd3);return Object[_0x4e4ba8(0x310)](_0x1f9418,_0x297c91),_0x43b108[_0x4e4ba8(0x590)][_0x4e4ba8(0x2df)]=_0x1f9418,_0x4b9659={'error':!0x0,'errorLog':_0x34397a[_0x4e4ba8(0x529)](),'apiResponse':_0x143dd3},this['updateConversation'](_0x43b108,_0x6fcd9d,_0x4b9659),{'success':!0x1};}}[a0_0x4bc873(0x23d)](_0x3da2a7,_0x33992f){const _0x194765=a0_0x4bc873;let _0x4dd882=_0x36ce37=>{const _0x29fc64=a0_0x59bb;let _0x323cca=_0x36ce37[_0x29fc64(0x242)](/[^0-9.,-]/g,'')[_0x29fc64(0x242)](',','.'),_0x49d52b=parseFloat(_0x323cca);return isNaN(_0x49d52b)?null:_0x49d52b;},_0x7a59e6=_0x33992f[_0x194765(0x286)],_0x1a8d8a=_0x33992f['secondValue'];typeof _0x7a59e6==_0x194765(0x792)&&(_0x7a59e6=this[_0x194765(0x8a1)](_0x7a59e6,_0x3da2a7['chatLog'][_0x194765(0x2df)])??''),typeof _0x1a8d8a=='string'&&(_0x1a8d8a=this['replaceVariables'](_0x1a8d8a,_0x3da2a7[_0x194765(0x590)][_0x194765(0x2df)])??'');let _0x1c192e=null;if(!_0x33992f[_0x194765(0x7b5)])return null;switch(this[_0x194765(0x563)][_0x194765(0x377)](this['instanceName']+'\x20('+this[_0x194765(0x568)]['wuid']+_0x194765(0x8a0)+_0x7a59e6),this['logger'][_0x194765(0x377)](this[_0x194765(0x616)]+'\x20('+this['instance'][_0x194765(0x72d)]+_0x194765(0x3f7)+_0x1a8d8a),_0x33992f[_0x194765(0x7b5)]){case'+':case'-':case'*':case'/':let _0x3bd3eb=_0x4dd882(_0x7a59e6||'0'),_0x864014=_0x4dd882(_0x1a8d8a||'0');if(_0x3bd3eb===null)return null;switch(_0x33992f[_0x194765(0x7b5)]){case'+':_0x1c192e=_0x3bd3eb+(_0x864014??0x0);break;case'-':_0x1c192e=_0x3bd3eb-(_0x864014??0x0);break;case'*':_0x1c192e=_0x3bd3eb*(_0x864014??0x1);break;case'/':_0x864014!==0x0&&(_0x1c192e=_0x3bd3eb/(_0x864014??0x1));break;}break;case _0x194765(0x6d9):case _0x194765(0x86e):let _0x5980c6=_0x1a8d8a,_0x5afb3c=_0x33992f[_0x194765(0x77b)];if(typeof _0x5afb3c=='string'&&(_0x5afb3c=this['replaceVariables'](_0x5afb3c,_0x3da2a7['chatLog'][_0x194765(0x2df)])??''),_0x5980c6&&_0x5afb3c!==void 0x0){let _0x66536f=_0x33992f[_0x194765(0x7b5)]===_0x194765(0x6d9)?new RegExp(_0x5980c6[_0x194765(0x242)](/[-\/\\^$*+?.()|[\]{}]/g,_0x194765(0x289)),'g'):new RegExp(_0x5980c6,'g');_0x1c192e=_0x7a59e6[_0x194765(0x242)](_0x66536f,_0x5afb3c);}else console['warn'](_0x194765(0x91f));break;case _0x194765(0x930):_0x1c192e=_0x1a8d8a;break;case _0x194765(0x50e):let _0x9ee6ea=_0x7a59e6[_0x194765(0x60b)](new RegExp(_0x1a8d8a||''));_0x1c192e=_0x9ee6ea?_0x9ee6ea[0x0]:'';break;case'truncatedto':_0x1c192e=_0x7a59e6[_0x194765(0x5de)](0x0,parseInt(_0x1a8d8a||'0'));break;case _0x194765(0x3f4):let _0x3238ad=parseInt(_0x1a8d8a||'0');_0x1c192e=_0x7a59e6[_0x194765(0x5de)](_0x7a59e6[_0x194765(0x825)]-_0x3238ad);break;case _0x194765(0x252):let _0x3dcbae=_0x4dd882(_0x7a59e6),_0x336fc6=parseInt(_0x1a8d8a||'0');_0x336fc6=Math['abs'](_0x336fc6),_0x3dcbae!==null?_0x1c192e=_0x3dcbae['toLocaleString']('pt-BR',{'minimumFractionDigits':_0x336fc6,'maximumFractionDigits':_0x336fc6}):(console[_0x194765(0x5b6)](_0x194765(0x3b3)+_0x7a59e6),_0x1c192e=null);break;case _0x194765(0x340):let _0x44a54c=_0x4dd882(_0x7a59e6);_0x44a54c!==null?_0x1c192e=_0x44a54c[_0x194765(0x776)](_0x194765(0x41b),{'style':_0x194765(0x5d1),'currency':_0x194765(0x4cd)}):(console[_0x194765(0x5b6)](_0x194765(0x83f)+_0x7a59e6),_0x1c192e=null);break;case'upperCase':_0x1c192e=_0x7a59e6[_0x194765(0x212)]();break;case _0x194765(0x412):_0x1c192e=_0x7a59e6[_0x194765(0x511)]();break;case'capitalizedWords':_0x1c192e=_0x7a59e6['split']('\x20')[_0x194765(0x347)](_0x6a71bb=>_0x6a71bb[_0x194765(0x5e4)](0x0)[_0x194765(0x212)]()+_0x6a71bb[_0x194765(0x5de)](0x1)[_0x194765(0x511)]())[_0x194765(0x6a2)]('\x20');break;case _0x194765(0x288):_0x1c192e=JSON[_0x194765(0x573)](_0x7a59e6);break;case _0x194765(0x927):_0x1c192e=_0x7a59e6[_0x194765(0x4cf)]();break;default:_0x1c192e=_0x7a59e6;}return _0x1c192e!==null?_0x1c192e['toString']():null;}async[a0_0x4bc873(0x760)](_0x7ebe65,_0x59ba18){const _0x49d6dc=a0_0x4bc873;try{let _0x1486ff=_0x7ebe65[_0x49d6dc(0x7d4)]?.['filter'](_0x9dff85=>_0x9dff85['blockId']===_0x59ba18[_0x49d6dc(0x618)]?.[_0x49d6dc(0x529)]())||[],_0x377ad3=_0x59ba18[_0x49d6dc(0x8ea)],_0x18ae32=null,_0x5573bb=[],_0x3ccf0e=_0x7ebe65[_0x49d6dc(0x590)][_0x49d6dc(0x2df)][_0x377ad3];_0x5573bb[_0x49d6dc(0x7f1)](_0x49d6dc(0x571)+_0x3ccf0e+'\x22');for(let _0x214fd9 of _0x1486ff){_0x214fd9['firstValue']=_0x3ccf0e,_0x18ae32=_0x214fd9[_0x49d6dc(0x286)];let _0x50062c;try{_0x50062c=this[_0x49d6dc(0x23d)](_0x7ebe65,_0x214fd9);}catch(_0x5b5287){this['logger'][_0x49d6dc(0x47a)](_0x49d6dc(0x279)+_0x5b5287[_0x49d6dc(0x805)]);continue;}if(_0x50062c!==null){let _0x5ed474='Operador:\x20\x22'+_0x214fd9[_0x49d6dc(0x7b5)]+'\x22',_0x2dc846=['toBRL',_0x49d6dc(0x786),_0x49d6dc(0x412),_0x49d6dc(0x1f2),_0x49d6dc(0x927)];_0x214fd9[_0x49d6dc(0x7b5)]===_0x49d6dc(0x6d9)||_0x214fd9['editOperator']===_0x49d6dc(0x86e)?_0x5ed474+=_0x49d6dc(0x291)+_0x214fd9['secondValue']+'\x22,\x20valor\x20a\x20substituir:\x20\x22'+_0x214fd9[_0x49d6dc(0x77b)]+'\x22':!_0x2dc846[_0x49d6dc(0x5f5)](_0x214fd9[_0x49d6dc(0x7b5)])&&_0x214fd9[_0x49d6dc(0x455)]!==null&&_0x214fd9['secondValue']!==void 0x0&&(_0x5ed474+=_0x49d6dc(0x692)+_0x214fd9['secondValue']+'\x22'),_0x5ed474+=_0x49d6dc(0x35a)+_0x50062c+'.',_0x5573bb[_0x49d6dc(0x7f1)](_0x5ed474);}_0x50062c!==null&&(_0x3ccf0e=_0x50062c);}if(_0x7ebe65[_0x49d6dc(0x590)][_0x49d6dc(0x2df)]&&_0x59ba18[_0x49d6dc(0x8ea)]){_0x7ebe65[_0x49d6dc(0x590)][_0x49d6dc(0x2df)][_0x59ba18[_0x49d6dc(0x8ea)]]=_0x3ccf0e;let _0x3f5d58={'variable':_0x59ba18[_0x49d6dc(0x8ea)],'oldValue':_0x18ae32,'newValue':_0x3ccf0e,'moreLogs':_0x5573bb};try{this['updateConversation'](_0x7ebe65,_0x59ba18,_0x3f5d58);}catch(_0x4b581a){this[_0x49d6dc(0x563)][_0x49d6dc(0x47a)](_0x49d6dc(0x510)+_0x4b581a[_0x49d6dc(0x805)]);}}return _0x377ad3;}catch(_0x251a8e){return this[_0x49d6dc(0x563)][_0x49d6dc(0x47a)]('Erro\x20inesperado\x20em\x20processvaredits:\x20'+_0x251a8e[_0x49d6dc(0x805)]),null;}}async[a0_0x4bc873(0x558)](_0x9c2a55,_0x58f259){const _0x3cfd91=a0_0x4bc873;try{let _0x5272ad=[],_0x4c6e4f=_0x9c2a55[_0x3cfd91(0x5a4)][_0x3cfd91(0x411)](_0xba7036=>_0xba7036[_0x3cfd91(0x666)]===_0x58f259[_0x3cfd91(0x618)][_0x3cfd91(0x529)]()),_0x38c9fc=null,_0x394181=!0x1;for(let _0x25e7c7 of _0x4c6e4f){let _0x385475=this[_0x3cfd91(0x52d)](_0x9c2a55,_0x25e7c7);_0x5272ad[_0x3cfd91(0x7f1)](_0x3cfd91(0x66c)+_0x25e7c7['firstValue']+_0x3cfd91(0x8a2)+_0x25e7c7[_0x3cfd91(0x514)]+_0x3cfd91(0x302)+_0x25e7c7['secondValue']+',\x20Resultado:\x20'+_0x385475),_0x38c9fc===null?_0x38c9fc=_0x385475:_0x25e7c7[_0x3cfd91(0x394)]===_0x3cfd91(0x52c)?(_0x38c9fc=_0x38c9fc&&_0x385475,_0x385475||(_0x394181=!0x0)):_0x25e7c7[_0x3cfd91(0x394)]==='or'&&(_0x394181||(_0x38c9fc=_0x38c9fc||_0x385475));}_0x38c9fc===null&&(_0x38c9fc=!0x0);let _0xfcd8f3={'moreLogs':_0x5272ad};_0x9c2a55[_0x3cfd91(0x590)][_0x3cfd91(0x87c)]=_0x38c9fc,await this['updateConversation'](_0x9c2a55,_0x58f259,_0xfcd8f3);}catch(_0x4c4618){this[_0x3cfd91(0x563)][_0x3cfd91(0x47a)](this[_0x3cfd91(0x616)]+'\x20('+this[_0x3cfd91(0x568)][_0x3cfd91(0x72d)]+'):\x20Error\x20processing\x20conditions:\x20'+(_0x4c4618 instanceof Error?_0x4c4618['message']:JSON[_0x3cfd91(0x573)](_0x4c4618,null,0x2)));}}[a0_0x4bc873(0x52d)](_0x4aeab6,_0x3f784e){const _0xcf4e86=a0_0x4bc873;let _0x1ae8b9=_0x3f784e[_0xcf4e86(0x286)],_0x43f507=_0x3f784e[_0xcf4e86(0x455)];typeof _0x1ae8b9==_0xcf4e86(0x792)&&(_0x1ae8b9=this['replaceVariables'](_0x1ae8b9,_0x4aeab6['chatLog'][_0xcf4e86(0x2df)])??''),typeof _0x43f507==_0xcf4e86(0x792)&&(_0x43f507=this[_0xcf4e86(0x8a1)](_0x43f507,_0x4aeab6[_0xcf4e86(0x590)][_0xcf4e86(0x2df)])??'');try{switch(_0x3f784e[_0xcf4e86(0x514)]){case _0xcf4e86(0x6b1):return _0x1ae8b9===_0x43f507;case _0xcf4e86(0x233):return _0x1ae8b9!==_0x43f507;case _0xcf4e86(0x249):return this[_0xcf4e86(0x249)](_0x1ae8b9,_0x43f507);case _0xcf4e86(0x25b):return!this[_0xcf4e86(0x249)](_0x1ae8b9,_0x43f507);case _0xcf4e86(0x68a):return parseFloat(_0x1ae8b9)>parseFloat(_0x43f507);case _0xcf4e86(0x41c):return parseFloat(_0x1ae8b9)<parseFloat(_0x43f507);case'notEmpty':return _0x1ae8b9!=='';case _0xcf4e86(0x8a8):return _0x1ae8b9==='';case _0xcf4e86(0x263):return new RegExp(_0x43f507)[_0xcf4e86(0x36c)](_0x1ae8b9);case _0xcf4e86(0x59b):return!new RegExp(_0x43f507)[_0xcf4e86(0x36c)](_0x1ae8b9);default:return!0x1;}}catch(_0x55c799){return this[_0xcf4e86(0x563)][_0xcf4e86(0x47a)](_0xcf4e86(0x84d)+_0x55c799),!0x1;}}[a0_0x4bc873(0x249)](_0xbc3b3e,_0x5b35b2){const _0x477b21=a0_0x4bc873;if(_0xbc3b3e===_0x5b35b2&&/^\d+$/[_0x477b21(0x36c)](_0xbc3b3e))return!0x0;if(this[_0x477b21(0x25c)](_0xbc3b3e)&&/^\d+$/[_0x477b21(0x36c)](_0x5b35b2)){let _0xaf98a4=_0xbc3b3e['split'](',')[_0x477b21(0x347)](_0x5d25a3=>parseInt(_0x5d25a3[_0x477b21(0x4cf)]())),_0x24cb7a=parseInt(_0x5b35b2);return _0xaf98a4[_0x477b21(0x5f5)](_0x24cb7a);}return _0xbc3b3e['includes'](_0x5b35b2);}[a0_0x4bc873(0x25c)](_0x5c8672){const _0x1deddc=a0_0x4bc873;return/^\d+(,\d+)*$/[_0x1deddc(0x36c)](_0x5c8672);}[a0_0x4bc873(0x603)](_0x3a354b){const _0xeb7bcb=a0_0x4bc873;let _0x144520=!0x0,_0xb013ae=null;for(let _0x104cde of _0x3a354b){let _0xaccc28=this[_0xeb7bcb(0x36e)](_0x104cde);if(_0xb013ae==='or'&&_0xaccc28){_0x144520=!0x0;break;}if(_0xb013ae===_0xeb7bcb(0x52c)&&!_0xaccc28){_0x144520=!0x1;break;}_0xb013ae=_0x104cde[_0xeb7bcb(0x394)];}return _0x144520;}[a0_0x4bc873(0x36e)](_0x2d450e){const _0x2935c9=a0_0x4bc873;let _0x381083=_0x2d450e[_0x2935c9(0x286)],_0x273a0a=_0x2d450e[_0x2935c9(0x455)];try{switch(_0x2d450e[_0x2935c9(0x514)]){case _0x2935c9(0x6b1):return String(_0x381083)===String(_0x273a0a);case'notEqual':return String(_0x381083)!==String(_0x273a0a);case _0x2935c9(0x249):return String(_0x381083)[_0x2935c9(0x5f5)](String(_0x273a0a));case'notContains':return!String(_0x381083)[_0x2935c9(0x5f5)](String(_0x273a0a));case'greater':return parseFloat(String(_0x381083))>parseFloat(String(_0x273a0a));case _0x2935c9(0x41c):return parseFloat(String(_0x381083))<parseFloat(String(_0x273a0a));case _0x2935c9(0x549):return String(_0x381083)!=='';case _0x2935c9(0x8a8):return String(_0x381083)==='';case _0x2935c9(0x263):return new RegExp(String(_0x273a0a))['test'](String(_0x381083));case _0x2935c9(0x59b):return!new RegExp(String(_0x273a0a))[_0x2935c9(0x36c)](String(_0x381083));default:return!0x1;}}catch(_0x4f51a0){return this[_0x2935c9(0x563)][_0x2935c9(0x47a)](_0x2935c9(0x84d)+_0x4f51a0),!0x1;}}async[a0_0x4bc873(0x916)](_0x2697ba,_0x5851fc){const _0x25406e=a0_0x4bc873;if(this['logger'][_0x25406e(0x377)](this[_0x25406e(0x616)]+'\x20('+this[_0x25406e(0x568)][_0x25406e(0x72d)]+_0x25406e(0x8a4)),!_0x2697ba||!_0x5851fc)return this[_0x25406e(0x563)][_0x25406e(0x47a)](this['instanceName']+'\x20('+this[_0x25406e(0x568)][_0x25406e(0x72d)]+_0x25406e(0x356)),null;let _0x55fc31=_0x2697ba['chatLog'][_0x25406e(0x259)][_0x25406e(0x678)]['id'];this[_0x25406e(0x563)][_0x25406e(0x377)](this[_0x25406e(0x616)]+'\x20('+this[_0x25406e(0x568)][_0x25406e(0x72d)]+_0x25406e(0x4da)+_0x55fc31);let _0x571f0a={'key':{'id':_0x55fc31}},_0x188953=_0x5851fc['saveVariable'];_0x2697ba[_0x25406e(0x590)]['realVariables']['_'+_0x188953+_0x25406e(0x308)]=null,_0x2697ba[_0x25406e(0x590)][_0x25406e(0x2df)]['_'+_0x188953+_0x25406e(0x5e3)]=null,_0x2697ba[_0x25406e(0x590)][_0x25406e(0x2df)]['_'+_0x188953+_0x25406e(0x3a9)]=null,_0x2697ba[_0x25406e(0x590)][_0x25406e(0x2df)]['_'+_0x188953+'.type']=_0x2697ba[_0x25406e(0x590)][_0x25406e(0x259)][_0x25406e(0x8c8)];try{let _0x13a6ba=await this[_0x25406e(0x28d)](_0x571f0a);this[_0x25406e(0x563)]['verbose'](this[_0x25406e(0x616)]+'\x20('+this['instance'][_0x25406e(0x72d)]+'):\x20Detalhes\x20da\x20mdia\x20obtidos\x20com\x20sucesso.'),_0x2697ba['chatLog'][_0x25406e(0x2df)]['_'+_0x188953+_0x25406e(0x3cf)]=_0x13a6ba[_0x25406e(0x862)],_0x2697ba[_0x25406e(0x590)][_0x25406e(0x2df)]['_'+_0x188953+_0x25406e(0x5e3)]=_0x13a6ba[_0x25406e(0x77f)];let _0x309687=_0x13a6ba['mimetype'][_0x25406e(0x60b)](/\/(\w+)$/),_0x4d780e=_0x309687?_0x309687[0x1]:null;_0x2697ba[_0x25406e(0x590)]['realVariables']['_'+_0x188953+'.extension']=_0x4d780e,this['logger'][_0x25406e(0x377)](this[_0x25406e(0x616)]+'\x20('+this[_0x25406e(0x568)][_0x25406e(0x72d)]+_0x25406e(0x453)+_0x188953+'\x27.');}catch(_0x2d9142){this[_0x25406e(0x563)][_0x25406e(0x47a)](this[_0x25406e(0x616)]+'\x20('+this[_0x25406e(0x568)][_0x25406e(0x72d)]+_0x25406e(0x3c8)+_0x2d9142[_0x25406e(0x805)]);}let _0x4c44af=_0x2697ba[_0x25406e(0x590)][_0x25406e(0x259)][_0x25406e(0x23c)]||_0x2697ba['chatLog'][_0x25406e(0x259)][_0x25406e(0x52b)]||_0x2697ba[_0x25406e(0x590)]['lastReceivedMessage'][_0x25406e(0x7f5)];try{_0x2697ba[_0x25406e(0x590)]['realVariables']||(_0x2697ba['chatLog'][_0x25406e(0x2df)]={});let _0x16ca8f=_0x2697ba['chatLog'][_0x25406e(0x2df)][_0x188953];_0x2697ba['chatLog'][_0x25406e(0x2df)][_0x188953]=_0x4c44af;let _0x592e02={'variable':_0x188953,'oldValue':_0x16ca8f,'newValue':_0x4c44af};this[_0x25406e(0x6f2)](_0x2697ba,_0x5851fc,_0x592e02),this[_0x25406e(0x563)][_0x25406e(0x377)](this[_0x25406e(0x616)]+'\x20('+this[_0x25406e(0x568)][_0x25406e(0x72d)]+_0x25406e(0x1fa));}catch(_0x1364fc){let _0x8a0b17={'error':!0x0,'errorLog':_0x1364fc[_0x25406e(0x529)]()};return this[_0x25406e(0x6f2)](_0x2697ba,_0x5851fc,_0x8a0b17),this[_0x25406e(0x563)][_0x25406e(0x47a)](this[_0x25406e(0x616)]+'\x20('+this['instance']['wuid']+_0x25406e(0x30f)+(_0x1364fc instanceof Error?_0x1364fc['message']:JSON['stringify'](_0x1364fc,null,0x2))),null;}}async[a0_0x4bc873(0x61c)](_0x50ec30,_0x1a0f73){const _0x4bd43b=a0_0x4bc873;if(this[_0x4bd43b(0x563)][_0x4bd43b(0x377)](this[_0x4bd43b(0x616)]+'\x20('+this[_0x4bd43b(0x568)][_0x4bd43b(0x72d)]+_0x4bd43b(0x4a2)),!_0x50ec30||!_0x1a0f73)return this[_0x4bd43b(0x563)][_0x4bd43b(0x47a)](this[_0x4bd43b(0x616)]+'\x20('+this[_0x4bd43b(0x568)][_0x4bd43b(0x72d)]+_0x4bd43b(0x356)),null;let _0x1bec54=Date[_0x4bd43b(0x3bd)](),_0x5cc401=parseInt(_0x1a0f73['stopMinutes'],0xa);if(isNaN(_0x5cc401))return this[_0x4bd43b(0x563)]['error'](this[_0x4bd43b(0x616)]+'\x20('+this[_0x4bd43b(0x568)][_0x4bd43b(0x72d)]+'):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20nmero'),null;let _0x20e49e={'newStoppedUntil':_0x1bec54+_0x5cc401*0x3c*0x3e8};return await this[_0x4bd43b(0x6f2)](_0x50ec30,_0x1a0f73,_0x20e49e,!0x0),null;}async[a0_0x4bc873(0x608)](_0x20a474,_0x1298ad){const _0x1aec51=a0_0x4bc873;try{switch(_0x1298ad[_0x1aec51(0x473)][_0x1aec51(0x650)]){case _0x1aec51(0x5b3):await this['uazapiSendText'](_0x20a474,_0x1298ad);break;case'sendMedia':await this[_0x1aec51(0x3aa)](_0x20a474,_0x1298ad);break;case _0x1aec51(0x655):await this[_0x1aec51(0x445)](_0x20a474,_0x1298ad);break;case _0x1aec51(0x6f4):await this['uazapiSendAudio'](_0x20a474,_0x1298ad);break;case _0x1aec51(0x838):await this[_0x1aec51(0x64b)](_0x20a474,_0x1298ad);break;case _0x1aec51(0x850):await this[_0x1aec51(0x48b)](_0x20a474,_0x1298ad);break;case _0x1aec51(0x6c4):await this['uazapiSendMenu'](_0x20a474,_0x1298ad);break;case _0x1aec51(0x556):await this['uazapiDeleteMessage'](_0x20a474,_0x1298ad);break;default:this[_0x1aec51(0x563)]['error'](this[_0x1aec51(0x616)]+'\x20('+this[_0x1aec51(0x568)][_0x1aec51(0x72d)]+'):\x20Comando\x20desconhecido:\x20'+_0x1298ad[_0x1aec51(0x473)][_0x1aec51(0x650)]);}}catch(_0x34266b){this['logger'][_0x1aec51(0x47a)](this[_0x1aec51(0x616)]+'\x20('+this['instance']['wuid']+_0x1aec51(0x2fc)+(_0x34266b instanceof Error?_0x34266b[_0x1aec51(0x805)]:JSON['stringify'](_0x34266b,null,0x2)));}}async[a0_0x4bc873(0x6f2)](_0x1f4202,_0x3bd4aa,_0x3f304b,_0x5c750b=!0x1,_0x14f429=!0x1){const _0x195560=a0_0x4bc873;_0x1f4202[_0x195560(0x590)][_0x195560(0x5c0)]||(_0x1f4202['chatLog'][_0x195560(0x5c0)]=[]);let _0x42c24b=(_0x1f4202[_0x195560(0x590)]['blockLogs']?.[_0x195560(0x825)]??0x0)+0x1,_0x26a0ec=_0x1f4202['chatLog'][_0x195560(0x5c0)]['filter'](_0x2b8e26=>String(_0x2b8e26[_0x195560(0x666)])===String(_0x3bd4aa['_id']))[_0x195560(0x825)]+0x1,_0x4094e1=_0x3f304b?.[_0x195560(0x91a)]??Date[_0x195560(0x3bd)](),_0x5102f7=_0x3f304b?.[_0x195560(0x47a)]?_0x3f304b[_0x195560(0x40d)]??_0x3f304b[_0x195560(0x47a)][_0x195560(0x529)]():void 0x0,_0x5847d3={'onTime':_0x4094e1,'blockId':_0x3bd4aa[_0x195560(0x618)],'order':_0x42c24b,'activatedCount':_0x26a0ec,'error':_0x3f304b?.[_0x195560(0x47a)]??!0x1,'messageId':_0x3f304b?.[_0x195560(0x51f)],'apiResponse':_0x3f304b?.[_0x195560(0x3b0)],'apiResponseString':_0x3f304b?.[_0x195560(0x3b0)]?JSON[_0x195560(0x573)](_0x3f304b?.[_0x195560(0x3b0)]):void 0x0,'variable':_0x3f304b?.[_0x195560(0x4db)],'oldValue':_0x3f304b?.[_0x195560(0x86b)],'newValue':_0x3f304b?.[_0x195560(0x44d)],'newStoppedUntil':_0x3f304b?.['newStoppedUntil'],'moreLogs':_0x3f304b?.[_0x195560(0x898)],'errorLog':_0x5102f7};if(_0x3f304b[_0x195560(0x898)]&&_0x3f304b['moreLogs'][_0x195560(0x825)]>0x0){let _0x3df959=_0x3f304b['moreLogs'][_0x195560(0x347)](_0x364047=>this[_0x195560(0x670)](_0x364047,_0x1f4202[_0x195560(0x590)][_0x195560(0x2df)]));_0x5847d3['moreLogs']=_0x3df959;}if(_0x1f4202['chatLog'][_0x195560(0x2df)]||(_0x1f4202['chatLog']['realVariables']={}),_0x1f4202[_0x195560(0x590)][_0x195560(0x2df)][_0x195560(0x757)]=String(_0x26a0ec),_0x1f4202['chatLog']['realVariables'][_0x195560(0x583)]=String(_0x3f304b[_0x195560(0x47a)]??!0x1),_0x1f4202['chatLog'][_0x195560(0x5c0)][_0x195560(0x7f1)](_0x5847d3),_0x1f4202[_0x195560(0x590)][_0x195560(0x2df)][_0x195560(0x65d)]&&_0x1f4202[_0x195560(0x590)]['realVariables'][_0x195560(0x65d)]!==_0x1f4202[_0x195560(0x8d4)]){let _0x3c428a=(await this[_0x195560(0x71c)]({'numbers':[_0x1f4202['chatLog'][_0x195560(0x2df)][_0x195560(0x65d)]]}))[0x0]['jid'];_0x1f4202[_0x195560(0x590)][_0x195560(0x2df)][_0x195560(0x65d)]=_0x3c428a,_0x1f4202[_0x195560(0x8d4)]=_0x3c428a;try{let _0x5346c0={'_id':{'$ne':_0x1f4202[_0x195560(0x618)]},'remoteJid':_0x3c428a,'status':'open'},_0x748bde={'status':_0x195560(0x29a)};await this['repository']['flowConversation'][_0x195560(0x418)](_0x5346c0,_0x748bde,this['instance'][_0x195560(0x72d)]),this[_0x195560(0x563)][_0x195560(0x377)](this['instanceName']+'\x20('+this[_0x195560(0x568)][_0x195560(0x72d)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.');}catch(_0x536e85){this[_0x195560(0x563)][_0x195560(0x47a)](this[_0x195560(0x616)]+'\x20('+this['instance'][_0x195560(0x72d)]+_0x195560(0x32a)+_0x536e85[_0x195560(0x805)]);}try{let _0x2c13a3=_0x1f4202[_0x195560(0x590)]['realVariables'],_0x5ef5a1=await this[_0x195560(0x63f)](_0x3c428a),_0x2d1048={..._0x2c13a3,..._0x5ef5a1,'_remoteJid':_0x3c428a};_0x1f4202[_0x195560(0x590)][_0x195560(0x2df)]=_0x2d1048;}catch(_0x4e3ad4){this[_0x195560(0x563)][_0x195560(0x47a)](this['instanceName']+'\x20('+this[_0x195560(0x568)]['wuid']+'):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20'+_0x4e3ad4[_0x195560(0x805)]);}}_0x1f4202['chatLog'][_0x195560(0x4aa)]=_0x3bd4aa['_id']['toString'](),_0x1f4202[_0x195560(0x590)][_0x195560(0x1ec)]&&(_0x1f4202['chatLog'][_0x195560(0x1ec)]=_0x1f4202[_0x195560(0x590)]['lastSendMessage']),_0x1f4202[_0x195560(0x590)]['lastReceivedMessage']&&(_0x1f4202['chatLog'][_0x195560(0x259)]=_0x1f4202['chatLog']['lastReceivedMessage']),_0x1f4202[_0x195560(0x590)][_0x195560(0x87c)]&&(_0x1f4202[_0x195560(0x590)][_0x195560(0x87c)]=_0x1f4202[_0x195560(0x590)][_0x195560(0x87c)]),_0x14f429&&(_0x1f4202[_0x195560(0x4ed)]=_0x195560(0x29a)),_0x5c750b?this[_0x195560(0x7e7)](_0x1f4202):this[_0x195560(0x336)](_0x1f4202,_0x3bd4aa);}[a0_0x4bc873(0x670)](_0x51a157,_0x320fc0){const _0x4593da=a0_0x4bc873;return _0x51a157[_0x4593da(0x242)](/\{\{([^}]+)\}\}/g,(_0x330bc2,_0xfb2adf)=>_0x320fc0[_0xfb2adf]?'{{'+_0xfb2adf+_0x4593da(0x390)+_0x320fc0[_0xfb2adf]+'\x22':'{{'+_0xfb2adf+_0x4593da(0x627));}async[a0_0x4bc873(0x7e7)](_0x14bab9){const _0x369f70=a0_0x4bc873;try{let _0x15ce8f=Object[_0x369f70(0x52e)](_0x14bab9[_0x369f70(0x590)][_0x369f70(0x2df)])[_0x369f70(0x347)](([_0x32bb5e,_0x2b997d])=>({'name':_0x32bb5e,'value':_0x2b997d})),_0x63d78e={'status':_0x14bab9[_0x369f70(0x4ed)],'remoteJid':_0x14bab9[_0x369f70(0x8d4)],'blocks':_0x14bab9['blocks'],'waitingMenu_id':_0x14bab9[_0x369f70(0x74e)],'waitingMenu_text':_0x14bab9[_0x369f70(0x701)],'waitingMenu_replyOptions':_0x14bab9[_0x369f70(0x84e)],'chatLog':{'lastBlockId':_0x14bab9[_0x369f70(0x590)][_0x369f70(0x4aa)],'lastSendMessage':_0x14bab9['chatLog'][_0x369f70(0x1ec)],'lastReceivedMessage':_0x14bab9['chatLog'][_0x369f70(0x259)],'lastCondition':_0x14bab9[_0x369f70(0x590)][_0x369f70(0x87c)],'chatVariables':_0x15ce8f,'realVariables':_0x14bab9[_0x369f70(0x590)][_0x369f70(0x2df)],'blockLogs':_0x14bab9[_0x369f70(0x590)][_0x369f70(0x5c0)]}},_0x1f49b9=await this[_0x369f70(0x6c6)][_0x369f70(0x43a)]['updateOne'](_0x14bab9['_id'],_0x63d78e,this[_0x369f70(0x568)][_0x369f70(0x72d)]);if(_0x1f49b9){this[_0x369f70(0x563)][_0x369f70(0x377)](this[_0x369f70(0x616)]+'\x20('+this[_0x369f70(0x568)][_0x369f70(0x72d)]+_0x369f70(0x3c6)+_0x1f49b9[_0x369f70(0x618)]);try{let _0x4906d7=['nome',_0x369f70(0x685),_0x369f70(0x653),_0x369f70(0x90e),_0x369f70(0x4ed),'notas',_0x369f70(0x398),'tags',_0x369f70(0x3c5),_0x369f70(0x6e1)];if(!this[_0x369f70(0x5a5)]&&(await this[_0x369f70(0x209)](),!this[_0x369f70(0x5a5)]))throw new Error(_0x369f70(0x46f));let _0x4c0b0a=this['AutomateSystem']?.[_0x369f70(0x64e)][_0x369f70(0x347)](_0x3b4cec=>_0x3b4cec['name']),_0x58100d={};Object[_0x369f70(0x52e)](_0x14bab9[_0x369f70(0x590)][_0x369f70(0x2df)])[_0x369f70(0x426)](([_0x103e2e,_0x415de8])=>{const _0x441856=_0x369f70;_0x4906d7[_0x441856(0x5f5)](_0x103e2e)&&(_0x103e2e===_0x441856(0x865)&&typeof _0x415de8==_0x441856(0x792)?_0x58100d[_0x103e2e]=_0x415de8[_0x441856(0x51b)](',')[_0x441856(0x347)](_0x3f47b8=>_0x3f47b8[_0x441856(0x4cf)]())['filter'](_0x3a9482=>_0x3a9482!==''):_0x103e2e===_0x441856(0x3c5)&&typeof _0x415de8==_0x441856(0x792)?_0x58100d[_0x103e2e]=_0x415de8['split'](',')[_0x441856(0x347)](_0x4f5d50=>_0x4f5d50[_0x441856(0x4cf)]())['filter'](_0x5a30cf=>_0x5a30cf!==''):_0x58100d[_0x103e2e]=_0x415de8);});let _0x383375=_0x14bab9[_0x369f70(0x590)][_0x369f70(0x5c0)][_0x14bab9[_0x369f70(0x590)][_0x369f70(0x5c0)][_0x369f70(0x825)]-0x1];if(_0x383375){let _0x15c209=_0x383375[_0x369f70(0x7ac)];_0x15c209!==void 0x0&&(_0x58100d[_0x369f70(0x61b)]=_0x15c209[_0x369f70(0x529)]());}let _0x1a061a=_0x15ce8f[_0x369f70(0x411)](_0x4651e9=>_0x4c0b0a['includes'](_0x4651e9[_0x369f70(0x60f)]));this[_0x369f70(0x563)][_0x369f70(0x377)](this['instanceName']+'\x20('+this[_0x369f70(0x568)][_0x369f70(0x72d)]+'):\x20leadInfoVariables'),this['logger']['verbose'](_0x58100d),this[_0x369f70(0x563)][_0x369f70(0x377)](this[_0x369f70(0x616)]+'\x20('+this['instance']['wuid']+'):\x20customFieldVariables'),this[_0x369f70(0x563)][_0x369f70(0x377)](_0x1a061a);let _0x39d644=_0x1a061a[_0x369f70(0x347)](_0x5dbd83=>{const _0x41a3d7=_0x369f70;let _0x54072a=this['AutomateSystem']?.['customFields'][_0x41a3d7(0x8aa)](_0x3da541=>_0x3da541['name']===_0x5dbd83['name']);if(!_0x54072a)throw new Error(_0x41a3d7(0x4e7)+_0x5dbd83['name']);return{'_id':_0x54072a[_0x41a3d7(0x618)],'value':_0x5dbd83['value']};});this[_0x369f70(0x563)][_0x369f70(0x377)](this[_0x369f70(0x616)]+'\x20('+this[_0x369f70(0x568)][_0x369f70(0x72d)]+_0x369f70(0x8cc)),this[_0x369f70(0x563)][_0x369f70(0x377)](_0x39d644),await this[_0x369f70(0x8ef)](_0x14bab9['remoteJid'],_0x58100d,_0x39d644);}catch(_0x4f6b48){this['logger'][_0x369f70(0x47a)](this[_0x369f70(0x616)]+'\x20('+this[_0x369f70(0x568)][_0x369f70(0x72d)]+'):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20'+(_0x4f6b48 instanceof Error?_0x4f6b48['message']:JSON[_0x369f70(0x573)](_0x4f6b48,null,0x2)));}}else this[_0x369f70(0x563)][_0x369f70(0x47a)](this[_0x369f70(0x616)]+'\x20('+this[_0x369f70(0x568)][_0x369f70(0x72d)]+_0x369f70(0x6a8));}catch(_0x58f864){this[_0x369f70(0x563)][_0x369f70(0x47a)](this[_0x369f70(0x616)]+'\x20('+this[_0x369f70(0x568)]['wuid']+_0x369f70(0x239)+(_0x58f864 instanceof Error?_0x58f864['message']:JSON['stringify'](_0x58f864,null,0x2)));}}async['saveChatVariables'](_0x4e2052,_0x10d691,_0x18141a){const _0x52c96c=a0_0x4bc873;try{let _0x28e6f2={'leadInfo.leadnome':_0x10d691[_0x52c96c(0x37c)],'leadInfo.nomecompleto':_0x10d691[_0x52c96c(0x685)],'leadInfo.email':_0x10d691[_0x52c96c(0x653)],'leadInfo.cpf':_0x10d691['cpf'],'leadInfo.status':_0x10d691['status'],'leadInfo.notas':_0x10d691['notas'],'leadInfo.responsavelid':_0x10d691['responsavelid'],'leadInfo.tags':_0x10d691[_0x52c96c(0x865)],'leadInfo.etiquetas':_0x10d691[_0x52c96c(0x3c5)],'leadInfo.customFields':_0x18141a,'leadInfo.atendimentoAberto':_0x10d691[_0x52c96c(0x6e1)]},_0x4b4591=await this[_0x52c96c(0x6c6)][_0x52c96c(0x69a)]['findOne']({'where':{'_id':_0x4e2052}},this[_0x52c96c(0x568)][_0x52c96c(0x72d)]);if(!_0x4b4591)return'chat\x20no\x20encontrado';let _0x26e1b7=new Set(_0x4b4591[_0x52c96c(0x344)]['etiquetas']||[]),_0x184d3b=new Set(_0x10d691[_0x52c96c(0x3c5)]||[]),_0x444f17=await this[_0x52c96c(0x6c6)][_0x52c96c(0x442)][_0x52c96c(0x8aa)]({'where':{}},this[_0x52c96c(0x568)][_0x52c96c(0x72d)]),_0x24ae4f=new Set(_0x444f17['map'](_0x2a0ddd=>_0x2a0ddd[_0x52c96c(0x618)])),_0x4c2aed=[..._0x184d3b][_0x52c96c(0x411)](_0x33a24f=>!_0x26e1b7[_0x52c96c(0x772)](_0x33a24f)&&_0x24ae4f['has'](_0x33a24f)),_0x301ace=[..._0x26e1b7][_0x52c96c(0x411)](_0x5f59f9=>!_0x184d3b[_0x52c96c(0x772)](_0x5f59f9));for(let _0xa3b77a of _0x4c2aed)await this[_0x52c96c(0x35c)](_0xa3b77a,_0x4b4591[_0x52c96c(0x618)]),_0x26e1b7[_0x52c96c(0x840)](_0xa3b77a);for(let _0x26468e of _0x301ace)await this['RemoveChatLabel'](_0x26468e,_0x4b4591['_id']),_0x26e1b7['delete'](_0x26468e);if(_0x52c96c(0x61b)in _0x10d691){let _0x1a3bdb=_0x10d691[_0x52c96c(0x61b)];_0x28e6f2[_0x52c96c(0x444)]=_0x1a3bdb?Number(_0x1a3bdb):null;}if(_0x52c96c(0x6e1)in _0x10d691){let _0x283268=_0x10d691[_0x52c96c(0x6e1)]['toLowerCase']();_0x28e6f2['leadInfo.atendimentoAberto']=_0x283268==='true'||_0x283268==='1'||_0x283268===_0x52c96c(0x576)||_0x283268==='sim';}let _0x270c7e=await this[_0x52c96c(0x6c6)][_0x52c96c(0x69a)][_0x52c96c(0x7eb)]({'where':{'_id':_0x4e2052}},_0x28e6f2,this[_0x52c96c(0x568)]['wuid']);_0x270c7e?(this[_0x52c96c(0x563)]['verbose'](this[_0x52c96c(0x616)]+'\x20('+this[_0x52c96c(0x568)][_0x52c96c(0x72d)]+_0x52c96c(0x70f)+_0x270c7e[_0x52c96c(0x618)]),F(this['instanceName'],_0x52c96c(0x85a),{'chat':_0x270c7e})):this['logger']['error'](this[_0x52c96c(0x616)]+'\x20('+this[_0x52c96c(0x568)][_0x52c96c(0x72d)]+_0x52c96c(0x4c3));}catch(_0xbd2bb3){this[_0x52c96c(0x563)]['error'](this[_0x52c96c(0x616)]+'\x20('+this[_0x52c96c(0x568)][_0x52c96c(0x72d)]+_0x52c96c(0x8c9)+(_0xbd2bb3 instanceof Error?_0xbd2bb3[_0x52c96c(0x805)]:JSON[_0x52c96c(0x573)](_0xbd2bb3,null,0x2)));}}async[a0_0x4bc873(0x793)](_0x54e7a9,_0x5eb108){const _0x2e40e6=a0_0x4bc873;this['logger'][_0x2e40e6(0x377)](this[_0x2e40e6(0x616)]+'\x20('+this['instance']['wuid']+_0x2e40e6(0x8e7)+_0x5eb108);try{let _0x26344c=await this[_0x2e40e6(0x6c6)][_0x2e40e6(0x69a)]['updateOne']({'where':{'_id':_0x54e7a9[_0x2e40e6(0x8d4)]}},{'leadInfo.desativadoFluxoAte':_0x5eb108},this[_0x2e40e6(0x568)][_0x2e40e6(0x72d)]);this[_0x2e40e6(0x563)][_0x2e40e6(0x377)](this[_0x2e40e6(0x616)]+'\x20('+this[_0x2e40e6(0x568)]['wuid']+_0x2e40e6(0x430)+_0x54e7a9[_0x2e40e6(0x618)]),this[_0x2e40e6(0x563)][_0x2e40e6(0x377)](this[_0x2e40e6(0x616)]+'\x20('+this['instance'][_0x2e40e6(0x72d)]+_0x2e40e6(0x8e7)+JSON[_0x2e40e6(0x573)](_0x26344c,null,0x2)),_0x26344c&&F(this[_0x2e40e6(0x616)],'chats',{'chat':_0x26344c});}catch(_0x5c9798){this[_0x2e40e6(0x563)]['error'](this[_0x2e40e6(0x616)]+'\x20('+this[_0x2e40e6(0x568)][_0x2e40e6(0x72d)]+_0x2e40e6(0x773)+(_0x5c9798 instanceof Error?_0x5c9798[_0x2e40e6(0x805)]:JSON[_0x2e40e6(0x573)](_0x5c9798,null,0x2)));}}async['findFlow'](_0x64b0b0){const _0x781883=a0_0x4bc873;try{this['logger'][_0x781883(0x377)](this['instanceName']+'\x20('+this[_0x781883(0x568)][_0x781883(0x72d)]+'):\x20Buscando\x20flow...');let _0xb25cb0=_0x64b0b0[_0x781883(0x242)](/\D/g,''),_0xd03a95=this[_0x781883(0x5a5)][_0x781883(0x25d)][_0x781883(0x8aa)](_0x51817d=>_0x51817d['testingWith']===_0xb25cb0);if(_0xd03a95||(this[_0x781883(0x563)]['verbose'](this[_0x781883(0x616)]+'\x20('+this[_0x781883(0x568)][_0x781883(0x72d)]+_0x781883(0x2aa)),_0xd03a95=this[_0x781883(0x5a5)][_0x781883(0x25d)]['find'](_0x6fca7a=>_0x6fca7a[_0x781883(0x323)]===!0x0)),!_0xd03a95)return this[_0x781883(0x563)]['verbose'](this[_0x781883(0x616)]+'\x20('+this[_0x781883(0x568)][_0x781883(0x72d)]+_0x781883(0x4fc)),null;let _0x3a80fa=await this[_0x781883(0x6c6)]['flow'][_0x781883(0x6e7)]({'where':{'_id':_0xd03a95['_id']}});if(!_0x3a80fa||!_0x3a80fa[_0x781883(0x7ee)]?.['includes'](this[_0x781883(0x568)][_0x781883(0x72d)]))throw this[_0x781883(0x563)]['error'](this[_0x781883(0x616)]+'\x20('+this[_0x781883(0x568)]['wuid']+_0x781883(0x619)+_0x3a80fa[_0x781883(0x618)]+_0x781883(0x372)),new m(_0x781883(0x917)+_0x3a80fa[_0x781883(0x618)]+_0x781883(0x372));return _0x3a80fa;}catch(_0xd3f578){return this['logger'][_0x781883(0x47a)](this['instanceName']+'\x20('+this[_0x781883(0x568)][_0x781883(0x72d)]+_0x781883(0x319)+(_0xd3f578 instanceof Error?_0xd3f578['message']:JSON[_0x781883(0x573)](_0xd3f578,null,0x2))),null;}}async['findConversation'](_0x3dca1c,_0x164361){const _0x5c324d=a0_0x4bc873;try{let _0x17e4c4=!!_0x164361['vote'],_0x108424=_0x164361[_0x5c324d(0x392)],_0x1b2546=null;if(this[_0x5c324d(0x563)]['verbose'](this[_0x5c324d(0x616)]+'\x20('+this[_0x5c324d(0x568)][_0x5c324d(0x72d)]+_0x5c324d(0x2d9)+_0x17e4c4+'\x20quoted:\x20'+_0x108424),_0x17e4c4){this['logger'][_0x5c324d(0x377)](this[_0x5c324d(0x616)]+'\x20('+this[_0x5c324d(0x568)][_0x5c324d(0x72d)]+_0x5c324d(0x8bf));let _0x2351df={'where':{'remoteJid':_0x3dca1c,'waitingMenu_id':_0x108424}};if(_0x1b2546=await this['repository'][_0x5c324d(0x43a)]['findOne'](_0x2351df,this[_0x5c324d(0x568)][_0x5c324d(0x72d)]),!_0x1b2546)return this[_0x5c324d(0x563)][_0x5c324d(0x377)](this[_0x5c324d(0x616)]+'\x20('+this['instance'][_0x5c324d(0x72d)]+_0x5c324d(0x450)),null;let _0x1598dc=Date['now'](),_0x536914=_0x1b2546?.['minutesToClose']||0x0,_0x309ca6=_0x1598dc-_0x536914*0x3c*0x3e8;if(_0x1b2546[_0x5c324d(0x3fb)]<_0x309ca6){this[_0x5c324d(0x563)]['verbose'](this[_0x5c324d(0x616)]+'\x20('+this[_0x5c324d(0x568)][_0x5c324d(0x72d)]+_0x5c324d(0x332));let _0x440372={'number':_0x1b2546['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x1b2546[_0x5c324d(0x7ae)]}};await this['textMessage'](_0x440372);let _0x40fc18={'status':_0x5c324d(0x29a),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x5c324d(0x6c6)][_0x5c324d(0x43a)][_0x5c324d(0x7eb)](_0x1b2546['_id'],_0x40fc18,this[_0x5c324d(0x568)][_0x5c324d(0x72d)]),null;}return _0x1b2546[_0x5c324d(0x3fb)]=Date[_0x5c324d(0x3bd)](),_0x1b2546['chatLog'][_0x5c324d(0x259)]=_0x164361,_0x1b2546;}else{this['logger'][_0x5c324d(0x377)](this[_0x5c324d(0x616)]+'\x20('+this[_0x5c324d(0x568)][_0x5c324d(0x72d)]+'):\x20'+this[_0x5c324d(0x568)][_0x5c324d(0x72d)]+_0x5c324d(0x200)),this[_0x5c324d(0x563)][_0x5c324d(0x377)](this[_0x5c324d(0x616)]+'\x20('+this[_0x5c324d(0x568)]['wuid']+_0x5c324d(0x595));let _0x186147={'where':{'remoteJid':_0x3dca1c,'status':_0x5c324d(0x808)}};if(_0x1b2546=await this['repository'][_0x5c324d(0x43a)][_0x5c324d(0x6e7)](_0x186147,this[_0x5c324d(0x568)][_0x5c324d(0x72d)]),!_0x1b2546){let _0x3265dc=await this[_0x5c324d(0x93c)](_0x3dca1c);if(_0x3265dc&&(_0x1b2546=await this['createNewConversation'](_0x3265dc,_0x164361['key'],_0x164361)),!_0x1b2546)return null;}let _0x4225e9=Date[_0x5c324d(0x3bd)](),_0x2a0907=_0x1b2546?.[_0x5c324d(0x918)]||0x0,_0x41301f=_0x4225e9-_0x2a0907*0x3c*0x3e8;if(this[_0x5c324d(0x563)][_0x5c324d(0x377)](this[_0x5c324d(0x616)]+'\x20('+this[_0x5c324d(0x568)][_0x5c324d(0x72d)]+_0x5c324d(0x255)+_0x4225e9+_0x5c324d(0x366)+_0x2a0907+',\x20Expiration\x20Time:\x20'+_0x41301f),this['logger'][_0x5c324d(0x377)](this[_0x5c324d(0x616)]+'\x20('+this['instance']['wuid']+_0x5c324d(0x87d)),this[_0x5c324d(0x563)]['verbose'](this['instanceName']+'\x20('+this[_0x5c324d(0x568)][_0x5c324d(0x72d)]+'):\x20conversation.lastInteraction:\x20'+_0x1b2546['lastInteraction']),this[_0x5c324d(0x563)][_0x5c324d(0x377)](this[_0x5c324d(0x616)]+'\x20('+this[_0x5c324d(0x568)]['wuid']+'):\x20expirationTime:\x20'+_0x41301f),_0x1b2546[_0x5c324d(0x3fb)]<_0x41301f){this[_0x5c324d(0x563)][_0x5c324d(0x377)](this[_0x5c324d(0x616)]+'\x20('+this[_0x5c324d(0x568)][_0x5c324d(0x72d)]+_0x5c324d(0x400));let _0x4ddb9e=await this[_0x5c324d(0x93c)](_0x3dca1c);if(_0x4ddb9e===null)return null;_0x1b2546&&await this[_0x5c324d(0x6c6)][_0x5c324d(0x43a)][_0x5c324d(0x7eb)](_0x1b2546[_0x5c324d(0x618)],{'status':_0x5c324d(0x29a)},this[_0x5c324d(0x568)][_0x5c324d(0x72d)]),_0x1b2546=await this['createNewConversation'](_0x4ddb9e,_0x164361[_0x5c324d(0x678)],_0x164361);}return _0x1b2546[_0x5c324d(0x3fb)]=_0x4225e9,_0x1b2546[_0x5c324d(0x590)][_0x5c324d(0x259)]=_0x164361,_0x1b2546;}}catch(_0x408638){return this[_0x5c324d(0x563)][_0x5c324d(0x47a)](this[_0x5c324d(0x616)]+'\x20('+this[_0x5c324d(0x568)][_0x5c324d(0x72d)]+_0x5c324d(0x82e)+(_0x408638 instanceof Error?_0x408638[_0x5c324d(0x805)]:JSON[_0x5c324d(0x573)](_0x408638,null,0x2))),null;}}async[a0_0x4bc873(0x548)](_0x2be9dd,_0x269e75,_0x49e423){const _0xea2eb4=a0_0x4bc873;this[_0xea2eb4(0x563)][_0xea2eb4(0x377)](this[_0xea2eb4(0x616)]+'\x20('+this[_0xea2eb4(0x568)][_0xea2eb4(0x72d)]+_0xea2eb4(0x5d9));try{let _0x5211e7=require(_0xea2eb4(0x513))[_0xea2eb4(0x4b9)],_0x4a55fe=Date[_0xea2eb4(0x3bd)](),_0x46844d='start',_0x49505f=_0x269e75[_0xea2eb4(0x45e)]?null:_0x49e423,_0x41d8b8=_0x269e75[_0xea2eb4(0x45e)]?_0x49e423:null,_0x51aaf1=_0x269e75['remoteJid'],_0x307b5f=this[_0xea2eb4(0x5a5)]['flows'][_0xea2eb4(0x8aa)](_0x201ba1=>_0x201ba1[_0xea2eb4(0x618)]===_0x2be9dd[_0xea2eb4(0x618)]?.[_0xea2eb4(0x529)]()),_0x40beca=_0x307b5f?.[_0xea2eb4(0x918)]??_0x2be9dd['minutesToClose']??0x0,_0x7fef2e=_0x307b5f?.[_0xea2eb4(0x596)]??_0x2be9dd[_0xea2eb4(0x596)]??!0x1;await this[_0xea2eb4(0x758)](_0x51aaf1);let _0x3d4798={'flowId':_0x2be9dd[_0xea2eb4(0x618)],..._0x2be9dd,'chatLog':null},_0xa8980d=await this[_0xea2eb4(0x58c)](_0x3d4798[_0xea2eb4(0x46b)]),_0x20683f=await this[_0xea2eb4(0x63f)](_0x51aaf1),_0x1b551e={..._0xa8980d,..._0x20683f,'_remoteJid':_0x51aaf1},_0x1e3323={'lastReceivedMessage':_0x49505f,'lastSendMessage':_0x41d8b8,'lastBlockId':_0x46844d,'lastCondition':!0x0,'realVariables':_0x1b551e};_0x3d4798['chatLog']=_0x1e3323,delete _0x3d4798[_0xea2eb4(0x618)],_0x3d4798[_0xea2eb4(0x618)]=new _0x5211e7(),_0x3d4798['lastInteraction']=_0x4a55fe,_0x3d4798['status']='open',_0x3d4798[_0xea2eb4(0x8d4)]=_0x51aaf1,_0x3d4798[_0xea2eb4(0x918)]=_0x40beca,_0x3d4798['readMessages']=_0x7fef2e;let _0x1fb486=await this[_0xea2eb4(0x6c6)][_0xea2eb4(0x43a)][_0xea2eb4(0x7eb)](_0x3d4798[_0xea2eb4(0x618)],_0x3d4798,this['instance'][_0xea2eb4(0x72d)]);return this[_0xea2eb4(0x563)]['verbose'](this[_0xea2eb4(0x616)]+'\x20('+this[_0xea2eb4(0x568)][_0xea2eb4(0x72d)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x1fb486?_0x3d4798:null;}catch(_0xdd211c){return this[_0xea2eb4(0x563)][_0xea2eb4(0x47a)](this['instanceName']+'\x20('+this[_0xea2eb4(0x568)][_0xea2eb4(0x72d)]+_0xea2eb4(0x38e)+(_0xdd211c instanceof Error?_0xdd211c[_0xea2eb4(0x805)]:JSON['stringify'](_0xdd211c,null,0x2))),_0xdd211c;}}async[a0_0x4bc873(0x65b)](_0x2690ef,_0x4777d5){const _0x282859=a0_0x4bc873;let _0x7816b9=_0x2690ef[_0x282859(0x8d4)];_0x4777d5['uazapi'][_0x282859(0x8d4)]&&_0x4777d5[_0x282859(0x473)]['remoteJid'][_0x282859(0x4cf)]()!==''&&(_0x7816b9=_0x4777d5['uazapi'][_0x282859(0x8d4)][_0x282859(0x4cf)]()),this[_0x282859(0x563)][_0x282859(0x377)](this['instanceName']+'\x20('+this[_0x282859(0x568)][_0x282859(0x72d)]+'):\x20Enviando\x20texto');let _0x164169={'number':_0x7816b9,'options':{'delay':_0x4777d5[_0x282859(0x473)]['delay'],'linkPreview':_0x4777d5[_0x282859(0x473)][_0x282859(0x875)]},'textMessage':{'text':_0x4777d5[_0x282859(0x473)][_0x282859(0x23c)]}};try{let _0x478a07=await this['textMessage'](_0x164169);if(_0x478a07){let _0xa40384={'_id':_0x478a07[_0x282859(0x678)]['id'],'_fromMe':_0x478a07[_0x282859(0x678)][_0x282859(0x45e)],'_remoteJid':_0x478a07['key'][_0x282859(0x8d4)]},_0x2abc05=(0x0,w['normalizeMessageContent'])(_0x478a07[_0x282859(0x805)]),_0x55be58=(0x0,w[_0x282859(0x932)])(_0x2abc05);_0x2690ef[_0x282859(0x590)][_0x282859(0x4aa)]=_0x4777d5[_0x282859(0x618)][_0x282859(0x529)]();let {message_normalized:_0x4497f8}=this[_0x282859(0x1fc)](_0x2abc05,_0x55be58,null);_0x2690ef[_0x282859(0x590)][_0x282859(0x1ec)]=await _0x4497f8;let _0x2c1fa0={'messageId':_0x478a07[_0x282859(0x678)]['id']},_0x4a635d=_0x2690ef[_0x282859(0x590)]['realVariables'];Object[_0x282859(0x310)](_0x4a635d,_0xa40384),_0x2690ef['chatLog'][_0x282859(0x2df)]=_0x4a635d,this[_0x282859(0x6f2)](_0x2690ef,_0x4777d5,_0x2c1fa0);}else{let _0x360d62={'error':!0x0};this[_0x282859(0x6f2)](_0x2690ef,_0x4777d5,_0x360d62),this[_0x282859(0x563)][_0x282859(0x47a)](this['instanceName']+'\x20('+this[_0x282859(0x568)][_0x282859(0x72d)]+_0x282859(0x8ca));}}catch(_0x18a728){let _0x46db96={'error':!0x0,'errorLog':_0x18a728[_0x282859(0x529)]()};this['updateConversation'](_0x2690ef,_0x4777d5,_0x46db96),this['logger'][_0x282859(0x47a)](this['instanceName']+'\x20('+this[_0x282859(0x568)][_0x282859(0x72d)]+_0x282859(0x2ca)+(_0x18a728 instanceof Error?_0x18a728[_0x282859(0x805)]:JSON[_0x282859(0x573)](_0x18a728,null,0x2)));}}async[a0_0x4bc873(0x3aa)](_0x353159,_0x3e63f1){const _0x5129d4=a0_0x4bc873;let _0x1e0d2f=_0x353159[_0x5129d4(0x8d4)];_0x3e63f1[_0x5129d4(0x473)]['remoteJid']&&_0x3e63f1['uazapi'][_0x5129d4(0x8d4)][_0x5129d4(0x4cf)]()!==''&&(_0x1e0d2f=_0x3e63f1[_0x5129d4(0x473)][_0x5129d4(0x8d4)]['trim']()),this[_0x5129d4(0x563)][_0x5129d4(0x377)](this[_0x5129d4(0x616)]+'\x20('+this['instance'][_0x5129d4(0x72d)]+_0x5129d4(0x739));let _0x42ef6a={'number':_0x1e0d2f,'options':{'delay':_0x3e63f1[_0x5129d4(0x473)]['delay'],'linkPreview':_0x3e63f1['uazapi'][_0x5129d4(0x875)]},'mediaMessage':{'mediatype':_0x3e63f1[_0x5129d4(0x473)][_0x5129d4(0x6aa)],'caption':_0x3e63f1[_0x5129d4(0x473)][_0x5129d4(0x52b)],'media':_0x3e63f1[_0x5129d4(0x473)][_0x5129d4(0x8c3)],'fileName':_0x3e63f1['uazapi']['fileName']}};try{let _0x4d5c6f=await this['mediaMessage'](_0x42ef6a);if(_0x4d5c6f){let _0x1908f2={'_id':_0x4d5c6f['key']['id'],'_fromMe':_0x4d5c6f[_0x5129d4(0x678)][_0x5129d4(0x45e)],'_remoteJid':_0x4d5c6f[_0x5129d4(0x678)][_0x5129d4(0x8d4)]},_0x36b789=(0x0,w['normalizeMessageContent'])(_0x4d5c6f['message']),_0x1aa4ed=(0x0,w[_0x5129d4(0x932)])(_0x36b789);_0x353159['chatLog'][_0x5129d4(0x4aa)]=_0x3e63f1[_0x5129d4(0x618)]['toString']();let {message_normalized:_0x28c65a}=this[_0x5129d4(0x1fc)](_0x36b789,_0x1aa4ed,null);_0x353159['chatLog'][_0x5129d4(0x1ec)]=await _0x28c65a;let _0x3c3ad6={'messageId':_0x4d5c6f['key']['id']},_0x37179b=_0x353159[_0x5129d4(0x590)]['realVariables'];Object['assign'](_0x37179b,_0x1908f2),_0x353159[_0x5129d4(0x590)]['realVariables']=_0x37179b,this[_0x5129d4(0x6f2)](_0x353159,_0x3e63f1,_0x3c3ad6);}else{let _0x401cc9={'error':!0x0};this['updateConversation'](_0x353159,_0x3e63f1,_0x401cc9),this['logger'][_0x5129d4(0x47a)](this['instanceName']+'\x20('+this['instance'][_0x5129d4(0x72d)]+_0x5129d4(0x84c));}}catch(_0x71f85b){let _0x3fbc10={'error':!0x0,'errorLog':_0x71f85b[_0x5129d4(0x529)]()};this[_0x5129d4(0x6f2)](_0x353159,_0x3e63f1,_0x3fbc10),this[_0x5129d4(0x563)]['error'](this[_0x5129d4(0x616)]+'\x20('+this[_0x5129d4(0x568)][_0x5129d4(0x72d)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20'+(_0x71f85b instanceof Error?_0x71f85b['message']:JSON['stringify'](_0x71f85b,null,0x2)));}}async[a0_0x4bc873(0x445)](_0x610636,_0x2ab1f0){const _0xd2c803=a0_0x4bc873;let _0x3ecab5=_0x610636[_0xd2c803(0x8d4)];_0x2ab1f0['uazapi'][_0xd2c803(0x8d4)]&&_0x2ab1f0[_0xd2c803(0x473)][_0xd2c803(0x8d4)][_0xd2c803(0x4cf)]()!==''&&(_0x3ecab5=_0x2ab1f0[_0xd2c803(0x473)][_0xd2c803(0x8d4)][_0xd2c803(0x4cf)]()),this[_0xd2c803(0x563)][_0xd2c803(0x377)](this[_0xd2c803(0x616)]+'\x20('+this[_0xd2c803(0x568)][_0xd2c803(0x72d)]+_0xd2c803(0x8a7));let _0x11817d={'number':_0x3ecab5,'options':{'delay':_0x2ab1f0[_0xd2c803(0x473)][_0xd2c803(0x3c9)]},'locationMessage':{'name':_0x2ab1f0[_0xd2c803(0x473)]['name'],'address':_0x2ab1f0['uazapi']['address'],'latitude':_0x2ab1f0['uazapi']['latitude'],'longitude':_0x2ab1f0[_0xd2c803(0x473)][_0xd2c803(0x38d)]}};try{let _0x45fd31=await this['locationMessage'](_0x11817d);if(_0x45fd31){let _0x78998b={'_id':_0x45fd31[_0xd2c803(0x678)]['id'],'_fromMe':_0x45fd31['key'][_0xd2c803(0x45e)],'_remoteJid':_0x45fd31['key'][_0xd2c803(0x8d4)]},_0x31a1f3=(0x0,w[_0xd2c803(0x2b3)])(_0x45fd31['message']),_0x3ab277=(0x0,w[_0xd2c803(0x932)])(_0x31a1f3);_0x610636['chatLog']['lastBlockId']=_0x2ab1f0['_id']['toString']();let {message_normalized:_0x14ce4b}=this[_0xd2c803(0x1fc)](_0x31a1f3,_0x3ab277,null);_0x610636[_0xd2c803(0x590)][_0xd2c803(0x1ec)]=await _0x14ce4b;let _0x41b837={'messageId':_0x45fd31[_0xd2c803(0x678)]['id']},_0x785af5=_0x610636[_0xd2c803(0x590)][_0xd2c803(0x2df)];Object['assign'](_0x785af5,_0x78998b),_0x610636[_0xd2c803(0x590)][_0xd2c803(0x2df)]=_0x785af5,this[_0xd2c803(0x6f2)](_0x610636,_0x2ab1f0,_0x41b837);}else{let _0x46a6ce={'error':!0x0};this['updateConversation'](_0x610636,_0x2ab1f0,_0x46a6ce),this[_0xd2c803(0x563)][_0xd2c803(0x47a)](this[_0xd2c803(0x616)]+'\x20('+this['instance'][_0xd2c803(0x72d)]+_0xd2c803(0x237));}}catch(_0xf3e2f6){let _0x517865={'error':!0x0,'errorLog':_0xf3e2f6[_0xd2c803(0x529)]()};this[_0xd2c803(0x6f2)](_0x610636,_0x2ab1f0,_0x517865),this[_0xd2c803(0x563)]['error'](this['instanceName']+'\x20('+this[_0xd2c803(0x568)][_0xd2c803(0x72d)]+_0xd2c803(0x70c)+(_0xf3e2f6 instanceof Error?_0xf3e2f6[_0xd2c803(0x805)]:JSON[_0xd2c803(0x573)](_0xf3e2f6,null,0x2)));}}async[a0_0x4bc873(0x5fc)](_0x20306b,_0x3f680b){const _0x5c8754=a0_0x4bc873;let _0x5a46fb=_0x20306b[_0x5c8754(0x8d4)];_0x3f680b['uazapi']['remoteJid']&&_0x3f680b['uazapi']['remoteJid'][_0x5c8754(0x4cf)]()!==''&&(_0x5a46fb=_0x3f680b[_0x5c8754(0x473)][_0x5c8754(0x8d4)][_0x5c8754(0x4cf)]()),this['logger'][_0x5c8754(0x377)](this[_0x5c8754(0x616)]+'\x20('+this[_0x5c8754(0x568)][_0x5c8754(0x72d)]+'):\x20Enviando\x20udio');let _0x41e153={'number':_0x5a46fb,'options':{'delay':_0x3f680b[_0x5c8754(0x473)][_0x5c8754(0x3c9)]},'audioMessage':{'audio':_0x3f680b[_0x5c8754(0x473)]['audio']}};try{let _0x245118=await this[_0x5c8754(0x4d9)](_0x41e153);if(_0x245118){let _0x17729a={'_id':_0x245118[_0x5c8754(0x678)]['id'],'_fromMe':_0x245118[_0x5c8754(0x678)][_0x5c8754(0x45e)],'_remoteJid':_0x245118[_0x5c8754(0x678)][_0x5c8754(0x8d4)]},_0x5f269b=(0x0,w[_0x5c8754(0x2b3)])(_0x245118[_0x5c8754(0x805)]),_0x515de6=(0x0,w[_0x5c8754(0x932)])(_0x5f269b);_0x20306b[_0x5c8754(0x590)][_0x5c8754(0x4aa)]=_0x3f680b[_0x5c8754(0x618)][_0x5c8754(0x529)]();let {message_normalized:_0x40268e}=this[_0x5c8754(0x1fc)](_0x5f269b,_0x515de6,null);_0x20306b[_0x5c8754(0x590)][_0x5c8754(0x1ec)]=await _0x40268e;let _0xc0c294={'messageId':_0x245118[_0x5c8754(0x678)]['id']},_0x4ecd42=_0x20306b[_0x5c8754(0x590)][_0x5c8754(0x2df)];Object[_0x5c8754(0x310)](_0x4ecd42,_0x17729a),_0x20306b[_0x5c8754(0x590)][_0x5c8754(0x2df)]=_0x4ecd42,this[_0x5c8754(0x6f2)](_0x20306b,_0x3f680b,_0xc0c294);}else{let _0x35e27a={'error':!0x0};this['updateConversation'](_0x20306b,_0x3f680b,_0x35e27a),this[_0x5c8754(0x563)][_0x5c8754(0x47a)](this[_0x5c8754(0x616)]+'\x20('+this[_0x5c8754(0x568)][_0x5c8754(0x72d)]+_0x5c8754(0x25f));}}catch(_0x56f204){let _0x43c5f3={'error':!0x0,'errorLog':_0x56f204['toString']()};this['updateConversation'](_0x20306b,_0x3f680b,_0x43c5f3),this[_0x5c8754(0x563)]['error'](this[_0x5c8754(0x616)]+'\x20('+this['instance'][_0x5c8754(0x72d)]+_0x5c8754(0x490)+(_0x56f204 instanceof Error?_0x56f204['message']:JSON[_0x5c8754(0x573)](_0x56f204,null,0x2)));}}async[a0_0x4bc873(0x64b)](_0x288f8b,_0xa46d3f){const _0x3d16be=a0_0x4bc873;let _0x594530=_0x288f8b[_0x3d16be(0x8d4)];_0xa46d3f['uazapi']['remoteJid']&&_0xa46d3f[_0x3d16be(0x473)]['remoteJid'][_0x3d16be(0x4cf)]()!==''&&(_0x594530=_0xa46d3f[_0x3d16be(0x473)][_0x3d16be(0x8d4)]['trim']()),this[_0x3d16be(0x563)][_0x3d16be(0x377)](this[_0x3d16be(0x616)]+'\x20('+this['instance']['wuid']+_0x3d16be(0x3d4));let _0x3187ad={'number':_0x594530,'options':{'delay':_0xa46d3f[_0x3d16be(0x473)][_0x3d16be(0x3c9)]},'contactMessage':[{'fullName':_0xa46d3f['uazapi']['fullName'],'phoneNumber':_0xa46d3f[_0x3d16be(0x473)][_0x3d16be(0x282)]}]};try{let _0x233fc9=await this[_0x3d16be(0x688)](_0x3187ad);if(_0x233fc9){let _0x13d8ad={'_id':_0x233fc9['key']['id'],'_fromMe':_0x233fc9[_0x3d16be(0x678)]['fromMe'],'_remoteJid':_0x233fc9['key'][_0x3d16be(0x8d4)]},_0x137426=(0x0,w[_0x3d16be(0x2b3)])(_0x233fc9[_0x3d16be(0x805)]),_0x4d71d3=(0x0,w['getContentType'])(_0x137426);_0x288f8b[_0x3d16be(0x590)]['lastBlockId']=_0xa46d3f[_0x3d16be(0x618)]['toString']();let {message_normalized:_0x24e34e}=this[_0x3d16be(0x1fc)](_0x137426,_0x4d71d3,null);_0x288f8b[_0x3d16be(0x590)]['lastSendMessage']=await _0x24e34e;let _0x272d28={'messageId':_0x233fc9[_0x3d16be(0x678)]['id']},_0x30e710=_0x288f8b[_0x3d16be(0x590)]['realVariables'];Object[_0x3d16be(0x310)](_0x30e710,_0x13d8ad),_0x288f8b[_0x3d16be(0x590)][_0x3d16be(0x2df)]=_0x30e710,this['updateConversation'](_0x288f8b,_0xa46d3f,_0x272d28);}else{let _0x55b450={'error':!0x0};this['updateConversation'](_0x288f8b,_0xa46d3f,_0x55b450),this[_0x3d16be(0x563)][_0x3d16be(0x47a)](this['instanceName']+'\x20('+this['instance'][_0x3d16be(0x72d)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.');}}catch(_0x3a0820){let _0x23b80b={'error':!0x0,'errorLog':_0x3a0820[_0x3d16be(0x529)]()};this[_0x3d16be(0x6f2)](_0x288f8b,_0xa46d3f,_0x23b80b),this[_0x3d16be(0x563)][_0x3d16be(0x47a)](this[_0x3d16be(0x616)]+'\x20('+this[_0x3d16be(0x568)][_0x3d16be(0x72d)]+_0x3d16be(0x330)+(_0x3a0820 instanceof Error?_0x3a0820[_0x3d16be(0x805)]:JSON['stringify'](_0x3a0820,null,0x2)));}}[a0_0x4bc873(0x5c7)](_0x563dcf,_0x43aa28){const _0x373969=a0_0x4bc873;for(let _0x1790fc of _0x563dcf)_0x1790fc[_0x373969(0x446)]&&(_0x1790fc[_0x373969(0x446)]=this[_0x373969(0x8a1)](_0x1790fc[_0x373969(0x446)],_0x43aa28)),_0x1790fc['optionDescription']&&(_0x1790fc[_0x373969(0x826)]=this[_0x373969(0x8a1)](_0x1790fc[_0x373969(0x826)],_0x43aa28));}async[a0_0x4bc873(0x48b)](_0x4924bd,_0x41ea7f){const _0x51d3d1=a0_0x4bc873;let _0x14f56b=_0x4924bd[_0x51d3d1(0x8d4)];_0x41ea7f[_0x51d3d1(0x473)][_0x51d3d1(0x8d4)]&&_0x41ea7f[_0x51d3d1(0x473)][_0x51d3d1(0x8d4)][_0x51d3d1(0x4cf)]()!==''&&(_0x14f56b=_0x41ea7f[_0x51d3d1(0x473)][_0x51d3d1(0x8d4)]['trim']()),this['logger'][_0x51d3d1(0x377)](this['instanceName']+'\x20('+this[_0x51d3d1(0x568)][_0x51d3d1(0x72d)]+'):\x20Enviando\x20enquete');let _0x313f75=_0x4924bd[_0x51d3d1(0x4ec)][_0x51d3d1(0x411)](_0x5d17df=>_0x5d17df['blockId']===_0x41ea7f[_0x51d3d1(0x618)])[_0x51d3d1(0x32e)]((_0x4f42ac,_0xc32efd)=>_0x4f42ac['order']-_0xc32efd[_0x51d3d1(0x268)]);this['replaceVariablesInReplyOptions'](_0x313f75,_0x4924bd[_0x51d3d1(0x590)]['realVariables']);let _0x25aba2=_0x313f75[_0x51d3d1(0x347)](_0x5e660b=>_0x5e660b[_0x51d3d1(0x446)]),_0x46817e={'number':_0x14f56b,'menuMessage':{'type':_0x41ea7f[_0x51d3d1(0x473)][_0x51d3d1(0x28a)]||_0x51d3d1(0x2c9),'text':_0x41ea7f['uazapi'][_0x51d3d1(0x23c)]||_0x41ea7f['uazapi'][_0x51d3d1(0x60f)],'footerText':_0x41ea7f['uazapi'][_0x51d3d1(0x3c1)],'buttonText':_0x41ea7f['uazapi'][_0x51d3d1(0x6c7)],'selectableCount':0x1,'choices':_0x25aba2},'options':{'delay':_0x41ea7f[_0x51d3d1(0x473)]['delay']}};try{let _0x1befcb=await this[_0x51d3d1(0x299)](_0x46817e);if(_0x1befcb){let _0xed44b1={'_id':_0x1befcb['key']['id'],'_fromMe':_0x1befcb[_0x51d3d1(0x678)]['fromMe'],'_remoteJid':_0x1befcb[_0x51d3d1(0x678)][_0x51d3d1(0x8d4)]};_0x41ea7f[_0x51d3d1(0x473)][_0x51d3d1(0x79e)]===!0x0&&(_0x4924bd['status']=_0x51d3d1(0x888),this[_0x51d3d1(0x563)][_0x51d3d1(0x377)](this[_0x51d3d1(0x616)]+'\x20('+this['instance'][_0x51d3d1(0x72d)]+'):\x20conversation.status:\x20'+_0x4924bd['status'])),this[_0x51d3d1(0x563)][_0x51d3d1(0x377)](this[_0x51d3d1(0x616)]+'\x20('+this[_0x51d3d1(0x568)][_0x51d3d1(0x72d)]+_0x51d3d1(0x449)+(_0x41ea7f[_0x51d3d1(0x473)][_0x51d3d1(0x60f)]||_0x41ea7f[_0x51d3d1(0x473)][_0x51d3d1(0x23c)])),_0x4924bd[_0x51d3d1(0x74e)]=_0x1befcb['key']['id'],_0x4924bd[_0x51d3d1(0x701)]=_0x41ea7f['uazapi'][_0x51d3d1(0x60f)]||_0x41ea7f[_0x51d3d1(0x473)][_0x51d3d1(0x23c)],_0x4924bd[_0x51d3d1(0x84e)]=_0x313f75,_0x41ea7f[_0x51d3d1(0x473)][_0x51d3d1(0x48a)]&&(_0x4924bd['waitingMenu_ExpiredMessage']=_0x41ea7f['uazapi'][_0x51d3d1(0x48a)]),this[_0x51d3d1(0x563)]['verbose'](this[_0x51d3d1(0x616)]+'\x20('+this[_0x51d3d1(0x568)]['wuid']+_0x51d3d1(0x8fc)+_0x4924bd[_0x51d3d1(0x701)]);let _0x396ba2=(0x0,w[_0x51d3d1(0x2b3)])(_0x1befcb[_0x51d3d1(0x805)]),_0x4d4cad=(0x0,w['getContentType'])(_0x396ba2);_0x4924bd[_0x51d3d1(0x590)]['lastBlockId']=_0x41ea7f[_0x51d3d1(0x618)][_0x51d3d1(0x529)]();let {message_normalized:_0x35e52d}=this['normalizeMessage'](_0x396ba2,_0x4d4cad,null);_0x4924bd[_0x51d3d1(0x590)][_0x51d3d1(0x1ec)]=await _0x35e52d;let _0x3eedf6={'messageId':_0x1befcb[_0x51d3d1(0x678)]['id']},_0x26a579=_0x4924bd[_0x51d3d1(0x590)]['realVariables'];Object['assign'](_0x26a579,_0xed44b1),_0x4924bd[_0x51d3d1(0x590)][_0x51d3d1(0x2df)]=_0x26a579,this['updateConversation'](_0x4924bd,_0x41ea7f,_0x3eedf6);}else{let _0x18fa29={'error':!0x0};this[_0x51d3d1(0x6f2)](_0x4924bd,_0x41ea7f,_0x18fa29),this[_0x51d3d1(0x563)][_0x51d3d1(0x47a)](this[_0x51d3d1(0x616)]+'\x20('+this[_0x51d3d1(0x568)][_0x51d3d1(0x72d)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.');}}catch(_0x75fd2e){let _0x462da9={'error':!0x0,'errorLog':_0x75fd2e instanceof Error?_0x75fd2e['message']:JSON[_0x51d3d1(0x573)](_0x75fd2e,null,0x2)};this[_0x51d3d1(0x6f2)](_0x4924bd,_0x41ea7f,_0x462da9),this[_0x51d3d1(0x563)]['error'](this[_0x51d3d1(0x616)]+'\x20('+this[_0x51d3d1(0x568)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20'+(_0x75fd2e instanceof Error?_0x75fd2e['message']:JSON[_0x51d3d1(0x573)](_0x75fd2e,null,0x2)));}}async['uazapiDeleteMessage'](_0x43a365,_0x560353){const _0x519f8a=a0_0x4bc873;this[_0x519f8a(0x563)][_0x519f8a(0x377)](this['instanceName']+'\x20('+this[_0x519f8a(0x568)][_0x519f8a(0x72d)]+_0x519f8a(0x351));let _0x5b8a9d=_0x43a365['chatLog']['blockLogs'][_0x519f8a(0x8aa)](_0xb4574d=>_0xb4574d[_0x519f8a(0x666)][_0x519f8a(0x529)]()===_0x560353[_0x519f8a(0x473)]['blockId'][_0x519f8a(0x529)]()),_0x3257ee={'id':_0x5b8a9d[_0x519f8a(0x51f)],'remoteJid':_0x5b8a9d[_0x519f8a(0x8d4)],'fromMe':_0x5b8a9d[_0x519f8a(0x45e)]};try{let _0x5e3135=await this[_0x519f8a(0x556)](_0x3257ee);if(_0x5e3135){let _0x5ec6f6=(0x0,w[_0x519f8a(0x2b3)])(_0x5e3135[_0x519f8a(0x805)]),_0x22a62d=(0x0,w[_0x519f8a(0x932)])(_0x5ec6f6);_0x43a365[_0x519f8a(0x590)][_0x519f8a(0x4aa)]=_0x560353[_0x519f8a(0x618)][_0x519f8a(0x529)]();let {message_normalized:_0x48b698}=this[_0x519f8a(0x1fc)](_0x5ec6f6,_0x22a62d,null);_0x43a365[_0x519f8a(0x590)][_0x519f8a(0x1ec)]=await _0x48b698;let _0x2816d8={};this[_0x519f8a(0x6f2)](_0x43a365,_0x560353,_0x2816d8);}else{let _0x4c0bed={'error':!0x0};this[_0x519f8a(0x6f2)](_0x43a365,_0x560353,_0x4c0bed),this[_0x519f8a(0x563)][_0x519f8a(0x47a)](this['instanceName']+'\x20('+this[_0x519f8a(0x568)][_0x519f8a(0x72d)]+_0x519f8a(0x6b0));}}catch(_0x541321){let _0x19e2fe={'error':!0x0,'errorLog':_0x541321 instanceof Error?_0x541321[_0x519f8a(0x805)]:JSON[_0x519f8a(0x573)](_0x541321,null,0x2)};this[_0x519f8a(0x6f2)](_0x43a365,_0x560353,_0x19e2fe),this[_0x519f8a(0x563)][_0x519f8a(0x47a)](this[_0x519f8a(0x616)]+'\x20('+this[_0x519f8a(0x568)][_0x519f8a(0x72d)]+_0x519f8a(0x780)+(_0x541321 instanceof Error?_0x541321[_0x519f8a(0x805)]:JSON['stringify'](_0x541321,null,0x2)));}}async[a0_0x4bc873(0x368)](_0x48c7bb,_0x37d944){const _0x4dba69=a0_0x4bc873;if(_0x48c7bb['name']||(_0x48c7bb[_0x4dba69(0x60f)]=(0x0,Y['v4'])()),_0x37d944!==Ri&&_0x48c7bb?.['globalShow'])throw new m(_0x4dba69(0x2bc));if('_id'in _0x48c7bb&&_0x4dba69(0x6dd)in _0x48c7bb)return this['AddUserFlow'](_0x48c7bb[_0x4dba69(0x6dd)],_0x48c7bb[_0x4dba69(0x618)]);this[_0x4dba69(0x563)][_0x4dba69(0x377)](this[_0x4dba69(0x616)]+'\x20('+this['instance'][_0x4dba69(0x72d)]+_0x4dba69(0x460));let _0x5bf2f1=this['getUniqueFlowName'](_0x48c7bb[_0x4dba69(0x60f)]),_0x2e4de6=new ge[(_0x4dba69(0x7da))]['ObjectId'](),_0x7ae378={'_id':_0x2e4de6,'default':!0x0,'title':_0x4dba69(0x8d7),'x':0x0,'y':0x0},_0x49af17={'_id':new ge[(_0x4dba69(0x7da))][(_0x4dba69(0x4b9))](),'order':0x1,'groupId':_0x2e4de6[_0x4dba69(0x529)](),'type':_0x4dba69(0x3a4)},_0x7d001d=this[_0x4dba69(0x568)]['wuid'],_0x5d83b7={'_id':(0x0,Y['v4'])(),'owner':_0x7d001d,'name':_0x5bf2f1,'whoCanEdit':[_0x7d001d],'whoCanUse':[_0x7d001d],'groups':[_0x7ae378],'blocks':[_0x49af17],..._0x48c7bb};try{let _0x2db74a=await this['repository']['flow'][_0x4dba69(0x54b)](_0x5d83b7);return await this[_0x4dba69(0x4a5)](),_0x2db74a;}catch(_0x3a1860){let _0x2e1f21=_0x4dba69(0x2ad),_0x49fd74=_0x3a1860 instanceof Error?_0x3a1860[_0x4dba69(0x805)]:typeof _0x3a1860==_0x4dba69(0x801)?JSON['stringify'](_0x3a1860):_0x3a1860,_0x53b818=_0x2e1f21+':\x20'+_0x49fd74;throw this[_0x4dba69(0x563)]['error'](this[_0x4dba69(0x616)]+'\x20('+this['instance'][_0x4dba69(0x72d)]+_0x4dba69(0x6c0)+_0x53b818),new m(_0x53b818);}}async[a0_0x4bc873(0x2f4)](_0x463c36,_0x13da4b){const _0x5c415d=a0_0x4bc873;try{this['logger']['verbose'](this[_0x5c415d(0x616)]+'\x20('+this[_0x5c415d(0x568)][_0x5c415d(0x72d)]+_0x5c415d(0x4e6));let _0x2cadc3=await this[_0x5c415d(0x6c6)][_0x5c415d(0x20f)][_0x5c415d(0x6e7)]({'where':{'_id':_0x13da4b,'owner':_0x463c36}});if(!_0x2cadc3)throw new m('Nenhum\x20fluxo\x20correspondente\x20encontrado.');if(_0x2cadc3[_0x5c415d(0x5a0)]===!0x1&&!_0x2cadc3[_0x5c415d(0x3a0)])throw new m(_0x5c415d(0x1f0));let _0x59aff1=new Set(_0x2cadc3[_0x5c415d(0x7ee)]??[]);_0x59aff1[_0x5c415d(0x840)](this[_0x5c415d(0x568)][_0x5c415d(0x72d)]);let _0x17f672=await this['repository'][_0x5c415d(0x20f)][_0x5c415d(0x7eb)](_0x13da4b,{..._0x2cadc3,'whoCanUse':Array[_0x5c415d(0x25a)](_0x59aff1)});return await this[_0x5c415d(0x4a5)](),_0x17f672;}catch(_0x43a83d){let _0xdf350e=_0x5c415d(0x749),_0x127dd1=_0x43a83d instanceof Error?_0x43a83d[_0x5c415d(0x805)]:typeof _0x43a83d=='object'?JSON[_0x5c415d(0x573)](_0x43a83d):_0x43a83d,_0x2b622b=_0xdf350e+':\x20'+_0x127dd1;throw this[_0x5c415d(0x563)][_0x5c415d(0x47a)](this[_0x5c415d(0x616)]+'\x20('+this['instance']['wuid']+'):\x20'+_0x2b622b),new m(_0x2b622b);}}['getUniqueFlowName'](_0x57a094){const _0x540b63=a0_0x4bc873;let _0x18c3b6=_0x57a094,_0x9a3fa2=0x1;for(;this['AutomateSystem'][_0x540b63(0x25d)][_0x540b63(0x456)](_0x43529e=>_0x43529e[_0x540b63(0x60f)]===_0x18c3b6);)_0x9a3fa2++,_0x18c3b6=_0x57a094+'\x20('+_0x9a3fa2+')';return _0x18c3b6;}async['deleteFlow'](_0x5e7a34){const _0x494cde=a0_0x4bc873;try{if(this[_0x494cde(0x563)][_0x494cde(0x377)](this[_0x494cde(0x616)]+'\x20('+this[_0x494cde(0x568)][_0x494cde(0x72d)]+_0x494cde(0x811)+_0x5e7a34[_0x494cde(0x618)]+',\x20global:\x20'+_0x5e7a34['global']),!this[_0x494cde(0x5a5)][_0x494cde(0x25d)][_0x494cde(0x8aa)](_0x23600e=>_0x23600e['_id']===_0x5e7a34[_0x494cde(0x618)]))throw this[_0x494cde(0x563)][_0x494cde(0x377)](this[_0x494cde(0x616)]+'\x20('+this['instance'][_0x494cde(0x72d)]+_0x494cde(0x76d)+_0x5e7a34[_0x494cde(0x618)]+_0x494cde(0x79c)),new m(_0x494cde(0x4eb));let _0x228040=await this[_0x494cde(0x6c6)][_0x494cde(0x20f)][_0x494cde(0x6e7)]({'where':{'_id':_0x5e7a34[_0x494cde(0x618)]}});if(!_0x228040)throw new m(_0x494cde(0x8e4));if(this[_0x494cde(0x568)][_0x494cde(0x72d)]===_0x228040[_0x494cde(0x6dd)]){this[_0x494cde(0x563)][_0x494cde(0x377)](this[_0x494cde(0x616)]+'\x20('+this[_0x494cde(0x568)]['wuid']+_0x494cde(0x284)+_0x5e7a34['_id']+_0x494cde(0x7c2));let _0x5a594a=await this[_0x494cde(0x6c6)][_0x494cde(0x20f)][_0x494cde(0x469)]({'where':{'_id':_0x5e7a34[_0x494cde(0x618)]}});return await this[_0x494cde(0x4a5)](),_0x5a594a;}return this[_0x494cde(0x563)][_0x494cde(0x377)](this[_0x494cde(0x616)]+'\x20('+this[_0x494cde(0x568)]['wuid']+_0x494cde(0x5ef)+this[_0x494cde(0x568)]['wuid']+_0x494cde(0x645)+_0x5e7a34[_0x494cde(0x618)]+_0x494cde(0x4dd)),_0x228040[_0x494cde(0x7ee)]=(_0x228040[_0x494cde(0x7ee)]??[])[_0x494cde(0x411)](_0x21a9b0=>_0x21a9b0!==this[_0x494cde(0x568)][_0x494cde(0x72d)]),_0x228040[_0x494cde(0x82d)]=(_0x228040[_0x494cde(0x82d)]??[])['filter'](_0x275d8a=>_0x275d8a!==this['instance']['wuid']),_0x228040[_0x494cde(0x82d)][_0x494cde(0x825)]===0x0&&_0x228040[_0x494cde(0x7ee)]['length']>0x0&&(_0x228040[_0x494cde(0x82d)][_0x494cde(0x7f1)](_0x228040[_0x494cde(0x7ee)][0x0]),this[_0x494cde(0x563)][_0x494cde(0x377)](this[_0x494cde(0x616)]+'\x20('+this['instance'][_0x494cde(0x72d)]+'):\x20Adicionando\x20\x27'+_0x228040[_0x494cde(0x7ee)][0x0]+'\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27'+_0x5e7a34[_0x494cde(0x618)]+_0x494cde(0x4dd))),await this[_0x494cde(0x6c6)]['flow'][_0x494cde(0x7eb)](_0x228040['_id'],_0x228040),await this[_0x494cde(0x4a5)](),{'message':_0x494cde(0x3ab)+_0x5e7a34[_0x494cde(0x60f)]+_0x494cde(0x71e)};}catch(_0x2e28ba){return this[_0x494cde(0x563)][_0x494cde(0x47a)](this['instanceName']+'\x20('+this[_0x494cde(0x568)][_0x494cde(0x72d)]+'):\x20Erro\x20ao\x20deletar\x20fluxo\x20'+(_0x2e28ba instanceof Error?_0x2e28ba['message']:JSON[_0x494cde(0x573)](_0x2e28ba,null,0x2))),{'message':_0x494cde(0x42b)+(_0x2e28ba instanceof Error?_0x2e28ba[_0x494cde(0x805)]:JSON[_0x494cde(0x573)](_0x2e28ba,null,0x2))};}}async[a0_0x4bc873(0x5fb)](_0x391760){const _0x334244=a0_0x4bc873;try{if(this[_0x334244(0x563)][_0x334244(0x636)](this[_0x334244(0x616)]+'\x20('+this['instance'][_0x334244(0x72d)]+_0x334244(0x7f7)+_0x391760),!this['AutomateSystem']&&(await this[_0x334244(0x209)](),!this[_0x334244(0x5a5)]))return null;let _0x170822=await this[_0x334244(0x6c6)]['flow'][_0x334244(0x6e7)]({'where':{'_id':_0x391760}});if(!_0x170822)throw new m(_0x334244(0x60d)+_0x391760+_0x334244(0x27e));if(!(_0x170822[_0x334244(0x3a0)]||_0x170822[_0x334244(0x7ee)]?.[_0x334244(0x5f5)](this[_0x334244(0x568)][_0x334244(0x72d)])))throw new m(_0x334244(0x1ed)+name+'\x27');_0x170822['globalShow']&&!_0x170822[_0x334244(0x7ee)]?.[_0x334244(0x5f5)](this[_0x334244(0x568)][_0x334244(0x72d)])&&(_0x170822['whoCanUse']=[..._0x170822[_0x334244(0x7ee)]??[],this['instance'][_0x334244(0x72d)]],await this[_0x334244(0x6c6)]['flow'][_0x334244(0x7eb)](_0x170822[_0x334244(0x618)],_0x170822),this[_0x334244(0x4a5)]());let _0x32eedb=this['AutomateSystem']?.['customFields']['map'](_0x46dd78=>_0x46dd78[_0x334244(0x60f)]),_0x12eb0f=[_0x334244(0x37c),_0x334244(0x685),_0x334244(0x653),_0x334244(0x90e),'status','notas',_0x334244(0x398),_0x334244(0x865),_0x334244(0x3c5),'telefone','atendimentoAberto'];_0x170822[_0x334244(0x46b)]=_0x170822[_0x334244(0x46b)][_0x334244(0x411)](_0x2588e9=>!(_0x2588e9[_0x334244(0x58e)]===_0x334244(0x344)||_0x2588e9[_0x334244(0x344)])),_0x12eb0f['forEach'](_0x537cbe=>{const _0xcff63b=_0x334244;_0x170822[_0xcff63b(0x46b)][_0xcff63b(0x7f1)]({'folder':_0xcff63b(0x344),'name':_0x537cbe,'value':'','doc':'','leadInfo':!0x0});}),_0x32eedb[_0x334244(0x426)](_0xb10b68=>{const _0x330c30=_0x334244;let _0x3f2ea9=_0x170822[_0x330c30(0x46b)][_0x330c30(0x416)](_0x36cc18=>_0x36cc18['name']===_0xb10b68);_0x3f2ea9===-0x1?_0x170822[_0x330c30(0x46b)][_0x330c30(0x7f1)]({'folder':_0x330c30(0x344),'name':_0xb10b68,'value':'','doc':'','leadInfo':!0x0}):(_0x170822[_0x330c30(0x46b)][_0x3f2ea9][_0x330c30(0x58e)]=_0x330c30(0x344),_0x170822[_0x330c30(0x46b)][_0x3f2ea9]['leadInfo']=!0x0);}),_0x170822[_0x334244(0x8ac)]&&_0x170822[_0x334244(0x8ac)][_0x334244(0x825)]>0x0&&_0x170822['blocks']['forEach'](_0xd327f2=>{const _0xf9f385=_0x334244;_0xd327f2[_0xf9f385(0x610)]&&_0xd327f2['next_groupId']&&_0xd327f2[_0xf9f385(0x610)]===_0xd327f2[_0xf9f385(0x482)]&&(_0xd327f2['next_groupId']=null);});let _0x59eadb=await this[_0x334244(0x6c6)][_0x334244(0x20f)][_0x334244(0x7eb)](_0x170822[_0x334244(0x618)],_0x170822);if(!_0x59eadb)throw new Error(_0x334244(0x496));return _0x59eadb;}catch(_0x2257a8){let _0x4c772d=_0x334244(0x7b4),_0x12fc59=_0x2257a8 instanceof Error?_0x2257a8['message']:typeof _0x2257a8=='object'?JSON[_0x334244(0x573)](_0x2257a8):_0x2257a8,_0x316caf=_0x4c772d+':\x20'+_0x12fc59;throw this['logger'][_0x334244(0x47a)](this[_0x334244(0x616)]+'\x20('+this[_0x334244(0x568)][_0x334244(0x72d)]+_0x334244(0x6c0)+_0x316caf),new m(_0x316caf);}}async[a0_0x4bc873(0x7af)](){const _0x397e0d=a0_0x4bc873;try{this['logger'][_0x397e0d(0x377)](this[_0x397e0d(0x616)]+'\x20('+this[_0x397e0d(0x568)][_0x397e0d(0x72d)]+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await this[_0x397e0d(0x4a5)]();let _0x5708ca=await this['repository']['flow'][_0x397e0d(0x846)]({'where':{'globalShow':!0x0}});return[...this[_0x397e0d(0x5a5)][_0x397e0d(0x25d)],..._0x5708ca];}catch(_0x3c6b90){return this[_0x397e0d(0x563)][_0x397e0d(0x47a)](this[_0x397e0d(0x616)]+'\x20('+this[_0x397e0d(0x568)]['wuid']+'):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20'+(_0x3c6b90 instanceof Error?_0x3c6b90[_0x397e0d(0x805)]:JSON['stringify'](_0x3c6b90,null,0x2))),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+(_0x3c6b90 instanceof Error?_0x3c6b90[_0x397e0d(0x805)]:String(_0x3c6b90))};}}async[a0_0x4bc873(0x384)](_0x4710be,_0x35315f){const _0x4648f6=a0_0x4bc873;try{this[_0x4648f6(0x563)]['verbose'](this[_0x4648f6(0x616)]+'\x20('+this[_0x4648f6(0x568)][_0x4648f6(0x72d)]+'):\x20Alterando\x20fluxo...');let _0x4d7236=this[_0x4648f6(0x5a5)][_0x4648f6(0x25d)][_0x4648f6(0x8aa)](_0xecae14=>_0xecae14[_0x4648f6(0x618)]===_0x4710be[_0x4648f6(0x618)]);if(!_0x4d7236)throw this['logger']['verbose'](this[_0x4648f6(0x616)]+'\x20('+this['instance'][_0x4648f6(0x72d)]+_0x4648f6(0x76d)+_0x4710be[_0x4648f6(0x618)]+'\x27\x20no\x20encontrado'),new m(_0x4648f6(0x4eb));let _0x40870a=await this[_0x4648f6(0x6c6)][_0x4648f6(0x20f)][_0x4648f6(0x6e7)]({'where':{'_id':_0x4710be[_0x4648f6(0x618)]}});if(!_0x40870a||!_0x40870a[_0x4648f6(0x7ee)]?.['includes'](this[_0x4648f6(0x568)][_0x4648f6(0x72d)]))throw this[_0x4648f6(0x563)][_0x4648f6(0x47a)](this[_0x4648f6(0x616)]+'\x20('+this['instance'][_0x4648f6(0x72d)]+_0x4648f6(0x619)+_0x4710be[_0x4648f6(0x618)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x4648f6(0x917)+_0x4710be[_0x4648f6(0x618)]+_0x4648f6(0x372));let _0x4db932=this[_0x4648f6(0x5a5)][_0x4648f6(0x25d)][_0x4648f6(0x416)](_0x59fdfc=>_0x59fdfc[_0x4648f6(0x618)]===_0x4d7236['_id']);if(_0x4db932!==-0x1){let _0x33a23c=this[_0x4648f6(0x5a5)]['flows'][_0x4db932];if(_0x33a23c[_0x4648f6(0x60f)]=_0x4710be[_0x4648f6(0x60f)]??_0x33a23c[_0x4648f6(0x60f)],_0x33a23c[_0x4648f6(0x323)]=_0x4710be[_0x4648f6(0x323)]??_0x33a23c['default'],_0x33a23c[_0x4648f6(0x620)]=_0x4710be[_0x4648f6(0x620)]??_0x33a23c[_0x4648f6(0x620)],_0x33a23c[_0x4648f6(0x934)]=_0x4710be[_0x4648f6(0x448)]??_0x33a23c['startCommand'],_0x33a23c[_0x4648f6(0x918)]=_0x4710be['minutesToClose']??_0x33a23c[_0x4648f6(0x918)],_0x33a23c['readMessages']=_0x4710be[_0x4648f6(0x596)]??_0x33a23c[_0x4648f6(0x596)],_0x4710be[_0x4648f6(0x323)]&&this[_0x4648f6(0x5a5)]['flows']['forEach']((_0xd3d82e,_0x45ac17)=>{const _0xcb547d=_0x4648f6;_0x45ac17!==_0x4db932&&(_0xd3d82e[_0xcb547d(0x323)]=!0x1);}),this[_0x4648f6(0x5a5)][_0x4648f6(0x25d)][_0x4db932]=_0x33a23c,!await this[_0x4648f6(0x6c6)][_0x4648f6(0x40e)][_0x4648f6(0x275)]({'flows':this[_0x4648f6(0x5a5)][_0x4648f6(0x25d)]},this[_0x4648f6(0x568)][_0x4648f6(0x72d)]))throw new m(_0x4648f6(0x54a));}let _0x6ab7cb=[_0x4648f6(0x2e9),'startID','sharePass',_0x4648f6(0x381)];for(let _0x36d06b of _0x6ab7cb)delete _0x4710be[_0x36d06b];if(_0x40870a[_0x4648f6(0x82d)]?.[_0x4648f6(0x5f5)](this[_0x4648f6(0x568)][_0x4648f6(0x72d)])||(_0x4710be={'_id':_0x4710be[_0x4648f6(0x618)]}),_0x35315f!==Ri&&_0x4710be?.[_0x4648f6(0x3a0)]&&!_0x40870a?.[_0x4648f6(0x3a0)])throw new m(_0x4648f6(0x92f));let _0x499f62=new Set(_0x4710be['whoCanEdit']??_0x40870a[_0x4648f6(0x82d)]);_0x499f62[_0x4648f6(0x840)](_0x40870a[_0x4648f6(0x6dd)]);let _0x207cee=new Set(_0x4710be[_0x4648f6(0x7ee)]??_0x40870a[_0x4648f6(0x7ee)]??[]);_0x499f62[_0x4648f6(0x426)](_0x311077=>_0x207cee[_0x4648f6(0x840)](_0x311077)),_0x207cee[_0x4648f6(0x840)](_0x40870a[_0x4648f6(0x6dd)]),this[_0x4648f6(0x563)][_0x4648f6(0x377)](this[_0x4648f6(0x616)]+'\x20('+this[_0x4648f6(0x568)][_0x4648f6(0x72d)]+_0x4648f6(0x7d5)+Array['from'](_0x499f62)),this[_0x4648f6(0x563)][_0x4648f6(0x377)](this[_0x4648f6(0x616)]+'\x20('+this[_0x4648f6(0x568)][_0x4648f6(0x72d)]+'):\x20whoCanUse\x20before\x20validation:\x20'+Array[_0x4648f6(0x25a)](_0x207cee));let _0x2f00ab=await this[_0x4648f6(0x54d)](Array[_0x4648f6(0x25a)](_0x207cee)),_0x1ed60b=Array[_0x4648f6(0x25a)](_0x499f62)[_0x4648f6(0x411)](_0x55e9f7=>_0x2f00ab[_0x4648f6(0x5f5)](_0x55e9f7)),_0x3195e9=Array[_0x4648f6(0x25a)](_0x207cee)['filter'](_0x31352a=>_0x2f00ab[_0x4648f6(0x5f5)](_0x31352a));this[_0x4648f6(0x563)][_0x4648f6(0x377)](this[_0x4648f6(0x616)]+'\x20('+this['instance'][_0x4648f6(0x72d)]+_0x4648f6(0x80b)+_0x1ed60b),this[_0x4648f6(0x563)][_0x4648f6(0x377)](this[_0x4648f6(0x616)]+'\x20('+this[_0x4648f6(0x568)][_0x4648f6(0x72d)]+'):\x20whoCanUse\x20after\x20validation:\x20'+_0x3195e9);let _0x41a6b1={..._0x40870a,..._0x4710be,'whoCanEdit':_0x1ed60b,'whoCanUse':_0x3195e9},_0xbf57ca=await this[_0x4648f6(0x6c6)][_0x4648f6(0x20f)]['updateOne'](_0x40870a['_id'],_0x41a6b1);return await this['synchronizeAndMapFlows'](),_0xbf57ca;}catch(_0x5aafcc){let _0x20d531=_0x4648f6(0x886),_0x4b5a95=_0x5aafcc instanceof Error?_0x5aafcc[_0x4648f6(0x805)]:typeof _0x5aafcc=='object'?JSON[_0x4648f6(0x573)](_0x5aafcc):_0x5aafcc,_0x2b6642=_0x20d531+':\x20'+_0x4b5a95;throw this[_0x4648f6(0x563)][_0x4648f6(0x47a)](this['instanceName']+'\x20('+this[_0x4648f6(0x568)][_0x4648f6(0x72d)]+_0x4648f6(0x6c0)+_0x2b6642),new m(_0x2b6642);}}async[a0_0x4bc873(0x54d)](_0x3c55d1){const _0x4f450d=a0_0x4bc873;let _0x535375={'numbers':_0x3c55d1};return(await this[_0x4f450d(0x71c)](_0x535375))['filter'](_0x3ea167=>_0x3ea167[_0x4f450d(0x6d7)])[_0x4f450d(0x347)](_0x18b9e4=>_0x18b9e4[_0x4f450d(0x82f)])['map'](_0x1a7247=>this[_0x4f450d(0x2ed)](_0x1a7247));}[a0_0x4bc873(0x2ed)](_0x4dfcc1){const _0x1a082a=a0_0x4bc873;let _0x287835=_0x4dfcc1[_0x1a082a(0x60b)](/\d+/);return _0x287835?_0x287835[0x0]:'';}async[a0_0x4bc873(0x6df)](_0x58afc9){const _0x130a35=a0_0x4bc873;try{if(this[_0x130a35(0x563)][_0x130a35(0x377)](this[_0x130a35(0x616)]+'\x20('+this['instance']['wuid']+_0x130a35(0x63b)),!this['AutomateSystem']['flows'][_0x130a35(0x8aa)](_0x133e3d=>_0x133e3d[_0x130a35(0x618)]===_0x58afc9[_0x130a35(0x618)]))throw this['logger'][_0x130a35(0x377)](this['instanceName']+'\x20('+this[_0x130a35(0x568)]['wuid']+_0x130a35(0x76d)+_0x58afc9[_0x130a35(0x618)]+_0x130a35(0x79c)),new m('Fluxo\x20no\x20encontrado\x20na\x20memria.');let _0x241ead=await this['repository']['flow']['findOne']({'where':{'_id':_0x58afc9[_0x130a35(0x618)]}});if(!_0x241ead||!_0x241ead[_0x130a35(0x7ee)]?.['includes'](this[_0x130a35(0x568)][_0x130a35(0x72d)]))throw this[_0x130a35(0x563)][_0x130a35(0x47a)](this['instanceName']+'\x20('+this['instance'][_0x130a35(0x72d)]+_0x130a35(0x619)+_0x58afc9[_0x130a35(0x618)]+_0x130a35(0x372)),new m('Flow\x20\x27'+_0x58afc9[_0x130a35(0x618)]+_0x130a35(0x372));if(!_0x241ead[_0x130a35(0x82d)]?.['includes'](this[_0x130a35(0x568)]['wuid']))throw new m(_0x130a35(0x6f8));let {block:_0x61b75c}=_0x58afc9;_0x61b75c?.[_0x130a35(0x848)]?this[_0x130a35(0x51a)](_0x241ead,_0x58afc9):_0x61b75c?.[_0x130a35(0x4a8)]?this[_0x130a35(0x914)](_0x241ead,_0x58afc9):_0x61b75c[_0x130a35(0x618)]?await this[_0x130a35(0x6d8)](_0x241ead,_0x58afc9):this['addBlock'](_0x241ead,_0x58afc9);let _0x4ee466=await this[_0x130a35(0x6c6)][_0x130a35(0x20f)][_0x130a35(0x7eb)](_0x241ead['_id'],_0x241ead);if(!_0x4ee466)throw new Error(_0x130a35(0x496));return _0x4ee466;}catch(_0x53a722){this[_0x130a35(0x5f7)](_0x130a35(0x59e)+_0x53a722[_0x130a35(0x805)]);}}async[a0_0x4bc873(0x51a)](_0x38d6cd,_0x1214da){const _0x1ac278=a0_0x4bc873;let _0x15897b=_0x1214da['block'][_0x1ac278(0x618)],_0x4b9751=_0x38d6cd['blocks'][_0x1ac278(0x8aa)](_0x1242d9=>_0x1242d9[_0x1ac278(0x618)][_0x1ac278(0x529)]()===_0x15897b);if(!_0x4b9751){this[_0x1ac278(0x563)][_0x1ac278(0x47a)](this[_0x1ac278(0x616)]+'\x20('+this['instance'][_0x1ac278(0x72d)]+_0x1ac278(0x428)+_0x15897b+_0x1ac278(0x89f));return;}this[_0x1ac278(0x563)][_0x1ac278(0x377)](this[_0x1ac278(0x616)]+'\x20('+this[_0x1ac278(0x568)][_0x1ac278(0x72d)]+_0x1ac278(0x307)+JSON[_0x1ac278(0x573)](_0x4b9751));let _0xd5176c=JSON[_0x1ac278(0x7ed)](JSON['stringify'](_0x4b9751));_0xd5176c['_id']=new ge[(_0x1ac278(0x323))][(_0x1ac278(0x7da))][(_0x1ac278(0x4b9))](),this[_0x1ac278(0x563)][_0x1ac278(0x377)](this[_0x1ac278(0x616)]+'\x20('+this['instance'][_0x1ac278(0x72d)]+'):\x20Bloco\x20copiado:\x20'+JSON[_0x1ac278(0x573)](_0xd5176c)),_0x38d6cd[_0x1ac278(0x8ac)][_0x1ac278(0x7f1)](_0xd5176c),this[_0x1ac278(0x524)](_0x38d6cd[_0x1ac278(0x8ac)],_0xd5176c[_0x1ac278(0x610)]);}[a0_0x4bc873(0x5f7)](_0x6441bb){const _0x3b2694=a0_0x4bc873;throw this['logger']['error'](this[_0x3b2694(0x616)]+'\x20('+this[_0x3b2694(0x568)][_0x3b2694(0x72d)]+_0x3b2694(0x6c0)+_0x6441bb),new m(_0x6441bb);}[a0_0x4bc873(0x914)](_0x30f2de,_0x27d911){const _0x169344=a0_0x4bc873;let {block:_0x2611f0}=_0x27d911;if(_0x2611f0[_0x169344(0x8c8)]===_0x169344(0x3a4)){this['throwAndLogError'](_0x169344(0x5d7));return;}if(!_0x2611f0[_0x169344(0x618)]){this['throwAndLogError'](_0x169344(0x90b));return;}let _0x27d024=_0x30f2de[_0x169344(0x8ac)]['find'](_0x10f51a=>_0x10f51a[_0x169344(0x618)]['toString']()===_0x27d911[_0x169344(0x83b)][_0x169344(0x618)][_0x169344(0x529)]());if(!_0x27d024){this['throwAndLogError']('Bloco\x20com\x20ID\x20'+_0x2611f0[_0x169344(0x618)]+_0x169344(0x6d0));return;}_0x30f2de[_0x169344(0x8ac)]=_0x30f2de[_0x169344(0x8ac)][_0x169344(0x411)](_0x4e0ac2=>_0x4e0ac2[_0x169344(0x618)]['toString']()!==_0x27d911[_0x169344(0x83b)][_0x169344(0x618)][_0x169344(0x529)]()),_0x30f2de['conditions']=_0x30f2de[_0x169344(0x5a4)][_0x169344(0x411)](_0x2c71aa=>_0x2c71aa[_0x169344(0x666)]!==_0x2611f0[_0x169344(0x618)][_0x169344(0x529)]()),_0x30f2de[_0x169344(0x7d4)]=_0x30f2de['varedits'][_0x169344(0x411)](_0x3ca1bb=>_0x3ca1bb[_0x169344(0x666)]!==_0x2611f0[_0x169344(0x618)][_0x169344(0x529)]()),_0x30f2de[_0x169344(0x4ec)]=_0x30f2de[_0x169344(0x4ec)][_0x169344(0x411)](_0x1ee44d=>_0x1ee44d[_0x169344(0x666)]!==_0x2611f0[_0x169344(0x618)]['toString']()),this['reorderBlocks'](_0x30f2de[_0x169344(0x8ac)],_0x27d024[_0x169344(0x610)]);}async[a0_0x4bc873(0x6d8)](_0x52b738,_0x5c1744){const _0x55cf63=a0_0x4bc873;let _0x2ae6c1=_0x52b738['blocks'][_0x55cf63(0x416)](_0x49ed13=>_0x49ed13[_0x55cf63(0x618)][_0x55cf63(0x529)]()===_0x5c1744[_0x55cf63(0x83b)][_0x55cf63(0x618)]['toString']());if(this[_0x55cf63(0x563)][_0x55cf63(0x377)](this[_0x55cf63(0x616)]+'\x20('+this[_0x55cf63(0x568)]['wuid']+_0x55cf63(0x4a3)+_0x2ae6c1),_0x2ae6c1===-0x1){this[_0x55cf63(0x563)][_0x55cf63(0x377)](_0x55cf63(0x479)+_0x5c1744[_0x55cf63(0x83b)][_0x55cf63(0x618)]+_0x55cf63(0x8c2));return;}if(_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1]['type']===_0x55cf63(0x3a4)){let _0x295d00=Object[_0x55cf63(0x419)](_0x5c1744['block']);if(_0x295d00[_0x55cf63(0x825)]>0x2||_0x295d00[_0x55cf63(0x825)]===0x2&&!_0x295d00['includes'](_0x55cf63(0x482))){this[_0x55cf63(0x5f7)](_0x55cf63(0x7e6));return;}}let _0x2944bb=_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1]['groupId'];for(let _0x368290 in _0x5c1744[_0x55cf63(0x83b)])_0x5c1744[_0x55cf63(0x83b)][_0x55cf63(0x80c)](_0x368290)&&(_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x368290]=_0x5c1744[_0x55cf63(0x83b)][_0x368290]);if(this[_0x55cf63(0x563)][_0x55cf63(0x377)](this[_0x55cf63(0x616)]+'\x20('+this['instance'][_0x55cf63(0x72d)]+'):\x20Bloco\x20a\x20ser\x20atualizado:\x20'+JSON[_0x55cf63(0x573)](_0x52b738['blocks'][_0x2ae6c1])),_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1]['apirequest']&&_0x55cf63(0x74d)in _0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x55cf63(0x7fd)]){this['logger'][_0x55cf63(0x377)](this[_0x55cf63(0x616)]+'\x20('+this['instance']['wuid']+_0x55cf63(0x4f0));let _0x23f0d9=JSON[_0x55cf63(0x573)](_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1]['apirequest']['header'],null,0x1);_0x23f0d9[_0x55cf63(0x825)]>0x2&&(_0x23f0d9=_0x23f0d9[_0x55cf63(0x69b)](0x1,_0x23f0d9[_0x55cf63(0x825)]-0x1)[_0x55cf63(0x4cf)]()),_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x55cf63(0x7fd)][_0x55cf63(0x2c5)]=_0x23f0d9;}if(_0x52b738['blocks'][_0x2ae6c1]['apirequest']&&_0x55cf63(0x8a3)in _0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x55cf63(0x7fd)]&&!(_0x55cf63(0x269)in _0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x55cf63(0x7fd)])){this['logger'][_0x55cf63(0x377)](this['instanceName']+'\x20('+this[_0x55cf63(0x568)]['wuid']+_0x55cf63(0x939)),_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x55cf63(0x7fd)]['bodyStringErrorParse']=!0x1;let _0x5ccedb=JSON[_0x55cf63(0x573)](_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x55cf63(0x7fd)][_0x55cf63(0x8a3)],null,0x2);_0x52b738['blocks'][_0x2ae6c1][_0x55cf63(0x7fd)][_0x55cf63(0x269)]=_0x5ccedb;}if(_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x55cf63(0x7fd)]&&_0x55cf63(0x269)in _0x52b738['blocks'][_0x2ae6c1][_0x55cf63(0x7fd)]){_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1]['apirequest'][_0x55cf63(0x206)]=!0x1;let _0x2e9ca6=_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x55cf63(0x7fd)][_0x55cf63(0x269)],_0x562acc=this[_0x55cf63(0x8ec)](_0x2e9ca6);_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1][_0x55cf63(0x7fd)][_0x55cf63(0x269)]=_0x562acc[_0x55cf63(0x226)],_0x52b738[_0x55cf63(0x8ac)][_0x2ae6c1]['apirequest']['bodyStringErrorParse']=_0x562acc[_0x55cf63(0x47a)];}let _0x58de96=_0x52b738['blocks'][_0x2ae6c1]['groupId'];_0x2944bb!==_0x58de96?(this[_0x55cf63(0x524)](_0x52b738[_0x55cf63(0x8ac)],_0x2944bb),this[_0x55cf63(0x524)](_0x52b738['blocks'],_0x58de96)):this[_0x55cf63(0x524)](_0x52b738[_0x55cf63(0x8ac)],_0x2944bb);}['beautifyWithPlaceholders'](_0x5b9e35){const _0xcfbd56=a0_0x4bc873;let _0x4b0dab='\u205f',_0x3995b8=!0x1,_0x5cb8b8='';for(let _0x41bd24=0x0;_0x41bd24<_0x5b9e35[_0xcfbd56(0x825)];_0x41bd24++){let _0x2d105e=_0x5b9e35[_0x41bd24];_0x2d105e==='\x22'&&(_0x41bd24===0x0||_0x5b9e35[_0x41bd24-0x1]!=='\x5c')&&(_0x3995b8=!_0x3995b8),!(!_0x3995b8&&(_0x2d105e==='\x0a'||_0x2d105e==='\x20'||_0x2d105e===_0x4b0dab))&&(_0x5cb8b8+=_0x2d105e);}let _0x5eb467={},_0x453704=9876543210.1234,_0x109db1=_0x5cb8b8[_0xcfbd56(0x242)](/\{\{([^}]+)\}\}/g,_0x3b9e9b=>{let _0x1aae52=_0x3b9e9b,_0x396f8a=''+_0x453704;return _0x5eb467[_0x396f8a]=_0x1aae52,_0x453704+=0.0001,_0x396f8a;}),_0x2d193d='',_0x79b1b6=!0x1;try{let _0x28ca87=JSON['parse'](_0x109db1);_0x2d193d=JSON[_0xcfbd56(0x573)](_0x28ca87,null,0x2),_0x2d193d=_0x2d193d[_0xcfbd56(0x242)](/\n( +)/g,(_0x15639d,_0x12bdcd)=>{const _0x31cafb=_0xcfbd56;let _0x1bae81=_0x12bdcd[_0x31cafb(0x825)];return'\x0a'+_0x4b0dab['repeat'](_0x1bae81*0x2);}),_0x2d193d=_0x2d193d[_0xcfbd56(0x242)](/(\d{10,}\.\d+)/g,_0xba0dc2=>_0x5eb467[_0xba0dc2]||_0xba0dc2);}catch(_0x167681){this[_0xcfbd56(0x563)][_0xcfbd56(0x47a)](_0xcfbd56(0x4d1)+_0x167681),_0x2d193d=_0x5b9e35,_0x79b1b6=!0x0;}return{'result':_0x2d193d,'error':_0x79b1b6};}[a0_0x4bc873(0x4f8)](_0x321d00,_0x1f4976){const _0xfb0e76=a0_0x4bc873;if(_0x1f4976[_0xfb0e76(0x83b)][_0xfb0e76(0x8c8)]==='start'){this[_0xfb0e76(0x5f7)](_0xfb0e76(0x385));return;}if(_0x1f4976[_0xfb0e76(0x83b)]['apirequest']&&'header'in _0x1f4976[_0xfb0e76(0x83b)][_0xfb0e76(0x7fd)]){this['logger'][_0xfb0e76(0x377)](this[_0xfb0e76(0x616)]+'\x20('+this[_0xfb0e76(0x568)]['wuid']+_0xfb0e76(0x4f0));let _0x14542d=JSON[_0xfb0e76(0x573)](_0x1f4976[_0xfb0e76(0x83b)]['apirequest'][_0xfb0e76(0x74d)],null,0x1);_0x14542d[_0xfb0e76(0x825)]>0x2&&(_0x14542d=_0x14542d[_0xfb0e76(0x69b)](0x1,_0x14542d[_0xfb0e76(0x825)]-0x1)[_0xfb0e76(0x4cf)]()),_0x1f4976[_0xfb0e76(0x83b)]['apirequest'][_0xfb0e76(0x2c5)]=_0x14542d;}_0x1f4976[_0xfb0e76(0x83b)][_0xfb0e76(0x7fd)]&&_0xfb0e76(0x8a3)in _0x1f4976[_0xfb0e76(0x83b)]['apirequest']&&(this[_0xfb0e76(0x563)][_0xfb0e76(0x377)](this[_0xfb0e76(0x616)]+'\x20('+this[_0xfb0e76(0x568)][_0xfb0e76(0x72d)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x1f4976[_0xfb0e76(0x83b)][_0xfb0e76(0x7fd)]['bodyString']=JSON[_0xfb0e76(0x573)](_0x1f4976[_0xfb0e76(0x83b)]['apirequest'][_0xfb0e76(0x8a3)],null,0x1)[_0xfb0e76(0x4cf)]()),_0x321d00[_0xfb0e76(0x8ac)][_0xfb0e76(0x7f1)](_0x1f4976['block']),this[_0xfb0e76(0x524)](_0x321d00[_0xfb0e76(0x8ac)],_0x1f4976[_0xfb0e76(0x83b)][_0xfb0e76(0x610)]);}['reorderBlocks'](_0x149269,_0x1542b7){const _0x500987=a0_0x4bc873;let _0x135801=_0x149269['filter'](_0x59eed3=>_0x59eed3[_0x500987(0x610)]===_0x1542b7);_0x135801['sort']((_0x1d010b,_0x8f8457)=>_0x1d010b[_0x500987(0x268)]-_0x8f8457[_0x500987(0x268)]),_0x135801[_0x500987(0x426)]((_0x1befc6,_0x74ef8c)=>_0x1befc6[_0x500987(0x268)]=_0x74ef8c+0x1);}async[a0_0x4bc873(0x1e9)](_0x4c1375){const _0x34f145=a0_0x4bc873;try{if(this[_0x34f145(0x563)][_0x34f145(0x377)](this[_0x34f145(0x616)]+'\x20('+this['instance'][_0x34f145(0x72d)]+_0x34f145(0x554)),!_0x4c1375||!_0x4c1375[_0x34f145(0x507)]){this[_0x34f145(0x5f7)]('Data\x20invlida\x20fornecida');return;}if(!this[_0x34f145(0x5a5)]['flows'][_0x34f145(0x8aa)](_0x2281ac=>_0x2281ac[_0x34f145(0x618)]===_0x4c1375[_0x34f145(0x618)]))throw this[_0x34f145(0x563)][_0x34f145(0x377)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Fluxo\x20\x27'+_0x4c1375[_0x34f145(0x618)]+'\x27\x20no\x20encontrado'),new m(_0x34f145(0x4eb));let _0x104be8=await this[_0x34f145(0x6c6)][_0x34f145(0x20f)][_0x34f145(0x6e7)]({'where':{'_id':_0x4c1375[_0x34f145(0x618)]}});if(!_0x104be8||!_0x104be8['whoCanUse']?.[_0x34f145(0x5f5)](this[_0x34f145(0x568)][_0x34f145(0x72d)]))throw this[_0x34f145(0x563)]['error'](this[_0x34f145(0x616)]+'\x20('+this[_0x34f145(0x568)][_0x34f145(0x72d)]+_0x34f145(0x619)+_0x4c1375['_id']+_0x34f145(0x372)),new m(_0x34f145(0x917)+_0x4c1375[_0x34f145(0x618)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');if(!_0x104be8['whoCanEdit']?.[_0x34f145(0x5f5)](this['instance'][_0x34f145(0x72d)]))throw new m(_0x34f145(0x6f8));let {replyOption:_0x1a3521}=_0x4c1375;_0x1a3521?.[_0x34f145(0x4a8)]?(this['deleteReplyOption'](_0x104be8,_0x4c1375),this[_0x34f145(0x777)](_0x104be8[_0x34f145(0x4ec)],_0x4c1375[_0x34f145(0x507)][_0x34f145(0x666)])):_0x1a3521[_0x34f145(0x618)]?(await this[_0x34f145(0x52a)](_0x104be8,_0x4c1375),this[_0x34f145(0x777)](_0x104be8['replyOptions'],_0x4c1375[_0x34f145(0x507)][_0x34f145(0x666)])):(this['addReplyOption'](_0x104be8,_0x4c1375),this['reorderReplyOptions'](_0x104be8[_0x34f145(0x4ec)],_0x4c1375[_0x34f145(0x507)][_0x34f145(0x666)]));let _0x4f4433=await this[_0x34f145(0x6c6)][_0x34f145(0x20f)][_0x34f145(0x7eb)](_0x104be8['_id'],_0x104be8);if(!_0x4f4433)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x4f4433;}catch(_0x4edc62){this['throwAndLogError'](_0x34f145(0x5f0)+_0x4edc62);}}[a0_0x4bc873(0x777)](_0x53ba5b,_0xe22266){const _0x107700=a0_0x4bc873;_0x53ba5b[_0x107700(0x426)](_0x469c09=>{const _0x447a2e=_0x107700;_0x469c09['blockId']===_0xe22266&&_0x469c09[_0x447a2e(0x268)]===void 0x0&&(_0x469c09['order']=0x270f);});let _0x5b7a31=_0x53ba5b[_0x107700(0x411)](_0x4a2f69=>_0x4a2f69[_0x107700(0x666)]===_0xe22266);_0x5b7a31[_0x107700(0x32e)]((_0x2e7f6c,_0x346b96)=>_0x2e7f6c[_0x107700(0x268)]-_0x346b96[_0x107700(0x268)]),_0x5b7a31[_0x107700(0x426)]((_0x2be30e,_0x5cfc8d)=>{_0x2be30e['order']=_0x5cfc8d+0x1;}),_0x53ba5b[_0x107700(0x426)](_0x5ddbe0=>{const _0x64ce14=_0x107700;if(_0x5ddbe0[_0x64ce14(0x666)]===_0xe22266){let _0x534d83=_0x5b7a31[_0x64ce14(0x8aa)](_0x140b3f=>_0x140b3f[_0x64ce14(0x618)]&&_0x5ddbe0[_0x64ce14(0x618)]&&_0x140b3f[_0x64ce14(0x618)][_0x64ce14(0x529)]()===_0x5ddbe0[_0x64ce14(0x618)][_0x64ce14(0x529)]());_0x534d83&&(_0x5ddbe0[_0x64ce14(0x268)]=_0x534d83[_0x64ce14(0x268)]);}});}['deleteReplyOption'](_0x133e5d,_0x5a8dd8){const _0xe1fdd=a0_0x4bc873;let {replyOption:_0x3eaab7}=_0x5a8dd8;if(!_0x3eaab7[_0xe1fdd(0x618)]){this[_0xe1fdd(0x5f7)](_0xe1fdd(0x488));return;}if(!_0x133e5d[_0xe1fdd(0x4ec)][_0xe1fdd(0x8aa)](_0x41f075=>_0x41f075['_id'][_0xe1fdd(0x529)]()===_0x5a8dd8[_0xe1fdd(0x507)][_0xe1fdd(0x618)]['toString']())){this[_0xe1fdd(0x5f7)](_0xe1fdd(0x80a)+_0x3eaab7['_id']+_0xe1fdd(0x6d0));return;}_0x133e5d[_0xe1fdd(0x4ec)]=_0x133e5d[_0xe1fdd(0x4ec)][_0xe1fdd(0x411)](_0x37e85d=>_0x37e85d[_0xe1fdd(0x618)][_0xe1fdd(0x529)]()!==_0x5a8dd8[_0xe1fdd(0x507)][_0xe1fdd(0x618)][_0xe1fdd(0x529)]());}async[a0_0x4bc873(0x52a)](_0xb69c73,_0x4ba663){const _0x1479da=a0_0x4bc873;let _0x57b356=_0xb69c73[_0x1479da(0x4ec)][_0x1479da(0x416)](_0x531cd5=>_0x531cd5['_id']['toString']()===_0x4ba663[_0x1479da(0x507)][_0x1479da(0x618)][_0x1479da(0x529)]());if(_0x57b356===-0x1){this['throwAndLogError']('ReplyOption\x20com\x20ID\x20'+_0x4ba663['replyOption']['_id']+_0x1479da(0x8c2));return;}for(let _0x1ae1f5 in _0x4ba663[_0x1479da(0x507)])_0x4ba663[_0x1479da(0x507)]['hasOwnProperty'](_0x1ae1f5)&&(_0xb69c73[_0x1479da(0x4ec)][_0x57b356][_0x1ae1f5]=_0x4ba663['replyOption'][_0x1ae1f5]);}[a0_0x4bc873(0x2ec)](_0x4ac2bf,_0xc9d57f){const _0x202653=a0_0x4bc873;_0x4ac2bf[_0x202653(0x4ec)][_0x202653(0x7f1)](_0xc9d57f[_0x202653(0x507)]);}async[a0_0x4bc873(0x6ea)](_0x13206b){const _0x46b048=a0_0x4bc873;this[_0x46b048(0x563)][_0x46b048(0x377)](this[_0x46b048(0x616)]+'\x20('+this['instance'][_0x46b048(0x72d)]+_0x46b048(0x57b)+JSON[_0x46b048(0x573)](_0x13206b,null,0x2));try{if(this[_0x46b048(0x563)][_0x46b048(0x377)](this[_0x46b048(0x616)]+'\x20('+this[_0x46b048(0x568)]['wuid']+_0x46b048(0x2a1)),!this[_0x46b048(0x5a5)][_0x46b048(0x25d)][_0x46b048(0x8aa)](_0xc4351=>_0xc4351[_0x46b048(0x618)]===_0x13206b['_id']))throw this[_0x46b048(0x563)][_0x46b048(0x377)](this[_0x46b048(0x616)]+'\x20('+this['instance']['wuid']+_0x46b048(0x76d)+_0x13206b['_id']+_0x46b048(0x79c)),new m(_0x46b048(0x4eb));let _0x507382=await this[_0x46b048(0x6c6)]['flow'][_0x46b048(0x6e7)]({'where':{'_id':_0x13206b['_id']}});if(!_0x507382||!_0x507382[_0x46b048(0x7ee)]?.[_0x46b048(0x5f5)](this['instance'][_0x46b048(0x72d)]))throw this['logger'][_0x46b048(0x47a)](this[_0x46b048(0x616)]+'\x20('+this[_0x46b048(0x568)]['wuid']+_0x46b048(0x619)+_0x13206b['_id']+_0x46b048(0x372)),new m(_0x46b048(0x917)+_0x13206b[_0x46b048(0x618)]+_0x46b048(0x372));if(!_0x507382['whoCanEdit']?.[_0x46b048(0x5f5)](this[_0x46b048(0x568)]['wuid']))throw new m('Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.');if(_0x13206b['group']&&_0x13206b['group']?.[_0x46b048(0x4a8)]===!0x0){if(this[_0x46b048(0x563)][_0x46b048(0x377)](this[_0x46b048(0x616)]+'\x20('+this[_0x46b048(0x568)][_0x46b048(0x72d)]+_0x46b048(0x818)),_0x13206b[_0x46b048(0x81d)][_0x46b048(0x323)]===!0x0)return{'message':_0x46b048(0x83c)};if(_0x507382[_0x46b048(0x8ac)]['some'](_0x1184fc=>_0x1184fc[_0x46b048(0x610)][_0x46b048(0x529)]()===_0x13206b['group'][_0x46b048(0x618)]))return this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x46b048(0x568)][_0x46b048(0x72d)]+_0x46b048(0x5c8)),{'message':_0x46b048(0x2c4)};_0x507382[_0x46b048(0x543)]=_0x507382[_0x46b048(0x543)][_0x46b048(0x411)](_0x4c4dc7=>_0x4c4dc7['_id'][_0x46b048(0x529)]()!==_0x13206b['group'][_0x46b048(0x618)]);}else{if(_0x13206b['group']){if(_0x13206b['group'][_0x46b048(0x323)]===!0x0)return{'message':_0x46b048(0x661)};if(_0x13206b[_0x46b048(0x81d)]['_id']){let _0x1d035b=_0x507382[_0x46b048(0x543)][_0x46b048(0x8aa)](_0x3c2e57=>_0x3c2e57[_0x46b048(0x618)][_0x46b048(0x529)]()===_0x13206b[_0x46b048(0x81d)][_0x46b048(0x618)]);_0x1d035b&&(_0x13206b[_0x46b048(0x81d)]['x']<0x0&&(_0x13206b[_0x46b048(0x81d)]['x']=0x0),_0x13206b[_0x46b048(0x81d)]['y']<0x0&&(_0x13206b[_0x46b048(0x81d)]['y']=0x0),Object[_0x46b048(0x310)](_0x1d035b,_0x13206b[_0x46b048(0x81d)]));}else _0x507382[_0x46b048(0x543)][_0x46b048(0x7f1)](_0x13206b[_0x46b048(0x81d)]);}}let _0x590615=await this[_0x46b048(0x6c6)][_0x46b048(0x20f)][_0x46b048(0x7eb)](_0x507382[_0x46b048(0x618)],_0x507382);if(!_0x590615)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x590615;}catch(_0x38e3d4){let _0x1db709='Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo',_0x2144ae=_0x38e3d4 instanceof Error?_0x38e3d4[_0x46b048(0x805)]:typeof _0x38e3d4==_0x46b048(0x801)?JSON[_0x46b048(0x573)](_0x38e3d4):_0x38e3d4,_0x556e9e=_0x1db709+':\x20'+_0x2144ae;throw this[_0x46b048(0x563)][_0x46b048(0x47a)](this['instanceName']+'\x20('+this[_0x46b048(0x568)][_0x46b048(0x72d)]+_0x46b048(0x6c0)+_0x556e9e),new m(_0x556e9e);}}async[a0_0x4bc873(0x1e4)](_0x1de1a9){const _0x2568f4=a0_0x4bc873;try{if(this[_0x2568f4(0x563)][_0x2568f4(0x377)](this[_0x2568f4(0x616)]+'\x20('+this[_0x2568f4(0x568)][_0x2568f4(0x72d)]+_0x2568f4(0x44b)),!this['AutomateSystem']['flows'][_0x2568f4(0x8aa)](_0x9370e4=>_0x9370e4[_0x2568f4(0x618)]===_0x1de1a9['_id']))throw this['logger'][_0x2568f4(0x377)](this[_0x2568f4(0x616)]+'\x20('+this[_0x2568f4(0x568)][_0x2568f4(0x72d)]+'):\x20Fluxo\x20\x27'+_0x1de1a9[_0x2568f4(0x618)]+_0x2568f4(0x79c)),new m(_0x2568f4(0x4eb));let _0x121fca=await this[_0x2568f4(0x6c6)]['flow'][_0x2568f4(0x6e7)]({'where':{'_id':_0x1de1a9['_id']}});if(!_0x121fca||!_0x121fca['whoCanUse']?.[_0x2568f4(0x5f5)](this[_0x2568f4(0x568)][_0x2568f4(0x72d)]))throw this[_0x2568f4(0x563)]['error'](this[_0x2568f4(0x616)]+'\x20('+this['instance'][_0x2568f4(0x72d)]+_0x2568f4(0x619)+_0x1de1a9[_0x2568f4(0x618)]+_0x2568f4(0x372)),new m(_0x2568f4(0x917)+_0x1de1a9['_id']+_0x2568f4(0x372));if(!_0x121fca[_0x2568f4(0x82d)]?.[_0x2568f4(0x5f5)](this[_0x2568f4(0x568)]['wuid']))throw new m(_0x2568f4(0x6f8));let _0xce0d50=!0x1;if(_0x1de1a9[_0x2568f4(0x232)]?.[_0x2568f4(0x4a8)]===!0x0)_0x121fca[_0x2568f4(0x5a4)]=_0x121fca[_0x2568f4(0x5a4)][_0x2568f4(0x411)](_0x3a4b8=>_0x3a4b8&&_0x1de1a9['condition']&&_0x3a4b8[_0x2568f4(0x618)]&&_0x1de1a9[_0x2568f4(0x232)][_0x2568f4(0x618)]&&_0x3a4b8['_id'][_0x2568f4(0x529)]()!==_0x1de1a9['condition'][_0x2568f4(0x618)][_0x2568f4(0x529)]()),_0xce0d50=!0x0;else{let _0x13867a=_0x121fca[_0x2568f4(0x5a4)][_0x2568f4(0x8aa)](_0x469e67=>_0x469e67&&_0x1de1a9[_0x2568f4(0x232)]&&_0x469e67[_0x2568f4(0x618)]&&_0x1de1a9[_0x2568f4(0x232)]['_id']&&_0x469e67[_0x2568f4(0x618)][_0x2568f4(0x529)]()===_0x1de1a9[_0x2568f4(0x232)][_0x2568f4(0x618)][_0x2568f4(0x529)]());_0x13867a?(_0xce0d50=_0x13867a[_0x2568f4(0x268)]!==_0x1de1a9[_0x2568f4(0x232)][_0x2568f4(0x268)],Object[_0x2568f4(0x310)](_0x13867a,_0x1de1a9[_0x2568f4(0x232)])):(_0x121fca[_0x2568f4(0x5a4)][_0x2568f4(0x7f1)](_0x1de1a9[_0x2568f4(0x232)]),_0xce0d50=!0x0);}if(_0xce0d50){_0x121fca['conditions'][_0x2568f4(0x32e)]((_0x5db189,_0xb8c589)=>_0x5db189[_0x2568f4(0x268)]>_0xb8c589[_0x2568f4(0x268)]?0x1:_0xb8c589[_0x2568f4(0x268)]>_0x5db189[_0x2568f4(0x268)]?-0x1:0x0);for(let _0x25b276=0x0;_0x25b276<_0x121fca['conditions'][_0x2568f4(0x825)];_0x25b276++)_0x121fca[_0x2568f4(0x5a4)][_0x25b276][_0x2568f4(0x268)]=_0x25b276+0x1;_0x121fca[_0x2568f4(0x5a4)][_0x2568f4(0x825)]>0x0&&(_0x121fca[_0x2568f4(0x5a4)][0x0]['OrAnd']='and');}let _0x1ca83b=await this[_0x2568f4(0x6c6)]['flow'][_0x2568f4(0x7eb)](_0x121fca[_0x2568f4(0x618)],_0x121fca);if(!_0x1ca83b)throw new Error(_0x2568f4(0x496));return _0x1ca83b;}catch(_0xd52ea7){let _0x3171ad=_0x2568f4(0x56f),_0x95a176=_0xd52ea7 instanceof Error?_0xd52ea7['message']:typeof _0xd52ea7=='object'?JSON[_0x2568f4(0x573)](_0xd52ea7):_0xd52ea7,_0x261f7b=_0x3171ad+':\x20'+_0x95a176;throw this[_0x2568f4(0x563)][_0x2568f4(0x47a)](this['instanceName']+'\x20('+this[_0x2568f4(0x568)][_0x2568f4(0x72d)]+_0x2568f4(0x6c0)+_0x261f7b),new m(_0x261f7b);}}async[a0_0x4bc873(0x24c)](_0x34ae5b){const _0x903f8b=a0_0x4bc873;try{if(this['logger'][_0x903f8b(0x377)](this[_0x903f8b(0x616)]+'\x20('+this[_0x903f8b(0x568)][_0x903f8b(0x72d)]+_0x903f8b(0x477)),!this[_0x903f8b(0x5a5)][_0x903f8b(0x25d)][_0x903f8b(0x8aa)](_0x4bfb5d=>_0x4bfb5d[_0x903f8b(0x618)]===_0x34ae5b[_0x903f8b(0x618)]))throw this['logger'][_0x903f8b(0x377)](this['instanceName']+'\x20('+this[_0x903f8b(0x568)][_0x903f8b(0x72d)]+_0x903f8b(0x76d)+_0x34ae5b[_0x903f8b(0x618)]+'\x27\x20no\x20encontrado'),new m(_0x903f8b(0x4eb));let _0x67722f=await this[_0x903f8b(0x6c6)]['flow'][_0x903f8b(0x6e7)]({'where':{'_id':_0x34ae5b[_0x903f8b(0x618)]}});if(!_0x67722f||!_0x67722f[_0x903f8b(0x7ee)]?.[_0x903f8b(0x5f5)](this[_0x903f8b(0x568)][_0x903f8b(0x72d)]))throw this[_0x903f8b(0x563)][_0x903f8b(0x47a)](this[_0x903f8b(0x616)]+'\x20('+this[_0x903f8b(0x568)][_0x903f8b(0x72d)]+_0x903f8b(0x619)+_0x34ae5b[_0x903f8b(0x618)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x34ae5b[_0x903f8b(0x618)]+_0x903f8b(0x372));if(!_0x67722f['whoCanEdit']?.[_0x903f8b(0x5f5)](this['instance'][_0x903f8b(0x72d)]))throw new m(_0x903f8b(0x6f8));let _0x2c83d0=!0x1;if(_0x34ae5b[_0x903f8b(0x304)]?.[_0x903f8b(0x4a8)]===!0x0)_0x67722f[_0x903f8b(0x7d4)]=_0x67722f[_0x903f8b(0x7d4)]['filter'](_0x3eeb4a=>_0x3eeb4a&&_0x34ae5b[_0x903f8b(0x304)]&&_0x3eeb4a[_0x903f8b(0x618)]&&_0x34ae5b[_0x903f8b(0x304)][_0x903f8b(0x618)]&&_0x3eeb4a[_0x903f8b(0x618)][_0x903f8b(0x529)]()!==_0x34ae5b[_0x903f8b(0x304)][_0x903f8b(0x618)]['toString']()),_0x2c83d0=!0x0;else{let _0x4f378b=_0x67722f['varedits'][_0x903f8b(0x8aa)](_0x427475=>_0x427475&&_0x34ae5b['varedit']&&_0x427475['_id']&&_0x34ae5b['varedit'][_0x903f8b(0x618)]&&_0x427475['_id']['toString']()===_0x34ae5b[_0x903f8b(0x304)][_0x903f8b(0x618)]['toString']());_0x4f378b?(_0x2c83d0=_0x4f378b['order']!==_0x34ae5b[_0x903f8b(0x304)][_0x903f8b(0x268)],Object[_0x903f8b(0x310)](_0x4f378b,_0x34ae5b['varedit'])):(_0x67722f['varedits']['push'](_0x34ae5b[_0x903f8b(0x304)]),_0x2c83d0=!0x0);}if(_0x2c83d0){_0x67722f[_0x903f8b(0x7d4)][_0x903f8b(0x32e)]((_0x427617,_0x9075c0)=>_0x427617[_0x903f8b(0x268)]>_0x9075c0[_0x903f8b(0x268)]?0x1:_0x9075c0[_0x903f8b(0x268)]>_0x427617[_0x903f8b(0x268)]?-0x1:0x0);for(let _0x3374a7=0x0;_0x3374a7<_0x67722f[_0x903f8b(0x7d4)][_0x903f8b(0x825)];_0x3374a7++)_0x67722f[_0x903f8b(0x7d4)][_0x3374a7][_0x903f8b(0x268)]=_0x3374a7+0x1;}let _0x4b02cc=await this[_0x903f8b(0x6c6)][_0x903f8b(0x20f)][_0x903f8b(0x7eb)](_0x67722f[_0x903f8b(0x618)],_0x67722f);if(!_0x4b02cc)throw new Error(_0x903f8b(0x496));return _0x4b02cc;}catch(_0x3fc3c4){let _0x4092c3='Erro\x20ao\x20editar\x20condio\x20do\x20fluxo',_0x456b47=_0x3fc3c4 instanceof Error?_0x3fc3c4[_0x903f8b(0x805)]:typeof _0x3fc3c4=='object'?JSON[_0x903f8b(0x573)](_0x3fc3c4):_0x3fc3c4,_0x34152c=_0x4092c3+':\x20'+_0x456b47;throw this[_0x903f8b(0x563)][_0x903f8b(0x47a)](this[_0x903f8b(0x616)]+'\x20('+this['instance'][_0x903f8b(0x72d)]+'):\x20'+_0x34152c),new m(_0x34152c);}}async[a0_0x4bc873(0x3bc)](_0x350528){const _0x1b004b=a0_0x4bc873;try{if(this['logger'][_0x1b004b(0x377)](this[_0x1b004b(0x616)]+'\x20('+this['instance'][_0x1b004b(0x72d)]+_0x1b004b(0x3ee)),!this[_0x1b004b(0x5a5)][_0x1b004b(0x25d)]['find'](_0x441d6a=>_0x441d6a[_0x1b004b(0x618)]===_0x350528[_0x1b004b(0x618)]))throw this[_0x1b004b(0x563)][_0x1b004b(0x377)](this[_0x1b004b(0x616)]+'\x20('+this[_0x1b004b(0x568)][_0x1b004b(0x72d)]+_0x1b004b(0x76d)+_0x350528[_0x1b004b(0x618)]+'\x27\x20no\x20encontrado'),new m(_0x1b004b(0x4eb));let _0x4de583=await this[_0x1b004b(0x6c6)][_0x1b004b(0x20f)]['findOne']({'where':{'_id':_0x350528['_id']}});if(!_0x4de583||!_0x4de583['whoCanUse']?.[_0x1b004b(0x5f5)](this[_0x1b004b(0x568)][_0x1b004b(0x72d)]))throw this[_0x1b004b(0x563)][_0x1b004b(0x47a)](this[_0x1b004b(0x616)]+'\x20('+this[_0x1b004b(0x568)][_0x1b004b(0x72d)]+_0x1b004b(0x619)+_0x350528[_0x1b004b(0x618)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x350528[_0x1b004b(0x618)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');if(!_0x4de583[_0x1b004b(0x82d)]?.[_0x1b004b(0x5f5)](this[_0x1b004b(0x568)][_0x1b004b(0x72d)]))throw new m('Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.');_0x350528[_0x1b004b(0x4db)][_0x1b004b(0x60f)]=_0x350528[_0x1b004b(0x4db)]['name'][_0x1b004b(0x4cf)](),_0x350528['variable']['name'][_0x1b004b(0x668)]('_')&&(_0x350528[_0x1b004b(0x4db)]['name']=_0x350528['variable'][_0x1b004b(0x60f)][_0x1b004b(0x69b)](0x1)),_0x350528[_0x1b004b(0x4db)][_0x1b004b(0x60f)]=_0x350528[_0x1b004b(0x4db)][_0x1b004b(0x60f)][_0x1b004b(0x4cf)]();let _0xfddf14=_0x4de583['variables'][_0x1b004b(0x8aa)](_0x37afac=>_0x37afac[_0x1b004b(0x60f)]===_0x350528[_0x1b004b(0x4db)][_0x1b004b(0x60f)]);if(_0xfddf14?.[_0x1b004b(0x344)]===!0x0)throw new Error(_0x1b004b(0x53f));if(_0x350528[_0x1b004b(0x4db)]?.[_0x1b004b(0x4a8)]===!0x0){if(!_0xfddf14)return{'message':_0x1b004b(0x531)};_0x4de583['variables']=_0x4de583[_0x1b004b(0x46b)][_0x1b004b(0x411)](_0x1f9f6c=>_0x1f9f6c['name']!==_0x350528[_0x1b004b(0x4db)][_0x1b004b(0x60f)]);}else _0xfddf14?Object[_0x1b004b(0x310)](_0xfddf14,_0x350528[_0x1b004b(0x4db)]):_0x4de583[_0x1b004b(0x46b)][_0x1b004b(0x7f1)](_0x350528[_0x1b004b(0x4db)]);let _0x1e1a25=await this[_0x1b004b(0x6c6)][_0x1b004b(0x20f)][_0x1b004b(0x7eb)](_0x4de583[_0x1b004b(0x618)],_0x4de583);if(!_0x1e1a25)throw new Error(_0x1b004b(0x496));return _0x1e1a25;}catch(_0x35f020){let _0x31244a='Erro\x20ao\x20editar\x20varivel\x20do\x20fluxo',_0x21983e=_0x35f020 instanceof Error?_0x35f020['message']:typeof _0x35f020==_0x1b004b(0x801)?JSON[_0x1b004b(0x573)](_0x35f020):_0x35f020,_0x1f5f36=_0x31244a+':\x20'+_0x21983e;throw this['logger'][_0x1b004b(0x47a)](this[_0x1b004b(0x616)]+'\x20('+this[_0x1b004b(0x568)][_0x1b004b(0x72d)]+_0x1b004b(0x6c0)+_0x1f5f36),new m(_0x1f5f36);}}async[a0_0x4bc873(0x690)](_0x13063d){const _0xd1c658=a0_0x4bc873;let _0x5c4152=null;try{if(!this[_0xd1c658(0x5a5)]?.['flowConfig'][_0xd1c658(0x896)])throw new m('Fluxos\x20no\x20esto\x20ativados');this['logger']['verbose'](this[_0xd1c658(0x616)]+'\x20('+this[_0xd1c658(0x568)][_0xd1c658(0x72d)]+_0xd1c658(0x768));let _0x18a2f9=(await this[_0xd1c658(0x71c)]({'numbers':[_0x13063d[_0xd1c658(0x8d4)]]}))[0x0];if(!_0x18a2f9[_0xd1c658(0x6d7)]&&!(0x0,w[_0xd1c658(0x225)])(_0x18a2f9['jid'])&&!_0x18a2f9[_0xd1c658(0x82f)][_0xd1c658(0x5f5)]('@broadcast'))throw _0x5c4152=JSON[_0xd1c658(0x573)](_0x18a2f9,null,0x2),new m(_0x18a2f9);let _0x7e6dcb;if(_0x13063d[_0xd1c658(0x60f)][_0xd1c658(0x825)]===0x24&&/^[0-9a-fA-F-]{36}$/['test'](_0x13063d[_0xd1c658(0x60f)])?_0x7e6dcb=this[_0xd1c658(0x5a5)][_0xd1c658(0x25d)]['find'](_0x3c32f3=>_0x3c32f3[_0xd1c658(0x618)]===_0x13063d[_0xd1c658(0x60f)]):_0x7e6dcb=this['AutomateSystem'][_0xd1c658(0x25d)][_0xd1c658(0x8aa)](_0x28cc82=>_0x28cc82[_0xd1c658(0x60f)]===_0x13063d['name']),!_0x7e6dcb)throw this[_0xd1c658(0x563)][_0xd1c658(0x377)](this[_0xd1c658(0x616)]+'\x20('+this[_0xd1c658(0x568)]['wuid']+_0xd1c658(0x76d)+_0x13063d['name']+_0xd1c658(0x79c)),new m(_0xd1c658(0x4eb));let _0x43473d=await this[_0xd1c658(0x6c6)][_0xd1c658(0x20f)]['findOne']({'where':{'_id':_0x7e6dcb['_id']}});if(!_0x43473d||!_0x43473d[_0xd1c658(0x7ee)]?.[_0xd1c658(0x5f5)](this[_0xd1c658(0x568)][_0xd1c658(0x72d)]))throw this[_0xd1c658(0x563)]['error'](this['instanceName']+'\x20('+this[_0xd1c658(0x568)][_0xd1c658(0x72d)]+'):\x20Flow\x20\x27'+_0x7e6dcb[_0xd1c658(0x618)]+_0xd1c658(0x372)),_0x5c4152=_0xd1c658(0x917)+_0x7e6dcb[_0xd1c658(0x618)]+_0xd1c658(0x372),new m(_0x5c4152);let _0x4b8867=await this[_0xd1c658(0x2ea)](_0x43473d,_0x18a2f9['jid'],_0x13063d[_0xd1c658(0x22d)]);if(_0x4b8867){this[_0xd1c658(0x563)][_0xd1c658(0x377)](this[_0xd1c658(0x616)]+'\x20('+this[_0xd1c658(0x568)]['wuid']+_0xd1c658(0x664));let _0x4f2643=await this['NextBlock'](_0x4b8867);return _0x4f2643&&await this[_0xd1c658(0x396)](_0x4b8867,_0x4f2643),{'message':_0xd1c658(0x79f)+_0x13063d['remoteJid']};}}catch(_0xcf0ed5){if(this[_0xd1c658(0x563)][_0xd1c658(0x47a)](this[_0xd1c658(0x616)]+'\x20('+this[_0xd1c658(0x568)][_0xd1c658(0x72d)]+_0xd1c658(0x3b6)+(_0xcf0ed5 instanceof Error?_0xcf0ed5[_0xd1c658(0x805)]:JSON[_0xd1c658(0x573)](_0xcf0ed5,null,0x2))),_0x5c4152=_0xcf0ed5 instanceof Error?_0xcf0ed5[_0xd1c658(0x805)]:JSON[_0xd1c658(0x573)](_0xcf0ed5,null,0x2),_0x5c4152)throw new m(_0xd1c658(0x4d7)+_0x5c4152);}}async[a0_0x4bc873(0x585)](_0x292b75,_0x4ce075,_0x1fe6e5){const _0x2aaa50=a0_0x4bc873;let _0x19e509=null;try{if(!this['AutomateSystem']?.[_0x2aaa50(0x92b)][_0x2aaa50(0x896)])throw new m(_0x2aaa50(0x46a));if(this['logger'][_0x2aaa50(0x377)](this['instanceName']+'\x20('+this[_0x2aaa50(0x568)][_0x2aaa50(0x72d)]+_0x2aaa50(0x768)),_0x4ce075){let _0x454118=(await this[_0x2aaa50(0x71c)]({'numbers':[_0x4ce075]}))[0x0];if(!_0x454118['exists']&&!(0x0,w[_0x2aaa50(0x225)])(_0x454118['jid'])&&!_0x454118[_0x2aaa50(0x82f)][_0x2aaa50(0x5f5)](_0x2aaa50(0x6c9)))throw _0x19e509=JSON[_0x2aaa50(0x573)](_0x454118,null,0x2),new m(_0x454118);_0x4ce075=_0x454118[_0x2aaa50(0x82f)];}else _0x4ce075||(_0x4ce075=(0x0,Y['v4'])());let _0x2008e8=await this[_0x2aaa50(0x6c6)][_0x2aaa50(0x20f)][_0x2aaa50(0x6e7)]({'where':{'_id':_0x292b75}});if(!_0x2008e8||!_0x2008e8[_0x2aaa50(0x7ee)]?.['includes'](this[_0x2aaa50(0x568)]['wuid']))throw this[_0x2aaa50(0x563)][_0x2aaa50(0x47a)](this['instanceName']+'\x20('+this[_0x2aaa50(0x568)][_0x2aaa50(0x72d)]+_0x2aaa50(0x619)+_0x292b75+_0x2aaa50(0x372)),new m('Flow\x20\x27'+_0x292b75+_0x2aaa50(0x372));let _0x101cdf=await this['createConversationforStartFlow'](_0x2008e8,_0x4ce075,null);if(_0x101cdf){this[_0x2aaa50(0x563)]['verbose'](this[_0x2aaa50(0x616)]+'\x20('+this[_0x2aaa50(0x568)][_0x2aaa50(0x72d)]+'):\x20Criou\x20conversa\x20no\x20startFlowWebhook');let _0x23a1c5;if(_0x1fe6e5){let _0x2b4d75=_0x101cdf[_0x2aaa50(0x590)][_0x2aaa50(0x2df)],_0x349d8b=this['flattenObject'](_0x1fe6e5);Object[_0x2aaa50(0x310)](_0x2b4d75,_0x349d8b),_0x101cdf[_0x2aaa50(0x590)]['realVariables']=_0x2b4d75,_0x23a1c5={'error':!0x1,'apiResponse':_0x1fe6e5};}let _0x4760c0=await this[_0x2aaa50(0x33b)](_0x101cdf);return _0x4760c0&&await this['processblock'](_0x101cdf,_0x4760c0),{'message':_0x2aaa50(0x254)};}}catch(_0x468fd0){if(this['logger']['error'](this[_0x2aaa50(0x616)]+'\x20('+this['instance'][_0x2aaa50(0x72d)]+_0x2aaa50(0x3b6)+(_0x468fd0 instanceof Error?_0x468fd0[_0x2aaa50(0x805)]:JSON[_0x2aaa50(0x573)](_0x468fd0,null,0x2))),_0x19e509=_0x468fd0 instanceof Error?_0x468fd0['message']:JSON[_0x2aaa50(0x573)](_0x468fd0,null,0x2),_0x19e509)throw new m(_0x2aaa50(0x4d7)+_0x19e509);}}async[a0_0x4bc873(0x758)](_0x347c31){const _0xcfca06=a0_0x4bc873;try{let _0x5ed803={'remoteJid':_0x347c31,'status':_0xcfca06(0x808)},_0x43594f={'status':_0xcfca06(0x29a)},_0x21c83b=await this[_0xcfca06(0x6c6)][_0xcfca06(0x43a)]['updateMany'](_0x5ed803,_0x43594f,this[_0xcfca06(0x568)][_0xcfca06(0x72d)]);return this[_0xcfca06(0x563)][_0xcfca06(0x377)](this['instanceName']+'\x20('+this[_0xcfca06(0x568)][_0xcfca06(0x72d)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0x21c83b;}catch(_0x1b9c56){throw this[_0xcfca06(0x563)][_0xcfca06(0x47a)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20'+_0x1b9c56['message']),_0x1b9c56;}}async[a0_0x4bc873(0x2ea)](_0x3b96c5,_0x5eb4f6,_0x486a97){const _0x38c64b=a0_0x4bc873;this[_0x38c64b(0x563)][_0x38c64b(0x377)](this['instanceName']+'\x20('+this[_0x38c64b(0x568)]['wuid']+'):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]'),await this[_0x38c64b(0x758)](_0x5eb4f6);try{let _0x5c29d1=require(_0x38c64b(0x513))[_0x38c64b(0x4b9)],_0x6f9e45=Date[_0x38c64b(0x3bd)](),_0x9025f1='start',_0x34a5ca={},_0x3dc15a={},_0x199a5e=this[_0x38c64b(0x5a5)][_0x38c64b(0x25d)][_0x38c64b(0x8aa)](_0x454dea=>_0x454dea[_0x38c64b(0x618)]===_0x3b96c5[_0x38c64b(0x618)]?.[_0x38c64b(0x529)]()),_0x424dea=_0x199a5e?.[_0x38c64b(0x918)]??_0x3b96c5[_0x38c64b(0x918)]??0x0,_0x29f407=_0x199a5e?.[_0x38c64b(0x596)]??_0x3b96c5[_0x38c64b(0x596)]??!0x1,_0x523fa5={'flowId':_0x3b96c5[_0x38c64b(0x618)],..._0x3b96c5,'chatLog':null},_0x2d823e=await this[_0x38c64b(0x58c)](_0x523fa5[_0x38c64b(0x46b)]),_0x2d70fb=await this[_0x38c64b(0x63f)](_0x5eb4f6),_0x3289e4={..._0x2d823e,..._0x2d70fb,'_remoteJid':_0x5eb4f6},_0x15746f={'lastReceivedMessage':_0x34a5ca,'lastSendMessage':_0x3dc15a,'lastBlockId':_0x9025f1,'lastCondition':!0x0,'realVariables':_0x3289e4};_0x523fa5[_0x38c64b(0x590)]=_0x15746f,_0x523fa5[_0x38c64b(0x590)][_0x38c64b(0x2df)]={..._0x3289e4,..._0x486a97},delete _0x523fa5[_0x38c64b(0x618)],_0x523fa5[_0x38c64b(0x618)]=new _0x5c29d1(),_0x523fa5[_0x38c64b(0x3fb)]=_0x6f9e45,_0x523fa5['status']=_0x38c64b(0x808),_0x523fa5[_0x38c64b(0x8d4)]=_0x5eb4f6,_0x523fa5[_0x38c64b(0x918)]=_0x424dea,_0x523fa5[_0x38c64b(0x596)]=_0x29f407,_0x523fa5['_id']=_0x3b96c5[_0x38c64b(0x618)];let _0x519947=await this['repository'][_0x38c64b(0x43a)][_0x38c64b(0x7eb)](_0x523fa5['_id'],_0x523fa5,this[_0x38c64b(0x568)][_0x38c64b(0x72d)]);return this['logger'][_0x38c64b(0x377)](this[_0x38c64b(0x616)]+'\x20('+this[_0x38c64b(0x568)][_0x38c64b(0x72d)]+_0x38c64b(0x2d2)),_0x519947?_0x523fa5:null;}catch(_0x37a250){let _0x21b535=_0x38c64b(0x2cb),_0x1f5028=_0x37a250 instanceof Error?_0x37a250[_0x38c64b(0x805)]:typeof _0x37a250==_0x38c64b(0x801)?JSON[_0x38c64b(0x573)](_0x37a250):_0x37a250,_0x18e47e=_0x21b535+':\x20'+_0x1f5028;throw this[_0x38c64b(0x563)][_0x38c64b(0x47a)](this[_0x38c64b(0x616)]+'\x20('+this[_0x38c64b(0x568)][_0x38c64b(0x72d)]+_0x38c64b(0x6c0)+_0x18e47e),new m(_0x18e47e);}}async[a0_0x4bc873(0x3be)](_0x85395f){const _0x15876b=a0_0x4bc873;try{this['logger'][_0x15876b(0x377)](this[_0x15876b(0x616)]+'\x20('+this[_0x15876b(0x568)]['wuid']+_0x15876b(0x65f)),this[_0x15876b(0x563)][_0x15876b(0x377)](this[_0x15876b(0x616)]+'\x20('+this[_0x15876b(0x568)][_0x15876b(0x72d)]+_0x15876b(0x64a)+_0x85395f);let _0x5a1c73={'where':{'_id':_0x85395f}};return await this[_0x15876b(0x6c6)][_0x15876b(0x43a)]['findOne'](_0x5a1c73,this[_0x15876b(0x568)]['wuid']);}catch(_0x289ce8){let _0x530cec=_0x15876b(0x257),_0x25c225=_0x289ce8 instanceof Error?_0x289ce8[_0x15876b(0x805)]:typeof _0x289ce8==_0x15876b(0x801)?JSON[_0x15876b(0x573)](_0x289ce8):_0x289ce8,_0x4cb2ed=_0x530cec+':\x20'+_0x25c225;throw this['logger'][_0x15876b(0x47a)](this[_0x15876b(0x616)]+'\x20('+this[_0x15876b(0x568)][_0x15876b(0x72d)]+_0x15876b(0x6c0)+_0x4cb2ed),new m(_0x4cb2ed);}}async['fetchConversation'](_0x13747c){const _0x3fbce6=a0_0x4bc873;try{return this[_0x3fbce6(0x563)]['verbose'](this['instanceName']+'\x20('+this[_0x3fbce6(0x568)][_0x3fbce6(0x72d)]+_0x3fbce6(0x1f6)),await this[_0x3fbce6(0x6c6)][_0x3fbce6(0x43a)][_0x3fbce6(0x8aa)](_0x13747c,this[_0x3fbce6(0x568)][_0x3fbce6(0x72d)]);}catch(_0x41510a){let _0x552e14=_0x3fbce6(0x5b7),_0x3f6f20=_0x41510a instanceof Error?_0x41510a[_0x3fbce6(0x805)]:typeof _0x41510a==_0x3fbce6(0x801)?JSON['stringify'](_0x41510a):_0x41510a,_0x25aa59=_0x552e14+':\x20'+_0x3f6f20;throw this[_0x3fbce6(0x563)][_0x3fbce6(0x47a)](this[_0x3fbce6(0x616)]+'\x20('+this[_0x3fbce6(0x568)][_0x3fbce6(0x72d)]+_0x3fbce6(0x6c0)+_0x25aa59),new m(_0x25aa59);}}async[a0_0x4bc873(0x321)](_0x116950){const _0x51f7f4=a0_0x4bc873;try{return this[_0x51f7f4(0x563)][_0x51f7f4(0x377)](this[_0x51f7f4(0x616)]+'\x20('+this[_0x51f7f4(0x568)]['wuid']+_0x51f7f4(0x3ff)),this[_0x51f7f4(0x563)][_0x51f7f4(0x377)](this[_0x51f7f4(0x616)]+'\x20('+this[_0x51f7f4(0x568)]['wuid']+'):\x20Query\x20params:'+_0x116950),(await this[_0x51f7f4(0x6c6)][_0x51f7f4(0x43a)][_0x51f7f4(0x469)]({'where':{'_id':_0x116950[_0x51f7f4(0x618)]}},this[_0x51f7f4(0x568)][_0x51f7f4(0x72d)]))[_0x51f7f4(0x44f)]===0x0?{'message':_0x51f7f4(0x24a)}:{'message':'Conversa\x20deletada\x20com\x20sucesso.'};}catch(_0x216cf6){let _0xcb7be1='Erro\x20ao\x20deletar\x20a\x20conversa',_0x44c47c=_0x216cf6 instanceof Error?_0x216cf6['message']:typeof _0x216cf6==_0x51f7f4(0x801)?JSON[_0x51f7f4(0x573)](_0x216cf6):_0x216cf6,_0xbeb859=_0xcb7be1+':\x20'+_0x44c47c;throw this[_0x51f7f4(0x563)]['error'](this['instanceName']+'\x20('+this[_0x51f7f4(0x568)][_0x51f7f4(0x72d)]+_0x51f7f4(0x6c0)+_0xbeb859),new m(_0xbeb859);}}async['editConversation'](_0x5ac1ed){const _0x5eff4b=a0_0x4bc873;try{let {_id:_0x29cdc6,chatLog:_0x10015f,status:_0x54ceac}=_0x5ac1ed;if(!_0x29cdc6)return{'message':_0x5eff4b(0x36a)};let _0x45956b={};if(_0x54ceac!==void 0x0&&(_0x45956b['status']=_0x54ceac),Object['keys'](_0x45956b)[_0x5eff4b(0x825)]===0x0)return{'message':_0x5eff4b(0x742)};let _0x3ff25f=await this[_0x5eff4b(0x6c6)][_0x5eff4b(0x43a)][_0x5eff4b(0x7eb)](_0x29cdc6,_0x45956b,this['instance'][_0x5eff4b(0x72d)]);return _0x3ff25f||{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20voc\x20no\x20\x20o\x20proprietrio\x20da\x20conversa.'};}catch(_0x10e90b){let _0x46be4b='Erro\x20ao\x20editar\x20a\x20conversa',_0x33ccb7=_0x10e90b instanceof Error?_0x10e90b['message']:typeof _0x10e90b==_0x5eff4b(0x801)?JSON[_0x5eff4b(0x573)](_0x10e90b):_0x10e90b,_0x3cb362=_0x46be4b+':\x20'+_0x33ccb7;throw this['logger'][_0x5eff4b(0x47a)](this[_0x5eff4b(0x616)]+'\x20('+this[_0x5eff4b(0x568)][_0x5eff4b(0x72d)]+_0x5eff4b(0x6c0)+_0x3cb362),new m(_0x3cb362);}}async['editChat'](_0xad4812){const _0x5ed0f6=a0_0x4bc873;try{_0xad4812[_0x5ed0f6(0x618)]=this[_0x5ed0f6(0x764)](_0xad4812[_0x5ed0f6(0x618)]);let _0x43de86=await this['repository'][_0x5ed0f6(0x69a)][_0x5ed0f6(0x6e7)]({'where':{'_id':_0xad4812[_0x5ed0f6(0x618)]}},this[_0x5ed0f6(0x568)][_0x5ed0f6(0x72d)]);if(!_0x43de86)throw new m('Chat\x20no\x20existe,\x20use\x20a\x20funo\x20de\x20importar\x20para\x20cri-lo');let {_id:_0xe1ba6,leadInfo:_0x304a9f}=_0xad4812;if(!_0xe1ba6)throw new Error(_0x5ed0f6(0x359));if(_0xad4812['delete']===_0x5ed0f6(0x844))return await this['deleteChat'](_0xad4812[_0x5ed0f6(0x618)]),await this[_0x5ed0f6(0x6c6)]['chat'][_0x5ed0f6(0x4a8)]({'where':{'_id':_0xad4812[_0x5ed0f6(0x618)]}},this[_0x5ed0f6(0x568)]['wuid']),await this['repository']['message']['delete']({'where':{'key':{'remoteJid':_0xad4812['_id']}}},this[_0x5ed0f6(0x568)][_0x5ed0f6(0x72d)]),_0xad4812=await this[_0x5ed0f6(0x6c6)][_0x5ed0f6(0x69a)][_0x5ed0f6(0x7eb)]({'where':{'_id':_0xad4812['_id']}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x5ed0f6(0x568)][_0x5ed0f6(0x72d)]),F(this[_0x5ed0f6(0x616)],'chats',{'chat':_0xad4812}),{'message':_0x5ed0f6(0x831)};if(_0xad4812[_0x5ed0f6(0x4a8)]===_0x5ed0f6(0x88d))return await this[_0x5ed0f6(0x6c6)][_0x5ed0f6(0x805)]['delete']({'where':{'key':{'remoteJid':_0xad4812[_0x5ed0f6(0x618)]}}},this['instance'][_0x5ed0f6(0x72d)]),_0xad4812=await this[_0x5ed0f6(0x6c6)][_0x5ed0f6(0x69a)][_0x5ed0f6(0x7eb)]({'where':{'_id':_0xad4812[_0x5ed0f6(0x618)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x5ed0f6(0x568)][_0x5ed0f6(0x72d)]),F(this[_0x5ed0f6(0x616)],'chats',{'chat':_0xad4812}),{'message':'Mensagens\x20deletadas\x20com\x20sucesso.'};let _0x522b43=(_0x3139fd,_0x3fd122,_0x180efb)=>{const _0x469f48=_0x5ed0f6;_0x3139fd&&_0x180efb[_0x469f48(0x426)](_0x277fc9=>{const _0x4dccaa=_0x469f48;_0x3139fd[_0x277fc9]!==void 0x0&&(_0x3fd122[_0x4dccaa(0x6b5)+_0x277fc9]=_0x3139fd[_0x277fc9]);});},_0x3c20f4={};if(_0x5ed0f6(0x92e)in _0xad4812&&(this[_0x5ed0f6(0x563)][_0x5ed0f6(0x377)](this[_0x5ed0f6(0x616)]+'\x20('+this['instance'][_0x5ed0f6(0x72d)]+_0x5ed0f6(0x528)+_0xad4812[_0x5ed0f6(0x618)]),_0xad4812['muteEndTime']=_0xad4812[_0x5ed0f6(0x92e)]===0x0?null:-0x1,await this['client'][_0x5ed0f6(0x8dc)]({'mute':_0xad4812[_0x5ed0f6(0x92e)]},_0xad4812[_0x5ed0f6(0x618)]),_0x3c20f4[_0x5ed0f6(0x92e)]=Number(_0xad4812[_0x5ed0f6(0x92e)])),_0x304a9f&&(_0x522b43(_0x304a9f,_0x3c20f4,[_0x5ed0f6(0x37c),_0x5ed0f6(0x685),_0x5ed0f6(0x653),_0x5ed0f6(0x90e),_0x5ed0f6(0x4ed),'notas',_0x5ed0f6(0x865),_0x5ed0f6(0x6e1),_0x5ed0f6(0x398),'etiquetas','desativadoFluxoAte']),Array[_0x5ed0f6(0x719)](_0x304a9f[_0x5ed0f6(0x64e)])&&(_0x3c20f4[_0x5ed0f6(0x485)]=_0x304a9f[_0x5ed0f6(0x64e)]['map'](_0x219a78=>({'_id':_0x219a78['_id'],'value':_0x219a78[_0x5ed0f6(0x6fd)]}))),_0xad4812[_0x5ed0f6(0x344)]['etiquetas']!==void 0x0)){let _0x5559e4=await this[_0x5ed0f6(0x6c6)]['label'][_0x5ed0f6(0x8aa)]({'where':{}},this['instance'][_0x5ed0f6(0x72d)]),_0x400967=new Set(_0xad4812['leadInfo'][_0x5ed0f6(0x3c5)]||[]),_0x5eddab=new Set(_0xad4812[_0x5ed0f6(0x344)][_0x5ed0f6(0x3c5)]),_0x49d781=new Set(_0x5559e4[_0x5ed0f6(0x347)](_0x306d27=>_0x306d27['_id'])),_0x2e85f4=[..._0x5eddab]['filter'](_0x1e0b47=>!_0x400967[_0x5ed0f6(0x772)](_0x1e0b47)&&_0x49d781[_0x5ed0f6(0x772)](_0x1e0b47)),_0x3f18f1=[..._0x400967][_0x5ed0f6(0x411)](_0x42ca72=>!_0x5eddab['has'](_0x42ca72));if(_0x3c20f4['leadInfo.etiquetas']=[..._0x400967],_0x43de86&&!_0x43de86[_0x5ed0f6(0x3dd)]){for(let _0x31b643 of _0x2e85f4)await this[_0x5ed0f6(0x35c)](_0x31b643,_0xad4812['_id']),_0x400967['add'](_0x31b643);for(let _0xcc16d8 of _0x3f18f1)await this['RemoveChatLabel'](_0xcc16d8,_0xad4812[_0x5ed0f6(0x618)]),_0x400967[_0x5ed0f6(0x4a8)](_0xcc16d8);}}if(_0xad4812[_0x5ed0f6(0x32b)]!==void 0x0&&(_0x3c20f4[_0x5ed0f6(0x32b)]=Number(_0xad4812[_0x5ed0f6(0x32b)])),Object[_0x5ed0f6(0x419)](_0x3c20f4)['length']===0x0)throw new Error(_0x5ed0f6(0x742));let _0x2f7400=await this[_0x5ed0f6(0x6c6)][_0x5ed0f6(0x69a)]['updateOne']({'where':{'_id':_0xad4812[_0x5ed0f6(0x618)]}},_0x3c20f4,this['instance'][_0x5ed0f6(0x72d)]);return _0x2f7400&&F(this[_0x5ed0f6(0x616)],_0x5ed0f6(0x85a),{'chat':_0x2f7400}),_0x2f7400?(this['logger'][_0x5ed0f6(0x377)](this['instanceName']+'\x20('+this[_0x5ed0f6(0x568)][_0x5ed0f6(0x72d)]+_0x5ed0f6(0x6c0)+JSON[_0x5ed0f6(0x573)](_0x2f7400,null,0x2)),_0x2f7400):{'message':'Nenhum\x20chat\x20encontrado\x20para\x20editar.'};}catch(_0x15bb10){let _0x3cd38a=_0x5ed0f6(0x7dc),_0xa54390=_0x15bb10 instanceof Error?_0x15bb10[_0x5ed0f6(0x805)]:typeof _0x15bb10==_0x5ed0f6(0x801)?JSON['stringify'](_0x15bb10):_0x15bb10,_0x35f029=_0x3cd38a+':\x20'+_0xa54390;throw this[_0x5ed0f6(0x563)][_0x5ed0f6(0x47a)](this[_0x5ed0f6(0x616)]+'\x20('+this[_0x5ed0f6(0x568)]['wuid']+'):\x20'+_0x35f029),new m(_0x35f029);}}async[a0_0x4bc873(0x35c)](_0x399111,_0x17f336){const _0x5e5d97=a0_0x4bc873;try{await this[_0x5e5d97(0x877)][_0x5e5d97(0x5e6)](_0x17f336,_0x399111),this['logger']['info'](this[_0x5e5d97(0x616)]+'\x20('+this['instance'][_0x5e5d97(0x72d)]+'):\x20Label\x20'+_0x399111+'\x20adicionado\x20ao\x20chat\x20'+_0x17f336+'\x20com\x20sucesso.');}catch(_0x48e2b1){this[_0x5e5d97(0x563)][_0x5e5d97(0x47a)](_0x5e5d97(0x271)+_0x399111+'\x20ao\x20chat\x20'+_0x17f336+':\x20'+_0x48e2b1);}}async[a0_0x4bc873(0x56e)](_0x2dfb99,_0x4be451){const _0x44d10a=a0_0x4bc873;try{await this[_0x44d10a(0x877)][_0x44d10a(0x72c)](_0x4be451,_0x2dfb99),this[_0x44d10a(0x563)][_0x44d10a(0x636)](this[_0x44d10a(0x616)]+'\x20('+this[_0x44d10a(0x568)][_0x44d10a(0x72d)]+'):\x20Label\x20'+_0x2dfb99+_0x44d10a(0x895)+_0x4be451+_0x44d10a(0x654));}catch(_0x1b8146){this[_0x44d10a(0x563)][_0x44d10a(0x47a)](_0x44d10a(0x7a8)+_0x2dfb99+_0x44d10a(0x704)+_0x4be451+':\x20'+_0x1b8146);}}async[a0_0x4bc873(0x244)](_0x4133e9){const _0x2d53f3=a0_0x4bc873;try{let _0x2fc092=await this[_0x2d53f3(0x6c6)][_0x2d53f3(0x40e)][_0x2d53f3(0x24e)](this['instance'][_0x2d53f3(0x72d)]),_0x39267f=_0x4133e9[_0x2d53f3(0x618)]?_0x2fc092[_0x2d53f3(0x691)]['findIndex'](_0x202cfa=>_0x202cfa[_0x2d53f3(0x618)]===_0x4133e9[_0x2d53f3(0x618)]):-0x1;if(_0x4133e9[_0x2d53f3(0x4a8)]&&_0x39267f>-0x1)_0x2fc092[_0x2d53f3(0x691)][_0x2d53f3(0x4d2)](_0x39267f,0x1);else{if(_0x39267f>-0x1){let _0x195a9a=_0x2fc092[_0x2d53f3(0x691)][_0x39267f];_0x4133e9[_0x2d53f3(0x47e)]&&(_0x195a9a[_0x2d53f3(0x47e)]=_0x4133e9[_0x2d53f3(0x47e)]),_0x4133e9[_0x2d53f3(0x60f)]&&(_0x195a9a[_0x2d53f3(0x60f)]=_0x4133e9[_0x2d53f3(0x60f)]),_0x4133e9[_0x2d53f3(0x653)]&&(_0x195a9a[_0x2d53f3(0x653)]=_0x4133e9[_0x2d53f3(0x653)]),_0x4133e9[_0x2d53f3(0x839)]&&(_0x195a9a['role']=_0x4133e9['role']);}else _0x2fc092[_0x2d53f3(0x691)][_0x2d53f3(0x7f1)]({'_id':_0x4133e9['_id']||new ge[(_0x2d53f3(0x323))][(_0x2d53f3(0x7da))][(_0x2d53f3(0x4b9))]()[_0x2d53f3(0x529)](),'fone':_0x4133e9[_0x2d53f3(0x47e)],'name':_0x4133e9['name'],'email':_0x4133e9[_0x2d53f3(0x653)],'role':_0x4133e9[_0x2d53f3(0x839)]});}let _0x10c8a1={'agents':_0x2fc092[_0x2d53f3(0x691)]},_0x29721f=await this[_0x2d53f3(0x6c6)][_0x2d53f3(0x40e)]['update'](_0x10c8a1,this['instance'][_0x2d53f3(0x72d)]);return this[_0x2d53f3(0x5a5)]=_0x29721f,this[_0x2d53f3(0x563)][_0x2d53f3(0x377)](this[_0x2d53f3(0x616)]+'\x20('+this[_0x2d53f3(0x568)][_0x2d53f3(0x72d)]+_0x2d53f3(0x66b)),this[_0x2d53f3(0x563)][_0x2d53f3(0x377)](this[_0x2d53f3(0x616)]+'\x20('+this[_0x2d53f3(0x568)][_0x2d53f3(0x72d)]+'):\x20'+this[_0x2d53f3(0x5a5)]),_0x29721f;}catch(_0x4e301c){let _0x157f72=_0x2d53f3(0x87f),_0x2a15a8=_0x4e301c instanceof Error?_0x4e301c[_0x2d53f3(0x805)]:typeof _0x4e301c==_0x2d53f3(0x801)?JSON['stringify'](_0x4e301c):_0x4e301c,_0x41ec30=_0x157f72+':\x20'+_0x2a15a8;throw this[_0x2d53f3(0x563)][_0x2d53f3(0x47a)](this[_0x2d53f3(0x616)]+'\x20('+this[_0x2d53f3(0x568)][_0x2d53f3(0x72d)]+_0x2d53f3(0x6c0)+_0x41ec30),new m(_0x41ec30);}}async[a0_0x4bc873(0x720)](_0x5d7b16){const _0x3c2c1d=a0_0x4bc873;try{let _0x4792ed=await this[_0x3c2c1d(0x6c6)][_0x3c2c1d(0x40e)][_0x3c2c1d(0x24e)](this[_0x3c2c1d(0x568)][_0x3c2c1d(0x72d)]),_0x5eaedb=_0x5d7b16[_0x3c2c1d(0x618)]?_0x4792ed[_0x3c2c1d(0x64e)][_0x3c2c1d(0x416)](_0x5d0d5c=>_0x5d0d5c[_0x3c2c1d(0x618)]===_0x5d7b16['_id']):-0x1,_0x32baf5=!0x1,_0x1eb758=_0x4792ed[_0x3c2c1d(0x64e)][_0x3c2c1d(0x456)](_0xc28b89=>_0xc28b89[_0x3c2c1d(0x268)]===_0x5d7b16[_0x3c2c1d(0x268)]);if(_0x5d7b16[_0x3c2c1d(0x4a8)]&&_0x5eaedb>-0x1)_0x4792ed[_0x3c2c1d(0x64e)][_0x3c2c1d(0x4d2)](_0x5eaedb,0x1),_0x32baf5=!0x0;else{if(_0x5eaedb>-0x1){if(_0x4792ed[_0x3c2c1d(0x64e)][_0x3c2c1d(0x456)](_0x3f4a09=>_0x3f4a09['name']===_0x5d7b16[_0x3c2c1d(0x60f)]&&_0x3f4a09[_0x3c2c1d(0x618)]!==_0x5d7b16[_0x3c2c1d(0x618)]))throw new Error(_0x3c2c1d(0x409));let _0x128d66=_0x4792ed[_0x3c2c1d(0x64e)][_0x5eaedb];_0x5d7b16[_0x3c2c1d(0x268)]&&(_0x1eb758||!Number[_0x3c2c1d(0x4de)](_0x5d7b16['order']))&&(_0x128d66['order']=_0x5d7b16[_0x3c2c1d(0x268)],_0x32baf5=!0x0),_0x5d7b16[_0x3c2c1d(0x60f)]&&(_0x128d66[_0x3c2c1d(0x60f)]=_0x5d7b16[_0x3c2c1d(0x60f)]);}else{if(_0x4792ed[_0x3c2c1d(0x64e)]['some'](_0x3421c6=>_0x3421c6[_0x3c2c1d(0x60f)]===_0x5d7b16[_0x3c2c1d(0x60f)]&&_0x3421c6[_0x3c2c1d(0x618)]!==_0x5d7b16[_0x3c2c1d(0x618)]))throw new Error(_0x3c2c1d(0x409));_0x4792ed['customFields'][_0x3c2c1d(0x7f1)]({'_id':_0x5d7b16[_0x3c2c1d(0x618)]||new ge['default'][(_0x3c2c1d(0x7da))][(_0x3c2c1d(0x4b9))]()['toString'](),'order':_0x5d7b16[_0x3c2c1d(0x268)],'name':_0x5d7b16[_0x3c2c1d(0x60f)]}),_0x32baf5=!0x0;}}if(_0x32baf5){_0x4792ed[_0x3c2c1d(0x64e)][_0x3c2c1d(0x32e)]((_0x2c95e3,_0x51357c)=>_0x2c95e3['order']>_0x51357c[_0x3c2c1d(0x268)]?0x1:_0x51357c[_0x3c2c1d(0x268)]>_0x2c95e3[_0x3c2c1d(0x268)]?-0x1:0x0);for(let _0x1f25d8=0x0;_0x1f25d8<_0x4792ed['customFields'][_0x3c2c1d(0x825)];_0x1f25d8++)_0x4792ed[_0x3c2c1d(0x64e)][_0x1f25d8][_0x3c2c1d(0x268)]=_0x1f25d8+0x1;}let _0xceac53=await this[_0x3c2c1d(0x6c6)][_0x3c2c1d(0x40e)][_0x3c2c1d(0x275)](_0x4792ed,this[_0x3c2c1d(0x568)]['wuid']);return this[_0x3c2c1d(0x5a5)]=_0xceac53,this[_0x3c2c1d(0x563)][_0x3c2c1d(0x377)](this['instanceName']+'\x20('+this[_0x3c2c1d(0x568)][_0x3c2c1d(0x72d)]+_0x3c2c1d(0x53a)),this[_0x3c2c1d(0x563)][_0x3c2c1d(0x377)](this[_0x3c2c1d(0x616)]+'\x20('+this[_0x3c2c1d(0x568)][_0x3c2c1d(0x72d)]+_0x3c2c1d(0x6c0)+this['AutomateSystem']),_0xceac53;}catch(_0x264851){let _0x5c4056=_0x3c2c1d(0x42a),_0x12cdef=_0x264851 instanceof Error?_0x264851['message']:typeof _0x264851==_0x3c2c1d(0x801)?JSON[_0x3c2c1d(0x573)](_0x264851):_0x264851,_0x10accb=_0x5c4056+':\x20'+_0x12cdef;throw this[_0x3c2c1d(0x563)][_0x3c2c1d(0x47a)](this[_0x3c2c1d(0x616)]+'\x20('+this[_0x3c2c1d(0x568)][_0x3c2c1d(0x72d)]+_0x3c2c1d(0x6c0)+_0x10accb),new m(_0x10accb);}}async[a0_0x4bc873(0x695)](_0x147e64){const _0x297196=a0_0x4bc873;try{let _0x53d376=await this[_0x297196(0x6c6)][_0x297196(0x40e)][_0x297196(0x24e)](this[_0x297196(0x568)][_0x297196(0x72d)]),_0x2dcece=_0x53d376?.[_0x297196(0x40c)]?.[_0x297196(0x416)](_0x568d79=>_0x568d79['_id']===_0x147e64?.['_id']);if(_0x147e64?.[_0x297196(0x4a8)])_0x2dcece>-0x1&&_0x53d376?.['autoCompleteMessages']?.[_0x297196(0x4d2)](_0x2dcece,0x1);else{if(_0x2dcece>-0x1){let _0x8b7d92=_0x53d376['autoCompleteMessages'][_0x2dcece];_0x8b7d92[_0x297196(0x268)]=_0x147e64?.[_0x297196(0x268)]||_0x8b7d92[_0x297196(0x268)],_0x8b7d92['command']=_0x147e64?.[_0x297196(0x650)]||_0x8b7d92[_0x297196(0x650)],_0x8b7d92['message']=_0x147e64?.[_0x297196(0x805)]||_0x8b7d92[_0x297196(0x805)];}else{let _0x5782db={'_id':_0x147e64?.[_0x297196(0x618)]||new ge[(_0x297196(0x323))]['Types'][(_0x297196(0x4b9))]()['toString'](),'order':_0x147e64?.[_0x297196(0x268)],'command':_0x147e64?.[_0x297196(0x650)],'message':_0x147e64?.['message']};_0x53d376?.[_0x297196(0x40c)]?.[_0x297196(0x7f1)](_0x5782db);}}_0x53d376?.['autoCompleteMessages']?.[_0x297196(0x32e)]((_0x599b79,_0x356393)=>_0x599b79['order']-_0x356393[_0x297196(0x268)]);let _0x2ce4dc=await this[_0x297196(0x6c6)][_0x297196(0x40e)][_0x297196(0x275)](_0x53d376,this[_0x297196(0x568)][_0x297196(0x72d)]);return this[_0x297196(0x5a5)]=_0x2ce4dc,this[_0x297196(0x563)][_0x297196(0x377)](this[_0x297196(0x616)]+'\x20('+this[_0x297196(0x568)][_0x297196(0x72d)]+'):\x20debug\x20alterando\x20this.AutomateSystem'),_0x2ce4dc;}catch(_0x35975c){let _0x5908e8='Erro\x20ao\x20tentar\x20autoCompleteMessages',_0x3650a1=_0x35975c instanceof Error?_0x35975c[_0x297196(0x805)]:typeof _0x35975c==_0x297196(0x801)?JSON[_0x297196(0x573)](_0x35975c):_0x35975c,_0x124b47=_0x5908e8+':\x20'+_0x3650a1;throw this[_0x297196(0x563)][_0x297196(0x47a)](this[_0x297196(0x616)]+'\x20('+this[_0x297196(0x568)][_0x297196(0x72d)]+_0x297196(0x6c0)+_0x124b47),new m(_0x124b47);}}async[a0_0x4bc873(0x908)](_0x260483){const _0x1ecc97=a0_0x4bc873;try{let _0x502b4e=await this[_0x1ecc97(0x6c6)][_0x1ecc97(0x40e)][_0x1ecc97(0x24e)](this['instance'][_0x1ecc97(0x72d)]);if(!_0x502b4e)throw new Error(_0x1ecc97(0x403));let _0x284fce={'_id':_0x502b4e[_0x1ecc97(0x618)],'flowConfig':{'enabled':_0x260483[_0x1ecc97(0x896)]??_0x502b4e[_0x1ecc97(0x92b)][_0x1ecc97(0x896)],'ignoreGroups':_0x260483[_0x1ecc97(0x652)]??_0x502b4e[_0x1ecc97(0x92b)]['ignoreGroups'],'stopConversation':_0x260483['stopConversation'][_0x1ecc97(0x4cf)]()??_0x502b4e[_0x1ecc97(0x92b)][_0x1ecc97(0x61c)][_0x1ecc97(0x4cf)](),'stopMinutes':_0x260483['stopMinutes']??_0x502b4e[_0x1ecc97(0x92b)]['stopMinutes'],'stopWhenYouSendMsg':_0x260483[_0x1ecc97(0x53d)]??_0x502b4e[_0x1ecc97(0x92b)][_0x1ecc97(0x53d)]}},_0x3d38e9=await this['repository'][_0x1ecc97(0x40e)][_0x1ecc97(0x275)](_0x284fce,this['instance'][_0x1ecc97(0x72d)]);return this[_0x1ecc97(0x5a5)]=_0x3d38e9,this[_0x1ecc97(0x563)]['verbose'](this['instanceName']+'\x20('+this[_0x1ecc97(0x568)][_0x1ecc97(0x72d)]+_0x1ecc97(0x66b)),this[_0x1ecc97(0x563)][_0x1ecc97(0x377)](this['instanceName']+'\x20('+this['instance'][_0x1ecc97(0x72d)]+_0x1ecc97(0x6c0)+this[_0x1ecc97(0x5a5)]),setTimeout(()=>this[_0x1ecc97(0x658)](),0x7d0),_0x3d38e9;}catch(_0x3f6d04){let _0x1882d7=_0x1ecc97(0x6fe),_0x417925=_0x3f6d04 instanceof Error?_0x3f6d04[_0x1ecc97(0x805)]:typeof _0x3f6d04==_0x1ecc97(0x801)?JSON[_0x1ecc97(0x573)](_0x3f6d04):_0x3f6d04,_0x5eaec1=_0x1882d7+':\x20'+_0x417925;throw this['logger'][_0x1ecc97(0x47a)](this[_0x1ecc97(0x616)]+'\x20('+this['instance']['wuid']+_0x1ecc97(0x6c0)+_0x5eaec1),new m(_0x5eaec1);}}async[a0_0x4bc873(0x209)](){const _0x5b5494=a0_0x4bc873;try{let _0x5d65f3=await this['repository'][_0x5b5494(0x40e)][_0x5b5494(0x24e)](this[_0x5b5494(0x568)]['wuid']);return this[_0x5b5494(0x5a5)]=_0x5d65f3,_0x5d65f3;}catch(_0x103f38){let _0x202c23=_0x5b5494(0x4e0),_0x51acfe=_0x103f38 instanceof Error?_0x103f38[_0x5b5494(0x805)]:typeof _0x103f38=='object'?JSON[_0x5b5494(0x573)](_0x103f38):_0x103f38,_0x37b6b2=_0x202c23+':\x20'+_0x51acfe;throw this[_0x5b5494(0x563)]['error'](this[_0x5b5494(0x616)]+'\x20('+this[_0x5b5494(0x568)][_0x5b5494(0x72d)]+'):\x20'+_0x37b6b2),new m(_0x37b6b2);}}async[a0_0x4bc873(0x879)](){const _0x5368aa=a0_0x4bc873;let _0x4451cb=(await import(_0x5368aa(0x601)))[_0x5368aa(0x323)];this['queue']=new _0x4451cb({'concurrency':0x1});}async[a0_0x4bc873(0x8f4)](){const _0x33563a=a0_0x4bc873;this['instance'][_0x33563a(0x478)]['timeout']&&clearTimeout(this['instance'][_0x33563a(0x478)]['timeout']),this[_0x33563a(0x568)][_0x33563a(0x478)]['timeout']=setTimeout(()=>{const _0x30b255=_0x33563a;this[_0x30b255(0x3e3)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x4bc873(0x3e3)](){const _0x3abcca=a0_0x4bc873;let _0x1adec0=this['instance'][_0x3abcca(0x478)][_0x3abcca(0x3df)];(_0x1adec0===0x0||_0x1adec0===null||Date[_0x3abcca(0x3bd)]()-_0x1adec0>=0x1d4c0)&&(this['logger']['verbose'](this[_0x3abcca(0x616)]+'\x20('+this[_0x3abcca(0x568)][_0x3abcca(0x72d)]+_0x3abcca(0x2bf)),this[_0x3abcca(0x568)][_0x3abcca(0x478)]['processingGroup']=null,this[_0x3abcca(0x568)][_0x3abcca(0x478)][_0x3abcca(0x3df)]=0x0,this[_0x3abcca(0x568)]['ScheduleMessage'][_0x3abcca(0x73e)]=0x0,await this[_0x3abcca(0x658)]());}async[a0_0x4bc873(0x658)](){const _0x1b5b4e=a0_0x4bc873;this['logger'][_0x1b5b4e(0x5b6)](this[_0x1b5b4e(0x616)]+'\x20('+this[_0x1b5b4e(0x568)]['wuid']+'):\x20Procurando\x20mensagens\x20para\x20envio'),await this[_0x1b5b4e(0x7e4)]();let _0x42550b=await this[_0x1b5b4e(0x4f2)]();_0x42550b[_0x1b5b4e(0x825)]>0x0&&(setTimeout(()=>this[_0x1b5b4e(0x3e3)](),0x14*0x3e8),this[_0x1b5b4e(0x563)][_0x1b5b4e(0x5b6)](this[_0x1b5b4e(0x616)]+'\x20('+this['instance'][_0x1b5b4e(0x72d)]+'):\x20H\x20mensagens\x20prontas,\x20limpando\x20e\x20adicionando\x20\x20fila'),this[_0x1b5b4e(0x3d1)]['clear'](),this[_0x1b5b4e(0x3d1)]['add'](()=>this[_0x1b5b4e(0x67b)](_0x42550b)));let _0x1e1c4b={'where':{'status':_0x1b5b4e(0x92c),'when':{'$gt':Date['now']()}}},_0x42cbec=await this[_0x1b5b4e(0x6c6)][_0x1b5b4e(0x922)][_0x1b5b4e(0x6e7)](_0x1e1c4b,this[_0x1b5b4e(0x568)][_0x1b5b4e(0x72d)]);_0x42cbec&&_0x42cbec[_0x1b5b4e(0x2c3)]-Date[_0x1b5b4e(0x3bd)]()<=0x6ddd00?this[_0x1b5b4e(0x568)][_0x1b5b4e(0x478)]['delayMessage']=_0x42cbec[_0x1b5b4e(0x2c3)]-Date[_0x1b5b4e(0x3bd)]():this['instance'][_0x1b5b4e(0x478)][_0x1b5b4e(0x73e)]=(0x3c+Math['floor'](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x1b5b4e(0x568)][_0x1b5b4e(0x478)][_0x1b5b4e(0x73e)]=Math['max'](this['instance']['ScheduleMessage'][_0x1b5b4e(0x73e)],0x1*0x2*0x3e8);let _0x5722b4=Math[_0x1b5b4e(0x700)](this['instance'][_0x1b5b4e(0x478)][_0x1b5b4e(0x73e)]/0xea60);if(_0x42cbec){let _0x3451ef=new Date(_0x42cbec['when'])['toLocaleString']();this[_0x1b5b4e(0x563)][_0x1b5b4e(0x5b6)](this[_0x1b5b4e(0x616)]+'\x20('+this['instance'][_0x1b5b4e(0x72d)]+'):\x20Encontrado\x20prxima\x20mensagem\x20para\x20'+_0x3451ef+_0x1b5b4e(0x63c)+_0x5722b4+_0x1b5b4e(0x241));}else this[_0x1b5b4e(0x563)]['warn'](this[_0x1b5b4e(0x616)]+'\x20('+this[_0x1b5b4e(0x568)][_0x1b5b4e(0x72d)]+_0x1b5b4e(0x41d)+_0x5722b4+_0x1b5b4e(0x241));setTimeout(()=>{const _0xb817fc=_0x1b5b4e;this[_0xb817fc(0x658)]();},this[_0x1b5b4e(0x568)][_0x1b5b4e(0x478)][_0x1b5b4e(0x73e)]);}async[a0_0x4bc873(0x4f2)](){const _0x9e19a8=a0_0x4bc873;this['logger'][_0x9e19a8(0x5b6)](this[_0x9e19a8(0x616)]+'\x20('+this[_0x9e19a8(0x568)]['wuid']+_0x9e19a8(0x541));let _0x58b87e=Date['now']()-0xc*0x3c*0x3c*0x3e8,_0x57a6a8={'where':{'status':{'$in':[_0x9e19a8(0x92c),_0x9e19a8(0x7a7)]},'$or':[{'when':{'$lte':Date['now'](),'$gte':_0x58b87e}},{'when':0x0}]}},_0x24c1a3=await this[_0x9e19a8(0x6c6)]['scheduleMessage'][_0x9e19a8(0x8aa)](_0x57a6a8,this['instance']['wuid']);return this[_0x9e19a8(0x563)]['warn'](this[_0x9e19a8(0x616)]+'\x20('+this['instance'][_0x9e19a8(0x72d)]+_0x9e19a8(0x729)+_0x24c1a3[_0x9e19a8(0x825)]),_0x24c1a3;}async['processReadyMessages'](_0x3bc1f5){const _0x205fc2=a0_0x4bc873;this[_0x205fc2(0x563)][_0x205fc2(0x5b6)](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)][_0x205fc2(0x72d)]+_0x205fc2(0x7d2));let _0x52d50e=0x3*0x3e8,_0x37af92=0x8*0x3e8,_0x41d4d6=Math[_0x205fc2(0x70a)](Math[_0x205fc2(0x748)]()*(_0x37af92-_0x52d50e+0x1))+_0x52d50e,_0x5b7c31=()=>this[_0x205fc2(0x4c2)]['length']===0x0?null:this[_0x205fc2(0x4c2)]['reduce']((_0x3c9404,_0x6c66bd)=>(_0x3c9404[_0x205fc2(0x268)]??Number['MAX_SAFE_INTEGER'])<(_0x6c66bd['order']??Number[_0x205fc2(0x6b6)])?_0x3c9404:_0x6c66bd,this[_0x205fc2(0x4c2)][0x0]);_0x3bc1f5=await this[_0x205fc2(0x4f2)]();for(let _0x1a1efd of _0x3bc1f5){await this['setRestartTimeout']();let _0x5d4988=0x3*0x3e8,_0x42181e={'_id':_0x1a1efd['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x205fc2(0x3bd)]()-_0x5d4988}}]},_0x3496e3={'startSend':Date[_0x205fc2(0x3bd)](),'status':'sending'},_0x5473a2=await this[_0x205fc2(0x6c6)][_0x205fc2(0x922)][_0x205fc2(0x7eb)](_0x42181e,_0x3496e3,this[_0x205fc2(0x568)][_0x205fc2(0x72d)]);if(this[_0x205fc2(0x4c2)]=_0x5473a2[_0x205fc2(0x88d)]['filter'](_0x1c9588=>!_0x1c9588['triedToSend']),!_0x5473a2){setTimeout(()=>this[_0x205fc2(0x3e3)](),0xa*0x3e8);continue;}if(this[_0x205fc2(0x568)][_0x205fc2(0x478)]['processingGroup']=_0x5473a2,!this[_0x205fc2(0x568)][_0x205fc2(0x478)][_0x205fc2(0x8ad)]){this[_0x205fc2(0x563)][_0x205fc2(0x5b6)](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)][_0x205fc2(0x72d)]+_0x205fc2(0x718));break;}for(;this[_0x205fc2(0x4c2)][_0x205fc2(0x825)]>0x0;){await this[_0x205fc2(0x8f4)]();let _0x59ba13=_0x5b7c31();if(!_0x59ba13)break;let _0xcb662e=_0x1a1efd[_0x205fc2(0x88d)][_0x205fc2(0x8aa)](_0x3b401a=>_0x3b401a['_id']===_0x59ba13[_0x205fc2(0x618)]);if(!_0xcb662e)break;if(this['instance'][_0x205fc2(0x478)][_0x205fc2(0x3df)]=Date[_0x205fc2(0x3bd)](),_0xcb662e['triedToSend']){this[_0x205fc2(0x563)][_0x205fc2(0x5b6)](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)]['wuid']+_0x205fc2(0x37a)+_0xcb662e['remoteJid']+'.\x20Pulando.'),this[_0x205fc2(0x4c2)]=this[_0x205fc2(0x4c2)]['filter'](_0x3f29de=>_0x3f29de[_0x205fc2(0x618)]!==_0xcb662e['_id']);continue;}if(!this['instance'][_0x205fc2(0x478)][_0x205fc2(0x8ad)]){this['logger'][_0x205fc2(0x5b6)](this[_0x205fc2(0x616)]+'\x20('+this['instance']['wuid']+_0x205fc2(0x755));break;}if(!this['instance'][_0x205fc2(0x478)][_0x205fc2(0x751)]){this[_0x205fc2(0x563)][_0x205fc2(0x5b6)](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)][_0x205fc2(0x72d)]+_0x205fc2(0x240)+_0x1a1efd[_0x205fc2(0x618)]+_0x205fc2(0x2e1));break;}let _0x2c6ae4={'idControl':_0xcb662e[_0x205fc2(0x618)],'remoteJid':_0xcb662e['remoteJid'],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0x205fc2(0x3bd)]()},_0x371ea6=null;try{this['logger'][_0x205fc2(0x5b6)](this['instanceName']+'\x20('+this['instance'][_0x205fc2(0x72d)]+'):\x20Enviando\x20mensagem\x20para\x20'+_0xcb662e[_0x205fc2(0x8d4)]);let _0x66c7ad=await this['SendScheduleMessage'](_0xcb662e[_0x205fc2(0x8d4)],_0xcb662e);_0x2c6ae4[_0x205fc2(0x47a)]=_0x66c7ad[_0x205fc2(0x47a)],_0x2c6ae4['id']=_0x66c7ad[_0x205fc2(0x47a)]?null:_0x66c7ad['id'],_0x2c6ae4['error_log']=_0x66c7ad[_0x205fc2(0x47a)]?_0x66c7ad['detail']?_0x66c7ad[_0x205fc2(0x4dc)][_0x205fc2(0x529)]():'':null;let _0x57acd1=_0x1a1efd[_0x205fc2(0x88d)][_0x205fc2(0x416)](_0x40419d=>_0x40419d['_id']===_0xcb662e[_0x205fc2(0x618)]);_0x57acd1!==-0x1&&(_0x1a1efd[_0x205fc2(0x88d)][_0x57acd1][_0x205fc2(0x21f)]=!0x0);let _0x3648c9={'$push':{'messagesSend':_0x2c6ae4},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x458287=[{'elem._id':_0xcb662e['_id']}];if(this[_0x205fc2(0x563)][_0x205fc2(0x5b6)](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)][_0x205fc2(0x72d)]+'):\x20Atualizando\x20status\x20da\x20mensagem\x20'+_0xcb662e[_0x205fc2(0x618)]),_0x371ea6=await this[_0x205fc2(0x6c6)][_0x205fc2(0x922)][_0x205fc2(0x7eb)]({'_id':_0x1a1efd[_0x205fc2(0x618)]},_0x3648c9,this[_0x205fc2(0x568)][_0x205fc2(0x72d)],{'arrayFilters':_0x458287}),_0x66c7ad[_0x205fc2(0x47a)]){this[_0x205fc2(0x563)]['error'](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)][_0x205fc2(0x72d)]+_0x205fc2(0x2bb)+_0x66c7ad[_0x205fc2(0x4dc)]);continue;}let _0x34b134=this[_0x205fc2(0x814)](_0x1a1efd[_0x205fc2(0x262)],_0x1a1efd[_0x205fc2(0x290)]);await this[_0x205fc2(0x22c)](_0x34b134);}catch(_0x491265){this[_0x205fc2(0x563)][_0x205fc2(0x47a)](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)][_0x205fc2(0x72d)]+_0x205fc2(0x355)+_0xcb662e[_0x205fc2(0x8d4)]+':\x20'+(_0x491265 instanceof Error?_0x491265['message']:JSON[_0x205fc2(0x573)](_0x491265,null,0x2))),_0x2c6ae4[_0x205fc2(0x47a)]=!0x0,_0x2c6ae4[_0x205fc2(0x1ea)]=_0x491265[_0x205fc2(0x805)];let _0x676cc4=_0x1a1efd[_0x205fc2(0x88d)][_0x205fc2(0x416)](_0x3aadbe=>_0x3aadbe[_0x205fc2(0x618)]===_0xcb662e['_id']);_0x676cc4!==-0x1&&(_0x1a1efd['messages'][_0x676cc4][_0x205fc2(0x21f)]=!0x0);let _0x5e6e9f={'$push':{'messagesSend':_0x2c6ae4},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x408441=[{'elem._id':_0xcb662e['_id']}];this[_0x205fc2(0x563)]['warn'](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)][_0x205fc2(0x72d)]+_0x205fc2(0x640)+_0xcb662e[_0x205fc2(0x618)]),_0x371ea6=await this[_0x205fc2(0x6c6)]['scheduleMessage'][_0x205fc2(0x7eb)]({'_id':_0x1a1efd[_0x205fc2(0x618)]},_0x5e6e9f,this[_0x205fc2(0x568)]['wuid'],{'arrayFilters':_0x408441});}finally{if(_0x371ea6&&_0x371ea6[_0x205fc2(0x4ed)]===_0x205fc2(0x561)){this[_0x205fc2(0x563)]['warn'](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)][_0x205fc2(0x72d)]+_0x205fc2(0x240)+_0xcb662e[_0x205fc2(0x618)]+_0x205fc2(0x22a));break;}let _0x5ac78d=_0x371ea6[_0x205fc2(0x88d)][_0x205fc2(0x8aa)](_0x112076=>_0x112076[_0x205fc2(0x618)]===_0xcb662e[_0x205fc2(0x618)]);if(_0x5ac78d&&!_0x5ac78d['triedToSend']){let _0x418bf1={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x3ef540=[{'elem._id':_0xcb662e[_0x205fc2(0x618)]}];await this[_0x205fc2(0x6c6)][_0x205fc2(0x922)][_0x205fc2(0x7eb)]({'_id':_0x371ea6[_0x205fc2(0x618)]},_0x418bf1,this[_0x205fc2(0x568)]['wuid'],{'arrayFilters':_0x3ef540});}if(this[_0x205fc2(0x4c2)]=_0x371ea6[_0x205fc2(0x88d)]['filter'](_0x5eedf6=>!_0x5eedf6['triedToSend']),!this[_0x205fc2(0x568)]['ScheduleMessage'][_0x205fc2(0x751)]){await this[_0x205fc2(0x8f4)](),this['logger']['warn'](this[_0x205fc2(0x616)]+'\x20('+this[_0x205fc2(0x568)]['wuid']+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x1a1efd[_0x205fc2(0x618)]+'\x20foi\x20interrompido\x20pelo\x20usurio.');break;}}}this[_0x205fc2(0x4c2)]=[];let _0x21e745=await this[_0x205fc2(0x6c6)][_0x205fc2(0x922)]['findById'](_0x1a1efd[_0x205fc2(0x618)],this[_0x205fc2(0x568)][_0x205fc2(0x72d)]);if(_0x21e745[_0x205fc2(0x88d)]['every'](_0x1d7338=>_0x1d7338[_0x205fc2(0x21f)])&&_0x21e745['status']!=='stopped'){let _0x19e293={'$set':{'status':'done'}};await this['repository']['scheduleMessage'][_0x205fc2(0x201)](_0x21e745[_0x205fc2(0x618)],_0x19e293,this[_0x205fc2(0x568)][_0x205fc2(0x72d)]);}await new Promise(_0x563626=>setTimeout(_0x563626,_0x41d4d6)),global['gc']?global['gc']():console[_0x205fc2(0x5b6)](_0x205fc2(0x779));}}[a0_0x4bc873(0x814)](_0x44bccc,_0x178feb){const _0x15d9bf=a0_0x4bc873;return _0x44bccc=Math['max'](0.5,_0x44bccc),_0x178feb=Math[_0x15d9bf(0x66d)](Math[_0x15d9bf(0x2fa)](0x3,_0x178feb),0x78),Math['floor'](Math['random']()*(_0x178feb-_0x44bccc+0x1)+_0x44bccc)*0x3e8;}[a0_0x4bc873(0x22c)](_0x506b59){return new Promise(_0x5b1742=>setTimeout(_0x5b1742,_0x506b59));}async['getVariablesChat'](_0x4c0ac7){const _0xd2b25=a0_0x4bc873;if(!this['AutomateSystem']&&(await this[_0xd2b25(0x209)](),!this[_0xd2b25(0x5a5)]))return null;_0x4c0ac7=this[_0xd2b25(0x764)](_0x4c0ac7);let _0x2a8e04=await this[_0xd2b25(0x6c6)][_0xd2b25(0x69a)][_0xd2b25(0x6e7)]({'where':{'_id':_0x4c0ac7}},this[_0xd2b25(0x568)][_0xd2b25(0x72d)]),_0x79cdf2={};if(_0x2a8e04&&_0x2a8e04['leadInfo']){let _0x101314=_0x2a8e04[_0xd2b25(0x344)];typeof _0x101314[_0xd2b25(0x37c)]==_0xd2b25(0x792)&&(_0x79cdf2[_0xd2b25(0x37c)]=_0x101314['nome']),typeof _0x101314[_0xd2b25(0x685)]==_0xd2b25(0x792)&&(_0x79cdf2[_0xd2b25(0x685)]=_0x101314[_0xd2b25(0x685)]),typeof _0x101314['email']==_0xd2b25(0x792)&&(_0x79cdf2[_0xd2b25(0x653)]=_0x101314[_0xd2b25(0x653)]),typeof _0x101314[_0xd2b25(0x90e)]==_0xd2b25(0x792)&&(_0x79cdf2[_0xd2b25(0x90e)]=_0x101314[_0xd2b25(0x90e)]),typeof _0x101314[_0xd2b25(0x4ed)]==_0xd2b25(0x792)&&(_0x79cdf2[_0xd2b25(0x4ed)]=_0x101314['status']),typeof _0x101314['notas']==_0xd2b25(0x792)&&(_0x79cdf2['notas']=_0x101314[_0xd2b25(0x3db)]),typeof _0x101314[_0xd2b25(0x398)]==_0xd2b25(0x792)&&(_0x79cdf2['responsavelid']=_0x101314[_0xd2b25(0x398)]),Array[_0xd2b25(0x719)](_0x101314['tags'])&&(_0x79cdf2[_0xd2b25(0x865)]=_0x101314[_0xd2b25(0x865)][_0xd2b25(0x6a2)](',\x20')),Array[_0xd2b25(0x719)](_0x101314[_0xd2b25(0x3c5)])&&(_0x79cdf2[_0xd2b25(0x3c5)]=_0x101314[_0xd2b25(0x3c5)]['join'](',\x20'));}return _0x2a8e04&&_0x2a8e04[_0xd2b25(0x344)]&&_0x2a8e04[_0xd2b25(0x344)]['customFields']&&_0x2a8e04[_0xd2b25(0x344)][_0xd2b25(0x64e)][_0xd2b25(0x426)](_0x5dd17c=>{const _0x2180fc=_0xd2b25;let _0x2c6050=this[_0x2180fc(0x5a5)]?.['customFields'][_0x2180fc(0x8aa)](_0x24668d=>_0x24668d[_0x2180fc(0x618)]===_0x5dd17c[_0x2180fc(0x618)]);_0x2c6050&&(_0x79cdf2[_0x2c6050['name']]=_0x5dd17c[_0x2180fc(0x6fd)]);}),_0x79cdf2;}async[a0_0x4bc873(0x4ab)](_0x55b169,_0x5783bd){const _0xec58ee=a0_0x4bc873;try{let _0x8f324=await this['getVariablesChat'](_0x5783bd);return this[_0xec58ee(0x8a1)](_0x55b169,_0x8f324);}catch(_0x54ade7){return this[_0xec58ee(0x563)][_0xec58ee(0x47a)]('Erro\x20ao\x20substituir\x20variveis\x20para\x20'+_0x5783bd+':\x20'+_0x54ade7),_0x55b169;}}async[a0_0x4bc873(0x7e4)](){const _0x2cda8e=a0_0x4bc873;let _0x125a70=async(_0x5974c0,_0x25f5bc)=>{const _0x5d647e=a0_0x59bb;let _0x1e4f6c=(await this['repository'][_0x5d647e(0x922)][_0x5d647e(0x8aa)]({'where':{'type':_0x5974c0}},this[_0x5d647e(0x568)][_0x5d647e(0x72d)]))[_0x5d647e(0x347)](async _0x1cf1e8=>{const _0x46a986=_0x5d647e;let _0x3a5df3=_0x25f5bc(_0x1cf1e8),_0x2fd1ea=_0x38eba3=>/^\d+$/[_0x46a986(0x36c)](_0x38eba3),_0x214cba=_0x1cf1e8[_0x46a986(0x234)]['filter'](_0x11a861=>_0x11a861[_0x46a986(0x6c8)](_0x46a986(0x8b3))?_0x11a861['length']>0x19:_0x11a861[_0x46a986(0x6c8)](_0x46a986(0x342))?_0x11a861['length']>0xf:_0x2fd1ea(_0x11a861)?_0x11a861[_0x46a986(0x825)]>=0xb:!0x1)['map'](_0x60cc9=>({'_id':(0x0,Y['v4'])(),'idSchedule':_0x1cf1e8[_0x46a986(0x618)],'type':_0x3a5df3,'remoteJid':_0x60cc9,'flow':_0x1cf1e8['flowName'],'text':_0x1cf1e8[_0x46a986(0x805)]?.[_0x46a986(0x23c)],'delay':_0x1cf1e8['message']?.['delay'],'urlOrBase64':_0x1cf1e8['message']?.[_0x46a986(0x491)],'linkPreview':_0x1cf1e8[_0x46a986(0x805)]?.[_0x46a986(0x875)],'fileName':_0x1cf1e8[_0x46a986(0x805)]?.[_0x46a986(0x36d)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x46a986(0x6c6)]['scheduleMessage'][_0x46a986(0x201)](_0x1cf1e8[_0x46a986(0x618)],{'$set':{'messages':_0x214cba},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x46a986(0x568)][_0x46a986(0x72d)]);}catch(_0x1fa244){console[_0x46a986(0x47a)](_0x46a986(0x45d)+_0x1cf1e8[_0x46a986(0x618)]+':',_0x1fa244);}});await Promise[_0x5d647e(0x844)](_0x1e4f6c);};await _0x125a70(_0x2cda8e(0x23c),_0x54b272=>_0x2cda8e(0x23c)),await _0x125a70(_0x2cda8e(0x8c3),_0x218e63=>_0x218e63['message']?.[_0x2cda8e(0x6aa)]||_0x2cda8e(0x8c3)),await _0x125a70(_0x2cda8e(0x77a),_0x392ee0=>_0x2cda8e(0x77a)),await _0x125a70(_0x2cda8e(0x20f),_0x3ca7b1=>_0x2cda8e(0x20f)),await _0x125a70(_0x2cda8e(0x8ed),_0x150fec=>_0x2cda8e(0x8ed)),await _0x125a70(_0x2cda8e(0x721),_0x4e8b66=>_0x2cda8e(0x721)),await _0x125a70(_0x2cda8e(0x8df),_0x3a44b9=>_0x2cda8e(0x8df)),this['logger'][_0x2cda8e(0x5b6)](this['instanceName']+'\x20('+this['instance'][_0x2cda8e(0x72d)]+_0x2cda8e(0x2d0));}async['editScheduleMessage'](_0x4dae82){const _0x10982f=a0_0x4bc873;try{if(this[_0x10982f(0x563)][_0x10982f(0x5b6)](this['instanceName']+'\x20('+this[_0x10982f(0x568)][_0x10982f(0x72d)]+'):\x20Editando/criando\x20grupo\x20de\x20mensagens...'),_0x4dae82[_0x10982f(0x618)]||(_0x4dae82['_id']=(0x0,Y['v4'])()),this[_0x10982f(0x568)][_0x10982f(0x478)][_0x10982f(0x751)]?.['_id']===_0x4dae82[_0x10982f(0x618)]?.[_0x10982f(0x529)]()){if(_0x4dae82[_0x10982f(0x4ed)]===_0x10982f(0x561))this['instance']['ScheduleMessage']['processingGroup']=null;else throw new Error(_0x10982f(0x2d5));}if(_0x4dae82[_0x10982f(0x4a8)]&&_0x4dae82[_0x10982f(0x618)]){let _0xbca240=await this['repository'][_0x10982f(0x922)][_0x10982f(0x469)](_0x4dae82['_id'],this[_0x10982f(0x568)]['wuid']);return setTimeout(()=>this[_0x10982f(0x658)](),0x7d0),_0xbca240;}let _0x49685e=null;if(_0x4dae82[_0x10982f(0x618)]&&(_0x49685e=await this[_0x10982f(0x6c6)][_0x10982f(0x922)]['findById'](_0x4dae82[_0x10982f(0x618)],this[_0x10982f(0x568)][_0x10982f(0x72d)])),_0x49685e){let {_id:_0x363d3d,owner:_0x16a00,messages:_0x21241f,..._0x57bcf7}=_0x4dae82;if(_0x21241f){let _0x2a77e0=_0x21241f['filter'](_0x37adf3=>!_0x37adf3['_id']),_0x3152de=_0x21241f[_0x10982f(0x411)](_0x4cd9d5=>_0x4cd9d5[_0x10982f(0x618)]&&!_0x4cd9d5[_0x10982f(0x4a8)]),_0x594c8f=_0x21241f['filter'](_0x31e1a4=>_0x31e1a4[_0x10982f(0x618)]&&_0x31e1a4['delete']);if(_0x2a77e0[_0x10982f(0x825)]>0x0&&await this[_0x10982f(0x292)](_0x4dae82[_0x10982f(0x618)],_0x2a77e0),_0x3152de[_0x10982f(0x825)]>0x0&&await this[_0x10982f(0x2b4)]({'_id':_0x4dae82[_0x10982f(0x618)],'messages':_0x3152de}),_0x594c8f[_0x10982f(0x825)]>0x0){let _0x40bd39=_0x594c8f[_0x10982f(0x347)](_0x2f79be=>({'updateOne':{'filter':{'_id':_0x4dae82[_0x10982f(0x618)]},'update':{'$pull':{'messages':{'_id':_0x2f79be[_0x10982f(0x618)]}}}}}));await this[_0x10982f(0x6c6)]['scheduleMessage'][_0x10982f(0x5f2)](_0x40bd39,this[_0x10982f(0x568)][_0x10982f(0x72d)]);}}let _0xad1a30={'$set':{..._0x57bcf7,'status':_0x4dae82[_0x10982f(0x4ed)]||_0x49685e[_0x10982f(0x4ed)]}},_0x189ff6=await this[_0x10982f(0x6c6)][_0x10982f(0x922)][_0x10982f(0x201)](_0x4dae82[_0x10982f(0x618)],_0xad1a30,this[_0x10982f(0x568)][_0x10982f(0x72d)]);return _0x189ff6&&(this[_0x10982f(0x5cf)](_0x189ff6[_0x10982f(0x88d)]),await this[_0x10982f(0x6c6)][_0x10982f(0x922)][_0x10982f(0x201)](_0x189ff6['_id'],{'$set':{'messages':_0x189ff6[_0x10982f(0x88d)]}},this[_0x10982f(0x568)]['wuid'])),setTimeout(()=>this[_0x10982f(0x658)](),0x7d0),await this[_0x10982f(0x7e4)](),_0x189ff6;}else{_0x4dae82[_0x10982f(0x6dd)]=this['instance'][_0x10982f(0x72d)],_0x4dae82[_0x10982f(0x88d)]&&_0x4dae82['messages'][_0x10982f(0x426)](_0x37f695=>{const _0x1384d8=_0x10982f;_0x37f695[_0x1384d8(0x618)]||(_0x37f695[_0x1384d8(0x618)]=(0x0,Y['v4'])()),_0x37f695['idSchedule']||(_0x37f695[_0x1384d8(0x73b)]=_0x4dae82[_0x1384d8(0x618)]),delete _0x37f695[_0x1384d8(0x21f)];});let _0x28c061=await this[_0x10982f(0x6c6)][_0x10982f(0x922)][_0x10982f(0x54b)](_0x4dae82,this['instance'][_0x10982f(0x72d)]);return _0x28c061&&(this[_0x10982f(0x5cf)](_0x28c061[_0x10982f(0x88d)]),await this[_0x10982f(0x6c6)][_0x10982f(0x922)][_0x10982f(0x201)](_0x28c061[_0x10982f(0x618)],{'$set':{'messages':_0x28c061[_0x10982f(0x88d)]}},this[_0x10982f(0x568)][_0x10982f(0x72d)])),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x28c061;}}catch(_0x35754a){let _0x43c524=_0x10982f(0x746),_0x3719ef=_0x35754a instanceof Error?_0x35754a[_0x10982f(0x805)]:typeof _0x35754a=='object'?JSON['stringify'](_0x35754a):_0x35754a,_0x1d0721=_0x43c524+':\x20'+_0x3719ef;throw this[_0x10982f(0x563)][_0x10982f(0x47a)](this[_0x10982f(0x616)]+'\x20('+this['instance'][_0x10982f(0x72d)]+_0x10982f(0x6c0)+_0x1d0721),new m(_0x1d0721);}}async[a0_0x4bc873(0x292)](_0x3380b8,_0x373b6c){const _0x2b8af2=a0_0x4bc873;try{this['logger'][_0x2b8af2(0x377)](this[_0x2b8af2(0x616)]+'\x20('+this[_0x2b8af2(0x568)]['wuid']+_0x2b8af2(0x2dd)),_0x373b6c[_0x2b8af2(0x426)](_0x3420fb=>{const _0x3a5da2=_0x2b8af2;_0x3420fb[_0x3a5da2(0x618)]||(_0x3420fb[_0x3a5da2(0x618)]=(0x0,Y['v4'])()),_0x3420fb[_0x3a5da2(0x73b)]||(_0x3420fb[_0x3a5da2(0x73b)]=_0x3380b8),delete _0x3420fb[_0x3a5da2(0x21f)];});let _0x28aa16={'$push':{'messages':{'$each':_0x373b6c}}},_0x49303f=await this[_0x2b8af2(0x6c6)][_0x2b8af2(0x922)]['updateOneById'](_0x3380b8,_0x28aa16,this[_0x2b8af2(0x568)][_0x2b8af2(0x72d)]);return _0x49303f&&(this[_0x2b8af2(0x5cf)](_0x49303f[_0x2b8af2(0x88d)]),await this[_0x2b8af2(0x6c6)]['scheduleMessage'][_0x2b8af2(0x201)](_0x49303f[_0x2b8af2(0x618)],{'$set':{'messages':_0x49303f[_0x2b8af2(0x88d)]}},this[_0x2b8af2(0x568)]['wuid'])),_0x49303f;}catch(_0x400fb8){let _0x9ab967=_0x2b8af2(0x6fb),_0x317744=_0x400fb8 instanceof Error?_0x400fb8[_0x2b8af2(0x805)]:typeof _0x400fb8=='object'?JSON[_0x2b8af2(0x573)](_0x400fb8):_0x400fb8,_0x429997=_0x9ab967+':\x20'+_0x317744;throw this['logger'][_0x2b8af2(0x47a)](this[_0x2b8af2(0x616)]+'\x20('+this[_0x2b8af2(0x568)][_0x2b8af2(0x72d)]+_0x2b8af2(0x6c0)+_0x429997),new m(_0x429997);}}async[a0_0x4bc873(0x2b4)](_0x29474f){const _0x56d6c5=a0_0x4bc873;try{if(this['logger'][_0x56d6c5(0x377)](this[_0x56d6c5(0x616)]+'\x20('+this[_0x56d6c5(0x568)]['wuid']+_0x56d6c5(0x29e)),!_0x29474f[_0x56d6c5(0x618)]||!_0x29474f[_0x56d6c5(0x88d)])throw new Error(_0x56d6c5(0x512));let _0x2c3002=_0x29474f['_id'],_0x43944b=_0x29474f['messages'],_0x3e7756=_0x43944b[_0x56d6c5(0x411)](_0x3c92c4=>!_0x3c92c4[_0x56d6c5(0x4a8)])[_0x56d6c5(0x347)](_0x422537=>{const _0x5368bf=_0x56d6c5;let _0x3558d8=_0x422537[_0x5368bf(0x618)];if(!_0x3558d8)throw new Error(_0x5368bf(0x3a3));return _0x422537[_0x5368bf(0x73b)]||(_0x422537[_0x5368bf(0x73b)]=_0x2c3002),delete _0x422537[_0x5368bf(0x21f)],{'updateOne':{'filter':{'_id':_0x2c3002,'messages._id':_0x3558d8},'update':{'$set':{'messages.$[elem]':_0x422537}},'arrayFilters':[{'elem._id':_0x3558d8}]}};}),_0x23ecf5=_0x43944b[_0x56d6c5(0x411)](_0x1e67e0=>_0x1e67e0[_0x56d6c5(0x4a8)])[_0x56d6c5(0x347)](_0x14c339=>{let _0x4789e4=_0x14c339['_id'];if(!_0x4789e4)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20excluso.');return{'updateOne':{'filter':{'_id':_0x2c3002},'update':{'$pull':{'messages':{'_id':_0x4789e4}}}}};}),_0x5e75f6=[..._0x3e7756,..._0x23ecf5],_0x5b020c=await this[_0x56d6c5(0x6c6)][_0x56d6c5(0x922)]['bulkWrite'](_0x5e75f6,this['instance'][_0x56d6c5(0x72d)]),_0x1c46be=await this[_0x56d6c5(0x6c6)][_0x56d6c5(0x922)]['findById'](_0x2c3002,this[_0x56d6c5(0x568)][_0x56d6c5(0x72d)]);return _0x1c46be&&(this['reorderMessages'](_0x1c46be[_0x56d6c5(0x88d)]),await this['repository']['scheduleMessage'][_0x56d6c5(0x201)](_0x1c46be['_id'],{'$set':{'messages':_0x1c46be[_0x56d6c5(0x88d)]}},this[_0x56d6c5(0x568)][_0x56d6c5(0x72d)])),_0x1c46be;}catch(_0x201646){let _0x19ea52=_0x56d6c5(0x2b9),_0x4b5b53=_0x201646 instanceof Error?_0x201646[_0x56d6c5(0x805)]:typeof _0x201646==_0x56d6c5(0x801)?JSON[_0x56d6c5(0x573)](_0x201646):_0x201646,_0xa9a62b=_0x19ea52+':\x20'+_0x4b5b53;throw this[_0x56d6c5(0x563)][_0x56d6c5(0x47a)](this[_0x56d6c5(0x616)]+'\x20('+this[_0x56d6c5(0x568)][_0x56d6c5(0x72d)]+_0x56d6c5(0x6c0)+_0xa9a62b),new m(_0xa9a62b);}}async[a0_0x4bc873(0x367)](){const _0xb4f9f7=a0_0x4bc873;try{let _0xb6a06e={'status':_0xb4f9f7(0x8e2)},_0x35c4ff=await this[_0xb4f9f7(0x6c6)][_0xb4f9f7(0x922)]['deleteMany'](_0xb6a06e,this['instance'][_0xb4f9f7(0x72d)]);if(!_0x35c4ff[_0xb4f9f7(0x47a)])this['logger'][_0xb4f9f7(0x377)](this[_0xb4f9f7(0x616)]+'\x20('+this[_0xb4f9f7(0x568)][_0xb4f9f7(0x72d)]+_0xb4f9f7(0x8b8));else throw new Error(_0x35c4ff[_0xb4f9f7(0x47a)][_0xb4f9f7(0x805)]||_0xb4f9f7(0x222));return this[_0xb4f9f7(0x451)]();}catch(_0x4d43e5){let _0x40a6e0=_0xb4f9f7(0x5b4),_0x3db597=_0x4d43e5 instanceof Error?_0x4d43e5[_0xb4f9f7(0x805)]:typeof _0x4d43e5==_0xb4f9f7(0x801)?JSON[_0xb4f9f7(0x573)](_0x4d43e5):_0x4d43e5,_0x3d7127=_0x40a6e0+':\x20'+_0x3db597;throw this[_0xb4f9f7(0x563)][_0xb4f9f7(0x47a)](this['instanceName']+'\x20('+this['instance'][_0xb4f9f7(0x72d)]+'):\x20'+_0x3d7127),new m(_0x3d7127);}}async[a0_0x4bc873(0x451)](){const _0x50c086=a0_0x4bc873;try{return await this[_0x50c086(0x6c6)][_0x50c086(0x922)][_0x50c086(0x8aa)]({'where':{}},this[_0x50c086(0x568)][_0x50c086(0x72d)]);}catch(_0x139fd9){let _0xcbf63e=_0x50c086(0x781),_0x2785c4=_0x139fd9 instanceof Error?_0x139fd9[_0x50c086(0x805)]:typeof _0x139fd9==_0x50c086(0x801)?JSON['stringify'](_0x139fd9):_0x139fd9,_0x5655de=_0xcbf63e+':\x20'+_0x2785c4;throw this[_0x50c086(0x563)][_0x50c086(0x47a)](this[_0x50c086(0x616)]+'\x20('+this[_0x50c086(0x568)][_0x50c086(0x72d)]+_0x50c086(0x6c0)+_0x5655de),new m(_0x5655de);}}['reorderMessages'](_0x416080){const _0x5b96fa=a0_0x4bc873;_0x416080[_0x5b96fa(0x32e)]((_0x4d1951,_0x215532)=>_0x4d1951[_0x5b96fa(0x268)]-_0x215532[_0x5b96fa(0x268)]),_0x416080[_0x5b96fa(0x426)]((_0x13436e,_0x328688)=>{const _0x5cb85a=_0x5b96fa;_0x13436e[_0x5cb85a(0x268)]=_0x328688+0x1;});}async[a0_0x4bc873(0x7cc)](_0x186b95,_0x495568){const _0x508946=a0_0x4bc873;try{if(!_0x495568)return this[_0x508946(0x563)]['error'](this[_0x508946(0x616)]+'\x20('+this[_0x508946(0x568)][_0x508946(0x72d)]+'):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio'),{'error':!0x0,'detail':_0x508946(0x8b5)};if(_0x495568['type']===_0x508946(0x20f)&&!this[_0x508946(0x5a5)]?.['flowConfig'][_0x508946(0x896)])return this[_0x508946(0x563)][_0x508946(0x47a)](this[_0x508946(0x616)]+'\x20('+this[_0x508946(0x568)][_0x508946(0x72d)]+_0x508946(0x214)),{'error':!0x0,'detail':_0x508946(0x46a)};switch(_0x495568[_0x508946(0x8c8)]){case _0x508946(0x23c):return await this['scheduleSendText'](_0x495568,_0x186b95);case _0x508946(0x721):case _0x508946(0x8ed):case _0x508946(0x8df):return await this['scheduleSendMedia'](_0x495568,_0x186b95);case _0x508946(0x77a):return await this[_0x508946(0x5f8)](_0x495568,_0x186b95);case'flow':let _0x17a668=new We();return _0x17a668['name']=_0x495568[_0x508946(0x20f)],_0x17a668[_0x508946(0x8d4)]=_0x186b95,await this[_0x508946(0x690)](_0x17a668);default:return this[_0x508946(0x563)]['error'](this[_0x508946(0x616)]+'\x20('+this[_0x508946(0x568)]['wuid']+_0x508946(0x55c)+_0x495568[_0x508946(0x8c8)]),{'error':!0x0,'detail':_0x508946(0x1e2)};}}catch(_0x55236e){return this[_0x508946(0x563)]['error'](this[_0x508946(0x616)]+'\x20('+this['instance'][_0x508946(0x72d)]+_0x508946(0x7a2)+(_0x55236e instanceof Error?_0x55236e[_0x508946(0x805)]:JSON[_0x508946(0x573)](_0x55236e,null,0x2))),{'error':!0x0,'detail':_0x55236e[_0x508946(0x805)]};}}async['scheduleSendText'](_0x37f82e,_0x59bcf9){const _0x48295f=a0_0x4bc873;if(this[_0x48295f(0x563)][_0x48295f(0x377)](this[_0x48295f(0x616)]+'\x20('+this[_0x48295f(0x568)][_0x48295f(0x72d)]+'):\x20\x27Enviando\x20texto\x20para\x20\x27'+_0x59bcf9+'\x27'),!_0x37f82e['text']||_0x37f82e[_0x48295f(0x23c)][_0x48295f(0x825)]===0x0)return{'error':!0x0,'detail':_0x48295f(0x845)};let _0x503d5a=await this[_0x48295f(0x4ab)](_0x37f82e['text'],_0x59bcf9),_0x343a77={'number':_0x59bcf9,'options':{'delay':_0x37f82e[_0x48295f(0x3c9)],'linkPreview':_0x37f82e[_0x48295f(0x875)]},'textMessage':{'text':_0x503d5a}},_0x256b09=null;try{let _0x1152ec=await this[_0x48295f(0x7a0)](_0x343a77);if(_0x1152ec&&_0x1152ec[_0x48295f(0x4ed)])return{'error':!0x1,'id':_0x1152ec[_0x48295f(0x678)]['id']};_0x256b09=JSON['stringify'](_0x1152ec),this[_0x48295f(0x563)][_0x48295f(0x377)](this[_0x48295f(0x616)]+'\x20('+this[_0x48295f(0x568)][_0x48295f(0x72d)]+_0x48295f(0x6c0)+_0x256b09);}catch(_0xf45963){this['logger'][_0x48295f(0x47a)](this['instanceName']+'\x20('+this[_0x48295f(0x568)]['wuid']+_0x48295f(0x35d)+(_0xf45963 instanceof Error?_0xf45963[_0x48295f(0x805)]:JSON['stringify'](_0xf45963,null,0x2))),_0x256b09=_0xf45963[_0x48295f(0x805)];}if(_0x256b09)return{'error':!0x0,'detail':(typeof _0x256b09==_0x48295f(0x801)?JSON[_0x48295f(0x573)](_0x256b09,null,0x2):_0x256b09)['replace'](/[\[\]{}\n]/g,'\x20')[_0x48295f(0x242)](/  +/g,'\x20')};}async[a0_0x4bc873(0x941)](_0x48420e,_0x2d3e69){const _0xf69ddd=a0_0x4bc873;this[_0xf69ddd(0x563)]['verbose'](this[_0xf69ddd(0x616)]+'\x20('+this[_0xf69ddd(0x568)][_0xf69ddd(0x72d)]+_0xf69ddd(0x320)+_0x2d3e69+'\x27');let _0x1271cc;_0x48420e[_0xf69ddd(0x23c)]&&_0x48420e['text']['length']>0x0&&(_0x1271cc=await this[_0xf69ddd(0x4ab)](_0x48420e[_0xf69ddd(0x23c)],_0x2d3e69));let _0x546ab5={'number':_0x2d3e69,'options':{'delay':_0x48420e[_0xf69ddd(0x3c9)],'linkPreview':_0x48420e[_0xf69ddd(0x875)]},'mediaMessage':{'mediatype':_0x48420e[_0xf69ddd(0x8c8)],'caption':_0x1271cc,'media':_0x48420e[_0xf69ddd(0x491)]}},_0x1dfd77=null;try{let _0x199a49=await this['mediaMessage'](_0x546ab5);if(_0x199a49&&_0x199a49['status'])return{'error':!0x1,'id':_0x199a49['key']['id']};_0x1dfd77=JSON[_0xf69ddd(0x573)](_0x199a49),this[_0xf69ddd(0x563)][_0xf69ddd(0x377)](this[_0xf69ddd(0x616)]+'\x20('+this[_0xf69ddd(0x568)][_0xf69ddd(0x72d)]+'):\x20'+_0x1dfd77);}catch(_0x1afbc3){this[_0xf69ddd(0x563)]['error'](this[_0xf69ddd(0x616)]+'\x20('+this[_0xf69ddd(0x568)][_0xf69ddd(0x72d)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20'+(_0x1afbc3 instanceof Error?_0x1afbc3[_0xf69ddd(0x805)]:JSON['stringify'](_0x1afbc3,null,0x2))),_0x1dfd77=_0x1afbc3[_0xf69ddd(0x805)];}if(_0x1dfd77)return{'error':!0x0,'detail':(typeof _0x1dfd77==_0xf69ddd(0x801)?JSON[_0xf69ddd(0x573)](_0x1dfd77,null,0x2):_0x1dfd77)[_0xf69ddd(0x242)](/[\[\]{}\n]/g,'\x20')[_0xf69ddd(0x242)](/  +/g,'\x20')};}async[a0_0x4bc873(0x5f8)](_0x445203,_0x1964d7){const _0x49d2f1=a0_0x4bc873;this['logger'][_0x49d2f1(0x377)](this['instanceName']+'\x20('+this['instance'][_0x49d2f1(0x72d)]+'):\x20\x27Enviando\x20audio\x20para\x20\x27'+_0x1964d7+'\x27');let _0x4c2a52={'number':_0x1964d7,'options':{'delay':_0x445203['delay']},'audioMessage':{'audio':_0x445203['urlOrBase64']}},_0x57fbfc=null;try{let _0x360ff0=await this['audioWhatsapp'](_0x4c2a52);if(_0x360ff0&&_0x360ff0['status'])return{'error':!0x1,'id':_0x360ff0[_0x49d2f1(0x678)]['id']};_0x57fbfc=JSON['stringify'](_0x360ff0),this[_0x49d2f1(0x563)]['verbose'](this[_0x49d2f1(0x616)]+'\x20('+this[_0x49d2f1(0x568)][_0x49d2f1(0x72d)]+_0x49d2f1(0x6c0)+_0x57fbfc);}catch(_0x52f465){this['logger'][_0x49d2f1(0x47a)](this['instanceName']+'\x20('+this[_0x49d2f1(0x568)][_0x49d2f1(0x72d)]+_0x49d2f1(0x61a)+(_0x52f465 instanceof Error?_0x52f465[_0x49d2f1(0x805)]:JSON[_0x49d2f1(0x573)](_0x52f465,null,0x2))),_0x57fbfc=_0x52f465[_0x49d2f1(0x805)];}if(_0x57fbfc)return{'error':!0x0,'detail':(typeof _0x57fbfc==_0x49d2f1(0x801)?JSON[_0x49d2f1(0x573)](_0x57fbfc,null,0x2):_0x57fbfc)[_0x49d2f1(0x242)](/[\[\]{}\n]/g,'\x20')[_0x49d2f1(0x242)](/  +/g,'\x20')};}async['groupDesc'](_0x4ea4d4){const _0x5369e2=a0_0x4bc873;try{return await this['client']['groupUpdateDescription'](_0x4ea4d4[_0x5369e2(0x31d)],_0x4ea4d4[_0x5369e2(0x2e5)]),{'update':_0x5369e2(0x22b)};}catch(_0x5195c3){let _0x58019e=_0x5369e2(0x644),_0x1514fe=_0x5195c3 instanceof Error?_0x5195c3[_0x5369e2(0x805)]:typeof _0x5195c3=='object'?JSON['stringify'](_0x5195c3):_0x5195c3,_0x5690ed=_0x58019e+':\x20'+_0x1514fe;throw this[_0x5369e2(0x563)]['error'](this[_0x5369e2(0x616)]+'\x20('+this[_0x5369e2(0x568)][_0x5369e2(0x72d)]+_0x5369e2(0x6c0)+_0x5690ed),new x(_0x5690ed);}}async[a0_0x4bc873(0x6c2)](_0x374034){const _0xdfa2fc=a0_0x4bc873;try{return await this[_0xdfa2fc(0x877)][_0xdfa2fc(0x794)](_0x374034['groupJid'],_0x374034[_0xdfa2fc(0x60f)]),{'update':_0xdfa2fc(0x22b)};}catch(_0xd4b789){let _0x8d466e=_0xdfa2fc(0x423),_0x53d0ef=_0xd4b789 instanceof Error?_0xd4b789['message']:typeof _0xd4b789=='object'?JSON[_0xdfa2fc(0x573)](_0xd4b789):_0xd4b789,_0xa5de52=_0x8d466e+':\x20'+_0x53d0ef;throw this[_0xdfa2fc(0x563)][_0xdfa2fc(0x47a)](this[_0xdfa2fc(0x616)]+'\x20('+this[_0xdfa2fc(0x568)][_0xdfa2fc(0x72d)]+'):\x20'+_0xa5de52),new x(_0xa5de52);}}async[a0_0x4bc873(0x8de)](_0x49f6c5){const _0x2975de=a0_0x4bc873;try{let _0x57b007=await this['client'][_0x2975de(0x7d6)](_0x49f6c5[_0x2975de(0x31d)],_0x49f6c5[_0x2975de(0x270)]);return{'success':!0x0};}catch(_0x4a52b7){let _0x18d361=_0x2975de(0x707),_0x37ff29=_0x4a52b7 instanceof Error?_0x4a52b7[_0x2975de(0x805)]:typeof _0x4a52b7==_0x2975de(0x801)?JSON['stringify'](_0x4a52b7):_0x4a52b7,_0x9052a8=_0x18d361+':\x20'+_0x37ff29;throw this[_0x2975de(0x563)]['error'](this[_0x2975de(0x616)]+'\x20('+this[_0x2975de(0x568)][_0x2975de(0x72d)]+_0x2975de(0x6c0)+_0x9052a8),new x(_0x9052a8);}}async['groupSetting'](_0x3f8db3){const _0x14d44d=a0_0x4bc873;try{return await this[_0x14d44d(0x877)]['groupSettingUpdate'](_0x3f8db3[_0x14d44d(0x31d)],_0x3f8db3[_0x14d44d(0x8f0)]),{'update':_0x14d44d(0x22b)};}catch(_0x1ec6d8){let _0x1aeb48=_0x14d44d(0x265),_0x3025b2=_0x1ec6d8 instanceof Error?_0x1ec6d8[_0x14d44d(0x805)]:typeof _0x1ec6d8=='object'?JSON[_0x14d44d(0x573)](_0x1ec6d8):_0x1ec6d8,_0x4cf8b7=_0x1aeb48+':\x20'+_0x3025b2;throw this[_0x14d44d(0x563)][_0x14d44d(0x47a)](this[_0x14d44d(0x616)]+'\x20('+this[_0x14d44d(0x568)][_0x14d44d(0x72d)]+_0x14d44d(0x6c0)+_0x4cf8b7),new x(_0x4cf8b7);}}async[a0_0x4bc873(0x3e9)](_0x3f6ef1){const _0x174da3=a0_0x4bc873;try{let _0x54a14e;if((0x0,J[_0x174da3(0x5a7)])(_0x3f6ef1[_0x174da3(0x8ed)])){let _0xff6cf8=new Date()['getTime'](),_0x58c884=_0x3f6ef1[_0x174da3(0x8ed)]+_0x174da3(0x73f)+_0xff6cf8;_0x54a14e=(await Q[_0x174da3(0x323)][_0x174da3(0x62f)](_0x58c884,{'responseType':_0x174da3(0x6a6)}))[_0x174da3(0x301)];}else{if((0x0,J[_0x174da3(0x6cd)])(_0x3f6ef1[_0x174da3(0x8ed)]))_0x54a14e=Buffer[_0x174da3(0x25a)](_0x3f6ef1[_0x174da3(0x8ed)],_0x174da3(0x663));else throw new m(_0x174da3(0x7a1));}return await this['client'][_0x174da3(0x4ac)](_0x3f6ef1['groupJid'],_0x54a14e),{'update':_0x174da3(0x22b)};}catch(_0x78992d){let _0x377e0d='Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGroupPicture',_0x1c7c37=_0x78992d instanceof Error?_0x78992d['message']:typeof _0x78992d==_0x174da3(0x801)?JSON[_0x174da3(0x573)](_0x78992d):_0x78992d,_0x5fee9a=_0x377e0d+':\x20'+_0x1c7c37;throw this[_0x174da3(0x563)][_0x174da3(0x47a)](this[_0x174da3(0x616)]+'\x20('+this[_0x174da3(0x568)][_0x174da3(0x72d)]+_0x174da3(0x6c0)+_0x5fee9a),new x(_0x5fee9a);}}},jt=class u{constructor(_0x43ed2f,_0x181aa2,_0x4f1b74){const _0x419044=a0_0x4bc873;this[_0x419044(0x8e5)]=_0x43ed2f,this['configService']=_0x181aa2,this[_0x419044(0x6c6)]=_0x4f1b74,this['db']={},this[_0x419044(0x587)]={},this[_0x419044(0x563)]=new $(u[_0x419044(0x60f)]),this[_0x419044(0x7d7)]={},(this['removeInstance'](),this[_0x419044(0x4d3)](),Object[_0x419044(0x310)](this['db'],_0x181aa2[_0x419044(0x62f)](_0x419044(0x5b9))),Object[_0x419044(0x310)](this[_0x419044(0x587)],_0x181aa2[_0x419044(0x62f)](_0x419044(0x8b7))),this[_0x419044(0x339)]=this['db'][_0x419044(0x8f9)]?this[_0x419044(0x6c6)][_0x419044(0x8d9)]?.['db'](this['db'][_0x419044(0x867)][_0x419044(0x577)]+_0x419044(0x6e5)):void 0x0,this['cache']=this[_0x419044(0x587)][_0x419044(0x8f9)]?new pe(this[_0x419044(0x587)]):void 0x0);}async[a0_0x4bc873(0x58b)](_0x23f00d){const _0x7476c6=a0_0x4bc873;if(_0x23f00d&&!this[_0x7476c6(0x7d7)][_0x23f00d])throw new U(_0x7476c6(0x81e)+_0x23f00d+_0x7476c6(0x401));let _0x1eaa9a=[];for await(let [_0x27e7ee,_0x1eed13]of Object[_0x7476c6(0x52e)](this[_0x7476c6(0x7d7)]))if(_0x1eed13&&_0x1eed13[_0x7476c6(0x7c3)][_0x7476c6(0x552)]===_0x7476c6(0x808)){let _0x171afa=await this['repository'][_0x7476c6(0x4a9)][_0x7476c6(0x8aa)](_0x27e7ee);_0x1eaa9a[_0x7476c6(0x7f1)]({'instance':{'instanceName':_0x27e7ee,'apikey':_0x171afa[_0x7476c6(0x393)],'owner':_0x1eed13['wuid'],'profileName':await _0x1eed13[_0x7476c6(0x41f)]()||'not\x20loaded','profilePictureUrl':_0x1eed13[_0x7476c6(0x72a)]}});}return _0x1eaa9a[_0x7476c6(0x8aa)](_0x27c67e=>_0x27c67e[_0x7476c6(0x568)][_0x7476c6(0x616)]===_0x23f00d)??_0x1eaa9a;}async[a0_0x4bc873(0x532)](_0x44b6b6){const _0x1738b3=a0_0x4bc873;if(this['db'][_0x1738b3(0x8f9)]&&(await this['repository'][_0x1738b3(0x8d9)]['connect'](),(await this[_0x1738b3(0x339)][_0x1738b3(0x43d)]())[_0x1738b3(0x825)]>0x0&&await this[_0x1738b3(0x339)][_0x1738b3(0x851)](_0x44b6b6)),this['redis'][_0x1738b3(0x8f9)]){this['cache']['reference']=_0x44b6b6,await this[_0x1738b3(0x24f)]['delAll']();return;}}async['loadInstance'](){const _0x473ef7=a0_0x4bc873;await this['InstancesAlterarTodas']();let _0xe55b90=async _0x4e3eb6=>{const _0x2ff20b=a0_0x59bb;let _0x190c6d=new $e(this[_0x2ff20b(0x251)],this[_0x2ff20b(0x8e5)],this['repository']);_0x190c6d[_0x2ff20b(0x616)]=_0x4e3eb6,await _0x190c6d[_0x2ff20b(0x3d3)](),this[_0x2ff20b(0x7d7)][_0x4e3eb6]=_0x190c6d;};try{if(this[_0x473ef7(0x587)][_0x473ef7(0x8f9)]){let _0x3230b3=await this[_0x473ef7(0x24f)][_0x473ef7(0x3f2)]();_0x3230b3?.[_0x473ef7(0x825)]>0x0&&_0x3230b3[_0x473ef7(0x426)](async _0x489847=>await _0xe55b90(_0x489847[_0x473ef7(0x51b)](':')[0x1]));return;}if(this['db'][_0x473ef7(0x8f9)]){await this[_0x473ef7(0x6c6)]['dbServer'][_0x473ef7(0x23e)]();let _0x3d2cd1=await this[_0x473ef7(0x339)][_0x473ef7(0x43d)]();_0x3d2cd1[_0x473ef7(0x825)]>0x0&&_0x3d2cd1[_0x473ef7(0x426)](async _0xbd87b8=>await _0xe55b90(_0xbd87b8[_0x473ef7(0x7fa)]['replace'](/^[\w-]+\./,'')));return;}}catch(_0x40dec1){this['logger'][_0x473ef7(0x47a)](_0x40dec1);}}async[a0_0x4bc873(0x2b8)](){const _0x41cf68=a0_0x4bc873;try{let _0x12cf3b=await this[_0x41cf68(0x6c6)][_0x41cf68(0x4a9)][_0x41cf68(0x2de)]({'online':!0x1});for(let _0x3bde91 of _0x12cf3b){let _0x11bb51=_0x3bde91['_id'];await ae[_0x41cf68(0x43b)](B,_0x11bb51);}console[_0x41cf68(0x6d2)]('Instncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20'+_0x12cf3b[_0x41cf68(0x825)]);let _0x5d92c8={'online':!0x1},_0x50d619=await this[_0x41cf68(0x6c6)]['auth'][_0x41cf68(0x612)](_0x5d92c8);console[_0x41cf68(0x6d2)]('Instncias\x20removidas:\x20'+_0x50d619[_0x41cf68(0x86f)]);}catch(_0x264570){console['error'](_0x41cf68(0x604),_0x264570);}}async[a0_0x4bc873(0x3e6)](){const _0x5f3eaf=a0_0x4bc873;try{let _0x26100c={'online':!0x1},_0x55285e={'online':!0x1,'lastDisconnect':Date[_0x5f3eaf(0x3bd)]()},_0x1d7390=await this[_0x5f3eaf(0x6c6)][_0x5f3eaf(0x4a9)][_0x5f3eaf(0x5e7)](_0x26100c,_0x55285e);await this[_0x5f3eaf(0x2b8)]();}catch(_0x691beb){console[_0x5f3eaf(0x47a)]('Erro\x20ao\x20definir\x20instncias\x20como\x20desconectadas:',_0x691beb);}}[a0_0x4bc873(0x34e)](){const _0x3c991f=a0_0x4bc873;this[_0x3c991f(0x8e5)]['on']('remove.instance',async _0x1b8fb4=>{const _0x1e3d1f=_0x3c991f;try{this[_0x1e3d1f(0x7d7)][_0x1b8fb4]=void 0x0;}catch{}try{this[_0x1e3d1f(0x532)](_0x1b8fb4);}finally{this['logger'][_0x1e3d1f(0x5b6)](_0x1e3d1f(0x81e)+_0x1b8fb4+_0x1e3d1f(0x93f));}});}[a0_0x4bc873(0x4d3)](){const _0xc03402=a0_0x4bc873;this[_0xc03402(0x8e5)]['on'](_0xc03402(0x6ce),async _0x399f31=>{const _0x41f861=_0xc03402;try{this[_0x41f861(0x7d7)][_0x399f31]=void 0x0;}catch{}try{this['cleaningUp'](_0x399f31);}finally{this[_0x41f861(0x563)][_0x41f861(0x5b6)](_0x41f861(0x81e)+_0x399f31+_0x41f861(0x546));}});}},Jt=class extends _{[a0_0x4bc873(0x349)](_0x41119e){return ta(_0x41119e);}async['insert'](_0x4c5cc0){const _0x42e960=a0_0x4bc873;if(_0x4c5cc0[_0x42e960(0x825)]!==0x0)try{return{'insertCount':(await this[_0x42e960(0x349)](_0x4c5cc0[0x0][_0x42e960(0x6dd)])[_0x42e960(0x7f9)]([..._0x4c5cc0]))[_0x42e960(0x825)]};}catch(_0x2ab6af){return _0x2ab6af;}}async[a0_0x4bc873(0x8aa)](_0x50d7a9,_0xaf907a){const _0x5166f4=a0_0x4bc873;try{let _0x5a1b7a=this['getChatModelForOwner'](_0xaf907a),_0x2dae6a=A(_0x50d7a9[_0x5166f4(0x797)]);return await _0x5a1b7a[_0x5166f4(0x8aa)](_0x2dae6a)[_0x5166f4(0x32e)]({'lastmsg':-0x1})[_0x5166f4(0x903)](_0x50d7a9?.[_0x5166f4(0x903)]??0x0)[_0x5166f4(0x439)]();}catch{return[];}}async[a0_0x4bc873(0x3af)](_0x539451,_0x5ab784){const _0x508351=a0_0x4bc873;try{let _0x1b94a2=this[_0x508351(0x349)](_0x5ab784),_0x376612=A(_0x539451[_0x508351(0x797)]);return _0x376612['groupdata.participants']={'$ne':[]},await _0x1b94a2[_0x508351(0x8aa)](_0x376612)[_0x508351(0x32e)]({'lastmsg':-0x1})['limit'](_0x539451?.[_0x508351(0x903)]??0x0)[_0x508351(0x439)]();}catch{return[];}}async[a0_0x4bc873(0x4a8)](_0x1531cc,_0x56c36d){const _0x478d9c=a0_0x4bc873;try{return{'deletedCount':(await this[_0x478d9c(0x349)](_0x56c36d)[_0x478d9c(0x612)]({..._0x1531cc[_0x478d9c(0x797)]}))[_0x478d9c(0x44f)]};}catch(_0x24ef43){return{'error':_0x24ef43?.[_0x478d9c(0x529)]()};}}async[a0_0x4bc873(0x665)](_0x214b8d,_0x4c2577){const _0x21254=a0_0x4bc873;try{return await this[_0x21254(0x349)](_0x4c2577)[_0x21254(0x612)]({..._0x214b8d[_0x21254(0x797)]}),[];}catch(_0x430ea6){return{'error':_0x430ea6?.[_0x21254(0x529)]()};}}async[a0_0x4bc873(0x6e7)](_0x2ee76a,_0x3f6974){const _0x30917d=a0_0x4bc873;try{let _0x402370=this[_0x30917d(0x349)](_0x3f6974),_0x398849=A(_0x2ee76a[_0x30917d(0x797)]);return await _0x402370[_0x30917d(0x6e7)](_0x398849)[_0x30917d(0x439)]();}catch{return null;}}async['updateOne'](_0x210248,_0x2b3cbe,_0x3cbb48,_0x50484f,_0x176b5f=a0_0x4bc873(0x8e9)){const _0x5a43f7=a0_0x4bc873;try{let _0x4594c9={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x50484f},_0x12841f=this[_0x5a43f7(0x349)](_0x3cbb48),_0x3d1f97=A(_0x210248['where']);Object['keys'](_0x2b3cbe)[_0x5a43f7(0x426)](_0x5ac6ed=>{_0x2b3cbe[_0x5ac6ed]==null&&delete _0x2b3cbe[_0x5ac6ed];});let _0x46f537={};return _0x46f537[_0x176b5f]=_0x2b3cbe,await _0x12841f[_0x5a43f7(0x39d)](_0x3d1f97,_0x46f537,_0x4594c9);}catch(_0x1a40b6){return console[_0x5a43f7(0x47a)](_0x1a40b6),null;}}async[a0_0x4bc873(0x418)](_0x2dcea3){const _0x5cfa7c=a0_0x4bc873;try{let _0x4d4e7a=this[_0x5cfa7c(0x349)](_0x2dcea3[0x0][_0x5cfa7c(0x2a0)][_0x5cfa7c(0x797)]['owner']),_0x5d5606=_0x2dcea3[_0x5cfa7c(0x347)](_0xdc3add=>({'updateOne':{'filter':{..._0xdc3add['query'][_0x5cfa7c(0x797)]},'update':{'$set':_0xdc3add[_0x5cfa7c(0x275)]},'upsert':!0x0}})),_0x3e05c9=await _0x4d4e7a['bulkWrite'](_0x5d5606);return _0x3e05c9[_0x5cfa7c(0x624)]+_0x3e05c9[_0x5cfa7c(0x8e8)];}catch(_0x34d208){return console[_0x5cfa7c(0x47a)](_0x34d208),0x0;}}async[a0_0x4bc873(0x7fc)](_0x346866){const _0x3a70e2=a0_0x4bc873;try{let _0x4e2164={'group_isCommunity':'','group_announce':'','group_size':''},_0x547599={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x5979ed={'$unset':_0x4e2164};return(await this[_0x3a70e2(0x349)](_0x346866)[_0x3a70e2(0x418)](_0x547599,_0x5979ed))[_0x3a70e2(0x624)];}catch(_0xb77bb2){return console[_0x3a70e2(0x47a)](_0x3a70e2(0x39e),_0xb77bb2),0x0;}}async['updateMissingEtiquetas'](_0x218b4c){const _0x99e627=a0_0x4bc873;try{let _0x125392=this[_0x99e627(0x349)](_0x218b4c),_0x306b95={'leadInfo.etiquetas':{'$exists':!0x1}},_0x323cfa={'$set':{'leadInfo.etiquetas':[]}};return(await _0x125392['updateMany'](_0x306b95,_0x323cfa))['modifiedCount'];}catch(_0x1c3737){return console['error'](_0x1c3737),0x0;}}async['updateMissingTags'](_0x1fd91f){const _0x4693d4=a0_0x4bc873;try{let _0x409e23=this[_0x4693d4(0x349)](_0x1fd91f),_0x27efaf={'leadInfo.tags':{'$exists':!0x1}},_0x2de959={'$set':{'leadInfo.tags':[]}};return(await _0x409e23[_0x4693d4(0x418)](_0x27efaf,_0x2de959))[_0x4693d4(0x624)];}catch(_0x2d33d1){return console['error'](_0x2d33d1),0x0;}}async['updateMissingCustomFields'](_0x5eebdb){const _0x409443=a0_0x4bc873;try{let _0x38cf34=this[_0x409443(0x349)](_0x5eebdb),_0x49bed6={'leadInfo.customFields':{'$exists':!0x1}},_0x4fea31={'$set':{'leadInfo.customFields':[]}};return(await _0x38cf34[_0x409443(0x418)](_0x49bed6,_0x4fea31))[_0x409443(0x624)];}catch(_0x39f541){return console[_0x409443(0x47a)](_0x39f541),0x0;}}async['insertMany'](_0x176040,_0x4413f3){const _0x19881e=a0_0x4bc873;if(!Array[_0x19881e(0x719)](_0x176040)||_0x176040[_0x19881e(0x825)]===0x0)throw new Error('Nenhum\x20chat\x20fornecido\x20para\x20insero.');try{return(await this[_0x19881e(0x349)](_0x4413f3)[_0x19881e(0x7f9)](_0x176040))[_0x19881e(0x825)];}catch(_0x29e9ce){throw console[_0x19881e(0x47a)](_0x19881e(0x2e6),_0x29e9ce),_0x29e9ce;}}async['deleteChat'](_0x157e5c,_0x32515c){const _0x14fefa=a0_0x4bc873;try{await this['getChatModelForOwner'](_0x32515c)['deleteOne']({'_id':_0x157e5c});}catch(_0x105b9c){throw console[_0x14fefa(0x47a)]('Erro\x20ao\x20deletar\x20chat:',_0x105b9c),_0x105b9c;}}},qt=class extends _{constructor(_0xfc6a89,_0x496f52,_0x1c1697){const _0x11b221=a0_0x4bc873;super(_0x496f52),this[_0x11b221(0x3cc)]=_0xfc6a89,this[_0x11b221(0x251)]=_0x496f52,this[_0x11b221(0x684)]=_0x1c1697;}async['insert'](_0x4b0eef){const _0x352eba=a0_0x4bc873;if(_0x4b0eef['length']!==0x0)try{return{'insertCount':(await this[_0x352eba(0x3cc)]['insertMany']([..._0x4b0eef]))[_0x352eba(0x825)]};}catch(_0x24db0d){return _0x24db0d;}}async[a0_0x4bc873(0x275)](_0x58ce6c,_0x5b0716){const _0x75eaf2=a0_0x4bc873;try{let _0x5f7608=A(_0x58ce6c[_0x75eaf2(0x797)]);return{'updatedCount':(await this[_0x75eaf2(0x3cc)][_0x75eaf2(0x418)](_0x5f7608,{'$set':_0x5b0716}))[_0x75eaf2(0x624)]};}catch(_0x27a9b8){return console[_0x75eaf2(0x47a)](_0x75eaf2(0x7ad),_0x27a9b8),{'error':_0x27a9b8[_0x75eaf2(0x529)]()};}}async[a0_0x4bc873(0x854)](_0x55d895){const _0x4755ae=a0_0x4bc873;try{let _0x718047={'_id':{'$in':_0x55d895}};return await this[_0x4755ae(0x3cc)][_0x4755ae(0x8aa)](_0x718047)[_0x4755ae(0x439)]();}catch(_0x28030d){return console[_0x4755ae(0x47a)](_0x4755ae(0x8c0),_0x28030d),[];}}async['delete'](_0x3c125d){const _0xd08d24=a0_0x4bc873;try{return{'deletedCount':(await this[_0xd08d24(0x3cc)][_0xd08d24(0x612)]({..._0x3c125d[_0xd08d24(0x797)]}))[_0xd08d24(0x44f)]};}catch(_0x33bd71){return{'error':_0x33bd71?.[_0xd08d24(0x529)]()};}}async[a0_0x4bc873(0x8aa)](_0x549503){const _0x389e0f=a0_0x4bc873;try{let _0xedbfe1=A(_0x549503[_0x389e0f(0x797)]);return await this[_0x389e0f(0x3cc)][_0x389e0f(0x8aa)](_0xedbfe1)['limit'](_0x549503?.[_0x389e0f(0x903)]??0x0)[_0x389e0f(0x439)]();}catch{return[];}}async[a0_0x4bc873(0x6e7)](_0x1546ea){const _0x187e34=a0_0x4bc873;try{let _0x5d1988=A(_0x1546ea[_0x187e34(0x797)]);return await this['cacheContactModel'][_0x187e34(0x6e7)](_0x5d1988)[_0x187e34(0x439)]();}catch{return null;}}},Vt=class extends _{constructor(_0x4b2107,_0x1289d3,_0xfa610f){const _0x508c83=a0_0x4bc873;super(_0x1289d3),this[_0x508c83(0x4f6)]=_0x4b2107,this['configService']=_0x1289d3,this[_0x508c83(0x684)]=_0xfa610f;}async[a0_0x4bc873(0x246)](_0x577be5){const _0x4fb947=a0_0x4bc873;if(_0x577be5[_0x4fb947(0x825)]!==0x0)try{return{'insertCount':(await this['messageLogsModel']['insertMany']([..._0x577be5]))[_0x4fb947(0x825)]};}catch(_0x508a16){return _0x508a16;}}async['update'](_0x301670,_0x1539da){const _0x1a04c3=a0_0x4bc873;try{let _0x52276f=A(_0x301670[_0x1a04c3(0x797)]);return{'updatedCount':(await this['messageLogsModel']['updateMany'](_0x52276f,{'$set':_0x1539da}))['modifiedCount']};}catch(_0x4ab0ed){return console['error'](_0x1a04c3(0x7ad),_0x4ab0ed),{'error':_0x4ab0ed[_0x1a04c3(0x529)]()};}}async[a0_0x4bc873(0x4a8)](_0x25fdbb){const _0x82e88b=a0_0x4bc873;try{return{'deletedCount':(await this[_0x82e88b(0x4f6)]['deleteMany']({..._0x25fdbb['where']}))[_0x82e88b(0x44f)]};}catch(_0x3142a1){return{'error':_0x3142a1?.[_0x82e88b(0x529)]()};}}async[a0_0x4bc873(0x6e7)](_0x1ff2ce){const _0x180676=a0_0x4bc873;try{let _0x3f3084=A(_0x1ff2ce[_0x180676(0x797)]);return await this[_0x180676(0x4f6)][_0x180676(0x6e7)](_0x3f3084)['lean']();}catch{return null;}}},Gt=class extends _{[a0_0x4bc873(0x784)](_0x2bfbe2){return Ea(_0x2bfbe2);}async['updateOne'](_0x52968a,_0x2cf6f3,_0x222a07,_0x39d30e){const _0x114458=a0_0x4bc873;try{let _0x14cbb9={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x39d30e},_0x589cc0=this[_0x114458(0x784)](_0x222a07),_0x4a0333=A(_0x52968a[_0x114458(0x797)]);return await _0x589cc0[_0x114458(0x39d)](_0x4a0333,{'$set':_0x2cf6f3},_0x14cbb9);}catch(_0xe36b6b){return console[_0x114458(0x47a)](_0xe36b6b),null;}}async['find'](_0x29a65f,_0x1af3a9){const _0x43253d=a0_0x4bc873;try{let _0x145aec=this[_0x43253d(0x784)](_0x1af3a9),_0x1d4e44=A(_0x29a65f[_0x43253d(0x797)]);return await _0x145aec[_0x43253d(0x8aa)](_0x1d4e44);}catch(_0xebce70){console[_0x43253d(0x47a)](_0xebce70);}}async[a0_0x4bc873(0x4a8)](_0x539d6c,_0xe3cc55){const _0x4484fe=a0_0x4bc873;try{let _0x48e2bc=this[_0x4484fe(0x784)](_0xe3cc55),_0x459d2d=A(_0x539d6c[_0x4484fe(0x797)]);await _0x48e2bc['deleteMany'](_0x459d2d);}catch(_0x266640){console[_0x4484fe(0x47a)](_0x266640);}}async[a0_0x4bc873(0x665)](_0x38e984){const _0x5aafb1=a0_0x4bc873;try{return await this[_0x5aafb1(0x784)](_0x38e984)[_0x5aafb1(0x2a6)]['drop'](),{'success':!0x0};}catch(_0x56cb8a){return console[_0x5aafb1(0x47a)](_0x56cb8a),{'success':!0x1,'error':_0x56cb8a};}}},Bt=class{constructor(_0x56c25b){const _0x8b8d7=a0_0x4bc873;this[_0x8b8d7(0x62b)]=_0x56c25b;}async['editChat']({instanceName:_0x4d3c15},_0x2b865c){const _0x3c2d31=a0_0x4bc873;return await this[_0x3c2d31(0x62b)][_0x3c2d31(0x7d7)][_0x4d3c15]['editChat'](_0x2b865c);}async[a0_0x4bc873(0x71c)]({instanceName:_0x4423c3},_0xb7f142){const _0x2283dd=a0_0x4bc873;return await this[_0x2283dd(0x62b)]['waInstances'][_0x4423c3][_0x2283dd(0x71c)](_0xb7f142);}async[a0_0x4bc873(0x584)]({instanceName:_0x158b25},_0x4463f7){const _0x4cbc7c=a0_0x4bc873;return await this[_0x4cbc7c(0x62b)][_0x4cbc7c(0x7d7)][_0x158b25][_0x4cbc7c(0x584)](_0x4463f7);}async['readMessage']({instanceName:_0x5b944e},_0x2c0f4b){const _0x2ae8eb=a0_0x4bc873;return await this[_0x2ae8eb(0x62b)]['waInstances'][_0x5b944e]['markMessageAsRead'](_0x2c0f4b);}async[a0_0x4bc873(0x8fd)]({instanceName:_0x18dd24},_0x1cc573){const _0x14d023=a0_0x4bc873;return await this['waMonitor'][_0x14d023(0x7d7)][_0x18dd24]['archiveChat'](_0x1cc573);}async['deleteMessage']({instanceName:_0x11278b},_0x210b08){const _0x1bf3d2=a0_0x4bc873;return await this[_0x1bf3d2(0x62b)][_0x1bf3d2(0x7d7)][_0x11278b][_0x1bf3d2(0x556)](_0x210b08);}async['fetchProfilePicture']({instanceName:_0x3cbede},_0x168543){const _0x55cb32=a0_0x4bc873;return await this[_0x55cb32(0x62b)][_0x55cb32(0x7d7)][_0x3cbede]['profilePicture'](_0x168543[_0x55cb32(0x8e3)]);}async['fetchProfile']({instanceName:_0x4bef2f},_0x2c79d6){const _0x5a9f39=a0_0x4bc873;return await this[_0x5a9f39(0x62b)][_0x5a9f39(0x7d7)][_0x4bef2f][_0x5a9f39(0x5e1)](_0x2c79d6[_0x5a9f39(0x8e3)]);}async['updatePresence']({instanceName:_0x455352},_0x5efb7c){const _0x43aebe=a0_0x4bc873;return await this[_0x43aebe(0x62b)][_0x43aebe(0x7d7)][_0x455352][_0x43aebe(0x27d)](_0x5efb7c);}async[a0_0x4bc873(0x3f5)]({instanceName:_0x486c32},_0x3ad1e1){const _0x56c38e=a0_0x4bc873;return await this['waMonitor'][_0x56c38e(0x7d7)][_0x486c32][_0x56c38e(0x3f5)](_0x3ad1e1);}async[a0_0x4bc873(0x28d)]({instanceName:_0x431d38},_0x2f8188){const _0x6d289c=a0_0x4bc873;return await this['waMonitor']['waInstances'][_0x431d38][_0x6d289c(0x28d)](_0x2f8188);}async['fetchMessages']({instanceName:_0xb0ef3b},_0x26fe41){const _0x1b2e8a=a0_0x4bc873;return await this[_0x1b2e8a(0x62b)][_0x1b2e8a(0x7d7)][_0xb0ef3b]['fetchMessages'](_0x26fe41);}async[a0_0x4bc873(0x7b3)]({instanceName:_0xbf5442}){const _0x219c52=a0_0x4bc873;return await this[_0x219c52(0x62b)][_0x219c52(0x7d7)][_0xbf5442]['fetchLabels']();}async[a0_0x4bc873(0x7f2)]({instanceName:_0x52b58f}){const _0x119792=a0_0x4bc873;return await this[_0x119792(0x62b)][_0x119792(0x7d7)][_0x52b58f][_0x119792(0x7f2)]();}async[a0_0x4bc873(0x69f)]({instanceName:_0x2ccd20}){const _0x267a1e=a0_0x4bc873;return await this[_0x267a1e(0x62b)]['waInstances'][_0x2ccd20][_0x267a1e(0x69f)]();}async['updatePrivacySettings']({instanceName:_0x50070c},_0x565bfa){const _0x1879e8=a0_0x4bc873;return await this[_0x1879e8(0x62b)][_0x1879e8(0x7d7)][_0x50070c][_0x1879e8(0x75b)](_0x565bfa);}async[a0_0x4bc873(0x508)]({instanceName:_0x21dcee},_0x1e7cd3){const _0x582a4d=a0_0x4bc873;return await this['waMonitor']['waInstances'][_0x21dcee][_0x582a4d(0x508)](_0x1e7cd3['number']);}async['updateProfileName']({instanceName:_0x248468},_0x3cacbb){const _0x4e35df=a0_0x4bc873;return await this[_0x4e35df(0x62b)][_0x4e35df(0x7d7)][_0x248468][_0x4e35df(0x2a2)](_0x3cacbb['name']);}async[a0_0x4bc873(0x823)]({instanceName:_0x4d04c3},_0x51bc69){const _0x223a8c=a0_0x4bc873;return await this[_0x223a8c(0x62b)][_0x223a8c(0x7d7)][_0x4d04c3][_0x223a8c(0x823)](_0x51bc69[_0x223a8c(0x4ed)]);}async[a0_0x4bc873(0x4ac)]({instanceName:_0x4dff2b},_0x17e2e4){return await this['waMonitor']['waInstances'][_0x4dff2b]['updateProfilePicture'](_0x17e2e4['picture']);}async[a0_0x4bc873(0x56a)]({instanceName:_0x5413a3},_0xe076e1){const _0x3bbeac=a0_0x4bc873;return await this[_0x3bbeac(0x62b)][_0x3bbeac(0x7d7)][_0x5413a3][_0x3bbeac(0x56a)]();}},Wt=require(a0_0x4bc873(0x8d6)),zt=class u{constructor(_0x3d8a99,_0x348f7a,_0x15125f,_0x1d50b8,_0x4a8565){const _0x530a30=a0_0x4bc873;this[_0x530a30(0x62b)]=_0x3d8a99,this[_0x530a30(0x251)]=_0x348f7a,this[_0x530a30(0x6c6)]=_0x15125f,this[_0x530a30(0x8e5)]=_0x1d50b8,this['authService']=_0x4a8565,this[_0x530a30(0x563)]=new $(u[_0x530a30(0x60f)]);}async[a0_0x4bc873(0x8d5)]({instanceName:_0x32ae0c,apikey:_0x5ec69f,number:_0x2fd6a3,proxy:_0x8583c6=!0x0}){const _0xd1ad1=a0_0x4bc873;try{let _0x13e869=new $e(this[_0xd1ad1(0x251)],this['eventEmitter'],this[_0xd1ad1(0x6c6)]);_0x13e869[_0xd1ad1(0x616)]=_0x32ae0c,this[_0xd1ad1(0x62b)][_0xd1ad1(0x7d7)][_0x13e869[_0xd1ad1(0x616)]]=_0x13e869;let _0x27ceeb={};_0x5ec69f?(await this[_0xd1ad1(0x6c6)][_0xd1ad1(0x4a9)]['create']({'apikey':_0x5ec69f},_0x32ae0c),_0x27ceeb[_0xd1ad1(0x393)]=_0x5ec69f):_0x27ceeb=await this[_0xd1ad1(0x50d)][_0xd1ad1(0x834)]({'instanceName':_0x13e869['instanceName']});let _0x5917d0;if(_0x2fd6a3){if(_0x5917d0=await this['verifyWhatsAppNumber'](_0x2fd6a3),_0x5917d0[_0xd1ad1(0x47a)])throw new x(_0x5917d0[_0xd1ad1(0x47a)]['toString']());_0x2fd6a3=_0x5917d0[_0xd1ad1(0x8e3)];}let _0x478a88;return await _0x13e869[_0xd1ad1(0x3d3)](_0x2fd6a3),await(0x0,Wt['delay'])(0xfa0),_0x2fd6a3&&await(0x0,Wt[_0xd1ad1(0x3c9)])(0xbb8),_0x478a88=_0x13e869['qrCode'],{'instance':{'instanceName':_0x13e869[_0xd1ad1(0x616)],'status':'created'},'hash':_0x27ceeb,'qrcode':_0x478a88};}catch(_0x4677d5){throw this['logger'][_0xd1ad1(0x47a)](_0x4677d5),_0x4677d5;}}async[a0_0x4bc873(0x90f)]({instanceName:_0xcdfac1,number:_0x1461db=null}){const _0x27a398=a0_0x4bc873;try{let _0x45b8f4=this[_0x27a398(0x62b)][_0x27a398(0x7d7)][_0xcdfac1];switch(_0x45b8f4?.[_0x27a398(0x7c3)]?.[_0x27a398(0x552)]){case _0x27a398(0x526):return await _0x45b8f4[_0x27a398(0x3d3)](_0x1461db),await(0x0,Wt[_0x27a398(0x3c9)])(0x7d0),_0x45b8f4['qrCode'];case'connecting':return _0x45b8f4['qrCode'];default:return await this[_0x27a398(0x5a9)]({'instanceName':_0xcdfac1});}}catch(_0x567fbd){this[_0x27a398(0x563)][_0x27a398(0x6d2)](_0x567fbd);}}async[a0_0x4bc873(0x5a9)]({instanceName:_0x1ad56b}){const _0x31b8f2=a0_0x4bc873;let _0x249f56=this[_0x31b8f2(0x62b)][_0x31b8f2(0x7d7)][_0x1ad56b][_0x31b8f2(0x7c3)],_0x10e750=null;_0x249f56[_0x31b8f2(0x552)]===_0x31b8f2(0x808)&&_0x1ad56b&&(_0x10e750=await this[_0x31b8f2(0x62b)][_0x31b8f2(0x58b)](_0x1ad56b));let _0x1997da=null;return _0x249f56['state']==='connecting'&&_0x1ad56b&&(_0x1997da=this[_0x31b8f2(0x62b)][_0x31b8f2(0x7d7)][_0x1ad56b][_0x31b8f2(0x520)]),{'instance':_0x1ad56b,'connectionStatus':_0x249f56,'instanceInfo':_0x10e750,'qrcode':_0x1997da};}async[a0_0x4bc873(0x2a7)](_0x864e87){const _0x4c65ed=a0_0x4bc873;_0x864e87=_0x864e87[_0x4c65ed(0x242)](/\D/g,'');let _0x4ca899=Object[_0x4c65ed(0x419)](this[_0x4c65ed(0x62b)][_0x4c65ed(0x7d7)])[_0x4c65ed(0x411)](_0x43ff4a=>{const _0x17d7cb=_0x4c65ed;let _0x10575b=this['waMonitor'][_0x17d7cb(0x7d7)][_0x43ff4a];return _0x10575b&&_0x10575b['connectionStatus']&&_0x10575b['connectionStatus'][_0x17d7cb(0x552)]==='open';});if(_0x4ca899[_0x4c65ed(0x825)]===0x0)return{'number':this[_0x4c65ed(0x802)](_0x864e87)};let _0x50ce54=Math[_0x4c65ed(0x70a)](Math[_0x4c65ed(0x748)]()*_0x4ca899[_0x4c65ed(0x825)]),_0x4692c9=_0x4ca899[_0x50ce54];try{let _0x33c83b=(await this[_0x4c65ed(0x62b)]['waInstances'][_0x4692c9]['whatsappNumber']({'numbers':[_0x864e87]}))[_0x4c65ed(0x457)]();return _0x33c83b[_0x4c65ed(0x6d7)]?{'number':_0x33c83b['jid'][_0x4c65ed(0x242)]('@s.whatsapp.net','')}:{'number':_0x864e87,'error':'Nmero\x20no\x20possui\x20WhatsApp.'};}catch(_0x3dffca){return this[_0x4c65ed(0x563)][_0x4c65ed(0x47a)]('Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp:'+_0x3dffca),{'number':_0x864e87,'error':_0x4c65ed(0x205)};}}[a0_0x4bc873(0x802)](_0xb92fd2){let _0x2340aa=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0xb92fd2);if(_0x2340aa&&_0x2340aa[0x1]==='55'){let _0x55da36=_0x2340aa[0x2],_0x5f4ce1=_0x2340aa[0x3],_0x2da28e=_0x2340aa[0x4];if(parseInt(_0x55da36)>=0x1f&&_0x5f4ce1==='9')return _0x2340aa[0x1]+_0x55da36+_0x2da28e;}return _0xb92fd2;}async[a0_0x4bc873(0x436)]({instanceName:_0xdcec99}){const _0x432a2e=a0_0x4bc873;try{return this[_0x432a2e(0x62b)]['waInstances'][_0xdcec99]?.['client']?.['ws']?.[_0x432a2e(0x526)](),{'status':_0x432a2e(0x33c),'error':!0x1,'response':{'message':_0x432a2e(0x397)}};}catch(_0x15f089){this['logger'][_0x432a2e(0x47a)](_0x15f089);}}async[a0_0x4bc873(0x509)]({instanceName:_0x3488c0}){const _0x165a85=a0_0x4bc873;return _0x3488c0?this[_0x165a85(0x62b)][_0x165a85(0x58b)](_0x3488c0):this[_0x165a85(0x62b)][_0x165a85(0x58b)]();}async[a0_0x4bc873(0x93d)]({instanceName:_0x200153}){const _0x553891=a0_0x4bc873;try{return await this[_0x553891(0x62b)][_0x553891(0x7d7)][_0x200153]?.[_0x553891(0x877)]?.[_0x553891(0x93d)](_0x553891(0x49b)+_0x200153),{'error':!0x1,'message':_0x553891(0x6ab)};}catch(_0xfa8743){throw new x(_0xfa8743[_0x553891(0x529)]());}}async[a0_0x4bc873(0x59c)]({instanceName:_0x546f19}){const _0x52e212=a0_0x4bc873;if((await this[_0x52e212(0x5a9)]({'instanceName':_0x546f19}))[_0x52e212(0x7c3)][_0x52e212(0x552)]===_0x52e212(0x808))throw new m([_0x52e212(0x413),_0x52e212(0x8ae)]);try{return delete this[_0x52e212(0x62b)][_0x52e212(0x7d7)][_0x546f19],{'error':!0x1,'message':'Instance\x20deleted'};}catch(_0x44f81d){throw new m(_0x44f81d[_0x52e212(0x529)]());}}},ce=require(a0_0x4bc873(0x383)),Ht=class{constructor(_0x3af9de){const _0x16f871=a0_0x4bc873;this[_0x16f871(0x62b)]=_0x3af9de;}async['sendText']({instanceName:_0x472248},_0x17ef2b){const _0x246efc=a0_0x4bc873;return await this[_0x246efc(0x62b)]['waInstances'][_0x472248]['textMessage'](_0x17ef2b);}async[a0_0x4bc873(0x6c4)]({instanceName:_0x593ec0},_0x2e96dd){const _0x45a823=a0_0x4bc873;return await this[_0x45a823(0x62b)][_0x45a823(0x7d7)][_0x593ec0][_0x45a823(0x299)](_0x2e96dd);}async[a0_0x4bc873(0x46d)]({instanceName:_0x1bc6d5},_0xea97af){const _0x3df35f=a0_0x4bc873;if((0x0,ce[_0x3df35f(0x6cd)])(_0xea97af?.[_0x3df35f(0x817)]?.[_0x3df35f(0x8c3)])&&!_0xea97af?.[_0x3df35f(0x817)]?.['fileName'])throw new m(_0x3df35f(0x925));if((0x0,ce['isURL'])(_0xea97af?.[_0x3df35f(0x817)]?.[_0x3df35f(0x8c3)])||(0x0,ce[_0x3df35f(0x6cd)])(_0xea97af?.[_0x3df35f(0x817)]?.[_0x3df35f(0x8c3)]))return await this[_0x3df35f(0x62b)][_0x3df35f(0x7d7)][_0x1bc6d5][_0x3df35f(0x817)](_0xea97af);throw new m(_0x3df35f(0x365));}async['sendSticker']({instanceName:_0x247fa1},_0x2dbda7){const _0xc5817d=a0_0x4bc873;if((0x0,ce['isURL'])(_0x2dbda7[_0xc5817d(0x49a)]['image'])||(0x0,ce[_0xc5817d(0x6cd)])(_0x2dbda7[_0xc5817d(0x49a)][_0xc5817d(0x8ed)]))return await this[_0xc5817d(0x62b)][_0xc5817d(0x7d7)][_0x247fa1][_0xc5817d(0x6d5)](_0x2dbda7);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x4bc873(0x857)]({instanceName:_0x416e31},_0x3266b0){const _0x1fd0ce=a0_0x4bc873;if((0x0,ce['isURL'])(_0x3266b0[_0x1fd0ce(0x93e)]['audio'])||(0x0,ce[_0x1fd0ce(0x6cd)])(_0x3266b0[_0x1fd0ce(0x93e)][_0x1fd0ce(0x77a)]))return await this['waMonitor'][_0x1fd0ce(0x7d7)][_0x416e31][_0x1fd0ce(0x4d9)](_0x3266b0);throw new m(_0x1fd0ce(0x365));}async[a0_0x4bc873(0x8be)]({instanceName:_0x26bbed},_0x1f96fb){const _0x1f25d3=a0_0x4bc873;return await this[_0x1f25d3(0x62b)]['waInstances'][_0x26bbed][_0x1f25d3(0x710)](_0x1f96fb);}async[a0_0x4bc873(0x655)]({instanceName:_0x50a019},_0x25d395){const _0x5ddfb3=a0_0x4bc873;return await this[_0x5ddfb3(0x62b)][_0x5ddfb3(0x7d7)][_0x50a019]['locationMessage'](_0x25d395);}async[a0_0x4bc873(0x850)]({instanceName:_0x1a9454},_0x473b0e){const _0x29c686=a0_0x4bc873;return await this[_0x29c686(0x62b)][_0x29c686(0x7d7)][_0x1a9454]['pollMessage'](_0x473b0e);}async[a0_0x4bc873(0x7f6)]({instanceName:_0x472750},_0x204b10){const _0x2ce147=a0_0x4bc873;return await this['waMonitor'][_0x2ce147(0x7d7)][_0x472750]['listMessage'](_0x204b10);}async[a0_0x4bc873(0x838)]({instanceName:_0x53e15f},_0x2d9249){const _0x353229=a0_0x4bc873;return await this['waMonitor']['waInstances'][_0x53e15f][_0x353229(0x688)](_0x2d9249);}async[a0_0x4bc873(0x34c)]({instanceName:_0x315293},_0x4bfb70){const _0x1b66bb=a0_0x4bc873;if(!_0x4bfb70['reactionMessage'][_0x1b66bb(0x8ba)][_0x1b66bb(0x60b)](/[^\(\)\w\s-"-\+]+/))throw new m(_0x1b66bb(0x8ff));return await this[_0x1b66bb(0x62b)][_0x1b66bb(0x7d7)][_0x315293][_0x1b66bb(0x7f8)](_0x4bfb70);}async['sendStatus']({instanceName:_0x50e44c},_0x1b3956){const _0x485216=a0_0x4bc873;return await this[_0x485216(0x62b)][_0x485216(0x7d7)][_0x50e44c][_0x485216(0x910)](_0x1b3956);}},Pi=require('jsonwebtoken'),Us=require(a0_0x4bc873(0x787)),Kt=class u{constructor(_0x766b66,_0x30cde7,_0x4041b7){const _0x2405cc=a0_0x4bc873;this[_0x2405cc(0x251)]=_0x766b66,this[_0x2405cc(0x62b)]=_0x30cde7,this[_0x2405cc(0x6c6)]=_0x4041b7,this['logger']=new $(u[_0x2405cc(0x60f)]);}async[a0_0x4bc873(0x283)](_0x507822){const _0x27a15a=a0_0x4bc873;let _0x17a57c=this[_0x27a15a(0x251)]['get'](_0x27a15a(0x66f))[_0x27a15a(0x71b)],_0x310d6d=(0x0,Pi[_0x27a15a(0x1ee)])({'instanceName':_0x507822['instanceName'],'apiName':it,'tokenId':(0x0,Us['v4'])()},_0x17a57c[_0x27a15a(0x7ef)],{'expiresIn':_0x17a57c[_0x27a15a(0x285)],'encoding':'utf8','subject':'g-t'}),_0x5e3b45=await this['repository'][_0x27a15a(0x4a9)][_0x27a15a(0x75f)]({'jwt':_0x310d6d},_0x507822[_0x27a15a(0x616)]);if(_0x5e3b45[_0x27a15a(0x47a)])throw this[_0x27a15a(0x563)][_0x27a15a(0x47a)]({'localError':u[_0x27a15a(0x60f)]+_0x27a15a(0x680),'error':_0x5e3b45[_0x27a15a(0x47a)]}),new m(_0x27a15a(0x3b7),_0x5e3b45['error']?.[_0x27a15a(0x529)]());return{'jwt':_0x310d6d};}async[a0_0x4bc873(0x393)](_0x1837b1){const _0x250564=a0_0x4bc873;let _0x4b72a6=(0x0,Us['v4'])()[_0x250564(0x212)](),_0x52ef22=await this[_0x250564(0x6c6)]['auth'][_0x250564(0x75f)]({'apikey':_0x4b72a6},_0x1837b1[_0x250564(0x616)]);if(_0x52ef22['error'])throw this['logger'][_0x250564(0x47a)]({'localError':u[_0x250564(0x60f)]+_0x250564(0x680),'error':_0x52ef22[_0x250564(0x47a)]}),new m('Authentication\x20error',_0x52ef22[_0x250564(0x47a)]?.[_0x250564(0x529)]());return{'apikey':_0x4b72a6};}async['generateHash'](_0x39586f){const _0x322ffe=a0_0x4bc873;let _0x402b2b=this[_0x322ffe(0x251)][_0x322ffe(0x62f)]('AUTHENTICATION');return await this[_0x402b2b[_0x322ffe(0x7de)]](_0x39586f);}},Qt=class{constructor(_0x42465f){const _0x12582b=a0_0x4bc873;this[_0x12582b(0x62b)]=_0x42465f;}async[a0_0x4bc873(0x4d8)](_0x260043,_0x5e9eff){const _0x598743=a0_0x4bc873;return await this[_0x598743(0x62b)][_0x598743(0x7d7)][_0x260043[_0x598743(0x616)]][_0x598743(0x4d8)](_0x5e9eff);}async[a0_0x4bc873(0x3e9)](_0x26174e,_0x523044){const _0x3718ec=a0_0x4bc873;return await this[_0x3718ec(0x62b)][_0x3718ec(0x7d7)][_0x26174e[_0x3718ec(0x616)]][_0x3718ec(0x3e9)](_0x523044);}async['groupDesc'](_0x3fc39b,_0x239027){const _0x1d3d89=a0_0x4bc873;return await this[_0x1d3d89(0x62b)][_0x1d3d89(0x7d7)][_0x3fc39b['instanceName']]['groupDesc'](_0x239027);}async[a0_0x4bc873(0x6c2)](_0x1c30b2,_0x1eb947){const _0x10cd21=a0_0x4bc873;return await this[_0x10cd21(0x62b)]['waInstances'][_0x1c30b2[_0x10cd21(0x616)]]['groupName'](_0x1eb947);}async[a0_0x4bc873(0x28e)](_0x488c53,_0xbb85f5){const _0x3ea29a=a0_0x4bc873;return await this['waMonitor']['waInstances'][_0x488c53[_0x3ea29a(0x616)]][_0x3ea29a(0x28e)](_0xbb85f5);}async['groupSetting'](_0x467762,_0x1e55bd){const _0x12b927=a0_0x4bc873;return await this['waMonitor']['waInstances'][_0x467762[_0x12b927(0x616)]][_0x12b927(0x5e8)](_0x1e55bd);}async[a0_0x4bc873(0x7ab)](_0x578282,_0x41444e){const _0x260670=a0_0x4bc873;return await this[_0x260670(0x62b)][_0x260670(0x7d7)][_0x578282[_0x260670(0x616)]][_0x260670(0x874)](_0x41444e);}async[a0_0x4bc873(0x352)](_0x4c89df){const _0x3d856a=a0_0x4bc873;return await this[_0x3d856a(0x62b)][_0x3d856a(0x7d7)][_0x4c89df[_0x3d856a(0x616)]]['findGroups']();}async[a0_0x4bc873(0x6fc)](_0x73731d,_0x4c35eb){const _0x1a9de=a0_0x4bc873;return await this[_0x1a9de(0x62b)][_0x1a9de(0x7d7)][_0x73731d['instanceName']][_0x1a9de(0x6fc)](_0x4c35eb);}async[a0_0x4bc873(0x498)](_0x21ef1e,_0xf18063){const _0x6ce356=a0_0x4bc873;return await this[_0x6ce356(0x62b)][_0x6ce356(0x7d7)][_0x21ef1e[_0x6ce356(0x616)]]['joinGroup'](_0xf18063);}async[a0_0x4bc873(0x85b)](_0x456493,_0x1684a0){const _0x3b7c17=a0_0x4bc873;return await this['waMonitor'][_0x3b7c17(0x7d7)][_0x456493[_0x3b7c17(0x616)]]['groupGetInviteInfo'](_0x1684a0);}async[a0_0x4bc873(0x1fd)](_0x2f6ed1,_0x5141e5){const _0x1fd58a=a0_0x4bc873;return await this[_0x1fd58a(0x62b)][_0x1fd58a(0x7d7)][_0x2f6ed1[_0x1fd58a(0x616)]][_0x1fd58a(0x1fd)](_0x5141e5);}async[a0_0x4bc873(0x42d)](_0x404e28,_0x3147fc){const _0x1a88f0=a0_0x4bc873;return await this[_0x1a88f0(0x62b)][_0x1a88f0(0x7d7)][_0x404e28['instanceName']][_0x1a88f0(0x42d)](_0x3147fc);}async[a0_0x4bc873(0x425)](_0x221132,_0x3a4ad7){const _0x2d84f8=a0_0x4bc873;return await this[_0x2d84f8(0x62b)][_0x2d84f8(0x7d7)][_0x221132[_0x2d84f8(0x616)]][_0x2d84f8(0x424)](_0x3a4ad7);}async['toggleEphemeral'](_0x40d011,_0x4a77eb){const _0x4c71be=a0_0x4bc873;return await this[_0x4c71be(0x62b)]['waInstances'][_0x40d011[_0x4c71be(0x616)]][_0x4c71be(0x8de)](_0x4a77eb);}async[a0_0x4bc873(0x57c)](_0x579e61,_0x2e7b19){const _0x32a3c2=a0_0x4bc873;return await this[_0x32a3c2(0x62b)]['waInstances'][_0x579e61['instanceName']][_0x32a3c2(0x57c)](_0x2e7b19);}},Yt=class{constructor(_0x2923f5){const _0x4a2ba3=a0_0x4bc873;this[_0x4a2ba3(0x62b)]=_0x2923f5;}[a0_0x4bc873(0x75f)](_0x1a0899,_0x295d99){const _0x1b9dd4=a0_0x4bc873;return this[_0x1b9dd4(0x62b)][_0x1b9dd4(0x7d7)][_0x1a0899[_0x1b9dd4(0x616)]][_0x1b9dd4(0x93b)](_0x295d99);}async[a0_0x4bc873(0x8aa)](_0x1a406f){const _0x67f9c8=a0_0x4bc873;try{return await this[_0x67f9c8(0x62b)]['waInstances'][_0x1a406f[_0x67f9c8(0x616)]][_0x67f9c8(0x733)]();}catch{return{'enabled':null,'url':''};}}},nh=new $('FlowController'),Xt=class{constructor(_0x2f1e36){this['waMonitor']=_0x2f1e36;}async[a0_0x4bc873(0x8db)](_0x1b18a5,_0x3fe7cd){const _0x40a731=a0_0x4bc873;return await this[_0x40a731(0x62b)][_0x40a731(0x7d7)][_0x1b18a5[_0x40a731(0x616)]]['editScheduleMessage'](_0x3fe7cd);}async['getScheduleMessage'](_0x26a17d){const _0x95ef27=a0_0x4bc873;return await this[_0x95ef27(0x62b)][_0x95ef27(0x7d7)][_0x26a17d[_0x95ef27(0x616)]][_0x95ef27(0x451)]();}async[a0_0x4bc873(0x367)](_0x29e261){const _0x1570e5=a0_0x4bc873;return await this['waMonitor'][_0x1570e5(0x7d7)][_0x29e261['instanceName']][_0x1570e5(0x367)]();}async[a0_0x4bc873(0x209)](_0x18d1fd){const _0x1f8e53=a0_0x4bc873;return await this['waMonitor'][_0x1f8e53(0x7d7)][_0x18d1fd[_0x1f8e53(0x616)]][_0x1f8e53(0x209)]();}async['updateAgent'](_0x2f2f2d,_0x257a1e){const _0x14a244=a0_0x4bc873;return await this['waMonitor'][_0x14a244(0x7d7)][_0x2f2f2d[_0x14a244(0x616)]][_0x14a244(0x244)](_0x257a1e);}async[a0_0x4bc873(0x720)](_0x2b1ec9,_0x44b3ad){const _0xf08829=a0_0x4bc873;return await this['waMonitor'][_0xf08829(0x7d7)][_0x2b1ec9[_0xf08829(0x616)]]['updateCustomFields'](_0x44b3ad);}async['updateAutoCompleteMessages'](_0x1a8a17,_0xabb406){const _0xc065a2=a0_0x4bc873;return await this[_0xc065a2(0x62b)][_0xc065a2(0x7d7)][_0x1a8a17[_0xc065a2(0x616)]][_0xc065a2(0x695)](_0xabb406);}async[a0_0x4bc873(0x908)](_0x818574,_0x2a334a){const _0x5c8514=a0_0x4bc873;return await this[_0x5c8514(0x62b)][_0x5c8514(0x7d7)][_0x818574['instanceName']]['updateFlowConfig'](_0x2a334a);}async[a0_0x4bc873(0x690)](_0x3134a9,_0x2094af){const _0x1e6e2b=a0_0x4bc873;return await this[_0x1e6e2b(0x62b)][_0x1e6e2b(0x7d7)][_0x3134a9['instanceName']][_0x1e6e2b(0x690)](_0x2094af);}async['startFlowWebhook'](_0x1e54cd,_0x343ea6,_0x5916c6,_0xb0146c){const _0x4c2f38=a0_0x4bc873;return await this['waMonitor'][_0x4c2f38(0x7d7)][_0x1e54cd]['startFlowWebhook'](_0x343ea6,_0x5916c6,_0xb0146c);}async[a0_0x4bc873(0x3be)](_0x4e5a8c,_0x6de85f){const _0x417ff7=a0_0x4bc873;return await this[_0x417ff7(0x62b)][_0x417ff7(0x7d7)][_0x4e5a8c[_0x417ff7(0x616)]]['getConversation'](_0x6de85f);}async[a0_0x4bc873(0x31f)](_0x76eba1,_0x26c03f){const _0x2a52ed=a0_0x4bc873;return await this[_0x2a52ed(0x62b)][_0x2a52ed(0x7d7)][_0x76eba1['instanceName']]['fetchConversation'](_0x26c03f);}async[a0_0x4bc873(0x452)](_0x46f9ce,_0x415e84){const _0x589421=a0_0x4bc873;return await this['waMonitor'][_0x589421(0x7d7)][_0x46f9ce[_0x589421(0x616)]][_0x589421(0x452)](_0x415e84);}async[a0_0x4bc873(0x321)](_0x83e84f,_0x123e15){const _0x4547d6=a0_0x4bc873;return await this[_0x4547d6(0x62b)][_0x4547d6(0x7d7)][_0x83e84f['instanceName']][_0x4547d6(0x321)](_0x123e15);}async['getFlow'](_0x531eb8,_0x1ef890){const _0x433da4=a0_0x4bc873;return await this['waMonitor'][_0x433da4(0x7d7)][_0x531eb8['instanceName']]['getFlow'](_0x1ef890[_0x433da4(0x618)]);}async[a0_0x4bc873(0x368)](_0x264c28,_0x216b22,_0x7f7a55){const _0x15934e=a0_0x4bc873;return await this[_0x15934e(0x62b)][_0x15934e(0x7d7)][_0x264c28[_0x15934e(0x616)]][_0x15934e(0x368)](_0x216b22,_0x7f7a55);}async[a0_0x4bc873(0x384)](_0x5a73b3,_0x459a53,_0x3b8314){const _0x51c0c5=a0_0x4bc873;return await this[_0x51c0c5(0x62b)][_0x51c0c5(0x7d7)][_0x5a73b3['instanceName']][_0x51c0c5(0x384)](_0x459a53,_0x3b8314);}async[a0_0x4bc873(0x6df)](_0x205d12,_0x323789){const _0x56ba11=a0_0x4bc873;return await this[_0x56ba11(0x62b)]['waInstances'][_0x205d12['instanceName']][_0x56ba11(0x6df)](_0x323789);}async[a0_0x4bc873(0x1e9)](_0x46034f,_0x468de4){const _0x24ec82=a0_0x4bc873;return await this['waMonitor'][_0x24ec82(0x7d7)][_0x46034f[_0x24ec82(0x616)]][_0x24ec82(0x1e9)](_0x468de4);}async[a0_0x4bc873(0x6ea)](_0x210514,_0x2c8eca){const _0x3c4c9a=a0_0x4bc873;return await this[_0x3c4c9a(0x62b)][_0x3c4c9a(0x7d7)][_0x210514['instanceName']][_0x3c4c9a(0x6ea)](_0x2c8eca);}async[a0_0x4bc873(0x1e4)](_0x5b4353,_0x41da56){const _0x2aa4d1=a0_0x4bc873;return await this[_0x2aa4d1(0x62b)][_0x2aa4d1(0x7d7)][_0x5b4353[_0x2aa4d1(0x616)]][_0x2aa4d1(0x1e4)](_0x41da56);}async[a0_0x4bc873(0x24c)](_0x1a1a60,_0x2f6075){const _0x38df18=a0_0x4bc873;return await this['waMonitor']['waInstances'][_0x1a1a60['instanceName']][_0x38df18(0x24c)](_0x2f6075);}async[a0_0x4bc873(0x3bc)](_0x42cf45,_0x35b119){const _0x461912=a0_0x4bc873;return await this[_0x461912(0x62b)][_0x461912(0x7d7)][_0x42cf45[_0x461912(0x616)]]['editFlowVariable'](_0x35b119);}async[a0_0x4bc873(0x421)](_0x55b734,_0x35afdf){const _0x5378ac=a0_0x4bc873;return await this['waMonitor'][_0x5378ac(0x7d7)][_0x55b734[_0x5378ac(0x616)]][_0x5378ac(0x421)](_0x35afdf);}async[a0_0x4bc873(0x7af)](_0x53f137){const _0x2802e1=a0_0x4bc873;return await this['waMonitor'][_0x2802e1(0x7d7)][_0x53f137[_0x2802e1(0x616)]][_0x2802e1(0x7af)]();}},Zt=class{constructor(_0x82b3f6){const _0x4a6000=a0_0x4bc873;this[_0x4a6000(0x76b)]=_0x82b3f6;}async[a0_0x4bc873(0x52f)](_0x2f2360,_0x2e4170){const _0x29db27=a0_0x4bc873;return this['webhookService'][_0x29db27(0x75f)](_0x2f2360,_0x2e4170);}async['findWebhook'](_0x4e0290){const _0xeff086=a0_0x4bc873;return this[_0xeff086(0x76b)]['find'](_0x4e0290);}},es=class extends _{constructor(_0x410fa6,_0x12ac1c){const _0xc73b24=a0_0x4bc873;super(_0x12ac1c),this[_0xc73b24(0x33e)]=_0x410fa6,this['configService']=_0x12ac1c;}async[a0_0x4bc873(0x75f)](_0x40bc82,_0x24925c){const _0x36eb8a=a0_0x4bc873;try{return this[_0x36eb8a(0x4ca)][_0x36eb8a(0x8f9)]?{'insertCount':(await this['webhookModel'][_0x36eb8a(0x4f3)]({'_id':_0x24925c},{..._0x40bc82},{'upsert':!0x0}))['modifiedCount']}:{'insertCount':0x1};}catch(_0x1a95ad){return _0x1a95ad;}}async[a0_0x4bc873(0x4a8)](_0x1aad7b){const _0x3821aa=a0_0x4bc873;try{if(this[_0x3821aa(0x4ca)][_0x3821aa(0x8f9)]){await this[_0x3821aa(0x33e)][_0x3821aa(0x469)]({'_id':_0x1aad7b});return;}}catch(_0x345947){return{'error':_0x345947};}}async['find'](_0x1e901a){const _0x1c5731=a0_0x4bc873;try{if(this[_0x1c5731(0x4ca)][_0x1c5731(0x8f9)])return await this[_0x1c5731(0x33e)]['findOne']({'_id':_0x1e901a});}catch{return{};}}},ts=class extends _{constructor(_0x5e9b7c,_0x2b354b){const _0x277f3b=a0_0x4bc873;super(_0x2b354b),this[_0x277f3b(0x8b9)]=_0x5e9b7c,this['configService']=_0x2b354b,this[_0x277f3b(0x4a9)]=_0x2b354b[_0x277f3b(0x62f)](_0x277f3b(0x66f));}async[a0_0x4bc873(0x75f)](_0x44d1a9,_0x2a1e95){const _0x218b5e=a0_0x4bc873;try{if(this[_0x218b5e(0x4ca)]['ENABLED'])return{'insertCount':(await this['authModel'][_0x218b5e(0x7eb)]({'_id':_0x2a1e95},{'$set':{..._0x44d1a9}},{'upsert':!0x0}))[_0x218b5e(0x624)]};}catch(_0x350106){return{'error':_0x350106};}}async[a0_0x4bc873(0x5e7)](_0x2309d4,_0x366a25){const _0x3eab61=a0_0x4bc873;try{if(this[_0x3eab61(0x4ca)][_0x3eab61(0x8f9)])return{'insertCount':(await this['authModel'][_0x3eab61(0x418)](_0x2309d4,{'$set':_0x366a25},{'upsert':!0x1}))[_0x3eab61(0x624)]};throw new Error('Database\x20is\x20not\x20enabled');}catch(_0x52046f){return{'error':_0x52046f};}}async[a0_0x4bc873(0x612)](_0x5ced38){const _0x190d02=a0_0x4bc873;try{if(this[_0x190d02(0x4ca)][_0x190d02(0x8f9)])return{'insertCount':(await this[_0x190d02(0x8b9)]['deleteMany'](_0x5ced38))[_0x190d02(0x44f)]};throw new Error('[AUTH]\x20Database\x20is\x20not\x20enabled');}catch(_0x5a458a){return{'error':_0x5a458a};}}async['delete'](_0xadf85e){const _0x3e57a6=a0_0x4bc873;try{if(this[_0x3e57a6(0x4ca)][_0x3e57a6(0x8f9)]){await this[_0x3e57a6(0x8b9)]['deleteOne']({'_id':_0xadf85e});return;}}catch(_0x15b682){return{'error':_0x15b682};}}async[a0_0x4bc873(0x8aa)](_0x200879){const _0x1fd67a=a0_0x4bc873;try{if(this['dbSettings'][_0x1fd67a(0x8f9)])return await this['authModel']['findOne']({'_id':_0x200879});}catch{return{};}}async[a0_0x4bc873(0x846)](){const _0x4505fd=a0_0x4bc873;try{if(this[_0x4505fd(0x4ca)]['ENABLED'])return await this[_0x4505fd(0x8b9)][_0x4505fd(0x8aa)]();}catch{return[];}}async[a0_0x4bc873(0x2de)](_0x4e5615){const _0x356b8b=a0_0x4bc873;try{if(this[_0x356b8b(0x4ca)][_0x356b8b(0x8f9)])return await this['authModel'][_0x356b8b(0x8aa)](_0x4e5615);}catch{return[];}}},ss=class extends _{async['deleteOne'](_0x3792eb){const _0x24cacf=a0_0x4bc873;try{let _0x24ea90=A(_0x3792eb[_0x24cacf(0x797)]);return{'deletedCount':(await Ce[_0x24cacf(0x469)](_0x24ea90))[_0x24cacf(0x44f)]};}catch(_0x1a906c){return{'error':_0x1a906c?.[_0x24cacf(0x529)]()};}}async['updateOne'](_0x22b779,_0x5ebbcf){const _0x3d3369=a0_0x4bc873;try{let _0x12b82c=await Ce[_0x3d3369(0x3ca)](_0x22b779);return _0x12b82c?(Object[_0x3d3369(0x310)](_0x12b82c,_0x5ebbcf),await _0x12b82c[_0x3d3369(0x639)]()):(console['error'](_0x3d3369(0x8e0),_0x22b779),null);}catch(_0x541821){return console[_0x3d3369(0x47a)]('Erro\x20ao\x20atualizar\x20o\x20fluxo:',_0x541821),null;}}async[a0_0x4bc873(0x54b)](_0x3ca9d2){const _0x46e85c=a0_0x4bc873;try{return await new Ce(_0x3ca9d2)['save']();}catch(_0x5bafcf){return console[_0x46e85c(0x47a)](_0x46e85c(0x24d),_0x5bafcf),null;}}async['findAll'](_0x6a38ef){const _0x510304=a0_0x4bc873;try{let _0x3523a2=_0x6a38ef[_0x510304(0x797)]??{};return await Ce['find'](_0x3523a2)[_0x510304(0x903)](_0x6a38ef[_0x510304(0x903)]??0x0)[_0x510304(0x439)]();}catch(_0xf195a8){return console[_0x510304(0x47a)]('Erro\x20ao\x20buscar\x20fluxos:',_0xf195a8),[];}}async['findOne'](_0x1ad5d0){const _0x1277f1=a0_0x4bc873;try{let _0x2c22dd=A(_0x1ad5d0[_0x1277f1(0x797)]);return await Ce[_0x1277f1(0x6e7)](_0x2c22dd)[_0x1277f1(0x439)]();}catch{return null;}}},as=class extends _{[a0_0x4bc873(0x76a)](_0x356abe){return Sa(_0x356abe);}async[a0_0x4bc873(0x246)](_0xba9d29){const _0x164622=a0_0x4bc873;if(_0xba9d29[_0x164622(0x825)]!==0x0)try{return{'insertCount':(await this[_0x164622(0x76a)](_0xba9d29[0x0]['owner'])[_0x164622(0x7f9)]([..._0xba9d29]))[_0x164622(0x825)]};}catch(_0x5c1504){return _0x5c1504;}}async[a0_0x4bc873(0x4a8)](_0x5eb801,_0x15a758){const _0x43a126=a0_0x4bc873;try{let _0x5d83d5=this['getConversationModelForOwner'](_0x15a758),_0x244647=A(_0x5eb801['where']);return{'deletedCount':(await _0x5d83d5[_0x43a126(0x612)](_0x244647))[_0x43a126(0x44f)]};}catch(_0x2932ca){return{'error':_0x2932ca?.[_0x43a126(0x529)]()};}}async['deleteOne'](_0x1248c7,_0x1d860d){const _0x5cf723=a0_0x4bc873;try{let _0xffae04=this[_0x5cf723(0x76a)](_0x1d860d),_0x129fc3=A(_0x1248c7[_0x5cf723(0x797)]);return{'deletedCount':(await _0xffae04[_0x5cf723(0x469)](_0x129fc3))[_0x5cf723(0x44f)]};}catch(_0x383969){return{'error':_0x383969?.[_0x5cf723(0x529)]()};}}async[a0_0x4bc873(0x275)](_0x1e4768,_0x255b59){const _0x41b796=a0_0x4bc873;try{if(_0x1e4768[_0x41b796(0x825)]===0x0)return;let _0x7c73dd=this[_0x41b796(0x76a)](_0x255b59),_0x3199df=_0x1e4768[_0x41b796(0x347)](_0x5745ea=>({'updateOne':{'filter':{'name':_0x5745ea['name'],'owner':_0x255b59},'update':{..._0x5745ea}}})),{modifiedCount:_0x49a11c}=await _0x7c73dd[_0x41b796(0x5f2)](_0x3199df);return{'insertCount':_0x49a11c};}catch{return;}}async['updateMany'](_0x59b4f0,_0x3d0356,_0x3d9643){const _0x576f69=a0_0x4bc873;try{return{'modifiedCount':(await this[_0x576f69(0x76a)](_0x3d9643)['updateMany'](_0x59b4f0,{'$set':_0x3d0356})[_0x576f69(0x8c5)]())['modifiedCount']};}catch(_0x58bb03){return console[_0x576f69(0x47a)](_0x576f69(0x5b8),_0x58bb03),{'error':_0x58bb03};}}async[a0_0x4bc873(0x7eb)](_0x475914,_0x4743ce,_0x359bd8){const _0x45fb2a=a0_0x4bc873;try{return await this['getConversationModelForOwner'](_0x359bd8)[_0x45fb2a(0x39d)]({'_id':_0x475914},{'$set':_0x4743ce},{'new':!0x0,'upsert':!0x0})[_0x45fb2a(0x439)]();}catch(_0x29093a){return console[_0x45fb2a(0x47a)](_0x29093a),null;}}async[a0_0x4bc873(0x8aa)](_0x5e4a73,_0x5a1fa9){const _0xbf58d9=a0_0x4bc873;try{return await this[_0xbf58d9(0x76a)](_0x5a1fa9)[_0xbf58d9(0x8aa)](_0x5e4a73)[_0xbf58d9(0x32e)]({'lastInteraction':-0x1})['lean']();}catch{return[];}}async[a0_0x4bc873(0x6e7)](_0x49f581,_0x5451b1){const _0x394208=a0_0x4bc873;try{return await this[_0x394208(0x76a)](_0x5451b1)[_0x394208(0x6e7)]({..._0x49f581['where']})[_0x394208(0x439)]();}catch{return null;}}async[a0_0x4bc873(0x665)](_0x435e21){const _0x26f116=a0_0x4bc873;try{return await this[_0x26f116(0x76a)](_0x435e21)[_0x26f116(0x2a6)]['drop'](),{'success':!0x0};}catch(_0xa3bbb8){return console[_0x26f116(0x47a)](_0xa3bbb8),{'success':!0x1,'error':_0xa3bbb8};}}},is=class extends _{['getScheduleMessageModelForOwner'](_0x297fb7){return Ma(_0x297fb7);}async[a0_0x4bc873(0x5f2)](_0x14df0e,_0x5780e3){const _0x4beca1=a0_0x4bc873;try{return await this[_0x4beca1(0x882)](_0x5780e3)['bulkWrite'](_0x14df0e);}catch(_0x39cf15){return console[_0x4beca1(0x47a)](_0x4beca1(0x437),_0x39cf15),null;}}async['createAndSave'](_0x3c3231,_0x163b1b){const _0x33e1b3=a0_0x4bc873;try{let _0x511cf2=this[_0x33e1b3(0x882)](_0x163b1b);return await new _0x511cf2(_0x3c3231)[_0x33e1b3(0x639)]();}catch(_0x561b35){return console[_0x33e1b3(0x47a)](_0x33e1b3(0x2eb),_0x561b35),null;}}async['deleteOne'](_0x566560,_0x5b8ae6){const _0x500e9c=a0_0x4bc873;try{return await this['getScheduleMessageModelForOwner'](_0x5b8ae6)[_0x500e9c(0x55e)](_0x566560),{};}catch(_0xa96dab){return{'error':_0xa96dab?.[_0x500e9c(0x529)]()};}}async[a0_0x4bc873(0x7eb)](_0x59a02b,_0x28400e,_0x41f2ae,_0x318e8a={}){const _0x38fea9=a0_0x4bc873;try{return await this[_0x38fea9(0x882)](_0x41f2ae)[_0x38fea9(0x39d)](_0x59a02b,_0x28400e,{..._0x318e8a,'new':!0x0})[_0x38fea9(0x439)]();}catch(_0xb6adb6){return console[_0x38fea9(0x47a)](_0x38fea9(0x55a),_0xb6adb6),null;}}async[a0_0x4bc873(0x201)](_0x4b3f9a,_0x20e5ef,_0x75b033){const _0x67453f=a0_0x4bc873;try{return await this[_0x67453f(0x882)](_0x75b033)[_0x67453f(0x891)](_0x4b3f9a,_0x20e5ef,{'new':!0x0})['lean']();}catch(_0xd2461){return console[_0x67453f(0x47a)](_0x67453f(0x55a),_0xd2461),null;}}async['find'](_0x5837f4,_0x279cf5){const _0xe8dc4a=a0_0x4bc873;try{return await this[_0xe8dc4a(0x882)](_0x279cf5)['find'](_0x5837f4[_0xe8dc4a(0x797)])['limit'](_0x5837f4?.[_0xe8dc4a(0x903)]??0x0)[_0xe8dc4a(0x32e)]({'when':0x1})[_0xe8dc4a(0x439)]();}catch{return[];}}async['findOne'](_0x3b381f,_0x30ce1e){const _0x299b06=a0_0x4bc873;try{return await this['getScheduleMessageModelForOwner'](_0x30ce1e)['findOne'](_0x3b381f[_0x299b06(0x797)])['sort']({'when':0x1})[_0x299b06(0x439)]();}catch{return null;}}async[a0_0x4bc873(0x3ca)](_0xea506a,_0x41035d){const _0x502975=a0_0x4bc873;try{return await this[_0x502975(0x882)](_0x41035d)[_0x502975(0x3ca)](_0xea506a)['lean']();}catch{return null;}}async[a0_0x4bc873(0x612)](_0x550c61,_0x1ff124){const _0x3eddab=a0_0x4bc873;try{return{'deletedCount':(await this[_0x3eddab(0x882)](_0x1ff124)[_0x3eddab(0x612)](_0x550c61))[_0x3eddab(0x44f)]};}catch(_0x347763){return console['error']('Erro\x20ao\x20deletar\x20mensagens:',_0x347763),{'error':_0x347763};}}async[a0_0x4bc873(0x665)](_0x2c8662){const _0x4f833e=a0_0x4bc873;try{return await this[_0x4f833e(0x882)](_0x2c8662)[_0x4f833e(0x2a6)]['drop'](),{'success':!0x0};}catch(_0x4721a1){return console[_0x4f833e(0x47a)](_0x4721a1),{'success':!0x1,'error':_0x4721a1};}}},os=class extends _{async[a0_0x4bc873(0x275)](_0x16ae9b,_0x26103a){const _0x3d04ff=a0_0x4bc873;try{if(this[_0x3d04ff(0x4ca)][_0x3d04ff(0x8f9)])return await Ie[_0x3d04ff(0x39d)]({'_id':_0x26103a},{'$set':_0x16ae9b},{'new':!0x0});}catch(_0x186ae2){throw console[_0x3d04ff(0x47a)](_0x3d04ff(0x29b),_0x186ae2),_0x186ae2;}}async['findOrCreate'](_0x3045a2){const _0x3453cd=a0_0x4bc873;try{let _0x6fd918=await Ie[_0x3453cd(0x3ca)](_0x3045a2);return _0x6fd918?_0x6fd918[_0x3453cd(0x40c)]||(_0x6fd918[_0x3453cd(0x40c)]=[],await _0x6fd918[_0x3453cd(0x639)]()):(_0x6fd918=new Ie({'_id':_0x3045a2,'autoCompleteMessages':[]}),await _0x6fd918[_0x3453cd(0x639)]()),_0x6fd918;}catch(_0x202858){return _0x202858[_0x3453cd(0x581)]===0x2af8&&_0x202858['keyPattern']&&_0x202858[_0x3453cd(0x4e2)]['autoCompleteMessages.command']?(console[_0x3453cd(0x47a)](_0x3453cd(0x2be)),await Ie[_0x3453cd(0x2a6)][_0x3453cd(0x703)](_0x3453cd(0x4be)),null):(console[_0x3453cd(0x47a)](_0x3453cd(0x736),_0x202858),null);}}},jo=new $(a0_0x4bc873(0x213)),Jo=new Ke(S),qo=new Jt(S),Vo=new rt(S),Go=new qt(oa,S),Bo=new Vt(na,S),Wo=new es(ha,S),zo=new ts(ua,S),Ho=new Ne(Be,S),Ko=new ss(S),Qo=new Gt(S),Yo=new as(S),Xo=new is(S),Zo=new os(S),fe=new ze(Jo,qo,Vo,Go,Bo,Wo,zo,Ho,Ko,Yo,Qo,Xo,Zo,I?.[a0_0x4bc873(0x6db)]()),G=new jt(hs,S,fe),er=new Kt(S,G,fe),tr=new Yt(G),As=new Zt(tr),O=new Xt(G),de=new zt(G,S,fe,hs,er),W=new Ht(G),D=new Bt(G),q=new Qt(G);jo[a0_0x4bc873(0x636)](a0_0x4bc873(0x656));var Ng=require(a0_0x4bc873(0x915)),js=require('fs'),Di=T(require(a0_0x4bc873(0x625))),ki=T(require(a0_0x4bc873(0x378))),Ue=class u{static #e;static set[a0_0x4bc873(0x2cf)](_0x59897f){this.#e=_0x59897f;}static get['https'](){const _0x2fbdca=a0_0x4bc873;let {FULLCHAIN:_0x3f5b18,PRIVKEY:_0xcd3684}=S[_0x2fbdca(0x62f)](_0x2fbdca(0x727));return Di[_0x2fbdca(0x92a)]({'cert':(0x0,js[_0x2fbdca(0x500)])(_0x3f5b18),'key':(0x0,js[_0x2fbdca(0x500)])(_0xcd3684)},u.#e);}static get['http'](){const _0x20366f=a0_0x4bc873;return ki[_0x20366f(0x92a)](u.#e);}},je=T(require('fs')),qi=T(require(a0_0x4bc873(0x2d3))),Je=T(require(a0_0x4bc873(0x6cb))),ns=T(require('path')),rs=require(a0_0x4bc873(0x2d1));function sr(){const _0x41c5dc=a0_0x4bc873;G[_0x41c5dc(0x5bb)]();let _0xbd8b25=ns[_0x41c5dc(0x323)][_0x41c5dc(0x6a2)](__dirname,_0x41c5dc(0x6ad));Ji(_0xbd8b25);}var Ji=_0x39f81c=>{const _0x1da36e=a0_0x4bc873;let _0x32a08b=je['default'][_0x1da36e(0x506)](_0x39f81c),_0x34dc58=0xc*0x3c*0x3c*0x3e8,_0x62c4fb=0x2*0x3c*0x3c*0x3e8,_0x20922c=new Date()['getTime']();_0x32a08b[_0x1da36e(0x426)](_0x25e0d5=>{const _0x25c94d=_0x1da36e;let _0x53f54a=ns[_0x25c94d(0x323)][_0x25c94d(0x6a2)](_0x39f81c,_0x25e0d5),_0x199a0f=je[_0x25c94d(0x323)]['statSync'](_0x53f54a)[_0x25c94d(0x647)]['getTime']();_0x20922c-_0x199a0f>_0x34dc58&&(je[_0x25c94d(0x323)][_0x25c94d(0x5db)](_0x53f54a),console[_0x25c94d(0x6d2)](_0x25c94d(0x71f)+_0x25e0d5));}),setTimeout(()=>Ji(_0x39f81c),_0x62c4fb);};function ar(){const _0x39ecf2=a0_0x4bc873;let _0x592d74=new $(_0x39ecf2(0x220)),_0x2ef189=(0x0,ye[_0x39ecf2(0x323)])();_0x2ef189[_0x39ecf2(0x3dc)]((0x0,ji[_0x39ecf2(0x323)])({'origin'(_0x4ce6db,_0x534ff9){const _0x3de376=_0x39ecf2;let {ORIGIN:_0x5c5a89}=S[_0x3de376(0x62f)](_0x3de376(0x8d0));return _0x4ce6db||(_0x4ce6db='*'),_0x5c5a89['indexOf']('*')!==-0x1||_0x5c5a89[_0x3de376(0x87e)](_0x4ce6db)!==-0x1?_0x534ff9(null,!0x0):_0x534ff9(new Error('Not\x20allowed\x20by\x20CORS'));},'methods':[...S['get'](_0x39ecf2(0x8d0))[_0x39ecf2(0x609)]],'credentials':S[_0x39ecf2(0x62f)](_0x39ecf2(0x8d0))['CREDENTIALS']}),(0x0,ye[_0x39ecf2(0x89a)])({'extended':!0x0,'limit':'50mb'}),(0x0,ye['json'])({'limit':_0x39ecf2(0x20e)})),_0x2ef189['use']((_0x2ae21c,_0x367c0b,_0x1e4347)=>{const _0xa69f7f=_0x39ecf2;_0x2ae21c['path'][_0xa69f7f(0x668)](_0xa69f7f(0x928))?_0x1e4347():(0x0,Ui[_0xa69f7f(0x323)])()(_0x2ae21c,_0x367c0b,_0x1e4347);}),_0x2ef189[_0x39ecf2(0x6f5)](_0x39ecf2(0x287),_0x39ecf2(0x62e)),_0x2ef189[_0x39ecf2(0x6f5)](_0x39ecf2(0x2b0),(0x0,qs[_0x39ecf2(0x6a2)])(le,_0x39ecf2(0x2b0))),_0x2ef189[_0x39ecf2(0x3dc)](ye[_0x39ecf2(0x323)]['static']((0x0,qs['join'])(le,_0x39ecf2(0x6ba)))),_0x2ef189[_0x39ecf2(0x3dc)]((_0x302bf0,_0x58342b,_0x29a7d2)=>{const _0x9f839b=_0x39ecf2;let _0x35d998=_0x58342b[_0x9f839b(0x4d6)];_0x58342b[_0x9f839b(0x4d6)]=function(_0x3b2fb3){const _0x119abf=_0x9f839b;if(_0x302bf0[_0x119abf(0x2a0)]['convert']==='true'||_0x302bf0[_0x119abf(0x686)][_0x119abf(0x473)]===_0x119abf(0x4b4)){let _0x25d226=JSON['parse'](_0x3b2fb3);_0x3b2fb3=JSON[_0x119abf(0x573)](_0x19e45c(_0x25d226));}return _0x35d998[_0x119abf(0x683)](_0x58342b,[_0x3b2fb3]);},_0x29a7d2();}),_0x2ef189[_0x39ecf2(0x3dc)]('/',ke),_0x2ef189[_0x39ecf2(0x3dc)]((_0x5a128c,_0xaac141,_0x262def,_0x2c1475)=>{const _0x2102bf=_0x39ecf2;if(_0x5a128c)return _0x262def[_0x2102bf(0x4ed)](_0x5a128c[_0x2102bf(0x4ed)]||0x1f4)[_0x2102bf(0x2e2)](_0x5a128c);},(_0x3d7f7e,_0x49be8a,_0xd2e4f1)=>{const _0xc1f2c1=_0x39ecf2;let {method:_0x568fb0,url:_0x18618e}=_0x3d7f7e;_0x49be8a[_0xc1f2c1(0x4ed)](0x194)['json']({'status':0x194,'message':_0xc1f2c1(0x5c4)+_0x568fb0[_0xc1f2c1(0x212)]()+'\x20'+_0x18618e,'error':'Not\x20Found'}),_0xd2e4f1();});let _0x19e45c=(_0x3edce4,_0x56b748=_0x39ecf2(0x4bf))=>{const _0x29df48=_0x39ecf2;let _0x5aed25=(_0x554bca,_0x18eb72=null,_0x5db677=!0x1)=>{const _0x1515aa=a0_0x59bb;let _0x4bb7ac={};return Object[_0x1515aa(0x419)](_0x554bca)[_0x1515aa(0x426)](_0x36af4c=>{const _0x14b611=_0x1515aa;let _0x5fea25=_0x554bca[_0x36af4c],_0x33aef1=''+_0x56b748+_0x36af4c;_0x18eb72&&!_0x5db677&&(_0x33aef1=_0x18eb72+'.'+_0x36af4c),!_0x5fea25&&_0x5fea25!==0x0&&_0x5fea25!==!0x1||typeof _0x5fea25>'u'?_0x4bb7ac[_0x33aef1]=null:typeof _0x5fea25!=_0x14b611(0x801)&&!Array[_0x14b611(0x719)](_0x5fea25)?_0x4bb7ac[_0x33aef1]=_0x5fea25:typeof _0x5fea25==_0x14b611(0x801)&&!Array['isArray'](_0x5fea25)?_0x4bb7ac=Object[_0x14b611(0x310)](_0x4bb7ac,_0x5aed25(_0x5fea25,_0x33aef1)):Array[_0x14b611(0x719)](_0x5fea25)&&(typeof _0x5fea25[0x0]==_0x14b611(0x801)?(_0x4bb7ac[_0x33aef1]=[],_0x5fea25[_0x14b611(0x426)](_0x34caca=>{_0x4bb7ac[_0x33aef1]['push'](_0x5aed25(_0x34caca,_0x33aef1,!0x0));})):_0x4bb7ac[_0x33aef1]=_0x5fea25);}),_0x4bb7ac;};return Array[_0x29df48(0x719)](_0x3edce4)?_0x3edce4[_0x29df48(0x347)](_0x79f40e=>_0x5aed25(_0x79f40e)):typeof _0x3edce4==_0x29df48(0x801)&&_0x3edce4!==null?_0x5aed25(_0x3edce4):{};},_0x72979d=S['get'](_0x39ecf2(0x220));Ue[_0x39ecf2(0x2cf)]=_0x2ef189;let _0xe27386=Ue[_0x72979d['TYPE']],_0x3fb25f=_0x39ecf2(0x586);_0xe27386[_0x39ecf2(0x2a8)](_0x72979d[_0x39ecf2(0x6da)],()=>{const _0x2b6da9=_0x39ecf2;_0x592d74['log'](_0x3fb25f),_0x592d74['log'](_0x72979d[_0x2b6da9(0x7de)][_0x2b6da9(0x212)]()+'\x20-\x20ON:\x20'+_0x72979d[_0x2b6da9(0x6da)]);}),sr(),Zs();}var ir=a0_0x4bc873(0x2ce),or=ns['default'][a0_0x4bc873(0x6a2)](__dirname,a0_0x4bc873(0x926)),Re=null;function rr(){return new Promise((_0x15bf28,_0x2427bf)=>{const _0x17b918=a0_0x59bb;je['default'][_0x17b918(0x267)](or,_0x17b918(0x5a6),(_0x4f4ad5,_0x10bf7c)=>{const _0x5dc377=_0x17b918;if(_0x4f4ad5){Re=_0x4f4ad5,_0x15bf28();return;}qi[_0x5dc377(0x323)][_0x5dc377(0x7ed)](_0x10bf7c)[_0x5dc377(0x33d)][_0x5dc377(0x8ab)]===ir?(Re=null,_0x15bf28()):(Re=new Error(_0x5dc377(0x42c)),_0x15bf28());});});}async function nr(){const _0x5d11a6=a0_0x4bc873;try{await rr(),await Vs();}catch(_0x42bed0){console[_0x5d11a6(0x47a)](_0x5d11a6(0x6cc)+_0x42bed0),process[_0x5d11a6(0x594)](0x1);}}nr();async function Vi(){const _0x37e3d1=a0_0x4bc873;let _0x37f11e;try{_0x37f11e=(await Je['default']['get'](_0x37e3d1(0x3bb)))['data']['ip'];}catch(_0x5a0046){console['error'](_0x5a0046);try{_0x37f11e=(await Je[_0x37e3d1(0x323)][_0x37e3d1(0x62f)](_0x37e3d1(0x567)))[_0x37e3d1(0x301)]['ip'];}catch(_0x57fc0e){console[_0x37e3d1(0x47a)](_0x57fc0e);try{_0x37f11e=(await Je[_0x37e3d1(0x323)][_0x37e3d1(0x62f)]('http://checkip.dyndns.org'))[_0x37e3d1(0x301)]['match'](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x31d1d0){return console[_0x37e3d1(0x47a)](_0x31d1d0),!0x1;}}}return _0x37f11e;}var Li=0x0;async function cr(){const _0x1b0c91=a0_0x4bc873;let _0x571a9d=await new pe(S[_0x1b0c91(0x62f)](_0x1b0c91(0x8b7)))[_0x1b0c91(0x3f2)]();return console[_0x1b0c91(0x6d2)](_0x1b0c91(0x55f),_0x571a9d[_0x1b0c91(0x825)]),_0x571a9d[_0x1b0c91(0x825)];}function lr(_0x5bc186){const _0x3cf4ae=a0_0x4bc873;let _0x46ecca=_0x5bc186['get'](_0x3cf4ae(0x220))[_0x3cf4ae(0x893)],_0x32e06f=_0x5bc186['get']('SSL_CONF');console[_0x3cf4ae(0x6d2)]('Valor\x20da\x20URL\x20recuperada:',_0x46ecca),console[_0x3cf4ae(0x6d2)](_0x3cf4ae(0x58a),_0x32e06f);let _0x38bb87='',_0x39a6e8=_0x46ecca||'';if(_0x46ecca){let _0x3dc0b6=_0x46ecca[_0x3cf4ae(0x60b)](/\/\/(.*?)\./);console[_0x3cf4ae(0x6d2)](_0x3cf4ae(0x7b6),_0x3dc0b6),_0x3dc0b6&&_0x3dc0b6[0x1]&&(_0x38bb87=_0x3dc0b6[0x1],console[_0x3cf4ae(0x6d2)]('Subdomnio\x20extrado\x20da\x20URL:',_0x38bb87));}if(!_0x38bb87&&_0x32e06f&&_0x32e06f[_0x3cf4ae(0x5d5)]){let _0x2b4c9b=_0x32e06f[_0x3cf4ae(0x5d5)][_0x3cf4ae(0x51b)]('/');console[_0x3cf4ae(0x6d2)](_0x3cf4ae(0x91e),_0x2b4c9b);let _0x33ddf5=_0x2b4c9b[_0x2b4c9b[_0x3cf4ae(0x825)]-0x2];if(console['log'](_0x3cf4ae(0x78e),_0x33ddf5),_0x33ddf5){let _0x50d7b3=_0x33ddf5['split']('.');console['log'](_0x3cf4ae(0x693),_0x50d7b3),_0x50d7b3[_0x3cf4ae(0x825)]>0x2&&(_0x38bb87=_0x50d7b3[0x0],console['log'](_0x3cf4ae(0x487),_0x38bb87),_0x39a6e8=''+_0x33ddf5);}}return{'subdomain':_0x38bb87||_0x3cf4ae(0x592),'fullURL':_0x39a6e8||_0x3cf4ae(0x5fa)};}var {subdomain:B,fullURL:Gs}=lr(S);console[a0_0x4bc873(0x6d2)](a0_0x4bc873(0x80f),B),console[a0_0x4bc873(0x6d2)]('URL\x20completa:',Gs);async function ur(){const _0x485c98=a0_0x4bc873;let _0x47c7b2=S[_0x485c98(0x62f)](_0x485c98(0x8b7)),_0xc6e833=S[_0x485c98(0x62f)](_0x485c98(0x66f))[_0x485c98(0x90a)]['KEY'],_0x17a5b9=S['get'](_0x485c98(0x727)),_0x4f40c6=await Vi(),_0x3e4a45=S[_0x485c98(0x62f)](_0x485c98(0x220))[_0x485c98(0x6da)],_0x2bbb70=Gs;try{let _0x4e5aa2={'ip':_0x4f40c6||null,'redis_enable':_0x47c7b2?.[_0x485c98(0x8f9)]||null,'apikey':_0xc6e833||null,'ssl':_0x17a5b9?.['PRIVKEY']||null,'lastupdate':Gi||null,'port':_0x3e4a45||null,'gitInstallError':Re?.[_0x485c98(0x805)]||null,'url':_0x2bbb70||null,'subdomain':B};if(console[_0x485c98(0x6d2)](_0x485c98(0x51e),_0x4e5aa2['ip']),_0x47c7b2&&_0x47c7b2[_0x485c98(0x8f9)]){let _0x1dd20b=await cr();_0x4e5aa2[_0x485c98(0x3b4)]=_0x1dd20b||null;}for(let _0x95c92c in _0x4e5aa2)_0x4e5aa2[_0x485c98(0x80c)](_0x95c92c)&&_0x95c92c!=='ip'&&(_0x4e5aa2[_0x95c92c]=JSON[_0x485c98(0x573)](_0x4e5aa2[_0x95c92c]));return(await Je[_0x485c98(0x323)]['post'](_0x485c98(0x27c),_0x4e5aa2))[_0x485c98(0x301)];}catch(_0x574c56){return console[_0x485c98(0x47a)](_0x574c56),!0x1;}}var Js=!0x1,Gi=0x26e,dr=0x3,Fi=0x1b7740;async function Vs(){const _0x4b2184=a0_0x4bc873;let _0x2e2497='fora\x20do\x20git';Re===null&&(_0x2e2497=await Vi());let _0x2e511d=await ur();if(_0x2e511d){if(_0x2e511d[_0x4b2184(0x843)]['licenca']===!0x0){Re===null&&_0x2e511d[_0x4b2184(0x843)][_0x4b2184(0x2e3)]-Gi>0x0&&await pr(),Js||(Js=!0x0,ar());let _0x1c6f8e=0x24*0x3c*0x3c,_0x88635=_0x2e511d[_0x4b2184(0x843)]['segundos']>_0x1c6f8e?_0x1c6f8e:_0x2e511d['response']['segundos'],_0x1055f5=Number(_0x88635);if(isNaN(_0x1055f5)){console[_0x4b2184(0x47a)](_0x4b2184(0x7ec));return;}let _0x549ca9=Math[_0x4b2184(0x70a)](_0x1055f5/0xe10),_0x426f33=Math[_0x4b2184(0x70a)](_0x1055f5%0xe10/0x3c),_0x5e0287=new Date(Date[_0x4b2184(0x3bd)]()+_0x1055f5*0x3e8);setTimeout(Vs,_0x1055f5*0x3e8);let _0xd5a617=_0x4d83c4=>_0x4d83c4[_0x4b2184(0x529)]()[_0x4b2184(0x247)](0x2,'0'),_0x2c5ca5=_0x4b2184(0x6e2)+_0xd5a617(_0x549ca9)+_0x4b2184(0x827)+_0xd5a617(_0x426f33)+'\x20minutos.\x20Ser\x20s\x20'+_0xd5a617(_0x5e0287[_0x4b2184(0x70d)]())+':'+_0xd5a617(_0x5e0287[_0x4b2184(0x824)]())+'.';console['log'](_0x2c5ca5);}else return console['log'](_0x4b2184(0x6f7)),Js&&(console[_0x4b2184(0x6d2)]('A\x20licena\x20no\x20\x20vlida,\x20interrompendo\x20a\x20aplicao.'),process['exit']()),_0x4b2184(0x673);}else{if(Li++,Li<dr)console[_0x4b2184(0x6d2)](_0x4b2184(0x253)+Fi/0xea60+_0x4b2184(0x81f)),setTimeout(Vs,Fi);else return console[_0x4b2184(0x47a)]('No\x20foi\x20possvel\x20conectar\x20ao\x20servidor\x20aps\x20vrias\x20tentativas,\x20encerrando\x20a\x20aplicao.'),'SERVER_OFFLINE';}}async function pr(){const _0x45b323=a0_0x4bc873;console[_0x45b323(0x6d2)](_0x45b323(0x6ef)),console[_0x45b323(0x6d2)](_0x45b323(0x754)),(0x0,rs[_0x45b323(0x679)])('pm2\x20flush',{'shell':!0x0})['on']('close',_0x289e7b=>{const _0x3eebf8=_0x45b323;_0x289e7b!==0x0?console[_0x3eebf8(0x47a)]('Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.'):(console[_0x3eebf8(0x6d2)](_0x3eebf8(0x6d6)),console[_0x3eebf8(0x6d2)](_0x3eebf8(0x266)),(0x0,rs['spawn'])(_0x3eebf8(0x475),{'shell':!0x0})['on'](_0x3eebf8(0x526),_0x13d105=>{const _0x512acb=_0x3eebf8;if(_0x13d105!==0x0)console[_0x512acb(0x47a)](_0x512acb(0x45c));else{console[_0x512acb(0x6d2)](_0x512acb(0x21a));let _0x47dc66=(0x0,rs[_0x512acb(0x679)])(_0x512acb(0x399),{'shell':!0x0});_0x47dc66[_0x512acb(0x417)]['on'](_0x512acb(0x301),_0x21842c=>{const _0xd2633f=_0x512acb;console['log'](_0xd2633f(0x20c)+_0x21842c);}),_0x47dc66[_0x512acb(0x31e)]['on']('data',_0x5238e0=>{const _0x17da14=_0x512acb;console[_0x17da14(0x47a)](_0x17da14(0x743)+_0x5238e0);}),_0x47dc66['on']('exit',_0x20e875=>{const _0x1a89ce=_0x512acb;_0x20e875!==0x0?console['error'](_0x1a89ce(0x842)+_0x20e875):console[_0x1a89ce(0x6d2)]('Sistema\x20atualizado\x20com\x20sucesso!'),console[_0x1a89ce(0x6d2)]('Parando\x20aplicao...'),setTimeout(()=>process[_0x1a89ce(0x594)](),0x2710);});}}));});}0x0&&(module[a0_0x4bc873(0x501)]={'fullURL':fullURL,'subdomain':subdomain});