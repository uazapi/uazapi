const a0_0x98996d=a0_0x431f;(function(_0x46e856,_0x12f347){const _0x285803=a0_0x431f,_0x1e3d7d=_0x46e856();while(!![]){try{const _0x2e5314=-parseInt(_0x285803(0x48c))/0x1+-parseInt(_0x285803(0x1f3))/0x2+-parseInt(_0x285803(0x826))/0x3+-parseInt(_0x285803(0x7f7))/0x4+parseInt(_0x285803(0x1d5))/0x5+-parseInt(_0x285803(0x2b7))/0x6*(-parseInt(_0x285803(0x44b))/0x7)+parseInt(_0x285803(0x82e))/0x8;if(_0x2e5314===_0x12f347)break;else _0x1e3d7d['push'](_0x1e3d7d['shift']());}catch(_0x115db8){_0x1e3d7d['push'](_0x1e3d7d['shift']());}}}(a0_0x2820,0xee54f));var Gi=Object[a0_0x98996d(0x120)],Ue=Object[a0_0x98996d(0x262)],Bi=Object['getOwnPropertyDescriptor'],Wi=Object[a0_0x98996d(0x595)],zi=Object[a0_0x98996d(0x5aa)],Hi=Object[a0_0x98996d(0x7e3)]['hasOwnProperty'],Ki=(_0x4f09de,_0x1150cd)=>{for(var _0x25c533 in _0x1150cd)Ue(_0x4f09de,_0x25c533,{'get':_0x1150cd[_0x25c533],'enumerable':!0x0});},qs=(_0x67eaab,_0x40375f,_0x22d22b,_0x5f2936)=>{const _0xea01cb=a0_0x98996d;if(_0x40375f&&typeof _0x40375f==_0xea01cb(0x623)||typeof _0x40375f==_0xea01cb(0x7a2)){for(let _0x2d7a6d of Wi(_0x40375f))!Hi['call'](_0x67eaab,_0x2d7a6d)&&_0x2d7a6d!==_0x22d22b&&Ue(_0x67eaab,_0x2d7a6d,{'get':()=>_0x40375f[_0x2d7a6d],'enumerable':!(_0x5f2936=Bi(_0x40375f,_0x2d7a6d))||_0x5f2936[_0xea01cb(0x7dd)]});}return _0x67eaab;},R=(_0x542521,_0x1e7ed5,_0x65d04e)=>(_0x65d04e=_0x542521!=null?Gi(zi(_0x542521)):{},qs(_0x1e7ed5||!_0x542521||!_0x542521[a0_0x98996d(0x819)]?Ue(_0x65d04e,a0_0x98996d(0x36a),{'value':_0x542521,'enumerable':!0x0}):_0x65d04e,_0x542521)),Qi=_0x586a89=>qs(Ue({},'__esModule',{'value':!0x0}),_0x586a89),ur={};Ki(ur,{'fullURL':()=>js,'subdomain':()=>W}),module['exports']=Qi(ur);var Li=R(require('compression')),Gs=require('fs'),Bs=require('js-yaml'),Ws=require(a0_0x98996d(0x3ab)),je=require(a0_0x98996d(0x3ab)),re=process['cwd'](),fe=(0x0,je[a0_0x98996d(0x38e)])(re,a0_0x98996d(0x48e)),Vs=(0x0,je[a0_0x98996d(0x38e)])(re,'src'),sn=(0x0,je['join'])(re,a0_0x98996d(0x65a),a0_0x98996d(0x34c)),cs=class{constructor(){const _0x9c812d=a0_0x98996d;this[_0x9c812d(0x6b0)]();}[a0_0x98996d(0x651)](_0x541c8e){const _0x913ac5=a0_0x98996d;return this[_0x913ac5(0x827)][_0x541c8e];}['loadEnv'](){const _0x2b2648=a0_0x98996d;this[_0x2b2648(0x827)]=process['env']?.[_0x2b2648(0x204)]!==_0x2b2648(0x435)?this[_0x2b2648(0x6cb)]():this['envProcess'](),process[_0x2b2648(0x827)]?.['DOCKER_ENV']===_0x2b2648(0x435)&&(this[_0x2b2648(0x827)][_0x2b2648(0x771)]['TYPE']=_0x2b2648(0x59b),this[_0x2b2648(0x827)]['SERVER'][_0x2b2648(0x75d)]=Number['parseInt'](process[_0x2b2648(0x827)]?.[_0x2b2648(0x738)]??_0x2b2648(0x181)));}[a0_0x98996d(0x6cb)](){const _0x5021d5=a0_0x98996d;return(0x0,Bs[_0x5021d5(0x4f3)])((0x0,Gs[_0x5021d5(0x440)])((0x0,Ws[_0x5021d5(0x38e)])(Vs,_0x5021d5(0x322)),{'encoding':_0x5021d5(0x5d7)}));}['envProcess'](){const _0x482e39=a0_0x98996d;return{'SERVER':{'TYPE':process[_0x482e39(0x827)][_0x482e39(0x82d)],'PORT':Number['parseInt'](process[_0x482e39(0x827)][_0x482e39(0x738)]),'URL':process[_0x482e39(0x827)][_0x482e39(0x7a7)]},'CORS':{'ORIGIN':process[_0x482e39(0x827)][_0x482e39(0x5d4)][_0x482e39(0x4fb)](','),'METHODS':process[_0x482e39(0x827)][_0x482e39(0x5f0)]['split'](','),'CREDENTIALS':process[_0x482e39(0x827)]?.['CORS_CREDENTIALS']===_0x482e39(0x435)},'SSL_CONF':{'PRIVKEY':process[_0x482e39(0x827)]?.[_0x482e39(0x354)],'FULLCHAIN':process[_0x482e39(0x827)]?.[_0x482e39(0x249)]},'STORE':{'CLEANING_INTERVAL':Number[_0x482e39(0x4f2)](process[_0x482e39(0x827)]?.[_0x482e39(0x220)])?Number['parseInt'](process[_0x482e39(0x827)][_0x482e39(0x220)]):void 0x0,'MESSAGES':process['env']?.[_0x482e39(0x14e)]==='true','CONTACTS':process[_0x482e39(0x827)]?.[_0x482e39(0x694)]==='true','CHATS':process[_0x482e39(0x827)]?.[_0x482e39(0x760)]===_0x482e39(0x435)},'DATABASE':{'CONNECTION':{'HOST':process[_0x482e39(0x827)]?.[_0x482e39(0x69c)],'PORT':Number[_0x482e39(0x627)](process[_0x482e39(0x827)]?.['DATABASE_CONNECTION_HOST']),'USER':process['env'][_0x482e39(0x3ba)],'PASSWORD':process[_0x482e39(0x827)][_0x482e39(0x532)],'URI':process[_0x482e39(0x827)][_0x482e39(0x479)],'DB_PREFIX_NAME':process[_0x482e39(0x827)][_0x482e39(0x7d5)]},'ENABLED':process['env']?.[_0x482e39(0x118)]===_0x482e39(0x435)},'REDIS':{'ENABLED':process['env']?.[_0x482e39(0x287)]===_0x482e39(0x435),'URI':process[_0x482e39(0x827)][_0x482e39(0x3ce)]||'redis://127.0.0.1:6379','PREFIX_KEY':process[_0x482e39(0x827)]['REDIS_PREFIX_KEY']||'uazapi'},'LOG':{'LEVEL':process[_0x482e39(0x827)]?.['LOG_LEVEL'][_0x482e39(0x4fb)](','),'COLOR':process['env']?.[_0x482e39(0x569)]===_0x482e39(0x435)},'PROXY':process['env']?.['PROXY']===_0x482e39(0x435),'AUTHENTICATION':{'TYPE':process['env'][_0x482e39(0x662)],'API_KEY':{'KEY':process[_0x482e39(0x827)][_0x482e39(0x14a)]},'JWT':{'EXPIRIN_IN':Number['isInteger'](process[_0x482e39(0x827)]?.['AUTHENTICATION_JWT_EXPIRIN_IN'])?Number['parseInt'](process[_0x482e39(0x827)][_0x482e39(0x464)]):0xe10,'SECRET':process['env'][_0x482e39(0x11a)]}}};}},b=new cs(),Fi=R(require(a0_0x98996d(0x3b7))),me=R(require('express')),Fs=require(a0_0x98996d(0x3ab)),ls=R(require(a0_0x98996d(0x52a))),us=(_0x407ddd=>(_0x407ddd['LOG']=a0_0x98996d(0x698),_0x407ddd[a0_0x98996d(0x6dd)]=a0_0x98996d(0x502),_0x407ddd[a0_0x98996d(0x688)]=a0_0x98996d(0x7b6),_0x407ddd[a0_0x98996d(0x541)]=a0_0x98996d(0x1c4),_0x407ddd[a0_0x98996d(0x16d)]='\x1b[36m',_0x407ddd[a0_0x98996d(0x14c)]='\x1b[37m',_0x407ddd[a0_0x98996d(0x3a1)]='\x1b[30m',_0x407ddd))(us||{}),zs=(_0x25e3cb=>(_0x25e3cb[a0_0x98996d(0x18c)]='\x1b[32m%s\x1b[0m',_0x25e3cb[a0_0x98996d(0x3a1)]=a0_0x98996d(0x67b),_0x25e3cb[a0_0x98996d(0x6dd)]=a0_0x98996d(0x83d),_0x25e3cb[a0_0x98996d(0x688)]='\x1b[33m%s\x1b[0m',_0x25e3cb['ERROR']=a0_0x98996d(0x397),_0x25e3cb[a0_0x98996d(0x16d)]=a0_0x98996d(0x4e2),_0x25e3cb[a0_0x98996d(0x14c)]=a0_0x98996d(0x351),_0x25e3cb))(zs||{}),Hs=(_0x561441=>(_0x561441[a0_0x98996d(0x18c)]=a0_0x98996d(0x18c),_0x561441[a0_0x98996d(0x688)]=a0_0x98996d(0x688),_0x561441[a0_0x98996d(0x6dd)]='INFO',_0x561441[a0_0x98996d(0x3a1)]=a0_0x98996d(0x3a1),_0x561441['ERROR']=a0_0x98996d(0x541),_0x561441['DEBUG']=a0_0x98996d(0x16d),_0x561441[a0_0x98996d(0x14c)]=a0_0x98996d(0x14c),_0x561441))(Hs||{}),Ks=(_0x19a2c1=>(_0x19a2c1['LOG']=a0_0x98996d(0x2a8),_0x19a2c1['INFO']='\x1b[44m',_0x19a2c1[a0_0x98996d(0x688)]=a0_0x98996d(0x78b),_0x19a2c1['DARK']='\x1b[40m',_0x19a2c1[a0_0x98996d(0x541)]=a0_0x98996d(0x4b9),_0x19a2c1[a0_0x98996d(0x16d)]=a0_0x98996d(0x73a),_0x19a2c1[a0_0x98996d(0x14c)]=a0_0x98996d(0x5e5),_0x19a2c1))(Ks||{}),N=class{constructor(_0xb45a68=a0_0x98996d(0x59c)){const _0x3e4960=a0_0x98996d;this[_0x3e4960(0x837)]=_0xb45a68,this[_0x3e4960(0x63a)]=b;}[a0_0x98996d(0x4bb)](_0x8ba1b9){this['context']=_0x8ba1b9;}[a0_0x98996d(0x475)](_0x50e10a,_0x2a1ab3){const _0x4fea7f=a0_0x98996d;let _0x5c5b7a=[];this[_0x4fea7f(0x63a)][_0x4fea7f(0x651)](_0x4fea7f(0x18c))[_0x4fea7f(0x751)][_0x4fea7f(0x15b)](_0x5a2e10=>_0x5c5b7a[_0x4fea7f(0x69d)](Hs[_0x5a2e10]));let _0x3f3d3b=typeof _0x50e10a;_0x5c5b7a[_0x4fea7f(0x199)](_0x2a1ab3)&&(b[_0x4fea7f(0x651)](_0x4fea7f(0x18c))[_0x4fea7f(0x162)]?(console[_0x4fea7f(0x26d)](_0x4fea7f(0x466)+zs[_0x2a1ab3],_0x4fea7f(0x6c3),(0x0,ls[_0x4fea7f(0x36a)])()['format'](_0x4fea7f(0x3f5)),_0x4fea7f(0x5f2),us[_0x2a1ab3]+Ks[_0x2a1ab3]+_0x4fea7f(0x466),_0x2a1ab3+_0x4fea7f(0x5c4),_0x4fea7f(0x138),this[_0x4fea7f(0x837)]+_0x4fea7f(0x5f2),us[_0x2a1ab3],_0x3f3d3b!==_0x4fea7f(0x623)?_0x50e10a:'',_0x4fea7f(0x5f2)),_0x3f3d3b==='object'&&console['log'](_0x50e10a,'\x0a')):console['log']((0x0,ls['default'])()[_0x4fea7f(0x275)]('HH:mm:ss'),_0x2a1ab3+'\x20',''+this[_0x4fea7f(0x837)],_0x50e10a));}[a0_0x98996d(0x26d)](_0x4f6960){const _0x61ca31=a0_0x98996d;this[_0x61ca31(0x475)](_0x4f6960,_0x61ca31(0x18c));}[a0_0x98996d(0x22b)](_0x45d08c){const _0x5a0db5=a0_0x98996d;this['console'](_0x45d08c,_0x5a0db5(0x6dd));}[a0_0x98996d(0x7e8)](_0x406722){const _0x45e8fe=a0_0x98996d;this[_0x45e8fe(0x475)](_0x406722,_0x45e8fe(0x688));}[a0_0x98996d(0x5c5)](_0x3347e0){const _0x4ea008=a0_0x98996d;this[_0x4ea008(0x475)](_0x3347e0,'ERROR');}['verbose'](_0x56e4ad){const _0x1e40a1=a0_0x98996d;this[_0x1e40a1(0x475)](_0x56e4ad,'VERBOSE');}['debug'](_0xf37487){const _0x360df3=a0_0x98996d;this[_0x360df3(0x475)](_0xf37487,_0x360df3(0x16d));}[a0_0x98996d(0x3d1)](_0x29a70f){const _0x520f18=a0_0x98996d;this[_0x520f18(0x475)](_0x29a70f,'DARK');}};function Qs(){const _0x361c44=a0_0x98996d;process['on'](_0x361c44(0x3b1),(_0x4a4d22,_0x517b98)=>{const _0x1fd295=_0x361c44;new N(_0x1fd295(0x3b1))[_0x1fd295(0x5c5)]({'origin':_0x517b98,'stderr':process['stderr']['fd'],'error':_0x4a4d22});}),process['on'](_0x361c44(0x787),(_0x275df4,_0x3399e3)=>{const _0x5e77dd=_0x361c44;new N(_0x5e77dd(0x787))[_0x5e77dd(0x5c5)]({'origin':_0x3399e3,'stderr':process[_0x5e77dd(0x469)]['fd'],'error':_0x275df4});});}var Ys=R(require(a0_0x98996d(0x63f))),ds=new Ys[(a0_0x98996d(0x36a))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),we=require(a0_0x98996d(0x41e)),Ne=R(require(a0_0x98996d(0x41e))),Je=new N(a0_0x98996d(0x430)),k=b['get'](a0_0x98996d(0x635)),$=k[a0_0x98996d(0x299)]?k[a0_0x98996d(0x12f)][a0_0x98996d(0x565)]?Ne[a0_0x98996d(0x36a)]['createConnection'](k['CONNECTION'][a0_0x98996d(0x565)],{'dbName':k[a0_0x98996d(0x12f)][a0_0x98996d(0x7e4)]+'-whatsapp-api'}):Ne[a0_0x98996d(0x36a)][a0_0x98996d(0x611)]('mongodb://'+k[a0_0x98996d(0x12f)]['HOST']+':'+k[a0_0x98996d(0x12f)]['PORT']+'?authSource=admin&readPreference=primary&directConnection=true',{'user':k[a0_0x98996d(0x12f)]['USER'],'pass':k['CONNECTION'][a0_0x98996d(0x6e3)],'dbName':k[a0_0x98996d(0x12f)]['DB_PREFIX_NAME']+'-whatsapp-api'}):null;k[a0_0x98996d(0x299)]&&Je['info'](a0_0x98996d(0x38a)+$['$dbName']);var ne=k[a0_0x98996d(0x299)]?k['CONNECTION'][a0_0x98996d(0x565)]?Ne[a0_0x98996d(0x36a)][a0_0x98996d(0x611)](k[a0_0x98996d(0x12f)][a0_0x98996d(0x565)],{'dbName':'cachedData-whatsapp'}):Ne[a0_0x98996d(0x36a)]['createConnection'](a0_0x98996d(0x71d)+k[a0_0x98996d(0x12f)][a0_0x98996d(0x4d0)]+':'+k[a0_0x98996d(0x12f)][a0_0x98996d(0x75d)]+a0_0x98996d(0x49c),{'user':k[a0_0x98996d(0x12f)][a0_0x98996d(0x590)],'pass':k[a0_0x98996d(0x12f)][a0_0x98996d(0x6e3)],'dbName':'cachedContacts-whatsapp'}):null;ne&&Je[a0_0x98996d(0x22b)](a0_0x98996d(0x38a)+ne[a0_0x98996d(0x533)]),process['on'](a0_0x98996d(0x50d),()=>{const _0x4c885d=a0_0x98996d;$&&$[_0x4c885d(0x358)](()=>{const _0x27c517=_0x4c885d;Je['info'](_0x27c517(0x3d7));}),ne&&ne[_0x4c885d(0x358)](()=>{const _0x364e1a=_0x4c885d;Je['info'](_0x364e1a(0x419));});});var Yi=new we[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),Xi=new we['Schema']({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),Zi=new we[(a0_0x98996d(0x847))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),eo=new we[(a0_0x98996d(0x847))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Yi],'default':[]}},{'_id':!0x1}),to=new we[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':eo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':Xi},'groupdata':{'type':Zi,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),Xs=_0x509765=>{const _0x46685b=a0_0x98996d;let _0x1aafc2='z_'+_0x509765+_0x46685b(0x6d2);return $?.['model'](_0x46685b(0x7e9),to,_0x1aafc2);},Zs=require(a0_0x98996d(0x41e)),so=new Zs[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ea=_0x3c9dcd=>{const _0xe82f3e=a0_0x98996d;let _0x4dd020='z_'+_0x3c9dcd+_0xe82f3e(0x4fd);return $?.[_0xe82f3e(0x498)](_0xe82f3e(0x486),so,_0x4dd020);},ta=require(a0_0x98996d(0x41e)),ps=class{},ao=new ta[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),sa=ne?.[a0_0x98996d(0x498)](ps[a0_0x98996d(0x592)],ao,'ContactsAndGroups'),aa=require(a0_0x98996d(0x41e)),hs=class{},io=new aa[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),qe=ne?.['model'](hs[a0_0x98996d(0x592)],io,a0_0x98996d(0x48e)),ia=require(a0_0x98996d(0x41e)),oo=new ia[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),oa=_0x2e8901=>{const _0x3de3c0=a0_0x98996d;let _0x20847a='z_'+_0x2e8901+_0x3de3c0(0x418);return $?.['model'](_0x3de3c0(0x512),oo,_0x20847a);},ra=require(a0_0x98996d(0x41e)),gs=class{},ro=new ra[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),na=$?.[a0_0x98996d(0x498)](gs['name'],ro,a0_0x98996d(0x705)),ca=require(a0_0x98996d(0x41e)),ms=class{},la=new ca['Schema']({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});la[a0_0x98996d(0x1cc)](a0_0x98996d(0x84a),function(_0x4d1e51){const _0x54a5d0=a0_0x98996d;delete this['flowActive'],delete this['flowIgnoreGroups'],delete this['flowPrefixCommand'],delete this[_0x54a5d0(0x65d)],delete this['flowStopMinutes'],_0x4d1e51();});var ua=$?.[a0_0x98996d(0x498)](ms[a0_0x98996d(0x592)],la,a0_0x98996d(0x15d)),_=require(a0_0x98996d(0x41e)),fs=require('uuid'),Ve=class{},pa=new _[(a0_0x98996d(0x847))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),ws=new _[(a0_0x98996d(0x847))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),no=new _[(a0_0x98996d(0x847))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x98996d(0x458)},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x98996d(0x39b)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x98996d(0x67c)},'pollErrorMessage':{'type':String,'default':a0_0x98996d(0x557)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),ha=new _[(a0_0x98996d(0x847))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),co=new _[(a0_0x98996d(0x847))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),lo=new _['Schema']({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Ss=new _[(a0_0x98996d(0x847))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),uo=new _['Schema']({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),ga=new _['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':no},'apirequest':co,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':uo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),ma=new _[(a0_0x98996d(0x847))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),ys=class{},fa=new _[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Ss],'blocks':[ga],'groups':[pa],'conditions':[ha],'varedits':[ma],'replyOptions':{'type':[ws],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x5bb665=a0_0x98996d;return _0x5bb665(0x473)+Math[_0x5bb665(0x768)]()[_0x5bb665(0x191)](0x24)[_0x5bb665(0x519)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':'false'},'startID':{'type':String,'default':()=>(0x0,fs['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,fs['v4'])()},'shareOwners':{'type':[String],'default':[]}});fa[a0_0x98996d(0x1cc)]('findOneAndUpdate',function(_0x38844b){const _0x3aa62d=a0_0x98996d;let _0x1b99f3=this[_0x3aa62d(0x352)]();if(_0x1b99f3&&typeof _0x1b99f3==_0x3aa62d(0x623)&&_0x3aa62d(0x83f)in _0x1b99f3){let _0x58f80b=_0x1b99f3['$set'];if(_0x58f80b){let _0x2cf690=new Set(),_0x371dbf=new Set(_0x58f80b['variables']?.['map'](_0x3407fb=>_0x3407fb[_0x3aa62d(0x592)])),_0x4d3791=JSON[_0x3aa62d(0x5ab)](_0x58f80b),_0x259890=/{{(?!_)([^}]*)}}/g,_0x2b9d88;for(;(_0x2b9d88=_0x259890[_0x3aa62d(0x556)](_0x4d3791))!==null;)_0x371dbf['has'](_0x2b9d88[0x1])||_0x2cf690[_0x3aa62d(0x712)](_0x2b9d88[0x1]);_0x2cf690['size']>0x0?(console[_0x3aa62d(0x7e8)](_0x3aa62d(0x1e3),Array[_0x3aa62d(0x54e)](_0x2cf690)),_0x58f80b[_0x3aa62d(0x79e)]=Array['from'](_0x2cf690)):_0x58f80b[_0x3aa62d(0x79e)]=[],this[_0x3aa62d(0x638)]({'$set':_0x58f80b});}}_0x38844b();});var ye=$?.['model'](ys[a0_0x98996d(0x592)],fa,a0_0x98996d(0x28c)),po=new _[(a0_0x98996d(0x847))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Ss],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[lo]},{'_id':!0x1}),ho=new _[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Ss],'blocks':[ga],'groups':[pa],'conditions':[ha],'varedits':[ma],'replyOptions':{'type':[ws],'default':[]},'chatLog':po,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x98996d(0x29d)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x98996d(0x67c)},'waitingMenu_replyOptions':{'type':[ws],'default':[]}}),wa=_0x289fde=>{const _0x2c17a8=a0_0x98996d;let _0x55ffe3='z_'+_0x289fde+_0x2c17a8(0x243);return $?.[_0x2c17a8(0x498)](_0x2c17a8(0x297),ho,_0x55ffe3);},go=new _[(a0_0x98996d(0x847))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),da=new _[(a0_0x98996d(0x847))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),mo=new _[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[da],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x98996d(0x729)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[go],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':da,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),ya=_0x4f0bb9=>{const _0x5998d0=a0_0x98996d;let _0x21e195='z_'+_0x4f0bb9+_0x5998d0(0x547);return $?.[_0x5998d0(0x498)]('ScheduleMessageModel',mo,_0x21e195);},bs=class{},fo=new _[(a0_0x98996d(0x847))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),wo=new _['Schema']({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),yo=new _[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),bo=new _['Schema']({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x98996d(0x39c)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),So=new _[(a0_0x98996d(0x847))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Mo=new _['Schema']({'_id':{'type':String,'_id':!0x0},'agents':{'type':[So]},'customFields':{'type':[yo]},'flowConfig':{'type':bo,'default':{}},'flows':{'type':[wo],'default':[]},'autoCompleteMessages':{'type':[fo],'default':[]}}),$e=$?.[a0_0x98996d(0x498)](bs['name'],Mo,a0_0x98996d(0x227)),ba=require(a0_0x98996d(0x41e)),Co=new ba[(a0_0x98996d(0x847))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Sa=_0x3bcf75=>{const _0x14c8a7=a0_0x98996d;let _0x14195b='z_'+_0x3bcf75+'_Labels';return $?.[_0x14c8a7(0x498)](_0x14c8a7(0x753),Co,_0x14195b);},T=class{constructor(_0x5b526c){const _0x31ba0c=a0_0x98996d;this[_0x31ba0c(0x50e)]=_0x5b526c[_0x31ba0c(0x651)](_0x31ba0c(0x635));}};function A(_0x5c3d5c){const _0x2de58e=a0_0x98996d;let _0x37c500={};for(let [_0x207976,_0xa1f8f]of Object[_0x2de58e(0x736)](_0x5c3d5c))if(typeof _0xa1f8f==_0x2de58e(0x623)&&!Array[_0x2de58e(0x481)](_0xa1f8f)){for(let [_0x7a88c6,_0x3b36b4]of Object['entries'](_0xa1f8f))_0x37c500[_0x207976+'.'+_0x7a88c6]=_0x3b36b4;}else _0x37c500[_0x207976]=_0xa1f8f;return _0x37c500;}var Ge=class{constructor(_0x17debb,_0x5d9c3a,_0x23a060,_0x2cfc44,_0x139e3e,_0x16b7cf,_0x271b3d,_0x10acfa,_0x124dcc,_0x405886,_0x33b3c3,_0x4f3f07,_0x5d7d62){const _0x520872=a0_0x98996d;this[_0x520872(0x334)]=_0x17debb,this[_0x520872(0x500)]=_0x5d9c3a,this['contact']=_0x23a060,this[_0x520872(0x84b)]=_0x2cfc44,this['webhook']=_0x139e3e,this[_0x520872(0x34c)]=_0x16b7cf,this[_0x520872(0x78a)]=_0x271b3d,this['flow']=_0x10acfa,this[_0x520872(0x265)]=_0x124dcc,this[_0x520872(0x80b)]=_0x405886,this['scheduleMessage']=_0x33b3c3,this['automateSystem']=_0x4f3f07,this['dbClient']=_0x5d7d62;}get[a0_0x98996d(0x3bb)](){return this['dbClient'];}},Be=class{},We=class extends T{[a0_0x98996d(0x60b)](_0x2399b7){return oa(_0x2399b7);}async[a0_0x98996d(0x45a)](_0x3b3c27,_0x497a97){const _0x3ad198=a0_0x98996d;if(_0x3b3c27['length']===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x3ad198(0x60b)](_0x497a97)[_0x3ad198(0x45c)]([..._0x3b3c27]))[_0x3ad198(0x217)]};}catch(_0x428d52){return _0x428d52;}}async[a0_0x98996d(0x704)](_0x557051,_0x26cb8c){const _0x342705=a0_0x98996d;try{let _0x72b935=this[_0x342705(0x60b)](_0x26cb8c),_0x15dd08=A(_0x557051[_0x342705(0x335)]);return await _0x72b935['find'](_0x15dd08)[_0x342705(0x3ac)]({'messageTimestamp':-0x1})[_0x342705(0x603)](_0x557051?.[_0x342705(0x603)]??0x0)['lean']();}catch{return[];}}async[a0_0x98996d(0x6d0)](_0x251bf8,_0x5d31c7){const _0x43c149=a0_0x98996d;try{let _0x58a67b=this[_0x43c149(0x60b)](_0x5d31c7),_0x47a006=A(_0x251bf8[_0x43c149(0x335)]);await _0x58a67b[_0x43c149(0x3ff)](_0x47a006);}catch(_0x4b9d4c){console[_0x43c149(0x5c5)](_0x4b9d4c);}}async[a0_0x98996d(0x7ae)](_0x26c372,_0x55ef68,_0x10db7a){const _0x1568c8=a0_0x98996d;try{let _0x9202a2=this[_0x1568c8(0x60b)](_0x10db7a),_0x2d6a22=A(_0x26c372[_0x1568c8(0x335)]);return await _0x9202a2['findOneAndUpdate'](_0x2d6a22,{'$set':_0x55ef68},{'new':!0x0});}catch(_0x4eedf5){throw console[_0x1568c8(0x5c5)](_0x4eedf5),_0x4eedf5;}}async['insertMany'](_0x45eee7,_0x5a0054){const _0x5aa53e=a0_0x98996d;if(_0x45eee7[_0x5aa53e(0x217)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x5aa53e(0x60b)](_0x5a0054)[_0x5aa53e(0x45c)]([..._0x45eee7]))['length']};}catch(_0x13eed3){return console[_0x5aa53e(0x26d)](_0x5aa53e(0x32c),_0x13eed3),_0x13eed3;}}async[a0_0x98996d(0x1e4)](_0x3e1f19){const _0x8179ea=a0_0x98996d;try{return await this[_0x8179ea(0x60b)](_0x3e1f19)[_0x8179ea(0x4f8)][_0x8179ea(0x46c)](),{'success':!0x0};}catch(_0x550797){return console[_0x8179ea(0x5c5)](_0x550797),{'success':!0x1,'error':_0x550797};}}},Ts=R(require(a0_0x98996d(0x6b1))),w=R(require(a0_0x98996d(0x75c))),De=require('fs'),L=R(require(a0_0x98996d(0x3ab))),Q=R(require('axios')),Ri=require(a0_0x98996d(0x447)),Ai=R(require(a0_0x98996d(0x5db))),Ii=R(require(a0_0x98996d(0x3b9))),Ma=['imageMessage',a0_0x98996d(0x3e3),a0_0x98996d(0x288),'videoMessage',a0_0x98996d(0x53f)],Ca=['ephemeralMessage',a0_0x98996d(0x390),a0_0x98996d(0x442),a0_0x98996d(0x80f)],Os=require('os'),kt=R(require('pino')),Pe=require('child_process'),Ti=require(a0_0x98996d(0x2f7)),pe=R(require(a0_0x98996d(0x41e))),D=require(a0_0x98996d(0x1dd)),ce=class{constructor(_0x1f9687,_0x40984b,_0x269d51){const _0x56fbc4=a0_0x98996d;this[_0x56fbc4(0x3d9)]=_0x1f9687,this[_0x56fbc4(0x693)]=_0x40984b,this[_0x56fbc4(0x592)]=_0x269d51;}},ze=class{},He=class{},Re=class{},Ke=class{},Qe=class{},be=class{},Ye=class{},Xe=class{},Ze=class{},et=class{},Tt=R(require('express')),Ea=require('fs'),va=require(a0_0x98996d(0x3ab));async function Ae(_0x2a2646){const _0x1db5bd=a0_0x98996d;let _0xb2e413=G[_0x1db5bd(0x7ef)][_0x2a2646];if(k[_0x1db5bd(0x299)]){let _0x2b9eab=$['getClient']()['db'](k[_0x1db5bd(0x12f)][_0x1db5bd(0x7e4)]+_0x1db5bd(0x555))[_0x1db5bd(0x4f8)](_0x2a2646);return _0xb2e413||(await _0x2b9eab[_0x1db5bd(0x704)]({})[_0x1db5bd(0x2ed)]())[_0x1db5bd(0x217)]>0x0;}return _0xb2e413||(0x0,Ea[_0x1db5bd(0x7b8)])((0x0,va[_0x1db5bd(0x38e)])(fe,_0x2a2646));}async function Na(_0x58736f,_0x4d6f9f,_0x4efc6f){const _0x5da479=a0_0x98996d;if(_0x58736f['originalUrl']['includes'](_0x5da479(0x2ff))||_0x58736f[_0x5da479(0x238)][_0x5da479(0x199)](_0x5da479(0x420))||_0x58736f['originalUrl']['includes'](_0x5da479(0x4bc))||_0x58736f[_0x5da479(0x238)]['includes'](_0x5da479(0x4cc))||_0x58736f['originalUrl'][_0x5da479(0x199)]('/instance/connect')||_0x58736f['originalUrl'][_0x5da479(0x199)](_0x5da479(0x1b1))||_0x58736f[_0x5da479(0x238)][_0x5da479(0x199)](_0x5da479(0x594)))return _0x4efc6f();let _0x5f3eac=_0x58736f['params'];if(!_0x5f3eac?.['instanceName'])throw new m(_0x5da479(0x84d));if(!await Ae(_0x5f3eac[_0x5da479(0x193)]))throw new F(_0x5da479(0x757)+_0x5f3eac[_0x5da479(0x193)]+_0x5da479(0x5fe));_0x4efc6f();}async function $a(_0x207373,_0x3259f4,_0x5564e7){const _0x531d96=a0_0x98996d;if(_0x207373[_0x531d96(0x238)]['includes'](_0x531d96(0x2ff))){let _0x7e7c63=_0x207373[_0x531d96(0x13e)];if(await Ae(_0x7e7c63[_0x531d96(0x193)]))throw new X(_0x531d96(0x312)+_0x7e7c63['instanceName']+_0x531d96(0x615));G[_0x531d96(0x7ef)][_0x7e7c63[_0x531d96(0x193)]]&&delete G[_0x531d96(0x7ef)][_0x7e7c63['instanceName']];}_0x5564e7();}var Ra=require(a0_0x98996d(0x1dd)),Aa=R(require(a0_0x98996d(0x564))),tt=a0_0x98996d(0x2f6),vo=new N(a0_0x98996d(0x58c));async function No(_0x4bcb4c,_0x9612d8,_0x81e0be){const _0x57c4f0=a0_0x98996d;let _0x2c4cbb=_0x4bcb4c['get']('apikey');if(_0x2c4cbb&&b[_0x57c4f0(0x651)](_0x57c4f0(0x197))['API_KEY'][_0x57c4f0(0x2d4)]!==_0x2c4cbb)throw new ie();if(b[_0x57c4f0(0x651)]('AUTHENTICATION')['API_KEY'][_0x57c4f0(0x2d4)]===_0x2c4cbb)return _0x81e0be();if((_0x4bcb4c[_0x57c4f0(0x238)][_0x57c4f0(0x199)](_0x57c4f0(0x2ff))||_0x4bcb4c[_0x57c4f0(0x238)][_0x57c4f0(0x199)]('/instance/fetchInstances'))&&!_0x2c4cbb)throw new X(_0x57c4f0(0x223),_0x57c4f0(0x834));let _0x16e9d3=b[_0x57c4f0(0x651)]('AUTHENTICATION')[_0x57c4f0(0x570)];try{let [_0xeb1959,_0x3963fd]=_0x4bcb4c['get']('authorization')[_0x57c4f0(0x4fb)]('\x20');if(_0xeb1959[_0x57c4f0(0x31c)]()!=='bearer')throw new ie();if(!(0x0,Ra['isJWT'])(_0x3963fd))throw new ie();let _0x12d305=_0x4bcb4c[_0x57c4f0(0x550)],_0x41d537=Aa[_0x57c4f0(0x36a)][_0x57c4f0(0x437)](_0x3963fd,_0x16e9d3[_0x57c4f0(0x470)],{'ignoreExpiration':_0x16e9d3[_0x57c4f0(0x4a0)]===0x0});if(_0x12d305[_0x57c4f0(0x193)]!==_0x41d537[_0x57c4f0(0x193)]||tt!==_0x41d537[_0x57c4f0(0x6f0)])throw new ie();return _0x81e0be();}catch(_0x1cc9ff){throw vo[_0x57c4f0(0x5c5)](_0x1cc9ff),new ie();}}async function $o(_0x5a79af,_0x53c18a,_0x97c71f){const _0x362841=a0_0x98996d;let _0x71416f=b['get'](_0x362841(0x197))[_0x362841(0x496)],_0x24e4f8=_0x5a79af[_0x362841(0x651)](_0x362841(0x127));if(_0x71416f[_0x362841(0x2d4)]===_0x24e4f8)return _0x97c71f();if(_0x5a79af[_0x362841(0x238)][_0x362841(0x199)](_0x362841(0x2ff))){let _0x49b810=Ta,_0x3f147f=_0x5a79af[_0x362841(0x13e)][_0x362841(0x193)];if(_0x49b810&&_0x3f147f[_0x362841(0x31c)]()[_0x362841(0x366)](_0x49b810[_0x362841(0x31c)]()))return _0x97c71f();if(!_0x24e4f8)throw new X('Missing\x20global\x20api\x20key',_0x362841(0x834));}if(_0x5a79af['originalUrl'][_0x362841(0x199)]('/instance/fetchInstances')&&!_0x24e4f8)throw new X(_0x362841(0x223),_0x362841(0x834));if(_0x5a79af['originalUrl'][_0x362841(0x199)](_0x362841(0x4bc))&&!_0x24e4f8)throw new X(_0x362841(0x223),_0x362841(0x834));if(_0x5a79af[_0x362841(0x238)][_0x362841(0x199)](_0x362841(0x4cc))&&!_0x24e4f8)throw new X(_0x362841(0x223),'The\x20global\x20api\x20key\x20must\x20be\x20set');try{let _0x1dd855=_0x5a79af[_0x362841(0x550)],_0x3d55d=await he[_0x362841(0x34c)][_0x362841(0x704)](_0x1dd855[_0x362841(0x193)]);if(_0x3d55d&&_0x3d55d[_0x362841(0x127)]===_0x24e4f8)return _0x97c71f();}catch{}throw new ie();}var Ia={'jwt':No,'apikey':$o},ui=require(a0_0x98996d(0x628)),E=require(a0_0x98996d(0x447)),C=(..._0x134e88)=>{const _0x542929=a0_0x98996d;let _0x1e5dea={};return _0x134e88['forEach'](_0x5d441c=>_0x1e5dea[_0x5d441c]={'minLength':0x1,'description':_0x542929(0x457)+_0x5d441c+'\x22\x20cannot\x20be\x20empty'}),{'if':{'propertyNames':{'enum':[..._0x134e88]}},'then':{'properties':_0x1e5dea}};},v={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'instanceName':{'type':'string'}},...C(a0_0x98996d(0x193))},mc={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'oldToken':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x6b8)],...C(a0_0x98996d(0x6b8))},fc={'properties':{'key':{'type':a0_0x98996d(0x623),'properties':{'id':{'type':a0_0x98996d(0x170)},'remoteJid':{'type':a0_0x98996d(0x170)},'fromMe':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]}},'required':['id',a0_0x98996d(0x5d9),'fromMe'],...C('id',a0_0x98996d(0x5d9))},'message':{'type':a0_0x98996d(0x623)}}},Z={'properties':{'delay':{'type':a0_0x98996d(0x686),'description':'Enter\x20a\x20value\x20in\x20milliseconds'},'presence':{'type':a0_0x98996d(0x170),'enum':['unavailable',a0_0x98996d(0x4c8),a0_0x98996d(0x136),a0_0x98996d(0x398),a0_0x98996d(0x642)]}}},H={'type':a0_0x98996d(0x170),'description':a0_0x98996d(0x648)},Oa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'textMessage':{'type':a0_0x98996d(0x623),'properties':{'text':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x673)],...C(a0_0x98996d(0x673))}},'required':[a0_0x98996d(0x6d4),a0_0x98996d(0x62f)]},_a={'type':a0_0x98996d(0x170),'pattern':a0_0x98996d(0x828),'description':a0_0x98996d(0x648)},wc={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'number':{..._a},'options':{...Z},'textMessage':{'type':a0_0x98996d(0x623),'properties':{'text':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x673)],...C('text')}},'required':['textMessage',a0_0x98996d(0x62f)]},yc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{..._a},'options':{...Z},'mediaMessage':{'type':a0_0x98996d(0x623),'properties':{'mediatype':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x6cc),a0_0x98996d(0x672),'video',a0_0x98996d(0x767)]},'media':{'type':a0_0x98996d(0x170)},'fileName':{'type':a0_0x98996d(0x170)},'caption':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x292),'media'],...C(a0_0x98996d(0x344),a0_0x98996d(0x27a),a0_0x98996d(0x36d))}},'required':['mediaMessage','number']},xa={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'number':{...H},'options':{...Z},'stickerMessage':{'type':a0_0x98996d(0x623),'properties':{'image':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x6cc)],...C('image')}},'required':[a0_0x98996d(0x53f),a0_0x98996d(0x62f)]},Da={'$id':(0x0,E['v4'])(),'type':'object','properties':{'statusMessage':{'type':'object','properties':{'type':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x673),'image',a0_0x98996d(0x767),a0_0x98996d(0x84f)]},'content':{'type':a0_0x98996d(0x170)},'caption':{'type':a0_0x98996d(0x170)},'backgroundColor':{'type':a0_0x98996d(0x170)},'font':{'type':a0_0x98996d(0x686),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x98996d(0x1d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x98996d(0x170),'pattern':a0_0x98996d(0x3a7),'description':a0_0x98996d(0x11b)}},'allContacts':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]}},'required':[a0_0x98996d(0x1b8),a0_0x98996d(0x572)],...C(a0_0x98996d(0x1b8),'content')}},'required':[a0_0x98996d(0x639)]},Pa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'mediaMessage':{'type':a0_0x98996d(0x623),'properties':{'mediatype':{'type':a0_0x98996d(0x170),'enum':['image',a0_0x98996d(0x672),'video',a0_0x98996d(0x767)]},'media':{'type':a0_0x98996d(0x170)},'fileName':{'type':a0_0x98996d(0x170)},'caption':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x292),'media'],...C(a0_0x98996d(0x344),a0_0x98996d(0x27a),a0_0x98996d(0x36d))}},'required':[a0_0x98996d(0x1aa),'number']},ka={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'audioMessage':{'type':a0_0x98996d(0x623),'properties':{'audio':{'type':a0_0x98996d(0x170)}},'required':['audio'],...C('audio')}},'required':[a0_0x98996d(0x288),a0_0x98996d(0x62f)]},La={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'pollMessage':{'type':'object','properties':{'name':{'type':a0_0x98996d(0x170)},'selectableCount':{'type':a0_0x98996d(0x62f)},'values':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':['name',a0_0x98996d(0x66b),a0_0x98996d(0x5ba)],...C('name',a0_0x98996d(0x66b),a0_0x98996d(0x5ba))}},'required':[a0_0x98996d(0x62f),a0_0x98996d(0x24f)]},Fa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'menuMessage':{'type':a0_0x98996d(0x623),'properties':{'text':{'type':a0_0x98996d(0x170)},'choices':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x98996d(0x673),'choices'],...C(a0_0x98996d(0x673),'choices')}},'required':[a0_0x98996d(0x62f),a0_0x98996d(0x48f)]},Ua={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'number':{...H},'options':{...Z},'buttonMessage':{'type':a0_0x98996d(0x623),'properties':{'title':{'type':a0_0x98996d(0x170)},'description':{'type':a0_0x98996d(0x170)},'footerText':{'type':'string'},'buttons':{'type':a0_0x98996d(0x1d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x98996d(0x623),'properties':{'buttonText':{'type':a0_0x98996d(0x170)},'buttonId':{'type':'string'}},'required':['buttonText','buttonId'],...C(a0_0x98996d(0x560),a0_0x98996d(0x353))}},'mediaMessage':{'type':a0_0x98996d(0x623),'properties':{'media':{'type':'string'},'fileName':{'type':'string'},'mediatype':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x6cc),'document',a0_0x98996d(0x84f)]}},'required':[a0_0x98996d(0x36d),'mediatype'],...C(a0_0x98996d(0x36d),a0_0x98996d(0x344))}},'required':[a0_0x98996d(0x190),a0_0x98996d(0x63b)],...C(a0_0x98996d(0x190),'description')}},'required':['number','buttonMessage']},ja={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'locationMessage':{'type':'object','properties':{'latitude':{'type':a0_0x98996d(0x62f)},'longitude':{'type':a0_0x98996d(0x62f)},'name':{'type':'string'},'address':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x4ca),a0_0x98996d(0x730)],...C('name',a0_0x98996d(0x2e8))}},'required':[a0_0x98996d(0x62f),a0_0x98996d(0x3be)]},Ja={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'listMessage':{'type':a0_0x98996d(0x623),'properties':{'title':{'type':a0_0x98996d(0x170)},'description':{'type':a0_0x98996d(0x170)},'footerText':{'type':a0_0x98996d(0x170)},'buttonText':{'type':'string'},'sections':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':'string'},'rows':{'type':a0_0x98996d(0x1d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x98996d(0x623),'properties':{'title':{'type':a0_0x98996d(0x170)},'description':{'type':a0_0x98996d(0x170)},'rowId':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x190),a0_0x98996d(0x7ac)],...C(a0_0x98996d(0x190),'rowId')}}},'required':[a0_0x98996d(0x190),'rows'],...C(a0_0x98996d(0x190))}}},'required':[a0_0x98996d(0x190),'description',a0_0x98996d(0x560),a0_0x98996d(0x529)],...C(a0_0x98996d(0x190),a0_0x98996d(0x320),'buttonText',a0_0x98996d(0x1ea))}},'required':['number',a0_0x98996d(0x319)]},qa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'contactMessage':{'type':a0_0x98996d(0x1d6),'items':{'type':'object','properties':{'fullName':{'type':a0_0x98996d(0x170)},'phoneNumber':{'type':a0_0x98996d(0x170),'minLength':0xa}},'required':['fullName',a0_0x98996d(0x759)],...C(a0_0x98996d(0x34a))},'minItems':0x1,'uniqueItems':!0x0}},'required':['number',a0_0x98996d(0x6df)]},Va={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'reactionMessage':{'type':a0_0x98996d(0x623),'properties':{'key':{'type':a0_0x98996d(0x623),'properties':{'id':{'type':a0_0x98996d(0x170)},'remoteJid':{'type':a0_0x98996d(0x170)},'fromMe':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]}},'required':['id',a0_0x98996d(0x5d9),a0_0x98996d(0x1a7)],...C('id','remoteJid')},'reaction':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x328),a0_0x98996d(0x2de)],...C(a0_0x98996d(0x2de))}},'required':[a0_0x98996d(0x650)]},Ga={'$id':(0x0,E['v4'])(),'type':'object','properties':{'numbers':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x98996d(0x170),'pattern':a0_0x98996d(0x3a7),'description':a0_0x98996d(0x252)}}}},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'readMessages':{'type':a0_0x98996d(0x1d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x98996d(0x170)},'fromMe':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x98996d(0x170)}},'required':['id',a0_0x98996d(0x1a7),a0_0x98996d(0x5d9)],...C('id',a0_0x98996d(0x5d9))}}},'required':[a0_0x98996d(0x183)]},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'privacySettings':{'type':a0_0x98996d(0x623),'properties':{'readreceipts':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x6aa),a0_0x98996d(0x171)]},'profile':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x6aa),a0_0x98996d(0x4ea),a0_0x98996d(0x13f),a0_0x98996d(0x171)]},'status':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x6aa),a0_0x98996d(0x4ea),a0_0x98996d(0x13f),a0_0x98996d(0x171)]},'online':{'type':a0_0x98996d(0x170),'enum':['all',a0_0x98996d(0x692)]},'last':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x6aa),a0_0x98996d(0x4ea),a0_0x98996d(0x13f),a0_0x98996d(0x171)]},'groupadd':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x6aa),a0_0x98996d(0x4ea),'contact_blacklist',a0_0x98996d(0x171)]}},'required':[a0_0x98996d(0x59a),'profile','status','online','last',a0_0x98996d(0x83e)],...C(a0_0x98996d(0x59a),'profile',a0_0x98996d(0x7ce),a0_0x98996d(0x73b),a0_0x98996d(0x1de),a0_0x98996d(0x83e))}},'required':[a0_0x98996d(0x38d)]},za={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'lastMessage':{'type':a0_0x98996d(0x623),'properties':{'key':{'type':a0_0x98996d(0x623),'properties':{'id':{'type':a0_0x98996d(0x170)},'remoteJid':{'type':a0_0x98996d(0x170)},'fromMe':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]}},'required':['id','fromMe',a0_0x98996d(0x5d9)],...C('id',a0_0x98996d(0x5d9))},'messageTimestamp':{'type':a0_0x98996d(0x686),'minLength':0x1}},'required':['key'],...C(a0_0x98996d(0x5ae))},'archive':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x98996d(0x5ca),a0_0x98996d(0x18e)]},Ha={'$id':(0x0,E['v4'])(),'type':'object','properties':{'id':{'type':a0_0x98996d(0x170)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'remoteJid':{'type':'string'},'participant':{'type':a0_0x98996d(0x170)}},'required':['id',a0_0x98996d(0x1a7),'remoteJid'],...C('id',a0_0x98996d(0x5d9),a0_0x98996d(0x35d))},Ka={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'where':{'type':a0_0x98996d(0x623),'properties':{'_id':{'type':'string','minLength':0x1},'pushName':{'type':a0_0x98996d(0x170),'minLength':0x1},'id':{'type':a0_0x98996d(0x170),'minLength':0x1}},...C('_id','id',a0_0x98996d(0x5d8))}}},Qa={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'name':{'type':a0_0x98996d(0x170)}},...C(a0_0x98996d(0x592))},Ya={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'status':{'type':a0_0x98996d(0x170)}},...C('status')},Ie={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'number':{'type':a0_0x98996d(0x170)},'picture':{'type':a0_0x98996d(0x170)}}},Xa={'type':'object','properties':{'wuid':{'type':a0_0x98996d(0x170)},'name':{'type':a0_0x98996d(0x170)},'picture':{'type':'string'},'status':{'type':a0_0x98996d(0x170)},'isBusiness':{'type':'boolean'}}},Za={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'where':{'type':a0_0x98996d(0x623),'properties':{'_id':{'type':a0_0x98996d(0x170),'minLength':0x1},'key':{'type':'object','if':{'propertyNames':{'enum':[a0_0x98996d(0x1a7),'remoteJid','id']}},'then':{'properties':{'remoteJid':{'type':'string','minLength':0x1,'description':a0_0x98996d(0x330)},'id':{'type':'string','minLength':0x1,'description':a0_0x98996d(0x330)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x98996d(0x623)}},...C(a0_0x98996d(0x699))},'limit':{'type':a0_0x98996d(0x686)}}},bc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x98996d(0x623),'properties':{'_id':{'type':a0_0x98996d(0x170)},'remoteJid':{'type':a0_0x98996d(0x170)},'id':{'type':a0_0x98996d(0x170)},'fromMe':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x98996d(0x170)},'status':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x541),'PENDING',a0_0x98996d(0x39f),'DELIVERY_ACK',a0_0x98996d(0x7a5),'PLAYED']}},...C(a0_0x98996d(0x699),a0_0x98996d(0x5d9),'id','status')},'limit':{'type':a0_0x98996d(0x686)}}},ei={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'number':{...H},'presence':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x750),a0_0x98996d(0x4c8),a0_0x98996d(0x136),a0_0x98996d(0x398),a0_0x98996d(0x642)]}},'required':[a0_0x98996d(0x5ce),a0_0x98996d(0x62f)]},ti={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'subject':{'type':a0_0x98996d(0x170)},'description':{'type':a0_0x98996d(0x170)},'profilePicture':{'type':a0_0x98996d(0x170)},'participants':{'type':a0_0x98996d(0x1d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x98996d(0x170),'minLength':0xa,'pattern':a0_0x98996d(0x15e),'description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':[a0_0x98996d(0x3cb),a0_0x98996d(0x357)],...C(a0_0x98996d(0x3cb),a0_0x98996d(0x320),a0_0x98996d(0x2ba))},Te={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'groupJid':{'type':a0_0x98996d(0x170),'pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':[a0_0x98996d(0x83c)],...C(a0_0x98996d(0x83c))},si={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'action':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x712),a0_0x98996d(0x629),'promote',a0_0x98996d(0x42e),a0_0x98996d(0x1d1),'approve']},'participants':{'type':a0_0x98996d(0x1d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x98996d(0x170),'minLength':0xa,'pattern':a0_0x98996d(0x15e),'description':a0_0x98996d(0x28b)}}},'required':[a0_0x98996d(0x83c),a0_0x98996d(0x7d8),'participants'],...C(a0_0x98996d(0x83c),a0_0x98996d(0x7d8))},ai={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'groupJid':{'type':a0_0x98996d(0x170)},'expiration':{'type':'number','enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x98996d(0x83c),a0_0x98996d(0x31f)],...C('groupJid',a0_0x98996d(0x31f))},ii={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'groupJid':{'type':a0_0x98996d(0x170)},'image':{'type':'string'}},'required':['groupJid',a0_0x98996d(0x6cc)],...C(a0_0x98996d(0x83c),'image')},oi={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'groupJid':{'type':a0_0x98996d(0x170)},'description':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x83c),'description'],...C('groupJid',a0_0x98996d(0x320))},ri={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x98996d(0x170)},'name':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x83c),a0_0x98996d(0x592)],...C(a0_0x98996d(0x83c),a0_0x98996d(0x592))},ni={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x98996d(0x170)},'setting':{'type':a0_0x98996d(0x170),'enum':[a0_0x98996d(0x76b),a0_0x98996d(0x376),'unlocked',a0_0x98996d(0x6f6)]}},'required':[a0_0x98996d(0x83c),a0_0x98996d(0x4e5)],...C('groupJid','setting')},ci={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'groupJid':{'type':a0_0x98996d(0x170)},'restrict':{'type':a0_0x98996d(0x201)},'announce':{'type':a0_0x98996d(0x201)},'memberAddMode':{'type':a0_0x98996d(0x201)},'joinApprovalMode':{'type':a0_0x98996d(0x201)},'expiration':{'type':a0_0x98996d(0x686),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x98996d(0x170)},'description':{'type':a0_0x98996d(0x170)},'image':{'type':'string'}}},Ms={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'inviteCode':{'type':a0_0x98996d(0x170)}},'required':[a0_0x98996d(0x42d)],...C(a0_0x98996d(0x42d))},li={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'url':{'type':a0_0x98996d(0x170)},'enabled':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]}},'required':['url','enabled']},Sc={'$id':(0x0,E['v4'])(),'type':a0_0x98996d(0x623),'properties':{'local_map':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':'boolean','enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x98996d(0x201),'enum':[!0x0,!0x1]}},'required':[a0_0x98996d(0x5a3),a0_0x98996d(0x3c3),a0_0x98996d(0x2c8),'MESSAGES_SET',a0_0x98996d(0x6f1),'MESSAGES_UPSERT',a0_0x98996d(0x383),a0_0x98996d(0x62c),a0_0x98996d(0x7c0),a0_0x98996d(0x7f0),a0_0x98996d(0x7c5),a0_0x98996d(0x30f),'CHATS_UPSERT',a0_0x98996d(0x5c0),'CHATS_DELETE',a0_0x98996d(0x7b4),a0_0x98996d(0x7a1),a0_0x98996d(0x13d),a0_0x98996d(0x49f)],...C(a0_0x98996d(0x5a3),a0_0x98996d(0x3c3),a0_0x98996d(0x2c8),a0_0x98996d(0x123),a0_0x98996d(0x6f1),a0_0x98996d(0x71a),'SEND_MESSAGE',a0_0x98996d(0x62c),'CONTACTS_UPSERT','CONTACTS_UPDATE',a0_0x98996d(0x7c5),a0_0x98996d(0x30f),a0_0x98996d(0x7f8),a0_0x98996d(0x5c0),'CHATS_DELETE','CONNECTION_UPDATE',a0_0x98996d(0x7a1),a0_0x98996d(0x13d),a0_0x98996d(0x49f))},st=class{},at=class extends T{[a0_0x98996d(0x6ff)](_0x5edee4){return ea(_0x5edee4);}async[a0_0x98996d(0x45a)](_0x2df40c){const _0x4de82b=a0_0x98996d;if(_0x2df40c[_0x4de82b(0x217)]!==0x0)try{return{'insertCount':(await this[_0x4de82b(0x6ff)](_0x2df40c[0x0][_0x4de82b(0x850)])[_0x4de82b(0x45c)]([..._0x2df40c]))[_0x4de82b(0x217)]};}catch(_0x852063){return _0x852063;}}async[a0_0x98996d(0x6d0)](_0x2d149f,_0x37ec22){const _0x52cc44=a0_0x98996d;try{return{'deletedCount':(await this[_0x52cc44(0x6ff)](_0x37ec22)['deleteMany']({..._0x2d149f[_0x52cc44(0x335)]}))['deletedCount']};}catch(_0x4fafeb){return{'error':_0x4fafeb?.['toString']()};}}async[a0_0x98996d(0x7ae)](_0x417a4c,_0x18a3d8){const _0x5c1286=a0_0x98996d;try{if(_0x417a4c['length']===0x0)return;let _0x357053=this[_0x5c1286(0x6ff)](_0x18a3d8),_0xc7927=_0x417a4c[_0x5c1286(0x384)](_0x536be1=>({'updateOne':{'filter':{'_id':_0x536be1[_0x5c1286(0x699)],'owner':_0x18a3d8},'update':{..._0x536be1}}})),{modifiedCount:_0x18dd55}=await _0x357053[_0x5c1286(0x1c9)](_0xc7927);return{'insertCount':_0x18dd55};}catch{return;}}async[a0_0x98996d(0x704)](_0x4c0bda,_0x1ecdd9){const _0x8c1196=a0_0x98996d;try{let _0xe9c4ad=this[_0x8c1196(0x6ff)](_0x1ecdd9),_0x4e33cb=A(_0x4c0bda[_0x8c1196(0x335)]);return await _0xe9c4ad[_0x8c1196(0x704)](_0x4e33cb)[_0x8c1196(0x603)](_0x4c0bda?.[_0x8c1196(0x603)]??0x0)[_0x8c1196(0x24c)]();}catch{return[];}}async['findOne'](_0x117d92,_0x5663e8){const _0x16b7fc=a0_0x98996d;try{let _0x46f9d0=this[_0x16b7fc(0x6ff)](_0x5663e8),_0x424df2=A(_0x117d92['where']);return await _0x46f9d0[_0x16b7fc(0x218)](_0x424df2)[_0x16b7fc(0x24c)]();}catch{return null;}}async['deleteAll'](_0x2d4fb2){const _0x130e52=a0_0x98996d;try{return await this[_0x130e52(0x6ff)](_0x2d4fb2)['collection'][_0x130e52(0x46c)](),{'success':!0x0};}catch(_0x4073d4){return console[_0x130e52(0x5c5)](_0x4073d4),{'success':!0x1,'error':_0x4073d4};}}},it=require(a0_0x98996d(0x5f9)),Ic=require(a0_0x98996d(0x5a6)),Cs=new N(a0_0x98996d(0x296)),V=class{['routerPath'](_0x459e7f,_0x3f39c9=!0x0){const _0x1e7f5a=a0_0x98996d;let _0x3d916f='/'+_0x459e7f;return _0x3f39c9&&(_0x3d916f+=_0x1e7f5a(0x722)),_0x3d916f;}async['dataValidate'](_0x252420){const _0x1989f9=a0_0x98996d;let {request:_0x1ef0fd,schema:_0x439731,ClassRef:_0x3cf04a,execute:_0x34cfb2}=_0x252420,_0x587cdc=new _0x3cf04a(),_0x71a5c=_0x1ef0fd['body'],_0xb25ab3=_0x1ef0fd['params'];_0x1ef0fd?.['query']&&Object[_0x1989f9(0x58d)](_0x1ef0fd['query'])[_0x1989f9(0x217)]>0x0&&Object['assign'](_0xb25ab3,_0x1ef0fd[_0x1989f9(0x777)]),_0x1ef0fd[_0x1989f9(0x238)][_0x1989f9(0x199)]('/instance/create')&&Object[_0x1989f9(0x382)](_0xb25ab3,_0x71a5c),Object[_0x1989f9(0x382)](_0x587cdc,_0x71a5c);let _0x51053f=_0x439731?(0x0,it['validate'])(_0x587cdc,_0x439731):{'valid':!0x0,'errors':[]};if(!_0x51053f[_0x1989f9(0x5d3)]){let _0x8ecdab=_0x51053f[_0x1989f9(0x300)][_0x1989f9(0x384)](({property:_0x2aa275,stack:_0x5b2af5,schema:_0x426fc2})=>{const _0x187c21=_0x1989f9;let _0x572caa;return _0x426fc2[_0x187c21(0x320)]?_0x572caa=_0x426fc2[_0x187c21(0x320)]:_0x572caa=_0x5b2af5['replace']('instance.',''),{'property':_0x2aa275[_0x187c21(0x5d1)]('instance.',''),'message':_0x572caa};});throw Cs[_0x1989f9(0x5c5)]([..._0x8ecdab]),new m(..._0x8ecdab);}return await _0x34cfb2(_0xb25ab3,_0x587cdc);}async['groupValidate'](_0xba83a6){const _0x32a0f0=a0_0x98996d;let {request:_0x7cd23,ClassRef:_0x747783,schema:_0x5193c8,execute:_0x2ae1d7}=_0xba83a6,_0x23cc6a=_0x7cd23[_0x32a0f0(0x777)];if(!_0x23cc6a?.['groupJid'])throw new m(_0x32a0f0(0x726),_0x32a0f0(0x40b));let _0x5b0af8=_0x7cd23[_0x32a0f0(0x550)],_0x552ad4=_0x7cd23['body'],_0x470dec=new _0x747783();Object[_0x32a0f0(0x382)](_0x552ad4,_0x23cc6a),Object[_0x32a0f0(0x382)](_0x470dec,_0x552ad4);let _0x3834ce=(0x0,it[_0x32a0f0(0x522)])(_0x470dec,_0x5193c8);if(!_0x3834ce[_0x32a0f0(0x5d3)]){let _0x3eb144=_0x3834ce[_0x32a0f0(0x300)][_0x32a0f0(0x384)](({property:_0x284b80,stack:_0xd95998,schema:_0x1353e})=>{const _0x1c8555=_0x32a0f0;let _0x1167dc;return _0x1353e['description']?_0x1167dc=_0x1353e['description']:_0x1167dc=_0xd95998[_0x1c8555(0x5d1)]('instance.',''),{'property':_0x284b80['replace'](_0x1c8555(0x6f5),''),'message':_0x1167dc};});throw Cs[_0x32a0f0(0x5c5)]([..._0x3eb144]),new m(..._0x3eb144);}return await _0x2ae1d7(_0x5b0af8,_0x470dec);}async[a0_0x98996d(0x6c9)](_0x1ebd04){const _0xd4893b=a0_0x98996d;let {request:_0x1517e0,ClassRef:_0x5c36c3,schema:_0x2456c0,execute:_0x4259f6}=_0x1ebd04,_0xcd67cc=_0x1517e0[_0xd4893b(0x13e)];if(!_0xcd67cc?.['inviteCode'])throw new m('The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body',_0xd4893b(0x4fc));let _0x278b7c=_0x1517e0[_0xd4893b(0x550)],_0x176b0e=_0x1517e0[_0xd4893b(0x13e)],_0x23a679=new _0x5c36c3();Object[_0xd4893b(0x382)](_0x176b0e,_0xcd67cc),Object['assign'](_0x23a679,_0x176b0e);let _0x17c92f=(0x0,it[_0xd4893b(0x522)])(_0x23a679,_0x2456c0);if(!_0x17c92f[_0xd4893b(0x5d3)]){let _0x150775=_0x17c92f['errors'][_0xd4893b(0x384)](({property:_0x3912e7,stack:_0x12a890,schema:_0x1dde55})=>{const _0x4d5711=_0xd4893b;let _0x2c3826;return _0x1dde55[_0x4d5711(0x320)]?_0x2c3826=_0x1dde55['description']:_0x2c3826=_0x12a890[_0x4d5711(0x5d1)](_0x4d5711(0x6f5),''),{'property':_0x3912e7[_0x4d5711(0x5d1)](_0x4d5711(0x6f5),''),'message':_0x2c3826};});throw Cs[_0xd4893b(0x5c5)]([..._0x150775]),new m(..._0x150775);}return await _0x4259f6(_0x278b7c,_0x23a679);}},M=class{},Gc=new N(a0_0x98996d(0x654)),ot=class extends V{constructor(..._0x44f3e5){const _0x4f76a0=a0_0x98996d;super(),this[_0x4f76a0(0x53e)]=(0x0,ui[_0x4f76a0(0x7bf)])(),this[_0x4f76a0(0x53e)]['post'](this[_0x4f76a0(0x355)]('updatePresence'),..._0x44f3e5,async(_0x1752c2,_0x815d)=>{const _0x10d5ce=_0x4f76a0;let _0x5ead81=await this[_0x10d5ce(0x2c7)]({'request':_0x1752c2,'schema':ei,'ClassRef':ze,'execute':(_0x52ac31,_0x353446)=>x[_0x10d5ce(0x1c2)](_0x52ac31,_0x353446)});return _0x815d['status'](0xc9)['json'](_0x5ead81);})[_0x4f76a0(0x64e)](this[_0x4f76a0(0x355)](_0x4f76a0(0x4dc)),..._0x44f3e5,async(_0xb7b807,_0x2fbc8b)=>{const _0x117440=_0x4f76a0;let _0x1603de=await this['dataValidate']({'request':_0xb7b807,'schema':Ga,'ClassRef':He,'execute':(_0x3b6bc4,_0xc053d9)=>x[_0x117440(0x4bd)](_0x3b6bc4,_0xc053d9)});return _0x2fbc8b['status'](0xc9)[_0x117440(0x52f)](_0x1603de);})[_0x4f76a0(0x64e)](this['routerPath'](_0x4f76a0(0x770)),..._0x44f3e5,async(_0xe18d2e,_0x25dd23)=>{const _0x5d27e0=_0x4f76a0;let _0x417ff8=await this['dataValidate']({'request':_0xe18d2e,'schema':v,'ClassRef':M,'execute':(_0x26c2a6,_0x2c8608)=>x[_0x5d27e0(0x770)](_0x26c2a6,_0x2c8608)});return _0x25dd23[_0x5d27e0(0x7ce)](0xc9)[_0x5d27e0(0x52f)](_0x417ff8);})[_0x4f76a0(0x746)](this[_0x4f76a0(0x355)](_0x4f76a0(0x4b0)),..._0x44f3e5,async(_0x4c996a,_0x10d4a7)=>{const _0x317bf8=_0x4f76a0;let _0x6865bd=await this[_0x317bf8(0x2c7)]({'request':_0x4c996a,'schema':Ba,'ClassRef':Ye,'execute':(_0x2539a5,_0x565a20)=>x['readMessage'](_0x2539a5,_0x565a20)});return _0x10d4a7[_0x317bf8(0x7ce)](0xc9)[_0x317bf8(0x52f)](_0x6865bd);})[_0x4f76a0(0x746)](this[_0x4f76a0(0x355)](_0x4f76a0(0x52c)),..._0x44f3e5,async(_0x4e0bbd,_0x1baabb)=>{const _0x457746=_0x4f76a0;let _0x39512b=await this[_0x457746(0x2c7)]({'request':_0x4e0bbd,'schema':za,'ClassRef':Xe,'execute':(_0x4fc4fa,_0x2eeb8b)=>x[_0x457746(0x52c)](_0x4fc4fa,_0x2eeb8b)});return _0x1baabb[_0x457746(0x7ce)](0xc9)['json'](_0x39512b);})[_0x4f76a0(0x6d0)](this['routerPath'](_0x4f76a0(0x1ec)),..._0x44f3e5,async(_0x20f20c,_0x5c11de)=>{const _0x38462b=_0x4f76a0;let _0x2a5e91=await this[_0x38462b(0x2c7)]({'request':_0x20f20c,'schema':Ha,'ClassRef':et,'execute':(_0x1af091,_0x2825bf)=>x['deleteMessage'](_0x1af091,_0x2825bf)});return _0x5c11de[_0x38462b(0x7ce)](0xc9)[_0x38462b(0x52f)](_0x2a5e91);})[_0x4f76a0(0x64e)](this['routerPath'](_0x4f76a0(0x5b3)),..._0x44f3e5,async(_0x472294,_0x4dce7f)=>{const _0x49607e=_0x4f76a0;let _0xe7733e=await this[_0x49607e(0x2c7)]({'request':_0x472294,'schema':Ie,'ClassRef':Re,'execute':(_0x1fd819,_0x4ae6f1)=>x[_0x49607e(0x82c)](_0x1fd819,_0x4ae6f1)});return _0x4dce7f[_0x49607e(0x7ce)](0xc8)['json'](_0xe7733e);})[_0x4f76a0(0x64e)](this[_0x4f76a0(0x355)](_0x4f76a0(0x5e2)),..._0x44f3e5,async(_0x748375,_0x46f344)=>{const _0x35cfc7=_0x4f76a0;let _0x5ad532=await this[_0x35cfc7(0x2c7)]({'request':_0x748375,'schema':Xa,'ClassRef':Re,'execute':(_0x5bc284,_0x30ccc6)=>x['fetchProfile'](_0x5bc284,_0x30ccc6)});return _0x46f344[_0x35cfc7(0x7ce)](0xc8)[_0x35cfc7(0x52f)](_0x5ad532);})['post'](this[_0x4f76a0(0x355)](_0x4f76a0(0x34b)),..._0x44f3e5,async(_0x46292a,_0x36d4a1)=>{const _0x1d67fb=_0x4f76a0;let _0x10c32d=await this['dataValidate']({'request':_0x46292a,'schema':Ka,'ClassRef':st,'execute':(_0x40957a,_0x165e3a)=>x[_0x1d67fb(0x51b)](_0x40957a,_0x165e3a)});return _0x36d4a1[_0x1d67fb(0x7ce)](0xc8)['json'](_0x10c32d);})[_0x4f76a0(0x64e)](this[_0x4f76a0(0x355)](_0x4f76a0(0x3bd)),..._0x44f3e5,async(_0x1858bb,_0x54f682)=>{const _0x457e74=_0x4f76a0;let _0x28fa2f=await this[_0x457e74(0x2c7)]({'request':_0x1858bb,'schema':null,'ClassRef':Object,'execute':(_0x93c540,_0x26de3a)=>x[_0x457e74(0x3bd)](_0x93c540,_0x26de3a)});return _0x54f682[_0x457e74(0x7ce)](0xc9)['json'](_0x28fa2f);})[_0x4f76a0(0x64e)](this[_0x4f76a0(0x355)]('findMessages'),..._0x44f3e5,async(_0x19a8d9,_0x145295)=>{const _0x24ee29=_0x4f76a0;let _0x1dfe5a=await this['dataValidate']({'request':_0x19a8d9,'schema':Za,'ClassRef':Be,'execute':(_0x55288e,_0x2140bd)=>x['fetchMessages'](_0x55288e,_0x2140bd)});return _0x145295[_0x24ee29(0x7ce)](0xc8)['json'](_0x1dfe5a);})[_0x4f76a0(0x651)](this[_0x4f76a0(0x355)](_0x4f76a0(0x7c1)),..._0x44f3e5,async(_0x4e3e5c,_0x1cd372)=>{const _0x549853=_0x4f76a0;let _0x2d2ce2=await this[_0x549853(0x2c7)]({'request':_0x4e3e5c,'schema':null,'ClassRef':M,'execute':_0x344db3=>x[_0x549853(0x477)](_0x344db3)});return _0x1cd372[_0x549853(0x7ce)](0xc8)[_0x549853(0x52f)](_0x2d2ce2);})[_0x4f76a0(0x651)](this[_0x4f76a0(0x355)](_0x4f76a0(0x58e)),..._0x44f3e5,async(_0x5ce4f5,_0x35e62b)=>{const _0x528efc=_0x4f76a0;let _0x3441b7=await this[_0x528efc(0x2c7)]({'request':_0x5ce4f5,'schema':null,'ClassRef':M,'execute':_0x26560b=>x[_0x528efc(0x818)](_0x26560b)});return _0x35e62b[_0x528efc(0x7ce)](0xc8)[_0x528efc(0x52f)](_0x3441b7);})['put'](this[_0x4f76a0(0x355)](_0x4f76a0(0x4c2)),..._0x44f3e5,async(_0x28101,_0x266b50)=>{const _0x3dd18d=_0x4f76a0;let _0x4b9d87=await this['dataValidate']({'request':_0x28101,'schema':null,'ClassRef':Array,'execute':(_0xdcc86,_0x317e2c)=>x[_0x3dd18d(0x4c2)](_0xdcc86,_0x317e2c)});return _0x266b50[_0x3dd18d(0x7ce)](0xc8)['json'](_0x4b9d87);})[_0x4f76a0(0x651)](this[_0x4f76a0(0x355)](_0x4f76a0(0x293)),..._0x44f3e5,async(_0x2f9460,_0x1e4846)=>{const _0x1a8a40=_0x4f76a0;let _0x506219=await this[_0x1a8a40(0x2c7)]({'request':_0x2f9460,'schema':null,'ClassRef':M,'execute':_0x5b0306=>x[_0x1a8a40(0x293)](_0x5b0306)});return _0x1e4846['status'](0xc8)['json'](_0x506219);})[_0x4f76a0(0x746)](this[_0x4f76a0(0x355)](_0x4f76a0(0x506)),..._0x44f3e5,async(_0x22b197,_0x42c8ff)=>{const _0x2e20d4=_0x4f76a0;let _0x17a179=await this[_0x2e20d4(0x2c7)]({'request':_0x22b197,'schema':Wa,'ClassRef':Ze,'execute':(_0x5d47d4,_0x3f7944)=>x[_0x2e20d4(0x506)](_0x5d47d4,_0x3f7944)});return _0x42c8ff[_0x2e20d4(0x7ce)](0xc9)['json'](_0x17a179);})[_0x4f76a0(0x64e)](this['routerPath']('fetchBusinessProfile'),..._0x44f3e5,async(_0xf9f663,_0x2e4101)=>{const _0x5f5d4a=_0x4f76a0;let _0x2547c4=await this['dataValidate']({'request':_0xf9f663,'schema':Ie,'ClassRef':be,'execute':(_0x406ffc,_0x226606)=>x[_0x5f5d4a(0x649)](_0x406ffc,_0x226606)});return _0x2e4101[_0x5f5d4a(0x7ce)](0xc8)[_0x5f5d4a(0x52f)](_0x2547c4);})[_0x4f76a0(0x64e)](this[_0x4f76a0(0x355)]('updateProfileName'),..._0x44f3e5,async(_0x36a405,_0x217901)=>{const _0x1ef69b=_0x4f76a0;let _0x2d2dd4=await this[_0x1ef69b(0x2c7)]({'request':_0x36a405,'schema':Qa,'ClassRef':Ke,'execute':(_0x53e878,_0x28e319)=>x[_0x1ef69b(0x410)](_0x53e878,_0x28e319)});return _0x217901[_0x1ef69b(0x7ce)](0xc8)[_0x1ef69b(0x52f)](_0x2d2dd4);})[_0x4f76a0(0x64e)](this[_0x4f76a0(0x355)]('updateProfileStatus'),..._0x44f3e5,async(_0x328f3e,_0x29ee7b)=>{let _0x7e3bf=await this['dataValidate']({'request':_0x328f3e,'schema':Ya,'ClassRef':Qe,'execute':(_0x37e997,_0x372da1)=>x['updateProfileStatus'](_0x37e997,_0x372da1)});return _0x29ee7b['status'](0xc8)['json'](_0x7e3bf);})[_0x4f76a0(0x746)](this['routerPath'](_0x4f76a0(0x380)),..._0x44f3e5,async(_0x2bd8c5,_0x2ab036)=>{const _0x9b0e8c=_0x4f76a0;let _0x1e3d7f=await this[_0x9b0e8c(0x2c7)]({'request':_0x2bd8c5,'schema':Ie,'ClassRef':be,'execute':(_0x8a116c,_0xcfa7da)=>x['updateProfilePicture'](_0x8a116c,_0xcfa7da)});return _0x2ab036['status'](0xc8)[_0x9b0e8c(0x52f)](_0x1e3d7f);})[_0x4f76a0(0x6d0)](this[_0x4f76a0(0x355)]('removeProfilePicture'),..._0x44f3e5,async(_0x125928,_0x35af62)=>{const _0x450604=_0x4f76a0;let _0x2eb9ec=await this[_0x450604(0x2c7)]({'request':_0x125928,'schema':Ie,'ClassRef':be,'execute':(_0x576559,_0xed9d5a)=>x[_0x450604(0x13a)](_0x576559,_0xed9d5a)});return _0x35af62['status'](0xc8)[_0x450604(0x52f)](_0x2eb9ec);});}},di=require(a0_0x98996d(0x628)),rt=class{},nt=class{},ct=class{},lt=class{},ut=class{},dt=class{},ee=class{},Oe=class{},pt=class extends ee{},ht=class extends ee{},gt=class extends V{constructor(..._0x1aa5a5){const _0x52be50=a0_0x98996d;super(),this[_0x52be50(0x53e)]=(0x0,di[_0x52be50(0x7bf)])(),this[_0x52be50(0x53e)][_0x52be50(0x64e)](this['routerPath']('create'),..._0x1aa5a5,async(_0x3e1017,_0x5902ac)=>{const _0x2a45ed=_0x52be50;let _0x453fbf=await this[_0x2a45ed(0x2c7)]({'request':_0x3e1017,'schema':ti,'ClassRef':rt,'execute':(_0xaaf4d1,_0x24615b)=>j['createGroup'](_0xaaf4d1,_0x24615b)});_0x5902ac[_0x2a45ed(0x7ce)](0xc9)['json'](_0x453fbf);})[_0x52be50(0x746)](this[_0x52be50(0x355)](_0x52be50(0x680)),..._0x1aa5a5,async(_0x41ded2,_0x40c1a4)=>{const _0x3aa0aa=_0x52be50;let _0x2863a5=await this[_0x3aa0aa(0x425)]({'request':_0x41ded2,'schema':ii,'ClassRef':nt,'execute':(_0x14a7e1,_0x2c4294)=>j[_0x3aa0aa(0x680)](_0x14a7e1,_0x2c4294)});_0x40c1a4[_0x3aa0aa(0x7ce)](0xc9)['json'](_0x2863a5);})[_0x52be50(0x746)](this[_0x52be50(0x355)](_0x52be50(0x83b)),..._0x1aa5a5,async(_0x4c3160,_0x2f404a)=>{const _0x265d22=_0x52be50;let _0xcf2de5=await this['groupValidate']({'request':_0x4c3160,'schema':oi,'ClassRef':ct,'execute':(_0x1aee89,_0x24da6b)=>j[_0x265d22(0x83b)](_0x1aee89,_0x24da6b)});_0x2f404a['status'](0xc9)['json'](_0xcf2de5);})['put'](this['routerPath'](_0x52be50(0x37b)),..._0x1aa5a5,async(_0x1cedff,_0x249c61)=>{const _0x20f74f=_0x52be50;let _0x4ded7d=await this['groupValidate']({'request':_0x1cedff,'schema':ri,'ClassRef':lt,'execute':(_0x368c70,_0x4d75b5)=>j['groupName'](_0x368c70,_0x4d75b5)});_0x249c61[_0x20f74f(0x7ce)](0xc9)[_0x20f74f(0x52f)](_0x4ded7d);})['put'](this[_0x52be50(0x355)]('groupBetterSetting'),..._0x1aa5a5,async(_0x4f7a19,_0x1939ff)=>{const _0x5ead7a=_0x52be50;let _0x3744e0=await this[_0x5ead7a(0x425)]({'request':_0x4f7a19,'schema':ci,'ClassRef':dt,'execute':(_0x52b2f5,_0xcb1b3)=>j[_0x5ead7a(0x68e)](_0x52b2f5,_0xcb1b3)});_0x1939ff[_0x5ead7a(0x7ce)](0xc9)['json'](_0x3744e0);})[_0x52be50(0x746)](this[_0x52be50(0x355)](_0x52be50(0x18f)),..._0x1aa5a5,async(_0x41f47a,_0x240da9)=>{const _0xc9f626=_0x52be50;let _0x3ec092=await this[_0xc9f626(0x425)]({'request':_0x41f47a,'schema':ni,'ClassRef':ut,'execute':(_0x3d9f8d,_0x160cde)=>j[_0xc9f626(0x18f)](_0x3d9f8d,_0x160cde)});_0x240da9[_0xc9f626(0x7ce)](0xc9)['json'](_0x3ec092);})['put'](this['routerPath']('toggleEphemeral'),..._0x1aa5a5,async(_0x50e7cd,_0x1c010e)=>{const _0x5bf662=_0x52be50;let _0x38d060=await this['groupValidate']({'request':_0x50e7cd,'schema':ai,'ClassRef':ht,'execute':(_0x4d3397,_0x4e7b56)=>j['toggleEphemeral'](_0x4d3397,_0x4e7b56)});_0x1c010e['status'](0xc9)[_0x5bf662(0x52f)](_0x38d060);})[_0x52be50(0x651)](this[_0x52be50(0x355)]('findGroupInfos'),..._0x1aa5a5,async(_0x4d4319,_0x339610)=>{const _0x36297c=_0x52be50;let _0x472d1d=await this[_0x36297c(0x425)]({'request':_0x4d4319,'schema':Te,'ClassRef':ee,'execute':(_0x5d7a2b,_0x1d16fe)=>j['findGroupInfo'](_0x5d7a2b,_0x1d16fe)});_0x339610['status'](0xc8)[_0x36297c(0x52f)](_0x472d1d);})[_0x52be50(0x651)](this[_0x52be50(0x355)]('findGroups'),..._0x1aa5a5,async(_0x332797,_0x457b95)=>{const _0x37f29c=_0x52be50;let _0x358ae5=await this[_0x37f29c(0x2c7)]({'request':_0x332797,'schema':v,'ClassRef':M,'execute':_0x3fe204=>j[_0x37f29c(0x1ca)](_0x3fe204)});_0x457b95[_0x37f29c(0x7ce)](0xc8)['json'](_0x358ae5);})['get'](this[_0x52be50(0x355)](_0x52be50(0x357)),..._0x1aa5a5,async(_0x13e627,_0xe4e6a9)=>{const _0x50fb58=_0x52be50;let _0x396d3f=await this[_0x50fb58(0x425)]({'request':_0x13e627,'schema':Te,'ClassRef':ee,'execute':(_0x18a4bc,_0x478d05)=>j['findParticipants'](_0x18a4bc,_0x478d05)});_0xe4e6a9['status'](0xc8)[_0x50fb58(0x52f)](_0x396d3f);})['get'](this[_0x52be50(0x355)](_0x52be50(0x42d)),..._0x1aa5a5,async(_0x3b6d6d,_0x2e1dd5)=>{const _0x675cf4=_0x52be50;let _0x176c7b=await this[_0x675cf4(0x425)]({'request':_0x3b6d6d,'schema':Te,'ClassRef':ee,'execute':(_0x55c59a,_0x4d9ba1)=>j['inviteCode'](_0x55c59a,_0x4d9ba1)});_0x2e1dd5[_0x675cf4(0x7ce)](0xc8)['json'](_0x176c7b);})[_0x52be50(0x64e)](this['routerPath']('inviteCodeDetails'),..._0x1aa5a5,async(_0x1438e0,_0x3643b0)=>{const _0x15b348=_0x52be50;let _0xb4678a=await this[_0x15b348(0x6c9)]({'request':_0x1438e0,'schema':Ms,'ClassRef':Oe,'execute':(_0x2b8fe0,_0x4c9c2c)=>j['groupGetInviteInfo'](_0x2b8fe0,_0x4c9c2c)});_0x3643b0[_0x15b348(0x7ce)](0xc9)[_0x15b348(0x52f)](_0xb4678a);})[_0x52be50(0x746)](this['routerPath']('joinGroup'),..._0x1aa5a5,async(_0x4d2d44,_0x274155)=>{const _0x36fff5=_0x52be50;let _0xe6aad3=await this[_0x36fff5(0x6c9)]({'request':_0x4d2d44,'schema':Ms,'ClassRef':Oe,'execute':(_0x364749,_0x5262f5)=>j[_0x36fff5(0x69e)](_0x364749,_0x5262f5)});_0x274155['status'](0xc9)['json'](_0xe6aad3);})['put'](this[_0x52be50(0x355)](_0x52be50(0x831)),..._0x1aa5a5,async(_0x3f4267,_0x32feea)=>{const _0x44818b=_0x52be50;let _0x5f0567=await this['groupValidate']({'request':_0x3f4267,'schema':Te,'ClassRef':ee,'execute':(_0x51a242,_0x4e9c68)=>j[_0x44818b(0x831)](_0x51a242,_0x4e9c68)});_0x32feea[_0x44818b(0x7ce)](0xc9)[_0x44818b(0x52f)](_0x5f0567);})['put'](this['routerPath'](_0x52be50(0x321)),..._0x1aa5a5,async(_0x37c056,_0x37b253)=>{const _0x26bef7=_0x52be50;let _0x4c7d1d=await this['groupValidate']({'request':_0x37c056,'schema':si,'ClassRef':pt,'execute':(_0x2c29d6,_0x9d2fc)=>j[_0x26bef7(0x678)](_0x2c29d6,_0x9d2fc)});_0x37b253[_0x26bef7(0x7ce)](0xc9)[_0x26bef7(0x52f)](_0x4c7d1d);})[_0x52be50(0x6d0)](this[_0x52be50(0x355)](_0x52be50(0x159)),..._0x1aa5a5,async(_0xcfd6ee,_0x4ee18c)=>{const _0x5eb62c=_0x52be50;let _0x10e0af=await this[_0x5eb62c(0x425)]({'request':_0xcfd6ee,'schema':{},'ClassRef':ee,'execute':(_0xfdb9d6,_0x8a26a6)=>j['leaveGroup'](_0xfdb9d6,_0x8a26a6)});_0x4ee18c[_0x5eb62c(0x7ce)](0xc8)[_0x5eb62c(0x52f)](_0x10e0af);});}},pi=require(a0_0x98996d(0x628)),mt=class extends V{constructor(_0x33051a,..._0xe2eab6){const _0x565dca=a0_0x98996d;super(),this['configService']=_0x33051a,this[_0x565dca(0x53e)]=(0x0,pi[_0x565dca(0x7bf)])();let _0x9b5b4=_0x33051a[_0x565dca(0x651)](_0x565dca(0x197));this[_0x565dca(0x53e)][_0x565dca(0x64e)]('/create',..._0xe2eab6,async(_0x378690,_0x3f8b41)=>{const _0x48404e=_0x565dca;let {instanceName:_0x34e218,apikey:_0x679b94,number:_0x1a12e4}=_0x378690[_0x48404e(0x13e)],_0x8a1011=await le['createInstance']({'instanceName':_0x34e218,'apikey':_0x679b94,'number':_0x1a12e4});return _0x3f8b41[_0x48404e(0x7ce)](0xc9)[_0x48404e(0x52f)](_0x8a1011);})[_0x565dca(0x746)](this[_0x565dca(0x355)](_0x565dca(0x779)),..._0xe2eab6,async(_0x22caa0,_0x129bc5)=>{const _0x3fd264=_0x565dca;let _0x47029e=await this['dataValidate']({'request':_0x22caa0,'schema':v,'ClassRef':M,'execute':_0x5e022f=>le[_0x3fd264(0x46d)](_0x5e022f)});return _0x129bc5[_0x3fd264(0x7ce)](0xc8)['json'](_0x47029e);})[_0x565dca(0x651)](this[_0x565dca(0x355)]('connect'),..._0xe2eab6,async(_0x301053,_0x5812dd)=>{const _0x3f44f3=_0x565dca;let _0x435b35=await this[_0x3f44f3(0x2c7)]({'request':_0x301053,'schema':v,'ClassRef':M,'execute':_0x2d3204=>le[_0x3f44f3(0x551)](_0x2d3204)});return _0x5812dd['status'](0xc8)[_0x3f44f3(0x52f)](_0x435b35);})[_0x565dca(0x651)](this[_0x565dca(0x355)](_0x565dca(0x720)),..._0xe2eab6,async(_0x12dc9c,_0x492d8a)=>{const _0x2ffc6a=_0x565dca;let _0x17443d=await this[_0x2ffc6a(0x2c7)]({'request':_0x12dc9c,'schema':v,'ClassRef':M,'execute':_0xfa0108=>le[_0x2ffc6a(0x720)](_0xfa0108)});return _0x492d8a[_0x2ffc6a(0x7ce)](0xc8)['json'](_0x17443d);})['get'](this[_0x565dca(0x355)](_0x565dca(0x3e2),!0x1),..._0xe2eab6,async(_0x19994d,_0x26d3f4)=>{const _0x49997b=_0x565dca;let _0xdba97a=await this[_0x49997b(0x2c7)]({'request':_0x19994d,'schema':null,'ClassRef':M,'execute':_0x1509ee=>le['fetchInstances'](_0x1509ee)});return _0x26d3f4[_0x49997b(0x7ce)](0xc8)[_0x49997b(0x52f)](_0xdba97a);})[_0x565dca(0x6d0)](this[_0x565dca(0x355)]('logout'),..._0xe2eab6,async(_0x56df27,_0x1c2ea8)=>{const _0x1a042a=_0x565dca;let _0x2b715d=await this[_0x1a042a(0x2c7)]({'request':_0x56df27,'schema':v,'ClassRef':M,'execute':_0x5413ad=>le[_0x1a042a(0x484)](_0x5413ad)});return _0x1c2ea8[_0x1a042a(0x7ce)](0xc8)[_0x1a042a(0x52f)](_0x2b715d);})['delete'](this['routerPath'](_0x565dca(0x6d0)),..._0xe2eab6,async(_0x3895ee,_0x2980c2)=>{const _0x8c8ba1=_0x565dca;let _0x42ecb3=await this[_0x8c8ba1(0x2c7)]({'request':_0x3895ee,'schema':v,'ClassRef':M,'execute':_0x2c425d=>le[_0x8c8ba1(0x6ad)](_0x2c425d)});return _0x2980c2[_0x8c8ba1(0x7ce)](0xc8)['json'](_0x42ecb3);});}},hi=require(a0_0x98996d(0x628)),Es=class{},z=class extends Es{},ft=class extends z{},wt=class extends z{},yt=class extends z{},bt=class extends z{},_e=class extends z{},St=class extends z{},Mt=class extends z{},Ct=class extends z{},Et=class extends z{},vt=class extends z{},Nt=class{},$t=class extends V{constructor(..._0x1bd0f6){const _0x573e8e=a0_0x98996d;super(),this[_0x573e8e(0x53e)]=(0x0,hi[_0x573e8e(0x7bf)])(),this[_0x573e8e(0x53e)][_0x573e8e(0x64e)](this['routerPath']('sendText'),..._0x1bd0f6,async(_0x34dc4a,_0x131527)=>{const _0xcd4586=_0x573e8e;let _0x5cf24d=await this[_0xcd4586(0x2c7)]({'request':_0x34dc4a,'schema':Oa,'ClassRef':ft,'execute':(_0x369cc0,_0x4de806)=>B['sendText'](_0x369cc0,_0x4de806)});return _0x131527['status'](0xc9)[_0xcd4586(0x52f)](_0x5cf24d);})['post'](this['routerPath'](_0x573e8e(0x4d5)),..._0x1bd0f6,async(_0x38ec20,_0x121838)=>{const _0x3cb123=_0x573e8e;let _0x498ffe=await this[_0x3cb123(0x2c7)]({'request':_0x38ec20,'schema':Pa,'ClassRef':_e,'execute':(_0xed0636,_0x5b172f)=>B[_0x3cb123(0x4d5)](_0xed0636,_0x5b172f)});return _0x121838[_0x3cb123(0x7ce)](0xc9)[_0x3cb123(0x52f)](_0x498ffe);})[_0x573e8e(0x64e)](this['routerPath']('sendMenu'),..._0x1bd0f6,async(_0x52339b,_0x225ee5)=>{const _0x4df45d=_0x573e8e;let _0x30661d=await this[_0x4df45d(0x2c7)]({'request':_0x52339b,'schema':Fa,'ClassRef':bt,'execute':(_0xcd2b48,_0x38b228)=>B['sendMenu'](_0xcd2b48,_0x38b228)});return _0x225ee5[_0x4df45d(0x7ce)](0xc9)[_0x4df45d(0x52f)](_0x30661d);})[_0x573e8e(0x64e)](this['routerPath'](_0x573e8e(0x124)),..._0x1bd0f6,async(_0x46e9e6,_0x4de2de)=>{const _0x4f588d=_0x573e8e;let _0x47aecf=await this['dataValidate']({'request':_0x46e9e6,'schema':ka,'ClassRef':_e,'execute':(_0x4c9fd4,_0x31d132)=>B[_0x4f588d(0x124)](_0x4c9fd4,_0x31d132)});return _0x4de2de[_0x4f588d(0x7ce)](0xc9)['json'](_0x47aecf);})['post'](this[_0x573e8e(0x355)](_0x573e8e(0x20c)),..._0x1bd0f6,async(_0x7f3b9c,_0x33dba6)=>{const _0x163ca2=_0x573e8e;let _0x7138c6=await this['dataValidate']({'request':_0x7f3b9c,'schema':Ua,'ClassRef':Mt,'execute':(_0x4612c1,_0x821fcd)=>B[_0x163ca2(0x20c)](_0x4612c1,_0x821fcd)});return _0x33dba6['status'](0xc9)[_0x163ca2(0x52f)](_0x7138c6);})[_0x573e8e(0x64e)](this[_0x573e8e(0x355)](_0x573e8e(0x6d3)),..._0x1bd0f6,async(_0x3b3750,_0x27aea9)=>{const _0x3085be=_0x573e8e;let _0x57316c=await this['dataValidate']({'request':_0x3b3750,'schema':ja,'ClassRef':Ct,'execute':(_0x1f2049,_0x5f1e39)=>B[_0x3085be(0x6d3)](_0x1f2049,_0x5f1e39)});return _0x27aea9[_0x3085be(0x7ce)](0xc9)[_0x3085be(0x52f)](_0x57316c);})[_0x573e8e(0x64e)](this['routerPath'](_0x573e8e(0x5b8)),..._0x1bd0f6,async(_0x4e2985,_0x5e6088)=>{const _0x2d80b9=_0x573e8e;let _0x3bdf89=await this[_0x2d80b9(0x2c7)]({'request':_0x4e2985,'schema':Ja,'ClassRef':Et,'execute':(_0xfa42d,_0x458bf5)=>B['sendList'](_0xfa42d,_0x458bf5)});return _0x5e6088['status'](0xc9)[_0x2d80b9(0x52f)](_0x3bdf89);})[_0x573e8e(0x64e)](this[_0x573e8e(0x355)](_0x573e8e(0x7de)),..._0x1bd0f6,async(_0x4850a9,_0x3aba39)=>{const _0x14c596=_0x573e8e;let _0x5327bd=await this['dataValidate']({'request':_0x4850a9,'schema':qa,'ClassRef':vt,'execute':(_0x5ca160,_0x2d491f)=>B[_0x14c596(0x7de)](_0x5ca160,_0x2d491f)});return _0x3aba39['status'](0xc9)[_0x14c596(0x52f)](_0x5327bd);})[_0x573e8e(0x64e)](this['routerPath']('sendReaction'),..._0x1bd0f6,async(_0x5f1fc1,_0x4fd8d3)=>{const _0x56b80a=_0x573e8e;let _0x2176ea=await this['dataValidate']({'request':_0x5f1fc1,'schema':Va,'ClassRef':Nt,'execute':(_0x171755,_0x4a711d)=>B[_0x56b80a(0x2ac)](_0x171755,_0x4a711d)});return _0x4fd8d3[_0x56b80a(0x7ce)](0xc9)['json'](_0x2176ea);})[_0x573e8e(0x64e)](this[_0x573e8e(0x355)]('sendPoll'),..._0x1bd0f6,async(_0x63e53,_0x40b0a2)=>{const _0x452dd6=_0x573e8e;let _0x165692=await this[_0x452dd6(0x2c7)]({'request':_0x63e53,'schema':La,'ClassRef':yt,'execute':(_0x52c1f9,_0x4db2bc)=>B[_0x452dd6(0x4b8)](_0x52c1f9,_0x4db2bc)});return _0x40b0a2[_0x452dd6(0x7ce)](0xc9)[_0x452dd6(0x52f)](_0x165692);})[_0x573e8e(0x64e)](this[_0x573e8e(0x355)](_0x573e8e(0x485)),..._0x1bd0f6,async(_0x461ae3,_0x2d4838)=>{const _0x465c2a=_0x573e8e;let _0x370035=await this[_0x465c2a(0x2c7)]({'request':_0x461ae3,'schema':Da,'ClassRef':wt,'execute':(_0x513b54,_0x5a9b7b)=>B[_0x465c2a(0x485)](_0x513b54,_0x5a9b7b)});return _0x2d4838['status'](0xc9)[_0x465c2a(0x52f)](_0x370035);})[_0x573e8e(0x64e)](this[_0x573e8e(0x355)](_0x573e8e(0x2da)),..._0x1bd0f6,async(_0x2e47e3,_0x3da6d7)=>{const _0x2fde73=_0x573e8e;let _0x18b166=await this['dataValidate']({'request':_0x2e47e3,'schema':xa,'ClassRef':St,'execute':(_0x1b11a4,_0x2f6cc2)=>B[_0x2fde73(0x2da)](_0x1b11a4,_0x2f6cc2)});return _0x3da6d7[_0x2fde73(0x7ce)](0xc9)[_0x2fde73(0x52f)](_0x18b166);});}},gi=require(a0_0x98996d(0x628)),Rt=class{},At=class extends V{constructor(..._0x578ccd){const _0x3eabd8=a0_0x98996d;super(),this[_0x3eabd8(0x53e)]=(0x0,gi[_0x3eabd8(0x7bf)])(),this['router'][_0x3eabd8(0x64e)](this['routerPath'](_0x3eabd8(0x325)),..._0x578ccd,async(_0x46ae66,_0x2ed202)=>{const _0x1ffbc6=_0x3eabd8;let _0x29fdf9=await this[_0x1ffbc6(0x2c7)]({'request':_0x46ae66,'schema':li,'ClassRef':Rt,'execute':(_0x9b0c8f,_0x1406b4)=>vs[_0x1ffbc6(0x3e7)](_0x9b0c8f,_0x1406b4)});_0x2ed202[_0x1ffbc6(0x7ce)](0xc9)['json'](_0x29fdf9);})[_0x3eabd8(0x651)](this['routerPath'](_0x3eabd8(0x704)),..._0x578ccd,async(_0x23f89b,_0x20a924)=>{const _0x4004f1=_0x3eabd8;let _0x1d7b6f=await this['dataValidate']({'request':_0x23f89b,'schema':v,'ClassRef':M,'execute':_0x46d299=>vs[_0x4004f1(0x3e9)](_0x46d299)});_0x20a924[_0x4004f1(0x7ce)](0xc8)[_0x4004f1(0x52f)](_0x1d7b6f);});}},mi=require(a0_0x98996d(0x628)),y=new N(a0_0x98996d(0x848)),It=class extends V{constructor(..._0x4652d7){const _0x37b739=a0_0x98996d;super(),this['router']=(0x0,mi['Router'])(),this[_0x37b739(0x53e)][_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x2a3)),..._0x4652d7,async(_0x15608d,_0x9b8cb8)=>{const _0x371547=_0x37b739;let _0x4b995e=_0x15608d[_0x371547(0x13e)];y[_0x371547(0x2a0)](_0x371547(0x324)),y[_0x371547(0x2a0)](_0x371547(0x3d2)),y[_0x371547(0x2a0)](_0x15608d[_0x371547(0x13e)]);let _0x1b9437=await this[_0x371547(0x2c7)]({'request':_0x15608d,'schema':v,'ClassRef':M,'execute':_0x5f2a46=>I['editScheduleMessage'](_0x5f2a46,_0x4b995e)});_0x9b8cb8[_0x371547(0x7ce)](0xc8)[_0x371547(0x52f)](_0x1b9437);})['get'](this['routerPath']('scheduleMessage'),..._0x4652d7,async(_0x5cfcdf,_0x396e9d)=>{const _0x53a8d1=_0x37b739;let _0x597f17=await this['dataValidate']({'request':_0x5cfcdf,'schema':v,'ClassRef':M,'execute':_0x4edd54=>I['getScheduleMessage'](_0x4edd54)});_0x396e9d[_0x53a8d1(0x7ce)](0xc8)[_0x53a8d1(0x52f)](_0x597f17);})['delete'](this[_0x37b739(0x355)](_0x37b739(0x241)),..._0x4652d7,async(_0x46fdd2,_0x5da905)=>{const _0x2be999=_0x37b739;y['verbose'](_0x2be999(0x3ec));let _0x47132f=await this['dataValidate']({'request':_0x46fdd2,'schema':v,'ClassRef':M,'execute':_0xd38f90=>I[_0x2be999(0x241)](_0xd38f90)});_0x5da905[_0x2be999(0x7ce)](0xc8)[_0x2be999(0x52f)](_0x47132f);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x2a2)),..._0x4652d7,async(_0x29744b,_0x207475)=>{const _0x1ee64a=_0x37b739;let _0x1142ea=_0x29744b[_0x1ee64a(0x13e)];y[_0x1ee64a(0x2a0)](_0x1ee64a(0x133)),y[_0x1ee64a(0x2a0)](_0x1ee64a(0x3d2)),y[_0x1ee64a(0x2a0)](_0x29744b[_0x1ee64a(0x13e)]);let _0x33e8c6=await this[_0x1ee64a(0x2c7)]({'request':_0x29744b,'schema':v,'ClassRef':M,'execute':_0x1c6d53=>I[_0x1ee64a(0x2a2)](_0x1c6d53,_0x1142ea)});_0x207475[_0x1ee64a(0x7ce)](0xc8)[_0x1ee64a(0x52f)](_0x33e8c6);})[_0x37b739(0x651)](this[_0x37b739(0x355)]('getAutomateSystem'),..._0x4652d7,async(_0x6d4bae,_0x30598c)=>{const _0x2547bb=_0x37b739;y[_0x2547bb(0x2a0)]('request\x20received\x20in\x20getAutomateSystem');let _0x44677b=await this[_0x2547bb(0x2c7)]({'request':_0x6d4bae,'schema':v,'ClassRef':M,'execute':_0x478e49=>I[_0x2547bb(0x472)](_0x478e49)});_0x30598c[_0x2547bb(0x7ce)](0xc8)[_0x2547bb(0x52f)](_0x44677b);})[_0x37b739(0x651)](this[_0x37b739(0x355)]('getTicketSystem'),..._0x4652d7,async(_0x15c554,_0x2e009c)=>{const _0x51c1be=_0x37b739;y[_0x51c1be(0x2a0)](_0x51c1be(0x2f2));let _0x43e2e0=await this[_0x51c1be(0x2c7)]({'request':_0x15c554,'schema':v,'ClassRef':M,'execute':_0x32abc9=>I[_0x51c1be(0x472)](_0x32abc9)});_0x2e009c['status'](0xc8)[_0x51c1be(0x52f)](_0x43e2e0);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x545)),..._0x4652d7,async(_0x59d71d,_0x3df1ee)=>{const _0x43dac1=_0x37b739;let _0x9e36f5=_0x59d71d[_0x43dac1(0x13e)];y[_0x43dac1(0x2a0)](_0x43dac1(0x45b)),y[_0x43dac1(0x2a0)](_0x43dac1(0x3d2)),y[_0x43dac1(0x2a0)](_0x59d71d[_0x43dac1(0x13e)]);let _0x1495a=await this[_0x43dac1(0x2c7)]({'request':_0x59d71d,'schema':v,'ClassRef':M,'execute':_0x502f91=>I[_0x43dac1(0x545)](_0x502f91,_0x9e36f5)});_0x3df1ee['status'](0xc8)[_0x43dac1(0x52f)](_0x1495a);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x441)),..._0x4652d7,async(_0x7002c9,_0x81309f)=>{const _0x3426ee=_0x37b739;let _0x61aff8=_0x7002c9[_0x3426ee(0x13e)];y[_0x3426ee(0x2a0)]('request\x20received\x20in\x20updateCustomFields'),y[_0x3426ee(0x2a0)](_0x3426ee(0x3d2)),y[_0x3426ee(0x2a0)](_0x7002c9['body']);let _0x5939b6=await this[_0x3426ee(0x2c7)]({'request':_0x7002c9,'schema':v,'ClassRef':M,'execute':_0x611572=>I[_0x3426ee(0x441)](_0x611572,_0x61aff8)});_0x81309f[_0x3426ee(0x7ce)](0xc8)['json'](_0x5939b6);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x701)),..._0x4652d7,async(_0x345731,_0x194b20)=>{const _0x5aa96f=_0x37b739;let _0xdfbd13=_0x345731[_0x5aa96f(0x13e)];y[_0x5aa96f(0x2a0)](_0x5aa96f(0x3c4)),y[_0x5aa96f(0x2a0)](_0x5aa96f(0x3d2)),y[_0x5aa96f(0x2a0)](_0x345731[_0x5aa96f(0x13e)]);let _0x43577c=await this['dataValidate']({'request':_0x345731,'schema':v,'ClassRef':M,'execute':_0x13af14=>I[_0x5aa96f(0x701)](_0x13af14,_0xdfbd13)});_0x194b20['status'](0xc8)['json'](_0x43577c);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x6f2)),..._0x4652d7,async(_0x41c07b,_0x457479)=>{const _0x1ebe45=_0x37b739;let _0x308549=_0x41c07b[_0x1ebe45(0x13e)];y[_0x1ebe45(0x2a0)](_0x1ebe45(0x677)),y['verbose']('request\x20body:\x20'),y[_0x1ebe45(0x2a0)](_0x41c07b[_0x1ebe45(0x13e)]);let _0x11aba2=await this[_0x1ebe45(0x2c7)]({'request':_0x41c07b,'schema':v,'ClassRef':M,'execute':_0x580357=>I[_0x1ebe45(0x6f2)](_0x580357,_0x308549)});_0x457479[_0x1ebe45(0x7ce)](0xc8)[_0x1ebe45(0x52f)](_0x11aba2);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x318)),..._0x4652d7,async(_0x42a79b,_0x29f495)=>{const _0xa2a99a=_0x37b739;let _0x554a49=_0x42a79b[_0xa2a99a(0x13e)];y[_0xa2a99a(0x2a0)](_0xa2a99a(0x3c9)),y[_0xa2a99a(0x2a0)]('request\x20body:\x20'),y['verbose'](_0x42a79b[_0xa2a99a(0x13e)]);let _0x484635=await this[_0xa2a99a(0x2c7)]({'request':_0x42a79b,'schema':v,'ClassRef':M,'execute':_0x526d7b=>I[_0xa2a99a(0x318)](_0x526d7b,_0x554a49)});_0x29f495[_0xa2a99a(0x7ce)](0xc8)['json'](_0x484635);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x152)),..._0x4652d7,async(_0x1a36ad,_0xa01ab2)=>{const _0x375bd9=_0x37b739;let _0x13590b=_0x1a36ad['body'];y['verbose'](_0x375bd9(0x774)),y['verbose'](_0x375bd9(0x3d2)),y['verbose'](_0x1a36ad[_0x375bd9(0x13e)]);let _0x208ea6=await this[_0x375bd9(0x2c7)]({'request':_0x1a36ad,'schema':v,'ClassRef':M,'execute':_0x219a25=>I[_0x375bd9(0x152)](_0x219a25,_0x13590b)});_0xa01ab2[_0x375bd9(0x7ce)](0xc8)['json'](_0x208ea6);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x359)),..._0x4652d7,async(_0xddfdec,_0x285330)=>{const _0x5ee360=_0x37b739;let _0x45cf0b=_0xddfdec['body'];y[_0x5ee360(0x2a0)](_0x5ee360(0x3a2)),y['verbose'](_0x5ee360(0x3d2)),y[_0x5ee360(0x2a0)](_0xddfdec['body']);let _0xd77fb8=await this[_0x5ee360(0x2c7)]({'request':_0xddfdec,'schema':v,'ClassRef':M,'execute':_0xbc8c03=>I[_0x5ee360(0x359)](_0xbc8c03,_0x45cf0b)});_0x285330[_0x5ee360(0x7ce)](0xc8)[_0x5ee360(0x52f)](_0xd77fb8);})['delete'](this[_0x37b739(0x355)](_0x37b739(0x5a8)),..._0x4652d7,async(_0x18f171,_0x3d625b)=>{const _0x31f4bb=_0x37b739;let _0x4926af=_0x18f171[_0x31f4bb(0x13e)];y[_0x31f4bb(0x2a0)](_0x31f4bb(0x67d)),y[_0x31f4bb(0x2a0)]('request\x20body:\x20'),y[_0x31f4bb(0x2a0)](_0x18f171['body']);let _0x4f0bf8=await this[_0x31f4bb(0x2c7)]({'request':_0x18f171,'schema':v,'ClassRef':M,'execute':_0x589066=>I[_0x31f4bb(0x5a8)](_0x589066,_0x4926af)});_0x3d625b[_0x31f4bb(0x7ce)](0xc8)[_0x31f4bb(0x52f)](_0x4f0bf8);})['post'](this[_0x37b739(0x355)](_0x37b739(0x800)),..._0x4652d7,async(_0x2bf7f0,_0x272165)=>{const _0x19309f=_0x37b739;let _0x1242d9=_0x2bf7f0['body'],_0x15703c=_0x2bf7f0['headers'][_0x19309f(0x127)];y[_0x19309f(0x2a0)]('request\x20received\x20in\x20createFlow'),y[_0x19309f(0x2a0)]('request\x20body:\x20'),y['verbose'](_0x2bf7f0[_0x19309f(0x13e)]);let _0x2f8dae=await this['dataValidate']({'request':_0x2bf7f0,'schema':v,'ClassRef':M,'execute':_0x329033=>I[_0x19309f(0x3a5)](_0x329033,_0x1242d9,_0x15703c)});_0x272165[_0x19309f(0x7ce)](0xc8)[_0x19309f(0x52f)](_0x2f8dae);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x7ba)),..._0x4652d7,async(_0x189e80,_0x21abc4)=>{const _0x3a3d7d=_0x37b739;let _0xb81622=_0x189e80[_0x3a3d7d(0x13e)],_0x2e918c=_0x189e80[_0x3a3d7d(0x57b)][_0x3a3d7d(0x127)];y['verbose'](_0x3a3d7d(0x605)),y[_0x3a3d7d(0x2a0)](_0x3a3d7d(0x3d2)),y[_0x3a3d7d(0x2a0)](_0x189e80[_0x3a3d7d(0x13e)]),delete _0xb81622[_0x3a3d7d(0x740)],delete _0xb81622[_0x3a3d7d(0x68f)],delete _0xb81622[_0x3a3d7d(0x765)],delete _0xb81622[_0x3a3d7d(0x84c)];let _0x2270f0=await this[_0x3a3d7d(0x2c7)]({'request':_0x189e80,'schema':v,'ClassRef':M,'execute':_0x32ab0d=>I[_0x3a3d7d(0x811)](_0x32ab0d,_0xb81622,_0x2e918c)});_0x21abc4['status'](0xc8)['json'](_0x2270f0);})[_0x37b739(0x64e)](this[_0x37b739(0x355)]('editflowblock'),..._0x4652d7,async(_0x321aee,_0x3f3523)=>{const _0x51b996=_0x37b739;let _0x2cc677=_0x321aee[_0x51b996(0x13e)];y[_0x51b996(0x2a0)](_0x51b996(0x605)),y[_0x51b996(0x2a0)](_0x51b996(0x3d2)),y['verbose'](_0x321aee['body']);let _0x886c3e=await this[_0x51b996(0x2c7)]({'request':_0x321aee,'schema':v,'ClassRef':M,'execute':_0x1c13b1=>I[_0x51b996(0x7c9)](_0x1c13b1,_0x2cc677)});_0x3f3523[_0x51b996(0x7ce)](0xc8)[_0x51b996(0x52f)](_0x886c3e);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x333)),..._0x4652d7,async(_0x2150f2,_0x522275)=>{const _0x20d829=_0x37b739;let _0x2e0808=_0x2150f2[_0x20d829(0x13e)];y[_0x20d829(0x2a0)]('request\x20received\x20in\x20editFlow'),y[_0x20d829(0x2a0)]('request\x20body:\x20'),y[_0x20d829(0x2a0)](_0x2150f2[_0x20d829(0x13e)]);let _0x2b6390=await this[_0x20d829(0x2c7)]({'request':_0x2150f2,'schema':v,'ClassRef':M,'execute':_0x4c5d4d=>I['editFlowReply'](_0x4c5d4d,_0x2e0808)});_0x522275[_0x20d829(0x7ce)](0xc8)[_0x20d829(0x52f)](_0x2b6390);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x696)),..._0x4652d7,async(_0x1ecc0d,_0x3de781)=>{const _0x184435=_0x37b739;let _0x2e0fe5=_0x1ecc0d[_0x184435(0x13e)];y['verbose']('request\x20received\x20in\x20editFlow'),y[_0x184435(0x2a0)](_0x184435(0x3d2)),y[_0x184435(0x2a0)](_0x1ecc0d[_0x184435(0x13e)]);let _0xfd8b1a=await this['dataValidate']({'request':_0x1ecc0d,'schema':v,'ClassRef':M,'execute':_0xc9fee5=>I[_0x184435(0x503)](_0xc9fee5,_0x2e0fe5)});_0x3de781[_0x184435(0x7ce)](0xc8)[_0x184435(0x52f)](_0xfd8b1a);})['post'](this[_0x37b739(0x355)](_0x37b739(0x31a)),..._0x4652d7,async(_0x1a6fac,_0x125375)=>{const _0x5d128f=_0x37b739;let _0x2dcfca=_0x1a6fac[_0x5d128f(0x13e)];y[_0x5d128f(0x2a0)](_0x5d128f(0x378)),y['verbose'](_0x5d128f(0x3d2)),y[_0x5d128f(0x2a0)](_0x1a6fac[_0x5d128f(0x13e)]);let _0x4a596c=await this['dataValidate']({'request':_0x1a6fac,'schema':v,'ClassRef':M,'execute':_0x4f3142=>I[_0x5d128f(0x5ad)](_0x4f3142,_0x2dcfca)});_0x125375[_0x5d128f(0x7ce)](0xc8)[_0x5d128f(0x52f)](_0x4a596c);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x444)),..._0x4652d7,async(_0x22e980,_0x305cb0)=>{const _0x342c15=_0x37b739;let _0x2f3474=_0x22e980[_0x342c15(0x13e)];y['verbose'](_0x342c15(0x393)),y['verbose'](_0x342c15(0x3d2)),y['verbose'](_0x22e980[_0x342c15(0x13e)]);let _0x6ad75d=await this[_0x342c15(0x2c7)]({'request':_0x22e980,'schema':v,'ClassRef':M,'execute':_0xa6abd2=>I[_0x342c15(0x674)](_0xa6abd2,_0x2f3474)});_0x305cb0[_0x342c15(0x7ce)](0xc8)['json'](_0x6ad75d);})['post'](this[_0x37b739(0x355)](_0x37b739(0x39d)),..._0x4652d7,async(_0x45a197,_0x3e7276)=>{const _0x24a0e2=_0x37b739;let _0x3a2842=_0x45a197['body'];y[_0x24a0e2(0x2a0)]('request\x20received\x20in\x20editFlowvariable'),y[_0x24a0e2(0x2a0)](_0x24a0e2(0x3d2)),y['verbose'](_0x45a197[_0x24a0e2(0x13e)]);let _0x41fab6=await this[_0x24a0e2(0x2c7)]({'request':_0x45a197,'schema':v,'ClassRef':M,'execute':_0xca19ae=>I['editFlowVariable'](_0xca19ae,_0x3a2842)});_0x3e7276[_0x24a0e2(0x7ce)](0xc8)[_0x24a0e2(0x52f)](_0x41fab6);})[_0x37b739(0x64e)](this[_0x37b739(0x355)](_0x37b739(0x51e)),..._0x4652d7,async(_0x11cbfb,_0xa4f5ad)=>{const _0xaf503e=_0x37b739;let _0x57f8b8=_0x11cbfb[_0xaf503e(0x13e)];y[_0xaf503e(0x2a0)](_0xaf503e(0x825)),y[_0xaf503e(0x2a0)]('request\x20body:\x20'),y['verbose'](_0x11cbfb[_0xaf503e(0x13e)]);let _0x525ab8=await this['dataValidate']({'request':_0x11cbfb,'schema':v,'ClassRef':M,'execute':_0x32ae26=>I[_0xaf503e(0x283)](_0x32ae26,_0x57f8b8)});_0xa4f5ad[_0xaf503e(0x7ce)](0xc8)[_0xaf503e(0x52f)](_0x525ab8);})[_0x37b739(0x6d0)](this[_0x37b739(0x355)](_0x37b739(0x608)),..._0x4652d7,async(_0x766ef4,_0x2d403b)=>{const _0x29be33=_0x37b739;let _0x12fac0=_0x766ef4[_0x29be33(0x13e)];y[_0x29be33(0x2a0)]('request\x20received\x20in\x20deleteFlow'),y[_0x29be33(0x2a0)](_0x29be33(0x3d2)),y[_0x29be33(0x2a0)](_0x766ef4[_0x29be33(0x13e)]);let _0x1e4933=await this[_0x29be33(0x2c7)]({'request':_0x766ef4,'schema':v,'ClassRef':M,'execute':_0x5d3271=>I[_0x29be33(0x44f)](_0x5d3271,_0x12fac0)});_0x2d403b[_0x29be33(0x7ce)](0xc8)[_0x29be33(0x52f)](_0x1e4933);})[_0x37b739(0x651)](this[_0x37b739(0x355)]('allflows'),..._0x4652d7,async(_0x5db9af,_0x115f30)=>{const _0x3e801f=_0x37b739;y[_0x3e801f(0x2a0)](_0x3e801f(0x221));let _0x34a92d=await this[_0x3e801f(0x2c7)]({'request':_0x5db9af,'schema':v,'ClassRef':M,'execute':_0x296534=>I[_0x3e801f(0x28c)](_0x296534)});_0x115f30[_0x3e801f(0x7ce)](0xc8)[_0x3e801f(0x52f)](_0x34a92d);});}},bi=R(require(a0_0x98996d(0x3ab))),te={};function fi(_0x1cf532,_0x3a0e2e,_0x4374d,_0x3b1aec){te[_0x1cf532]||(te[_0x1cf532]={}),te[_0x1cf532][_0x3a0e2e]={'id':_0x3a0e2e,'response':_0x4374d,'events':_0x3b1aec};}function wi(_0x57a74f,_0x1ee26c){!te[_0x57a74f]||!te[_0x57a74f][_0x1ee26c]||delete te[_0x57a74f][_0x1ee26c];}function U(_0x20b122,_0x4a06f4,_0x18e68d){const _0x31ebee=a0_0x98996d;if(!te[_0x20b122])return;let _0x2c30da=_0x31ebee(0x224)+JSON[_0x31ebee(0x5ab)](_0x18e68d)+'\x0a\x0a';Object[_0x31ebee(0x5ba)](te[_0x20b122])[_0x31ebee(0x15b)](_0x27fb1c=>{const _0x4c3ca4=_0x31ebee;_0x27fb1c['events'][_0x4c3ca4(0x199)](_0x4a06f4)&&_0x27fb1c[_0x4c3ca4(0x3bf)][_0x4c3ca4(0x478)](_0x2c30da);});}function yi(){const _0x421dd3=a0_0x98996d;let _0x49a367={};for(let _0x58982c in te)_0x49a367[_0x58982c]=Object[_0x421dd3(0x5ba)](te[_0x58982c])[_0x421dd3(0x384)](_0x32de91=>({'id':_0x32de91['id'],'events':_0x32de91['events']}));return _0x49a367;}var Si=require('uuid'),$s=require(a0_0x98996d(0x41e)),Ns=class{},Ro=new $s['Schema']({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),Ao=new $s[(a0_0x98996d(0x847))]({'_id':{'type':String,'default':a0_0x98996d(0x6f3)},'WebhookGlobal':{'type':Ro},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Se=$?.[a0_0x98996d(0x498)](Ns['name'],Ao,a0_0x98996d(0x805)),Io=bi[a0_0x98996d(0x36a)][a0_0x98996d(0x38e)](__dirname,a0_0x98996d(0x1f6)),xe=(0x0,Tt[a0_0x98996d(0x7bf)])(),To=b[a0_0x98996d(0x651)]('AUTHENTICATION')[a0_0x98996d(0x5dd)],oe=[Na,$a,Ia[To]];xe['use'](a0_0x98996d(0x604),Tt[a0_0x98996d(0x36a)][a0_0x98996d(0x203)](Io))[a0_0x98996d(0x651)]('/events/:instance',async(_0x5af8e8,_0x32ecc6)=>{const _0x5c1d2d=a0_0x98996d;console[_0x5c1d2d(0x26d)](_0x5c1d2d(0x33d));let _0x7f4052=_0x5af8e8[_0x5c1d2d(0x550)]['instance'],_0x3466f9=(_0x5af8e8['query'][_0x5c1d2d(0x2b6)]||'')['split'](','),_0x43648a=(0x0,Si['v4'])();console[_0x5c1d2d(0x26d)](_0x5c1d2d(0x3fb),_0x7f4052),console['log'](_0x5c1d2d(0x6de),_0x3466f9);let _0x5cefbb=b[_0x5c1d2d(0x651)]('AUTHENTICATION')['API_KEY'],_0x45bf42=_0x5af8e8['query'][_0x5c1d2d(0x127)];if(console[_0x5c1d2d(0x26d)](_0x5c1d2d(0x518),_0x45bf42),_0x5cefbb[_0x5c1d2d(0x2d4)]!==_0x45bf42){console['log']('env.KEY\x20!==\x20key');try{let _0x1178e6=await he[_0x5c1d2d(0x34c)]['find'](_0x7f4052);if(console['log']('Instance\x20Key\x20from\x20DB:',_0x1178e6),!_0x1178e6||_0x1178e6[_0x5c1d2d(0x127)]!==_0x45bf42)return console['log'](_0x5c1d2d(0x7aa)),_0x32ecc6[_0x5c1d2d(0x7ce)](0x191)[_0x5c1d2d(0x329)](_0x5c1d2d(0x793));}catch(_0x1c6bc8){return console[_0x5c1d2d(0x5c5)](_0x5c1d2d(0x5f7),_0x1c6bc8),_0x32ecc6['status'](0x191)['send'](_0x5c1d2d(0x661));}}if(!await Ae(_0x7f4052))return _0x32ecc6[_0x5c1d2d(0x7ce)](0x194)[_0x5c1d2d(0x329)]('Instncia\x20no\x20encontrada.');_0x32ecc6[_0x5c1d2d(0x70a)](_0x5c1d2d(0x28e),_0x5c1d2d(0x57f)),_0x32ecc6[_0x5c1d2d(0x70a)](_0x5c1d2d(0x408),_0x5c1d2d(0x3c0)),_0x32ecc6[_0x5c1d2d(0x70a)](_0x5c1d2d(0x482),_0x5c1d2d(0x1b9)),_0x32ecc6[_0x5c1d2d(0x368)]();let _0xb85dfa='data:\x20'+JSON[_0x5c1d2d(0x5ab)]({'info':_0x5c1d2d(0x1ee)})+'\x0a\x0a';_0x32ecc6[_0x5c1d2d(0x478)](_0xb85dfa),fi(_0x7f4052,_0x43648a,_0x32ecc6,_0x3466f9),_0x5af8e8['on'](_0x5c1d2d(0x358),()=>{const _0x304081=_0x5c1d2d;console[_0x304081(0x26d)]('Connection\x20closed\x20for\x20instance:\x20'+_0x7f4052),wi(_0x7f4052,_0x43648a);});}),xe[a0_0x98996d(0x64e)]('/startFlow/:instance/:startID',async(_0x22ae19,_0x3ae1d0)=>{const _0x527550=a0_0x98996d;console[_0x527550(0x26d)](_0x527550(0x655));let _0x5d7ec5=_0x22ae19['params'][_0x527550(0x78a)],_0x1b1f28=_0x22ae19[_0x527550(0x550)][_0x527550(0x6c4)],_0x1f9f91=_0x22ae19['query'][_0x527550(0x5d9)]||'',_0x40a67e=_0x22ae19['body'];console[_0x527550(0x26d)]('Instance\x20Name:',_0x5d7ec5),console[_0x527550(0x26d)](_0x527550(0x49e),_0x1b1f28),console[_0x527550(0x26d)](_0x527550(0x483),_0x1f9f91),console[_0x527550(0x26d)](_0x527550(0x540),_0x40a67e);try{if(!await Ae(_0x5d7ec5))return _0x3ae1d0[_0x527550(0x7ce)](0x194)[_0x527550(0x329)](_0x527550(0x4ef));let _0x171440=await I[_0x527550(0x73e)](_0x5d7ec5,_0x1b1f28,_0x1f9f91,_0x40a67e);_0x3ae1d0[_0x527550(0x329)](_0x171440);}catch(_0x2cd079){console[_0x527550(0x5c5)](_0x2cd079),_0x3ae1d0[_0x527550(0x7ce)](0x1f4)['send'](_0x527550(0x294));}}),xe['get']('/clients-info',(_0x5d9502,_0x16351e)=>{let _0x308365=yi();_0x16351e['json'](_0x308365);})[a0_0x98996d(0x651)]('/',(_0x13614f,_0x38524b)=>{const _0x2fb565=a0_0x98996d;let _0x22cc7a=b['get']('SERVER')[_0x2fb565(0x11d)];if(_0x22cc7a){let _0x5bf58d=encodeURIComponent(''+_0x22cc7a);_0x38524b[_0x2fb565(0x67f)](_0x2fb565(0x36f)+_0x5bf58d);return;}let _0x454878=b[_0x2fb565(0x651)](_0x2fb565(0x752)),_0x3bab79=_0x454878&&_0x454878['FULLCHAIN'][_0x2fb565(0x4fb)]('/')[0x4];if(_0x3bab79){let _0x1117e1=encodeURIComponent('https://'+_0x3bab79);_0x38524b[_0x2fb565(0x67f)](_0x2fb565(0x36f)+_0x1117e1);}else _0x38524b[_0x2fb565(0x67f)](_0x2fb565(0x82a));})[a0_0x98996d(0x746)](a0_0x98996d(0x4bc),...oe,async(_0x217244,_0x3d70aa)=>{const _0x203e39=a0_0x98996d;try{console['log'](_0x203e39(0x813)),_0x3d70aa['status'](0xc8)[_0x203e39(0x52f)]({'message':_0x203e39(0x6ae)}),_0x3d70aa['on']('finish',()=>process[_0x203e39(0x17a)](0x0));}catch(_0x138dca){console[_0x203e39(0x5c5)](_0x203e39(0x126),_0x138dca),_0x3d70aa[_0x203e39(0x7ce)](0x1f4)['json']({'message':_0x203e39(0x429)});}})[a0_0x98996d(0x746)](a0_0x98996d(0x4cc),...oe,async(_0xbd7195,_0xe15f27)=>{const _0x4e44e7=a0_0x98996d;try{let _0x378fb=_0xbd7195[_0x4e44e7(0x13e)];await Se['updateOne']({},{'$set':_0x378fb},{'upsert':!0x0});let _0x1c311a=await Se['findOne']();_0xe15f27['json'](_0x1c311a);}catch(_0x2c1d2e){_0xe15f27[_0x4e44e7(0x7ce)](0x190)[_0x4e44e7(0x329)](_0x2c1d2e[_0x4e44e7(0x334)]);}})[a0_0x98996d(0x651)](a0_0x98996d(0x4cc),...oe,async(_0x33192e,_0x3f54f3)=>{const _0x4fe7cc=a0_0x98996d;try{let _0x316d61=await Se[_0x4fe7cc(0x218)]();if(!_0x316d61)return _0x3f54f3[_0x4fe7cc(0x52f)]({});_0x3f54f3[_0x4fe7cc(0x52f)](_0x316d61);}catch(_0x24f815){_0x3f54f3[_0x4fe7cc(0x7ce)](0x1f4)[_0x4fe7cc(0x329)](_0x24f815[_0x4fe7cc(0x334)]);}})[a0_0x98996d(0x48a)]('/instance',new mt(b,...oe)[a0_0x98996d(0x53e)])[a0_0x98996d(0x48a)](a0_0x98996d(0x63c),new $t(...oe)[a0_0x98996d(0x53e)])[a0_0x98996d(0x48a)](a0_0x98996d(0x501),new ot(...oe)[a0_0x98996d(0x53e)])['use'](a0_0x98996d(0x7b1),new gt(...oe)['router'])[a0_0x98996d(0x48a)](a0_0x98996d(0x365),new At(...oe)[a0_0x98996d(0x53e)])['use'](a0_0x98996d(0x369),new It(...oe)[a0_0x98996d(0x53e)]);function a0_0x2820(){const _0xbea584=['chats.update','variablesToObject','addBlock','removeChatLabel','Valor\x20invlido\x20para\x20formatao\x20brasileira:\x20','StatusJidList\x20is\x20required','createServer','upsertedCount','apirequest','unhandledRejection','atendimentoAberto','cleanDisconnectedInstances','instance','\x1b[43m','ini','):\x20Query\x20params:\x20','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20findAndUpdateCacheContact','O\x20campo\x20_id\x20\x20obrigatrio\x20para\x20editar\x20uma\x20conversa.','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','#d8e651','Erro\x20ao\x20aplicar\x20varedit:\x20','API\x20Key\x20invlida.','):\x20Flow\x20ativado\x20e\x20no\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificaes','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao.','/wa-contacts','contacts.update','Valor\x20da\x20URL\x20recuperada:','convert','BufferJSON','leadInfo.','/wa-connection-update','variablesNotFound',',\x20saindo.','readdirSync','GROUPS_UPSERT','function','fora\x20do\x20git','):\x20Atualizando\x20status\x20da\x20mensagem\x20','READ','splice','SERVER_URL','loadWebhook','Erro\x20ao\x20definir\x20instncias\x20como\x20desconectadas:','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','rowId','generateRandomIPv6','update','isBusiness','notMatchRegex','/group','):\x20Iniciando\x20scheduleNextCheck.','Parte\x20do\x20domnio\x20do\x20caminho\x20FULLCHAIN:','CONNECTION_UPDATE','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','\x1b[33m','\x27\x20no\x20encontrado','existsSync','findManyByIds','editflow','inet6','whoCanUse','updateMediaMessage','contactsArrayMessage','Router','CONTACTS_UPSERT','findChats','#9568cf','numbers','pollUpdateMessage','PRESENCE_UPDATE','.svg','findAndUpdateCacheContact','loggedOut','editFlowBlock','enabled','folder','Chat\x20no\x20existe,\x20use\x20a\x20funo\x20de\x20importar\x20para\x20cri-lo','\x20quoted:\x20','status','delayMessage','/wa-groups','lowerCase','sendAudio','Para\x20marcar\x20esse\x20fluxo\x20como\x20visvel\x20globalmente,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20Global.','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','DATABASE_CONNECTION_DB_PREFIX_NAME','fone','error\x20get\x20vote','action','proto','messageContextInfo','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','setRestartTimeout','enumerable','sendContact','findMany','Limpando\x20logs\x20do\x20PM2...','https://github.com/uazapi/uazapi.git','):\x20newFirstValue\x20aps\x20replaceVariables:','prototype','DB_PREFIX_NAME','):\x20teve\x20mudanas\x20chat.muteEndTime:\x20','ip6eui','):\x20Procurando\x20conversa','warn','ChatModel','\x20do\x20chat\x20','bodyStringErrorParse','autoCompleteMessages','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','Usando\x20IP\x20existente:\x20','waInstances','CONTACTS_UPDATE','shareOwners','reduce','Rtulo\x20deletado:\x27,\x20','value','\x27...','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','4161368UkjtJJ','CHATS_UPSERT','contextInfo','CLEANING_INTERVAL','ignoreGroups','replaceVariablesInObject','isRunning','chatId','[AUTH]\x20Database\x20is\x20not\x20enabled','createflow','convertaudio','writeFileSync','configureIPv6','):\x20Conversa\x20inserida\x20com\x20sucesso.','All_Instances_Config','findIndex','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','):\x20Entrou\x20na\x20funo\x20goToFlow','.png','Deletion\x20failed','label','getDelay','METHODS','Erro\x20ao\x20tentar\x20updateCustomFields','viewOnceMessageV2','saveConversationToDatabase','editFlow','chats','Encerrando\x20a\x20API\x20por\x20solicitao\x20via\x20rota\x20/exit','messages','#ffc5c7','):Notifying\x20clients\x20for\x20chat:\x20','#6f7bcf','fetchLabels','__esModule','Falha\x20ao\x20deletar\x20a\x20coleo\x20de\x20mensagens:\x20','queue','labels.association','):\x20delete\x20=\x20true','Background\x20color\x20is\x20required','):Audio\x20converted\x20and\x20stored\x20in\x20cache','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','extractRegex','padEnd','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','docker','request\x20received\x20in\x20getFlow','1239357uIxmoX','env','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','https://uazapi-plugin.bubbleapps.io/','Falha\x20ao\x20processar\x20fetchBusinessProfile','fetchProfilePicture','SERVER_TYPE','34423880dfAyfr','chatHandle','groupLeave','revokeInviteCode','chatModify','$addToSet','The\x20global\x20api\x20key\x20must\x20be\x20set','importChatsBatch','Falha\x20ao\x20processar\x20a\x20solicitao\x20inviteCode','context','):\x20Entrou\x20na\x20funo\x20saveReply','conversationTimestamp','reviver','groupDesc','groupJid','\x1b[34m%s\x1b[0m','groupadd','$set','\x20adicionado\x20ao\x20chat\x20','_activedCount','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','Falha\x20ao\x20processar\x20a\x20solicitao\x20removeProfilePicture','remove.instance','notas','Not\x20is\x20business\x20profile','Schema','FlowRouter','processvaredits','save','cacheContact','conditions','instanceName\x20not\x20provided.','getMIMEType','video','owner','PRIVKEY','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','sign','shift','client','createHash','/wa-message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','send.message','dbInstance','DATABASE_ENABLED','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','AUTHENTICATION_JWT_SECRET','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','ip:\x20','URL','pollMessageOnDelete','Network\x20Interface\x20detected:\x20','create','*Pergunta*:\x20\x0a','removeUnusedChatFields','MESSAGES_SET','sendWhatsAppAudio','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','apikey','):\x20Iniciando\x20bot...','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','apply','):Type\x20defined\x20as\x20audio','ButtonsMessage','enviado\x20para','has','CONNECTION','Internal\x20Server\x20Error','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','match','request\x20received\x20in\x20starFlow','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','notEqual','composing','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','\x1b[33m\x1b[1m','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','removeProfilePicture','cwd','getMessage','GROUPS_UPDATE','body','contact_blacklist','AutomateFunctions','CREDENTIALS','public','sendDataWebhook','reorderMessages','reconnectTimestamps','user','):\x20condies\x20no\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','groupHandler','connectedName','AUTHENTICATION_API_KEY','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','VERBOSE','triedToSend','STORE_MESSAGE','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','Fluxo\x20\x27','dbConnection','fetchConversation','updateMissingCustomFields','\x20minutos','.error',',\x20qrcodeCount:\x20','buttonMessage','mediaSticker','leaveGroup','replyOptions','forEach','uazapiDeleteMessage','webhook','\x5cd+','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','cacheInstanceRepository','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20','COLOR','quoted','flattenObject','awaitSeconds','ids','groupToggleEphemeral','groups_ignore','authState','empty','nome','reorderBlocks','DEBUG','waitingMenu_id','instanceInfo','string','none','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','readMessageBot','pow','sendMessageWithTyping','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','ListType','goToFlow','presenceSubscribe','exit','leadInfo.desativadoFluxoAte','whoCanEdit','loadInstance','Valor\x20invlido\x20para\x20converso\x20em\x20BRL:\x20','options','closeExistingConversations','8080','myAppStateKeyId','readMessages','parse','height','Error\x20finding\x20many\x20contacts:','view\x20engine','getBusinessProfile','unlinkSync','checkAndRestartProcess','):\x20A\x20mensagem\x20\x20\x22stopConversation\x22\x20=\x20','LOG','userDevicesCache','archive','groupSetting','title','toString','Erro\x20ao\x20atualizar\x20AutomateSystem:','instanceName','#ffae04','processConditions','displayName','AUTHENTICATION','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20updatePresence','includes','mentions','width','Not\x20allowed\x20by\x20CORS','):\x20Bloco\x20copiado:\x20','.url','defineAuthState','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','profile','):\x20teve\x20mudanas\x20chat.ephemeralExpiration:\x20','Mensagem\x20no\x20suportada','pollCreationMessageV3','.xls','sendPresenceUpdate','fromMe','downloadMediaMessage','Erro\x20ao\x20executar\x20bulkWrite:','mediaMessage','https://jsonip.com',',\x20lastCondition:\x20','ephemeralDuration','#64c4ff','Unauthorized','):\x20Limpando\x20AutomateSystem','/instance/connectionState','headerString','getChatModelForOwner','off','segundos','Erro\x20ao\x20editar\x20a\x20conversa','\x22\x20not\x20found','type','keep-alive','ephemeralExpiration','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','getMinutes','TEXT','_p_','_pushName','*\x0a\x0a','generateWAMessageFromContent','updatePresence','\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.','\x1b[31m','refused','round','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','No\x20\x20permitido\x20deletar\x20o\x20grupo\x20padro','bulkWrite','findGroups','Instncia:\x20','pre','removeIPv6','automateSystem','imported','https','reject','replaceValue','Error\x20testing\x20IP\x20with\x20','REDIS','3540145tAyrMB','array','statusJidList','ip\x20-6\x20addr\x20del\x20','File\x20written\x20to\x20path:\x20','}}\x20->\x20\x22','initializeQueue','idSchedule','class-validator','last','):\x20Buscando\x20flow,\x20id:\x20','flow','scheduleNextExecution','pendingMessages','Variveis\x20no\x20encontradas:','deleteAll','g.us','hSet','synchronizeAndMapFlows','scheduleNextCheck','matchRegex','footerText','):\x20A\x20atualizao\x20no\x20BD\x20da\x20conversa\x20no\x20foi\x20bem\x20sucedida','deleteMessageForEveryone','\x20no\x20\x20um\x20voto\x20enviado\x20pelo\x20usurio','Conexo\x20estabelecida','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','lastUpdate','updateMissingEtiquetas','50mb','3842296LPxvAZ','_activatedCount','):Image\x20is\x20url','downloads','mediaKey','updateOne','sectionsToString','profilePictureUrl','\x20segundos\x20antes\x20de\x20reconectar...','flowConfig','):\x20Rtulo\x20atualizado:\x20','No\x20foi\x20possvel\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automao.','exports','#9ba6ff','boolean','replaceVariables','static','DOCKER_ENV','Bad\x20Request','condition','):\x20Deletando\x20mensagem','IP\x20mismatch:\x20configured\x20','messages.upsert','):\x20Comando\x20desconhecido:\x20','updateProfileStatus','sendButtons','editMessagesInGroup','Subdomnio\x20final:','Falha\x20ao\x20processar\x20a\x20solicitao\x20findGroups','Error\x20removing\x20unused\x20chat\x20fields:','long','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','chats.delete','rows','Partes\x20do\x20domnio:','connecting','length','findOne','Nenhum\x20fluxo\x20correspondente\x20encontrado.','No\x20\x20possvel\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20est\x20em\x20processamento.','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','\x20foi\x20removido\x20por\x20no\x20ser\x20vlido.','jwt','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','STORE_CLEANING_TERMINAL','request\x20received\x20in\x20allFlows','data','Missing\x20global\x20api\x20key','data:\x20','fetchMessages','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','AutomateSystem','truncatedtoEnd','Subdomnio\x20extrado\x20da\x20URL:','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','info','release','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','Error\x20parsing\x20JSON:','Nenhum\x20participante\x20vlido\x20encontrado.','$pull','modifiedCount','cacheInstanceModel','findParticipants','.txt','Primeiro\x20Valor:\x20','prepareWAMessageMedia','):\x20Editando\x20bloco...','originalUrl','next_groupId','backgroundColor','Erro\x20ao\x20deletar\x20chat:','licenca','msgRetryCounterCache','URL\x20no\x20disponvel','flush','pollErrorMessage','deleteDoneMessages','Erro\x20ao\x20tentar\x20autoCompleteMessages','_FlowHistorico','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','editOperator','groupAcceptInvite','superadmin','cachedContact','SSL_CONF_FULLCHAIN','admin','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','lean','flows','Error\x20writing\x20file:\x20','pollMessage','Filtered\x20network\x20interfaces:\x20','evaluateConditionTest','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','redis','URL:','not\x20loaded','responsavelid','connect','out','Log\x20out\x20instance:\x20','authService','picture','updateGParticipant','generateHash','):\x20\x27Enviando\x20audio\x20para\x20\x27','stopped','delay','pollCreationMessageV2','defineProperty','GET','):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20','flowConversation','findFlow','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','maxActives','toNumber','uazapi\x20no\x20est\x20instalado\x20pelo\x20git','state','Font\x20is\x20required','log','https://api.ipify.org?format=json','No\x20\x20possvel\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','messageHandle','item','):\x20[messages.update]\x20group\x20ignored','Nome\x20do\x20campo\x20personalizado\x20j\x20existe.','audio/ogg;\x20codecs=opus','format','convertToWebP','Nenhum\x20campo\x20vlido\x20para\x20atualizao\x20fornecido.','addReplyOption','isListOfNumbers','caption','@g.us','when','groupdata.participants','Erro\x20ao\x20avaliar\x20a\x20condio:\x20','evaluateCondition','listResponseMessage','/media/','):\x20Enviando\x20mdia','getFlow','Button\x20IDs\x20cannot\x20be\x20repeated.','NextBlock','processawaitSeconds','REDIS_ENABLED','audioMessage','message_normalized','getVariablesChat','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','allFlows','A\x20licena\x20no\x20\x20vlida,\x20interrompendo\x20a\x20aplicao.','Content-Type','connectionUpdate','Fluxo\x20agendado\x20pelo\x20fluxo\x20','\x20inseridas\x20no\x20banco\x20de\x20dados...','mediatype','fetchPrivacySettings','Erro\x20ao\x20iniciar\x20o\x20fluxo.','):\x20[messages.upsert]\x20group\x20ignored','Validate','ConversationModel','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','ENABLED','Falha\x20ao\x20processar\x20a\x20solicitao\x20revokeInviteCode','filter','No\x20\x20permitido\x20adicionar\x20outro\x20bloco\x20padro','open','cleaningUp','binary','verbose','readData','startFlow','scheduleMessage','urlOrBase64',',\x20Resultado:\x20','chatLog','expression','\x1b[42m','truncatedto','Fluxo\x20no\x20encontrado\x20para\x20o\x20ID:','isConnected','sendReaction','proxy:\x20','noConnection','statusCode','Configurao\x20SSL\x20recuperada:','getScheduleMessageModelForOwner','command','.\x20Aguardando\x20','execSync','ipv6Prefix','events','2736wcjbaY','collections','cacheContactModel','profilePicture','@broadcast','):\x20Ler\x20mensagem','Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.','Novo\x20IP\x20criado:\x20','findAll','XX:XX:XX:XX:XX:XX','):\x20Criando\x20fluxo...','Falha\x20ao\x20processar\x20a\x20solicitao','startCommandWord','delaySecMin','groupMemberAddMode','):\x20encontrado\x20prxima\x20mensagem\x20para\x20','dataValidate','QRCODE_UPDATED','_error','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','unreadCount','):\x20Os\x20fluxos\x20esto\x20desativados\x20para\x20','Erro\x20ao\x20iniciar\x20a\x20aplicao:\x20','end','FULLCHAIN','\x20-i\x20','createGroup','):\x20Fluxos\x20no\x20esto\x20ativados','processUazapi','KEY','\x20contacts','\x20horas\x20e\x20','):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas.\x20Iniciando\x20processReadyMessages.','createNewConversation','deleteChat','sendSticker','goNextblock','writeFile','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessrios.','reaction','application/json','https://ifconfig.me/ip','Incio','DELIVERY_ACK','blockId\x20\x20necessrio\x20para\x20deletar\x20um\x20bloco','0123456789ABCDEF','Erro\x20ao\x20inserir\x20chats:','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','.mp3','addresss','uazapiSendMedia','/64\x20dev\x20','.gif','):\x20lastBlockId:\x20','toArray','groups.upsert','Chat\x20com\x20ID\x20','saveMediaToFile','):\x20sender\x20=\x20number:\x20','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20conectar\x20ao\x20whatsapp','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','formatBRNumber','uazapi','node-mime-types','PRODUCT_LIST',',\x20Segundo\x20Valor:\x20','badSession','/wa-all-message','processingGroup','order','equal','/instance/create','errors','IPv6\x20address\x20removed:\x20','Flow\x20\x27','organization','):\x20Enviando\x20localizao','selectedOptions','replaceVariablesInReplyOptions','font','Nenhum\x20chat\x20fornecido\x20para\x20insero.','Type\x20not\x20found','Erro\x20ao\x20atualizar\x20agendamento\x20','):Image\x20converted\x20to\x20WebP','method','\x22\x20-\x20NOT\x20CONNECTION',',\x20global:\x20','CHATS_SET','Content\x20is\x20required','Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp.','This\x20name\x20','processScheduleFlow','conversation','child_process','Types','trim','getConversation','listMessage','editflowgroup','isJidUser','toLowerCase','CONECTADO\x20\x20UAZAPI','getScheduleMessage','expiration','description','updateParticipant','../env.yml','deleteBlock','request\x20received\x20in\x20scheduleMessage','set','deleteOne',',\x20Comparador:\x20','key','send','nomecompleto','isLong','ERROR:\x20','}}\x20->\x20valor\x20no\x20encontrado','createAndSave','messageSecret','The\x20property\x20cannot\x20be\x20empty','instancias:\x20','_fromMe','editflowreply','message','where','Erro\x20ao\x20buscar\x20a\x20conversa',',\x20canSendMessage:\x20','createConversationforgoToFlow','linkPreview','#fed428','groups.update','remoteJids','bateu\x20events','processclearVariables','Falha\x20ao\x20processar\x20a\x20solicitao\x20findRealGroups','Message\x20absent\x20from\x20node','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio:\x20','interval\x20no\x20\x20um\x20nmero','replaceVariablesLogs','fileName','waitingForReplyMenu','ScheduleMessage','Authentication\x20error','Garbage\x20collection\x20no\x20est\x20disponvel.','encoding','fullName','findContacts','auth','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','scheduleFlow','upperCase','sendCommand','\x1b[37m%s\x1b[0m','getUpdate','buttonId','SSL_CONF_PRIVKEY','routerPath','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','participants','close','editConversation','getLastMessage','authModel','pollCreationMessage','participant','\x27\x20do\x20banco\x20de\x20dados...','findById','.webp','groupRequestParticipantsUpdate',':\x20Verificando\x20se\x20h\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','\x20removido\x20do\x20chat\x20','menuType','/webhook','startsWith','updateMessage','flushHeaders','/automate','default','):\x20whoCanUse\x20before\x20validation:\x20','Fluxo\x20id\x20\x27','media','):\x20Editando\x20replyOption...','https://uazapi-plugin.bubbleapps.io/?url=','groupInviteCode','hDel','utf8','\x5c$&','.webm','secondValue','not_announcement',',\x20valor\x20a\x20encontrar:\x20\x22','request\x20received\x20in\x20editFlowgroup','):\x20Mensagem\x20j\x20enviada\x20para\x20','removeIPv6ById','groupName','isCommunityAnnounce','DisconnectReason','changeVariables','groupCreate','updateProfilePicture','timeout','assign','SEND_MESSAGE','map','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','digest','):\x20Transformao\x20de\x20mensagens\x20agendadas\x20concluda!','processblock','IPv6\x20addresses\x20detected:\x20','ON\x20-\x20dbName:\x20','setWebhook','Database\x20is\x20not\x20enabled','privacySettings','join','awaitingApproval','documentWithCaptionMessage','max','trimmed','request\x20received\x20in\x20editFlowcondition','URL\x20completa:','Erro\x20ao\x20limpar\x20instncias\x20desconectadas:','processReadyMessages','\x1b[31m%s\x1b[0m','recording','PREFIX_KEY','Mensagens\x20deletadas\x20com\x20sucesso.','Selecione','!stop','editflowvariable','menuIgnoreNonVotes','SERVER_ACK','Erro\x20ao\x20editar\x20condio\x20do\x20fluxo','DARK','request\x20received\x20in\x20editConversation','retrySendMessage','copyBlock','createFlow','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','^\x5cd+','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupName','urlencoded','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','path','sort','\x20:\x20','):Alterar\x20configurao\x20de\x20mudo\x20para\x20o\x20chat:\x20','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','randomMac','uncaughtException','minutesToClose','Safari','Stack\x20trace:','?timestamp=','getLabelModelForOwner','cors','isValidAndUniqueIPv6','qrcode-terminal','DATABASE_CONNECTION_USER','dbServer','findRealGroups','getBase64FromMediaMessage','locationMessage','response','no-cache','etiquetas','\x20-y','STATUS_INSTANCE','request\x20received\x20in\x20updateAutoCompleteMessages','Parando\x20aplicao...','updateChatGroupData','https://api64.ipify.org?format=json','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','request\x20received\x20in\x20getConversation','Imagem\x20no\x20encontrada','subject','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','result','REDIS_URI','createSectionsFromValues','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','dark','request\x20body:\x20','contact','https://v6.ident.me','mkdirSync','scheduleSendText','Database\x20connection\x20closed.','):\x20[RETRY]:\x20Mximo\x20de\x20tentativas\x20alcanado,\x20desistindo\x20de\x20recuperar','jid','substring','app','\x22,\x20valor\x20a\x20substituir:\x20\x22','waitingMenu_replyOptions','E-mail:\x20','Cache\x20instance\x20update\x20result:\x20','Detalhes\x20do\x20erro:','Atingido\x20interaes\x20mximas,\x20parando\x20fluxo','fetchInstances','documentMessage','findAndReplace','stdout','uazapiSendContact','createWebhook','END:VCARD','findWebhook','senderKeyDistributionMessage','pt-BR','request\x20received\x20in\x20deleteDoneMessages','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','wuid','groupSettingUpdate','Error\x20in\x20scheduleNextCheck:\x20','views','Flow\x20iniciado\x20com\x20','creation','DD/MM\x20HH:mm:ss','creds.json','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','updateReplyOption','):\x20mediaMessageInfoId\x20:\x20','labels.edit','Instance\x20ID:','onWhatsApp','messaging-history.set','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20at\x20','deleteMany','):\x20Editando\x20mensagens\x20no\x20grupo...','announce','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','saveVariable','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','Input\x20deve\x20ser\x20um\x20array\x20no\x20vazio\x20de\x20chats.','test','Instance\x20deleted','Cache-Control','Erro\x20ao\x20editar\x20varivel\x20do\x20fluxo','role','ex:\x20\x22groupJid=120362@g.us\x22','scheduleSendAudio','createClient','reorderReplyOptions','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','updateProfileName','.TEL;waid=','lastFetchAwaitingApproval','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','call','Nmero\x20no\x20possui\x20WhatsApp.','):Image\x20is\x20base64','):\x20Adicionando\x20\x27','_Messages','CacheContacts\x20database\x20connection\x20closed.','webp','leadInfo.customFields','groupMetadata','Valor\x20inicial:\x20\x22','mongoose','Telefone:\x20','/instance/fetchInstances','pairingCode','):Temp\x20image\x20deleted','Group\x20not\x20found','spawn','groupValidate','qrcode.updated','stopConversation','):\x20Chat\x20','Erro\x20ao\x20encerrar\x20a\x20API','catch','vcard','SUCCESS','inviteCode','demote','/wa-message-update','Db\x20Connection','saveCreds','):\x20alterando\x20this.AutomateSystem','editScheduleMessage','\x20segundos','true','desativadoFluxoAte','verify','Erro\x20ao\x20buscar\x20fluxos:','lastInteraction','ListMessage','stanzaId','success','connectToWhatsapp','isJidGroup','app-state-sync-key','readFileSync','updateCustomFields','viewOnceMessage','newValue','editflowcondition','groupUpdateDescription','):\x20Editando\x20grupo\x20do\x20fluxo...','uuid','Erro\x20ao\x20remover\x20label\x20','messageType','Error\x20in\x20chatModify\x20for\x20number\x20','1960NbXFzZ','updateLastSeenPrivacy','upsertChats','isJidBroadcast','deleteFlow','leadInfo.etiquetas','basename','gifPlayback','application/octet-stream','min','Erro\x20inesperado\x20em\x20processvaredits:\x20','localWebhook','The\x20\x22','list','apiResponse','insert','request\x20received\x20in\x20updateAgent','insertMany','instanceCount','sim','telefone','imagechat','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','TEL','waMonitor','AUTHENTICATION_JWT_EXPIRIN_IN','beautifyWithPlaceholders','\x1b[1m','):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20voc\x20no\x20tem\x20permisso\x20para\x20us-lo','convertedOptions','stderr','editFlowReply','Operador:\x20\x22','drop','restartInstance','pictureUrl','createIPv6','SECRET','Tentando\x20reconectar...','getAutomateSystem','!cmd_','delaySecMax','console','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','fetchChats','write','DATABASE_CONNECTION_URI','):\x20Query\x20params:','sending','createConversationforStartFlow','uazapiSendMenu','connectionStatus','startCommand','fetchLatestBaileysVersion','isArray','Connection','RemoteJid:','logout','sendStatus','ContactModel','Sistema\x20atualizado\x20com\x20sucesso!','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','hasOwnProperty','use','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','787878eNoudQ','dropCollection','instances','menuMessage','Erro\x20ao\x20atualizar\x20cacheInstance:','decryptPollVote','):\x20Criando\x20fluxo\x20compartilhado...','no.connection','all_member_add','normalizeMessageContent','API_KEY','node-cache','model','saveChatVariables','):\x20Editando\x20varivel\x20do\x20fluxo...','):\x20Nenhuma\x20varivel\x20especificada\x20foi\x20encontrada\x20para\x20remoo','?authSource=admin&readPreference=primary&directConnection=true','IPv6\x20recriado\x20aps\x20falhas\x20de\x20reconexo.','StartID:','GROUP_PARTICIPANTS_UPDATE','EXPIRIN_IN','replacer','):\x20conversation.lastInteraction:\x20','now','sendMenu','flowName','AddChatLabel','testIPv6','):Processing\x20audio','):\x20Entrou\x20na\x20funo\x20processawaitSeconds','):\x20Criou\x20conversa\x20no\x20startFlow','Erro\x20ao\x20buscar\x20conversas','No\x20\x20permitido\x20editar\x20uma\x20varivel\x20com\x20leadInfo\x20definido\x20como\x20true.','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','groupId','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','markMessageAsRead','toUpperCase',',\x20received\x20','blockLogs','storePath','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','):\x20Flow\x20desativado','getStatus','sendPoll','\x1b[41m','Erro\x20ao\x20editar\x20configurao\x20de\x20fluxos','setContext','/exit','whatsappNumber','.mp4','groupGetInviteInfo','updateGroupParticipantsWebhook','):\x20A\x20mensagem\x20no\x20foi\x20enviada\x20pelo\x20bot','importChats','updateStatusPrivacy','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','color','#000000','processApiRequest','available','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','latitude','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','/config','Fluxos\x20no\x20esto\x20ativados','agents','ObjectId','HOST','uazapiSendLocation','):\x20debug\x20alterando\x20this.AutomateSystem','blockId','Bloco\x20com\x20ID\x20','sendMedia','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','unreadcount','CHATS_DELETE','toLocaleString','getDevice','cache','whatsappNumbers','.ogg','Nenhum\x20chat\x20encontrado\x20para\x20editar.','getTime','created','https://ipv6.jsonip.com','\x1b[36m%s\x1b[0m','getHours','\x20}\x0a','setting','Erro\x20ao\x20processar\x20a\x20chamada\x20API:',',\x20valor\x20passado:\x20\x22','protocolMessage','audio/ogg','contacts','sleep','and','cleanStore','No\x20\x20permitido\x20deletar\x20o\x20bloco\x20padro','Instncia\x20no\x20encontrada.','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGParticipant','inner','isInteger','load','Error\x20updating\x20message\x20status:','.jpg','writeData','https://api.openai.com/v1/images/generations','collection','header',',\x20far\x20nova\x20verificao\x20em\x20','split','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','_Contacts','Prxima\x20verificao\x20de\x20licena\x20e\x20se\x20tem\x20atualizao\x20em\x20','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','chat','/chat','\x1b[34m','editFlowVaredit','hGet','/*.json','updatePrivacySettings','start','Last\x20message\x20not\x20found','Erro\x20de\x20duplicidade\x20no\x20ndice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20ndice...','chats.upsert','repository','vote','beforeExit','dbSettings','presence.update','stopWhenYouSendMsg','deviceSentMessage','MessageModel','Partes\x20do\x20caminho\x20FULLCHAIN:','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mdia:\x20','creds.update','varedits','/wa-qrcode','API\x20Key\x20from\x20Request:','slice','):\x20\x27Grupo\x20no\x20encontrado\x20ou\x20groupdata\x20no\x20definido:\x27,\x20','fetchContacts','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','content-type','getflow','throwAndLogError','):Fetching\x20business\x20profile','):Error\x20in\x20converting\x20audio','validate','updateStopChat',',\x20pairCode:\x20','getReadyToSendMessages','):\x20','\x20minutos...','messageStubParameters','sections','dayjs','customFields','archiveChat','updateProfilePicturePrivacy','menuExpiredMessage','json','updateChatWithMessage','connectedClient','DATABASE_CONNECTION_PASSWORD','$dbName','):\x20ev.flush\x20realizado','Database\x20update\x20result:','ff:fe','convertToString','group','waitingMenu_text','poll','\x20no\x20encontrado\x20para\x20atualizao.','):Image\x20created','):\x20Iniciando\x20processReadyMessages.','router','stickerMessage','Request\x20Body:','ERROR','):Desconectado,\x20parando\x20execuo.','\x27\x20removido\x20do\x20AutomateSystem.','PENDING','updateAgent','uazapiSendText','_ScheduleMessages','.extension','charAt','reconnectAttempts','yes','qrCode','):\x20atualizao\x20chat:\x20','from','Erro\x20ao\x20importar\x20chats','params','connectToWhatsappController','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','endsWith','Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp:','-instances','exec','Por\x20favor,\x20responda\x20\x20ltima\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opes\x20disponveis,\x20sem\x20digitar\x20sua\x20resposta.','\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo','contacts.upsert','Erro\x20ao\x20editar\x20o\x20bloco:\x20','muteEndTime','Network\x20interfaces\x20detected:\x20','AppStateSyncKeyData','count','moreLogs','buttonText','setNewValue','):\x20Est\x20configurado\x20para\x20parar\x20at\x20','Message','jsonwebtoken','URI','Falha\x20ao\x20processar\x20a\x20solicitao\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','):\x20whoCanUse\x20after\x20validation:\x20','.ogv','LOG_COLOR','InstancesAlterarTodas','keyPattern','Erro\x20ao\x20copiar\x20o\x20documento','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','):Image\x20path:\x20','realVariables','JWT','group-participants.update','content','lastSend','hex','StartBot','#f64847','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao:\x20','\x20no\x20encontrado\x20para\x20cpia','capitalizedWords','#56ccb4','headers','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfilePicture','findOneAndUpdate','less','text/event-stream','IPv6\x20address\x20configured:\x20','output','findAndReplaceRegex','processgoToFlow','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcanada,\x20crie\x20outra\x20instncia...','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','Voc\x20no\x20tem\x20permisso\x20para\x20ver\x20o\x20fluxo\x20\x27','silent','optionName','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','toFile','Fluxo\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.','GUARD','keys','findLabels','):\x20ndice\x20do\x20bloco\x20a\x20ser\x20atualizado:','USER','delayChatLabel_RETRY_DELAY_MS','name','Erro\x20ao\x20atualizar\x20conversa:\x20','/instance/delete','getOwnPropertyNames','unlocked','isBase64','Atualizao:\x20','):\x20Procurando\x20mensagens\x20para\x20envio','readreceipts','http','Logger','findGroupsEspecial','SINGLE_SELECT','hbs','isAdmin','joinApprovalMode','endSession','local_map','):\x20Envio\x20interrompido\x20devido\x20\x20desconexo.','connection.update','express-async-errors','isCommunity','deleteConversation','):\x20Limpando\x20delayMessage','getPrototypeOf','stringify','applyvaredit','editFlowGroup','messageTimestamp','crypto','leadInfo','activatedCount','variable','fetchProfilePictureUrl','removeInstance','createJid','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','Conversa\x20deletada\x20com\x20sucesso.','sendList','_remoteJid','values','):Trying\x20to\x20get\x20business\x20profile','No\x20suitable\x20network\x20interface\x20found','remote\x20\x22origin\x22','PROXY','label_jid','CHATS_UPDATE','MAX_SAFE_INTEGER','Falha\x20ao\x20criar\x20IPv6.','preview','\x20\x1b[0m','error','groupUpdateSubject','updateMany','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','temp-','lastMessage','verifiedName','.ppt','AddUserFlow','presence','removed','redisEnv','replace','):\x20Enviando\x20contato','valid','CORS_ORIGIN','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','utf-8','pushName','remoteJid','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','qrcode','):\x20whoCanEdit\x20before\x20validation:\x20','TYPE','Falta\x20informao\x20para\x20a\x20chamada\x20API','repeat','):Delete\x20chat','https://chat.whatsapp.com/','fetchProfile','instanceKeys','):\x20Buscando\x20flow...','\x1b[47m','#9ab6c1','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileName','_sender','block','onTime','):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas:\x20','\x0aitem','WA\x20MODULE','\x20no\x20encontrado','Falha\x20ao\x20processar\x20a\x20solicitao\x20leaveGroup','CORS_METHODS','webhookModel','\x1b[0m','EMAIL','toBrazilianNumberFormat','\x20inseridos\x20no\x20banco\x20de\x20dados...','varedit','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','creds','jsonschema','pollCreationMessageKey','memberAddMode','):\x20Buscando\x20conversas...','):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos','\x20instance\x20does\x20not\x20exist','FlowController','):\x20customFieldVariables','STORE','last_update','limit','/media','request\x20received\x20in\x20editFlow','addMessagesToGroup','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','deleteflow','editFlowVariable','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','getMessageModelForOwner','audioWhatsapp','createOrUpdate','testingWith','promote','\x0a\x0a\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','createConnection','Erro\x20ao\x20atualizar\x20o\x20fluxo:','networkInterface','createInstance','\x20is\x20already\x20in\x20use.','replaceOne','OrAnd','replyOption','dropIndex','code','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','contactHandle','mentioned','getNextPendingMessage','):Business\x20profile\x20fetched','IPv6\x20Prefix\x20detected:\x20','extractMessageContent','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','object','axios','copy','Erro\x20ao\x20alterar\x20fluxo','parseInt','express','remove','):\x20whoCanEdit\x20after\x20validation:\x20','\x20and\x20data:','CONTACTS_SET','notify','ip\x20-6\x20addr\x20add\x20','number','No\x20respondeu\x20com\x20a\x20enquete.','updateReadReceiptsPrivacy','):\x20Entrou\x20na\x20funo\x20scheduleFlow','lastCondition',',\x20Expiration\x20Time:\x20','DATABASE','):\x20Deletando\x20conversa...','requestFile','setUpdate','statusMessage','configService','buttons','/message','deletedCount','timeInMinutes','eventemitter2','contains','\x20Tentativa\x20de\x20reconexo\x20','paused','then',',\x20Minutes\x20to\x20Close:\x20','chat\x20no\x20encontrado','importChatsAntigo','restrict','Invalid\x20format','fetchBusinessProfile','):\x20Conversa\x20est\x20expirada\x20-\x20voto','Falha\x20ao\x20processar\x20a\x20solicitao\x20send_message,\x20numero:\x20','):\x20Error\x20processing\x20conditions:\x20','ReplyOption\x20com\x20ID\x20','post','fromObject','reactionMessage','get','):\x20Current\x20Time:\x20','cpf','ChatRouter','iniciando\x20fluxo\x20router','DaysToDelete','updateOnlinePrivacy','):Audio\x20processed','sendMessage','store','updateBlock','deleteMessage','flowStopConversation','clearVariables','updateConversation','getConversationModelForOwner','API\x20Key\x20invlida\x20ou\x20instncia\x20no\x20encontrada.','AUTHENTICATION_TYPE','Erro\x20de\x20atualizao:\x20','listType','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','groupFetchAllParticipating','):\x20Grupo\x20','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','logger','groupdata','selectableCount','url','webhookMap','listen','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','Nmero:\x20','emit','document','text','editFlowCondition','https://','Nmero\x20da\x20cor\x20invlido\x20ou\x20fora\x20do\x20intervalo:\x20','request\x20received\x20in\x20updateFlowConfig','updateGParticipate','deleteImportedChat','findConversation','\x1b[30m%s\x1b[0m','Esse\x20fluxo\x20expirou','request\x20received\x20in\x20deleteConversation','#83e421','redirect','updateGroupPicture','saveTextReply','rm\x20-rf\x20','sha256','uazapiSendAudio','removeData','integer','):\x20Going\x20to\x20','WARN','):\x20error:\x20','messages.update','contentText','RemoveChatLabel','stateConnection','groupBetterSetting','variables','status.instance','Mac\x20OS','match_last_seen','exists','STORE_CONTACTS','eventEmitter','editflowvaredit','base64','\x1b[32m','_id','findGroupInfo','):\x20no\x20encontrou','DATABASE_CONNECTION_HOST','push','joinGroup','stopMinutes','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileStatus','Subdomnio\x20extrado\x20do\x20caminho\x20SSL:','#00a1f2','stopMinutesMaxActives','lastSendMessage','isURL','The\x20instance\x20needs\x20to\x20be\x20disconnected','messages.set','Instncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','Cannot\x20','all','Comando\x20desconhecido','Fluxo\x20no\x20encontrado\x20na\x20memria.','deleteInstance','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20ser\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupSetting','loadEnv','@ffmpeg-installer/ffmpeg','email','Para\x20criar\x20fluxo\x20global,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20global','Falha\x20ao\x20processar\x20a\x20solicitao\x20toggleEphemeral','Removidas\x20as\x20variveis:\x20','Parando\x20aplicao,\x20atualizao\x20recebida','formatVCard','oldToken','toBRL','No\x20foi\x20possvel\x20conectar\x20ao\x20servidor\x20aps\x20vrias\x20tentativas,\x20encerrando\x20a\x20aplicao.','status@broadcast','\x0a{\x20instance:\x20','):\x20Flow\x20\x27','globalShow','RECONNECT_TIME_FRAME','Button\x20texts\x20cannot\x20be\x20repeated','arraybuffer','groupJoinApprovalMode','\x1b[1m\x1b[37m','startID','\x20depois\x20','Falha\x20ao\x20recriar\x20IPv6.','Erro\x20ao\x20criar\x20fluxo','groupParticipantsUpdate','joinGroupValidate','getClient','envYaml','image','lastRealGroupsFetch','getValidWhatsAppNumbers','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','delete','HeaderType','_Chats','sendLocation','textMessage','Not\x20Found','delayChatLabel','):\x20Label\x20','Erro\x20ao\x20deletar\x20mensagens:','Rtulo\x20invlido\x20ou\x20sem\x20ID.','Retornando\x20grupos\x20SEM\x20cache','replaceVariablesChat','greater','INFO','Subscribed\x20Events:','contactMessage','):including\x20timestamp\x20in\x20url:\x20','canSendMessage','@s.whatsapp.net','PASSWORD','.docx','):\x20Editando\x20edio\x20do\x20fluxo...','tags','IP\x20confirmed:\x20','currency','newStoppedUntil','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','):\x20Erro\x20ao\x20salvar\x20variveis\x20do\x20chat\x20no\x20BD:\x20','p-queue','):\x20Extenso\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','):\x20No\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padro...','deleteReplyOption','apiName','MESSAGES_UPDATE','updateFlowConfig','config','Erro\x20na\x20funo\x20updateChatWithMessage:\x20','instance.','locked','toggleEphemeral','approve','some','delayChatLabel_MAX_RETRIES','optionDescription','floor','getContentType','):\x20Loop\x20externo\x20interrompido\x20devido\x20\x20flag\x20isConnected','getContactModelForOwner','resetReconnectionVariables','updateAutoCompleteMessages','Error\x20adding\x20IPv6\x20address:\x20','birthtime','find','authentication','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','updateAll','lastReceivedMessage','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','setHeader','):Archiving\x20chat','findOrCreate','extractPhoneNumber','):\x20Entrou\x20na\x20funo\x20clearVariables','sendMessageAck','Erro\x20ao\x20editar\x20o\x20chat','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','add','updateOneById','Close\x20connection','):\x20Erro\x20na\x20atualizao\x20da\x20conversa\x20no\x20BD:\x20','):\x20Parar\x20funo\x20pois\x20no\x20est\x20conectado','/events','):\x20No\x20achou\x20nenhum\x20flow','indexOf','MESSAGES_UPSERT','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','\x20minutos\x20verificar\x20novas\x20mensagens','mongodb://','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupBetterSetting','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','connectionState','this.reconnectAttempts:\x20','/:instanceName','admin_add','global','Erro\x20ao\x20atualizar\x20mltiplas\x20conversas:','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','recebido\x20de','address','scheduled','firstValue','Type\x20is\x20required','):Converted\x20image\x20deleted','archived','\x20ao\x20chat\x20','allContacts','longitude','formatStatusMessage','Erro\x20ao\x20normalizar\x20a\x20mensagem:','fileUrl','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','notEmpty','entries','/wa-chats','SERVER_PORT','):\x20Error\x20processing\x20the\x20block:\x20','\x1b[46m','online','mongodb','prepareMediaMessage','startFlowWebhook','Varivel\x20no\x20encontrada!','blocks','autoCompleteMessages.command_1','normalizeMessage','findGroup','isValidIPv6Config','@redis/client','put','CORS','):\x20tem\x20blocks','subjectTime','verifyWhatsAppNumber','transformScheduledMessagesByType','lastBlockId','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20nmero','detectIPv6PrefixAndInterface','\x20no\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','unavailable','LEVEL','SSL_CONF','LabelModel','Generated\x20IPv6:\x20','option','detail','The\x20','Erro\x20ao\x20atualizar\x20o\x20flow.','phoneNumber','editedMessage','fetchStatus','@whiskeysockets/baileys','PORT','):\x20conversation.status:\x20','mimetype','STORE_CHATS','padStart','):\x20Detalhes\x20da\x20mdia\x20obtidos\x20com\x20sucesso.','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.',',\x20resultado:\x20','groups','arrayUnique','audio','random','waUploadToServer','):\x20this.client.authState.creds?.myAppStateKeyId:\x20','announcement','getUniqueFlowName','):\x20Fluxo\x20\x27','closed','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','editChat','SERVER','messageId','website','request\x20received\x20in\x20fetchConversation','):\x20transformedCustomFieldVariables','Contacts\x20not\x20found','query','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','restart','bodyString',']\x20(','insertCount','reference'];a0_0x2820=function(){return _0xbea584;};return a0_0x2820();}var m=class{constructor(..._0x4f27e0){const _0x392e97=a0_0x98996d;throw{'status':0x190,'error':_0x392e97(0x205),'message':_0x4f27e0[_0x392e97(0x217)]>0x0?_0x4f27e0:void 0x0};}},ie=class{constructor(..._0x5bff84){const _0x301226=a0_0x98996d;throw{'status':0x191,'error':_0x301226(0x1af),'message':_0x5bff84[_0x301226(0x217)]>0x0?_0x5bff84:void 0x0};}},X=class{constructor(..._0x25f866){const _0x1f4530=a0_0x98996d;throw{'status':0x193,'error':'Forbidden','message':_0x25f866[_0x1f4530(0x217)]>0x0?_0x25f866:void 0x0};}},F=class{constructor(..._0x47abe1){const _0x15d104=a0_0x98996d;throw{'status':0x194,'error':_0x15d104(0x6d5),'message':_0x47abe1[_0x15d104(0x217)]>0x0?_0x47abe1:void 0x0};}},O=class{constructor(..._0x544e8d){const _0x45908b=a0_0x98996d;throw{'status':0x1f4,'error':_0x45908b(0x130),'message':_0x544e8d[_0x45908b(0x217)]>0x0?_0x544e8d:void 0x0};}},ge=require(a0_0x98996d(0x75c));async function Rs(_0x52012e){const _0x3dd31a=a0_0x98996d;let _0x561eba=new N(Rs[_0x3dd31a(0x592)]),_0x2eb44d=$[_0x3dd31a(0x6ca)](),_0x28dbc4=_0x2eb44d['db'](b['get'](_0x3dd31a(0x635))['CONNECTION'][_0x3dd31a(0x7e4)]+_0x3dd31a(0x555))[_0x3dd31a(0x4f8)](_0x52012e),_0x35b338=async(_0x58746f,_0x513b5a)=>{const _0x37ddd2=_0x3dd31a;try{return await _0x2eb44d['connect'](),await _0x28dbc4[_0x37ddd2(0x616)]({'_id':_0x513b5a},JSON[_0x37ddd2(0x184)](JSON['stringify'](_0x58746f,ge['BufferJSON']['replacer'])),{'upsert':!0x0});}catch{}},_0xd27edb=async _0x3615f1=>{const _0x81d110=_0x3dd31a;try{await _0x2eb44d[_0x81d110(0x257)]();let _0x22852b=await _0x28dbc4[_0x81d110(0x218)]({'_id':_0x3615f1}),_0x2aa2dd=JSON['stringify'](_0x22852b);return JSON[_0x81d110(0x184)](_0x2aa2dd,ge[_0x81d110(0x79b)][_0x81d110(0x83a)]);}catch{}},_0x431480=async _0x2537db=>{const _0x6b6e9b=_0x3dd31a;try{return await _0x2eb44d[_0x6b6e9b(0x257)](),await _0x28dbc4[_0x6b6e9b(0x326)]({'_id':_0x2537db});}catch{}},_0x52f1c7=await _0xd27edb('creds')||(0x0,ge['initAuthCreds'])();return{'state':{'creds':_0x52f1c7,'keys':{'get':async(_0x187f00,_0x5e8958)=>{const _0x20f179=_0x3dd31a;let _0x43f6af={};return await Promise[_0x20f179(0x6aa)](_0x5e8958[_0x20f179(0x384)](async _0x1e4950=>{const _0x15bdcc=_0x20f179;let _0x586764=await _0xd27edb(_0x187f00+'-'+_0x1e4950);_0x187f00==='app-state-sync-key'&&_0x586764&&(_0x586764=ge['proto'][_0x15bdcc(0x563)][_0x15bdcc(0x55d)][_0x15bdcc(0x64f)](_0x586764)),_0x43f6af[_0x1e4950]=_0x586764;})),_0x43f6af;},'set':async _0x3f02e3=>{let _0xb3d2a0=[];for(let _0x2e2676 in _0x3f02e3)for(let _0x557369 in _0x3f02e3[_0x2e2676]){let _0x20ac86=_0x3f02e3[_0x2e2676][_0x557369],_0xdbf4fe=_0x2e2676+'-'+_0x557369;_0xb3d2a0['push'](_0x20ac86?_0x35b338(_0x20ac86,_0xdbf4fe):_0x431480(_0xdbf4fe));}await Promise['all'](_0xb3d2a0);}}},'saveCreds':async()=>_0x35b338(_0x52f1c7,_0x3dd31a(0x5f8))};}var _s=R(require(a0_0x98996d(0x211))),xs=R(require(a0_0x98996d(0x497))),xt=require(a0_0x98996d(0x75c)),Mi=require(a0_0x98996d(0x745)),_t=require(a0_0x98996d(0x75c)),Ot;function Oo(_0x134a81){const _0x2d24a3=a0_0x98996d;return Ot||(Ot=(0x0,Mi[_0x2d24a3(0x40d)])({'url':_0x134a81['URI']}),Ot[_0x2d24a3(0x257)]()),Ot;}var ue=class u{constructor(_0x3a79a0,_0x5f359a){const _0x1d65b0=a0_0x98996d;this['redisEnv']=_0x3a79a0,this['instanceName']=_0x5f359a,this[_0x1d65b0(0x669)]=new N(u[_0x1d65b0(0x592)]),this[_0x1d65b0(0x855)]=Oo(_0x3a79a0);}set[a0_0x98996d(0x77d)](_0x4a8d36){this['instanceName']=_0x4a8d36;}async[a0_0x98996d(0x5e3)](){const _0x344911=a0_0x98996d;try{return await this['client'][_0x344911(0x350)](['keys',this[_0x344911(0x5d0)][_0x344911(0x399)]+':*']);}catch(_0x45c551){this[_0x344911(0x669)][_0x344911(0x5c5)](_0x45c551);}}async[a0_0x98996d(0x4f6)](_0x582f80,_0xc3bba5){const _0x4abf4f=a0_0x98996d;try{let _0x558262=JSON['stringify'](_0xc3bba5,_t[_0x4abf4f(0x79b)][_0x4abf4f(0x4a1)]);return await this[_0x4abf4f(0x855)][_0x4abf4f(0x1e6)](this[_0x4abf4f(0x5d0)][_0x4abf4f(0x399)]+':'+this[_0x4abf4f(0x193)],_0x582f80,_0x558262);}catch(_0x12c517){this[_0x4abf4f(0x669)][_0x4abf4f(0x5c5)](_0x12c517);}}async['getAllData'](){const _0x52cf4c=a0_0x98996d;try{let _0x2c4061=await this[_0x52cf4c(0x855)]['hGetAll'](this['redisEnv'][_0x52cf4c(0x399)]+':'+this[_0x52cf4c(0x193)]);if(_0x2c4061){for(let _0x19543f in _0x2c4061)Object[_0x52cf4c(0x7e3)][_0x52cf4c(0x489)][_0x52cf4c(0x414)](_0x2c4061,_0x19543f)&&(_0x2c4061[_0x19543f]=JSON[_0x52cf4c(0x184)](_0x2c4061[_0x19543f],_t['BufferJSON'][_0x52cf4c(0x83a)]));return _0x2c4061;}}catch(_0x53d8b2){this[_0x52cf4c(0x669)]['error'](_0x53d8b2);}}async[a0_0x98996d(0x2a1)](_0x17c669){const _0x4bee04=a0_0x98996d;try{let _0x2df33c=await this[_0x4bee04(0x855)][_0x4bee04(0x504)](this[_0x4bee04(0x5d0)][_0x4bee04(0x399)]+':'+this[_0x4bee04(0x193)],_0x17c669);if(_0x2df33c)return JSON[_0x4bee04(0x184)](_0x2df33c,_t['BufferJSON']['reviver']);}catch(_0x55ad69){this[_0x4bee04(0x669)][_0x4bee04(0x5c5)](_0x55ad69);}}async[a0_0x98996d(0x685)](_0x4da75a){const _0x5aab09=a0_0x98996d;try{return await this[_0x5aab09(0x855)][_0x5aab09(0x371)](this['redisEnv'][_0x5aab09(0x399)]+':'+this['instanceName'],_0x4da75a);}catch(_0x21eee0){this[_0x5aab09(0x669)][_0x5aab09(0x5c5)](_0x21eee0);}}async['delAll'](_0x206d92){const _0x439010=a0_0x98996d;try{return await this[_0x439010(0x855)]['del'](_0x206d92||this[_0x439010(0x5d0)][_0x439010(0x399)]+':'+this['instanceName']);}catch(_0x3df608){this[_0x439010(0x669)][_0x439010(0x5c5)](_0x3df608);}}};async function As(_0x430236,_0x3c4f7d){const _0x363b72=a0_0x98996d;let _0xf90531=new N(As['name']),_0x2b6b6a=new ue(_0x430236,_0x3c4f7d),_0x10c16c=async(_0x556465,_0x36d951)=>{const _0xc13446=a0_0x431f;try{return await _0x2b6b6a[_0xc13446(0x4f6)](_0x36d951,_0x556465);}catch(_0x41d411){return _0xf90531['error']({'localError':_0xc13446(0x4f6),'error':_0x41d411});}},_0x1119cf=async _0x9e2eea=>{const _0x52e30d=a0_0x431f;try{return await _0x2b6b6a[_0x52e30d(0x2a1)](_0x9e2eea);}catch(_0x3aeca2){_0xf90531[_0x52e30d(0x5c5)]({'readData':_0x52e30d(0x4f6),'error':_0x3aeca2});return;}},_0x5e9d7a=async _0x2922cb=>{const _0x40a3a3=a0_0x431f;try{return await _0x2b6b6a[_0x40a3a3(0x685)](_0x2922cb);}catch(_0x30f401){_0xf90531[_0x40a3a3(0x5c5)]({'readData':_0x40a3a3(0x685),'error':_0x30f401});}},_0x383070=await _0x1119cf('creds')||(0x0,xt['initAuthCreds'])();return{'state':{'creds':_0x383070,'keys':{'get':async(_0x5b20c1,_0x4a526b)=>{const _0x403cd5=a0_0x431f;let _0xae924b={};return await Promise[_0x403cd5(0x6aa)](_0x4a526b[_0x403cd5(0x384)](async _0xb110af=>{const _0x383377=_0x403cd5;let _0x306751=await _0x1119cf(_0x5b20c1+'-'+_0xb110af);_0x5b20c1===_0x383377(0x43f)&&_0x306751&&(_0x306751=xt[_0x383377(0x7d9)][_0x383377(0x563)][_0x383377(0x55d)][_0x383377(0x64f)](_0x306751)),_0xae924b[_0xb110af]=_0x306751;})),_0xae924b;},'set':async _0xd048aa=>{const _0x40db8d=a0_0x431f;let _0x5c53d0=[];for(let _0x3dca80 in _0xd048aa)for(let _0x3072fa in _0xd048aa[_0x3dca80]){let _0x4e9063=_0xd048aa[_0x3dca80][_0x3072fa],_0x5b221a=_0x3dca80+'-'+_0x3072fa;_0x5c53d0[_0x40db8d(0x69d)](_0x4e9063?await _0x10c16c(_0x4e9063,_0x5b221a):await _0x5e9d7a(_0x5b221a));}await Promise[_0x40db8d(0x6aa)](_0x5c53d0);}}},'saveCreds':async()=>await _0x10c16c(_0x383070,_0x363b72(0x5f8))};}var P=R(require('fs')),Y=require(a0_0x98996d(0x447)),Lt=R(require('sharp')),Ft=require(a0_0x98996d(0x5af)),Ci=require(a0_0x98996d(0x315)),Ei=require('util'),vi=R(require('axios')),Me=class extends T{constructor(_0x17cfcf,_0x22c12f,_0xe200e1){const _0x2cab95=a0_0x98996d;super(_0x22c12f),this[_0x2cab95(0x232)]=_0x17cfcf,this[_0x2cab95(0x63a)]=_0x22c12f,this[_0x2cab95(0x151)]=_0xe200e1;}async['createOrUpdate'](_0x35ec7f,_0x55f3ab){const _0x4c4cc8=a0_0x98996d;try{if(this[_0x4c4cc8(0x50e)][_0x4c4cc8(0x299)]){console[_0x4c4cc8(0x26d)](_0x4c4cc8(0x829)+_0x55f3ab+_0x4c4cc8(0x62b),_0x35ec7f);let _0x2c3ff4=await this[_0x4c4cc8(0x232)][_0x4c4cc8(0x57d)]({'_id':_0x55f3ab},{'$set':_0x35ec7f},{'new':!0x0,'upsert':!0x0});return console[_0x4c4cc8(0x26d)](_0x4c4cc8(0x535),_0x2c3ff4),_0x2c3ff4;}}catch(_0x42a3c5){throw console['error'](_0x4c4cc8(0x490),_0x42a3c5),_0x42a3c5;}return null;}async[a0_0x98996d(0x326)](_0x36036e){const _0x5284e7=a0_0x98996d;try{let _0x1cbabe=A(_0x36036e[_0x5284e7(0x335)]);return{'deletedCount':(await this[_0x5284e7(0x232)][_0x5284e7(0x326)](_0x1cbabe))['deletedCount']};}catch(_0x578a27){return{'error':_0x578a27?.[_0x5284e7(0x191)]()};}}async[a0_0x98996d(0x218)](_0x1149e7){const _0x3d808b=a0_0x98996d;try{let _0x541490=A(_0x1149e7[_0x3d808b(0x335)]);return await this[_0x3d808b(0x232)]['findOne'](_0x541490)['lean']();}catch{return null;}}},Dt=(0x0,Ei['promisify'])(Ci[a0_0x98996d(0x556)]),_o=b['get']('PROXY'),Is=class{constructor(){const _0x448b4f=a0_0x98996d;this[_0x448b4f(0x160)]=new Me(qe,b),(!this[_0x448b4f(0x2b5)]||!this[_0x448b4f(0x613)])&&_o&&this[_0x448b4f(0x74e)]()[_0x448b4f(0x643)](()=>{const _0x3e801d=_0x448b4f;console[_0x3e801d(0x26d)](_0x3e801d(0x620)+this[_0x3e801d(0x2b5)]),console[_0x3e801d(0x26d)](_0x3e801d(0x11f)+this['networkInterface']);})[_0x448b4f(0x42a)](_0x46e1e2=>{const _0x2eb56d=_0x448b4f;console[_0x2eb56d(0x5c5)]('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20'+_0x46e1e2[_0x2eb56d(0x334)]);});}async[a0_0x98996d(0x74e)](){const _0x14496a=a0_0x98996d;try{let {stdout:_0x5b98a2}=await Dt('ip\x20-br\x20link\x20show');console[_0x14496a(0x26d)](_0x14496a(0x55c)+_0x5b98a2);let _0x10ad0=_0x5b98a2[_0x14496a(0x4fb)]('\x0a')[_0x14496a(0x384)](_0xae100b=>_0xae100b[_0x14496a(0x4fb)]('\x20')[0x0])[_0x14496a(0x29b)](_0x4be550=>!_0x4be550[_0x14496a(0x199)]('lo')&&!_0x4be550['includes'](_0x14496a(0x824))&&!_0x4be550['includes']('vir')&&!_0x4be550['includes']('wl')&&!_0x4be550[_0x14496a(0x199)]('@'));if(console[_0x14496a(0x26d)](_0x14496a(0x250)+_0x10ad0),_0x10ad0['length']===0x0)throw new Error(_0x14496a(0x5bc));this[_0x14496a(0x613)]=_0x10ad0[0x0];let {stdout:_0x82ec66}=await Dt('ip\x20-6\x20addr\x20show\x20dev\x20'+this[_0x14496a(0x613)]);console[_0x14496a(0x26d)](_0x14496a(0x389)+_0x82ec66);let _0x72d115=_0x82ec66[_0x14496a(0x4fb)]('\x0a')[_0x14496a(0x704)](_0x473aa4=>_0x473aa4[_0x14496a(0x199)](_0x14496a(0x7bb))&&_0x473aa4['includes'](_0x14496a(0x724)));if(!_0x72d115)throw new Error('No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface');let _0x345e81=_0x72d115[_0x14496a(0x132)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x345e81)throw new Error(_0x14496a(0x842));let [_0x204884,_0x37343f,_0x452426]=_0x345e81,_0x1b51a4=Math[_0x14496a(0x6fc)](Number(_0x452426)/0x10),_0x36bc76=Number(_0x452426)%0x10,_0x45db9c=_0x37343f[_0x14496a(0x4fb)](':')[_0x14496a(0x519)](0x0,_0x1b51a4)[_0x14496a(0x38e)](':');if(_0x36bc76>0x0){let _0xfd8bab=_0x37343f[_0x14496a(0x4fb)](':')[_0x1b51a4],_0x3151e2=0xffff<<0x10-_0x36bc76&0xffff,_0x3a02fc=(parseInt(_0xfd8bab,0x10)&_0x3151e2)[_0x14496a(0x191)](0x10)[_0x14496a(0x761)](0x4,'0');_0x45db9c+=':'+_0x3a02fc;}this[_0x14496a(0x2b5)]=_0x45db9c+':';}catch(_0x242f6d){console[_0x14496a(0x5c5)]('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:',_0x242f6d);}}async['configureIPv6'](_0x122a09){const _0x5c12cc=a0_0x98996d;let _0x208d87=_0x5c12cc(0x62e)+_0x122a09+'/64\x20dev\x20'+this[_0x5c12cc(0x613)];try{await Dt(_0x208d87),console['log'](_0x5c12cc(0x580)+_0x122a09);}catch(_0x3bf7f4){console[_0x5c12cc(0x5c5)](_0x5c12cc(0x702)+_0x3bf7f4);}}async['removeIPv6'](_0x17335c){const _0xe1f419=a0_0x98996d;let _0x571882=_0xe1f419(0x1d8)+_0x17335c+_0xe1f419(0x2ea)+this[_0xe1f419(0x613)];try{await Dt(_0x571882),console[_0xe1f419(0x26d)](_0xe1f419(0x301)+_0x17335c);}catch(_0x416c32){console[_0xe1f419(0x5c5)]('Error\x20removing\x20IPv6\x20address:\x20'+_0x416c32);}}[a0_0x98996d(0x3b0)](){const _0x3f0293=a0_0x98996d;return _0x3f0293(0x2c0)[_0x3f0293(0x5d1)](/X/g,()=>_0x3f0293(0x2e4)[_0x3f0293(0x549)](Math[_0x3f0293(0x6fc)](Math[_0x3f0293(0x768)]()*0x10)));}[a0_0x98996d(0x7e6)](_0x8f2459,_0x5bc261){const _0x3259f2=a0_0x98996d;let _0x24351b=_0x5bc261[_0x3259f2(0x4fb)](':');return _0x24351b[0x0]=(parseInt(_0x24351b[0x0],0x10)^0x2)[_0x3259f2(0x191)](0x10)[_0x3259f2(0x761)](0x2,'0'),''+_0x8f2459+_0x24351b[0x0]+_0x24351b[0x1]+':'+_0x24351b[0x2]+_0x3259f2(0x536)+_0x24351b[0x3]+':'+_0x24351b[0x4]+_0x24351b[0x5];}[a0_0x98996d(0x7ad)](){const _0x4a3f89=a0_0x98996d;let _0x912827=this[_0x4a3f89(0x2b5)];_0x912827['endsWith'](':')||(_0x912827+=':');let _0x438885=this[_0x4a3f89(0x3b0)]();return this['ip6eui'](_0x912827,_0x438885);}[a0_0x98996d(0x744)](_0x40458b){const _0x3c2058=a0_0x98996d;return new RegExp('^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$')[_0x3c2058(0x406)](_0x40458b);}async[a0_0x98996d(0x4a7)](_0x1d0f7c){const _0x287d5a=a0_0x98996d;let _0x3f099e=[{'url':_0x287d5a(0x4e1),'parse':_0x1b1036=>_0x1b1036['ip']},{'url':_0x287d5a(0x3c7),'parse':_0x45a575=>_0x45a575['ip']},{'url':_0x287d5a(0x2e0),'parse':_0x2378c8=>_0x2378c8[_0x287d5a(0x317)]()},{'url':_0x287d5a(0x3d4),'parse':_0x492842=>_0x492842[_0x287d5a(0x317)]()}],_0x17b0f9=_0x3f099e[Math['floor'](Math[_0x287d5a(0x768)]()*_0x3f099e[_0x287d5a(0x217)])];try{let _0x33f020=await vi[_0x287d5a(0x36a)]['get'](_0x17b0f9['url'],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x1d0f7c}}),_0x336d95=_0x17b0f9[_0x287d5a(0x184)](_0x33f020[_0x287d5a(0x222)]);return _0x336d95[_0x287d5a(0x31c)]()===_0x1d0f7c[_0x287d5a(0x31c)]()?(console[_0x287d5a(0x26d)](_0x287d5a(0x6e7)+_0x1d0f7c),!0x0):(console[_0x287d5a(0x5c5)](_0x287d5a(0x208)+_0x1d0f7c+_0x287d5a(0x4b2)+_0x336d95),!0x1);}catch(_0x1d43ea){return console[_0x287d5a(0x5c5)](_0x287d5a(0x1d3)+_0x17b0f9[_0x287d5a(0x66c)]+':\x20'+_0x1d43ea[_0x287d5a(0x334)]),!0x1;}}async[a0_0x98996d(0x46f)](_0x6ec9b8,_0xbf21ee){const _0x7d763f=a0_0x98996d;if(!this[_0x7d763f(0x2b5)]||!this['networkInterface'])return console[_0x7d763f(0x5c5)]('IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.'),null;let _0x386994;do _0x386994=this['generateRandomIPv6'](),console[_0x7d763f(0x26d)](_0x7d763f(0x754)+_0x386994);while(!await this[_0x7d763f(0x3b8)](_0x386994));await this[_0x7d763f(0x803)](_0x386994),console[_0x7d763f(0x26d)]('Configured\x20IPv6:\x20'+_0x386994);let _0x2cb324={'_id':_0x6ec9b8+'-'+_0xbf21ee,'ip':_0x386994},_0x49853b=await this[_0x7d763f(0x160)][_0x7d763f(0x60d)](_0x2cb324,_0x2cb324[_0x7d763f(0x699)]);return console[_0x7d763f(0x26d)](_0x7d763f(0x3df)+_0x49853b),_0x386994;}async[a0_0x98996d(0x3b8)](_0x1fbd13){const _0x29567e=a0_0x98996d;return this[_0x29567e(0x744)](_0x1fbd13)?!await this[_0x29567e(0x160)][_0x29567e(0x218)]({'where':{'ip':_0x1fbd13}}):!0x1;}async[a0_0x98996d(0x37a)](_0xf88769,_0x491dd2){const _0x389c29=a0_0x98996d;let _0x526da4=_0xf88769+'-'+_0x491dd2,_0x399cb6=await this['cacheInstanceRepository'][_0x389c29(0x218)]({'where':{'_id':_0x526da4}});_0x399cb6&&_0x399cb6['ip']&&(await this[_0x389c29(0x1cd)](_0x399cb6['ip']),await this[_0x389c29(0x160)]['deleteOne']({'where':{'_id':_0x526da4}}));}},xo=new Is(),se=xo,Ds=a0_0x98996d(0x3b3),Oi,de=null,Ta=null,Do=0x3,Po=null,Ni=b['get'](a0_0x98996d(0x197))[a0_0x98996d(0x496)][a0_0x98996d(0x2d4)],$i=b[a0_0x98996d(0x651)](a0_0x98996d(0x5be));async function ko(){const _0x13a9eb=a0_0x98996d;let _0x553641=await Se[_0x13a9eb(0x218)]();de=_0x553641?.['WebhookGlobal']??null,Po=_0x553641?.[_0x13a9eb(0x656)]??null,Ds=_0x553641?.[_0x13a9eb(0x531)]??'Safari',Oi=_0x553641?.[_0x13a9eb(0x149)]??W??_0x13a9eb(0x2f6);}async function Lo(){await ko();}Lo();var Pt={},Ce=class u{constructor(_0x34aae3,_0x1c935c,_0x6d6aad){const _0x43218b=a0_0x98996d;this['configService']=_0x34aae3,this[_0x43218b(0x695)]=_0x1c935c,this[_0x43218b(0x50b)]=_0x6d6aad,this[_0x43218b(0x227)]=null,this['logger']=new N(u[_0x43218b(0x592)]),this['instance']={},this['localWebhook']={},this[_0x43218b(0x68d)]={'state':_0x43218b(0x358)},this['storePath']=(0x0,L[_0x43218b(0x38e)])(re,_0x43218b(0x1f6)),this[_0x43218b(0x23d)]=new xs['default'](),this[_0x43218b(0x18d)]=new xs[(_0x43218b(0x36a))](),this['endSession']=!0x1,this[_0x43218b(0x66d)]={'status.instance':_0x43218b(0x79d),'connection.update':_0x43218b(0x79d),'qrcode.updated':_0x43218b(0x517),'messages.upsert':_0x43218b(0x857),'send.message':_0x43218b(0x857),'messages.update':_0x43218b(0x42f),'group.upsert':_0x43218b(0x7d0),'group.update':_0x43218b(0x7d0),'group-participants.update':_0x43218b(0x7d0),'messages.set':_0x43218b(0x2fb),'contacts.set':_0x43218b(0x797),'contacts.upsert':_0x43218b(0x797),'contacts.update':_0x43218b(0x797),'presence.update':'/wa-presence','chats.set':'/wa-chats','chats.update':_0x43218b(0x737),'chats.upsert':_0x43218b(0x737),'chats.delete':_0x43218b(0x737)},this[_0x43218b(0x54a)]=0x0,this['reconnectTimestamps']=[],this[_0x43218b(0x6bf)]=0xea60,this[_0x43218b(0x7fd)]=!0x1,this[_0x43218b(0x82f)]={'chats.upsert':async(_0x68ba03,_0x4eb87f)=>{const _0x417f1f=_0x43218b;let _0x1ecf8d=[];for await(let _0x145925 of _0x68ba03)_0x1ecf8d[_0x417f1f(0x69d)]({'_id':_0x145925['id'],'owner':this['instance']['wuid'],'group':_0x145925['id']['endsWith'](_0x417f1f(0x27b)),'name':_0x145925[_0x417f1f(0x592)]||_0x145925[_0x417f1f(0x196)]||null,'contactname':null,'lastmsg':_0x145925[_0x417f1f(0x839)]&&_0x145925[_0x417f1f(0x839)]['toString']()['length']<0xd?_0x145925['conversationTimestamp']*0x3e8:_0x145925[_0x417f1f(0x839)]||null,'archived':_0x145925['archived']||!0x1,'unreadcount':_0x145925[_0x417f1f(0x2cb)]||0x0,'ephemeralExpiration':_0x145925[_0x417f1f(0x1ba)]||0x0});this[_0x417f1f(0x143)](_0x417f1f(0x50a),_0x1ecf8d);},'chats.update':async(_0x3a2ed2,_0x520725)=>{const _0xd2e76b=_0x43218b;for(let _0x3530ad of _0x3a2ed2){let _0x4cabb4={'_id':_0x3530ad['id'],'owner':this[_0xd2e76b(0x78a)][_0xd2e76b(0x3ef)],'archived':_0x3530ad[_0xd2e76b(0x72d)],'muteEndTime':_0x3530ad[_0xd2e76b(0x55b)],'ephemeralExpiration':_0x3530ad[_0xd2e76b(0x1ba)]},_0x35c612=!0x1,_0x21478d={};_0x4cabb4[_0xd2e76b(0x72d)]!=null&&(this[_0xd2e76b(0x669)][_0xd2e76b(0x2a0)](this['instanceName']+'\x20('+this[_0xd2e76b(0x78a)][_0xd2e76b(0x3ef)]+'):\x20teve\x20mudanas\x20chat.archived:\x20'+_0x3530ad['id']+_0xd2e76b(0x3ad)+_0x3530ad[_0xd2e76b(0x72d)]),_0x35c612=!0x0,_0x21478d[_0xd2e76b(0x72d)]=_0x3530ad[_0xd2e76b(0x72d)]),_0xd2e76b(0x55b)in _0x3530ad&&(this[_0xd2e76b(0x669)][_0xd2e76b(0x2a0)](this[_0xd2e76b(0x193)]+'\x20('+this['instance'][_0xd2e76b(0x3ef)]+_0xd2e76b(0x7e5)+_0x3530ad['id']+_0xd2e76b(0x3ad)+(_0x3530ad[_0xd2e76b(0x55b)]??'0')),_0x35c612=!0x0,_0x21478d[_0xd2e76b(0x55b)]=_0x3530ad[_0xd2e76b(0x55b)]??0x0),_0xd2e76b(0x1ba)in _0x3530ad&&(this['logger']['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0xd2e76b(0x1a2)+_0x3530ad['id']+_0xd2e76b(0x3ad)+(_0x3530ad[_0xd2e76b(0x1ba)]!==void 0x0?_0x3530ad[_0xd2e76b(0x1ba)]:'undefined')),_0x21478d[_0xd2e76b(0x1ba)]=_0x3530ad[_0xd2e76b(0x1ba)]===null?0x0:_0x3530ad[_0xd2e76b(0x1ba)],_0x35c612=!0x0);let _0x46dfb8;_0x35c612&&(_0x46dfb8=await this[_0xd2e76b(0x50b)][_0xd2e76b(0x500)][_0xd2e76b(0x1f8)]({'where':{'_id':_0x3530ad['id']}},_0x21478d,this[_0xd2e76b(0x78a)]['wuid'])),_0x46dfb8&&U(this[_0xd2e76b(0x193)],'chats',{'chat':_0x46dfb8});}},'chats.delete':async _0x17413a=>{const _0x193218=_0x43218b;for(let _0x38a0af of _0x17413a)if(_0x38a0af[_0x193218(0x553)]('@g.us')){await this[_0x193218(0x50b)][_0x193218(0x500)][_0x193218(0x6d0)]({'where':{'_id':_0x38a0af}},this[_0x193218(0x78a)][_0x193218(0x3ef)]);let _0x193fdb={'where':{'key':{'remoteJid':_0x38a0af}}};await this[_0x193218(0x50b)]['message'][_0x193218(0x6d0)](_0x193fdb,this[_0x193218(0x78a)][_0x193218(0x3ef)]);}else{await this['repository'][_0x193218(0x500)][_0x193218(0x1f8)]({'where':{'_id':_0x38a0af}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x193218(0x78a)]['wuid']);let _0x422f7c={'where':{'key':{'remoteJid':_0x38a0af}}};await this[_0x193218(0x50b)]['message'][_0x193218(0x6d0)](_0x422f7c,this[_0x193218(0x78a)][_0x193218(0x3ef)]);}this[_0x193218(0x143)](_0x193218(0x213),[..._0x17413a]);}},this[_0x43218b(0x61c)]={'contacts.upsert':async(_0x81704b,_0x54104c)=>{const _0x38985d=_0x43218b;let _0x34ab15=await this[_0x38985d(0x50b)][_0x38985d(0x3d3)][_0x38985d(0x704)]({'where':{}},this['instance']['wuid']),_0x5df7c0=[];for await(let _0x18b1dd of _0x81704b)_0x34ab15[_0x38985d(0x704)](_0x416af2=>_0x416af2[_0x38985d(0x699)]===_0x18b1dd['id'])||_0x5df7c0[_0x38985d(0x69d)]({'_id':_0x18b1dd['id'],'pushName':_0x18b1dd?.[_0x38985d(0x592)]||_0x18b1dd?.['verifiedName'],'owner':this['instance'][_0x38985d(0x3ef)]});this[_0x38985d(0x143)](_0x38985d(0x559),_0x5df7c0),await this['repository'][_0x38985d(0x3d3)][_0x38985d(0x45a)](_0x5df7c0);},'contacts.update':async(_0x124922,_0x31c453)=>{const _0x39d0bd=_0x43218b;let _0x2f2924=[];for await(let _0x158842 of _0x124922)_0x2f2924['push']({'_id':_0x158842['id'],'pushName':_0x158842?.[_0x39d0bd(0x592)]??_0x158842?.['verifiedName'],'owner':this['instance'][_0x39d0bd(0x3ef)]});this['sendDataWebhook']('contacts.update',_0x2f2924);}},this[_0x43218b(0x270)]={'messaging-history.set':async({messages:_0x38214d,chats:_0x196295,isLatest:_0x5a1f0c},_0x2af342)=>{const _0x5c6a76=_0x43218b;if(_0x5a1f0c){let _0xc74f34=await Promise[_0x5c6a76(0x6aa)](_0x196295[_0x5c6a76(0x384)](async _0x48469b=>({'_id':_0x48469b['id'],'owner':this[_0x5c6a76(0x78a)]['wuid'],'group':_0x48469b['id'][_0x5c6a76(0x553)](_0x5c6a76(0x27b)),'name':_0x48469b[_0x5c6a76(0x592)]||_0x48469b[_0x5c6a76(0x196)]||_0x48469b['username']||null,'contactname':null,'lastmsg':_0x48469b['conversationTimestamp']&&_0x48469b[_0x5c6a76(0x839)]['toString']()[_0x5c6a76(0x217)]<0xd?_0x48469b[_0x5c6a76(0x839)]*0x3e8:_0x48469b[_0x5c6a76(0x839)]||null,'archived':_0x48469b[_0x5c6a76(0x72d)]||!0x1,'unreadcount':_0x48469b[_0x5c6a76(0x2cb)]||0x0,'ephemeralExpiration':_0x48469b[_0x5c6a76(0x1ba)]||0x0,'muteEndTime':_0x48469b['muteEndTime']||0x0})));this[_0x5c6a76(0x143)]('chats.set',_0xc74f34),await this[_0x5c6a76(0x44d)](_0xc74f34,_0x2af342);}let _0x39d9c3=[],_0x406451=Date[_0x5c6a76(0x4a3)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0xccdd23]of Object[_0x5c6a76(0x736)](_0x38214d)){if(_0xccdd23[_0x5c6a76(0x334)]?.[_0x5c6a76(0x4e8)]||_0xccdd23['message']?.['senderKeyDistributionMessage']||!_0xccdd23[_0x5c6a76(0x334)]||_0xccdd23[_0x5c6a76(0x328)][_0x5c6a76(0x5d9)]===_0x5c6a76(0x6bb)||(_s['default'][_0x5c6a76(0x32b)](_0xccdd23?.[_0x5c6a76(0x5ae)])&&(_0xccdd23['messageTimestamp']=_0xccdd23['messageTimestamp']?.[_0x5c6a76(0x269)]()),_0xccdd23['messageTimestamp']&&_0xccdd23['messageTimestamp'][_0x5c6a76(0x191)]()['length']<0xd&&(_0xccdd23[_0x5c6a76(0x5ae)]=_0xccdd23[_0x5c6a76(0x5ae)]*0x3e8),_0xccdd23[_0x5c6a76(0x5ae)]<_0x406451))continue;let _0x311206=(0x0,w['normalizeMessageContent'])(_0xccdd23[_0x5c6a76(0x334)]),_0xbb8739=(0x0,w['getContentType'])(_0x311206),{message_normalized:_0x1d7bd4}=this[_0x5c6a76(0x742)](_0x311206,_0xbb8739,null);Object[_0x5c6a76(0x58d)](_0x1d7bd4)[_0x5c6a76(0x217)]>0x0&&_0x39d9c3[_0x5c6a76(0x69d)]({'_id':_0xccdd23[_0x5c6a76(0x328)]['id'],'key':_0xccdd23['key'],'pushName':_0xccdd23[_0x5c6a76(0x5d8)],'participant':_0xccdd23[_0x5c6a76(0x35d)],'message':_0x311206,'messageType':_0xbb8739,'message_normalized':{'key':_0xccdd23[_0x5c6a76(0x328)],'pushName':_0xccdd23[_0x5c6a76(0x5d8)],'messageTimestamp':_0xccdd23[_0x5c6a76(0x5ae)],..._0x1d7bd4},'messageTimestamp':_0xccdd23[_0x5c6a76(0x5ae)],'owner':this['instance'][_0x5c6a76(0x3ef)]});}_0x2af342['ENABLED']&&_0x39d9c3[_0x5c6a76(0x217)]>0x0&&(this['logger']['verbose'](this[_0x5c6a76(0x193)]+'\x20('+this[_0x5c6a76(0x78a)][_0x5c6a76(0x3ef)]+_0x5c6a76(0x526)+_0x39d9c3[_0x5c6a76(0x217)]+'\x20mensagens\x20de\x20'+this[_0x5c6a76(0x78a)][_0x5c6a76(0x3ef)]+_0x5c6a76(0x291)),await this[_0x5c6a76(0x50b)][_0x5c6a76(0x334)][_0x5c6a76(0x45a)]([..._0x39d9c3],this[_0x5c6a76(0x78a)]['wuid'])),this[_0x5c6a76(0x143)](_0x5c6a76(0x6a7),[..._0x39d9c3]),_0x38214d=void 0x0;},'messages.upsert':async({messages:_0x4ea2c8,type:_0x1ae958},_0x15a35e)=>{const _0x58b08e=_0x43218b;for(let _0x5999e4 of _0x4ea2c8){if(this['localWebhook']?.[_0x58b08e(0x168)]&&_0x5999e4[_0x58b08e(0x328)][_0x58b08e(0x5d9)][_0x58b08e(0x199)](_0x58b08e(0x27b))){this['logger'][_0x58b08e(0x2a0)](this[_0x58b08e(0x193)]+'\x20('+this[_0x58b08e(0x78a)][_0x58b08e(0x3ef)]+_0x58b08e(0x295));return;}if(_0x1ae958!==_0x58b08e(0x62d)||!_0x5999e4?.[_0x58b08e(0x334)]||_0x5999e4[_0x58b08e(0x334)]?.[_0x58b08e(0x4e8)]||_0x5999e4[_0x58b08e(0x334)][_0x58b08e(0x3ea)]||_0x5999e4[_0x58b08e(0x328)][_0x58b08e(0x5d9)]===_0x58b08e(0x6bb))return;let _0x8a98fb=null,_0x3c9224=null;if(_0x5999e4[_0x58b08e(0x528)]&&_0x5999e4[_0x58b08e(0x528)][0x0]===_0x58b08e(0x340)){console['error']('[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperao'),Pt[_0x5999e4[_0x58b08e(0x328)]['id']]=_0x5999e4,this[_0x58b08e(0x3a3)](_0x5999e4,0x0);return;}Pt[_0x5999e4[_0x58b08e(0x328)]['id']]&&(console[_0x58b08e(0x5c5)](_0x58b08e(0x5d6)),delete Pt[_0x5999e4['key']['id']]);try{_0x8a98fb=await this['processPollUpdateMessage'](_0x5999e4),_0x3c9224=_0x8a98fb?_0x8a98fb[_0x58b08e(0x38e)](','):null;}catch(_0x3429c5){this[_0x58b08e(0x669)][_0x58b08e(0x2a0)](this[_0x58b08e(0x193)]+'\x20('+this[_0x58b08e(0x78a)][_0x58b08e(0x3ef)]+_0x58b08e(0x526)+(_0x3429c5 instanceof Error?_0x3429c5['message']:JSON[_0x58b08e(0x5ab)](_0x3429c5,null,0x2))),_0x3c9224=_0x58b08e(0x7d7);}this['client'][_0x58b08e(0x1a6)](_0x58b08e(0x750)),_s['default'][_0x58b08e(0x32b)](_0x5999e4[_0x58b08e(0x5ae)])&&(_0x5999e4[_0x58b08e(0x5ae)]=_0x5999e4[_0x58b08e(0x5ae)]?.[_0x58b08e(0x269)]()),_0x5999e4['messageTimestamp']&&_0x5999e4[_0x58b08e(0x5ae)]['toString']()[_0x58b08e(0x217)]<0xd&&(_0x5999e4[_0x58b08e(0x5ae)]=_0x5999e4[_0x58b08e(0x5ae)]*0x3e8);let _0x1737e2=_0x5999e4['message'],_0xa01eac=(0x0,w['normalizeMessageContent'])(_0x1737e2),_0x387d99=(0x0,w[_0x58b08e(0x6fd)])(_0xa01eac),{messageContent:_0x5ee946,message_normalized:_0x193639}=this[_0x58b08e(0x742)](_0xa01eac,_0x387d99,_0x3c9224);_0x387d99===_0x58b08e(0x4e8)&&_0x5ee946?.['editedMessage']&&(_0x387d99=_0x58b08e(0x75a));let _0x9ff6ed,_0x1d1517=_0x5999e4['key'][_0x58b08e(0x5d9)]['endsWith'](_0x58b08e(0x27b));if(_0x5999e4[_0x58b08e(0x328)][_0x58b08e(0x1a7)])_0x9ff6ed=this['instance'][_0x58b08e(0x1fa)];else{let _0x17d470=_0x1d1517?_0x5999e4['key'][_0x58b08e(0x35d)]:_0x5999e4[_0x58b08e(0x328)]['remoteJid'];_0x9ff6ed=(await this[_0x58b08e(0x7c7)](_0x17d470,_0x5999e4['pushName'],!0x1))['cachedContact'][_0x58b08e(0x46e)];}let _0x4903b1={'_id':_0x5999e4[_0x58b08e(0x328)]['id'],'key':_0x5999e4[_0x58b08e(0x328)],'isGroup':_0x1d1517,'profilePictureUrl':_0x9ff6ed,'pushName':_0x5999e4[_0x58b08e(0x5d8)],'message':_0xa01eac,'messageType':_0x387d99,'message_normalized':{'key':_0x5999e4[_0x58b08e(0x328)],'pushName':_0x5999e4[_0x58b08e(0x5d8)],'messageTimestamp':_0x5999e4[_0x58b08e(0x5ae)],'source':(0x0,w[_0x58b08e(0x4da)])(_0x5999e4[_0x58b08e(0x328)]['id']),..._0x193639},'messageTimestamp':_0x5999e4[_0x58b08e(0x5ae)],'owner':this[_0x58b08e(0x78a)][_0x58b08e(0x3ef)],'source':(0x0,w[_0x58b08e(0x4da)])(_0x5999e4[_0x58b08e(0x328)]['id']),'expiration':_0x5ee946?.[_0x58b08e(0x7f9)]?.[_0x58b08e(0x31f)]||0x0};_0x5ee946||(this['logger'][_0x58b08e(0x5c5)](_0x58b08e(0x1a3)),this[_0x58b08e(0x669)][_0x58b08e(0x5c5)](_0x4903b1)),this[_0x58b08e(0x669)][_0x58b08e(0x26d)](this[_0x58b08e(0x193)]+'\x20('+this[_0x58b08e(0x78a)]['wuid']+_0x58b08e(0x526)+(_0x4903b1[_0x58b08e(0x328)]?.[_0x58b08e(0x1a7)]?_0x58b08e(0x12d):_0x58b08e(0x727))+'\x20['+_0x4903b1[_0x58b08e(0x328)]?.[_0x58b08e(0x5d9)][_0x58b08e(0x5d1)](_0x58b08e(0x6e2),'')+']\x20('+_0x4903b1[_0x58b08e(0x449)]+')'),_0x4903b1[_0x58b08e(0x289)]?.[_0x58b08e(0x673)]&&this['logger'][_0x58b08e(0x26d)](_0x5999e4[_0x58b08e(0x328)]['id']+':\x20'+_0x4903b1['message_normalized']?.['text']),await this[_0x58b08e(0x50b)]['message'][_0x58b08e(0x45a)]([_0x4903b1],this[_0x58b08e(0x78a)][_0x58b08e(0x3ef)]),this[_0x58b08e(0x143)](_0x58b08e(0x209),_0x4903b1),U(this[_0x58b08e(0x193)],'messages',{'message':_0x4903b1}),_0x5999e4['key'][_0x58b08e(0x5d9)]!==_0x58b08e(0x6bb)&&await this[_0x58b08e(0x530)](_0x15a35e,_0x4903b1,_0x58b08e(0x71a));}},'messages.update':async(_0x138dbe,_0x4adcaa)=>{const _0x1cb3fd=_0x43218b;let _0x410c49={0x0:_0x1cb3fd(0x541),0x1:_0x1cb3fd(0x544),0x2:_0x1cb3fd(0x39f),0x3:_0x1cb3fd(0x2e2),0x4:_0x1cb3fd(0x7a5),0x5:'PLAYED'};for await(let {key:_0x14f921,update:_0x58a1d9}of _0x138dbe){if(this['localWebhook']?.[_0x1cb3fd(0x168)]&&_0x14f921[_0x1cb3fd(0x5d9)]['includes'](_0x1cb3fd(0x27b))){this['logger'][_0x1cb3fd(0x2a0)](this[_0x1cb3fd(0x193)]+'\x20('+this[_0x1cb3fd(0x78a)][_0x1cb3fd(0x3ef)]+_0x1cb3fd(0x272));return;}if(_0x14f921['remoteJid']!==_0x1cb3fd(0x6bb)){let _0x13804d=Date[_0x1cb3fd(0x4a3)](),_0x39906c;_0x58a1d9[_0x1cb3fd(0x334)]===null&&_0x58a1d9[_0x1cb3fd(0x7ce)]===void 0x0?_0x39906c='DELETED':_0x39906c=_0x410c49[_0x58a1d9[_0x1cb3fd(0x7ce)]];let _0x1f7de8=_0x14f921[_0x1cb3fd(0x5d9)][_0x1cb3fd(0x5d1)](/:\d{1,2}@/g,'@'),_0x29323c={..._0x14f921,'remoteJid':_0x1f7de8,'status':_0x39906c,'datetime':_0x13804d,'owner':this['instance'][_0x1cb3fd(0x3ef)]};this['sendDataWebhook'](_0x1cb3fd(0x68a),_0x29323c),await this[_0x1cb3fd(0x367)](_0x14f921,_0x29323c);}}},'labels.association':async({type:_0x207175,association:_0x16bcaf})=>{const _0x452364=_0x43218b;if(_0x16bcaf[_0x452364(0x1b8)]===_0x452364(0x5bf)){let _0x2e41ea,_0x44863d=0x0;for(;!_0x2e41ea&&_0x44863d<this[_0x452364(0x6fa)];)_0x2e41ea=await this[_0x452364(0x50b)][_0x452364(0x500)][_0x452364(0x218)]({'where':{'_id':_0x16bcaf['chatId']}},this['instance'][_0x452364(0x3ef)]),_0x2e41ea||(_0x44863d++,this['logger'][_0x452364(0x22b)](this[_0x452364(0x193)]+'\x20('+this[_0x452364(0x78a)][_0x452364(0x3ef)]+_0x452364(0x428)+_0x16bcaf[_0x452364(0x7fe)]+_0x452364(0x74f)+this[_0x452364(0x591)]+'ms\x20(tentativa\x20'+_0x44863d+'/'+this[_0x452364(0x6fa)]+')'),await this[_0x452364(0x6d6)](this[_0x452364(0x591)]));if(!_0x2e41ea){this[_0x452364(0x669)][_0x452364(0x5c5)]('Falhou\x20ao\x20encontrar\x20chat\x20'+_0x16bcaf[_0x452364(0x7fe)]+_0x452364(0x6c5)+this['delayChatLabel_MAX_RETRIES']+'\x20tentativas.');return;}switch(_0x207175){case _0x452364(0x712):console[_0x452364(0x26d)](_0x16bcaf),await this[_0x452364(0x50b)][_0x452364(0x500)][_0x452364(0x1f8)]({'where':{'_id':_0x16bcaf[_0x452364(0x7fe)]}},{'leadInfo.etiquetas':_0x16bcaf['labelId']},this[_0x452364(0x78a)][_0x452364(0x3ef)],void 0x0,_0x452364(0x833));break;case _0x452364(0x629):console[_0x452364(0x26d)](_0x16bcaf),await this[_0x452364(0x50b)]['chat'][_0x452364(0x1f8)]({'where':{'_id':_0x16bcaf[_0x452364(0x7fe)]}},{'leadInfo.etiquetas':_0x16bcaf['labelId']},this[_0x452364(0x78a)][_0x452364(0x3ef)],void 0x0,_0x452364(0x230));break;default:this[_0x452364(0x669)][_0x452364(0x5c5)]('unknown\x20operation\x20type\x20['+_0x207175+']');}}},'labels.edit':async _0x58cecc=>{const _0x4ac0be=_0x43218b;if(!_0x58cecc||!_0x58cecc['id']){this[_0x4ac0be(0x669)][_0x4ac0be(0x5c5)](_0x4ac0be(0x6d9));return;}if(!_0x58cecc['deleted']){let _0x4b9eb4=['#ff9484',_0x4ac0be(0x1ae),_0x4ac0be(0x33a),'#dfaef0',_0x4ac0be(0x5e6),_0x4ac0be(0x57a),'#fe9dfe','#d3a91f',_0x4ac0be(0x817),_0x4ac0be(0x791),'#01d0e2',_0x4ac0be(0x815),'#92ceac',_0x4ac0be(0x576),_0x4ac0be(0x6a2),_0x4ac0be(0x67e),_0x4ac0be(0x194),'#b4ebff',_0x4ac0be(0x200),_0x4ac0be(0x7c2)],_0x4c6eea;typeof _0x58cecc[_0x4ac0be(0x4c5)]==_0x4ac0be(0x62f)&&_0x58cecc[_0x4ac0be(0x4c5)]>=0x0&&_0x58cecc[_0x4ac0be(0x4c5)]<_0x4b9eb4['length']?_0x4c6eea=_0x4b9eb4[_0x58cecc[_0x4ac0be(0x4c5)]]:(this[_0x4ac0be(0x669)][_0x4ac0be(0x5c5)](_0x4ac0be(0x676)+_0x58cecc[_0x4ac0be(0x4c5)]),_0x4c6eea=_0x4ac0be(0x4c6));let _0x1d98fb={'_id':_0x58cecc['id'],'colorHex':_0x4c6eea,'color':_0x58cecc?.[_0x4ac0be(0x4c5)],'name':_0x58cecc?.[_0x4ac0be(0x592)],'owner':this[_0x4ac0be(0x78a)]['wuid']};await this[_0x4ac0be(0x50b)][_0x4ac0be(0x80b)][_0x4ac0be(0x1f8)]({'where':{'_id':_0x58cecc['id']}},_0x1d98fb,this['instance']['wuid']),this[_0x4ac0be(0x669)]['info'](this[_0x4ac0be(0x193)]+'\x20('+this[_0x4ac0be(0x78a)][_0x4ac0be(0x3ef)]+_0x4ac0be(0x1fd)+_0x58cecc);}_0x58cecc['deleted']&&(await this[_0x4ac0be(0x50b)]['label']['delete']({'where':{'_id':_0x58cecc['id']}},this['instance'][_0x4ac0be(0x3ef)]),this[_0x4ac0be(0x669)][_0x4ac0be(0x22b)](_0x4ac0be(0x7f3)+_0x58cecc['id']));}},this[_0x43218b(0x148)]={'groups.upsert':async _0x125294=>{const _0x3068ce=_0x43218b;this[_0x3068ce(0x456)]?.[_0x3068ce(0x168)]||this[_0x3068ce(0x143)](_0x3068ce(0x2ee),_0x125294);for(let _0x8f1e9b of _0x125294)await this['updateGroupWebhook'](_0x8f1e9b);},'groups.update':async _0x1ae7de=>{const _0xb0cb38=_0x43218b;this[_0xb0cb38(0x456)]?.[_0xb0cb38(0x168)]||this[_0xb0cb38(0x143)]('groups.update',_0x1ae7de);for(let _0x39f054 of _0x1ae7de)await this['updateGroupWebhook'](_0x39f054);},'group-participants.update':async _0x3b73a2=>{const _0x43745c=_0x43218b;this['localWebhook']?.[_0x43745c(0x168)]||this[_0x43745c(0x143)]('group-participants.update',_0x3b73a2),await this[_0x43745c(0x4c0)](_0x3b73a2);}},this[_0x43218b(0x6fa)]=0x5,this[_0x43218b(0x591)]=0x1388,this[_0x43218b(0x6cd)]=0x0,this['processPollUpdateMessage']=async _0x284b73=>{const _0x5f0761=_0x43218b;if(_0x284b73['message']?.[_0x5f0761(0x7c4)]){let _0x47a67e=await this[_0x5f0761(0x13c)](_0x284b73[_0x5f0761(0x334)][_0x5f0761(0x7c4)][_0x5f0761(0x5fa)],!0x0);if(_0x47a67e){let _0x5c348e=_0x47a67e[_0x5f0761(0x328)][_0x5f0761(0x1a7)]?this[_0x5f0761(0x78a)]['wuid']+'@s.whatsapp.net':_0x47a67e[_0x5f0761(0x328)]['participant']||_0x47a67e[_0x5f0761(0x328)][_0x5f0761(0x5d9)],_0x554726=_0x47a67e[_0x5f0761(0x328)]['id'],_0x442722=_0x47a67e[_0x5f0761(0x334)],_0x4ba165=Buffer[_0x5f0761(0x54e)](_0x442722[_0x5f0761(0x7da)][_0x5f0761(0x32f)][_0x5f0761(0x191)](_0x5f0761(0x574)),_0x5f0761(0x574)),_0x2f0d9e=(0x0,w[_0x5f0761(0x491)])(_0x284b73['message'][_0x5f0761(0x7c4)][_0x5f0761(0x50c)],{'pollCreatorJid':_0x5c348e,'pollMsgId':_0x554726,'pollEncKey':_0x4ba165,'voterJid':_0x284b73['key'][_0x5f0761(0x1a7)]?this[_0x5f0761(0x78a)][_0x5f0761(0x3ef)]+_0x5f0761(0x6e2):_0x284b73[_0x5f0761(0x328)]['remoteJid']['endsWith'](_0x5f0761(0x1e5))?_0x284b73[_0x5f0761(0x328)][_0x5f0761(0x35d)]:_0x284b73['key'][_0x5f0761(0x5d9)]}),_0x1b0ab0=[],_0x277bac=_0x2f0d9e[_0x5f0761(0x305)][_0x5f0761(0x384)](_0x60ee6c=>Buffer[_0x5f0761(0x54e)](_0x60ee6c)[_0x5f0761(0x191)](_0x5f0761(0x574)));for(let {optionName:_0x334d37}of _0x442722['pollCreationMessage']?.[_0x5f0761(0x17f)]||_0x442722['pollCreationMessageV3']?.[_0x5f0761(0x17f)]||_0x442722[_0x5f0761(0x261)]?.[_0x5f0761(0x17f)])_0x277bac[_0x5f0761(0x719)]((0x0,w[_0x5f0761(0x683)])(Buffer[_0x5f0761(0x54e)](_0x334d37))['toString']('hex'))>-0x1&&_0x1b0ab0[_0x5f0761(0x69d)](_0x334d37);return _0x1b0ab0;}}return null;},this[_0x43218b(0x742)]=(_0x5cc802,_0x23374f,_0x2f5fbc)=>{const _0x564180=_0x43218b;try{let _0x679a2d=_0x5cc802?(0x0,w[_0x564180(0x621)])(_0x5cc802)[_0x23374f]:void 0x0,_0x390274={},_0x10e780=null,_0x12ef7f=null,_0x52758e=null;_0x23374f===_0x564180(0x4e8)&&_0x679a2d?.[_0x564180(0x75a)]&&(_0x23374f=(0x0,w[_0x564180(0x6fd)])(_0x679a2d[_0x564180(0x75a)]),_0x10e780=_0x5cc802[_0x564180(0x4e8)][_0x564180(0x328)]['id'],_0x679a2d=_0x5cc802[_0x564180(0x4e8)][_0x564180(0x75a)][_0x23374f]),_0x5cc802[_0x23374f]?.[_0x564180(0x7f9)]?.[_0x564180(0x43b)]&&_0x5cc802[_0x23374f]?.['contextInfo']?.['quotedMessage']&&(_0x12ef7f=_0x5cc802[_0x23374f][_0x564180(0x7f9)][_0x564180(0x43b)]),_0x5cc802['reactionMessage']&&(_0x52758e=_0x5cc802[_0x564180(0x650)][_0x564180(0x328)]['id']);let _0x5cea48;if(_0x679a2d&&typeof _0x679a2d==_0x564180(0x623)&&_0x564180(0x5fa)in _0x679a2d&&({pollCreationMessageKey:_0x5cea48}=_0x679a2d),_0x23374f==='pollCreationMessage'||_0x23374f===_0x564180(0x261)||_0x23374f===_0x564180(0x1a4)){let _0x3e5bb6=_0x679a2d[_0x564180(0x17f)][_0x564180(0x384)](_0x393bbb=>_0x393bbb[_0x564180(0x588)])[_0x564180(0x38e)]('|');_0x390274[_0x564180(0x468)]=_0x3e5bb6;}let _0x238e35='';if(_0x679a2d&&(_0x238e35+=_0x679a2d[_0x564180(0x592)]?_0x679a2d[_0x564180(0x592)]:'',_0x238e35+=_0x679a2d[_0x564180(0x27a)]?'\x20'+_0x679a2d['caption']:'',_0x238e35+=_0x679a2d[_0x564180(0x314)]?'\x20'+_0x679a2d[_0x564180(0x314)]:'',_0x238e35+=_0x679a2d['displayName']?'\x20'+_0x679a2d['displayName']:''),_0x23374f==='listMessage'){_0x238e35=(_0x679a2d[_0x564180(0x190)]||'')+'\x0a'+(_0x679a2d[_0x564180(0x320)]||'')+'\x0a'+(_0x679a2d[_0x564180(0x1ea)]||'');let _0x1b6c42=this[_0x564180(0x1f9)](_0x679a2d[_0x564180(0x529)]);_0x390274['convertedOptions']=_0x1b6c42;}if(_0x23374f===_0x564180(0x280)&&(_0x2f5fbc=_0x679a2d[_0x564180(0x190)]),_0x679a2d&&_0x679a2d[_0x564180(0x42b)]){let _0x24d1ce=this[_0x564180(0x6b7)](JSON[_0x564180(0x5ab)](_0x679a2d['vcard'],null,0x2));_0x238e35=_0x238e35+'\x0a'+_0x24d1ce;}if(_0x679a2d){let {sections:_0x3ee5dc,listType:_0xc7a05,displayName:_0x181f3c,vcard:_0x141433,contactVcard:_0x1b5b1d,name:_0x1debd7,caption:_0x2af7fa,conversation:_0x6f6a74,pollCreationMessageKey:_0xe3325,footerText:_0x51cece,contentText:_0x12b98b,pageCount:_0x1d3905,headerType:_0x4e180f,isAvatar:_0x408c7b,isAnimated:_0x3d025a,fallbackLc:_0x3254d6,fallbackLg:_0x575ecb,namespace:_0x498016,elementName:_0x1457a8,localizableParams:_0x741bae,viewOnce:_0x47c9a4,height:_0x466e8a,width:_0x269f3b,key:_0x455284,firstScanLength:_0x1725d9,firstScanSidecar:_0x17166f,gifPlayback:_0x54cd5d,gifAttribution:_0x1eb005,midQualityFileSha256:_0x1f35b6,scansSidecar:_0x12bdce,streamingSidecar:_0x47db3f,thumbnailHeight:_0x2a2a9a,thumbnailWidth:_0x106bdc,thumbnailEncSha256:_0x243ceb,thumbnailDirectPath:_0x9c7881,canonicalUrl:_0x2334e4,matchedText:_0x33901a,previewType:_0x477639,thumbnailSha256:_0x2a720f,deviceListMetadataVersion:_0x1763f7,inviteLinkGroupTypeV2:_0x5ada53,interactiveAnnotations:_0x1ec65b,scanLengths:_0x225d5a,jpegThumbnail:_0x232fb7,url:_0x27a949,mediaKeyTimestamp:_0x29e144,waveform:_0x572371,stickerSentTs:_0x1b733c,firstFrameLength:_0x18914c,fileEncSha256:_0x3e4fcb,contextInfo:_0x4b2045,firstFrameSidecar:_0x242970,directPath:_0x45b6d3,fileSha256:_0x329229,mediaKey:_0x4b18c6,senderTimestampMs:_0x4b5c8d,..._0x4fe756}=_0x679a2d;(_0x23374f===_0x564180(0x319)||_0x23374f===_0x564180(0x280))&&(delete _0x4fe756['title'],delete _0x4fe756['description']),typeof _0x679a2d==_0x564180(0x170)?_0x390274={'text':_0x679a2d,'type':_0x23374f||_0x564180(0x314),..._0x10e780&&{'edited':_0x10e780},..._0x12ef7f&&{'quoted':_0x12ef7f},..._0x52758e&&{'reaction':_0x52758e}}:_0x390274={'text':_0x238e35,..._0x4fe756,..._0x23374f===_0x564180(0x7c4)?{'poll_id':_0x679a2d['pollCreationMessageKey']['id'],'quoted':_0x679a2d[_0x564180(0x5fa)]['id'],'vote':_0x2f5fbc}:{},..._0x23374f==='listResponseMessage'?{'vote':_0x2f5fbc}:{},'type':_0x23374f,..._0x10e780&&{'edited':_0x10e780},..._0x12ef7f&&{'quoted':_0x12ef7f},..._0x52758e&&{'reaction':_0x52758e},...(_0x23374f===_0x564180(0x35c)||_0x23374f===_0x564180(0x261)||_0x23374f==='pollCreationMessageV3'||_0x23374f===_0x564180(0x319))&&{'convertedOptions':_0x390274['convertedOptions']}};}return{'messageType':_0x23374f,'messageContent':_0x679a2d,'message_normalized':_0x390274};}catch(_0x53efef){return this[_0x564180(0x669)]['error'](_0x564180(0x732)+_0x53efef),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this['pendingMessages']=[],(this[_0x43218b(0x4ed)](),this[_0x43218b(0x1db)](),this[_0x43218b(0x78a)][_0x43218b(0x5db)]={'count':0x0},this['instance'][_0x43218b(0x346)]={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}set[a0_0x98996d(0x193)](_0x258e2d){const _0x5e0e8b=a0_0x98996d;if(!_0x258e2d){this[_0x5e0e8b(0x78a)][_0x5e0e8b(0x592)]=(0x0,Ri['v4'])();return;}this[_0x5e0e8b(0x78a)][_0x5e0e8b(0x592)]=_0x258e2d,this[_0x5e0e8b(0x143)](_0x5e0e8b(0x690),{'instance':this[_0x5e0e8b(0x78a)][_0x5e0e8b(0x592)],'status':_0x5e0e8b(0x4e0)});}get[a0_0x98996d(0x193)](){const _0x38f97f=a0_0x98996d;return this['instance'][_0x38f97f(0x592)];}get[a0_0x98996d(0x3ef)](){const _0x1893ee=a0_0x98996d;return this[_0x1893ee(0x78a)]['wuid'];}async['getProfileName'](){const _0x35fa66=a0_0x98996d;let _0x299fa7=this[_0x35fa66(0x855)][_0x35fa66(0x146)]?.[_0x35fa66(0x592)]??this['client']['user']?.[_0x35fa66(0x5cb)];if(!_0x299fa7){if(this[_0x35fa66(0x63a)][_0x35fa66(0x651)](_0x35fa66(0x635))[_0x35fa66(0x299)]){let _0x302304=await $['getClient']()['db'](this[_0x35fa66(0x63a)]['get'](_0x35fa66(0x635))['CONNECTION'][_0x35fa66(0x7e4)]+_0x35fa66(0x555))[_0x35fa66(0x4f8)](this['instanceName'])[_0x35fa66(0x218)]({'_id':'creds'});if(_0x302304){let _0x2c32a2=JSON[_0x35fa66(0x184)](JSON['stringify'](_0x302304),w[_0x35fa66(0x79b)]['reviver']);_0x299fa7=_0x2c32a2['me']?.['name']||_0x2c32a2['me']?.[_0x35fa66(0x5cb)];}}else{if((0x0,De[_0x35fa66(0x7b8)])((0x0,L[_0x35fa66(0x38e)])(fe,this['instanceName'],_0x35fa66(0x3f6)))){let _0x38e1a5=JSON['parse']((0x0,De[_0x35fa66(0x440)])((0x0,L[_0x35fa66(0x38e)])(fe,this[_0x35fa66(0x193)],'creds.json'),{'encoding':_0x35fa66(0x5d7)}));_0x299fa7=_0x38e1a5['me']?.[_0x35fa66(0x592)]||_0x38e1a5['me']?.[_0x35fa66(0x5cb)];}}}return _0x299fa7;}get['profilePictureUrl'](){const _0x1836f6=a0_0x98996d;return this[_0x1836f6(0x78a)]['profilePictureUrl'];}get[a0_0x98996d(0x54c)](){const _0xe3e08e=a0_0x98996d;return this[_0xe3e08e(0x78a)][_0xe3e08e(0x5db)]?.['pairingCode']?{'pairingCode':this[_0xe3e08e(0x78a)][_0xe3e08e(0x5db)]?.['pairingCode']}:{'code':this[_0xe3e08e(0x78a)]['qrcode']?.[_0xe3e08e(0x61a)],'base64':this[_0xe3e08e(0x78a)][_0xe3e08e(0x5db)]?.[_0xe3e08e(0x697)]};}async[a0_0x98996d(0x7a8)](){const _0x52bff3=a0_0x98996d;let _0x5e733d=await this[_0x52bff3(0x50b)][_0x52bff3(0x15d)][_0x52bff3(0x704)](this[_0x52bff3(0x193)]);this[_0x52bff3(0x456)][_0x52bff3(0x66c)]=_0x5e733d?.[_0x52bff3(0x66c)],this[_0x52bff3(0x456)][_0x52bff3(0x7ca)]=_0x5e733d?.[_0x52bff3(0x7ca)],this[_0x52bff3(0x456)][_0x52bff3(0x5a3)]=_0x5e733d?.[_0x52bff3(0x5a3)],this[_0x52bff3(0x456)][_0x52bff3(0x3c3)]=_0x5e733d?.[_0x52bff3(0x3c3)],this[_0x52bff3(0x456)][_0x52bff3(0x2c8)]=_0x5e733d?.[_0x52bff3(0x2c8)],this[_0x52bff3(0x456)]['SEND_MESSAGE']=_0x5e733d?.['SEND_MESSAGE'],this[_0x52bff3(0x456)][_0x52bff3(0x71a)]=_0x5e733d?.['MESSAGES_UPSERT'],this['localWebhook'][_0x52bff3(0x6f1)]=_0x5e733d?.[_0x52bff3(0x6f1)],this[_0x52bff3(0x456)][_0x52bff3(0x7a1)]=_0x5e733d?.[_0x52bff3(0x7a1)],this[_0x52bff3(0x456)]['GROUPS_UPDATE']=_0x5e733d?.['GROUPS_UPDATE'],this[_0x52bff3(0x456)][_0x52bff3(0x49f)]=_0x5e733d?.[_0x52bff3(0x49f)],this[_0x52bff3(0x456)][_0x52bff3(0x30f)]=_0x5e733d?.[_0x52bff3(0x30f)],this['localWebhook']['CHATS_UPSERT']=_0x5e733d?.[_0x52bff3(0x7f8)],this['localWebhook'][_0x52bff3(0x5c0)]=_0x5e733d?.[_0x52bff3(0x5c0)],this[_0x52bff3(0x456)][_0x52bff3(0x4d8)]=_0x5e733d?.[_0x52bff3(0x4d8)],this[_0x52bff3(0x456)][_0x52bff3(0x62c)]=_0x5e733d?.[_0x52bff3(0x62c)],this[_0x52bff3(0x456)][_0x52bff3(0x7c0)]=_0x5e733d?.[_0x52bff3(0x7c0)],this[_0x52bff3(0x456)][_0x52bff3(0x7f0)]=_0x5e733d?.['CONTACTS_UPDATE'],this['localWebhook'][_0x52bff3(0x7c5)]=_0x5e733d?.[_0x52bff3(0x7c5)],this[_0x52bff3(0x456)][_0x52bff3(0x123)]=_0x5e733d?.['MESSAGES_SET'],this['localWebhook'][_0x52bff3(0x7b4)]=_0x5e733d?.[_0x52bff3(0x7b4)],this[_0x52bff3(0x456)][_0x52bff3(0x168)]=_0x5e733d?.['groups_ignore'];}async[a0_0x98996d(0x38b)](_0x1cacfe){const _0xee2043=a0_0x98996d;let _0x351c74=['_id',_0xee2043(0x66c),_0xee2043(0x7ca),_0xee2043(0x5a3),_0xee2043(0x3c3),_0xee2043(0x2c8),_0xee2043(0x6f1),'MESSAGES_UPSERT',_0xee2043(0x383),'GROUPS_UPSERT',_0xee2043(0x13d),_0xee2043(0x49f),'CHATS_SET',_0xee2043(0x7f8),_0xee2043(0x5c0),_0xee2043(0x4d8),_0xee2043(0x62c),_0xee2043(0x7c0),'CONTACTS_UPDATE',_0xee2043(0x7c5),_0xee2043(0x123),'CONNECTION_UPDATE',_0xee2043(0x168)],_0x6c05f7={};return _0x351c74[_0xee2043(0x15b)](_0x30a4d5=>{_0x1cacfe[_0x30a4d5]!==void 0x0&&(_0x6c05f7[_0x30a4d5]=_0x1cacfe[_0x30a4d5]);}),_0x6c05f7[_0xee2043(0x66c)]&&(_0x6c05f7[_0xee2043(0x66c)]=_0x6c05f7[_0xee2043(0x66c)][_0xee2043(0x317)]()),await this['repository'][_0xee2043(0x15d)][_0xee2043(0x120)](_0x6c05f7,this[_0xee2043(0x193)]),Object['assign'](this[_0xee2043(0x456)],_0x6c05f7),await this[_0xee2043(0x50b)][_0xee2043(0x15d)][_0xee2043(0x704)](this[_0xee2043(0x193)]);}async['findWebhook'](){const _0x4e8cae=a0_0x98996d;return await this[_0x4e8cae(0x50b)][_0x4e8cae(0x15d)]['find'](this[_0x4e8cae(0x193)]);}async[a0_0x98996d(0x143)](_0x120020,_0x38b061){const _0x816990=a0_0x98996d;let _0x4b5884=_0x120020['replace'](/[\.-]/gm,'_')[_0x816990(0x4b1)](),_0x2546b1=this['localWebhook'][_0x816990(0x7ca)]&&(0x0,D[_0x816990(0x6a5)])(this['localWebhook'][_0x816990(0x66c)])?this[_0x816990(0x456)][_0x816990(0x66c)]+(this[_0x816990(0x456)]['local_map']?this[_0x816990(0x66d)][_0x120020]:''):null,_0x4cba67=this[_0x816990(0x456)][_0x4b5884],_0x21ef2a=de&&de['enabled']&&(0x0,D['isURL'])(de[_0x816990(0x66c)])?de[_0x816990(0x66c)]+(de[_0x816990(0x5a3)]?this[_0x816990(0x66d)][_0x120020]:''):null,_0xc3a687=de?de[_0x4b5884]:null;if(_0x4cba67&&_0x2546b1)try{await Q[_0x816990(0x36a)][_0x816990(0x120)]({'baseURL':_0x2546b1})[_0x816990(0x64e)]('',{'event':_0x120020,'instance':this['instance'][_0x816990(0x592)],'apikey':this[_0x816990(0x78a)][_0x816990(0x127)],'data':_0x38b061}),this[_0x816990(0x669)][_0x816990(0x26d)](this[_0x816990(0x193)]+'\x20('+this[_0x816990(0x78a)]['wuid']+_0x816990(0x852)+_0x120020+':\x20'+_0x2546b1);}catch{this[_0x816990(0x669)][_0x816990(0x5c5)](this[_0x816990(0x193)]+'\x20('+this[_0x816990(0x78a)][_0x816990(0x3ef)]+_0x816990(0x668)+_0x120020+':\x20'+_0x2546b1);}if(_0xc3a687&&_0x21ef2a)try{await Q[_0x816990(0x36a)]['create']({'baseURL':_0x21ef2a})[_0x816990(0x64e)]('',{'event':_0x120020,'instance':this['instance'][_0x816990(0x592)],'apikey':this[_0x816990(0x78a)][_0x816990(0x127)],'data':_0x38b061}),this['logger'][_0x816990(0x26d)](this[_0x816990(0x193)]+'\x20('+this[_0x816990(0x78a)][_0x816990(0x3ef)]+'):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20'+_0x120020+':\x20'+_0x21ef2a);}catch{this[_0x816990(0x669)][_0x816990(0x5c5)](this[_0x816990(0x193)]+'\x20('+this[_0x816990(0x78a)][_0x816990(0x3ef)]+_0x816990(0x3c8)+_0x120020+':\x20'+_0x21ef2a);}}async[a0_0x98996d(0x28f)]({qr:_0x543015,connection:_0x2b1d83,lastDisconnect:_0x2df373}){const _0x1e5090=a0_0x98996d;if(_0x543015){if(this[_0x1e5090(0x78a)]['qrcode'][_0x1e5090(0x55e)]===Do)return this[_0x1e5090(0x143)]('qrcode.updated',{'message':_0x1e5090(0x584),'statusCode':w[_0x1e5090(0x37d)][_0x1e5090(0x2fa)]}),this[_0x1e5090(0x68d)]={'state':_0x1e5090(0x1c5),'statusReason':w[_0x1e5090(0x37d)]['connectionClosed']},this['sendDataWebhook'](_0x1e5090(0x5a5),{'instance':this['instance'][_0x1e5090(0x592)],...this['stateConnection']}),this['sendDataWebhook'](_0x1e5090(0x690),{'instance':this[_0x1e5090(0x78a)][_0x1e5090(0x592)],'status':_0x1e5090(0x5cf)}),this[_0x1e5090(0x50b)][_0x1e5090(0x34c)][_0x1e5090(0x6d0)](this['instance'][_0x1e5090(0x592)]),this[_0x1e5090(0x5a2)]=!0x0,se[_0x1e5090(0x37a)](W,this[_0x1e5090(0x78a)]['name']),this[_0x1e5090(0x695)]['emit'](_0x1e5090(0x493),this[_0x1e5090(0x78a)]['name']);this[_0x1e5090(0x78a)][_0x1e5090(0x5db)]['count']++;let _0x48882c={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':'#ffffff','dark':_0x1e5090(0x4c6)}};Ai[_0x1e5090(0x36a)]['toDataURL'](_0x543015,_0x48882c,(_0x376f6f,_0x192303)=>{const _0x39e8c0=_0x1e5090;if(_0x376f6f){this['logger']['error'](this[_0x39e8c0(0x193)]+'\x20('+this[_0x39e8c0(0x78a)][_0x39e8c0(0x3ef)]+_0x39e8c0(0x61b)+(_0x376f6f instanceof Error?_0x376f6f['message']:JSON[_0x39e8c0(0x5ab)](_0x376f6f,null,0x2)));return;}this[_0x39e8c0(0x78a)][_0x39e8c0(0x5db)]['base64']=_0x192303,this[_0x39e8c0(0x78a)]['qrcode'][_0x39e8c0(0x61a)]=_0x543015,!this[_0x39e8c0(0x759)]&&this[_0x39e8c0(0x143)](_0x39e8c0(0x426),{'qrcode':{'instance':this[_0x39e8c0(0x78a)][_0x39e8c0(0x592)],'pairingCode':this['instance'][_0x39e8c0(0x5db)][_0x39e8c0(0x421)],'code':_0x543015,'base64':_0x192303}});}),this[_0x1e5090(0x759)]?this[_0x1e5090(0x78a)][_0x1e5090(0x5db)][_0x1e5090(0x421)]||(await(0x0,w[_0x1e5090(0x260)])(0x7d0),this[_0x1e5090(0x78a)]['qrcode'][_0x1e5090(0x421)]=await this[_0x1e5090(0x855)]['requestPairingCode'](this[_0x1e5090(0x759)])):this[_0x1e5090(0x78a)][_0x1e5090(0x5db)][_0x1e5090(0x421)]=null,Ii[_0x1e5090(0x36a)]['generate'](_0x543015,{'small':!0x0},_0x33a97c=>this[_0x1e5090(0x669)][_0x1e5090(0x26d)](_0x1e5090(0x6bc)+this[_0x1e5090(0x78a)][_0x1e5090(0x592)]+_0x1e5090(0x156)+this[_0x1e5090(0x78a)][_0x1e5090(0x5db)]['count']+_0x1e5090(0x524)+this[_0x1e5090(0x78a)][_0x1e5090(0x5db)]['pairingCode']+_0x1e5090(0x4e4)+_0x33a97c));}if(_0x2b1d83&&(this[_0x1e5090(0x68d)]={'state':_0x2b1d83,'statusReason':_0x2df373?.[_0x1e5090(0x5c5)]?.[_0x1e5090(0x581)]?.[_0x1e5090(0x2af)]??0xc8},this['sendDataWebhook'](_0x1e5090(0x5a5),{'instance':this[_0x1e5090(0x78a)]['name'],...this['stateConnection']})),_0x2b1d83===_0x1e5090(0x358)){if(this[_0x1e5090(0x54a)]++,this['reconnectTimestamps'][_0x1e5090(0x69d)](Date[_0x1e5090(0x4a3)]()),this[_0x1e5090(0x145)]=this[_0x1e5090(0x145)][_0x1e5090(0x29b)](_0x31630e=>Date[_0x1e5090(0x4a3)]()-_0x31630e<this[_0x1e5090(0x6bf)]),_0x2df373[_0x1e5090(0x5c5)]?.[_0x1e5090(0x581)]?.[_0x1e5090(0x2af)]!==w['DisconnectReason'][_0x1e5090(0x7c8)]){let _0x3ce17c=this['reconnectAttempts']<=0x1?0x0:Math[_0x1e5090(0x454)](Math['pow'](0x2,this[_0x1e5090(0x54a)]-0x1)*0x3e8,0x493e0);console[_0x1e5090(0x26d)](this['instanceName']+_0x1e5090(0x641)+this[_0x1e5090(0x54a)]+_0x1e5090(0x2b3)+_0x3ce17c/0x3e8+_0x1e5090(0x1fb)),await new Promise(_0x4832b9=>setTimeout(_0x4832b9,_0x3ce17c)),console[_0x1e5090(0x26d)](_0x1e5090(0x471)),await this['connectToWhatsapp']();}else{this[_0x1e5090(0x143)](_0x1e5090(0x690),{'instance':this[_0x1e5090(0x78a)][_0x1e5090(0x592)],'status':_0x1e5090(0x5cf)}),this[_0x1e5090(0x78a)]['ScheduleMessage'][_0x1e5090(0x2ab)]=!0x1,this[_0x1e5090(0x50b)][_0x1e5090(0x15d)][_0x1e5090(0x6d0)](this[_0x1e5090(0x193)]),this['repository'][_0x1e5090(0x34c)][_0x1e5090(0x120)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x1e5090(0x4a3)]()},this['instance'][_0x1e5090(0x592)]),se[_0x1e5090(0x37a)](W,this['instance'][_0x1e5090(0x592)]);try{this[_0x1e5090(0x669)][_0x1e5090(0x2a0)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...');let _0x4df388=await this[_0x1e5090(0x50b)]['message'][_0x1e5090(0x1e4)](this[_0x1e5090(0x78a)][_0x1e5090(0x3ef)]);_0x4df388[_0x1e5090(0x43c)]?this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x1e5090(0x78a)][_0x1e5090(0x3ef)]+'):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.'):this['logger'][_0x1e5090(0x5c5)](_0x1e5090(0x81a)+_0x4df388[_0x1e5090(0x5c5)]);}catch(_0x59aac5){this[_0x1e5090(0x669)][_0x1e5090(0x5c5)](_0x1e5090(0x5da)+_0x59aac5[_0x1e5090(0x334)]);}this[_0x1e5090(0x78a)][_0x1e5090(0x346)]['delayMessage']!==null&&(this[_0x1e5090(0x669)][_0x1e5090(0x2a0)](this[_0x1e5090(0x193)]+'\x20('+this['instance'][_0x1e5090(0x3ef)]+_0x1e5090(0x5a9)),clearInterval(this['instance'][_0x1e5090(0x346)][_0x1e5090(0x7cf)]),this[_0x1e5090(0x78a)][_0x1e5090(0x346)][_0x1e5090(0x7cf)]=null),this[_0x1e5090(0x669)]['verbose'](this[_0x1e5090(0x193)]+'\x20('+this[_0x1e5090(0x78a)]['wuid']+_0x1e5090(0x1b0)),this['AutomateSystem']=null,this[_0x1e5090(0x695)][_0x1e5090(0x671)](_0x1e5090(0x844),this['instance'][_0x1e5090(0x592)],'inner'),this[_0x1e5090(0x855)]?.['ws']?.[_0x1e5090(0x358)](),this[_0x1e5090(0x855)][_0x1e5090(0x2ce)](new Error(_0x1e5090(0x714)));}}if(_0x2b1d83===_0x1e5090(0x29d)){this['logger'][_0x1e5090(0x7e8)](this[_0x1e5090(0x193)]+'\x20('+this['instance'][_0x1e5090(0x3ef)]+_0x1e5090(0x76a)+this[_0x1e5090(0x855)]['authState'][_0x1e5090(0x5f8)]?.[_0x1e5090(0x182)]),this[_0x1e5090(0x855)][_0x1e5090(0x169)][_0x1e5090(0x5f8)]?.[_0x1e5090(0x182)]||(this['logger']['warn'](this[_0x1e5090(0x193)]+'\x20('+this[_0x1e5090(0x78a)]['wuid']+_0x1e5090(0x534)),this[_0x1e5090(0x855)]['ev'][_0x1e5090(0x23f)]()),this[_0x1e5090(0x700)],this['instance'][_0x1e5090(0x3ef)]=this['client'][_0x1e5090(0x146)]['id'][_0x1e5090(0x5d1)](/:\d+/,'')['replace'](_0x1e5090(0x6e2),''),this[_0x1e5090(0x78a)][_0x1e5090(0x1fa)]=(await this[_0x1e5090(0x2ba)](this[_0x1e5090(0x78a)]['wuid']+_0x1e5090(0x6e2)))[_0x1e5090(0x1fa)],this[_0x1e5090(0x50b)][_0x1e5090(0x34c)][_0x1e5090(0x120)]({'online':!0x0,'owner':this[_0x1e5090(0x78a)][_0x1e5090(0x3ef)],'lastDisconnect':null},this[_0x1e5090(0x78a)][_0x1e5090(0x592)]);let _0x5d673d=_0x1e5090(0x670)+this[_0x1e5090(0x78a)]['wuid'],_0x2a7bdb=0x28,_0x322035=Math[_0x1e5090(0x6fc)]((_0x2a7bdb-_0x5d673d['length'])/0x2),_0x574899='\x20'[_0x1e5090(0x5df)](_0x322035),_0xb018f4=_0x1e5090(0x31d),_0x54da8f=_0x1e5090(0x1cb)+this[_0x1e5090(0x78a)]['name'],_0x247cf5=(''+_0x574899+_0x5d673d+_0x574899)['padEnd'](_0x2a7bdb,'\x20'),_0x4b37df=(''+_0x574899+_0xb018f4+_0x574899)[_0x1e5090(0x822)](_0x2a7bdb,'\x20'),_0x5db4d1=(''+_0x574899+_0x54da8f+_0x574899)[_0x1e5090(0x822)](_0x2a7bdb,'\x20'),_0x34d118=Math['max'](_0x247cf5[_0x1e5090(0x217)],_0x4b37df['length'],_0x5db4d1[_0x1e5090(0x217)]),_0x43cb84=_0x247cf5[_0x1e5090(0x822)](_0x34d118,'\x20'),_0x1b7e60=_0x4b37df[_0x1e5090(0x822)](_0x34d118,'\x20'),_0x2081b7=_0x5db4d1[_0x1e5090(0x822)](_0x34d118,'\x20');this[_0x1e5090(0x669)]['info']((_0x1e5090(0x1ef)+''[_0x1e5090(0x5df)](_0x34d118)+_0x1e5090(0x807)+_0x1b7e60+_0x1e5090(0x226)+_0x2081b7+_0x1e5090(0x226)+_0x43cb84+_0x1e5090(0x115)+''[_0x1e5090(0x5df)](_0x34d118)+'')['replace'](/^ +/gm,'\x20\x20')),this['AutomateFunctions'](),this['instance'][_0x1e5090(0x346)][_0x1e5090(0x2ab)]=!0x0;}}['resetReconnectionVariables'](){const _0x1fdb9e=a0_0x98996d;this[_0x1fdb9e(0x54a)]=0x0,this[_0x1fdb9e(0x145)]=[];}async[a0_0x98996d(0x13c)](_0x7a4545,_0x58e188=!0x1){const _0x436d25=a0_0x98996d;try{let _0x1877b5=await this[_0x436d25(0x50b)]['message'][_0x436d25(0x704)]({'where':{'_id':_0x7a4545['id']}},this['instance'][_0x436d25(0x3ef)]);return _0x58e188?_0x1877b5[0x0]:_0x1877b5[0x0][_0x436d25(0x334)];}catch{return{'conversation':''};}}['cleanStore'](){const _0x2db243=a0_0x98996d;let _0xf43fe8=this[_0x2db243(0x63a)][_0x2db243(0x651)](_0x2db243(0x601)),_0x570e72=this['configService'][_0x2db243(0x651)]('DATABASE');_0xf43fe8?.[_0x2db243(0x7fa)]&&!_0x570e72[_0x2db243(0x299)]&&setInterval(()=>{const _0xc1c6f1=_0x2db243;try{for(let [_0x2a03c1,_0x60a843]of Object[_0xc1c6f1(0x736)](_0xf43fe8))_0x60a843===!0x0&&(0x0,Pe[_0xc1c6f1(0x2b4)])(_0xc1c6f1(0x682)+(0x0,L[_0xc1c6f1(0x38e)])(this[_0xc1c6f1(0x4b4)],_0x2a03c1[_0xc1c6f1(0x31c)](),this[_0xc1c6f1(0x78a)][_0xc1c6f1(0x3ef)])+_0xc1c6f1(0x505));}catch{}},(_0xf43fe8?.[_0x2db243(0x7fa)]??0xe10)*0x3e8);}async['defineAuthState'](){const _0x2f5060=a0_0x98996d;let _0x133796=this[_0x2f5060(0x63a)]['get']('DATABASE'),_0x30c4e8=this['configService'][_0x2f5060(0x651)](_0x2f5060(0x1d4));return _0x30c4e8?.['ENABLED']?await As(_0x30c4e8,this[_0x2f5060(0x78a)]['name']):_0x133796[_0x2f5060(0x299)]?await Rs(this[_0x2f5060(0x78a)][_0x2f5060(0x592)]):await(0x0,w['useMultiFileAuthState'])((0x0,L[_0x2f5060(0x38e)])(fe,this[_0x2f5060(0x78a)][_0x2f5060(0x592)]));}async[a0_0x98996d(0x140)](){const _0x38eac6=a0_0x98996d;let _0x36ad28=()=>Math[_0x38eac6(0x6fc)](Math['random']()*0x4e21)+0x7d0,_0x31009e=async()=>{const _0x5f48f7=_0x38eac6;if(!this['instance']['ScheduleMessage']['isConnected']){this[_0x5f48f7(0x669)][_0x5f48f7(0x2a0)](this[_0x5f48f7(0x193)]+'\x20('+this['instance'][_0x5f48f7(0x3ef)]+_0x5f48f7(0x542)),this[_0x5f48f7(0x7fd)]=!0x1;return;}if(this['instance'][_0x5f48f7(0x3ef)]&&this[_0x5f48f7(0x227)]&&this[_0x5f48f7(0x78a)][_0x5f48f7(0x346)][_0x5f48f7(0x7cf)]!==null&&this[_0x5f48f7(0x78a)][_0x5f48f7(0x346)][_0x5f48f7(0x7cf)]!==void 0x0){let _0x5bfdd5=Math['round'](this[_0x5f48f7(0x78a)][_0x5f48f7(0x346)]['delayMessage']/0xea60);this['logger'][_0x5f48f7(0x2a0)](this[_0x5f48f7(0x193)]+'\x20('+this[_0x5f48f7(0x78a)]['wuid']+'):\x20condies\x20atendidas,\x20parando\x20verificao...\x20em\x20'+_0x5bfdd5+_0x5f48f7(0x71c)),this[_0x5f48f7(0x7fd)]=!0x1;return;}else this[_0x5f48f7(0x78a)]['wuid']&&(this['logger'][_0x5f48f7(0x2a0)](this[_0x5f48f7(0x193)]+'\x20('+this[_0x5f48f7(0x78a)]['wuid']+_0x5f48f7(0x147)),this[_0x5f48f7(0x227)]||(await this[_0x5f48f7(0x472)](),this[_0x5f48f7(0x3bc)](),this[_0x5f48f7(0x1e7)]()),(this[_0x5f48f7(0x78a)][_0x5f48f7(0x346)][_0x5f48f7(0x7cf)]===null||this[_0x5f48f7(0x78a)]['ScheduleMessage'][_0x5f48f7(0x7cf)]===void 0x0)&&await this[_0x5f48f7(0x1e8)]());if(this[_0x5f48f7(0x7fd)]){let _0x3d8bb7=_0x36ad28();this[_0x5f48f7(0x669)][_0x5f48f7(0x2a0)](this['instanceName']+_0x5f48f7(0x362)+_0x3d8bb7/0x3e8+_0x5f48f7(0x434)),setTimeout(_0x31009e,_0x3d8bb7);}};if(this[_0x38eac6(0x7fd)])return;this[_0x38eac6(0x7fd)]=!0x0;let _0x199220=_0x36ad28();setTimeout(_0x31009e,_0x199220);}async[a0_0x98996d(0x1e7)](){const _0x2e822a=a0_0x98996d;let _0x7b191f=this[_0x2e822a(0x78a)][_0x2e822a(0x3ef)];try{let _0x557a71=await this['repository'][_0x2e822a(0x1e0)][_0x2e822a(0x2bf)]({'where':{'$or':[{'owner':_0x7b191f},{'whoCanUse':{'$in':[_0x7b191f]}},{'shareOwners':{'$in':[_0x7b191f]}}]}}),_0x142875=new Map(this[_0x2e822a(0x227)]['flows'][_0x2e822a(0x384)](_0x4734a6=>[_0x4734a6['_id'],_0x4734a6])),_0x553475=_0x557a71['map'](_0x2fbda3=>{const _0x208c52=_0x2e822a;let _0x17514c=_0x142875['get'](_0x2fbda3[_0x208c52(0x699)]?.[_0x208c52(0x191)]());return{'_id':_0x2fbda3['_id']?.[_0x208c52(0x191)](),'name':_0x17514c?.[_0x208c52(0x592)]??_0x2fbda3[_0x208c52(0x592)],'default':_0x17514c?.[_0x208c52(0x36a)]??_0x2fbda3[_0x208c52(0x36a)]??!0x1,'startCommand':_0x17514c?.[_0x208c52(0x47f)]??_0x2fbda3[_0x208c52(0x2c3)],'minutesToClose':_0x17514c?.[_0x208c52(0x3b2)]??_0x2fbda3['minutesToClose']??0xa,'readMessages':_0x17514c?.['readMessages']??_0x2fbda3['readMessages']??!0x1,'testingWith':_0x17514c?.['testingWith']??_0x2fbda3[_0x208c52(0x60e)],'canEdit':_0x2fbda3[_0x208c52(0x850)]===_0x7b191f||(_0x2fbda3[_0x208c52(0x17c)]??[])[_0x208c52(0x199)](_0x7b191f),'usersCount':(_0x2fbda3[_0x208c52(0x7f1)]??[])[_0x208c52(0x217)]??0x0};}),_0x27d89e=!0x1;_0x553475['forEach'](_0x50725c=>{const _0x125258=_0x2e822a;_0x50725c[_0x125258(0x36a)]&&(_0x27d89e?_0x50725c[_0x125258(0x36a)]=!0x1:_0x27d89e=!0x0);}),this['AutomateSystem'][_0x2e822a(0x24d)]=_0x553475;let _0x1dc19f={'flows':_0x553475};return await this['repository'][_0x2e822a(0x1ce)][_0x2e822a(0x7ae)](_0x1dc19f,_0x7b191f),this['logger'][_0x2e822a(0x2a0)](this[_0x2e822a(0x193)]+'\x20('+_0x7b191f+_0x2e822a(0x778)),_0x553475['length'];}catch(_0xa46124){return this[_0x2e822a(0x669)][_0x2e822a(0x5c5)](this['instanceName']+'\x20('+_0x7b191f+_0x2e822a(0x5d5)+(_0xa46124 instanceof Error?_0xa46124[_0x2e822a(0x334)]:JSON[_0x2e822a(0x5ab)](_0xa46124,null,0x2))),{'message':_0x2e822a(0x4c4)+(_0xa46124 instanceof Error?_0xa46124['message']:JSON[_0x2e822a(0x5ab)](_0xa46124,null,0x2))};}}async[a0_0x98996d(0x43d)](_0x2e45bc){const _0x494e97=a0_0x98996d;try{let _0x4b8ab5=await this[_0x494e97(0x50b)][_0x494e97(0x78a)][_0x494e97(0x218)]({'where':{'_id':W+'-'+this[_0x494e97(0x193)]}}),_0x4c5464,_0x125648=!se[_0x494e97(0x2b5)]||!se[_0x494e97(0x613)];console[_0x494e97(0x26d)]('--------------------------------------'),console[_0x494e97(0x26d)](_0x494e97(0x2ad),$i),console[_0x494e97(0x26d)](_0x494e97(0x721),this['reconnectAttempts']),console[_0x494e97(0x26d)]('--------------------------------------'),$i&&!_0x125648&&(this[_0x494e97(0x54a)]<0x4||!this[_0x494e97(0x54a)]?_0x4b8ab5&&_0x4b8ab5['ip']?(_0x4c5464=_0x4b8ab5['ip'],console[_0x494e97(0x26d)](_0x494e97(0x7ee)+_0x4c5464)):(_0x4c5464=await se[_0x494e97(0x46f)](W,this['instance'][_0x494e97(0x592)]),_0x4c5464?(console[_0x494e97(0x26d)](_0x494e97(0x2be)+_0x4c5464),await(0x0,w[_0x494e97(0x260)])(0x7d0)):console[_0x494e97(0x5c5)](_0x494e97(0x5c2))):this['reconnectAttempts']<0x6&&(await se[_0x494e97(0x37a)](W,this[_0x494e97(0x78a)]['name']),console['log'](_0x494e97(0x49d)),_0x4c5464=await se[_0x494e97(0x46f)](W,this[_0x494e97(0x78a)][_0x494e97(0x592)]),_0x4c5464?(console[_0x494e97(0x26d)]('Novo\x20IP\x20criado:\x20'+_0x4c5464),await(0x0,w[_0x494e97(0x260)])(0x7d0)):console['error'](_0x494e97(0x6c6)))),this[_0x494e97(0x7a8)](),this['instance']['apikey']=(await this['repository'][_0x494e97(0x34c)][_0x494e97(0x704)](this['instance'][_0x494e97(0x592)]))[_0x494e97(0x127)],this['instance']['authState']=await this[_0x494e97(0x19f)]();let {version:_0x2daa5e}=await(0x0,w[_0x494e97(0x480)])(),_0x3a2ed8=[Oi,Ds,(0x0,Os[_0x494e97(0x22c)])()],_0x19a290={'localAddress':_0x4c5464,'auth':{'creds':this['instance'][_0x494e97(0x169)]['state'][_0x494e97(0x5f8)],'keys':(0x0,w['makeCacheableSignalKeyStore'])(this[_0x494e97(0x78a)][_0x494e97(0x169)][_0x494e97(0x26b)][_0x494e97(0x58d)],(0x0,kt[_0x494e97(0x36a)])({'level':'error'}))},'logger':(0x0,kt[_0x494e97(0x36a)])({'level':_0x494e97(0x5c5)}),'printQRInTerminal':!0x1,'browser':_0x2e45bc?[_0x494e97(0x691),Ds,(0x0,Os[_0x494e97(0x22c)])()]:_0x3a2ed8,'version':_0x2daa5e,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x3ca171=>{const _0x487944=_0x494e97;let _0x384486=this[_0x487944(0x456)]?.['groups_ignore']&&(0x0,w['isJidGroup'])(_0x3ca171);return(0x0,w[_0x487944(0x44e)])(_0x3ca171)||_0x384486;},'msgRetryCounterCache':this[_0x494e97(0x23d)],'getMessage':async _0x5a9959=>await this[_0x494e97(0x13c)](_0x5a9959),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x494e97(0x18d)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x36b499){const _0x212408=_0x494e97;return _0x36b499[_0x212408(0x511)]?.[_0x212408(0x334)]?.[_0x212408(0x319)]?.[_0x212408(0x664)]===w[_0x212408(0x7d9)][_0x212408(0x563)][_0x212408(0x43a)][_0x212408(0x177)][_0x212408(0x2f8)]&&(_0x36b499=JSON[_0x212408(0x184)](JSON[_0x212408(0x5ab)](_0x36b499)),_0x36b499[_0x212408(0x511)][_0x212408(0x334)][_0x212408(0x319)][_0x212408(0x664)]=w[_0x212408(0x7d9)]['Message'][_0x212408(0x43a)][_0x212408(0x177)][_0x212408(0x59e)]),_0x36b499[_0x212408(0x319)]?.[_0x212408(0x664)]==w[_0x212408(0x7d9)][_0x212408(0x563)][_0x212408(0x43a)]['ListType'][_0x212408(0x2f8)]&&(_0x36b499=JSON['parse'](JSON[_0x212408(0x5ab)](_0x36b499)),_0x36b499['listMessage'][_0x212408(0x664)]=w[_0x212408(0x7d9)][_0x212408(0x563)][_0x212408(0x43a)][_0x212408(0x177)]['SINGLE_SELECT']),_0x36b499;}};return this[_0x494e97(0x5a2)]=!0x1,this[_0x494e97(0x855)]=(0x0,w[_0x494e97(0x36a)])(_0x19a290),this['eventHandler'](),this[_0x494e97(0x759)]=_0x2e45bc,this[_0x494e97(0x855)];}catch(_0x5a2e08){let _0x3c1b09=_0x494e97(0x2f3),_0x32423b=_0x5a2e08 instanceof Error?_0x5a2e08[_0x494e97(0x334)]:typeof _0x5a2e08==_0x494e97(0x623)?JSON[_0x494e97(0x5ab)](_0x5a2e08):_0x5a2e08,_0x3051f8=_0x3c1b09+':\x20'+_0x32423b;throw this[_0x494e97(0x669)][_0x494e97(0x5c5)](this['instanceName']+'\x20('+this['instance'][_0x494e97(0x3ef)]+_0x494e97(0x526)+_0x3051f8),console[_0x494e97(0x5c5)](_0x494e97(0x3e0),_0x5a2e08),_0x5a2e08 instanceof Error&&console['error'](_0x494e97(0x3b4),_0x5a2e08['stack']),new O(_0x3051f8);}}['eventHandler'](){const _0x2425be=a0_0x98996d;this[_0x2425be(0x855)]['ev']['process'](_0x4f986a=>{const _0x2d3e2d=_0x2425be;if(!this[_0x2d3e2d(0x5a2)]){let _0xdae17e=this[_0x2d3e2d(0x63a)][_0x2d3e2d(0x651)]('DATABASE');if(_0x4f986a[_0x2d3e2d(0x3fa)]){let _0x2fddf6=_0x4f986a[_0x2d3e2d(0x3fa)];this[_0x2d3e2d(0x270)][_0x2d3e2d(0x3fa)](_0x2fddf6);}if(_0x4f986a[_0x2d3e2d(0x81c)]){let _0x22cd4e=_0x4f986a['labels.association'];this[_0x2d3e2d(0x270)][_0x2d3e2d(0x81c)](_0x22cd4e);}if(_0x4f986a['connection.update']&&this[_0x2d3e2d(0x28f)](_0x4f986a[_0x2d3e2d(0x5a5)]),_0x4f986a[_0x2d3e2d(0x515)]&&this[_0x2d3e2d(0x78a)][_0x2d3e2d(0x169)][_0x2d3e2d(0x431)](),_0x4f986a['messaging-history.set']){let _0x23cc41=_0x4f986a[_0x2d3e2d(0x3fd)];this[_0x2d3e2d(0x270)][_0x2d3e2d(0x3fd)](_0x23cc41,_0xdae17e);}if(_0x4f986a['messages.upsert']){let _0x39e198=_0x4f986a[_0x2d3e2d(0x209)];this[_0x2d3e2d(0x270)][_0x2d3e2d(0x209)](_0x39e198,_0xdae17e);}if(_0x4f986a[_0x2d3e2d(0x68a)]){let _0x2f73cf=_0x4f986a[_0x2d3e2d(0x68a)];this[_0x2d3e2d(0x270)][_0x2d3e2d(0x68a)](_0x2f73cf,_0xdae17e);}if(_0x4f986a[_0x2d3e2d(0x50f)]){let _0x91efbd=_0x4f986a[_0x2d3e2d(0x50f)];if(this['localWebhook']?.[_0x2d3e2d(0x168)]&&_0x91efbd['id']['includes'](_0x2d3e2d(0x27b)))return;this[_0x2d3e2d(0x143)]('presence.update',_0x91efbd);}if(_0x4f986a[_0x2d3e2d(0x2ee)]){let _0x4c90b4=_0x4f986a[_0x2d3e2d(0x2ee)];this[_0x2d3e2d(0x148)]['groups.upsert'](_0x4c90b4);}if(_0x4f986a[_0x2d3e2d(0x33b)]){let _0x58c0c=_0x4f986a['groups.update'];this[_0x2d3e2d(0x148)][_0x2d3e2d(0x33b)](_0x58c0c);}if(_0x4f986a[_0x2d3e2d(0x571)]){let _0x17f6b4=_0x4f986a[_0x2d3e2d(0x571)];this[_0x2d3e2d(0x148)][_0x2d3e2d(0x571)](_0x17f6b4);}if(_0x4f986a[_0x2d3e2d(0x50a)]){let _0x939c4=_0x4f986a[_0x2d3e2d(0x50a)];this[_0x2d3e2d(0x82f)][_0x2d3e2d(0x50a)](_0x939c4,_0xdae17e);}if(_0x4f986a[_0x2d3e2d(0x77e)]){let _0x431d27=_0x4f986a[_0x2d3e2d(0x77e)];this[_0x2d3e2d(0x82f)][_0x2d3e2d(0x77e)](_0x431d27,_0xdae17e);}if(_0x4f986a[_0x2d3e2d(0x213)]){let _0x4ad894=_0x4f986a[_0x2d3e2d(0x213)];this['chatHandle'][_0x2d3e2d(0x213)](_0x4ad894);}if(_0x4f986a[_0x2d3e2d(0x559)]){let _0x4a7b28=_0x4f986a[_0x2d3e2d(0x559)];this[_0x2d3e2d(0x61c)]['contacts.upsert'](_0x4a7b28,_0xdae17e);}if(_0x4f986a[_0x2d3e2d(0x798)]){let _0x30dcba=_0x4f986a[_0x2d3e2d(0x798)];this[_0x2d3e2d(0x61c)][_0x2d3e2d(0x798)](_0x30dcba,_0xdae17e);}}});}async[a0_0x98996d(0x3a3)](_0x772310,_0x181bf7){const _0x7f291e=a0_0x98996d;if(_0x181bf7>=0xa){console['error'](this[_0x7f291e(0x193)]+'\x20('+this[_0x7f291e(0x78a)][_0x7f291e(0x3ef)]+_0x7f291e(0x3d8)),delete Pt[_0x772310[_0x7f291e(0x328)]['id']];return;}try{console[_0x7f291e(0x5c5)](this[_0x7f291e(0x193)]+'\x20('+this[_0x7f291e(0x78a)][_0x7f291e(0x3ef)]+_0x7f291e(0x264)+(_0x181bf7+0x1)),await this[_0x7f291e(0x855)][_0x7f291e(0x70f)](JSON['parse'](_0x772310[_0x7f291e(0x528)][0x1],w['BufferJSON'][_0x7f291e(0x83a)])),console[_0x7f291e(0x5c5)](_0x7f291e(0x3d0));}catch(_0x2e90c8){console[_0x7f291e(0x5c5)](this[_0x7f291e(0x193)]+'\x20('+this[_0x7f291e(0x78a)][_0x7f291e(0x3ef)]+'):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20'+_0x2e90c8),setTimeout(()=>this[_0x7f291e(0x3a3)](_0x772310,_0x181bf7+0x1),Math[_0x7f291e(0x174)](0x2,_0x181bf7)*0x3e8);}}[a0_0x98996d(0x6d6)](_0x8b7ec0){return new Promise(_0x1db27c=>setTimeout(_0x1db27c,_0x8b7ec0));}[a0_0x98996d(0x2f5)](_0x355103){const _0x25373f=a0_0x98996d;_0x355103=_0x355103[_0x25373f(0x5d1)](/\D/g,'');let _0x2ee542=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x25373f(0x556)](_0x355103);if(_0x2ee542&&_0x2ee542[0x1]==='55'){let _0x1695fe=_0x2ee542[0x2],_0x10e758=_0x2ee542[0x3],_0x216a7d=_0x2ee542[0x4];if(parseInt(_0x1695fe)>=0x1f&&_0x10e758==='9')return _0x2ee542[0x1]+_0x1695fe+_0x216a7d;}return _0x355103;}[a0_0x98996d(0x5b5)](_0x2431a3){const _0x173c93=a0_0x98996d;return _0x2431a3[_0x173c93(0x199)]('@g.us')||_0x2431a3['includes'](_0x173c93(0x6e2))||_0x2431a3[_0x173c93(0x199)]('@broadcast')?_0x2431a3:(_0x2431a3=_0x2431a3?.[_0x173c93(0x5d1)](/\s/g,'')[_0x173c93(0x5d1)](/\+/g,'')[_0x173c93(0x5d1)](/\(/g,'')[_0x173c93(0x5d1)](/\)/g,'')[_0x173c93(0x4fb)](/\:/)[0x0][_0x173c93(0x4fb)]('@')[0x0],_0x2431a3[_0x173c93(0x217)]>=0x12?(_0x2431a3=_0x2431a3[_0x173c93(0x5d1)](/[^\d-]/g,''),_0x2431a3+_0x173c93(0x27b)):(_0x2431a3=_0x2431a3[_0x173c93(0x5d1)](/\D/g,''),_0x2431a3+_0x173c93(0x6e2)));}async['updatePresence'](_0x25ad82){const _0xed0589=a0_0x98996d;let _0x161b7d=(await this['whatsappNumber']({'numbers':[_0x25ad82[_0xed0589(0x62f)]]}))[0x0];if(!_0x161b7d[_0xed0589(0x693)]&&!(0x0,w[_0xed0589(0x43e)])(_0x161b7d[_0xed0589(0x3d9)])&&!_0x161b7d['jid']['includes'](_0xed0589(0x2bb)))throw new m(_0x161b7d);let _0x5dbe40=_0x161b7d['jid'];try{return await this[_0xed0589(0x855)][_0xed0589(0x179)](_0x5dbe40),await this[_0xed0589(0x855)][_0xed0589(0x1a6)](_0x25ad82[_0xed0589(0x5ce)],_0x5dbe40),{'status':0xc8,'presence':_0x25ad82[_0xed0589(0x5ce)]};}catch(_0x130fcf){let _0x1395d5=_0xed0589(0x198),_0x137cb0=_0x130fcf instanceof Error?_0x130fcf[_0xed0589(0x334)]:typeof _0x130fcf==_0xed0589(0x623)?JSON[_0xed0589(0x5ab)](_0x130fcf):_0x130fcf,_0x384602=_0x1395d5+':\x20'+_0x137cb0;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0xed0589(0x78a)]['wuid']+_0xed0589(0x526)+_0x384602),new m(_0x384602);}}async[a0_0x98996d(0x7c7)](_0x52b4f8,_0x475d2b,_0x53c646,_0x5a7af8=!0x0){const _0x958344=a0_0x98996d;let _0x552173=await this['repository'][_0x958344(0x84b)][_0x958344(0x218)]({'where':{'_id':_0x52b4f8}});if(!_0x552173&&!_0x5a7af8)return;let _0x1e8d69={'lastUpdate':Date[_0x958344(0x4a3)]()};if(_0x53c646||!_0x552173?.[_0x958344(0x1f0)]||Date[_0x958344(0x4a3)]()-_0x552173['lastUpdate']>0x18*0x3c*0x3c*0x3e8)try{let _0x4fb425=(await this['profilePicture'](_0x52b4f8))[_0x958344(0x1fa)];_0x1e8d69[_0x958344(0x46e)]=_0x4fb425;}catch(_0x494e6a){let _0x37259c=_0x958344(0x78e),_0x529f84=_0x494e6a instanceof Error?_0x494e6a[_0x958344(0x334)]:typeof _0x494e6a==_0x958344(0x623)?JSON[_0x958344(0x5ab)](_0x494e6a):_0x494e6a,_0x2d47a2=_0x37259c+':\x20'+_0x529f84;throw this['logger']['error'](this[_0x958344(0x193)]+'\x20('+this[_0x958344(0x78a)][_0x958344(0x3ef)]+_0x958344(0x526)+_0x2d47a2),new m(_0x2d47a2);}return _0x475d2b&&_0x552173?.[_0x958344(0x592)]!==_0x475d2b&&(_0x1e8d69[_0x958344(0x592)]=_0x475d2b),Object[_0x958344(0x58d)](_0x1e8d69)[_0x958344(0x217)]>0x1&&(_0x552173?await this['repository']['cacheContact']['update']({'where':{'_id':_0x52b4f8}},_0x1e8d69):await this['repository'][_0x958344(0x84b)]['insert']([{'_id':_0x52b4f8,..._0x1e8d69}]),_0x552173={..._0x552173,..._0x1e8d69}),{'cachedContact':_0x552173};}async['profilePicture'](_0x49464e){const _0x5013b5=a0_0x98996d;let _0x5cb28a=this[_0x5013b5(0x5b5)](_0x49464e);try{return{'wuid':_0x5cb28a,'profilePictureUrl':await this[_0x5013b5(0x855)][_0x5013b5(0x1fa)](_0x5cb28a,_0x5013b5(0x6cc))};}catch{return{'wuid':_0x5cb28a,'profilePictureUrl':null};}}async['sendMessageWithTyping'](_0x40b315,_0x2c08a2,_0x212eac){const _0x19742d=a0_0x98996d;let _0x1d97f6;try{let _0x331341=(await this[_0x19742d(0x4bd)]({'numbers':[_0x40b315]}))?.[_0x19742d(0x854)]();if(!_0x331341[_0x19742d(0x693)]&&!(0x0,w[_0x19742d(0x43e)])(_0x331341['jid'])&&!_0x331341['jid'][_0x19742d(0x199)](_0x19742d(0x2bb)))throw new m(_0x331341);_0x1d97f6=_0x331341[_0x19742d(0x3d9)];}catch(_0x3a60e9){_0x1d97f6=_0x40b315,this[_0x19742d(0x669)][_0x19742d(0x7e8)](this[_0x19742d(0x193)]+'\x20('+this[_0x19742d(0x78a)][_0x19742d(0x3ef)]+_0x19742d(0x689)+_0x3a60e9['message']),this[_0x19742d(0x669)][_0x19742d(0x7e8)](this[_0x19742d(0x193)]+'\x20('+this[_0x19742d(0x78a)][_0x19742d(0x3ef)]+_0x19742d(0x2f1)+_0x1d97f6);}try{if(_0x1d97f6||(_0x1d97f6=_0x40b315,this['logger'][_0x19742d(0x7e8)](this['instanceName']+'\x20('+this['instance'][_0x19742d(0x3ef)]+_0x19742d(0x40f)+_0x1d97f6)),_0x212eac||(_0x212eac={}),_0x212eac?.[_0x19742d(0x260)]){await this['client'][_0x19742d(0x179)](_0x1d97f6),await this[_0x19742d(0x855)][_0x19742d(0x1a6)](_0x212eac?.['presence']??'composing',_0x1d97f6);let _0x1ead27=Math[_0x19742d(0x454)](_0x212eac[_0x19742d(0x260)],0x2710);await(0x0,w[_0x19742d(0x260)])(_0x1ead27),await this['client'][_0x19742d(0x1a6)](_0x19742d(0x642),_0x1d97f6);}let _0x54325a=_0x212eac?.['linkPreview']!=!0x1?void 0x0:!0x1,_0x43bd1c;if(_0x212eac?.['quoted']){let _0x2657b9=_0x212eac?.[_0x19742d(0x163)],_0x1938cc=_0x2657b9?.[_0x19742d(0x334)]?_0x2657b9:await this[_0x19742d(0x13c)](_0x2657b9[_0x19742d(0x328)],!0x0);_0x1938cc&&(_0x43bd1c=_0x1938cc);}let _0x11876a=await this[_0x19742d(0x50b)]['chat']['findOne']({'where':{'_id':_0x1d97f6}},this['instance'][_0x19742d(0x3ef)]),_0x1b44ca,_0x1ecc38=null;if((0x0,w[_0x19742d(0x43e)])(_0x1d97f6))try{if(_0x1ecc38=_0x11876a[_0x19742d(0x66a)],!_0x1ecc38)throw new F(_0x19742d(0x423));_0x212eac?.[_0x19742d(0x19a)]&&(_0x212eac[_0x19742d(0x19a)]?.['everyOne']?_0x1b44ca=_0x1ecc38[_0x19742d(0x357)][_0x19742d(0x384)](_0x1d5246=>_0x1d5246['id']):_0x212eac[_0x19742d(0x19a)]?.[_0x19742d(0x61d)]?.[_0x19742d(0x217)]&&(_0x1b44ca=_0x212eac['mentions'][_0x19742d(0x61d)][_0x19742d(0x384)](_0x181f24=>{const _0x192222=_0x19742d;let _0x108db6=this[_0x192222(0x5b5)](_0x181f24);return(0x0,w['isJidGroup'])(_0x108db6)?null:_0x108db6;})));}catch{throw new F(_0x19742d(0x423));}let _0x4493d5=await((async()=>{const _0x50c361=_0x19742d;let _0x55c462={'quoted':_0x43bd1c,'ephemeralExpiration':_0x11876a?.[_0x50c361(0x1ba)]??0x0};if(!_0x2c08a2['audio']&&!_0x2c08a2['poll']&&!_0x2c08a2['sticker']&&!_0x2c08a2[_0x50c361(0x314)]&&_0x1d97f6!==_0x50c361(0x6bb)&&_0x2c08a2[_0x50c361(0x650)])return await this[_0x50c361(0x855)][_0x50c361(0x659)](_0x1d97f6,{'react':{'text':_0x2c08a2['reactionMessage']['text'],'key':_0x2c08a2[_0x50c361(0x650)][_0x50c361(0x328)]}},_0x55c462);if(_0x2c08a2[_0x50c361(0x314)]){let _0x3d6b37=_0x2c08a2['conversation'];return _0x212eac?.[_0x50c361(0x37e)]&&(_0x3d6b37=await this[_0x50c361(0x6db)](_0x3d6b37,_0x1d97f6)),await this[_0x50c361(0x855)][_0x50c361(0x659)](_0x1d97f6,{'text':_0x3d6b37,'mentions':_0x1b44ca,'linkPreview':_0x54325a},_0x55c462);}return!_0x2c08a2[_0x50c361(0x767)]&&!_0x2c08a2[_0x50c361(0x53a)]&&_0x1d97f6!=_0x50c361(0x6bb)?await this[_0x50c361(0x855)]['sendMessage'](_0x1d97f6,{'forward':{'key':{'remoteJid':this[_0x50c361(0x78a)][_0x50c361(0x3ef)],'fromMe':!0x0},'message':_0x2c08a2},'mentions':_0x1b44ca},_0x55c462):_0x1d97f6===_0x50c361(0x6bb)?await this[_0x50c361(0x855)][_0x50c361(0x659)](_0x1d97f6,_0x2c08a2['status']['content'],{'backgroundColor':_0x2c08a2[_0x50c361(0x7ce)][_0x50c361(0x755)]['backgroundColor'],'font':_0x2c08a2[_0x50c361(0x7ce)][_0x50c361(0x755)][_0x50c361(0x307)],'statusJidList':_0x2c08a2[_0x50c361(0x7ce)][_0x50c361(0x755)][_0x50c361(0x1d7)]}):await this[_0x50c361(0x855)][_0x50c361(0x659)](_0x1d97f6,_0x2c08a2,_0x55c462);})()),_0x3263a3=(0x0,w[_0x19742d(0x495)])(_0x4493d5['message']),_0x22bc82=(0x0,w['getContentType'])(_0x3263a3),{message_normalized:_0x20f3c0}=this['normalizeMessage'](_0x3263a3,_0x22bc82,null),_0x3ce286={'_id':_0x4493d5[_0x19742d(0x328)]['id'],'key':_0x4493d5[_0x19742d(0x328)],'pushName':_0x4493d5[_0x19742d(0x5d8)],'isGroup':_0x4493d5[_0x19742d(0x328)]['remoteJid']['endsWith']('@g.us'),'profilePictureUrl':this[_0x19742d(0x78a)][_0x19742d(0x1fa)],'message':_0x3263a3,'messageType':_0x22bc82,'message_normalized':{'key':_0x4493d5[_0x19742d(0x328)],'pushName':_0x4493d5['pushName'],'messageTimestamp':_0x4493d5[_0x19742d(0x5ae)]&&_0x4493d5[_0x19742d(0x5ae)][_0x19742d(0x191)]()[_0x19742d(0x217)]<0xd?_0x4493d5['messageTimestamp']*0x3e8:_0x4493d5[_0x19742d(0x5ae)]||null,'source':(0x0,w[_0x19742d(0x4da)])(_0x4493d5[_0x19742d(0x328)]['id']),..._0x20f3c0},'messageTimestamp':_0x4493d5['messageTimestamp']&&_0x4493d5[_0x19742d(0x5ae)][_0x19742d(0x191)]()[_0x19742d(0x217)]<0xd?_0x4493d5[_0x19742d(0x5ae)]*0x3e8:_0x4493d5['messageTimestamp']||null,'owner':this[_0x19742d(0x78a)][_0x19742d(0x3ef)],'source':(0x0,w['getDevice'])(_0x4493d5[_0x19742d(0x328)]['id'])};return this[_0x19742d(0x669)][_0x19742d(0x7e8)](this[_0x19742d(0x193)]+'\x20('+this[_0x19742d(0x78a)]['wuid']+'):\x20enviado\x20para\x20['+_0x3ce286[_0x19742d(0x328)]?.['remoteJid'][_0x19742d(0x5d1)](_0x19742d(0x6e2),'')+_0x19742d(0x77b)+_0x3ce286[_0x19742d(0x449)]+')'),_0x3ce286[_0x19742d(0x289)]?.[_0x19742d(0x673)]&&this[_0x19742d(0x669)][_0x19742d(0x7e8)](_0x3ce286['message_normalized']?.[_0x19742d(0x673)]),this[_0x19742d(0x143)](_0x19742d(0x116),_0x3ce286),U(this[_0x19742d(0x193)],_0x19742d(0x814),{'message':_0x3ce286}),this[_0x19742d(0x530)](this[_0x19742d(0x63a)][_0x19742d(0x651)](_0x19742d(0x635)),_0x3ce286,'SEND_MESSAGE',_0x11876a),await this[_0x19742d(0x50b)][_0x19742d(0x334)]['insert']([_0x3ce286],this[_0x19742d(0x78a)][_0x19742d(0x3ef)]),_0x4493d5;}catch(_0x309864){let _0xefda64=_0x19742d(0x64b)+_0x1d97f6,_0x198baf=_0x309864 instanceof Error?_0x309864[_0x19742d(0x334)]:typeof _0x309864==_0x19742d(0x623)?JSON['stringify'](_0x309864):_0x309864,_0x351673=_0xefda64+':\x20'+_0x198baf;throw this[_0x19742d(0x669)][_0x19742d(0x5c5)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x19742d(0x526)+_0x351673),new m(_0x351673);}}get[a0_0x98996d(0x47e)](){return this['stateConnection'];}async[a0_0x98996d(0x6d4)](_0x3ca1a9){const _0x237d95=a0_0x98996d;return await this[_0x237d95(0x175)](_0x3ca1a9[_0x237d95(0x62f)],{'conversation':_0x3ca1a9[_0x237d95(0x6d4)][_0x237d95(0x673)]},_0x3ca1a9?.[_0x237d95(0x17f)]);}async[a0_0x98996d(0x731)](_0x3ceaff){const _0x1a7ef9=a0_0x98996d;if(!_0x3ceaff[_0x1a7ef9(0x1b8)])throw new m(_0x1a7ef9(0x72b));if(!_0x3ceaff['content'])throw new m(_0x1a7ef9(0x310));if(_0x3ceaff[_0x1a7ef9(0x72f)]){let _0x3a723a=await this[_0x1a7ef9(0x50b)][_0x1a7ef9(0x3d3)][_0x1a7ef9(0x704)]({'where':{}},this[_0x1a7ef9(0x78a)][_0x1a7ef9(0x3ef)]);if(!_0x3a723a[_0x1a7ef9(0x217)])throw new m(_0x1a7ef9(0x776));_0x3ceaff[_0x1a7ef9(0x1d7)]=_0x3a723a[_0x1a7ef9(0x29b)](_0x413566=>_0x413566[_0x1a7ef9(0x5d8)])[_0x1a7ef9(0x384)](_0x245546=>_0x245546[_0x1a7ef9(0x699)]);}if(!_0x3ceaff[_0x1a7ef9(0x1d7)]?.[_0x1a7ef9(0x217)]&&!_0x3ceaff['allContacts'])throw new m(_0x1a7ef9(0x783));if(_0x3ceaff[_0x1a7ef9(0x1b8)]===_0x1a7ef9(0x673)){if(!_0x3ceaff['backgroundColor'])throw new m(_0x1a7ef9(0x81e));if(!_0x3ceaff[_0x1a7ef9(0x307)])throw new m(_0x1a7ef9(0x26c));return{'content':{'text':_0x3ceaff[_0x1a7ef9(0x572)]},'option':{'backgroundColor':_0x3ceaff[_0x1a7ef9(0x23a)],'font':_0x3ceaff[_0x1a7ef9(0x307)],'statusJidList':_0x3ceaff[_0x1a7ef9(0x1d7)]}};}if(_0x3ceaff[_0x1a7ef9(0x1b8)]===_0x1a7ef9(0x6cc))return{'content':{'image':{'url':_0x3ceaff['content']},'caption':_0x3ceaff[_0x1a7ef9(0x27a)]},'option':{'statusJidList':_0x3ceaff[_0x1a7ef9(0x1d7)]}};if(_0x3ceaff[_0x1a7ef9(0x1b8)]===_0x1a7ef9(0x84f))return{'content':{'video':{'url':_0x3ceaff[_0x1a7ef9(0x572)]},'caption':_0x3ceaff['caption']},'option':{'statusJidList':_0x3ceaff[_0x1a7ef9(0x1d7)]}};if(_0x3ceaff[_0x1a7ef9(0x1b8)]===_0x1a7ef9(0x767)){this[_0x1a7ef9(0x669)][_0x1a7ef9(0x2a0)](this[_0x1a7ef9(0x193)]+'\x20('+this[_0x1a7ef9(0x78a)][_0x1a7ef9(0x3ef)]+_0x1a7ef9(0x12b)),this[_0x1a7ef9(0x669)][_0x1a7ef9(0x2a0)](this[_0x1a7ef9(0x193)]+'\x20('+this[_0x1a7ef9(0x78a)][_0x1a7ef9(0x3ef)]+_0x1a7ef9(0x4a8));let _0x1c8be3=await this[_0x1a7ef9(0x801)](_0x3ceaff[_0x1a7ef9(0x572)]);if(typeof _0x1c8be3=='string'){this[_0x1a7ef9(0x669)][_0x1a7ef9(0x2a0)](this['instanceName']+'\x20('+this[_0x1a7ef9(0x78a)][_0x1a7ef9(0x3ef)]+_0x1a7ef9(0x658));let _0x450c98=P['readFileSync'](_0x1c8be3)['toString'](_0x1a7ef9(0x697));return{'content':{'audio':Buffer[_0x1a7ef9(0x54e)](_0x450c98,_0x1a7ef9(0x697)),'ptt':!0x0,'mimetype':_0x1a7ef9(0x4e9)},'option':{'statusJidList':_0x3ceaff[_0x1a7ef9(0x1d7)]}};}else throw new O(_0x1c8be3);}throw new m(_0x1a7ef9(0x309));}async[a0_0x98996d(0x639)](_0x3e3b4d){const _0x2ad7ec=a0_0x98996d;return await this['sendMessageWithTyping'](_0x2ad7ec(0x6bb),{'status':await this[_0x2ad7ec(0x731)](_0x3e3b4d[_0x2ad7ec(0x639)])});}async[a0_0x98996d(0x73d)](_0x4dc29f){const _0x20c761=a0_0x98996d;try{let _0x15fe7f=await(0x0,w[_0x20c761(0x236)])({[_0x4dc29f['mediatype']]:(0x0,D[_0x20c761(0x6a5)])(_0x4dc29f['media'])?{'url':_0x4dc29f[_0x20c761(0x36d)]}:Buffer['from'](_0x4dc29f[_0x20c761(0x36d)],'base64')},{'upload':this[_0x20c761(0x855)][_0x20c761(0x769)]}),_0x4c5f5a=_0x4dc29f[_0x20c761(0x292)]+_0x20c761(0x563);if(_0x4dc29f[_0x20c761(0x292)]===_0x20c761(0x672)&&!_0x4dc29f[_0x20c761(0x344)]){let _0x7ac58a=new RegExp(/.*\/(.+?)\./)[_0x20c761(0x556)](_0x4dc29f[_0x20c761(0x36d)]);_0x4dc29f[_0x20c761(0x344)]=_0x7ac58a?_0x7ac58a[0x1]:null;}let _0xe6c1b4;return(0x0,D[_0x20c761(0x6a5)])(_0x4dc29f[_0x20c761(0x36d)])?_0xe6c1b4=(await Q[_0x20c761(0x36a)]['get'](_0x4dc29f[_0x20c761(0x36d)],{'responseType':'arraybuffer'}))[_0x20c761(0x57b)][_0x20c761(0x51d)]:_0xe6c1b4=(0x0,Ti[_0x20c761(0x84e)])(_0x4dc29f[_0x20c761(0x344)]),_0x15fe7f[_0x4c5f5a][_0x20c761(0x27a)]=_0x4dc29f?.[_0x20c761(0x27a)],_0x15fe7f[_0x4c5f5a][_0x20c761(0x75f)]=_0xe6c1b4,_0x15fe7f[_0x4c5f5a]['fileName']=_0x4dc29f[_0x20c761(0x344)],_0x4dc29f[_0x20c761(0x292)]==='video'&&(_0x15fe7f[_0x4c5f5a]['jpegThumbnail']=Uint8Array[_0x20c761(0x54e)]((0x0,De[_0x20c761(0x440)])((0x0,L['join'])(process[_0x20c761(0x13b)](),'video-cover.png'))),_0x15fe7f[_0x4c5f5a][_0x20c761(0x452)]=!0x1),(0x0,w[_0x20c761(0x1c1)])('',{[_0x4c5f5a]:{..._0x15fe7f[_0x4c5f5a]}},{'userJid':this[_0x20c761(0x78a)][_0x20c761(0x3ef)]});}catch(_0x394918){let _0x5b2716='Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20prepareMediaMessage',_0x5231a9=_0x394918 instanceof Error?_0x394918[_0x20c761(0x334)]:typeof _0x394918==_0x20c761(0x623)?JSON[_0x20c761(0x5ab)](_0x394918):_0x394918,_0x168add=_0x5b2716+':\x20'+_0x5231a9;throw this[_0x20c761(0x669)]['error'](this['instanceName']+'\x20('+this['instance'][_0x20c761(0x3ef)]+'):\x20'+_0x168add),new O(_0x168add);}}async['mediaMessage'](_0x4fbb8a){const _0x4e3d7d=a0_0x98996d;let _0x57a5e4=await this['prepareMediaMessage'](_0x4fbb8a[_0x4e3d7d(0x1aa)]);return await this[_0x4e3d7d(0x175)](_0x4fbb8a[_0x4e3d7d(0x62f)],{..._0x57a5e4['message']},_0x4fbb8a?.[_0x4e3d7d(0x17f)]);}async[a0_0x98996d(0x276)](_0x47a5ac,_0x375dbd){const _0x13d364=a0_0x98996d;try{this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this[_0x13d364(0x78a)][_0x13d364(0x3ef)]+_0x13d364(0x795));let _0x1a5cdb,_0x85661a=_0x375dbd+'-'+new Date()[_0x13d364(0x4df)]();this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this['instance'][_0x13d364(0x3ef)]+'):Hash\x20to\x20image\x20name:\x20'+_0x85661a);let _0x393ac6=''+(0x0,L[_0x13d364(0x38e)])(this[_0x13d364(0x4b4)],_0x85661a+_0x13d364(0x360));if(this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this['instance'][_0x13d364(0x3ef)]+'):Output\x20path:\x20'+_0x393ac6),(0x0,D[_0x13d364(0x597)])(_0x47a5ac)){this[_0x13d364(0x669)]['verbose'](this[_0x13d364(0x193)]+'\x20('+this[_0x13d364(0x78a)][_0x13d364(0x3ef)]+_0x13d364(0x416));let _0x3a4519=_0x47a5ac[_0x13d364(0x5d1)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x2eca53=Buffer[_0x13d364(0x54e)](_0x3a4519,_0x13d364(0x697));_0x1a5cdb=''+(0x0,L[_0x13d364(0x38e)])(this[_0x13d364(0x4b4)],_0x13d364(0x5c9)+_0x85661a+'.png'),this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this[_0x13d364(0x78a)][_0x13d364(0x3ef)]+_0x13d364(0x56e)+_0x1a5cdb),await(0x0,Lt[_0x13d364(0x36a)])(_0x2eca53)[_0x13d364(0x58a)](_0x1a5cdb),this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this[_0x13d364(0x78a)][_0x13d364(0x3ef)]+_0x13d364(0x53c));}else{this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this[_0x13d364(0x78a)][_0x13d364(0x3ef)]+_0x13d364(0x1f5));let _0x3d1724=new Date()[_0x13d364(0x4df)](),_0x3e73fe=_0x47a5ac+_0x13d364(0x3b5)+_0x3d1724;this[_0x13d364(0x669)]['verbose'](this[_0x13d364(0x193)]+'\x20('+this['instance'][_0x13d364(0x3ef)]+_0x13d364(0x6e0)+_0x3e73fe);let _0x441998=await Q[_0x13d364(0x36a)][_0x13d364(0x651)](_0x3e73fe,{'responseType':_0x13d364(0x6c1)});this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this[_0x13d364(0x78a)][_0x13d364(0x3ef)]+'):Getting\x20image\x20from\x20url');let _0x1613bc=Buffer[_0x13d364(0x54e)](_0x441998[_0x13d364(0x222)],_0x13d364(0x29f));_0x1a5cdb=''+(0x0,L['join'])(this['storePath'],'temp-'+_0x85661a+_0x13d364(0x809)),this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this['instance']['wuid']+'):Image\x20path:\x20'+_0x1a5cdb),await(0x0,Lt[_0x13d364(0x36a)])(_0x1613bc)['toFile'](_0x1a5cdb),this[_0x13d364(0x669)][_0x13d364(0x2a0)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x13d364(0x53c));}return await(0x0,Lt[_0x13d364(0x36a)])(_0x1a5cdb)[_0x13d364(0x41a)]()[_0x13d364(0x58a)](_0x393ac6),this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this[_0x13d364(0x78a)][_0x13d364(0x3ef)]+_0x13d364(0x30b)),P[_0x13d364(0x189)](_0x1a5cdb),this[_0x13d364(0x669)][_0x13d364(0x2a0)](this[_0x13d364(0x193)]+'\x20('+this['instance']['wuid']+_0x13d364(0x422)),_0x393ac6;}catch(_0x392a08){let _0x34c24f=_0x13d364(0x2ca),_0x5bc635=_0x392a08 instanceof Error?_0x392a08[_0x13d364(0x334)]:typeof _0x392a08==_0x13d364(0x623)?JSON[_0x13d364(0x5ab)](_0x392a08):_0x392a08,_0x17fb1c=_0x34c24f+':\x20'+_0x5bc635;this['logger']['error'](this[_0x13d364(0x193)]+'\x20('+this[_0x13d364(0x78a)][_0x13d364(0x3ef)]+_0x13d364(0x526)+_0x17fb1c);}}async[a0_0x98996d(0x158)](_0x6de02b){const _0x3f5563=a0_0x98996d;let _0x23d2d6=await this[_0x3f5563(0x276)](_0x6de02b[_0x3f5563(0x53f)][_0x3f5563(0x6cc)],_0x6de02b[_0x3f5563(0x62f)]),_0x30203b=await this[_0x3f5563(0x175)](_0x6de02b[_0x3f5563(0x62f)],{'sticker':{'url':_0x23d2d6}},_0x6de02b?.[_0x3f5563(0x17f)]);return P[_0x3f5563(0x189)](_0x23d2d6),this['logger'][_0x3f5563(0x2a0)](this['instanceName']+'\x20('+this[_0x3f5563(0x78a)][_0x3f5563(0x3ef)]+_0x3f5563(0x72c)),_0x30203b;}async[a0_0x98996d(0x60c)](_0x6b087e){const _0x403136=a0_0x98996d;if(this[_0x403136(0x669)]['verbose'](this['instanceName']+'\x20('+this[_0x403136(0x78a)][_0x403136(0x3ef)]+'):Sending\x20audio\x20whatsapp'),!_0x6b087e[_0x403136(0x17f)]?.[_0x403136(0x349)]&&_0x6b087e['options']?.[_0x403136(0x349)]!==!0x1&&(_0x6b087e['options'][_0x403136(0x349)]=!0x0),_0x6b087e[_0x403136(0x17f)]?.[_0x403136(0x349)]){let _0x3a9809=await this[_0x403136(0x801)](_0x6b087e[_0x403136(0x288)]['audio']);if(typeof _0x3a9809==_0x403136(0x170)){let _0x15587c=P['readFileSync'](_0x3a9809)['toString'](_0x403136(0x697));return this[_0x403136(0x175)](_0x6b087e[_0x403136(0x62f)],{'audio':Buffer[_0x403136(0x54e)](_0x15587c,'base64'),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x403136(0x398),'delay':_0x6b087e?.[_0x403136(0x17f)]?.[_0x403136(0x260)]});}else throw new O(_0x3a9809);}return await this[_0x403136(0x175)](_0x6b087e[_0x403136(0x62f)],{'audio':(0x0,D['isURL'])(_0x6b087e[_0x403136(0x288)][_0x403136(0x767)])?{'url':_0x6b087e[_0x403136(0x288)][_0x403136(0x767)]}:Buffer['from'](_0x6b087e[_0x403136(0x288)]['audio'],_0x403136(0x697)),'ptt':!0x0,'mimetype':_0x403136(0x274)},{'presence':_0x403136(0x398),'delay':_0x6b087e?.[_0x403136(0x17f)]?.[_0x403136(0x260)]});}async[a0_0x98996d(0x801)](_0x11a7aa){const _0x1906d5=a0_0x98996d;this[_0x1906d5(0x669)][_0x1906d5(0x2a0)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x1906d5(0x4a8));let _0x259587=(0x0,D[_0x1906d5(0x6a5)])(_0x11a7aa)?(0x0,Ft['createHash'])('sha256')[_0x1906d5(0x7ae)](_0x11a7aa)[_0x1906d5(0x386)]('hex'):(0x0,Ft['createHash'])(_0x1906d5(0x683))[_0x1906d5(0x7ae)](_0x11a7aa)[_0x1906d5(0x386)]('hex'),_0x53d234=''+(0x0,L[_0x1906d5(0x38e)])(this[_0x1906d5(0x4b4)],_0x259587+_0x1906d5(0x4dd));if(P[_0x1906d5(0x7b8)](_0x53d234))return this[_0x1906d5(0x669)][_0x1906d5(0x2a0)](this[_0x1906d5(0x193)]+'\x20('+this[_0x1906d5(0x78a)][_0x1906d5(0x3ef)]+_0x1906d5(0x356)),_0x53d234;let _0x5ef03c=''+(0x0,L['join'])(this['storePath'],'temp-'+(0x0,Y['v4'])()+_0x1906d5(0x2e7));if((0x0,D[_0x1906d5(0x6a5)])(_0x11a7aa)){let _0x12deae=new Date()['getTime'](),_0x409c3c=_0x11a7aa+_0x1906d5(0x3b5)+_0x12deae,_0x51a499=await Q[_0x1906d5(0x36a)][_0x1906d5(0x651)](_0x409c3c,{'responseType':_0x1906d5(0x6c1)});P['writeFileSync'](_0x5ef03c,_0x51a499[_0x1906d5(0x222)]);}else{let _0x8e766f=Buffer[_0x1906d5(0x54e)](_0x11a7aa,_0x1906d5(0x697));P[_0x1906d5(0x802)](_0x5ef03c,_0x8e766f);}return new Promise((_0x2a320c,_0x9b90f)=>{const _0x429d78=_0x1906d5;(0x0,Pe[_0x429d78(0x556)])(Ts['default'][_0x429d78(0x3ab)]+_0x429d78(0x2d0)+_0x5ef03c+_0x429d78(0x34d)+_0x53d234+_0x429d78(0x3c2),_0x5ade00=>{const _0x17e312=_0x429d78;if(P['unlinkSync'](_0x5ef03c),_0x5ade00){this[_0x17e312(0x669)][_0x17e312(0x2a0)](this['instanceName']+'\x20('+this[_0x17e312(0x78a)]['wuid']+'):Error\x20in\x20converting\x20audio'),_0x9b90f(_0x5ade00);return;}this['logger'][_0x17e312(0x2a0)](this[_0x17e312(0x193)]+'\x20('+this[_0x17e312(0x78a)][_0x17e312(0x3ef)]+_0x17e312(0x81f)),_0x2a320c(_0x53d234);});});}async['convertaudioMP3'](_0x341748){const _0x3f5d7b=a0_0x98996d;this[_0x3f5d7b(0x669)][_0x3f5d7b(0x2a0)](this[_0x3f5d7b(0x193)]+'\x20('+this[_0x3f5d7b(0x78a)][_0x3f5d7b(0x3ef)]+_0x3f5d7b(0x4a8));let _0x162720=(0x0,Ft[_0x3f5d7b(0x856)])(_0x3f5d7b(0x683))['update'](_0x341748)['digest'](_0x3f5d7b(0x574)),_0x25e48b=''+(0x0,L[_0x3f5d7b(0x38e)])(this[_0x3f5d7b(0x4b4)],_0x162720+_0x3f5d7b(0x2e7));if(P[_0x3f5d7b(0x7b8)](_0x25e48b))return this[_0x3f5d7b(0x669)][_0x3f5d7b(0x2a0)](this[_0x3f5d7b(0x193)]+'\x20('+this[_0x3f5d7b(0x78a)][_0x3f5d7b(0x3ef)]+_0x3f5d7b(0x356)),L[_0x3f5d7b(0x36a)][_0x3f5d7b(0x451)](_0x25e48b);let _0x80cd0d=''+(0x0,L[_0x3f5d7b(0x38e)])(this[_0x3f5d7b(0x4b4)],'temp-'+_0x162720+_0x3f5d7b(0x4dd));if((0x0,D[_0x3f5d7b(0x6a5)])(_0x341748)){let _0x1b5ceb=new Date()[_0x3f5d7b(0x4df)](),_0xdd5f7d=_0x341748+_0x3f5d7b(0x3b5)+_0x1b5ceb,_0x27bb15=await Q[_0x3f5d7b(0x36a)][_0x3f5d7b(0x651)](_0xdd5f7d,{'responseType':'arraybuffer'});P[_0x3f5d7b(0x802)](_0x80cd0d,_0x27bb15['data']);}else{let _0x5987bd=Buffer[_0x3f5d7b(0x54e)](_0x341748,_0x3f5d7b(0x697));P[_0x3f5d7b(0x802)](_0x80cd0d,_0x5987bd);}return new Promise((_0x350dd0,_0x422ebe)=>{const _0x2b4be9=_0x3f5d7b;(0x0,Pe[_0x2b4be9(0x556)])(Ts[_0x2b4be9(0x36a)][_0x2b4be9(0x3ab)]+_0x2b4be9(0x2d0)+_0x80cd0d+_0x2b4be9(0x790)+_0x25e48b+_0x2b4be9(0x3c2),_0x13ff80=>{const _0x347e7b=_0x2b4be9;if(P[_0x347e7b(0x189)](_0x80cd0d),_0x13ff80){this[_0x347e7b(0x669)][_0x347e7b(0x2a0)](this[_0x347e7b(0x193)]+'\x20('+this['instance']['wuid']+_0x347e7b(0x521)),_0x422ebe(_0x13ff80);return;}this[_0x347e7b(0x669)][_0x347e7b(0x2a0)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x347e7b(0x81f)),_0x350dd0(L[_0x347e7b(0x36a)]['basename'](_0x25e48b));});});}async[a0_0x98996d(0x157)](_0x42309b){const _0x72e17f=a0_0x98996d;let _0x23e28b={},_0x5a0b5c=_0x72e17f(0x1bd);if(_0x42309b[_0x72e17f(0x157)]?.[_0x72e17f(0x1aa)]){_0x5a0b5c=_0x42309b[_0x72e17f(0x157)]['mediaMessage']?.[_0x72e17f(0x292)][_0x72e17f(0x4b1)]()??'TEXT',_0x23e28b[_0x72e17f(0x1f7)]=_0x5a0b5c[_0x72e17f(0x31c)]()+_0x72e17f(0x563);let _0x26e505=await this[_0x72e17f(0x73d)](_0x42309b[_0x72e17f(0x157)]['mediaMessage']);_0x23e28b[_0x72e17f(0x334)]=_0x26e505[_0x72e17f(0x334)][_0x23e28b[_0x72e17f(0x1f7)]],_0x23e28b[_0x72e17f(0x68b)]='*'+_0x42309b[_0x72e17f(0x157)][_0x72e17f(0x190)]+_0x72e17f(0x1c0)+_0x42309b[_0x72e17f(0x157)][_0x72e17f(0x320)];}let _0x58247c={'text':_0x42309b[_0x72e17f(0x157)][_0x72e17f(0x63b)][_0x72e17f(0x384)](_0x10f9b3=>_0x10f9b3[_0x72e17f(0x560)]),'ids':_0x42309b['buttonMessage']['buttons']['map'](_0x39ea94=>_0x39ea94['buttonId'])};if(!(0x0,D[_0x72e17f(0x766)])(_0x58247c['text'])||!(0x0,D['arrayUnique'])(_0x58247c[_0x72e17f(0x166)]))throw new m(_0x72e17f(0x6c0),_0x72e17f(0x284));return await this[_0x72e17f(0x175)](_0x42309b[_0x72e17f(0x62f)],{'buttonsMessage':{'text':_0x23e28b?.[_0x72e17f(0x1f7)]?void 0x0:_0x42309b[_0x72e17f(0x157)][_0x72e17f(0x190)],'contentText':_0x23e28b?.[_0x72e17f(0x68b)]??_0x42309b[_0x72e17f(0x157)][_0x72e17f(0x320)],'footerText':_0x42309b[_0x72e17f(0x157)]?.[_0x72e17f(0x1ea)],'buttons':_0x42309b['buttonMessage'][_0x72e17f(0x63b)][_0x72e17f(0x384)](_0xe9cc5c=>({'buttonText':{'displayText':_0xe9cc5c[_0x72e17f(0x560)]},'buttonId':_0xe9cc5c['buttonId'],'type':0x1})),'headerType':w['proto'][_0x72e17f(0x563)][_0x72e17f(0x12c)][_0x72e17f(0x6d1)][_0x5a0b5c],[_0x23e28b?.[_0x72e17f(0x1f7)]]:_0x23e28b?.['message']}},_0x42309b?.[_0x72e17f(0x17f)]);}async[a0_0x98996d(0x3be)](_0x3504ea){const _0x4e4725=a0_0x98996d;return await this[_0x4e4725(0x175)](_0x3504ea[_0x4e4725(0x62f)],{'locationMessage':{'degreesLatitude':_0x3504ea[_0x4e4725(0x3be)][_0x4e4725(0x4ca)],'degreesLongitude':_0x3504ea['locationMessage']['longitude'],'name':_0x3504ea[_0x4e4725(0x3be)]?.['name'],'address':_0x3504ea[_0x4e4725(0x3be)]?.[_0x4e4725(0x728)]}},_0x3504ea?.['options']);}async[a0_0x98996d(0x6df)](_0x3e05df){const _0x29cb72=a0_0x98996d;let _0x5a6656={},_0x1b3d62=async _0x2bbc61=>{const _0x20e1ae=a0_0x431f;let _0x320c1b='BEGIN:VCARD\x0aVERSION:3.0\x0aN:'+_0x2bbc61['fullName']+'\x0aFN:'+_0x2bbc61[_0x20e1ae(0x34a)]+'\x0a';_0x2bbc61[_0x20e1ae(0x303)]&&(_0x320c1b+='ORG:'+_0x2bbc61[_0x20e1ae(0x303)]+';\x0a'),_0x2bbc61[_0x20e1ae(0x6b2)]&&(_0x320c1b+='EMAIL:'+_0x2bbc61[_0x20e1ae(0x6b2)]+'\x0a'),_0x2bbc61[_0x20e1ae(0x66c)]&&(_0x320c1b+=_0x20e1ae(0x254)+_0x2bbc61[_0x20e1ae(0x66c)]+'\x0a');let _0xaaf674='',_0x23ce8c=0x1;if(_0x2bbc61[_0x20e1ae(0x759)]){let _0x4c17b8=_0x2bbc61[_0x20e1ae(0x759)][_0x20e1ae(0x4fb)]('|');for(let _0xbd083a of _0x4c17b8){let _0x56c93e=await this['whatsappNumber']({'numbers':[_0xbd083a]}),_0xf5c397=(_0x56c93e[_0x20e1ae(0x217)]>0x0?_0x56c93e[0x0][_0x20e1ae(0x3d9)]:this[_0x20e1ae(0x5b5)](_0xbd083a))[_0x20e1ae(0x5d1)]('@s.whatsapp.net','');_0xaaf674+=_0x20e1ae(0x271)+_0x23ce8c+_0x20e1ae(0x411)+_0xf5c397+':'+_0xbd083a+_0x20e1ae(0x5ec)+_0x23ce8c+'.X-ABLabel:Celular\x0a',_0x23ce8c++;}}return _0x320c1b+=_0xaaf674+_0x20e1ae(0x3e8),_0x320c1b;};return _0x3e05df[_0x29cb72(0x6df)]['length']===0x1?_0x5a6656[_0x29cb72(0x6df)]={'displayName':_0x3e05df['contactMessage'][0x0][_0x29cb72(0x34a)],'vcard':await _0x1b3d62(_0x3e05df['contactMessage'][0x0])}:_0x5a6656[_0x29cb72(0x7be)]={'displayName':_0x3e05df[_0x29cb72(0x6df)][_0x29cb72(0x217)]+_0x29cb72(0x2d5),'contacts':await Promise[_0x29cb72(0x6aa)](_0x3e05df[_0x29cb72(0x6df)][_0x29cb72(0x384)](async _0x382307=>({'displayName':_0x382307[_0x29cb72(0x34a)],'vcard':await _0x1b3d62(_0x382307)})))},await this['sendMessageWithTyping'](_0x3e05df['number'],{..._0x5a6656},_0x3e05df?.[_0x29cb72(0x17f)]);}async[a0_0x98996d(0x650)](_0x37266a){const _0x45cb08=a0_0x98996d;return await this['sendMessageWithTyping'](_0x37266a[_0x45cb08(0x650)][_0x45cb08(0x328)][_0x45cb08(0x5d9)],{'reactionMessage':{'key':_0x37266a[_0x45cb08(0x650)][_0x45cb08(0x328)],'text':_0x37266a['reactionMessage'][_0x45cb08(0x2de)]}});}async[a0_0x98996d(0x4bd)](_0x1c45e5){const _0x4ab9ec=a0_0x98996d;let _0x3900f0=[];for await(let _0x1c9afe of _0x1c45e5[_0x4ab9ec(0x7c3)]){let _0xbc5bea=this[_0x4ab9ec(0x5b5)](_0x1c9afe),_0x7aed6a=!0x1;try{if((0x0,w[_0x4ab9ec(0x43e)])(_0xbc5bea)){let _0x957340=(await this[_0x4ab9ec(0x50b)][_0x4ab9ec(0x500)][_0x4ab9ec(0x218)]({'where':{'_id':_0xbc5bea}},this[_0x4ab9ec(0x78a)]['wuid']))[_0x4ab9ec(0x66a)];_0x957340?(_0x7aed6a=!0x0,_0x3900f0[_0x4ab9ec(0x69d)](new ce(_0x957340['id'],_0x7aed6a,_0x957340?.[_0x4ab9ec(0x3cb)]))):(_0x957340=await this['findGroup']({'groupJid':_0xbc5bea},_0x4ab9ec(0x4f1)),_0x3900f0[_0x4ab9ec(0x69d)](new ce(_0x957340['id'],!!_0x957340?.['id'],_0x957340?.['subject'])));}else{if(_0xbc5bea[_0x4ab9ec(0x199)](_0x4ab9ec(0x2bb)))_0x3900f0[_0x4ab9ec(0x69d)](new ce(_0xbc5bea,!0x0));else{let _0xb52b77=(await this[_0x4ab9ec(0x855)][_0x4ab9ec(0x3fc)](_0xbc5bea))[0x0];_0x3900f0['push'](new ce(_0xb52b77[_0x4ab9ec(0x3d9)],_0xb52b77['exists']));}}}catch{(0x0,w[_0x4ab9ec(0x43e)])(_0xbc5bea)||await this[_0x4ab9ec(0x679)](_0xbc5bea),_0x3900f0[_0x4ab9ec(0x69d)](new ce(_0x1c9afe,!0x1));}}return _0x3900f0;}async[a0_0x98996d(0x679)](_0x2db4ef){const _0x13eea9=a0_0x98996d;try{await this[_0x13eea9(0x50b)][_0x13eea9(0x500)][_0x13eea9(0x218)]({'where':{'_id':_0x2db4ef,'imported':!0x0}},this[_0x13eea9(0x78a)][_0x13eea9(0x3ef)])&&(await this[_0x13eea9(0x50b)]['chat'][_0x13eea9(0x2d9)](_0x2db4ef,this[_0x13eea9(0x78a)][_0x13eea9(0x3ef)]),this[_0x13eea9(0x669)][_0x13eea9(0x22b)](_0x13eea9(0x2ef)+_0x2db4ef+_0x13eea9(0x21d)));}catch(_0x474b16){let _0x53c31c=_0x13eea9(0x1bb),_0x17a429=_0x474b16 instanceof Error?_0x474b16[_0x13eea9(0x334)]:typeof _0x474b16==_0x13eea9(0x623)?JSON[_0x13eea9(0x5ab)](_0x474b16):_0x474b16,_0x8a3b63=_0x53c31c+':\x20'+_0x17a429;this[_0x13eea9(0x669)]['error'](this[_0x13eea9(0x193)]+'\x20('+this[_0x13eea9(0x78a)][_0x13eea9(0x3ef)]+'):\x20'+_0x8a3b63);}}async[a0_0x98996d(0x4b0)](_0x598625){const _0x9ce5c=a0_0x98996d;try{let _0xa84057=_0x598625[_0x9ce5c(0x183)][_0x9ce5c(0x29b)](_0x5cf6a9=>(0x0,w[_0x9ce5c(0x43e)])(_0x5cf6a9[_0x9ce5c(0x5d9)])||(0x0,w[_0x9ce5c(0x31b)])(_0x5cf6a9[_0x9ce5c(0x5d9)]))[_0x9ce5c(0x384)](_0x5dae29=>({'remoteJid':_0x5dae29['remoteJid'],'fromMe':_0x5dae29[_0x9ce5c(0x1a7)],'id':_0x5dae29['id']}));await this[_0x9ce5c(0x855)][_0x9ce5c(0x183)](_0xa84057);let _0x5166cb=_0xa84057[_0x9ce5c(0x384)](_0x1f751b=>this[_0x9ce5c(0x367)](_0x1f751b,{'status':_0x9ce5c(0x7a5),'owner':this['instance'][_0x9ce5c(0x3ef)]})),_0x2696eb=_0xa84057[_0x9ce5c(0x384)](_0x524755=>this['repository'][_0x9ce5c(0x500)]['updateOne']({'where':{'_id':_0x524755[_0x9ce5c(0x5d9)]}},{'unreadcount':0x0},this[_0x9ce5c(0x78a)]['wuid'])),[_0x1b2c2a,_0x1fa8c8]=await Promise[_0x9ce5c(0x6aa)]([Promise[_0x9ce5c(0x6aa)](_0x5166cb),Promise[_0x9ce5c(0x6aa)](_0x2696eb)]);return _0x1fa8c8[_0x9ce5c(0x29b)](_0x553662=>_0x553662!==null)[_0x9ce5c(0x15b)](_0x595f38=>{const _0x4f72f1=_0x9ce5c;U(this[_0x4f72f1(0x193)],_0x4f72f1(0x812),{'chat':_0x595f38});}),{'message':'Read\x20messages','read':'success'};}catch(_0x14228e){let _0x101547='Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida',_0x192ca8=_0x14228e instanceof Error?_0x14228e[_0x9ce5c(0x334)]:typeof _0x14228e==_0x9ce5c(0x623)?JSON['stringify'](_0x14228e):_0x14228e,_0x38279b=_0x101547+':\x20'+_0x192ca8;throw this[_0x9ce5c(0x669)][_0x9ce5c(0x5c5)](this[_0x9ce5c(0x193)]+'\x20('+this['instance'][_0x9ce5c(0x3ef)]+'):\x20'+_0x38279b),new O(_0x38279b);}}async[a0_0x98996d(0x35a)](_0x105a5d){const _0x2283a5=a0_0x98996d;let _0x451ea1={'where':{'key':{'remoteJid':_0x105a5d}},'limit':0x1},_0x3d8cd9=await this[_0x2283a5(0x225)](_0x451ea1);return _0x3d8cd9||(this[_0x2283a5(0x669)]['error']('Last\x20message\x20not\x20found\x20for\x20number:\x20'+_0x105a5d),null);}async[a0_0x98996d(0x52c)](_0x19180b){const _0x172c49=a0_0x98996d;this[_0x172c49(0x669)][_0x172c49(0x2a0)](this[_0x172c49(0x193)]+'\x20('+this['instance'][_0x172c49(0x3ef)]+_0x172c49(0x70b));try{let _0x17a32d=_0x19180b[_0x172c49(0x5ca)],_0x40483c=_0x19180b[_0x172c49(0x500)];if(!_0x17a32d&&_0x40483c?_0x17a32d=await this[_0x172c49(0x35a)](_0x40483c):(_0x17a32d=_0x19180b[_0x172c49(0x5ca)],_0x17a32d[_0x172c49(0x5ae)]=_0x17a32d?.['messageTimestamp']??Date[_0x172c49(0x4a3)](),_0x40483c=_0x17a32d?.[_0x172c49(0x328)]?.[_0x172c49(0x5d9)]),!_0x17a32d||Object[_0x172c49(0x58d)](_0x17a32d)['length']===0x0)throw new F(_0x172c49(0x508));this['logger']['verbose'](this[_0x172c49(0x193)]+'\x20('+this['instance']['wuid']+_0x172c49(0x6cf)+_0x40483c);try{await this['client'][_0x172c49(0x832)]({'archive':_0x19180b['archive'],'lastMessages':[_0x17a32d]},this[_0x172c49(0x5b5)](_0x40483c));}catch(_0x2eee92){let _0x441e37=_0x172c49(0x44a)+_0x40483c,_0xa5591e=_0x2eee92 instanceof Error?_0x2eee92[_0x172c49(0x334)]:typeof _0x2eee92==_0x172c49(0x623)?JSON[_0x172c49(0x5ab)](_0x2eee92):_0x2eee92,_0xaa513a=_0x441e37+':\x20'+_0xa5591e;this[_0x172c49(0x669)]['error'](this[_0x172c49(0x193)]+'\x20('+this[_0x172c49(0x78a)][_0x172c49(0x3ef)]+_0x172c49(0x526)+_0xaa513a);}this[_0x172c49(0x669)]['verbose'](this[_0x172c49(0x193)]+'\x20('+this['instance'][_0x172c49(0x3ef)]+_0x172c49(0x461)+_0x40483c);let _0x1df6fd=await this['repository']['chat'][_0x172c49(0x1f8)]({'where':{'_id':_0x17a32d?.['key']?.[_0x172c49(0x5d9)]}},{'archived':_0x19180b['archive']},this[_0x172c49(0x78a)]['wuid']);return _0x1df6fd?(this['logger'][_0x172c49(0x2a0)](this[_0x172c49(0x193)]+'\x20('+this['instance'][_0x172c49(0x3ef)]+_0x172c49(0x816)+JSON[_0x172c49(0x5ab)](_0x1df6fd)),U(this[_0x172c49(0x193)],_0x172c49(0x812),{'chat':_0x1df6fd})):this[_0x172c49(0x669)][_0x172c49(0x5c5)](this['instanceName']+'\x20('+this[_0x172c49(0x78a)][_0x172c49(0x3ef)]+_0x172c49(0x385)+_0x40483c),{'chatId':_0x40483c,'archived':_0x19180b[_0x172c49(0x18e)]};}catch(_0x435b00){let _0x4ee1af='Erro\x20ao\x20arquivar\x20chat',_0x4be612=_0x435b00 instanceof Error?_0x435b00[_0x172c49(0x334)]:typeof _0x435b00==_0x172c49(0x623)?JSON[_0x172c49(0x5ab)](_0x435b00):_0x435b00,_0x4f0e78=_0x4ee1af+':\x20'+_0x4be612;throw this['logger']['error'](this[_0x172c49(0x193)]+'\x20('+this[_0x172c49(0x78a)][_0x172c49(0x3ef)]+_0x172c49(0x526)+_0x4f0e78),new O(_0x4f0e78);}}async['deleteChat'](_0x66f504){const _0x194112=a0_0x98996d;this['logger'][_0x194112(0x2a0)](this['instanceName']+'\x20('+this[_0x194112(0x78a)]['wuid']+_0x194112(0x5e0));try{let _0x4fe83a=await this[_0x194112(0x35a)](_0x66f504);if(!_0x4fe83a||Object[_0x194112(0x58d)](_0x4fe83a)['length']===0x0)throw new F(_0x194112(0x508));let _0x4294f4=_0x4fe83a[0x0];this['logger'][_0x194112(0x2a0)](this['instanceName']+'\x20('+this[_0x194112(0x78a)][_0x194112(0x3ef)]+'):Delete\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x66f504);try{await this[_0x194112(0x855)][_0x194112(0x832)]({'delete':!0x0,'lastMessages':[{'key':_0x4294f4[_0x194112(0x328)],'messageTimestamp':_0x4294f4[_0x194112(0x5ae)]}]},this['createJid'](_0x66f504));}catch(_0x5147af){this[_0x194112(0x669)][_0x194112(0x5c5)](_0x194112(0x44a)+_0x66f504+':\x20'+_0x5147af['toString']());}this[_0x194112(0x669)][_0x194112(0x2a0)](this[_0x194112(0x193)]+'\x20('+this[_0x194112(0x78a)]['wuid']+_0x194112(0x461)+_0x66f504);return;}catch(_0xa3b32c){throw this[_0x194112(0x669)][_0x194112(0x5c5)](this['instanceName']+'\x20('+this[_0x194112(0x78a)]['wuid']+_0x194112(0x488)+_0xa3b32c['toString']()),new O({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0xa3b32c[_0x194112(0x191)]()]});}}async[a0_0x98996d(0x65c)](_0x3efa5a){const _0x4c9c40=a0_0x98996d;try{let _0x4b8788=await this[_0x4c9c40(0x855)][_0x4c9c40(0x659)](_0x3efa5a['remoteJid'],{'delete':_0x3efa5a});try{let _0x495c2f=await this[_0x4c9c40(0x367)](_0x3efa5a,{'status':'DELETED','owner':this[_0x4c9c40(0x78a)]['wuid']});this[_0x4c9c40(0x669)][_0x4c9c40(0x2a0)](this['instanceName']+'\x20('+this['instance'][_0x4c9c40(0x3ef)]+'):\x20updateResult:'+_0x495c2f);}catch(_0x2853d3){this[_0x4c9c40(0x669)][_0x4c9c40(0x5c5)](_0x4c9c40(0x4f4)+_0x2853d3);}return _0x4b8788;}catch(_0x597583){throw new O('Error\x20while\x20deleting\x20message\x20for\x20everyone',_0x597583?.['toString']());}}async[a0_0x98996d(0x3bd)](_0x37329c){const _0x1f4d02=a0_0x98996d;try{let _0xb08b7=_0x37329c?.['message']?_0x37329c:await this[_0x1f4d02(0x13c)](_0x37329c[_0x1f4d02(0x328)],!0x0);for(let _0x17e53e of Ca)_0xb08b7[_0x1f4d02(0x334)][_0x17e53e]&&(_0xb08b7[_0x1f4d02(0x334)]=_0xb08b7[_0x1f4d02(0x334)][_0x17e53e][_0x1f4d02(0x334)]);let _0x8ce0ff,_0x34592e;for(let _0xfb5aa0 of Ma)if(_0x8ce0ff=_0xb08b7[_0x1f4d02(0x334)][_0xfb5aa0],_0x8ce0ff){_0x34592e=_0xfb5aa0;break;}if(!_0x8ce0ff)throw _0x1f4d02(0x22a);typeof _0x8ce0ff['mediaKey']==_0x1f4d02(0x623)&&(_0xb08b7['message']=JSON[_0x1f4d02(0x184)](JSON[_0x1f4d02(0x5ab)](_0xb08b7['message'])));let _0x4c99a2=await(0x0,w[_0x1f4d02(0x1a8)])({'key':_0xb08b7?.[_0x1f4d02(0x328)],'message':_0xb08b7?.[_0x1f4d02(0x334)]},'buffer',{},{'logger':(0x0,kt[_0x1f4d02(0x36a)])({'level':_0x1f4d02(0x587)}),'reuploadRequest':this[_0x1f4d02(0x855)][_0x1f4d02(0x7bd)]});if(!(_0x4c99a2 instanceof Buffer))throw new Error(_0x1f4d02(0x14b));let _0x313cff=this[_0x1f4d02(0x63a)][_0x1f4d02(0x651)](_0x1f4d02(0x635)),_0x2f6b92,_0x2aeb15;if(_0x8ce0ff['fileName'])_0x2f6b92=_0x8ce0ff[_0x1f4d02(0x344)];else{let _0x4a1825=_0x8ce0ff[_0x1f4d02(0x75f)]?.[_0x1f4d02(0x132)](/\/(\w+)/),_0x363b7d=_0x4a1825?_0x4a1825[0x1]:null;if(!_0x363b7d)throw new Error(_0x1f4d02(0x4d6));_0x2f6b92=(0x0,Y['v4'])()+'.'+_0x363b7d;}_0x34592e===_0x1f4d02(0x288)?_0x2aeb15=_0x1f4d02(0x281)+await this['convertaudioMP3'](_0x4c99a2[_0x1f4d02(0x191)](_0x1f4d02(0x697))):(await this[_0x1f4d02(0x2f0)](_0x4c99a2,_0x2f6b92),_0x2aeb15=_0x1f4d02(0x281)+_0x2f6b92);let _0x15b369=this[_0x1f4d02(0x63a)]['get'](_0x1f4d02(0x771))[_0x1f4d02(0x11d)];if(!_0x15b369){let _0x2be001=this[_0x1f4d02(0x63a)][_0x1f4d02(0x651)](_0x1f4d02(0x752));_0x15b369=_0x1f4d02(0x675)+(_0x2be001&&_0x2be001[_0x1f4d02(0x2cf)]['split']('/')[0x4]);}_0x2aeb15=''+_0x15b369+_0x2aeb15;let _0x210b14=0xc*0x3c*0x3c*0x3e8,_0x20b3e2={'where':{'_id':_0xb08b7[_0x1f4d02(0x328)]['id']}},_0x39925e={'message_normalized.fileUrl':_0x2aeb15,'message_normalized.expires_fileUrl':Date[_0x1f4d02(0x4a3)]()+_0x210b14};try{let _0x1bb9b9=await this['repository']['message']['update'](_0x20b3e2,_0x39925e,this[_0x1f4d02(0x78a)][_0x1f4d02(0x3ef)]);_0x1bb9b9&&U(this[_0x1f4d02(0x193)],'messages',{'message':_0x1bb9b9});}catch(_0x233176){let _0x5fea7d='Falha\x20ao\x20processar\x20a\x20solicitao\x20getBase64FromMediaMessage',_0x264913=_0x233176 instanceof Error?_0x233176['message']:typeof _0x233176==_0x1f4d02(0x623)?JSON[_0x1f4d02(0x5ab)](_0x233176):_0x233176,_0x414d83=_0x5fea7d+':\x20'+_0x264913;this[_0x1f4d02(0x669)][_0x1f4d02(0x5c5)](this['instanceName']+'\x20('+this['instance'][_0x1f4d02(0x3ef)]+_0x1f4d02(0x526)+_0x414d83);}return{'mediaType':_0x34592e,'fileName':_0x8ce0ff[_0x1f4d02(0x344)],'caption':_0x8ce0ff[_0x1f4d02(0x27a)],'size':{'fileLength':_0x8ce0ff['fileLength'],'height':_0x8ce0ff[_0x1f4d02(0x185)],'width':_0x8ce0ff[_0x1f4d02(0x19b)]},'mimetype':_0x8ce0ff['mimetype'],'base64':_0x4c99a2[_0x1f4d02(0x191)]('base64'),'fileUrl':_0x2aeb15,'expires_fileUrl':Date['now']()+_0x210b14};}catch(_0x35cbfd){let _0x30f8c5=_0x1f4d02(0x2c2),_0x22028f=_0x35cbfd instanceof Error?_0x35cbfd[_0x1f4d02(0x334)]:typeof _0x35cbfd=='object'?JSON[_0x1f4d02(0x5ab)](_0x35cbfd):_0x35cbfd,_0xbea28f=_0x30f8c5+':\x20'+_0x22028f;throw this[_0x1f4d02(0x669)][_0x1f4d02(0x5c5)](this['instanceName']+'\x20('+this[_0x1f4d02(0x78a)][_0x1f4d02(0x3ef)]+_0x1f4d02(0x526)+_0xbea28f),new m(_0xbea28f);}}async[a0_0x98996d(0x2f0)](_0x36eb05,_0x46a66b){const _0x5e26fb=a0_0x98996d;let _0x30302d=L[_0x5e26fb(0x36a)][_0x5e26fb(0x38e)](__dirname,_0x5e26fb(0x1f6));P[_0x5e26fb(0x7b8)](_0x30302d)||P[_0x5e26fb(0x3d5)](_0x30302d,{'recursive':!0x0});let _0x15c9f1=L[_0x5e26fb(0x36a)]['join'](_0x30302d,_0x46a66b);return new Promise((_0x1540af,_0x56be4c)=>{const _0x23cb3e=_0x5e26fb;P[_0x23cb3e(0x2dc)](_0x15c9f1,_0x36eb05,_0x2963fa=>{const _0x2df4cb=_0x23cb3e;_0x2963fa?(this[_0x2df4cb(0x669)][_0x2df4cb(0x5c5)](_0x2df4cb(0x24e)+(_0x2963fa instanceof Error?_0x2963fa[_0x2df4cb(0x334)]:JSON[_0x2df4cb(0x5ab)](_0x2963fa,null,0x2))),_0x56be4c(_0x2963fa)):(this['logger'][_0x2df4cb(0x26d)](_0x2df4cb(0x1d9)+_0x15c9f1),_0x1540af(_0x15c9f1));});});}async['fetchContacts'](_0x5db3ce){const _0x4a5fdc=a0_0x98996d;return await this['repository'][_0x4a5fdc(0x3d3)][_0x4a5fdc(0x704)](_0x5db3ce,this[_0x4a5fdc(0x78a)][_0x4a5fdc(0x3ef)]);}async[a0_0x98996d(0x818)](){const _0x4f1a2a=a0_0x98996d;return await this[_0x4f1a2a(0x50b)][_0x4f1a2a(0x80b)][_0x4f1a2a(0x704)]({'where':{}},this['instance'][_0x4f1a2a(0x3ef)]);}async[a0_0x98996d(0x225)](_0x31877c){const _0x17454d=a0_0x98996d;return await this[_0x17454d(0x50b)][_0x17454d(0x334)][_0x17454d(0x704)](_0x31877c,this[_0x17454d(0x78a)]['wuid']);}async[a0_0x98996d(0x477)](){const _0x2dcf18=a0_0x98996d;return this[_0x2dcf18(0x50b)][_0x2dcf18(0x500)]['removeUnusedChatFields'](this[_0x2dcf18(0x78a)][_0x2dcf18(0x3ef)]),this[_0x2dcf18(0x50b)][_0x2dcf18(0x500)][_0x2dcf18(0x1f1)](this[_0x2dcf18(0x78a)][_0x2dcf18(0x3ef)]),this[_0x2dcf18(0x50b)][_0x2dcf18(0x500)]['updateMissingTags'](this[_0x2dcf18(0x78a)][_0x2dcf18(0x3ef)]),this[_0x2dcf18(0x50b)][_0x2dcf18(0x500)][_0x2dcf18(0x153)](this[_0x2dcf18(0x78a)]['wuid']),await this[_0x2dcf18(0x50b)][_0x2dcf18(0x500)]['find']({'where':{}},this[_0x2dcf18(0x78a)][_0x2dcf18(0x3ef)]);}async[a0_0x98996d(0x646)](_0x3f024e){const _0x8e1b4=a0_0x98996d;try{if(!Array[_0x8e1b4(0x481)](_0x3f024e)||_0x3f024e[_0x8e1b4(0x217)]===0x0)throw new Error(_0x8e1b4(0x405));let _0x5e677e=[],_0x1ebbf7=[];for(let _0x3ed918 of _0x3f024e){if(_0x3ed918[_0x8e1b4(0x699)])_0x3ed918[_0x8e1b4(0x699)]=this[_0x8e1b4(0x5b5)](_0x3ed918[_0x8e1b4(0x699)]);else continue;await this[_0x8e1b4(0x50b)]['chat'][_0x8e1b4(0x218)]({'where':{'_id':_0x3ed918[_0x8e1b4(0x699)]}},this['instance'][_0x8e1b4(0x3ef)])?_0x1ebbf7[_0x8e1b4(0x69d)]({'_id':_0x3ed918[_0x8e1b4(0x699)],'leadInfo':_0x3ed918[_0x8e1b4(0x5b0)],'owner':this['instance']['wuid']}):_0x5e677e['push']({'_id':_0x3ed918[_0x8e1b4(0x699)],'owner':this[_0x8e1b4(0x78a)][_0x8e1b4(0x3ef)],'leadInfo':_0x3ed918[_0x8e1b4(0x5b0)],'imported':!0x0});}return _0x1ebbf7[_0x8e1b4(0x217)]>0x0&&await this['repository'][_0x8e1b4(0x500)][_0x8e1b4(0x5c7)](_0x1ebbf7['map'](_0x9b1b24=>({'query':{'where':{'_id':_0x9b1b24['_id'],'owner':this[_0x8e1b4(0x78a)][_0x8e1b4(0x3ef)]}},'update':_0x9b1b24}))),_0x5e677e['length']>0x0&&await this['repository'][_0x8e1b4(0x500)][_0x8e1b4(0x45c)](_0x5e677e,this[_0x8e1b4(0x78a)][_0x8e1b4(0x3ef)]),{'updated':_0x1ebbf7[_0x8e1b4(0x217)],'inserted':_0x5e677e[_0x8e1b4(0x217)]};}catch(_0x1c75f5){let _0x1dce69='Erro\x20ao\x20importar\x20chats',_0x22443b=_0x1c75f5 instanceof Error?_0x1c75f5[_0x8e1b4(0x334)]:typeof _0x1c75f5=='object'?JSON[_0x8e1b4(0x5ab)](_0x1c75f5):_0x1c75f5,_0x196db5=_0x1dce69+':\x20'+_0x22443b;throw this[_0x8e1b4(0x669)][_0x8e1b4(0x5c5)](this['instanceName']+'\x20('+this[_0x8e1b4(0x78a)][_0x8e1b4(0x3ef)]+_0x8e1b4(0x526)+_0x196db5),new m(_0x196db5);}}async['importChats'](_0xe3db51){const _0x2a3445=a0_0x98996d;try{if(!Array[_0x2a3445(0x481)](_0xe3db51)||_0xe3db51['length']===0x0)throw new Error('Input\x20deve\x20ser\x20um\x20array\x20no\x20vazio\x20de\x20chats.');let _0x201d2a=0x64,_0x188213=0x0;for(let _0x38038a=0x0;_0x38038a<_0xe3db51['length'];_0x38038a+=_0x201d2a){let _0x4c10d5=_0xe3db51[_0x2a3445(0x519)](_0x38038a,_0x38038a+_0x201d2a),{updated:_0x30236b}=await this[_0x2a3445(0x835)](_0x4c10d5);_0x188213+=_0x30236b;}return{'updated':_0x188213};}catch(_0xc88650){let _0x12808f='Erro\x20ao\x20importar\x20chats',_0x55523e=_0xc88650 instanceof Error?_0xc88650['message']:typeof _0xc88650=='object'?JSON[_0x2a3445(0x5ab)](_0xc88650):_0xc88650,_0x364d72=_0x12808f+':\x20'+_0x55523e;throw this[_0x2a3445(0x669)][_0x2a3445(0x5c5)](this[_0x2a3445(0x193)]+'\x20('+this[_0x2a3445(0x78a)]['wuid']+_0x2a3445(0x526)+_0x364d72),new m(_0x364d72);}}async['importChatsBatch'](_0x369e82){const _0x81503e=a0_0x98996d;try{let _0x8b7e94=await this[_0x81503e(0x50b)][_0x81503e(0x80b)][_0x81503e(0x704)]({'where':{}},this['instance'][_0x81503e(0x3ef)]),_0x3ba163=new Set(_0x8b7e94[_0x81503e(0x384)](_0x3301e2=>_0x3301e2[_0x81503e(0x699)])),_0x504ab2=[],_0x5d581e=[];for(let _0x441df9 of _0x369e82){if(!_0x441df9[_0x81503e(0x699)])continue;_0x441df9[_0x81503e(0x699)]=this[_0x81503e(0x5b5)](_0x441df9[_0x81503e(0x699)]);let _0x36be48=await this[_0x81503e(0x50b)][_0x81503e(0x500)][_0x81503e(0x218)]({'where':{'_id':_0x441df9['_id']}},this[_0x81503e(0x78a)][_0x81503e(0x3ef)]),_0xcd8c8d={};if(Object['entries'](_0x441df9[_0x81503e(0x5b0)])['forEach'](([_0x50b0ff,_0x587294])=>{const _0x5da907=_0x81503e;_0xcd8c8d[_0x5da907(0x79c)+_0x50b0ff]=_0x587294;}),_0x36be48&&!_0x36be48[_0x81503e(0x1cf)]){let _0x5a57d3=(_0x441df9['leadInfo']['etiquetas']||[])[_0x81503e(0x29b)](_0x251a46=>_0x3ba163[_0x81503e(0x12e)](_0x251a46)),_0x1fa8ff=new Set(_0x36be48['leadInfo']['etiquetas']||[]),_0x166617=_0x5a57d3[_0x81503e(0x29b)](_0x5073ec=>!_0x1fa8ff[_0x81503e(0x12e)](_0x5073ec)),_0x4a3751=[..._0x1fa8ff]['filter'](_0x1ad91c=>!_0x5a57d3[_0x81503e(0x199)](_0x1ad91c));_0x5d581e[_0x81503e(0x69d)](..._0x166617['map'](_0x1dc3e9=>this[_0x81503e(0x4a6)](_0x1dc3e9,_0x441df9[_0x81503e(0x699)]))),_0x5d581e[_0x81503e(0x69d)](..._0x4a3751[_0x81503e(0x384)](_0xaea43f=>this[_0x81503e(0x68c)](_0xaea43f,_0x441df9[_0x81503e(0x699)]))),_0x441df9[_0x81503e(0x5b0)][_0x81503e(0x3c1)]=_0x5a57d3,_0x504ab2[_0x81503e(0x69d)]({'query':{'where':{'_id':_0x441df9[_0x81503e(0x699)],'owner':this[_0x81503e(0x78a)][_0x81503e(0x3ef)]}},'update':_0xcd8c8d});}else _0xcd8c8d['imported']=!0x0,_0x504ab2[_0x81503e(0x69d)]({'query':{'where':{'_id':_0x441df9[_0x81503e(0x699)],'owner':this[_0x81503e(0x78a)]['wuid']}},'update':_0xcd8c8d});}let _0x1ca9a9=await this[_0x81503e(0x50b)][_0x81503e(0x500)][_0x81503e(0x5c7)](_0x504ab2);return await Promise[_0x81503e(0x6aa)](_0x5d581e),{'updated':_0x1ca9a9};}catch(_0x1734d3){let _0xef675b=_0x81503e(0x54f),_0xabc89c=_0x1734d3 instanceof Error?_0x1734d3[_0x81503e(0x334)]:typeof _0x1734d3=='object'?JSON[_0x81503e(0x5ab)](_0x1734d3):_0x1734d3,_0x37cf5a=_0xef675b+':\x20'+_0xabc89c;throw this['logger'][_0x81503e(0x5c5)](this[_0x81503e(0x193)]+'\x20('+this[_0x81503e(0x78a)][_0x81503e(0x3ef)]+_0x81503e(0x526)+_0x37cf5a),new m(_0x37cf5a);}}async[a0_0x98996d(0x293)](){const _0x4e0040=a0_0x98996d;return await this[_0x4e0040(0x855)][_0x4e0040(0x293)]();}async[a0_0x98996d(0x506)](_0x42422f){const _0xb9c4d2=a0_0x98996d;try{return await this['client'][_0xb9c4d2(0x631)](_0x42422f[_0xb9c4d2(0x38d)]['readreceipts']),await this[_0xb9c4d2(0x855)][_0xb9c4d2(0x52d)](_0x42422f[_0xb9c4d2(0x38d)]['profile']),await this['client'][_0xb9c4d2(0x4c3)](_0x42422f[_0xb9c4d2(0x38d)][_0xb9c4d2(0x7ce)]),await this['client'][_0xb9c4d2(0x657)](_0x42422f['privacySettings']['online']),await this[_0xb9c4d2(0x855)][_0xb9c4d2(0x44c)](_0x42422f[_0xb9c4d2(0x38d)][_0xb9c4d2(0x1de)]),await this['client']['updateGroupsAddPrivacy'](_0x42422f[_0xb9c4d2(0x38d)][_0xb9c4d2(0x83e)]),this[_0xb9c4d2(0x855)]?.['ws']?.[_0xb9c4d2(0x358)](),{'update':_0xb9c4d2(0x43c),'data':{'readreceipts':_0x42422f['privacySettings'][_0xb9c4d2(0x59a)],'profile':_0x42422f[_0xb9c4d2(0x38d)][_0xb9c4d2(0x1a1)],'status':_0x42422f[_0xb9c4d2(0x38d)][_0xb9c4d2(0x7ce)],'online':_0x42422f['privacySettings'][_0xb9c4d2(0x73b)],'last':_0x42422f[_0xb9c4d2(0x38d)]['last'],'groupadd':_0x42422f['privacySettings'][_0xb9c4d2(0x83e)]}};}catch(_0x183b6c){let _0x261cd2='Erro\x20ao\x20alterar\x20privacidade',_0x8afe4=_0x183b6c instanceof Error?_0x183b6c[_0xb9c4d2(0x334)]:typeof _0x183b6c==_0xb9c4d2(0x623)?JSON[_0xb9c4d2(0x5ab)](_0x183b6c):_0x183b6c,_0x7e8cd2=_0x261cd2+':\x20'+_0x8afe4;throw this[_0xb9c4d2(0x669)][_0xb9c4d2(0x5c5)](this['instanceName']+'\x20('+this[_0xb9c4d2(0x78a)][_0xb9c4d2(0x3ef)]+_0xb9c4d2(0x526)+_0x7e8cd2),new m(_0x7e8cd2);}}async['fetchProfile'](_0x10be51){const _0x149a2a=a0_0x98996d;let _0x36b740=(_0x10be51?this[_0x149a2a(0x5b5)](_0x10be51):this[_0x149a2a(0x855)]?.[_0x149a2a(0x146)]?.['id'])[_0x149a2a(0x5d1)](/:\d{1,2}@/g,'@');this[_0x149a2a(0x669)]['verbose'](this[_0x149a2a(0x193)]+'\x20('+this['instance'][_0x149a2a(0x3ef)]+_0x149a2a(0x820)+_0x36b740);let _0x485e0c=await this['repository'][_0x149a2a(0x3d3)][_0x149a2a(0x218)]({'where':{'_id':_0x36b740}},this[_0x149a2a(0x78a)][_0x149a2a(0x3ef)]),_0x17f3f0=_0x485e0c?_0x485e0c[_0x149a2a(0x5d8)]:null;try{let _0x4724ab=(await this[_0x149a2a(0x4bd)]({'numbers':[_0x36b740]}))?.[_0x149a2a(0x854)](),_0x1a4a0e=(await this[_0x149a2a(0x7c7)](_0x36b740,null,!0x1))[_0x149a2a(0x248)][_0x149a2a(0x46e)],_0x1db8f0=await this['getStatus'](_0x4724ab?.[_0x149a2a(0x3d9)]),_0x5987d6=await this[_0x149a2a(0x649)](_0x4724ab?.[_0x149a2a(0x3d9)]),_0x3c2a62=(await this[_0x149a2a(0x7c7)](_0x36b740,null,!0x1))['cachedContact']['name'],_0xaf2984=await this[_0x149a2a(0x50b)][_0x149a2a(0x500)][_0x149a2a(0x218)]({'where':{'_id':_0x36b740}},this['instance']['wuid']),_0x5b8fa7={'imagechat':_0x1a4a0e,'contactname':_0x17f3f0||null,'pushName':_0x3c2a62,'status':_0x1db8f0?.['status'],'isBusiness':_0x5987d6[_0x149a2a(0x7af)],'email':_0x5987d6?.['email'],'description':_0x5987d6?.['description'],'website':_0x5987d6?.['website']?.[_0x149a2a(0x854)](),'lastcache':Date[_0x149a2a(0x4a3)](),'imported':!_0xaf2984},_0x57b267=await this[_0x149a2a(0x50b)][_0x149a2a(0x500)][_0x149a2a(0x1f8)]({'where':{'_id':_0x36b740}},_0x5b8fa7,this['instance']['wuid']),_0x1acd62={'owner':this[_0x149a2a(0x78a)][_0x149a2a(0x3ef)],'_id':_0x36b740,'profilePictureUrl':_0x1a4a0e,'status':_0x1db8f0?.[_0x149a2a(0x7ce)]};return this[_0x149a2a(0x50b)][_0x149a2a(0x3d3)][_0x149a2a(0x7ae)]([_0x1acd62],this[_0x149a2a(0x78a)]['wuid']),_0x57b267&&U(this['instanceName'],_0x149a2a(0x812),{'chat':_0x57b267}),{'wuid':_0x4724ab?.[_0x149a2a(0x3d9)]||_0x36b740,'name':_0x4724ab?.[_0x149a2a(0x592)],'pushName':_0x3c2a62,'numberExists':_0x4724ab?.['exists'],'picture':_0x1a4a0e,'status':_0x1db8f0?.['status'],'isBusiness':_0x5987d6[_0x149a2a(0x7af)],'email':_0x5987d6?.[_0x149a2a(0x6b2)],'description':_0x5987d6?.['description'],'website':_0x5987d6?.[_0x149a2a(0x773)]?.[_0x149a2a(0x854)]()};}catch(_0x3da67a){return this[_0x149a2a(0x669)][_0x149a2a(0x5c5)]('Error\x20fetching\x20and\x20updating\x20profile:\x20'+(_0x3da67a instanceof Error?_0x3da67a['message']:JSON[_0x149a2a(0x5ab)](_0x3da67a,null,0x2))),{};}}async[a0_0x98996d(0x649)](_0x597611){const _0x2f0450=a0_0x98996d;this['logger'][_0x2f0450(0x2a0)](this[_0x2f0450(0x193)]+'\x20('+this[_0x2f0450(0x78a)][_0x2f0450(0x3ef)]+_0x2f0450(0x520));try{let _0x12bc1e=_0x597611?this[_0x2f0450(0x5b5)](_0x597611):this[_0x2f0450(0x78a)][_0x2f0450(0x3ef)],_0x14d06b=await this[_0x2f0450(0x855)][_0x2f0450(0x188)](_0x12bc1e);return this[_0x2f0450(0x669)][_0x2f0450(0x2a0)](this[_0x2f0450(0x193)]+'\x20('+this[_0x2f0450(0x78a)][_0x2f0450(0x3ef)]+_0x2f0450(0x5bb)),_0x14d06b?(this[_0x2f0450(0x669)][_0x2f0450(0x2a0)](this['instanceName']+'\x20('+this['instance'][_0x2f0450(0x3ef)]+_0x2f0450(0x61f)),{'isBusiness':!0x0,..._0x14d06b}):{'isBusiness':!0x1,'message':_0x2f0450(0x846),...(await this['whatsappNumber']({'numbers':[_0x12bc1e]}))?.['shift']()};}catch(_0x3ca64e){let _0x5c955c=_0x2f0450(0x82b),_0x2d549c=_0x3ca64e instanceof Error?_0x3ca64e['message']:typeof _0x3ca64e==_0x2f0450(0x623)?JSON[_0x2f0450(0x5ab)](_0x3ca64e):_0x3ca64e,_0xc9a7b7=_0x5c955c+':\x20'+_0x2d549c;throw this[_0x2f0450(0x669)][_0x2f0450(0x5c5)](this[_0x2f0450(0x193)]+'\x20('+this['instance'][_0x2f0450(0x3ef)]+_0x2f0450(0x526)+_0xc9a7b7),new O(_0xc9a7b7);}}async[a0_0x98996d(0x4b7)](_0x12ff5f){const _0xa2a681=a0_0x98996d;let _0x5d9214=this[_0xa2a681(0x5b5)](_0x12ff5f);try{return{'wuid':_0x5d9214,'status':(await this[_0xa2a681(0x855)][_0xa2a681(0x75b)](_0x5d9214))[0x0]?.[_0xa2a681(0x7ce)]};}catch{return{'wuid':_0x5d9214,'status':null};}}async[a0_0x98996d(0x410)](_0x5345ce){const _0x4ea98e=a0_0x98996d;try{return await this[_0x4ea98e(0x855)][_0x4ea98e(0x410)](_0x5345ce),{'update':_0x4ea98e(0x43c)};}catch(_0x18e4fe){let _0x2ca0ed=_0x4ea98e(0x5e7),_0x2f3963=_0x18e4fe instanceof Error?_0x18e4fe[_0x4ea98e(0x334)]:typeof _0x18e4fe==_0x4ea98e(0x623)?JSON[_0x4ea98e(0x5ab)](_0x18e4fe):_0x18e4fe,_0x32f794=_0x2ca0ed+':\x20'+_0x2f3963;throw this[_0x4ea98e(0x669)][_0x4ea98e(0x5c5)](this['instanceName']+'\x20('+this[_0x4ea98e(0x78a)][_0x4ea98e(0x3ef)]+_0x4ea98e(0x526)+_0x32f794),new O(_0x32f794);}}async[a0_0x98996d(0x20b)](_0x4c8187){const _0x21eb49=a0_0x98996d;try{return await this[_0x21eb49(0x855)][_0x21eb49(0x20b)](_0x4c8187),{'update':_0x21eb49(0x43c)};}catch(_0x3f7895){let _0x5a420b=_0x21eb49(0x6a0),_0xce7ad1=_0x3f7895 instanceof Error?_0x3f7895[_0x21eb49(0x334)]:typeof _0x3f7895==_0x21eb49(0x623)?JSON[_0x21eb49(0x5ab)](_0x3f7895):_0x3f7895,_0x4a1132=_0x5a420b+':\x20'+_0xce7ad1;throw this[_0x21eb49(0x669)][_0x21eb49(0x5c5)](this['instanceName']+'\x20('+this['instance'][_0x21eb49(0x3ef)]+_0x21eb49(0x526)+_0x4a1132),new O(_0x4a1132);}}async[a0_0x98996d(0x380)](_0x57805c){const _0x38ea44=a0_0x98996d;try{let _0x22a117;if((0x0,D[_0x38ea44(0x6a5)])(_0x57805c)){let _0x1e7168=new Date()[_0x38ea44(0x4df)](),_0x112462=_0x57805c+_0x38ea44(0x3b5)+_0x1e7168;_0x22a117=(await Q[_0x38ea44(0x36a)][_0x38ea44(0x651)](_0x112462,{'responseType':_0x38ea44(0x6c1)}))[_0x38ea44(0x222)];}else{if((0x0,D[_0x38ea44(0x597)])(_0x57805c))_0x22a117=Buffer[_0x38ea44(0x54e)](_0x57805c,_0x38ea44(0x697));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this['client'][_0x38ea44(0x380)](this[_0x38ea44(0x78a)][_0x38ea44(0x3ef)],_0x22a117),{'update':_0x38ea44(0x43c)};}catch(_0x4e9948){let _0x59673d=_0x38ea44(0x57c),_0x57efdc=_0x4e9948 instanceof Error?_0x4e9948[_0x38ea44(0x334)]:typeof _0x4e9948==_0x38ea44(0x623)?JSON[_0x38ea44(0x5ab)](_0x4e9948):_0x4e9948,_0x342b1e=_0x59673d+':\x20'+_0x57efdc;throw this[_0x38ea44(0x669)][_0x38ea44(0x5c5)](this[_0x38ea44(0x193)]+'\x20('+this[_0x38ea44(0x78a)][_0x38ea44(0x3ef)]+_0x38ea44(0x526)+_0x342b1e),new O(_0x342b1e);}}async[a0_0x98996d(0x13a)](){const _0x3ad97c=a0_0x98996d;try{return await this['client']['removeProfilePicture'](this[_0x3ad97c(0x78a)][_0x3ad97c(0x3ef)]),{'update':_0x3ad97c(0x43c)};}catch(_0x46a8f8){let _0x31b1d5=_0x3ad97c(0x843),_0x22680f=_0x46a8f8 instanceof Error?_0x46a8f8['message']:typeof _0x46a8f8==_0x3ad97c(0x623)?JSON[_0x3ad97c(0x5ab)](_0x46a8f8):_0x46a8f8,_0x458ca9=_0x31b1d5+':\x20'+_0x22680f;throw this['logger'][_0x3ad97c(0x5c5)](this[_0x3ad97c(0x193)]+'\x20('+this[_0x3ad97c(0x78a)][_0x3ad97c(0x3ef)]+'):\x20'+_0x458ca9),new O(_0x458ca9);}}async[a0_0x98996d(0x2d1)](_0xb9e175){const _0x1eb9e8=a0_0x98996d;try{let _0x5910e5=(await this['whatsappNumber']({'numbers':_0xb9e175[_0x1eb9e8(0x357)]}))[_0x1eb9e8(0x29b)](_0x208b2d=>_0x208b2d[_0x1eb9e8(0x693)])['map'](_0x5d3acf=>_0x5d3acf['jid']),{id:_0x294267}=await this[_0x1eb9e8(0x855)][_0x1eb9e8(0x37f)](_0xb9e175[_0x1eb9e8(0x3cb)],_0x5910e5);_0xb9e175?.[_0x1eb9e8(0x320)]&&await this[_0x1eb9e8(0x855)][_0x1eb9e8(0x445)](_0x294267,_0xb9e175[_0x1eb9e8(0x320)]);let _0x4582b8=await this[_0x1eb9e8(0x855)]['groupMetadata'](_0x294267);return _0x4582b8[_0x1eb9e8(0x38f)]=[],{'metadata':_0x4582b8};}catch(_0x751175){let _0x9b7920='Falha\x20ao\x20processar\x20a\x20solicitao\x20createGroup',_0x28f32b=_0x751175 instanceof Error?_0x751175[_0x1eb9e8(0x334)]:typeof _0x751175==_0x1eb9e8(0x623)?JSON['stringify'](_0x751175):_0x751175,_0x4525c1=_0x9b7920+':\x20'+_0x28f32b;throw this[_0x1eb9e8(0x669)]['error'](this[_0x1eb9e8(0x193)]+'\x20('+this[_0x1eb9e8(0x78a)]['wuid']+_0x1eb9e8(0x526)+_0x4525c1),new O(_0x4525c1);}}async[a0_0x98996d(0x68e)](_0x457ba1){const _0xce2b2e=a0_0x98996d;try{if(_0x457ba1[_0xce2b2e(0x647)]===!0x0&&await this[_0xce2b2e(0x855)][_0xce2b2e(0x3f0)](_0x457ba1['groupJid'],_0xce2b2e(0x6f6)),_0x457ba1[_0xce2b2e(0x647)]===!0x1&&await this['client'][_0xce2b2e(0x3f0)](_0x457ba1[_0xce2b2e(0x83c)],_0xce2b2e(0x596)),_0x457ba1['announce']===!0x0&&await this['client'][_0xce2b2e(0x3f0)](_0x457ba1[_0xce2b2e(0x83c)],_0xce2b2e(0x76b)),_0x457ba1[_0xce2b2e(0x401)]===!0x1&&await this[_0xce2b2e(0x855)][_0xce2b2e(0x3f0)](_0x457ba1[_0xce2b2e(0x83c)],_0xce2b2e(0x376)),_0x457ba1[_0xce2b2e(0x5fb)]===!0x0&&await this[_0xce2b2e(0x855)]['groupMemberAddMode'](_0x457ba1[_0xce2b2e(0x83c)],_0xce2b2e(0x494)),_0x457ba1[_0xce2b2e(0x5fb)]===!0x1&&await this[_0xce2b2e(0x855)][_0xce2b2e(0x2c5)](_0x457ba1[_0xce2b2e(0x83c)],_0xce2b2e(0x723)),_0x457ba1[_0xce2b2e(0x5a1)]===!0x0&&await this[_0xce2b2e(0x855)][_0xce2b2e(0x6c2)](_0x457ba1[_0xce2b2e(0x83c)],'on'),_0x457ba1['joinApprovalMode']===!0x1&&await this['client'][_0xce2b2e(0x6c2)](_0x457ba1[_0xce2b2e(0x83c)],_0xce2b2e(0x1b4)),typeof _0x457ba1[_0xce2b2e(0x31f)]<'u'&&_0x457ba1[_0xce2b2e(0x31f)]!==null&&await this[_0xce2b2e(0x855)][_0xce2b2e(0x167)](_0x457ba1[_0xce2b2e(0x83c)],_0x457ba1[_0xce2b2e(0x31f)]),_0x457ba1['name']&&await this[_0xce2b2e(0x855)]['groupUpdateSubject'](_0x457ba1['groupJid'],_0x457ba1[_0xce2b2e(0x592)]),_0x457ba1[_0xce2b2e(0x320)]&&await this[_0xce2b2e(0x855)][_0xce2b2e(0x445)](_0x457ba1[_0xce2b2e(0x83c)],_0x457ba1[_0xce2b2e(0x320)]),_0x457ba1[_0xce2b2e(0x6cc)]){let _0x9eeca6;if((0x0,D['isURL'])(_0x457ba1['image'])){let _0x4959d6=new Date()[_0xce2b2e(0x4df)](),_0x2d84ed=_0x457ba1[_0xce2b2e(0x6cc)]+_0xce2b2e(0x3b5)+_0x4959d6;_0x9eeca6=(await Q['default'][_0xce2b2e(0x651)](_0x2d84ed,{'responseType':_0xce2b2e(0x6c1)}))[_0xce2b2e(0x222)];}else{if((0x0,D[_0xce2b2e(0x597)])(_0x457ba1[_0xce2b2e(0x6cc)]))_0x9eeca6=Buffer[_0xce2b2e(0x54e)](_0x457ba1[_0xce2b2e(0x6cc)],'base64');else throw new m(_0xce2b2e(0x709));}await this[_0xce2b2e(0x855)]['updateProfilePicture'](_0x457ba1[_0xce2b2e(0x83c)],_0x9eeca6);}return await this[_0xce2b2e(0x743)]({'groupJid':_0x457ba1[_0xce2b2e(0x83c)]});}catch(_0x5d7b80){let _0x38d50f=_0xce2b2e(0x71e),_0x54caa9=_0x5d7b80 instanceof Error?_0x5d7b80['message']:typeof _0x5d7b80==_0xce2b2e(0x623)?JSON['stringify'](_0x5d7b80):_0x5d7b80,_0x756502=_0x38d50f+':\x20'+_0x54caa9;throw this[_0xce2b2e(0x669)]['error'](this[_0xce2b2e(0x193)]+'\x20('+this[_0xce2b2e(0x78a)]['wuid']+_0xce2b2e(0x526)+_0x756502),new O(_0x756502);}}async[a0_0x98996d(0x25c)](_0xe86b9d){const _0x4e3624=a0_0x98996d;try{if(_0xe86b9d[_0x4e3624(0x7d8)]===_0x4e3624(0x6f8)||_0xe86b9d[_0x4e3624(0x7d8)]===_0x4e3624(0x1d1)){let _0x4a138a=_0xe86b9d[_0x4e3624(0x357)][_0x4e3624(0x384)](_0x23d51c=>this['createJid'](_0x23d51c));await this[_0x4e3624(0x855)][_0x4e3624(0x361)](_0xe86b9d[_0x4e3624(0x83c)],_0x4a138a,_0xe86b9d[_0x4e3624(0x7d8)]);}else{if(_0xe86b9d[_0x4e3624(0x7d8)]===_0x4e3624(0x712)){let _0x1b0af3=(await this[_0x4e3624(0x4bd)]({'numbers':_0xe86b9d[_0x4e3624(0x357)]}))[_0x4e3624(0x29b)](_0x1a02d4=>_0x1a02d4[_0x4e3624(0x693)])['map'](_0x321869=>this[_0x4e3624(0x5b5)](_0x321869[_0x4e3624(0x3d9)]));if(_0x1b0af3[_0x4e3624(0x217)]===0x0)throw new m(_0x4e3624(0x22f));await this[_0x4e3624(0x855)][_0x4e3624(0x6c8)](_0xe86b9d[_0x4e3624(0x83c)],_0x1b0af3,_0x4e3624(0x712));}else{let _0x65a61c=_0xe86b9d[_0x4e3624(0x357)][_0x4e3624(0x384)](_0xd3f2cf=>this[_0x4e3624(0x5b5)](_0xd3f2cf));await this[_0x4e3624(0x855)]['groupParticipantsUpdate'](_0xe86b9d[_0x4e3624(0x83c)],_0x65a61c,_0xe86b9d[_0x4e3624(0x7d8)]);}}return await this[_0x4e3624(0x743)]({'groupJid':_0xe86b9d[_0x4e3624(0x83c)]});}catch(_0x10a942){let _0x91015a=_0x4e3624(0x4f0),_0x4dfc44=_0x10a942 instanceof Error?_0x10a942[_0x4e3624(0x334)]:typeof _0x10a942==_0x4e3624(0x623)?JSON['stringify'](_0x10a942):_0x10a942,_0x5d3e01=_0x91015a+':\x20'+_0x4dfc44;throw this[_0x4e3624(0x669)]['error'](this[_0x4e3624(0x193)]+'\x20('+this['instance']['wuid']+_0x4e3624(0x526)+_0x5d3e01),new m(_0x5d3e01);}}async['groupGetInviteInfo'](_0x5a3c91){const _0x1f4780=a0_0x98996d;try{return await this['client'][_0x1f4780(0x4bf)](_0x5a3c91[_0x1f4780(0x42d)]);}catch(_0x462346){let _0x999566='Falha\x20ao\x20processar\x20a\x20solicitao\x20groupGetInviteInfo',_0x1da662=_0x462346 instanceof Error?_0x462346[_0x1f4780(0x334)]:typeof _0x462346=='object'?JSON['stringify'](_0x462346):_0x462346,_0x467a23=_0x999566+':\x20'+_0x1da662;throw this[_0x1f4780(0x669)]['error'](this[_0x1f4780(0x193)]+'\x20('+this[_0x1f4780(0x78a)][_0x1f4780(0x3ef)]+_0x1f4780(0x526)+_0x467a23),new m(_0x467a23);}}async[a0_0x98996d(0x743)](_0x1fbd56,_0x1720cb=a0_0x98996d(0x258)){const _0x2e8b45=a0_0x98996d;try{let _0x50b52f=await this[_0x2e8b45(0x50b)][_0x2e8b45(0x500)]['findOne']({'where':{'_id':_0x1fbd56[_0x2e8b45(0x83c)]}},this[_0x2e8b45(0x78a)][_0x2e8b45(0x3ef)]),_0x1e5b85=_0x50b52f?_0x50b52f[_0x2e8b45(0x66a)]:null,_0xefe650=0x18*0x3c*0x3c*0x3e8;if(!_0x1e5b85||_0x1e5b85['lastUpdate']&&Date[_0x2e8b45(0x4a3)]()-_0x1e5b85['lastUpdate']>_0xefe650){let _0x2d0d3c=await this[_0x2e8b45(0x855)][_0x2e8b45(0x41c)](_0x1fbd56[_0x2e8b45(0x83c)]);if(_0x2d0d3c[_0x2e8b45(0x749)]=_0x2d0d3c?.[_0x2e8b45(0x749)]&&_0x2d0d3c[_0x2e8b45(0x749)][_0x2e8b45(0x191)]()[_0x2e8b45(0x217)]<0xd?_0x2d0d3c?.[_0x2e8b45(0x749)]*0x3e8:_0x2d0d3c?.[_0x2e8b45(0x749)]||null,_0x2d0d3c[_0x2e8b45(0x3f4)]=_0x2d0d3c?.['creation']&&_0x2d0d3c[_0x2e8b45(0x3f4)]['toString']()[_0x2e8b45(0x217)]<0xd?_0x2d0d3c?.[_0x2e8b45(0x3f4)]*0x3e8:_0x2d0d3c?.[_0x2e8b45(0x3f4)]||null,_0x1e5b85={..._0x2d0d3c,'lastUpdate':Date['now']()},!_0x2d0d3c)return;}let _0xdcde31=_0x1e5b85[_0x2e8b45(0x357)]['some'](_0x112515=>_0x112515['id']===this[_0x2e8b45(0x78a)][_0x2e8b45(0x3ef)]+_0x2e8b45(0x6e2)&&_0x112515[_0x2e8b45(0x24a)]!=null);!_0x1e5b85[_0x2e8b45(0x42d)]&&_0xdcde31&&(_0x1e5b85[_0x2e8b45(0x42d)]=(await this['inviteCode'](_0x1fbd56,!0x1))['inviteUrl']);let _0x5bab5f=(!_0x1e5b85[_0x2e8b45(0x401)]||_0xdcde31)&&(!_0x1e5b85[_0x2e8b45(0x5a7)]||_0x1e5b85['isCommunity']&&_0x1e5b85['isCommunityAnnounce']&&_0xdcde31);_0x1e5b85[_0x2e8b45(0x5a0)]=_0xdcde31,_0x1e5b85[_0x2e8b45(0x6e1)]=_0x5bab5f;let _0x1eec53=[];if(_0xdcde31&&_0x1e5b85['joinApprovalMode'])try{_0x1eec53=await this['client']['groupRequestParticipantsList'](_0x1fbd56['groupJid']),_0x1e5b85[_0x2e8b45(0x412)]=Date['now']();}catch(_0x1e25cb){this['logger']['verbose'](this[_0x2e8b45(0x193)]+'\x20('+this[_0x2e8b45(0x78a)][_0x2e8b45(0x3ef)]+_0x2e8b45(0x607)+_0x1fbd56[_0x2e8b45(0x83c)]+':\x20'+(_0x1e25cb instanceof Error?_0x1e25cb['message']:JSON[_0x2e8b45(0x5ab)](_0x1e25cb,null,0x2)));}try{_0x1e5b85['image']=(await this['findAndUpdateCacheContact'](_0x1fbd56[_0x2e8b45(0x83c)],null,!0x0))['cachedContact']['pictureUrl'];}catch(_0x3fd047){this[_0x2e8b45(0x669)][_0x2e8b45(0x2a0)](this[_0x2e8b45(0x193)]+'\x20('+this['instance'][_0x2e8b45(0x3ef)]+_0x2e8b45(0x734)+_0x1fbd56['groupJid']+':\x20'+(_0x3fd047 instanceof Error?_0x3fd047[_0x2e8b45(0x334)]:JSON[_0x2e8b45(0x5ab)](_0x3fd047,null,0x2)));}let _0x3d7ee1=_0x1e5b85[_0x2e8b45(0x357)]['map'](_0x2e09d0=>_0x2e09d0['id']),_0x28221e=_0x1eec53[_0x2e8b45(0x384)](_0x4942bf=>_0x4942bf[_0x2e8b45(0x3d9)]),_0xb1b5f8=await this[_0x2e8b45(0x50b)]['cacheContact'][_0x2e8b45(0x7b9)]([..._0x3d7ee1,..._0x28221e]);_0x1e5b85[_0x2e8b45(0x357)]=_0x1e5b85[_0x2e8b45(0x357)][_0x2e8b45(0x384)](_0x112393=>{const _0x15e7f6=_0x2e8b45;let _0x258c14=_0xb1b5f8[_0x15e7f6(0x704)](_0x4bb675=>_0x4bb675['_id']===_0x112393['id']);return{'id':_0x112393['id'],'isAdmin':[_0x15e7f6(0x24a),_0x15e7f6(0x247)][_0x15e7f6(0x199)](_0x112393['admin']),'admin':_0x112393[_0x15e7f6(0x24a)],'pushName':_0x258c14?.['name'],'profilePictureUrl':_0x258c14?.[_0x15e7f6(0x46e)]};}),_0x1e5b85[_0x2e8b45(0x38f)]=_0x1eec53[_0x2e8b45(0x384)](_0x1bcd11=>{const _0x3fb294=_0x2e8b45;let _0x4efdd9=_0xb1b5f8['find'](_0x538d7c=>_0x538d7c['_id']===_0x1bcd11[_0x3fb294(0x3d9)]);return{'id':_0x1bcd11[_0x3fb294(0x3d9)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x4efdd9?.[_0x3fb294(0x592)],'profilePictureUrl':_0x4efdd9?.[_0x3fb294(0x46e)],'request_method':_0x1bcd11['request_method'],'request_time':_0x1bcd11['request_time']};});let _0x362fc7=await this[_0x2e8b45(0x50b)][_0x2e8b45(0x500)][_0x2e8b45(0x1f8)]({'where':{'_id':_0x1fbd56['groupJid']}},{'imagechat':_0x1e5b85[_0x2e8b45(0x6cc)],'name':_0x1e5b85['subject'],'lastcache':Date['now'](),'groupdata':_0x1e5b85},this[_0x2e8b45(0x78a)][_0x2e8b45(0x3ef)]);return U(this[_0x2e8b45(0x193)],_0x2e8b45(0x812),{'chat':_0x362fc7}),{'metadata':_0x1e5b85};}catch(_0x26abcd){if(_0x1720cb===_0x2e8b45(0x4f1))return;throw new F('Error\x20fetching\x20group',_0x26abcd[_0x2e8b45(0x334)][_0x2e8b45(0x191)]());}}async[a0_0x98996d(0x1ca)](){const _0x241000=a0_0x98996d;try{this[_0x241000(0x669)][_0x241000(0x22b)]('Retornando\x20grupos\x20COM\x20cache');let _0x6b2d42=Date[_0x241000(0x4a3)](),_0x94688=0x3*0x3c*0x3c*0x3e8;return _0x6b2d42-this[_0x241000(0x6cd)]>_0x94688&&(this[_0x241000(0x3bc)](),this['lastRealGroupsFetch']=_0x6b2d42),(await this['repository']['chat'][_0x241000(0x59d)]({'where':{'group':!0x0}},this[_0x241000(0x78a)]['wuid']))[_0x241000(0x384)](_0x215cda=>({..._0x215cda[_0x241000(0x66a)],'groupJid':_0x215cda?.[_0x241000(0x699)],'participants':_0x215cda?.[_0x241000(0x66a)]?.['participants']||[],'awaitingApproval':_0x215cda?.[_0x241000(0x66a)]?.[_0x241000(0x38f)]||[],'image':_0x215cda?.['imagechat']}));}catch(_0x142600){let _0x30b2b0=_0x241000(0x20f),_0x3ff940=_0x142600 instanceof Error?_0x142600[_0x241000(0x334)]:typeof _0x142600==_0x241000(0x623)?JSON[_0x241000(0x5ab)](_0x142600):_0x142600,_0x25d728=_0x30b2b0+':\x20'+_0x3ff940;throw this[_0x241000(0x669)][_0x241000(0x5c5)](this[_0x241000(0x193)]+'\x20('+this[_0x241000(0x78a)][_0x241000(0x3ef)]+_0x241000(0x526)+_0x25d728),new F(_0x25d728);}}async['findRealGroups'](){const _0x1bba34=a0_0x98996d;try{this[_0x1bba34(0x669)][_0x1bba34(0x22b)](_0x1bba34(0x6da));let _0x4555a1=[],_0x4d5d92=await this[_0x1bba34(0x855)][_0x1bba34(0x666)](),_0x2d1c57=Object[_0x1bba34(0x5ba)](_0x4d5d92),_0x36b8b6=_0x2d1c57['filter'](_0xc11589=>(0x0,w[_0x1bba34(0x43e)])(_0xc11589?.['id']))['map'](async _0x2f06a9=>{const _0x21287c=_0x1bba34;try{return await this[_0x21287c(0x855)][_0x21287c(0x1fa)](_0x2f06a9['id'],_0x21287c(0x5c3));}catch(_0x1d1504){return this[_0x21287c(0x669)][_0x21287c(0x2a0)](this[_0x21287c(0x193)]+'\x20('+this[_0x21287c(0x78a)][_0x21287c(0x3ef)]+_0x21287c(0x734)+_0x2f06a9['id']+':\x20'+(_0x1d1504 instanceof Error?_0x1d1504[_0x21287c(0x334)]:JSON[_0x21287c(0x5ab)](_0x1d1504,null,0x2))),null;}}),_0x107573=await Promise['all'](_0x36b8b6);for(let _0x343f8f=0x0;_0x343f8f<_0x2d1c57['length'];_0x343f8f++){let _0x138fcf=_0x2d1c57[_0x343f8f];(0x0,w['isJidGroup'])(_0x138fcf?.['id'])&&(_0x4555a1[_0x1bba34(0x69d)]({'groupJid':_0x138fcf?.['id'],'subject':_0x138fcf?.[_0x1bba34(0x3cb)],'subjectOwner':_0x138fcf?.['subjectOwner']?.[_0x1bba34(0x4fb)]('@')[0x0],'subjectTime':_0x138fcf?.['subjectTime'],'creation':_0x138fcf?.[_0x1bba34(0x3f4)],'size':_0x138fcf?.[_0x1bba34(0x357)]?.['length'],'owner':_0x138fcf?.['owner']?.[_0x1bba34(0x4fb)]('@')[0x0],'desc':_0x138fcf?.['desc'],'restrict':_0x138fcf?.[_0x1bba34(0x647)],'announce':_0x138fcf?.[_0x1bba34(0x401)],'image':_0x107573[_0x343f8f],'isCommunity':_0x138fcf?.[_0x1bba34(0x5a7)],'joinApprovalMode':_0x138fcf?.['joinApprovalMode'],'memberCanAddParticipant':_0x138fcf?.[_0x1bba34(0x5fb)],'participants':_0x138fcf?.['participants'],'descOwner':_0x138fcf?.['descOwner'],'descId':_0x138fcf?.['descId'],'memberAddMode':_0x138fcf?.[_0x1bba34(0x5fb)],'isCommunityAnnounce':_0x138fcf?.[_0x1bba34(0x37c)],'ephemeralDuration':_0x138fcf?.[_0x1bba34(0x1ad)]||0x0,'author':_0x138fcf?.['author']}),this[_0x1bba34(0x3c6)](_0x2d1c57[_0x343f8f]));}return _0x4555a1;}catch(_0x47dd08){let _0x3047c7=_0x1bba34(0x33f),_0x47aed3=_0x47dd08 instanceof Error?_0x47dd08[_0x1bba34(0x334)]:typeof _0x47dd08=='object'?JSON[_0x1bba34(0x5ab)](_0x47dd08):_0x47dd08,_0x325684=_0x3047c7+':\x20'+_0x47aed3;throw this['logger'][_0x1bba34(0x5c5)](this[_0x1bba34(0x193)]+'\x20('+this['instance'][_0x1bba34(0x3ef)]+'):\x20'+_0x325684),new F(_0x325684);}}async[a0_0x98996d(0x3c6)](_0x36b009){const _0x2fa8b8=a0_0x98996d;let _0x1b5558=await this[_0x2fa8b8(0x50b)][_0x2fa8b8(0x500)][_0x2fa8b8(0x218)]({'where':{'_id':_0x36b009['id']}},this[_0x2fa8b8(0x78a)]['wuid']);_0x36b009[_0x2fa8b8(0x749)]=_0x36b009?.['subjectTime']&&_0x36b009[_0x2fa8b8(0x749)][_0x2fa8b8(0x191)]()[_0x2fa8b8(0x217)]<0xd?_0x36b009?.[_0x2fa8b8(0x749)]*0x3e8:_0x36b009?.[_0x2fa8b8(0x749)]||null,_0x36b009[_0x2fa8b8(0x3f4)]=_0x36b009?.[_0x2fa8b8(0x3f4)]&&_0x36b009['creation'][_0x2fa8b8(0x191)]()[_0x2fa8b8(0x217)]<0xd?_0x36b009?.['creation']*0x3e8:_0x36b009?.[_0x2fa8b8(0x3f4)]||null;let _0xc4ea11=_0x1b5558?.['groupdata']?.['awaitingApproval']||[],_0x53d3db=_0x1b5558?.['groupdata']?.[_0x2fa8b8(0x412)],_0x5a3468=_0x36b009[_0x2fa8b8(0x357)]['map'](_0x9c4c79=>{const _0x4127d2=_0x2fa8b8;let _0x3af240=_0x1b5558?.[_0x4127d2(0x66a)]?.[_0x4127d2(0x357)][_0x4127d2(0x704)](_0x480a52=>_0x480a52['id']===_0x9c4c79['id']);return{..._0x9c4c79,'isAdmin':[_0x4127d2(0x24a),_0x4127d2(0x247)]['includes'](_0x9c4c79[_0x4127d2(0x24a)]),'admin':_0x9c4c79[_0x4127d2(0x24a)],'name':_0x3af240?.[_0x4127d2(0x592)]||_0x9c4c79[_0x4127d2(0x592)],'imgUrl':_0x3af240?.['imgUrl']||_0x9c4c79['imgUrl']};}),_0x17bebf=_0x5a3468[_0x2fa8b8(0x6f9)](_0x48a4b1=>_0x48a4b1['id']===this[_0x2fa8b8(0x78a)][_0x2fa8b8(0x3ef)]+_0x2fa8b8(0x6e2)&&_0x48a4b1['isAdmin']),_0x31ac5b=(!_0x36b009[_0x2fa8b8(0x401)]||_0x17bebf)&&(!_0x36b009[_0x2fa8b8(0x5a7)]||_0x36b009[_0x2fa8b8(0x5a7)]&&_0x36b009[_0x2fa8b8(0x37c)]&&_0x17bebf),_0x3da30f={..._0x36b009,'participants':_0x5a3468,'awaitingApproval':_0xc4ea11,'lastFetchAwaitingApproval':_0x53d3db,'isAdmin':_0x17bebf,'canSendMessage':_0x31ac5b,'lastUpdate':Date[_0x2fa8b8(0x4a3)]()};await this[_0x2fa8b8(0x50b)][_0x2fa8b8(0x500)][_0x2fa8b8(0x1f8)]({'where':{'_id':_0x36b009['id']}},{'name':_0x36b009[_0x2fa8b8(0x3cb)],'group':!0x0,'groupdata':_0x3da30f,'lastcache':Date[_0x2fa8b8(0x4a3)]()},this[_0x2fa8b8(0x78a)][_0x2fa8b8(0x3ef)]),U(this[_0x2fa8b8(0x193)],_0x2fa8b8(0x812),{'chat':_0x36b009});}async['updateGroupWebhook'](_0x5c7388){const _0x1e494b=a0_0x98996d;let _0x33f577=await this[_0x1e494b(0x50b)][_0x1e494b(0x500)][_0x1e494b(0x218)]({'where':{'_id':_0x5c7388['id']}},this[_0x1e494b(0x78a)]['wuid']);_0x5c7388[_0x1e494b(0x749)]=_0x5c7388?.['subjectTime']&&_0x5c7388[_0x1e494b(0x749)]['toString']()[_0x1e494b(0x217)]<0xd?_0x5c7388?.['subjectTime']*0x3e8:_0x5c7388?.[_0x1e494b(0x749)]||null,_0x5c7388['creation']=_0x5c7388?.['creation']&&_0x5c7388['creation'][_0x1e494b(0x191)]()[_0x1e494b(0x217)]<0xd?_0x5c7388?.[_0x1e494b(0x3f4)]*0x3e8:_0x5c7388?.[_0x1e494b(0x3f4)]||null,_0x5c7388[_0x1e494b(0x42d)]&&(_0x5c7388[_0x1e494b(0x42d)]='https://chat.whatsapp.com/'+_0x5c7388['inviteCode']);let _0x3b666e=_0x33f577?.[_0x1e494b(0x66a)]?{..._0x33f577['groupdata']}:{};Object[_0x1e494b(0x58d)](_0x5c7388)[_0x1e494b(0x15b)](_0x3fd063=>{_0x3fd063!=='id'&&(_0x3b666e[_0x3fd063]=_0x5c7388[_0x3fd063]);});let _0x13d7e4=_0x3b666e[_0x1e494b(0x357)]?.['some'](_0x3d960d=>_0x3d960d['id']===this[_0x1e494b(0x78a)][_0x1e494b(0x3ef)]+_0x1e494b(0x6e2)&&_0x3d960d[_0x1e494b(0x5a0)])||!0x1;_0x3b666e['isAdmin']=_0x13d7e4;let _0xebe565=(!_0x3b666e[_0x1e494b(0x401)]||_0x13d7e4)&&(!_0x3b666e[_0x1e494b(0x5a7)]||_0x3b666e[_0x1e494b(0x5a7)]&&_0x3b666e[_0x1e494b(0x37c)]&&_0x13d7e4);_0x3b666e[_0x1e494b(0x6e1)]=_0xebe565;let _0xc7bc55={'group':!0x0,'groupdata':_0x3b666e};_0x5c7388[_0x1e494b(0x3cb)]&&(_0xc7bc55[_0x1e494b(0x592)]=_0x5c7388[_0x1e494b(0x3cb)]),await this['repository'][_0x1e494b(0x500)]['updateOne']({'where':{'_id':_0x5c7388['id']}},_0xc7bc55,this[_0x1e494b(0x78a)]['wuid'],{'upsert':!0x0}),U(this[_0x1e494b(0x193)],_0x1e494b(0x812),{'chat':_0xc7bc55});}async[a0_0x98996d(0x4c0)](_0x1939f9){const _0xe58582=a0_0x98996d;let _0x2da2bd=await this[_0xe58582(0x50b)][_0xe58582(0x500)][_0xe58582(0x218)]({'where':{'_id':_0x1939f9['id']}},this[_0xe58582(0x78a)]['wuid']);if(!_0x2da2bd||!_0x2da2bd['groupdata']){this[_0xe58582(0x669)][_0xe58582(0x22b)](this[_0xe58582(0x193)]+'\x20('+this['instance'][_0xe58582(0x3ef)]+_0xe58582(0x51a)+_0x1939f9['id']);return;}let _0x305a9b=await this[_0xe58582(0x50b)][_0xe58582(0x84b)]['findManyByIds'](_0x1939f9[_0xe58582(0x357)]),_0x29b2db=[..._0x2da2bd[_0xe58582(0x66a)]?.['participants']];switch(_0x1939f9[_0xe58582(0x7d8)]){case _0xe58582(0x712):let _0x15f94f=_0x305a9b[_0xe58582(0x384)](_0x429f06=>({'id':_0x429f06[_0xe58582(0x699)],'isAdmin':!0x1,'name':_0x429f06[_0xe58582(0x592)],'imgUrl':_0x429f06[_0xe58582(0x46e)]}));_0x29b2db=[..._0x29b2db,..._0x15f94f];break;case _0xe58582(0x629):_0x29b2db=_0x29b2db[_0xe58582(0x29b)](_0x5a080a=>!_0x1939f9[_0xe58582(0x357)][_0xe58582(0x199)](_0x5a080a['id']));break;case _0xe58582(0x60f):case'demote':_0x29b2db=_0x29b2db[_0xe58582(0x384)](_0x1ded63=>_0x1939f9[_0xe58582(0x357)][_0xe58582(0x199)](_0x1ded63['id'])?{..._0x1ded63,'isAdmin':_0x1939f9[_0xe58582(0x7d8)]===_0xe58582(0x60f)}:_0x1ded63);break;}let _0x2f8d93=_0x29b2db[_0xe58582(0x217)],_0x31ab30=_0x29b2db[_0xe58582(0x6f9)](_0x3cf4fb=>_0x3cf4fb['id']===this[_0xe58582(0x78a)][_0xe58582(0x3ef)]+_0xe58582(0x6e2)),_0x4ed819=_0x31ab30&&_0x29b2db[_0xe58582(0x6f9)](_0x2996ce=>_0x2996ce['id']===this[_0xe58582(0x78a)]['wuid']+_0xe58582(0x6e2)&&_0x2996ce[_0xe58582(0x5a0)]),_0x60d25d=_0x31ab30&&(!_0x2da2bd[_0xe58582(0x66a)]['announce']||_0x4ed819)&&(!_0x2da2bd['groupdata'][_0xe58582(0x5a7)]||_0x2da2bd[_0xe58582(0x66a)]['isCommunity']&&_0x4ed819);await this[_0xe58582(0x50b)][_0xe58582(0x500)][_0xe58582(0x1f8)]({'where':{'_id':_0x1939f9['id']}},{'groupdata':{..._0x2da2bd[_0xe58582(0x66a)],'participants':_0x29b2db,'size':_0x2f8d93,'isAdmin':_0x4ed819,'canSendMessage':_0x60d25d}},this['instance'][_0xe58582(0x3ef)]),this[_0xe58582(0x669)]['info'](this[_0xe58582(0x193)]+'\x20('+this['instance'][_0xe58582(0x3ef)]+_0xe58582(0x667)+_0x1939f9['id']+'\x20atualizado\x20com\x20sucesso.\x20Ao:\x20'+_0x1939f9[_0xe58582(0x7d8)]+',\x20Novo\x20tamanho:\x20'+_0x2f8d93+',\x20isAdmin:\x20'+_0x4ed819+_0xe58582(0x337)+_0x60d25d);}async['inviteCode'](_0x69ab65,_0x78d59c=!0x0){const _0x51c60e=a0_0x98996d;try{let _0x5e927f=await this[_0x51c60e(0x855)][_0x51c60e(0x370)](_0x69ab65[_0x51c60e(0x83c)]),_0x2fabb7={'groupdata.inviteCode':_0x51c60e(0x5e1)+_0x5e927f};if(_0x78d59c){let _0x151d85=await this['repository']['chat'][_0x51c60e(0x1f8)]({'where':{'_id':_0x69ab65[_0x51c60e(0x83c)]}},_0x2fabb7,this[_0x51c60e(0x78a)][_0x51c60e(0x3ef)]);}return{'inviteUrl':_0x51c60e(0x5e1)+_0x5e927f,'inviteCode':_0x5e927f};}catch(_0x573f1c){let _0x2e37dc=_0x51c60e(0x836),_0x3b254b=_0x573f1c instanceof Error?_0x573f1c[_0x51c60e(0x334)]:typeof _0x573f1c==_0x51c60e(0x623)?JSON['stringify'](_0x573f1c):_0x573f1c,_0x1a0bb0=_0x2e37dc+':\x20'+_0x3b254b;throw this['logger'][_0x51c60e(0x5c5)](this['instanceName']+'\x20('+this['instance'][_0x51c60e(0x3ef)]+_0x51c60e(0x526)+_0x1a0bb0),new F(_0x1a0bb0);}}async[a0_0x98996d(0x831)](_0x1c21bd){const _0x42fabe=a0_0x98996d;try{let _0x6c3286=await this[_0x42fabe(0x855)]['groupRevokeInvite'](_0x1c21bd[_0x42fabe(0x83c)]);return{'revoked':!0x0,'inviteUrl':_0x42fabe(0x5e1)+_0x6c3286,'inviteCode':_0x6c3286};}catch(_0x4404ca){let _0x40939d=_0x42fabe(0x29a),_0x202b8f=_0x4404ca instanceof Error?_0x4404ca[_0x42fabe(0x334)]:typeof _0x4404ca==_0x42fabe(0x623)?JSON[_0x42fabe(0x5ab)](_0x4404ca):_0x4404ca,_0x317ca0=_0x40939d+':\x20'+_0x202b8f;throw this[_0x42fabe(0x669)][_0x42fabe(0x5c5)](this[_0x42fabe(0x193)]+'\x20('+this[_0x42fabe(0x78a)][_0x42fabe(0x3ef)]+_0x42fabe(0x526)+_0x317ca0),new F(_0x317ca0);}}async[a0_0x98996d(0x69e)](_0x4a9229){const _0x297a31=a0_0x98996d;try{if((0x0,D[_0x297a31(0x6a5)])(_0x4a9229[_0x297a31(0x42d)]))var _0x14c1f7=_0x4a9229[_0x297a31(0x42d)]['split']('/')[0x3];else var _0x14c1f7=_0x4a9229['inviteCode'];let _0x259a44=await this[_0x297a31(0x855)][_0x297a31(0x246)](_0x14c1f7);return this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x297a31(0x78a)][_0x297a31(0x3ef)]+_0x297a31(0x526)+_0x259a44),{'join':!0x0,'inviteCode':_0x14c1f7,'groupJid':_0x259a44};}catch(_0x25848f){let _0x3f7086=_0x297a31(0x566),_0x3a8e1e=_0x25848f instanceof Error?_0x25848f[_0x297a31(0x334)]:typeof _0x25848f==_0x297a31(0x623)?JSON['stringify'](_0x25848f):_0x25848f,_0xb57263=_0x3f7086+':\x20'+_0x3a8e1e;throw this[_0x297a31(0x669)]['error'](this[_0x297a31(0x193)]+'\x20('+this[_0x297a31(0x78a)][_0x297a31(0x3ef)]+_0x297a31(0x526)+_0xb57263),new F(_0xb57263);}}async[a0_0x98996d(0x233)](_0x4162cb){const _0x199c16=a0_0x98996d;try{return{'participants':(await this[_0x199c16(0x50b)][_0x199c16(0x500)][_0x199c16(0x218)]({'where':{'_id':_0x4162cb[_0x199c16(0x83c)]}},this['instance'][_0x199c16(0x3ef)]))[_0x199c16(0x66a)]['participants']};}catch(_0x28b290){let _0x1ac8f8='Falha\x20ao\x20processar\x20a\x20solicitao\x20findParticipants',_0x29889d=_0x28b290 instanceof Error?_0x28b290[_0x199c16(0x334)]:typeof _0x28b290==_0x199c16(0x623)?JSON['stringify'](_0x28b290):_0x28b290,_0x41f317=_0x1ac8f8+':\x20'+_0x29889d;throw this[_0x199c16(0x669)]['error'](this[_0x199c16(0x193)]+'\x20('+this[_0x199c16(0x78a)][_0x199c16(0x3ef)]+_0x199c16(0x526)+_0x41f317),new F(_0x41f317);}}async[a0_0x98996d(0x159)](_0x2a90ef){const _0x2e0182=a0_0x98996d;try{return await this[_0x2e0182(0x855)][_0x2e0182(0x830)](_0x2a90ef[_0x2e0182(0x83c)]),{'groupJid':_0x2a90ef[_0x2e0182(0x83c)],'leave':!0x0};}catch(_0x288ab5){let _0x499123=_0x2e0182(0x5ef),_0x435459=_0x288ab5 instanceof Error?_0x288ab5[_0x2e0182(0x334)]:typeof _0x288ab5=='object'?JSON['stringify'](_0x288ab5):_0x288ab5,_0x5c01a2=_0x499123+':\x20'+_0x435459;throw this[_0x2e0182(0x669)][_0x2e0182(0x5c5)](this[_0x2e0182(0x193)]+'\x20('+this[_0x2e0182(0x78a)][_0x2e0182(0x3ef)]+'):\x20'+_0x5c01a2),new m(_0x5c01a2);}}async['pollMessage'](_0x4ce840){const _0x13b702=a0_0x98996d;return await this[_0x13b702(0x175)](_0x4ce840[_0x13b702(0x62f)],{'poll':{'name':_0x4ce840[_0x13b702(0x24f)]?.[_0x13b702(0x592)],'selectableCount':_0x4ce840[_0x13b702(0x24f)][_0x13b702(0x66b)],'values':_0x4ce840[_0x13b702(0x24f)][_0x13b702(0x5ba)]}},_0x4ce840?.[_0x13b702(0x17f)]);}async[a0_0x98996d(0x319)](_0x538331){const _0x151bdc=a0_0x98996d;return await this['sendMessageWithTyping'](_0x538331[_0x151bdc(0x62f)],{'listMessage':{'title':_0x538331[_0x151bdc(0x319)][_0x151bdc(0x190)],'description':_0x538331[_0x151bdc(0x319)][_0x151bdc(0x320)],'buttonText':_0x538331['listMessage']?.['buttonText'],'footerText':_0x538331[_0x151bdc(0x319)]?.['footerText'],'sections':_0x538331[_0x151bdc(0x319)][_0x151bdc(0x529)],'listType':0x2}},_0x538331?.[_0x151bdc(0x17f)]);}async[a0_0x98996d(0x48f)](_0x1d0e8d){const _0x48efb1=a0_0x98996d;let _0x4ad1;if(_0x1d0e8d['menuMessage'][_0x48efb1(0x1b8)]===_0x48efb1(0x458)){let _0x2bb39f=_0x1d0e8d[_0x48efb1(0x48f)][_0x48efb1(0x673)][_0x48efb1(0x719)]('\x0a'),_0x165a5e='',_0x45dc35='';_0x2bb39f!==-0x1?(_0x165a5e=_0x1d0e8d[_0x48efb1(0x48f)][_0x48efb1(0x673)][_0x48efb1(0x3da)](0x0,_0x2bb39f)['trim'](),_0x45dc35=_0x1d0e8d['menuMessage']['text']['substring'](_0x2bb39f+0x1)):_0x45dc35=_0x1d0e8d[_0x48efb1(0x48f)][_0x48efb1(0x673)];let _0x3fbe49=_0x1d0e8d['menuMessage']['choices']['filter'](_0x1e32fc=>_0x1e32fc['trim']()!==''),_0x3f5421=this[_0x48efb1(0x3cf)](_0x3fbe49);_0x4ad1={'listMessage':{'title':_0x165a5e,'description':_0x45dc35,'buttonText':_0x1d0e8d[_0x48efb1(0x48f)][_0x48efb1(0x560)]||_0x48efb1(0x39b),'footerText':_0x1d0e8d[_0x48efb1(0x48f)][_0x48efb1(0x1ea)],'sections':_0x3f5421,'listType':0x2}};}else{if(_0x1d0e8d[_0x48efb1(0x48f)][_0x48efb1(0x1b8)]==='poll'){let _0x112ccc=_0x1d0e8d[_0x48efb1(0x48f)]['choices'][_0x48efb1(0x29b)](_0x5418a2=>!(_0x5418a2[_0x48efb1(0x366)]('[')&&_0x5418a2[_0x48efb1(0x553)](']'))&&_0x5418a2[_0x48efb1(0x317)]()!=='')[_0x48efb1(0x384)](_0x781609=>_0x781609[_0x48efb1(0x4fb)]('\x0a')[0x0]);_0x4ad1={'poll':{'name':_0x1d0e8d['menuMessage'][_0x48efb1(0x673)],'selectableCount':_0x1d0e8d[_0x48efb1(0x48f)][_0x48efb1(0x66b)]||0x1,'values':_0x112ccc}};}}return await this[_0x48efb1(0x175)](_0x1d0e8d['number'],_0x4ad1,_0x1d0e8d?.[_0x48efb1(0x17f)]);}[a0_0x98996d(0x3cf)](_0x40e720){const _0x4f9bfd=a0_0x98996d;let _0x2ac589=[],_0x4572bb={'rows':[]};return _0x40e720[_0x4f9bfd(0x15b)](_0x2cd533=>{const _0x4f8cfc=_0x4f9bfd;if(_0x2cd533[_0x4f8cfc(0x366)]('[')&&_0x2cd533[_0x4f8cfc(0x553)](']'))_0x4572bb[_0x4f8cfc(0x214)][_0x4f8cfc(0x217)]>0x0&&_0x2ac589[_0x4f8cfc(0x69d)](_0x4572bb),_0x4572bb={'title':_0x2cd533[_0x4f8cfc(0x519)](0x1,-0x1),'rows':[]};else{let _0x351cc2=_0x2cd533['split']('\x0a')[_0x4f8cfc(0x384)](_0x169228=>_0x169228[_0x4f8cfc(0x317)]()),_0x11f8c0=_0x351cc2[0x0],_0x5e3c0e=_0x351cc2[0x1]||null,_0xf424cd=_0x351cc2[0x2]||_0x11f8c0;_0x4572bb['rows'][_0x4f8cfc(0x69d)]({'title':_0x11f8c0,'description':_0x5e3c0e,'rowId':_0xf424cd});}}),_0x4572bb[_0x4f9bfd(0x214)][_0x4f9bfd(0x217)]>0x0&&_0x2ac589[_0x4f9bfd(0x69d)](_0x4572bb),_0x2ac589;}async[a0_0x98996d(0x367)](_0x11e219,_0x3b8658){const _0x2f623e=a0_0x98996d;if(await this[_0x2f623e(0x13c)](_0x11e219,!0x0)){let _0x120530={'where':{'_id':_0x11e219['id']}},_0xecf3ee={'status':[_0x3b8658[_0x2f623e(0x7ce)]][0x0]};try{let _0x46724f=await this[_0x2f623e(0x50b)][_0x2f623e(0x334)][_0x2f623e(0x7ae)](_0x120530,_0xecf3ee,this[_0x2f623e(0x78a)][_0x2f623e(0x3ef)]);_0x46724f&&U(this[_0x2f623e(0x193)],_0x2f623e(0x814),{'message':_0x46724f});}catch{}}}[a0_0x98996d(0x1f9)](_0x9f28f7){const _0x5b5f5b=a0_0x98996d;let _0x2da6cf=[];return _0x9f28f7['forEach'](_0x4fa918=>{const _0x2897b0=a0_0x431f;_0x4fa918[_0x2897b0(0x190)]&&_0x2da6cf[_0x2897b0(0x69d)]('['+_0x4fa918[_0x2897b0(0x190)]+']'),_0x4fa918[_0x2897b0(0x214)][_0x2897b0(0x15b)](_0xb6c0d1=>{const _0x166ba2=_0x2897b0;_0x2da6cf[_0x166ba2(0x69d)](_0xb6c0d1[_0x166ba2(0x190)]);});}),_0x2da6cf[_0x5b5f5b(0x38e)]('|');}[a0_0x98996d(0x6b7)](_0x45bf82){const _0x1f7201=a0_0x98996d;let _0x2b7094=_0x45bf82[_0x1f7201(0x5d1)](/\\n/g,'\x0a')[_0x1f7201(0x4fb)]('\x0a')[_0x1f7201(0x29b)](_0xf0e874=>_0xf0e874[_0x1f7201(0x199)](_0x1f7201(0x462))||_0xf0e874[_0x1f7201(0x199)](_0x1f7201(0x5f3))),_0x2234a0='';return _0x2b7094[_0x1f7201(0x15b)](_0x3ded3f=>{const _0x32fcf7=_0x1f7201;let _0x30bd6c=/TEL(?:.*):(.+)/,_0x226805=/EMAIL(?:.*):(.+)/,_0x588316=_0x3ded3f['match'](_0x30bd6c),_0x41cf98=_0x3ded3f[_0x32fcf7(0x132)](_0x226805);if(_0x588316){let _0x32ce0a=_0x588316[0x1][_0x32fcf7(0x5d1)](/-| |\+|\(|\)/g,'')[_0x32fcf7(0x317)]();_0x2234a0+=_0x32fcf7(0x41f)+_0x32ce0a+'\x0a';}else{if(_0x41cf98){let _0x2158d3=_0x41cf98[0x1][_0x32fcf7(0x317)]();_0x2234a0+=_0x32fcf7(0x3de)+_0x2158d3+'\x0a';}}}),_0x2234a0[_0x1f7201(0x317)]();}async[a0_0x98996d(0x530)](_0x6f297d,_0x55d78f,_0x5ef1dd,_0xc1d440=null){const _0x2501f7=a0_0x98996d;if(_0x6f297d[_0x2501f7(0x299)])try{let _0x381406=_0x55d78f[_0x2501f7(0x328)]['remoteJid'][_0x2501f7(0x5d1)](/:\d{1,2}@/g,'@'),_0x24c301=_0x55d78f['key']['fromMe'],_0x379270=_0x381406[_0x2501f7(0x553)](_0x2501f7(0x27b)),_0x3de320=_0x55d78f['participant']?.[_0x2501f7(0x5d1)](/:\d{1,2}@/g,'@')||'',_0xfdc822=_0x55d78f[_0x2501f7(0x289)]?.[_0x2501f7(0x673)]||_0x55d78f['message_normalized']?.[_0x2501f7(0x27a)]||_0x55d78f[_0x2501f7(0x289)]?.[_0x2501f7(0x50c)]||_0x55d78f['message_normalized']?.['name']||'',_0x411abb={'_id':_0x55d78f[_0x2501f7(0x699)],'remoteJid':_0x24c301?this[_0x2501f7(0x78a)][_0x2501f7(0x3ef)]:_0x379270?_0x3de320:_0x381406,'pushName':_0x24c301?this[_0x2501f7(0x78a)]['profileName']||'Eu':_0x55d78f[_0x2501f7(0x5d8)],'text':_0xfdc822,'type':_0x55d78f[_0x2501f7(0x449)],'when':_0x55d78f['messageTimestamp']||Date[_0x2501f7(0x4a3)]()};_0xc1d440||(_0xc1d440=await this['repository']['chat'][_0x2501f7(0x218)]({'where':{'_id':_0x381406}},this[_0x2501f7(0x78a)][_0x2501f7(0x3ef)]));let _0x17e2e9=_0xc1d440?_0x24c301?_0xc1d440[_0x2501f7(0x4d7)]:(_0xc1d440[_0x2501f7(0x4d7)]||0x0)+0x1:_0x24c301?0x0:0x1,_0x3a4b19={'lastmsg':_0x55d78f[_0x2501f7(0x5ae)]||Date[_0x2501f7(0x4a3)](),'ephemeralExpiration':_0x55d78f['expiration'],'lastMessage':_0x411abb,'unreadcount':_0x17e2e9,..._0x24c301||_0x379270?{}:{'name':_0x55d78f['pushName']},..._0x379270?{'group':_0x379270}:{},...!_0x24c301&&!_0x379270&&_0x55d78f[_0x2501f7(0x1fa)]?{'imagechat':_0x55d78f[_0x2501f7(0x1fa)]}:{}};if(!_0x379270&&(!_0xc1d440?.['leadInfo']||!_0xc1d440[_0x2501f7(0x5b0)][_0x2501f7(0x16b)])&&_0x55d78f[_0x2501f7(0x5d8)]&&!_0x24c301&&(_0x3a4b19={..._0x3a4b19,'leadInfo.nome':_0x55d78f['pushName']}),_0xc1d440?.['leadInfo'][_0x2501f7(0x3c1)]||(_0x3a4b19={..._0x3a4b19,'leadInfo.etiquetas':[]}),_0xc1d440?.['leadInfo'][_0x2501f7(0x52b)]||(_0x3a4b19={..._0x3a4b19,'leadInfo.customFields':[]}),_0xc1d440?.[_0x2501f7(0x5b0)][_0x2501f7(0x6e6)]||(_0x3a4b19={..._0x3a4b19,'leadInfo.tags':[]}),_0xc1d440&&_0xc1d440?.[_0x2501f7(0x1cf)]){let _0x480217=await this[_0x2501f7(0x50b)]['label'][_0x2501f7(0x704)]({'where':{}},this[_0x2501f7(0x78a)][_0x2501f7(0x3ef)]),_0x42e283=new Set(_0x480217[_0x2501f7(0x384)](_0x1a700d=>_0x1a700d[_0x2501f7(0x699)])),_0x5a5ff8=(_0xc1d440[_0x2501f7(0x5b0)]?.[_0x2501f7(0x3c1)]||[])['filter'](_0x17fe41=>_0x42e283['has'](_0x17fe41));_0x3a4b19={..._0x3a4b19,'imported':!0x1,'leadInfo.etiquetas':_0x5a5ff8};for(let _0x531dfc of _0x5a5ff8)await this[_0x2501f7(0x4a6)](_0x531dfc,_0x381406);}if(!this[_0x2501f7(0x227)][_0x2501f7(0x24d)]['find'](_0x2c5689=>_0x2c5689[_0x2501f7(0x47f)]&&_0xfdc822[_0x2501f7(0x199)](_0x2c5689[_0x2501f7(0x47f)]))&&_0x5ef1dd==='MESSAGES_UPSERT'&&_0x24c301&&this[_0x2501f7(0x227)]?.['flowConfig'][_0x2501f7(0x7ca)]&&_0xfdc822[_0x2501f7(0x317)]()!==this['AutomateSystem']?.['flowConfig']['stopConversation'][_0x2501f7(0x317)]()){let _0x5aa1ef=(this['AutomateSystem']?.[_0x2501f7(0x1fc)]['stopWhenYouSendMsg']||0x0)*0xea60,_0x11fa52=Date['now']()+_0x5aa1ef;_0xc1d440?.['leadInfo']?.[_0x2501f7(0x436)]===0x0||(_0x3a4b19={..._0x3a4b19,'leadInfo.desativadoFluxoAte':_0x11fa52},this[_0x2501f7(0x669)]['verbose'](this[_0x2501f7(0x193)]+'\x20('+this[_0x2501f7(0x78a)][_0x2501f7(0x3ef)]+_0x2501f7(0x3fe)+_0x11fa52+'.'));}if(_0xfdc822[_0x2501f7(0x317)]()===this['AutomateSystem']?.[_0x2501f7(0x1fc)]['stopConversation']['trim']()){this[_0x2501f7(0x669)][_0x2501f7(0x2a0)](this[_0x2501f7(0x193)]+'\x20('+this['instance']['wuid']+_0x2501f7(0x18b)+_0xfdc822);let _0x149db8=Date[_0x2501f7(0x4a3)]();this[_0x2501f7(0x227)]?.[_0x2501f7(0x1fc)][_0x2501f7(0x69f)]===0x0?_0x3a4b19={..._0x3a4b19,'leadInfo.desativadoFluxoAte':_0x149db8+0x7591f6200}:_0x3a4b19={..._0x3a4b19,'leadInfo.desativadoFluxoAte':_0x149db8+this[_0x2501f7(0x227)]?.[_0x2501f7(0x1fc)][_0x2501f7(0x69f)]*0x3c*0x3e8};}if(_0xc1d440=await this[_0x2501f7(0x50b)][_0x2501f7(0x500)][_0x2501f7(0x1f8)]({'where':{'_id':_0x381406}},_0x3a4b19,this[_0x2501f7(0x78a)]['wuid'],{'new':!0x0,'upsert':!0x0}),_0xc1d440)U(this[_0x2501f7(0x193)],_0x2501f7(0x812),{'chat':_0xc1d440});else{this['logger'][_0x2501f7(0x5c5)](this[_0x2501f7(0x193)]+'\x20('+this['instance'][_0x2501f7(0x3ef)]+'):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat');return;}if(_0x24c301)return this[_0x2501f7(0x669)][_0x2501f7(0x2a0)](this[_0x2501f7(0x193)]+'\x20('+this['instance'][_0x2501f7(0x3ef)]+_0x2501f7(0x22d)),null;if(!this[_0x2501f7(0x227)]?.['flowConfig']['enabled'])return this[_0x2501f7(0x669)]['verbose'](this[_0x2501f7(0x193)]+'\x20('+this[_0x2501f7(0x78a)][_0x2501f7(0x3ef)]+_0x2501f7(0x4b6)),null;if(_0xc1d440[_0x2501f7(0x699)][_0x2501f7(0x199)](_0x2501f7(0x27b))&&this[_0x2501f7(0x227)]?.[_0x2501f7(0x1fc)][_0x2501f7(0x7fb)]===!0x0)return this[_0x2501f7(0x669)][_0x2501f7(0x2a0)](this[_0x2501f7(0x193)]+'\x20('+this[_0x2501f7(0x78a)][_0x2501f7(0x3ef)]+'):\x20Ignoring\x20group\x20messages.'),null;if(_0xc1d440[_0x2501f7(0x5b0)]){if(_0xc1d440['leadInfo'][_0x2501f7(0x436)]===0x0||_0xc1d440['leadInfo']['atendimentoAberto'])return this[_0x2501f7(0x669)][_0x2501f7(0x2a0)](this[_0x2501f7(0x193)]+'\x20('+this[_0x2501f7(0x78a)][_0x2501f7(0x3ef)]+_0x2501f7(0x2cc)+_0x381406+_0x2501f7(0x79f)),null;if(_0xc1d440[_0x2501f7(0x5b0)]['desativadoFluxoAte']>Date[_0x2501f7(0x4a3)]()&&!_0x55d78f[_0x2501f7(0x289)]?.[_0x2501f7(0x50c)])return this[_0x2501f7(0x669)][_0x2501f7(0x2a0)](this[_0x2501f7(0x193)]+'\x20('+this[_0x2501f7(0x78a)]['wuid']+_0x2501f7(0x562)+new Date(_0xc1d440[_0x2501f7(0x5b0)][_0x2501f7(0x436)])['toLocaleString']()+_0x2501f7(0x79f)),null;}this[_0x2501f7(0x669)][_0x2501f7(0x2a0)](this['instanceName']+'\x20('+this[_0x2501f7(0x78a)][_0x2501f7(0x3ef)]+_0x2501f7(0x794)),this['StartBot'](_0x55d78f,_0x5ef1dd);}catch(_0x280778){let _0x3de383=_0x2501f7(0x6f4),_0x216533=_0x280778 instanceof Error?_0x280778[_0x2501f7(0x334)]:typeof _0x280778==_0x2501f7(0x623)?JSON[_0x2501f7(0x5ab)](_0x280778):_0x280778,_0x4a9ad0=_0x3de383+':\x20'+_0x216533;return this[_0x2501f7(0x669)][_0x2501f7(0x5c5)](this[_0x2501f7(0x193)]+'\x20('+this[_0x2501f7(0x78a)][_0x2501f7(0x3ef)]+_0x2501f7(0x526)+_0x4a9ad0),null;}}async['upsertChats'](_0x4773e0,_0x58e077){const _0x1e73b7=a0_0x98996d;if(_0x58e077['ENABLED']){let _0x254d5c=_0x4773e0[_0x1e73b7(0x384)](async _0x2dd361=>{const _0xbfa56d=_0x1e73b7;try{let _0x4f8ac5={'_id':_0x2dd361[_0xbfa56d(0x699)],'owner':_0x2dd361['owner'],'lastcache':0x0};if(Object[_0xbfa56d(0x58d)](_0x2dd361)['forEach'](_0x2edb22=>{_0x2dd361[_0x2edb22]!==null&&(_0x4f8ac5[_0x2edb22]=_0x2dd361[_0x2edb22]);}),_0x4f8ac5[_0xbfa56d(0x460)]===null&&(_0x4f8ac5[_0xbfa56d(0x460)]=_0xbfa56d(0x3ca)),Object[_0xbfa56d(0x58d)](_0x4f8ac5)[_0xbfa56d(0x217)]>0x0)return await this[_0xbfa56d(0x50b)][_0xbfa56d(0x500)]['updateOne']({'where':{'_id':_0x2dd361[_0xbfa56d(0x699)]}},_0x4f8ac5,this[_0xbfa56d(0x78a)][_0xbfa56d(0x3ef)]);}catch(_0x543e52){let _0x2e1e84=_0xbfa56d(0x5b6)+_0x2dd361[_0xbfa56d(0x699)],_0x309ebe=_0x543e52 instanceof Error?_0x543e52[_0xbfa56d(0x334)]:typeof _0x543e52==_0xbfa56d(0x623)?JSON[_0xbfa56d(0x5ab)](_0x543e52):_0x543e52,_0xfbbf1c=_0x2e1e84+':\x20'+_0x309ebe;return this[_0xbfa56d(0x669)][_0xbfa56d(0x5c5)](this[_0xbfa56d(0x193)]+'\x20('+this[_0xbfa56d(0x78a)][_0xbfa56d(0x3ef)]+_0xbfa56d(0x526)+_0xfbbf1c),null;}}),_0x401ee8=(await Promise[_0x1e73b7(0x6aa)](_0x254d5c))['filter'](_0x4dc0fb=>_0x4dc0fb!==null)[_0x1e73b7(0x217)];this[_0x1e73b7(0x669)][_0x1e73b7(0x2a0)](this['instanceName']+'\x20('+this[_0x1e73b7(0x78a)][_0x1e73b7(0x3ef)]+'):\x20'+_0x401ee8+'\x20chats\x20de\x20'+this[_0x1e73b7(0x78a)][_0x1e73b7(0x3ef)]+_0x1e73b7(0x5f5));}}async[a0_0x98996d(0x173)](_0x35eaa0){const _0x2b10c7=a0_0x98996d;this[_0x2b10c7(0x669)]['verbose'](this['instanceName']+'\x20('+this[_0x2b10c7(0x78a)][_0x2b10c7(0x3ef)]+_0x2b10c7(0x2bc));let _0x238932={'readMessages':[{'remoteJid':_0x35eaa0[_0x2b10c7(0x2a6)][_0x2b10c7(0x708)][_0x2b10c7(0x328)][_0x2b10c7(0x5d9)],'fromMe':_0x35eaa0[_0x2b10c7(0x2a6)]['lastReceivedMessage'][_0x2b10c7(0x328)][_0x2b10c7(0x1a7)],'id':_0x35eaa0[_0x2b10c7(0x2a6)][_0x2b10c7(0x708)][_0x2b10c7(0x328)]['id']}]};await this['markMessageAsRead'](_0x238932);}async[a0_0x98996d(0x575)](_0x8694c4,_0x1f70aa){const _0x22198e=a0_0x98996d;try{let {key:_0x297b2f,message_normalized:_0x52532d}=_0x8694c4,_0x1db0c4=_0x52532d,_0x4d83eb=_0x52532d[_0x22198e(0x673)]||_0x52532d[_0x22198e(0x27a)]||_0x52532d[_0x22198e(0x50c)]||_0x52532d[_0x22198e(0x592)]||'',_0x578c58=_0x297b2f[_0x22198e(0x5d9)],_0x4cd118=null,_0x30c29b=this['AutomateSystem'][_0x22198e(0x24d)][_0x22198e(0x704)](_0x50bb4c=>_0x50bb4c[_0x22198e(0x47f)]&&_0x4d83eb['includes'](_0x50bb4c[_0x22198e(0x47f)]));if(_0x30c29b&&_0x1f70aa===_0x22198e(0x71a)){let _0x463079=await this[_0x22198e(0x50b)]['flow'][_0x22198e(0x218)]({'where':{'_id':_0x30c29b['_id']}});if(this[_0x22198e(0x669)][_0x22198e(0x2a0)](this[_0x22198e(0x193)]+'\x20('+this[_0x22198e(0x78a)][_0x22198e(0x3ef)]+'):\x20Condies\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.'),_0x463079&&_0x463079[_0x22198e(0x7bc)]?.['includes'](this[_0x22198e(0x78a)]['wuid']))_0x4cd118=await this[_0x22198e(0x2d8)](_0x463079,_0x297b2f,_0x1db0c4);else return this[_0x22198e(0x669)][_0x22198e(0x2a0)](this[_0x22198e(0x193)]+'\x20('+this[_0x22198e(0x78a)]['wuid']+_0x22198e(0x467)),null;}else this['logger'][_0x22198e(0x2a0)](this['instanceName']+'\x20('+this[_0x22198e(0x78a)][_0x22198e(0x3ef)]+'):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand');if(_0x4cd118=await this['findConversation'](_0x578c58,_0x1db0c4),_0x4cd118){this[_0x22198e(0x669)][_0x22198e(0x2a0)](this[_0x22198e(0x193)]+'\x20('+this[_0x22198e(0x78a)][_0x22198e(0x3ef)]+'):\x20Encontrou\x20conversa\x20no\x20startBot:\x20'),!_0x297b2f[_0x22198e(0x1a7)]&&_0x4cd118['readMessages']&&this['readMessageBot'](_0x4cd118);let _0x1b205a=await this[_0x22198e(0x285)](_0x4cd118);_0x1b205a&&await this[_0x22198e(0x388)](_0x4cd118,_0x1b205a);}}catch(_0x4ffe2d){this['logger'][_0x22198e(0x5c5)](this['instanceName']+'\x20('+this[_0x22198e(0x78a)][_0x22198e(0x3ef)]+_0x22198e(0x139)+(_0x4ffe2d instanceof Error?_0x4ffe2d[_0x22198e(0x334)]:JSON[_0x22198e(0x5ab)](_0x4ffe2d,null,0x2)));}}[a0_0x98996d(0x164)](_0x1e80c3,_0x448a4e='',_0x5ad68a={}){const _0x1153c8=a0_0x98996d;return typeof _0x1e80c3!=_0x1153c8(0x623)||_0x1e80c3===null?(_0x448a4e&&(_0x5ad68a[_0x448a4e]=_0x1e80c3),_0x5ad68a):(Object[_0x1153c8(0x736)](_0x1e80c3)[_0x1153c8(0x15b)](([_0x171c8e,_0xbeabda])=>{const _0x381078=_0x1153c8;let _0x46e2e2=_0x448a4e?_0x448a4e+'.'+_0x171c8e:'_'+_0x171c8e;Array[_0x381078(0x481)](_0xbeabda)?_0xbeabda[_0x381078(0x15b)]((_0xb7f63b,_0x1fbc7f)=>{this['flattenObject'](_0xb7f63b,_0x46e2e2+'['+_0x1fbc7f+']',_0x5ad68a);}):typeof _0xbeabda=='object'&&_0xbeabda!==null?this[_0x381078(0x164)](_0xbeabda,_0x46e2e2,_0x5ad68a):_0x5ad68a[_0x46e2e2]=String(_0xbeabda);}),_0x5ad68a);}[a0_0x98996d(0x77f)](_0x4a5818){const _0x314c09=a0_0x98996d;let _0x1a3d76={};for(let _0x41f570 of _0x4a5818)typeof _0x41f570[_0x314c09(0x592)]=='string'&&typeof _0x41f570[_0x314c09(0x7f4)]==_0x314c09(0x170)&&(_0x1a3d76[_0x41f570['name']]=_0x41f570[_0x314c09(0x7f4)]);return _0x1a3d76;}async[a0_0x98996d(0x285)](_0x2b0cdc){const _0x54e0bd=a0_0x98996d;if(!this[_0x54e0bd(0x227)]?.[_0x54e0bd(0x1fc)]['enabled']||_0x2b0cdc[_0x54e0bd(0x7ce)]!==_0x54e0bd(0x29d)&&_0x2b0cdc[_0x54e0bd(0x16e)]==='')return null;let _0x3702cc=_0x2b0cdc[_0x54e0bd(0x2a6)][_0x54e0bd(0x74c)]||_0x54e0bd(0x507);typeof _0x2b0cdc[_0x54e0bd(0x2a6)][_0x54e0bd(0x633)]>'u'&&(_0x2b0cdc[_0x54e0bd(0x2a6)][_0x54e0bd(0x633)]=!0x0);let _0x3f2706=_0x2b0cdc[_0x54e0bd(0x2a6)][_0x54e0bd(0x633)];this['logger'][_0x54e0bd(0x2a0)](this['instanceName']+'\x20('+this['instance'][_0x54e0bd(0x3ef)]+_0x54e0bd(0x2ec)+_0x3702cc+_0x54e0bd(0x1ac)+_0x3f2706);let _0x130c29=_0x3702cc==='start'?_0x2b0cdc[_0x54e0bd(0x740)]['find'](_0x118def=>_0x118def[_0x54e0bd(0x1b8)]===_0x54e0bd(0x507)):_0x2b0cdc[_0x54e0bd(0x740)][_0x54e0bd(0x704)](_0x3eb359=>_0x3eb359[_0x54e0bd(0x699)][_0x54e0bd(0x191)]()===_0x3702cc[_0x54e0bd(0x191)]());if(!_0x130c29)return this[_0x54e0bd(0x669)][_0x54e0bd(0x5c5)](this[_0x54e0bd(0x193)]+'\x20('+this[_0x54e0bd(0x78a)][_0x54e0bd(0x3ef)]+'):\x20currentBlock\x20\x20null.\x20No\x20foi\x20possvel\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20'+_0x3702cc),null;let _0x1cf3f2={'_pushName':_0x2b0cdc?.[_0x54e0bd(0x2a6)]?.[_0x54e0bd(0x708)]?.[_0x54e0bd(0x5d8)]||'','_sender':this[_0x54e0bd(0x78a)][_0x54e0bd(0x3ef)]||'',..._0x2b0cdc['chatLog']['realVariables']},_0x52f87a=null;if(_0x2b0cdc[_0x54e0bd(0x16e)]){let _0x462ffd=_0x2b0cdc[_0x54e0bd(0x2a6)][_0x54e0bd(0x708)]['vote'],_0x414bb0=_0x2b0cdc[_0x54e0bd(0x3dd)][_0x54e0bd(0x704)](_0xb0ffa5=>_0xb0ffa5[_0x54e0bd(0x755)]===_0x462ffd);if(_0x414bb0){let _0x4878b1=_0x414bb0[_0x54e0bd(0x239)];if(_0x52f87a=_0x2b0cdc['blocks'][_0x54e0bd(0x704)](_0x1b0c70=>_0x1b0c70[_0x54e0bd(0x4ae)]===_0x4878b1&&_0x1b0c70[_0x54e0bd(0x2fd)]===0x1),_0x130c29[_0x54e0bd(0x2f6)]['pollOnReplyDelete']){let _0x54aee5={'id':_0x2b0cdc[_0x54e0bd(0x16e)],'remoteJid':_0x2b0cdc[_0x54e0bd(0x5d9)],'fromMe':!0x0};await this[_0x54e0bd(0x65c)](_0x54aee5);}if(_0x130c29[_0x54e0bd(0x2f6)]['pollOnReplyDelete']&&_0x130c29[_0x54e0bd(0x2f6)][_0x54e0bd(0x11e)]&&_0x130c29['uazapi'][_0x54e0bd(0x364)]===_0x54e0bd(0x53a)){let _0x1fa362={'number':_0x2b0cdc[_0x54e0bd(0x5d9)],'options':{'delay':0x0},'textMessage':{'text':_0x54e0bd(0x121)+_0x2b0cdc[_0x54e0bd(0x539)]+'\x0a*Voc\x20respondeu*:\x0a'+_0x462ffd}};await this[_0x54e0bd(0x6d4)](_0x1fa362);}_0x2b0cdc[_0x54e0bd(0x7ce)]=_0x54e0bd(0x29d),_0x2b0cdc[_0x54e0bd(0x16e)]='',_0x2b0cdc['waitingMenu_text']='',_0x2b0cdc[_0x54e0bd(0x3dd)]=[];}else{this['logger'][_0x54e0bd(0x2a0)](this[_0x54e0bd(0x193)]+'\x20('+this[_0x54e0bd(0x78a)]['wuid']+'):\x20no\x20\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um');let _0x3e3f16={'activatedCount':_0x2b0cdc[_0x54e0bd(0x2a6)]['blockLogs'][_0x54e0bd(0x29b)](_0x1795da=>String(_0x1795da[_0x54e0bd(0x4d3)])===String(_0x3702cc))[_0x54e0bd(0x217)],'moreLogs':[_0x54e0bd(0x630)]};if(_0x130c29[_0x54e0bd(0x2f6)][_0x54e0bd(0x240)]){let _0x44a1be={'number':_0x2b0cdc[_0x54e0bd(0x5d9)],'options':{'delay':0x0},'textMessage':{'text':_0x130c29['uazapi'][_0x54e0bd(0x240)]}};await this[_0x54e0bd(0x6d4)](_0x44a1be);}if(_0x130c29[_0x54e0bd(0x268)]!==void 0x0&&_0x3e3f16[_0x54e0bd(0x5b1)]>=_0x130c29[_0x54e0bd(0x268)]){let _0x164384=Date['now'](),_0x56b3ae=_0x130c29[_0x54e0bd(0x6a3)]??0xa;isNaN(_0x56b3ae)&&(_0x56b3ae=0xa);let _0xa5f780=_0x164384+_0x56b3ae*0x3c*0x3e8;_0x3e3f16[_0x54e0bd(0x6e9)]=_0xa5f780,_0x3e3f16[_0x54e0bd(0x55f)][_0x54e0bd(0x69d)](_0x54e0bd(0x3e1)),this[_0x54e0bd(0x523)](_0x2b0cdc,_0xa5f780),_0x2b0cdc[_0x54e0bd(0x16e)]='',_0x2b0cdc[_0x54e0bd(0x539)]='',_0x2b0cdc['waitingMenu_replyOptions']=[];}return this[_0x54e0bd(0x65f)](_0x2b0cdc,_0x130c29,_0x3e3f16,!0x0),null;}}if(_0x3f2706&&_0x130c29['next_groupId']&&!_0x2b0cdc[_0x54e0bd(0x16e)]){let _0x3fa881=_0x2b0cdc[_0x54e0bd(0x740)]['filter'](_0x4c1a13=>_0x4c1a13['groupId'][_0x54e0bd(0x191)]()===_0x130c29['next_groupId'][_0x54e0bd(0x191)]())['sort']((_0x30cb62,_0x47b5e8)=>_0x30cb62['order']-_0x47b5e8[_0x54e0bd(0x2fd)]);_0x3fa881['length']>0x0&&(_0x52f87a=_0x3fa881[0x0]);}if(!_0x52f87a){let _0x59b686=_0x130c29[_0x54e0bd(0x4ae)],_0x829f66=_0x2b0cdc[_0x54e0bd(0x740)][_0x54e0bd(0x29b)](_0x12fcf7=>_0x12fcf7[_0x54e0bd(0x4ae)]===_0x59b686&&_0x12fcf7['order']>_0x130c29[_0x54e0bd(0x2fd)])[_0x54e0bd(0x3ac)]((_0x4ef999,_0x372823)=>_0x4ef999[_0x54e0bd(0x2fd)]-_0x372823['order']);_0x829f66[_0x54e0bd(0x217)]>0x0&&(_0x52f87a=_0x829f66[0x0]);}if(!_0x52f87a)return _0x2b0cdc[_0x54e0bd(0x7ce)]=_0x54e0bd(0x76e),null;_0x2b0cdc[_0x54e0bd(0x2a6)][_0x54e0bd(0x56f)]=_0x1cf3f2;let _0x30c6a5=JSON[_0x54e0bd(0x184)](JSON[_0x54e0bd(0x5ab)](_0x52f87a));return this[_0x54e0bd(0x7fc)](_0x30c6a5,_0x2b0cdc['chatLog'][_0x54e0bd(0x56f)]),_0x2b0cdc['chatLog'][_0x54e0bd(0x74c)]=_0x30c6a5['_id'],_0x2b0cdc[_0x54e0bd(0x2a6)]['lastCondition']=!0x0,_0x30c6a5;}['replaceVariables'](_0xcd63cc,_0x5e45c5){const _0x4133e8=a0_0x98996d;return _0xcd63cc[_0x4133e8(0x5d1)](/\{\{([^}]+)\}\}/g,(_0x80be79,_0x13eacb)=>_0x5e45c5[_0x13eacb]||'');}[a0_0x98996d(0x7fc)](_0x48eb3e,_0x47e6e9){const _0x482316=a0_0x98996d;for(let _0x11d8d1 in _0x48eb3e)typeof _0x48eb3e[_0x11d8d1]=='string'?_0x48eb3e[_0x11d8d1]=this[_0x482316(0x202)](_0x48eb3e[_0x11d8d1],_0x47e6e9):typeof _0x48eb3e[_0x11d8d1]==_0x482316(0x623)&&this[_0x482316(0x7fc)](_0x48eb3e[_0x11d8d1],_0x47e6e9);}async[a0_0x98996d(0x2db)](_0x30d80e,_0x33bc15){const _0x4c8153=a0_0x98996d;let _0x1b49b0=_0x33bc15['_id'];if(_0x30d80e[_0x4c8153(0x2a6)]&&_0x30d80e[_0x4c8153(0x2a6)][_0x4c8153(0x4b3)]){let _0x329c14=_0x30d80e[_0x4c8153(0x2a6)][_0x4c8153(0x4b3)]['filter'](_0x3a65ad=>String(_0x3a65ad['blockId'])===String(_0x1b49b0))['pop']();if(_0x329c14&&_0x329c14[_0x4c8153(0x5c5)]&&_0x33bc15['stopIfLastReturnedError'])return _0x30d80e[_0x4c8153(0x7ce)]=_0x4c8153(0x76e),await this[_0x4c8153(0x810)](_0x30d80e),null;}if(_0x33bc15[_0x4c8153(0x1b8)]===_0x4c8153(0x2f6)&&_0x33bc15[_0x4c8153(0x2f6)][_0x4c8153(0x2b2)]==='sendPoll'&&_0x30d80e[_0x4c8153(0x16e)])return _0x30d80e[_0x4c8153(0x2a6)][_0x4c8153(0x74c)]=_0x1b49b0,await this[_0x4c8153(0x810)](_0x30d80e),null;let _0x422be0=await this[_0x4c8153(0x285)](_0x30d80e);if(_0x30d80e[_0x4c8153(0x2a6)]&&_0x30d80e[_0x4c8153(0x2a6)]['blockLogs']){let _0x5f0fdc=_0x30d80e[_0x4c8153(0x2a6)][_0x4c8153(0x4b3)][_0x4c8153(0x29b)](_0x594e11=>String(_0x594e11[_0x4c8153(0x4d3)])===String(_0x1b49b0))[_0x4c8153(0x217)];if(_0x33bc15[_0x4c8153(0x268)]!==void 0x0&&_0x5f0fdc>=_0x33bc15[_0x4c8153(0x268)]){let _0x3294df=Date[_0x4c8153(0x4a3)](),_0x440413=_0x33bc15[_0x4c8153(0x6a3)]??0xa;isNaN(_0x440413)&&(_0x440413=0xa);let _0x4d930f=_0x3294df+_0x440413*0x3c*0x3e8,_0xa0215c={'newStoppedUntil':_0x4d930f};return this[_0x4c8153(0x523)](_0x30d80e,_0x4d930f),this[_0x4c8153(0x65f)](_0x30d80e,_0x33bc15,_0xa0215c,!0x0),null;}}_0x422be0&&_0x422be0[_0x4c8153(0x1b8)]!=='save'&&await this[_0x4c8153(0x388)](_0x30d80e,_0x422be0),_0x422be0||await this['saveConversationToDatabase'](_0x30d80e),_0x422be0&&_0x422be0[_0x4c8153(0x1b8)]===_0x4c8153(0x84a)&&(_0x30d80e[_0x4c8153(0x2a6)][_0x4c8153(0x74c)]=_0x1b49b0,await this[_0x4c8153(0x810)](_0x30d80e));}async[a0_0x98996d(0x388)](_0x306704,_0x5ae4ba){const _0x215c37=a0_0x98996d;try{let _0x19e90a=_0x5ae4ba[_0x215c37(0x1b8)];this[_0x215c37(0x669)]['verbose'](this[_0x215c37(0x193)]+'\x20('+this[_0x215c37(0x78a)][_0x215c37(0x3ef)]+_0x215c37(0x687)+_0x19e90a);let _0x27abf7={'uazapi':()=>this[_0x215c37(0x2d3)](_0x306704,_0x5ae4ba),'save':()=>this[_0x215c37(0x681)](_0x306704,_0x5ae4ba),'stop':()=>this[_0x215c37(0x427)](_0x306704,_0x5ae4ba),'condition':()=>this[_0x215c37(0x195)](_0x306704,_0x5ae4ba),'varedit':()=>this[_0x215c37(0x849)](_0x306704,_0x5ae4ba),'apirequest':()=>this[_0x215c37(0x4c7)](_0x306704,_0x5ae4ba),'goToFlow':()=>this[_0x215c37(0x583)](_0x306704,_0x5ae4ba),'scheduleFlow':()=>this['processScheduleFlow'](_0x306704,_0x5ae4ba),'awaitSeconds':()=>this[_0x215c37(0x286)](_0x306704,_0x5ae4ba),'clearVariables':()=>this[_0x215c37(0x33e)](_0x306704,_0x5ae4ba)}[_0x19e90a];_0x27abf7&&await _0x27abf7();}catch(_0x75b58e){this[_0x215c37(0x669)][_0x215c37(0x5c5)](this[_0x215c37(0x193)]+'\x20('+this['instance'][_0x215c37(0x3ef)]+_0x215c37(0x739)+(_0x75b58e instanceof Error?_0x75b58e[_0x215c37(0x334)]:JSON[_0x215c37(0x5ab)](_0x75b58e,null,0x2)));}}async[a0_0x98996d(0x286)](_0x5b6e48,_0x4bfeab){const _0x1e79c7=a0_0x98996d;if(this[_0x1e79c7(0x669)][_0x1e79c7(0x2a0)](this[_0x1e79c7(0x193)]+'\x20('+this[_0x1e79c7(0x78a)][_0x1e79c7(0x3ef)]+_0x1e79c7(0x4a9)),!_0x5b6e48||!_0x4bfeab)return this[_0x1e79c7(0x669)]['error'](this['instanceName']+'\x20('+this[_0x1e79c7(0x78a)][_0x1e79c7(0x3ef)]+_0x1e79c7(0x5fd)),null;let _0x341bd4=+_0x4bfeab[_0x1e79c7(0x165)];isNaN(_0x341bd4)&&(_0x341bd4=0x0),_0x341bd4=Math[_0x1e79c7(0x454)](_0x341bd4,0x3c),await(0x0,w[_0x1e79c7(0x260)])(_0x341bd4*0x3e8);let _0x5484c4={'moreLogs':['Pausado\x20por\x20'+_0x341bd4+'\x20segundos']};return await this[_0x1e79c7(0x65f)](_0x5b6e48,_0x4bfeab,_0x5484c4),_0x341bd4;}async[a0_0x98996d(0x33e)](_0x375b67,_0xdb4e44){const _0x41fd40=a0_0x98996d;if(this[_0x41fd40(0x669)][_0x41fd40(0x2a0)](this[_0x41fd40(0x193)]+'\x20('+this[_0x41fd40(0x78a)]['wuid']+_0x41fd40(0x70e)),!_0x375b67||!_0xdb4e44)return this[_0x41fd40(0x669)]['error'](this[_0x41fd40(0x193)]+'\x20('+this['instance']['wuid']+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;let _0x3f76cb=[];if(_0xdb4e44[_0x41fd40(0x65e)][_0x41fd40(0x317)]()==='[all]'){let _0x16339f=[_0x41fd40(0x5e8),_0x41fd40(0x1bf),'_error',_0x41fd40(0x841),_0x41fd40(0x5b9),'_id',_0x41fd40(0x332)];_0x3f76cb=Object[_0x41fd40(0x58d)](_0x375b67[_0x41fd40(0x2a6)]['realVariables'])[_0x41fd40(0x29b)](_0x111175=>_0x111175[_0x41fd40(0x366)]('_')&&!_0x16339f[_0x41fd40(0x199)](_0x111175));}else _0x3f76cb=_0xdb4e44[_0x41fd40(0x65e)][_0x41fd40(0x4fb)]('|')['map'](_0x1cb4a4=>(_0x1cb4a4=_0x1cb4a4['replace'](/[{}]/g,'')['trim'](),_0x1cb4a4[_0x41fd40(0x366)]('_')?_0x1cb4a4:'_'+_0x1cb4a4));let _0x5cb5a3=[];_0x3f76cb[_0x41fd40(0x15b)](_0x326c11=>{const _0x2ded48=_0x41fd40;_0x326c11 in _0x375b67[_0x2ded48(0x2a6)][_0x2ded48(0x56f)]&&(delete _0x375b67[_0x2ded48(0x2a6)][_0x2ded48(0x56f)][_0x326c11],_0x5cb5a3[_0x2ded48(0x69d)](_0x326c11));}),_0x5cb5a3['length']>0x0?this[_0x41fd40(0x669)][_0x41fd40(0x2a0)](this[_0x41fd40(0x193)]+'\x20('+this[_0x41fd40(0x78a)]['wuid']+'):\x20Encontradas\x20e\x20removidas\x20as\x20variveis:\x20'+_0x5cb5a3[_0x41fd40(0x38e)](',\x20')):this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x41fd40(0x78a)][_0x41fd40(0x3ef)]+_0x41fd40(0x49b));let _0x5d5d0e={'moreLogs':[_0x41fd40(0x6b5)+_0x5cb5a3['join'](',\x20')]};return await this['updateConversation'](_0x375b67,_0xdb4e44,_0x5d5d0e),null;}async[a0_0x98996d(0x313)](_0x3339bd,_0x33043e){const _0x484ec9=a0_0x98996d;if(this[_0x484ec9(0x669)][_0x484ec9(0x2a0)](this[_0x484ec9(0x193)]+'\x20('+this[_0x484ec9(0x78a)][_0x484ec9(0x3ef)]+_0x484ec9(0x632)),!_0x3339bd||!_0x33043e)return this[_0x484ec9(0x669)][_0x484ec9(0x5c5)](this['instanceName']+'\x20('+this[_0x484ec9(0x78a)]['wuid']+_0x484ec9(0x5fd)),null;let _0x301e05=_0x3339bd['remoteJid'];_0x33043e[_0x484ec9(0x34e)][_0x484ec9(0x5d9)]&&_0x33043e[_0x484ec9(0x34e)][_0x484ec9(0x5d9)]['trim']()!==''&&(_0x301e05=_0x33043e[_0x484ec9(0x2f6)]['remoteJid']['trim']());let _0x41a95d=_0x33043e[_0x484ec9(0x34e)][_0x484ec9(0x63e)]*0xea60,_0x3daadd=Date[_0x484ec9(0x4a3)]()+_0x41a95d,_0x442d42={'status':_0x484ec9(0x729),'info':_0x484ec9(0x290)+_0x3339bd['name'],'remoteJids':[_0x301e05],'when':_0x3daadd,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x484ec9(0x1e0),'flowName':_0x33043e['scheduleFlow'][_0x484ec9(0x4a5)]};this[_0x484ec9(0x433)](_0x442d42);let _0x52f809=await this[_0x484ec9(0x285)](_0x3339bd);_0x52f809&&await this[_0x484ec9(0x388)](_0x3339bd,_0x52f809);}async[a0_0x98996d(0x583)](_0x53fbf5,_0x504d6a){const _0x149541=a0_0x98996d;if(this[_0x149541(0x669)][_0x149541(0x2a0)](this[_0x149541(0x193)]+'\x20('+this[_0x149541(0x78a)][_0x149541(0x3ef)]+_0x149541(0x808)),!_0x53fbf5||!_0x504d6a)return this[_0x149541(0x669)][_0x149541(0x5c5)](this[_0x149541(0x193)]+'\x20('+this[_0x149541(0x78a)][_0x149541(0x3ef)]+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;await this[_0x149541(0x65f)](_0x53fbf5,_0x504d6a,{},!0x0,!0x0);let _0x53f2bc=_0x504d6a[_0x149541(0x178)];_0x53fbf5=await this[_0x149541(0x338)](_0x53f2bc,_0x53fbf5[_0x149541(0x5d9)],_0x53fbf5[_0x149541(0x2a6)][_0x149541(0x56f)]);let _0x575a3c=await this[_0x149541(0x285)](_0x53fbf5);_0x575a3c&&await this[_0x149541(0x388)](_0x53fbf5,_0x575a3c);}async['createConversationforgoToFlow'](_0x5f37e3,_0x171801,_0x5d0b0e){const _0x5c7186=a0_0x98996d;this['logger'][_0x5c7186(0x2a0)](this['instanceName']+'\x20('+this[_0x5c7186(0x78a)][_0x5c7186(0x3ef)]+'):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]');try{let _0x5c2dc1=this[_0x5c7186(0x227)][_0x5c7186(0x24d)][_0x5c7186(0x704)](_0x2f6c55=>_0x2f6c55[_0x5c7186(0x699)]===_0x5f37e3);_0x5c2dc1||this[_0x5c7186(0x669)][_0x5c7186(0x5c5)](this['instanceName']+'\x20('+this[_0x5c7186(0x78a)][_0x5c7186(0x3ef)]+_0x5c7186(0x6bd)+_0x5f37e3+'\x27\x20no\x20encontrado\x20na\x20memria');let _0x1b7925=await this['repository'][_0x5c7186(0x1e0)]['findOne']({'where':{'_id':_0x5c2dc1[_0x5c7186(0x699)]}});if(!_0x1b7925||!_0x1b7925[_0x5c7186(0x7bc)]?.['includes'](this['instance'][_0x5c7186(0x3ef)]))throw this['logger'][_0x5c7186(0x5c5)](this[_0x5c7186(0x193)]+'\x20('+this[_0x5c7186(0x78a)][_0x5c7186(0x3ef)]+_0x5c7186(0x6bd)+_0x5f37e3+_0x5c7186(0x558)),new m(_0x5c7186(0x302)+_0x5f37e3+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');let _0x230dc9=require(_0x5c7186(0x73c))['ObjectId'],_0x137e37=Date[_0x5c7186(0x4a3)](),_0x46ad51=_0x5c7186(0x507),_0x265f7d={},_0x4cce5e={},_0x538b22=this[_0x5c7186(0x227)][_0x5c7186(0x24d)][_0x5c7186(0x704)](_0x347d9a=>_0x347d9a['_id']===_0x1b7925[_0x5c7186(0x699)]?.['toString']()),_0x5fd982=_0x538b22?.[_0x5c7186(0x3b2)]??_0x1b7925[_0x5c7186(0x3b2)]??0x0,_0x63f477=_0x538b22?.[_0x5c7186(0x183)]??_0x1b7925['readMessages']??!0x1,_0x45a203={'flowId':_0x5c2dc1['_id'],'readMessages':_0x5c2dc1['readMessages'],..._0x1b7925,'chatLog':null},_0x20f4b3={'lastReceivedMessage':_0x265f7d,'lastSendMessage':_0x4cce5e,'lastBlockId':_0x46ad51,'lastCondition':!0x0,'realVariables':_0x5d0b0e};_0x45a203[_0x5c7186(0x2a6)]=_0x20f4b3,_0x45a203['chatLog']['realVariables']={..._0x5d0b0e},delete _0x45a203[_0x5c7186(0x699)],_0x45a203[_0x5c7186(0x699)]=new _0x230dc9(),_0x45a203[_0x5c7186(0x439)]=_0x137e37,_0x45a203[_0x5c7186(0x7ce)]=_0x5c7186(0x29d),_0x45a203[_0x5c7186(0x5d9)]=_0x171801,_0x45a203[_0x5c7186(0x3b2)]=_0x5fd982,_0x45a203[_0x5c7186(0x183)]=_0x63f477;let _0x449854=await this[_0x5c7186(0x50b)]['flowConversation'][_0x5c7186(0x1f8)](_0x45a203[_0x5c7186(0x699)],_0x45a203,this[_0x5c7186(0x78a)][_0x5c7186(0x3ef)]);return this['logger']['verbose'](this[_0x5c7186(0x193)]+'\x20('+this['instance'][_0x5c7186(0x3ef)]+_0x5c7186(0x804)),_0x449854?_0x45a203:null;}catch(_0x21f041){let _0x2199a4=_0x5c7186(0x56c),_0x156411=_0x21f041 instanceof Error?_0x21f041[_0x5c7186(0x334)]:typeof _0x21f041==_0x5c7186(0x623)?JSON[_0x5c7186(0x5ab)](_0x21f041):_0x21f041,_0x3e2864=_0x2199a4+':\x20'+_0x156411;throw this[_0x5c7186(0x669)][_0x5c7186(0x5c5)](this[_0x5c7186(0x193)]+'\x20('+this[_0x5c7186(0x78a)][_0x5c7186(0x3ef)]+_0x5c7186(0x526)+_0x3e2864),new m(_0x3e2864);}}async[a0_0x98996d(0x4c7)](_0x2a218f,_0x283242){const _0x43438d=a0_0x98996d;let _0x46e1c0,_0x863000;try{let _0x32371e=_0x283242[_0x43438d(0x786)];if(!_0x32371e||!_0x32371e[_0x43438d(0x66c)]||!_0x32371e[_0x43438d(0x30c)])throw new Error(_0x43438d(0x5de));let _0xa0bb6b;(['https://api.openai.com/v1/audio/speech',_0x43438d(0x4f7),'https://api.elevenlabs.io/v1/text-to-speech/'][_0x43438d(0x6f9)](_0x4f4cf4=>_0x32371e[_0x43438d(0x66c)]['includes'](_0x4f4cf4))||_0x32371e[_0x43438d(0x637)])&&(_0xa0bb6b=_0x43438d(0x6c1));let _0x1a5152='\u205f',_0x493b7d;try{_0x493b7d=JSON[_0x43438d(0x184)](_0x32371e[_0x43438d(0x77a)][_0x43438d(0x5d1)](new RegExp(_0x1a5152,'g'),''));}catch(_0x39d142){throw _0x39d142;}let _0x4a8902={'method':_0x32371e['method'],'url':_0x32371e[_0x43438d(0x66c)],'headers':_0x32371e[_0x43438d(0x4f9)]||{},..._0x32371e[_0x43438d(0x30c)][_0x43438d(0x4b1)]()!==_0x43438d(0x263)&&_0x32371e['bodyString']?{'data':JSON['parse'](_0x32371e[_0x43438d(0x77a)][_0x43438d(0x5d1)](new RegExp(_0x1a5152,'g'),''))}:{},..._0xa0bb6b&&{'responseType':_0xa0bb6b}},_0x26ed4e=await(0x0,Q[_0x43438d(0x36a)])(_0x4a8902),_0x1b1732=_0x26ed4e['headers']['content-type'];if(_0x1b1732&&_0x1b1732[_0x43438d(0x199)](_0x43438d(0x2df))||typeof _0x26ed4e[_0x43438d(0x222)]==_0x43438d(0x170)){if(typeof _0x26ed4e[_0x43438d(0x222)]==_0x43438d(0x170)){let _0x34fa43=_0x26ed4e[_0x43438d(0x222)]['replace'](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')['trim']();try{_0x46e1c0=JSON['parse'](_0x34fa43);}catch(_0x1a0a4e){this[_0x43438d(0x669)][_0x43438d(0x5c5)](_0x43438d(0x21c)+_0x1a0a4e[_0x43438d(0x334)]),_0x46e1c0={'_apiResponse':_0x26ed4e['data']};}}else _0x46e1c0=_0x26ed4e[_0x43438d(0x222)];let _0x5acf28=_0x2a218f[_0x43438d(0x2a6)][_0x43438d(0x56f)],_0x5d7567=this[_0x43438d(0x164)](_0x46e1c0);return Object[_0x43438d(0x382)](_0x5acf28,_0x5d7567),_0x2a218f[_0x43438d(0x2a6)][_0x43438d(0x56f)]=_0x5acf28,_0x863000={'error':!0x1,'apiResponse':_0x46e1c0},this[_0x43438d(0x65f)](_0x2a218f,_0x283242,_0x863000),_0x46e1c0;}if(_0x1b1732&&(_0x1b1732['includes'](_0x43438d(0x453))||_0x1b1732['includes'](_0x43438d(0x6cc))||_0x1b1732['includes'](_0x43438d(0x767))||_0x1b1732[_0x43438d(0x199)]('video'))){this[_0x43438d(0x669)][_0x43438d(0x2a0)](this['instanceName']+'\x20('+this['instance'][_0x43438d(0x3ef)]+'):\x20Tipo\x20de\x20contedo\x20identificado:\x20'+_0x1b1732);let _0xc0ed86=(0x0,Y['v4'])(),_0x38bbdd='',_0x46e6ae={'image/jpeg':_0x43438d(0x4f5),'image/png':_0x43438d(0x809),'image/gif':_0x43438d(0x2eb),'image/webp':_0x43438d(0x360),'image/svg+xml':_0x43438d(0x7c6),'audio/mpeg':_0x43438d(0x2e7),'audio/ogg':_0x43438d(0x4dd),'audio/wav':'.wav','video/mp4':_0x43438d(0x4be),'video/webm':_0x43438d(0x374),'video/ogg':_0x43438d(0x568),'text/plain':_0x43438d(0x234),'application/pdf':'.pdf','application/msword':'.doc','application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x43438d(0x6e4),'application/vnd.ms-excel':_0x43438d(0x1a5),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':'.xlsx','application/vnd.ms-powerpoint':_0x43438d(0x5cc),'application/vnd.openxmlformats-officedocument.presentationml.presentation':'.pptx'};_0x46e6ae[_0x1b1732]?(_0x38bbdd=_0x46e6ae[_0x1b1732],this[_0x43438d(0x669)][_0x43438d(0x2a0)](this[_0x43438d(0x193)]+'\x20('+this[_0x43438d(0x78a)][_0x43438d(0x3ef)]+_0x43438d(0x6ed)+_0x38bbdd)):(_0x38bbdd=_0x43438d(0x155),this[_0x43438d(0x669)][_0x43438d(0x2a0)](this[_0x43438d(0x193)]+'\x20('+this[_0x43438d(0x78a)][_0x43438d(0x3ef)]+'):\x20Usando\x20extenso\x20padro:\x20'+_0x38bbdd)),_0xc0ed86+=_0x38bbdd,this[_0x43438d(0x669)]['verbose'](this['instanceName']+'\x20('+this[_0x43438d(0x78a)][_0x43438d(0x3ef)]+_0x43438d(0x60a)+_0xc0ed86);let _0x2629f2=this[_0x43438d(0x63a)][_0x43438d(0x651)](_0x43438d(0x771))[_0x43438d(0x11d)];if(!_0x2629f2){let _0x54679f=this[_0x43438d(0x63a)][_0x43438d(0x651)]('SSL_CONF');_0x2629f2=_0x43438d(0x675)+(_0x54679f&&_0x54679f['FULLCHAIN'][_0x43438d(0x4fb)]('/')[0x4]);}let _0x502149=Buffer[_0x43438d(0x54e)](_0x26ed4e[_0x43438d(0x222)]);await this[_0x43438d(0x2f0)](_0x502149,_0xc0ed86);let _0x8a3628='/media/'+_0xc0ed86;_0x8a3628=''+_0x2629f2+_0x8a3628,_0x46e1c0={'fileUrl':_0x8a3628},_0x2a218f[_0x43438d(0x2a6)]['realVariables']['fileUrl']=_0x8a3628;let _0x310e48=_0x2a218f[_0x43438d(0x2a6)][_0x43438d(0x56f)],_0x58bf92=this[_0x43438d(0x164)](_0x46e1c0);return Object['assign'](_0x310e48,_0x58bf92),_0x2a218f[_0x43438d(0x2a6)][_0x43438d(0x56f)]=_0x310e48,_0x863000={'error':!0x1,'apiResponse':{'fileUrl':_0x8a3628}},this[_0x43438d(0x65f)](_0x2a218f,_0x283242,_0x863000),_0x46e1c0;}}catch(_0x122dec){this['logger'][_0x43438d(0x5c5)](_0x43438d(0x4e6)+_0x122dec[_0x43438d(0x334)]),_0x122dec[_0x43438d(0x3bf)]&&(_0x46e1c0=_0x122dec[_0x43438d(0x3bf)][_0x43438d(0x222)]);let _0x10ded0=_0x2a218f[_0x43438d(0x2a6)]['realVariables'],_0x295b15=this['flattenObject'](_0x46e1c0);return Object[_0x43438d(0x382)](_0x10ded0,_0x295b15),_0x2a218f[_0x43438d(0x2a6)]['realVariables']=_0x10ded0,_0x863000={'error':!0x0,'errorLog':_0x122dec[_0x43438d(0x191)](),'apiResponse':_0x46e1c0},this[_0x43438d(0x65f)](_0x2a218f,_0x283242,_0x863000),{'success':!0x1};}}[a0_0x98996d(0x5ac)](_0x285e1e,_0x2e4e42){const _0x34d9e3=a0_0x98996d;let _0x1cde9f=_0x13c6be=>{const _0x160b39=a0_0x431f;let _0xf6e76f=_0x13c6be[_0x160b39(0x5d1)](/[^0-9.,-]/g,'')[_0x160b39(0x5d1)](',','.'),_0x1e700e=parseFloat(_0xf6e76f);return isNaN(_0x1e700e)?null:_0x1e700e;},_0x1806f1=_0x2e4e42[_0x34d9e3(0x72a)],_0x15c0c3=_0x2e4e42['secondValue'];typeof _0x1806f1==_0x34d9e3(0x170)&&(_0x1806f1=this[_0x34d9e3(0x202)](_0x1806f1,_0x285e1e['chatLog']['realVariables'])??''),typeof _0x15c0c3==_0x34d9e3(0x170)&&(_0x15c0c3=this[_0x34d9e3(0x202)](_0x15c0c3,_0x285e1e['chatLog'][_0x34d9e3(0x56f)])??'');let _0x49880f=null;if(!_0x2e4e42[_0x34d9e3(0x245)])return null;switch(this[_0x34d9e3(0x669)]['verbose'](this[_0x34d9e3(0x193)]+'\x20('+this[_0x34d9e3(0x78a)]['wuid']+_0x34d9e3(0x7e2)+_0x1806f1),this[_0x34d9e3(0x669)][_0x34d9e3(0x2a0)](this['instanceName']+'\x20('+this[_0x34d9e3(0x78a)]['wuid']+'):\x20newSecondValue\x20aps\x20replaceVariables:'+_0x15c0c3),_0x2e4e42[_0x34d9e3(0x245)]){case'+':case'-':case'*':case'/':let _0x125195=_0x1cde9f(_0x1806f1||'0'),_0x378a58=_0x1cde9f(_0x15c0c3||'0');if(_0x125195===null)return null;switch(_0x2e4e42['editOperator']){case'+':_0x49880f=_0x125195+(_0x378a58??0x0);break;case'-':_0x49880f=_0x125195-(_0x378a58??0x0);break;case'*':_0x49880f=_0x125195*(_0x378a58??0x1);break;case'/':_0x378a58!==0x0&&(_0x49880f=_0x125195/(_0x378a58??0x1));break;}break;case'findAndReplace':case'findAndReplaceRegex':let _0x3d5878=_0x15c0c3,_0x693d42=_0x2e4e42[_0x34d9e3(0x1d2)];if(typeof _0x693d42==_0x34d9e3(0x170)&&(_0x693d42=this[_0x34d9e3(0x202)](_0x693d42,_0x285e1e[_0x34d9e3(0x2a6)][_0x34d9e3(0x56f)])??''),_0x3d5878&&_0x693d42!==void 0x0){let _0x321700=_0x2e4e42['editOperator']===_0x34d9e3(0x3e4)?new RegExp(_0x3d5878[_0x34d9e3(0x5d1)](/[-\/\\^$*+?.()|[\]{}]/g,_0x34d9e3(0x373)),'g'):new RegExp(_0x3d5878,'g');_0x49880f=_0x1806f1[_0x34d9e3(0x5d1)](_0x321700,_0x693d42);}else console[_0x34d9e3(0x7e8)]('Valor\x20de\x20find\x20ou\x20replace\x20ausente');break;case _0x34d9e3(0x561):_0x49880f=_0x15c0c3;break;case _0x34d9e3(0x821):let _0x398938=_0x1806f1[_0x34d9e3(0x132)](new RegExp(_0x15c0c3||''));_0x49880f=_0x398938?_0x398938[0x0]:'';break;case _0x34d9e3(0x2a9):_0x49880f=_0x1806f1[_0x34d9e3(0x519)](0x0,parseInt(_0x15c0c3||'0'));break;case _0x34d9e3(0x228):let _0x37ec14=parseInt(_0x15c0c3||'0');_0x49880f=_0x1806f1[_0x34d9e3(0x519)](_0x1806f1[_0x34d9e3(0x217)]-_0x37ec14);break;case _0x34d9e3(0x5f4):let _0x44b556=_0x1cde9f(_0x1806f1),_0x34bcf9=parseInt(_0x15c0c3||'0');_0x34bcf9=Math['abs'](_0x34bcf9),_0x44b556!==null?_0x49880f=_0x44b556['toLocaleString'](_0x34d9e3(0x3eb),{'minimumFractionDigits':_0x34bcf9,'maximumFractionDigits':_0x34bcf9}):(console[_0x34d9e3(0x7e8)](_0x34d9e3(0x782)+_0x1806f1),_0x49880f=null);break;case _0x34d9e3(0x6b9):let _0xa9e13d=_0x1cde9f(_0x1806f1);_0xa9e13d!==null?_0x49880f=_0xa9e13d[_0x34d9e3(0x4d9)](_0x34d9e3(0x3eb),{'style':_0x34d9e3(0x6e8),'currency':'BRL'}):(console[_0x34d9e3(0x7e8)](_0x34d9e3(0x17e)+_0x1806f1),_0x49880f=null);break;case _0x34d9e3(0x34f):_0x49880f=_0x1806f1[_0x34d9e3(0x4b1)]();break;case _0x34d9e3(0x7d1):_0x49880f=_0x1806f1[_0x34d9e3(0x31c)]();break;case _0x34d9e3(0x579):_0x49880f=_0x1806f1[_0x34d9e3(0x4fb)]('\x20')[_0x34d9e3(0x384)](_0x102c07=>_0x102c07[_0x34d9e3(0x549)](0x0)['toUpperCase']()+_0x102c07[_0x34d9e3(0x519)](0x1)['toLowerCase']())[_0x34d9e3(0x38e)]('\x20');break;case _0x34d9e3(0x537):_0x49880f=JSON[_0x34d9e3(0x5ab)](_0x1806f1);break;case _0x34d9e3(0x392):_0x49880f=_0x1806f1[_0x34d9e3(0x317)]();break;default:_0x49880f=_0x1806f1;}return _0x49880f!==null?_0x49880f[_0x34d9e3(0x191)]():null;}async[a0_0x98996d(0x849)](_0x8563fd,_0x112863){const _0x1bc56c=a0_0x98996d;try{let _0x1ca785=_0x8563fd['varedits']?.['filter'](_0x2e2ace=>_0x2e2ace[_0x1bc56c(0x4d3)]===_0x112863[_0x1bc56c(0x699)]?.[_0x1bc56c(0x191)]())||[],_0x3cc084=_0x112863['saveVariable'],_0x456de4=null,_0x250f44=[],_0x40e0ae=_0x8563fd[_0x1bc56c(0x2a6)][_0x1bc56c(0x56f)][_0x3cc084];_0x250f44[_0x1bc56c(0x69d)](_0x1bc56c(0x41d)+_0x40e0ae+'\x22');for(let _0x4fa2d3 of _0x1ca785){_0x4fa2d3[_0x1bc56c(0x72a)]=_0x40e0ae,_0x456de4=_0x4fa2d3['firstValue'];let _0x425adf;try{_0x425adf=this['applyvaredit'](_0x8563fd,_0x4fa2d3);}catch(_0x2b7eb8){this[_0x1bc56c(0x669)][_0x1bc56c(0x5c5)](_0x1bc56c(0x792)+_0x2b7eb8[_0x1bc56c(0x334)]);continue;}if(_0x425adf!==null){let _0x24def6=_0x1bc56c(0x46b)+_0x4fa2d3['editOperator']+'\x22',_0x5f4cf0=[_0x1bc56c(0x6b9),_0x1bc56c(0x34f),_0x1bc56c(0x7d1),'capitalizedWords',_0x1bc56c(0x392)];_0x4fa2d3[_0x1bc56c(0x245)]===_0x1bc56c(0x3e4)||_0x4fa2d3[_0x1bc56c(0x245)]===_0x1bc56c(0x582)?_0x24def6+=_0x1bc56c(0x377)+_0x4fa2d3[_0x1bc56c(0x375)]+_0x1bc56c(0x3dc)+_0x4fa2d3[_0x1bc56c(0x1d2)]+'\x22':!_0x5f4cf0[_0x1bc56c(0x199)](_0x4fa2d3[_0x1bc56c(0x245)])&&_0x4fa2d3['secondValue']!==null&&_0x4fa2d3[_0x1bc56c(0x375)]!==void 0x0&&(_0x24def6+=_0x1bc56c(0x4e7)+_0x4fa2d3[_0x1bc56c(0x375)]+'\x22'),_0x24def6+=_0x1bc56c(0x764)+_0x425adf+'.',_0x250f44[_0x1bc56c(0x69d)](_0x24def6);}_0x425adf!==null&&(_0x40e0ae=_0x425adf);}if(_0x8563fd['chatLog'][_0x1bc56c(0x56f)]&&_0x112863[_0x1bc56c(0x403)]){_0x8563fd[_0x1bc56c(0x2a6)][_0x1bc56c(0x56f)][_0x112863[_0x1bc56c(0x403)]]=_0x40e0ae;let _0x1cd693={'variable':_0x112863['saveVariable'],'oldValue':_0x456de4,'newValue':_0x40e0ae,'moreLogs':_0x250f44};try{this[_0x1bc56c(0x65f)](_0x8563fd,_0x112863,_0x1cd693);}catch(_0x215b6a){this[_0x1bc56c(0x669)][_0x1bc56c(0x5c5)](_0x1bc56c(0x593)+_0x215b6a[_0x1bc56c(0x334)]);}}return _0x3cc084;}catch(_0x35beaf){return this[_0x1bc56c(0x669)][_0x1bc56c(0x5c5)](_0x1bc56c(0x455)+_0x35beaf[_0x1bc56c(0x334)]),null;}}async['processConditions'](_0x48b350,_0x46fd29){const _0x4b7542=a0_0x98996d;try{let _0xed99ef=[],_0x1bcb94=_0x48b350['conditions'][_0x4b7542(0x29b)](_0x49ca66=>_0x49ca66[_0x4b7542(0x4d3)]===_0x46fd29[_0x4b7542(0x699)]['toString']()),_0x6e7f7b=null,_0x344012=!0x1;for(let _0x3f9904 of _0x1bcb94){let _0x3ed54e=this['evaluateCondition'](_0x48b350,_0x3f9904);_0xed99ef[_0x4b7542(0x69d)](_0x4b7542(0x235)+_0x3f9904[_0x4b7542(0x72a)]+_0x4b7542(0x327)+_0x3f9904[_0x4b7542(0x2a7)]+_0x4b7542(0x2f9)+_0x3f9904['secondValue']+_0x4b7542(0x2a5)+_0x3ed54e),_0x6e7f7b===null?_0x6e7f7b=_0x3ed54e:_0x3f9904['OrAnd']===_0x4b7542(0x4ec)?(_0x6e7f7b=_0x6e7f7b&&_0x3ed54e,_0x3ed54e||(_0x344012=!0x0)):_0x3f9904[_0x4b7542(0x617)]==='or'&&(_0x344012||(_0x6e7f7b=_0x6e7f7b||_0x3ed54e));}_0x6e7f7b===null&&(_0x6e7f7b=!0x0);let _0x42e7ee={'moreLogs':_0xed99ef};_0x48b350[_0x4b7542(0x2a6)][_0x4b7542(0x633)]=_0x6e7f7b,await this[_0x4b7542(0x65f)](_0x48b350,_0x46fd29,_0x42e7ee);}catch(_0x3f2057){this[_0x4b7542(0x669)]['error'](this['instanceName']+'\x20('+this[_0x4b7542(0x78a)][_0x4b7542(0x3ef)]+_0x4b7542(0x64c)+(_0x3f2057 instanceof Error?_0x3f2057[_0x4b7542(0x334)]:JSON[_0x4b7542(0x5ab)](_0x3f2057,null,0x2)));}}[a0_0x98996d(0x27f)](_0x4a3631,_0x20fe4c){const _0x24ca08=a0_0x98996d;let _0x1dc0ed=_0x20fe4c[_0x24ca08(0x72a)],_0x4aa743=_0x20fe4c[_0x24ca08(0x375)];typeof _0x1dc0ed==_0x24ca08(0x170)&&(_0x1dc0ed=this[_0x24ca08(0x202)](_0x1dc0ed,_0x4a3631['chatLog'][_0x24ca08(0x56f)])??''),typeof _0x4aa743==_0x24ca08(0x170)&&(_0x4aa743=this[_0x24ca08(0x202)](_0x4aa743,_0x4a3631['chatLog'][_0x24ca08(0x56f)])??'');try{switch(_0x20fe4c['expression']){case _0x24ca08(0x2fe):return _0x1dc0ed===_0x4aa743;case _0x24ca08(0x135):return _0x1dc0ed!==_0x4aa743;case'contains':return this['contains'](_0x1dc0ed,_0x4aa743);case'notContains':return!this['contains'](_0x1dc0ed,_0x4aa743);case _0x24ca08(0x6dc):return parseFloat(_0x1dc0ed)>parseFloat(_0x4aa743);case _0x24ca08(0x57e):return parseFloat(_0x1dc0ed)<parseFloat(_0x4aa743);case _0x24ca08(0x735):return _0x1dc0ed!=='';case'empty':return _0x1dc0ed==='';case'matchRegex':return new RegExp(_0x4aa743)[_0x24ca08(0x406)](_0x1dc0ed);case _0x24ca08(0x7b0):return!new RegExp(_0x4aa743)['test'](_0x1dc0ed);default:return!0x1;}}catch(_0x11fc71){return this[_0x24ca08(0x669)]['error'](_0x24ca08(0x27e)+_0x11fc71),!0x1;}}['contains'](_0xc1b094,_0x49f7de){const _0x377d8a=a0_0x98996d;if(_0xc1b094===_0x49f7de&&/^\d+$/['test'](_0xc1b094))return!0x0;if(this[_0x377d8a(0x279)](_0xc1b094)&&/^\d+$/[_0x377d8a(0x406)](_0x49f7de)){let _0x43431c=_0xc1b094[_0x377d8a(0x4fb)](',')[_0x377d8a(0x384)](_0x37a53f=>parseInt(_0x37a53f['trim']())),_0x542201=parseInt(_0x49f7de);return _0x43431c[_0x377d8a(0x199)](_0x542201);}return _0xc1b094[_0x377d8a(0x199)](_0x49f7de);}[a0_0x98996d(0x279)](_0x32a7bf){const _0x1f0f95=a0_0x98996d;return/^\d+(,\d+)*$/[_0x1f0f95(0x406)](_0x32a7bf);}['processConditionsTest'](_0x518679){const _0x471d99=a0_0x98996d;let _0x32118c=!0x0,_0xc74365=null;for(let _0x49b43e of _0x518679){let _0xfc41=this[_0x471d99(0x251)](_0x49b43e);if(_0xc74365==='or'&&_0xfc41){_0x32118c=!0x0;break;}if(_0xc74365==='and'&&!_0xfc41){_0x32118c=!0x1;break;}_0xc74365=_0x49b43e[_0x471d99(0x617)];}return _0x32118c;}['evaluateConditionTest'](_0x5b744f){const _0x5aa8ac=a0_0x98996d;let _0x268058=_0x5b744f[_0x5aa8ac(0x72a)],_0x3c7875=_0x5b744f[_0x5aa8ac(0x375)];try{switch(_0x5b744f[_0x5aa8ac(0x2a7)]){case _0x5aa8ac(0x2fe):return String(_0x268058)===String(_0x3c7875);case _0x5aa8ac(0x135):return String(_0x268058)!==String(_0x3c7875);case _0x5aa8ac(0x640):return String(_0x268058)['includes'](String(_0x3c7875));case'notContains':return!String(_0x268058)['includes'](String(_0x3c7875));case _0x5aa8ac(0x6dc):return parseFloat(String(_0x268058))>parseFloat(String(_0x3c7875));case _0x5aa8ac(0x57e):return parseFloat(String(_0x268058))<parseFloat(String(_0x3c7875));case _0x5aa8ac(0x735):return String(_0x268058)!=='';case _0x5aa8ac(0x16a):return String(_0x268058)==='';case _0x5aa8ac(0x1e9):return new RegExp(String(_0x3c7875))[_0x5aa8ac(0x406)](String(_0x268058));case _0x5aa8ac(0x7b0):return!new RegExp(String(_0x3c7875))[_0x5aa8ac(0x406)](String(_0x268058));default:return!0x1;}}catch(_0x12ad5f){return this[_0x5aa8ac(0x669)][_0x5aa8ac(0x5c5)](_0x5aa8ac(0x27e)+_0x12ad5f),!0x1;}}async[a0_0x98996d(0x681)](_0x480187,_0x3ec93f){const _0xeb1684=a0_0x98996d;if(this[_0xeb1684(0x669)]['verbose'](this[_0xeb1684(0x193)]+'\x20('+this[_0xeb1684(0x78a)][_0xeb1684(0x3ef)]+_0xeb1684(0x838)),!_0x480187||!_0x3ec93f)return this[_0xeb1684(0x669)][_0xeb1684(0x5c5)](this['instanceName']+'\x20('+this['instance'][_0xeb1684(0x3ef)]+_0xeb1684(0x5fd)),null;let _0x17621d=_0x480187[_0xeb1684(0x2a6)]['lastReceivedMessage'][_0xeb1684(0x328)]['id'];this[_0xeb1684(0x669)][_0xeb1684(0x2a0)](this['instanceName']+'\x20('+this[_0xeb1684(0x78a)][_0xeb1684(0x3ef)]+_0xeb1684(0x3f9)+_0x17621d);let _0x1aef1c={'key':{'id':_0x17621d}},_0x1a8fdf=_0x3ec93f[_0xeb1684(0x403)];_0x480187[_0xeb1684(0x2a6)]['realVariables']['_'+_0x1a8fdf+'.fileUrl']=null,_0x480187[_0xeb1684(0x2a6)]['realVariables']['_'+_0x1a8fdf+'.mimetype']=null,_0x480187[_0xeb1684(0x2a6)][_0xeb1684(0x56f)]['_'+_0x1a8fdf+_0xeb1684(0x548)]=null,_0x480187[_0xeb1684(0x2a6)][_0xeb1684(0x56f)]['_'+_0x1a8fdf+'.type']=_0x480187[_0xeb1684(0x2a6)][_0xeb1684(0x708)][_0xeb1684(0x1b8)];try{let _0x374c49=await this[_0xeb1684(0x3bd)](_0x1aef1c);this[_0xeb1684(0x669)][_0xeb1684(0x2a0)](this[_0xeb1684(0x193)]+'\x20('+this['instance'][_0xeb1684(0x3ef)]+_0xeb1684(0x762)),_0x480187[_0xeb1684(0x2a6)]['realVariables']['_'+_0x1a8fdf+_0xeb1684(0x19e)]=_0x374c49[_0xeb1684(0x733)],_0x480187[_0xeb1684(0x2a6)][_0xeb1684(0x56f)]['_'+_0x1a8fdf+'.mimetype']=_0x374c49['mimetype'];let _0x3d18f9=_0x374c49[_0xeb1684(0x75f)][_0xeb1684(0x132)](/\/(\w+)$/),_0x4c9dc5=_0x3d18f9?_0x3d18f9[0x1]:null;_0x480187[_0xeb1684(0x2a6)][_0xeb1684(0x56f)]['_'+_0x1a8fdf+'.extension']=_0x4c9dc5,this[_0xeb1684(0x669)][_0xeb1684(0x2a0)](this[_0xeb1684(0x193)]+'\x20('+this[_0xeb1684(0x78a)][_0xeb1684(0x3ef)]+'):\x20Detalhes\x20da\x20mdia\x20salvos\x20para\x20\x27'+_0x1a8fdf+'\x27.');}catch(_0x428b92){this[_0xeb1684(0x669)][_0xeb1684(0x5c5)](this[_0xeb1684(0x193)]+'\x20('+this[_0xeb1684(0x78a)][_0xeb1684(0x3ef)]+_0xeb1684(0x514)+_0x428b92[_0xeb1684(0x334)]);}let _0x5d22b8=_0x480187['chatLog'][_0xeb1684(0x708)][_0xeb1684(0x673)]||_0x480187[_0xeb1684(0x2a6)][_0xeb1684(0x708)][_0xeb1684(0x27a)]||_0x480187[_0xeb1684(0x2a6)]['lastReceivedMessage']['vote'];try{_0x480187[_0xeb1684(0x2a6)]['realVariables']||(_0x480187[_0xeb1684(0x2a6)][_0xeb1684(0x56f)]={});let _0x215a39=_0x480187[_0xeb1684(0x2a6)]['realVariables'][_0x1a8fdf];_0x480187[_0xeb1684(0x2a6)][_0xeb1684(0x56f)][_0x1a8fdf]=_0x5d22b8;let _0x404b1b={'variable':_0x1a8fdf,'oldValue':_0x215a39,'newValue':_0x5d22b8};this['updateConversation'](_0x480187,_0x3ec93f,_0x404b1b),this['logger'][_0xeb1684(0x2a0)](this[_0xeb1684(0x193)]+'\x20('+this[_0xeb1684(0x78a)]['wuid']+'):\x20Conversa\x20atualizada\x20em\x20memria');}catch(_0x84d64b){let _0x138a47={'error':!0x0,'errorLog':_0x84d64b[_0xeb1684(0x191)]()};return this['updateConversation'](_0x480187,_0x3ec93f,_0x138a47),this[_0xeb1684(0x669)][_0xeb1684(0x5c5)](this[_0xeb1684(0x193)]+'\x20('+this['instance'][_0xeb1684(0x3ef)]+'):\x20Erro\x20durante\x20a\x20atualizao:\x20'+(_0x84d64b instanceof Error?_0x84d64b[_0xeb1684(0x334)]:JSON[_0xeb1684(0x5ab)](_0x84d64b,null,0x2))),null;}}async['stopConversation'](_0x66ab8b,_0x30af25){const _0x5bf8b1=a0_0x98996d;if(this[_0x5bf8b1(0x669)][_0x5bf8b1(0x2a0)](this['instanceName']+'\x20('+this[_0x5bf8b1(0x78a)][_0x5bf8b1(0x3ef)]+'):\x20Entrou\x20na\x20funo\x20stop'),!_0x66ab8b||!_0x30af25)return this[_0x5bf8b1(0x669)][_0x5bf8b1(0x5c5)](this[_0x5bf8b1(0x193)]+'\x20('+this[_0x5bf8b1(0x78a)]['wuid']+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;let _0x11105f=Date[_0x5bf8b1(0x4a3)](),_0x104fec=parseInt(_0x30af25[_0x5bf8b1(0x69f)],0xa);if(isNaN(_0x104fec))return this[_0x5bf8b1(0x669)][_0x5bf8b1(0x5c5)](this[_0x5bf8b1(0x193)]+'\x20('+this[_0x5bf8b1(0x78a)][_0x5bf8b1(0x3ef)]+_0x5bf8b1(0x74d)),null;let _0x19f05f={'newStoppedUntil':_0x11105f+_0x104fec*0x3c*0x3e8};return await this['updateConversation'](_0x66ab8b,_0x30af25,_0x19f05f,!0x0),null;}async[a0_0x98996d(0x2d3)](_0x54c886,_0x3b323b){const _0x33bb38=a0_0x98996d;try{switch(_0x3b323b['uazapi'][_0x33bb38(0x2b2)]){case'sendText':await this['uazapiSendText'](_0x54c886,_0x3b323b);break;case _0x33bb38(0x4d5):await this[_0x33bb38(0x2e9)](_0x54c886,_0x3b323b);break;case _0x33bb38(0x6d3):await this['uazapiSendLocation'](_0x54c886,_0x3b323b);break;case _0x33bb38(0x7d2):await this[_0x33bb38(0x684)](_0x54c886,_0x3b323b);break;case'sendContact':await this['uazapiSendContact'](_0x54c886,_0x3b323b);break;case _0x33bb38(0x4b8):await this['uazapiSendMenu'](_0x54c886,_0x3b323b);break;case _0x33bb38(0x4a4):await this[_0x33bb38(0x47d)](_0x54c886,_0x3b323b);break;case'deleteMessage':await this[_0x33bb38(0x15c)](_0x54c886,_0x3b323b);break;default:this[_0x33bb38(0x669)][_0x33bb38(0x5c5)](this['instanceName']+'\x20('+this[_0x33bb38(0x78a)]['wuid']+_0x33bb38(0x20a)+_0x3b323b[_0x33bb38(0x2f6)][_0x33bb38(0x2b2)]);}}catch(_0x395a24){this[_0x33bb38(0x669)][_0x33bb38(0x5c5)](this['instanceName']+'\x20('+this[_0x33bb38(0x78a)][_0x33bb38(0x3ef)]+_0x33bb38(0x7b5)+(_0x395a24 instanceof Error?_0x395a24['message']:JSON[_0x33bb38(0x5ab)](_0x395a24,null,0x2)));}}async[a0_0x98996d(0x65f)](_0x131668,_0x23d2a8,_0x4335ef,_0x59bcff=!0x1,_0x324330=!0x1){const _0x379bb3=a0_0x98996d;_0x131668['chatLog']['blockLogs']||(_0x131668['chatLog'][_0x379bb3(0x4b3)]=[]);let _0x5f1725=(_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x4b3)]?.[_0x379bb3(0x217)]??0x0)+0x1,_0x323eba=_0x131668['chatLog'][_0x379bb3(0x4b3)][_0x379bb3(0x29b)](_0x43f14a=>String(_0x43f14a['blockId'])===String(_0x23d2a8[_0x379bb3(0x699)]))[_0x379bb3(0x217)]+0x1,_0x655ac4=_0x4335ef?.[_0x379bb3(0x5ea)]??Date['now'](),_0x26c9a3=_0x4335ef?.[_0x379bb3(0x5c5)]?_0x4335ef['errorLog']??_0x4335ef[_0x379bb3(0x5c5)]['toString']():void 0x0,_0xc53174={'onTime':_0x655ac4,'blockId':_0x23d2a8[_0x379bb3(0x699)],'order':_0x5f1725,'activatedCount':_0x323eba,'error':_0x4335ef?.[_0x379bb3(0x5c5)]??!0x1,'messageId':_0x4335ef?.['messageId'],'apiResponse':_0x4335ef?.[_0x379bb3(0x459)],'apiResponseString':_0x4335ef?.[_0x379bb3(0x459)]?JSON[_0x379bb3(0x5ab)](_0x4335ef?.[_0x379bb3(0x459)]):void 0x0,'variable':_0x4335ef?.[_0x379bb3(0x5b2)],'oldValue':_0x4335ef?.['oldValue'],'newValue':_0x4335ef?.[_0x379bb3(0x443)],'newStoppedUntil':_0x4335ef?.[_0x379bb3(0x6e9)],'moreLogs':_0x4335ef?.[_0x379bb3(0x55f)],'errorLog':_0x26c9a3};if(_0x4335ef['moreLogs']&&_0x4335ef[_0x379bb3(0x55f)]['length']>0x0){let _0xfc6570=_0x4335ef[_0x379bb3(0x55f)][_0x379bb3(0x384)](_0x33486e=>this[_0x379bb3(0x343)](_0x33486e,_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x56f)]));_0xc53174[_0x379bb3(0x55f)]=_0xfc6570;}if(_0x131668[_0x379bb3(0x2a6)]['realVariables']||(_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x56f)]={}),_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x56f)][_0x379bb3(0x1f4)]=String(_0x323eba),_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x56f)][_0x379bb3(0x2c9)]=String(_0x4335ef[_0x379bb3(0x5c5)]??!0x1),_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x4b3)][_0x379bb3(0x69d)](_0xc53174),_0x131668['chatLog'][_0x379bb3(0x56f)][_0x379bb3(0x45f)]&&_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x56f)][_0x379bb3(0x45f)]!==_0x131668[_0x379bb3(0x5d9)]){let _0x34fd40=(await this[_0x379bb3(0x4bd)]({'numbers':[_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x56f)][_0x379bb3(0x45f)]]}))[0x0][_0x379bb3(0x3d9)];_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x56f)]['telefone']=_0x34fd40,_0x131668[_0x379bb3(0x5d9)]=_0x34fd40;try{let _0x27a0ff={'_id':{'$ne':_0x131668['_id']},'remoteJid':_0x34fd40,'status':_0x379bb3(0x29d)},_0x1aaf42={'status':_0x379bb3(0x76e)};await this[_0x379bb3(0x50b)]['flowConversation']['updateMany'](_0x27a0ff,_0x1aaf42,this[_0x379bb3(0x78a)][_0x379bb3(0x3ef)]),this[_0x379bb3(0x669)][_0x379bb3(0x2a0)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x379bb3(0x763));}catch(_0x24a831){this['logger'][_0x379bb3(0x5c5)](this['instanceName']+'\x20('+this[_0x379bb3(0x78a)][_0x379bb3(0x3ef)]+_0x379bb3(0x665)+_0x24a831[_0x379bb3(0x334)]);}try{let _0x21c71b=_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x56f)],_0x536e12=await this[_0x379bb3(0x28a)](_0x34fd40),_0x51e551={..._0x21c71b,..._0x536e12,'_remoteJid':_0x34fd40};_0x131668['chatLog'][_0x379bb3(0x56f)]=_0x51e551;}catch(_0x56d298){this[_0x379bb3(0x669)][_0x379bb3(0x5c5)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x379bb3(0x4af)+_0x56d298[_0x379bb3(0x334)]);}}_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x74c)]=_0x23d2a8[_0x379bb3(0x699)][_0x379bb3(0x191)](),_0x131668['chatLog'][_0x379bb3(0x6a4)]&&(_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x6a4)]=_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x6a4)]),_0x131668[_0x379bb3(0x2a6)]['lastReceivedMessage']&&(_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x708)]=_0x131668[_0x379bb3(0x2a6)][_0x379bb3(0x708)]),_0x131668[_0x379bb3(0x2a6)]['lastCondition']&&(_0x131668['chatLog'][_0x379bb3(0x633)]=_0x131668[_0x379bb3(0x2a6)]['lastCondition']),_0x324330&&(_0x131668['status']=_0x379bb3(0x76e)),_0x59bcff?this[_0x379bb3(0x810)](_0x131668):this[_0x379bb3(0x2db)](_0x131668,_0x23d2a8);}['replaceVariablesLogs'](_0xc4906,_0x299fb3){const _0x488cb0=a0_0x98996d;return _0xc4906[_0x488cb0(0x5d1)](/\{\{([^}]+)\}\}/g,(_0x59905d,_0x13528b)=>_0x299fb3[_0x13528b]?'{{'+_0x13528b+_0x488cb0(0x1da)+_0x299fb3[_0x13528b]+'\x22':'{{'+_0x13528b+_0x488cb0(0x32d));}async['saveConversationToDatabase'](_0x3f1a12){const _0xf83503=a0_0x98996d;try{let _0x2b5893=Object[_0xf83503(0x736)](_0x3f1a12[_0xf83503(0x2a6)][_0xf83503(0x56f)])[_0xf83503(0x384)](([_0x571e69,_0x4056c3])=>({'name':_0x571e69,'value':_0x4056c3})),_0x45a765={'status':_0x3f1a12['status'],'remoteJid':_0x3f1a12[_0xf83503(0x5d9)],'blocks':_0x3f1a12[_0xf83503(0x740)],'waitingMenu_id':_0x3f1a12[_0xf83503(0x16e)],'waitingMenu_text':_0x3f1a12[_0xf83503(0x539)],'waitingMenu_replyOptions':_0x3f1a12[_0xf83503(0x3dd)],'chatLog':{'lastBlockId':_0x3f1a12[_0xf83503(0x2a6)][_0xf83503(0x74c)],'lastSendMessage':_0x3f1a12[_0xf83503(0x2a6)][_0xf83503(0x6a4)],'lastReceivedMessage':_0x3f1a12['chatLog']['lastReceivedMessage'],'lastCondition':_0x3f1a12['chatLog']['lastCondition'],'chatVariables':_0x2b5893,'realVariables':_0x3f1a12[_0xf83503(0x2a6)]['realVariables'],'blockLogs':_0x3f1a12[_0xf83503(0x2a6)][_0xf83503(0x4b3)]}},_0x312491=await this['repository'][_0xf83503(0x265)][_0xf83503(0x1f8)](_0x3f1a12[_0xf83503(0x699)],_0x45a765,this[_0xf83503(0x78a)][_0xf83503(0x3ef)]);if(_0x312491){this[_0xf83503(0x669)][_0xf83503(0x2a0)](this[_0xf83503(0x193)]+'\x20('+this['instance'][_0xf83503(0x3ef)]+_0xf83503(0x172)+_0x312491[_0xf83503(0x699)]);try{let _0xab569=[_0xf83503(0x16b),'nomecompleto','email','cpf','status',_0xf83503(0x845),'responsavelid',_0xf83503(0x6e6),_0xf83503(0x3c1),_0xf83503(0x788)];if(!this[_0xf83503(0x227)]&&(await this[_0xf83503(0x472)](),!this[_0xf83503(0x227)]))throw new Error('AutomateSystem\x20no\x20foi\x20inicializado');let _0x258f54=this[_0xf83503(0x227)]?.[_0xf83503(0x52b)][_0xf83503(0x384)](_0xa8c36a=>_0xa8c36a[_0xf83503(0x592)]),_0x1d917b={};Object[_0xf83503(0x736)](_0x3f1a12[_0xf83503(0x2a6)][_0xf83503(0x56f)])[_0xf83503(0x15b)](([_0x350007,_0x45a590])=>{const _0x2619c1=_0xf83503;_0xab569[_0x2619c1(0x199)](_0x350007)&&(_0x350007===_0x2619c1(0x6e6)&&typeof _0x45a590==_0x2619c1(0x170)?_0x1d917b[_0x350007]=_0x45a590[_0x2619c1(0x4fb)](',')[_0x2619c1(0x384)](_0x41a51f=>_0x41a51f[_0x2619c1(0x317)]())[_0x2619c1(0x29b)](_0x3c70b3=>_0x3c70b3!==''):_0x350007===_0x2619c1(0x3c1)&&typeof _0x45a590==_0x2619c1(0x170)?_0x1d917b[_0x350007]=_0x45a590[_0x2619c1(0x4fb)](',')[_0x2619c1(0x384)](_0x187c63=>_0x187c63[_0x2619c1(0x317)]())[_0x2619c1(0x29b)](_0x229fd9=>_0x229fd9!==''):_0x1d917b[_0x350007]=_0x45a590);});let _0x19439c=_0x3f1a12['chatLog'][_0xf83503(0x4b3)][_0x3f1a12[_0xf83503(0x2a6)][_0xf83503(0x4b3)][_0xf83503(0x217)]-0x1];if(_0x19439c){let _0x3bcb5b=_0x19439c[_0xf83503(0x6e9)];_0x3bcb5b!==void 0x0&&(_0x1d917b['desativadoFluxoAte']=_0x3bcb5b['toString']());}let _0x2ba183=_0x2b5893['filter'](_0x2b58a5=>_0x258f54[_0xf83503(0x199)](_0x2b58a5[_0xf83503(0x592)]));this[_0xf83503(0x669)][_0xf83503(0x2a0)](this[_0xf83503(0x193)]+'\x20('+this[_0xf83503(0x78a)][_0xf83503(0x3ef)]+'):\x20leadInfoVariables'),this['logger']['verbose'](_0x1d917b),this[_0xf83503(0x669)]['verbose'](this['instanceName']+'\x20('+this[_0xf83503(0x78a)]['wuid']+_0xf83503(0x600)),this[_0xf83503(0x669)][_0xf83503(0x2a0)](_0x2ba183);let _0x1f0b24=_0x2ba183[_0xf83503(0x384)](_0x2ed909=>{const _0x9d0041=_0xf83503;let _0x59f25c=this[_0x9d0041(0x227)]?.[_0x9d0041(0x52b)][_0x9d0041(0x704)](_0x39c344=>_0x39c344[_0x9d0041(0x592)]===_0x2ed909[_0x9d0041(0x592)]);if(!_0x59f25c)throw new Error('Campo\x20personalizado\x20no\x20encontrado\x20para\x20o\x20nome\x20'+_0x2ed909['name']);return{'_id':_0x59f25c['_id'],'value':_0x2ed909['value']};});this[_0xf83503(0x669)][_0xf83503(0x2a0)](this[_0xf83503(0x193)]+'\x20('+this[_0xf83503(0x78a)][_0xf83503(0x3ef)]+_0xf83503(0x775)),this['logger'][_0xf83503(0x2a0)](_0x1f0b24),await this[_0xf83503(0x499)](_0x3f1a12[_0xf83503(0x5d9)],_0x1d917b,_0x1f0b24);}catch(_0x2b39be){this[_0xf83503(0x669)][_0xf83503(0x5c5)](this['instanceName']+'\x20('+this['instance'][_0xf83503(0x3ef)]+_0xf83503(0x4b5)+(_0x2b39be instanceof Error?_0x2b39be[_0xf83503(0x334)]:JSON[_0xf83503(0x5ab)](_0x2b39be,null,0x2)));}}else this[_0xf83503(0x669)][_0xf83503(0x5c5)](this[_0xf83503(0x193)]+'\x20('+this[_0xf83503(0x78a)][_0xf83503(0x3ef)]+_0xf83503(0x1eb));}catch(_0x1fdfb6){this['logger']['error'](this['instanceName']+'\x20('+this[_0xf83503(0x78a)]['wuid']+_0xf83503(0x715)+(_0x1fdfb6 instanceof Error?_0x1fdfb6[_0xf83503(0x334)]:JSON[_0xf83503(0x5ab)](_0x1fdfb6,null,0x2)));}}async['saveChatVariables'](_0x585065,_0x1fe608,_0x28c923){const _0x1e1e12=a0_0x98996d;try{let _0x304a10={'leadInfo.leadnome':_0x1fe608[_0x1e1e12(0x16b)],'leadInfo.nomecompleto':_0x1fe608['nomecompleto'],'leadInfo.email':_0x1fe608['email'],'leadInfo.cpf':_0x1fe608[_0x1e1e12(0x653)],'leadInfo.status':_0x1fe608[_0x1e1e12(0x7ce)],'leadInfo.notas':_0x1fe608['notas'],'leadInfo.responsavelid':_0x1fe608[_0x1e1e12(0x256)],'leadInfo.tags':_0x1fe608[_0x1e1e12(0x6e6)],'leadInfo.etiquetas':_0x1fe608['etiquetas'],'leadInfo.customFields':_0x28c923,'leadInfo.atendimentoAberto':_0x1fe608[_0x1e1e12(0x788)]},_0x5a19ef=await this[_0x1e1e12(0x50b)][_0x1e1e12(0x500)]['findOne']({'where':{'_id':_0x585065}},this[_0x1e1e12(0x78a)][_0x1e1e12(0x3ef)]);if(!_0x5a19ef)return _0x1e1e12(0x645);let _0x42a0e9=new Set(_0x5a19ef[_0x1e1e12(0x5b0)][_0x1e1e12(0x3c1)]||[]),_0x289551=new Set(_0x1fe608[_0x1e1e12(0x3c1)]||[]),_0x3e2350=await this['repository'][_0x1e1e12(0x80b)][_0x1e1e12(0x704)]({'where':{}},this[_0x1e1e12(0x78a)][_0x1e1e12(0x3ef)]),_0xc9350e=new Set(_0x3e2350['map'](_0x1c4d80=>_0x1c4d80[_0x1e1e12(0x699)])),_0x48442a=[..._0x289551][_0x1e1e12(0x29b)](_0x424c72=>!_0x42a0e9[_0x1e1e12(0x12e)](_0x424c72)&&_0xc9350e[_0x1e1e12(0x12e)](_0x424c72)),_0x198185=[..._0x42a0e9][_0x1e1e12(0x29b)](_0x1876b7=>!_0x289551['has'](_0x1876b7));for(let _0x56420b of _0x48442a)await this[_0x1e1e12(0x4a6)](_0x56420b,_0x5a19ef[_0x1e1e12(0x699)]),_0x42a0e9[_0x1e1e12(0x712)](_0x56420b);for(let _0x35b351 of _0x198185)await this['RemoveChatLabel'](_0x35b351,_0x5a19ef['_id']),_0x42a0e9[_0x1e1e12(0x6d0)](_0x35b351);if(_0x1e1e12(0x436)in _0x1fe608){let _0x41dff5=_0x1fe608[_0x1e1e12(0x436)];_0x304a10[_0x1e1e12(0x17b)]=_0x41dff5?Number(_0x41dff5):null;}if(_0x1e1e12(0x788)in _0x1fe608){let _0x250710=_0x1fe608['atendimentoAberto'][_0x1e1e12(0x31c)]();_0x304a10['leadInfo.atendimentoAberto']=_0x250710===_0x1e1e12(0x435)||_0x250710==='1'||_0x250710===_0x1e1e12(0x54b)||_0x250710===_0x1e1e12(0x45e);}let _0x2cdf4f=await this[_0x1e1e12(0x50b)][_0x1e1e12(0x500)][_0x1e1e12(0x1f8)]({'where':{'_id':_0x585065}},_0x304a10,this[_0x1e1e12(0x78a)][_0x1e1e12(0x3ef)]);_0x2cdf4f?(this[_0x1e1e12(0x669)][_0x1e1e12(0x2a0)](this['instanceName']+'\x20('+this[_0x1e1e12(0x78a)]['wuid']+_0x1e1e12(0x3aa)+_0x2cdf4f[_0x1e1e12(0x699)]),U(this[_0x1e1e12(0x193)],_0x1e1e12(0x812),{'chat':_0x2cdf4f})):this['logger'][_0x1e1e12(0x5c5)](this['instanceName']+'\x20('+this[_0x1e1e12(0x78a)][_0x1e1e12(0x3ef)]+'):\x20Falha\x20ao\x20atualizar\x20as\x20variveis\x20do\x20chat\x20no\x20BD');}catch(_0x201e9b){this[_0x1e1e12(0x669)]['error'](this[_0x1e1e12(0x193)]+'\x20('+this[_0x1e1e12(0x78a)][_0x1e1e12(0x3ef)]+_0x1e1e12(0x6eb)+(_0x201e9b instanceof Error?_0x201e9b[_0x1e1e12(0x334)]:JSON[_0x1e1e12(0x5ab)](_0x201e9b,null,0x2)));}}async[a0_0x98996d(0x523)](_0x41d6a1,_0x55da8c){const _0x2d79e4=a0_0x98996d;this[_0x2d79e4(0x669)][_0x2d79e4(0x2a0)](this[_0x2d79e4(0x193)]+'\x20('+this[_0x2d79e4(0x78a)][_0x2d79e4(0x3ef)]+'):\x20atualizao\x20chat:\x20'+_0x55da8c);try{let _0x3fd834=await this[_0x2d79e4(0x50b)][_0x2d79e4(0x500)]['updateOne']({'where':{'_id':_0x41d6a1[_0x2d79e4(0x5d9)]}},{'leadInfo.desativadoFluxoAte':_0x55da8c},this['instance'][_0x2d79e4(0x3ef)]);this[_0x2d79e4(0x669)]['verbose'](this[_0x2d79e4(0x193)]+'\x20('+this[_0x2d79e4(0x78a)][_0x2d79e4(0x3ef)]+_0x2d79e4(0x125)+_0x41d6a1[_0x2d79e4(0x699)]),this[_0x2d79e4(0x669)]['verbose'](this[_0x2d79e4(0x193)]+'\x20('+this[_0x2d79e4(0x78a)][_0x2d79e4(0x3ef)]+_0x2d79e4(0x54d)+JSON[_0x2d79e4(0x5ab)](_0x3fd834,null,0x2)),_0x3fd834&&U(this[_0x2d79e4(0x193)],_0x2d79e4(0x812),{'chat':_0x3fd834});}catch(_0x1bfa3f){this['logger'][_0x2d79e4(0x5c5)](this[_0x2d79e4(0x193)]+'\x20('+this['instance'][_0x2d79e4(0x3ef)]+_0x2d79e4(0x3cc)+(_0x1bfa3f instanceof Error?_0x1bfa3f[_0x2d79e4(0x334)]:JSON[_0x2d79e4(0x5ab)](_0x1bfa3f,null,0x2)));}}async[a0_0x98996d(0x266)](_0x1e2e0e){const _0x4673d9=a0_0x98996d;try{this[_0x4673d9(0x669)]['verbose'](this['instanceName']+'\x20('+this[_0x4673d9(0x78a)][_0x4673d9(0x3ef)]+_0x4673d9(0x5e4));let _0x22e032=_0x1e2e0e[_0x4673d9(0x5d1)](/\D/g,''),_0x27d41c=this[_0x4673d9(0x227)]['flows']['find'](_0x4cea1c=>_0x4cea1c[_0x4673d9(0x60e)]===_0x22e032);if(_0x27d41c||(this['logger'][_0x4673d9(0x2a0)](this[_0x4673d9(0x193)]+'\x20('+this['instance'][_0x4673d9(0x3ef)]+_0x4673d9(0x6ee)),_0x27d41c=this[_0x4673d9(0x227)]['flows'][_0x4673d9(0x704)](_0x10b5cd=>_0x10b5cd[_0x4673d9(0x36a)]===!0x0)),!_0x27d41c)return this[_0x4673d9(0x669)][_0x4673d9(0x2a0)](this[_0x4673d9(0x193)]+'\x20('+this['instance']['wuid']+_0x4673d9(0x718)),null;let _0x607af2=await this[_0x4673d9(0x50b)][_0x4673d9(0x1e0)][_0x4673d9(0x218)]({'where':{'_id':_0x27d41c[_0x4673d9(0x699)]}});if(!_0x607af2||!_0x607af2[_0x4673d9(0x7bc)]?.['includes'](this['instance'][_0x4673d9(0x3ef)]))throw this[_0x4673d9(0x669)]['error'](this['instanceName']+'\x20('+this['instance'][_0x4673d9(0x3ef)]+_0x4673d9(0x6bd)+_0x607af2['_id']+_0x4673d9(0x558)),new m('Flow\x20\x27'+_0x607af2[_0x4673d9(0x699)]+_0x4673d9(0x558));return _0x607af2;}catch(_0x5af6c3){return this[_0x4673d9(0x669)][_0x4673d9(0x5c5)](this[_0x4673d9(0x193)]+'\x20('+this[_0x4673d9(0x78a)][_0x4673d9(0x3ef)]+_0x4673d9(0x129)+(_0x5af6c3 instanceof Error?_0x5af6c3[_0x4673d9(0x334)]:JSON[_0x4673d9(0x5ab)](_0x5af6c3,null,0x2))),null;}}async[a0_0x98996d(0x67a)](_0x61073e,_0xc3595a){const _0x3160db=a0_0x98996d;try{let _0x3b528d=!!_0xc3595a['vote'],_0x5eff18=_0xc3595a['quoted'],_0x3a3403=null;if(this[_0x3160db(0x669)][_0x3160db(0x2a0)](this[_0x3160db(0x193)]+'\x20('+this['instance'][_0x3160db(0x3ef)]+'):\x20isVote:\x20'+_0x3b528d+_0x3160db(0x7cd)+_0x5eff18),_0x3b528d){this['logger'][_0x3160db(0x2a0)](this['instanceName']+'\x20('+this[_0x3160db(0x78a)][_0x3160db(0x3ef)]+'):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto');let _0xa87c65={'where':{'remoteJid':_0x61073e,'waitingMenu_id':_0x5eff18}};if(_0x3a3403=await this[_0x3160db(0x50b)][_0x3160db(0x265)][_0x3160db(0x218)](_0xa87c65,this[_0x3160db(0x78a)][_0x3160db(0x3ef)]),!_0x3a3403)return this[_0x3160db(0x669)][_0x3160db(0x2a0)](this[_0x3160db(0x193)]+'\x20('+this['instance'][_0x3160db(0x3ef)]+_0x3160db(0x69b)),null;let _0x1bc0a0=Date['now'](),_0xce4cea=_0x3a3403?.[_0x3160db(0x3b2)]||0x0,_0x11d708=_0x1bc0a0-_0xce4cea*0x3c*0x3e8;if(_0x3a3403['lastInteraction']<_0x11d708){this[_0x3160db(0x669)][_0x3160db(0x2a0)](this['instanceName']+'\x20('+this[_0x3160db(0x78a)][_0x3160db(0x3ef)]+_0x3160db(0x64a));let _0x57427e={'number':_0x3a3403[_0x3160db(0x5d9)],'options':{'delay':0x0},'textMessage':{'text':_0x3a3403['waitingMenu_ExpiredMessage']}};await this[_0x3160db(0x6d4)](_0x57427e);let _0x110834={'status':'closed','waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x3160db(0x50b)][_0x3160db(0x265)]['updateOne'](_0x3a3403[_0x3160db(0x699)],_0x110834,this[_0x3160db(0x78a)][_0x3160db(0x3ef)]),null;}return _0x3a3403[_0x3160db(0x439)]=Date['now'](),_0x3a3403['chatLog'][_0x3160db(0x708)]=_0xc3595a,_0x3a3403;}else{this[_0x3160db(0x669)][_0x3160db(0x2a0)](this['instanceName']+'\x20('+this[_0x3160db(0x78a)][_0x3160db(0x3ef)]+'):\x20'+this[_0x3160db(0x78a)][_0x3160db(0x3ef)]+_0x3160db(0x1ed)),this['logger'][_0x3160db(0x2a0)](this[_0x3160db(0x193)]+'\x20('+this[_0x3160db(0x78a)][_0x3160db(0x3ef)]+_0x3160db(0x7e7));let _0x4234ef={'where':{'remoteJid':_0x61073e,'status':_0x3160db(0x29d)}};if(_0x3a3403=await this[_0x3160db(0x50b)][_0x3160db(0x265)]['findOne'](_0x4234ef,this[_0x3160db(0x78a)]['wuid']),!_0x3a3403){let _0x36c331=await this['findFlow'](_0x61073e);if(_0x36c331&&(_0x3a3403=await this[_0x3160db(0x2d8)](_0x36c331,_0xc3595a[_0x3160db(0x328)],_0xc3595a)),!_0x3a3403)return null;}let _0x21a923=Date[_0x3160db(0x4a3)](),_0x47c68d=_0x3a3403?.[_0x3160db(0x3b2)]||0x0,_0x1a4b58=_0x21a923-_0x47c68d*0x3c*0x3e8;if(this[_0x3160db(0x669)][_0x3160db(0x2a0)](this[_0x3160db(0x193)]+'\x20('+this[_0x3160db(0x78a)][_0x3160db(0x3ef)]+_0x3160db(0x652)+_0x21a923+_0x3160db(0x644)+_0x47c68d+_0x3160db(0x634)+_0x1a4b58),this[_0x3160db(0x669)][_0x3160db(0x2a0)](this[_0x3160db(0x193)]+'\x20('+this[_0x3160db(0x78a)][_0x3160db(0x3ef)]+_0x3160db(0x4c1)),this[_0x3160db(0x669)][_0x3160db(0x2a0)](this['instanceName']+'\x20('+this[_0x3160db(0x78a)][_0x3160db(0x3ef)]+_0x3160db(0x4a2)+_0x3a3403['lastInteraction']),this[_0x3160db(0x669)]['verbose'](this[_0x3160db(0x193)]+'\x20('+this[_0x3160db(0x78a)]['wuid']+'):\x20expirationTime:\x20'+_0x1a4b58),_0x3a3403[_0x3160db(0x439)]<_0x1a4b58){this[_0x3160db(0x669)][_0x3160db(0x2a0)](this[_0x3160db(0x193)]+'\x20('+this[_0x3160db(0x78a)][_0x3160db(0x3ef)]+'):\x20Conversa\x20est\x20expirada');let _0x1dc881=await this[_0x3160db(0x266)](_0x61073e);if(_0x1dc881===null)return null;_0x3a3403&&await this[_0x3160db(0x50b)][_0x3160db(0x265)][_0x3160db(0x1f8)](_0x3a3403[_0x3160db(0x699)],{'status':_0x3160db(0x76e)},this[_0x3160db(0x78a)][_0x3160db(0x3ef)]),_0x3a3403=await this[_0x3160db(0x2d8)](_0x1dc881,_0xc3595a[_0x3160db(0x328)],_0xc3595a);}return _0x3a3403[_0x3160db(0x439)]=_0x21a923,_0x3a3403[_0x3160db(0x2a6)][_0x3160db(0x708)]=_0xc3595a,_0x3a3403;}}catch(_0x3bd2ab){return this[_0x3160db(0x669)][_0x3160db(0x5c5)](this[_0x3160db(0x193)]+'\x20('+this['instance'][_0x3160db(0x3ef)]+_0x3160db(0x3ee)+(_0x3bd2ab instanceof Error?_0x3bd2ab['message']:JSON[_0x3160db(0x5ab)](_0x3bd2ab,null,0x2))),null;}}async[a0_0x98996d(0x2d8)](_0x586c1d,_0xfc8ead,_0x3b31b8){const _0xc88997=a0_0x98996d;this[_0xc88997(0x669)][_0xc88997(0x2a0)](this[_0xc88997(0x193)]+'\x20('+this['instance'][_0xc88997(0x3ef)]+'):\x20Criando\x20nova\x20conversa[createNewConversation]');try{let _0x228d4e=require('mongodb')[_0xc88997(0x4cf)],_0x435030=Date[_0xc88997(0x4a3)](),_0x4d7334=_0xc88997(0x507),_0x596681=_0xfc8ead['fromMe']?null:_0x3b31b8,_0x5370f3=_0xfc8ead[_0xc88997(0x1a7)]?_0x3b31b8:null,_0x5dc46a=_0xfc8ead['remoteJid'],_0x2eb22f=this[_0xc88997(0x227)][_0xc88997(0x24d)][_0xc88997(0x704)](_0x4f3304=>_0x4f3304[_0xc88997(0x699)]===_0x586c1d[_0xc88997(0x699)]?.[_0xc88997(0x191)]()),_0xcdd4a5=_0x2eb22f?.[_0xc88997(0x3b2)]??_0x586c1d['minutesToClose']??0x0,_0x59aea3=_0x2eb22f?.[_0xc88997(0x183)]??_0x586c1d[_0xc88997(0x183)]??!0x1;await this[_0xc88997(0x180)](_0x5dc46a);let _0x152ba7={'flowId':_0x586c1d[_0xc88997(0x699)],..._0x586c1d,'chatLog':null},_0x1fae24=await this['variablesToObject'](_0x152ba7[_0xc88997(0x68f)]),_0x3ed05c=await this[_0xc88997(0x28a)](_0x5dc46a),_0x17ca5c={..._0x1fae24,..._0x3ed05c,'_remoteJid':_0x5dc46a},_0x2a394e={'lastReceivedMessage':_0x596681,'lastSendMessage':_0x5370f3,'lastBlockId':_0x4d7334,'lastCondition':!0x0,'realVariables':_0x17ca5c};_0x152ba7[_0xc88997(0x2a6)]=_0x2a394e,delete _0x152ba7['_id'],_0x152ba7[_0xc88997(0x699)]=new _0x228d4e(),_0x152ba7['lastInteraction']=_0x435030,_0x152ba7[_0xc88997(0x7ce)]=_0xc88997(0x29d),_0x152ba7[_0xc88997(0x5d9)]=_0x5dc46a,_0x152ba7[_0xc88997(0x3b2)]=_0xcdd4a5,_0x152ba7[_0xc88997(0x183)]=_0x59aea3;let _0x37adf4=await this['repository'][_0xc88997(0x265)][_0xc88997(0x1f8)](_0x152ba7[_0xc88997(0x699)],_0x152ba7,this[_0xc88997(0x78a)][_0xc88997(0x3ef)]);return this['logger'][_0xc88997(0x2a0)](this['instanceName']+'\x20('+this['instance'][_0xc88997(0x3ef)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x37adf4?_0x152ba7:null;}catch(_0x4ff1bf){return this[_0xc88997(0x669)][_0xc88997(0x5c5)](this[_0xc88997(0x193)]+'\x20('+this['instance'][_0xc88997(0x3ef)]+_0xc88997(0x552)+(_0x4ff1bf instanceof Error?_0x4ff1bf[_0xc88997(0x334)]:JSON[_0xc88997(0x5ab)](_0x4ff1bf,null,0x2))),_0x4ff1bf;}}async[a0_0x98996d(0x546)](_0x37df24,_0x2db2bf){const _0x3b6928=a0_0x98996d;let _0x1c7d78=_0x37df24[_0x3b6928(0x5d9)];_0x2db2bf[_0x3b6928(0x2f6)]['remoteJid']&&_0x2db2bf[_0x3b6928(0x2f6)][_0x3b6928(0x5d9)][_0x3b6928(0x317)]()!==''&&(_0x1c7d78=_0x2db2bf[_0x3b6928(0x2f6)][_0x3b6928(0x5d9)][_0x3b6928(0x317)]()),this['logger'][_0x3b6928(0x2a0)](this[_0x3b6928(0x193)]+'\x20('+this['instance'][_0x3b6928(0x3ef)]+'):\x20Enviando\x20texto');let _0x4b48c1={'number':_0x1c7d78,'options':{'delay':_0x2db2bf[_0x3b6928(0x2f6)][_0x3b6928(0x260)],'linkPreview':_0x2db2bf[_0x3b6928(0x2f6)][_0x3b6928(0x339)]},'textMessage':{'text':_0x2db2bf[_0x3b6928(0x2f6)][_0x3b6928(0x673)]}};try{let _0x541821=await this[_0x3b6928(0x6d4)](_0x4b48c1);if(_0x541821){let _0x140ecf={'_id':_0x541821['key']['id'],'_fromMe':_0x541821[_0x3b6928(0x328)][_0x3b6928(0x1a7)],'_remoteJid':_0x541821[_0x3b6928(0x328)]['remoteJid']},_0x2c291b=(0x0,w[_0x3b6928(0x495)])(_0x541821[_0x3b6928(0x334)]),_0x469dd3=(0x0,w['getContentType'])(_0x2c291b);_0x37df24['chatLog']['lastBlockId']=_0x2db2bf['_id'][_0x3b6928(0x191)]();let {message_normalized:_0x19da5b}=this[_0x3b6928(0x742)](_0x2c291b,_0x469dd3,null);_0x37df24[_0x3b6928(0x2a6)][_0x3b6928(0x6a4)]=await _0x19da5b;let _0x276219={'messageId':_0x541821[_0x3b6928(0x328)]['id']},_0x491b0d=_0x37df24[_0x3b6928(0x2a6)][_0x3b6928(0x56f)];Object['assign'](_0x491b0d,_0x140ecf),_0x37df24[_0x3b6928(0x2a6)][_0x3b6928(0x56f)]=_0x491b0d,this['updateConversation'](_0x37df24,_0x2db2bf,_0x276219);}else{let _0x3177bc={'error':!0x0};this[_0x3b6928(0x65f)](_0x37df24,_0x2db2bf,_0x3177bc),this[_0x3b6928(0x669)][_0x3b6928(0x5c5)](this[_0x3b6928(0x193)]+'\x20('+this[_0x3b6928(0x78a)]['wuid']+_0x3b6928(0x7ed));}}catch(_0x4ae3d6){let _0x489b12={'error':!0x0,'errorLog':_0x4ae3d6[_0x3b6928(0x191)]()};this[_0x3b6928(0x65f)](_0x37df24,_0x2db2bf,_0x489b12),this[_0x3b6928(0x669)][_0x3b6928(0x5c5)](this[_0x3b6928(0x193)]+'\x20('+this['instance']['wuid']+_0x3b6928(0x71f)+(_0x4ae3d6 instanceof Error?_0x4ae3d6[_0x3b6928(0x334)]:JSON[_0x3b6928(0x5ab)](_0x4ae3d6,null,0x2)));}}async[a0_0x98996d(0x2e9)](_0x5762d8,_0x12f076){const _0x3071b5=a0_0x98996d;let _0x12dbbc=_0x5762d8[_0x3071b5(0x5d9)];_0x12f076[_0x3071b5(0x2f6)]['remoteJid']&&_0x12f076[_0x3071b5(0x2f6)][_0x3071b5(0x5d9)]['trim']()!==''&&(_0x12dbbc=_0x12f076[_0x3071b5(0x2f6)][_0x3071b5(0x5d9)][_0x3071b5(0x317)]()),this['logger']['verbose'](this[_0x3071b5(0x193)]+'\x20('+this['instance'][_0x3071b5(0x3ef)]+_0x3071b5(0x282));let _0x579bc3={'number':_0x12dbbc,'options':{'delay':_0x12f076[_0x3071b5(0x2f6)][_0x3071b5(0x260)],'linkPreview':_0x12f076['uazapi'][_0x3071b5(0x339)]},'mediaMessage':{'mediatype':_0x12f076[_0x3071b5(0x2f6)]['mediatype'],'caption':_0x12f076[_0x3071b5(0x2f6)][_0x3071b5(0x27a)],'media':_0x12f076['uazapi'][_0x3071b5(0x36d)],'fileName':_0x12f076[_0x3071b5(0x2f6)]['fileName']}};try{let _0x248eda=await this['mediaMessage'](_0x579bc3);if(_0x248eda){let _0x394806={'_id':_0x248eda[_0x3071b5(0x328)]['id'],'_fromMe':_0x248eda[_0x3071b5(0x328)][_0x3071b5(0x1a7)],'_remoteJid':_0x248eda[_0x3071b5(0x328)][_0x3071b5(0x5d9)]},_0x5badde=(0x0,w[_0x3071b5(0x495)])(_0x248eda[_0x3071b5(0x334)]),_0x6ce615=(0x0,w['getContentType'])(_0x5badde);_0x5762d8[_0x3071b5(0x2a6)][_0x3071b5(0x74c)]=_0x12f076[_0x3071b5(0x699)][_0x3071b5(0x191)]();let {message_normalized:_0x9525fe}=this['normalizeMessage'](_0x5badde,_0x6ce615,null);_0x5762d8[_0x3071b5(0x2a6)]['lastSendMessage']=await _0x9525fe;let _0x874ed4={'messageId':_0x248eda['key']['id']},_0x35e87a=_0x5762d8[_0x3071b5(0x2a6)][_0x3071b5(0x56f)];Object[_0x3071b5(0x382)](_0x35e87a,_0x394806),_0x5762d8[_0x3071b5(0x2a6)][_0x3071b5(0x56f)]=_0x35e87a,this[_0x3071b5(0x65f)](_0x5762d8,_0x12f076,_0x874ed4);}else{let _0x1b6aac={'error':!0x0};this[_0x3071b5(0x65f)](_0x5762d8,_0x12f076,_0x1b6aac),this[_0x3071b5(0x669)][_0x3071b5(0x5c5)](this['instanceName']+'\x20('+this[_0x3071b5(0x78a)][_0x3071b5(0x3ef)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia.');}}catch(_0xb0af93){let _0x408ee7={'error':!0x0,'errorLog':_0xb0af93[_0x3071b5(0x191)]()};this[_0x3071b5(0x65f)](_0x5762d8,_0x12f076,_0x408ee7),this[_0x3071b5(0x669)]['error'](this[_0x3071b5(0x193)]+'\x20('+this[_0x3071b5(0x78a)][_0x3071b5(0x3ef)]+_0x3071b5(0x161)+(_0xb0af93 instanceof Error?_0xb0af93[_0x3071b5(0x334)]:JSON[_0x3071b5(0x5ab)](_0xb0af93,null,0x2)));}}async[a0_0x98996d(0x4d1)](_0x47afc4,_0x397aab){const _0x65f08c=a0_0x98996d;let _0x510696=_0x47afc4[_0x65f08c(0x5d9)];_0x397aab[_0x65f08c(0x2f6)]['remoteJid']&&_0x397aab[_0x65f08c(0x2f6)][_0x65f08c(0x5d9)][_0x65f08c(0x317)]()!==''&&(_0x510696=_0x397aab['uazapi'][_0x65f08c(0x5d9)][_0x65f08c(0x317)]()),this[_0x65f08c(0x669)]['verbose'](this[_0x65f08c(0x193)]+'\x20('+this[_0x65f08c(0x78a)][_0x65f08c(0x3ef)]+_0x65f08c(0x304));let _0x2bd3c3={'number':_0x510696,'options':{'delay':_0x397aab[_0x65f08c(0x2f6)][_0x65f08c(0x260)]},'locationMessage':{'name':_0x397aab[_0x65f08c(0x2f6)]['name'],'address':_0x397aab[_0x65f08c(0x2f6)][_0x65f08c(0x728)],'latitude':_0x397aab[_0x65f08c(0x2f6)]['latitude'],'longitude':_0x397aab[_0x65f08c(0x2f6)][_0x65f08c(0x730)]}};try{let _0x4b4760=await this[_0x65f08c(0x3be)](_0x2bd3c3);if(_0x4b4760){let _0x295849={'_id':_0x4b4760[_0x65f08c(0x328)]['id'],'_fromMe':_0x4b4760[_0x65f08c(0x328)]['fromMe'],'_remoteJid':_0x4b4760[_0x65f08c(0x328)]['remoteJid']},_0xf8fee9=(0x0,w[_0x65f08c(0x495)])(_0x4b4760[_0x65f08c(0x334)]),_0x1f6978=(0x0,w[_0x65f08c(0x6fd)])(_0xf8fee9);_0x47afc4[_0x65f08c(0x2a6)][_0x65f08c(0x74c)]=_0x397aab[_0x65f08c(0x699)]['toString']();let {message_normalized:_0x1f2a5a}=this[_0x65f08c(0x742)](_0xf8fee9,_0x1f6978,null);_0x47afc4[_0x65f08c(0x2a6)][_0x65f08c(0x6a4)]=await _0x1f2a5a;let _0x130de3={'messageId':_0x4b4760[_0x65f08c(0x328)]['id']},_0x443820=_0x47afc4['chatLog']['realVariables'];Object[_0x65f08c(0x382)](_0x443820,_0x295849),_0x47afc4[_0x65f08c(0x2a6)]['realVariables']=_0x443820,this['updateConversation'](_0x47afc4,_0x397aab,_0x130de3);}else{let _0x20ff94={'error':!0x0};this[_0x65f08c(0x65f)](_0x47afc4,_0x397aab,_0x20ff94),this[_0x65f08c(0x669)][_0x65f08c(0x5c5)](this[_0x65f08c(0x193)]+'\x20('+this[_0x65f08c(0x78a)][_0x65f08c(0x3ef)]+_0x65f08c(0x796));}}catch(_0x377e0b){let _0x186b67={'error':!0x0,'errorLog':_0x377e0b[_0x65f08c(0x191)]()};this['updateConversation'](_0x47afc4,_0x397aab,_0x186b67),this['logger'][_0x65f08c(0x5c5)](this[_0x65f08c(0x193)]+'\x20('+this['instance'][_0x65f08c(0x3ef)]+_0x65f08c(0x577)+(_0x377e0b instanceof Error?_0x377e0b[_0x65f08c(0x334)]:JSON[_0x65f08c(0x5ab)](_0x377e0b,null,0x2)));}}async[a0_0x98996d(0x684)](_0x39393a,_0x53fcdb){const _0x4bd592=a0_0x98996d;let _0x3eb5bc=_0x39393a[_0x4bd592(0x5d9)];_0x53fcdb[_0x4bd592(0x2f6)]['remoteJid']&&_0x53fcdb[_0x4bd592(0x2f6)]['remoteJid'][_0x4bd592(0x317)]()!==''&&(_0x3eb5bc=_0x53fcdb[_0x4bd592(0x2f6)][_0x4bd592(0x5d9)][_0x4bd592(0x317)]()),this[_0x4bd592(0x669)][_0x4bd592(0x2a0)](this[_0x4bd592(0x193)]+'\x20('+this['instance']['wuid']+'):\x20Enviando\x20udio');let _0x3aa146={'number':_0x3eb5bc,'options':{'delay':_0x53fcdb[_0x4bd592(0x2f6)][_0x4bd592(0x260)]},'audioMessage':{'audio':_0x53fcdb[_0x4bd592(0x2f6)][_0x4bd592(0x767)]}};try{let _0xa1bbdc=await this[_0x4bd592(0x60c)](_0x3aa146);if(_0xa1bbdc){let _0x33f23e={'_id':_0xa1bbdc[_0x4bd592(0x328)]['id'],'_fromMe':_0xa1bbdc[_0x4bd592(0x328)]['fromMe'],'_remoteJid':_0xa1bbdc[_0x4bd592(0x328)][_0x4bd592(0x5d9)]},_0x3ab059=(0x0,w['normalizeMessageContent'])(_0xa1bbdc[_0x4bd592(0x334)]),_0x40e997=(0x0,w[_0x4bd592(0x6fd)])(_0x3ab059);_0x39393a['chatLog'][_0x4bd592(0x74c)]=_0x53fcdb[_0x4bd592(0x699)][_0x4bd592(0x191)]();let {message_normalized:_0x512379}=this[_0x4bd592(0x742)](_0x3ab059,_0x40e997,null);_0x39393a['chatLog']['lastSendMessage']=await _0x512379;let _0x2cce36={'messageId':_0xa1bbdc[_0x4bd592(0x328)]['id']},_0x73cc02=_0x39393a[_0x4bd592(0x2a6)][_0x4bd592(0x56f)];Object[_0x4bd592(0x382)](_0x73cc02,_0x33f23e),_0x39393a['chatLog'][_0x4bd592(0x56f)]=_0x73cc02,this[_0x4bd592(0x65f)](_0x39393a,_0x53fcdb,_0x2cce36);}else{let _0x3755b6={'error':!0x0};this[_0x4bd592(0x65f)](_0x39393a,_0x53fcdb,_0x3755b6),this[_0x4bd592(0x669)]['error'](this['instanceName']+'\x20('+this[_0x4bd592(0x78a)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio.');}}catch(_0xabbfec){let _0x28536b={'error':!0x0,'errorLog':_0xabbfec[_0x4bd592(0x191)]()};this[_0x4bd592(0x65f)](_0x39393a,_0x53fcdb,_0x28536b),this[_0x4bd592(0x669)][_0x4bd592(0x5c5)](this['instanceName']+'\x20('+this['instance'][_0x4bd592(0x3ef)]+_0x4bd592(0x341)+(_0xabbfec instanceof Error?_0xabbfec[_0x4bd592(0x334)]:JSON[_0x4bd592(0x5ab)](_0xabbfec,null,0x2)));}}async[a0_0x98996d(0x3e6)](_0xc45ebb,_0x124fa2){const _0x2be4d8=a0_0x98996d;let _0x24dfab=_0xc45ebb[_0x2be4d8(0x5d9)];_0x124fa2[_0x2be4d8(0x2f6)][_0x2be4d8(0x5d9)]&&_0x124fa2[_0x2be4d8(0x2f6)][_0x2be4d8(0x5d9)][_0x2be4d8(0x317)]()!==''&&(_0x24dfab=_0x124fa2[_0x2be4d8(0x2f6)]['remoteJid']['trim']()),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x2be4d8(0x78a)][_0x2be4d8(0x3ef)]+_0x2be4d8(0x5d2));let _0x3a6840={'number':_0x24dfab,'options':{'delay':_0x124fa2[_0x2be4d8(0x2f6)][_0x2be4d8(0x260)]},'contactMessage':[{'fullName':_0x124fa2[_0x2be4d8(0x2f6)][_0x2be4d8(0x34a)],'phoneNumber':_0x124fa2[_0x2be4d8(0x2f6)][_0x2be4d8(0x759)]}]};try{let _0x577e86=await this[_0x2be4d8(0x6df)](_0x3a6840);if(_0x577e86){let _0x216a7e={'_id':_0x577e86[_0x2be4d8(0x328)]['id'],'_fromMe':_0x577e86['key'][_0x2be4d8(0x1a7)],'_remoteJid':_0x577e86[_0x2be4d8(0x328)][_0x2be4d8(0x5d9)]},_0x32c36a=(0x0,w[_0x2be4d8(0x495)])(_0x577e86[_0x2be4d8(0x334)]),_0x50c9cf=(0x0,w['getContentType'])(_0x32c36a);_0xc45ebb[_0x2be4d8(0x2a6)][_0x2be4d8(0x74c)]=_0x124fa2['_id'][_0x2be4d8(0x191)]();let {message_normalized:_0x7d6a50}=this[_0x2be4d8(0x742)](_0x32c36a,_0x50c9cf,null);_0xc45ebb[_0x2be4d8(0x2a6)]['lastSendMessage']=await _0x7d6a50;let _0x38a8c1={'messageId':_0x577e86[_0x2be4d8(0x328)]['id']},_0x189fb6=_0xc45ebb['chatLog'][_0x2be4d8(0x56f)];Object[_0x2be4d8(0x382)](_0x189fb6,_0x216a7e),_0xc45ebb['chatLog'][_0x2be4d8(0x56f)]=_0x189fb6,this[_0x2be4d8(0x65f)](_0xc45ebb,_0x124fa2,_0x38a8c1);}else{let _0x4cc0a7={'error':!0x0};this['updateConversation'](_0xc45ebb,_0x124fa2,_0x4cc0a7),this[_0x2be4d8(0x669)][_0x2be4d8(0x5c5)](this[_0x2be4d8(0x193)]+'\x20('+this['instance']['wuid']+_0x2be4d8(0x4cb));}}catch(_0x440a0f){let _0x13efa8={'error':!0x0,'errorLog':_0x440a0f[_0x2be4d8(0x191)]()};this['updateConversation'](_0xc45ebb,_0x124fa2,_0x13efa8),this['logger']['error'](this[_0x2be4d8(0x193)]+'\x20('+this[_0x2be4d8(0x78a)][_0x2be4d8(0x3ef)]+_0x2be4d8(0x585)+(_0x440a0f instanceof Error?_0x440a0f[_0x2be4d8(0x334)]:JSON[_0x2be4d8(0x5ab)](_0x440a0f,null,0x2)));}}[a0_0x98996d(0x306)](_0x52777b,_0x332748){const _0x2d9a46=a0_0x98996d;for(let _0x42addd of _0x52777b)_0x42addd['option']&&(_0x42addd[_0x2d9a46(0x755)]=this['replaceVariables'](_0x42addd['option'],_0x332748)),_0x42addd['optionDescription']&&(_0x42addd[_0x2d9a46(0x6fb)]=this[_0x2d9a46(0x202)](_0x42addd[_0x2d9a46(0x6fb)],_0x332748));}async[a0_0x98996d(0x47d)](_0x2e3c7d,_0x3c9ab0){const _0x593ef1=a0_0x98996d;let _0x4e89ee=_0x2e3c7d[_0x593ef1(0x5d9)];_0x3c9ab0['uazapi'][_0x593ef1(0x5d9)]&&_0x3c9ab0['uazapi'][_0x593ef1(0x5d9)][_0x593ef1(0x317)]()!==''&&(_0x4e89ee=_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x5d9)][_0x593ef1(0x317)]()),this[_0x593ef1(0x669)][_0x593ef1(0x2a0)](this['instanceName']+'\x20('+this['instance'][_0x593ef1(0x3ef)]+'):\x20Enviando\x20enquete');let _0x3fb431=_0x2e3c7d[_0x593ef1(0x15a)][_0x593ef1(0x29b)](_0x343958=>_0x343958[_0x593ef1(0x4d3)]===_0x3c9ab0['_id'])[_0x593ef1(0x3ac)]((_0x2872d0,_0x22c94e)=>_0x2872d0[_0x593ef1(0x2fd)]-_0x22c94e['order']);this['replaceVariablesInReplyOptions'](_0x3fb431,_0x2e3c7d[_0x593ef1(0x2a6)][_0x593ef1(0x56f)]);let _0x4fab0b=_0x3fb431['map'](_0x59f33=>_0x59f33[_0x593ef1(0x755)]),_0x3681b4={'number':_0x4e89ee,'menuMessage':{'type':_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x364)]||_0x593ef1(0x53a),'text':_0x3c9ab0['uazapi'][_0x593ef1(0x673)]||_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x592)],'footerText':_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x1ea)],'buttonText':_0x3c9ab0['uazapi'][_0x593ef1(0x560)],'selectableCount':0x1,'choices':_0x4fab0b},'options':{'delay':_0x3c9ab0['uazapi'][_0x593ef1(0x260)]}};try{let _0x3574fc=await this[_0x593ef1(0x48f)](_0x3681b4);if(_0x3574fc){let _0x3932cf={'_id':_0x3574fc[_0x593ef1(0x328)]['id'],'_fromMe':_0x3574fc[_0x593ef1(0x328)][_0x593ef1(0x1a7)],'_remoteJid':_0x3574fc['key']['remoteJid']};_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x39e)]===!0x0&&(_0x2e3c7d[_0x593ef1(0x7ce)]=_0x593ef1(0x345),this[_0x593ef1(0x669)][_0x593ef1(0x2a0)](this['instanceName']+'\x20('+this[_0x593ef1(0x78a)][_0x593ef1(0x3ef)]+_0x593ef1(0x75e)+_0x2e3c7d[_0x593ef1(0x7ce)])),this[_0x593ef1(0x669)][_0x593ef1(0x2a0)](this[_0x593ef1(0x193)]+'\x20('+this[_0x593ef1(0x78a)][_0x593ef1(0x3ef)]+'):\x20nextBlock.uazapi.name'+(_0x3c9ab0['uazapi']['name']||_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x673)])),_0x2e3c7d[_0x593ef1(0x16e)]=_0x3574fc['key']['id'],_0x2e3c7d[_0x593ef1(0x539)]=_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x592)]||_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x673)],_0x2e3c7d[_0x593ef1(0x3dd)]=_0x3fb431,_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x52e)]&&(_0x2e3c7d['waitingMenu_ExpiredMessage']=_0x3c9ab0[_0x593ef1(0x2f6)][_0x593ef1(0x52e)]),this[_0x593ef1(0x669)][_0x593ef1(0x2a0)](this['instanceName']+'\x20('+this[_0x593ef1(0x78a)]['wuid']+'):\x20conversation.waitingMenu_name'+_0x2e3c7d[_0x593ef1(0x539)]);let _0x6b317f=(0x0,w[_0x593ef1(0x495)])(_0x3574fc[_0x593ef1(0x334)]),_0x35fa6a=(0x0,w['getContentType'])(_0x6b317f);_0x2e3c7d[_0x593ef1(0x2a6)][_0x593ef1(0x74c)]=_0x3c9ab0[_0x593ef1(0x699)][_0x593ef1(0x191)]();let {message_normalized:_0x3d51fb}=this[_0x593ef1(0x742)](_0x6b317f,_0x35fa6a,null);_0x2e3c7d[_0x593ef1(0x2a6)][_0x593ef1(0x6a4)]=await _0x3d51fb;let _0x212ed8={'messageId':_0x3574fc[_0x593ef1(0x328)]['id']},_0x5a1e21=_0x2e3c7d[_0x593ef1(0x2a6)][_0x593ef1(0x56f)];Object[_0x593ef1(0x382)](_0x5a1e21,_0x3932cf),_0x2e3c7d[_0x593ef1(0x2a6)][_0x593ef1(0x56f)]=_0x5a1e21,this[_0x593ef1(0x65f)](_0x2e3c7d,_0x3c9ab0,_0x212ed8);}else{let _0x4e3597={'error':!0x0};this[_0x593ef1(0x65f)](_0x2e3c7d,_0x3c9ab0,_0x4e3597),this[_0x593ef1(0x669)][_0x593ef1(0x5c5)](this[_0x593ef1(0x193)]+'\x20('+this[_0x593ef1(0x78a)][_0x593ef1(0x3ef)]+_0x593ef1(0x7db));}}catch(_0x503789){let _0x2ccaea={'error':!0x0,'errorLog':_0x503789 instanceof Error?_0x503789[_0x593ef1(0x334)]:JSON[_0x593ef1(0x5ab)](_0x503789,null,0x2)};this[_0x593ef1(0x65f)](_0x2e3c7d,_0x3c9ab0,_0x2ccaea),this['logger']['error'](this[_0x593ef1(0x193)]+'\x20('+this[_0x593ef1(0x78a)][_0x593ef1(0x3ef)]+_0x593ef1(0x1a0)+(_0x503789 instanceof Error?_0x503789[_0x593ef1(0x334)]:JSON[_0x593ef1(0x5ab)](_0x503789,null,0x2)));}}async[a0_0x98996d(0x15c)](_0x4aa682,_0x35cfca){const _0x49282d=a0_0x98996d;this[_0x49282d(0x669)][_0x49282d(0x2a0)](this[_0x49282d(0x193)]+'\x20('+this[_0x49282d(0x78a)][_0x49282d(0x3ef)]+_0x49282d(0x207));let _0x349746=_0x4aa682[_0x49282d(0x2a6)]['blockLogs'][_0x49282d(0x704)](_0x4c6463=>_0x4c6463[_0x49282d(0x4d3)][_0x49282d(0x191)]()===_0x35cfca['uazapi'][_0x49282d(0x4d3)][_0x49282d(0x191)]()),_0x10b4e8={'id':_0x349746[_0x49282d(0x772)],'remoteJid':_0x349746['remoteJid'],'fromMe':_0x349746[_0x49282d(0x1a7)]};try{let _0x231d68=await this[_0x49282d(0x65c)](_0x10b4e8);if(_0x231d68){let _0x3e522e=(0x0,w['normalizeMessageContent'])(_0x231d68['message']),_0x5292a2=(0x0,w['getContentType'])(_0x3e522e);_0x4aa682[_0x49282d(0x2a6)][_0x49282d(0x74c)]=_0x35cfca[_0x49282d(0x699)][_0x49282d(0x191)]();let {message_normalized:_0x2741dc}=this[_0x49282d(0x742)](_0x3e522e,_0x5292a2,null);_0x4aa682[_0x49282d(0x2a6)][_0x49282d(0x6a4)]=await _0x2741dc;let _0x14b52f={};this[_0x49282d(0x65f)](_0x4aa682,_0x35cfca,_0x14b52f);}else{let _0x373c48={'error':!0x0};this['updateConversation'](_0x4aa682,_0x35cfca,_0x373c48),this['logger']['error'](this[_0x49282d(0x193)]+'\x20('+this[_0x49282d(0x78a)]['wuid']+'):\x20Falha\x20ao\x20deletar\x20mensagem.');}}catch(_0x351ddd){let _0x2c3f32={'error':!0x0,'errorLog':_0x351ddd instanceof Error?_0x351ddd[_0x49282d(0x334)]:JSON['stringify'](_0x351ddd,null,0x2)};this[_0x49282d(0x65f)](_0x4aa682,_0x35cfca,_0x2c3f32),this[_0x49282d(0x669)][_0x49282d(0x5c5)](this[_0x49282d(0x193)]+'\x20('+this[_0x49282d(0x78a)][_0x49282d(0x3ef)]+_0x49282d(0x4ad)+(_0x351ddd instanceof Error?_0x351ddd['message']:JSON[_0x49282d(0x5ab)](_0x351ddd,null,0x2)));}}async[a0_0x98996d(0x3a5)](_0x123a2f,_0x463161){const _0xe24c1=a0_0x98996d;if(_0x123a2f[_0xe24c1(0x592)]||(_0x123a2f['name']=(0x0,Y['v4'])()),_0x463161!==Ni&&_0x123a2f?.[_0xe24c1(0x6be)])throw new m(_0xe24c1(0x6b3));if(_0xe24c1(0x699)in _0x123a2f&&'owner'in _0x123a2f)return this[_0xe24c1(0x5cd)](_0x123a2f['owner'],_0x123a2f[_0xe24c1(0x699)]);this[_0xe24c1(0x669)]['verbose'](this['instanceName']+'\x20('+this[_0xe24c1(0x78a)][_0xe24c1(0x3ef)]+_0xe24c1(0x2c1));let _0x3349ba=this['getUniqueFlowName'](_0x123a2f['name']),_0x51cad4=new pe[(_0xe24c1(0x316))][(_0xe24c1(0x4cf))](),_0x5bc0db={'_id':_0x51cad4,'default':!0x0,'title':_0xe24c1(0x2e1),'x':0x0,'y':0x0},_0x105765={'_id':new pe[(_0xe24c1(0x316))][(_0xe24c1(0x4cf))](),'order':0x1,'groupId':_0x51cad4[_0xe24c1(0x191)](),'type':'start'},_0x216717=this[_0xe24c1(0x78a)][_0xe24c1(0x3ef)],_0x3e407b={'_id':(0x0,Y['v4'])(),'owner':_0x216717,'name':_0x3349ba,'whoCanEdit':[_0x216717],'whoCanUse':[_0x216717],'groups':[_0x5bc0db],'blocks':[_0x105765],..._0x123a2f};try{let _0x377b9e=await this['repository']['flow'][_0xe24c1(0x32e)](_0x3e407b);return await this['synchronizeAndMapFlows'](),_0x377b9e;}catch(_0xbd6f91){let _0x112585=_0xe24c1(0x6c7),_0x3e90d1=_0xbd6f91 instanceof Error?_0xbd6f91[_0xe24c1(0x334)]:typeof _0xbd6f91==_0xe24c1(0x623)?JSON[_0xe24c1(0x5ab)](_0xbd6f91):_0xbd6f91,_0x5d3dfe=_0x112585+':\x20'+_0x3e90d1;throw this[_0xe24c1(0x669)][_0xe24c1(0x5c5)](this[_0xe24c1(0x193)]+'\x20('+this[_0xe24c1(0x78a)][_0xe24c1(0x3ef)]+'):\x20'+_0x5d3dfe),new m(_0x5d3dfe);}}async[a0_0x98996d(0x5cd)](_0x378961,_0x462151){const _0x58e65d=a0_0x98996d;try{this['logger'][_0x58e65d(0x2a0)](this[_0x58e65d(0x193)]+'\x20('+this[_0x58e65d(0x78a)]['wuid']+_0x58e65d(0x492));let _0x4f07c3=await this[_0x58e65d(0x50b)][_0x58e65d(0x1e0)][_0x58e65d(0x218)]({'where':{'_id':_0x462151,'owner':_0x378961}});if(!_0x4f07c3)throw new m(_0x58e65d(0x219));if(_0x4f07c3['shareFlow']===!0x1&&!_0x4f07c3[_0x58e65d(0x6be)])throw new m('Esse\x20fluxo\x20no\x20permite\x20importao.');let _0x3ffd54=new Set(_0x4f07c3['whoCanUse']??[]);_0x3ffd54[_0x58e65d(0x712)](this[_0x58e65d(0x78a)][_0x58e65d(0x3ef)]);let _0x49ef24=await this[_0x58e65d(0x50b)]['flow']['updateOne'](_0x462151,{..._0x4f07c3,'whoCanUse':Array[_0x58e65d(0x54e)](_0x3ffd54)});return await this[_0x58e65d(0x1e7)](),_0x49ef24;}catch(_0x5e5a9e){let _0x5ee265=_0x58e65d(0x21f),_0x40e890=_0x5e5a9e instanceof Error?_0x5e5a9e[_0x58e65d(0x334)]:typeof _0x5e5a9e=='object'?JSON[_0x58e65d(0x5ab)](_0x5e5a9e):_0x5e5a9e,_0x44929f=_0x5ee265+':\x20'+_0x40e890;throw this[_0x58e65d(0x669)][_0x58e65d(0x5c5)](this['instanceName']+'\x20('+this[_0x58e65d(0x78a)][_0x58e65d(0x3ef)]+_0x58e65d(0x526)+_0x44929f),new m(_0x44929f);}}[a0_0x98996d(0x76c)](_0x223c06){const _0x1b95fd=a0_0x98996d;let _0x3f740f=_0x223c06,_0x1be996=0x1;for(;this['AutomateSystem'][_0x1b95fd(0x24d)][_0x1b95fd(0x6f9)](_0x110874=>_0x110874[_0x1b95fd(0x592)]===_0x3f740f);)_0x1be996++,_0x3f740f=_0x223c06+'\x20('+_0x1be996+')';return _0x3f740f;}async[a0_0x98996d(0x44f)](_0x1d8b69){const _0x2bd23e=a0_0x98996d;try{if(this[_0x2bd23e(0x669)]['verbose'](this[_0x2bd23e(0x193)]+'\x20('+this[_0x2bd23e(0x78a)][_0x2bd23e(0x3ef)]+'):\x20\x27Deletando\x20fluxo,\x20id:\x20'+_0x1d8b69[_0x2bd23e(0x699)]+_0x2bd23e(0x30e)+_0x1d8b69[_0x2bd23e(0x724)]),!this[_0x2bd23e(0x227)][_0x2bd23e(0x24d)][_0x2bd23e(0x704)](_0x35ea53=>_0x35ea53[_0x2bd23e(0x699)]===_0x1d8b69[_0x2bd23e(0x699)]))throw this[_0x2bd23e(0x669)][_0x2bd23e(0x2a0)](this[_0x2bd23e(0x193)]+'\x20('+this[_0x2bd23e(0x78a)][_0x2bd23e(0x3ef)]+'):\x20Fluxo\x20\x27'+_0x1d8b69[_0x2bd23e(0x699)]+'\x27\x20no\x20encontrado'),new m(_0x2bd23e(0x6ac));let _0x3cbab0=await this[_0x2bd23e(0x50b)][_0x2bd23e(0x1e0)][_0x2bd23e(0x218)]({'where':{'_id':_0x1d8b69[_0x2bd23e(0x699)]}});if(!_0x3cbab0)throw new m(_0x2bd23e(0x58b));if(this[_0x2bd23e(0x78a)]['wuid']===_0x3cbab0['owner']){this[_0x2bd23e(0x669)][_0x2bd23e(0x2a0)](this['instanceName']+'\x20('+this['instance'][_0x2bd23e(0x3ef)]+_0x2bd23e(0x15f)+_0x1d8b69[_0x2bd23e(0x699)]+_0x2bd23e(0x35e));let _0x10890d=await this[_0x2bd23e(0x50b)]['flow'][_0x2bd23e(0x326)]({'where':{'_id':_0x1d8b69[_0x2bd23e(0x699)]}});return await this[_0x2bd23e(0x1e7)](),_0x10890d;}return this[_0x2bd23e(0x669)][_0x2bd23e(0x2a0)](this[_0x2bd23e(0x193)]+'\x20('+this[_0x2bd23e(0x78a)][_0x2bd23e(0x3ef)]+'):\x20Removendo\x20\x27'+this['instance'][_0x2bd23e(0x3ef)]+_0x2bd23e(0x4c9)+_0x1d8b69['_id']+'\x27...'),_0x3cbab0[_0x2bd23e(0x7bc)]=(_0x3cbab0[_0x2bd23e(0x7bc)]??[])[_0x2bd23e(0x29b)](_0x265e13=>_0x265e13!==this[_0x2bd23e(0x78a)][_0x2bd23e(0x3ef)]),_0x3cbab0[_0x2bd23e(0x17c)]=(_0x3cbab0[_0x2bd23e(0x17c)]??[])[_0x2bd23e(0x29b)](_0x2ef50c=>_0x2ef50c!==this['instance'][_0x2bd23e(0x3ef)]),_0x3cbab0[_0x2bd23e(0x17c)][_0x2bd23e(0x217)]===0x0&&_0x3cbab0[_0x2bd23e(0x7bc)][_0x2bd23e(0x217)]>0x0&&(_0x3cbab0[_0x2bd23e(0x17c)][_0x2bd23e(0x69d)](_0x3cbab0[_0x2bd23e(0x7bc)][0x0]),this[_0x2bd23e(0x669)]['verbose'](this['instanceName']+'\x20('+this[_0x2bd23e(0x78a)][_0x2bd23e(0x3ef)]+_0x2bd23e(0x417)+_0x3cbab0['whoCanUse'][0x0]+'\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27'+_0x1d8b69[_0x2bd23e(0x699)]+_0x2bd23e(0x7f5))),await this[_0x2bd23e(0x50b)][_0x2bd23e(0x1e0)][_0x2bd23e(0x1f8)](_0x3cbab0[_0x2bd23e(0x699)],_0x3cbab0),await this[_0x2bd23e(0x1e7)](),{'message':_0x2bd23e(0x150)+_0x1d8b69['name']+_0x2bd23e(0x543)};}catch(_0x4a8d9c){return this[_0x2bd23e(0x669)][_0x2bd23e(0x5c5)](this[_0x2bd23e(0x193)]+'\x20('+this[_0x2bd23e(0x78a)]['wuid']+_0x2bd23e(0x823)+(_0x4a8d9c instanceof Error?_0x4a8d9c[_0x2bd23e(0x334)]:JSON[_0x2bd23e(0x5ab)](_0x4a8d9c,null,0x2))),{'message':_0x2bd23e(0x711)+(_0x4a8d9c instanceof Error?_0x4a8d9c[_0x2bd23e(0x334)]:JSON[_0x2bd23e(0x5ab)](_0x4a8d9c,null,0x2))};}}async[a0_0x98996d(0x283)](_0x24d85d){const _0x253d94=a0_0x98996d;try{if(this[_0x253d94(0x669)][_0x253d94(0x22b)](this[_0x253d94(0x193)]+'\x20('+this[_0x253d94(0x78a)][_0x253d94(0x3ef)]+_0x253d94(0x1df)+_0x24d85d),!this[_0x253d94(0x227)]&&(await this['getAutomateSystem'](),!this[_0x253d94(0x227)]))return null;let _0x4aa7ab=await this[_0x253d94(0x50b)][_0x253d94(0x1e0)][_0x253d94(0x218)]({'where':{'_id':_0x24d85d}});if(!_0x4aa7ab)throw new m(_0x253d94(0x36c)+_0x24d85d+_0x253d94(0x1c3));if(!(_0x4aa7ab[_0x253d94(0x6be)]||_0x4aa7ab[_0x253d94(0x7bc)]?.[_0x253d94(0x199)](this['instance']['wuid'])))throw new m(_0x253d94(0x586)+name+'\x27');_0x4aa7ab[_0x253d94(0x6be)]&&!_0x4aa7ab[_0x253d94(0x7bc)]?.[_0x253d94(0x199)](this[_0x253d94(0x78a)]['wuid'])&&(_0x4aa7ab[_0x253d94(0x7bc)]=[..._0x4aa7ab[_0x253d94(0x7bc)]??[],this['instance'][_0x253d94(0x3ef)]],await this['repository'][_0x253d94(0x1e0)][_0x253d94(0x1f8)](_0x4aa7ab[_0x253d94(0x699)],_0x4aa7ab),this['synchronizeAndMapFlows']());let _0x2b1d5e=this['AutomateSystem']?.[_0x253d94(0x52b)]['map'](_0x521d03=>_0x521d03[_0x253d94(0x592)]),_0x318e07=['nome','nomecompleto',_0x253d94(0x6b2),_0x253d94(0x653),_0x253d94(0x7ce),_0x253d94(0x845),_0x253d94(0x256),_0x253d94(0x6e6),'etiquetas',_0x253d94(0x45f),'atendimentoAberto'];_0x4aa7ab[_0x253d94(0x68f)]=_0x4aa7ab[_0x253d94(0x68f)][_0x253d94(0x29b)](_0x52e127=>!(_0x52e127[_0x253d94(0x7cb)]===_0x253d94(0x5b0)||_0x52e127[_0x253d94(0x5b0)])),_0x318e07[_0x253d94(0x15b)](_0x2adddc=>{const _0x1ccca9=_0x253d94;_0x4aa7ab[_0x1ccca9(0x68f)][_0x1ccca9(0x69d)]({'folder':_0x1ccca9(0x5b0),'name':_0x2adddc,'value':'','doc':'','leadInfo':!0x0});}),_0x2b1d5e['forEach'](_0x1a2c33=>{const _0x4344fd=_0x253d94;let _0x484d9a=_0x4aa7ab['variables'][_0x4344fd(0x806)](_0x230d76=>_0x230d76[_0x4344fd(0x592)]===_0x1a2c33);_0x484d9a===-0x1?_0x4aa7ab[_0x4344fd(0x68f)]['push']({'folder':_0x4344fd(0x5b0),'name':_0x1a2c33,'value':'','doc':'','leadInfo':!0x0}):(_0x4aa7ab[_0x4344fd(0x68f)][_0x484d9a]['folder']=_0x4344fd(0x5b0),_0x4aa7ab['variables'][_0x484d9a][_0x4344fd(0x5b0)]=!0x0);}),_0x4aa7ab[_0x253d94(0x740)]&&_0x4aa7ab[_0x253d94(0x740)]['length']>0x0&&_0x4aa7ab[_0x253d94(0x740)]['forEach'](_0x21b7d9=>{const _0x15993=_0x253d94;_0x21b7d9[_0x15993(0x4ae)]&&_0x21b7d9[_0x15993(0x239)]&&_0x21b7d9[_0x15993(0x4ae)]===_0x21b7d9[_0x15993(0x239)]&&(_0x21b7d9[_0x15993(0x239)]=null);});let _0x3b8c61=await this[_0x253d94(0x50b)]['flow']['updateOne'](_0x4aa7ab[_0x253d94(0x699)],_0x4aa7ab);if(!_0x3b8c61)throw new Error(_0x253d94(0x758));return _0x3b8c61;}catch(_0x5fffeb){let _0x5c5c19='Erro\x20ao\x20buscar\x20o\x20fluxo',_0x29f5f7=_0x5fffeb instanceof Error?_0x5fffeb[_0x253d94(0x334)]:typeof _0x5fffeb=='object'?JSON[_0x253d94(0x5ab)](_0x5fffeb):_0x5fffeb,_0x3f6fd5=_0x5c5c19+':\x20'+_0x29f5f7;throw this[_0x253d94(0x669)][_0x253d94(0x5c5)](this['instanceName']+'\x20('+this[_0x253d94(0x78a)][_0x253d94(0x3ef)]+_0x253d94(0x526)+_0x3f6fd5),new m(_0x3f6fd5);}}async[a0_0x98996d(0x28c)](){const _0x1264fd=a0_0x98996d;try{this[_0x1264fd(0x669)]['verbose'](this[_0x1264fd(0x193)]+'\x20('+this[_0x1264fd(0x78a)]['wuid']+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await this[_0x1264fd(0x1e7)]();let _0x30f352=await this[_0x1264fd(0x50b)][_0x1264fd(0x1e0)][_0x1264fd(0x2bf)]({'where':{'globalShow':!0x0}});return[...this[_0x1264fd(0x227)][_0x1264fd(0x24d)],..._0x30f352];}catch(_0x31b2f3){return this[_0x1264fd(0x669)][_0x1264fd(0x5c5)](this[_0x1264fd(0x193)]+'\x20('+this[_0x1264fd(0x78a)][_0x1264fd(0x3ef)]+_0x1264fd(0x14f)+(_0x31b2f3 instanceof Error?_0x31b2f3[_0x1264fd(0x334)]:JSON['stringify'](_0x31b2f3,null,0x2))),{'message':_0x1264fd(0x589)+(_0x31b2f3 instanceof Error?_0x31b2f3['message']:String(_0x31b2f3))};}}async[a0_0x98996d(0x811)](_0x3ae275,_0x5428a3){const _0x12ff85=a0_0x98996d;try{this[_0x12ff85(0x669)][_0x12ff85(0x2a0)](this[_0x12ff85(0x193)]+'\x20('+this['instance'][_0x12ff85(0x3ef)]+'):\x20Alterando\x20fluxo...');let _0x38e780=this[_0x12ff85(0x227)][_0x12ff85(0x24d)][_0x12ff85(0x704)](_0x2c3b89=>_0x2c3b89[_0x12ff85(0x699)]===_0x3ae275[_0x12ff85(0x699)]);if(!_0x38e780)throw this[_0x12ff85(0x669)][_0x12ff85(0x2a0)](this[_0x12ff85(0x193)]+'\x20('+this[_0x12ff85(0x78a)]['wuid']+'):\x20Fluxo\x20\x27'+_0x3ae275[_0x12ff85(0x699)]+_0x12ff85(0x7b7)),new m(_0x12ff85(0x6ac));let _0x4e86a1=await this[_0x12ff85(0x50b)][_0x12ff85(0x1e0)][_0x12ff85(0x218)]({'where':{'_id':_0x3ae275[_0x12ff85(0x699)]}});if(!_0x4e86a1||!_0x4e86a1[_0x12ff85(0x7bc)]?.['includes'](this['instance']['wuid']))throw this[_0x12ff85(0x669)]['error'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x12ff85(0x6bd)+_0x3ae275[_0x12ff85(0x699)]+_0x12ff85(0x558)),new m(_0x12ff85(0x302)+_0x3ae275[_0x12ff85(0x699)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');let _0x505e50=this[_0x12ff85(0x227)][_0x12ff85(0x24d)][_0x12ff85(0x806)](_0x594e2a=>_0x594e2a[_0x12ff85(0x699)]===_0x38e780[_0x12ff85(0x699)]);if(_0x505e50!==-0x1){let _0x98fa2f=this[_0x12ff85(0x227)]['flows'][_0x505e50];if(_0x98fa2f[_0x12ff85(0x592)]=_0x3ae275[_0x12ff85(0x592)]??_0x98fa2f['name'],_0x98fa2f[_0x12ff85(0x36a)]=_0x3ae275[_0x12ff85(0x36a)]??_0x98fa2f['default'],_0x98fa2f['testingWith']=_0x3ae275[_0x12ff85(0x60e)]??_0x98fa2f[_0x12ff85(0x60e)],_0x98fa2f[_0x12ff85(0x47f)]=_0x3ae275[_0x12ff85(0x2c3)]??_0x98fa2f['startCommand'],_0x98fa2f[_0x12ff85(0x3b2)]=_0x3ae275[_0x12ff85(0x3b2)]??_0x98fa2f[_0x12ff85(0x3b2)],_0x98fa2f[_0x12ff85(0x183)]=_0x3ae275['readMessages']??_0x98fa2f[_0x12ff85(0x183)],_0x3ae275[_0x12ff85(0x36a)]&&this['AutomateSystem'][_0x12ff85(0x24d)][_0x12ff85(0x15b)]((_0x543aa3,_0x17e0ca)=>{const _0x4d88a0=_0x12ff85;_0x17e0ca!==_0x505e50&&(_0x543aa3[_0x4d88a0(0x36a)]=!0x1);}),this[_0x12ff85(0x227)]['flows'][_0x505e50]=_0x98fa2f,!await this[_0x12ff85(0x50b)]['automateSystem'][_0x12ff85(0x7ae)]({'flows':this[_0x12ff85(0x227)][_0x12ff85(0x24d)]},this['instance']['wuid']))throw new m('Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.');}let _0x2f1774=[_0x12ff85(0x724),_0x12ff85(0x6c4),'sharePass','shareOwners'];for(let _0xe663a5 of _0x2f1774)delete _0x3ae275[_0xe663a5];if(_0x4e86a1[_0x12ff85(0x17c)]?.[_0x12ff85(0x199)](this['instance'][_0x12ff85(0x3ef)])||(_0x3ae275={'_id':_0x3ae275[_0x12ff85(0x699)]}),_0x5428a3!==Ni&&_0x3ae275?.[_0x12ff85(0x6be)]&&!_0x4e86a1?.['globalShow'])throw new m(_0x12ff85(0x7d3));let _0x3cc3e0=new Set(_0x3ae275[_0x12ff85(0x17c)]??_0x4e86a1[_0x12ff85(0x17c)]);_0x3cc3e0['add'](_0x4e86a1[_0x12ff85(0x850)]);let _0x1504b7=new Set(_0x3ae275[_0x12ff85(0x7bc)]??_0x4e86a1[_0x12ff85(0x7bc)]??[]);_0x3cc3e0['forEach'](_0x5ad5e3=>_0x1504b7[_0x12ff85(0x712)](_0x5ad5e3)),_0x1504b7['add'](_0x4e86a1['owner']),this[_0x12ff85(0x669)]['verbose'](this[_0x12ff85(0x193)]+'\x20('+this[_0x12ff85(0x78a)][_0x12ff85(0x3ef)]+_0x12ff85(0x5dc)+Array[_0x12ff85(0x54e)](_0x3cc3e0)),this[_0x12ff85(0x669)][_0x12ff85(0x2a0)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x12ff85(0x36b)+Array['from'](_0x1504b7));let _0x2d80fc=await this[_0x12ff85(0x6ce)](Array[_0x12ff85(0x54e)](_0x1504b7)),_0x3d37b2=Array['from'](_0x3cc3e0)[_0x12ff85(0x29b)](_0x3b9dc3=>_0x2d80fc[_0x12ff85(0x199)](_0x3b9dc3)),_0x204690=Array[_0x12ff85(0x54e)](_0x1504b7)[_0x12ff85(0x29b)](_0x2325cd=>_0x2d80fc[_0x12ff85(0x199)](_0x2325cd));this[_0x12ff85(0x669)]['verbose'](this[_0x12ff85(0x193)]+'\x20('+this[_0x12ff85(0x78a)][_0x12ff85(0x3ef)]+_0x12ff85(0x62a)+_0x3d37b2),this[_0x12ff85(0x669)]['verbose'](this[_0x12ff85(0x193)]+'\x20('+this['instance'][_0x12ff85(0x3ef)]+_0x12ff85(0x567)+_0x204690);let _0x497fb5={..._0x4e86a1,..._0x3ae275,'whoCanEdit':_0x3d37b2,'whoCanUse':_0x204690},_0x92030d=await this[_0x12ff85(0x50b)][_0x12ff85(0x1e0)][_0x12ff85(0x1f8)](_0x4e86a1[_0x12ff85(0x699)],_0x497fb5);return await this[_0x12ff85(0x1e7)](),_0x92030d;}catch(_0x5332e5){let _0x54ea2a=_0x12ff85(0x626),_0x4db536=_0x5332e5 instanceof Error?_0x5332e5[_0x12ff85(0x334)]:typeof _0x5332e5=='object'?JSON[_0x12ff85(0x5ab)](_0x5332e5):_0x5332e5,_0x234624=_0x54ea2a+':\x20'+_0x4db536;throw this['logger'][_0x12ff85(0x5c5)](this[_0x12ff85(0x193)]+'\x20('+this[_0x12ff85(0x78a)][_0x12ff85(0x3ef)]+_0x12ff85(0x526)+_0x234624),new m(_0x234624);}}async[a0_0x98996d(0x6ce)](_0x3531a3){const _0x32c7a3=a0_0x98996d;let _0x199c3b={'numbers':_0x3531a3};return(await this[_0x32c7a3(0x4bd)](_0x199c3b))[_0x32c7a3(0x29b)](_0x115ddc=>_0x115ddc[_0x32c7a3(0x693)])[_0x32c7a3(0x384)](_0x3e87f9=>_0x3e87f9[_0x32c7a3(0x3d9)])[_0x32c7a3(0x384)](_0x174b95=>this[_0x32c7a3(0x70d)](_0x174b95));}['extractPhoneNumber'](_0xf5ee69){const _0x50a3ce=a0_0x98996d;let _0x4510a3=_0xf5ee69[_0x50a3ce(0x132)](/\d+/);return _0x4510a3?_0x4510a3[0x0]:'';}async[a0_0x98996d(0x7c9)](_0x269b3e){const _0x739514=a0_0x98996d;try{if(this[_0x739514(0x669)][_0x739514(0x2a0)](this['instanceName']+'\x20('+this[_0x739514(0x78a)][_0x739514(0x3ef)]+_0x739514(0x237)),!this[_0x739514(0x227)]['flows']['find'](_0x534822=>_0x534822['_id']===_0x269b3e[_0x739514(0x699)]))throw this[_0x739514(0x669)]['verbose'](this[_0x739514(0x193)]+'\x20('+this['instance'][_0x739514(0x3ef)]+_0x739514(0x76d)+_0x269b3e['_id']+_0x739514(0x7b7)),new m(_0x739514(0x6ac));let _0x1ad1e8=await this[_0x739514(0x50b)][_0x739514(0x1e0)][_0x739514(0x218)]({'where':{'_id':_0x269b3e[_0x739514(0x699)]}});if(!_0x1ad1e8||!_0x1ad1e8[_0x739514(0x7bc)]?.[_0x739514(0x199)](this[_0x739514(0x78a)][_0x739514(0x3ef)]))throw this[_0x739514(0x669)][_0x739514(0x5c5)](this[_0x739514(0x193)]+'\x20('+this[_0x739514(0x78a)]['wuid']+'):\x20Flow\x20\x27'+_0x269b3e[_0x739514(0x699)]+_0x739514(0x558)),new m(_0x739514(0x302)+_0x269b3e['_id']+_0x739514(0x558));if(!_0x1ad1e8[_0x739514(0x17c)]?.[_0x739514(0x199)](this[_0x739514(0x78a)][_0x739514(0x3ef)]))throw new m(_0x739514(0x2bd));let {block:_0x20a446}=_0x269b3e;_0x20a446?.[_0x739514(0x625)]?this[_0x739514(0x3a4)](_0x1ad1e8,_0x269b3e):_0x20a446?.['delete']?this['deleteBlock'](_0x1ad1e8,_0x269b3e):_0x20a446['_id']?await this[_0x739514(0x65b)](_0x1ad1e8,_0x269b3e):this[_0x739514(0x780)](_0x1ad1e8,_0x269b3e);let _0x2fe1d3=await this[_0x739514(0x50b)][_0x739514(0x1e0)][_0x739514(0x1f8)](_0x1ad1e8[_0x739514(0x699)],_0x1ad1e8);if(!_0x2fe1d3)throw new Error(_0x739514(0x758));return _0x2fe1d3;}catch(_0x13c0af){this[_0x739514(0x51f)](_0x739514(0x55a)+_0x13c0af['message']);}}async[a0_0x98996d(0x3a4)](_0x5b9993,_0x569bc7){const _0x9ea575=a0_0x98996d;let _0x1a887b=_0x569bc7[_0x9ea575(0x5e9)][_0x9ea575(0x699)],_0x47f1a8=_0x5b9993[_0x9ea575(0x740)][_0x9ea575(0x704)](_0x2de97d=>_0x2de97d[_0x9ea575(0x699)][_0x9ea575(0x191)]()===_0x1a887b);if(!_0x47f1a8){this[_0x9ea575(0x669)][_0x9ea575(0x5c5)](this[_0x9ea575(0x193)]+'\x20('+this[_0x9ea575(0x78a)][_0x9ea575(0x3ef)]+'):\x20Bloco\x20com\x20ID\x20'+_0x1a887b+_0x9ea575(0x578));return;}this[_0x9ea575(0x669)][_0x9ea575(0x2a0)](this[_0x9ea575(0x193)]+'\x20('+this[_0x9ea575(0x78a)][_0x9ea575(0x3ef)]+'):\x20Bloco\x20original\x20para\x20cpia:\x20'+JSON[_0x9ea575(0x5ab)](_0x47f1a8));let _0x4da5c5=JSON[_0x9ea575(0x184)](JSON[_0x9ea575(0x5ab)](_0x47f1a8));_0x4da5c5['_id']=new pe[(_0x9ea575(0x36a))][(_0x9ea575(0x316))][(_0x9ea575(0x4cf))](),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x9ea575(0x78a)]['wuid']+_0x9ea575(0x19d)+JSON[_0x9ea575(0x5ab)](_0x4da5c5)),_0x5b9993['blocks'][_0x9ea575(0x69d)](_0x4da5c5),this[_0x9ea575(0x16c)](_0x5b9993[_0x9ea575(0x740)],_0x4da5c5[_0x9ea575(0x4ae)]);}['throwAndLogError'](_0xbbad35){const _0x16186e=a0_0x98996d;throw this[_0x16186e(0x669)]['error'](this['instanceName']+'\x20('+this[_0x16186e(0x78a)][_0x16186e(0x3ef)]+'):\x20'+_0xbbad35),new m(_0xbbad35);}[a0_0x98996d(0x323)](_0x141df9,_0x314104){const _0x26fe5a=a0_0x98996d;let {block:_0x3729e5}=_0x314104;if(_0x3729e5[_0x26fe5a(0x1b8)]===_0x26fe5a(0x507)){this['throwAndLogError'](_0x26fe5a(0x4ee));return;}if(!_0x3729e5[_0x26fe5a(0x699)]){this['throwAndLogError'](_0x26fe5a(0x2e3));return;}let _0x4ec2d9=_0x141df9[_0x26fe5a(0x740)]['find'](_0x4008aa=>_0x4008aa[_0x26fe5a(0x699)][_0x26fe5a(0x191)]()===_0x314104[_0x26fe5a(0x5e9)]['_id'][_0x26fe5a(0x191)]());if(!_0x4ec2d9){this[_0x26fe5a(0x51f)](_0x26fe5a(0x4d4)+_0x3729e5[_0x26fe5a(0x699)]+_0x26fe5a(0x5ee));return;}_0x141df9[_0x26fe5a(0x740)]=_0x141df9[_0x26fe5a(0x740)][_0x26fe5a(0x29b)](_0xc340b=>_0xc340b[_0x26fe5a(0x699)][_0x26fe5a(0x191)]()!==_0x314104[_0x26fe5a(0x5e9)][_0x26fe5a(0x699)][_0x26fe5a(0x191)]()),_0x141df9[_0x26fe5a(0x84c)]=_0x141df9['conditions'][_0x26fe5a(0x29b)](_0x43910a=>_0x43910a[_0x26fe5a(0x4d3)]!==_0x3729e5[_0x26fe5a(0x699)][_0x26fe5a(0x191)]()),_0x141df9[_0x26fe5a(0x516)]=_0x141df9['varedits'][_0x26fe5a(0x29b)](_0x2b4639=>_0x2b4639[_0x26fe5a(0x4d3)]!==_0x3729e5[_0x26fe5a(0x699)][_0x26fe5a(0x191)]()),_0x141df9[_0x26fe5a(0x15a)]=_0x141df9[_0x26fe5a(0x15a)][_0x26fe5a(0x29b)](_0x30345e=>_0x30345e[_0x26fe5a(0x4d3)]!==_0x3729e5['_id'][_0x26fe5a(0x191)]()),this['reorderBlocks'](_0x141df9[_0x26fe5a(0x740)],_0x4ec2d9[_0x26fe5a(0x4ae)]);}async[a0_0x98996d(0x65b)](_0x1b13b8,_0x3cba9c){const _0x18dcba=a0_0x98996d;let _0x1a4d7e=_0x1b13b8[_0x18dcba(0x740)][_0x18dcba(0x806)](_0x56e31b=>_0x56e31b[_0x18dcba(0x699)]['toString']()===_0x3cba9c['block'][_0x18dcba(0x699)][_0x18dcba(0x191)]());if(this[_0x18dcba(0x669)][_0x18dcba(0x2a0)](this[_0x18dcba(0x193)]+'\x20('+this[_0x18dcba(0x78a)][_0x18dcba(0x3ef)]+_0x18dcba(0x58f)+_0x1a4d7e),_0x1a4d7e===-0x1){this[_0x18dcba(0x669)][_0x18dcba(0x2a0)](_0x18dcba(0x4d4)+_0x3cba9c['block'][_0x18dcba(0x699)]+_0x18dcba(0x53b));return;}if(_0x1b13b8['blocks'][_0x1a4d7e][_0x18dcba(0x1b8)]===_0x18dcba(0x507)){let _0x9ae6c1=Object[_0x18dcba(0x58d)](_0x3cba9c[_0x18dcba(0x5e9)]);if(_0x9ae6c1[_0x18dcba(0x217)]>0x2||_0x9ae6c1[_0x18dcba(0x217)]===0x2&&!_0x9ae6c1[_0x18dcba(0x199)](_0x18dcba(0x239))){this[_0x18dcba(0x51f)]('Somente\x20\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padro');return;}}let _0x443680=_0x1b13b8['blocks'][_0x1a4d7e][_0x18dcba(0x4ae)];for(let _0x3adb71 in _0x3cba9c[_0x18dcba(0x5e9)])_0x3cba9c[_0x18dcba(0x5e9)]['hasOwnProperty'](_0x3adb71)&&(_0x1b13b8['blocks'][_0x1a4d7e][_0x3adb71]=_0x3cba9c[_0x18dcba(0x5e9)][_0x3adb71]);if(this[_0x18dcba(0x669)][_0x18dcba(0x2a0)](this[_0x18dcba(0x193)]+'\x20('+this[_0x18dcba(0x78a)]['wuid']+_0x18dcba(0x71b)+JSON[_0x18dcba(0x5ab)](_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e])),_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x786)]&&'header'in _0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x786)]){this['logger'][_0x18dcba(0x2a0)](this['instanceName']+'\x20('+this[_0x18dcba(0x78a)][_0x18dcba(0x3ef)]+_0x18dcba(0x212));let _0x52c5dc=JSON['stringify'](_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e]['apirequest'][_0x18dcba(0x4f9)],null,0x1);_0x52c5dc[_0x18dcba(0x217)]>0x2&&(_0x52c5dc=_0x52c5dc[_0x18dcba(0x3da)](0x1,_0x52c5dc[_0x18dcba(0x217)]-0x1)['trim']()),_0x1b13b8['blocks'][_0x1a4d7e][_0x18dcba(0x786)][_0x18dcba(0x1b2)]=_0x52c5dc;}if(_0x1b13b8['blocks'][_0x1a4d7e][_0x18dcba(0x786)]&&'body'in _0x1b13b8['blocks'][_0x1a4d7e]['apirequest']&&!(_0x18dcba(0x77a)in _0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x786)])){this[_0x18dcba(0x669)][_0x18dcba(0x2a0)](this[_0x18dcba(0x193)]+'\x20('+this[_0x18dcba(0x78a)][_0x18dcba(0x3ef)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e]['apirequest'][_0x18dcba(0x7eb)]=!0x1;let _0x52f5c6=JSON[_0x18dcba(0x5ab)](_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x786)][_0x18dcba(0x13e)],null,0x2);_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x786)][_0x18dcba(0x77a)]=_0x52f5c6;}if(_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e]['apirequest']&&_0x18dcba(0x77a)in _0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x786)]){_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x786)][_0x18dcba(0x7eb)]=!0x1;let _0x2a6cb4=_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e]['apirequest']['bodyString'],_0x55e6ef=this[_0x18dcba(0x465)](_0x2a6cb4);_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x786)][_0x18dcba(0x77a)]=_0x55e6ef[_0x18dcba(0x3cd)],_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x786)][_0x18dcba(0x7eb)]=_0x55e6ef['error'];}let _0x3187a4=_0x1b13b8[_0x18dcba(0x740)][_0x1a4d7e][_0x18dcba(0x4ae)];_0x443680!==_0x3187a4?(this[_0x18dcba(0x16c)](_0x1b13b8['blocks'],_0x443680),this[_0x18dcba(0x16c)](_0x1b13b8[_0x18dcba(0x740)],_0x3187a4)):this['reorderBlocks'](_0x1b13b8['blocks'],_0x443680);}[a0_0x98996d(0x465)](_0x1b2d6d){const _0x4e11d6=a0_0x98996d;let _0x1c62df='\u205f',_0x23c8bf=!0x1,_0xaf18='';for(let _0x4c79bd=0x0;_0x4c79bd<_0x1b2d6d['length'];_0x4c79bd++){let _0x4bd911=_0x1b2d6d[_0x4c79bd];_0x4bd911==='\x22'&&(_0x4c79bd===0x0||_0x1b2d6d[_0x4c79bd-0x1]!=='\x5c')&&(_0x23c8bf=!_0x23c8bf),!(!_0x23c8bf&&(_0x4bd911==='\x0a'||_0x4bd911==='\x20'||_0x4bd911===_0x1c62df))&&(_0xaf18+=_0x4bd911);}let _0x14caf1={},_0x128244=9876543210.1234,_0x479567=_0xaf18['replace'](/\{\{([^}]+)\}\}/g,_0x4d1b95=>{let _0x5c0b95=_0x4d1b95,_0x4054e6=''+_0x128244;return _0x14caf1[_0x4054e6]=_0x5c0b95,_0x128244+=0.0001,_0x4054e6;}),_0x4c6d3c='',_0x10bf38=!0x1;try{let _0x525aeb=JSON[_0x4e11d6(0x184)](_0x479567);_0x4c6d3c=JSON['stringify'](_0x525aeb,null,0x2),_0x4c6d3c=_0x4c6d3c[_0x4e11d6(0x5d1)](/\n( +)/g,(_0x5dd0c6,_0x1c7dc2)=>{let _0x4070a6=_0x1c7dc2['length'];return'\x0a'+_0x1c62df['repeat'](_0x4070a6*0x2);}),_0x4c6d3c=_0x4c6d3c['replace'](/(\d{10,}\.\d+)/g,_0x3a4a17=>_0x14caf1[_0x3a4a17]||_0x3a4a17);}catch(_0xb91dd7){this[_0x4e11d6(0x669)][_0x4e11d6(0x5c5)](_0x4e11d6(0x22e)+_0xb91dd7),_0x4c6d3c=_0x1b2d6d,_0x10bf38=!0x0;}return{'result':_0x4c6d3c,'error':_0x10bf38};}[a0_0x98996d(0x780)](_0x2736ef,_0x17a820){const _0x338102=a0_0x98996d;if(_0x17a820[_0x338102(0x5e9)][_0x338102(0x1b8)]==='start'){this['throwAndLogError'](_0x338102(0x29c));return;}if(_0x17a820[_0x338102(0x5e9)][_0x338102(0x786)]&&_0x338102(0x4f9)in _0x17a820['block'][_0x338102(0x786)]){this[_0x338102(0x669)][_0x338102(0x2a0)](this[_0x338102(0x193)]+'\x20('+this[_0x338102(0x78a)][_0x338102(0x3ef)]+_0x338102(0x212));let _0x37d3ba=JSON[_0x338102(0x5ab)](_0x17a820[_0x338102(0x5e9)]['apirequest'][_0x338102(0x4f9)],null,0x1);_0x37d3ba[_0x338102(0x217)]>0x2&&(_0x37d3ba=_0x37d3ba['substring'](0x1,_0x37d3ba['length']-0x1)['trim']()),_0x17a820[_0x338102(0x5e9)][_0x338102(0x786)][_0x338102(0x1b2)]=_0x37d3ba;}_0x17a820['block'][_0x338102(0x786)]&&_0x338102(0x13e)in _0x17a820[_0x338102(0x5e9)]['apirequest']&&(this[_0x338102(0x669)][_0x338102(0x2a0)](this[_0x338102(0x193)]+'\x20('+this['instance'][_0x338102(0x3ef)]+_0x338102(0x131)),_0x17a820['block'][_0x338102(0x786)][_0x338102(0x77a)]=JSON[_0x338102(0x5ab)](_0x17a820[_0x338102(0x5e9)]['apirequest']['body'],null,0x1)['trim']()),_0x2736ef[_0x338102(0x740)][_0x338102(0x69d)](_0x17a820[_0x338102(0x5e9)]),this[_0x338102(0x16c)](_0x2736ef['blocks'],_0x17a820['block'][_0x338102(0x4ae)]);}[a0_0x98996d(0x16c)](_0x4fc31d,_0x1da5ce){const _0x1658c5=a0_0x98996d;let _0xf703e7=_0x4fc31d[_0x1658c5(0x29b)](_0x41038b=>_0x41038b[_0x1658c5(0x4ae)]===_0x1da5ce);_0xf703e7['sort']((_0x460a63,_0x2c4551)=>_0x460a63[_0x1658c5(0x2fd)]-_0x2c4551[_0x1658c5(0x2fd)]),_0xf703e7[_0x1658c5(0x15b)]((_0xb79135,_0x263103)=>_0xb79135[_0x1658c5(0x2fd)]=_0x263103+0x1);}async[a0_0x98996d(0x46a)](_0x438ff4){const _0x54be9d=a0_0x98996d;try{if(this[_0x54be9d(0x669)]['verbose'](this['instanceName']+'\x20('+this[_0x54be9d(0x78a)][_0x54be9d(0x3ef)]+_0x54be9d(0x36e)),!_0x438ff4||!_0x438ff4[_0x54be9d(0x618)]){this[_0x54be9d(0x51f)]('Data\x20invlida\x20fornecida');return;}if(!this[_0x54be9d(0x227)][_0x54be9d(0x24d)][_0x54be9d(0x704)](_0x37f12e=>_0x37f12e[_0x54be9d(0x699)]===_0x438ff4[_0x54be9d(0x699)]))throw this[_0x54be9d(0x669)]['verbose'](this[_0x54be9d(0x193)]+'\x20('+this[_0x54be9d(0x78a)][_0x54be9d(0x3ef)]+_0x54be9d(0x76d)+_0x438ff4[_0x54be9d(0x699)]+_0x54be9d(0x7b7)),new m(_0x54be9d(0x6ac));let _0x4ea62e=await this[_0x54be9d(0x50b)][_0x54be9d(0x1e0)][_0x54be9d(0x218)]({'where':{'_id':_0x438ff4[_0x54be9d(0x699)]}});if(!_0x4ea62e||!_0x4ea62e[_0x54be9d(0x7bc)]?.[_0x54be9d(0x199)](this['instance'][_0x54be9d(0x3ef)]))throw this[_0x54be9d(0x669)]['error'](this['instanceName']+'\x20('+this[_0x54be9d(0x78a)][_0x54be9d(0x3ef)]+_0x54be9d(0x6bd)+_0x438ff4['_id']+_0x54be9d(0x558)),new m(_0x54be9d(0x302)+_0x438ff4[_0x54be9d(0x699)]+_0x54be9d(0x558));if(!_0x4ea62e['whoCanEdit']?.[_0x54be9d(0x199)](this[_0x54be9d(0x78a)][_0x54be9d(0x3ef)]))throw new m(_0x54be9d(0x2bd));let {replyOption:_0x4687e7}=_0x438ff4;_0x4687e7?.['delete']?(this[_0x54be9d(0x6ef)](_0x4ea62e,_0x438ff4),this['reorderReplyOptions'](_0x4ea62e[_0x54be9d(0x15a)],_0x438ff4[_0x54be9d(0x618)][_0x54be9d(0x4d3)])):_0x4687e7['_id']?(await this['updateReplyOption'](_0x4ea62e,_0x438ff4),this[_0x54be9d(0x40e)](_0x4ea62e[_0x54be9d(0x15a)],_0x438ff4[_0x54be9d(0x618)][_0x54be9d(0x4d3)])):(this['addReplyOption'](_0x4ea62e,_0x438ff4),this[_0x54be9d(0x40e)](_0x4ea62e[_0x54be9d(0x15a)],_0x438ff4[_0x54be9d(0x618)][_0x54be9d(0x4d3)]));let _0x43c0b0=await this[_0x54be9d(0x50b)]['flow'][_0x54be9d(0x1f8)](_0x4ea62e[_0x54be9d(0x699)],_0x4ea62e);if(!_0x43c0b0)throw new Error(_0x54be9d(0x758));return _0x43c0b0;}catch(_0x11009f){this[_0x54be9d(0x51f)](_0x54be9d(0x134)+_0x11009f);}}['reorderReplyOptions'](_0xcf9bb,_0x3ee70c){const _0x2818fb=a0_0x98996d;_0xcf9bb[_0x2818fb(0x15b)](_0x55dcc5=>{const _0x1b2926=_0x2818fb;_0x55dcc5[_0x1b2926(0x4d3)]===_0x3ee70c&&_0x55dcc5[_0x1b2926(0x2fd)]===void 0x0&&(_0x55dcc5[_0x1b2926(0x2fd)]=0x270f);});let _0x55468e=_0xcf9bb[_0x2818fb(0x29b)](_0x4e2506=>_0x4e2506[_0x2818fb(0x4d3)]===_0x3ee70c);_0x55468e[_0x2818fb(0x3ac)]((_0x4f723e,_0xb1861e)=>_0x4f723e[_0x2818fb(0x2fd)]-_0xb1861e[_0x2818fb(0x2fd)]),_0x55468e[_0x2818fb(0x15b)]((_0x5d4bd7,_0x1a259b)=>{const _0x118d27=_0x2818fb;_0x5d4bd7[_0x118d27(0x2fd)]=_0x1a259b+0x1;}),_0xcf9bb['forEach'](_0x55ebb0=>{const _0x5b537c=_0x2818fb;if(_0x55ebb0[_0x5b537c(0x4d3)]===_0x3ee70c){let _0x39047b=_0x55468e[_0x5b537c(0x704)](_0x40c778=>_0x40c778[_0x5b537c(0x699)]&&_0x55ebb0['_id']&&_0x40c778[_0x5b537c(0x699)][_0x5b537c(0x191)]()===_0x55ebb0[_0x5b537c(0x699)][_0x5b537c(0x191)]());_0x39047b&&(_0x55ebb0['order']=_0x39047b[_0x5b537c(0x2fd)]);}});}[a0_0x98996d(0x6ef)](_0x1b193b,_0x14bf0e){const _0x485b1c=a0_0x98996d;let {replyOption:_0x5c46be}=_0x14bf0e;if(!_0x5c46be[_0x485b1c(0x699)]){this['throwAndLogError']('replyOptionId\x20\x20necessrio\x20para\x20deletar\x20um\x20replyOption');return;}if(!_0x1b193b[_0x485b1c(0x15a)][_0x485b1c(0x704)](_0x221f34=>_0x221f34[_0x485b1c(0x699)][_0x485b1c(0x191)]()===_0x14bf0e[_0x485b1c(0x618)][_0x485b1c(0x699)][_0x485b1c(0x191)]())){this[_0x485b1c(0x51f)](_0x485b1c(0x64d)+_0x5c46be[_0x485b1c(0x699)]+_0x485b1c(0x5ee));return;}_0x1b193b[_0x485b1c(0x15a)]=_0x1b193b['replyOptions'][_0x485b1c(0x29b)](_0x55859d=>_0x55859d['_id'][_0x485b1c(0x191)]()!==_0x14bf0e['replyOption'][_0x485b1c(0x699)]['toString']());}async[a0_0x98996d(0x3f8)](_0x54ffd7,_0x3a47c3){const _0x1a089d=a0_0x98996d;let _0x2aa45c=_0x54ffd7[_0x1a089d(0x15a)][_0x1a089d(0x806)](_0x527654=>_0x527654['_id']['toString']()===_0x3a47c3['replyOption'][_0x1a089d(0x699)][_0x1a089d(0x191)]());if(_0x2aa45c===-0x1){this['throwAndLogError'](_0x1a089d(0x64d)+_0x3a47c3[_0x1a089d(0x618)][_0x1a089d(0x699)]+_0x1a089d(0x53b));return;}for(let _0x1e74f5 in _0x3a47c3['replyOption'])_0x3a47c3['replyOption'][_0x1a089d(0x489)](_0x1e74f5)&&(_0x54ffd7['replyOptions'][_0x2aa45c][_0x1e74f5]=_0x3a47c3[_0x1a089d(0x618)][_0x1e74f5]);}[a0_0x98996d(0x278)](_0xe7ca9a,_0x51797b){_0xe7ca9a['replyOptions']['push'](_0x51797b['replyOption']);}async[a0_0x98996d(0x5ad)](_0x55aa9a){const _0x3f6b65=a0_0x98996d;this[_0x3f6b65(0x669)][_0x3f6b65(0x2a0)](this['instanceName']+'\x20('+this[_0x3f6b65(0x78a)][_0x3f6b65(0x3ef)]+'):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20'+JSON[_0x3f6b65(0x5ab)](_0x55aa9a,null,0x2));try{if(this['logger'][_0x3f6b65(0x2a0)](this[_0x3f6b65(0x193)]+'\x20('+this[_0x3f6b65(0x78a)]['wuid']+_0x3f6b65(0x446)),!this[_0x3f6b65(0x227)][_0x3f6b65(0x24d)][_0x3f6b65(0x704)](_0x1e5653=>_0x1e5653[_0x3f6b65(0x699)]===_0x55aa9a[_0x3f6b65(0x699)]))throw this[_0x3f6b65(0x669)][_0x3f6b65(0x2a0)](this[_0x3f6b65(0x193)]+'\x20('+this[_0x3f6b65(0x78a)][_0x3f6b65(0x3ef)]+'):\x20Fluxo\x20\x27'+_0x55aa9a['_id']+_0x3f6b65(0x7b7)),new m(_0x3f6b65(0x6ac));let _0x459e79=await this[_0x3f6b65(0x50b)]['flow']['findOne']({'where':{'_id':_0x55aa9a[_0x3f6b65(0x699)]}});if(!_0x459e79||!_0x459e79[_0x3f6b65(0x7bc)]?.['includes'](this[_0x3f6b65(0x78a)][_0x3f6b65(0x3ef)]))throw this[_0x3f6b65(0x669)][_0x3f6b65(0x5c5)](this[_0x3f6b65(0x193)]+'\x20('+this[_0x3f6b65(0x78a)][_0x3f6b65(0x3ef)]+_0x3f6b65(0x6bd)+_0x55aa9a[_0x3f6b65(0x699)]+_0x3f6b65(0x558)),new m(_0x3f6b65(0x302)+_0x55aa9a['_id']+_0x3f6b65(0x558));if(!_0x459e79[_0x3f6b65(0x17c)]?.[_0x3f6b65(0x199)](this[_0x3f6b65(0x78a)][_0x3f6b65(0x3ef)]))throw new m(_0x3f6b65(0x2bd));if(_0x55aa9a[_0x3f6b65(0x538)]&&_0x55aa9a['group']?.[_0x3f6b65(0x6d0)]===!0x0){if(this['logger'][_0x3f6b65(0x2a0)](this[_0x3f6b65(0x193)]+'\x20('+this[_0x3f6b65(0x78a)][_0x3f6b65(0x3ef)]+_0x3f6b65(0x81d)),_0x55aa9a['group'][_0x3f6b65(0x36a)]===!0x0)return{'message':_0x3f6b65(0x1c8)};if(_0x459e79[_0x3f6b65(0x740)][_0x3f6b65(0x6f9)](_0x29f423=>_0x29f423['groupId']['toString']()===_0x55aa9a['group'][_0x3f6b65(0x699)]))return this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x3f6b65(0x3ef)]+_0x3f6b65(0x748)),{'message':_0x3f6b65(0x26f)};_0x459e79[_0x3f6b65(0x765)]=_0x459e79['groups'][_0x3f6b65(0x29b)](_0x489a9a=>_0x489a9a[_0x3f6b65(0x699)][_0x3f6b65(0x191)]()!==_0x55aa9a[_0x3f6b65(0x538)][_0x3f6b65(0x699)]);}else{if(_0x55aa9a[_0x3f6b65(0x538)]){if(_0x55aa9a['group'][_0x3f6b65(0x36a)]===!0x0)return{'message':'No\x20\x20permitido\x20adicionar\x20outro\x20grupo\x20padro'};if(_0x55aa9a[_0x3f6b65(0x538)]['_id']){let _0x31c2c6=_0x459e79['groups'][_0x3f6b65(0x704)](_0x46819d=>_0x46819d[_0x3f6b65(0x699)][_0x3f6b65(0x191)]()===_0x55aa9a['group']['_id']);_0x31c2c6&&(_0x55aa9a[_0x3f6b65(0x538)]['x']<0x0&&(_0x55aa9a[_0x3f6b65(0x538)]['x']=0x0),_0x55aa9a[_0x3f6b65(0x538)]['y']<0x0&&(_0x55aa9a['group']['y']=0x0),Object[_0x3f6b65(0x382)](_0x31c2c6,_0x55aa9a[_0x3f6b65(0x538)]));}else _0x459e79['groups'][_0x3f6b65(0x69d)](_0x55aa9a[_0x3f6b65(0x538)]);}}let _0x53fe4d=await this['repository'][_0x3f6b65(0x1e0)][_0x3f6b65(0x1f8)](_0x459e79[_0x3f6b65(0x699)],_0x459e79);if(!_0x53fe4d)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x53fe4d;}catch(_0x4546f9){let _0x1a3b8d=_0x3f6b65(0x3ed),_0x310e97=_0x4546f9 instanceof Error?_0x4546f9['message']:typeof _0x4546f9==_0x3f6b65(0x623)?JSON[_0x3f6b65(0x5ab)](_0x4546f9):_0x4546f9,_0x2f0f90=_0x1a3b8d+':\x20'+_0x310e97;throw this[_0x3f6b65(0x669)][_0x3f6b65(0x5c5)](this['instanceName']+'\x20('+this['instance'][_0x3f6b65(0x3ef)]+'):\x20'+_0x2f0f90),new m(_0x2f0f90);}}async[a0_0x98996d(0x674)](_0x15ae03){const _0x48ae83=a0_0x98996d;try{if(this[_0x48ae83(0x669)][_0x48ae83(0x2a0)](this['instanceName']+'\x20('+this[_0x48ae83(0x78a)][_0x48ae83(0x3ef)]+'):\x20Editando\x20condio\x20do\x20fluxo...'),!this['AutomateSystem'][_0x48ae83(0x24d)][_0x48ae83(0x704)](_0x32a310=>_0x32a310[_0x48ae83(0x699)]===_0x15ae03[_0x48ae83(0x699)]))throw this[_0x48ae83(0x669)][_0x48ae83(0x2a0)](this[_0x48ae83(0x193)]+'\x20('+this['instance']['wuid']+_0x48ae83(0x76d)+_0x15ae03['_id']+_0x48ae83(0x7b7)),new m('Fluxo\x20no\x20encontrado\x20na\x20memria.');let _0x26be7d=await this['repository'][_0x48ae83(0x1e0)][_0x48ae83(0x218)]({'where':{'_id':_0x15ae03[_0x48ae83(0x699)]}});if(!_0x26be7d||!_0x26be7d[_0x48ae83(0x7bc)]?.[_0x48ae83(0x199)](this['instance']['wuid']))throw this[_0x48ae83(0x669)]['error'](this[_0x48ae83(0x193)]+'\x20('+this['instance'][_0x48ae83(0x3ef)]+_0x48ae83(0x6bd)+_0x15ae03['_id']+_0x48ae83(0x558)),new m('Flow\x20\x27'+_0x15ae03['_id']+_0x48ae83(0x558));if(!_0x26be7d[_0x48ae83(0x17c)]?.[_0x48ae83(0x199)](this[_0x48ae83(0x78a)][_0x48ae83(0x3ef)]))throw new m(_0x48ae83(0x2bd));let _0x3dfe8e=!0x1;if(_0x15ae03['condition']?.[_0x48ae83(0x6d0)]===!0x0)_0x26be7d[_0x48ae83(0x84c)]=_0x26be7d[_0x48ae83(0x84c)][_0x48ae83(0x29b)](_0x4aa092=>_0x4aa092&&_0x15ae03['condition']&&_0x4aa092[_0x48ae83(0x699)]&&_0x15ae03[_0x48ae83(0x206)]['_id']&&_0x4aa092[_0x48ae83(0x699)][_0x48ae83(0x191)]()!==_0x15ae03[_0x48ae83(0x206)][_0x48ae83(0x699)][_0x48ae83(0x191)]()),_0x3dfe8e=!0x0;else{let _0x238fb1=_0x26be7d['conditions']['find'](_0x3a90e2=>_0x3a90e2&&_0x15ae03[_0x48ae83(0x206)]&&_0x3a90e2[_0x48ae83(0x699)]&&_0x15ae03[_0x48ae83(0x206)][_0x48ae83(0x699)]&&_0x3a90e2[_0x48ae83(0x699)]['toString']()===_0x15ae03['condition'][_0x48ae83(0x699)][_0x48ae83(0x191)]());_0x238fb1?(_0x3dfe8e=_0x238fb1[_0x48ae83(0x2fd)]!==_0x15ae03['condition']['order'],Object['assign'](_0x238fb1,_0x15ae03[_0x48ae83(0x206)])):(_0x26be7d[_0x48ae83(0x84c)]['push'](_0x15ae03[_0x48ae83(0x206)]),_0x3dfe8e=!0x0);}if(_0x3dfe8e){_0x26be7d[_0x48ae83(0x84c)][_0x48ae83(0x3ac)]((_0x5768ee,_0x9ff1bd)=>_0x5768ee['order']>_0x9ff1bd[_0x48ae83(0x2fd)]?0x1:_0x9ff1bd[_0x48ae83(0x2fd)]>_0x5768ee['order']?-0x1:0x0);for(let _0x4bd3e6=0x0;_0x4bd3e6<_0x26be7d[_0x48ae83(0x84c)]['length'];_0x4bd3e6++)_0x26be7d[_0x48ae83(0x84c)][_0x4bd3e6]['order']=_0x4bd3e6+0x1;_0x26be7d[_0x48ae83(0x84c)][_0x48ae83(0x217)]>0x0&&(_0x26be7d[_0x48ae83(0x84c)][0x0][_0x48ae83(0x617)]=_0x48ae83(0x4ec));}let _0x394cee=await this['repository'][_0x48ae83(0x1e0)][_0x48ae83(0x1f8)](_0x26be7d[_0x48ae83(0x699)],_0x26be7d);if(!_0x394cee)throw new Error(_0x48ae83(0x758));return _0x394cee;}catch(_0x22fab7){let _0x37fcdd=_0x48ae83(0x3a0),_0x30e8b8=_0x22fab7 instanceof Error?_0x22fab7[_0x48ae83(0x334)]:typeof _0x22fab7==_0x48ae83(0x623)?JSON[_0x48ae83(0x5ab)](_0x22fab7):_0x22fab7,_0x163d6d=_0x37fcdd+':\x20'+_0x30e8b8;throw this[_0x48ae83(0x669)][_0x48ae83(0x5c5)](this['instanceName']+'\x20('+this[_0x48ae83(0x78a)]['wuid']+_0x48ae83(0x526)+_0x163d6d),new m(_0x163d6d);}}async[a0_0x98996d(0x503)](_0x398a24){const _0x45ab75=a0_0x98996d;try{if(this['logger'][_0x45ab75(0x2a0)](this[_0x45ab75(0x193)]+'\x20('+this[_0x45ab75(0x78a)][_0x45ab75(0x3ef)]+_0x45ab75(0x6e5)),!this[_0x45ab75(0x227)]['flows'][_0x45ab75(0x704)](_0x22c8c8=>_0x22c8c8['_id']===_0x398a24[_0x45ab75(0x699)]))throw this['logger'][_0x45ab75(0x2a0)](this[_0x45ab75(0x193)]+'\x20('+this[_0x45ab75(0x78a)][_0x45ab75(0x3ef)]+_0x45ab75(0x76d)+_0x398a24[_0x45ab75(0x699)]+_0x45ab75(0x7b7)),new m(_0x45ab75(0x6ac));let _0x34a518=await this[_0x45ab75(0x50b)][_0x45ab75(0x1e0)][_0x45ab75(0x218)]({'where':{'_id':_0x398a24[_0x45ab75(0x699)]}});if(!_0x34a518||!_0x34a518[_0x45ab75(0x7bc)]?.[_0x45ab75(0x199)](this[_0x45ab75(0x78a)][_0x45ab75(0x3ef)]))throw this[_0x45ab75(0x669)][_0x45ab75(0x5c5)](this[_0x45ab75(0x193)]+'\x20('+this[_0x45ab75(0x78a)][_0x45ab75(0x3ef)]+_0x45ab75(0x6bd)+_0x398a24[_0x45ab75(0x699)]+_0x45ab75(0x558)),new m(_0x45ab75(0x302)+_0x398a24[_0x45ab75(0x699)]+_0x45ab75(0x558));if(!_0x34a518['whoCanEdit']?.[_0x45ab75(0x199)](this[_0x45ab75(0x78a)]['wuid']))throw new m(_0x45ab75(0x2bd));let _0x30527d=!0x1;if(_0x398a24[_0x45ab75(0x5f6)]?.['delete']===!0x0)_0x34a518[_0x45ab75(0x516)]=_0x34a518[_0x45ab75(0x516)][_0x45ab75(0x29b)](_0x3bb565=>_0x3bb565&&_0x398a24['varedit']&&_0x3bb565['_id']&&_0x398a24[_0x45ab75(0x5f6)]['_id']&&_0x3bb565[_0x45ab75(0x699)][_0x45ab75(0x191)]()!==_0x398a24[_0x45ab75(0x5f6)]['_id'][_0x45ab75(0x191)]()),_0x30527d=!0x0;else{let _0x313e6d=_0x34a518[_0x45ab75(0x516)][_0x45ab75(0x704)](_0xfeef0f=>_0xfeef0f&&_0x398a24[_0x45ab75(0x5f6)]&&_0xfeef0f[_0x45ab75(0x699)]&&_0x398a24[_0x45ab75(0x5f6)][_0x45ab75(0x699)]&&_0xfeef0f[_0x45ab75(0x699)][_0x45ab75(0x191)]()===_0x398a24[_0x45ab75(0x5f6)]['_id'][_0x45ab75(0x191)]());_0x313e6d?(_0x30527d=_0x313e6d[_0x45ab75(0x2fd)]!==_0x398a24[_0x45ab75(0x5f6)]['order'],Object[_0x45ab75(0x382)](_0x313e6d,_0x398a24[_0x45ab75(0x5f6)])):(_0x34a518['varedits'][_0x45ab75(0x69d)](_0x398a24['varedit']),_0x30527d=!0x0);}if(_0x30527d){_0x34a518[_0x45ab75(0x516)][_0x45ab75(0x3ac)]((_0x53f316,_0x4baee0)=>_0x53f316[_0x45ab75(0x2fd)]>_0x4baee0[_0x45ab75(0x2fd)]?0x1:_0x4baee0[_0x45ab75(0x2fd)]>_0x53f316['order']?-0x1:0x0);for(let _0x3af7eb=0x0;_0x3af7eb<_0x34a518['varedits'][_0x45ab75(0x217)];_0x3af7eb++)_0x34a518[_0x45ab75(0x516)][_0x3af7eb]['order']=_0x3af7eb+0x1;}let _0x2dca41=await this[_0x45ab75(0x50b)]['flow'][_0x45ab75(0x1f8)](_0x34a518[_0x45ab75(0x699)],_0x34a518);if(!_0x2dca41)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x2dca41;}catch(_0x3a2727){let _0x1a84ee=_0x45ab75(0x3a0),_0xaf50ee=_0x3a2727 instanceof Error?_0x3a2727[_0x45ab75(0x334)]:typeof _0x3a2727==_0x45ab75(0x623)?JSON[_0x45ab75(0x5ab)](_0x3a2727):_0x3a2727,_0x5b89bb=_0x1a84ee+':\x20'+_0xaf50ee;throw this[_0x45ab75(0x669)][_0x45ab75(0x5c5)](this[_0x45ab75(0x193)]+'\x20('+this[_0x45ab75(0x78a)]['wuid']+_0x45ab75(0x526)+_0x5b89bb),new m(_0x5b89bb);}}async[a0_0x98996d(0x609)](_0x3ea8e7){const _0x2c494b=a0_0x98996d;try{if(this[_0x2c494b(0x669)][_0x2c494b(0x2a0)](this[_0x2c494b(0x193)]+'\x20('+this[_0x2c494b(0x78a)][_0x2c494b(0x3ef)]+_0x2c494b(0x49a)),!this[_0x2c494b(0x227)][_0x2c494b(0x24d)][_0x2c494b(0x704)](_0x266451=>_0x266451['_id']===_0x3ea8e7[_0x2c494b(0x699)]))throw this['logger'][_0x2c494b(0x2a0)](this['instanceName']+'\x20('+this['instance'][_0x2c494b(0x3ef)]+'):\x20Fluxo\x20\x27'+_0x3ea8e7['_id']+_0x2c494b(0x7b7)),new m(_0x2c494b(0x6ac));let _0x3e235f=await this[_0x2c494b(0x50b)][_0x2c494b(0x1e0)][_0x2c494b(0x218)]({'where':{'_id':_0x3ea8e7[_0x2c494b(0x699)]}});if(!_0x3e235f||!_0x3e235f[_0x2c494b(0x7bc)]?.[_0x2c494b(0x199)](this[_0x2c494b(0x78a)][_0x2c494b(0x3ef)]))throw this[_0x2c494b(0x669)][_0x2c494b(0x5c5)](this[_0x2c494b(0x193)]+'\x20('+this[_0x2c494b(0x78a)][_0x2c494b(0x3ef)]+'):\x20Flow\x20\x27'+_0x3ea8e7[_0x2c494b(0x699)]+_0x2c494b(0x558)),new m(_0x2c494b(0x302)+_0x3ea8e7['_id']+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');if(!_0x3e235f[_0x2c494b(0x17c)]?.['includes'](this[_0x2c494b(0x78a)][_0x2c494b(0x3ef)]))throw new m(_0x2c494b(0x2bd));_0x3ea8e7['variable']['name']=_0x3ea8e7[_0x2c494b(0x5b2)][_0x2c494b(0x592)]['trim'](),_0x3ea8e7['variable'][_0x2c494b(0x592)]['startsWith']('_')&&(_0x3ea8e7[_0x2c494b(0x5b2)][_0x2c494b(0x592)]=_0x3ea8e7['variable'][_0x2c494b(0x592)][_0x2c494b(0x3da)](0x1)),_0x3ea8e7[_0x2c494b(0x5b2)][_0x2c494b(0x592)]=_0x3ea8e7[_0x2c494b(0x5b2)][_0x2c494b(0x592)][_0x2c494b(0x317)]();let _0x617a58=_0x3e235f['variables'][_0x2c494b(0x704)](_0x2112ec=>_0x2112ec['name']===_0x3ea8e7['variable'][_0x2c494b(0x592)]);if(_0x617a58?.[_0x2c494b(0x5b0)]===!0x0)throw new Error(_0x2c494b(0x4ac));if(_0x3ea8e7['variable']?.['delete']===!0x0){if(!_0x617a58)return{'message':_0x2c494b(0x73f)};_0x3e235f[_0x2c494b(0x68f)]=_0x3e235f[_0x2c494b(0x68f)]['filter'](_0x492ba0=>_0x492ba0[_0x2c494b(0x592)]!==_0x3ea8e7[_0x2c494b(0x5b2)]['name']);}else _0x617a58?Object[_0x2c494b(0x382)](_0x617a58,_0x3ea8e7[_0x2c494b(0x5b2)]):_0x3e235f[_0x2c494b(0x68f)]['push'](_0x3ea8e7[_0x2c494b(0x5b2)]);let _0x18629b=await this['repository'][_0x2c494b(0x1e0)][_0x2c494b(0x1f8)](_0x3e235f[_0x2c494b(0x699)],_0x3e235f);if(!_0x18629b)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x18629b;}catch(_0x1e1519){let _0x567e2a=_0x2c494b(0x409),_0xe29e76=_0x1e1519 instanceof Error?_0x1e1519[_0x2c494b(0x334)]:typeof _0x1e1519==_0x2c494b(0x623)?JSON[_0x2c494b(0x5ab)](_0x1e1519):_0x1e1519,_0x1d1391=_0x567e2a+':\x20'+_0xe29e76;throw this[_0x2c494b(0x669)]['error'](this['instanceName']+'\x20('+this[_0x2c494b(0x78a)][_0x2c494b(0x3ef)]+_0x2c494b(0x526)+_0x1d1391),new m(_0x1d1391);}}async[a0_0x98996d(0x2a2)](_0x494ff8){const _0x536b5d=a0_0x98996d;let _0x5765db=null;try{if(!this[_0x536b5d(0x227)]?.[_0x536b5d(0x1fc)][_0x536b5d(0x7ca)])throw new m('Fluxos\x20no\x20esto\x20ativados');this[_0x536b5d(0x669)][_0x536b5d(0x2a0)](this[_0x536b5d(0x193)]+'\x20('+this['instance'][_0x536b5d(0x3ef)]+_0x536b5d(0x128));let _0x2626ed=(await this['whatsappNumber']({'numbers':[_0x494ff8['remoteJid']]}))[0x0];if(!_0x2626ed[_0x536b5d(0x693)]&&!(0x0,w[_0x536b5d(0x43e)])(_0x2626ed['jid'])&&!_0x2626ed[_0x536b5d(0x3d9)]['includes']('@broadcast'))throw _0x5765db=JSON[_0x536b5d(0x5ab)](_0x2626ed,null,0x2),new m(_0x2626ed);let _0xae6964;if(_0x494ff8['name']['length']===0x24&&/^[0-9a-fA-F-]{36}$/['test'](_0x494ff8[_0x536b5d(0x592)])?_0xae6964=this['AutomateSystem'][_0x536b5d(0x24d)][_0x536b5d(0x704)](_0x2f8a58=>_0x2f8a58[_0x536b5d(0x699)]===_0x494ff8[_0x536b5d(0x592)]):_0xae6964=this['AutomateSystem'][_0x536b5d(0x24d)][_0x536b5d(0x704)](_0x193b54=>_0x193b54['name']===_0x494ff8[_0x536b5d(0x592)]),!_0xae6964)throw this[_0x536b5d(0x669)][_0x536b5d(0x2a0)](this['instanceName']+'\x20('+this[_0x536b5d(0x78a)][_0x536b5d(0x3ef)]+_0x536b5d(0x76d)+_0x494ff8['name']+_0x536b5d(0x7b7)),new m(_0x536b5d(0x6ac));let _0x1f3220=await this[_0x536b5d(0x50b)][_0x536b5d(0x1e0)]['findOne']({'where':{'_id':_0xae6964[_0x536b5d(0x699)]}});if(!_0x1f3220||!_0x1f3220[_0x536b5d(0x7bc)]?.[_0x536b5d(0x199)](this['instance'][_0x536b5d(0x3ef)]))throw this[_0x536b5d(0x669)][_0x536b5d(0x5c5)](this[_0x536b5d(0x193)]+'\x20('+this[_0x536b5d(0x78a)][_0x536b5d(0x3ef)]+_0x536b5d(0x6bd)+_0xae6964['_id']+_0x536b5d(0x558)),_0x5765db='Flow\x20\x27'+_0xae6964[_0x536b5d(0x699)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo',new m(_0x5765db);let _0x4e75b3=await this[_0x536b5d(0x47c)](_0x1f3220,_0x2626ed[_0x536b5d(0x3d9)],_0x494ff8[_0x536b5d(0x37e)]);if(_0x4e75b3){this[_0x536b5d(0x669)][_0x536b5d(0x2a0)](this[_0x536b5d(0x193)]+'\x20('+this[_0x536b5d(0x78a)][_0x536b5d(0x3ef)]+_0x536b5d(0x4aa));let _0x3be091=await this[_0x536b5d(0x285)](_0x4e75b3);return _0x3be091&&await this['processblock'](_0x4e75b3,_0x3be091),{'message':_0x536b5d(0x3f3)+_0x494ff8['remoteJid']};}}catch(_0xf8def0){if(this[_0x536b5d(0x669)]['error'](this[_0x536b5d(0x193)]+'\x20('+this[_0x536b5d(0x78a)][_0x536b5d(0x3ef)]+_0x536b5d(0x3a6)+(_0xf8def0 instanceof Error?_0xf8def0[_0x536b5d(0x334)]:JSON[_0x536b5d(0x5ab)](_0xf8def0,null,0x2))),_0x5765db=_0xf8def0 instanceof Error?_0xf8def0['message']:JSON['stringify'](_0xf8def0,null,0x2),_0x5765db)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x5765db);}}async['startFlowWebhook'](_0x2da3ed,_0x593614,_0x56163e){const _0x41b6c8=a0_0x98996d;let _0x1a312a=null;try{if(!this[_0x41b6c8(0x227)]?.[_0x41b6c8(0x1fc)]['enabled'])throw new m(_0x41b6c8(0x4cd));if(this[_0x41b6c8(0x669)]['verbose'](this[_0x41b6c8(0x193)]+'\x20('+this[_0x41b6c8(0x78a)][_0x41b6c8(0x3ef)]+_0x41b6c8(0x128)),_0x593614){let _0x3cb4fe=(await this[_0x41b6c8(0x4bd)]({'numbers':[_0x593614]}))[0x0];if(!_0x3cb4fe['exists']&&!(0x0,w[_0x41b6c8(0x43e)])(_0x3cb4fe[_0x41b6c8(0x3d9)])&&!_0x3cb4fe[_0x41b6c8(0x3d9)][_0x41b6c8(0x199)](_0x41b6c8(0x2bb)))throw _0x1a312a=JSON[_0x41b6c8(0x5ab)](_0x3cb4fe,null,0x2),new m(_0x3cb4fe);_0x593614=_0x3cb4fe[_0x41b6c8(0x3d9)];}else _0x593614||(_0x593614=(0x0,Y['v4'])());let _0x2b7719=await this['repository']['flow']['findOne']({'where':{'_id':_0x2da3ed}});if(!_0x2b7719||!_0x2b7719['whoCanUse']?.['includes'](this[_0x41b6c8(0x78a)][_0x41b6c8(0x3ef)]))throw this[_0x41b6c8(0x669)][_0x41b6c8(0x5c5)](this[_0x41b6c8(0x193)]+'\x20('+this[_0x41b6c8(0x78a)]['wuid']+'):\x20Flow\x20\x27'+_0x2da3ed+_0x41b6c8(0x558)),new m(_0x41b6c8(0x302)+_0x2da3ed+_0x41b6c8(0x558));let _0x3dc3af=await this[_0x41b6c8(0x47c)](_0x2b7719,_0x593614,null);if(_0x3dc3af){this[_0x41b6c8(0x669)][_0x41b6c8(0x2a0)](this[_0x41b6c8(0x193)]+'\x20('+this[_0x41b6c8(0x78a)][_0x41b6c8(0x3ef)]+_0x41b6c8(0x402));let _0x4b5314;if(_0x56163e){let _0x5654e6=_0x3dc3af[_0x41b6c8(0x2a6)][_0x41b6c8(0x56f)],_0x5a6de1=this['flattenObject'](_0x56163e);Object[_0x41b6c8(0x382)](_0x5654e6,_0x5a6de1),_0x3dc3af[_0x41b6c8(0x2a6)][_0x41b6c8(0x56f)]=_0x5654e6,_0x4b5314={'error':!0x1,'apiResponse':_0x56163e};}let _0x3581c5=await this[_0x41b6c8(0x285)](_0x3dc3af);return _0x3581c5&&await this[_0x41b6c8(0x388)](_0x3dc3af,_0x3581c5),{'message':'Flow\x20iniciado'};}}catch(_0x20032b){if(this['logger']['error'](this[_0x41b6c8(0x193)]+'\x20('+this[_0x41b6c8(0x78a)][_0x41b6c8(0x3ef)]+_0x41b6c8(0x3a6)+(_0x20032b instanceof Error?_0x20032b[_0x41b6c8(0x334)]:JSON[_0x41b6c8(0x5ab)](_0x20032b,null,0x2))),_0x1a312a=_0x20032b instanceof Error?_0x20032b['message']:JSON[_0x41b6c8(0x5ab)](_0x20032b,null,0x2),_0x1a312a)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x1a312a);}}async[a0_0x98996d(0x180)](_0x533de2){const _0x12189b=a0_0x98996d;try{let _0x6244e6={'remoteJid':_0x533de2,'status':'open'},_0x33a291={'status':_0x12189b(0x76e)},_0x35e576=await this['repository'][_0x12189b(0x265)]['updateMany'](_0x6244e6,_0x33a291,this[_0x12189b(0x78a)][_0x12189b(0x3ef)]);return this[_0x12189b(0x669)][_0x12189b(0x2a0)](this[_0x12189b(0x193)]+'\x20('+this[_0x12189b(0x78a)][_0x12189b(0x3ef)]+_0x12189b(0x763)),_0x35e576;}catch(_0x49e937){throw this[_0x12189b(0x669)]['error'](this[_0x12189b(0x193)]+'\x20('+this[_0x12189b(0x78a)][_0x12189b(0x3ef)]+_0x12189b(0x665)+_0x49e937[_0x12189b(0x334)]),_0x49e937;}}async[a0_0x98996d(0x47c)](_0xbded68,_0x432d5f,_0xeb4ea5){const _0x136287=a0_0x98996d;this[_0x136287(0x669)]['verbose'](this[_0x136287(0x193)]+'\x20('+this['instance']['wuid']+_0x136287(0x24b)),await this[_0x136287(0x180)](_0x432d5f);try{let _0xa986ac=require(_0x136287(0x73c))[_0x136287(0x4cf)],_0x1bb7e5=Date['now'](),_0x1192ff=_0x136287(0x507),_0xe5ceed={},_0x220d8c={},_0x34e69c=this[_0x136287(0x227)][_0x136287(0x24d)][_0x136287(0x704)](_0x5979bd=>_0x5979bd['_id']===_0xbded68[_0x136287(0x699)]?.['toString']()),_0x26515e=_0x34e69c?.[_0x136287(0x3b2)]??_0xbded68[_0x136287(0x3b2)]??0x0,_0x24ef98=_0x34e69c?.[_0x136287(0x183)]??_0xbded68[_0x136287(0x183)]??!0x1,_0x50dc6f={'flowId':_0xbded68[_0x136287(0x699)],..._0xbded68,'chatLog':null},_0x38a972=await this[_0x136287(0x77f)](_0x50dc6f[_0x136287(0x68f)]),_0x28d0f7=await this[_0x136287(0x28a)](_0x432d5f),_0x320eb2={..._0x38a972,..._0x28d0f7,'_remoteJid':_0x432d5f},_0x40ab76={'lastReceivedMessage':_0xe5ceed,'lastSendMessage':_0x220d8c,'lastBlockId':_0x1192ff,'lastCondition':!0x0,'realVariables':_0x320eb2};_0x50dc6f[_0x136287(0x2a6)]=_0x40ab76,_0x50dc6f['chatLog']['realVariables']={..._0x320eb2,..._0xeb4ea5},delete _0x50dc6f[_0x136287(0x699)],_0x50dc6f[_0x136287(0x699)]=new _0xa986ac(),_0x50dc6f[_0x136287(0x439)]=_0x1bb7e5,_0x50dc6f[_0x136287(0x7ce)]=_0x136287(0x29d),_0x50dc6f[_0x136287(0x5d9)]=_0x432d5f,_0x50dc6f[_0x136287(0x3b2)]=_0x26515e,_0x50dc6f['readMessages']=_0x24ef98,_0x50dc6f[_0x136287(0x699)]=_0xbded68['_id'];let _0x11270c=await this[_0x136287(0x50b)][_0x136287(0x265)]['updateOne'](_0x50dc6f[_0x136287(0x699)],_0x50dc6f,this[_0x136287(0x78a)]['wuid']);return this[_0x136287(0x669)][_0x136287(0x2a0)](this[_0x136287(0x193)]+'\x20('+this[_0x136287(0x78a)][_0x136287(0x3ef)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x11270c?_0x50dc6f:null;}catch(_0x3daf0c){let _0x25dff0='Erro\x20ao\x20copiar\x20o\x20documento',_0x2ef2d7=_0x3daf0c instanceof Error?_0x3daf0c[_0x136287(0x334)]:typeof _0x3daf0c==_0x136287(0x623)?JSON[_0x136287(0x5ab)](_0x3daf0c):_0x3daf0c,_0x2e42fd=_0x25dff0+':\x20'+_0x2ef2d7;throw this[_0x136287(0x669)][_0x136287(0x5c5)](this[_0x136287(0x193)]+'\x20('+this['instance'][_0x136287(0x3ef)]+_0x136287(0x526)+_0x2e42fd),new m(_0x2e42fd);}}async['getConversation'](_0x45fb5f){const _0x1441c7=a0_0x98996d;try{this['logger'][_0x1441c7(0x2a0)](this['instanceName']+'\x20('+this[_0x1441c7(0x78a)][_0x1441c7(0x3ef)]+'):\x20Buscando\x20conversa...'),this[_0x1441c7(0x669)][_0x1441c7(0x2a0)](this[_0x1441c7(0x193)]+'\x20('+this['instance'][_0x1441c7(0x3ef)]+_0x1441c7(0x78d)+_0x45fb5f);let _0x2a4a09={'where':{'_id':_0x45fb5f}};return await this['repository']['flowConversation'][_0x1441c7(0x218)](_0x2a4a09,this[_0x1441c7(0x78a)][_0x1441c7(0x3ef)]);}catch(_0x49abf9){let _0x41d610=_0x1441c7(0x336),_0x2fe42a=_0x49abf9 instanceof Error?_0x49abf9[_0x1441c7(0x334)]:typeof _0x49abf9==_0x1441c7(0x623)?JSON[_0x1441c7(0x5ab)](_0x49abf9):_0x49abf9,_0x484c71=_0x41d610+':\x20'+_0x2fe42a;throw this[_0x1441c7(0x669)][_0x1441c7(0x5c5)](this[_0x1441c7(0x193)]+'\x20('+this['instance'][_0x1441c7(0x3ef)]+_0x1441c7(0x526)+_0x484c71),new m(_0x484c71);}}async[a0_0x98996d(0x152)](_0x41ec2d){const _0x18a74a=a0_0x98996d;try{return this[_0x18a74a(0x669)]['verbose'](this[_0x18a74a(0x193)]+'\x20('+this[_0x18a74a(0x78a)][_0x18a74a(0x3ef)]+_0x18a74a(0x5fc)),await this[_0x18a74a(0x50b)][_0x18a74a(0x265)][_0x18a74a(0x704)](_0x41ec2d,this[_0x18a74a(0x78a)][_0x18a74a(0x3ef)]);}catch(_0x4064bc){let _0x37fd89=_0x18a74a(0x4ab),_0x203403=_0x4064bc instanceof Error?_0x4064bc[_0x18a74a(0x334)]:typeof _0x4064bc==_0x18a74a(0x623)?JSON[_0x18a74a(0x5ab)](_0x4064bc):_0x4064bc,_0x472a0a=_0x37fd89+':\x20'+_0x203403;throw this[_0x18a74a(0x669)][_0x18a74a(0x5c5)](this[_0x18a74a(0x193)]+'\x20('+this[_0x18a74a(0x78a)]['wuid']+'):\x20'+_0x472a0a),new m(_0x472a0a);}}async['deleteConversation'](_0x195f9a){const _0x389dce=a0_0x98996d;try{return this[_0x389dce(0x669)][_0x389dce(0x2a0)](this[_0x389dce(0x193)]+'\x20('+this['instance'][_0x389dce(0x3ef)]+_0x389dce(0x636)),this['logger']['verbose'](this[_0x389dce(0x193)]+'\x20('+this[_0x389dce(0x78a)][_0x389dce(0x3ef)]+_0x389dce(0x47a)+_0x195f9a),(await this[_0x389dce(0x50b)]['flowConversation'][_0x389dce(0x326)]({'where':{'_id':_0x195f9a[_0x389dce(0x699)]}},this[_0x389dce(0x78a)][_0x389dce(0x3ef)]))['deletedCount']===0x0?{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.'}:{'message':_0x389dce(0x5b7)};}catch(_0x3e7b7d){let _0x501b37='Erro\x20ao\x20deletar\x20a\x20conversa',_0x19a0b5=_0x3e7b7d instanceof Error?_0x3e7b7d[_0x389dce(0x334)]:typeof _0x3e7b7d==_0x389dce(0x623)?JSON[_0x389dce(0x5ab)](_0x3e7b7d):_0x3e7b7d,_0x47025f=_0x501b37+':\x20'+_0x19a0b5;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x389dce(0x78a)][_0x389dce(0x3ef)]+_0x389dce(0x526)+_0x47025f),new m(_0x47025f);}}async['editConversation'](_0x3478bd){const _0x3ff700=a0_0x98996d;try{let {_id:_0x1c7ed8,chatLog:_0x343a68,status:_0x3838e1}=_0x3478bd;if(!_0x1c7ed8)return{'message':_0x3ff700(0x78f)};let _0x3b7632={};if(_0x3838e1!==void 0x0&&(_0x3b7632[_0x3ff700(0x7ce)]=_0x3838e1),Object[_0x3ff700(0x58d)](_0x3b7632)[_0x3ff700(0x217)]===0x0)return{'message':_0x3ff700(0x277)};let _0x371aa1=await this[_0x3ff700(0x50b)][_0x3ff700(0x265)][_0x3ff700(0x1f8)](_0x1c7ed8,_0x3b7632,this[_0x3ff700(0x78a)][_0x3ff700(0x3ef)]);return _0x371aa1||{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20voc\x20no\x20\x20o\x20proprietrio\x20da\x20conversa.'};}catch(_0x506bed){let _0x15e03a=_0x3ff700(0x1b6),_0x5bc6f5=_0x506bed instanceof Error?_0x506bed[_0x3ff700(0x334)]:typeof _0x506bed==_0x3ff700(0x623)?JSON[_0x3ff700(0x5ab)](_0x506bed):_0x506bed,_0x107d75=_0x15e03a+':\x20'+_0x5bc6f5;throw this[_0x3ff700(0x669)][_0x3ff700(0x5c5)](this[_0x3ff700(0x193)]+'\x20('+this[_0x3ff700(0x78a)]['wuid']+'):\x20'+_0x107d75),new m(_0x107d75);}}async['editChat'](_0x2a74bb){const _0x6d1d43=a0_0x98996d;try{_0x2a74bb[_0x6d1d43(0x699)]=this['createJid'](_0x2a74bb[_0x6d1d43(0x699)]);let _0x5d74ca=await this[_0x6d1d43(0x50b)][_0x6d1d43(0x500)][_0x6d1d43(0x218)]({'where':{'_id':_0x2a74bb['_id']}},this[_0x6d1d43(0x78a)][_0x6d1d43(0x3ef)]);if(!_0x5d74ca)throw new m(_0x6d1d43(0x7cc));let {_id:_0x286289,leadInfo:_0x4b13f8}=_0x2a74bb;if(!_0x286289)throw new Error('O\x20campo\x20id\x20\x20obrigatrio\x20para\x20editar/criar\x20um\x20chat.');if(_0x2a74bb[_0x6d1d43(0x6d0)]===_0x6d1d43(0x6aa))return await this[_0x6d1d43(0x2d9)](_0x2a74bb[_0x6d1d43(0x699)]),await this[_0x6d1d43(0x50b)][_0x6d1d43(0x500)]['delete']({'where':{'_id':_0x2a74bb[_0x6d1d43(0x699)]}},this['instance']['wuid']),await this['repository'][_0x6d1d43(0x334)][_0x6d1d43(0x6d0)]({'where':{'key':{'remoteJid':_0x2a74bb['_id']}}},this[_0x6d1d43(0x78a)][_0x6d1d43(0x3ef)]),_0x2a74bb=await this['repository']['chat']['updateOne']({'where':{'_id':_0x2a74bb[_0x6d1d43(0x699)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x6d1d43(0x78a)][_0x6d1d43(0x3ef)]),U(this[_0x6d1d43(0x193)],_0x6d1d43(0x812),{'chat':_0x2a74bb}),{'message':_0x6d1d43(0x3f7)};if(_0x2a74bb[_0x6d1d43(0x6d0)]===_0x6d1d43(0x814))return await this[_0x6d1d43(0x50b)][_0x6d1d43(0x334)][_0x6d1d43(0x6d0)]({'where':{'key':{'remoteJid':_0x2a74bb[_0x6d1d43(0x699)]}}},this[_0x6d1d43(0x78a)][_0x6d1d43(0x3ef)]),_0x2a74bb=await this[_0x6d1d43(0x50b)][_0x6d1d43(0x500)]['updateOne']({'where':{'_id':_0x2a74bb[_0x6d1d43(0x699)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x6d1d43(0x78a)][_0x6d1d43(0x3ef)]),U(this[_0x6d1d43(0x193)],_0x6d1d43(0x812),{'chat':_0x2a74bb}),{'message':_0x6d1d43(0x39a)};let _0x12d90f=(_0x2c18df,_0x188251,_0x248829)=>{const _0x36b327=_0x6d1d43;_0x2c18df&&_0x248829[_0x36b327(0x15b)](_0x2ca1b3=>{const _0x372316=_0x36b327;_0x2c18df[_0x2ca1b3]!==void 0x0&&(_0x188251[_0x372316(0x79c)+_0x2ca1b3]=_0x2c18df[_0x2ca1b3]);});},_0x994a8a={};if('muteEndTime'in _0x2a74bb&&(this[_0x6d1d43(0x669)]['verbose'](this['instanceName']+'\x20('+this[_0x6d1d43(0x78a)]['wuid']+_0x6d1d43(0x3ae)+_0x2a74bb['_id']),_0x2a74bb[_0x6d1d43(0x55b)]=_0x2a74bb[_0x6d1d43(0x55b)]===0x0?null:-0x1,await this[_0x6d1d43(0x855)][_0x6d1d43(0x832)]({'mute':_0x2a74bb[_0x6d1d43(0x55b)]},_0x2a74bb[_0x6d1d43(0x699)]),_0x994a8a[_0x6d1d43(0x55b)]=Number(_0x2a74bb['muteEndTime'])),_0x4b13f8&&(_0x12d90f(_0x4b13f8,_0x994a8a,[_0x6d1d43(0x16b),_0x6d1d43(0x32a),_0x6d1d43(0x6b2),_0x6d1d43(0x653),_0x6d1d43(0x7ce),_0x6d1d43(0x845),'tags',_0x6d1d43(0x788),_0x6d1d43(0x256),_0x6d1d43(0x3c1),_0x6d1d43(0x436)]),Array[_0x6d1d43(0x481)](_0x4b13f8['customFields'])&&(_0x994a8a[_0x6d1d43(0x41b)]=_0x4b13f8[_0x6d1d43(0x52b)][_0x6d1d43(0x384)](_0x4b6bcf=>({'_id':_0x4b6bcf[_0x6d1d43(0x699)],'value':_0x4b6bcf['value']}))),_0x2a74bb[_0x6d1d43(0x5b0)][_0x6d1d43(0x3c1)]!==void 0x0)){let _0x3a9cf4=await this['repository'][_0x6d1d43(0x80b)]['find']({'where':{}},this[_0x6d1d43(0x78a)][_0x6d1d43(0x3ef)]),_0x2124e4=new Set(_0x2a74bb[_0x6d1d43(0x5b0)][_0x6d1d43(0x3c1)]||[]),_0xe4ee4b=new Set(_0x2a74bb[_0x6d1d43(0x5b0)][_0x6d1d43(0x3c1)]),_0x2d269f=new Set(_0x3a9cf4['map'](_0x4e91fa=>_0x4e91fa[_0x6d1d43(0x699)])),_0x110a4f=[..._0xe4ee4b][_0x6d1d43(0x29b)](_0x18ce9f=>!_0x2124e4[_0x6d1d43(0x12e)](_0x18ce9f)&&_0x2d269f[_0x6d1d43(0x12e)](_0x18ce9f)),_0x222363=[..._0x2124e4][_0x6d1d43(0x29b)](_0x3b2036=>!_0xe4ee4b['has'](_0x3b2036));if(_0x994a8a[_0x6d1d43(0x450)]=[..._0x2124e4],_0x5d74ca&&!_0x5d74ca['imported']){for(let _0x5effdd of _0x110a4f)await this[_0x6d1d43(0x4a6)](_0x5effdd,_0x2a74bb[_0x6d1d43(0x699)]),_0x2124e4[_0x6d1d43(0x712)](_0x5effdd);for(let _0x2e0d2c of _0x222363)await this[_0x6d1d43(0x68c)](_0x2e0d2c,_0x2a74bb['_id']),_0x2124e4[_0x6d1d43(0x6d0)](_0x2e0d2c);}}if(_0x2a74bb[_0x6d1d43(0x4d7)]!==void 0x0&&(_0x994a8a[_0x6d1d43(0x4d7)]=Number(_0x2a74bb['unreadcount'])),Object[_0x6d1d43(0x58d)](_0x994a8a)[_0x6d1d43(0x217)]===0x0)throw new Error(_0x6d1d43(0x277));let _0x5840f3=await this['repository'][_0x6d1d43(0x500)]['updateOne']({'where':{'_id':_0x2a74bb[_0x6d1d43(0x699)]}},_0x994a8a,this[_0x6d1d43(0x78a)][_0x6d1d43(0x3ef)]);return _0x5840f3&&U(this[_0x6d1d43(0x193)],'chats',{'chat':_0x5840f3}),_0x5840f3?(this['logger'][_0x6d1d43(0x2a0)](this[_0x6d1d43(0x193)]+'\x20('+this[_0x6d1d43(0x78a)][_0x6d1d43(0x3ef)]+_0x6d1d43(0x526)+JSON['stringify'](_0x5840f3,null,0x2)),_0x5840f3):{'message':_0x6d1d43(0x4de)};}catch(_0x18477a){let _0x3c22b8=_0x6d1d43(0x710),_0x1cd894=_0x18477a instanceof Error?_0x18477a[_0x6d1d43(0x334)]:typeof _0x18477a==_0x6d1d43(0x623)?JSON[_0x6d1d43(0x5ab)](_0x18477a):_0x18477a,_0x1cc26f=_0x3c22b8+':\x20'+_0x1cd894;throw this[_0x6d1d43(0x669)][_0x6d1d43(0x5c5)](this[_0x6d1d43(0x193)]+'\x20('+this[_0x6d1d43(0x78a)][_0x6d1d43(0x3ef)]+'):\x20'+_0x1cc26f),new m(_0x1cc26f);}}async[a0_0x98996d(0x4a6)](_0x20db11,_0x3b1b40){const _0x5b893b=a0_0x98996d;try{await this['client']['addChatLabel'](_0x3b1b40,_0x20db11),this[_0x5b893b(0x669)][_0x5b893b(0x22b)](this[_0x5b893b(0x193)]+'\x20('+this['instance'][_0x5b893b(0x3ef)]+_0x5b893b(0x6d7)+_0x20db11+_0x5b893b(0x840)+_0x3b1b40+'\x20com\x20sucesso.');}catch(_0x58bb9f){this[_0x5b893b(0x669)]['error']('Erro\x20ao\x20adicionar\x20label\x20'+_0x20db11+_0x5b893b(0x72e)+_0x3b1b40+':\x20'+_0x58bb9f);}}async[a0_0x98996d(0x68c)](_0x65c2dd,_0x1ec943){const _0x1c8d62=a0_0x98996d;try{await this['client'][_0x1c8d62(0x781)](_0x1ec943,_0x65c2dd),this['logger'][_0x1c8d62(0x22b)](this[_0x1c8d62(0x193)]+'\x20('+this[_0x1c8d62(0x78a)]['wuid']+_0x1c8d62(0x6d7)+_0x65c2dd+_0x1c8d62(0x363)+_0x1ec943+'\x20com\x20sucesso.');}catch(_0x11e3c2){this[_0x1c8d62(0x669)][_0x1c8d62(0x5c5)](_0x1c8d62(0x448)+_0x65c2dd+_0x1c8d62(0x7ea)+_0x1ec943+':\x20'+_0x11e3c2);}}async[a0_0x98996d(0x545)](_0x5dbbb3){const _0x28bf9f=a0_0x98996d;try{let _0x3701f8=await this[_0x28bf9f(0x50b)]['automateSystem'][_0x28bf9f(0x70c)](this[_0x28bf9f(0x78a)][_0x28bf9f(0x3ef)]),_0x2159ab=_0x5dbbb3['_id']?_0x3701f8[_0x28bf9f(0x4ce)][_0x28bf9f(0x806)](_0x314814=>_0x314814[_0x28bf9f(0x699)]===_0x5dbbb3[_0x28bf9f(0x699)]):-0x1;if(_0x5dbbb3[_0x28bf9f(0x6d0)]&&_0x2159ab>-0x1)_0x3701f8['agents'][_0x28bf9f(0x7a6)](_0x2159ab,0x1);else{if(_0x2159ab>-0x1){let _0x423080=_0x3701f8['agents'][_0x2159ab];_0x5dbbb3['fone']&&(_0x423080[_0x28bf9f(0x7d6)]=_0x5dbbb3[_0x28bf9f(0x7d6)]),_0x5dbbb3[_0x28bf9f(0x592)]&&(_0x423080[_0x28bf9f(0x592)]=_0x5dbbb3[_0x28bf9f(0x592)]),_0x5dbbb3[_0x28bf9f(0x6b2)]&&(_0x423080[_0x28bf9f(0x6b2)]=_0x5dbbb3[_0x28bf9f(0x6b2)]),_0x5dbbb3[_0x28bf9f(0x40a)]&&(_0x423080['role']=_0x5dbbb3[_0x28bf9f(0x40a)]);}else _0x3701f8[_0x28bf9f(0x4ce)]['push']({'_id':_0x5dbbb3[_0x28bf9f(0x699)]||new pe['default']['Types'][(_0x28bf9f(0x4cf))]()['toString'](),'fone':_0x5dbbb3[_0x28bf9f(0x7d6)],'name':_0x5dbbb3[_0x28bf9f(0x592)],'email':_0x5dbbb3[_0x28bf9f(0x6b2)],'role':_0x5dbbb3[_0x28bf9f(0x40a)]});}let _0x6e33d8={'agents':_0x3701f8[_0x28bf9f(0x4ce)]},_0x3e1841=await this['repository']['automateSystem'][_0x28bf9f(0x7ae)](_0x6e33d8,this[_0x28bf9f(0x78a)][_0x28bf9f(0x3ef)]);return this['AutomateSystem']=_0x3e1841,this[_0x28bf9f(0x669)][_0x28bf9f(0x2a0)](this['instanceName']+'\x20('+this[_0x28bf9f(0x78a)][_0x28bf9f(0x3ef)]+'):\x20alterando\x20this.AutomateSystem'),this['logger']['verbose'](this[_0x28bf9f(0x193)]+'\x20('+this['instance']['wuid']+_0x28bf9f(0x526)+this['AutomateSystem']),_0x3e1841;}catch(_0x23c757){let _0x1364e='Erro\x20ao\x20editar\x20agentes',_0xcbb321=_0x23c757 instanceof Error?_0x23c757[_0x28bf9f(0x334)]:typeof _0x23c757==_0x28bf9f(0x623)?JSON[_0x28bf9f(0x5ab)](_0x23c757):_0x23c757,_0x5ccd4e=_0x1364e+':\x20'+_0xcbb321;throw this[_0x28bf9f(0x669)][_0x28bf9f(0x5c5)](this['instanceName']+'\x20('+this[_0x28bf9f(0x78a)][_0x28bf9f(0x3ef)]+_0x28bf9f(0x526)+_0x5ccd4e),new m(_0x5ccd4e);}}async[a0_0x98996d(0x441)](_0x43bc42){const _0x22fe95=a0_0x98996d;try{let _0x374f8b=await this[_0x22fe95(0x50b)]['automateSystem'][_0x22fe95(0x70c)](this['instance'][_0x22fe95(0x3ef)]),_0x23f3ed=_0x43bc42[_0x22fe95(0x699)]?_0x374f8b[_0x22fe95(0x52b)][_0x22fe95(0x806)](_0x6cf671=>_0x6cf671[_0x22fe95(0x699)]===_0x43bc42['_id']):-0x1,_0x6837cf=!0x1,_0x358ee6=_0x374f8b[_0x22fe95(0x52b)]['some'](_0x25ad5a=>_0x25ad5a[_0x22fe95(0x2fd)]===_0x43bc42[_0x22fe95(0x2fd)]);if(_0x43bc42[_0x22fe95(0x6d0)]&&_0x23f3ed>-0x1)_0x374f8b[_0x22fe95(0x52b)][_0x22fe95(0x7a6)](_0x23f3ed,0x1),_0x6837cf=!0x0;else{if(_0x23f3ed>-0x1){if(_0x374f8b[_0x22fe95(0x52b)][_0x22fe95(0x6f9)](_0x20ce79=>_0x20ce79['name']===_0x43bc42[_0x22fe95(0x592)]&&_0x20ce79[_0x22fe95(0x699)]!==_0x43bc42[_0x22fe95(0x699)]))throw new Error(_0x22fe95(0x273));let _0x4ca4a2=_0x374f8b[_0x22fe95(0x52b)][_0x23f3ed];_0x43bc42[_0x22fe95(0x2fd)]&&(_0x358ee6||!Number[_0x22fe95(0x4f2)](_0x43bc42[_0x22fe95(0x2fd)]))&&(_0x4ca4a2[_0x22fe95(0x2fd)]=_0x43bc42[_0x22fe95(0x2fd)],_0x6837cf=!0x0),_0x43bc42[_0x22fe95(0x592)]&&(_0x4ca4a2[_0x22fe95(0x592)]=_0x43bc42['name']);}else{if(_0x374f8b[_0x22fe95(0x52b)]['some'](_0x1fc79d=>_0x1fc79d[_0x22fe95(0x592)]===_0x43bc42[_0x22fe95(0x592)]&&_0x1fc79d['_id']!==_0x43bc42[_0x22fe95(0x699)]))throw new Error('Nome\x20do\x20campo\x20personalizado\x20j\x20existe.');_0x374f8b['customFields']['push']({'_id':_0x43bc42[_0x22fe95(0x699)]||new pe[(_0x22fe95(0x36a))]['Types']['ObjectId']()[_0x22fe95(0x191)](),'order':_0x43bc42[_0x22fe95(0x2fd)],'name':_0x43bc42[_0x22fe95(0x592)]}),_0x6837cf=!0x0;}}if(_0x6837cf){_0x374f8b[_0x22fe95(0x52b)]['sort']((_0x20a55c,_0x5b07b5)=>_0x20a55c['order']>_0x5b07b5['order']?0x1:_0x5b07b5[_0x22fe95(0x2fd)]>_0x20a55c['order']?-0x1:0x0);for(let _0x265157=0x0;_0x265157<_0x374f8b[_0x22fe95(0x52b)][_0x22fe95(0x217)];_0x265157++)_0x374f8b[_0x22fe95(0x52b)][_0x265157]['order']=_0x265157+0x1;}let _0x14b1d3=await this[_0x22fe95(0x50b)][_0x22fe95(0x1ce)]['update'](_0x374f8b,this[_0x22fe95(0x78a)][_0x22fe95(0x3ef)]);return this[_0x22fe95(0x227)]=_0x14b1d3,this[_0x22fe95(0x669)]['verbose'](this[_0x22fe95(0x193)]+'\x20('+this['instance'][_0x22fe95(0x3ef)]+_0x22fe95(0x4d2)),this[_0x22fe95(0x669)]['verbose'](this[_0x22fe95(0x193)]+'\x20('+this['instance'][_0x22fe95(0x3ef)]+_0x22fe95(0x526)+this[_0x22fe95(0x227)]),_0x14b1d3;}catch(_0x2a477d){let _0x463e1c=_0x22fe95(0x80e),_0x2f3b0b=_0x2a477d instanceof Error?_0x2a477d[_0x22fe95(0x334)]:typeof _0x2a477d==_0x22fe95(0x623)?JSON[_0x22fe95(0x5ab)](_0x2a477d):_0x2a477d,_0x3c1c67=_0x463e1c+':\x20'+_0x2f3b0b;throw this['logger'][_0x22fe95(0x5c5)](this[_0x22fe95(0x193)]+'\x20('+this[_0x22fe95(0x78a)][_0x22fe95(0x3ef)]+'):\x20'+_0x3c1c67),new m(_0x3c1c67);}}async['updateAutoCompleteMessages'](_0x3f4bed){const _0x2fdca8=a0_0x98996d;try{let _0x1ff8a2=await this[_0x2fdca8(0x50b)]['automateSystem']['findOrCreate'](this[_0x2fdca8(0x78a)][_0x2fdca8(0x3ef)]),_0x42f004=_0x1ff8a2?.[_0x2fdca8(0x7ec)]?.[_0x2fdca8(0x806)](_0x1470c5=>_0x1470c5[_0x2fdca8(0x699)]===_0x3f4bed?.[_0x2fdca8(0x699)]);if(_0x3f4bed?.[_0x2fdca8(0x6d0)])_0x42f004>-0x1&&_0x1ff8a2?.[_0x2fdca8(0x7ec)]?.['splice'](_0x42f004,0x1);else{if(_0x42f004>-0x1){let _0x537d8a=_0x1ff8a2[_0x2fdca8(0x7ec)][_0x42f004];_0x537d8a[_0x2fdca8(0x2fd)]=_0x3f4bed?.[_0x2fdca8(0x2fd)]||_0x537d8a[_0x2fdca8(0x2fd)],_0x537d8a[_0x2fdca8(0x2b2)]=_0x3f4bed?.['command']||_0x537d8a['command'],_0x537d8a['message']=_0x3f4bed?.[_0x2fdca8(0x334)]||_0x537d8a[_0x2fdca8(0x334)];}else{let _0x3bd5b4={'_id':_0x3f4bed?.[_0x2fdca8(0x699)]||new pe[(_0x2fdca8(0x36a))][(_0x2fdca8(0x316))]['ObjectId']()[_0x2fdca8(0x191)](),'order':_0x3f4bed?.[_0x2fdca8(0x2fd)],'command':_0x3f4bed?.[_0x2fdca8(0x2b2)],'message':_0x3f4bed?.[_0x2fdca8(0x334)]};_0x1ff8a2?.[_0x2fdca8(0x7ec)]?.['push'](_0x3bd5b4);}}_0x1ff8a2?.['autoCompleteMessages']?.[_0x2fdca8(0x3ac)]((_0x6825bf,_0x653c36)=>_0x6825bf['order']-_0x653c36['order']);let _0x3b6067=await this[_0x2fdca8(0x50b)][_0x2fdca8(0x1ce)][_0x2fdca8(0x7ae)](_0x1ff8a2,this[_0x2fdca8(0x78a)][_0x2fdca8(0x3ef)]);return this[_0x2fdca8(0x227)]=_0x3b6067,this[_0x2fdca8(0x669)]['verbose'](this[_0x2fdca8(0x193)]+'\x20('+this[_0x2fdca8(0x78a)]['wuid']+_0x2fdca8(0x4d2)),_0x3b6067;}catch(_0x29da7e){let _0x27c221=_0x2fdca8(0x242),_0x2be3c6=_0x29da7e instanceof Error?_0x29da7e[_0x2fdca8(0x334)]:typeof _0x29da7e==_0x2fdca8(0x623)?JSON[_0x2fdca8(0x5ab)](_0x29da7e):_0x29da7e,_0x5e676a=_0x27c221+':\x20'+_0x2be3c6;throw this[_0x2fdca8(0x669)][_0x2fdca8(0x5c5)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x2fdca8(0x526)+_0x5e676a),new m(_0x5e676a);}}async[a0_0x98996d(0x6f2)](_0x23bb50){const _0x20350b=a0_0x98996d;try{let _0x308be1=await this[_0x20350b(0x50b)][_0x20350b(0x1ce)][_0x20350b(0x70c)](this[_0x20350b(0x78a)][_0x20350b(0x3ef)]);if(!_0x308be1)throw new Error(_0x20350b(0x1fe));let _0x402260={'_id':_0x308be1['_id'],'flowConfig':{'enabled':_0x23bb50['enabled']??_0x308be1[_0x20350b(0x1fc)][_0x20350b(0x7ca)],'ignoreGroups':_0x23bb50[_0x20350b(0x7fb)]??_0x308be1[_0x20350b(0x1fc)][_0x20350b(0x7fb)],'stopConversation':_0x23bb50[_0x20350b(0x427)]['trim']()??_0x308be1[_0x20350b(0x1fc)][_0x20350b(0x427)][_0x20350b(0x317)](),'stopMinutes':_0x23bb50['stopMinutes']??_0x308be1['flowConfig']['stopMinutes'],'stopWhenYouSendMsg':_0x23bb50[_0x20350b(0x510)]??_0x308be1['flowConfig'][_0x20350b(0x510)]}},_0x55a1c8=await this[_0x20350b(0x50b)]['automateSystem'][_0x20350b(0x7ae)](_0x402260,this[_0x20350b(0x78a)]['wuid']);return this[_0x20350b(0x227)]=_0x55a1c8,this[_0x20350b(0x669)][_0x20350b(0x2a0)](this[_0x20350b(0x193)]+'\x20('+this[_0x20350b(0x78a)][_0x20350b(0x3ef)]+_0x20350b(0x432)),this[_0x20350b(0x669)][_0x20350b(0x2a0)](this[_0x20350b(0x193)]+'\x20('+this[_0x20350b(0x78a)][_0x20350b(0x3ef)]+_0x20350b(0x526)+this[_0x20350b(0x227)]),setTimeout(()=>this[_0x20350b(0x1e8)](),0x7d0),_0x55a1c8;}catch(_0x1b8ad2){let _0x551816=_0x20350b(0x4ba),_0x311a02=_0x1b8ad2 instanceof Error?_0x1b8ad2[_0x20350b(0x334)]:typeof _0x1b8ad2==_0x20350b(0x623)?JSON[_0x20350b(0x5ab)](_0x1b8ad2):_0x1b8ad2,_0x3825c7=_0x551816+':\x20'+_0x311a02;throw this[_0x20350b(0x669)][_0x20350b(0x5c5)](this[_0x20350b(0x193)]+'\x20('+this[_0x20350b(0x78a)][_0x20350b(0x3ef)]+_0x20350b(0x526)+_0x3825c7),new m(_0x3825c7);}}async['getAutomateSystem'](){const _0x43edf6=a0_0x98996d;try{let _0xdc55b5=await this[_0x43edf6(0x50b)]['automateSystem'][_0x43edf6(0x70c)](this['instance'][_0x43edf6(0x3ef)]);return this['AutomateSystem']=_0xdc55b5,_0xdc55b5;}catch(_0x11c6bf){let _0x355c3e=_0x43edf6(0x4ff),_0x419f70=_0x11c6bf instanceof Error?_0x11c6bf[_0x43edf6(0x334)]:typeof _0x11c6bf==_0x43edf6(0x623)?JSON[_0x43edf6(0x5ab)](_0x11c6bf):_0x11c6bf,_0x45f552=_0x355c3e+':\x20'+_0x419f70;throw this[_0x43edf6(0x669)][_0x43edf6(0x5c5)](this[_0x43edf6(0x193)]+'\x20('+this['instance'][_0x43edf6(0x3ef)]+_0x43edf6(0x526)+_0x45f552),new m(_0x45f552);}}async[a0_0x98996d(0x1db)](){const _0x34e6f8=a0_0x98996d;let _0x5a9fd5=(await import(_0x34e6f8(0x6ec)))[_0x34e6f8(0x36a)];this[_0x34e6f8(0x81b)]=new _0x5a9fd5({'concurrency':0x1});}async[a0_0x98996d(0x7dc)](){const _0x5878e8=a0_0x98996d;this[_0x5878e8(0x78a)][_0x5878e8(0x346)]['timeout']&&clearTimeout(this[_0x5878e8(0x78a)][_0x5878e8(0x346)][_0x5878e8(0x381)]),this[_0x5878e8(0x78a)]['ScheduleMessage'][_0x5878e8(0x381)]=setTimeout(()=>{const _0x516dea=_0x5878e8;this[_0x516dea(0x18a)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x98996d(0x18a)](){const _0x1dd5a9=a0_0x98996d;Date[_0x1dd5a9(0x4a3)]()-this[_0x1dd5a9(0x78a)][_0x1dd5a9(0x346)][_0x1dd5a9(0x573)]>=0x1d4c0&&(this[_0x1dd5a9(0x669)]['verbose'](this[_0x1dd5a9(0x193)]+'\x20('+this[_0x1dd5a9(0x78a)][_0x1dd5a9(0x3ef)]+_0x1dd5a9(0x706)),this[_0x1dd5a9(0x78a)][_0x1dd5a9(0x346)][_0x1dd5a9(0x2fc)]=null,this[_0x1dd5a9(0x78a)]['ScheduleMessage']['lastSend']=0x0,this[_0x1dd5a9(0x78a)]['ScheduleMessage']['delayMessage']=0x0,setTimeout(()=>this[_0x1dd5a9(0x1e8)](),0x3e8));}async[a0_0x98996d(0x1e8)](){const _0x4d4415=a0_0x98996d;if(this['logger'][_0x4d4415(0x2a0)](this[_0x4d4415(0x193)]+'\x20('+this[_0x4d4415(0x78a)][_0x4d4415(0x3ef)]+_0x4d4415(0x7b2)),!this[_0x4d4415(0x78a)][_0x4d4415(0x346)][_0x4d4415(0x2ab)]){this['logger'][_0x4d4415(0x7e8)](this[_0x4d4415(0x193)]+'\x20('+this[_0x4d4415(0x78a)][_0x4d4415(0x3ef)]+_0x4d4415(0x716)),this[_0x4d4415(0x78a)][_0x4d4415(0x346)][_0x4d4415(0x2fc)]=null,this[_0x4d4415(0x78a)]['ScheduleMessage'][_0x4d4415(0x573)]=0x0,this[_0x4d4415(0x78a)][_0x4d4415(0x346)][_0x4d4415(0x7cf)]=0x0;return;}try{await this['transformScheduledMessagesByType']();let _0x5926bd=await this[_0x4d4415(0x525)]();if(_0x5926bd[_0x4d4415(0x217)]===0x0){this['logger'][_0x4d4415(0x7e8)](this['instanceName']+'\x20('+this['instance'][_0x4d4415(0x3ef)]+_0x4d4415(0x66f)),await this[_0x4d4415(0x1e1)]();return;}this[_0x4d4415(0x78a)]['ScheduleMessage'][_0x4d4415(0x2fc)]=_0x5926bd[0x0],this[_0x4d4415(0x669)][_0x4d4415(0x2a0)](this[_0x4d4415(0x193)]+'\x20('+this[_0x4d4415(0x78a)]['wuid']+_0x4d4415(0x2d7)),this['queue'][_0x4d4415(0x712)](()=>this[_0x4d4415(0x396)](_0x5926bd)),await this[_0x4d4415(0x1e1)]();}catch(_0x24daee){this[_0x4d4415(0x669)]['error'](_0x4d4415(0x3f1)+(_0x24daee instanceof Error?_0x24daee['message']:JSON[_0x4d4415(0x5ab)](_0x24daee,null,0x2))),await this['scheduleNextExecution']();}}async['getReadyToSendMessages'](){const _0xffe20a=a0_0x98996d;this[_0xffe20a(0x669)][_0xffe20a(0x7e8)](this[_0xffe20a(0x193)]+'\x20('+this[_0xffe20a(0x78a)][_0xffe20a(0x3ef)]+_0xffe20a(0x599));let _0x4d5f2c=new Date(Date[_0xffe20a(0x4a3)]()-0xc*0x3c*0x3c*0x3e8),_0x1e55ba={'where':{'status':{'$in':[_0xffe20a(0x729),_0xffe20a(0x47b)]},'$or':[{'when':{'$lte':new Date(),'$gte':_0x4d5f2c}},{'when':0x0}]}},_0x39dfb9=await this[_0xffe20a(0x50b)][_0xffe20a(0x2a3)]['find'](_0x1e55ba,this[_0xffe20a(0x78a)][_0xffe20a(0x3ef)]);return this['logger'][_0xffe20a(0x7e8)](this[_0xffe20a(0x193)]+'\x20('+this[_0xffe20a(0x78a)][_0xffe20a(0x3ef)]+_0xffe20a(0x5eb)+_0x39dfb9[_0xffe20a(0x217)]),_0x39dfb9;}async[a0_0x98996d(0x396)](_0x2100d3){const _0x1f6584=a0_0x98996d;this[_0x1f6584(0x669)]['verbose'](this[_0x1f6584(0x193)]+'\x20('+this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)]+_0x1f6584(0x53d));let _0xd27130=0xbb8,_0x54b77e=Math[_0x1f6584(0x6fc)](Math[_0x1f6584(0x768)]()*(0x1f40-_0xd27130+0x1))+_0xd27130;for(let _0x3b72fa of _0x2100d3){let _0x3e1137={'startSend':Date['now'](),'status':'sending'};if(await this[_0x1f6584(0x50b)][_0x1f6584(0x2a3)]['updateOne']({'_id':_0x3b72fa[_0x1f6584(0x699)]},_0x3e1137,this[_0x1f6584(0x78a)]['wuid'])){if(!this[_0x1f6584(0x78a)][_0x1f6584(0x346)][_0x1f6584(0x2ab)]){this[_0x1f6584(0x669)][_0x1f6584(0x7e8)](this['instanceName']+'\x20('+this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)]+_0x1f6584(0x6fe));break;}for(this[_0x1f6584(0x1e2)]=_0x3b72fa[_0x1f6584(0x814)][_0x1f6584(0x29b)](_0x1df91c=>!_0x1df91c[_0x1f6584(0x14d)]);this[_0x1f6584(0x1e2)][_0x1f6584(0x217)]>0x0;){await this[_0x1f6584(0x7dc)]();let _0x17e78=this[_0x1f6584(0x61e)]();if(!_0x17e78)break;let _0x3a7bc7=_0x3b72fa[_0x1f6584(0x814)][_0x1f6584(0x704)](_0xad2e2b=>_0xad2e2b['_id']===_0x17e78[_0x1f6584(0x699)]);if(!_0x3a7bc7)break;if(this[_0x1f6584(0x78a)][_0x1f6584(0x346)][_0x1f6584(0x573)]=Date[_0x1f6584(0x4a3)](),_0x3a7bc7['triedToSend']){this[_0x1f6584(0x669)][_0x1f6584(0x7e8)](this[_0x1f6584(0x193)]+'\x20('+this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)]+_0x1f6584(0x379)+_0x3a7bc7[_0x1f6584(0x5d9)]+'.\x20Pulando.'),this[_0x1f6584(0x1e2)]=this['pendingMessages'][_0x1f6584(0x29b)](_0x5beb72=>_0x5beb72[_0x1f6584(0x699)]!==_0x3a7bc7[_0x1f6584(0x699)]);continue;}if(!this[_0x1f6584(0x78a)]['ScheduleMessage']['isConnected']){this[_0x1f6584(0x669)][_0x1f6584(0x7e8)](this['instanceName']+'\x20('+this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)]+_0x1f6584(0x5a4));break;}if(this[_0x1f6584(0x78a)][_0x1f6584(0x346)]['processingGroup'][_0x1f6584(0x7ce)]===_0x1f6584(0x25f)){this[_0x1f6584(0x669)]['warn'](this[_0x1f6584(0x193)]+'\x20('+this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)]+'):\x20Envio\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.'),this[_0x1f6584(0x78a)][_0x1f6584(0x346)][_0x1f6584(0x2fc)]=null;break;}try{this[_0x1f6584(0x669)][_0x1f6584(0x7e8)](this[_0x1f6584(0x193)]+'\x20('+this[_0x1f6584(0x78a)]['wuid']+'):\x20Enviando\x20mensagem\x20para\x20'+_0x3a7bc7['remoteJid']);let _0x37e9e6=await this['SendScheduleMessage'](_0x3a7bc7[_0x1f6584(0x5d9)],_0x3a7bc7),_0x5d1284={'$push':{'messagesSend':{'idControl':_0x3a7bc7[_0x1f6584(0x699)],'remoteJid':_0x3a7bc7[_0x1f6584(0x5d9)],'error':_0x37e9e6['error'],'id':_0x37e9e6[_0x1f6584(0x5c5)]?null:_0x37e9e6['id'],'error_log':_0x37e9e6['error']?_0x37e9e6[_0x1f6584(0x756)]?_0x37e9e6[_0x1f6584(0x756)][_0x1f6584(0x191)]():'':null,'log_timestamp':Date[_0x1f6584(0x4a3)]()}},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x558f5e=[{'elem._id':_0x3a7bc7[_0x1f6584(0x699)]}];this[_0x1f6584(0x669)][_0x1f6584(0x7e8)](this[_0x1f6584(0x193)]+'\x20('+this[_0x1f6584(0x78a)]['wuid']+_0x1f6584(0x7a4)+_0x3a7bc7['_id']);let _0x4c95b9=await this[_0x1f6584(0x50b)][_0x1f6584(0x2a3)][_0x1f6584(0x1f8)]({'_id':_0x3b72fa['_id']},_0x5d1284,this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)],{'arrayFilters':_0x558f5e});this['instance'][_0x1f6584(0x346)]['processingGroup']=_0x4c95b9,_0x37e9e6[_0x1f6584(0x5c5)]&&this['logger'][_0x1f6584(0x5c5)](this[_0x1f6584(0x193)]+'\x20('+this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)]+_0x1f6584(0x56d)+_0x37e9e6[_0x1f6584(0x756)]);let _0x2db8be=this[_0x1f6584(0x80c)](_0x3b72fa[_0x1f6584(0x2c4)],_0x3b72fa[_0x1f6584(0x474)]);await this['sleep'](_0x2db8be);}catch(_0x5305c8){this[_0x1f6584(0x669)]['error'](this['instanceName']+'\x20('+this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)]+_0x1f6584(0x51c)+_0x3a7bc7[_0x1f6584(0x5d9)]+':\x20'+(_0x5305c8 instanceof Error?_0x5305c8['message']:JSON[_0x1f6584(0x5ab)](_0x5305c8,null,0x2)));let _0x46cca4={'$push':{'messagesSend':{'idControl':_0x3a7bc7['_id'],'remoteJid':_0x3a7bc7[_0x1f6584(0x5d9)],'error':!0x0,'id':null,'error_log':_0x5305c8 instanceof Error?_0x5305c8['message']:JSON[_0x1f6584(0x5ab)](_0x5305c8,null,0x2),'log_timestamp':Date['now']()}},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x336d18=[{'elem._id':_0x3a7bc7[_0x1f6584(0x699)]}],_0x5bc480=await this['repository'][_0x1f6584(0x2a3)][_0x1f6584(0x1f8)]({'_id':_0x3b72fa['_id']},_0x46cca4,this['instance'][_0x1f6584(0x3ef)],{'arrayFilters':_0x336d18});this[_0x1f6584(0x78a)]['ScheduleMessage'][_0x1f6584(0x2fc)]=_0x5bc480;}finally{if(_0x3a7bc7[_0x1f6584(0x14d)]=!0x0,this[_0x1f6584(0x1e2)]=this[_0x1f6584(0x1e2)][_0x1f6584(0x29b)](_0x3b0ea2=>_0x3b0ea2[_0x1f6584(0x699)]!==_0x3a7bc7[_0x1f6584(0x699)]),this[_0x1f6584(0x1e2)][_0x1f6584(0x217)]===0x0&&this[_0x1f6584(0x78a)]['ScheduleMessage'][_0x1f6584(0x2fc)][_0x1f6584(0x7ce)]!=='stopped'){let _0x40f378={'$set':{'status':'done'}},_0x22f034=await this[_0x1f6584(0x50b)][_0x1f6584(0x2a3)][_0x1f6584(0x713)](_0x3b72fa[_0x1f6584(0x699)],_0x40f378,this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)]);this[_0x1f6584(0x78a)]['ScheduleMessage'][_0x1f6584(0x2fc)]=_0x22f034;}if(this['instance']['ScheduleMessage']['processingGroup']['status']===_0x1f6584(0x25f)){this[_0x1f6584(0x669)][_0x1f6584(0x7e8)](this[_0x1f6584(0x193)]+'\x20('+this[_0x1f6584(0x78a)][_0x1f6584(0x3ef)]+_0x1f6584(0x267)+_0x3b72fa[_0x1f6584(0x699)]+_0x1f6584(0x2f4)),this[_0x1f6584(0x78a)][_0x1f6584(0x346)][_0x1f6584(0x2fc)]=null;break;}}}await new Promise(_0x32610f=>setTimeout(_0x32610f,_0x54b77e)),global['gc']?global['gc']():console[_0x1f6584(0x7e8)](_0x1f6584(0x348));}}this['instance'][_0x1f6584(0x346)][_0x1f6584(0x2fc)]&&this[_0x1f6584(0x1e2)]['length']===0x0&&(this['instance']['ScheduleMessage'][_0x1f6584(0x2fc)]=null);}[a0_0x98996d(0x61e)](){const _0x58370a=a0_0x98996d;return this['pendingMessages'][_0x58370a(0x217)]===0x0?null:this[_0x58370a(0x1e2)][_0x58370a(0x7f2)]((_0x7f2305,_0x4c2ca0)=>(_0x7f2305[_0x58370a(0x2fd)]??Number['MAX_SAFE_INTEGER'])<(_0x4c2ca0[_0x58370a(0x2fd)]??Number[_0x58370a(0x5c1)])?_0x7f2305:_0x4c2ca0,this['pendingMessages'][0x0]);}async[a0_0x98996d(0x1e1)](){const _0x7e725f=a0_0x98996d;this['logger']['verbose'](this[_0x7e725f(0x193)]+'\x20('+this[_0x7e725f(0x78a)][_0x7e725f(0x3ef)]+'):\x20Iniciando\x20scheduleNextExecution.');let _0x176fe5=new Date(Date[_0x7e725f(0x4a3)]()-0xc*0x3c*0x3c*0x3e8),_0x17550b={'where':{'status':_0x7e725f(0x729),'$or':[{'when':{'$lte':new Date(),'$gte':_0x176fe5}},{'when':0x0}]}},_0x525b84=await this[_0x7e725f(0x50b)][_0x7e725f(0x2a3)][_0x7e725f(0x218)](_0x17550b,this['instance']['wuid']);_0x525b84&&_0x525b84['when']>Date[_0x7e725f(0x4a3)]()?this['instance'][_0x7e725f(0x346)][_0x7e725f(0x7cf)]=_0x525b84[_0x7e725f(0x27c)]-Date[_0x7e725f(0x4a3)]():this[_0x7e725f(0x78a)]['ScheduleMessage'][_0x7e725f(0x7cf)]=(0x3c+Math[_0x7e725f(0x6fc)](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x7e725f(0x78a)][_0x7e725f(0x346)][_0x7e725f(0x7cf)]=Math[_0x7e725f(0x391)](this[_0x7e725f(0x78a)][_0x7e725f(0x346)][_0x7e725f(0x7cf)],0x2*0x3e8);let _0x2ae23d=Math[_0x7e725f(0x1c6)](this[_0x7e725f(0x78a)][_0x7e725f(0x346)][_0x7e725f(0x7cf)]/0xea60);if(_0x525b84){let _0x15d2e8=new Date(_0x525b84[_0x7e725f(0x27c)])[_0x7e725f(0x4d9)]();this[_0x7e725f(0x669)][_0x7e725f(0x7e8)](this[_0x7e725f(0x193)]+'\x20('+this[_0x7e725f(0x78a)][_0x7e725f(0x3ef)]+_0x7e725f(0x2c6)+_0x15d2e8+_0x7e725f(0x4fa)+_0x2ae23d+'\x20minutos');}else this[_0x7e725f(0x669)][_0x7e725f(0x7e8)](this['instanceName']+'\x20('+this[_0x7e725f(0x78a)][_0x7e725f(0x3ef)]+'):\x20no\x20encontrado\x20prxima\x20mensagem,\x20far\x20nova\x20verificao\x20em\x20'+_0x2ae23d+_0x7e725f(0x154));setTimeout(()=>this[_0x7e725f(0x1e8)](),this[_0x7e725f(0x78a)]['ScheduleMessage'][_0x7e725f(0x7cf)]);}[a0_0x98996d(0x80c)](_0x1e622e,_0x2a102f){const _0x1d53dc=a0_0x98996d;return _0x1e622e=Math[_0x1d53dc(0x391)](0.5,_0x1e622e),_0x2a102f=Math['min'](Math[_0x1d53dc(0x391)](0x3,_0x2a102f),0x78),Math['floor'](Math[_0x1d53dc(0x768)]()*(_0x2a102f-_0x1e622e+0x1)+_0x1e622e)*0x3e8;}[a0_0x98996d(0x4eb)](_0x51cb45){return new Promise(_0x5a75cc=>setTimeout(_0x5a75cc,_0x51cb45));}async[a0_0x98996d(0x28a)](_0x489d73){const _0x31126b=a0_0x98996d;if(!this[_0x31126b(0x227)]&&(await this[_0x31126b(0x472)](),!this['AutomateSystem']))return null;_0x489d73=this[_0x31126b(0x5b5)](_0x489d73);let _0x4d2a6a=await this['repository'][_0x31126b(0x500)][_0x31126b(0x218)]({'where':{'_id':_0x489d73}},this[_0x31126b(0x78a)][_0x31126b(0x3ef)]),_0x522ec6={};if(_0x4d2a6a&&_0x4d2a6a[_0x31126b(0x5b0)]){let _0x5db00e=_0x4d2a6a[_0x31126b(0x5b0)];typeof _0x5db00e[_0x31126b(0x16b)]==_0x31126b(0x170)&&(_0x522ec6['nome']=_0x5db00e[_0x31126b(0x16b)]),typeof _0x5db00e['nomecompleto']==_0x31126b(0x170)&&(_0x522ec6['nomecompleto']=_0x5db00e['nomecompleto']),typeof _0x5db00e[_0x31126b(0x6b2)]==_0x31126b(0x170)&&(_0x522ec6[_0x31126b(0x6b2)]=_0x5db00e[_0x31126b(0x6b2)]),typeof _0x5db00e['cpf']==_0x31126b(0x170)&&(_0x522ec6[_0x31126b(0x653)]=_0x5db00e['cpf']),typeof _0x5db00e['status']==_0x31126b(0x170)&&(_0x522ec6['status']=_0x5db00e[_0x31126b(0x7ce)]),typeof _0x5db00e[_0x31126b(0x845)]==_0x31126b(0x170)&&(_0x522ec6[_0x31126b(0x845)]=_0x5db00e['notas']),typeof _0x5db00e[_0x31126b(0x256)]==_0x31126b(0x170)&&(_0x522ec6[_0x31126b(0x256)]=_0x5db00e[_0x31126b(0x256)]),Array['isArray'](_0x5db00e['tags'])&&(_0x522ec6[_0x31126b(0x6e6)]=_0x5db00e['tags'][_0x31126b(0x38e)](',\x20')),Array[_0x31126b(0x481)](_0x5db00e[_0x31126b(0x3c1)])&&(_0x522ec6[_0x31126b(0x3c1)]=_0x5db00e[_0x31126b(0x3c1)][_0x31126b(0x38e)](',\x20'));}return _0x4d2a6a&&_0x4d2a6a['leadInfo']&&_0x4d2a6a[_0x31126b(0x5b0)]['customFields']&&_0x4d2a6a[_0x31126b(0x5b0)][_0x31126b(0x52b)][_0x31126b(0x15b)](_0x1b84e6=>{const _0x335988=_0x31126b;let _0x1793a6=this['AutomateSystem']?.['customFields'][_0x335988(0x704)](_0x2e1d42=>_0x2e1d42['_id']===_0x1b84e6[_0x335988(0x699)]);_0x1793a6&&(_0x522ec6[_0x1793a6[_0x335988(0x592)]]=_0x1b84e6[_0x335988(0x7f4)]);}),_0x522ec6;}async['replaceVariablesChat'](_0x56461d,_0x30925e){const _0x54f70f=a0_0x98996d;try{let _0x5303b6=await this[_0x54f70f(0x28a)](_0x30925e);return this[_0x54f70f(0x202)](_0x56461d,_0x5303b6);}catch(_0x36b367){return this[_0x54f70f(0x669)][_0x54f70f(0x5c5)]('Erro\x20ao\x20substituir\x20variveis\x20para\x20'+_0x30925e+':\x20'+_0x36b367),_0x56461d;}}async[a0_0x98996d(0x74b)](){const _0x47fac7=a0_0x98996d;let _0x1948c8=async(_0x5d672e,_0x9a4015)=>{const _0xfc45c8=a0_0x431f;let _0x387827=(await this[_0xfc45c8(0x50b)][_0xfc45c8(0x2a3)][_0xfc45c8(0x704)]({'where':{'type':_0x5d672e}},this[_0xfc45c8(0x78a)]['wuid']))[_0xfc45c8(0x384)](async _0x18fcab=>{const _0x4ae113=_0xfc45c8;let _0x25abf4=_0x9a4015(_0x18fcab),_0x335e2a=_0x863f91=>/^\d+$/[_0x4ae113(0x406)](_0x863f91),_0x37436b=_0x18fcab[_0x4ae113(0x33c)][_0x4ae113(0x29b)](_0x27c5a3=>_0x27c5a3[_0x4ae113(0x553)]('@s.whatsapp.net')?_0x27c5a3[_0x4ae113(0x217)]>0x19:_0x27c5a3[_0x4ae113(0x553)](_0x4ae113(0x27b))?_0x27c5a3[_0x4ae113(0x217)]>0xf:_0x335e2a(_0x27c5a3)?_0x27c5a3[_0x4ae113(0x217)]>=0xb:!0x1)[_0x4ae113(0x384)](_0xaf27a0=>({'_id':(0x0,Y['v4'])(),'idSchedule':_0x18fcab[_0x4ae113(0x699)],'type':_0x25abf4,'remoteJid':_0xaf27a0,'flow':_0x18fcab[_0x4ae113(0x4a5)],'text':_0x18fcab['message']?.[_0x4ae113(0x673)],'delay':_0x18fcab[_0x4ae113(0x334)]?.['delay'],'urlOrBase64':_0x18fcab[_0x4ae113(0x334)]?.[_0x4ae113(0x2a4)],'linkPreview':_0x18fcab[_0x4ae113(0x334)]?.['linkPreview'],'fileName':_0x18fcab[_0x4ae113(0x334)]?.[_0x4ae113(0x344)],'triedToSend':!0x1,'messagesSend':[]}));try{await this['repository'][_0x4ae113(0x2a3)][_0x4ae113(0x713)](_0x18fcab[_0x4ae113(0x699)],{'$set':{'messages':_0x37436b},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x4ae113(0x78a)][_0x4ae113(0x3ef)]);}catch(_0x46c720){console[_0x4ae113(0x5c5)](_0x4ae113(0x30a)+_0x18fcab[_0x4ae113(0x699)]+':',_0x46c720);}});await Promise[_0xfc45c8(0x6aa)](_0x387827);};await _0x1948c8(_0x47fac7(0x673),_0x119a07=>_0x47fac7(0x673)),await _0x1948c8(_0x47fac7(0x36d),_0x36a193=>_0x36a193['message']?.['mediatype']||_0x47fac7(0x36d)),await _0x1948c8('audio',_0x3f0e6e=>_0x47fac7(0x767)),await _0x1948c8(_0x47fac7(0x1e0),_0x184363=>_0x47fac7(0x1e0)),await _0x1948c8(_0x47fac7(0x6cc),_0x49cf66=>'image'),await _0x1948c8(_0x47fac7(0x84f),_0x1989bd=>_0x47fac7(0x84f)),await _0x1948c8(_0x47fac7(0x672),_0x5d908e=>_0x47fac7(0x672)),this[_0x47fac7(0x669)]['warn'](this[_0x47fac7(0x193)]+'\x20('+this[_0x47fac7(0x78a)][_0x47fac7(0x3ef)]+_0x47fac7(0x387));}async[a0_0x98996d(0x433)](_0x2d99d4){const _0x55c508=a0_0x98996d;try{if(this[_0x55c508(0x669)][_0x55c508(0x7e8)](this[_0x55c508(0x193)]+'\x20('+this[_0x55c508(0x78a)][_0x55c508(0x3ef)]+_0x55c508(0x119)),_0x2d99d4[_0x55c508(0x699)]||(_0x2d99d4[_0x55c508(0x699)]=(0x0,Y['v4'])()),this[_0x55c508(0x78a)][_0x55c508(0x346)][_0x55c508(0x2fc)]?.[_0x55c508(0x699)]===_0x2d99d4['_id']?.[_0x55c508(0x191)]()){if(_0x2d99d4[_0x55c508(0x7ce)]==='stopped')this[_0x55c508(0x78a)][_0x55c508(0x346)][_0x55c508(0x2fc)]=null;else throw new Error(_0x55c508(0x21a));}if(_0x2d99d4[_0x55c508(0x6d0)]&&_0x2d99d4[_0x55c508(0x699)]){let _0x80cbcf=await this['repository'][_0x55c508(0x2a3)][_0x55c508(0x326)](_0x2d99d4[_0x55c508(0x699)],this[_0x55c508(0x78a)][_0x55c508(0x3ef)]);return setTimeout(()=>this[_0x55c508(0x1e8)](),0x7d0),_0x80cbcf;}let _0x5bcf40=null;if(_0x2d99d4['_id']&&(_0x5bcf40=await this['repository']['scheduleMessage'][_0x55c508(0x35f)](_0x2d99d4[_0x55c508(0x699)],this['instance'][_0x55c508(0x3ef)])),_0x5bcf40){let {_id:_0x4a5422,owner:_0x4c58b6,messages:_0x5adfdd,..._0x2017dc}=_0x2d99d4;if(_0x5adfdd){let _0x420b20=_0x5adfdd[_0x55c508(0x29b)](_0x3e2424=>!_0x3e2424[_0x55c508(0x699)]),_0x530d2d=_0x5adfdd[_0x55c508(0x29b)](_0x42048d=>_0x42048d['_id']&&!_0x42048d[_0x55c508(0x6d0)]),_0x3f1f9c=_0x5adfdd[_0x55c508(0x29b)](_0x3c46df=>_0x3c46df[_0x55c508(0x699)]&&_0x3c46df[_0x55c508(0x6d0)]);if(_0x420b20[_0x55c508(0x217)]>0x0&&await this['addMessagesToGroup'](_0x2d99d4[_0x55c508(0x699)],_0x420b20),_0x530d2d[_0x55c508(0x217)]>0x0&&await this['editMessagesInGroup']({'_id':_0x2d99d4[_0x55c508(0x699)],'messages':_0x530d2d}),_0x3f1f9c['length']>0x0){let _0x2f1237=_0x3f1f9c[_0x55c508(0x384)](_0x56fa31=>({'updateOne':{'filter':{'_id':_0x2d99d4[_0x55c508(0x699)]},'update':{'$pull':{'messages':{'_id':_0x56fa31[_0x55c508(0x699)]}}}}}));await this[_0x55c508(0x50b)][_0x55c508(0x2a3)]['bulkWrite'](_0x2f1237,this['instance'][_0x55c508(0x3ef)]);}}let _0x514f74={'$set':{..._0x2017dc,'status':_0x2d99d4['status']||_0x5bcf40[_0x55c508(0x7ce)]}},_0x1bf63a=await this['repository'][_0x55c508(0x2a3)][_0x55c508(0x713)](_0x2d99d4[_0x55c508(0x699)],_0x514f74,this[_0x55c508(0x78a)][_0x55c508(0x3ef)]);return _0x1bf63a&&(this[_0x55c508(0x144)](_0x1bf63a[_0x55c508(0x814)]),await this[_0x55c508(0x50b)]['scheduleMessage']['updateOneById'](_0x1bf63a[_0x55c508(0x699)],{'$set':{'messages':_0x1bf63a[_0x55c508(0x814)]}},this[_0x55c508(0x78a)][_0x55c508(0x3ef)])),setTimeout(()=>this[_0x55c508(0x1e8)](),0x7d0),await this[_0x55c508(0x74b)](),_0x1bf63a;}else{_0x2d99d4[_0x55c508(0x850)]=this[_0x55c508(0x78a)][_0x55c508(0x3ef)],_0x2d99d4['messages']&&_0x2d99d4[_0x55c508(0x814)]['forEach'](_0x13c19d=>{const _0x208924=_0x55c508;_0x13c19d['_id']||(_0x13c19d[_0x208924(0x699)]=(0x0,Y['v4'])()),_0x13c19d[_0x208924(0x1dc)]||(_0x13c19d[_0x208924(0x1dc)]=_0x2d99d4['_id']),delete _0x13c19d['triedToSend'];});let _0x589153=await this[_0x55c508(0x50b)][_0x55c508(0x2a3)][_0x55c508(0x32e)](_0x2d99d4,this['instance']['wuid']);return _0x589153&&(this[_0x55c508(0x144)](_0x589153[_0x55c508(0x814)]),await this[_0x55c508(0x50b)][_0x55c508(0x2a3)][_0x55c508(0x713)](_0x589153[_0x55c508(0x699)],{'$set':{'messages':_0x589153[_0x55c508(0x814)]}},this[_0x55c508(0x78a)][_0x55c508(0x3ef)])),setTimeout(()=>this[_0x55c508(0x1e8)](),0x7d0),_0x589153;}}catch(_0x4bc9e6){let _0x376257='Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens',_0x64003=_0x4bc9e6 instanceof Error?_0x4bc9e6['message']:typeof _0x4bc9e6==_0x55c508(0x623)?JSON[_0x55c508(0x5ab)](_0x4bc9e6):_0x4bc9e6,_0x4a4119=_0x376257+':\x20'+_0x64003;throw this['logger'][_0x55c508(0x5c5)](this['instanceName']+'\x20('+this[_0x55c508(0x78a)][_0x55c508(0x3ef)]+_0x55c508(0x526)+_0x4a4119),new m(_0x4a4119);}}async[a0_0x98996d(0x606)](_0x1d7f3f,_0x34bc62){const _0x3ad84d=a0_0x98996d;try{this['logger'][_0x3ad84d(0x2a0)](this[_0x3ad84d(0x193)]+'\x20('+this[_0x3ad84d(0x78a)][_0x3ad84d(0x3ef)]+_0x3ad84d(0x76f)),_0x34bc62[_0x3ad84d(0x15b)](_0xb1c79b=>{const _0x288cbe=_0x3ad84d;_0xb1c79b[_0x288cbe(0x699)]||(_0xb1c79b[_0x288cbe(0x699)]=(0x0,Y['v4'])()),_0xb1c79b[_0x288cbe(0x1dc)]||(_0xb1c79b['idSchedule']=_0x1d7f3f),delete _0xb1c79b[_0x288cbe(0x14d)];});let _0x5e0ff0={'$push':{'messages':{'$each':_0x34bc62}}},_0x41b6f8=await this[_0x3ad84d(0x50b)][_0x3ad84d(0x2a3)]['updateOneById'](_0x1d7f3f,_0x5e0ff0,this[_0x3ad84d(0x78a)][_0x3ad84d(0x3ef)]);return _0x41b6f8&&(this['reorderMessages'](_0x41b6f8[_0x3ad84d(0x814)]),await this[_0x3ad84d(0x50b)][_0x3ad84d(0x2a3)][_0x3ad84d(0x713)](_0x41b6f8[_0x3ad84d(0x699)],{'$set':{'messages':_0x41b6f8[_0x3ad84d(0x814)]}},this['instance'][_0x3ad84d(0x3ef)])),_0x41b6f8;}catch(_0xeadbc3){let _0xc60642=_0x3ad84d(0x413),_0x4c421f=_0xeadbc3 instanceof Error?_0xeadbc3['message']:typeof _0xeadbc3==_0x3ad84d(0x623)?JSON[_0x3ad84d(0x5ab)](_0xeadbc3):_0xeadbc3,_0x4300b2=_0xc60642+':\x20'+_0x4c421f;throw this[_0x3ad84d(0x669)][_0x3ad84d(0x5c5)](this[_0x3ad84d(0x193)]+'\x20('+this[_0x3ad84d(0x78a)]['wuid']+_0x3ad84d(0x526)+_0x4300b2),new m(_0x4300b2);}}async[a0_0x98996d(0x20d)](_0x517659){const _0x1f50c9=a0_0x98996d;try{if(this[_0x1f50c9(0x669)]['verbose'](this[_0x1f50c9(0x193)]+'\x20('+this['instance']['wuid']+_0x1f50c9(0x400)),!_0x517659[_0x1f50c9(0x699)]||!_0x517659[_0x1f50c9(0x814)])throw new Error('Dados\x20invlidos\x20para\x20edio\x20de\x20mensagens\x20no\x20grupo.');let _0x49bf03=_0x517659[_0x1f50c9(0x699)],_0x4dc0f3=_0x517659[_0x1f50c9(0x814)],_0x557a5a=_0x4dc0f3[_0x1f50c9(0x29b)](_0x4381f9=>!_0x4381f9[_0x1f50c9(0x6d0)])[_0x1f50c9(0x384)](_0x1400e4=>{const _0x1bd4ef=_0x1f50c9;let _0x19cd94=_0x1400e4[_0x1bd4ef(0x699)];if(!_0x19cd94)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edio.');return _0x1400e4[_0x1bd4ef(0x1dc)]||(_0x1400e4[_0x1bd4ef(0x1dc)]=_0x49bf03),delete _0x1400e4[_0x1bd4ef(0x14d)],{'updateOne':{'filter':{'_id':_0x49bf03,'messages._id':_0x19cd94},'update':{'$set':{'messages.$[elem]':_0x1400e4}},'arrayFilters':[{'elem._id':_0x19cd94}]}};}),_0x390ed5=_0x4dc0f3['filter'](_0x9faaa=>_0x9faaa[_0x1f50c9(0x6d0)])['map'](_0x3bba89=>{let _0x5e5f39=_0x3bba89['_id'];if(!_0x5e5f39)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20excluso.');return{'updateOne':{'filter':{'_id':_0x49bf03},'update':{'$pull':{'messages':{'_id':_0x5e5f39}}}}};}),_0x2270b6=[..._0x557a5a,..._0x390ed5],_0x198267=await this[_0x1f50c9(0x50b)][_0x1f50c9(0x2a3)][_0x1f50c9(0x1c9)](_0x2270b6,this['instance']['wuid']),_0x4e10a9=await this[_0x1f50c9(0x50b)][_0x1f50c9(0x2a3)]['findById'](_0x49bf03,this[_0x1f50c9(0x78a)][_0x1f50c9(0x3ef)]);return _0x4e10a9&&(this[_0x1f50c9(0x144)](_0x4e10a9[_0x1f50c9(0x814)]),await this['repository'][_0x1f50c9(0x2a3)][_0x1f50c9(0x713)](_0x4e10a9[_0x1f50c9(0x699)],{'$set':{'messages':_0x4e10a9[_0x1f50c9(0x814)]}},this[_0x1f50c9(0x78a)][_0x1f50c9(0x3ef)])),_0x4e10a9;}catch(_0x390311){let _0x5b6efb='Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo',_0x3f310c=_0x390311 instanceof Error?_0x390311[_0x1f50c9(0x334)]:typeof _0x390311==_0x1f50c9(0x623)?JSON[_0x1f50c9(0x5ab)](_0x390311):_0x390311,_0x49730b=_0x5b6efb+':\x20'+_0x3f310c;throw this['logger'][_0x1f50c9(0x5c5)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x1f50c9(0x526)+_0x49730b),new m(_0x49730b);}}async[a0_0x98996d(0x241)](){const _0x53fee2=a0_0x98996d;try{let _0x5d61ed={'status':'done'},_0x254012=await this[_0x53fee2(0x50b)][_0x53fee2(0x2a3)]['deleteMany'](_0x5d61ed,this[_0x53fee2(0x78a)][_0x53fee2(0x3ef)]);if(!_0x254012[_0x53fee2(0x5c5)])this[_0x53fee2(0x669)][_0x53fee2(0x2a0)](this[_0x53fee2(0x193)]+'\x20('+this[_0x53fee2(0x78a)][_0x53fee2(0x3ef)]+_0x53fee2(0x21b));else throw new Error(_0x254012[_0x53fee2(0x5c5)]['message']||_0x53fee2(0x3af));return this['getScheduleMessage']();}catch(_0x234eff){let _0x12561f=_0x53fee2(0x7d4),_0x44e01a=_0x234eff instanceof Error?_0x234eff['message']:typeof _0x234eff=='object'?JSON['stringify'](_0x234eff):_0x234eff,_0x2df516=_0x12561f+':\x20'+_0x44e01a;throw this[_0x53fee2(0x669)]['error'](this[_0x53fee2(0x193)]+'\x20('+this[_0x53fee2(0x78a)][_0x53fee2(0x3ef)]+_0x53fee2(0x526)+_0x2df516),new m(_0x2df516);}}async[a0_0x98996d(0x31e)](){const _0x5a4a2d=a0_0x98996d;try{return await this[_0x5a4a2d(0x50b)]['scheduleMessage']['find']({'where':{}},this['instance'][_0x5a4a2d(0x3ef)]);}catch(_0x7fcf61){let _0xd3fd57='Erro\x20ao\x20buscar\x20Schedule\x20Messages',_0x122756=_0x7fcf61 instanceof Error?_0x7fcf61['message']:typeof _0x7fcf61==_0x5a4a2d(0x623)?JSON[_0x5a4a2d(0x5ab)](_0x7fcf61):_0x7fcf61,_0x11c88e=_0xd3fd57+':\x20'+_0x122756;throw this[_0x5a4a2d(0x669)][_0x5a4a2d(0x5c5)](this[_0x5a4a2d(0x193)]+'\x20('+this[_0x5a4a2d(0x78a)][_0x5a4a2d(0x3ef)]+_0x5a4a2d(0x526)+_0x11c88e),new m(_0x11c88e);}}[a0_0x98996d(0x144)](_0x45115f){const _0x3a0718=a0_0x98996d;_0x45115f[_0x3a0718(0x3ac)]((_0x319c01,_0x4b4acf)=>_0x319c01[_0x3a0718(0x2fd)]-_0x4b4acf['order']),_0x45115f[_0x3a0718(0x15b)]((_0x523065,_0x17b48e)=>{const _0x4089fd=_0x3a0718;_0x523065[_0x4089fd(0x2fd)]=_0x17b48e+0x1;});}async['SendScheduleMessage'](_0x381cbe,_0x5761c2){const _0x44f8a8=a0_0x98996d;try{if(!_0x5761c2)return this[_0x44f8a8(0x669)][_0x44f8a8(0x5c5)](this['instanceName']+'\x20('+this[_0x44f8a8(0x78a)][_0x44f8a8(0x3ef)]+_0x44f8a8(0x404)),{'error':!0x0,'detail':_0x44f8a8(0x7ab)};if(_0x5761c2['type']==='flow'&&!this[_0x44f8a8(0x227)]?.[_0x44f8a8(0x1fc)]['enabled'])return this['logger'][_0x44f8a8(0x5c5)](this['instanceName']+'\x20('+this[_0x44f8a8(0x78a)][_0x44f8a8(0x3ef)]+_0x44f8a8(0x2d2)),{'error':!0x0,'detail':_0x44f8a8(0x4cd)};switch(_0x5761c2['type']){case'text':return await this[_0x44f8a8(0x3d6)](_0x5761c2,_0x381cbe);case _0x44f8a8(0x84f):case _0x44f8a8(0x6cc):case'document':return await this['scheduleSendMedia'](_0x5761c2,_0x381cbe);case _0x44f8a8(0x767):return await this['scheduleSendAudio'](_0x5761c2,_0x381cbe);case _0x44f8a8(0x1e0):let _0x18bcda=new Ve();return _0x18bcda[_0x44f8a8(0x592)]=_0x5761c2[_0x44f8a8(0x1e0)],_0x18bcda['remoteJid']=_0x381cbe,await this[_0x44f8a8(0x2a2)](_0x18bcda);default:return this[_0x44f8a8(0x669)][_0x44f8a8(0x5c5)](this['instanceName']+'\x20('+this[_0x44f8a8(0x78a)][_0x44f8a8(0x3ef)]+'):\x20Comando\x20desconhecido:\x20'+_0x5761c2[_0x44f8a8(0x1b8)]),{'error':!0x0,'detail':_0x44f8a8(0x6ab)};}}catch(_0x558abc){return this[_0x44f8a8(0x669)][_0x44f8a8(0x5c5)](this[_0x44f8a8(0x193)]+'\x20('+this[_0x44f8a8(0x78a)]['wuid']+_0x44f8a8(0x476)+(_0x558abc instanceof Error?_0x558abc[_0x44f8a8(0x334)]:JSON[_0x44f8a8(0x5ab)](_0x558abc,null,0x2))),{'error':!0x0,'detail':_0x558abc[_0x44f8a8(0x334)]};}}async[a0_0x98996d(0x3d6)](_0x244834,_0x5be69a){const _0xff4451=a0_0x98996d;if(this['logger']['verbose'](this[_0xff4451(0x193)]+'\x20('+this[_0xff4451(0x78a)]['wuid']+'):\x20\x27Enviando\x20texto\x20para\x20\x27'+_0x5be69a+'\x27'),!_0x244834[_0xff4451(0x673)]||_0x244834[_0xff4451(0x673)][_0xff4451(0x217)]===0x0)return{'error':!0x0,'detail':'sem\x20texto\x20na\x20mensagem'};let _0x28317a=await this[_0xff4451(0x6db)](_0x244834['text'],_0x5be69a),_0x5bdc2b={'number':_0x5be69a,'options':{'delay':_0x244834[_0xff4451(0x260)],'linkPreview':_0x244834[_0xff4451(0x339)]},'textMessage':{'text':_0x28317a}},_0xb83ed7=null;try{let _0x664a18=await this[_0xff4451(0x6d4)](_0x5bdc2b);if(_0x664a18&&_0x664a18[_0xff4451(0x7ce)])return{'error':!0x1,'id':_0x664a18[_0xff4451(0x328)]['id']};_0xb83ed7=JSON[_0xff4451(0x5ab)](_0x664a18),this[_0xff4451(0x669)][_0xff4451(0x2a0)](this[_0xff4451(0x193)]+'\x20('+this[_0xff4451(0x78a)]['wuid']+'):\x20'+_0xb83ed7);}catch(_0x5ce958){this[_0xff4451(0x669)][_0xff4451(0x5c5)](this[_0xff4451(0x193)]+'\x20('+this['instance']['wuid']+_0xff4451(0x48b)+(_0x5ce958 instanceof Error?_0x5ce958[_0xff4451(0x334)]:JSON[_0xff4451(0x5ab)](_0x5ce958,null,0x2))),_0xb83ed7=_0x5ce958['message'];}if(_0xb83ed7)return{'error':!0x0,'detail':(typeof _0xb83ed7==_0xff4451(0x623)?JSON['stringify'](_0xb83ed7,null,0x2):_0xb83ed7)[_0xff4451(0x5d1)](/[\[\]{}\n]/g,'\x20')[_0xff4451(0x5d1)](/  +/g,'\x20')};}async['scheduleSendMedia'](_0x454dfe,_0x55d7b2){const _0x23cfb0=a0_0x98996d;this['logger']['verbose'](this[_0x23cfb0(0x193)]+'\x20('+this[_0x23cfb0(0x78a)][_0x23cfb0(0x3ef)]+'):\x20\x27Enviando\x20mdia\x20para\x20\x27'+_0x55d7b2+'\x27');let _0x4ed091;_0x454dfe[_0x23cfb0(0x673)]&&_0x454dfe[_0x23cfb0(0x673)][_0x23cfb0(0x217)]>0x0&&(_0x4ed091=await this['replaceVariablesChat'](_0x454dfe[_0x23cfb0(0x673)],_0x55d7b2));let _0x5532d0={'number':_0x55d7b2,'options':{'delay':_0x454dfe['delay'],'linkPreview':_0x454dfe[_0x23cfb0(0x339)]},'mediaMessage':{'mediatype':_0x454dfe[_0x23cfb0(0x1b8)],'caption':_0x4ed091,'media':_0x454dfe[_0x23cfb0(0x2a4)]}},_0xb2c22d=null;try{let _0x165e8a=await this[_0x23cfb0(0x1aa)](_0x5532d0);if(_0x165e8a&&_0x165e8a[_0x23cfb0(0x7ce)])return{'error':!0x1,'id':_0x165e8a[_0x23cfb0(0x328)]['id']};_0xb2c22d=JSON['stringify'](_0x165e8a),this[_0x23cfb0(0x669)][_0x23cfb0(0x2a0)](this[_0x23cfb0(0x193)]+'\x20('+this[_0x23cfb0(0x78a)][_0x23cfb0(0x3ef)]+'):\x20'+_0xb2c22d);}catch(_0x287f41){this[_0x23cfb0(0x669)]['error'](this[_0x23cfb0(0x193)]+'\x20('+this[_0x23cfb0(0x78a)][_0x23cfb0(0x3ef)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20'+(_0x287f41 instanceof Error?_0x287f41[_0x23cfb0(0x334)]:JSON[_0x23cfb0(0x5ab)](_0x287f41,null,0x2))),_0xb2c22d=_0x287f41[_0x23cfb0(0x334)];}if(_0xb2c22d)return{'error':!0x0,'detail':(typeof _0xb2c22d==_0x23cfb0(0x623)?JSON[_0x23cfb0(0x5ab)](_0xb2c22d,null,0x2):_0xb2c22d)[_0x23cfb0(0x5d1)](/[\[\]{}\n]/g,'\x20')[_0x23cfb0(0x5d1)](/  +/g,'\x20')};}async[a0_0x98996d(0x40c)](_0x3da040,_0x323306){const _0x242ab0=a0_0x98996d;this[_0x242ab0(0x669)][_0x242ab0(0x2a0)](this[_0x242ab0(0x193)]+'\x20('+this['instance']['wuid']+_0x242ab0(0x25e)+_0x323306+'\x27');let _0x491735={'number':_0x323306,'options':{'delay':_0x3da040[_0x242ab0(0x260)]},'audioMessage':{'audio':_0x3da040[_0x242ab0(0x2a4)]}},_0x3b2c9a=null;try{let _0x48822f=await this[_0x242ab0(0x60c)](_0x491735);if(_0x48822f&&_0x48822f[_0x242ab0(0x7ce)])return{'error':!0x1,'id':_0x48822f[_0x242ab0(0x328)]['id']};_0x3b2c9a=JSON[_0x242ab0(0x5ab)](_0x48822f),this[_0x242ab0(0x669)]['verbose'](this[_0x242ab0(0x193)]+'\x20('+this[_0x242ab0(0x78a)]['wuid']+_0x242ab0(0x526)+_0x3b2c9a);}catch(_0x216bdc){this[_0x242ab0(0x669)][_0x242ab0(0x5c5)](this[_0x242ab0(0x193)]+'\x20('+this[_0x242ab0(0x78a)][_0x242ab0(0x3ef)]+_0x242ab0(0x1c7)+(_0x216bdc instanceof Error?_0x216bdc[_0x242ab0(0x334)]:JSON[_0x242ab0(0x5ab)](_0x216bdc,null,0x2))),_0x3b2c9a=_0x216bdc[_0x242ab0(0x334)];}if(_0x3b2c9a)return{'error':!0x0,'detail':(typeof _0x3b2c9a=='object'?JSON[_0x242ab0(0x5ab)](_0x3b2c9a,null,0x2):_0x3b2c9a)['replace'](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async[a0_0x98996d(0x83b)](_0x2031f8){const _0x32f1d5=a0_0x98996d;try{return await this[_0x32f1d5(0x855)][_0x32f1d5(0x445)](_0x2031f8[_0x32f1d5(0x83c)],_0x2031f8['description']),{'update':_0x32f1d5(0x43c)};}catch(_0x4be023){let _0x789764='Falha\x20ao\x20processar\x20a\x20solicitao\x20groupDesc',_0x5ea174=_0x4be023 instanceof Error?_0x4be023[_0x32f1d5(0x334)]:typeof _0x4be023==_0x32f1d5(0x623)?JSON[_0x32f1d5(0x5ab)](_0x4be023):_0x4be023,_0x55f22d=_0x789764+':\x20'+_0x5ea174;throw this[_0x32f1d5(0x669)][_0x32f1d5(0x5c5)](this['instanceName']+'\x20('+this[_0x32f1d5(0x78a)]['wuid']+'):\x20'+_0x55f22d),new O(_0x55f22d);}}async[a0_0x98996d(0x37b)](_0x39b050){const _0x428d57=a0_0x98996d;try{return await this[_0x428d57(0x855)][_0x428d57(0x5c6)](_0x39b050[_0x428d57(0x83c)],_0x39b050[_0x428d57(0x592)]),{'update':_0x428d57(0x43c)};}catch(_0x49489b){let _0x304a2c=_0x428d57(0x3a8),_0x418eac=_0x49489b instanceof Error?_0x49489b[_0x428d57(0x334)]:typeof _0x49489b==_0x428d57(0x623)?JSON[_0x428d57(0x5ab)](_0x49489b):_0x49489b,_0x1b59e8=_0x304a2c+':\x20'+_0x418eac;throw this[_0x428d57(0x669)]['error'](this[_0x428d57(0x193)]+'\x20('+this['instance'][_0x428d57(0x3ef)]+'):\x20'+_0x1b59e8),new O(_0x1b59e8);}}async[a0_0x98996d(0x6f7)](_0xdda5d5){const _0x5bc2ab=a0_0x98996d;try{let _0x812d9c=await this['client']['groupToggleEphemeral'](_0xdda5d5[_0x5bc2ab(0x83c)],_0xdda5d5[_0x5bc2ab(0x31f)]);return{'success':!0x0};}catch(_0x1db7ab){let _0x5b80f2=_0x5bc2ab(0x6b4),_0x2279e4=_0x1db7ab instanceof Error?_0x1db7ab[_0x5bc2ab(0x334)]:typeof _0x1db7ab==_0x5bc2ab(0x623)?JSON['stringify'](_0x1db7ab):_0x1db7ab,_0x5f5be4=_0x5b80f2+':\x20'+_0x2279e4;throw this[_0x5bc2ab(0x669)]['error'](this[_0x5bc2ab(0x193)]+'\x20('+this[_0x5bc2ab(0x78a)][_0x5bc2ab(0x3ef)]+_0x5bc2ab(0x526)+_0x5f5be4),new O(_0x5f5be4);}}async[a0_0x98996d(0x18f)](_0x585ac7){const _0xc4e650=a0_0x98996d;try{return await this[_0xc4e650(0x855)][_0xc4e650(0x3f0)](_0x585ac7[_0xc4e650(0x83c)],_0x585ac7[_0xc4e650(0x4e5)]),{'update':_0xc4e650(0x43c)};}catch(_0x56b740){let _0x2723c2=_0xc4e650(0x6af),_0x7542d8=_0x56b740 instanceof Error?_0x56b740[_0xc4e650(0x334)]:typeof _0x56b740=='object'?JSON['stringify'](_0x56b740):_0x56b740,_0x436df4=_0x2723c2+':\x20'+_0x7542d8;throw this['logger'][_0xc4e650(0x5c5)](this['instanceName']+'\x20('+this[_0xc4e650(0x78a)]['wuid']+_0xc4e650(0x526)+_0x436df4),new O(_0x436df4);}}async['updateGroupPicture'](_0x9263ef){const _0xc05b4d=a0_0x98996d;try{let _0x541f30;if((0x0,D['isURL'])(_0x9263ef[_0xc05b4d(0x6cc)])){let _0x5785de=new Date()['getTime'](),_0x597b3d=_0x9263ef[_0xc05b4d(0x6cc)]+_0xc05b4d(0x3b5)+_0x5785de;_0x541f30=(await Q[_0xc05b4d(0x36a)][_0xc05b4d(0x651)](_0x597b3d,{'responseType':_0xc05b4d(0x6c1)}))[_0xc05b4d(0x222)];}else{if((0x0,D[_0xc05b4d(0x597)])(_0x9263ef[_0xc05b4d(0x6cc)]))_0x541f30=Buffer[_0xc05b4d(0x54e)](_0x9263ef[_0xc05b4d(0x6cc)],_0xc05b4d(0x697));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0xc05b4d(0x855)][_0xc05b4d(0x380)](_0x9263ef[_0xc05b4d(0x83c)],_0x541f30),{'update':_0xc05b4d(0x43c)};}catch(_0x8007cc){let _0x510a30='Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGroupPicture',_0x1953e8=_0x8007cc instanceof Error?_0x8007cc[_0xc05b4d(0x334)]:typeof _0x8007cc==_0xc05b4d(0x623)?JSON[_0xc05b4d(0x5ab)](_0x8007cc):_0x8007cc,_0x3c0d0e=_0x510a30+':\x20'+_0x1953e8;throw this[_0xc05b4d(0x669)][_0xc05b4d(0x5c5)](this[_0xc05b4d(0x193)]+'\x20('+this[_0xc05b4d(0x78a)][_0xc05b4d(0x3ef)]+_0xc05b4d(0x526)+_0x3c0d0e),new O(_0x3c0d0e);}}},Ut=class u{constructor(_0xb21534,_0x2730c5,_0x55287e){const _0x1844bd=a0_0x98996d;this['eventEmitter']=_0xb21534,this['configService']=_0x2730c5,this[_0x1844bd(0x50b)]=_0x55287e,this['db']={},this[_0x1844bd(0x253)]={},this[_0x1844bd(0x669)]=new N(u[_0x1844bd(0x592)]),this[_0x1844bd(0x7ef)]={},(this[_0x1844bd(0x5b4)](),this['noConnection'](),Object['assign'](this['db'],_0x2730c5[_0x1844bd(0x651)](_0x1844bd(0x635))),Object[_0x1844bd(0x382)](this['redis'],_0x2730c5[_0x1844bd(0x651)](_0x1844bd(0x1d4))),this['dbInstance']=this['db'][_0x1844bd(0x299)]?this[_0x1844bd(0x50b)][_0x1844bd(0x3bb)]?.['db'](this['db'][_0x1844bd(0x12f)][_0x1844bd(0x7e4)]+_0x1844bd(0x555)):void 0x0,this[_0x1844bd(0x4db)]=this['redis']['ENABLED']?new ue(this[_0x1844bd(0x253)]):void 0x0);}async[a0_0x98996d(0x16f)](_0x252f5b){const _0x303193=a0_0x98996d;if(_0x252f5b&&!this[_0x303193(0x7ef)][_0x252f5b])throw new F('Instance\x20\x22'+_0x252f5b+_0x303193(0x1b7));let _0x179fb4=[];for await(let [_0x1a2c07,_0xda5579]of Object[_0x303193(0x736)](this['waInstances']))if(_0xda5579&&_0xda5579['connectionStatus'][_0x303193(0x26b)]===_0x303193(0x29d)){let _0x2cedf6=await this[_0x303193(0x50b)]['auth'][_0x303193(0x704)](_0x1a2c07);_0x179fb4[_0x303193(0x69d)]({'instance':{'instanceName':_0x1a2c07,'apikey':_0x2cedf6[_0x303193(0x127)],'owner':_0xda5579['wuid'],'profileName':await _0xda5579['getProfileName']()||_0x303193(0x255),'profilePictureUrl':_0xda5579[_0x303193(0x1fa)]}});}return _0x179fb4[_0x303193(0x704)](_0x43f278=>_0x43f278['instance'][_0x303193(0x193)]===_0x252f5b)??_0x179fb4;}async[a0_0x98996d(0x29e)](_0x1bd112){const _0x445d45=a0_0x98996d;if(this['db'][_0x445d45(0x299)]&&(await this[_0x445d45(0x50b)][_0x445d45(0x3bb)][_0x445d45(0x257)](),(await this[_0x445d45(0x117)]['collections']())[_0x445d45(0x217)]>0x0&&await this['dbInstance'][_0x445d45(0x48d)](_0x1bd112)),this[_0x445d45(0x253)][_0x445d45(0x299)]){this[_0x445d45(0x4db)][_0x445d45(0x77d)]=_0x1bd112,await this['cache']['delAll']();return;}}async[a0_0x98996d(0x17d)](){const _0x59c48e=a0_0x98996d;await this[_0x59c48e(0x56a)]();let _0x33217c=async _0x170f1b=>{const _0x32ceb7=_0x59c48e;let _0x44da79=new Ce(this[_0x32ceb7(0x63a)],this[_0x32ceb7(0x695)],this['repository']);_0x44da79['instanceName']=_0x170f1b,await _0x44da79[_0x32ceb7(0x43d)](),this[_0x32ceb7(0x7ef)][_0x170f1b]=_0x44da79;};try{if(this[_0x59c48e(0x253)][_0x59c48e(0x299)]){let _0x3a532d=await this[_0x59c48e(0x4db)][_0x59c48e(0x5e3)]();_0x3a532d?.['length']>0x0&&_0x3a532d[_0x59c48e(0x15b)](async _0xf1c2f8=>await _0x33217c(_0xf1c2f8[_0x59c48e(0x4fb)](':')[0x1]));return;}if(this['db'][_0x59c48e(0x299)]){await this[_0x59c48e(0x50b)][_0x59c48e(0x3bb)][_0x59c48e(0x257)]();let _0x3e8e31=await this[_0x59c48e(0x117)][_0x59c48e(0x2b8)]();_0x3e8e31['length']>0x0&&_0x3e8e31[_0x59c48e(0x15b)](async _0x3dc180=>await _0x33217c(_0x3dc180['namespace'][_0x59c48e(0x5d1)](/^[\w-]+\./,'')));return;}}catch(_0x4fe628){this[_0x59c48e(0x669)][_0x59c48e(0x5c5)](_0x4fe628);}}async['cleanDisconnectedInstances'](){const _0x53b2a2=a0_0x98996d;try{let _0xef0711=await this['repository'][_0x53b2a2(0x34c)][_0x53b2a2(0x7df)]({'online':!0x1});for(let _0x1fcd6a of _0xef0711){let _0x38bf41=_0x1fcd6a[_0x53b2a2(0x699)];await se[_0x53b2a2(0x37a)](W,_0x38bf41);}console[_0x53b2a2(0x26d)](_0x53b2a2(0x6a8)+_0xef0711['length']);let _0x4a9b65={'online':!0x1},_0x3bd3cd=await this['repository'][_0x53b2a2(0x34c)][_0x53b2a2(0x3ff)](_0x4a9b65);console['log']('Instncias\x20removidas:\x20'+_0x3bd3cd[_0x53b2a2(0x77c)]);}catch(_0x279fc1){console[_0x53b2a2(0x5c5)](_0x53b2a2(0x395),_0x279fc1);}}async[a0_0x98996d(0x56a)](){const _0x54cfc6=a0_0x98996d;try{let _0xbbedce={'online':!0x1},_0x4a0f92={'online':!0x1,'lastDisconnect':Date[_0x54cfc6(0x4a3)]()},_0xca674c=await this['repository']['auth'][_0x54cfc6(0x707)](_0xbbedce,_0x4a0f92);await this[_0x54cfc6(0x789)]();}catch(_0x590f12){console[_0x54cfc6(0x5c5)](_0x54cfc6(0x7a9),_0x590f12);}}[a0_0x98996d(0x5b4)](){const _0x2571d4=a0_0x98996d;this[_0x2571d4(0x695)]['on'](_0x2571d4(0x844),async _0xda21c2=>{const _0x221e92=_0x2571d4;try{this[_0x221e92(0x7ef)][_0xda21c2]=void 0x0;}catch{}try{this[_0x221e92(0x29e)](_0xda21c2);}finally{this[_0x221e92(0x669)][_0x221e92(0x7e8)]('Instance\x20\x22'+_0xda21c2+'\x22\x20-\x20REMOVED');}});}[a0_0x98996d(0x2ae)](){const _0x3958ae=a0_0x98996d;this[_0x3958ae(0x695)]['on']('no.connection',async _0x2b7f1a=>{const _0x2e1aa8=_0x3958ae;try{this[_0x2e1aa8(0x7ef)][_0x2b7f1a]=void 0x0;}catch{}try{this[_0x2e1aa8(0x29e)](_0x2b7f1a);}finally{this[_0x2e1aa8(0x669)]['warn']('Instance\x20\x22'+_0x2b7f1a+_0x2e1aa8(0x30d));}});}},jt=class extends T{[a0_0x98996d(0x1b3)](_0x18aa24){return Xs(_0x18aa24);}async['insert'](_0x3510e6){const _0x3ae161=a0_0x98996d;if(_0x3510e6[_0x3ae161(0x217)]!==0x0)try{return{'insertCount':(await this[_0x3ae161(0x1b3)](_0x3510e6[0x0]['owner'])[_0x3ae161(0x45c)]([..._0x3510e6]))['length']};}catch(_0x486a63){return _0x486a63;}}async[a0_0x98996d(0x704)](_0x203463,_0x2322dc){const _0x1020a6=a0_0x98996d;try{let _0x203302=this[_0x1020a6(0x1b3)](_0x2322dc),_0x33f235=A(_0x203463['where']);return await _0x203302[_0x1020a6(0x704)](_0x33f235)[_0x1020a6(0x3ac)]({'lastmsg':-0x1})[_0x1020a6(0x603)](_0x203463?.[_0x1020a6(0x603)]??0x0)['lean']();}catch{return[];}}async[a0_0x98996d(0x59d)](_0xd53d20,_0x335f3f){const _0x426986=a0_0x98996d;try{let _0x431f96=this['getChatModelForOwner'](_0x335f3f),_0x40b332=A(_0xd53d20[_0x426986(0x335)]);return _0x40b332[_0x426986(0x27d)]={'$ne':[]},await _0x431f96['find'](_0x40b332)[_0x426986(0x3ac)]({'lastmsg':-0x1})[_0x426986(0x603)](_0xd53d20?.[_0x426986(0x603)]??0x0)[_0x426986(0x24c)]();}catch{return[];}}async['delete'](_0x345183,_0x6b5cdb){const _0x2c8576=a0_0x98996d;try{return{'deletedCount':(await this['getChatModelForOwner'](_0x6b5cdb)[_0x2c8576(0x3ff)]({..._0x345183[_0x2c8576(0x335)]}))[_0x2c8576(0x63d)]};}catch(_0x191e35){return{'error':_0x191e35?.[_0x2c8576(0x191)]()};}}async[a0_0x98996d(0x1e4)](_0x1d15b0,_0x1810cf){const _0x402998=a0_0x98996d;try{return await this[_0x402998(0x1b3)](_0x1810cf)[_0x402998(0x3ff)]({..._0x1d15b0[_0x402998(0x335)]}),[];}catch(_0x42095c){return{'error':_0x42095c?.[_0x402998(0x191)]()};}}async[a0_0x98996d(0x218)](_0x3498e2,_0x57272b){const _0x3bb239=a0_0x98996d;try{let _0x1a3392=this[_0x3bb239(0x1b3)](_0x57272b),_0x398dd2=A(_0x3498e2[_0x3bb239(0x335)]);return await _0x1a3392['findOne'](_0x398dd2)[_0x3bb239(0x24c)]();}catch{return null;}}async[a0_0x98996d(0x1f8)](_0x75ed45,_0x56c386,_0x2ed211,_0x1d73f8,_0xb89528=a0_0x98996d(0x83f)){const _0x26d191=a0_0x98996d;try{let _0x192717={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x1d73f8},_0x4aefdd=this[_0x26d191(0x1b3)](_0x2ed211),_0x2029d3=A(_0x75ed45['where']);Object['keys'](_0x56c386)[_0x26d191(0x15b)](_0x2a0f8c=>{_0x56c386[_0x2a0f8c]==null&&delete _0x56c386[_0x2a0f8c];});let _0x5765ba={};return _0x5765ba[_0xb89528]=_0x56c386,await _0x4aefdd['findOneAndUpdate'](_0x2029d3,_0x5765ba,_0x192717);}catch(_0x5b718a){return console[_0x26d191(0x5c5)](_0x5b718a),null;}}async[a0_0x98996d(0x5c7)](_0xa031f1){const _0x255328=a0_0x98996d;try{let _0x22d3f4=this['getChatModelForOwner'](_0xa031f1[0x0]['query'][_0x255328(0x335)][_0x255328(0x850)]),_0x4ca85f=_0xa031f1['map'](_0x3594e1=>({'updateOne':{'filter':{..._0x3594e1[_0x255328(0x777)]['where']},'update':{'$set':_0x3594e1[_0x255328(0x7ae)]},'upsert':!0x0}})),_0x2da439=await _0x22d3f4[_0x255328(0x1c9)](_0x4ca85f);return _0x2da439['modifiedCount']+_0x2da439[_0x255328(0x785)];}catch(_0x2fe919){return console[_0x255328(0x5c5)](_0x2fe919),0x0;}}async[a0_0x98996d(0x122)](_0x469f8d){const _0x58a3e1=a0_0x98996d;try{let _0x1d9468={'group_isCommunity':'','group_announce':'','group_size':''},_0x45ebfe={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x3610c5={'$unset':_0x1d9468};return(await this[_0x58a3e1(0x1b3)](_0x469f8d)[_0x58a3e1(0x5c7)](_0x45ebfe,_0x3610c5))['modifiedCount'];}catch(_0x5f4761){return console[_0x58a3e1(0x5c5)](_0x58a3e1(0x210),_0x5f4761),0x0;}}async[a0_0x98996d(0x1f1)](_0x370a07){const _0x358c11=a0_0x98996d;try{let _0xfc46c1=this['getChatModelForOwner'](_0x370a07),_0x2c51f7={'leadInfo.etiquetas':{'$exists':!0x1}},_0x9ebcad={'$set':{'leadInfo.etiquetas':[]}};return(await _0xfc46c1[_0x358c11(0x5c7)](_0x2c51f7,_0x9ebcad))[_0x358c11(0x231)];}catch(_0x4cbc4e){return console[_0x358c11(0x5c5)](_0x4cbc4e),0x0;}}async['updateMissingTags'](_0x18a523){const _0x399136=a0_0x98996d;try{let _0x485526=this['getChatModelForOwner'](_0x18a523),_0x480569={'leadInfo.tags':{'$exists':!0x1}},_0xb1ddc1={'$set':{'leadInfo.tags':[]}};return(await _0x485526[_0x399136(0x5c7)](_0x480569,_0xb1ddc1))[_0x399136(0x231)];}catch(_0x34d51c){return console[_0x399136(0x5c5)](_0x34d51c),0x0;}}async['updateMissingCustomFields'](_0x1c9d9e){const _0x3fb3d3=a0_0x98996d;try{let _0x17cedc=this[_0x3fb3d3(0x1b3)](_0x1c9d9e),_0x267dd1={'leadInfo.customFields':{'$exists':!0x1}},_0x3b98ee={'$set':{'leadInfo.customFields':[]}};return(await _0x17cedc['updateMany'](_0x267dd1,_0x3b98ee))[_0x3fb3d3(0x231)];}catch(_0x1d7d35){return console[_0x3fb3d3(0x5c5)](_0x1d7d35),0x0;}}async[a0_0x98996d(0x45c)](_0xff739a,_0x13515){const _0x4d9bdf=a0_0x98996d;if(!Array[_0x4d9bdf(0x481)](_0xff739a)||_0xff739a[_0x4d9bdf(0x217)]===0x0)throw new Error(_0x4d9bdf(0x308));try{return(await this[_0x4d9bdf(0x1b3)](_0x13515)['insertMany'](_0xff739a))[_0x4d9bdf(0x217)];}catch(_0x2ec794){throw console[_0x4d9bdf(0x5c5)](_0x4d9bdf(0x2e5),_0x2ec794),_0x2ec794;}}async[a0_0x98996d(0x2d9)](_0x49b0da,_0x245346){const _0x4fe9af=a0_0x98996d;try{await this['getChatModelForOwner'](_0x245346)[_0x4fe9af(0x326)]({'_id':_0x49b0da});}catch(_0x333d86){throw console[_0x4fe9af(0x5c5)](_0x4fe9af(0x23b),_0x333d86),_0x333d86;}}},Jt=class extends T{constructor(_0x1a4463,_0x47fce1,_0x47c0f4){const _0x431c2c=a0_0x98996d;super(_0x47fce1),this[_0x431c2c(0x2b9)]=_0x1a4463,this['configService']=_0x47fce1,this['dbConnection']=_0x47c0f4;}async['insert'](_0x3f5c4b){const _0x5b169d=a0_0x98996d;if(_0x3f5c4b[_0x5b169d(0x217)]!==0x0)try{return{'insertCount':(await this['cacheContactModel'][_0x5b169d(0x45c)]([..._0x3f5c4b]))[_0x5b169d(0x217)]};}catch(_0x165411){return _0x165411;}}async['update'](_0x467221,_0x512f09){const _0x406386=a0_0x98996d;try{let _0x39786e=A(_0x467221[_0x406386(0x335)]);return{'updatedCount':(await this[_0x406386(0x2b9)][_0x406386(0x5c7)](_0x39786e,{'$set':_0x512f09}))['modifiedCount']};}catch(_0x51c16f){return console['error']('Error\x20updating\x20cache\x20contact:',_0x51c16f),{'error':_0x51c16f[_0x406386(0x191)]()};}}async[a0_0x98996d(0x7b9)](_0x545dad){const _0x45ae7b=a0_0x98996d;try{let _0x15e037={'_id':{'$in':_0x545dad}};return await this[_0x45ae7b(0x2b9)][_0x45ae7b(0x704)](_0x15e037)[_0x45ae7b(0x24c)]();}catch(_0x636d47){return console[_0x45ae7b(0x5c5)](_0x45ae7b(0x186),_0x636d47),[];}}async[a0_0x98996d(0x6d0)](_0x12a13f){const _0x2cc225=a0_0x98996d;try{return{'deletedCount':(await this['cacheContactModel'][_0x2cc225(0x3ff)]({..._0x12a13f[_0x2cc225(0x335)]}))[_0x2cc225(0x63d)]};}catch(_0x2da013){return{'error':_0x2da013?.[_0x2cc225(0x191)]()};}}async[a0_0x98996d(0x704)](_0x368127){const _0x13e4d7=a0_0x98996d;try{let _0x5553b7=A(_0x368127[_0x13e4d7(0x335)]);return await this[_0x13e4d7(0x2b9)][_0x13e4d7(0x704)](_0x5553b7)['limit'](_0x368127?.[_0x13e4d7(0x603)]??0x0)[_0x13e4d7(0x24c)]();}catch{return[];}}async[a0_0x98996d(0x218)](_0x4b2052){const _0x427b21=a0_0x98996d;try{let _0x2ac0f0=A(_0x4b2052['where']);return await this[_0x427b21(0x2b9)]['findOne'](_0x2ac0f0)[_0x427b21(0x24c)]();}catch{return null;}}},qt=class extends T{['getLabelModelForOwner'](_0x529a46){return Sa(_0x529a46);}async[a0_0x98996d(0x1f8)](_0x5aa074,_0x5e0068,_0x2a5e86,_0x4f320a){const _0x463e64=a0_0x98996d;try{let _0x3fc750={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x4f320a},_0x3322e=this['getLabelModelForOwner'](_0x2a5e86),_0x42af9f=A(_0x5aa074[_0x463e64(0x335)]);return await _0x3322e['findOneAndUpdate'](_0x42af9f,{'$set':_0x5e0068},_0x3fc750);}catch(_0x36a98d){return console['error'](_0x36a98d),null;}}async['find'](_0xbbd5ee,_0x4dae01){const _0x3d07f3=a0_0x98996d;try{let _0x5132dc=this['getLabelModelForOwner'](_0x4dae01),_0x176a72=A(_0xbbd5ee[_0x3d07f3(0x335)]);return await _0x5132dc[_0x3d07f3(0x704)](_0x176a72);}catch(_0x58ed58){console['error'](_0x58ed58);}}async[a0_0x98996d(0x6d0)](_0x2bc80a,_0x1d5d36){const _0x53c4d1=a0_0x98996d;try{let _0x47e3cf=this['getLabelModelForOwner'](_0x1d5d36),_0x314a3b=A(_0x2bc80a[_0x53c4d1(0x335)]);await _0x47e3cf['deleteMany'](_0x314a3b);}catch(_0x4771ee){console[_0x53c4d1(0x5c5)](_0x4771ee);}}async[a0_0x98996d(0x1e4)](_0x1dce6e){const _0x565106=a0_0x98996d;try{return await this[_0x565106(0x3b6)](_0x1dce6e)['collection'][_0x565106(0x46c)](),{'success':!0x0};}catch(_0x34fb0d){return console[_0x565106(0x5c5)](_0x34fb0d),{'success':!0x1,'error':_0x34fb0d};}}},Vt=class{constructor(_0x40de5c){const _0x425f78=a0_0x98996d;this[_0x425f78(0x463)]=_0x40de5c;}async['editChat']({instanceName:_0x376db8},_0x2ee93d){const _0x5713a0=a0_0x98996d;return await this[_0x5713a0(0x463)][_0x5713a0(0x7ef)][_0x376db8][_0x5713a0(0x770)](_0x2ee93d);}async[a0_0x98996d(0x4bd)]({instanceName:_0x127ca1},_0x497be1){const _0xb3ca33=a0_0x98996d;return await this[_0xb3ca33(0x463)][_0xb3ca33(0x7ef)][_0x127ca1][_0xb3ca33(0x4bd)](_0x497be1);}async['importChats']({instanceName:_0x461af0},_0x1a2cf2){const _0x51dbab=a0_0x98996d;return await this[_0x51dbab(0x463)]['waInstances'][_0x461af0][_0x51dbab(0x4c2)](_0x1a2cf2);}async['readMessage']({instanceName:_0x29f21b},_0x30ec38){const _0x236d9b=a0_0x98996d;return await this['waMonitor'][_0x236d9b(0x7ef)][_0x29f21b][_0x236d9b(0x4b0)](_0x30ec38);}async[a0_0x98996d(0x52c)]({instanceName:_0x58bbf9},_0x5f2d6e){const _0x590b1d=a0_0x98996d;return await this['waMonitor'][_0x590b1d(0x7ef)][_0x58bbf9]['archiveChat'](_0x5f2d6e);}async[a0_0x98996d(0x65c)]({instanceName:_0x50eee3},_0x71a029){const _0x44cabc=a0_0x98996d;return await this[_0x44cabc(0x463)][_0x44cabc(0x7ef)][_0x50eee3][_0x44cabc(0x65c)](_0x71a029);}async['fetchProfilePicture']({instanceName:_0x532a24},_0x308cd3){const _0x5f2dc4=a0_0x98996d;return await this[_0x5f2dc4(0x463)][_0x5f2dc4(0x7ef)][_0x532a24][_0x5f2dc4(0x2ba)](_0x308cd3[_0x5f2dc4(0x62f)]);}async[a0_0x98996d(0x5e2)]({instanceName:_0x863f7e},_0x35741d){const _0x2f55b7=a0_0x98996d;return await this[_0x2f55b7(0x463)][_0x2f55b7(0x7ef)][_0x863f7e][_0x2f55b7(0x5e2)](_0x35741d[_0x2f55b7(0x62f)]);}async[a0_0x98996d(0x1c2)]({instanceName:_0x54e5e7},_0x291c39){const _0x26217f=a0_0x98996d;return await this[_0x26217f(0x463)][_0x26217f(0x7ef)][_0x54e5e7]['updatePresence'](_0x291c39);}async[a0_0x98996d(0x51b)]({instanceName:_0x5bd8ef},_0x401254){const _0x113d72=a0_0x98996d;return await this['waMonitor'][_0x113d72(0x7ef)][_0x5bd8ef][_0x113d72(0x51b)](_0x401254);}async['getBase64FromMediaMessage']({instanceName:_0x212795},_0x2265c1){const _0x319c54=a0_0x98996d;return await this['waMonitor'][_0x319c54(0x7ef)][_0x212795]['getBase64FromMediaMessage'](_0x2265c1);}async[a0_0x98996d(0x225)]({instanceName:_0x17433e},_0x28b3bd){const _0x3dc698=a0_0x98996d;return await this[_0x3dc698(0x463)][_0x3dc698(0x7ef)][_0x17433e][_0x3dc698(0x225)](_0x28b3bd);}async[a0_0x98996d(0x818)]({instanceName:_0x40380c}){const _0x18af88=a0_0x98996d;return await this[_0x18af88(0x463)]['waInstances'][_0x40380c][_0x18af88(0x818)]();}async['fetchChats']({instanceName:_0x5dfd91}){const _0x3385bf=a0_0x98996d;return await this[_0x3385bf(0x463)]['waInstances'][_0x5dfd91][_0x3385bf(0x477)]();}async[a0_0x98996d(0x293)]({instanceName:_0x56807c}){const _0x19ef6c=a0_0x98996d;return await this['waMonitor'][_0x19ef6c(0x7ef)][_0x56807c][_0x19ef6c(0x293)]();}async[a0_0x98996d(0x506)]({instanceName:_0x1f8f38},_0x323ff9){const _0x5b26c7=a0_0x98996d;return await this[_0x5b26c7(0x463)][_0x5b26c7(0x7ef)][_0x1f8f38][_0x5b26c7(0x506)](_0x323ff9);}async[a0_0x98996d(0x649)]({instanceName:_0x470eac},_0x138fce){const _0x5c86cb=a0_0x98996d;return await this[_0x5c86cb(0x463)]['waInstances'][_0x470eac]['fetchBusinessProfile'](_0x138fce[_0x5c86cb(0x62f)]);}async[a0_0x98996d(0x410)]({instanceName:_0x505745},_0x5818f2){const _0x50f0e3=a0_0x98996d;return await this[_0x50f0e3(0x463)]['waInstances'][_0x505745][_0x50f0e3(0x410)](_0x5818f2[_0x50f0e3(0x592)]);}async[a0_0x98996d(0x20b)]({instanceName:_0x4b73ed},_0x5edb49){const _0x434f51=a0_0x98996d;return await this['waMonitor'][_0x434f51(0x7ef)][_0x4b73ed][_0x434f51(0x20b)](_0x5edb49[_0x434f51(0x7ce)]);}async['updateProfilePicture']({instanceName:_0x481701},_0xd7de48){const _0xa73b20=a0_0x98996d;return await this[_0xa73b20(0x463)][_0xa73b20(0x7ef)][_0x481701]['updateProfilePicture'](_0xd7de48[_0xa73b20(0x25b)]);}async[a0_0x98996d(0x13a)]({instanceName:_0x24038c},_0x54c99f){const _0x31cd8=a0_0x98996d;return await this[_0x31cd8(0x463)]['waInstances'][_0x24038c][_0x31cd8(0x13a)]();}},Gt=require(a0_0x98996d(0x75c)),Bt=class u{constructor(_0x3683d6,_0xfffad3,_0xa0b0e2,_0x2661ac,_0x426503){const _0x2b911d=a0_0x98996d;this[_0x2b911d(0x463)]=_0x3683d6,this[_0x2b911d(0x63a)]=_0xfffad3,this['repository']=_0xa0b0e2,this[_0x2b911d(0x695)]=_0x2661ac,this[_0x2b911d(0x25a)]=_0x426503,this['logger']=new N(u[_0x2b911d(0x592)]);}async[a0_0x98996d(0x614)]({instanceName:_0x51307b,apikey:_0xec5867,number:_0x15311f,proxy:_0x1bcdf6=!0x0}){const _0x36a379=a0_0x98996d;try{let _0xe8f078=new Ce(this[_0x36a379(0x63a)],this[_0x36a379(0x695)],this['repository']);_0xe8f078['instanceName']=_0x51307b,this[_0x36a379(0x463)]['waInstances'][_0xe8f078['instanceName']]=_0xe8f078;let _0x352776={};_0xec5867?(await this[_0x36a379(0x50b)][_0x36a379(0x34c)][_0x36a379(0x120)]({'apikey':_0xec5867},_0x51307b),_0x352776[_0x36a379(0x127)]=_0xec5867):_0x352776=await this[_0x36a379(0x25a)][_0x36a379(0x25d)]({'instanceName':_0xe8f078[_0x36a379(0x193)]});let _0x944f64;if(_0x15311f){if(_0x944f64=await this['verifyWhatsAppNumber'](_0x15311f),_0x944f64[_0x36a379(0x5c5)])throw new O(_0x944f64[_0x36a379(0x5c5)][_0x36a379(0x191)]());_0x15311f=_0x944f64[_0x36a379(0x62f)];}let _0x4f352e;return await _0xe8f078[_0x36a379(0x43d)](_0x15311f),await(0x0,Gt[_0x36a379(0x260)])(0xfa0),_0x15311f&&await(0x0,Gt[_0x36a379(0x260)])(0xbb8),_0x4f352e=_0xe8f078[_0x36a379(0x54c)],{'instance':{'instanceName':_0xe8f078[_0x36a379(0x193)],'status':_0x36a379(0x4e0)},'hash':_0x352776,'qrcode':_0x4f352e};}catch(_0x581ebf){throw this[_0x36a379(0x669)][_0x36a379(0x5c5)](_0x581ebf),_0x581ebf;}}async[a0_0x98996d(0x551)]({instanceName:_0x16698a,number:_0x5be87a=null}){const _0x10aed2=a0_0x98996d;try{let _0x372529=this[_0x10aed2(0x463)]['waInstances'][_0x16698a];switch(_0x372529?.['connectionStatus']?.['state']){case _0x10aed2(0x358):return await _0x372529[_0x10aed2(0x43d)](_0x5be87a),await(0x0,Gt[_0x10aed2(0x260)])(0x7d0),_0x372529[_0x10aed2(0x54c)];case _0x10aed2(0x216):return _0x372529[_0x10aed2(0x54c)];default:return await this[_0x10aed2(0x720)]({'instanceName':_0x16698a});}}catch(_0x14fb4c){this[_0x10aed2(0x669)][_0x10aed2(0x26d)](_0x14fb4c);}}async[a0_0x98996d(0x720)]({instanceName:_0x30106b}){const _0x3e74d7=a0_0x98996d;let _0x44c2b4=this[_0x3e74d7(0x463)]['waInstances'][_0x30106b]['connectionStatus'],_0x331af1=null;_0x44c2b4[_0x3e74d7(0x26b)]===_0x3e74d7(0x29d)&&_0x30106b&&(_0x331af1=await this[_0x3e74d7(0x463)][_0x3e74d7(0x16f)](_0x30106b));let _0x3eb2a5=null;return _0x44c2b4[_0x3e74d7(0x26b)]===_0x3e74d7(0x216)&&_0x30106b&&(_0x3eb2a5=this[_0x3e74d7(0x463)][_0x3e74d7(0x7ef)][_0x30106b][_0x3e74d7(0x54c)]),{'instance':_0x30106b,'connectionStatus':_0x44c2b4,'instanceInfo':_0x331af1,'qrcode':_0x3eb2a5};}async[a0_0x98996d(0x74a)](_0x75613f){const _0xa52558=a0_0x98996d;_0x75613f=_0x75613f[_0xa52558(0x5d1)](/\D/g,'');let _0x2acb44=Object['keys'](this[_0xa52558(0x463)][_0xa52558(0x7ef)])[_0xa52558(0x29b)](_0x1d5a23=>{const _0x5429bc=_0xa52558;let _0x796d8=this[_0x5429bc(0x463)][_0x5429bc(0x7ef)][_0x1d5a23];return _0x796d8&&_0x796d8[_0x5429bc(0x47e)]&&_0x796d8['connectionStatus']['state']===_0x5429bc(0x29d);});if(_0x2acb44[_0xa52558(0x217)]===0x0)return{'number':this[_0xa52558(0x2f5)](_0x75613f)};let _0x48bb4e=Math['floor'](Math['random']()*_0x2acb44[_0xa52558(0x217)]),_0x40e98d=_0x2acb44[_0x48bb4e];try{let _0x182278=(await this[_0xa52558(0x463)][_0xa52558(0x7ef)][_0x40e98d]['whatsappNumber']({'numbers':[_0x75613f]}))['shift']();return _0x182278[_0xa52558(0x693)]?{'number':_0x182278['jid']['replace'](_0xa52558(0x6e2),'')}:{'number':_0x75613f,'error':_0xa52558(0x415)};}catch(_0x4756f3){return this[_0xa52558(0x669)][_0xa52558(0x5c5)](_0xa52558(0x554)+_0x4756f3),{'number':_0x75613f,'error':_0xa52558(0x311)};}}[a0_0x98996d(0x2f5)](_0xc6fa70){const _0x3b372b=a0_0x98996d;let _0x28b1c7=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x3b372b(0x556)](_0xc6fa70);if(_0x28b1c7&&_0x28b1c7[0x1]==='55'){let _0x25a8c0=_0x28b1c7[0x2],_0x44fc89=_0x28b1c7[0x3],_0x3372ce=_0x28b1c7[0x4];if(parseInt(_0x25a8c0)>=0x1f&&_0x44fc89==='9')return _0x28b1c7[0x1]+_0x25a8c0+_0x3372ce;}return _0xc6fa70;}async[a0_0x98996d(0x46d)]({instanceName:_0xebb6a4}){const _0x5a7285=a0_0x98996d;try{return this[_0x5a7285(0x463)][_0x5a7285(0x7ef)][_0xebb6a4]?.[_0x5a7285(0x855)]?.['ws']?.['close'](),{'status':_0x5a7285(0x42c),'error':!0x1,'response':{'message':'Instance\x20restarted'}};}catch(_0x58e3ab){this[_0x5a7285(0x669)]['error'](_0x58e3ab);}}async[a0_0x98996d(0x3e2)]({instanceName:_0x5ad531}){const _0x161ecd=a0_0x98996d;return _0x5ad531?this[_0x161ecd(0x463)]['instanceInfo'](_0x5ad531):this[_0x161ecd(0x463)]['instanceInfo']();}async[a0_0x98996d(0x484)]({instanceName:_0xd63b59}){const _0x1ee697=a0_0x98996d;try{return await this[_0x1ee697(0x463)]['waInstances'][_0xd63b59]?.[_0x1ee697(0x855)]?.[_0x1ee697(0x484)](_0x1ee697(0x259)+_0xd63b59),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x46455e){throw new O(_0x46455e[_0x1ee697(0x191)]());}}async[a0_0x98996d(0x6ad)]({instanceName:_0x14e1aa}){const _0x5a85c2=a0_0x98996d;if((await this[_0x5a85c2(0x720)]({'instanceName':_0x14e1aa}))[_0x5a85c2(0x47e)]['state']===_0x5a85c2(0x29d))throw new m([_0x5a85c2(0x80a),_0x5a85c2(0x6a6)]);try{return delete this[_0x5a85c2(0x463)]['waInstances'][_0x14e1aa],{'error':!0x1,'message':_0x5a85c2(0x407)};}catch(_0x5dfb8e){throw new m(_0x5dfb8e[_0x5a85c2(0x191)]());}}},ae=require(a0_0x98996d(0x1dd)),Wt=class{constructor(_0x485f30){const _0x32aa8d=a0_0x98996d;this[_0x32aa8d(0x463)]=_0x485f30;}async['sendText']({instanceName:_0x2a3dff},_0x39711a){const _0x3c20bb=a0_0x98996d;return await this[_0x3c20bb(0x463)][_0x3c20bb(0x7ef)][_0x2a3dff][_0x3c20bb(0x6d4)](_0x39711a);}async[a0_0x98996d(0x4a4)]({instanceName:_0x5c6169},_0x1632ca){const _0x2f4a62=a0_0x98996d;return await this['waMonitor'][_0x2f4a62(0x7ef)][_0x5c6169][_0x2f4a62(0x48f)](_0x1632ca);}async[a0_0x98996d(0x4d5)]({instanceName:_0x2c1294},_0xc40664){const _0x218358=a0_0x98996d;if((0x0,ae[_0x218358(0x597)])(_0xc40664?.['mediaMessage']?.[_0x218358(0x36d)])&&!_0xc40664?.[_0x218358(0x1aa)]?.['fileName'])throw new m(_0x218358(0x298));if((0x0,ae[_0x218358(0x6a5)])(_0xc40664?.[_0x218358(0x1aa)]?.[_0x218358(0x36d)])||(0x0,ae[_0x218358(0x597)])(_0xc40664?.[_0x218358(0x1aa)]?.[_0x218358(0x36d)]))return await this[_0x218358(0x463)][_0x218358(0x7ef)][_0x2c1294][_0x218358(0x1aa)](_0xc40664);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x98996d(0x2da)]({instanceName:_0xf87a79},_0xda12a3){const _0x4d0c07=a0_0x98996d;if((0x0,ae['isURL'])(_0xda12a3[_0x4d0c07(0x53f)][_0x4d0c07(0x6cc)])||(0x0,ae['isBase64'])(_0xda12a3[_0x4d0c07(0x53f)][_0x4d0c07(0x6cc)]))return await this['waMonitor'][_0x4d0c07(0x7ef)][_0xf87a79][_0x4d0c07(0x158)](_0xda12a3);throw new m(_0x4d0c07(0x7f6));}async[a0_0x98996d(0x124)]({instanceName:_0x4c3e2d},_0x5375f7){const _0x540b04=a0_0x98996d;if((0x0,ae[_0x540b04(0x6a5)])(_0x5375f7['audioMessage'][_0x540b04(0x767)])||(0x0,ae[_0x540b04(0x597)])(_0x5375f7[_0x540b04(0x288)][_0x540b04(0x767)]))return await this[_0x540b04(0x463)]['waInstances'][_0x4c3e2d]['audioWhatsapp'](_0x5375f7);throw new m(_0x540b04(0x7f6));}async[a0_0x98996d(0x20c)]({instanceName:_0x29a8eb},_0x10e6c4){const _0xe7bb80=a0_0x98996d;if((0x0,ae[_0xe7bb80(0x597)])(_0x10e6c4[_0xe7bb80(0x157)][_0xe7bb80(0x1aa)]?.[_0xe7bb80(0x36d)])&&!_0x10e6c4['buttonMessage']['mediaMessage']?.[_0xe7bb80(0x344)])throw new m(_0xe7bb80(0x298));return await this[_0xe7bb80(0x463)][_0xe7bb80(0x7ef)][_0x29a8eb][_0xe7bb80(0x157)](_0x10e6c4);}async[a0_0x98996d(0x6d3)]({instanceName:_0x5a5f66},_0xf311ed){const _0x44236c=a0_0x98996d;return await this['waMonitor'][_0x44236c(0x7ef)][_0x5a5f66][_0x44236c(0x3be)](_0xf311ed);}async[a0_0x98996d(0x4b8)]({instanceName:_0x296f9b},_0x5e201a){const _0x2b2fc9=a0_0x98996d;return await this[_0x2b2fc9(0x463)]['waInstances'][_0x296f9b][_0x2b2fc9(0x24f)](_0x5e201a);}async[a0_0x98996d(0x5b8)]({instanceName:_0x45402b},_0x3ea46e){const _0x12becc=a0_0x98996d;return await this['waMonitor'][_0x12becc(0x7ef)][_0x45402b]['listMessage'](_0x3ea46e);}async[a0_0x98996d(0x7de)]({instanceName:_0x253b12},_0x1782a3){const _0x3934fb=a0_0x98996d;return await this[_0x3934fb(0x463)][_0x3934fb(0x7ef)][_0x253b12][_0x3934fb(0x6df)](_0x1782a3);}async['sendReaction']({instanceName:_0x577f38},_0x46a04a){const _0x2f6b54=a0_0x98996d;if(!_0x46a04a['reactionMessage'][_0x2f6b54(0x2de)][_0x2f6b54(0x132)](/[^\(\)\w\s-"-\+]+/))throw new m('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this[_0x2f6b54(0x463)]['waInstances'][_0x577f38][_0x2f6b54(0x650)](_0x46a04a);}async['sendStatus']({instanceName:_0x221de0},_0x3c62a5){const _0x14760c=a0_0x98996d;return await this['waMonitor'][_0x14760c(0x7ef)][_0x221de0]['statusMessage'](_0x3c62a5);}},_i=require(a0_0x98996d(0x564)),Ps=require(a0_0x98996d(0x447)),zt=class u{constructor(_0x2274bd,_0x145f62,_0x4a3fc8){const _0x4f58fb=a0_0x98996d;this[_0x4f58fb(0x63a)]=_0x2274bd,this[_0x4f58fb(0x463)]=_0x145f62,this['repository']=_0x4a3fc8,this[_0x4f58fb(0x669)]=new N(u[_0x4f58fb(0x592)]);}async[a0_0x98996d(0x21e)](_0x252623){const _0x3b7924=a0_0x98996d;let _0xd027e9=this[_0x3b7924(0x63a)][_0x3b7924(0x651)](_0x3b7924(0x197))[_0x3b7924(0x570)],_0x269723=(0x0,_i[_0x3b7924(0x853)])({'instanceName':_0x252623[_0x3b7924(0x193)],'apiName':tt,'tokenId':(0x0,Ps['v4'])()},_0xd027e9['SECRET'],{'expiresIn':_0xd027e9['EXPIRIN_IN'],'encoding':_0x3b7924(0x372),'subject':'g-t'}),_0x164efb=await this[_0x3b7924(0x50b)][_0x3b7924(0x34c)][_0x3b7924(0x120)]({'jwt':_0x269723},_0x252623[_0x3b7924(0x193)]);if(_0x164efb[_0x3b7924(0x5c5)])throw this[_0x3b7924(0x669)][_0x3b7924(0x5c5)]({'localError':u[_0x3b7924(0x592)]+'.jwt','error':_0x164efb['error']}),new m(_0x3b7924(0x347),_0x164efb['error']?.['toString']());return{'jwt':_0x269723};}async[a0_0x98996d(0x127)](_0x22b5c9){const _0xe6bc07=a0_0x98996d;let _0x1f8301=(0x0,Ps['v4'])()['toUpperCase'](),_0x1a7832=await this[_0xe6bc07(0x50b)][_0xe6bc07(0x34c)][_0xe6bc07(0x120)]({'apikey':_0x1f8301},_0x22b5c9[_0xe6bc07(0x193)]);if(_0x1a7832[_0xe6bc07(0x5c5)])throw this[_0xe6bc07(0x669)][_0xe6bc07(0x5c5)]({'localError':u[_0xe6bc07(0x592)]+'.jwt','error':_0x1a7832[_0xe6bc07(0x5c5)]}),new m(_0xe6bc07(0x347),_0x1a7832[_0xe6bc07(0x5c5)]?.[_0xe6bc07(0x191)]());return{'apikey':_0x1f8301};}async[a0_0x98996d(0x25d)](_0x1d409c){const _0x107530=a0_0x98996d;let _0x2c4cfd=this[_0x107530(0x63a)][_0x107530(0x651)]('AUTHENTICATION');return await this[_0x2c4cfd[_0x107530(0x5dd)]](_0x1d409c);}},Ht=class{constructor(_0x5033c1){const _0x2640b3=a0_0x98996d;this[_0x2640b3(0x463)]=_0x5033c1;}async['createGroup'](_0x2f81c8,_0x41757a){const _0x558107=a0_0x98996d;return await this['waMonitor']['waInstances'][_0x2f81c8[_0x558107(0x193)]][_0x558107(0x2d1)](_0x41757a);}async[a0_0x98996d(0x680)](_0x12af17,_0x40eeec){const _0xad62eb=a0_0x98996d;return await this[_0xad62eb(0x463)][_0xad62eb(0x7ef)][_0x12af17[_0xad62eb(0x193)]][_0xad62eb(0x680)](_0x40eeec);}async['groupDesc'](_0x39e7e1,_0x36bc13){const _0x1edb18=a0_0x98996d;return await this[_0x1edb18(0x463)][_0x1edb18(0x7ef)][_0x39e7e1['instanceName']][_0x1edb18(0x83b)](_0x36bc13);}async[a0_0x98996d(0x37b)](_0x3a1696,_0x5da5d6){const _0x25efae=a0_0x98996d;return await this[_0x25efae(0x463)][_0x25efae(0x7ef)][_0x3a1696[_0x25efae(0x193)]][_0x25efae(0x37b)](_0x5da5d6);}async['groupBetterSetting'](_0x24e96b,_0x22e665){const _0x55c8ee=a0_0x98996d;return await this[_0x55c8ee(0x463)][_0x55c8ee(0x7ef)][_0x24e96b['instanceName']][_0x55c8ee(0x68e)](_0x22e665);}async[a0_0x98996d(0x18f)](_0x2644fb,_0x252c58){const _0x2859fc=a0_0x98996d;return await this['waMonitor'][_0x2859fc(0x7ef)][_0x2644fb['instanceName']][_0x2859fc(0x18f)](_0x252c58);}async[a0_0x98996d(0x69a)](_0x4f135b,_0x2049d0){const _0x5dc9b0=a0_0x98996d;return await this['waMonitor'][_0x5dc9b0(0x7ef)][_0x4f135b['instanceName']][_0x5dc9b0(0x743)](_0x2049d0);}async[a0_0x98996d(0x1ca)](_0x28f071){const _0x4d08d4=a0_0x98996d;return await this[_0x4d08d4(0x463)][_0x4d08d4(0x7ef)][_0x28f071[_0x4d08d4(0x193)]]['findGroups']();}async[a0_0x98996d(0x42d)](_0x3423dd,_0x4d00f1){const _0x12c00c=a0_0x98996d;return await this[_0x12c00c(0x463)][_0x12c00c(0x7ef)][_0x3423dd[_0x12c00c(0x193)]][_0x12c00c(0x42d)](_0x4d00f1);}async['joinGroup'](_0x57dd31,_0x2af970){const _0x584120=a0_0x98996d;return await this[_0x584120(0x463)][_0x584120(0x7ef)][_0x57dd31[_0x584120(0x193)]][_0x584120(0x69e)](_0x2af970);}async[a0_0x98996d(0x4bf)](_0x371902,_0x4c4c75){const _0x460499=a0_0x98996d;return await this[_0x460499(0x463)][_0x460499(0x7ef)][_0x371902[_0x460499(0x193)]][_0x460499(0x4bf)](_0x4c4c75);}async[a0_0x98996d(0x831)](_0x4c7d5b,_0x26f8ed){const _0x679b7c=a0_0x98996d;return await this[_0x679b7c(0x463)][_0x679b7c(0x7ef)][_0x4c7d5b[_0x679b7c(0x193)]][_0x679b7c(0x831)](_0x26f8ed);}async[a0_0x98996d(0x233)](_0x4e54c5,_0x2b3486){const _0xf7d224=a0_0x98996d;return await this[_0xf7d224(0x463)]['waInstances'][_0x4e54c5['instanceName']][_0xf7d224(0x233)](_0x2b3486);}async[a0_0x98996d(0x678)](_0x81656f,_0x9f0bdc){const _0x5d14d4=a0_0x98996d;return await this['waMonitor'][_0x5d14d4(0x7ef)][_0x81656f[_0x5d14d4(0x193)]]['updateGParticipant'](_0x9f0bdc);}async[a0_0x98996d(0x6f7)](_0x38149e,_0x12b0b2){const _0x3b6a8b=a0_0x98996d;return await this[_0x3b6a8b(0x463)]['waInstances'][_0x38149e['instanceName']]['toggleEphemeral'](_0x12b0b2);}async[a0_0x98996d(0x159)](_0x4ef95f,_0x530a53){const _0x2274bc=a0_0x98996d;return await this[_0x2274bc(0x463)]['waInstances'][_0x4ef95f[_0x2274bc(0x193)]][_0x2274bc(0x159)](_0x530a53);}},Kt=class{constructor(_0x36dc8e){this['waMonitor']=_0x36dc8e;}[a0_0x98996d(0x120)](_0x24f49e,_0x46c4a6){const _0x7494ff=a0_0x98996d;return this['waMonitor']['waInstances'][_0x24f49e[_0x7494ff(0x193)]]['setWebhook'](_0x46c4a6);}async['find'](_0x3837ef){const _0x15655a=a0_0x98996d;try{return await this['waMonitor'][_0x15655a(0x7ef)][_0x3837ef[_0x15655a(0x193)]][_0x15655a(0x3e9)]();}catch{return{'enabled':null,'url':''};}}},Gp=new N(a0_0x98996d(0x5ff)),Qt=class{constructor(_0x9e636a){const _0x27d479=a0_0x98996d;this[_0x27d479(0x463)]=_0x9e636a;}async['editScheduleMessage'](_0x3e9f44,_0xfeef18){const _0x37e78c=a0_0x98996d;return await this[_0x37e78c(0x463)][_0x37e78c(0x7ef)][_0x3e9f44['instanceName']][_0x37e78c(0x433)](_0xfeef18);}async[a0_0x98996d(0x31e)](_0x57897e){const _0x1d6987=a0_0x98996d;return await this[_0x1d6987(0x463)][_0x1d6987(0x7ef)][_0x57897e[_0x1d6987(0x193)]][_0x1d6987(0x31e)]();}async['deleteDoneMessages'](_0x1451dd){const _0x129422=a0_0x98996d;return await this[_0x129422(0x463)][_0x129422(0x7ef)][_0x1451dd['instanceName']][_0x129422(0x241)]();}async[a0_0x98996d(0x472)](_0x3cf689){const _0x20bbb2=a0_0x98996d;return await this[_0x20bbb2(0x463)][_0x20bbb2(0x7ef)][_0x3cf689[_0x20bbb2(0x193)]]['getAutomateSystem']();}async[a0_0x98996d(0x545)](_0x2111c8,_0x503c1a){const _0x3f076a=a0_0x98996d;return await this[_0x3f076a(0x463)][_0x3f076a(0x7ef)][_0x2111c8[_0x3f076a(0x193)]]['updateAgent'](_0x503c1a);}async['updateCustomFields'](_0x12dcea,_0x17e800){const _0x59bdda=a0_0x98996d;return await this[_0x59bdda(0x463)][_0x59bdda(0x7ef)][_0x12dcea['instanceName']]['updateCustomFields'](_0x17e800);}async[a0_0x98996d(0x701)](_0x2b2be8,_0x2a3bf6){const _0x6e6bab=a0_0x98996d;return await this[_0x6e6bab(0x463)][_0x6e6bab(0x7ef)][_0x2b2be8[_0x6e6bab(0x193)]][_0x6e6bab(0x701)](_0x2a3bf6);}async[a0_0x98996d(0x6f2)](_0xe4b7cf,_0x554733){const _0x20bb63=a0_0x98996d;return await this[_0x20bb63(0x463)][_0x20bb63(0x7ef)][_0xe4b7cf['instanceName']][_0x20bb63(0x6f2)](_0x554733);}async[a0_0x98996d(0x2a2)](_0x12ba65,_0x470815){const _0x44c8b7=a0_0x98996d;return await this['waMonitor'][_0x44c8b7(0x7ef)][_0x12ba65[_0x44c8b7(0x193)]][_0x44c8b7(0x2a2)](_0x470815);}async[a0_0x98996d(0x73e)](_0x43206d,_0x547a8b,_0x4611ac,_0x898d15){const _0x9192a8=a0_0x98996d;return await this['waMonitor'][_0x9192a8(0x7ef)][_0x43206d][_0x9192a8(0x73e)](_0x547a8b,_0x4611ac,_0x898d15);}async[a0_0x98996d(0x318)](_0x22d13a,_0x21539d){const _0x5a7622=a0_0x98996d;return await this[_0x5a7622(0x463)][_0x5a7622(0x7ef)][_0x22d13a[_0x5a7622(0x193)]]['getConversation'](_0x21539d);}async[a0_0x98996d(0x152)](_0x5346db,_0x246781){const _0x10f3cb=a0_0x98996d;return await this[_0x10f3cb(0x463)][_0x10f3cb(0x7ef)][_0x5346db[_0x10f3cb(0x193)]][_0x10f3cb(0x152)](_0x246781);}async['editConversation'](_0x1048cc,_0x507029){const _0x447d33=a0_0x98996d;return await this[_0x447d33(0x463)][_0x447d33(0x7ef)][_0x1048cc[_0x447d33(0x193)]]['editConversation'](_0x507029);}async[a0_0x98996d(0x5a8)](_0x42a0bf,_0x5736b8){const _0x5c1026=a0_0x98996d;return await this[_0x5c1026(0x463)][_0x5c1026(0x7ef)][_0x42a0bf[_0x5c1026(0x193)]][_0x5c1026(0x5a8)](_0x5736b8);}async[a0_0x98996d(0x283)](_0x106933,_0x1a68f1){const _0x5d11c7=a0_0x98996d;return await this[_0x5d11c7(0x463)][_0x5d11c7(0x7ef)][_0x106933[_0x5d11c7(0x193)]][_0x5d11c7(0x283)](_0x1a68f1[_0x5d11c7(0x699)]);}async[a0_0x98996d(0x3a5)](_0x12fea4,_0x527af2,_0x4d1c8d){const _0x1db208=a0_0x98996d;return await this['waMonitor'][_0x1db208(0x7ef)][_0x12fea4[_0x1db208(0x193)]][_0x1db208(0x3a5)](_0x527af2,_0x4d1c8d);}async[a0_0x98996d(0x811)](_0x62fd3c,_0x1843a5,_0x49f341){const _0x32d1a3=a0_0x98996d;return await this[_0x32d1a3(0x463)]['waInstances'][_0x62fd3c['instanceName']][_0x32d1a3(0x811)](_0x1843a5,_0x49f341);}async[a0_0x98996d(0x7c9)](_0x4a7bbe,_0x4c3498){const _0x289555=a0_0x98996d;return await this[_0x289555(0x463)][_0x289555(0x7ef)][_0x4a7bbe[_0x289555(0x193)]][_0x289555(0x7c9)](_0x4c3498);}async[a0_0x98996d(0x46a)](_0x106173,_0x29a133){const _0x5a2232=a0_0x98996d;return await this['waMonitor'][_0x5a2232(0x7ef)][_0x106173['instanceName']][_0x5a2232(0x46a)](_0x29a133);}async[a0_0x98996d(0x5ad)](_0x7595e1,_0x42cc0c){const _0x2dca78=a0_0x98996d;return await this[_0x2dca78(0x463)][_0x2dca78(0x7ef)][_0x7595e1[_0x2dca78(0x193)]][_0x2dca78(0x5ad)](_0x42cc0c);}async['editFlowCondition'](_0x5e7b3d,_0x5422ed){const _0x1e0e4b=a0_0x98996d;return await this[_0x1e0e4b(0x463)][_0x1e0e4b(0x7ef)][_0x5e7b3d[_0x1e0e4b(0x193)]][_0x1e0e4b(0x674)](_0x5422ed);}async[a0_0x98996d(0x503)](_0x43299e,_0x36842a){const _0x27dd0c=a0_0x98996d;return await this['waMonitor'][_0x27dd0c(0x7ef)][_0x43299e[_0x27dd0c(0x193)]][_0x27dd0c(0x503)](_0x36842a);}async[a0_0x98996d(0x609)](_0x52d20b,_0x2ae2fa){const _0x2eab2e=a0_0x98996d;return await this['waMonitor'][_0x2eab2e(0x7ef)][_0x52d20b[_0x2eab2e(0x193)]][_0x2eab2e(0x609)](_0x2ae2fa);}async[a0_0x98996d(0x44f)](_0x230203,_0x5e59f6){const _0xb49a2e=a0_0x98996d;return await this[_0xb49a2e(0x463)][_0xb49a2e(0x7ef)][_0x230203[_0xb49a2e(0x193)]][_0xb49a2e(0x44f)](_0x5e59f6);}async[a0_0x98996d(0x28c)](_0xc7de20){const _0xa511cd=a0_0x98996d;return await this[_0xa511cd(0x463)][_0xa511cd(0x7ef)][_0xc7de20[_0xa511cd(0x193)]][_0xa511cd(0x28c)]();}},Yt=class{constructor(_0x207fc8){this['webhookService']=_0x207fc8;}async[a0_0x98996d(0x3e7)](_0x1e11ee,_0x36545b){return this['webhookService']['create'](_0x1e11ee,_0x36545b);}async[a0_0x98996d(0x3e9)](_0x2d7347){const _0x1df717=a0_0x98996d;return this['webhookService'][_0x1df717(0x704)](_0x2d7347);}},Xt=class extends T{constructor(_0x2581ee,_0x58dbb9){const _0x3394ed=a0_0x98996d;super(_0x58dbb9),this[_0x3394ed(0x5f1)]=_0x2581ee,this[_0x3394ed(0x63a)]=_0x58dbb9;}async[a0_0x98996d(0x120)](_0x41eb2b,_0x1eb6a3){const _0x4034c9=a0_0x98996d;try{return this[_0x4034c9(0x50e)][_0x4034c9(0x299)]?{'insertCount':(await this[_0x4034c9(0x5f1)]['replaceOne']({'_id':_0x1eb6a3},{..._0x41eb2b},{'upsert':!0x0}))[_0x4034c9(0x231)]}:{'insertCount':0x1};}catch(_0x5794ac){return _0x5794ac;}}async[a0_0x98996d(0x6d0)](_0x1606ff){const _0x71fac4=a0_0x98996d;try{if(this[_0x71fac4(0x50e)]['ENABLED']){await this[_0x71fac4(0x5f1)][_0x71fac4(0x326)]({'_id':_0x1606ff});return;}}catch(_0xafb8a9){return{'error':_0xafb8a9};}}async[a0_0x98996d(0x704)](_0x1e908e){const _0x18d804=a0_0x98996d;try{if(this[_0x18d804(0x50e)][_0x18d804(0x299)])return await this[_0x18d804(0x5f1)][_0x18d804(0x218)]({'_id':_0x1e908e});}catch{return{};}}},Zt=class extends T{constructor(_0x117dd8,_0x598bec){const _0x3d70e5=a0_0x98996d;super(_0x598bec),this['authModel']=_0x117dd8,this[_0x3d70e5(0x63a)]=_0x598bec,this[_0x3d70e5(0x34c)]=_0x598bec[_0x3d70e5(0x651)](_0x3d70e5(0x197));}async[a0_0x98996d(0x120)](_0x232981,_0x12657e){const _0x2a6505=a0_0x98996d;try{if(this[_0x2a6505(0x50e)][_0x2a6505(0x299)])return{'insertCount':(await this[_0x2a6505(0x35b)][_0x2a6505(0x1f8)]({'_id':_0x12657e},{'$set':{..._0x232981}},{'upsert':!0x0}))[_0x2a6505(0x231)]};}catch(_0x5265ae){return{'error':_0x5265ae};}}async[a0_0x98996d(0x707)](_0x572828,_0x5dbea8){const _0x57ab89=a0_0x98996d;try{if(this[_0x57ab89(0x50e)][_0x57ab89(0x299)])return{'insertCount':(await this[_0x57ab89(0x35b)]['updateMany'](_0x572828,{'$set':_0x5dbea8},{'upsert':!0x1}))[_0x57ab89(0x231)]};throw new Error(_0x57ab89(0x38c));}catch(_0x3dd371){return{'error':_0x3dd371};}}async[a0_0x98996d(0x3ff)](_0x4e118a){const _0x1bdd88=a0_0x98996d;try{if(this[_0x1bdd88(0x50e)][_0x1bdd88(0x299)])return{'insertCount':(await this[_0x1bdd88(0x35b)][_0x1bdd88(0x3ff)](_0x4e118a))[_0x1bdd88(0x63d)]};throw new Error(_0x1bdd88(0x7ff));}catch(_0x1ed59d){return{'error':_0x1ed59d};}}async['delete'](_0x20dc99){const _0x2c44da=a0_0x98996d;try{if(this[_0x2c44da(0x50e)][_0x2c44da(0x299)]){await this[_0x2c44da(0x35b)][_0x2c44da(0x326)]({'_id':_0x20dc99});return;}}catch(_0xe223b4){return{'error':_0xe223b4};}}async[a0_0x98996d(0x704)](_0x56363c){const _0x3a123c=a0_0x98996d;try{if(this[_0x3a123c(0x50e)]['ENABLED'])return await this['authModel'][_0x3a123c(0x218)]({'_id':_0x56363c});}catch{return{};}}async['findAll'](){const _0x131c8e=a0_0x98996d;try{if(this[_0x131c8e(0x50e)][_0x131c8e(0x299)])return await this[_0x131c8e(0x35b)]['find']();}catch{return[];}}async['findMany'](_0x5a6510){const _0x1fef7b=a0_0x98996d;try{if(this[_0x1fef7b(0x50e)][_0x1fef7b(0x299)])return await this['authModel'][_0x1fef7b(0x704)](_0x5a6510);}catch{return[];}}},es=class extends T{async[a0_0x98996d(0x326)](_0x2fc65a){const _0x1853e1=a0_0x98996d;try{let _0x44ab63=A(_0x2fc65a[_0x1853e1(0x335)]);return{'deletedCount':(await ye['deleteOne'](_0x44ab63))[_0x1853e1(0x63d)]};}catch(_0x4dd1ec){return{'error':_0x4dd1ec?.[_0x1853e1(0x191)]()};}}async['updateOne'](_0x5fe644,_0x4d88db){const _0x2c458a=a0_0x98996d;try{let _0x384807=await ye['findById'](_0x5fe644);return _0x384807?(Object['assign'](_0x384807,_0x4d88db),await _0x384807[_0x2c458a(0x84a)]()):(console[_0x2c458a(0x5c5)](_0x2c458a(0x2aa),_0x5fe644),null);}catch(_0x116c1d){return console['error'](_0x2c458a(0x612),_0x116c1d),null;}}async[a0_0x98996d(0x32e)](_0x106ce6){const _0x2a8351=a0_0x98996d;try{return await new ye(_0x106ce6)[_0x2a8351(0x84a)]();}catch(_0x1935f9){return console['error'](_0x2a8351(0x5c8),_0x1935f9),null;}}async[a0_0x98996d(0x2bf)](_0x1e9a49){const _0x1e7dea=a0_0x98996d;try{let _0x22486a=_0x1e9a49[_0x1e7dea(0x335)]??{};return await ye[_0x1e7dea(0x704)](_0x22486a)[_0x1e7dea(0x603)](_0x1e9a49[_0x1e7dea(0x603)]??0x0)[_0x1e7dea(0x24c)]();}catch(_0x50b4c4){return console['error'](_0x1e7dea(0x438),_0x50b4c4),[];}}async[a0_0x98996d(0x218)](_0x45cff0){const _0x4cefb7=a0_0x98996d;try{let _0x2b48bb=A(_0x45cff0[_0x4cefb7(0x335)]);return await ye[_0x4cefb7(0x218)](_0x2b48bb)[_0x4cefb7(0x24c)]();}catch{return null;}}},ts=class extends T{[a0_0x98996d(0x660)](_0x41290a){return wa(_0x41290a);}async[a0_0x98996d(0x45a)](_0x318550){const _0x3fd297=a0_0x98996d;if(_0x318550[_0x3fd297(0x217)]!==0x0)try{return{'insertCount':(await this['getConversationModelForOwner'](_0x318550[0x0][_0x3fd297(0x850)])[_0x3fd297(0x45c)]([..._0x318550]))[_0x3fd297(0x217)]};}catch(_0xb15976){return _0xb15976;}}async['delete'](_0x54754c,_0x40a5db){const _0x5763e1=a0_0x98996d;try{let _0x4ee2e1=this[_0x5763e1(0x660)](_0x40a5db),_0x31e8a7=A(_0x54754c[_0x5763e1(0x335)]);return{'deletedCount':(await _0x4ee2e1['deleteMany'](_0x31e8a7))[_0x5763e1(0x63d)]};}catch(_0x15d437){return{'error':_0x15d437?.[_0x5763e1(0x191)]()};}}async[a0_0x98996d(0x326)](_0x448773,_0x3becf3){const _0x4023d4=a0_0x98996d;try{let _0x30765e=this['getConversationModelForOwner'](_0x3becf3),_0x303651=A(_0x448773[_0x4023d4(0x335)]);return{'deletedCount':(await _0x30765e[_0x4023d4(0x326)](_0x303651))[_0x4023d4(0x63d)]};}catch(_0x3b7f13){return{'error':_0x3b7f13?.[_0x4023d4(0x191)]()};}}async[a0_0x98996d(0x7ae)](_0x1d93ca,_0x1a0e00){const _0x488948=a0_0x98996d;try{if(_0x1d93ca['length']===0x0)return;let _0x3e8160=this[_0x488948(0x660)](_0x1a0e00),_0x28889a=_0x1d93ca[_0x488948(0x384)](_0x230c87=>({'updateOne':{'filter':{'name':_0x230c87[_0x488948(0x592)],'owner':_0x1a0e00},'update':{..._0x230c87}}})),{modifiedCount:_0x46330a}=await _0x3e8160['bulkWrite'](_0x28889a);return{'insertCount':_0x46330a};}catch{return;}}async[a0_0x98996d(0x5c7)](_0x5f2dbf,_0xbf4da0,_0x116dfe){const _0x5a93f9=a0_0x98996d;try{return{'modifiedCount':(await this[_0x5a93f9(0x660)](_0x116dfe)['updateMany'](_0x5f2dbf,{'$set':_0xbf4da0})[_0x5a93f9(0x556)]())[_0x5a93f9(0x231)]};}catch(_0x364892){return console[_0x5a93f9(0x5c5)](_0x5a93f9(0x725),_0x364892),{'error':_0x364892};}}async[a0_0x98996d(0x1f8)](_0x4fa656,_0x5e35de,_0x579d70){const _0x594b17=a0_0x98996d;try{return await this['getConversationModelForOwner'](_0x579d70)[_0x594b17(0x57d)]({'_id':_0x4fa656},{'$set':_0x5e35de},{'new':!0x0,'upsert':!0x0})[_0x594b17(0x24c)]();}catch(_0x166505){return console[_0x594b17(0x5c5)](_0x166505),null;}}async[a0_0x98996d(0x704)](_0x323a05,_0x1f1c09){const _0x3d9f55=a0_0x98996d;try{return await this[_0x3d9f55(0x660)](_0x1f1c09)[_0x3d9f55(0x704)](_0x323a05)[_0x3d9f55(0x3ac)]({'lastInteraction':-0x1})[_0x3d9f55(0x24c)]();}catch{return[];}}async[a0_0x98996d(0x218)](_0x2ebc42,_0x108fad){const _0x2bcfb2=a0_0x98996d;try{return await this['getConversationModelForOwner'](_0x108fad)['findOne']({..._0x2ebc42[_0x2bcfb2(0x335)]})[_0x2bcfb2(0x24c)]();}catch{return null;}}async[a0_0x98996d(0x1e4)](_0x599204){const _0x7c74da=a0_0x98996d;try{return await this[_0x7c74da(0x660)](_0x599204)['collection'][_0x7c74da(0x46c)](),{'success':!0x0};}catch(_0x44c39d){return console[_0x7c74da(0x5c5)](_0x44c39d),{'success':!0x1,'error':_0x44c39d};}}},ss=class extends T{[a0_0x98996d(0x2b1)](_0x14834c){return ya(_0x14834c);}async[a0_0x98996d(0x1c9)](_0x4f56fc,_0x52ff56){const _0x676fb3=a0_0x98996d;try{return await this[_0x676fb3(0x2b1)](_0x52ff56)[_0x676fb3(0x1c9)](_0x4f56fc);}catch(_0x10e1f5){return console[_0x676fb3(0x5c5)](_0x676fb3(0x1a9),_0x10e1f5),null;}}async[a0_0x98996d(0x32e)](_0x30bdf,_0x33bbe4){const _0x24be53=a0_0x98996d;try{let _0x40b020=this[_0x24be53(0x2b1)](_0x33bbe4);return await new _0x40b020(_0x30bdf)[_0x24be53(0x84a)]();}catch(_0x3dac75){return console['error'](_0x24be53(0x137),_0x3dac75),null;}}async[a0_0x98996d(0x326)](_0x2838e2,_0x2380e5){const _0x2101c4=a0_0x98996d;try{return await this[_0x2101c4(0x2b1)](_0x2380e5)['findByIdAndDelete'](_0x2838e2),{};}catch(_0x74d2ee){return{'error':_0x74d2ee?.[_0x2101c4(0x191)]()};}}async[a0_0x98996d(0x1f8)](_0x1e71be,_0x5d8eaa,_0x30a498,_0xf13d8b={}){const _0x153e80=a0_0x98996d;try{return await this['getScheduleMessageModelForOwner'](_0x30a498)[_0x153e80(0x57d)](_0x1e71be,_0x5d8eaa,{..._0xf13d8b,'new':!0x0})[_0x153e80(0x24c)]();}catch(_0x526457){return console[_0x153e80(0x5c5)](_0x153e80(0x2e6),_0x526457),null;}}async[a0_0x98996d(0x713)](_0x3fea29,_0x3cce72,_0x37cf43){const _0x28febe=a0_0x98996d;try{return await this['getScheduleMessageModelForOwner'](_0x37cf43)['findByIdAndUpdate'](_0x3fea29,_0x3cce72,{'new':!0x0})['lean']();}catch(_0xf244ad){return console[_0x28febe(0x5c5)](_0x28febe(0x2e6),_0xf244ad),null;}}async[a0_0x98996d(0x704)](_0x5e51ec,_0x5c766d){const _0x14fe6b=a0_0x98996d;try{return await this[_0x14fe6b(0x2b1)](_0x5c766d)[_0x14fe6b(0x704)](_0x5e51ec['where'])[_0x14fe6b(0x603)](_0x5e51ec?.[_0x14fe6b(0x603)]??0x0)[_0x14fe6b(0x3ac)]({'when':0x1})[_0x14fe6b(0x24c)]();}catch{return[];}}async['findOne'](_0x2520a0,_0x586db0){const _0x429c1f=a0_0x98996d;try{return await this[_0x429c1f(0x2b1)](_0x586db0)[_0x429c1f(0x218)](_0x2520a0['where'])[_0x429c1f(0x3ac)]({'when':0x1})[_0x429c1f(0x24c)]();}catch{return null;}}async[a0_0x98996d(0x35f)](_0x1ff71d,_0x172482){const _0x4607e4=a0_0x98996d;try{return await this[_0x4607e4(0x2b1)](_0x172482)['findById'](_0x1ff71d)[_0x4607e4(0x24c)]();}catch{return null;}}async['deleteMany'](_0x2f6c6b,_0x1a3f09){const _0x57dfd1=a0_0x98996d;try{return{'deletedCount':(await this['getScheduleMessageModelForOwner'](_0x1a3f09)[_0x57dfd1(0x3ff)](_0x2f6c6b))[_0x57dfd1(0x63d)]};}catch(_0x23cbe9){return console['error'](_0x57dfd1(0x6d8),_0x23cbe9),{'error':_0x23cbe9};}}async[a0_0x98996d(0x1e4)](_0x36ba90){const _0x1387bd=a0_0x98996d;try{return await this[_0x1387bd(0x2b1)](_0x36ba90)[_0x1387bd(0x4f8)][_0x1387bd(0x46c)](),{'success':!0x0};}catch(_0xba5ac8){return console['error'](_0xba5ac8),{'success':!0x1,'error':_0xba5ac8};}}},as=class extends T{async['update'](_0xdc7956,_0x533199){const _0x24ce93=a0_0x98996d;try{if(this[_0x24ce93(0x50e)][_0x24ce93(0x299)])return await $e['findOneAndUpdate']({'_id':_0x533199},{'$set':_0xdc7956},{'new':!0x0});}catch(_0x43cd98){throw console[_0x24ce93(0x5c5)](_0x24ce93(0x192),_0x43cd98),_0x43cd98;}}async[a0_0x98996d(0x70c)](_0x26df5a){const _0x55a7b0=a0_0x98996d;try{let _0x54c758=await $e[_0x55a7b0(0x35f)](_0x26df5a);return _0x54c758?_0x54c758[_0x55a7b0(0x7ec)]||(_0x54c758[_0x55a7b0(0x7ec)]=[],await _0x54c758[_0x55a7b0(0x84a)]()):(_0x54c758=new $e({'_id':_0x26df5a,'autoCompleteMessages':[]}),await _0x54c758[_0x55a7b0(0x84a)]()),_0x54c758;}catch(_0x413cdd){return _0x413cdd[_0x55a7b0(0x61a)]===0x2af8&&_0x413cdd[_0x55a7b0(0x56b)]&&_0x413cdd[_0x55a7b0(0x56b)]['autoCompleteMessages.command']?(console[_0x55a7b0(0x5c5)](_0x55a7b0(0x509)),await $e[_0x55a7b0(0x4f8)][_0x55a7b0(0x619)](_0x55a7b0(0x741)),null):(console[_0x55a7b0(0x5c5)](_0x55a7b0(0x176),_0x413cdd),null);}}},Fo=new N(a0_0x98996d(0x5ed)),Uo=new We(b),jo=new jt(b),Jo=new at(b),qo=new Jt(sa,b),Vo=new Xt(ua,b),Go=new Zt(na,b),Bo=new Me(qe,b),Wo=new es(b),zo=new qt(b),Ho=new ts(b),Ko=new ss(b),Qo=new as(b),he=new Ge(Uo,jo,Jo,qo,Vo,Go,Bo,Wo,Ho,zo,Ko,Qo,$?.[a0_0x98996d(0x6ca)]()),G=new Ut(ds,b,he),Yo=new zt(b,G,he),Xo=new Kt(G),vs=new Yt(Xo),I=new Qt(G),le=new Bt(G,b,he,ds,Yo),B=new Wt(G),x=new Vt(G),j=new Ht(G);Fo[a0_0x98996d(0x22b)]('Module\x20-\x20ON');var ng=require(a0_0x98996d(0x5a6)),ks=require('fs'),xi=R(require(a0_0x98996d(0x1d0))),Di=R(require(a0_0x98996d(0x59b))),ke=class u{static #e;static set[a0_0x98996d(0x3db)](_0x1dd8b6){this.#e=_0x1dd8b6;}static get[a0_0x98996d(0x1d0)](){const _0x1d31c2=a0_0x98996d;let {FULLCHAIN:_0x5bf799,PRIVKEY:_0x418c54}=b[_0x1d31c2(0x651)](_0x1d31c2(0x752));return xi[_0x1d31c2(0x784)]({'cert':(0x0,ks[_0x1d31c2(0x440)])(_0x5bf799),'key':(0x0,ks[_0x1d31c2(0x440)])(_0x418c54)},u.#e);}static get[a0_0x98996d(0x59b)](){const _0x23c6d1=a0_0x98996d;return Di[_0x23c6d1(0x784)](u.#e);}},Le=R(require('fs')),ji=R(require(a0_0x98996d(0x78c))),Fe=R(require(a0_0x98996d(0x624))),os=R(require('path')),is=require('child_process');function Zo(){const _0x4678cd=a0_0x98996d;G['loadInstance']();let _0x2aaf86=os[_0x4678cd(0x36a)][_0x4678cd(0x38e)](__dirname,'downloads');Ui(_0x2aaf86);}var Ui=_0x48182b=>{const _0x48bfed=a0_0x98996d;let _0xb4dfea=Le[_0x48bfed(0x36a)][_0x48bfed(0x7a0)](_0x48182b),_0x13ad7b=0xc*0x3c*0x3c*0x3e8,_0x42c504=0x2*0x3c*0x3c*0x3e8,_0x580373=new Date()[_0x48bfed(0x4df)]();_0xb4dfea[_0x48bfed(0x15b)](_0x48b778=>{const _0x8abb80=_0x48bfed;let _0x45e2c0=os['default'][_0x8abb80(0x38e)](_0x48182b,_0x48b778),_0x340f61=Le['default']['statSync'](_0x45e2c0)[_0x8abb80(0x703)][_0x8abb80(0x4df)]();_0x580373-_0x340f61>_0x13ad7b&&(Le['default'][_0x8abb80(0x189)](_0x45e2c0),console[_0x8abb80(0x26d)]('Deleted\x20'+_0x48b778));}),setTimeout(()=>Ui(_0x48182b),_0x42c504);};function er(){const _0x28a887=a0_0x98996d;let _0x8a7971=new N(_0x28a887(0x771)),_0x247672=(0x0,me[_0x28a887(0x36a)])();_0x247672[_0x28a887(0x48a)]((0x0,Fi[_0x28a887(0x36a)])({'origin'(_0x3a1914,_0x55b77b){const _0x2083e5=_0x28a887;let {ORIGIN:_0x30fd27}=b['get'](_0x2083e5(0x747));return _0x3a1914||(_0x3a1914='*'),_0x30fd27[_0x2083e5(0x719)]('*')!==-0x1||_0x30fd27[_0x2083e5(0x719)](_0x3a1914)!==-0x1?_0x55b77b(null,!0x0):_0x55b77b(new Error(_0x2083e5(0x19c)));},'methods':[...b[_0x28a887(0x651)]('CORS')[_0x28a887(0x80d)]],'credentials':b[_0x28a887(0x651)]('CORS')[_0x28a887(0x141)]}),(0x0,me[_0x28a887(0x3a9)])({'extended':!0x0,'limit':_0x28a887(0x1f2)}),(0x0,me[_0x28a887(0x52f)])({'limit':_0x28a887(0x1f2)})),_0x247672['use']((_0x28735e,_0x9be940,_0x18a008)=>{const _0x449fa5=_0x28a887;_0x28735e['path'][_0x449fa5(0x366)](_0x449fa5(0x717))?_0x18a008():(0x0,Li['default'])()(_0x28735e,_0x9be940,_0x18a008);}),_0x247672[_0x28a887(0x325)](_0x28a887(0x187),_0x28a887(0x59f)),_0x247672[_0x28a887(0x325)]('views',(0x0,Fs['join'])(re,_0x28a887(0x3f2))),_0x247672[_0x28a887(0x48a)](me[_0x28a887(0x36a)][_0x28a887(0x203)]((0x0,Fs['join'])(re,_0x28a887(0x142)))),_0x247672[_0x28a887(0x48a)]((_0x4812f5,_0x592f7f,_0x90f914)=>{const _0x45101a=_0x28a887;let _0x5799ef=_0x592f7f['send'];_0x592f7f[_0x45101a(0x329)]=function(_0x5bab7c){const _0x57650d=_0x45101a;if(_0x4812f5[_0x57650d(0x777)][_0x57650d(0x79a)]==='true'||_0x4812f5[_0x57650d(0x57b)][_0x57650d(0x2f6)]===_0x57650d(0x435)){let _0x4b9ade=JSON['parse'](_0x5bab7c);_0x5bab7c=JSON[_0x57650d(0x5ab)](_0x11db0a(_0x4b9ade));}return _0x5799ef[_0x57650d(0x12a)](_0x592f7f,[_0x5bab7c]);},_0x90f914();}),_0x247672['use']('/',xe),_0x247672[_0x28a887(0x48a)]((_0x21ff29,_0x3efe48,_0x157bb8,_0x7fb0a6)=>{const _0x94cecb=_0x28a887;if(_0x21ff29)return _0x157bb8[_0x94cecb(0x7ce)](_0x21ff29[_0x94cecb(0x7ce)]||0x1f4)[_0x94cecb(0x52f)](_0x21ff29);},(_0x4ed778,_0x5e7241,_0x5c0ed0)=>{const _0x1d3554=_0x28a887;let {method:_0x80f152,url:_0xa8e8dd}=_0x4ed778;_0x5e7241[_0x1d3554(0x7ce)](0x194)['json']({'status':0x194,'message':_0x1d3554(0x6a9)+_0x80f152['toUpperCase']()+'\x20'+_0xa8e8dd,'error':_0x1d3554(0x6d5)}),_0x5c0ed0();});let _0x11db0a=(_0x1d7b04,_0x175f16=_0x28a887(0x1be))=>{const _0x59fc72=_0x28a887;let _0x46db97=(_0x538c66,_0x5ba997=null,_0x410608=!0x1)=>{let _0xfd7098={};return Object['keys'](_0x538c66)['forEach'](_0x3f24c6=>{const _0x553489=a0_0x431f;let _0x3213bf=_0x538c66[_0x3f24c6],_0x3f7737=''+_0x175f16+_0x3f24c6;_0x5ba997&&!_0x410608&&(_0x3f7737=_0x5ba997+'.'+_0x3f24c6),!_0x3213bf&&_0x3213bf!==0x0&&_0x3213bf!==!0x1||typeof _0x3213bf>'u'?_0xfd7098[_0x3f7737]=null:typeof _0x3213bf!=_0x553489(0x623)&&!Array['isArray'](_0x3213bf)?_0xfd7098[_0x3f7737]=_0x3213bf:typeof _0x3213bf==_0x553489(0x623)&&!Array['isArray'](_0x3213bf)?_0xfd7098=Object['assign'](_0xfd7098,_0x46db97(_0x3213bf,_0x3f7737)):Array[_0x553489(0x481)](_0x3213bf)&&(typeof _0x3213bf[0x0]==_0x553489(0x623)?(_0xfd7098[_0x3f7737]=[],_0x3213bf[_0x553489(0x15b)](_0x3cf0bf=>{_0xfd7098[_0x3f7737]['push'](_0x46db97(_0x3cf0bf,_0x3f7737,!0x0));})):_0xfd7098[_0x3f7737]=_0x3213bf);}),_0xfd7098;};return Array[_0x59fc72(0x481)](_0x1d7b04)?_0x1d7b04[_0x59fc72(0x384)](_0xe4ff5e=>_0x46db97(_0xe4ff5e)):typeof _0x1d7b04==_0x59fc72(0x623)&&_0x1d7b04!==null?_0x46db97(_0x1d7b04):{};},_0xb1b1fd=b[_0x28a887(0x651)](_0x28a887(0x771));ke[_0x28a887(0x3db)]=_0x247672;let _0x5918d8=ke[_0xb1b1fd[_0x28a887(0x5dd)]],_0x45a10b=_0x28a887(0x610);_0x5918d8[_0x28a887(0x66e)](_0xb1b1fd[_0x28a887(0x75d)],()=>{const _0x466da4=_0x28a887;_0x8a7971[_0x466da4(0x26d)](_0x45a10b),_0x8a7971[_0x466da4(0x26d)](_0xb1b1fd['TYPE'][_0x466da4(0x4b1)]()+'\x20-\x20ON:\x20'+_0xb1b1fd[_0x466da4(0x75d)]);}),Zo(),Qs();}var tr=a0_0x98996d(0x7e1),sr=os[a0_0x98996d(0x36a)][a0_0x98996d(0x38e)](__dirname,'./.git/config'),Ee=null;function ar(){return new Promise((_0x311925,_0x41feda)=>{const _0x4de486=a0_0x431f;Le['default']['readFile'](sr,_0x4de486(0x5d7),(_0x18ef76,_0x4aad16)=>{const _0x324649=_0x4de486;if(_0x18ef76){Ee=_0x18ef76,_0x311925();return;}ji[_0x324649(0x36a)][_0x324649(0x184)](_0x4aad16)[_0x324649(0x5bd)]['url']===tr?(Ee=null,_0x311925()):(Ee=new Error(_0x324649(0x26a)),_0x311925());});});}async function ir(){const _0x504c46=a0_0x98996d;try{await ar(),await Us();}catch(_0x230306){console['error'](_0x504c46(0x2cd)+_0x230306),process[_0x504c46(0x17a)](0x1);}}ir();async function Ji(){const _0x3b8f1c=a0_0x98996d;let _0x464aec;try{_0x464aec=(await Fe[_0x3b8f1c(0x36a)][_0x3b8f1c(0x651)](_0x3b8f1c(0x1ab)))[_0x3b8f1c(0x222)]['ip'];}catch(_0x2b9d0f){console[_0x3b8f1c(0x5c5)](_0x2b9d0f);try{_0x464aec=(await Fe[_0x3b8f1c(0x36a)][_0x3b8f1c(0x651)](_0x3b8f1c(0x26e)))[_0x3b8f1c(0x222)]['ip'];}catch(_0xd3617b){console[_0x3b8f1c(0x5c5)](_0xd3617b);try{_0x464aec=(await Fe[_0x3b8f1c(0x36a)]['get']('http://checkip.dyndns.org'))['data']['match'](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x57b613){return console[_0x3b8f1c(0x5c5)](_0x57b613),!0x1;}}}return _0x464aec;}var Pi=0x0;async function or(){const _0x508fa8=a0_0x98996d;let _0x4d88c0=await new ue(b[_0x508fa8(0x651)]('REDIS'))[_0x508fa8(0x5e3)]();return console[_0x508fa8(0x26d)](_0x508fa8(0x331),_0x4d88c0[_0x508fa8(0x217)]),_0x4d88c0['length'];}function rr(_0x456e69){const _0x4eb417=a0_0x98996d;let _0x232106=_0x456e69['get'](_0x4eb417(0x771))[_0x4eb417(0x11d)],_0xdca0c0=_0x456e69[_0x4eb417(0x651)](_0x4eb417(0x752));console[_0x4eb417(0x26d)](_0x4eb417(0x799),_0x232106),console[_0x4eb417(0x26d)](_0x4eb417(0x2b0),_0xdca0c0);let _0x139f47='',_0x5a84ad=_0x232106||'';if(_0x232106){let _0x5e695d=_0x232106['match'](/\/\/(.*?)\./);console[_0x4eb417(0x26d)]('Resultado\x20da\x20correspondncia\x20de\x20URL:',_0x5e695d),_0x5e695d&&_0x5e695d[0x1]&&(_0x139f47=_0x5e695d[0x1],console[_0x4eb417(0x26d)](_0x4eb417(0x229),_0x139f47));}if(!_0x139f47&&_0xdca0c0&&_0xdca0c0[_0x4eb417(0x2cf)]){let _0x12f68a=_0xdca0c0[_0x4eb417(0x2cf)][_0x4eb417(0x4fb)]('/');console['log'](_0x4eb417(0x513),_0x12f68a);let _0x2423d1=_0x12f68a[_0x12f68a[_0x4eb417(0x217)]-0x2];if(console[_0x4eb417(0x26d)](_0x4eb417(0x7b3),_0x2423d1),_0x2423d1){let _0x1332a5=_0x2423d1[_0x4eb417(0x4fb)]('.');console[_0x4eb417(0x26d)](_0x4eb417(0x215),_0x1332a5),_0x1332a5[_0x4eb417(0x217)]>0x2&&(_0x139f47=_0x1332a5[0x0],console['log'](_0x4eb417(0x6a1),_0x139f47),_0x5a84ad=''+_0x2423d1);}}return{'subdomain':_0x139f47||'Subdomnio\x20no\x20encontrado','fullURL':_0x5a84ad||_0x4eb417(0x23e)};}var {subdomain:W,fullURL:js}=rr(b);console[a0_0x98996d(0x26d)](a0_0x98996d(0x20e),W),console[a0_0x98996d(0x26d)](a0_0x98996d(0x394),js);async function nr(){const _0x5b5c96=a0_0x98996d;let _0x1f97b4=b[_0x5b5c96(0x651)](_0x5b5c96(0x1d4)),_0x3d5163=b[_0x5b5c96(0x651)]('AUTHENTICATION')[_0x5b5c96(0x496)][_0x5b5c96(0x2d4)],_0x2ab451=b[_0x5b5c96(0x651)](_0x5b5c96(0x752)),_0x60be4c=await Ji(),_0x4820de=b['get']('SERVER')['PORT'],_0x5cd9f3=js;try{let _0x1fd727={'ip':_0x60be4c||null,'redis_enable':_0x1f97b4?.[_0x5b5c96(0x299)]||null,'apikey':_0x3d5163||null,'ssl':_0x2ab451?.[_0x5b5c96(0x851)]||null,'lastupdate':qi||null,'port':_0x4820de||null,'gitInstallError':Ee?.[_0x5b5c96(0x334)]||null,'url':_0x5cd9f3||null,'subdomain':W};if(console[_0x5b5c96(0x26d)](_0x5b5c96(0x11c),_0x1fd727['ip']),_0x1f97b4&&_0x1f97b4[_0x5b5c96(0x299)]){let _0x5e69c4=await or();_0x1fd727[_0x5b5c96(0x45d)]=_0x5e69c4||null;}for(let _0x542884 in _0x1fd727)_0x1fd727[_0x5b5c96(0x489)](_0x542884)&&_0x542884!=='ip'&&(_0x1fd727[_0x542884]=JSON['stringify'](_0x1fd727[_0x542884]));return(await Fe[_0x5b5c96(0x36a)][_0x5b5c96(0x64e)](_0x5b5c96(0x6ea),_0x1fd727))[_0x5b5c96(0x222)];}catch(_0x5d3453){return console[_0x5b5c96(0x5c5)](_0x5d3453),!0x1;}}var Ls=!0x1,qi=0x260,cr=0x3,ki=0x1b7740;async function Us(){const _0x5ca59b=a0_0x98996d;let _0x420a9e=_0x5ca59b(0x7a3);Ee===null&&(_0x420a9e=await Ji());let _0x8b6dc9=await nr();if(_0x8b6dc9){if(_0x8b6dc9[_0x5ca59b(0x3bf)][_0x5ca59b(0x23c)]===!0x0){Ee===null&&_0x8b6dc9['response'][_0x5ca59b(0x602)]-qi>0x0&&await lr(),Ls||(Ls=!0x0,er());let _0x48b541=0x24*0x3c*0x3c,_0x3509f4=_0x8b6dc9['response'][_0x5ca59b(0x1b5)]>_0x48b541?_0x48b541:_0x8b6dc9['response'][_0x5ca59b(0x1b5)],_0x44ae18=Number(_0x3509f4);if(isNaN(_0x44ae18)){console[_0x5ca59b(0x5c5)](_0x5ca59b(0x342));return;}let _0x1e73b6=Math[_0x5ca59b(0x6fc)](_0x44ae18/0xe10),_0x36b9b1=Math[_0x5ca59b(0x6fc)](_0x44ae18%0xe10/0x3c),_0x3ab66e=new Date(Date['now']()+_0x44ae18*0x3e8);setTimeout(Us,_0x44ae18*0x3e8);let _0x4e151a=_0x3a4b14=>_0x3a4b14[_0x5ca59b(0x191)]()['padStart'](0x2,'0'),_0x3e9e93=_0x5ca59b(0x4fe)+_0x4e151a(_0x1e73b6)+_0x5ca59b(0x2d6)+_0x4e151a(_0x36b9b1)+'\x20minutos.\x20Ser\x20s\x20'+_0x4e151a(_0x3ab66e[_0x5ca59b(0x4e3)]())+':'+_0x4e151a(_0x3ab66e[_0x5ca59b(0x1bc)]())+'.';console[_0x5ca59b(0x26d)](_0x3e9e93);}else return console[_0x5ca59b(0x26d)]('Regularize\x20sua\x20licena\x20no\x20site\x20https://uazapi.dev/'),Ls&&(console['log'](_0x5ca59b(0x28d)),process[_0x5ca59b(0x17a)]()),'LICENSE_INVALID';}else{if(Pi++,Pi<cr)console[_0x5ca59b(0x26d)]('Servidor\x20de\x20autenticao\x20offline.\x20Nova\x20tentativa\x20em\x20'+ki/0xea60+_0x5ca59b(0x527)),setTimeout(Us,ki);else return console[_0x5ca59b(0x5c5)](_0x5ca59b(0x6ba)),'SERVER_OFFLINE';}}async function lr(){const _0x601bcb=a0_0x98996d;console[_0x601bcb(0x26d)](_0x601bcb(0x6b6)),console[_0x601bcb(0x26d)](_0x601bcb(0x7e0)),(0x0,is[_0x601bcb(0x424)])('pm2\x20flush',{'shell':!0x0})['on'](_0x601bcb(0x358),_0x479781=>{const _0x45556d=_0x601bcb;_0x479781!==0x0?console['error'](_0x45556d(0x244)):(console[_0x45556d(0x26d)](_0x45556d(0x622)),console[_0x45556d(0x26d)]('Removendo\x20package-lock.json\x20e\x20a\x20dependncia\x20especfica...'),(0x0,is[_0x45556d(0x424)])('rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys',{'shell':!0x0})['on'](_0x45556d(0x358),_0x1d8e9a=>{const _0x427ace=_0x45556d;if(_0x1d8e9a!==0x0)console[_0x427ace(0x5c5)](_0x427ace(0x2dd));else{console[_0x427ace(0x26d)]('Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualizao\x20do\x20git\x20e\x20npm\x20install.');let _0x4606e5=(0x0,is[_0x427ace(0x424)])('git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm',{'shell':!0x0});_0x4606e5[_0x427ace(0x3e5)]['on'](_0x427ace(0x222),_0x4c3d8c=>{const _0x21c18e=_0x427ace;console[_0x21c18e(0x26d)](_0x21c18e(0x598)+_0x4c3d8c);}),_0x4606e5[_0x427ace(0x469)]['on']('data',_0x2561b0=>{const _0x4745db=_0x427ace;console['error'](_0x4745db(0x663)+_0x2561b0);}),_0x4606e5['on'](_0x427ace(0x17a),_0x3281a7=>{const _0xc80e01=_0x427ace;_0x3281a7!==0x0?console[_0xc80e01(0x5c5)]('Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Cdigo\x20de\x20sada\x20'+_0x3281a7):console[_0xc80e01(0x26d)](_0xc80e01(0x487)),console[_0xc80e01(0x26d)](_0xc80e01(0x3c5)),setTimeout(()=>process[_0xc80e01(0x17a)](),0x2710);});}}));});}function a0_0x431f(_0x4be716,_0x267eef){const _0x282005=a0_0x2820();return a0_0x431f=function(_0x431fbb,_0x2cae51){_0x431fbb=_0x431fbb-0x115;let _0x49040c=_0x282005[_0x431fbb];return _0x49040c;},a0_0x431f(_0x4be716,_0x267eef);}0x0&&(module[a0_0x98996d(0x1ff)]={'fullURL':fullURL,'subdomain':subdomain});