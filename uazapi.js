const a0_0x591e8d=a0_0x3f1e;(function(_0x30d334,_0x26c32a){const _0x3dca88=a0_0x3f1e,_0x509f01=_0x30d334();while(!![]){try{const _0x1e132d=parseInt(_0x3dca88(0x4ad))/0x1*(parseInt(_0x3dca88(0x1f7))/0x2)+-parseInt(_0x3dca88(0x5bd))/0x3*(parseInt(_0x3dca88(0x3a5))/0x4)+-parseInt(_0x3dca88(0x4ea))/0x5+-parseInt(_0x3dca88(0x600))/0x6+parseInt(_0x3dca88(0x56f))/0x7*(-parseInt(_0x3dca88(0x75b))/0x8)+parseInt(_0x3dca88(0x205))/0x9+parseInt(_0x3dca88(0x407))/0xa;if(_0x1e132d===_0x26c32a)break;else _0x509f01['push'](_0x509f01['shift']());}catch(_0x582e3a){_0x509f01['push'](_0x509f01['shift']());}}}(a0_0x5611,0x1f588));var Bi=Object['create'],Ue=Object['defineProperty'],Wi=Object[a0_0x591e8d(0x736)],zi=Object[a0_0x591e8d(0x4a6)],Hi=Object[a0_0x591e8d(0x570)],Ki=Object[a0_0x591e8d(0x5f5)]['hasOwnProperty'],Qi=(_0x17064c,_0x391a66)=>{for(var _0x9a9598 in _0x391a66)Ue(_0x17064c,_0x9a9598,{'get':_0x391a66[_0x9a9598],'enumerable':!0x0});},Vs=(_0x5c4fab,_0x15d876,_0x230ea2,_0x4d2944)=>{const _0x23dbf1=a0_0x591e8d;if(_0x15d876&&typeof _0x15d876==_0x23dbf1(0x808)||typeof _0x15d876==_0x23dbf1(0x289)){for(let _0x31fbb8 of zi(_0x15d876))!Ki['call'](_0x5c4fab,_0x31fbb8)&&_0x31fbb8!==_0x230ea2&&Ue(_0x5c4fab,_0x31fbb8,{'get':()=>_0x15d876[_0x31fbb8],'enumerable':!(_0x4d2944=Wi(_0x15d876,_0x31fbb8))||_0x4d2944[_0x23dbf1(0x176)]});}return _0x5c4fab;},A=(_0x116cc6,_0x15b85c,_0x2091f5)=>(_0x2091f5=_0x116cc6!=null?Bi(Hi(_0x116cc6)):{},Vs(_0x15b85c||!_0x116cc6||!_0x116cc6[a0_0x591e8d(0x574)]?Ue(_0x2091f5,a0_0x591e8d(0x2ab),{'value':_0x116cc6,'enumerable':!0x0}):_0x2091f5,_0x116cc6)),Yi=_0x4b7ce1=>Vs(Ue({},'__esModule',{'value':!0x0}),_0x4b7ce1),dr={};Qi(dr,{'fullURL':()=>Js,'subdomain':()=>W}),module[a0_0x591e8d(0x718)]=Yi(dr);var Fi=A(require(a0_0x591e8d(0x477))),Bs=require('fs'),Ws=require(a0_0x591e8d(0x48e)),zs=require(a0_0x591e8d(0x81b)),je=require(a0_0x591e8d(0x81b)),re=process['cwd'](),fe=(0x0,je[a0_0x591e8d(0x241)])(re,a0_0x591e8d(0x81e)),Gs=(0x0,je[a0_0x591e8d(0x241)])(re,a0_0x591e8d(0x36d)),an=(0x0,je[a0_0x591e8d(0x241)])(re,'store',a0_0x591e8d(0x5ef)),cs=class{constructor(){const _0x197f71=a0_0x591e8d;this[_0x197f71(0x65b)]();}[a0_0x591e8d(0x2f4)](_0x46e09a){const _0x3c3bcd=a0_0x591e8d;return this[_0x3c3bcd(0x6af)][_0x46e09a];}['loadEnv'](){const _0x5365cd=a0_0x591e8d;this[_0x5365cd(0x6af)]=process[_0x5365cd(0x6af)]?.[_0x5365cd(0x7fe)]!=='true'?this[_0x5365cd(0x1e4)]():this[_0x5365cd(0x77f)](),process[_0x5365cd(0x6af)]?.[_0x5365cd(0x7fe)]===_0x5365cd(0x5a0)&&(this['env'][_0x5365cd(0x371)][_0x5365cd(0x5d5)]=_0x5365cd(0x898),this[_0x5365cd(0x6af)][_0x5365cd(0x371)][_0x5365cd(0x4d8)]=Number[_0x5365cd(0x34e)](process[_0x5365cd(0x6af)]?.[_0x5365cd(0x1ff)]??_0x5365cd(0x4fc)));}['envYaml'](){const _0x165a3f=a0_0x591e8d;return(0x0,Ws['load'])((0x0,Bs[_0x165a3f(0x3f7)])((0x0,zs['join'])(Gs,_0x165a3f(0x7a5)),{'encoding':_0x165a3f(0x50f)}));}[a0_0x591e8d(0x77f)](){const _0x2e9648=a0_0x591e8d;return{'SERVER':{'TYPE':process[_0x2e9648(0x6af)]['SERVER_TYPE'],'PORT':Number['parseInt'](process['env'][_0x2e9648(0x1ff)]),'URL':process['env'][_0x2e9648(0x17a)]},'CORS':{'ORIGIN':process[_0x2e9648(0x6af)][_0x2e9648(0x566)][_0x2e9648(0x179)](','),'METHODS':process[_0x2e9648(0x6af)][_0x2e9648(0x6be)]['split'](','),'CREDENTIALS':process[_0x2e9648(0x6af)]?.[_0x2e9648(0x437)]===_0x2e9648(0x5a0)},'SSL_CONF':{'PRIVKEY':process[_0x2e9648(0x6af)]?.[_0x2e9648(0x6b6)],'FULLCHAIN':process[_0x2e9648(0x6af)]?.[_0x2e9648(0x738)]},'STORE':{'CLEANING_INTERVAL':Number[_0x2e9648(0x446)](process[_0x2e9648(0x6af)]?.[_0x2e9648(0x6d9)])?Number[_0x2e9648(0x34e)](process[_0x2e9648(0x6af)]['STORE_CLEANING_TERMINAL']):void 0x0,'MESSAGES':process[_0x2e9648(0x6af)]?.[_0x2e9648(0x351)]==='true','CONTACTS':process['env']?.['STORE_CONTACTS']==='true','CHATS':process['env']?.[_0x2e9648(0x731)]==='true'},'DATABASE':{'CONNECTION':{'HOST':process[_0x2e9648(0x6af)]?.['DATABASE_CONNECTION_HOST'],'PORT':Number['parseInt'](process[_0x2e9648(0x6af)]?.[_0x2e9648(0x319)]),'USER':process[_0x2e9648(0x6af)][_0x2e9648(0x729)],'PASSWORD':process[_0x2e9648(0x6af)][_0x2e9648(0x520)],'URI':process[_0x2e9648(0x6af)][_0x2e9648(0x62d)],'DB_PREFIX_NAME':process[_0x2e9648(0x6af)][_0x2e9648(0x305)]},'ENABLED':process[_0x2e9648(0x6af)]?.[_0x2e9648(0x491)]===_0x2e9648(0x5a0)},'REDIS':{'ENABLED':process[_0x2e9648(0x6af)]?.['REDIS_ENABLED']===_0x2e9648(0x5a0),'URI':process[_0x2e9648(0x6af)]['REDIS_URI']||_0x2e9648(0x602),'PREFIX_KEY':process[_0x2e9648(0x6af)][_0x2e9648(0x7c1)]||_0x2e9648(0x301)},'LOG':{'LEVEL':process['env']?.[_0x2e9648(0x6e3)][_0x2e9648(0x179)](','),'COLOR':process['env']?.[_0x2e9648(0x225)]===_0x2e9648(0x5a0)},'PROXY':process[_0x2e9648(0x6af)]?.[_0x2e9648(0x559)]===_0x2e9648(0x5a0),'AUTHENTICATION':{'TYPE':process[_0x2e9648(0x6af)]['AUTHENTICATION_TYPE'],'API_KEY':{'KEY':process[_0x2e9648(0x6af)][_0x2e9648(0x831)]},'JWT':{'EXPIRIN_IN':Number[_0x2e9648(0x446)](process[_0x2e9648(0x6af)]?.[_0x2e9648(0x1f3)])?Number['parseInt'](process[_0x2e9648(0x6af)][_0x2e9648(0x1f3)]):0xe10,'SECRET':process[_0x2e9648(0x6af)][_0x2e9648(0x282)]}}};}},b=new cs(),Ui=A(require('cors')),me=A(require('express')),Us=require('path'),ls=A(require(a0_0x591e8d(0x32c))),us=(_0x40cea2=>(_0x40cea2['LOG']=a0_0x591e8d(0x7c6),_0x40cea2['INFO']='\x1b[34m',_0x40cea2[a0_0x591e8d(0x46c)]=a0_0x591e8d(0x714),_0x40cea2[a0_0x591e8d(0x172)]=a0_0x591e8d(0x306),_0x40cea2['DEBUG']=a0_0x591e8d(0x3f3),_0x40cea2[a0_0x591e8d(0x302)]=a0_0x591e8d(0x198),_0x40cea2[a0_0x591e8d(0x7f5)]=a0_0x591e8d(0x6ed),_0x40cea2))(us||{}),Hs=(_0x3999e6=>(_0x3999e6[a0_0x591e8d(0x261)]=a0_0x591e8d(0x7a7),_0x3999e6[a0_0x591e8d(0x7f5)]=a0_0x591e8d(0x1a0),_0x3999e6['INFO']=a0_0x591e8d(0x27e),_0x3999e6[a0_0x591e8d(0x46c)]='\x1b[33m%s\x1b[0m',_0x3999e6[a0_0x591e8d(0x172)]='\x1b[31m%s\x1b[0m',_0x3999e6['DEBUG']=a0_0x591e8d(0x393),_0x3999e6[a0_0x591e8d(0x302)]=a0_0x591e8d(0x38b),_0x3999e6))(Hs||{}),Ks=(_0x2de6e6=>(_0x2de6e6[a0_0x591e8d(0x261)]=a0_0x591e8d(0x261),_0x2de6e6[a0_0x591e8d(0x46c)]=a0_0x591e8d(0x46c),_0x2de6e6['INFO']=a0_0x591e8d(0x377),_0x2de6e6[a0_0x591e8d(0x7f5)]='DARK',_0x2de6e6[a0_0x591e8d(0x172)]=a0_0x591e8d(0x172),_0x2de6e6['DEBUG']=a0_0x591e8d(0x720),_0x2de6e6[a0_0x591e8d(0x302)]=a0_0x591e8d(0x302),_0x2de6e6))(Ks||{}),Qs=(_0x57b0a5=>(_0x57b0a5[a0_0x591e8d(0x261)]=a0_0x591e8d(0x6c4),_0x57b0a5[a0_0x591e8d(0x377)]=a0_0x591e8d(0x7fb),_0x57b0a5['WARN']=a0_0x591e8d(0x2c8),_0x57b0a5[a0_0x591e8d(0x7f5)]='\x1b[40m',_0x57b0a5[a0_0x591e8d(0x172)]='\x1b[41m',_0x57b0a5[a0_0x591e8d(0x720)]=a0_0x591e8d(0x798),_0x57b0a5[a0_0x591e8d(0x302)]=a0_0x591e8d(0x2c9),_0x57b0a5))(Qs||{}),N=class{constructor(_0x325e1e='Logger'){const _0x2b714d=a0_0x591e8d;this[_0x2b714d(0x435)]=_0x325e1e,this[_0x2b714d(0x285)]=b;}[a0_0x591e8d(0x4eb)](_0x23c1e2){const _0x4035a8=a0_0x591e8d;this[_0x4035a8(0x435)]=_0x23c1e2;}[a0_0x591e8d(0x7b6)](_0x236517,_0x47274c){const _0x212b9c=a0_0x591e8d;let _0xb262aa=[];this['configService'][_0x212b9c(0x2f4)](_0x212b9c(0x261))[_0x212b9c(0x4c6)][_0x212b9c(0x5ce)](_0xf9472=>_0xb262aa[_0x212b9c(0x57f)](Ks[_0xf9472]));let _0xb84954=typeof _0x236517;_0xb262aa[_0x212b9c(0x243)](_0x47274c)&&(b[_0x212b9c(0x2f4)](_0x212b9c(0x261))[_0x212b9c(0x653)]?(console[_0x212b9c(0x2c3)](_0x212b9c(0x5d9)+Hs[_0x47274c],_0x212b9c(0x544),(0x0,ls[_0x212b9c(0x2ab)])()[_0x212b9c(0x721)](_0x212b9c(0x5d7)),_0x212b9c(0x629),us[_0x47274c]+Qs[_0x47274c]+_0x212b9c(0x5d9),_0x47274c+'\x20\x1b[0m',_0x212b9c(0x217),this[_0x212b9c(0x435)]+_0x212b9c(0x629),us[_0x47274c],_0xb84954!==_0x212b9c(0x808)?_0x236517:'',_0x212b9c(0x629)),_0xb84954==='object'&&console[_0x212b9c(0x2c3)](_0x236517,'\x0a')):console[_0x212b9c(0x2c3)]((0x0,ls[_0x212b9c(0x2ab)])()[_0x212b9c(0x721)](_0x212b9c(0x56d)),_0x47274c+'\x20',''+this[_0x212b9c(0x435)],_0x236517));}[a0_0x591e8d(0x2c3)](_0x35ddd0){const _0x21b4fd=a0_0x591e8d;this[_0x21b4fd(0x7b6)](_0x35ddd0,_0x21b4fd(0x261));}[a0_0x591e8d(0x7ed)](_0x49204){const _0x1a173f=a0_0x591e8d;this['console'](_0x49204,_0x1a173f(0x377));}['warn'](_0x1344e3){const _0x1ef898=a0_0x591e8d;this['console'](_0x1344e3,_0x1ef898(0x46c));}[a0_0x591e8d(0x62b)](_0x1d62ec){const _0x37939b=a0_0x591e8d;this['console'](_0x1d62ec,_0x37939b(0x172));}[a0_0x591e8d(0x768)](_0x4ca97a){const _0x155ac8=a0_0x591e8d;this[_0x155ac8(0x7b6)](_0x4ca97a,_0x155ac8(0x302));}[a0_0x591e8d(0x86a)](_0x20b27d){this['console'](_0x20b27d,'DEBUG');}['dark'](_0x401a4a){const _0x48cc39=a0_0x591e8d;this[_0x48cc39(0x7b6)](_0x401a4a,'DARK');}};function Ys(){const _0x4fad36=a0_0x591e8d;process['on'](_0x4fad36(0x7e6),(_0x4ab66c,_0x3119c8)=>{const _0x5a708b=_0x4fad36;new N('uncaughtException')['error']({'origin':_0x3119c8,'stderr':process[_0x5a708b(0x32d)]['fd'],'error':_0x4ab66c});}),process['on'](_0x4fad36(0x6ff),(_0x472694,_0x37f201)=>{const _0x58854c=_0x4fad36;new N(_0x58854c(0x6ff))[_0x58854c(0x62b)]({'origin':_0x37f201,'stderr':process[_0x58854c(0x32d)]['fd'],'error':_0x472694});});}var Xs=A(require(a0_0x591e8d(0x2fb))),ds=new Xs[(a0_0x591e8d(0x2ab))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),we=require(a0_0x591e8d(0x45e)),Ne=A(require('mongoose')),Je=new N('Db\x20Connection'),k=b[a0_0x591e8d(0x2f4)]('DATABASE'),$=k[a0_0x591e8d(0x754)]?k['CONNECTION'][a0_0x591e8d(0x609)]?Ne[a0_0x591e8d(0x2ab)][a0_0x591e8d(0x5b0)](k[a0_0x591e8d(0x848)][a0_0x591e8d(0x609)],{'dbName':k[a0_0x591e8d(0x848)][a0_0x591e8d(0x186)]+a0_0x591e8d(0x604)}):Ne['default'][a0_0x591e8d(0x5b0)](a0_0x591e8d(0x586)+k[a0_0x591e8d(0x848)][a0_0x591e8d(0x75f)]+':'+k[a0_0x591e8d(0x848)][a0_0x591e8d(0x4d8)]+'?authSource=admin&readPreference=primary&directConnection=true',{'user':k[a0_0x591e8d(0x848)]['USER'],'pass':k[a0_0x591e8d(0x848)][a0_0x591e8d(0x6d2)],'dbName':k[a0_0x591e8d(0x848)][a0_0x591e8d(0x186)]+a0_0x591e8d(0x604)}):null;k[a0_0x591e8d(0x754)]&&Je['info'](a0_0x591e8d(0x1eb)+$['$dbName']);var ne=k[a0_0x591e8d(0x754)]?k[a0_0x591e8d(0x848)][a0_0x591e8d(0x609)]?Ne[a0_0x591e8d(0x2ab)][a0_0x591e8d(0x5b0)](k[a0_0x591e8d(0x848)][a0_0x591e8d(0x609)],{'dbName':'cachedData-whatsapp'}):Ne[a0_0x591e8d(0x2ab)]['createConnection'](a0_0x591e8d(0x586)+k['CONNECTION'][a0_0x591e8d(0x75f)]+':'+k[a0_0x591e8d(0x848)][a0_0x591e8d(0x4d8)]+a0_0x591e8d(0x5f2),{'user':k['CONNECTION'][a0_0x591e8d(0x76c)],'pass':k[a0_0x591e8d(0x848)][a0_0x591e8d(0x6d2)],'dbName':'cachedContacts-whatsapp'}):null;ne&&Je[a0_0x591e8d(0x7ed)](a0_0x591e8d(0x1eb)+ne[a0_0x591e8d(0x245)]),process['on'](a0_0x591e8d(0x618),()=>{const _0xcf62d5=a0_0x591e8d;$&&$['close'](()=>{const _0xb5242d=a0_0x3f1e;Je[_0xb5242d(0x7ed)](_0xb5242d(0x2fc));}),ne&&ne[_0xcf62d5(0x3e5)](()=>{const _0x2c8107=_0xcf62d5;Je[_0x2c8107(0x7ed)]('CacheContacts\x20database\x20connection\x20closed.');});});var Xi=new we['Schema']({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),Zi=new we[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),eo=new we[(a0_0x591e8d(0x6f8))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),to=new we['Schema']({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Xi],'default':[]}},{'_id':!0x1}),so=new we[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':to,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':Zi},'groupdata':{'type':eo,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),Zs=_0x5ee0df=>{const _0x1ac02e=a0_0x591e8d;let _0x1dd018='z_'+_0x5ee0df+_0x1ac02e(0x2bf);return $?.[_0x1ac02e(0x85b)](_0x1ac02e(0x593),so,_0x1dd018);},ea=require('mongoose'),ao=new ea[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ta=_0x5ec028=>{const _0x464694=a0_0x591e8d;let _0x4d347c='z_'+_0x5ec028+_0x464694(0x7c7);return $?.['model'](_0x464694(0x17e),ao,_0x4d347c);},sa=require(a0_0x591e8d(0x45e)),ps=class{},io=new sa[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),aa=ne?.[a0_0x591e8d(0x85b)](ps[a0_0x591e8d(0x1f8)],io,a0_0x591e8d(0x752)),ia=require(a0_0x591e8d(0x45e)),hs=class{},oo=new ia[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),qe=ne?.[a0_0x591e8d(0x85b)](hs['name'],oo,'instances'),oa=require('mongoose'),ro=new oa[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),ra=_0x4675ed=>{const _0x1c5b41=a0_0x591e8d;let _0x42f209='z_'+_0x4675ed+_0x1c5b41(0x4a7);return $?.[_0x1c5b41(0x85b)](_0x1c5b41(0x581),ro,_0x42f209);},na=require(a0_0x591e8d(0x45e)),gs=class{},no=new na[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ca=$?.[a0_0x591e8d(0x85b)](gs[a0_0x591e8d(0x1f8)],no,'authentication'),la=require(a0_0x591e8d(0x45e)),ms=class{},ua=new la[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ua[a0_0x591e8d(0x35e)](a0_0x591e8d(0x6a0),function(_0x38c2bb){const _0x4a6712=a0_0x591e8d;delete this[_0x4a6712(0x1c5)],delete this['flowIgnoreGroups'],delete this[_0x4a6712(0x19c)],delete this[_0x4a6712(0x1e8)],delete this[_0x4a6712(0x54e)],_0x38c2bb();});var da=$?.[a0_0x591e8d(0x85b)](ms[a0_0x591e8d(0x1f8)],ua,a0_0x591e8d(0x3ff)),_=require(a0_0x591e8d(0x45e)),fs=require(a0_0x591e8d(0x38a)),Ve=class{},ha=new _[(a0_0x591e8d(0x6f8))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),ws=new _[(a0_0x591e8d(0x6f8))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),co=new _[(a0_0x591e8d(0x6f8))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x591e8d(0x2ed)},'footerText':{'type':String},'buttonText':{'type':String,'default':'Selecione'},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x591e8d(0x494)},'pollErrorMessage':{'type':String,'default':a0_0x591e8d(0x2e1)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),ga=new _[(a0_0x591e8d(0x6f8))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),lo=new _['Schema']({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),uo=new _[(a0_0x591e8d(0x6f8))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Ss=new _[(a0_0x591e8d(0x6f8))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),po=new _[(a0_0x591e8d(0x6f8))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),ma=new _['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':co},'apirequest':lo,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':po,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),fa=new _['Schema']({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),ys=class{},wa=new _[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Ss],'blocks':[ma],'groups':[ha],'conditions':[ga],'varedits':[fa],'replyOptions':{'type':[ws],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x4c4971=a0_0x591e8d;return _0x4c4971(0x405)+Math[_0x4c4971(0x6a6)]()[_0x4c4971(0x44c)](0x24)['slice'](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':'false'},'startID':{'type':String,'default':()=>(0x0,fs['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,fs['v4'])()},'shareOwners':{'type':[String],'default':[]}});wa[a0_0x591e8d(0x35e)](a0_0x591e8d(0x6db),function(_0x19da43){const _0x368017=a0_0x591e8d;let _0x4a4b59=this[_0x368017(0x224)]();if(_0x4a4b59&&typeof _0x4a4b59==_0x368017(0x808)&&'$set'in _0x4a4b59){let _0x2426bc=_0x4a4b59[_0x368017(0x3bf)];if(_0x2426bc){let _0x1a0a93=new Set(),_0x286ca3=new Set(_0x2426bc[_0x368017(0x45a)]?.['map'](_0x277eaa=>_0x277eaa[_0x368017(0x1f8)])),_0x12e9d8=JSON[_0x368017(0x62f)](_0x2426bc),_0x1361c2=/{{(?!_)([^}]*)}}/g,_0x31e8e5;for(;(_0x31e8e5=_0x1361c2[_0x368017(0x3b1)](_0x12e9d8))!==null;)_0x286ca3[_0x368017(0x1ea)](_0x31e8e5[0x1])||_0x1a0a93[_0x368017(0x67f)](_0x31e8e5[0x1]);_0x1a0a93[_0x368017(0x561)]>0x0?(console[_0x368017(0x746)](_0x368017(0x3c7),Array[_0x368017(0x4f4)](_0x1a0a93)),_0x2426bc['variablesNotFound']=Array[_0x368017(0x4f4)](_0x1a0a93)):_0x2426bc[_0x368017(0x89d)]=[],this['setUpdate']({'$set':_0x2426bc});}}_0x19da43();});var ye=$?.[a0_0x591e8d(0x85b)](ys[a0_0x591e8d(0x1f8)],wa,a0_0x591e8d(0x6cd)),ho=new _[(a0_0x591e8d(0x6f8))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Ss],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[uo]},{'_id':!0x1}),go=new _[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Ss],'blocks':[ma],'groups':[ha],'conditions':[ga],'varedits':[fa],'replyOptions':{'type':[ws],'default':[]},'chatLog':ho,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x591e8d(0x4b7)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x591e8d(0x494)},'waitingMenu_replyOptions':{'type':[ws],'default':[]}}),ya=_0x55aa9a=>{const _0x5ec203=a0_0x591e8d;let _0x4e227b='z_'+_0x55aa9a+_0x5ec203(0x881);return $?.[_0x5ec203(0x85b)]('ConversationModel',go,_0x4e227b);},mo=new _[(a0_0x591e8d(0x6f8))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),pa=new _[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),fo=new _[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[pa],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x591e8d(0x769)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[mo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':pa,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),ba=_0x15ccdf=>{const _0x374d5c=a0_0x591e8d;let _0x59aa8b='z_'+_0x15ccdf+_0x374d5c(0x5ed);return $?.[_0x374d5c(0x85b)](_0x374d5c(0x212),fo,_0x59aa8b);},bs=class{},wo=new _[(a0_0x591e8d(0x6f8))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),yo=new _[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),bo=new _[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),So=new _['Schema']({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x591e8d(0x4b0)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),Mo=new _['Schema']({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Co=new _['Schema']({'_id':{'type':String,'_id':!0x0},'agents':{'type':[Mo]},'customFields':{'type':[bo]},'flowConfig':{'type':So,'default':{}},'flows':{'type':[yo],'default':[]},'autoCompleteMessages':{'type':[wo],'default':[]}}),$e=$?.['model'](bs['name'],Co,a0_0x591e8d(0x693)),Sa=require(a0_0x591e8d(0x45e)),Eo=new Sa[(a0_0x591e8d(0x6f8))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Ma=_0x1d2340=>{const _0x45d723=a0_0x591e8d;let _0x3a74b5='z_'+_0x1d2340+_0x45d723(0x2a8);return $?.[_0x45d723(0x85b)](_0x45d723(0x2b5),Eo,_0x3a74b5);},T=class{constructor(_0x40a7a6){const _0x4cce9f=a0_0x591e8d;this[_0x4cce9f(0x327)]=_0x40a7a6[_0x4cce9f(0x2f4)]('DATABASE');}};function R(_0x3aa8af){const _0xede9ed=a0_0x591e8d;let _0x222f15={};for(let [_0x5501fb,_0x141e92]of Object['entries'](_0x3aa8af))if(typeof _0x141e92=='object'&&!Array['isArray'](_0x141e92)){for(let [_0x46c89c,_0x383315]of Object[_0xede9ed(0x852)](_0x141e92))_0x222f15[_0x5501fb+'.'+_0x46c89c]=_0x383315;}else _0x222f15[_0x5501fb]=_0x141e92;return _0x222f15;}var Ge=class{constructor(_0x52cfef,_0x3c242f,_0x69e09c,_0x5e6b27,_0x1f37ff,_0x4f8d83,_0x2647a8,_0x4a1deb,_0x53b670,_0x17432b,_0x425f7c,_0x43a2f4,_0x140503){const _0x5dcec4=a0_0x591e8d;this[_0x5dcec4(0x5b7)]=_0x52cfef,this[_0x5dcec4(0x4b2)]=_0x3c242f,this['contact']=_0x69e09c,this['cacheContact']=_0x5e6b27,this[_0x5dcec4(0x3ff)]=_0x1f37ff,this[_0x5dcec4(0x5ef)]=_0x4f8d83,this[_0x5dcec4(0x3ec)]=_0x2647a8,this[_0x5dcec4(0x4cc)]=_0x4a1deb,this[_0x5dcec4(0x8a8)]=_0x53b670,this['label']=_0x17432b,this[_0x5dcec4(0x67c)]=_0x425f7c,this[_0x5dcec4(0x79b)]=_0x43a2f4,this[_0x5dcec4(0x849)]=_0x140503;}get['dbServer'](){const _0x217b7d=a0_0x591e8d;return this[_0x217b7d(0x849)];}},Be=class{},We=class extends T{[a0_0x591e8d(0x5b1)](_0x1fdee1){return ra(_0x1fdee1);}async[a0_0x591e8d(0x292)](_0x4a055d,_0x1b64e0){const _0x405558=a0_0x591e8d;if(_0x4a055d[_0x405558(0x836)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x405558(0x5b1)](_0x1b64e0)[_0x405558(0x5d2)]([..._0x4a055d]))[_0x405558(0x836)]};}catch(_0x4ae941){return _0x4ae941;}}async[a0_0x591e8d(0x2c5)](_0x51d7f7,_0x164421){const _0x2d02b4=a0_0x591e8d;try{let _0x536ece=this[_0x2d02b4(0x5b1)](_0x164421),_0x5f13ac=R(_0x51d7f7[_0x2d02b4(0x41b)]);return await _0x536ece[_0x2d02b4(0x2c5)](_0x5f13ac)['sort']({'messageTimestamp':-0x1})[_0x2d02b4(0x22c)](_0x51d7f7?.['limit']??0x0)[_0x2d02b4(0x7d3)]();}catch{return[];}}async['delete'](_0x58c4a7,_0x44ded5){const _0x129c6d=a0_0x591e8d;try{let _0x29b52f=this[_0x129c6d(0x5b1)](_0x44ded5),_0x2f5c56=R(_0x58c4a7['where']);await _0x29b52f[_0x129c6d(0x76e)](_0x2f5c56);}catch(_0x4bfeb5){console[_0x129c6d(0x62b)](_0x4bfeb5);}}async[a0_0x591e8d(0x1d9)](_0x1c834f,_0x95906c,_0x2cf6f3){const _0x252d79=a0_0x591e8d;try{let _0x40c29e=this['getMessageModelForOwner'](_0x2cf6f3),_0x3927d5=R(_0x1c834f[_0x252d79(0x41b)]);return await _0x40c29e[_0x252d79(0x6db)](_0x3927d5,{'$set':_0x95906c},{'new':!0x0});}catch(_0x4336a4){throw console[_0x252d79(0x62b)](_0x4336a4),_0x4336a4;}}async[a0_0x591e8d(0x5d2)](_0x1e074b,_0x170118){const _0x517f00=a0_0x591e8d;if(_0x1e074b['length']===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this['getMessageModelForOwner'](_0x170118)[_0x517f00(0x5d2)]([..._0x1e074b]))[_0x517f00(0x836)]};}catch(_0x2d1ae8){return console['log'](_0x517f00(0x7b9),_0x2d1ae8),_0x2d1ae8;}}async[a0_0x591e8d(0x708)](_0x5860a9){const _0x536b19=a0_0x591e8d;try{return await this[_0x536b19(0x5b1)](_0x5860a9)[_0x536b19(0x26b)][_0x536b19(0x3ad)](),{'success':!0x0};}catch(_0x325c79){return console['error'](_0x325c79),{'success':!0x1,'error':_0x325c79};}}},Ts=A(require('@ffmpeg-installer/ffmpeg')),w=A(require(a0_0x591e8d(0x234))),De=require('fs'),L=A(require('path')),Q=A(require(a0_0x591e8d(0x331))),Ai=require(a0_0x591e8d(0x38a)),Ii=A(require(a0_0x591e8d(0x415))),Ti=A(require('qrcode-terminal')),Ca=['imageMessage',a0_0x591e8d(0x712),a0_0x591e8d(0x3ea),'videoMessage',a0_0x591e8d(0x61b)],Ea=[a0_0x591e8d(0x89a),'documentWithCaptionMessage',a0_0x591e8d(0x1a8),a0_0x591e8d(0x15e)],Os=require('os'),kt=A(require('pino')),Pe=require(a0_0x591e8d(0x5df)),Oi=require(a0_0x591e8d(0x625)),_s=require(a0_0x591e8d(0x4cb)),pe=A(require(a0_0x591e8d(0x45e))),D=require(a0_0x591e8d(0x786)),ce=class{constructor(_0x25c0ce,_0x4fa809,_0x5e3c90){const _0x37d5f6=a0_0x591e8d;this[_0x37d5f6(0x833)]=_0x25c0ce,this[_0x37d5f6(0x5c4)]=_0x4fa809,this['name']=_0x5e3c90;}},ze=class{},He=class{},Re=class{},Ke=class{},Qe=class{},be=class{},Ye=class{},Xe=class{},Ze=class{},et=class{},Tt=A(require(a0_0x591e8d(0x3c0))),va=require('fs'),Na=require(a0_0x591e8d(0x81b));async function Ae(_0x4fc7d6){const _0x22409a=a0_0x591e8d;let _0x3f1d71=G[_0x22409a(0x37e)][_0x4fc7d6];if(k['ENABLED']){let _0x5f3b94=$['getClient']()['db'](k['CONNECTION']['DB_PREFIX_NAME']+_0x22409a(0x5c1))['collection'](_0x4fc7d6);return _0x3f1d71||(await _0x5f3b94[_0x22409a(0x2c5)]({})[_0x22409a(0x1ad)]())[_0x22409a(0x836)]>0x0;}return _0x3f1d71||(0x0,va[_0x22409a(0x354)])((0x0,Na['join'])(fe,_0x4fc7d6));}async function $a(_0x56f2c6,_0x3bdbe7,_0xb7f06e){const _0x28deac=a0_0x591e8d;if(_0x56f2c6['originalUrl'][_0x28deac(0x243)](_0x28deac(0x66e))||_0x56f2c6['originalUrl']['includes']('/instance/fetchInstances')||_0x56f2c6[_0x28deac(0x787)][_0x28deac(0x243)](_0x28deac(0x47c))||_0x56f2c6[_0x28deac(0x787)][_0x28deac(0x243)]('/config')||_0x56f2c6['originalUrl']['includes'](_0x28deac(0x5bf))||_0x56f2c6[_0x28deac(0x787)][_0x28deac(0x243)](_0x28deac(0x30c))||_0x56f2c6[_0x28deac(0x787)][_0x28deac(0x243)](_0x28deac(0x471)))return _0xb7f06e();let _0x59801a=_0x56f2c6['params'];if(!_0x59801a?.[_0x28deac(0x75c)])throw new m(_0x28deac(0x606));if(!await Ae(_0x59801a['instanceName']))throw new F(_0x28deac(0x1dc)+_0x59801a['instanceName']+'\x20instance\x20does\x20not\x20exist');_0xb7f06e();}async function Ra(_0x11dce9,_0x360026,_0x10cf1b){const _0x549ccf=a0_0x591e8d;if(_0x11dce9['originalUrl'][_0x549ccf(0x243)]('/instance/create')){let _0x3e8759=_0x11dce9[_0x549ccf(0x5cb)];if(await Ae(_0x3e8759['instanceName']))throw new X(_0x549ccf(0x784)+_0x3e8759[_0x549ccf(0x75c)]+_0x549ccf(0x237));G[_0x549ccf(0x37e)][_0x3e8759[_0x549ccf(0x75c)]]&&delete G['waInstances'][_0x3e8759[_0x549ccf(0x75c)]];}_0x10cf1b();}var Aa=require('class-validator'),Ia=A(require(a0_0x591e8d(0x37d))),tt=a0_0x591e8d(0x301),No=new N('GUARD');async function $o(_0x4c4449,_0x38a65b,_0x4adf19){const _0x8bade4=a0_0x591e8d;let _0x278bdb=_0x4c4449[_0x8bade4(0x2f4)](_0x8bade4(0x1e5));if(_0x278bdb&&b[_0x8bade4(0x2f4)]('AUTHENTICATION')[_0x8bade4(0x199)][_0x8bade4(0x5b5)]!==_0x278bdb)throw new ie();if(b[_0x8bade4(0x2f4)]('AUTHENTICATION')[_0x8bade4(0x199)][_0x8bade4(0x5b5)]===_0x278bdb)return _0x4adf19();if((_0x4c4449['originalUrl']['includes'](_0x8bade4(0x66e))||_0x4c4449['originalUrl'][_0x8bade4(0x243)]('/instance/fetchInstances'))&&!_0x278bdb)throw new X(_0x8bade4(0x589),'The\x20global\x20api\x20key\x20must\x20be\x20set');let _0x4fe318=b[_0x8bade4(0x2f4)](_0x8bade4(0x40b))[_0x8bade4(0x338)];try{let [_0x3c7cc1,_0x2cadde]=_0x4c4449[_0x8bade4(0x2f4)](_0x8bade4(0x1dd))[_0x8bade4(0x179)]('\x20');if(_0x3c7cc1[_0x8bade4(0x1f1)]()!==_0x8bade4(0x167))throw new ie();if(!(0x0,Aa[_0x8bade4(0x598)])(_0x2cadde))throw new ie();let _0xd68b37=_0x4c4449[_0x8bade4(0x888)],_0x6ec1cb=Ia[_0x8bade4(0x2ab)][_0x8bade4(0x268)](_0x2cadde,_0x4fe318[_0x8bade4(0x376)],{'ignoreExpiration':_0x4fe318['EXPIRIN_IN']===0x0});if(_0xd68b37[_0x8bade4(0x75c)]!==_0x6ec1cb['instanceName']||tt!==_0x6ec1cb['apiName'])throw new ie();return _0x4adf19();}catch(_0x47469a){throw No['error'](_0x47469a),new ie();}}async function Ro(_0x411a7d,_0x3217d3,_0x288b5d){const _0x42ae57=a0_0x591e8d;let _0x11309b=b[_0x42ae57(0x2f4)]('AUTHENTICATION')['API_KEY'],_0x5800e8=_0x411a7d[_0x42ae57(0x2f4)](_0x42ae57(0x1e5));if(_0x11309b[_0x42ae57(0x5b5)]===_0x5800e8)return _0x288b5d();if(_0x411a7d[_0x42ae57(0x787)][_0x42ae57(0x243)]('/instance/create')){let _0x479c33=Oa,_0x5d0221=_0x411a7d[_0x42ae57(0x5cb)][_0x42ae57(0x75c)];if(_0x479c33&&_0x5d0221[_0x42ae57(0x1f1)]()['startsWith'](_0x479c33[_0x42ae57(0x1f1)]()))return _0x288b5d();if(!_0x5800e8)throw new X(_0x42ae57(0x589),_0x42ae57(0x53a));}if(_0x411a7d[_0x42ae57(0x787)][_0x42ae57(0x243)](_0x42ae57(0x70c))&&!_0x5800e8)throw new X(_0x42ae57(0x589),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x411a7d[_0x42ae57(0x787)][_0x42ae57(0x243)](_0x42ae57(0x47c))&&!_0x5800e8)throw new X(_0x42ae57(0x589),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x411a7d[_0x42ae57(0x787)][_0x42ae57(0x243)]('/config')&&!_0x5800e8)throw new X(_0x42ae57(0x589),_0x42ae57(0x53a));try{let _0x214ad2=_0x411a7d[_0x42ae57(0x888)],_0x3d664b=await he[_0x42ae57(0x5ef)][_0x42ae57(0x2c5)](_0x214ad2[_0x42ae57(0x75c)]);if(_0x3d664b&&_0x3d664b[_0x42ae57(0x1e5)]===_0x5800e8)return _0x288b5d();}catch{}throw new ie();}var Ta={'jwt':$o,'apikey':Ro},di=require(a0_0x591e8d(0x3c0)),E=require('uuid'),C=(..._0x29dec2)=>{const _0x1a5286=a0_0x591e8d;let _0x4da493={};return _0x29dec2[_0x1a5286(0x5ce)](_0x346c8d=>_0x4da493[_0x346c8d]={'minLength':0x1,'description':_0x1a5286(0x41e)+_0x346c8d+'\x22\x20cannot\x20be\x20empty'}),{'if':{'propertyNames':{'enum':[..._0x29dec2]}},'then':{'properties':_0x4da493}};},v={'$id':(0x0,E['v4'])(),'type':'object','properties':{'instanceName':{'type':a0_0x591e8d(0x2f2)}},...C('instanceName')},fc={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'oldToken':{'type':a0_0x591e8d(0x2f2)}},'required':['oldToken'],...C(a0_0x591e8d(0x6f9))},wc={'properties':{'key':{'type':'object','properties':{'id':{'type':a0_0x591e8d(0x2f2)},'remoteJid':{'type':a0_0x591e8d(0x2f2)},'fromMe':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x591e8d(0x7f7)],...C('id','remoteJid')},'message':{'type':a0_0x591e8d(0x808)}}},Z={'properties':{'delay':{'type':a0_0x591e8d(0x802),'description':a0_0x591e8d(0x7f4)},'presence':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x3a1),a0_0x591e8d(0x56b),'composing',a0_0x591e8d(0x670),a0_0x591e8d(0x51b)]}}},H={'type':a0_0x591e8d(0x2f2),'description':'Invalid\x20format'},_a={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x591e8d(0x2f2)}},'required':[a0_0x591e8d(0x7a9)],...C(a0_0x591e8d(0x7a9))}},'required':[a0_0x591e8d(0x4fb),a0_0x591e8d(0x5f6)]},xa={'type':a0_0x591e8d(0x2f2),'pattern':'^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','description':a0_0x591e8d(0x465)},yc={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'number':{...xa},'options':{...Z},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x591e8d(0x2f2)}},'required':[a0_0x591e8d(0x7a9)],...C(a0_0x591e8d(0x7a9))}},'required':[a0_0x591e8d(0x4fb),a0_0x591e8d(0x5f6)]},bc={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'number':{...xa},'options':{...Z},'mediaMessage':{'type':a0_0x591e8d(0x808),'properties':{'mediatype':{'type':'string','enum':[a0_0x591e8d(0x861),'document',a0_0x591e8d(0x519),a0_0x591e8d(0x6f4)]},'media':{'type':'string'},'fileName':{'type':a0_0x591e8d(0x2f2)},'caption':{'type':a0_0x591e8d(0x2f2)}},'required':[a0_0x591e8d(0x6b0),a0_0x591e8d(0x26d)],...C(a0_0x591e8d(0x875),a0_0x591e8d(0x82c),'media')}},'required':[a0_0x591e8d(0x174),a0_0x591e8d(0x5f6)]},Da={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'number':{...H},'options':{...Z},'stickerMessage':{'type':a0_0x591e8d(0x808),'properties':{'image':{'type':a0_0x591e8d(0x2f2)}},'required':[a0_0x591e8d(0x861)],...C(a0_0x591e8d(0x861))}},'required':[a0_0x591e8d(0x61b),a0_0x591e8d(0x5f6)]},Pa={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'statusMessage':{'type':'object','properties':{'type':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x7a9),a0_0x591e8d(0x861),a0_0x591e8d(0x6f4),a0_0x591e8d(0x519)]},'content':{'type':'string'},'caption':{'type':'string'},'backgroundColor':{'type':a0_0x591e8d(0x2f2)},'font':{'type':a0_0x591e8d(0x802),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x591e8d(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x591e8d(0x557),'description':a0_0x591e8d(0x211)}},'allContacts':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]}},'required':[a0_0x591e8d(0x717),a0_0x591e8d(0x4c3)],...C('type',a0_0x591e8d(0x4c3))}},'required':[a0_0x591e8d(0x806)]},ka={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'number':{...H},'options':{...Z},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x591e8d(0x2f2),'enum':['image',a0_0x591e8d(0x373),'video',a0_0x591e8d(0x6f4)]},'media':{'type':a0_0x591e8d(0x2f2)},'fileName':{'type':a0_0x591e8d(0x2f2)},'caption':{'type':a0_0x591e8d(0x2f2)}},'required':[a0_0x591e8d(0x6b0),a0_0x591e8d(0x26d)],...C('fileName',a0_0x591e8d(0x82c),a0_0x591e8d(0x26d))}},'required':[a0_0x591e8d(0x174),'number']},La={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'number':{...H},'options':{...Z},'audioMessage':{'type':a0_0x591e8d(0x808),'properties':{'audio':{'type':a0_0x591e8d(0x2f2)}},'required':[a0_0x591e8d(0x6f4)],...C('audio')}},'required':[a0_0x591e8d(0x3ea),a0_0x591e8d(0x5f6)]},Fa={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'number':{...H},'pollMessage':{'type':a0_0x591e8d(0x808),'properties':{'name':{'type':a0_0x591e8d(0x2f2)},'selectableCount':{'type':a0_0x591e8d(0x5f6)},'values':{'type':a0_0x591e8d(0x3ac),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x591e8d(0x1f8),a0_0x591e8d(0x365),'values'],...C(a0_0x591e8d(0x1f8),a0_0x591e8d(0x365),a0_0x591e8d(0x78c))}},'required':[a0_0x591e8d(0x5f6),a0_0x591e8d(0x411)]},Ua={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'menuMessage':{'type':a0_0x591e8d(0x808),'properties':{'text':{'type':a0_0x591e8d(0x2f2)},'choices':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x591e8d(0x7a9),a0_0x591e8d(0x5c6)],...C(a0_0x591e8d(0x7a9),a0_0x591e8d(0x5c6))}},'required':['number',a0_0x591e8d(0x275)]},ja={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'buttonMessage':{'type':a0_0x591e8d(0x808),'properties':{'title':{'type':'string'},'description':{'type':a0_0x591e8d(0x2f2)},'footerText':{'type':a0_0x591e8d(0x2f2)},'buttons':{'type':a0_0x591e8d(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x591e8d(0x808),'properties':{'buttonText':{'type':'string'},'buttonId':{'type':'string'}},'required':[a0_0x591e8d(0x8a9),a0_0x591e8d(0x4df)],...C('buttonText','buttonId')}},'mediaMessage':{'type':a0_0x591e8d(0x808),'properties':{'media':{'type':a0_0x591e8d(0x2f2)},'fileName':{'type':a0_0x591e8d(0x2f2)},'mediatype':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x861),a0_0x591e8d(0x373),a0_0x591e8d(0x519)]}},'required':['media',a0_0x591e8d(0x6b0)],...C(a0_0x591e8d(0x26d),a0_0x591e8d(0x875))}},'required':[a0_0x591e8d(0x560),'buttons'],...C(a0_0x591e8d(0x560),a0_0x591e8d(0x5e5))}},'required':[a0_0x591e8d(0x5f6),'buttonMessage']},Ja={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'number':{...H},'options':{...Z},'locationMessage':{'type':'object','properties':{'latitude':{'type':a0_0x591e8d(0x5f6)},'longitude':{'type':'number'},'name':{'type':a0_0x591e8d(0x2f2)},'address':{'type':'string'}},'required':[a0_0x591e8d(0x822),'longitude'],...C(a0_0x591e8d(0x1f8),a0_0x591e8d(0x5be))}},'required':[a0_0x591e8d(0x5f6),a0_0x591e8d(0x502)]},qa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'listMessage':{'type':a0_0x591e8d(0x808),'properties':{'title':{'type':a0_0x591e8d(0x2f2)},'description':{'type':a0_0x591e8d(0x2f2)},'footerText':{'type':a0_0x591e8d(0x2f2)},'buttonText':{'type':'string'},'sections':{'type':a0_0x591e8d(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x591e8d(0x808),'properties':{'title':{'type':a0_0x591e8d(0x2f2)},'rows':{'type':a0_0x591e8d(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':'string'},'description':{'type':a0_0x591e8d(0x2f2)},'rowId':{'type':'string'}},'required':[a0_0x591e8d(0x560),a0_0x591e8d(0x79f)],...C('title',a0_0x591e8d(0x79f))}}},'required':['title',a0_0x591e8d(0x353)],...C('title')}}},'required':[a0_0x591e8d(0x560),a0_0x591e8d(0x5e5),a0_0x591e8d(0x8a9),'sections'],...C(a0_0x591e8d(0x560),a0_0x591e8d(0x5e5),'buttonText','footerText')}},'required':[a0_0x591e8d(0x5f6),a0_0x591e8d(0x757)]},Va={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...Z},'contactMessage':{'type':'array','items':{'type':a0_0x591e8d(0x808),'properties':{'fullName':{'type':a0_0x591e8d(0x2f2)},'phoneNumber':{'type':a0_0x591e8d(0x2f2),'minLength':0xa}},'required':['fullName','phoneNumber'],...C(a0_0x591e8d(0x388))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x591e8d(0x5f6),a0_0x591e8d(0x15f)]},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'reactionMessage':{'type':a0_0x591e8d(0x808),'properties':{'key':{'type':'object','properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x591e8d(0x2f2)},'fromMe':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]}},'required':['id','remoteJid','fromMe'],...C('id',a0_0x591e8d(0x166))},'reaction':{'type':a0_0x591e8d(0x2f2)}},'required':[a0_0x591e8d(0x27f),a0_0x591e8d(0x555)],...C(a0_0x591e8d(0x555))}},'required':[a0_0x591e8d(0x4ed)]},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'numbers':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x591e8d(0x2f2),'pattern':a0_0x591e8d(0x557),'description':a0_0x591e8d(0x648)}}}},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'readMessages':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x591e8d(0x2f2)},'fromMe':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x591e8d(0x2f2)}},'required':['id',a0_0x591e8d(0x7f7),a0_0x591e8d(0x166)],...C('id','remoteJid')}}},'required':[a0_0x591e8d(0x2b9)]},za={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'privacySettings':{'type':a0_0x591e8d(0x808),'properties':{'readreceipts':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x5ec),a0_0x591e8d(0x1bc)]},'profile':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x5ec),a0_0x591e8d(0x706),'contact_blacklist',a0_0x591e8d(0x1bc)]},'status':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x5ec),a0_0x591e8d(0x706),a0_0x591e8d(0x83e),a0_0x591e8d(0x1bc)]},'online':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x5ec),a0_0x591e8d(0x1a2)]},'last':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x5ec),a0_0x591e8d(0x706),'contact_blacklist',a0_0x591e8d(0x1bc)]},'groupadd':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x5ec),a0_0x591e8d(0x706),a0_0x591e8d(0x83e),a0_0x591e8d(0x1bc)]}},'required':[a0_0x591e8d(0x843),a0_0x591e8d(0x1e9),a0_0x591e8d(0x360),a0_0x591e8d(0x271),'last',a0_0x591e8d(0x6a1)],...C(a0_0x591e8d(0x843),'profile',a0_0x591e8d(0x360),a0_0x591e8d(0x271),a0_0x591e8d(0x7d8),'groupadd')}},'required':[a0_0x591e8d(0x449)]},Ha={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'lastMessage':{'type':a0_0x591e8d(0x808),'properties':{'key':{'type':a0_0x591e8d(0x808),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x591e8d(0x2f2)},'fromMe':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]}},'required':['id','fromMe',a0_0x591e8d(0x166)],...C('id',a0_0x591e8d(0x166))},'messageTimestamp':{'type':a0_0x591e8d(0x802),'minLength':0x1}},'required':['key'],...C(a0_0x591e8d(0x692))},'archive':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]}},'required':[a0_0x591e8d(0x72b),a0_0x591e8d(0x52b)]},Ka={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'id':{'type':'string'},'fromMe':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'},'participant':{'type':'string'}},'required':['id',a0_0x591e8d(0x7f7),'remoteJid'],...C('id','remoteJid',a0_0x591e8d(0x39a))},Qa={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'where':{'type':'object','properties':{'_id':{'type':'string','minLength':0x1},'pushName':{'type':a0_0x591e8d(0x2f2),'minLength':0x1},'id':{'type':'string','minLength':0x1}},...C(a0_0x591e8d(0x812),'id',a0_0x591e8d(0x870))}}},Ya={'$id':(0x0,E['v4'])(),'type':'object','properties':{'name':{'type':a0_0x591e8d(0x2f2)}},...C(a0_0x591e8d(0x1f8))},Xa={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'status':{'type':a0_0x591e8d(0x2f2)}},...C('status')},Ie={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'number':{'type':a0_0x591e8d(0x2f2)},'picture':{'type':'string'}}},Za={'type':'object','properties':{'wuid':{'type':a0_0x591e8d(0x2f2)},'name':{'type':a0_0x591e8d(0x2f2)},'picture':{'type':a0_0x591e8d(0x2f2)},'status':{'type':'string'},'isBusiness':{'type':a0_0x591e8d(0x87b)}}},ei={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'where':{'type':a0_0x591e8d(0x808),'properties':{'_id':{'type':a0_0x591e8d(0x2f2),'minLength':0x1},'key':{'type':a0_0x591e8d(0x808),'if':{'propertyNames':{'enum':[a0_0x591e8d(0x7f7),a0_0x591e8d(0x166),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x591e8d(0x2f2),'minLength':0x1,'description':a0_0x591e8d(0x573)},'id':{'type':'string','minLength':0x1,'description':a0_0x591e8d(0x573)},'fromMe':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x591e8d(0x808)}},...C(a0_0x591e8d(0x812))},'limit':{'type':a0_0x591e8d(0x802)}}},Sc={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'where':{'type':a0_0x591e8d(0x808),'properties':{'_id':{'type':'string'},'remoteJid':{'type':'string'},'id':{'type':a0_0x591e8d(0x2f2)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'participant':{'type':a0_0x591e8d(0x2f2)},'status':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x172),a0_0x591e8d(0x278),'SERVER_ACK',a0_0x591e8d(0x1a4),'READ','PLAYED']}},...C('_id',a0_0x591e8d(0x166),'id',a0_0x591e8d(0x360))},'limit':{'type':a0_0x591e8d(0x802)}}},ti={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'presence':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x3a1),a0_0x591e8d(0x56b),a0_0x591e8d(0x87f),a0_0x591e8d(0x670),a0_0x591e8d(0x51b)]}},'required':[a0_0x591e8d(0x382),a0_0x591e8d(0x5f6)]},si={'$id':(0x0,E['v4'])(),'type':'object','properties':{'subject':{'type':a0_0x591e8d(0x2f2)},'description':{'type':a0_0x591e8d(0x2f2)},'profilePicture':{'type':a0_0x591e8d(0x2f2)},'participants':{'type':a0_0x591e8d(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x591e8d(0x2f2),'minLength':0xa,'pattern':a0_0x591e8d(0x759),'description':a0_0x591e8d(0x7a3)}}},'required':[a0_0x591e8d(0x178),a0_0x591e8d(0x5fe)],...C(a0_0x591e8d(0x178),a0_0x591e8d(0x5e5),a0_0x591e8d(0x1de))},Te={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'groupJid':{'type':a0_0x591e8d(0x2f2),'pattern':a0_0x591e8d(0x310)}},'required':[a0_0x591e8d(0x703)],...C(a0_0x591e8d(0x703))},ai={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'groupJid':{'type':a0_0x591e8d(0x2f2)},'action':{'type':a0_0x591e8d(0x2f2),'enum':['add','remove',a0_0x591e8d(0x16e),a0_0x591e8d(0x651),'reject',a0_0x591e8d(0x2ca)]},'participants':{'type':a0_0x591e8d(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':'\x5cd+','description':a0_0x591e8d(0x7a3)}}},'required':[a0_0x591e8d(0x703),a0_0x591e8d(0x1ab),a0_0x591e8d(0x5fe)],...C('groupJid',a0_0x591e8d(0x1ab))},ii={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x591e8d(0x2f2)},'expiration':{'type':a0_0x591e8d(0x5f6),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x591e8d(0x703),a0_0x591e8d(0x2d1)],...C(a0_0x591e8d(0x703),'expiration')},oi={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'groupJid':{'type':a0_0x591e8d(0x2f2)},'image':{'type':'string'}},'required':['groupJid','image'],...C(a0_0x591e8d(0x703),a0_0x591e8d(0x861))},ri={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'groupJid':{'type':a0_0x591e8d(0x2f2)},'description':{'type':'string'}},'required':['groupJid',a0_0x591e8d(0x5e5)],...C('groupJid','description')},ni={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'groupJid':{'type':'string'},'name':{'type':a0_0x591e8d(0x2f2)}},'required':[a0_0x591e8d(0x703),a0_0x591e8d(0x1f8)],...C(a0_0x591e8d(0x703),a0_0x591e8d(0x1f8))},ci={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'groupJid':{'type':'string'},'setting':{'type':a0_0x591e8d(0x2f2),'enum':[a0_0x591e8d(0x297),a0_0x591e8d(0x35c),a0_0x591e8d(0x215),a0_0x591e8d(0x24f)]}},'required':[a0_0x591e8d(0x703),a0_0x591e8d(0x507)],...C(a0_0x591e8d(0x703),a0_0x591e8d(0x507))},li={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'restrict':{'type':a0_0x591e8d(0x87b)},'announce':{'type':a0_0x591e8d(0x87b)},'memberAddMode':{'type':'boolean'},'joinApprovalMode':{'type':a0_0x591e8d(0x87b)},'expiration':{'type':a0_0x591e8d(0x802),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x591e8d(0x2f2)},'description':{'type':a0_0x591e8d(0x2f2)},'image':{'type':a0_0x591e8d(0x2f2)}}},Ms={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'inviteCode':{'type':a0_0x591e8d(0x2f2)}},'required':['inviteCode'],...C(a0_0x591e8d(0x493))},ui={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'url':{'type':a0_0x591e8d(0x2f2)},'enabled':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]}},'required':['url',a0_0x591e8d(0x3ab)]},Mc={'$id':(0x0,E['v4'])(),'type':a0_0x591e8d(0x808),'properties':{'local_map':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x591e8d(0x87b),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x591e8d(0x893),a0_0x591e8d(0x4b3),'QRCODE_UPDATED',a0_0x591e8d(0x328),a0_0x591e8d(0x457),'MESSAGES_UPSERT','SEND_MESSAGE','CONTACTS_SET',a0_0x591e8d(0x7f9),a0_0x591e8d(0x5f8),a0_0x591e8d(0x3d1),a0_0x591e8d(0x7c3),a0_0x591e8d(0x280),a0_0x591e8d(0x4e9),a0_0x591e8d(0x737),'CONNECTION_UPDATE',a0_0x591e8d(0x355),a0_0x591e8d(0x4d5),'GROUP_PARTICIPANTS_UPDATE'],...C('local_map','STATUS_INSTANCE',a0_0x591e8d(0x80e),'MESSAGES_SET',a0_0x591e8d(0x457),a0_0x591e8d(0x440),'SEND_MESSAGE',a0_0x591e8d(0x3d7),a0_0x591e8d(0x7f9),a0_0x591e8d(0x5f8),a0_0x591e8d(0x3d1),a0_0x591e8d(0x7c3),a0_0x591e8d(0x280),a0_0x591e8d(0x4e9),a0_0x591e8d(0x737),a0_0x591e8d(0x528),'GROUPS_UPSERT',a0_0x591e8d(0x4d5),a0_0x591e8d(0x416))},st=class{},at=class extends T{[a0_0x591e8d(0x2dd)](_0x3a8cf4){return ta(_0x3a8cf4);}async[a0_0x591e8d(0x292)](_0x3e9b42){const _0x414ebe=a0_0x591e8d;if(_0x3e9b42[_0x414ebe(0x836)]!==0x0)try{return{'insertCount':(await this['getContactModelForOwner'](_0x3e9b42[0x0]['owner'])[_0x414ebe(0x5d2)]([..._0x3e9b42]))[_0x414ebe(0x836)]};}catch(_0x3b0eae){return _0x3b0eae;}}async[a0_0x591e8d(0x6f7)](_0x17c505,_0x48cfe4){const _0x1d5d05=a0_0x591e8d;try{return{'deletedCount':(await this['getContactModelForOwner'](_0x48cfe4)[_0x1d5d05(0x76e)]({..._0x17c505[_0x1d5d05(0x41b)]}))[_0x1d5d05(0x57a)]};}catch(_0x426ec7){return{'error':_0x426ec7?.[_0x1d5d05(0x44c)]()};}}async['update'](_0x461c30,_0x62c55a){const _0x4a144a=a0_0x591e8d;try{if(_0x461c30[_0x4a144a(0x836)]===0x0)return;let _0x10aed7=this[_0x4a144a(0x2dd)](_0x62c55a),_0x5bcc55=_0x461c30[_0x4a144a(0x276)](_0x4c9bf9=>({'updateOne':{'filter':{'_id':_0x4c9bf9[_0x4a144a(0x812)],'owner':_0x62c55a},'update':{..._0x4c9bf9}}})),{modifiedCount:_0x1c3936}=await _0x10aed7[_0x4a144a(0x533)](_0x5bcc55);return{'insertCount':_0x1c3936};}catch{return;}}async[a0_0x591e8d(0x2c5)](_0x53106e,_0x3bb950){const _0x48d132=a0_0x591e8d;try{let _0x29b0fa=this['getContactModelForOwner'](_0x3bb950),_0x26f258=R(_0x53106e[_0x48d132(0x41b)]);return await _0x29b0fa[_0x48d132(0x2c5)](_0x26f258)[_0x48d132(0x22c)](_0x53106e?.[_0x48d132(0x22c)]??0x0)['lean']();}catch{return[];}}async['findOne'](_0x452473,_0x1a998d){const _0x2c08cb=a0_0x591e8d;try{let _0x575091=this[_0x2c08cb(0x2dd)](_0x1a998d),_0x412439=R(_0x452473[_0x2c08cb(0x41b)]);return await _0x575091['findOne'](_0x412439)[_0x2c08cb(0x7d3)]();}catch{return null;}}async['deleteAll'](_0x414314){const _0x1c83ad=a0_0x591e8d;try{return await this[_0x1c83ad(0x2dd)](_0x414314)[_0x1c83ad(0x26b)][_0x1c83ad(0x3ad)](),{'success':!0x0};}catch(_0xfc4b5f){return console[_0x1c83ad(0x62b)](_0xfc4b5f),{'success':!0x1,'error':_0xfc4b5f};}}},it=require('jsonschema'),Tc=require(a0_0x591e8d(0x8a2)),Cs=new N('Validate'),V=class{[a0_0x591e8d(0x6e4)](_0x52bffa,_0x120ba=!0x0){let _0x22fc40='/'+_0x52bffa;return _0x120ba&&(_0x22fc40+='/:instanceName'),_0x22fc40;}async[a0_0x591e8d(0x3a0)](_0x439525){const _0xe6a6da=a0_0x591e8d;let {request:_0x27b669,schema:_0x4c6721,ClassRef:_0x5aa1d7,execute:_0x338f9e}=_0x439525,_0x13d756=new _0x5aa1d7(),_0x563855=_0x27b669['body'],_0x32d7fb=_0x27b669['params'];_0x27b669?.['query']&&Object[_0xe6a6da(0x34b)](_0x27b669['query'])['length']>0x0&&Object[_0xe6a6da(0x5ba)](_0x32d7fb,_0x27b669['query']),_0x27b669['originalUrl'][_0xe6a6da(0x243)](_0xe6a6da(0x66e))&&Object[_0xe6a6da(0x5ba)](_0x32d7fb,_0x563855),Object[_0xe6a6da(0x5ba)](_0x13d756,_0x563855);let _0x1c96e2=_0x4c6721?(0x0,it[_0xe6a6da(0x20b)])(_0x13d756,_0x4c6721):{'valid':!0x0,'errors':[]};if(!_0x1c96e2[_0xe6a6da(0x4cd)]){let _0x5d9ee6=_0x1c96e2[_0xe6a6da(0x791)][_0xe6a6da(0x276)](({property:_0x479d37,stack:_0xc3bdf3,schema:_0x5cc105})=>{const _0xfda4fe=_0xe6a6da;let _0x289756;return _0x5cc105[_0xfda4fe(0x5e5)]?_0x289756=_0x5cc105[_0xfda4fe(0x5e5)]:_0x289756=_0xc3bdf3['replace'](_0xfda4fe(0x16c),''),{'property':_0x479d37[_0xfda4fe(0x4d0)](_0xfda4fe(0x16c),''),'message':_0x289756};});throw Cs[_0xe6a6da(0x62b)]([..._0x5d9ee6]),new m(..._0x5d9ee6);}return await _0x338f9e(_0x32d7fb,_0x13d756);}async['groupValidate'](_0x21be79){const _0x3e0910=a0_0x591e8d;let {request:_0x5b2292,ClassRef:_0x3ecc97,schema:_0x277058,execute:_0x4851d9}=_0x21be79,_0x519f4c=_0x5b2292[_0x3e0910(0x18a)];if(!_0x519f4c?.[_0x3e0910(0x703)])throw new m('The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query',_0x3e0910(0x4a8));let _0x3a7d49=_0x5b2292['params'],_0x4bbcfe=_0x5b2292[_0x3e0910(0x5cb)],_0x12d0a1=new _0x3ecc97();Object[_0x3e0910(0x5ba)](_0x4bbcfe,_0x519f4c),Object[_0x3e0910(0x5ba)](_0x12d0a1,_0x4bbcfe);let _0x458eb2=(0x0,it[_0x3e0910(0x20b)])(_0x12d0a1,_0x277058);if(!_0x458eb2[_0x3e0910(0x4cd)]){let _0x5bb066=_0x458eb2[_0x3e0910(0x791)][_0x3e0910(0x276)](({property:_0x5b1a40,stack:_0x40b51a,schema:_0x565204})=>{const _0x3dfcf3=_0x3e0910;let _0x402302;return _0x565204['description']?_0x402302=_0x565204[_0x3dfcf3(0x5e5)]:_0x402302=_0x40b51a[_0x3dfcf3(0x4d0)](_0x3dfcf3(0x16c),''),{'property':_0x5b1a40[_0x3dfcf3(0x4d0)]('instance.',''),'message':_0x402302};});throw Cs[_0x3e0910(0x62b)]([..._0x5bb066]),new m(..._0x5bb066);}return await _0x4851d9(_0x3a7d49,_0x12d0a1);}async[a0_0x591e8d(0x17c)](_0x60a7c0){const _0xa4d513=a0_0x591e8d;let {request:_0x5546a8,ClassRef:_0x54de39,schema:_0x3d707c,execute:_0x578836}=_0x60a7c0,_0x3c8f6a=_0x5546a8[_0xa4d513(0x5cb)];if(!_0x3c8f6a?.[_0xa4d513(0x493)])throw new m('The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body',_0xa4d513(0x6b3));let _0x2e99e5=_0x5546a8['params'],_0x1defa6=_0x5546a8[_0xa4d513(0x5cb)],_0x33c19b=new _0x54de39();Object[_0xa4d513(0x5ba)](_0x1defa6,_0x3c8f6a),Object[_0xa4d513(0x5ba)](_0x33c19b,_0x1defa6);let _0x3eb124=(0x0,it[_0xa4d513(0x20b)])(_0x33c19b,_0x3d707c);if(!_0x3eb124[_0xa4d513(0x4cd)]){let _0xe641f3=_0x3eb124['errors']['map'](({property:_0x126e5c,stack:_0x3ad2fb,schema:_0x5cfd4e})=>{const _0x1f2ec1=_0xa4d513;let _0x9464e4;return _0x5cfd4e['description']?_0x9464e4=_0x5cfd4e[_0x1f2ec1(0x5e5)]:_0x9464e4=_0x3ad2fb[_0x1f2ec1(0x4d0)](_0x1f2ec1(0x16c),''),{'property':_0x126e5c['replace'](_0x1f2ec1(0x16c),''),'message':_0x9464e4};});throw Cs[_0xa4d513(0x62b)]([..._0xe641f3]),new m(..._0xe641f3);}return await _0x578836(_0x2e99e5,_0x33c19b);}},M=class{},Bc=new N(a0_0x591e8d(0x6d0)),ot=class extends V{constructor(..._0x8b5b84){const _0x2c761a=a0_0x591e8d;super(),this['router']=(0x0,di['Router'])(),this[_0x2c761a(0x84a)]['post'](this['routerPath']('updatePresence'),..._0x8b5b84,async(_0x203380,_0x3c51cc)=>{const _0x2e9059=_0x2c761a;let _0x5248fc=await this[_0x2e9059(0x3a0)]({'request':_0x203380,'schema':ti,'ClassRef':ze,'execute':(_0x48ba53,_0x4d6cc2)=>x[_0x2e9059(0x390)](_0x48ba53,_0x4d6cc2)});return _0x3c51cc[_0x2e9059(0x360)](0xc9)[_0x2e9059(0x853)](_0x5248fc);})['post'](this[_0x2c761a(0x6e4)](_0x2c761a(0x21e)),..._0x8b5b84,async(_0x2c6899,_0x40c656)=>{const _0x282d12=_0x2c761a;let _0x587809=await this[_0x282d12(0x3a0)]({'request':_0x2c6899,'schema':Ba,'ClassRef':He,'execute':(_0x349bb4,_0x518818)=>x[_0x282d12(0x1b5)](_0x349bb4,_0x518818)});return _0x40c656[_0x282d12(0x360)](0xc9)[_0x282d12(0x853)](_0x587809);})['post'](this[_0x2c761a(0x6e4)](_0x2c761a(0x595)),..._0x8b5b84,async(_0x5b8b76,_0x44a6b0)=>{const _0x3f30b5=_0x2c761a;let _0x174ed5=await this[_0x3f30b5(0x3a0)]({'request':_0x5b8b76,'schema':v,'ClassRef':M,'execute':(_0x216a54,_0x4ec25c)=>x[_0x3f30b5(0x595)](_0x216a54,_0x4ec25c)});return _0x44a6b0[_0x3f30b5(0x360)](0xc9)['json'](_0x174ed5);})[_0x2c761a(0x80c)](this['routerPath'](_0x2c761a(0x4e2)),..._0x8b5b84,async(_0x5a5f30,_0x322077)=>{const _0x1ee3a1=_0x2c761a;let _0x70ccbe=await this[_0x1ee3a1(0x3a0)]({'request':_0x5a5f30,'schema':Wa,'ClassRef':Ye,'execute':(_0xf8620,_0x2dd3cd)=>x['readMessage'](_0xf8620,_0x2dd3cd)});return _0x322077[_0x1ee3a1(0x360)](0xc9)[_0x1ee3a1(0x853)](_0x70ccbe);})[_0x2c761a(0x80c)](this['routerPath'](_0x2c761a(0x332)),..._0x8b5b84,async(_0x3666d3,_0x10e3ab)=>{const _0x2b2317=_0x2c761a;let _0x522032=await this[_0x2b2317(0x3a0)]({'request':_0x3666d3,'schema':Ha,'ClassRef':Xe,'execute':(_0x13bc32,_0x5a86d1)=>x['archiveChat'](_0x13bc32,_0x5a86d1)});return _0x10e3ab['status'](0xc9)[_0x2b2317(0x853)](_0x522032);})[_0x2c761a(0x6f7)](this[_0x2c761a(0x6e4)](_0x2c761a(0x6a3)),..._0x8b5b84,async(_0x5ce1ba,_0x42df7d)=>{const _0x148164=_0x2c761a;let _0x223fa3=await this[_0x148164(0x3a0)]({'request':_0x5ce1ba,'schema':Ka,'ClassRef':et,'execute':(_0x189319,_0x4bd3f7)=>x[_0x148164(0x545)](_0x189319,_0x4bd3f7)});return _0x42df7d[_0x148164(0x360)](0xc9)[_0x148164(0x853)](_0x223fa3);})[_0x2c761a(0x6ce)](this[_0x2c761a(0x6e4)]('fetchProfilePictureUrl'),..._0x8b5b84,async(_0x590dda,_0x2f6b87)=>{const _0x409632=_0x2c761a;let _0x36daba=await this['dataValidate']({'request':_0x590dda,'schema':Ie,'ClassRef':Re,'execute':(_0x193cd5,_0x3fbb89)=>x[_0x409632(0x210)](_0x193cd5,_0x3fbb89)});return _0x2f6b87[_0x409632(0x360)](0xc8)['json'](_0x36daba);})[_0x2c761a(0x6ce)](this[_0x2c761a(0x6e4)](_0x2c761a(0x5da)),..._0x8b5b84,async(_0x37cb76,_0x5b0ee9)=>{const _0xa28b56=_0x2c761a;let _0x2df81d=await this[_0xa28b56(0x3a0)]({'request':_0x37cb76,'schema':Za,'ClassRef':Re,'execute':(_0xe0141a,_0x1832a6)=>x[_0xa28b56(0x5da)](_0xe0141a,_0x1832a6)});return _0x5b0ee9[_0xa28b56(0x360)](0xc8)[_0xa28b56(0x853)](_0x2df81d);})[_0x2c761a(0x6ce)](this[_0x2c761a(0x6e4)](_0x2c761a(0x218)),..._0x8b5b84,async(_0x275822,_0x13b5d8)=>{const _0x4f8f82=_0x2c761a;let _0x690bc0=await this['dataValidate']({'request':_0x275822,'schema':Qa,'ClassRef':st,'execute':(_0x30bbfc,_0x27e9ee)=>x[_0x4f8f82(0x538)](_0x30bbfc,_0x27e9ee)});return _0x13b5d8[_0x4f8f82(0x360)](0xc8)['json'](_0x690bc0);})[_0x2c761a(0x6ce)](this[_0x2c761a(0x6e4)]('getBase64FromMediaMessage'),..._0x8b5b84,async(_0x14bba8,_0x85c8b2)=>{const _0x4309d2=_0x2c761a;let _0x4cc483=await this[_0x4309d2(0x3a0)]({'request':_0x14bba8,'schema':null,'ClassRef':Object,'execute':(_0x2d13d9,_0x299ea7)=>x[_0x4309d2(0x4af)](_0x2d13d9,_0x299ea7)});return _0x85c8b2['status'](0xc9)[_0x4309d2(0x853)](_0x4cc483);})['post'](this[_0x2c761a(0x6e4)](_0x2c761a(0x320)),..._0x8b5b84,async(_0xe623e5,_0x29c137)=>{const _0x1004c4=_0x2c761a;let _0x53fdc9=await this[_0x1004c4(0x3a0)]({'request':_0xe623e5,'schema':ei,'ClassRef':Be,'execute':(_0x1d1716,_0x37b2e5)=>x[_0x1004c4(0x6c5)](_0x1d1716,_0x37b2e5)});return _0x29c137[_0x1004c4(0x360)](0xc8)[_0x1004c4(0x853)](_0x53fdc9);})[_0x2c761a(0x2f4)](this[_0x2c761a(0x6e4)](_0x2c761a(0x323)),..._0x8b5b84,async(_0x534810,_0x1a7006)=>{const _0x83ff7a=_0x2c761a;let _0x85f480=await this[_0x83ff7a(0x3a0)]({'request':_0x534810,'schema':null,'ClassRef':M,'execute':_0x412151=>x['fetchChats'](_0x412151)});return _0x1a7006[_0x83ff7a(0x360)](0xc8)['json'](_0x85f480);})[_0x2c761a(0x2f4)](this[_0x2c761a(0x6e4)](_0x2c761a(0x49d)),..._0x8b5b84,async(_0x648ed7,_0x517a05)=>{const _0x26cbac=_0x2c761a;let _0x42f5e8=await this[_0x26cbac(0x3a0)]({'request':_0x648ed7,'schema':null,'ClassRef':M,'execute':_0xb26b03=>x[_0x26cbac(0x391)](_0xb26b03)});return _0x517a05[_0x26cbac(0x360)](0xc8)[_0x26cbac(0x853)](_0x42f5e8);})[_0x2c761a(0x80c)](this['routerPath'](_0x2c761a(0x889)),..._0x8b5b84,async(_0x4c8cd1,_0x10a923)=>{const _0x4f94eb=_0x2c761a;let _0x379799=await this[_0x4f94eb(0x3a0)]({'request':_0x4c8cd1,'schema':null,'ClassRef':Array,'execute':(_0x52b88e,_0x45cefb)=>x['importChats'](_0x52b88e,_0x45cefb)});return _0x10a923['status'](0xc8)[_0x4f94eb(0x853)](_0x379799);})[_0x2c761a(0x2f4)](this[_0x2c761a(0x6e4)]('fetchPrivacySettings'),..._0x8b5b84,async(_0x5a47a5,_0x1eb883)=>{const _0x1401cc=_0x2c761a;let _0x5e1efe=await this['dataValidate']({'request':_0x5a47a5,'schema':null,'ClassRef':M,'execute':_0x5c03d8=>x['fetchPrivacySettings'](_0x5c03d8)});return _0x1eb883[_0x1401cc(0x360)](0xc8)[_0x1401cc(0x853)](_0x5e1efe);})[_0x2c761a(0x80c)](this['routerPath'](_0x2c761a(0x252)),..._0x8b5b84,async(_0x172d1b,_0x35f487)=>{const _0x4edca0=_0x2c761a;let _0x3946ef=await this[_0x4edca0(0x3a0)]({'request':_0x172d1b,'schema':za,'ClassRef':Ze,'execute':(_0x442079,_0x36ccde)=>x['updatePrivacySettings'](_0x442079,_0x36ccde)});return _0x35f487[_0x4edca0(0x360)](0xc9)['json'](_0x3946ef);})[_0x2c761a(0x6ce)](this['routerPath'](_0x2c761a(0x4dc)),..._0x8b5b84,async(_0x17e1ee,_0xcd21f4)=>{const _0x452f72=_0x2c761a;let _0x33f96d=await this[_0x452f72(0x3a0)]({'request':_0x17e1ee,'schema':Ie,'ClassRef':be,'execute':(_0x43c0e7,_0x1c94e8)=>x[_0x452f72(0x4dc)](_0x43c0e7,_0x1c94e8)});return _0xcd21f4[_0x452f72(0x360)](0xc8)[_0x452f72(0x853)](_0x33f96d);})[_0x2c761a(0x6ce)](this[_0x2c761a(0x6e4)](_0x2c761a(0x2a0)),..._0x8b5b84,async(_0x38001b,_0x25e00d)=>{const _0x2b40f6=_0x2c761a;let _0x2cfcef=await this['dataValidate']({'request':_0x38001b,'schema':Ya,'ClassRef':Ke,'execute':(_0x34612d,_0x433f8a)=>x['updateProfileName'](_0x34612d,_0x433f8a)});return _0x25e00d[_0x2b40f6(0x360)](0xc8)['json'](_0x2cfcef);})['post'](this[_0x2c761a(0x6e4)](_0x2c761a(0x624)),..._0x8b5b84,async(_0x462f03,_0x1d3a6f)=>{const _0x400907=_0x2c761a;let _0xa0515b=await this['dataValidate']({'request':_0x462f03,'schema':Xa,'ClassRef':Qe,'execute':(_0x305a82,_0x16ab61)=>x[_0x400907(0x624)](_0x305a82,_0x16ab61)});return _0x1d3a6f[_0x400907(0x360)](0xc8)['json'](_0xa0515b);})['put'](this[_0x2c761a(0x6e4)](_0x2c761a(0x6fd)),..._0x8b5b84,async(_0x1b9ffe,_0x17aa1a)=>{const _0x20afce=_0x2c761a;let _0x3b0c67=await this[_0x20afce(0x3a0)]({'request':_0x1b9ffe,'schema':Ie,'ClassRef':be,'execute':(_0xfdebf2,_0x215af5)=>x[_0x20afce(0x6fd)](_0xfdebf2,_0x215af5)});return _0x17aa1a[_0x20afce(0x360)](0xc8)[_0x20afce(0x853)](_0x3b0c67);})['delete'](this[_0x2c761a(0x6e4)](_0x2c761a(0x15d)),..._0x8b5b84,async(_0x5a22e1,_0x30542b)=>{const _0x4b73f4=_0x2c761a;let _0x5b6b24=await this[_0x4b73f4(0x3a0)]({'request':_0x5a22e1,'schema':Ie,'ClassRef':be,'execute':(_0x2937be,_0x28dcc3)=>x[_0x4b73f4(0x15d)](_0x2937be,_0x28dcc3)});return _0x30542b[_0x4b73f4(0x360)](0xc8)[_0x4b73f4(0x853)](_0x5b6b24);});}},pi=require('express'),rt=class{},nt=class{},ct=class{},lt=class{},ut=class{},dt=class{},ee=class{},Oe=class{},pt=class extends ee{},ht=class extends ee{},gt=class extends V{constructor(..._0xb6b392){const _0x4fea83=a0_0x591e8d;super(),this['router']=(0x0,pi[_0x4fea83(0x2b4)])(),this[_0x4fea83(0x84a)][_0x4fea83(0x6ce)](this[_0x4fea83(0x6e4)](_0x4fea83(0x80f)),..._0xb6b392,async(_0x408230,_0x28c265)=>{const _0x888d2f=_0x4fea83;let _0x553fae=await this[_0x888d2f(0x3a0)]({'request':_0x408230,'schema':si,'ClassRef':rt,'execute':(_0x57b088,_0x4dcd9f)=>j['createGroup'](_0x57b088,_0x4dcd9f)});_0x28c265[_0x888d2f(0x360)](0xc9)[_0x888d2f(0x853)](_0x553fae);})[_0x4fea83(0x80c)](this[_0x4fea83(0x6e4)](_0x4fea83(0x4b5)),..._0xb6b392,async(_0x2ff2e1,_0x52e8ab)=>{const _0x2962bb=_0x4fea83;let _0x3f9da0=await this[_0x2962bb(0x29e)]({'request':_0x2ff2e1,'schema':oi,'ClassRef':nt,'execute':(_0x5da8b9,_0x1e49d4)=>j[_0x2962bb(0x4b5)](_0x5da8b9,_0x1e49d4)});_0x52e8ab['status'](0xc9)[_0x2962bb(0x853)](_0x3f9da0);})[_0x4fea83(0x80c)](this[_0x4fea83(0x6e4)](_0x4fea83(0x78a)),..._0xb6b392,async(_0x381f60,_0xae829a)=>{let _0xc51bfd=await this['groupValidate']({'request':_0x381f60,'schema':ri,'ClassRef':ct,'execute':(_0x2f8a8d,_0x4f6062)=>j['groupDesc'](_0x2f8a8d,_0x4f6062)});_0xae829a['status'](0xc9)['json'](_0xc51bfd);})[_0x4fea83(0x80c)](this[_0x4fea83(0x6e4)](_0x4fea83(0x1f9)),..._0xb6b392,async(_0x26a744,_0x7324a5)=>{const _0x973c2b=_0x4fea83;let _0x45515b=await this[_0x973c2b(0x29e)]({'request':_0x26a744,'schema':ni,'ClassRef':lt,'execute':(_0x596b62,_0x2bf72c)=>j['groupName'](_0x596b62,_0x2bf72c)});_0x7324a5[_0x973c2b(0x360)](0xc9)[_0x973c2b(0x853)](_0x45515b);})[_0x4fea83(0x80c)](this['routerPath']('groupBetterSetting'),..._0xb6b392,async(_0x239cd8,_0x24f273)=>{const _0x20d9c0=_0x4fea83;let _0x31579f=await this['groupValidate']({'request':_0x239cd8,'schema':li,'ClassRef':dt,'execute':(_0x15e46e,_0x3092c1)=>j[_0x20d9c0(0x4ec)](_0x15e46e,_0x3092c1)});_0x24f273[_0x20d9c0(0x360)](0xc9)[_0x20d9c0(0x853)](_0x31579f);})[_0x4fea83(0x80c)](this[_0x4fea83(0x6e4)](_0x4fea83(0x554)),..._0xb6b392,async(_0x223801,_0x3c57cc)=>{const _0x215664=_0x4fea83;let _0x43ca13=await this['groupValidate']({'request':_0x223801,'schema':ci,'ClassRef':ut,'execute':(_0x2e111c,_0x286879)=>j[_0x215664(0x554)](_0x2e111c,_0x286879)});_0x3c57cc[_0x215664(0x360)](0xc9)['json'](_0x43ca13);})[_0x4fea83(0x80c)](this[_0x4fea83(0x6e4)](_0x4fea83(0x3e3)),..._0xb6b392,async(_0x297508,_0x216c41)=>{const _0x16f3a0=_0x4fea83;let _0x57db8e=await this[_0x16f3a0(0x29e)]({'request':_0x297508,'schema':ii,'ClassRef':ht,'execute':(_0xb195a9,_0x41d546)=>j['toggleEphemeral'](_0xb195a9,_0x41d546)});_0x216c41['status'](0xc9)['json'](_0x57db8e);})[_0x4fea83(0x2f4)](this[_0x4fea83(0x6e4)](_0x4fea83(0x30a)),..._0xb6b392,async(_0x42da7e,_0x6fc69)=>{const _0x170993=_0x4fea83;let _0x4daedf=await this['groupValidate']({'request':_0x42da7e,'schema':Te,'ClassRef':ee,'execute':(_0x5cd968,_0x1f6701)=>j[_0x170993(0x871)](_0x5cd968,_0x1f6701)});_0x6fc69[_0x170993(0x360)](0xc8)['json'](_0x4daedf);})[_0x4fea83(0x2f4)](this[_0x4fea83(0x6e4)](_0x4fea83(0x3eb)),..._0xb6b392,async(_0x42d499,_0x3073aa)=>{const _0x4d36b1=_0x4fea83;let _0x59ade7=await this[_0x4d36b1(0x3a0)]({'request':_0x42d499,'schema':v,'ClassRef':M,'execute':_0x332d8f=>j['findGroups'](_0x332d8f)});_0x3073aa['status'](0xc8)[_0x4d36b1(0x853)](_0x59ade7);})[_0x4fea83(0x2f4)](this[_0x4fea83(0x6e4)](_0x4fea83(0x5fe)),..._0xb6b392,async(_0x2ffa0d,_0x1ee88d)=>{const _0x2df50c=_0x4fea83;let _0x4e724c=await this[_0x2df50c(0x29e)]({'request':_0x2ffa0d,'schema':Te,'ClassRef':ee,'execute':(_0x197376,_0x4b87c8)=>j[_0x2df50c(0x401)](_0x197376,_0x4b87c8)});_0x1ee88d[_0x2df50c(0x360)](0xc8)['json'](_0x4e724c);})['get'](this[_0x4fea83(0x6e4)](_0x4fea83(0x493)),..._0xb6b392,async(_0xab5180,_0x2d2294)=>{const _0x12a8f6=_0x4fea83;let _0x244ab9=await this[_0x12a8f6(0x29e)]({'request':_0xab5180,'schema':Te,'ClassRef':ee,'execute':(_0x5efee3,_0x38266e)=>j[_0x12a8f6(0x493)](_0x5efee3,_0x38266e)});_0x2d2294[_0x12a8f6(0x360)](0xc8)[_0x12a8f6(0x853)](_0x244ab9);})[_0x4fea83(0x6ce)](this[_0x4fea83(0x6e4)]('inviteCodeDetails'),..._0xb6b392,async(_0x29555b,_0x21793c)=>{const _0x1a4782=_0x4fea83;let _0x2e97bd=await this[_0x1a4782(0x17c)]({'request':_0x29555b,'schema':Ms,'ClassRef':Oe,'execute':(_0x3e89c3,_0x1e3e30)=>j[_0x1a4782(0x569)](_0x3e89c3,_0x1e3e30)});_0x21793c[_0x1a4782(0x360)](0xc9)['json'](_0x2e97bd);})[_0x4fea83(0x80c)](this[_0x4fea83(0x6e4)](_0x4fea83(0x6a7)),..._0xb6b392,async(_0x5e8ded,_0x28e442)=>{const _0x5bbbc4=_0x4fea83;let _0x4b1fa=await this['joinGroupValidate']({'request':_0x5e8ded,'schema':Ms,'ClassRef':Oe,'execute':(_0x5b6c51,_0x15ef52)=>j['joinGroup'](_0x5b6c51,_0x15ef52)});_0x28e442[_0x5bbbc4(0x360)](0xc9)[_0x5bbbc4(0x853)](_0x4b1fa);})[_0x4fea83(0x80c)](this[_0x4fea83(0x6e4)](_0x4fea83(0x2de)),..._0xb6b392,async(_0x371e34,_0x53035f)=>{const _0x4c18bd=_0x4fea83;let _0x270893=await this['groupValidate']({'request':_0x371e34,'schema':Te,'ClassRef':ee,'execute':(_0x3ebb6c,_0x5ccdd1)=>j['revokeInviteCode'](_0x3ebb6c,_0x5ccdd1)});_0x53035f['status'](0xc9)[_0x4c18bd(0x853)](_0x270893);})[_0x4fea83(0x80c)](this[_0x4fea83(0x6e4)]('updateParticipant'),..._0xb6b392,async(_0x3d8ce0,_0xdf902c)=>{const _0x435409=_0x4fea83;let _0x52a8ce=await this[_0x435409(0x29e)]({'request':_0x3d8ce0,'schema':ai,'ClassRef':pt,'execute':(_0x95a3be,_0x51f222)=>j[_0x435409(0x7c5)](_0x95a3be,_0x51f222)});_0xdf902c['status'](0xc9)['json'](_0x52a8ce);})[_0x4fea83(0x6f7)](this[_0x4fea83(0x6e4)](_0x4fea83(0x83f)),..._0xb6b392,async(_0x1322c4,_0x46b2b7)=>{const _0xa7f7f8=_0x4fea83;let _0x157abc=await this[_0xa7f7f8(0x29e)]({'request':_0x1322c4,'schema':{},'ClassRef':ee,'execute':(_0x2ad34e,_0x23cb06)=>j[_0xa7f7f8(0x83f)](_0x2ad34e,_0x23cb06)});_0x46b2b7[_0xa7f7f8(0x360)](0xc8)[_0xa7f7f8(0x853)](_0x157abc);});}},hi=require(a0_0x591e8d(0x3c0)),mt=class extends V{constructor(_0x5161c7,..._0x367fd8){const _0x544d39=a0_0x591e8d;super(),this[_0x544d39(0x285)]=_0x5161c7,this[_0x544d39(0x84a)]=(0x0,hi[_0x544d39(0x2b4)])();let _0x4b93ae=_0x5161c7[_0x544d39(0x2f4)]('AUTHENTICATION');this[_0x544d39(0x84a)][_0x544d39(0x6ce)]('/create',..._0x367fd8,async(_0x472f6e,_0x5d5739)=>{const _0xab6a05=_0x544d39;let {instanceName:_0x21181e,apikey:_0x3773e1,number:_0x5e75a7}=_0x472f6e[_0xab6a05(0x5cb)],_0xe29d53=await le[_0xab6a05(0x562)]({'instanceName':_0x21181e,'apikey':_0x3773e1,'number':_0x5e75a7});return _0x5d5739[_0xab6a05(0x360)](0xc9)['json'](_0xe29d53);})[_0x544d39(0x80c)](this['routerPath'](_0x544d39(0x5b4)),..._0x367fd8,async(_0x538875,_0x48bbe3)=>{const _0x44742f=_0x544d39;let _0x55f394=await this[_0x44742f(0x3a0)]({'request':_0x538875,'schema':v,'ClassRef':M,'execute':_0x4a408a=>le[_0x44742f(0x336)](_0x4a408a)});return _0x48bbe3['status'](0xc8)[_0x44742f(0x853)](_0x55f394);})[_0x544d39(0x2f4)](this[_0x544d39(0x6e4)]('connect'),..._0x367fd8,async(_0x4fb6ee,_0x1ab92d)=>{const _0x38a4b4=_0x544d39;let _0x488a12=await this[_0x38a4b4(0x3a0)]({'request':_0x4fb6ee,'schema':v,'ClassRef':M,'execute':_0x1b3fd9=>le['connectToWhatsappController'](_0x1b3fd9)});return _0x1ab92d[_0x38a4b4(0x360)](0xc8)[_0x38a4b4(0x853)](_0x488a12);})['get'](this['routerPath'](_0x544d39(0x73f)),..._0x367fd8,async(_0x5c55b0,_0x18eaae)=>{const _0x409524=_0x544d39;let _0x1208f3=await this[_0x409524(0x3a0)]({'request':_0x5c55b0,'schema':v,'ClassRef':M,'execute':_0x281b75=>le[_0x409524(0x73f)](_0x281b75)});return _0x18eaae[_0x409524(0x360)](0xc8)[_0x409524(0x853)](_0x1208f3);})[_0x544d39(0x2f4)](this[_0x544d39(0x6e4)](_0x544d39(0x452),!0x1),..._0x367fd8,async(_0x45000d,_0x102475)=>{const _0x58db5f=_0x544d39;let _0x3342ca=await this[_0x58db5f(0x3a0)]({'request':_0x45000d,'schema':null,'ClassRef':M,'execute':_0x4ca80f=>le['fetchInstances'](_0x4ca80f)});return _0x102475['status'](0xc8)['json'](_0x3342ca);})['delete'](this['routerPath'](_0x544d39(0x304)),..._0x367fd8,async(_0x53ebd8,_0x4e8076)=>{const _0x4f1b98=_0x544d39;let _0x17367e=await this[_0x4f1b98(0x3a0)]({'request':_0x53ebd8,'schema':v,'ClassRef':M,'execute':_0x348a7d=>le[_0x4f1b98(0x304)](_0x348a7d)});return _0x4e8076[_0x4f1b98(0x360)](0xc8)[_0x4f1b98(0x853)](_0x17367e);})[_0x544d39(0x6f7)](this[_0x544d39(0x6e4)](_0x544d39(0x6f7)),..._0x367fd8,async(_0x1da692,_0x35df47)=>{let _0x31ba2a=await this['dataValidate']({'request':_0x1da692,'schema':v,'ClassRef':M,'execute':_0x3d590b=>le['deleteInstance'](_0x3d590b)});return _0x35df47['status'](0xc8)['json'](_0x31ba2a);});}},gi=require(a0_0x591e8d(0x3c0)),Es=class{},z=class extends Es{},ft=class extends z{},wt=class extends z{},yt=class extends z{},bt=class extends z{},_e=class extends z{},St=class extends z{},Mt=class extends z{},Ct=class extends z{},Et=class extends z{},vt=class extends z{},Nt=class{},$t=class extends V{constructor(..._0xf501d2){const _0x746e6d=a0_0x591e8d;super(),this['router']=(0x0,gi[_0x746e6d(0x2b4)])(),this['router'][_0x746e6d(0x6ce)](this['routerPath']('sendText'),..._0xf501d2,async(_0x58493d,_0x13140e)=>{const _0x3f3baf=_0x746e6d;let _0x3b5f53=await this[_0x3f3baf(0x3a0)]({'request':_0x58493d,'schema':_a,'ClassRef':ft,'execute':(_0x1dee2a,_0x436e36)=>B['sendText'](_0x1dee2a,_0x436e36)});return _0x13140e[_0x3f3baf(0x360)](0xc9)[_0x3f3baf(0x853)](_0x3b5f53);})[_0x746e6d(0x6ce)](this[_0x746e6d(0x6e4)](_0x746e6d(0x81c)),..._0xf501d2,async(_0x5eaeab,_0x4faa70)=>{const _0x68ecb9=_0x746e6d;let _0x33b301=await this['dataValidate']({'request':_0x5eaeab,'schema':ka,'ClassRef':_e,'execute':(_0x529469,_0x1ec5c5)=>B[_0x68ecb9(0x81c)](_0x529469,_0x1ec5c5)});return _0x4faa70[_0x68ecb9(0x360)](0xc9)['json'](_0x33b301);})['post'](this[_0x746e6d(0x6e4)]('sendMenu'),..._0xf501d2,async(_0x9a9383,_0x564ec7)=>{const _0x2277ba=_0x746e6d;let _0x3a95d3=await this[_0x2277ba(0x3a0)]({'request':_0x9a9383,'schema':Ua,'ClassRef':bt,'execute':(_0x9461ba,_0x1df014)=>B[_0x2277ba(0x4c0)](_0x9461ba,_0x1df014)});return _0x564ec7[_0x2277ba(0x360)](0xc9)[_0x2277ba(0x853)](_0x3a95d3);})['post'](this[_0x746e6d(0x6e4)](_0x746e6d(0x864)),..._0xf501d2,async(_0x3ab05d,_0x21cc4c)=>{const _0x4415a9=_0x746e6d;let _0x13b30b=await this['dataValidate']({'request':_0x3ab05d,'schema':La,'ClassRef':_e,'execute':(_0x13c305,_0xca34a8)=>B[_0x4415a9(0x864)](_0x13c305,_0xca34a8)});return _0x21cc4c['status'](0xc9)[_0x4415a9(0x853)](_0x13b30b);})[_0x746e6d(0x6ce)](this['routerPath'](_0x746e6d(0x59f)),..._0xf501d2,async(_0x2cb4e3,_0x594297)=>{const _0x508790=_0x746e6d;let _0x128914=await this[_0x508790(0x3a0)]({'request':_0x2cb4e3,'schema':ja,'ClassRef':Mt,'execute':(_0x47c8fc,_0x4d63a9)=>B[_0x508790(0x59f)](_0x47c8fc,_0x4d63a9)});return _0x594297[_0x508790(0x360)](0xc9)['json'](_0x128914);})[_0x746e6d(0x6ce)](this[_0x746e6d(0x6e4)](_0x746e6d(0x3b4)),..._0xf501d2,async(_0xe7171b,_0xc01725)=>{const _0x18a634=_0x746e6d;let _0x39262d=await this[_0x18a634(0x3a0)]({'request':_0xe7171b,'schema':Ja,'ClassRef':Ct,'execute':(_0x98915,_0x59f3f4)=>B[_0x18a634(0x3b4)](_0x98915,_0x59f3f4)});return _0xc01725[_0x18a634(0x360)](0xc9)[_0x18a634(0x853)](_0x39262d);})['post'](this['routerPath']('sendList'),..._0xf501d2,async(_0x320a05,_0x21491a)=>{const _0x3ea678=_0x746e6d;let _0x4a622d=await this['dataValidate']({'request':_0x320a05,'schema':qa,'ClassRef':Et,'execute':(_0x442f2c,_0x3857b3)=>B[_0x3ea678(0x82e)](_0x442f2c,_0x3857b3)});return _0x21491a[_0x3ea678(0x360)](0xc9)['json'](_0x4a622d);})[_0x746e6d(0x6ce)](this['routerPath'](_0x746e6d(0x4f0)),..._0xf501d2,async(_0x21783e,_0x3d962c)=>{const _0x555a3b=_0x746e6d;let _0x5f5451=await this['dataValidate']({'request':_0x21783e,'schema':Va,'ClassRef':vt,'execute':(_0x31fa68,_0x393035)=>B['sendContact'](_0x31fa68,_0x393035)});return _0x3d962c[_0x555a3b(0x360)](0xc9)[_0x555a3b(0x853)](_0x5f5451);})[_0x746e6d(0x6ce)](this[_0x746e6d(0x6e4)](_0x746e6d(0x28c)),..._0xf501d2,async(_0x3691ea,_0x26137c)=>{let _0xef45a2=await this['dataValidate']({'request':_0x3691ea,'schema':Ga,'ClassRef':Nt,'execute':(_0x35128d,_0xcff905)=>B['sendReaction'](_0x35128d,_0xcff905)});return _0x26137c['status'](0xc9)['json'](_0xef45a2);})[_0x746e6d(0x6ce)](this[_0x746e6d(0x6e4)](_0x746e6d(0x86b)),..._0xf501d2,async(_0x1b5649,_0x51d7b6)=>{const _0x3753d3=_0x746e6d;let _0x4c3bea=await this[_0x3753d3(0x3a0)]({'request':_0x1b5649,'schema':Fa,'ClassRef':yt,'execute':(_0x965751,_0x25386d)=>B[_0x3753d3(0x86b)](_0x965751,_0x25386d)});return _0x51d7b6['status'](0xc9)[_0x3753d3(0x853)](_0x4c3bea);})[_0x746e6d(0x6ce)](this[_0x746e6d(0x6e4)](_0x746e6d(0x2fa)),..._0xf501d2,async(_0x58dd13,_0x360f26)=>{const _0x1ada8a=_0x746e6d;let _0x14dfa0=await this[_0x1ada8a(0x3a0)]({'request':_0x58dd13,'schema':Pa,'ClassRef':wt,'execute':(_0x320c3f,_0x25a24e)=>B[_0x1ada8a(0x2fa)](_0x320c3f,_0x25a24e)});return _0x360f26[_0x1ada8a(0x360)](0xc9)[_0x1ada8a(0x853)](_0x14dfa0);})[_0x746e6d(0x6ce)](this[_0x746e6d(0x6e4)]('sendSticker'),..._0xf501d2,async(_0x1f8bc1,_0x4c7723)=>{const _0x5859d4=_0x746e6d;let _0x7595e3=await this[_0x5859d4(0x3a0)]({'request':_0x1f8bc1,'schema':Da,'ClassRef':St,'execute':(_0x4de47d,_0xf52b32)=>B[_0x5859d4(0x771)](_0x4de47d,_0xf52b32)});return _0x4c7723['status'](0xc9)[_0x5859d4(0x853)](_0x7595e3);});}},mi=require('express'),Rt=class{},At=class extends V{constructor(..._0x334999){const _0x4db9a2=a0_0x591e8d;super(),this['router']=(0x0,mi['Router'])(),this[_0x4db9a2(0x84a)][_0x4db9a2(0x6ce)](this[_0x4db9a2(0x6e4)]('set'),..._0x334999,async(_0x559162,_0x130245)=>{const _0x4d2f66=_0x4db9a2;let _0x1a113e=await this[_0x4d2f66(0x3a0)]({'request':_0x559162,'schema':ui,'ClassRef':Rt,'execute':(_0x534ff9,_0x5ceb3e)=>vs[_0x4d2f66(0x548)](_0x534ff9,_0x5ceb3e)});_0x130245[_0x4d2f66(0x360)](0xc9)[_0x4d2f66(0x853)](_0x1a113e);})[_0x4db9a2(0x2f4)](this[_0x4db9a2(0x6e4)](_0x4db9a2(0x2c5)),..._0x334999,async(_0x38a8c7,_0x5b5c8d)=>{const _0x1c80d5=_0x4db9a2;let _0x5319c5=await this[_0x1c80d5(0x3a0)]({'request':_0x38a8c7,'schema':v,'ClassRef':M,'execute':_0x273293=>vs[_0x1c80d5(0x509)](_0x273293)});_0x5b5c8d[_0x1c80d5(0x360)](0xc8)[_0x1c80d5(0x853)](_0x5319c5);});}},fi=require(a0_0x591e8d(0x3c0)),y=new N('FlowRouter'),It=class extends V{constructor(..._0x34dc87){const _0x178726=a0_0x591e8d;super(),this[_0x178726(0x84a)]=(0x0,fi[_0x178726(0x2b4)])(),this[_0x178726(0x84a)][_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x67c)),..._0x34dc87,async(_0x5f00b7,_0x4dbe3f)=>{const _0xa1225e=_0x178726;let _0x2d8a79=_0x5f00b7['body'];y['verbose'](_0xa1225e(0x4f5)),y[_0xa1225e(0x768)](_0xa1225e(0x5fb)),y[_0xa1225e(0x768)](_0x5f00b7[_0xa1225e(0x5cb)]);let _0x12c294=await this[_0xa1225e(0x3a0)]({'request':_0x5f00b7,'schema':v,'ClassRef':M,'execute':_0x28bd82=>I[_0xa1225e(0x621)](_0x28bd82,_0x2d8a79)});_0x4dbe3f[_0xa1225e(0x360)](0xc8)[_0xa1225e(0x853)](_0x12c294);})[_0x178726(0x2f4)](this['routerPath'](_0x178726(0x67c)),..._0x34dc87,async(_0x2a1b41,_0x58a529)=>{const _0x19cc44=_0x178726;let _0x4c1965=await this['dataValidate']({'request':_0x2a1b41,'schema':v,'ClassRef':M,'execute':_0x5300b6=>I[_0x19cc44(0x5cd)](_0x5300b6)});_0x58a529['status'](0xc8)[_0x19cc44(0x853)](_0x4c1965);})[_0x178726(0x6f7)](this[_0x178726(0x6e4)](_0x178726(0x22a)),..._0x34dc87,async(_0x2e0542,_0x2e1772)=>{const _0x2516d4=_0x178726;y[_0x2516d4(0x768)](_0x2516d4(0x3f0));let _0x1dc3b8=await this['dataValidate']({'request':_0x2e0542,'schema':v,'ClassRef':M,'execute':_0x2cfd9c=>I['deleteDoneMessages'](_0x2cfd9c)});_0x2e1772[_0x2516d4(0x360)](0xc8)[_0x2516d4(0x853)](_0x1dc3b8);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x443)),..._0x34dc87,async(_0x21042d,_0x540f3f)=>{const _0x5cf10e=_0x178726;let _0x1620e0=_0x21042d[_0x5cf10e(0x5cb)];y[_0x5cf10e(0x768)]('request\x20received\x20in\x20starFlow'),y[_0x5cf10e(0x768)](_0x5cf10e(0x5fb)),y[_0x5cf10e(0x768)](_0x21042d['body']);let _0x3870aa=await this[_0x5cf10e(0x3a0)]({'request':_0x21042d,'schema':v,'ClassRef':M,'execute':_0x36f00d=>I[_0x5cf10e(0x443)](_0x36f00d,_0x1620e0)});_0x540f3f[_0x5cf10e(0x360)](0xc8)[_0x5cf10e(0x853)](_0x3870aa);})[_0x178726(0x2f4)](this[_0x178726(0x6e4)]('getAutomateSystem'),..._0x34dc87,async(_0x58a42b,_0x29426c)=>{const _0x3e7473=_0x178726;y['verbose'](_0x3e7473(0x5c2));let _0x3c24a5=await this[_0x3e7473(0x3a0)]({'request':_0x58a42b,'schema':v,'ClassRef':M,'execute':_0x29f869=>I[_0x3e7473(0x689)](_0x29f869)});_0x29426c['status'](0xc8)[_0x3e7473(0x853)](_0x3c24a5);})['get'](this[_0x178726(0x6e4)](_0x178726(0x1b1)),..._0x34dc87,async(_0x27940d,_0x5ebe60)=>{const _0xa58d4=_0x178726;y[_0xa58d4(0x768)](_0xa58d4(0x267));let _0x450433=await this[_0xa58d4(0x3a0)]({'request':_0x27940d,'schema':v,'ClassRef':M,'execute':_0x34d75e=>I['getAutomateSystem'](_0x34d75e)});_0x5ebe60[_0xa58d4(0x360)](0xc8)['json'](_0x450433);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x1d2)),..._0x34dc87,async(_0x58f977,_0xede790)=>{const _0x23a50a=_0x178726;let _0x2bfe5b=_0x58f977['body'];y[_0x23a50a(0x768)]('request\x20received\x20in\x20updateAgent'),y[_0x23a50a(0x768)](_0x23a50a(0x5fb)),y[_0x23a50a(0x768)](_0x58f977[_0x23a50a(0x5cb)]);let _0x1a686e=await this['dataValidate']({'request':_0x58f977,'schema':v,'ClassRef':M,'execute':_0x317a02=>I[_0x23a50a(0x1d2)](_0x317a02,_0x2bfe5b)});_0xede790[_0x23a50a(0x360)](0xc8)[_0x23a50a(0x853)](_0x1a686e);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x82a)),..._0x34dc87,async(_0x308f0f,_0x38e2ed)=>{const _0x45d1dc=_0x178726;let _0x5b1c54=_0x308f0f['body'];y[_0x45d1dc(0x768)](_0x45d1dc(0x821)),y[_0x45d1dc(0x768)](_0x45d1dc(0x5fb)),y['verbose'](_0x308f0f['body']);let _0x4b11c6=await this[_0x45d1dc(0x3a0)]({'request':_0x308f0f,'schema':v,'ClassRef':M,'execute':_0x542f58=>I[_0x45d1dc(0x82a)](_0x542f58,_0x5b1c54)});_0x38e2ed[_0x45d1dc(0x360)](0xc8)[_0x45d1dc(0x853)](_0x4b11c6);})['post'](this[_0x178726(0x6e4)](_0x178726(0x2fe)),..._0x34dc87,async(_0x4167f6,_0x1dad97)=>{const _0x4eab70=_0x178726;let _0x550595=_0x4167f6[_0x4eab70(0x5cb)];y[_0x4eab70(0x768)](_0x4eab70(0x816)),y[_0x4eab70(0x768)](_0x4eab70(0x5fb)),y[_0x4eab70(0x768)](_0x4167f6[_0x4eab70(0x5cb)]);let _0x22dff6=await this['dataValidate']({'request':_0x4167f6,'schema':v,'ClassRef':M,'execute':_0x24020d=>I[_0x4eab70(0x2fe)](_0x24020d,_0x550595)});_0x1dad97[_0x4eab70(0x360)](0xc8)[_0x4eab70(0x853)](_0x22dff6);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x6c1)),..._0x34dc87,async(_0x56fe6a,_0x14c560)=>{const _0x30a758=_0x178726;let _0x470fa7=_0x56fe6a[_0x30a758(0x5cb)];y[_0x30a758(0x768)](_0x30a758(0x6fe)),y[_0x30a758(0x768)](_0x30a758(0x5fb)),y[_0x30a758(0x768)](_0x56fe6a['body']);let _0x25c99a=await this[_0x30a758(0x3a0)]({'request':_0x56fe6a,'schema':v,'ClassRef':M,'execute':_0x35811e=>I['updateFlowConfig'](_0x35811e,_0x470fa7)});_0x14c560['status'](0xc8)[_0x30a758(0x853)](_0x25c99a);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x80d)),..._0x34dc87,async(_0x688ad7,_0x35281d)=>{const _0x26d430=_0x178726;let _0x2b4f79=_0x688ad7[_0x26d430(0x5cb)];y['verbose'](_0x26d430(0x226)),y[_0x26d430(0x768)](_0x26d430(0x5fb)),y[_0x26d430(0x768)](_0x688ad7[_0x26d430(0x5cb)]);let _0xed3a25=await this[_0x26d430(0x3a0)]({'request':_0x688ad7,'schema':v,'ClassRef':M,'execute':_0x1259cf=>I[_0x26d430(0x80d)](_0x1259cf,_0x2b4f79)});_0x35281d[_0x26d430(0x360)](0xc8)[_0x26d430(0x853)](_0xed3a25);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x4da)),..._0x34dc87,async(_0x12d5f7,_0x3eae35)=>{const _0xbedbf3=_0x178726;let _0x2ae9c8=_0x12d5f7[_0xbedbf3(0x5cb)];y['verbose'](_0xbedbf3(0x6cb)),y[_0xbedbf3(0x768)](_0xbedbf3(0x5fb)),y[_0xbedbf3(0x768)](_0x12d5f7[_0xbedbf3(0x5cb)]);let _0x3806e5=await this[_0xbedbf3(0x3a0)]({'request':_0x12d5f7,'schema':v,'ClassRef':M,'execute':_0x3f5552=>I[_0xbedbf3(0x4da)](_0x3f5552,_0x2ae9c8)});_0x3eae35[_0xbedbf3(0x360)](0xc8)[_0xbedbf3(0x853)](_0x3806e5);})['post'](this['routerPath'](_0x178726(0x86d)),..._0x34dc87,async(_0x1c5f0c,_0x1b4098)=>{const _0x78d9=_0x178726;let _0x1ad1ad=_0x1c5f0c[_0x78d9(0x5cb)];y['verbose']('request\x20received\x20in\x20editConversation'),y[_0x78d9(0x768)]('request\x20body:\x20'),y[_0x78d9(0x768)](_0x1c5f0c[_0x78d9(0x5cb)]);let _0x5f172e=await this[_0x78d9(0x3a0)]({'request':_0x1c5f0c,'schema':v,'ClassRef':M,'execute':_0x42632e=>I['editConversation'](_0x42632e,_0x1ad1ad)});_0x1b4098[_0x78d9(0x360)](0xc8)[_0x78d9(0x853)](_0x5f172e);})[_0x178726(0x6f7)](this[_0x178726(0x6e4)]('deleteConversation'),..._0x34dc87,async(_0x253a7d,_0x2b3409)=>{const _0x3f3ea2=_0x178726;let _0x2a8fd1=_0x253a7d[_0x3f3ea2(0x5cb)];y['verbose']('request\x20received\x20in\x20deleteConversation'),y['verbose']('request\x20body:\x20'),y[_0x3f3ea2(0x768)](_0x253a7d[_0x3f3ea2(0x5cb)]);let _0x3616e8=await this['dataValidate']({'request':_0x253a7d,'schema':v,'ClassRef':M,'execute':_0xe22518=>I[_0x3f3ea2(0x315)](_0xe22518,_0x2a8fd1)});_0x2b3409[_0x3f3ea2(0x360)](0xc8)[_0x3f3ea2(0x853)](_0x3616e8);})[_0x178726(0x6ce)](this['routerPath'](_0x178726(0x2ce)),..._0x34dc87,async(_0x322321,_0x596fb9)=>{const _0x23c2c0=_0x178726;let _0x3712f3=_0x322321[_0x23c2c0(0x5cb)],_0x4dd205=_0x322321[_0x23c2c0(0x711)][_0x23c2c0(0x1e5)];y[_0x23c2c0(0x768)](_0x23c2c0(0x44d)),y[_0x23c2c0(0x768)](_0x23c2c0(0x5fb)),y[_0x23c2c0(0x768)](_0x322321[_0x23c2c0(0x5cb)]);let _0x271e25=await this[_0x23c2c0(0x3a0)]({'request':_0x322321,'schema':v,'ClassRef':M,'execute':_0x252c18=>I[_0x23c2c0(0x162)](_0x252c18,_0x3712f3,_0x4dd205)});_0x596fb9[_0x23c2c0(0x360)](0xc8)[_0x23c2c0(0x853)](_0x271e25);})['post'](this[_0x178726(0x6e4)](_0x178726(0x20e)),..._0x34dc87,async(_0x5e4076,_0x2c77de)=>{const _0x5a33d4=_0x178726;let _0x2c45b2=_0x5e4076['body'],_0x8f6ced=_0x5e4076[_0x5a33d4(0x711)]['apikey'];y[_0x5a33d4(0x768)](_0x5a33d4(0x504)),y[_0x5a33d4(0x768)](_0x5a33d4(0x5fb)),y[_0x5a33d4(0x768)](_0x5e4076['body']),delete _0x2c45b2[_0x5a33d4(0x308)],delete _0x2c45b2[_0x5a33d4(0x45a)],delete _0x2c45b2['groups'],delete _0x2c45b2[_0x5a33d4(0x8aa)];let _0x246d90=await this[_0x5a33d4(0x3a0)]({'request':_0x5e4076,'schema':v,'ClassRef':M,'execute':_0x233347=>I['editFlow'](_0x233347,_0x2c45b2,_0x8f6ced)});_0x2c77de[_0x5a33d4(0x360)](0xc8)[_0x5a33d4(0x853)](_0x246d90);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x362)),..._0x34dc87,async(_0xdb08d2,_0x10f798)=>{const _0x5ed563=_0x178726;let _0x59f186=_0xdb08d2[_0x5ed563(0x5cb)];y[_0x5ed563(0x768)]('request\x20received\x20in\x20editFlow'),y['verbose'](_0x5ed563(0x5fb)),y[_0x5ed563(0x768)](_0xdb08d2[_0x5ed563(0x5cb)]);let _0x591fba=await this[_0x5ed563(0x3a0)]({'request':_0xdb08d2,'schema':v,'ClassRef':M,'execute':_0x14a410=>I[_0x5ed563(0x5de)](_0x14a410,_0x59f186)});_0x10f798['status'](0xc8)[_0x5ed563(0x853)](_0x591fba);})['post'](this['routerPath'](_0x178726(0x7e3)),..._0x34dc87,async(_0x5414cf,_0x2470c7)=>{const _0x5c8770=_0x178726;let _0x4da856=_0x5414cf[_0x5c8770(0x5cb)];y[_0x5c8770(0x768)]('request\x20received\x20in\x20editFlow'),y[_0x5c8770(0x768)](_0x5c8770(0x5fb)),y[_0x5c8770(0x768)](_0x5414cf[_0x5c8770(0x5cb)]);let _0x3c85fd=await this[_0x5c8770(0x3a0)]({'request':_0x5414cf,'schema':v,'ClassRef':M,'execute':_0x1ec1d6=>I[_0x5c8770(0x16f)](_0x1ec1d6,_0x4da856)});_0x2470c7[_0x5c8770(0x360)](0xc8)['json'](_0x3c85fd);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x431)),..._0x34dc87,async(_0x4bd83a,_0x29d767)=>{const _0x205dd8=_0x178726;let _0xb8f72c=_0x4bd83a['body'];y[_0x205dd8(0x768)](_0x205dd8(0x504)),y[_0x205dd8(0x768)]('request\x20body:\x20'),y[_0x205dd8(0x768)](_0x4bd83a['body']);let _0x26a34c=await this[_0x205dd8(0x3a0)]({'request':_0x4bd83a,'schema':v,'ClassRef':M,'execute':_0x1ba8bd=>I[_0x205dd8(0x5fc)](_0x1ba8bd,_0xb8f72c)});_0x29d767['status'](0xc8)[_0x205dd8(0x853)](_0x26a34c);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)]('editflowgroup'),..._0x34dc87,async(_0xbe9c13,_0x24ee1b)=>{const _0xf7168f=_0x178726;let _0x189704=_0xbe9c13[_0xf7168f(0x5cb)];y[_0xf7168f(0x768)](_0xf7168f(0x4c2)),y[_0xf7168f(0x768)]('request\x20body:\x20'),y['verbose'](_0xbe9c13['body']);let _0x3cac37=await this['dataValidate']({'request':_0xbe9c13,'schema':v,'ClassRef':M,'execute':_0x55763a=>I[_0xf7168f(0x722)](_0x55763a,_0x189704)});_0x24ee1b[_0xf7168f(0x360)](0xc8)[_0xf7168f(0x853)](_0x3cac37);})[_0x178726(0x6ce)](this['routerPath'](_0x178726(0x316)),..._0x34dc87,async(_0x32125b,_0x12e160)=>{const _0x5e3c3d=_0x178726;let _0x593db1=_0x32125b['body'];y['verbose'](_0x5e3c3d(0x380)),y[_0x5e3c3d(0x768)](_0x5e3c3d(0x5fb)),y[_0x5e3c3d(0x768)](_0x32125b[_0x5e3c3d(0x5cb)]);let _0x4660cc=await this[_0x5e3c3d(0x3a0)]({'request':_0x32125b,'schema':v,'ClassRef':M,'execute':_0x571032=>I[_0x5e3c3d(0x5f9)](_0x571032,_0x593db1)});_0x12e160[_0x5e3c3d(0x360)](0xc8)[_0x5e3c3d(0x853)](_0x4660cc);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)]('editflowvariable'),..._0x34dc87,async(_0x3bedff,_0x3e44ed)=>{const _0xd953ec=_0x178726;let _0x1c381b=_0x3bedff[_0xd953ec(0x5cb)];y[_0xd953ec(0x768)](_0xd953ec(0x84b)),y['verbose'](_0xd953ec(0x5fb)),y['verbose'](_0x3bedff[_0xd953ec(0x5cb)]);let _0x1c277e=await this[_0xd953ec(0x3a0)]({'request':_0x3bedff,'schema':v,'ClassRef':M,'execute':_0x1970cf=>I[_0xd953ec(0x4ba)](_0x1970cf,_0x1c381b)});_0x3e44ed['status'](0xc8)[_0xd953ec(0x853)](_0x1c277e);})[_0x178726(0x6ce)](this[_0x178726(0x6e4)](_0x178726(0x7e7)),..._0x34dc87,async(_0x4192e6,_0x271d33)=>{const _0x562a3d=_0x178726;let _0x24580c=_0x4192e6['body'];y[_0x562a3d(0x768)](_0x562a3d(0x65d)),y[_0x562a3d(0x768)](_0x562a3d(0x5fb)),y[_0x562a3d(0x768)](_0x4192e6[_0x562a3d(0x5cb)]);let _0x53d590=await this[_0x562a3d(0x3a0)]({'request':_0x4192e6,'schema':v,'ClassRef':M,'execute':_0x4e1f86=>I[_0x562a3d(0x883)](_0x4e1f86,_0x24580c)});_0x271d33[_0x562a3d(0x360)](0xc8)['json'](_0x53d590);})[_0x178726(0x6f7)](this[_0x178726(0x6e4)](_0x178726(0x1b8)),..._0x34dc87,async(_0x41c09f,_0x3c8c07)=>{const _0x1d81a4=_0x178726;let _0x4593c9=_0x41c09f['body'];y[_0x1d81a4(0x768)]('request\x20received\x20in\x20deleteFlow'),y['verbose']('request\x20body:\x20'),y[_0x1d81a4(0x768)](_0x41c09f[_0x1d81a4(0x5cb)]);let _0x21bd41=await this['dataValidate']({'request':_0x41c09f,'schema':v,'ClassRef':M,'execute':_0x5df118=>I[_0x1d81a4(0x5e7)](_0x5df118,_0x4593c9)});_0x3c8c07[_0x1d81a4(0x360)](0xc8)['json'](_0x21bd41);})[_0x178726(0x2f4)](this[_0x178726(0x6e4)](_0x178726(0x50a)),..._0x34dc87,async(_0x2faa84,_0x2c5fc3)=>{const _0x32f71f=_0x178726;y[_0x32f71f(0x768)](_0x32f71f(0x5a4));let _0x4c8ec9=await this[_0x32f71f(0x3a0)]({'request':_0x2faa84,'schema':v,'ClassRef':M,'execute':_0x27f679=>I[_0x32f71f(0x6cd)](_0x27f679)});_0x2c5fc3[_0x32f71f(0x360)](0xc8)['json'](_0x4c8ec9);});}},Si=A(require(a0_0x591e8d(0x81b))),te={};function wi(_0x2cf829,_0x4a5559,_0x5bdbf6,_0x3b9009){te[_0x2cf829]||(te[_0x2cf829]={}),te[_0x2cf829][_0x4a5559]={'id':_0x4a5559,'response':_0x5bdbf6,'events':_0x3b9009};}function yi(_0x48ebec,_0x1f0d5e){!te[_0x48ebec]||!te[_0x48ebec][_0x1f0d5e]||delete te[_0x48ebec][_0x1f0d5e];}function U(_0x34679b,_0x3f3abc,_0x265371){const _0x2940f4=a0_0x591e8d;if(!te[_0x34679b])return;let _0x357bb2=_0x2940f4(0x74d)+JSON[_0x2940f4(0x62f)](_0x265371)+'\x0a\x0a';Object[_0x2940f4(0x78c)](te[_0x34679b])[_0x2940f4(0x5ce)](_0x36638f=>{const _0x2040b2=_0x2940f4;_0x36638f[_0x2040b2(0x2e7)][_0x2040b2(0x243)](_0x3f3abc)&&_0x36638f[_0x2040b2(0x539)][_0x2040b2(0x2f1)](_0x357bb2);});}function bi(){const _0x8066af=a0_0x591e8d;let _0x281ff5={};for(let _0x2abf04 in te)_0x281ff5[_0x2abf04]=Object[_0x8066af(0x78c)](te[_0x2abf04])[_0x8066af(0x276)](_0x3b8d1f=>({'id':_0x3b8d1f['id'],'events':_0x3b8d1f[_0x8066af(0x2e7)]}));return _0x281ff5;}var Mi=require(a0_0x591e8d(0x38a)),$s=require('mongoose'),Ns=class{},Ao=new $s[(a0_0x591e8d(0x6f8))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),Io=new $s[(a0_0x591e8d(0x6f8))]({'_id':{'type':String,'default':a0_0x591e8d(0x7d1)},'WebhookGlobal':{'type':Ao},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Se=$?.[a0_0x591e8d(0x85b)](Ns[a0_0x591e8d(0x1f8)],Io,a0_0x591e8d(0x15a)),To=Si['default'][a0_0x591e8d(0x241)](__dirname,a0_0x591e8d(0x46a)),xe=(0x0,Tt[a0_0x591e8d(0x2b4)])(),Oo=b[a0_0x591e8d(0x2f4)](a0_0x591e8d(0x40b))[a0_0x591e8d(0x5d5)],oe=[$a,Ra,Ta[Oo]];xe[a0_0x591e8d(0x16b)]('/media',Tt['default'][a0_0x591e8d(0x71c)](To))[a0_0x591e8d(0x2f4)](a0_0x591e8d(0x2ee),async(_0x249b5d,_0x1b63bb)=>{const _0x471ed0=a0_0x591e8d;console['log']('bateu\x20events');let _0x3503cb=_0x249b5d['params'][_0x471ed0(0x3ec)],_0x3528ba=(_0x249b5d[_0x471ed0(0x18a)][_0x471ed0(0x2e7)]||'')['split'](','),_0x579713=(0x0,Mi['v4'])();console[_0x471ed0(0x2c3)](_0x471ed0(0x42f),_0x3503cb),console[_0x471ed0(0x2c3)](_0x471ed0(0x5a3),_0x3528ba);let _0x5dd749=b[_0x471ed0(0x2f4)](_0x471ed0(0x40b))[_0x471ed0(0x199)],_0x5100a2=_0x249b5d[_0x471ed0(0x18a)]['apikey'];if(console['log'](_0x471ed0(0x61c),_0x5100a2),_0x5dd749[_0x471ed0(0x5b5)]!==_0x5100a2){console[_0x471ed0(0x2c3)](_0x471ed0(0x1b9));try{let _0x3247e5=await he[_0x471ed0(0x5ef)][_0x471ed0(0x2c5)](_0x3503cb);if(console['log'](_0x471ed0(0x536),_0x3247e5),!_0x3247e5||_0x3247e5[_0x471ed0(0x1e5)]!==_0x5100a2)return console[_0x471ed0(0x2c3)](_0x471ed0(0x515)),_0x1b63bb[_0x471ed0(0x360)](0x191)[_0x471ed0(0x7c8)](_0x471ed0(0x541));}catch(_0x89092f){return console[_0x471ed0(0x62b)](_0x471ed0(0x256),_0x89092f),_0x1b63bb[_0x471ed0(0x360)](0x191)[_0x471ed0(0x7c8)](_0x471ed0(0x5b6));}}if(!await Ae(_0x3503cb))return _0x1b63bb['status'](0x194)[_0x471ed0(0x7c8)]('Instncia\x20no\x20encontrada.');_0x1b63bb['setHeader'](_0x471ed0(0x479),_0x471ed0(0x68f)),_0x1b63bb[_0x471ed0(0x350)](_0x471ed0(0x2d9),'no-cache'),_0x1b63bb[_0x471ed0(0x350)]('Connection',_0x471ed0(0x3e6)),_0x1b63bb[_0x471ed0(0x287)]();let _0x5193be=_0x471ed0(0x74d)+JSON[_0x471ed0(0x62f)]({'info':_0x471ed0(0x34f)})+'\x0a\x0a';_0x1b63bb['write'](_0x5193be),wi(_0x3503cb,_0x579713,_0x1b63bb,_0x3528ba),_0x249b5d['on'](_0x471ed0(0x3e5),()=>{const _0x26fb0b=_0x471ed0;console[_0x26fb0b(0x2c3)](_0x26fb0b(0x878)+_0x3503cb),yi(_0x3503cb,_0x579713);});}),xe['post'](a0_0x591e8d(0x6b9),async(_0x339935,_0x476a26)=>{const _0xda8beb=a0_0x591e8d;console[_0xda8beb(0x2c3)](_0xda8beb(0x2c7));let _0x516565=_0x339935[_0xda8beb(0x888)][_0xda8beb(0x3ec)],_0x347fa6=_0x339935[_0xda8beb(0x888)][_0xda8beb(0x19f)],_0x449d86=_0x339935[_0xda8beb(0x18a)][_0xda8beb(0x166)]||'',_0x2ebb3a=_0x339935[_0xda8beb(0x5cb)];console[_0xda8beb(0x2c3)]('Instance\x20Name:',_0x516565),console['log'](_0xda8beb(0x3b0),_0x347fa6),console[_0xda8beb(0x2c3)](_0xda8beb(0x633),_0x449d86),console[_0xda8beb(0x2c3)](_0xda8beb(0x59e),_0x2ebb3a);try{if(!await Ae(_0x516565))return _0x476a26[_0xda8beb(0x360)](0x194)['send']('Instncia\x20no\x20encontrada.');let _0x2feca0=await I['startFlowWebhook'](_0x516565,_0x347fa6,_0x449d86,_0x2ebb3a);_0x476a26[_0xda8beb(0x7c8)](_0x2feca0);}catch(_0x31018a){console[_0xda8beb(0x62b)](_0x31018a),_0x476a26[_0xda8beb(0x360)](0x1f4)['send'](_0xda8beb(0x632));}}),xe[a0_0x591e8d(0x2f4)]('/clients-info',(_0x4e4a54,_0x36986a)=>{const _0x508145=a0_0x591e8d;let _0x3de5bb=bi();_0x36986a[_0x508145(0x853)](_0x3de5bb);})[a0_0x591e8d(0x2f4)]('/',(_0x463fd4,_0x2b10fb)=>{const _0x38877d=a0_0x591e8d;let _0x5713f0=b['get']('SERVER')[_0x38877d(0x83c)];if(_0x5713f0){let _0x2aef78=encodeURIComponent(''+_0x5713f0);_0x2b10fb[_0x38877d(0x67a)](_0x38877d(0x269)+_0x2aef78);return;}let _0x314896=b['get']('SSL_CONF'),_0x487e01=_0x314896&&_0x314896[_0x38877d(0x468)][_0x38877d(0x179)]('/')[0x4];if(_0x487e01){let _0x10efbc=encodeURIComponent(_0x38877d(0x427)+_0x487e01);_0x2b10fb['redirect']('https://uazapi-plugin.bubbleapps.io/?url='+_0x10efbc);}else _0x2b10fb['redirect'](_0x38877d(0x1e7));})[a0_0x591e8d(0x80c)](a0_0x591e8d(0x47c),...oe,async(_0x385b77,_0x3e64f2)=>{const _0x3610cd=a0_0x591e8d;try{console['log'](_0x3610cd(0x3b8)),_0x3e64f2[_0x3610cd(0x360)](0xc8)['json']({'message':_0x3610cd(0x3c3)}),_0x3e64f2['on'](_0x3610cd(0x28f),()=>process[_0x3610cd(0x270)](0x0));}catch(_0x504ad2){console[_0x3610cd(0x62b)](_0x3610cd(0x7d7),_0x504ad2),_0x3e64f2[_0x3610cd(0x360)](0x1f4)[_0x3610cd(0x853)]({'message':_0x3610cd(0x635)});}})[a0_0x591e8d(0x80c)]('/config',...oe,async(_0x187c11,_0x3f1ebc)=>{const _0x27cb9c=a0_0x591e8d;try{let _0x473450=_0x187c11[_0x27cb9c(0x5cb)];await Se[_0x27cb9c(0x828)]({},{'$set':_0x473450},{'upsert':!0x0});let _0x2be150=await Se[_0x27cb9c(0x685)]();_0x3f1ebc['json'](_0x2be150);}catch(_0x3cbbc4){_0x3f1ebc[_0x27cb9c(0x360)](0x190)[_0x27cb9c(0x7c8)](_0x3cbbc4['message']);}})['get']('/config',...oe,async(_0x2d800e,_0x5edd95)=>{const _0x1ccf93=a0_0x591e8d;try{let _0x13914a=await Se[_0x1ccf93(0x685)]();if(!_0x13914a)return _0x5edd95[_0x1ccf93(0x853)]({});_0x5edd95['json'](_0x13914a);}catch(_0x4ea389){_0x5edd95[_0x1ccf93(0x360)](0x1f4)['send'](_0x4ea389[_0x1ccf93(0x5b7)]);}})[a0_0x591e8d(0x16b)](a0_0x591e8d(0x506),new mt(b,...oe)['router'])[a0_0x591e8d(0x16b)](a0_0x591e8d(0x266),new $t(...oe)[a0_0x591e8d(0x84a)])[a0_0x591e8d(0x16b)](a0_0x591e8d(0x43e),new ot(...oe)[a0_0x591e8d(0x84a)])[a0_0x591e8d(0x16b)](a0_0x591e8d(0x49f),new gt(...oe)[a0_0x591e8d(0x84a)])[a0_0x591e8d(0x16b)]('/webhook',new At(...oe)['router'])[a0_0x591e8d(0x16b)](a0_0x591e8d(0x52f),new It(...oe)[a0_0x591e8d(0x84a)]);var m=class{constructor(..._0x179ae3){const _0x330766=a0_0x591e8d;throw{'status':0x190,'error':_0x330766(0x54d),'message':_0x179ae3[_0x330766(0x836)]>0x0?_0x179ae3:void 0x0};}},ie=class{constructor(..._0x100156){const _0x1ae613=a0_0x591e8d;throw{'status':0x191,'error':_0x1ae613(0x896),'message':_0x100156[_0x1ae613(0x836)]>0x0?_0x100156:void 0x0};}},X=class{constructor(..._0x17cd26){const _0x3e15a4=a0_0x591e8d;throw{'status':0x193,'error':_0x3e15a4(0x3f4),'message':_0x17cd26[_0x3e15a4(0x836)]>0x0?_0x17cd26:void 0x0};}},F=class{constructor(..._0x540d2f){const _0x59d5f9=a0_0x591e8d;throw{'status':0x194,'error':_0x59d5f9(0x473),'message':_0x540d2f[_0x59d5f9(0x836)]>0x0?_0x540d2f:void 0x0};}},O=class{constructor(..._0x58a0ef){const _0x5d9e76=a0_0x591e8d;throw{'status':0x1f4,'error':_0x5d9e76(0x682),'message':_0x58a0ef[_0x5d9e76(0x836)]>0x0?_0x58a0ef:void 0x0};}},ge=require('@whiskeysockets/baileys');async function Rs(_0x4d8df3){const _0x2cb772=a0_0x591e8d;let _0x141533=new N(Rs['name']),_0x5b6b55=$['getClient'](),_0x3c6fc0=_0x5b6b55['db'](b[_0x2cb772(0x2f4)](_0x2cb772(0x229))[_0x2cb772(0x848)][_0x2cb772(0x186)]+_0x2cb772(0x5c1))[_0x2cb772(0x26b)](_0x4d8df3),_0xa209df=async(_0x1b78aa,_0xc43688)=>{const _0x5b3458=_0x2cb772;try{return await _0x5b6b55['connect'](),await _0x3c6fc0[_0x5b3458(0x72f)]({'_id':_0xc43688},JSON['parse'](JSON['stringify'](_0x1b78aa,ge[_0x5b3458(0x75a)][_0x5b3458(0x6ca)])),{'upsert':!0x0});}catch{}},_0x27b220=async _0x5b9330=>{const _0x427ca3=_0x2cb772;try{await _0x5b6b55[_0x427ca3(0x79d)]();let _0x486efc=await _0x3c6fc0[_0x427ca3(0x685)]({'_id':_0x5b9330}),_0x443592=JSON[_0x427ca3(0x62f)](_0x486efc);return JSON[_0x427ca3(0x3da)](_0x443592,ge[_0x427ca3(0x75a)]['reviver']);}catch{}},_0x25a9b1=async _0x3ffe7d=>{const _0x3e574c=_0x2cb772;try{return await _0x5b6b55[_0x3e574c(0x79d)](),await _0x3c6fc0[_0x3e574c(0x1cc)]({'_id':_0x3ffe7d});}catch{}},_0x568ec4=await _0x27b220(_0x2cb772(0x73e))||(0x0,ge[_0x2cb772(0x4d9)])();return{'state':{'creds':_0x568ec4,'keys':{'get':async(_0x59bcc8,_0x47370e)=>{const _0x41586b=_0x2cb772;let _0x120e9e={};return await Promise[_0x41586b(0x5ec)](_0x47370e['map'](async _0x5ed33b=>{const _0x72a2fe=_0x41586b;let _0xc1bbc=await _0x27b220(_0x59bcc8+'-'+_0x5ed33b);_0x59bcc8==='app-state-sync-key'&&_0xc1bbc&&(_0xc1bbc=ge[_0x72a2fe(0x348)][_0x72a2fe(0x2f6)][_0x72a2fe(0x7e9)][_0x72a2fe(0x1f2)](_0xc1bbc)),_0x120e9e[_0x5ed33b]=_0xc1bbc;})),_0x120e9e;},'set':async _0x3abcd1=>{const _0x4633ed=_0x2cb772;let _0x1ab682=[];for(let _0x17bab6 in _0x3abcd1)for(let _0x1e8a6e in _0x3abcd1[_0x17bab6]){let _0x5e2dc1=_0x3abcd1[_0x17bab6][_0x1e8a6e],_0x53d9a3=_0x17bab6+'-'+_0x1e8a6e;_0x1ab682[_0x4633ed(0x57f)](_0x5e2dc1?_0xa209df(_0x5e2dc1,_0x53d9a3):_0x25a9b1(_0x53d9a3));}await Promise[_0x4633ed(0x5ec)](_0x1ab682);}}},'saveCreds':async()=>_0xa209df(_0x568ec4,_0x2cb772(0x73e))};}var xs=A(require(a0_0x591e8d(0x85c))),Ds=A(require(a0_0x591e8d(0x385))),xt=require(a0_0x591e8d(0x234)),Ci=require(a0_0x591e8d(0x17f)),_t=require(a0_0x591e8d(0x234)),Ot;function _o(_0xbbe48){const _0x5e68f7=a0_0x591e8d;return Ot||(Ot=(0x0,Ci['createClient'])({'url':_0xbbe48[_0x5e68f7(0x609)]}),Ot[_0x5e68f7(0x79d)]()),Ot;}var ue=class u{constructor(_0x20f26f,_0xff9f58){const _0x382d70=a0_0x591e8d;this['redisEnv']=_0x20f26f,this['instanceName']=_0xff9f58,this[_0x382d70(0x484)]=new N(u['name']),this['client']=_o(_0x20f26f);}set[a0_0x591e8d(0x6f3)](_0x1a68ba){const _0x40461c=a0_0x591e8d;this[_0x40461c(0x75c)]=_0x1a68ba;}async[a0_0x591e8d(0x238)](){const _0x3da997=a0_0x591e8d;try{return await this[_0x3da997(0x296)]['sendCommand']([_0x3da997(0x34b),this[_0x3da997(0x863)][_0x3da997(0x29c)]+':*']);}catch(_0x5c3202){this[_0x3da997(0x484)][_0x3da997(0x62b)](_0x5c3202);}}async[a0_0x591e8d(0x3cb)](_0x65890b,_0x3b56ee){const _0x5b6300=a0_0x591e8d;try{let _0x2ec061=JSON[_0x5b6300(0x62f)](_0x3b56ee,_t[_0x5b6300(0x75a)][_0x5b6300(0x6ca)]);return await this[_0x5b6300(0x296)][_0x5b6300(0x322)](this[_0x5b6300(0x863)]['PREFIX_KEY']+':'+this[_0x5b6300(0x75c)],_0x65890b,_0x2ec061);}catch(_0x4c2c3a){this[_0x5b6300(0x484)]['error'](_0x4c2c3a);}}async['getAllData'](){const _0x37b389=a0_0x591e8d;try{let _0x45dceb=await this[_0x37b389(0x296)][_0x37b389(0x662)](this['redisEnv'][_0x37b389(0x29c)]+':'+this[_0x37b389(0x75c)]);if(_0x45dceb){for(let _0x45c569 in _0x45dceb)Object['prototype']['hasOwnProperty']['call'](_0x45dceb,_0x45c569)&&(_0x45dceb[_0x45c569]=JSON['parse'](_0x45dceb[_0x45c569],_t['BufferJSON'][_0x37b389(0x882)]));return _0x45dceb;}}catch(_0x574683){this[_0x37b389(0x484)][_0x37b389(0x62b)](_0x574683);}}async[a0_0x591e8d(0x87e)](_0x5a87da){const _0x2feff0=a0_0x591e8d;try{let _0x23ab94=await this[_0x2feff0(0x296)][_0x2feff0(0x7ef)](this['redisEnv'][_0x2feff0(0x29c)]+':'+this[_0x2feff0(0x75c)],_0x5a87da);if(_0x23ab94)return JSON['parse'](_0x23ab94,_t['BufferJSON'][_0x2feff0(0x882)]);}catch(_0x3a1641){this[_0x2feff0(0x484)][_0x2feff0(0x62b)](_0x3a1641);}}async[a0_0x591e8d(0x2e4)](_0x5f18e1){const _0x1addaf=a0_0x591e8d;try{return await this['client'][_0x1addaf(0x204)](this[_0x1addaf(0x863)][_0x1addaf(0x29c)]+':'+this[_0x1addaf(0x75c)],_0x5f18e1);}catch(_0x5bab27){this['logger'][_0x1addaf(0x62b)](_0x5bab27);}}async[a0_0x591e8d(0x79a)](_0x126d26){const _0x442fa0=a0_0x591e8d;try{return await this['client'][_0x442fa0(0x64a)](_0x126d26||this[_0x442fa0(0x863)][_0x442fa0(0x29c)]+':'+this[_0x442fa0(0x75c)]);}catch(_0x24cdee){this[_0x442fa0(0x484)][_0x442fa0(0x62b)](_0x24cdee);}}};async function As(_0x260625,_0x2b2844){const _0x46cabc=a0_0x591e8d;let _0x3fcd86=new N(As['name']),_0x4ff83f=new ue(_0x260625,_0x2b2844),_0x3ce3d6=async(_0x182bd1,_0x3ec65e)=>{const _0x1df436=a0_0x3f1e;try{return await _0x4ff83f['writeData'](_0x3ec65e,_0x182bd1);}catch(_0xe2393f){return _0x3fcd86['error']({'localError':_0x1df436(0x3cb),'error':_0xe2393f});}},_0x516de5=async _0x682222=>{const _0x2e9346=a0_0x3f1e;try{return await _0x4ff83f[_0x2e9346(0x87e)](_0x682222);}catch(_0x442c03){_0x3fcd86[_0x2e9346(0x62b)]({'readData':'writeData','error':_0x442c03});return;}},_0x2675e8=async _0x2883fd=>{const _0x477a5b=a0_0x3f1e;try{return await _0x4ff83f[_0x477a5b(0x2e4)](_0x2883fd);}catch(_0x463b30){_0x3fcd86[_0x477a5b(0x62b)]({'readData':'removeData','error':_0x463b30});}},_0x3c4bb6=await _0x516de5(_0x46cabc(0x73e))||(0x0,xt[_0x46cabc(0x4d9)])();return{'state':{'creds':_0x3c4bb6,'keys':{'get':async(_0x10905b,_0x405cab)=>{const _0x5064da=_0x46cabc;let _0x2db035={};return await Promise[_0x5064da(0x5ec)](_0x405cab[_0x5064da(0x276)](async _0x2882e5=>{const _0x335b70=_0x5064da;let _0x5153e6=await _0x516de5(_0x10905b+'-'+_0x2882e5);_0x10905b===_0x335b70(0x333)&&_0x5153e6&&(_0x5153e6=xt[_0x335b70(0x348)]['Message'][_0x335b70(0x7e9)][_0x335b70(0x1f2)](_0x5153e6)),_0x2db035[_0x2882e5]=_0x5153e6;})),_0x2db035;},'set':async _0x2ba1d3=>{const _0x24818f=_0x46cabc;let _0x1f5b5b=[];for(let _0xb5c19f in _0x2ba1d3)for(let _0x50bc36 in _0x2ba1d3[_0xb5c19f]){let _0x56e69b=_0x2ba1d3[_0xb5c19f][_0x50bc36],_0xea730e=_0xb5c19f+'-'+_0x50bc36;_0x1f5b5b[_0x24818f(0x57f)](_0x56e69b?await _0x3ce3d6(_0x56e69b,_0xea730e):await _0x2675e8(_0xea730e));}await Promise[_0x24818f(0x5ec)](_0x1f5b5b);}}},'saveCreds':async()=>await _0x3ce3d6(_0x3c4bb6,'creds')};}var P=A(require('fs')),Y=require(a0_0x591e8d(0x38a)),Lt=A(require(a0_0x591e8d(0x710))),Ft=require(a0_0x591e8d(0x4e3)),Ei=require(a0_0x591e8d(0x5df)),vi=require(a0_0x591e8d(0x433)),Ni=A(require('axios')),Me=class extends T{constructor(_0x2e73e6,_0x29ef64,_0x136c7b){const _0xff4030=a0_0x591e8d;super(_0x29ef64),this['cacheInstanceModel']=_0x2e73e6,this[_0xff4030(0x285)]=_0x29ef64,this[_0xff4030(0x5af)]=_0x136c7b;}async[a0_0x591e8d(0x69f)](_0xa5ce6e,_0x995691){const _0x389659=a0_0x591e8d;try{if(this[_0x389659(0x327)][_0x389659(0x754)]){console[_0x389659(0x2c3)](_0x389659(0x530)+_0x995691+_0x389659(0x22e),_0xa5ce6e);let _0x3e8b0b=await this[_0x389659(0x886)][_0x389659(0x6db)]({'_id':_0x995691},{'$set':_0xa5ce6e},{'new':!0x0,'upsert':!0x0});return console[_0x389659(0x2c3)](_0x389659(0x6dc),_0x3e8b0b),_0x3e8b0b;}}catch(_0x18b6c5){throw console['error'](_0x389659(0x776),_0x18b6c5),_0x18b6c5;}return null;}async[a0_0x591e8d(0x1cc)](_0x3ab69e){const _0x19fc13=a0_0x591e8d;try{let _0x541171=R(_0x3ab69e[_0x19fc13(0x41b)]);return{'deletedCount':(await this[_0x19fc13(0x886)]['deleteOne'](_0x541171))[_0x19fc13(0x57a)]};}catch(_0xb7a707){return{'error':_0xb7a707?.['toString']()};}}async[a0_0x591e8d(0x685)](_0x3c6eb4){const _0x175055=a0_0x591e8d;try{let _0x571603=R(_0x3c6eb4[_0x175055(0x41b)]);return await this[_0x175055(0x886)]['findOne'](_0x571603)[_0x175055(0x7d3)]();}catch{return null;}}},Dt=(0x0,vi[a0_0x591e8d(0x745)])(Ei[a0_0x591e8d(0x3b1)]),xo=b[a0_0x591e8d(0x2f4)](a0_0x591e8d(0x559)),Is=class{constructor(){const _0x3aec23=a0_0x591e8d;this[_0x3aec23(0x370)]=new Me(qe,b),(!this['ipv6Prefix']||!this[_0x3aec23(0x26c)])&&xo&&this['detectIPv6PrefixAndInterface']()[_0x3aec23(0x274)](()=>{const _0x3fa351=_0x3aec23;console[_0x3fa351(0x2c3)]('IPv6\x20Prefix\x20detected:\x20'+this[_0x3fa351(0x4f1)]),console[_0x3fa351(0x2c3)](_0x3fa351(0x7fa)+this[_0x3fa351(0x26c)]);})[_0x3aec23(0x25a)](_0x4e2011=>{const _0x498720=_0x3aec23;console[_0x498720(0x62b)]('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20'+_0x4e2011['message']);});}async[a0_0x591e8d(0x743)](){const _0x230f28=a0_0x591e8d;try{let {stdout:_0x4a69a6}=await Dt('ip\x20-br\x20link\x20show');console[_0x230f28(0x2c3)](_0x230f28(0x3c2)+_0x4a69a6);let _0x5c5b96=_0x4a69a6[_0x230f28(0x179)]('\x0a')[_0x230f28(0x276)](_0x21d469=>_0x21d469[_0x230f28(0x179)]('\x20')[0x0])[_0x230f28(0x516)](_0x17c9be=>!_0x17c9be[_0x230f28(0x243)]('lo')&&!_0x17c9be['includes']('docker')&&!_0x17c9be['includes'](_0x230f28(0x161))&&!_0x17c9be[_0x230f28(0x243)]('wl')&&!_0x17c9be['includes']('@'));if(console['log']('Filtered\x20network\x20interfaces:\x20'+_0x5c5b96),_0x5c5b96[_0x230f28(0x836)]===0x0)throw new Error(_0x230f28(0x39d));this[_0x230f28(0x26c)]=_0x5c5b96[0x0];let {stdout:_0x211fd3}=await Dt(_0x230f28(0x33a)+this[_0x230f28(0x26c)]);console[_0x230f28(0x2c3)](_0x230f28(0x3f5)+_0x211fd3);let _0x296577=_0x211fd3[_0x230f28(0x179)]('\x0a')[_0x230f28(0x2c5)](_0x2c46c1=>_0x2c46c1[_0x230f28(0x243)](_0x230f28(0x777))&&_0x2c46c1['includes'](_0x230f28(0x337)));if(!_0x296577)throw new Error(_0x230f28(0x47d));let _0xb59748=_0x296577[_0x230f28(0x1e2)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0xb59748)throw new Error(_0x230f28(0x7d4));let [_0x37aabc,_0x5efb58,_0x5a0f02]=_0xb59748,_0x3ee80a=Math[_0x230f28(0x760)](Number(_0x5a0f02)/0x10),_0x3fd6f4=Number(_0x5a0f02)%0x10,_0x284714=_0x5efb58['split'](':')[_0x230f28(0x340)](0x0,_0x3ee80a)[_0x230f28(0x241)](':');if(_0x3fd6f4>0x0){let _0x297cb9=_0x5efb58[_0x230f28(0x179)](':')[_0x3ee80a],_0x3edb79=0xffff<<0x10-_0x3fd6f4&0xffff,_0xa1855c=(parseInt(_0x297cb9,0x10)&_0x3edb79)[_0x230f28(0x44c)](0x10)[_0x230f28(0x3e1)](0x4,'0');_0x284714+=':'+_0xa1855c;}this[_0x230f28(0x4f1)]=_0x284714+':';}catch(_0x57fcfe){console['error'](_0x230f28(0x25f),_0x57fcfe);}}async[a0_0x591e8d(0x3b6)](_0x49288a){const _0x2769dd=a0_0x591e8d;let _0x16219e=_0x2769dd(0x246)+_0x49288a+_0x2769dd(0x89f)+this[_0x2769dd(0x26c)];try{await Dt(_0x16219e),console[_0x2769dd(0x2c3)]('IPv6\x20address\x20configured:\x20'+_0x49288a);}catch(_0x56de0e){console[_0x2769dd(0x62b)](_0x2769dd(0x49a)+_0x56de0e);}}async[a0_0x591e8d(0x3d6)](_0x55aff2){const _0x4a67cf=a0_0x591e8d;let _0x54e616=_0x4a67cf(0x646)+_0x55aff2+_0x4a67cf(0x89f)+this['networkInterface'];try{await Dt(_0x54e616),console[_0x4a67cf(0x2c3)](_0x4a67cf(0x386)+_0x55aff2);}catch(_0x31a4de){console[_0x4a67cf(0x62b)]('Error\x20removing\x20IPv6\x20address:\x20'+_0x31a4de);}}[a0_0x591e8d(0x775)](){const _0x3ab04a=a0_0x591e8d;return'XX:XX:XX:XX:XX:XX'[_0x3ab04a(0x4d0)](/X/g,()=>_0x3ab04a(0x1f0)[_0x3ab04a(0x352)](Math['floor'](Math[_0x3ab04a(0x6a6)]()*0x10)));}[a0_0x591e8d(0x6e7)](_0x489d43,_0x57de1c){const _0x302580=a0_0x591e8d;let _0x5e8794=_0x57de1c['split'](':');return _0x5e8794[0x0]=(parseInt(_0x5e8794[0x0],0x10)^0x2)[_0x302580(0x44c)](0x10)[_0x302580(0x3e1)](0x2,'0'),''+_0x489d43+_0x5e8794[0x0]+_0x5e8794[0x1]+':'+_0x5e8794[0x2]+'ff:fe'+_0x5e8794[0x3]+':'+_0x5e8794[0x4]+_0x5e8794[0x5];}[a0_0x591e8d(0x81d)](){const _0x411d92=a0_0x591e8d;let _0x347929=this[_0x411d92(0x4f1)];_0x347929[_0x411d92(0x426)](':')||(_0x347929+=':');let _0x538485=this[_0x411d92(0x775)]();return this[_0x411d92(0x6e7)](_0x347929,_0x538485);}[a0_0x591e8d(0x3e8)](_0x105c1a){const _0x62bfd1=a0_0x591e8d;return new RegExp('^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$')[_0x62bfd1(0x749)](_0x105c1a);}async[a0_0x591e8d(0x22d)](_0x59df20){const _0x219355=a0_0x591e8d;let _0x491312=[{'url':_0x219355(0x556),'parse':_0x190a73=>_0x190a73['ip']},{'url':_0x219355(0x655),'parse':_0x2f4111=>_0x2f4111['ip']},{'url':_0x219355(0x7b3),'parse':_0x29840f=>_0x29840f[_0x219355(0x311)]()},{'url':_0x219355(0x558),'parse':_0x529186=>_0x529186[_0x219355(0x311)]()}],_0x2c7558=_0x491312[Math[_0x219355(0x760)](Math[_0x219355(0x6a6)]()*_0x491312[_0x219355(0x836)])];try{let _0x2eebbe=await Ni[_0x219355(0x2ab)][_0x219355(0x2f4)](_0x2c7558[_0x219355(0x18d)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x59df20}}),_0x3d2fd8=_0x2c7558[_0x219355(0x3da)](_0x2eebbe[_0x219355(0x495)]);return _0x3d2fd8[_0x219355(0x1f1)]()===_0x59df20[_0x219355(0x1f1)]()?(console[_0x219355(0x2c3)](_0x219355(0x51e)+_0x59df20),!0x0):(console[_0x219355(0x62b)]('IP\x20mismatch:\x20configured\x20'+_0x59df20+_0x219355(0x686)+_0x3d2fd8),!0x1);}catch(_0x4f3cb9){return console[_0x219355(0x62b)](_0x219355(0x193)+_0x2c7558[_0x219355(0x18d)]+':\x20'+_0x4f3cb9['message']),!0x1;}}async[a0_0x591e8d(0x7ce)](_0x56a758,_0x4dc16b){const _0x5e5e63=a0_0x591e8d;if(!this[_0x5e5e63(0x4f1)]||!this['networkInterface'])return console[_0x5e5e63(0x62b)](_0x5e5e63(0x1d4)),null;let _0x290b5c;do _0x290b5c=this['generateRandomIPv6'](),console[_0x5e5e63(0x2c3)](_0x5e5e63(0x403)+_0x290b5c);while(!await this['isValidAndUniqueIPv6'](_0x290b5c));await this[_0x5e5e63(0x3b6)](_0x290b5c),console[_0x5e5e63(0x2c3)]('Configured\x20IPv6:\x20'+_0x290b5c);let _0x4e41c3={'_id':_0x56a758+'-'+_0x4dc16b,'ip':_0x290b5c},_0x332f0a=await this[_0x5e5e63(0x370)][_0x5e5e63(0x69f)](_0x4e41c3,_0x4e41c3[_0x5e5e63(0x812)]);return console[_0x5e5e63(0x2c3)](_0x5e5e63(0x203)+_0x332f0a),_0x290b5c;}async[a0_0x591e8d(0x47b)](_0x47eebb){const _0x4f36f8=a0_0x591e8d;return this[_0x4f36f8(0x3e8)](_0x47eebb)?!await this['cacheInstanceRepository'][_0x4f36f8(0x685)]({'where':{'ip':_0x47eebb}}):!0x1;}async['removeIPv6ById'](_0x43b62e,_0x19f50e){const _0x403378=a0_0x591e8d;let _0x1043b4=_0x43b62e+'-'+_0x19f50e,_0x1b5ba2=await this[_0x403378(0x370)][_0x403378(0x685)]({'where':{'_id':_0x1043b4}});_0x1b5ba2&&_0x1b5ba2['ip']&&(await this['removeIPv6'](_0x1b5ba2['ip']),await this[_0x403378(0x370)][_0x403378(0x1cc)]({'where':{'_id':_0x1043b4}}));}},Do=new Is(),se=Do,Ps='Safari',_i,de=null,Oa=null,Po=0x3,ko=null,$i=b[a0_0x591e8d(0x2f4)]('AUTHENTICATION')[a0_0x591e8d(0x199)][a0_0x591e8d(0x5b5)],Ri=b[a0_0x591e8d(0x2f4)](a0_0x591e8d(0x559));async function Lo(){const _0x6de55f=a0_0x591e8d;let _0x4accd8=await Se['findOne']();de=_0x4accd8?.[_0x6de55f(0x475)]??null,ko=_0x4accd8?.[_0x6de55f(0x1bb)]??null,Ps=_0x4accd8?.[_0x6de55f(0x76d)]??'Safari',_i=_0x4accd8?.[_0x6de55f(0x1b4)]??W??_0x6de55f(0x301);}async function Fo(){await Lo();}Fo();var Pt={},Ce=class u{constructor(_0x1b4403,_0x396ed3,_0x31a62f){const _0x514a56=a0_0x591e8d;this[_0x514a56(0x285)]=_0x1b4403,this[_0x514a56(0x2d4)]=_0x396ed3,this[_0x514a56(0x799)]=_0x31a62f,this['AutomateSystem']=null,this['logger']=new N(u[_0x514a56(0x1f8)]),this[_0x514a56(0x3ec)]={},this[_0x514a56(0x3c9)]={},this[_0x514a56(0x838)]={'state':'close'},this['storePath']=(0x0,L[_0x514a56(0x241)])(re,_0x514a56(0x46a)),this[_0x514a56(0x232)]=new Ds[(_0x514a56(0x2ab))](),this[_0x514a56(0x34a)]=new Ds[(_0x514a56(0x2ab))](),this[_0x514a56(0x358)]=!0x1,this[_0x514a56(0x461)]={'status.instance':_0x514a56(0x265),'connection.update':_0x514a56(0x265),'qrcode.updated':_0x514a56(0x4ae),'messages.upsert':_0x514a56(0x49e),'send.message':_0x514a56(0x49e),'messages.update':_0x514a56(0x6bf),'group.upsert':_0x514a56(0x1a7),'group.update':'/wa-groups','group-participants.update':'/wa-groups','messages.set':_0x514a56(0x2d3),'contacts.set':_0x514a56(0x525),'contacts.upsert':'/wa-contacts','contacts.update':_0x514a56(0x525),'presence.update':'/wa-presence','chats.set':_0x514a56(0x3bd),'chats.update':_0x514a56(0x3bd),'chats.upsert':_0x514a56(0x3bd),'chats.delete':_0x514a56(0x3bd)},this[_0x514a56(0x4a2)]=0x0,this['reconnectTimestamps']=[],this['RECONNECT_TIME_FRAME']=0xea60,this[_0x514a56(0x364)]=!0x1,this[_0x514a56(0x664)]={'chats.upsert':async(_0x5dabbd,_0x1d4c07)=>{const _0x127f1b=_0x514a56;let _0x2ba086=[];for await(let _0x4af95a of _0x5dabbd)_0x2ba086[_0x127f1b(0x57f)]({'_id':_0x4af95a['id'],'owner':this['instance'][_0x127f1b(0x490)],'group':_0x4af95a['id'][_0x127f1b(0x426)](_0x127f1b(0x2b3)),'name':_0x4af95a[_0x127f1b(0x1f8)]||_0x4af95a[_0x127f1b(0x5e4)]||null,'contactname':null,'lastmsg':_0x4af95a['conversationTimestamp']&&_0x4af95a['conversationTimestamp'][_0x127f1b(0x44c)]()['length']<0xd?_0x4af95a['conversationTimestamp']*0x3e8:_0x4af95a[_0x127f1b(0x553)]||null,'archived':_0x4af95a[_0x127f1b(0x374)]||!0x1,'unreadcount':_0x4af95a[_0x127f1b(0x57d)]||0x0,'ephemeralExpiration':_0x4af95a[_0x127f1b(0x38f)]||0x0});this['sendDataWebhook'](_0x127f1b(0x3ca),_0x2ba086);},'chats.update':async(_0x2cd927,_0xde460b)=>{const _0x19ba7e=_0x514a56;for(let _0x94c54a of _0x2cd927){let _0x30c618={'_id':_0x94c54a['id'],'owner':this[_0x19ba7e(0x3ec)][_0x19ba7e(0x490)],'archived':_0x94c54a[_0x19ba7e(0x374)],'muteEndTime':_0x94c54a['muteEndTime'],'ephemeralExpiration':_0x94c54a[_0x19ba7e(0x38f)]},_0x91d3e6=!0x1,_0x5aa216={};_0x30c618[_0x19ba7e(0x374)]!=null&&(this[_0x19ba7e(0x484)][_0x19ba7e(0x768)](this['instanceName']+'\x20('+this['instance'][_0x19ba7e(0x490)]+_0x19ba7e(0x395)+_0x94c54a['id']+_0x19ba7e(0x482)+_0x94c54a['archived']),_0x91d3e6=!0x0,_0x5aa216[_0x19ba7e(0x374)]=_0x94c54a[_0x19ba7e(0x374)]),_0x19ba7e(0x877)in _0x94c54a&&(this[_0x19ba7e(0x484)][_0x19ba7e(0x768)](this[_0x19ba7e(0x75c)]+'\x20('+this[_0x19ba7e(0x3ec)][_0x19ba7e(0x490)]+_0x19ba7e(0x48b)+_0x94c54a['id']+'\x20:\x20'+(_0x94c54a[_0x19ba7e(0x877)]??'0')),_0x91d3e6=!0x0,_0x5aa216[_0x19ba7e(0x877)]=_0x94c54a[_0x19ba7e(0x877)]??0x0),_0x19ba7e(0x38f)in _0x94c54a&&(this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x19ba7e(0x3ec)][_0x19ba7e(0x490)]+_0x19ba7e(0x734)+_0x94c54a['id']+_0x19ba7e(0x482)+(_0x94c54a[_0x19ba7e(0x38f)]!==void 0x0?_0x94c54a[_0x19ba7e(0x38f)]:'undefined')),_0x5aa216['ephemeralExpiration']=_0x94c54a[_0x19ba7e(0x38f)]===null?0x0:_0x94c54a['ephemeralExpiration'],_0x91d3e6=!0x0);let _0x2dcb8b;_0x91d3e6&&(_0x2dcb8b=await this[_0x19ba7e(0x799)][_0x19ba7e(0x4b2)][_0x19ba7e(0x828)]({'where':{'_id':_0x94c54a['id']}},_0x5aa216,this[_0x19ba7e(0x3ec)][_0x19ba7e(0x490)])),_0x2dcb8b&&U(this[_0x19ba7e(0x75c)],'chats',{'chat':_0x2dcb8b});}},'chats.delete':async _0x3a3294=>{const _0x5529a2=_0x514a56;for(let _0x14bc08 of _0x3a3294)if(_0x14bc08[_0x5529a2(0x426)](_0x5529a2(0x2b3))){await this['repository'][_0x5529a2(0x4b2)][_0x5529a2(0x6f7)]({'where':{'_id':_0x14bc08}},this[_0x5529a2(0x3ec)][_0x5529a2(0x490)]);let _0x431ba1={'where':{'key':{'remoteJid':_0x14bc08}}};await this[_0x5529a2(0x799)]['message'][_0x5529a2(0x6f7)](_0x431ba1,this[_0x5529a2(0x3ec)][_0x5529a2(0x490)]);}else{await this[_0x5529a2(0x799)]['chat'][_0x5529a2(0x828)]({'where':{'_id':_0x14bc08}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x5529a2(0x3ec)][_0x5529a2(0x490)]);let _0x6b4ccb={'where':{'key':{'remoteJid':_0x14bc08}}};await this[_0x5529a2(0x799)][_0x5529a2(0x5b7)][_0x5529a2(0x6f7)](_0x6b4ccb,this[_0x5529a2(0x3ec)]['wuid']);}this['sendDataWebhook'](_0x5529a2(0x455),[..._0x3a3294]);}},this[_0x514a56(0x317)]={'contacts.upsert':async(_0x29501e,_0x22118f)=>{const _0x41961c=_0x514a56;let _0x382e4d=await this[_0x41961c(0x799)]['contact'][_0x41961c(0x2c5)]({'where':{}},this[_0x41961c(0x3ec)][_0x41961c(0x490)]),_0x2a47a3=[];for await(let _0x472681 of _0x29501e)_0x382e4d[_0x41961c(0x2c5)](_0x594978=>_0x594978['_id']===_0x472681['id'])||_0x2a47a3[_0x41961c(0x57f)]({'_id':_0x472681['id'],'pushName':_0x472681?.[_0x41961c(0x1f8)]||_0x472681?.['verifiedName'],'owner':this['instance']['wuid']});this[_0x41961c(0x77b)](_0x41961c(0x6fa),_0x2a47a3),await this[_0x41961c(0x799)][_0x41961c(0x3d5)][_0x41961c(0x292)](_0x2a47a3);},'contacts.update':async(_0x3689d4,_0x5aadf6)=>{const _0x59bfe3=_0x514a56;let _0x294598=[];for await(let _0x1532b9 of _0x3689d4)_0x294598[_0x59bfe3(0x57f)]({'_id':_0x1532b9['id'],'pushName':_0x1532b9?.[_0x59bfe3(0x1f8)]??_0x1532b9?.[_0x59bfe3(0x258)],'owner':this[_0x59bfe3(0x3ec)]['wuid']});this['sendDataWebhook'](_0x59bfe3(0x85a),_0x294598);}},this[_0x514a56(0x5bc)]={'messaging-history.set':async({messages:_0x191ec7,chats:_0x1cc310,isLatest:_0x39d679},_0x39db97)=>{const _0x5316b9=_0x514a56;if(_0x39d679){let _0x2ceeea=await Promise[_0x5316b9(0x5ec)](_0x1cc310[_0x5316b9(0x276)](async _0x2c6658=>({'_id':_0x2c6658['id'],'owner':this[_0x5316b9(0x3ec)][_0x5316b9(0x490)],'group':_0x2c6658['id'][_0x5316b9(0x426)](_0x5316b9(0x2b3)),'name':_0x2c6658[_0x5316b9(0x1f8)]||_0x2c6658[_0x5316b9(0x5e4)]||_0x2c6658['username']||null,'contactname':null,'lastmsg':_0x2c6658[_0x5316b9(0x553)]&&_0x2c6658['conversationTimestamp'][_0x5316b9(0x44c)]()[_0x5316b9(0x836)]<0xd?_0x2c6658['conversationTimestamp']*0x3e8:_0x2c6658['conversationTimestamp']||null,'archived':_0x2c6658[_0x5316b9(0x374)]||!0x1,'unreadcount':_0x2c6658['unreadCount']||0x0,'ephemeralExpiration':_0x2c6658[_0x5316b9(0x38f)]||0x0,'muteEndTime':_0x2c6658[_0x5316b9(0x877)]||0x0})));this[_0x5316b9(0x77b)](_0x5316b9(0x2c0),_0x2ceeea),await this[_0x5316b9(0x7bb)](_0x2ceeea,_0x39db97);}let _0x347020=[],_0x22a60e=Date[_0x5316b9(0x673)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x5c8034]of Object[_0x5316b9(0x852)](_0x191ec7)){if(_0x5c8034[_0x5316b9(0x5b7)]?.[_0x5316b9(0x856)]||_0x5c8034['message']?.[_0x5316b9(0x88a)]||!_0x5c8034[_0x5316b9(0x5b7)]||_0x5c8034['key'][_0x5316b9(0x166)]===_0x5316b9(0x60d)||(xs[_0x5316b9(0x2ab)][_0x5316b9(0x15b)](_0x5c8034?.['messageTimestamp'])&&(_0x5c8034[_0x5316b9(0x692)]=_0x5c8034[_0x5316b9(0x692)]?.[_0x5316b9(0x2ea)]()),_0x5c8034[_0x5316b9(0x692)]&&_0x5c8034[_0x5316b9(0x692)][_0x5316b9(0x44c)]()[_0x5316b9(0x836)]<0xd&&(_0x5c8034['messageTimestamp']=_0x5c8034[_0x5316b9(0x692)]*0x3e8),_0x5c8034[_0x5316b9(0x692)]<_0x22a60e))continue;let _0x117a13=(0x0,w[_0x5316b9(0x7b0)])(_0x5c8034[_0x5316b9(0x5b7)]),_0x548f4f=(0x0,w[_0x5316b9(0x366)])(_0x117a13),{message_normalized:_0x16eda7}=this[_0x5316b9(0x48f)](_0x117a13,_0x548f4f,null);Object['keys'](_0x16eda7)[_0x5316b9(0x836)]>0x0&&_0x347020[_0x5316b9(0x57f)]({'_id':_0x5c8034[_0x5316b9(0x27f)]['id'],'key':_0x5c8034[_0x5316b9(0x27f)],'pushName':_0x5c8034[_0x5316b9(0x870)],'participant':_0x5c8034[_0x5316b9(0x39a)],'message':_0x117a13,'messageType':_0x548f4f,'message_normalized':{'key':_0x5c8034['key'],'pushName':_0x5c8034['pushName'],'messageTimestamp':_0x5c8034[_0x5316b9(0x692)],..._0x16eda7},'messageTimestamp':_0x5c8034[_0x5316b9(0x692)],'owner':this[_0x5316b9(0x3ec)][_0x5316b9(0x490)]});}_0x39db97['ENABLED']&&_0x347020['length']>0x0&&(this['logger'][_0x5316b9(0x768)](this[_0x5316b9(0x75c)]+'\x20('+this[_0x5316b9(0x3ec)][_0x5316b9(0x490)]+_0x5316b9(0x872)+_0x347020[_0x5316b9(0x836)]+_0x5316b9(0x64f)+this[_0x5316b9(0x3ec)][_0x5316b9(0x490)]+'\x20inseridas\x20no\x20banco\x20de\x20dados...'),await this[_0x5316b9(0x799)]['message']['insert']([..._0x347020],this[_0x5316b9(0x3ec)][_0x5316b9(0x490)])),this[_0x5316b9(0x77b)](_0x5316b9(0x7c0),[..._0x347020]),_0x191ec7=void 0x0;},'messages.upsert':async({messages:_0x3773c7,type:_0x1cbe3f},_0x5564aa)=>{const _0x579d7a=_0x514a56;for(let _0x27086f of _0x3773c7){if(this[_0x579d7a(0x3c9)]?.['groups_ignore']&&_0x27086f[_0x579d7a(0x27f)][_0x579d7a(0x166)][_0x579d7a(0x243)](_0x579d7a(0x2b3))){this[_0x579d7a(0x484)]['verbose'](this[_0x579d7a(0x75c)]+'\x20('+this[_0x579d7a(0x3ec)][_0x579d7a(0x490)]+'):\x20[messages.upsert]\x20group\x20ignored');return;}if(_0x1cbe3f!==_0x579d7a(0x69c)||!_0x27086f?.[_0x579d7a(0x5b7)]||_0x27086f[_0x579d7a(0x5b7)]?.[_0x579d7a(0x856)]||_0x27086f[_0x579d7a(0x5b7)][_0x579d7a(0x88a)]||_0x27086f[_0x579d7a(0x27f)]['remoteJid']===_0x579d7a(0x60d))return;let _0x10777e=null,_0x48ae55=null;if(_0x27086f['messageStubParameters']&&_0x27086f[_0x579d7a(0x53f)][0x0]==='Message\x20absent\x20from\x20node'){console[_0x579d7a(0x62b)](_0x579d7a(0x876)),Pt[_0x27086f[_0x579d7a(0x27f)]['id']]=_0x27086f,this[_0x579d7a(0x200)](_0x27086f,0x0);return;}Pt[_0x27086f['key']['id']]&&(console[_0x579d7a(0x62b)](_0x579d7a(0x2c1)),delete Pt[_0x27086f[_0x579d7a(0x27f)]['id']]);try{_0x10777e=await this[_0x579d7a(0x54b)](_0x27086f),_0x48ae55=_0x10777e?_0x10777e['join'](','):null;}catch(_0x539f78){this[_0x579d7a(0x484)][_0x579d7a(0x768)](this[_0x579d7a(0x75c)]+'\x20('+this[_0x579d7a(0x3ec)][_0x579d7a(0x490)]+'):\x20'+(_0x539f78 instanceof Error?_0x539f78['message']:JSON[_0x579d7a(0x62f)](_0x539f78,null,0x2))),_0x48ae55=_0x579d7a(0x4ca);}this[_0x579d7a(0x296)][_0x579d7a(0x1ac)]('unavailable'),xs['default'][_0x579d7a(0x15b)](_0x27086f['messageTimestamp'])&&(_0x27086f['messageTimestamp']=_0x27086f[_0x579d7a(0x692)]?.['toNumber']()),_0x27086f[_0x579d7a(0x692)]&&_0x27086f[_0x579d7a(0x692)]['toString']()[_0x579d7a(0x836)]<0xd&&(_0x27086f['messageTimestamp']=_0x27086f[_0x579d7a(0x692)]*0x3e8);let _0x325cfc=_0x27086f[_0x579d7a(0x5b7)],_0x45d997=(0x0,w['normalizeMessageContent'])(_0x325cfc),_0x10ff16=(0x0,w[_0x579d7a(0x366)])(_0x45d997),{messageContent:_0x2ec891,message_normalized:_0x1c2096}=this[_0x579d7a(0x48f)](_0x45d997,_0x10ff16,_0x48ae55);_0x10ff16===_0x579d7a(0x856)&&_0x2ec891?.[_0x579d7a(0x7f2)]&&(_0x10ff16=_0x579d7a(0x7f2));let _0x41bdf0,_0x59144f=_0x27086f['key'][_0x579d7a(0x166)]['endsWith'](_0x579d7a(0x2b3));if(_0x27086f[_0x579d7a(0x27f)]['fromMe'])_0x41bdf0=this[_0x579d7a(0x3ec)]['profilePictureUrl'];else{let _0x34bc77=_0x59144f?_0x27086f[_0x579d7a(0x27f)][_0x579d7a(0x39a)]:_0x27086f['key'][_0x579d7a(0x166)];_0x41bdf0=(await this[_0x579d7a(0x7a1)](_0x34bc77,_0x27086f[_0x579d7a(0x870)],!0x1))[_0x579d7a(0x15c)][_0x579d7a(0x4d1)];}let _0x3b61e2={'_id':_0x27086f['key']['id'],'key':_0x27086f[_0x579d7a(0x27f)],'isGroup':_0x59144f,'profilePictureUrl':_0x41bdf0,'pushName':_0x27086f[_0x579d7a(0x870)],'message':_0x45d997,'messageType':_0x10ff16,'message_normalized':{'key':_0x27086f[_0x579d7a(0x27f)],'pushName':_0x27086f[_0x579d7a(0x870)],'messageTimestamp':_0x27086f[_0x579d7a(0x692)],'source':(0x0,w[_0x579d7a(0x86c)])(_0x27086f[_0x579d7a(0x27f)]['id']),..._0x1c2096},'messageTimestamp':_0x27086f[_0x579d7a(0x692)],'owner':this[_0x579d7a(0x3ec)][_0x579d7a(0x490)],'source':(0x0,w[_0x579d7a(0x86c)])(_0x27086f[_0x579d7a(0x27f)]['id']),'expiration':_0x2ec891?.[_0x579d7a(0x496)]?.[_0x579d7a(0x2d1)]||0x0};_0x2ec891||(this[_0x579d7a(0x484)][_0x579d7a(0x62b)](_0x579d7a(0x21a)),this[_0x579d7a(0x484)][_0x579d7a(0x62b)](_0x3b61e2)),this[_0x579d7a(0x484)][_0x579d7a(0x2c3)](this[_0x579d7a(0x75c)]+'\x20('+this[_0x579d7a(0x3ec)][_0x579d7a(0x490)]+'):\x20'+(_0x3b61e2[_0x579d7a(0x27f)]?.['fromMe']?_0x579d7a(0x661):_0x579d7a(0x617))+'\x20['+_0x3b61e2[_0x579d7a(0x27f)]?.['remoteJid'][_0x579d7a(0x4d0)](_0x579d7a(0x20d),'')+_0x579d7a(0x77c)+_0x3b61e2[_0x579d7a(0x399)]+')'),_0x3b61e2[_0x579d7a(0x78e)]?.['text']&&this[_0x579d7a(0x484)][_0x579d7a(0x2c3)](_0x27086f['key']['id']+':\x20'+_0x3b61e2[_0x579d7a(0x78e)]?.[_0x579d7a(0x7a9)]),await this['repository'][_0x579d7a(0x5b7)][_0x579d7a(0x292)]([_0x3b61e2],this['instance'][_0x579d7a(0x490)]),this[_0x579d7a(0x77b)](_0x579d7a(0x74f),_0x3b61e2),U(this[_0x579d7a(0x75c)],_0x579d7a(0x3e7),{'message':_0x3b61e2}),_0x27086f[_0x579d7a(0x27f)][_0x579d7a(0x166)]!==_0x579d7a(0x60d)&&await this[_0x579d7a(0x568)](_0x5564aa,_0x3b61e2,'MESSAGES_UPSERT');}},'messages.update':async(_0x2f1efa,_0x5abc0d)=>{const _0x3fa7a8=_0x514a56;let _0x182b34={0x0:'ERROR',0x1:_0x3fa7a8(0x278),0x2:'SERVER_ACK',0x3:'DELIVERY_ACK',0x4:_0x3fa7a8(0x36a),0x5:_0x3fa7a8(0x5ea)};for await(let {key:_0x1540be,update:_0x2ae91e}of _0x2f1efa){if(this[_0x3fa7a8(0x3c9)]?.[_0x3fa7a8(0x239)]&&_0x1540be[_0x3fa7a8(0x166)][_0x3fa7a8(0x243)](_0x3fa7a8(0x2b3))){this[_0x3fa7a8(0x484)][_0x3fa7a8(0x768)](this[_0x3fa7a8(0x75c)]+'\x20('+this[_0x3fa7a8(0x3ec)][_0x3fa7a8(0x490)]+_0x3fa7a8(0x32a));return;}if(_0x1540be['remoteJid']!==_0x3fa7a8(0x60d)){let _0x2b78b5=Date[_0x3fa7a8(0x673)](),_0x12ad85;_0x2ae91e[_0x3fa7a8(0x5b7)]===null&&_0x2ae91e['status']===void 0x0?_0x12ad85=_0x3fa7a8(0x6c8):_0x12ad85=_0x182b34[_0x2ae91e[_0x3fa7a8(0x360)]];let _0x1c92b4=_0x1540be[_0x3fa7a8(0x166)][_0x3fa7a8(0x4d0)](/:\d{1,2}@/g,'@'),_0x2cf255={..._0x1540be,'remoteJid':_0x1c92b4,'status':_0x12ad85,'datetime':_0x2b78b5,'owner':this[_0x3fa7a8(0x3ec)][_0x3fa7a8(0x490)]};this[_0x3fa7a8(0x77b)](_0x3fa7a8(0x641),_0x2cf255),await this['updateMessage'](_0x1540be,_0x2cf255);}}},'labels.association':async({type:_0x57d92c,association:_0x4278ff})=>{const _0x6ee835=_0x514a56;if(_0x4278ff[_0x6ee835(0x717)]==='label_jid'){let _0x4f8df4,_0x27f3e8=0x0;for(;!_0x4f8df4&&_0x27f3e8<this[_0x6ee835(0x880)];)_0x4f8df4=await this[_0x6ee835(0x799)]['chat']['findOne']({'where':{'_id':_0x4278ff[_0x6ee835(0x40d)]}},this[_0x6ee835(0x3ec)][_0x6ee835(0x490)]),_0x4f8df4||(_0x27f3e8++,this[_0x6ee835(0x484)][_0x6ee835(0x7ed)](this[_0x6ee835(0x75c)]+'\x20('+this[_0x6ee835(0x3ec)][_0x6ee835(0x490)]+_0x6ee835(0x805)+_0x4278ff[_0x6ee835(0x40d)]+_0x6ee835(0x3c8)+this[_0x6ee835(0x6e6)]+'ms\x20(tentativa\x20'+_0x27f3e8+'/'+this[_0x6ee835(0x880)]+')'),await this['delayChatLabel'](this[_0x6ee835(0x6e6)]));if(!_0x4f8df4){this[_0x6ee835(0x484)]['error'](_0x6ee835(0x2bc)+_0x4278ff[_0x6ee835(0x40d)]+_0x6ee835(0x2bd)+this[_0x6ee835(0x880)]+_0x6ee835(0x5a7));return;}switch(_0x57d92c){case _0x6ee835(0x67f):console[_0x6ee835(0x2c3)](_0x4278ff),await this[_0x6ee835(0x799)][_0x6ee835(0x4b2)][_0x6ee835(0x828)]({'where':{'_id':_0x4278ff[_0x6ee835(0x40d)]}},{'leadInfo.etiquetas':_0x4278ff[_0x6ee835(0x620)]},this['instance']['wuid'],void 0x0,_0x6ee835(0x62e));break;case _0x6ee835(0x55f):console['log'](_0x4278ff),await this[_0x6ee835(0x799)][_0x6ee835(0x4b2)][_0x6ee835(0x828)]({'where':{'_id':_0x4278ff['chatId']}},{'leadInfo.etiquetas':_0x4278ff[_0x6ee835(0x620)]},this['instance'][_0x6ee835(0x490)],void 0x0,_0x6ee835(0x2e5));break;default:this['logger'][_0x6ee835(0x62b)]('unknown\x20operation\x20type\x20['+_0x57d92c+']');}}},'labels.edit':async _0x32915d=>{const _0x3fdfae=_0x514a56;if(!_0x32915d||!_0x32915d['id']){this['logger'][_0x3fdfae(0x62b)](_0x3fdfae(0x5b8));return;}if(!_0x32915d[_0x3fdfae(0x607)]){let _0x2df7cc=['#ff9484','#64c4ff',_0x3fdfae(0x37f),_0x3fdfae(0x222),_0x3fdfae(0x279),_0x3fdfae(0x7b8),_0x3fdfae(0x5aa),'#d3a91f',_0x3fdfae(0x372),_0x3fdfae(0x6fc),_0x3fdfae(0x177),'#ffc5c7',_0x3fdfae(0x770),'#f64847',_0x3fdfae(0x21c),'#83e421','#ffae04','#b4ebff',_0x3fdfae(0x44a),_0x3fdfae(0x37c)],_0x52a3fa;typeof _0x32915d[_0x3fdfae(0x652)]==_0x3fdfae(0x5f6)&&_0x32915d[_0x3fdfae(0x652)]>=0x0&&_0x32915d[_0x3fdfae(0x652)]<_0x2df7cc['length']?_0x52a3fa=_0x2df7cc[_0x32915d[_0x3fdfae(0x652)]]:(this[_0x3fdfae(0x484)][_0x3fdfae(0x62b)]('Nmero\x20da\x20cor\x20invlido\x20ou\x20fora\x20do\x20intervalo:\x20'+_0x32915d[_0x3fdfae(0x652)]),_0x52a3fa=_0x3fdfae(0x65c));let _0x2c0ff2={'_id':_0x32915d['id'],'colorHex':_0x52a3fa,'color':_0x32915d?.[_0x3fdfae(0x652)],'name':_0x32915d?.[_0x3fdfae(0x1f8)],'owner':this[_0x3fdfae(0x3ec)]['wuid']};await this['repository'][_0x3fdfae(0x835)][_0x3fdfae(0x828)]({'where':{'_id':_0x32915d['id']}},_0x2c0ff2,this[_0x3fdfae(0x3ec)][_0x3fdfae(0x490)]),this[_0x3fdfae(0x484)]['info'](this['instanceName']+'\x20('+this['instance'][_0x3fdfae(0x490)]+'):\x20Rtulo\x20atualizado:\x20'+_0x32915d);}_0x32915d['deleted']&&(await this['repository'][_0x3fdfae(0x835)][_0x3fdfae(0x6f7)]({'where':{'_id':_0x32915d['id']}},this[_0x3fdfae(0x3ec)][_0x3fdfae(0x490)]),this[_0x3fdfae(0x484)][_0x3fdfae(0x7ed)]('Rtulo\x20deletado:\x27,\x20'+_0x32915d['id']));}},this[_0x514a56(0x4e4)]={'groups.upsert':async _0x3f1ff5=>{const _0x411a9a=_0x514a56;this[_0x411a9a(0x3c9)]?.[_0x411a9a(0x239)]||this[_0x411a9a(0x77b)](_0x411a9a(0x472),_0x3f1ff5);for(let _0x38fab5 of _0x3f1ff5)await this['updateGroupWebhook'](_0x38fab5);},'groups.update':async _0x37bd1f=>{const _0x51600c=_0x514a56;this[_0x51600c(0x3c9)]?.[_0x51600c(0x239)]||this['sendDataWebhook'](_0x51600c(0x1cf),_0x37bd1f);for(let _0x4ad8f1 of _0x37bd1f)await this[_0x51600c(0x540)](_0x4ad8f1);},'group-participants.update':async _0xbb6b5d=>{const _0x2297ca=_0x514a56;this[_0x2297ca(0x3c9)]?.[_0x2297ca(0x239)]||this[_0x2297ca(0x77b)](_0x2297ca(0x283),_0xbb6b5d),await this[_0x2297ca(0x6dd)](_0xbb6b5d);}},this['delayChatLabel_MAX_RETRIES']=0x5,this[_0x514a56(0x6e6)]=0x1388,this[_0x514a56(0x49c)]=0x0,this[_0x514a56(0x54b)]=async _0x4a8726=>{const _0x5570c4=_0x514a56;if(_0x4a8726[_0x5570c4(0x5b7)]?.[_0x5570c4(0x64c)]){let _0x233223=await this[_0x5570c4(0x62a)](_0x4a8726[_0x5570c4(0x5b7)][_0x5570c4(0x64c)][_0x5570c4(0x68d)],!0x0);if(_0x233223){let _0x42ad02=_0x233223[_0x5570c4(0x27f)][_0x5570c4(0x7f7)]?this[_0x5570c4(0x3ec)][_0x5570c4(0x490)]+_0x5570c4(0x20d):_0x233223[_0x5570c4(0x27f)][_0x5570c4(0x39a)]||_0x233223[_0x5570c4(0x27f)][_0x5570c4(0x166)],_0x435304=_0x233223[_0x5570c4(0x27f)]['id'],_0x7fc8e8=_0x233223[_0x5570c4(0x5b7)],_0x28fef5=Buffer[_0x5570c4(0x4f4)](_0x7fc8e8[_0x5570c4(0x647)][_0x5570c4(0x790)][_0x5570c4(0x44c)]('hex'),_0x5570c4(0x6a5)),_0x1aa73f=(0x0,w[_0x5570c4(0x5a8)])(_0x4a8726[_0x5570c4(0x5b7)]['pollUpdateMessage'][_0x5570c4(0x3f6)],{'pollCreatorJid':_0x42ad02,'pollMsgId':_0x435304,'pollEncKey':_0x28fef5,'voterJid':_0x4a8726[_0x5570c4(0x27f)][_0x5570c4(0x7f7)]?this[_0x5570c4(0x3ec)][_0x5570c4(0x490)]+_0x5570c4(0x20d):_0x4a8726[_0x5570c4(0x27f)][_0x5570c4(0x166)][_0x5570c4(0x426)](_0x5570c4(0x216))?_0x4a8726[_0x5570c4(0x27f)][_0x5570c4(0x39a)]:_0x4a8726[_0x5570c4(0x27f)]['remoteJid']}),_0xdd39a1=[],_0x4584a5=_0x1aa73f[_0x5570c4(0x412)][_0x5570c4(0x276)](_0x16ced2=>Buffer['from'](_0x16ced2)[_0x5570c4(0x44c)]('hex'));for(let {optionName:_0x4ceed2}of _0x7fc8e8[_0x5570c4(0x599)]?.[_0x5570c4(0x4c1)]||_0x7fc8e8[_0x5570c4(0x87d)]?.[_0x5570c4(0x4c1)]||_0x7fc8e8[_0x5570c4(0x6ea)]?.[_0x5570c4(0x4c1)])_0x4584a5['indexOf']((0x0,w[_0x5570c4(0x2b1)])(Buffer[_0x5570c4(0x4f4)](_0x4ceed2))[_0x5570c4(0x44c)](_0x5570c4(0x6a5)))>-0x1&&_0xdd39a1['push'](_0x4ceed2);return _0xdd39a1;}}return null;},this[_0x514a56(0x48f)]=(_0x2088f8,_0x4265dd,_0x30eca2)=>{const _0x545719=_0x514a56;try{let _0x9c9754=_0x2088f8?(0x0,w['extractMessageContent'])(_0x2088f8)[_0x4265dd]:void 0x0,_0x24ca96={},_0x4cc3fa=null,_0x21f273=null,_0x475038=null;_0x4265dd===_0x545719(0x856)&&_0x9c9754?.[_0x545719(0x7f2)]&&(_0x4265dd=(0x0,w[_0x545719(0x366)])(_0x9c9754[_0x545719(0x7f2)]),_0x4cc3fa=_0x2088f8['protocolMessage'][_0x545719(0x27f)]['id'],_0x9c9754=_0x2088f8[_0x545719(0x856)][_0x545719(0x7f2)][_0x4265dd]),_0x2088f8[_0x4265dd]?.[_0x545719(0x496)]?.[_0x545719(0x549)]&&_0x2088f8[_0x4265dd]?.['contextInfo']?.['quotedMessage']&&(_0x21f273=_0x2088f8[_0x4265dd][_0x545719(0x496)]['stanzaId']),_0x2088f8[_0x545719(0x4ed)]&&(_0x475038=_0x2088f8['reactionMessage'][_0x545719(0x27f)]['id']);let _0x507752;if(_0x9c9754&&typeof _0x9c9754==_0x545719(0x808)&&_0x545719(0x68d)in _0x9c9754&&({pollCreationMessageKey:_0x507752}=_0x9c9754),_0x4265dd===_0x545719(0x599)||_0x4265dd===_0x545719(0x6ea)||_0x4265dd===_0x545719(0x87d)){let _0x239965=_0x9c9754[_0x545719(0x4c1)]['map'](_0x421fbc=>_0x421fbc[_0x545719(0x1ec)])[_0x545719(0x241)]('|');_0x24ca96[_0x545719(0x66d)]=_0x239965;}let _0x420852='';if(_0x9c9754&&(_0x420852+=_0x9c9754['name']?_0x9c9754[_0x545719(0x1f8)]:'',_0x420852+=_0x9c9754[_0x545719(0x82c)]?'\x20'+_0x9c9754[_0x545719(0x82c)]:'',_0x420852+=_0x9c9754[_0x545719(0x68a)]?'\x20'+_0x9c9754[_0x545719(0x68a)]:'',_0x420852+=_0x9c9754['displayName']?'\x20'+_0x9c9754[_0x545719(0x5e4)]:''),_0x4265dd===_0x545719(0x757)){_0x420852=(_0x9c9754[_0x545719(0x560)]||'')+'\x0a'+(_0x9c9754['description']||'')+'\x0a'+(_0x9c9754[_0x545719(0x59d)]||'');let _0x150d70=this[_0x545719(0x189)](_0x9c9754['sections']);_0x24ca96[_0x545719(0x66d)]=_0x150d70;}if(_0x4265dd===_0x545719(0x63c)&&(_0x30eca2=_0x9c9754['title']),_0x9c9754&&_0x9c9754[_0x545719(0x705)]){let _0x271295=this['formatVCard'](JSON[_0x545719(0x62f)](_0x9c9754['vcard'],null,0x2));_0x420852=_0x420852+'\x0a'+_0x271295;}if(_0x9c9754){let {sections:_0x519a68,listType:_0x1fc52a,displayName:_0x219d8d,vcard:_0x53a05a,contactVcard:_0x247c96,name:_0x1bba62,caption:_0x520356,conversation:_0x3bd7c1,pollCreationMessageKey:_0x5ff709,footerText:_0x7d32a8,contentText:_0x4250e2,pageCount:_0x41320f,headerType:_0x2a7801,isAvatar:_0x2649c8,isAnimated:_0x1cf0bd,fallbackLc:_0xfc51d1,fallbackLg:_0x1474a2,namespace:_0x3acd80,elementName:_0x6c4353,localizableParams:_0x6702d4,viewOnce:_0x2a994b,height:_0x421ee7,width:_0xc0aa16,key:_0x3fda2f,firstScanLength:_0x241e23,firstScanSidecar:_0x90e322,gifPlayback:_0x299298,gifAttribution:_0x3de336,midQualityFileSha256:_0x378b7c,scansSidecar:_0x1863d2,streamingSidecar:_0x3b401e,thumbnailHeight:_0x1cb970,thumbnailWidth:_0x9c0d0d,thumbnailEncSha256:_0x44f536,thumbnailDirectPath:_0x5214be,canonicalUrl:_0x46938c,matchedText:_0x1ed55e,previewType:_0x55f426,thumbnailSha256:_0x193ed2,deviceListMetadataVersion:_0x54213d,inviteLinkGroupTypeV2:_0x1dbbb3,interactiveAnnotations:_0x16bb78,scanLengths:_0x38f7ca,jpegThumbnail:_0xd127e2,url:_0x35d1b2,mediaKeyTimestamp:_0xf4f3be,waveform:_0x2cf975,stickerSentTs:_0x2f2882,firstFrameLength:_0x4bdcb3,fileEncSha256:_0x48433b,contextInfo:_0x409a69,firstFrameSidecar:_0x289eda,directPath:_0x2420b9,fileSha256:_0x31322a,mediaKey:_0x19a1f1,senderTimestampMs:_0x59b2bd,..._0x24dc82}=_0x9c9754;(_0x4265dd===_0x545719(0x757)||_0x4265dd===_0x545719(0x63c))&&(delete _0x24dc82[_0x545719(0x560)],delete _0x24dc82['description']),typeof _0x9c9754==_0x545719(0x2f2)?_0x24ca96={'text':_0x9c9754,'type':_0x4265dd||_0x545719(0x68a),..._0x4cc3fa&&{'edited':_0x4cc3fa},..._0x21f273&&{'quoted':_0x21f273},..._0x475038&&{'reaction':_0x475038}}:_0x24ca96={'text':_0x420852,..._0x24dc82,..._0x4265dd===_0x545719(0x64c)?{'poll_id':_0x9c9754[_0x545719(0x68d)]['id'],'quoted':_0x9c9754[_0x545719(0x68d)]['id'],'vote':_0x30eca2}:{},..._0x4265dd===_0x545719(0x63c)?{'vote':_0x30eca2}:{},'type':_0x4265dd,..._0x4cc3fa&&{'edited':_0x4cc3fa},..._0x21f273&&{'quoted':_0x21f273},..._0x475038&&{'reaction':_0x475038},...(_0x4265dd===_0x545719(0x599)||_0x4265dd===_0x545719(0x6ea)||_0x4265dd==='pollCreationMessageV3'||_0x4265dd===_0x545719(0x757))&&{'convertedOptions':_0x24ca96[_0x545719(0x66d)]}};}return{'messageType':_0x4265dd,'messageContent':_0x9c9754,'message_normalized':_0x24ca96};}catch(_0x35381e){return this[_0x545719(0x484)][_0x545719(0x62b)](_0x545719(0x85e)+_0x35381e),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x514a56(0x801)]=new _s[(_0x514a56(0x3fc))](),this[_0x514a56(0x32f)]=new _s['Mutex'](),this['pendingMessages']=[],(this['cleanStore'](),this[_0x514a56(0x3ec)]['qrcode']={'count':0x0},this[_0x514a56(0x3ec)]['ScheduleMessage']={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}set[a0_0x591e8d(0x75c)](_0x486cd8){const _0x3bf9c=a0_0x591e8d;if(!_0x486cd8){this['instance']['name']=(0x0,Ai['v4'])();return;}this[_0x3bf9c(0x3ec)][_0x3bf9c(0x1f8)]=_0x486cd8,this[_0x3bf9c(0x77b)](_0x3bf9c(0x57e),{'instance':this[_0x3bf9c(0x3ec)][_0x3bf9c(0x1f8)],'status':_0x3bf9c(0x503)});}get[a0_0x591e8d(0x75c)](){const _0x3b3f84=a0_0x591e8d;return this[_0x3b3f84(0x3ec)][_0x3b3f84(0x1f8)];}get[a0_0x591e8d(0x490)](){const _0x57fe74=a0_0x591e8d;return this['instance'][_0x57fe74(0x490)];}async['getProfileName'](){const _0x2c5943=a0_0x591e8d;let _0x2fc277=this[_0x2c5943(0x296)][_0x2c5943(0x398)]?.[_0x2c5943(0x1f8)]??this[_0x2c5943(0x296)][_0x2c5943(0x398)]?.[_0x2c5943(0x258)];if(!_0x2fc277){if(this[_0x2c5943(0x285)][_0x2c5943(0x2f4)](_0x2c5943(0x229))['ENABLED']){let _0x48c675=await $['getClient']()['db'](this[_0x2c5943(0x285)]['get'](_0x2c5943(0x229))[_0x2c5943(0x848)][_0x2c5943(0x186)]+_0x2c5943(0x5c1))[_0x2c5943(0x26b)](this['instanceName'])[_0x2c5943(0x685)]({'_id':_0x2c5943(0x73e)});if(_0x48c675){let _0x1cbbb7=JSON[_0x2c5943(0x3da)](JSON['stringify'](_0x48c675),w[_0x2c5943(0x75a)][_0x2c5943(0x882)]);_0x2fc277=_0x1cbbb7['me']?.['name']||_0x1cbbb7['me']?.['verifiedName'];}}else{if((0x0,De[_0x2c5943(0x354)])((0x0,L[_0x2c5943(0x241)])(fe,this[_0x2c5943(0x75c)],_0x2c5943(0x30b)))){let _0x4127ce=JSON['parse']((0x0,De[_0x2c5943(0x3f7)])((0x0,L[_0x2c5943(0x241)])(fe,this[_0x2c5943(0x75c)],_0x2c5943(0x30b)),{'encoding':'utf-8'}));_0x2fc277=_0x4127ce['me']?.['name']||_0x4127ce['me']?.[_0x2c5943(0x258)];}}}return _0x2fc277;}get[a0_0x591e8d(0x577)](){const _0xcd5b7f=a0_0x591e8d;return this['instance'][_0xcd5b7f(0x577)];}get['qrCode'](){const _0x5c3553=a0_0x591e8d;return this['instance']['qrcode']?.[_0x5c3553(0x434)]?{'pairingCode':this[_0x5c3553(0x3ec)][_0x5c3553(0x415)]?.['pairingCode']}:{'code':this[_0x5c3553(0x3ec)]['qrcode']?.[_0x5c3553(0x58a)],'base64':this[_0x5c3553(0x3ec)][_0x5c3553(0x415)]?.[_0x5c3553(0x7f8)]};}async['loadWebhook'](){const _0x40ae88=a0_0x591e8d;let _0x86b052=await this[_0x40ae88(0x799)][_0x40ae88(0x3ff)][_0x40ae88(0x2c5)](this[_0x40ae88(0x75c)]);this[_0x40ae88(0x3c9)][_0x40ae88(0x18d)]=_0x86b052?.['url'],this[_0x40ae88(0x3c9)][_0x40ae88(0x3ab)]=_0x86b052?.[_0x40ae88(0x3ab)],this[_0x40ae88(0x3c9)][_0x40ae88(0x893)]=_0x86b052?.[_0x40ae88(0x893)],this[_0x40ae88(0x3c9)]['STATUS_INSTANCE']=_0x86b052?.['STATUS_INSTANCE'],this['localWebhook']['QRCODE_UPDATED']=_0x86b052?.[_0x40ae88(0x80e)],this[_0x40ae88(0x3c9)]['SEND_MESSAGE']=_0x86b052?.[_0x40ae88(0x795)],this[_0x40ae88(0x3c9)][_0x40ae88(0x440)]=_0x86b052?.[_0x40ae88(0x440)],this[_0x40ae88(0x3c9)]['MESSAGES_UPDATE']=_0x86b052?.[_0x40ae88(0x457)],this['localWebhook'][_0x40ae88(0x355)]=_0x86b052?.['GROUPS_UPSERT'],this[_0x40ae88(0x3c9)][_0x40ae88(0x4d5)]=_0x86b052?.[_0x40ae88(0x4d5)],this[_0x40ae88(0x3c9)][_0x40ae88(0x416)]=_0x86b052?.['GROUP_PARTICIPANTS_UPDATE'],this[_0x40ae88(0x3c9)]['CHATS_SET']=_0x86b052?.[_0x40ae88(0x7c3)],this[_0x40ae88(0x3c9)][_0x40ae88(0x280)]=_0x86b052?.[_0x40ae88(0x280)],this[_0x40ae88(0x3c9)][_0x40ae88(0x4e9)]=_0x86b052?.[_0x40ae88(0x4e9)],this[_0x40ae88(0x3c9)]['CHATS_DELETE']=_0x86b052?.[_0x40ae88(0x737)],this['localWebhook'][_0x40ae88(0x3d7)]=_0x86b052?.[_0x40ae88(0x3d7)],this[_0x40ae88(0x3c9)]['CONTACTS_UPSERT']=_0x86b052?.[_0x40ae88(0x7f9)],this[_0x40ae88(0x3c9)][_0x40ae88(0x5f8)]=_0x86b052?.[_0x40ae88(0x5f8)],this['localWebhook'][_0x40ae88(0x3d1)]=_0x86b052?.[_0x40ae88(0x3d1)],this[_0x40ae88(0x3c9)][_0x40ae88(0x328)]=_0x86b052?.[_0x40ae88(0x328)],this['localWebhook']['CONNECTION_UPDATE']=_0x86b052?.[_0x40ae88(0x528)],this[_0x40ae88(0x3c9)][_0x40ae88(0x239)]=_0x86b052?.[_0x40ae88(0x239)];}async[a0_0x591e8d(0x735)](_0x44e2f2){const _0x4456cb=a0_0x591e8d;let _0x1b0d2e=[_0x4456cb(0x812),_0x4456cb(0x18d),_0x4456cb(0x3ab),_0x4456cb(0x893),_0x4456cb(0x4b3),_0x4456cb(0x80e),_0x4456cb(0x457),'MESSAGES_UPSERT','SEND_MESSAGE',_0x4456cb(0x355),_0x4456cb(0x4d5),'GROUP_PARTICIPANTS_UPDATE',_0x4456cb(0x7c3),_0x4456cb(0x280),_0x4456cb(0x4e9),_0x4456cb(0x737),_0x4456cb(0x3d7),_0x4456cb(0x7f9),_0x4456cb(0x5f8),_0x4456cb(0x3d1),_0x4456cb(0x328),'CONNECTION_UPDATE',_0x4456cb(0x239)],_0x14a527={};return _0x1b0d2e[_0x4456cb(0x5ce)](_0x400224=>{_0x44e2f2[_0x400224]!==void 0x0&&(_0x14a527[_0x400224]=_0x44e2f2[_0x400224]);}),_0x14a527[_0x4456cb(0x18d)]&&(_0x14a527[_0x4456cb(0x18d)]=_0x14a527[_0x4456cb(0x18d)][_0x4456cb(0x311)]()),await this[_0x4456cb(0x799)][_0x4456cb(0x3ff)]['create'](_0x14a527,this[_0x4456cb(0x75c)]),Object[_0x4456cb(0x5ba)](this[_0x4456cb(0x3c9)],_0x14a527),await this['repository'][_0x4456cb(0x3ff)][_0x4456cb(0x2c5)](this[_0x4456cb(0x75c)]);}async['findWebhook'](){const _0x573a35=a0_0x591e8d;return await this['repository'][_0x573a35(0x3ff)][_0x573a35(0x2c5)](this[_0x573a35(0x75c)]);}async['sendDataWebhook'](_0xac31f9,_0x1f7f5b){const _0x24c124=a0_0x591e8d;let _0x2d348d=_0xac31f9[_0x24c124(0x4d0)](/[\.-]/gm,'_')[_0x24c124(0x453)](),_0x3821fa=this[_0x24c124(0x3c9)][_0x24c124(0x3ab)]&&(0x0,D[_0x24c124(0x66f)])(this[_0x24c124(0x3c9)][_0x24c124(0x18d)])?this['localWebhook']['url']+(this[_0x24c124(0x3c9)][_0x24c124(0x893)]?this[_0x24c124(0x461)][_0xac31f9]:''):null,_0x51d91f=this[_0x24c124(0x3c9)][_0x2d348d],_0x186b86=de&&de['enabled']&&(0x0,D['isURL'])(de[_0x24c124(0x18d)])?de[_0x24c124(0x18d)]+(de[_0x24c124(0x893)]?this['webhookMap'][_0xac31f9]:''):null,_0x358f8b=de?de[_0x2d348d]:null;if(_0x51d91f&&_0x3821fa)try{await Q[_0x24c124(0x2ab)]['create']({'baseURL':_0x3821fa})[_0x24c124(0x6ce)]('',{'event':_0xac31f9,'instance':this[_0x24c124(0x3ec)][_0x24c124(0x1f8)],'apikey':this['instance']['apikey'],'data':_0x1f7f5b}),this[_0x24c124(0x484)]['log'](this[_0x24c124(0x75c)]+'\x20('+this[_0x24c124(0x3ec)]['wuid']+_0x24c124(0x1c7)+_0xac31f9+':\x20'+_0x3821fa);}catch{this[_0x24c124(0x484)]['error'](this[_0x24c124(0x75c)]+'\x20('+this['instance'][_0x24c124(0x490)]+'):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0xac31f9+':\x20'+_0x3821fa);}if(_0x358f8b&&_0x186b86)try{await Q[_0x24c124(0x2ab)]['create']({'baseURL':_0x186b86})[_0x24c124(0x6ce)]('',{'event':_0xac31f9,'instance':this[_0x24c124(0x3ec)][_0x24c124(0x1f8)],'apikey':this[_0x24c124(0x3ec)][_0x24c124(0x1e5)],'data':_0x1f7f5b}),this[_0x24c124(0x484)][_0x24c124(0x2c3)](this[_0x24c124(0x75c)]+'\x20('+this[_0x24c124(0x3ec)][_0x24c124(0x490)]+_0x24c124(0x55b)+_0xac31f9+':\x20'+_0x186b86);}catch{this['logger'][_0x24c124(0x62b)](this[_0x24c124(0x75c)]+'\x20('+this[_0x24c124(0x3ec)][_0x24c124(0x490)]+_0x24c124(0x197)+_0xac31f9+':\x20'+_0x186b86);}}async[a0_0x591e8d(0x4a9)]({qr:_0x4d2db8,connection:_0x32e0e5,lastDisconnect:_0xd1c06c}){const _0x1ea029=a0_0x591e8d;if(_0x4d2db8){if(this[_0x1ea029(0x3ec)][_0x1ea029(0x415)][_0x1ea029(0x5fd)]===Po)return this[_0x1ea029(0x77b)]('qrcode.updated',{'message':_0x1ea029(0x428),'statusCode':w['DisconnectReason'][_0x1ea029(0x35a)]}),this['stateConnection']={'state':'refused','statusReason':w['DisconnectReason'][_0x1ea029(0x868)]},this[_0x1ea029(0x77b)]('connection.update',{'instance':this[_0x1ea029(0x3ec)][_0x1ea029(0x1f8)],...this[_0x1ea029(0x838)]}),this['sendDataWebhook'](_0x1ea029(0x57e),{'instance':this[_0x1ea029(0x3ec)][_0x1ea029(0x1f8)],'status':_0x1ea029(0x7b7)}),this[_0x1ea029(0x799)]['auth']['delete'](this['instance']['name']),this[_0x1ea029(0x358)]=!0x0,se[_0x1ea029(0x2cd)](W,this[_0x1ea029(0x3ec)][_0x1ea029(0x1f8)]),this['eventEmitter'][_0x1ea029(0x7cf)](_0x1ea029(0x1f5),this[_0x1ea029(0x3ec)][_0x1ea029(0x1f8)]);this['instance'][_0x1ea029(0x415)][_0x1ea029(0x5fd)]++;let _0x1035f0={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x1ea029(0x1cd),'dark':_0x1ea029(0x65c)}};Ii[_0x1ea029(0x2ab)][_0x1ea029(0x356)](_0x4d2db8,_0x1035f0,(_0x57ba09,_0x36c579)=>{const _0x59e990=_0x1ea029;if(_0x57ba09){this[_0x59e990(0x484)][_0x59e990(0x62b)](this[_0x59e990(0x75c)]+'\x20('+this[_0x59e990(0x3ec)][_0x59e990(0x490)]+_0x59e990(0x1b0)+(_0x57ba09 instanceof Error?_0x57ba09[_0x59e990(0x5b7)]:JSON[_0x59e990(0x62f)](_0x57ba09,null,0x2)));return;}this[_0x59e990(0x3ec)][_0x59e990(0x415)][_0x59e990(0x7f8)]=_0x36c579,this['instance']['qrcode'][_0x59e990(0x58a)]=_0x4d2db8,!this['phoneNumber']&&this['sendDataWebhook']('qrcode.updated',{'qrcode':{'instance':this[_0x59e990(0x3ec)][_0x59e990(0x1f8)],'pairingCode':this[_0x59e990(0x3ec)][_0x59e990(0x415)][_0x59e990(0x434)],'code':_0x4d2db8,'base64':_0x36c579}});}),this[_0x1ea029(0x6e2)]?this['instance'][_0x1ea029(0x415)][_0x1ea029(0x434)]||(await(0x0,w[_0x1ea029(0x1ca)])(0x7d0),this[_0x1ea029(0x3ec)][_0x1ea029(0x415)][_0x1ea029(0x434)]=await this[_0x1ea029(0x296)][_0x1ea029(0x3e9)](this[_0x1ea029(0x6e2)])):this[_0x1ea029(0x3ec)][_0x1ea029(0x415)][_0x1ea029(0x434)]=null,Ti[_0x1ea029(0x2ab)][_0x1ea029(0x62c)](_0x4d2db8,{'small':!0x0},_0x1555f0=>this[_0x1ea029(0x484)][_0x1ea029(0x2c3)](_0x1ea029(0x47f)+this[_0x1ea029(0x3ec)][_0x1ea029(0x1f8)]+_0x1ea029(0x613)+this[_0x1ea029(0x3ec)]['qrcode']['count']+_0x1ea029(0x4be)+this[_0x1ea029(0x3ec)]['qrcode'][_0x1ea029(0x434)]+'\x20}\x0a'+_0x1555f0));}if(_0x32e0e5&&(this[_0x1ea029(0x838)]={'state':_0x32e0e5,'statusReason':_0xd1c06c?.[_0x1ea029(0x62b)]?.[_0x1ea029(0x87c)]?.[_0x1ea029(0x39c)]??0xc8},this['sendDataWebhook'](_0x1ea029(0x4ac),{'instance':this[_0x1ea029(0x3ec)][_0x1ea029(0x1f8)],...this[_0x1ea029(0x838)]})),_0x32e0e5===_0x1ea029(0x3e5)){if(this[_0x1ea029(0x4a2)]++,this[_0x1ea029(0x84e)][_0x1ea029(0x57f)](Date[_0x1ea029(0x673)]()),this[_0x1ea029(0x84e)]=this['reconnectTimestamps'][_0x1ea029(0x516)](_0x5e5e38=>Date[_0x1ea029(0x673)]()-_0x5e5e38<this[_0x1ea029(0x796)]),_0xd1c06c[_0x1ea029(0x62b)]?.[_0x1ea029(0x87c)]?.[_0x1ea029(0x39c)]!==w['DisconnectReason'][_0x1ea029(0x6bc)]){let _0x4c2099=this[_0x1ea029(0x4a2)]<=0x1?0x0:Math[_0x1ea029(0x46b)](Math['pow'](0x2,this[_0x1ea029(0x4a2)]-0x1)*0x3e8,0x493e0);console[_0x1ea029(0x2c3)](this['instanceName']+_0x1ea029(0x679)+this[_0x1ea029(0x4a2)]+_0x1ea029(0x4cf)+_0x4c2099/0x3e8+_0x1ea029(0x592)),await new Promise(_0x1a27e8=>setTimeout(_0x1a27e8,_0x4c2099)),console[_0x1ea029(0x2c3)](_0x1ea029(0x163)),await this['connectToWhatsapp']();}else{this[_0x1ea029(0x77b)]('status.instance',{'instance':this[_0x1ea029(0x3ec)]['name'],'status':_0x1ea029(0x7b7)}),this[_0x1ea029(0x3ec)]['ScheduleMessage'][_0x1ea029(0x2ba)]=!0x1,this[_0x1ea029(0x799)][_0x1ea029(0x3ff)][_0x1ea029(0x6f7)](this[_0x1ea029(0x75c)]),this[_0x1ea029(0x799)][_0x1ea029(0x5ef)]['create']({'owner':'','online':!0x1,'lastDisconnect':Date[_0x1ea029(0x673)]()},this[_0x1ea029(0x3ec)][_0x1ea029(0x1f8)]),se[_0x1ea029(0x2cd)](W,this[_0x1ea029(0x3ec)][_0x1ea029(0x1f8)]);try{this[_0x1ea029(0x484)][_0x1ea029(0x768)](this[_0x1ea029(0x75c)]+'\x20('+this[_0x1ea029(0x3ec)][_0x1ea029(0x490)]+_0x1ea029(0x761));let _0x45fd14=await this[_0x1ea029(0x799)]['message'][_0x1ea029(0x708)](this['instance'][_0x1ea029(0x490)]);_0x45fd14[_0x1ea029(0x7e4)]?this['logger']['verbose'](this[_0x1ea029(0x75c)]+'\x20('+this[_0x1ea029(0x3ec)][_0x1ea029(0x490)]+_0x1ea029(0x4ef)):this[_0x1ea029(0x484)][_0x1ea029(0x62b)](_0x1ea029(0x782)+_0x45fd14[_0x1ea029(0x62b)]);}catch(_0xe9a6cf){this[_0x1ea029(0x484)]['error']('Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20'+_0xe9a6cf[_0x1ea029(0x5b7)]);}this['instance'][_0x1ea029(0x48c)][_0x1ea029(0x66a)]!==null&&(this[_0x1ea029(0x484)][_0x1ea029(0x768)](this[_0x1ea029(0x75c)]+'\x20('+this[_0x1ea029(0x3ec)][_0x1ea029(0x490)]+_0x1ea029(0x30f)),clearInterval(this[_0x1ea029(0x3ec)]['ScheduleMessage'][_0x1ea029(0x66a)]),this[_0x1ea029(0x3ec)][_0x1ea029(0x48c)][_0x1ea029(0x66a)]=null),this[_0x1ea029(0x484)][_0x1ea029(0x768)](this[_0x1ea029(0x75c)]+'\x20('+this[_0x1ea029(0x3ec)][_0x1ea029(0x490)]+_0x1ea029(0x208)),this[_0x1ea029(0x693)]=null,this[_0x1ea029(0x2d4)]['emit'](_0x1ea029(0x6c7),this[_0x1ea029(0x3ec)]['name'],_0x1ea029(0x483)),this['client']?.['ws']?.['close'](),this[_0x1ea029(0x296)]['end'](new Error(_0x1ea029(0x7fc)));}}if(_0x32e0e5===_0x1ea029(0x4b7)){this[_0x1ea029(0x484)][_0x1ea029(0x746)](this[_0x1ea029(0x75c)]+'\x20('+this[_0x1ea029(0x3ec)][_0x1ea029(0x490)]+'):\x20this.client.authState.creds?.myAppStateKeyId:\x20'+this[_0x1ea029(0x296)]['authState'][_0x1ea029(0x73e)]?.[_0x1ea029(0x46f)]),this['client'][_0x1ea029(0x6ee)]['creds']?.['myAppStateKeyId']||(this[_0x1ea029(0x484)][_0x1ea029(0x746)](this[_0x1ea029(0x75c)]+'\x20('+this[_0x1ea029(0x3ec)]['wuid']+_0x1ea029(0x158)),this[_0x1ea029(0x296)]['ev']['flush']()),this['resetReconnectionVariables'],this[_0x1ea029(0x3ec)]['wuid']=this[_0x1ea029(0x296)]['user']['id'][_0x1ea029(0x4d0)](/:\d+/,'')['replace']('@s.whatsapp.net',''),this[_0x1ea029(0x3ec)][_0x1ea029(0x577)]=(await this[_0x1ea029(0x1de)](this['instance']['wuid']+_0x1ea029(0x20d)))['profilePictureUrl'],this['repository'][_0x1ea029(0x5ef)][_0x1ea029(0x80f)]({'online':!0x0,'owner':this[_0x1ea029(0x3ec)]['wuid'],'lastDisconnect':null},this[_0x1ea029(0x3ec)][_0x1ea029(0x1f8)]);let _0x52cbe9=_0x1ea029(0x55c)+this[_0x1ea029(0x3ec)][_0x1ea029(0x490)],_0x528d4d=0x28,_0x504f6b=Math['floor']((_0x528d4d-_0x52cbe9['length'])/0x2),_0x15010b='\x20'[_0x1ea029(0x630)](_0x504f6b),_0x4e28e6='CONECTADO\x20\x20UAZAPI',_0x392c0a=_0x1ea029(0x5a9)+this['instance'][_0x1ea029(0x1f8)],_0x394ebd=(''+_0x15010b+_0x52cbe9+_0x15010b)[_0x1ea029(0x69b)](_0x528d4d,'\x20'),_0x624116=(''+_0x15010b+_0x4e28e6+_0x15010b)['padEnd'](_0x528d4d,'\x20'),_0x1aedae=(''+_0x15010b+_0x392c0a+_0x15010b)[_0x1ea029(0x69b)](_0x528d4d,'\x20'),_0xf2782e=Math[_0x1ea029(0x450)](_0x394ebd[_0x1ea029(0x836)],_0x624116[_0x1ea029(0x836)],_0x1aedae[_0x1ea029(0x836)]),_0x576913=_0x394ebd['padEnd'](_0xf2782e,'\x20'),_0x342cef=_0x624116['padEnd'](_0xf2782e,'\x20'),_0x373903=_0x1aedae[_0x1ea029(0x69b)](_0xf2782e,'\x20');this[_0x1ea029(0x484)][_0x1ea029(0x7ed)]((_0x1ea029(0x874)+''[_0x1ea029(0x630)](_0xf2782e)+_0x1ea029(0x2b6)+_0x342cef+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x373903+_0x1ea029(0x31d)+_0x576913+_0x1ea029(0x3a7)+''['repeat'](_0xf2782e)+'')[_0x1ea029(0x4d0)](/^ +/gm,'\x20\x20')),this[_0x1ea029(0x277)](),this[_0x1ea029(0x3ec)][_0x1ea029(0x48c)]['isConnected']=!0x0;}}[a0_0x591e8d(0x505)](){this['reconnectAttempts']=0x0,this['reconnectTimestamps']=[];}async[a0_0x591e8d(0x62a)](_0x36d6ea,_0xc85d18=!0x1){const _0x3383aa=a0_0x591e8d;try{let _0x63909=await this[_0x3383aa(0x799)][_0x3383aa(0x5b7)][_0x3383aa(0x2c5)]({'where':{'_id':_0x36d6ea['id']}},this['instance']['wuid']);return _0xc85d18?_0x63909[0x0]:_0x63909[0x0][_0x3383aa(0x5b7)];}catch{return{'conversation':''};}}[a0_0x591e8d(0x2b7)](){const _0x55f430=a0_0x591e8d;let _0x3f4299=this['configService'][_0x55f430(0x2f4)](_0x55f430(0x781)),_0x1098f7=this[_0x55f430(0x285)][_0x55f430(0x2f4)](_0x55f430(0x229));_0x3f4299?.[_0x55f430(0x363)]&&!_0x1098f7[_0x55f430(0x754)]&&setInterval(()=>{const _0x29327e=_0x55f430;try{for(let [_0x3c102e,_0x1b838d]of Object[_0x29327e(0x852)](_0x3f4299))_0x1b838d===!0x0&&(0x0,Pe['execSync'])(_0x29327e(0x851)+(0x0,L[_0x29327e(0x241)])(this[_0x29327e(0x61a)],_0x3c102e[_0x29327e(0x1f1)](),this[_0x29327e(0x3ec)]['wuid'])+_0x29327e(0x349));}catch{}},(_0x3f4299?.['CLEANING_INTERVAL']??0xe10)*0x3e8);}async[a0_0x591e8d(0x5a1)](){const _0x537264=a0_0x591e8d;let _0x304f21=this[_0x537264(0x285)][_0x537264(0x2f4)](_0x537264(0x229)),_0x17727b=this[_0x537264(0x285)][_0x537264(0x2f4)](_0x537264(0x740));return _0x17727b?.[_0x537264(0x754)]?await As(_0x17727b,this[_0x537264(0x3ec)][_0x537264(0x1f8)]):_0x304f21['ENABLED']?await Rs(this['instance'][_0x537264(0x1f8)]):await(0x0,w[_0x537264(0x37b)])((0x0,L[_0x537264(0x241)])(fe,this['instance'][_0x537264(0x1f8)]));}async['AutomateFunctions'](){const _0x4cff67=a0_0x591e8d;let _0x2dbfdb=()=>Math[_0x4cff67(0x760)](Math[_0x4cff67(0x6a6)]()*0x4e21)+0x7d0,_0x5bf6b6=async()=>{const _0x345602=_0x4cff67;if(!this['instance']['ScheduleMessage'][_0x345602(0x2ba)]){this[_0x345602(0x484)][_0x345602(0x768)](this[_0x345602(0x75c)]+'\x20('+this['instance']['wuid']+'):Desconectado,\x20parando\x20execuo.'),this['isRunning']=!0x1;return;}if(this['instance'][_0x345602(0x490)]&&this[_0x345602(0x693)]&&this[_0x345602(0x3ec)][_0x345602(0x48c)][_0x345602(0x66a)]!==null&&this['instance'][_0x345602(0x48c)][_0x345602(0x66a)]!==void 0x0){let _0x1cb69e=Math['round'](this[_0x345602(0x3ec)][_0x345602(0x48c)][_0x345602(0x66a)]/0xea60);this['logger'][_0x345602(0x768)](this[_0x345602(0x75c)]+'\x20('+this['instance']['wuid']+_0x345602(0x3a3)+_0x1cb69e+_0x345602(0x1e1)),this[_0x345602(0x364)]=!0x1;return;}else this['instance'][_0x345602(0x490)]&&(this['logger'][_0x345602(0x768)](this[_0x345602(0x75c)]+'\x20('+this[_0x345602(0x3ec)]['wuid']+_0x345602(0x72d)),this['AutomateSystem']||(await this[_0x345602(0x689)](),this[_0x345602(0x19a)](),this[_0x345602(0x65e)]()),(this['instance'][_0x345602(0x48c)][_0x345602(0x66a)]===null||this['instance']['ScheduleMessage'][_0x345602(0x66a)]===void 0x0)&&await this['scheduleNextCheck']());if(this[_0x345602(0x364)]){let _0x6e1acf=_0x2dbfdb();this[_0x345602(0x484)][_0x345602(0x768)](this[_0x345602(0x75c)]+_0x345602(0x537)+_0x6e1acf/0x3e8+'\x20segundos'),setTimeout(_0x5bf6b6,_0x6e1acf);}};if(this['isRunning'])return;this['isRunning']=!0x0;let _0x67f3e0=_0x2dbfdb();setTimeout(_0x5bf6b6,_0x67f3e0);}async[a0_0x591e8d(0x65e)](){const _0x22333c=a0_0x591e8d;let _0xe42395=this[_0x22333c(0x3ec)]['wuid'];try{let _0xc3a79=await this[_0x22333c(0x799)][_0x22333c(0x4cc)]['findAll']({'where':{'$or':[{'owner':_0xe42395},{'whoCanUse':{'$in':[_0xe42395]}},{'shareOwners':{'$in':[_0xe42395]}}]}}),_0xa961b2=new Map(this['AutomateSystem'][_0x22333c(0x26a)]['map'](_0x4fd580=>[_0x4fd580[_0x22333c(0x812)],_0x4fd580])),_0x22ed24=_0xc3a79['map'](_0x1c6431=>{const _0x16e304=_0x22333c;let _0xd38b9d=_0xa961b2['get'](_0x1c6431[_0x16e304(0x812)]?.[_0x16e304(0x44c)]());return{'_id':_0x1c6431['_id']?.[_0x16e304(0x44c)](),'name':_0xd38b9d?.[_0x16e304(0x1f8)]??_0x1c6431[_0x16e304(0x1f8)],'default':_0xd38b9d?.['default']??_0x1c6431['default']??!0x1,'startCommand':_0xd38b9d?.[_0x16e304(0x1e6)]??_0x1c6431['startCommandWord'],'minutesToClose':_0xd38b9d?.[_0x16e304(0x797)]??_0x1c6431[_0x16e304(0x797)]??0xa,'readMessages':_0xd38b9d?.['readMessages']??_0x1c6431[_0x16e304(0x2b9)]??!0x1,'testingWith':_0xd38b9d?.[_0x16e304(0x578)]??_0x1c6431['testingWith'],'canEdit':_0x1c6431[_0x16e304(0x7d9)]===_0xe42395||(_0x1c6431[_0x16e304(0x5c8)]??[])[_0x16e304(0x243)](_0xe42395),'usersCount':(_0x1c6431[_0x16e304(0x2be)]??[])['length']??0x0};}),_0x4d217d=!0x1;_0x22ed24[_0x22333c(0x5ce)](_0x446955=>{const _0x194f70=_0x22333c;_0x446955[_0x194f70(0x2ab)]&&(_0x4d217d?_0x446955[_0x194f70(0x2ab)]=!0x1:_0x4d217d=!0x0);}),this['AutomateSystem'][_0x22333c(0x26a)]=_0x22ed24;let _0xc16b2f={'flows':_0x22ed24};return await this['repository'][_0x22333c(0x79b)][_0x22333c(0x1d9)](_0xc16b2f,_0xe42395),this[_0x22333c(0x484)][_0x22333c(0x768)](this['instanceName']+'\x20('+_0xe42395+_0x22333c(0x4bc)),_0x22ed24[_0x22333c(0x836)];}catch(_0x83ae63){return this['logger'][_0x22333c(0x62b)](this[_0x22333c(0x75c)]+'\x20('+_0xe42395+_0x22333c(0x6c0)+(_0x83ae63 instanceof Error?_0x83ae63[_0x22333c(0x5b7)]:JSON[_0x22333c(0x62f)](_0x83ae63,null,0x2))),{'message':_0x22333c(0x2ff)+(_0x83ae63 instanceof Error?_0x83ae63[_0x22333c(0x5b7)]:JSON['stringify'](_0x83ae63,null,0x2))};}}async[a0_0x591e8d(0x4c5)](_0x3e2041){const _0x1dc12f=a0_0x591e8d;try{let _0x1a0b20=await this['repository'][_0x1dc12f(0x3ec)]['findOne']({'where':{'_id':W+'-'+this['instanceName']}}),_0x5f4d49,_0x4d407a=!se[_0x1dc12f(0x4f1)]||!se[_0x1dc12f(0x26c)];console[_0x1dc12f(0x2c3)](_0x1dc12f(0x54a)),console[_0x1dc12f(0x2c3)](_0x1dc12f(0x8a6),Ri),console['log'](_0x1dc12f(0x45b),this['reconnectAttempts']),console['log'](_0x1dc12f(0x54a)),Ri&&!_0x4d407a&&(this[_0x1dc12f(0x4a2)]<0x4||!this[_0x1dc12f(0x4a2)]?_0x1a0b20&&_0x1a0b20['ip']?(_0x5f4d49=_0x1a0b20['ip'],console[_0x1dc12f(0x2c3)](_0x1dc12f(0x53b)+_0x5f4d49)):(_0x5f4d49=await se['createIPv6'](W,this[_0x1dc12f(0x3ec)][_0x1dc12f(0x1f8)]),_0x5f4d49?(console['log'](_0x1dc12f(0x690)+_0x5f4d49),await(0x0,w['delay'])(0x7d0)):console['error'](_0x1dc12f(0x1fd))):this['reconnectAttempts']<0x6&&(await se[_0x1dc12f(0x2cd)](W,this['instance'][_0x1dc12f(0x1f8)]),console[_0x1dc12f(0x2c3)](_0x1dc12f(0x288)),_0x5f4d49=await se[_0x1dc12f(0x7ce)](W,this[_0x1dc12f(0x3ec)][_0x1dc12f(0x1f8)]),_0x5f4d49?(console['log'](_0x1dc12f(0x690)+_0x5f4d49),await(0x0,w[_0x1dc12f(0x1ca)])(0x7d0)):console['error'](_0x1dc12f(0x76b)))),this[_0x1dc12f(0x2e3)](),this[_0x1dc12f(0x3ec)][_0x1dc12f(0x1e5)]=(await this[_0x1dc12f(0x799)][_0x1dc12f(0x5ef)][_0x1dc12f(0x2c5)](this[_0x1dc12f(0x3ec)][_0x1dc12f(0x1f8)]))[_0x1dc12f(0x1e5)],this['instance'][_0x1dc12f(0x6ee)]=await this[_0x1dc12f(0x5a1)]();let {version:_0x29eccf}=await(0x0,w[_0x1dc12f(0x29d)])(),_0x3c60b8=[_i,Ps,(0x0,Os[_0x1dc12f(0x56a)])()],_0x5e4540={'localAddress':_0x5f4d49,'auth':{'creds':this[_0x1dc12f(0x3ec)]['authState'][_0x1dc12f(0x751)][_0x1dc12f(0x73e)],'keys':(0x0,w[_0x1dc12f(0x38d)])(this['instance']['authState'][_0x1dc12f(0x751)][_0x1dc12f(0x34b)],(0x0,kt[_0x1dc12f(0x2ab)])({'level':_0x1dc12f(0x62b)}))},'logger':(0x0,kt['default'])({'level':'error'}),'printQRInTerminal':!0x1,'browser':_0x3e2041?[_0x1dc12f(0x291),Ps,(0x0,Os[_0x1dc12f(0x56a)])()]:_0x3c60b8,'version':_0x29eccf,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x5dd5e6=>{const _0xf8d0c8=_0x1dc12f;let _0x1dcbf4=this['localWebhook']?.[_0xf8d0c8(0x239)]&&(0x0,w[_0xf8d0c8(0x6c9)])(_0x5dd5e6);return(0x0,w[_0xf8d0c8(0x3fd)])(_0x5dd5e6)||_0x1dcbf4;},'msgRetryCounterCache':this['msgRetryCounterCache'],'getMessage':async _0x43370f=>await this[_0x1dc12f(0x62a)](_0x43370f),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x1dc12f(0x34a)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x4144c0){const _0x497102=_0x1dc12f;return _0x4144c0[_0x497102(0x76a)]?.[_0x497102(0x5b7)]?.[_0x497102(0x757)]?.[_0x497102(0x35f)]===w['proto'][_0x497102(0x2f6)][_0x497102(0x1ba)][_0x497102(0x4d6)]['PRODUCT_LIST']&&(_0x4144c0=JSON[_0x497102(0x3da)](JSON['stringify'](_0x4144c0)),_0x4144c0['deviceSentMessage'][_0x497102(0x5b7)][_0x497102(0x757)][_0x497102(0x35f)]=w['proto'][_0x497102(0x2f6)]['ListMessage'][_0x497102(0x4d6)][_0x497102(0x2ec)]),_0x4144c0[_0x497102(0x757)]?.[_0x497102(0x35f)]==w['proto']['Message'][_0x497102(0x1ba)][_0x497102(0x4d6)][_0x497102(0x730)]&&(_0x4144c0=JSON[_0x497102(0x3da)](JSON['stringify'](_0x4144c0)),_0x4144c0['listMessage']['listType']=w[_0x497102(0x348)][_0x497102(0x2f6)][_0x497102(0x1ba)]['ListType'][_0x497102(0x2ec)]),_0x4144c0;}};return this[_0x1dc12f(0x358)]=!0x1,this[_0x1dc12f(0x296)]=(0x0,w[_0x1dc12f(0x2ab)])(_0x5e4540),this['eventHandler'](),this[_0x1dc12f(0x6e2)]=_0x3e2041,this[_0x1dc12f(0x296)];}catch(_0x488d01){let _0x5ca8c4='Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20conectar\x20ao\x20whatsapp',_0x3c5ec0=_0x488d01 instanceof Error?_0x488d01[_0x1dc12f(0x5b7)]:typeof _0x488d01==_0x1dc12f(0x808)?JSON[_0x1dc12f(0x62f)](_0x488d01):_0x488d01,_0x5ed282=_0x5ca8c4+':\x20'+_0x3c5ec0;throw this[_0x1dc12f(0x484)]['error'](this[_0x1dc12f(0x75c)]+'\x20('+this[_0x1dc12f(0x3ec)][_0x1dc12f(0x490)]+'):\x20'+_0x5ed282),console[_0x1dc12f(0x62b)](_0x1dc12f(0x378),_0x488d01),_0x488d01 instanceof Error&&console[_0x1dc12f(0x62b)](_0x1dc12f(0x75d),_0x488d01[_0x1dc12f(0x659)]),new O(_0x5ed282);}}[a0_0x591e8d(0x614)](){const _0x2d1ada=a0_0x591e8d;this[_0x2d1ada(0x296)]['ev'][_0x2d1ada(0x1df)](_0x31fa11=>{const _0x36f081=_0x2d1ada;if(!this[_0x36f081(0x358)]){let _0x37be26=this[_0x36f081(0x285)]['get'](_0x36f081(0x229));if(_0x31fa11[_0x36f081(0x8a5)]){let _0x13a4ae=_0x31fa11['labels.edit'];this[_0x36f081(0x5bc)]['labels.edit'](_0x13a4ae);}if(_0x31fa11[_0x36f081(0x51d)]){let _0x4dbad2=_0x31fa11[_0x36f081(0x51d)];this[_0x36f081(0x5bc)][_0x36f081(0x51d)](_0x4dbad2);}if(_0x31fa11['connection.update']&&this['connectionUpdate'](_0x31fa11[_0x36f081(0x4ac)]),_0x31fa11['creds.update']&&this[_0x36f081(0x3ec)][_0x36f081(0x6ee)][_0x36f081(0x334)](),_0x31fa11[_0x36f081(0x84d)]){let _0x451386=_0x31fa11[_0x36f081(0x84d)];this[_0x36f081(0x5bc)][_0x36f081(0x84d)](_0x451386,_0x37be26);}if(_0x31fa11['messages.upsert']){let _0x8ace0c=_0x31fa11['messages.upsert'];this[_0x36f081(0x5bc)][_0x36f081(0x74f)](_0x8ace0c,_0x37be26);}if(_0x31fa11['messages.update']){let _0xaaa3d5=_0x31fa11[_0x36f081(0x641)];this[_0x36f081(0x5bc)][_0x36f081(0x641)](_0xaaa3d5,_0x37be26);}if(_0x31fa11[_0x36f081(0x31e)]){let _0x1c2014=_0x31fa11['presence.update'];if(this[_0x36f081(0x3c9)]?.[_0x36f081(0x239)]&&_0x1c2014['id'][_0x36f081(0x243)]('@g.us'))return;this[_0x36f081(0x77b)]('presence.update',_0x1c2014);}if(_0x31fa11[_0x36f081(0x472)]){let _0x44321d=_0x31fa11[_0x36f081(0x472)];this[_0x36f081(0x4e4)]['groups.upsert'](_0x44321d);}if(_0x31fa11[_0x36f081(0x1cf)]){let _0x440fad=_0x31fa11[_0x36f081(0x1cf)];this[_0x36f081(0x4e4)][_0x36f081(0x1cf)](_0x440fad);}if(_0x31fa11[_0x36f081(0x283)]){let _0x434d65=_0x31fa11[_0x36f081(0x283)];this['groupHandler'][_0x36f081(0x283)](_0x434d65);}if(_0x31fa11[_0x36f081(0x3ca)]){let _0x30cd5e=_0x31fa11[_0x36f081(0x3ca)];this[_0x36f081(0x664)][_0x36f081(0x3ca)](_0x30cd5e,_0x37be26);}if(_0x31fa11[_0x36f081(0x64e)]){let _0x11f8f3=_0x31fa11['chats.update'];this[_0x36f081(0x664)][_0x36f081(0x64e)](_0x11f8f3,_0x37be26);}if(_0x31fa11[_0x36f081(0x455)]){let _0x37b611=_0x31fa11[_0x36f081(0x455)];this[_0x36f081(0x664)]['chats.delete'](_0x37b611);}if(_0x31fa11[_0x36f081(0x6fa)]){let _0x1eddb1=_0x31fa11[_0x36f081(0x6fa)];this[_0x36f081(0x317)][_0x36f081(0x6fa)](_0x1eddb1,_0x37be26);}if(_0x31fa11['contacts.update']){let _0x1ba3fa=_0x31fa11[_0x36f081(0x85a)];this['contactHandle']['contacts.update'](_0x1ba3fa,_0x37be26);}}});}async[a0_0x591e8d(0x200)](_0x31b42b,_0x215581){const _0x1c6beb=a0_0x591e8d;if(_0x215581>=0xa){console[_0x1c6beb(0x62b)](this[_0x1c6beb(0x75c)]+'\x20('+this[_0x1c6beb(0x3ec)][_0x1c6beb(0x490)]+_0x1c6beb(0x196)),delete Pt[_0x31b42b[_0x1c6beb(0x27f)]['id']];return;}try{console['error'](this['instanceName']+'\x20('+this[_0x1c6beb(0x3ec)][_0x1c6beb(0x490)]+_0x1c6beb(0x61e)+(_0x215581+0x1)),await this[_0x1c6beb(0x296)][_0x1c6beb(0x220)](JSON['parse'](_0x31b42b[_0x1c6beb(0x53f)][0x1],w[_0x1c6beb(0x75a)][_0x1c6beb(0x882)])),console[_0x1c6beb(0x62b)]('[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso');}catch(_0x2998d9){console['error'](this[_0x1c6beb(0x75c)]+'\x20('+this[_0x1c6beb(0x3ec)][_0x1c6beb(0x490)]+_0x1c6beb(0x389)+_0x2998d9),setTimeout(()=>this[_0x1c6beb(0x200)](_0x31b42b,_0x215581+0x1),Math['pow'](0x2,_0x215581)*0x3e8);}}['delayChatLabel'](_0x35317d){return new Promise(_0x59a408=>setTimeout(_0x59a408,_0x35317d));}[a0_0x591e8d(0x244)](_0x3d68d2){const _0xfc7c94=a0_0x591e8d;_0x3d68d2=_0x3d68d2[_0xfc7c94(0x4d0)](/\D/g,'');let _0xcec998=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0xfc7c94(0x3b1)](_0x3d68d2);if(_0xcec998&&_0xcec998[0x1]==='55'){let _0x54daf1=_0xcec998[0x2],_0x667eec=_0xcec998[0x3],_0x5d1789=_0xcec998[0x4];if(parseInt(_0x54daf1)>=0x1f&&_0x667eec==='9')return _0xcec998[0x1]+_0x54daf1+_0x5d1789;}return _0x3d68d2;}[a0_0x591e8d(0x649)](_0x1f3916){const _0x3fea45=a0_0x591e8d;return _0x1f3916[_0x3fea45(0x243)](_0x3fea45(0x2b3))||_0x1f3916[_0x3fea45(0x243)](_0x3fea45(0x20d))||_0x1f3916[_0x3fea45(0x243)](_0x3fea45(0x6aa))?_0x1f3916:(_0x1f3916=_0x1f3916?.[_0x3fea45(0x4d0)](/\s/g,'')['replace'](/\+/g,'')['replace'](/\(/g,'')['replace'](/\)/g,'')[_0x3fea45(0x179)](/\:/)[0x0][_0x3fea45(0x179)]('@')[0x0],_0x1f3916[_0x3fea45(0x836)]>=0x12?(_0x1f3916=_0x1f3916['replace'](/[^\d-]/g,''),_0x1f3916+_0x3fea45(0x2b3)):(_0x1f3916=_0x1f3916[_0x3fea45(0x4d0)](/\D/g,''),_0x1f3916+_0x3fea45(0x20d)));}async[a0_0x591e8d(0x390)](_0x195383){const _0x50f71f=a0_0x591e8d;let _0x5d1497=(await this['whatsappNumber']({'numbers':[_0x195383['number']]}))[0x0];if(!_0x5d1497[_0x50f71f(0x5c4)]&&!(0x0,w[_0x50f71f(0x6c9)])(_0x5d1497[_0x50f71f(0x833)])&&!_0x5d1497[_0x50f71f(0x833)]['includes'](_0x50f71f(0x6aa)))throw new m(_0x5d1497);let _0x3ba364=_0x5d1497['jid'];try{return await this[_0x50f71f(0x296)][_0x50f71f(0x80b)](_0x3ba364),await this[_0x50f71f(0x296)][_0x50f71f(0x1ac)](_0x195383[_0x50f71f(0x382)],_0x3ba364),{'status':0xc8,'presence':_0x195383[_0x50f71f(0x382)]};}catch(_0xbafa80){let _0x9414a2='Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20updatePresence',_0x5d9626=_0xbafa80 instanceof Error?_0xbafa80[_0x50f71f(0x5b7)]:typeof _0xbafa80==_0x50f71f(0x808)?JSON[_0x50f71f(0x62f)](_0xbafa80):_0xbafa80,_0x5c6178=_0x9414a2+':\x20'+_0x5d9626;throw this[_0x50f71f(0x484)][_0x50f71f(0x62b)](this[_0x50f71f(0x75c)]+'\x20('+this[_0x50f71f(0x3ec)][_0x50f71f(0x490)]+'):\x20'+_0x5c6178),new m(_0x5c6178);}}async[a0_0x591e8d(0x7a1)](_0x3eb17f,_0x52b48a,_0x595ef2,_0x215fd0=!0x0){const _0x4b3b2b=a0_0x591e8d;let _0x248a76=await this[_0x4b3b2b(0x799)][_0x4b3b2b(0x228)]['findOne']({'where':{'_id':_0x3eb17f}});if(!_0x248a76&&!_0x215fd0)return;let _0x5cd9e2={'lastUpdate':Date[_0x4b3b2b(0x673)]()};if(_0x595ef2||!_0x248a76?.[_0x4b3b2b(0x2af)]||Date[_0x4b3b2b(0x673)]()-_0x248a76['lastUpdate']>0x18*0x3c*0x3c*0x3e8)try{let _0x444d6f=(await this[_0x4b3b2b(0x1de)](_0x3eb17f))[_0x4b3b2b(0x577)];_0x5cd9e2[_0x4b3b2b(0x4d1)]=_0x444d6f;}catch(_0x1a3826){let _0x40a43d=_0x4b3b2b(0x726),_0x50e40b=_0x1a3826 instanceof Error?_0x1a3826[_0x4b3b2b(0x5b7)]:typeof _0x1a3826==_0x4b3b2b(0x808)?JSON[_0x4b3b2b(0x62f)](_0x1a3826):_0x1a3826,_0x259fcc=_0x40a43d+':\x20'+_0x50e40b;throw this[_0x4b3b2b(0x484)]['error'](this[_0x4b3b2b(0x75c)]+'\x20('+this['instance']['wuid']+'):\x20'+_0x259fcc),new m(_0x259fcc);}return _0x52b48a&&_0x248a76?.['name']!==_0x52b48a&&(_0x5cd9e2[_0x4b3b2b(0x1f8)]=_0x52b48a),Object[_0x4b3b2b(0x34b)](_0x5cd9e2)[_0x4b3b2b(0x836)]>0x1&&(_0x248a76?await this[_0x4b3b2b(0x799)][_0x4b3b2b(0x228)][_0x4b3b2b(0x1d9)]({'where':{'_id':_0x3eb17f}},_0x5cd9e2):await this['repository']['cacheContact'][_0x4b3b2b(0x292)]([{'_id':_0x3eb17f,..._0x5cd9e2}]),_0x248a76={..._0x248a76,..._0x5cd9e2}),{'cachedContact':_0x248a76};}async[a0_0x591e8d(0x1de)](_0x3e510a){const _0x17a977=a0_0x591e8d;let _0x19060f=this[_0x17a977(0x649)](_0x3e510a);try{return{'wuid':_0x19060f,'profilePictureUrl':await this[_0x17a977(0x296)][_0x17a977(0x577)](_0x19060f,'image')};}catch{return{'wuid':_0x19060f,'profilePictureUrl':null};}}async[a0_0x591e8d(0x859)](_0x4cd294,_0x46c613,_0x4639cd){const _0xe79667=a0_0x591e8d;let _0x2e444b;try{let _0x219aa3=(await this['whatsappNumber']({'numbers':[_0x4cd294]}))?.[_0xe79667(0x622)]();if(!_0x219aa3[_0xe79667(0x5c4)]&&!(0x0,w[_0xe79667(0x6c9)])(_0x219aa3['jid'])&&!_0x219aa3[_0xe79667(0x833)][_0xe79667(0x243)]('@broadcast'))throw new m(_0x219aa3);_0x2e444b=_0x219aa3[_0xe79667(0x833)];}catch(_0x383dca){_0x2e444b=_0x4cd294,this[_0xe79667(0x484)][_0xe79667(0x746)](this[_0xe79667(0x75c)]+'\x20('+this[_0xe79667(0x3ec)][_0xe79667(0x490)]+_0xe79667(0x80a)+_0x383dca[_0xe79667(0x5b7)]),this['logger'][_0xe79667(0x746)](this[_0xe79667(0x75c)]+'\x20('+this[_0xe79667(0x3ec)]['wuid']+_0xe79667(0x6d7)+_0x2e444b);}try{if(_0x2e444b||(_0x2e444b=_0x4cd294,this[_0xe79667(0x484)]['warn'](this['instanceName']+'\x20('+this['instance'][_0xe79667(0x490)]+_0xe79667(0x8a3)+_0x2e444b)),_0x4639cd||(_0x4639cd={}),_0x4639cd?.[_0xe79667(0x1ca)]){await this[_0xe79667(0x296)][_0xe79667(0x80b)](_0x2e444b),await this[_0xe79667(0x296)][_0xe79667(0x1ac)](_0x4639cd?.['presence']??_0xe79667(0x87f),_0x2e444b);let _0x3a01fe=Math[_0xe79667(0x46b)](_0x4639cd[_0xe79667(0x1ca)],0x2710);await(0x0,w[_0xe79667(0x1ca)])(_0x3a01fe),await this[_0xe79667(0x296)][_0xe79667(0x1ac)]('paused',_0x2e444b);}let _0x33d6ee=_0x4639cd?.[_0xe79667(0x86e)]!=!0x1?void 0x0:!0x1,_0x4bdc28;if(_0x4639cd?.[_0xe79667(0x46d)]){let _0x1f0565=_0x4639cd?.[_0xe79667(0x46d)],_0x52e05e=_0x1f0565?.[_0xe79667(0x5b7)]?_0x1f0565:await this[_0xe79667(0x62a)](_0x1f0565[_0xe79667(0x27f)],!0x0);_0x52e05e&&(_0x4bdc28=_0x52e05e);}let _0x12f1d5=await this[_0xe79667(0x799)][_0xe79667(0x4b2)]['findOne']({'where':{'_id':_0x2e444b}},this[_0xe79667(0x3ec)][_0xe79667(0x490)]),_0x3240c0,_0x159679=null;if((0x0,w[_0xe79667(0x6c9)])(_0x2e444b))try{if(_0x159679=_0x12f1d5[_0xe79667(0x1c0)],!_0x159679)throw new F(_0xe79667(0x6e0));_0x4639cd?.[_0xe79667(0x523)]&&(_0x4639cd[_0xe79667(0x523)]?.[_0xe79667(0x72e)]?_0x3240c0=_0x159679[_0xe79667(0x5fe)][_0xe79667(0x276)](_0x582f11=>_0x582f11['id']):_0x4639cd[_0xe79667(0x523)]?.['mentioned']?.[_0xe79667(0x836)]&&(_0x3240c0=_0x4639cd[_0xe79667(0x523)][_0xe79667(0x723)][_0xe79667(0x276)](_0x368655=>{const _0x2166f2=_0xe79667;let _0x5d8e19=this['createJid'](_0x368655);return(0x0,w[_0x2166f2(0x6c9)])(_0x5d8e19)?null:_0x5d8e19;})));}catch{throw new F(_0xe79667(0x6e0));}let _0x5b90fb=await((async()=>{const _0x29323f=_0xe79667;let _0x44a796={'quoted':_0x4bdc28,'ephemeralExpiration':_0x12f1d5?.[_0x29323f(0x38f)]??0x0};if(!_0x46c613['audio']&&!_0x46c613[_0x29323f(0x498)]&&!_0x46c613[_0x29323f(0x3bc)]&&!_0x46c613[_0x29323f(0x68a)]&&_0x2e444b!=='status@broadcast'&&_0x46c613[_0x29323f(0x4ed)])return await this['client'][_0x29323f(0x4e6)](_0x2e444b,{'react':{'text':_0x46c613['reactionMessage'][_0x29323f(0x7a9)],'key':_0x46c613[_0x29323f(0x4ed)][_0x29323f(0x27f)]}},_0x44a796);if(_0x46c613['conversation']){let _0x543196=_0x46c613[_0x29323f(0x68a)];return _0x4639cd?.[_0x29323f(0x1b2)]&&(_0x543196=await this[_0x29323f(0x84f)](_0x543196,_0x2e444b)),await this['client'][_0x29323f(0x4e6)](_0x2e444b,{'text':_0x543196,'mentions':_0x3240c0,'linkPreview':_0x33d6ee},_0x44a796);}return!_0x46c613['audio']&&!_0x46c613['poll']&&_0x2e444b!=_0x29323f(0x60d)?await this[_0x29323f(0x296)][_0x29323f(0x4e6)](_0x2e444b,{'forward':{'key':{'remoteJid':this[_0x29323f(0x3ec)][_0x29323f(0x490)],'fromMe':!0x0},'message':_0x46c613},'mentions':_0x3240c0},_0x44a796):_0x2e444b===_0x29323f(0x60d)?await this['client'][_0x29323f(0x4e6)](_0x2e444b,_0x46c613['status'][_0x29323f(0x4c3)],{'backgroundColor':_0x46c613[_0x29323f(0x360)]['option']['backgroundColor'],'font':_0x46c613[_0x29323f(0x360)][_0x29323f(0x171)][_0x29323f(0x4ee)],'statusJidList':_0x46c613[_0x29323f(0x360)][_0x29323f(0x171)][_0x29323f(0x6da)]}):await this[_0x29323f(0x296)][_0x29323f(0x4e6)](_0x2e444b,_0x46c613,_0x44a796);})()),_0x50eeb5=(0x0,w[_0xe79667(0x7b0)])(_0x5b90fb[_0xe79667(0x5b7)]),_0x371b1f=(0x0,w[_0xe79667(0x366)])(_0x50eeb5),{message_normalized:_0x40a10b}=this[_0xe79667(0x48f)](_0x50eeb5,_0x371b1f,null),_0x2be359={'_id':_0x5b90fb[_0xe79667(0x27f)]['id'],'key':_0x5b90fb[_0xe79667(0x27f)],'pushName':_0x5b90fb[_0xe79667(0x870)],'isGroup':_0x5b90fb['key'][_0xe79667(0x166)][_0xe79667(0x426)](_0xe79667(0x2b3)),'profilePictureUrl':this[_0xe79667(0x3ec)][_0xe79667(0x577)],'message':_0x50eeb5,'messageType':_0x371b1f,'message_normalized':{'key':_0x5b90fb['key'],'pushName':_0x5b90fb[_0xe79667(0x870)],'messageTimestamp':_0x5b90fb[_0xe79667(0x692)]&&_0x5b90fb[_0xe79667(0x692)]['toString']()['length']<0xd?_0x5b90fb['messageTimestamp']*0x3e8:_0x5b90fb[_0xe79667(0x692)]||null,'source':(0x0,w[_0xe79667(0x86c)])(_0x5b90fb[_0xe79667(0x27f)]['id']),..._0x40a10b},'messageTimestamp':_0x5b90fb[_0xe79667(0x692)]&&_0x5b90fb['messageTimestamp'][_0xe79667(0x44c)]()[_0xe79667(0x836)]<0xd?_0x5b90fb[_0xe79667(0x692)]*0x3e8:_0x5b90fb['messageTimestamp']||null,'owner':this['instance'][_0xe79667(0x490)],'source':(0x0,w[_0xe79667(0x86c)])(_0x5b90fb[_0xe79667(0x27f)]['id'])};return this[_0xe79667(0x484)][_0xe79667(0x746)](this[_0xe79667(0x75c)]+'\x20('+this[_0xe79667(0x3ec)][_0xe79667(0x490)]+_0xe79667(0x3ef)+_0x2be359[_0xe79667(0x27f)]?.[_0xe79667(0x166)]['replace'](_0xe79667(0x20d),'')+']\x20('+_0x2be359[_0xe79667(0x399)]+')'),_0x2be359['message_normalized']?.[_0xe79667(0x7a9)]&&this[_0xe79667(0x484)]['warn'](_0x2be359[_0xe79667(0x78e)]?.[_0xe79667(0x7a9)]),this[_0xe79667(0x77b)]('send.message',_0x2be359),U(this[_0xe79667(0x75c)],_0xe79667(0x3e7),{'message':_0x2be359}),this[_0xe79667(0x568)](this[_0xe79667(0x285)][_0xe79667(0x2f4)](_0xe79667(0x229)),_0x2be359,_0xe79667(0x795),_0x12f1d5),await this[_0xe79667(0x799)][_0xe79667(0x5b7)][_0xe79667(0x292)]([_0x2be359],this[_0xe79667(0x3ec)][_0xe79667(0x490)]),_0x5b90fb;}catch(_0x4f8df6){let _0x1d78ea=_0xe79667(0x6ef)+_0x2e444b,_0x41902c=_0x4f8df6 instanceof Error?_0x4f8df6[_0xe79667(0x5b7)]:typeof _0x4f8df6=='object'?JSON['stringify'](_0x4f8df6):_0x4f8df6,_0x4b9349=_0x1d78ea+':\x20'+_0x41902c;throw this[_0xe79667(0x484)][_0xe79667(0x62b)](this['instanceName']+'\x20('+this[_0xe79667(0x3ec)]['wuid']+_0xe79667(0x872)+_0x4b9349),new m(_0x4b9349);}}get[a0_0x591e8d(0x837)](){return this['stateConnection'];}async['textMessage'](_0x30b1ef){const _0x1109d3=a0_0x591e8d;return await this[_0x1109d3(0x859)](_0x30b1ef[_0x1109d3(0x5f6)],{'conversation':_0x30b1ef['textMessage']['text']},_0x30b1ef?.['options']);}async[a0_0x591e8d(0x37a)](_0x306dac){const _0xb84645=a0_0x591e8d;if(!_0x306dac[_0xb84645(0x717)])throw new m(_0xb84645(0x644));if(!_0x306dac[_0xb84645(0x4c3)])throw new m(_0xb84645(0x66b));if(_0x306dac[_0xb84645(0x683)]){let _0x151aa1=await this[_0xb84645(0x799)][_0xb84645(0x3d5)][_0xb84645(0x2c5)]({'where':{}},this[_0xb84645(0x3ec)][_0xb84645(0x490)]);if(!_0x151aa1[_0xb84645(0x836)])throw new m(_0xb84645(0x235));_0x306dac[_0xb84645(0x6da)]=_0x151aa1[_0xb84645(0x516)](_0x4a6de1=>_0x4a6de1[_0xb84645(0x870)])[_0xb84645(0x276)](_0x1f1b2c=>_0x1f1b2c[_0xb84645(0x812)]);}if(!_0x306dac[_0xb84645(0x6da)]?.['length']&&!_0x306dac[_0xb84645(0x683)])throw new m(_0xb84645(0x7a0));if(_0x306dac[_0xb84645(0x717)]===_0xb84645(0x7a9)){if(!_0x306dac[_0xb84645(0x8a7)])throw new m(_0xb84645(0x7f3));if(!_0x306dac[_0xb84645(0x4ee)])throw new m(_0xb84645(0x2f7));return{'content':{'text':_0x306dac[_0xb84645(0x4c3)]},'option':{'backgroundColor':_0x306dac['backgroundColor'],'font':_0x306dac['font'],'statusJidList':_0x306dac[_0xb84645(0x6da)]}};}if(_0x306dac['type']===_0xb84645(0x861))return{'content':{'image':{'url':_0x306dac[_0xb84645(0x4c3)]},'caption':_0x306dac[_0xb84645(0x82c)]},'option':{'statusJidList':_0x306dac[_0xb84645(0x6da)]}};if(_0x306dac[_0xb84645(0x717)]===_0xb84645(0x519))return{'content':{'video':{'url':_0x306dac[_0xb84645(0x4c3)]},'caption':_0x306dac[_0xb84645(0x82c)]},'option':{'statusJidList':_0x306dac[_0xb84645(0x6da)]}};if(_0x306dac[_0xb84645(0x717)]==='audio'){this['logger'][_0xb84645(0x768)](this[_0xb84645(0x75c)]+'\x20('+this['instance'][_0xb84645(0x490)]+_0xb84645(0x626)),this[_0xb84645(0x484)][_0xb84645(0x768)](this[_0xb84645(0x75c)]+'\x20('+this['instance'][_0xb84645(0x490)]+_0xb84645(0x454));let _0x6168a9=await this[_0xb84645(0x53d)](_0x306dac[_0xb84645(0x4c3)]);if(typeof _0x6168a9==_0xb84645(0x2f2)){this[_0xb84645(0x484)][_0xb84645(0x768)](this[_0xb84645(0x75c)]+'\x20('+this[_0xb84645(0x3ec)][_0xb84645(0x490)]+'):Audio\x20processed');let _0x31e46c=P['readFileSync'](_0x6168a9)['toString'](_0xb84645(0x7f8));return{'content':{'audio':Buffer[_0xb84645(0x4f4)](_0x31e46c,_0xb84645(0x7f8)),'ptt':!0x0,'mimetype':_0xb84645(0x665)},'option':{'statusJidList':_0x306dac['statusJidList']}};}else throw new O(_0x6168a9);}throw new m(_0xb84645(0x3d3));}async[a0_0x591e8d(0x806)](_0x29a943){const _0x166cba=a0_0x591e8d;return await this[_0x166cba(0x859)](_0x166cba(0x60d),{'status':await this['formatStatusMessage'](_0x29a943[_0x166cba(0x806)])});}async[a0_0x591e8d(0x335)](_0x58be6b){const _0x500d11=a0_0x591e8d;try{let _0x21b7dd=await(0x0,w['prepareWAMessageMedia'])({[_0x58be6b[_0x500d11(0x6b0)]]:(0x0,D['isURL'])(_0x58be6b[_0x500d11(0x26d)])?{'url':_0x58be6b[_0x500d11(0x26d)]}:Buffer[_0x500d11(0x4f4)](_0x58be6b[_0x500d11(0x26d)],_0x500d11(0x7f8))},{'upload':this[_0x500d11(0x296)][_0x500d11(0x4c9)]}),_0x3f13b1=_0x58be6b[_0x500d11(0x6b0)]+_0x500d11(0x2f6);if(_0x58be6b['mediatype']==='document'&&!_0x58be6b[_0x500d11(0x875)]){let _0xb6ffe5=new RegExp(/.*\/(.+?)\./)[_0x500d11(0x3b1)](_0x58be6b[_0x500d11(0x26d)]);_0x58be6b['fileName']=_0xb6ffe5?_0xb6ffe5[0x1]:null;}let _0x3fe148;return(0x0,D[_0x500d11(0x66f)])(_0x58be6b[_0x500d11(0x26d)])?_0x3fe148=(await Q[_0x500d11(0x2ab)][_0x500d11(0x2f4)](_0x58be6b[_0x500d11(0x26d)],{'responseType':'arraybuffer'}))[_0x500d11(0x711)]['content-type']:_0x3fe148=(0x0,Oi[_0x500d11(0x4ab)])(_0x58be6b[_0x500d11(0x875)]),_0x21b7dd[_0x3f13b1][_0x500d11(0x82c)]=_0x58be6b?.['caption'],_0x21b7dd[_0x3f13b1][_0x500d11(0x191)]=_0x3fe148,_0x21b7dd[_0x3f13b1][_0x500d11(0x875)]=_0x58be6b[_0x500d11(0x875)],_0x58be6b[_0x500d11(0x6b0)]===_0x500d11(0x519)&&(_0x21b7dd[_0x3f13b1][_0x500d11(0x5a2)]=Uint8Array[_0x500d11(0x4f4)]((0x0,De[_0x500d11(0x3f7)])((0x0,L['join'])(process[_0x500d11(0x2db)](),_0x500d11(0x70a)))),_0x21b7dd[_0x3f13b1][_0x500d11(0x830)]=!0x1),(0x0,w[_0x500d11(0x814)])('',{[_0x3f13b1]:{..._0x21b7dd[_0x3f13b1]}},{'userJid':this[_0x500d11(0x3ec)][_0x500d11(0x490)]});}catch(_0x1620a1){let _0x42c51e='Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20prepareMediaMessage',_0x182b58=_0x1620a1 instanceof Error?_0x1620a1[_0x500d11(0x5b7)]:typeof _0x1620a1==_0x500d11(0x808)?JSON[_0x500d11(0x62f)](_0x1620a1):_0x1620a1,_0x1f45b8=_0x42c51e+':\x20'+_0x182b58;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x500d11(0x3ec)]['wuid']+'):\x20'+_0x1f45b8),new O(_0x1f45b8);}}async[a0_0x591e8d(0x174)](_0x6e8595){const _0x18c5b5=a0_0x591e8d;let _0x53cdc7=await this[_0x18c5b5(0x335)](_0x6e8595[_0x18c5b5(0x174)]);return await this[_0x18c5b5(0x859)](_0x6e8595[_0x18c5b5(0x5f6)],{..._0x53cdc7[_0x18c5b5(0x5b7)]},_0x6e8595?.[_0x18c5b5(0x4c1)]);}async[a0_0x591e8d(0x616)](_0x410eb6,_0x37107){const _0x4d4e82=a0_0x591e8d;try{this['logger']['verbose'](this[_0x4d4e82(0x75c)]+'\x20('+this[_0x4d4e82(0x3ec)]['wuid']+_0x4d4e82(0x698));let _0x5c2d89,_0x18a3a7=_0x37107+'-'+new Date()['getTime']();this[_0x4d4e82(0x484)][_0x4d4e82(0x768)](this[_0x4d4e82(0x75c)]+'\x20('+this[_0x4d4e82(0x3ec)]['wuid']+'):Hash\x20to\x20image\x20name:\x20'+_0x18a3a7);let _0x83a417=''+(0x0,L[_0x4d4e82(0x241)])(this[_0x4d4e82(0x61a)],_0x18a3a7+_0x4d4e82(0x20a));if(this[_0x4d4e82(0x484)][_0x4d4e82(0x768)](this['instanceName']+'\x20('+this['instance'][_0x4d4e82(0x490)]+_0x4d4e82(0x627)+_0x83a417),(0x0,D['isBase64'])(_0x410eb6)){this['logger'][_0x4d4e82(0x768)](this[_0x4d4e82(0x75c)]+'\x20('+this['instance']['wuid']+_0x4d4e82(0x534));let _0x3307d5=_0x410eb6[_0x4d4e82(0x4d0)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x351cd2=Buffer[_0x4d4e82(0x4f4)](_0x3307d5,_0x4d4e82(0x7f8));_0x5c2d89=''+(0x0,L[_0x4d4e82(0x241)])(this[_0x4d4e82(0x61a)],_0x4d4e82(0x6f0)+_0x18a3a7+'.png'),this['logger']['verbose'](this[_0x4d4e82(0x75c)]+'\x20('+this[_0x4d4e82(0x3ec)][_0x4d4e82(0x490)]+_0x4d4e82(0x39f)+_0x5c2d89),await(0x0,Lt[_0x4d4e82(0x2ab)])(_0x351cd2)[_0x4d4e82(0x2d8)](_0x5c2d89),this[_0x4d4e82(0x484)]['verbose'](this[_0x4d4e82(0x75c)]+'\x20('+this['instance'][_0x4d4e82(0x490)]+_0x4d4e82(0x840));}else{this['logger'][_0x4d4e82(0x768)](this['instanceName']+'\x20('+this[_0x4d4e82(0x3ec)][_0x4d4e82(0x490)]+'):Image\x20is\x20url');let _0x315734=new Date()['getTime'](),_0x332cb8=_0x410eb6+_0x4d4e82(0x486)+_0x315734;this[_0x4d4e82(0x484)][_0x4d4e82(0x768)](this[_0x4d4e82(0x75c)]+'\x20('+this[_0x4d4e82(0x3ec)]['wuid']+_0x4d4e82(0x6b2)+_0x332cb8);let _0x56c8eb=await Q[_0x4d4e82(0x2ab)][_0x4d4e82(0x2f4)](_0x332cb8,{'responseType':_0x4d4e82(0x7aa)});this[_0x4d4e82(0x484)][_0x4d4e82(0x768)](this['instanceName']+'\x20('+this['instance'][_0x4d4e82(0x490)]+'):Getting\x20image\x20from\x20url');let _0x8c9d57=Buffer[_0x4d4e82(0x4f4)](_0x56c8eb[_0x4d4e82(0x495)],'binary');_0x5c2d89=''+(0x0,L['join'])(this['storePath'],_0x4d4e82(0x6f0)+_0x18a3a7+_0x4d4e82(0x3ae)),this[_0x4d4e82(0x484)][_0x4d4e82(0x768)](this[_0x4d4e82(0x75c)]+'\x20('+this[_0x4d4e82(0x3ec)]['wuid']+'):Image\x20path:\x20'+_0x5c2d89),await(0x0,Lt[_0x4d4e82(0x2ab)])(_0x8c9d57)[_0x4d4e82(0x2d8)](_0x5c2d89),this['logger']['verbose'](this[_0x4d4e82(0x75c)]+'\x20('+this[_0x4d4e82(0x3ec)]['wuid']+'):Image\x20created');}return await(0x0,Lt[_0x4d4e82(0x2ab)])(_0x5c2d89)[_0x4d4e82(0x866)]()[_0x4d4e82(0x2d8)](_0x83a417),this[_0x4d4e82(0x484)][_0x4d4e82(0x768)](this['instanceName']+'\x20('+this[_0x4d4e82(0x3ec)]['wuid']+_0x4d4e82(0x487)),P[_0x4d4e82(0x1d6)](_0x5c2d89),this[_0x4d4e82(0x484)][_0x4d4e82(0x768)](this['instanceName']+'\x20('+this[_0x4d4e82(0x3ec)][_0x4d4e82(0x490)]+_0x4d4e82(0x70f)),_0x83a417;}catch(_0x4b246e){let _0x428eef='Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP',_0x388c69=_0x4b246e instanceof Error?_0x4b246e[_0x4d4e82(0x5b7)]:typeof _0x4b246e==_0x4d4e82(0x808)?JSON[_0x4d4e82(0x62f)](_0x4b246e):_0x4b246e,_0x41d910=_0x428eef+':\x20'+_0x388c69;this['logger'][_0x4d4e82(0x62b)](this[_0x4d4e82(0x75c)]+'\x20('+this['instance'][_0x4d4e82(0x490)]+'):\x20'+_0x41d910);}}async[a0_0x591e8d(0x209)](_0x20461e){const _0x4a7c65=a0_0x591e8d;let _0x3b1959=await this[_0x4a7c65(0x616)](_0x20461e[_0x4a7c65(0x61b)]['image'],_0x20461e[_0x4a7c65(0x5f6)]),_0x4aa1a9=await this[_0x4a7c65(0x859)](_0x20461e['number'],{'sticker':{'url':_0x3b1959}},_0x20461e?.['options']);return P['unlinkSync'](_0x3b1959),this[_0x4a7c65(0x484)][_0x4a7c65(0x768)](this[_0x4a7c65(0x75c)]+'\x20('+this[_0x4a7c65(0x3ec)][_0x4a7c65(0x490)]+_0x4a7c65(0x597)),_0x4aa1a9;}async[a0_0x591e8d(0x463)](_0x3480cc){const _0xb6c2de=a0_0x591e8d;if(this[_0xb6c2de(0x484)]['verbose'](this[_0xb6c2de(0x75c)]+'\x20('+this[_0xb6c2de(0x3ec)][_0xb6c2de(0x490)]+'):Sending\x20audio\x20whatsapp'),!_0x3480cc[_0xb6c2de(0x4c1)]?.[_0xb6c2de(0x2c4)]&&_0x3480cc[_0xb6c2de(0x4c1)]?.[_0xb6c2de(0x2c4)]!==!0x1&&(_0x3480cc['options']['encoding']=!0x0),_0x3480cc['options']?.[_0xb6c2de(0x2c4)]){let _0x323af8=await this['convertaudio'](_0x3480cc[_0xb6c2de(0x3ea)][_0xb6c2de(0x6f4)]);if(typeof _0x323af8=='string'){let _0x589009=P[_0xb6c2de(0x3f7)](_0x323af8)[_0xb6c2de(0x44c)]('base64');return this[_0xb6c2de(0x859)](_0x3480cc['number'],{'audio':Buffer['from'](_0x589009,_0xb6c2de(0x7f8)),'ptt':!0x0,'mimetype':_0xb6c2de(0x687)},{'presence':_0xb6c2de(0x670),'delay':_0x3480cc?.[_0xb6c2de(0x4c1)]?.[_0xb6c2de(0x1ca)]});}else throw new O(_0x323af8);}return await this['sendMessageWithTyping'](_0x3480cc['number'],{'audio':(0x0,D[_0xb6c2de(0x66f)])(_0x3480cc[_0xb6c2de(0x3ea)]['audio'])?{'url':_0x3480cc[_0xb6c2de(0x3ea)]['audio']}:Buffer[_0xb6c2de(0x4f4)](_0x3480cc[_0xb6c2de(0x3ea)]['audio'],_0xb6c2de(0x7f8)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':'recording','delay':_0x3480cc?.['options']?.[_0xb6c2de(0x1ca)]});}async[a0_0x591e8d(0x53d)](_0x283d9a){const _0x4cc58b=a0_0x591e8d;this[_0x4cc58b(0x484)][_0x4cc58b(0x768)](this[_0x4cc58b(0x75c)]+'\x20('+this[_0x4cc58b(0x3ec)][_0x4cc58b(0x490)]+'):Processing\x20audio');let _0x942fa0=(0x0,D[_0x4cc58b(0x66f)])(_0x283d9a)?(0x0,Ft[_0x4cc58b(0x2e9)])(_0x4cc58b(0x2b1))[_0x4cc58b(0x1d9)](_0x283d9a)[_0x4cc58b(0x88d)](_0x4cc58b(0x6a5)):(0x0,Ft[_0x4cc58b(0x2e9)])(_0x4cc58b(0x2b1))[_0x4cc58b(0x1d9)](_0x283d9a)[_0x4cc58b(0x88d)](_0x4cc58b(0x6a5)),_0x441c89=''+(0x0,L[_0x4cc58b(0x241)])(this[_0x4cc58b(0x61a)],_0x942fa0+'.ogg');if(P[_0x4cc58b(0x354)](_0x441c89))return this[_0x4cc58b(0x484)]['verbose'](this[_0x4cc58b(0x75c)]+'\x20('+this[_0x4cc58b(0x3ec)][_0x4cc58b(0x490)]+_0x4cc58b(0x88f)),_0x441c89;let _0x4161a0=''+(0x0,L['join'])(this[_0x4cc58b(0x61a)],_0x4cc58b(0x6f0)+(0x0,Y['v4'])()+_0x4cc58b(0x2dc));if((0x0,D['isURL'])(_0x283d9a)){let _0x467a80=new Date()[_0x4cc58b(0x7ab)](),_0x5cf101=_0x283d9a+_0x4cc58b(0x486)+_0x467a80,_0x59ec1d=await Q['default'][_0x4cc58b(0x2f4)](_0x5cf101,{'responseType':_0x4cc58b(0x7aa)});P['writeFileSync'](_0x4161a0,_0x59ec1d['data']);}else{let _0x4e63ef=Buffer['from'](_0x283d9a,'base64');P[_0x4cc58b(0x584)](_0x4161a0,_0x4e63ef);}return new Promise((_0x2a7ccd,_0x3a88a9)=>{const _0x4a9d85=_0x4cc58b;(0x0,Pe[_0x4a9d85(0x3b1)])(Ts[_0x4a9d85(0x2ab)][_0x4a9d85(0x81b)]+'\x20-i\x20'+_0x4161a0+'\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20'+_0x441c89+'\x20-y',_0x215b06=>{const _0x2956f3=_0x4a9d85;if(P[_0x2956f3(0x1d6)](_0x4161a0),_0x215b06){this['logger'][_0x2956f3(0x768)](this['instanceName']+'\x20('+this[_0x2956f3(0x3ec)][_0x2956f3(0x490)]+_0x2956f3(0x76f)),_0x3a88a9(_0x215b06);return;}this[_0x2956f3(0x484)][_0x2956f3(0x768)](this[_0x2956f3(0x75c)]+'\x20('+this[_0x2956f3(0x3ec)][_0x2956f3(0x490)]+'):Audio\x20converted\x20and\x20stored\x20in\x20cache'),_0x2a7ccd(_0x441c89);});});}async['convertaudioMP3'](_0x4ac894){const _0x306546=a0_0x591e8d;this[_0x306546(0x484)][_0x306546(0x768)](this[_0x306546(0x75c)]+'\x20('+this[_0x306546(0x3ec)][_0x306546(0x490)]+'):Processing\x20audio');let _0x300aa3=(0x0,Ft[_0x306546(0x2e9)])(_0x306546(0x2b1))[_0x306546(0x1d9)](_0x4ac894)[_0x306546(0x88d)]('hex'),_0x3e4eed=''+(0x0,L[_0x306546(0x241)])(this[_0x306546(0x61a)],_0x300aa3+'.mp3');if(P[_0x306546(0x354)](_0x3e4eed))return this[_0x306546(0x484)][_0x306546(0x768)](this[_0x306546(0x75c)]+'\x20('+this[_0x306546(0x3ec)][_0x306546(0x490)]+'):Cached\x20audio\x20found,\x20returning\x20existing\x20file'),L[_0x306546(0x2ab)][_0x306546(0x7ac)](_0x3e4eed);let _0xa2b4ee=''+(0x0,L['join'])(this[_0x306546(0x61a)],'temp-'+_0x300aa3+_0x306546(0x753));if((0x0,D[_0x306546(0x66f)])(_0x4ac894)){let _0x7a1b45=new Date()[_0x306546(0x7ab)](),_0x339300=_0x4ac894+'?timestamp='+_0x7a1b45,_0x76765d=await Q[_0x306546(0x2ab)][_0x306546(0x2f4)](_0x339300,{'responseType':_0x306546(0x7aa)});P['writeFileSync'](_0xa2b4ee,_0x76765d[_0x306546(0x495)]);}else{let _0x208a18=Buffer[_0x306546(0x4f4)](_0x4ac894,_0x306546(0x7f8));P['writeFileSync'](_0xa2b4ee,_0x208a18);}return new Promise((_0xe64396,_0x16f63d)=>{const _0x361c1f=_0x306546;(0x0,Pe[_0x361c1f(0x3b1)])(Ts[_0x361c1f(0x2ab)][_0x361c1f(0x81b)]+_0x361c1f(0x5b3)+_0xa2b4ee+'\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20'+_0x3e4eed+'\x20-y',_0x4954c5=>{const _0x17ea10=_0x361c1f;if(P[_0x17ea10(0x1d6)](_0xa2b4ee),_0x4954c5){this[_0x17ea10(0x484)][_0x17ea10(0x768)](this[_0x17ea10(0x75c)]+'\x20('+this[_0x17ea10(0x3ec)][_0x17ea10(0x490)]+_0x17ea10(0x76f)),_0x16f63d(_0x4954c5);return;}this[_0x17ea10(0x484)][_0x17ea10(0x768)](this[_0x17ea10(0x75c)]+'\x20('+this[_0x17ea10(0x3ec)][_0x17ea10(0x490)]+_0x17ea10(0x510)),_0xe64396(L[_0x17ea10(0x2ab)][_0x17ea10(0x7ac)](_0x3e4eed));});});}async[a0_0x591e8d(0x53c)](_0x1a525c){const _0x2a0fb3=a0_0x591e8d;let _0x442335={},_0x2a3c98=_0x2a0fb3(0x3ee);if(_0x1a525c['buttonMessage']?.[_0x2a0fb3(0x174)]){_0x2a3c98=_0x1a525c['buttonMessage'][_0x2a0fb3(0x174)]?.[_0x2a0fb3(0x6b0)]['toUpperCase']()??_0x2a0fb3(0x3ee),_0x442335[_0x2a0fb3(0x476)]=_0x2a3c98['toLowerCase']()+_0x2a0fb3(0x2f6);let _0xfb55a7=await this[_0x2a0fb3(0x335)](_0x1a525c[_0x2a0fb3(0x53c)][_0x2a0fb3(0x174)]);_0x442335['message']=_0xfb55a7[_0x2a0fb3(0x5b7)][_0x442335[_0x2a0fb3(0x476)]],_0x442335[_0x2a0fb3(0x5d8)]='*'+_0x1a525c[_0x2a0fb3(0x53c)][_0x2a0fb3(0x560)]+_0x2a0fb3(0x3a2)+_0x1a525c['buttonMessage'][_0x2a0fb3(0x5e5)];}let _0x4854a4={'text':_0x1a525c[_0x2a0fb3(0x53c)][_0x2a0fb3(0x779)][_0x2a0fb3(0x276)](_0x130cdc=>_0x130cdc[_0x2a0fb3(0x8a9)]),'ids':_0x1a525c['buttonMessage'][_0x2a0fb3(0x779)][_0x2a0fb3(0x276)](_0x4c4b3e=>_0x4c4b3e[_0x2a0fb3(0x4df)])};if(!(0x0,D[_0x2a0fb3(0x19b)])(_0x4854a4[_0x2a0fb3(0x7a9)])||!(0x0,D['arrayUnique'])(_0x4854a4['ids']))throw new m('Button\x20texts\x20cannot\x20be\x20repeated',_0x2a0fb3(0x2ad));return await this['sendMessageWithTyping'](_0x1a525c[_0x2a0fb3(0x5f6)],{'buttonsMessage':{'text':_0x442335?.[_0x2a0fb3(0x476)]?void 0x0:_0x1a525c['buttonMessage']['title'],'contentText':_0x442335?.[_0x2a0fb3(0x5d8)]??_0x1a525c['buttonMessage'][_0x2a0fb3(0x5e5)],'footerText':_0x1a525c[_0x2a0fb3(0x53c)]?.[_0x2a0fb3(0x59d)],'buttons':_0x1a525c['buttonMessage'][_0x2a0fb3(0x779)][_0x2a0fb3(0x276)](_0x88d57c=>({'buttonText':{'displayText':_0x88d57c[_0x2a0fb3(0x8a9)]},'buttonId':_0x88d57c['buttonId'],'type':0x1})),'headerType':w['proto']['Message'][_0x2a0fb3(0x716)][_0x2a0fb3(0x18b)][_0x2a3c98],[_0x442335?.[_0x2a0fb3(0x476)]]:_0x442335?.[_0x2a0fb3(0x5b7)]}},_0x1a525c?.[_0x2a0fb3(0x4c1)]);}async[a0_0x591e8d(0x502)](_0x308f2b){const _0x95f9a3=a0_0x591e8d;return await this[_0x95f9a3(0x859)](_0x308f2b[_0x95f9a3(0x5f6)],{'locationMessage':{'degreesLatitude':_0x308f2b[_0x95f9a3(0x502)][_0x95f9a3(0x822)],'degreesLongitude':_0x308f2b[_0x95f9a3(0x502)][_0x95f9a3(0x345)],'name':_0x308f2b[_0x95f9a3(0x502)]?.[_0x95f9a3(0x1f8)],'address':_0x308f2b[_0x95f9a3(0x502)]?.[_0x95f9a3(0x73d)]}},_0x308f2b?.[_0x95f9a3(0x4c1)]);}async[a0_0x591e8d(0x15f)](_0x5bc53f){const _0x5436d7=a0_0x591e8d;let _0x4bb40c={},_0x237699=async _0x3bcf36=>{const _0x2c4f59=a0_0x3f1e;let _0x58d77c=_0x2c4f59(0x858)+_0x3bcf36[_0x2c4f59(0x388)]+_0x2c4f59(0x885)+_0x3bcf36[_0x2c4f59(0x388)]+'\x0a';_0x3bcf36[_0x2c4f59(0x6bd)]&&(_0x58d77c+=_0x2c4f59(0x89e)+_0x3bcf36[_0x2c4f59(0x6bd)]+';\x0a'),_0x3bcf36[_0x2c4f59(0x60f)]&&(_0x58d77c+=_0x2c4f59(0x7a8)+_0x3bcf36[_0x2c4f59(0x60f)]+'\x0a'),_0x3bcf36[_0x2c4f59(0x18d)]&&(_0x58d77c+='URL:'+_0x3bcf36[_0x2c4f59(0x18d)]+'\x0a');let _0x514630='',_0x41dac1=0x1;if(_0x3bcf36['phoneNumber']){let _0x4cf360=_0x3bcf36[_0x2c4f59(0x6e2)]['split']('|');for(let _0x4e312b of _0x4cf360){let _0x3f853b=await this[_0x2c4f59(0x1b5)]({'numbers':[_0x4e312b]}),_0x1a9b6c=(_0x3f853b[_0x2c4f59(0x836)]>0x0?_0x3f853b[0x0][_0x2c4f59(0x833)]:this[_0x2c4f59(0x649)](_0x4e312b))['replace'](_0x2c4f59(0x20d),'');_0x514630+='item'+_0x41dac1+_0x2c4f59(0x608)+_0x1a9b6c+':'+_0x4e312b+_0x2c4f59(0x713)+_0x41dac1+_0x2c4f59(0x832),_0x41dac1++;}}return _0x58d77c+=_0x514630+_0x2c4f59(0x18e),_0x58d77c;};return _0x5bc53f[_0x5436d7(0x15f)][_0x5436d7(0x836)]===0x1?_0x4bb40c[_0x5436d7(0x15f)]={'displayName':_0x5bc53f[_0x5436d7(0x15f)][0x0][_0x5436d7(0x388)],'vcard':await _0x237699(_0x5bc53f[_0x5436d7(0x15f)][0x0])}:_0x4bb40c[_0x5436d7(0x4b8)]={'displayName':_0x5bc53f[_0x5436d7(0x15f)][_0x5436d7(0x836)]+'\x20contacts','contacts':await Promise[_0x5436d7(0x5ec)](_0x5bc53f[_0x5436d7(0x15f)]['map'](async _0x2e13b1=>({'displayName':_0x2e13b1[_0x5436d7(0x388)],'vcard':await _0x237699(_0x2e13b1)})))},await this['sendMessageWithTyping'](_0x5bc53f[_0x5436d7(0x5f6)],{..._0x4bb40c},_0x5bc53f?.[_0x5436d7(0x4c1)]);}async[a0_0x591e8d(0x4ed)](_0x5dd32a){const _0x1b6155=a0_0x591e8d;return await this[_0x1b6155(0x859)](_0x5dd32a['reactionMessage'][_0x1b6155(0x27f)][_0x1b6155(0x166)],{'reactionMessage':{'key':_0x5dd32a[_0x1b6155(0x4ed)][_0x1b6155(0x27f)],'text':_0x5dd32a['reactionMessage'][_0x1b6155(0x555)]}});}async[a0_0x591e8d(0x1b5)](_0x23b6ef){const _0x2754d7=a0_0x591e8d;let _0x3e2bcb=[];for await(let _0x36af18 of _0x23b6ef[_0x2754d7(0x2e8)]){let _0x228725=this[_0x2754d7(0x649)](_0x36af18),_0x195851=!0x1;try{if((0x0,w['isJidGroup'])(_0x228725)){let _0x313695=(await this[_0x2754d7(0x799)]['chat'][_0x2754d7(0x685)]({'where':{'_id':_0x228725}},this['instance'][_0x2754d7(0x490)]))['groupdata'];_0x313695?(_0x195851=!0x0,_0x3e2bcb[_0x2754d7(0x57f)](new ce(_0x313695['id'],_0x195851,_0x313695?.[_0x2754d7(0x178)]))):(_0x313695=await this['findGroup']({'groupJid':_0x228725},_0x2754d7(0x483)),_0x3e2bcb[_0x2754d7(0x57f)](new ce(_0x313695['id'],!!_0x313695?.['id'],_0x313695?.['subject'])));}else{if(_0x228725[_0x2754d7(0x243)](_0x2754d7(0x6aa)))_0x3e2bcb[_0x2754d7(0x57f)](new ce(_0x228725,!0x0));else{let _0x562aea=(await this[_0x2754d7(0x296)][_0x2754d7(0x43b)](_0x228725))[0x0];_0x3e2bcb[_0x2754d7(0x57f)](new ce(_0x562aea['jid'],_0x562aea[_0x2754d7(0x5c4)]));}}}catch{(0x0,w['isJidGroup'])(_0x228725)||await this[_0x2754d7(0x1f4)](_0x228725),_0x3e2bcb[_0x2754d7(0x57f)](new ce(_0x36af18,!0x1));}}return _0x3e2bcb;}async['deleteImportedChat'](_0x15684f){const _0x4014d3=a0_0x591e8d;try{await this[_0x4014d3(0x799)]['chat']['findOne']({'where':{'_id':_0x15684f,'imported':!0x0}},this[_0x4014d3(0x3ec)][_0x4014d3(0x490)])&&(await this['repository']['chat'][_0x4014d3(0x1e0)](_0x15684f,this[_0x4014d3(0x3ec)]['wuid']),this[_0x4014d3(0x484)][_0x4014d3(0x7ed)]('Chat\x20com\x20ID\x20'+_0x15684f+_0x4014d3(0x619)));}catch(_0x159de0){let _0x2031db=_0x4014d3(0x34d),_0x3843eb=_0x159de0 instanceof Error?_0x159de0[_0x4014d3(0x5b7)]:typeof _0x159de0==_0x4014d3(0x808)?JSON[_0x4014d3(0x62f)](_0x159de0):_0x159de0,_0x1b9770=_0x2031db+':\x20'+_0x3843eb;this[_0x4014d3(0x484)][_0x4014d3(0x62b)](this['instanceName']+'\x20('+this[_0x4014d3(0x3ec)][_0x4014d3(0x490)]+'):\x20'+_0x1b9770);}}async[a0_0x591e8d(0x4e2)](_0xe86120){const _0x4468f2=a0_0x591e8d;try{let _0x1c4f64=_0xe86120[_0x4468f2(0x2b9)][_0x4468f2(0x516)](_0x1e5d71=>(0x0,w[_0x4468f2(0x6c9)])(_0x1e5d71[_0x4468f2(0x166)])||(0x0,w[_0x4468f2(0x46e)])(_0x1e5d71['remoteJid']))[_0x4468f2(0x276)](_0x33de46=>({'remoteJid':_0x33de46[_0x4468f2(0x166)],'fromMe':_0x33de46[_0x4468f2(0x7f7)],'id':_0x33de46['id']}));await this['client']['readMessages'](_0x1c4f64);let _0x417dd3=_0x1c4f64['map'](_0x1c7c1e=>this[_0x4468f2(0x207)](_0x1c7c1e,{'status':'READ','owner':this[_0x4468f2(0x3ec)][_0x4468f2(0x490)]})),_0x3c7f76=_0x1c4f64[_0x4468f2(0x276)](_0x4fbaac=>this[_0x4468f2(0x799)]['chat'][_0x4468f2(0x828)]({'where':{'_id':_0x4fbaac[_0x4468f2(0x166)]}},{'unreadcount':0x0},this['instance'][_0x4468f2(0x490)])),[_0x3ab261,_0x48d64b]=await Promise['all']([Promise[_0x4468f2(0x5ec)](_0x417dd3),Promise[_0x4468f2(0x5ec)](_0x3c7f76)]);return _0x48d64b[_0x4468f2(0x516)](_0x4e5f66=>_0x4e5f66!==null)['forEach'](_0x5a7bb1=>{const _0x5d5318=_0x4468f2;U(this['instanceName'],_0x5d5318(0x672),{'chat':_0x5a7bb1});}),{'message':_0x4468f2(0x571),'read':'success'};}catch(_0x5adb43){let _0x24b93d='Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida',_0x50f339=_0x5adb43 instanceof Error?_0x5adb43['message']:typeof _0x5adb43=='object'?JSON['stringify'](_0x5adb43):_0x5adb43,_0x4e7cc0=_0x24b93d+':\x20'+_0x50f339;throw this['logger'][_0x4468f2(0x62b)](this[_0x4468f2(0x75c)]+'\x20('+this[_0x4468f2(0x3ec)]['wuid']+_0x4468f2(0x872)+_0x4e7cc0),new O(_0x4e7cc0);}}async['getLastMessage'](_0x1d36b6){const _0x283018=a0_0x591e8d;let _0x33e874={'where':{'key':{'remoteJid':_0x1d36b6}},'limit':0x1},_0x57f77c=await this[_0x283018(0x6c5)](_0x33e874);return _0x57f77c||(this[_0x283018(0x484)][_0x283018(0x62b)]('Last\x20message\x20not\x20found\x20for\x20number:\x20'+_0x1d36b6),null);}async[a0_0x591e8d(0x332)](_0xa7adc7){const _0xa12408=a0_0x591e8d;this[_0xa12408(0x484)]['verbose'](this[_0xa12408(0x75c)]+'\x20('+this[_0xa12408(0x3ec)][_0xa12408(0x490)]+_0xa12408(0x7be));try{let _0x32928c=_0xa7adc7[_0xa12408(0x72b)],_0x17296a=_0xa7adc7[_0xa12408(0x4b2)];if(!_0x32928c&&_0x17296a?_0x32928c=await this[_0xa12408(0x727)](_0x17296a):(_0x32928c=_0xa7adc7[_0xa12408(0x72b)],_0x32928c[_0xa12408(0x692)]=_0x32928c?.[_0xa12408(0x692)]??Date['now'](),_0x17296a=_0x32928c?.[_0xa12408(0x27f)]?.[_0xa12408(0x166)]),!_0x32928c||Object['keys'](_0x32928c)[_0xa12408(0x836)]===0x0)throw new F(_0xa12408(0x497));this[_0xa12408(0x484)][_0xa12408(0x768)](this[_0xa12408(0x75c)]+'\x20('+this[_0xa12408(0x3ec)][_0xa12408(0x490)]+_0xa12408(0x891)+_0x17296a);try{await this[_0xa12408(0x296)]['chatModify']({'archive':_0xa7adc7['archive'],'lastMessages':[_0x32928c]},this[_0xa12408(0x649)](_0x17296a));}catch(_0x5766bd){let _0x39fe0c=_0xa12408(0x884)+_0x17296a,_0xf93d66=_0x5766bd instanceof Error?_0x5766bd[_0xa12408(0x5b7)]:typeof _0x5766bd==_0xa12408(0x808)?JSON[_0xa12408(0x62f)](_0x5766bd):_0x5766bd,_0x5879ff=_0x39fe0c+':\x20'+_0xf93d66;this[_0xa12408(0x484)][_0xa12408(0x62b)](this[_0xa12408(0x75c)]+'\x20('+this[_0xa12408(0x3ec)][_0xa12408(0x490)]+_0xa12408(0x872)+_0x5879ff);}this[_0xa12408(0x484)][_0xa12408(0x768)](this[_0xa12408(0x75c)]+'\x20('+this['instance']['wuid']+_0xa12408(0x6ac)+_0x17296a);let _0x12d52b=await this['repository'][_0xa12408(0x4b2)][_0xa12408(0x828)]({'where':{'_id':_0x32928c?.[_0xa12408(0x27f)]?.[_0xa12408(0x166)]}},{'archived':_0xa7adc7[_0xa12408(0x52b)]},this[_0xa12408(0x3ec)][_0xa12408(0x490)]);return _0x12d52b?(this[_0xa12408(0x484)][_0xa12408(0x768)](this['instanceName']+'\x20('+this[_0xa12408(0x3ec)]['wuid']+'):Notifying\x20clients\x20for\x20chat:\x20'+JSON[_0xa12408(0x62f)](_0x12d52b)),U(this[_0xa12408(0x75c)],_0xa12408(0x672),{'chat':_0x12d52b})):this['logger'][_0xa12408(0x62b)](this[_0xa12408(0x75c)]+'\x20('+this['instance']['wuid']+'):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x17296a),{'chatId':_0x17296a,'archived':_0xa7adc7[_0xa12408(0x52b)]};}catch(_0x34e337){let _0x2a0b30=_0xa12408(0x1da),_0x55f6fc=_0x34e337 instanceof Error?_0x34e337[_0xa12408(0x5b7)]:typeof _0x34e337==_0xa12408(0x808)?JSON[_0xa12408(0x62f)](_0x34e337):_0x34e337,_0x1595cb=_0x2a0b30+':\x20'+_0x55f6fc;throw this[_0xa12408(0x484)]['error'](this[_0xa12408(0x75c)]+'\x20('+this[_0xa12408(0x3ec)][_0xa12408(0x490)]+_0xa12408(0x872)+_0x1595cb),new O(_0x1595cb);}}async['deleteChat'](_0x6dc143){const _0x4a5785=a0_0x591e8d;this[_0x4a5785(0x484)][_0x4a5785(0x768)](this[_0x4a5785(0x75c)]+'\x20('+this[_0x4a5785(0x3ec)]['wuid']+_0x4a5785(0x807));try{let _0x43ce08=await this['getLastMessage'](_0x6dc143);if(!_0x43ce08||Object[_0x4a5785(0x34b)](_0x43ce08)[_0x4a5785(0x836)]===0x0)throw new F(_0x4a5785(0x497));let _0x260c60=_0x43ce08[0x0];this['logger'][_0x4a5785(0x768)](this[_0x4a5785(0x75c)]+'\x20('+this[_0x4a5785(0x3ec)][_0x4a5785(0x490)]+_0x4a5785(0x429)+_0x6dc143);try{await this['client']['chatModify']({'delete':!0x0,'lastMessages':[{'key':_0x260c60['key'],'messageTimestamp':_0x260c60[_0x4a5785(0x692)]}]},this[_0x4a5785(0x649)](_0x6dc143));}catch(_0x335209){this[_0x4a5785(0x484)][_0x4a5785(0x62b)](_0x4a5785(0x884)+_0x6dc143+':\x20'+_0x335209[_0x4a5785(0x44c)]());}this[_0x4a5785(0x484)][_0x4a5785(0x768)](this['instanceName']+'\x20('+this[_0x4a5785(0x3ec)]['wuid']+_0x4a5785(0x6ac)+_0x6dc143);return;}catch(_0x5a7902){throw this[_0x4a5785(0x484)][_0x4a5785(0x62b)](this[_0x4a5785(0x75c)]+'\x20('+this[_0x4a5785(0x3ec)][_0x4a5785(0x490)]+_0x4a5785(0x2c2)+_0x5a7902['toString']()),new O({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0x5a7902[_0x4a5785(0x44c)]()]});}}async[a0_0x591e8d(0x545)](_0x4030a0){const _0x15d0e4=a0_0x591e8d;try{let _0x2b159f=await this[_0x15d0e4(0x296)][_0x15d0e4(0x4e6)](_0x4030a0['remoteJid'],{'delete':_0x4030a0});try{let _0xae604a=await this['updateMessage'](_0x4030a0,{'status':'DELETED','owner':this[_0x15d0e4(0x3ec)][_0x15d0e4(0x490)]});this[_0x15d0e4(0x484)]['verbose'](this[_0x15d0e4(0x75c)]+'\x20('+this[_0x15d0e4(0x3ec)][_0x15d0e4(0x490)]+_0x15d0e4(0x60b)+_0xae604a);}catch(_0x3eccad){this[_0x15d0e4(0x484)][_0x15d0e4(0x62b)](_0x15d0e4(0x829)+_0x3eccad);}return _0x2b159f;}catch(_0xe3055d){throw new O(_0x15d0e4(0x240),_0xe3055d?.['toString']());}}async['getBase64FromMediaMessage'](_0x3a8c06){const _0x312cb9=a0_0x591e8d;try{let _0x64eeaf=_0x3a8c06?.[_0x312cb9(0x5b7)]?_0x3a8c06:await this[_0x312cb9(0x62a)](_0x3a8c06[_0x312cb9(0x27f)],!0x0);for(let _0xc5a4b of Ea)_0x64eeaf[_0x312cb9(0x5b7)][_0xc5a4b]&&(_0x64eeaf[_0x312cb9(0x5b7)]=_0x64eeaf[_0x312cb9(0x5b7)][_0xc5a4b]['message']);let _0x5330ba,_0x2d30b3;for(let _0x1971ea of Ca)if(_0x5330ba=_0x64eeaf[_0x312cb9(0x5b7)][_0x1971ea],_0x5330ba){_0x2d30b3=_0x1971ea;break;}if(!_0x5330ba)throw _0x312cb9(0x44b);typeof _0x5330ba[_0x312cb9(0x476)]=='object'&&(_0x64eeaf[_0x312cb9(0x5b7)]=JSON['parse'](JSON['stringify'](_0x64eeaf[_0x312cb9(0x5b7)])));let _0x5ba153=await(0x0,w['downloadMediaMessage'])({'key':_0x64eeaf?.[_0x312cb9(0x27f)],'message':_0x64eeaf?.[_0x312cb9(0x5b7)]},_0x312cb9(0x361),{},{'logger':(0x0,kt['default'])({'level':'silent'}),'reuploadRequest':this[_0x312cb9(0x296)][_0x312cb9(0x5e8)]});if(!(_0x5ba153 instanceof Buffer))throw new Error(_0x312cb9(0x61f));let _0x222848=this[_0x312cb9(0x285)][_0x312cb9(0x2f4)]('DATABASE'),_0xfd0e93,_0x37d7d9;if(_0x5330ba['fileName'])_0xfd0e93=_0x5330ba[_0x312cb9(0x875)];else{let _0x8a545e=_0x5330ba[_0x312cb9(0x191)]?.[_0x312cb9(0x1e2)](/\/(\w+)/),_0x4900a8=_0x8a545e?_0x8a545e[0x1]:null;if(!_0x4900a8)throw new Error(_0x312cb9(0x184));_0xfd0e93=(0x0,Y['v4'])()+'.'+_0x4900a8;}_0x2d30b3==='audioMessage'?_0x37d7d9='/media/'+await this[_0x312cb9(0x25d)](_0x5ba153[_0x312cb9(0x44c)](_0x312cb9(0x7f8))):(await this[_0x312cb9(0x3cf)](_0x5ba153,_0xfd0e93),_0x37d7d9='/media/'+_0xfd0e93);let _0x11b226=this[_0x312cb9(0x285)][_0x312cb9(0x2f4)](_0x312cb9(0x371))[_0x312cb9(0x83c)];if(!_0x11b226){let _0x35b17d=this[_0x312cb9(0x285)]['get']('SSL_CONF');_0x11b226='https://'+(_0x35b17d&&_0x35b17d['FULLCHAIN']['split']('/')[0x4]);}_0x37d7d9=''+_0x11b226+_0x37d7d9;let _0x5d7010=0xc*0x3c*0x3c*0x3e8,_0x14f62d={'where':{'_id':_0x64eeaf[_0x312cb9(0x27f)]['id']}},_0x5bd91c={'message_normalized.fileUrl':_0x37d7d9,'message_normalized.expires_fileUrl':Date[_0x312cb9(0x673)]()+_0x5d7010};try{let _0x47788a=await this['repository'][_0x312cb9(0x5b7)][_0x312cb9(0x1d9)](_0x14f62d,_0x5bd91c,this[_0x312cb9(0x3ec)][_0x312cb9(0x490)]);_0x47788a&&U(this[_0x312cb9(0x75c)],'messages',{'message':_0x47788a});}catch(_0x3cd020){let _0x40c791=_0x312cb9(0x251),_0xf60e26=_0x3cd020 instanceof Error?_0x3cd020[_0x312cb9(0x5b7)]:typeof _0x3cd020==_0x312cb9(0x808)?JSON[_0x312cb9(0x62f)](_0x3cd020):_0x3cd020,_0x4e5d0e=_0x40c791+':\x20'+_0xf60e26;this[_0x312cb9(0x484)]['error'](this[_0x312cb9(0x75c)]+'\x20('+this[_0x312cb9(0x3ec)][_0x312cb9(0x490)]+_0x312cb9(0x872)+_0x4e5d0e);}return{'mediaType':_0x2d30b3,'fileName':_0x5330ba[_0x312cb9(0x875)],'caption':_0x5330ba[_0x312cb9(0x82c)],'size':{'fileLength':_0x5330ba['fileLength'],'height':_0x5330ba['height'],'width':_0x5330ba[_0x312cb9(0x819)]},'mimetype':_0x5330ba['mimetype'],'base64':_0x5ba153[_0x312cb9(0x44c)](_0x312cb9(0x7f8)),'fileUrl':_0x37d7d9,'expires_fileUrl':Date['now']()+_0x5d7010};}catch(_0x259813){let _0x5159b2='Falha\x20ao\x20processar\x20a\x20solicitao',_0x38d849=_0x259813 instanceof Error?_0x259813[_0x312cb9(0x5b7)]:typeof _0x259813==_0x312cb9(0x808)?JSON[_0x312cb9(0x62f)](_0x259813):_0x259813,_0x17d28d=_0x5159b2+':\x20'+_0x38d849;throw this['logger'][_0x312cb9(0x62b)](this[_0x312cb9(0x75c)]+'\x20('+this[_0x312cb9(0x3ec)][_0x312cb9(0x490)]+'):\x20'+_0x17d28d),new m(_0x17d28d);}}async['saveMediaToFile'](_0xa005af,_0x9f061){const _0x132d81=a0_0x591e8d;let _0xa59dc3=L['default'][_0x132d81(0x241)](__dirname,'downloads');P['existsSync'](_0xa59dc3)||P['mkdirSync'](_0xa59dc3,{'recursive':!0x0});let _0x4d2a01=L[_0x132d81(0x2ab)][_0x132d81(0x241)](_0xa59dc3,_0x9f061);return new Promise((_0x48577f,_0x37e04a)=>{const _0x14d606=_0x132d81;P[_0x14d606(0x1bd)](_0x4d2a01,_0xa005af,_0x33334f=>{const _0x4769eb=_0x14d606;_0x33334f?(this['logger'][_0x4769eb(0x62b)](_0x4769eb(0x3d9)+(_0x33334f instanceof Error?_0x33334f[_0x4769eb(0x5b7)]:JSON['stringify'](_0x33334f,null,0x2))),_0x37e04a(_0x33334f)):(this[_0x4769eb(0x484)][_0x4769eb(0x2c3)]('File\x20written\x20to\x20path:\x20'+_0x4d2a01),_0x48577f(_0x4d2a01));});});}async[a0_0x591e8d(0x538)](_0x5ef577){const _0x59ad6d=a0_0x591e8d;return await this[_0x59ad6d(0x799)][_0x59ad6d(0x3d5)]['find'](_0x5ef577,this[_0x59ad6d(0x3ec)][_0x59ad6d(0x490)]);}async[a0_0x591e8d(0x391)](){const _0xab6219=a0_0x591e8d;return await this[_0xab6219(0x799)][_0xab6219(0x835)][_0xab6219(0x2c5)]({'where':{}},this['instance'][_0xab6219(0x490)]);}async[a0_0x591e8d(0x6c5)](_0x4fd4ba){const _0x454437=a0_0x591e8d;return await this[_0x454437(0x799)]['message'][_0x454437(0x2c5)](_0x4fd4ba,this['instance'][_0x454437(0x490)]);}async[a0_0x591e8d(0x3d4)](){const _0x5e427b=a0_0x591e8d;return this[_0x5e427b(0x799)]['chat'][_0x5e427b(0x84c)](this['instance']['wuid']),this[_0x5e427b(0x799)]['chat'][_0x5e427b(0x6d3)](this['instance']['wuid']),this[_0x5e427b(0x799)][_0x5e427b(0x4b2)][_0x5e427b(0x551)](this[_0x5e427b(0x3ec)][_0x5e427b(0x490)]),this[_0x5e427b(0x799)][_0x5e427b(0x4b2)][_0x5e427b(0x1be)](this[_0x5e427b(0x3ec)][_0x5e427b(0x490)]),await this[_0x5e427b(0x799)][_0x5e427b(0x4b2)][_0x5e427b(0x2c5)]({'where':{}},this[_0x5e427b(0x3ec)][_0x5e427b(0x490)]);}async['importChatsAntigo'](_0x32bf0a){const _0x1d9de3=a0_0x591e8d;try{if(!Array[_0x1d9de3(0x7e5)](_0x32bf0a)||_0x32bf0a[_0x1d9de3(0x836)]===0x0)throw new Error(_0x1d9de3(0x750));let _0x3b45ef=[],_0x5667b1=[];for(let _0x3bec3f of _0x32bf0a){if(_0x3bec3f[_0x1d9de3(0x812)])_0x3bec3f[_0x1d9de3(0x812)]=this[_0x1d9de3(0x649)](_0x3bec3f[_0x1d9de3(0x812)]);else continue;await this[_0x1d9de3(0x799)][_0x1d9de3(0x4b2)][_0x1d9de3(0x685)]({'where':{'_id':_0x3bec3f[_0x1d9de3(0x812)]}},this[_0x1d9de3(0x3ec)][_0x1d9de3(0x490)])?_0x5667b1[_0x1d9de3(0x57f)]({'_id':_0x3bec3f['_id'],'leadInfo':_0x3bec3f[_0x1d9de3(0x2cf)],'owner':this[_0x1d9de3(0x3ec)][_0x1d9de3(0x490)]}):_0x3b45ef[_0x1d9de3(0x57f)]({'_id':_0x3bec3f[_0x1d9de3(0x812)],'owner':this[_0x1d9de3(0x3ec)][_0x1d9de3(0x490)],'leadInfo':_0x3bec3f[_0x1d9de3(0x2cf)],'imported':!0x0});}return _0x5667b1[_0x1d9de3(0x836)]>0x0&&await this[_0x1d9de3(0x799)][_0x1d9de3(0x4b2)]['updateMany'](_0x5667b1[_0x1d9de3(0x276)](_0x23b4d5=>({'query':{'where':{'_id':_0x23b4d5[_0x1d9de3(0x812)],'owner':this['instance'][_0x1d9de3(0x490)]}},'update':_0x23b4d5}))),_0x3b45ef[_0x1d9de3(0x836)]>0x0&&await this['repository'][_0x1d9de3(0x4b2)][_0x1d9de3(0x5d2)](_0x3b45ef,this[_0x1d9de3(0x3ec)][_0x1d9de3(0x490)]),{'updated':_0x5667b1[_0x1d9de3(0x836)],'inserted':_0x3b45ef[_0x1d9de3(0x836)]};}catch(_0x39b859){let _0x2fb731=_0x1d9de3(0x5b9),_0x1213c3=_0x39b859 instanceof Error?_0x39b859[_0x1d9de3(0x5b7)]:typeof _0x39b859==_0x1d9de3(0x808)?JSON['stringify'](_0x39b859):_0x39b859,_0x3c51d5=_0x2fb731+':\x20'+_0x1213c3;throw this[_0x1d9de3(0x484)]['error'](this[_0x1d9de3(0x75c)]+'\x20('+this[_0x1d9de3(0x3ec)][_0x1d9de3(0x490)]+_0x1d9de3(0x872)+_0x3c51d5),new m(_0x3c51d5);}}async['importChats'](_0x5e265d){const _0x5aa2d8=a0_0x591e8d;try{if(!Array[_0x5aa2d8(0x7e5)](_0x5e265d)||_0x5e265d[_0x5aa2d8(0x836)]===0x0)throw new Error(_0x5aa2d8(0x750));let _0x732f2b=0x64,_0x59368b=0x0;for(let _0x1c8e53=0x0;_0x1c8e53<_0x5e265d[_0x5aa2d8(0x836)];_0x1c8e53+=_0x732f2b){let _0x263d95=_0x5e265d[_0x5aa2d8(0x340)](_0x1c8e53,_0x1c8e53+_0x732f2b),{updated:_0x37e179}=await this[_0x5aa2d8(0x732)](_0x263d95);_0x59368b+=_0x37e179;}return{'updated':_0x59368b};}catch(_0x72d926){let _0x565e43=_0x5aa2d8(0x5b9),_0x419438=_0x72d926 instanceof Error?_0x72d926[_0x5aa2d8(0x5b7)]:typeof _0x72d926==_0x5aa2d8(0x808)?JSON[_0x5aa2d8(0x62f)](_0x72d926):_0x72d926,_0x17273f=_0x565e43+':\x20'+_0x419438;throw this[_0x5aa2d8(0x484)][_0x5aa2d8(0x62b)](this[_0x5aa2d8(0x75c)]+'\x20('+this[_0x5aa2d8(0x3ec)][_0x5aa2d8(0x490)]+_0x5aa2d8(0x872)+_0x17273f),new m(_0x17273f);}}async[a0_0x591e8d(0x732)](_0x176c93){const _0x1bfca8=a0_0x591e8d;try{let _0x389b67=await this[_0x1bfca8(0x799)][_0x1bfca8(0x835)]['find']({'where':{}},this[_0x1bfca8(0x3ec)][_0x1bfca8(0x490)]),_0x53299d=new Set(_0x389b67['map'](_0x574e3c=>_0x574e3c['_id'])),_0xf99dd6=[],_0x43ad28=[];for(let _0x2314d7 of _0x176c93){if(!_0x2314d7[_0x1bfca8(0x812)])continue;_0x2314d7[_0x1bfca8(0x812)]=this['createJid'](_0x2314d7[_0x1bfca8(0x812)]);let _0x42acfe=await this[_0x1bfca8(0x799)][_0x1bfca8(0x4b2)][_0x1bfca8(0x685)]({'where':{'_id':_0x2314d7[_0x1bfca8(0x812)]}},this['instance'][_0x1bfca8(0x490)]),_0x147285={};if(Object['entries'](_0x2314d7['leadInfo'])[_0x1bfca8(0x5ce)](([_0x44bfcd,_0xfdf507])=>{const _0x28ff8d=_0x1bfca8;_0x147285[_0x28ff8d(0x3c4)+_0x44bfcd]=_0xfdf507;}),_0x42acfe&&!_0x42acfe[_0x1bfca8(0x6eb)]){let _0x503a1f=(_0x2314d7[_0x1bfca8(0x2cf)][_0x1bfca8(0x325)]||[])[_0x1bfca8(0x516)](_0x5752b6=>_0x53299d[_0x1bfca8(0x1ea)](_0x5752b6)),_0x4f0566=new Set(_0x42acfe['leadInfo'][_0x1bfca8(0x325)]||[]),_0x59fca2=_0x503a1f[_0x1bfca8(0x516)](_0x5cc8f0=>!_0x4f0566[_0x1bfca8(0x1ea)](_0x5cc8f0)),_0x466486=[..._0x4f0566]['filter'](_0x397f23=>!_0x503a1f[_0x1bfca8(0x243)](_0x397f23));_0x43ad28[_0x1bfca8(0x57f)](..._0x59fca2[_0x1bfca8(0x276)](_0x13c129=>this[_0x1bfca8(0x180)](_0x13c129,_0x2314d7[_0x1bfca8(0x812)]))),_0x43ad28['push'](..._0x466486[_0x1bfca8(0x276)](_0x31a8ab=>this[_0x1bfca8(0x43c)](_0x31a8ab,_0x2314d7[_0x1bfca8(0x812)]))),_0x2314d7[_0x1bfca8(0x2cf)][_0x1bfca8(0x325)]=_0x503a1f,_0xf99dd6['push']({'query':{'where':{'_id':_0x2314d7[_0x1bfca8(0x812)],'owner':this['instance'][_0x1bfca8(0x490)]}},'update':_0x147285});}else _0x147285['imported']=!0x0,_0xf99dd6['push']({'query':{'where':{'_id':_0x2314d7[_0x1bfca8(0x812)],'owner':this[_0x1bfca8(0x3ec)]['wuid']}},'update':_0x147285});}let _0x588598=await this[_0x1bfca8(0x799)]['chat'][_0x1bfca8(0x430)](_0xf99dd6);return await Promise[_0x1bfca8(0x5ec)](_0x43ad28),{'updated':_0x588598};}catch(_0x1c97cc){let _0xcfae6d=_0x1bfca8(0x5b9),_0x556ce5=_0x1c97cc instanceof Error?_0x1c97cc[_0x1bfca8(0x5b7)]:typeof _0x1c97cc==_0x1bfca8(0x808)?JSON[_0x1bfca8(0x62f)](_0x1c97cc):_0x1c97cc,_0x4ac83d=_0xcfae6d+':\x20'+_0x556ce5;throw this['logger'][_0x1bfca8(0x62b)](this[_0x1bfca8(0x75c)]+'\x20('+this['instance'][_0x1bfca8(0x490)]+_0x1bfca8(0x872)+_0x4ac83d),new m(_0x4ac83d);}}async['fetchPrivacySettings'](){const _0x1a2c5f=a0_0x591e8d;return await this[_0x1a2c5f(0x296)]['fetchPrivacySettings']();}async['updatePrivacySettings'](_0x5c074a){const _0xcd6e6=a0_0x591e8d;try{return await this['client'][_0xcd6e6(0x35d)](_0x5c074a[_0xcd6e6(0x449)][_0xcd6e6(0x843)]),await this['client'][_0xcd6e6(0x54c)](_0x5c074a['privacySettings']['profile']),await this['client'][_0xcd6e6(0x7a2)](_0x5c074a['privacySettings'][_0xcd6e6(0x360)]),await this['client'][_0xcd6e6(0x47e)](_0x5c074a[_0xcd6e6(0x449)][_0xcd6e6(0x271)]),await this[_0xcd6e6(0x296)][_0xcd6e6(0x3e0)](_0x5c074a['privacySettings'][_0xcd6e6(0x7d8)]),await this['client'][_0xcd6e6(0x260)](_0x5c074a['privacySettings'][_0xcd6e6(0x6a1)]),this['client']?.['ws']?.[_0xcd6e6(0x3e5)](),{'update':'success','data':{'readreceipts':_0x5c074a['privacySettings'][_0xcd6e6(0x843)],'profile':_0x5c074a[_0xcd6e6(0x449)][_0xcd6e6(0x1e9)],'status':_0x5c074a[_0xcd6e6(0x449)][_0xcd6e6(0x360)],'online':_0x5c074a['privacySettings'][_0xcd6e6(0x271)],'last':_0x5c074a['privacySettings'][_0xcd6e6(0x7d8)],'groupadd':_0x5c074a[_0xcd6e6(0x449)][_0xcd6e6(0x6a1)]}};}catch(_0x5ceb96){let _0x56a168=_0xcd6e6(0x24b),_0x2ead4b=_0x5ceb96 instanceof Error?_0x5ceb96[_0xcd6e6(0x5b7)]:typeof _0x5ceb96==_0xcd6e6(0x808)?JSON[_0xcd6e6(0x62f)](_0x5ceb96):_0x5ceb96,_0x41bfc0=_0x56a168+':\x20'+_0x2ead4b;throw this['logger']['error'](this[_0xcd6e6(0x75c)]+'\x20('+this[_0xcd6e6(0x3ec)][_0xcd6e6(0x490)]+_0xcd6e6(0x872)+_0x41bfc0),new m(_0x41bfc0);}}async[a0_0x591e8d(0x5da)](_0x46cca2){const _0x5a0f58=a0_0x591e8d;let _0xe19a2e=(_0x46cca2?this[_0x5a0f58(0x649)](_0x46cca2):this[_0x5a0f58(0x296)]?.[_0x5a0f58(0x398)]?.['id'])[_0x5a0f58(0x4d0)](/:\d{1,2}@/g,'@');this[_0x5a0f58(0x484)][_0x5a0f58(0x768)](this[_0x5a0f58(0x75c)]+'\x20('+this[_0x5a0f58(0x3ec)][_0x5a0f58(0x490)]+'):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20'+_0xe19a2e);let _0x6d331c=await this['repository'][_0x5a0f58(0x3d5)][_0x5a0f58(0x685)]({'where':{'_id':_0xe19a2e}},this[_0x5a0f58(0x3ec)][_0x5a0f58(0x490)]),_0x168837=_0x6d331c?_0x6d331c[_0x5a0f58(0x870)]:null;try{let _0x599d30=(await this[_0x5a0f58(0x1b5)]({'numbers':[_0xe19a2e]}))?.[_0x5a0f58(0x622)](),_0xd0ead4=(await this[_0x5a0f58(0x7a1)](_0xe19a2e,null,!0x1))[_0x5a0f58(0x15c)][_0x5a0f58(0x4d1)],_0x43b42=await this[_0x5a0f58(0x188)](_0x599d30?.['jid']),_0x35fe91=await this[_0x5a0f58(0x4dc)](_0x599d30?.[_0x5a0f58(0x833)]),_0x9dec6b=(await this[_0x5a0f58(0x7a1)](_0xe19a2e,null,!0x1))['cachedContact'][_0x5a0f58(0x1f8)],_0x578965=await this[_0x5a0f58(0x799)][_0x5a0f58(0x4b2)][_0x5a0f58(0x685)]({'where':{'_id':_0xe19a2e}},this[_0x5a0f58(0x3ec)][_0x5a0f58(0x490)]),_0x35cb7a={'imagechat':_0xd0ead4,'contactname':_0x168837||null,'pushName':_0x9dec6b,'status':_0x43b42?.[_0x5a0f58(0x360)],'isBusiness':_0x35fe91[_0x5a0f58(0x719)],'email':_0x35fe91?.[_0x5a0f58(0x60f)],'description':_0x35fe91?.['description'],'website':_0x35fe91?.[_0x5a0f58(0x89b)]?.[_0x5a0f58(0x622)](),'lastcache':Date[_0x5a0f58(0x673)](),'imported':!_0x578965},_0x4d54a3=await this[_0x5a0f58(0x799)][_0x5a0f58(0x4b2)][_0x5a0f58(0x828)]({'where':{'_id':_0xe19a2e}},_0x35cb7a,this[_0x5a0f58(0x3ec)][_0x5a0f58(0x490)]),_0x252226={'owner':this[_0x5a0f58(0x3ec)][_0x5a0f58(0x490)],'_id':_0xe19a2e,'profilePictureUrl':_0xd0ead4,'status':_0x43b42?.['status']};return this['repository']['contact'][_0x5a0f58(0x1d9)]([_0x252226],this[_0x5a0f58(0x3ec)][_0x5a0f58(0x490)]),_0x4d54a3&&U(this[_0x5a0f58(0x75c)],_0x5a0f58(0x672),{'chat':_0x4d54a3}),{'wuid':_0x599d30?.[_0x5a0f58(0x833)]||_0xe19a2e,'name':_0x599d30?.[_0x5a0f58(0x1f8)],'pushName':_0x9dec6b,'numberExists':_0x599d30?.['exists'],'picture':_0xd0ead4,'status':_0x43b42?.[_0x5a0f58(0x360)],'isBusiness':_0x35fe91['isBusiness'],'email':_0x35fe91?.[_0x5a0f58(0x60f)],'description':_0x35fe91?.[_0x5a0f58(0x5e5)],'website':_0x35fe91?.[_0x5a0f58(0x89b)]?.['shift']()};}catch(_0x4b7e6b){return this['logger'][_0x5a0f58(0x62b)](_0x5a0f58(0x804)+(_0x4b7e6b instanceof Error?_0x4b7e6b[_0x5a0f58(0x5b7)]:JSON[_0x5a0f58(0x62f)](_0x4b7e6b,null,0x2))),{};}}async['fetchBusinessProfile'](_0x34d3df){const _0x477139=a0_0x591e8d;this['logger'][_0x477139(0x768)](this[_0x477139(0x75c)]+'\x20('+this[_0x477139(0x3ec)][_0x477139(0x490)]+_0x477139(0x681));try{let _0x55daf3=_0x34d3df?this['createJid'](_0x34d3df):this[_0x477139(0x3ec)]['wuid'],_0x135ad1=await this[_0x477139(0x296)][_0x477139(0x3a6)](_0x55daf3);return this[_0x477139(0x484)][_0x477139(0x768)](this['instanceName']+'\x20('+this[_0x477139(0x3ec)][_0x477139(0x490)]+_0x477139(0x841)),_0x135ad1?(this['logger'][_0x477139(0x768)](this[_0x477139(0x75c)]+'\x20('+this['instance'][_0x477139(0x490)]+_0x477139(0x5dc)),{'isBusiness':!0x0,..._0x135ad1}):{'isBusiness':!0x1,'message':'Not\x20is\x20business\x20profile',...(await this['whatsappNumber']({'numbers':[_0x55daf3]}))?.[_0x477139(0x622)]()};}catch(_0x1e2fd0){let _0x4a6f1e='Falha\x20ao\x20processar\x20fetchBusinessProfile',_0x34f893=_0x1e2fd0 instanceof Error?_0x1e2fd0[_0x477139(0x5b7)]:typeof _0x1e2fd0=='object'?JSON[_0x477139(0x62f)](_0x1e2fd0):_0x1e2fd0,_0x372b29=_0x4a6f1e+':\x20'+_0x34f893;throw this['logger'][_0x477139(0x62b)](this[_0x477139(0x75c)]+'\x20('+this[_0x477139(0x3ec)]['wuid']+_0x477139(0x872)+_0x372b29),new O(_0x372b29);}}async[a0_0x591e8d(0x188)](_0x4b3aa4){const _0x2147f7=a0_0x591e8d;let _0x50f171=this['createJid'](_0x4b3aa4);try{return{'wuid':_0x50f171,'status':(await this['client'][_0x2147f7(0x488)](_0x50f171))[0x0]?.['status']};}catch{return{'wuid':_0x50f171,'status':null};}}async[a0_0x591e8d(0x2a0)](_0xfbb685){const _0x1a2ec9=a0_0x591e8d;try{return await this[_0x1a2ec9(0x296)][_0x1a2ec9(0x2a0)](_0xfbb685),{'update':_0x1a2ec9(0x7e4)};}catch(_0x1d08ac){let _0x5ecdee=_0x1a2ec9(0x303),_0x3e481e=_0x1d08ac instanceof Error?_0x1d08ac['message']:typeof _0x1d08ac==_0x1a2ec9(0x808)?JSON[_0x1a2ec9(0x62f)](_0x1d08ac):_0x1d08ac,_0x3e45bd=_0x5ecdee+':\x20'+_0x3e481e;throw this['logger']['error'](this[_0x1a2ec9(0x75c)]+'\x20('+this[_0x1a2ec9(0x3ec)][_0x1a2ec9(0x490)]+_0x1a2ec9(0x872)+_0x3e45bd),new O(_0x3e45bd);}}async[a0_0x591e8d(0x624)](_0x185523){const _0x528770=a0_0x591e8d;try{return await this[_0x528770(0x296)][_0x528770(0x624)](_0x185523),{'update':_0x528770(0x7e4)};}catch(_0x451beb){let _0x3ad4e6=_0x528770(0x77a),_0x53653d=_0x451beb instanceof Error?_0x451beb['message']:typeof _0x451beb=='object'?JSON[_0x528770(0x62f)](_0x451beb):_0x451beb,_0x3a292a=_0x3ad4e6+':\x20'+_0x53653d;throw this['logger'][_0x528770(0x62b)](this['instanceName']+'\x20('+this[_0x528770(0x3ec)][_0x528770(0x490)]+'):\x20'+_0x3a292a),new O(_0x3a292a);}}async['updateProfilePicture'](_0x52a8d3){const _0x10a6b8=a0_0x591e8d;try{let _0x3027d3;if((0x0,D[_0x10a6b8(0x66f)])(_0x52a8d3)){let _0xa9fdce=new Date()['getTime'](),_0x1505c5=_0x52a8d3+_0x10a6b8(0x486)+_0xa9fdce;_0x3027d3=(await Q['default'][_0x10a6b8(0x2f4)](_0x1505c5,{'responseType':_0x10a6b8(0x7aa)}))[_0x10a6b8(0x495)];}else{if((0x0,D[_0x10a6b8(0x3d0)])(_0x52a8d3))_0x3027d3=Buffer[_0x10a6b8(0x4f4)](_0x52a8d3,_0x10a6b8(0x7f8));else throw new m(_0x10a6b8(0x542));}return await this[_0x10a6b8(0x296)][_0x10a6b8(0x6fd)](this[_0x10a6b8(0x3ec)][_0x10a6b8(0x490)],_0x3027d3),{'update':_0x10a6b8(0x7e4)};}catch(_0x7fc0c8){let _0x1474ac=_0x10a6b8(0x844),_0x3aea46=_0x7fc0c8 instanceof Error?_0x7fc0c8[_0x10a6b8(0x5b7)]:typeof _0x7fc0c8==_0x10a6b8(0x808)?JSON[_0x10a6b8(0x62f)](_0x7fc0c8):_0x7fc0c8,_0x5b545d=_0x1474ac+':\x20'+_0x3aea46;throw this[_0x10a6b8(0x484)][_0x10a6b8(0x62b)](this[_0x10a6b8(0x75c)]+'\x20('+this[_0x10a6b8(0x3ec)]['wuid']+'):\x20'+_0x5b545d),new O(_0x5b545d);}}async[a0_0x591e8d(0x15d)](){const _0x41612b=a0_0x591e8d;try{return await this[_0x41612b(0x296)][_0x41612b(0x15d)](this[_0x41612b(0x3ec)][_0x41612b(0x490)]),{'update':_0x41612b(0x7e4)};}catch(_0x375284){let _0x37327e='Falha\x20ao\x20processar\x20a\x20solicitao\x20removeProfilePicture',_0x2f1d03=_0x375284 instanceof Error?_0x375284[_0x41612b(0x5b7)]:typeof _0x375284=='object'?JSON[_0x41612b(0x62f)](_0x375284):_0x375284,_0x24bce0=_0x37327e+':\x20'+_0x2f1d03;throw this['logger'][_0x41612b(0x62b)](this[_0x41612b(0x75c)]+'\x20('+this[_0x41612b(0x3ec)][_0x41612b(0x490)]+'):\x20'+_0x24bce0),new O(_0x24bce0);}}async[a0_0x591e8d(0x4de)](_0x34b929){const _0x7628c7=a0_0x591e8d;try{let _0xd06027=(await this[_0x7628c7(0x1b5)]({'numbers':_0x34b929[_0x7628c7(0x5fe)]}))[_0x7628c7(0x516)](_0x2d0850=>_0x2d0850[_0x7628c7(0x5c4)])[_0x7628c7(0x276)](_0x363a43=>_0x363a43[_0x7628c7(0x833)]),{id:_0x759970}=await this['client'][_0x7628c7(0x674)](_0x34b929[_0x7628c7(0x178)],_0xd06027);_0x34b929?.[_0x7628c7(0x5e5)]&&await this[_0x7628c7(0x296)]['groupUpdateDescription'](_0x759970,_0x34b929[_0x7628c7(0x5e5)]);let _0xf76b22=await this[_0x7628c7(0x296)][_0x7628c7(0x7bd)](_0x759970);return _0xf76b22[_0x7628c7(0x3b2)]=[],{'metadata':_0xf76b22};}catch(_0x721469){let _0x59118c=_0x7628c7(0x6a4),_0x182a02=_0x721469 instanceof Error?_0x721469[_0x7628c7(0x5b7)]:typeof _0x721469==_0x7628c7(0x808)?JSON['stringify'](_0x721469):_0x721469,_0x35c469=_0x59118c+':\x20'+_0x182a02;throw this[_0x7628c7(0x484)][_0x7628c7(0x62b)](this[_0x7628c7(0x75c)]+'\x20('+this[_0x7628c7(0x3ec)][_0x7628c7(0x490)]+'):\x20'+_0x35c469),new O(_0x35c469);}}async['groupBetterSetting'](_0x5e8de8){const _0x22559d=a0_0x591e8d;try{if(_0x5e8de8[_0x22559d(0x1c2)]===!0x0&&await this[_0x22559d(0x296)][_0x22559d(0x4c7)](_0x5e8de8[_0x22559d(0x703)],_0x22559d(0x24f)),_0x5e8de8['restrict']===!0x1&&await this[_0x22559d(0x296)][_0x22559d(0x4c7)](_0x5e8de8[_0x22559d(0x703)],_0x22559d(0x215)),_0x5e8de8[_0x22559d(0x52a)]===!0x0&&await this[_0x22559d(0x296)][_0x22559d(0x4c7)](_0x5e8de8[_0x22559d(0x703)],_0x22559d(0x297)),_0x5e8de8['announce']===!0x1&&await this['client']['groupSettingUpdate'](_0x5e8de8['groupJid'],'not_announcement'),_0x5e8de8[_0x22559d(0x307)]===!0x0&&await this[_0x22559d(0x296)][_0x22559d(0x4f6)](_0x5e8de8['groupJid'],_0x22559d(0x1c1)),_0x5e8de8[_0x22559d(0x307)]===!0x1&&await this['client'][_0x22559d(0x4f6)](_0x5e8de8[_0x22559d(0x703)],'admin_add'),_0x5e8de8[_0x22559d(0x466)]===!0x0&&await this['client'][_0x22559d(0x489)](_0x5e8de8[_0x22559d(0x703)],'on'),_0x5e8de8['joinApprovalMode']===!0x1&&await this[_0x22559d(0x296)][_0x22559d(0x489)](_0x5e8de8[_0x22559d(0x703)],_0x22559d(0x42e)),typeof _0x5e8de8[_0x22559d(0x2d1)]<'u'&&_0x5e8de8['expiration']!==null&&await this[_0x22559d(0x296)][_0x22559d(0x36c)](_0x5e8de8[_0x22559d(0x703)],_0x5e8de8[_0x22559d(0x2d1)]),_0x5e8de8[_0x22559d(0x1f8)]&&await this['client']['groupUpdateSubject'](_0x5e8de8[_0x22559d(0x703)],_0x5e8de8[_0x22559d(0x1f8)]),_0x5e8de8[_0x22559d(0x5e5)]&&await this[_0x22559d(0x296)][_0x22559d(0x16a)](_0x5e8de8[_0x22559d(0x703)],_0x5e8de8[_0x22559d(0x5e5)]),_0x5e8de8[_0x22559d(0x861)]){let _0x36f7ef;if((0x0,D[_0x22559d(0x66f)])(_0x5e8de8['image'])){let _0x5cea7b=new Date()[_0x22559d(0x7ab)](),_0x518cbe=_0x5e8de8[_0x22559d(0x861)]+_0x22559d(0x486)+_0x5cea7b;_0x36f7ef=(await Q['default'][_0x22559d(0x2f4)](_0x518cbe,{'responseType':'arraybuffer'}))[_0x22559d(0x495)];}else{if((0x0,D[_0x22559d(0x3d0)])(_0x5e8de8['image']))_0x36f7ef=Buffer[_0x22559d(0x4f4)](_0x5e8de8[_0x22559d(0x861)],_0x22559d(0x7f8));else throw new m(_0x22559d(0x542));}await this[_0x22559d(0x296)]['updateProfilePicture'](_0x5e8de8[_0x22559d(0x703)],_0x36f7ef);}return await this[_0x22559d(0x436)]({'groupJid':_0x5e8de8[_0x22559d(0x703)]});}catch(_0x4992e2){let _0xbba491=_0x22559d(0x638),_0x2f6f2e=_0x4992e2 instanceof Error?_0x4992e2[_0x22559d(0x5b7)]:typeof _0x4992e2=='object'?JSON[_0x22559d(0x62f)](_0x4992e2):_0x4992e2,_0x1ed00b=_0xbba491+':\x20'+_0x2f6f2e;throw this[_0x22559d(0x484)][_0x22559d(0x62b)](this['instanceName']+'\x20('+this[_0x22559d(0x3ec)][_0x22559d(0x490)]+_0x22559d(0x872)+_0x1ed00b),new O(_0x1ed00b);}}async[a0_0x591e8d(0x408)](_0x19ee5f){const _0x4cff3b=a0_0x591e8d;try{if(_0x19ee5f[_0x4cff3b(0x1ab)]===_0x4cff3b(0x2ca)||_0x19ee5f[_0x4cff3b(0x1ab)]===_0x4cff3b(0x7b2)){let _0x158dea=_0x19ee5f[_0x4cff3b(0x5fe)][_0x4cff3b(0x276)](_0x5aa633=>this[_0x4cff3b(0x649)](_0x5aa633));await this[_0x4cff3b(0x296)][_0x4cff3b(0x4a5)](_0x19ee5f[_0x4cff3b(0x703)],_0x158dea,_0x19ee5f[_0x4cff3b(0x1ab)]);}else{if(_0x19ee5f['action']==='add'){let _0x128b74=(await this['whatsappNumber']({'numbers':_0x19ee5f['participants']}))[_0x4cff3b(0x516)](_0x2fc427=>_0x2fc427[_0x4cff3b(0x5c4)])[_0x4cff3b(0x276)](_0x5bf323=>this[_0x4cff3b(0x649)](_0x5bf323[_0x4cff3b(0x833)]));if(_0x128b74[_0x4cff3b(0x836)]===0x0)throw new m(_0x4cff3b(0x418));await this[_0x4cff3b(0x296)][_0x4cff3b(0x7ea)](_0x19ee5f[_0x4cff3b(0x703)],_0x128b74,'add');}else{let _0x84074d=_0x19ee5f[_0x4cff3b(0x5fe)]['map'](_0x53cd46=>this[_0x4cff3b(0x649)](_0x53cd46));await this[_0x4cff3b(0x296)][_0x4cff3b(0x7ea)](_0x19ee5f['groupJid'],_0x84074d,_0x19ee5f[_0x4cff3b(0x1ab)]);}}return await this[_0x4cff3b(0x436)]({'groupJid':_0x19ee5f[_0x4cff3b(0x703)]});}catch(_0x54d3bd){let _0x4ac74c=_0x4cff3b(0x2a9),_0x1c4755=_0x54d3bd instanceof Error?_0x54d3bd[_0x4cff3b(0x5b7)]:typeof _0x54d3bd==_0x4cff3b(0x808)?JSON[_0x4cff3b(0x62f)](_0x54d3bd):_0x54d3bd,_0x170bcd=_0x4ac74c+':\x20'+_0x1c4755;throw this[_0x4cff3b(0x484)][_0x4cff3b(0x62b)](this[_0x4cff3b(0x75c)]+'\x20('+this['instance'][_0x4cff3b(0x490)]+_0x4cff3b(0x872)+_0x170bcd),new m(_0x170bcd);}}async['groupGetInviteInfo'](_0x4c7799){const _0x2f79c8=a0_0x591e8d;try{return await this[_0x2f79c8(0x296)][_0x2f79c8(0x569)](_0x4c7799[_0x2f79c8(0x493)]);}catch(_0x225f5a){let _0x14206f='Falha\x20ao\x20processar\x20a\x20solicitao\x20groupGetInviteInfo',_0x493ac0=_0x225f5a instanceof Error?_0x225f5a[_0x2f79c8(0x5b7)]:typeof _0x225f5a==_0x2f79c8(0x808)?JSON['stringify'](_0x225f5a):_0x225f5a,_0x59b4a7=_0x14206f+':\x20'+_0x493ac0;throw this[_0x2f79c8(0x484)][_0x2f79c8(0x62b)](this[_0x2f79c8(0x75c)]+'\x20('+this[_0x2f79c8(0x3ec)]['wuid']+_0x2f79c8(0x872)+_0x59b4a7),new m(_0x59b4a7);}}async[a0_0x591e8d(0x436)](_0x1338bb,_0x18afe2=a0_0x591e8d(0x7e2)){const _0x55183c=a0_0x591e8d;try{let _0x38a76d=await this[_0x55183c(0x799)][_0x55183c(0x4b2)][_0x55183c(0x685)]({'where':{'_id':_0x1338bb[_0x55183c(0x703)]}},this['instance'][_0x55183c(0x490)]),_0x336c20=_0x38a76d?_0x38a76d[_0x55183c(0x1c0)]:null,_0x744b31=0x18*0x3c*0x3c*0x3e8;if(!_0x336c20||_0x336c20[_0x55183c(0x2af)]&&Date[_0x55183c(0x673)]()-_0x336c20[_0x55183c(0x2af)]>_0x744b31){let _0x431fe3=await this[_0x55183c(0x296)][_0x55183c(0x7bd)](_0x1338bb[_0x55183c(0x703)]);if(_0x431fe3[_0x55183c(0x694)]=_0x431fe3?.[_0x55183c(0x694)]&&_0x431fe3[_0x55183c(0x694)][_0x55183c(0x44c)]()[_0x55183c(0x836)]<0xd?_0x431fe3?.[_0x55183c(0x694)]*0x3e8:_0x431fe3?.[_0x55183c(0x694)]||null,_0x431fe3['creation']=_0x431fe3?.[_0x55183c(0x55d)]&&_0x431fe3[_0x55183c(0x55d)][_0x55183c(0x44c)]()[_0x55183c(0x836)]<0xd?_0x431fe3?.[_0x55183c(0x55d)]*0x3e8:_0x431fe3?.[_0x55183c(0x55d)]||null,_0x336c20={..._0x431fe3,'lastUpdate':Date[_0x55183c(0x673)]()},!_0x431fe3)return;}let _0x4ffad5=_0x336c20['participants'][_0x55183c(0x7ba)](_0x5e3b95=>_0x5e3b95['id']===this['instance'][_0x55183c(0x490)]+_0x55183c(0x20d)&&_0x5e3b95[_0x55183c(0x3b7)]!=null);!_0x336c20[_0x55183c(0x493)]&&_0x4ffad5&&(_0x336c20[_0x55183c(0x493)]=(await this[_0x55183c(0x493)](_0x1338bb,!0x1))[_0x55183c(0x785)]);let _0x14aa3f=(!_0x336c20['announce']||_0x4ffad5)&&(!_0x336c20[_0x55183c(0x531)]||_0x336c20[_0x55183c(0x531)]&&_0x336c20[_0x55183c(0x458)]&&_0x4ffad5);_0x336c20[_0x55183c(0x67d)]=_0x4ffad5,_0x336c20[_0x55183c(0x634)]=_0x14aa3f;let _0xa824a=[];if(_0x4ffad5&&_0x336c20[_0x55183c(0x466)])try{_0xa824a=await this['client'][_0x55183c(0x3a8)](_0x1338bb[_0x55183c(0x703)]),_0x336c20[_0x55183c(0x6c2)]=Date[_0x55183c(0x673)]();}catch(_0x278cc0){this['logger'][_0x55183c(0x768)](this[_0x55183c(0x75c)]+'\x20('+this[_0x55183c(0x3ec)][_0x55183c(0x490)]+_0x55183c(0x2a1)+_0x1338bb['groupJid']+':\x20'+(_0x278cc0 instanceof Error?_0x278cc0['message']:JSON[_0x55183c(0x62f)](_0x278cc0,null,0x2)));}try{_0x336c20[_0x55183c(0x861)]=(await this['findAndUpdateCacheContact'](_0x1338bb[_0x55183c(0x703)],null,!0x0))[_0x55183c(0x15c)][_0x55183c(0x4d1)];}catch(_0x524bea){this[_0x55183c(0x484)][_0x55183c(0x768)](this[_0x55183c(0x75c)]+'\x20('+this[_0x55183c(0x3ec)]['wuid']+'):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20'+_0x1338bb['groupJid']+':\x20'+(_0x524bea instanceof Error?_0x524bea[_0x55183c(0x5b7)]:JSON[_0x55183c(0x62f)](_0x524bea,null,0x2)));}let _0x2d13b2=_0x336c20[_0x55183c(0x5fe)][_0x55183c(0x276)](_0x14309a=>_0x14309a['id']),_0x5d08ba=_0xa824a[_0x55183c(0x276)](_0x1d2464=>_0x1d2464['jid']),_0x3f559a=await this[_0x55183c(0x799)][_0x55183c(0x228)]['findManyByIds']([..._0x2d13b2,..._0x5d08ba]);_0x336c20[_0x55183c(0x5fe)]=_0x336c20['participants'][_0x55183c(0x276)](_0x4d46b5=>{const _0x474ad8=_0x55183c;let _0x260153=_0x3f559a[_0x474ad8(0x2c5)](_0xc9c0e=>_0xc9c0e[_0x474ad8(0x812)]===_0x4d46b5['id']);return{'id':_0x4d46b5['id'],'isAdmin':[_0x474ad8(0x3b7),_0x474ad8(0x815)]['includes'](_0x4d46b5[_0x474ad8(0x3b7)]),'admin':_0x4d46b5[_0x474ad8(0x3b7)],'pushName':_0x260153?.[_0x474ad8(0x1f8)],'profilePictureUrl':_0x260153?.[_0x474ad8(0x4d1)]};}),_0x336c20[_0x55183c(0x3b2)]=_0xa824a['map'](_0x129001=>{const _0xb65f5d=_0x55183c;let _0x5b29e4=_0x3f559a[_0xb65f5d(0x2c5)](_0x598488=>_0x598488[_0xb65f5d(0x812)]===_0x129001[_0xb65f5d(0x833)]);return{'id':_0x129001[_0xb65f5d(0x833)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x5b29e4?.['name'],'profilePictureUrl':_0x5b29e4?.[_0xb65f5d(0x4d1)],'request_method':_0x129001[_0xb65f5d(0x671)],'request_time':_0x129001[_0xb65f5d(0x2e0)]};});let _0x2b7daf=await this[_0x55183c(0x799)][_0x55183c(0x4b2)][_0x55183c(0x828)]({'where':{'_id':_0x1338bb[_0x55183c(0x703)]}},{'imagechat':_0x336c20[_0x55183c(0x861)],'name':_0x336c20['subject'],'lastcache':Date['now'](),'groupdata':_0x336c20},this['instance'][_0x55183c(0x490)]);return U(this['instanceName'],_0x55183c(0x672),{'chat':_0x2b7daf}),{'metadata':_0x336c20};}catch(_0x2f046d){if(_0x18afe2===_0x55183c(0x483))return;throw new F(_0x55183c(0x532),_0x2f046d[_0x55183c(0x5b7)]['toString']());}}async[a0_0x591e8d(0x3eb)](){const _0x5d8310=a0_0x591e8d;try{this[_0x5d8310(0x484)][_0x5d8310(0x7ed)]('Retornando\x20grupos\x20COM\x20cache');let _0x57693c=Date[_0x5d8310(0x673)](),_0x39ce49=0x3*0x3c*0x3c*0x3e8;return _0x57693c-this[_0x5d8310(0x49c)]>_0x39ce49&&(this[_0x5d8310(0x19a)](),this[_0x5d8310(0x49c)]=_0x57693c),(await this['repository'][_0x5d8310(0x4b2)][_0x5d8310(0x183)]({'where':{'group':!0x0}},this[_0x5d8310(0x3ec)]['wuid']))[_0x5d8310(0x276)](_0x3db091=>({..._0x3db091[_0x5d8310(0x1c0)],'groupJid':_0x3db091?.[_0x5d8310(0x812)],'participants':_0x3db091?.['groupdata']?.[_0x5d8310(0x5fe)]||[],'awaitingApproval':_0x3db091?.[_0x5d8310(0x1c0)]?.[_0x5d8310(0x3b2)]||[],'image':_0x3db091?.[_0x5d8310(0x3aa)]}));}catch(_0x231c63){let _0x10cbb6=_0x5d8310(0x582),_0x256db2=_0x231c63 instanceof Error?_0x231c63[_0x5d8310(0x5b7)]:typeof _0x231c63==_0x5d8310(0x808)?JSON['stringify'](_0x231c63):_0x231c63,_0x5a8ac8=_0x10cbb6+':\x20'+_0x256db2;throw this['logger']['error'](this[_0x5d8310(0x75c)]+'\x20('+this['instance'][_0x5d8310(0x490)]+'):\x20'+_0x5a8ac8),new F(_0x5a8ac8);}}async[a0_0x591e8d(0x19a)](){const _0x429bac=a0_0x591e8d;try{this[_0x429bac(0x484)]['info'](_0x429bac(0x3f8));let _0x528b7c=[],_0x2a814c=await this['client'][_0x429bac(0x1f6)](),_0xf0ebff=Object[_0x429bac(0x78c)](_0x2a814c),_0x8e10dd=_0xf0ebff[_0x429bac(0x516)](_0x7a7e41=>(0x0,w[_0x429bac(0x6c9)])(_0x7a7e41?.['id']))[_0x429bac(0x276)](async _0x3fb3cb=>{const _0x3a1e2f=_0x429bac;try{return await this[_0x3a1e2f(0x296)][_0x3a1e2f(0x577)](_0x3fb3cb['id'],_0x3a1e2f(0x5ac));}catch(_0x479ce4){return this[_0x3a1e2f(0x484)]['verbose'](this['instanceName']+'\x20('+this[_0x3a1e2f(0x3ec)][_0x3a1e2f(0x490)]+_0x3a1e2f(0x2f8)+_0x3fb3cb['id']+':\x20'+(_0x479ce4 instanceof Error?_0x479ce4[_0x3a1e2f(0x5b7)]:JSON[_0x3a1e2f(0x62f)](_0x479ce4,null,0x2))),null;}}),_0x775b77=await Promise[_0x429bac(0x5ec)](_0x8e10dd);for(let _0x1585a5=0x0;_0x1585a5<_0xf0ebff[_0x429bac(0x836)];_0x1585a5++){let _0x2dcb05=_0xf0ebff[_0x1585a5];(0x0,w[_0x429bac(0x6c9)])(_0x2dcb05?.['id'])&&(_0x528b7c[_0x429bac(0x57f)]({'groupJid':_0x2dcb05?.['id'],'subject':_0x2dcb05?.['subject'],'subjectOwner':_0x2dcb05?.['subjectOwner']?.['split']('@')[0x0],'subjectTime':_0x2dcb05?.['subjectTime'],'creation':_0x2dcb05?.[_0x429bac(0x55d)],'size':_0x2dcb05?.[_0x429bac(0x5fe)]?.[_0x429bac(0x836)],'owner':_0x2dcb05?.[_0x429bac(0x7d9)]?.[_0x429bac(0x179)]('@')[0x0],'desc':_0x2dcb05?.['desc'],'restrict':_0x2dcb05?.['restrict'],'announce':_0x2dcb05?.[_0x429bac(0x52a)],'image':_0x775b77[_0x1585a5],'isCommunity':_0x2dcb05?.[_0x429bac(0x531)],'joinApprovalMode':_0x2dcb05?.[_0x429bac(0x466)],'memberCanAddParticipant':_0x2dcb05?.[_0x429bac(0x307)],'participants':_0x2dcb05?.[_0x429bac(0x5fe)],'descOwner':_0x2dcb05?.['descOwner'],'descId':_0x2dcb05?.[_0x429bac(0x765)],'memberAddMode':_0x2dcb05?.[_0x429bac(0x307)],'isCommunityAnnounce':_0x2dcb05?.[_0x429bac(0x458)],'ephemeralDuration':_0x2dcb05?.[_0x429bac(0x51c)]||0x0,'author':_0x2dcb05?.['author']}),this[_0x429bac(0x396)](_0xf0ebff[_0x1585a5]));}return _0x528b7c;}catch(_0x3bbd0b){let _0x5720eb=_0x429bac(0x20c),_0x210a7d=_0x3bbd0b instanceof Error?_0x3bbd0b['message']:typeof _0x3bbd0b=='object'?JSON[_0x429bac(0x62f)](_0x3bbd0b):_0x3bbd0b,_0x5663ae=_0x5720eb+':\x20'+_0x210a7d;throw this[_0x429bac(0x484)][_0x429bac(0x62b)](this['instanceName']+'\x20('+this[_0x429bac(0x3ec)]['wuid']+_0x429bac(0x872)+_0x5663ae),new F(_0x5663ae);}}async[a0_0x591e8d(0x396)](_0x543e4e){const _0x123ea4=a0_0x591e8d;let _0x46d5b8=await this[_0x123ea4(0x799)][_0x123ea4(0x4b2)][_0x123ea4(0x685)]({'where':{'_id':_0x543e4e['id']}},this['instance']['wuid']);_0x543e4e[_0x123ea4(0x694)]=_0x543e4e?.[_0x123ea4(0x694)]&&_0x543e4e[_0x123ea4(0x694)]['toString']()[_0x123ea4(0x836)]<0xd?_0x543e4e?.[_0x123ea4(0x694)]*0x3e8:_0x543e4e?.[_0x123ea4(0x694)]||null,_0x543e4e[_0x123ea4(0x55d)]=_0x543e4e?.[_0x123ea4(0x55d)]&&_0x543e4e[_0x123ea4(0x55d)][_0x123ea4(0x44c)]()[_0x123ea4(0x836)]<0xd?_0x543e4e?.[_0x123ea4(0x55d)]*0x3e8:_0x543e4e?.[_0x123ea4(0x55d)]||null;let _0x4d3ed5=_0x46d5b8?.['groupdata']?.[_0x123ea4(0x3b2)]||[],_0x31ad9d=_0x46d5b8?.['groupdata']?.[_0x123ea4(0x6c2)],_0x47f236=_0x543e4e[_0x123ea4(0x5fe)]['map'](_0x2e94bb=>{const _0x2e0f7e=_0x123ea4;let _0x4686c3=_0x46d5b8?.[_0x2e0f7e(0x1c0)]?.[_0x2e0f7e(0x5fe)][_0x2e0f7e(0x2c5)](_0x50992f=>_0x50992f['id']===_0x2e94bb['id']);return{..._0x2e94bb,'isAdmin':[_0x2e0f7e(0x3b7),_0x2e0f7e(0x815)][_0x2e0f7e(0x243)](_0x2e94bb[_0x2e0f7e(0x3b7)]),'admin':_0x2e94bb[_0x2e0f7e(0x3b7)],'name':_0x4686c3?.[_0x2e0f7e(0x1f8)]||_0x2e94bb[_0x2e0f7e(0x1f8)],'imgUrl':_0x4686c3?.[_0x2e0f7e(0x206)]||_0x2e94bb[_0x2e0f7e(0x206)]};}),_0x3ff793=_0x47f236[_0x123ea4(0x7ba)](_0x59c8f1=>_0x59c8f1['id']===this['instance']['wuid']+'@s.whatsapp.net'&&_0x59c8f1[_0x123ea4(0x67d)]),_0x2f957d=(!_0x543e4e[_0x123ea4(0x52a)]||_0x3ff793)&&(!_0x543e4e[_0x123ea4(0x531)]||_0x543e4e['isCommunity']&&_0x543e4e[_0x123ea4(0x458)]&&_0x3ff793),_0x38e33b={..._0x543e4e,'participants':_0x47f236,'awaitingApproval':_0x4d3ed5,'lastFetchAwaitingApproval':_0x31ad9d,'isAdmin':_0x3ff793,'canSendMessage':_0x2f957d,'lastUpdate':Date['now']()};await this[_0x123ea4(0x799)]['chat'][_0x123ea4(0x828)]({'where':{'_id':_0x543e4e['id']}},{'name':_0x543e4e[_0x123ea4(0x178)],'group':!0x0,'groupdata':_0x38e33b,'lastcache':Date[_0x123ea4(0x673)]()},this[_0x123ea4(0x3ec)][_0x123ea4(0x490)]),U(this['instanceName'],_0x123ea4(0x672),{'chat':_0x543e4e});}async[a0_0x591e8d(0x540)](_0x4b9ce6){const _0x499841=a0_0x591e8d;let _0x1dad10=await this[_0x499841(0x799)][_0x499841(0x4b2)][_0x499841(0x685)]({'where':{'_id':_0x4b9ce6['id']}},this['instance'][_0x499841(0x490)]);_0x4b9ce6['subjectTime']=_0x4b9ce6?.[_0x499841(0x694)]&&_0x4b9ce6[_0x499841(0x694)]['toString']()[_0x499841(0x836)]<0xd?_0x4b9ce6?.[_0x499841(0x694)]*0x3e8:_0x4b9ce6?.[_0x499841(0x694)]||null,_0x4b9ce6[_0x499841(0x55d)]=_0x4b9ce6?.[_0x499841(0x55d)]&&_0x4b9ce6[_0x499841(0x55d)]['toString']()[_0x499841(0x836)]<0xd?_0x4b9ce6?.[_0x499841(0x55d)]*0x3e8:_0x4b9ce6?.[_0x499841(0x55d)]||null,_0x4b9ce6['inviteCode']&&(_0x4b9ce6[_0x499841(0x493)]=_0x499841(0x194)+_0x4b9ce6[_0x499841(0x493)]);let _0x1b6681=_0x1dad10?.[_0x499841(0x1c0)]?{..._0x1dad10['groupdata']}:{};Object[_0x499841(0x34b)](_0x4b9ce6)[_0x499841(0x5ce)](_0x5a4c42=>{_0x5a4c42!=='id'&&(_0x1b6681[_0x5a4c42]=_0x4b9ce6[_0x5a4c42]);});let _0x4aa889=_0x1b6681[_0x499841(0x5fe)]?.['some'](_0x1f328e=>_0x1f328e['id']===this[_0x499841(0x3ec)]['wuid']+_0x499841(0x20d)&&_0x1f328e[_0x499841(0x67d)])||!0x1;_0x1b6681['isAdmin']=_0x4aa889;let _0xbe806c=(!_0x1b6681[_0x499841(0x52a)]||_0x4aa889)&&(!_0x1b6681['isCommunity']||_0x1b6681['isCommunity']&&_0x1b6681['isCommunityAnnounce']&&_0x4aa889);_0x1b6681['canSendMessage']=_0xbe806c;let _0x262dbb={'group':!0x0,'groupdata':_0x1b6681};_0x4b9ce6[_0x499841(0x178)]&&(_0x262dbb[_0x499841(0x1f8)]=_0x4b9ce6[_0x499841(0x178)]),await this[_0x499841(0x799)][_0x499841(0x4b2)]['updateOne']({'where':{'_id':_0x4b9ce6['id']}},_0x262dbb,this[_0x499841(0x3ec)][_0x499841(0x490)],{'upsert':!0x0}),U(this[_0x499841(0x75c)],_0x499841(0x672),{'chat':_0x262dbb});}async[a0_0x591e8d(0x6dd)](_0x6d9760){const _0x1cf6a0=a0_0x591e8d;let _0x1034db=await this[_0x1cf6a0(0x799)][_0x1cf6a0(0x4b2)][_0x1cf6a0(0x685)]({'where':{'_id':_0x6d9760['id']}},this[_0x1cf6a0(0x3ec)][_0x1cf6a0(0x490)]);if(!_0x1034db||!_0x1034db[_0x1cf6a0(0x1c0)]){this[_0x1cf6a0(0x484)]['info'](this[_0x1cf6a0(0x75c)]+'\x20('+this[_0x1cf6a0(0x3ec)]['wuid']+_0x1cf6a0(0x41d)+_0x6d9760['id']);return;}let _0x424130=await this[_0x1cf6a0(0x799)][_0x1cf6a0(0x228)][_0x1cf6a0(0x24c)](_0x6d9760[_0x1cf6a0(0x5fe)]),_0x4fcac3=[..._0x1034db[_0x1cf6a0(0x1c0)]?.[_0x1cf6a0(0x5fe)]];switch(_0x6d9760['action']){case'add':let _0x5bbd0d=_0x424130[_0x1cf6a0(0x276)](_0x4b3ac3=>({'id':_0x4b3ac3[_0x1cf6a0(0x812)],'isAdmin':!0x1,'name':_0x4b3ac3[_0x1cf6a0(0x1f8)],'imgUrl':_0x4b3ac3[_0x1cf6a0(0x4d1)]}));_0x4fcac3=[..._0x4fcac3,..._0x5bbd0d];break;case _0x1cf6a0(0x55f):_0x4fcac3=_0x4fcac3['filter'](_0x2d9a5e=>!_0x6d9760[_0x1cf6a0(0x5fe)]['includes'](_0x2d9a5e['id']));break;case'promote':case _0x1cf6a0(0x651):_0x4fcac3=_0x4fcac3['map'](_0x342e6c=>_0x6d9760[_0x1cf6a0(0x5fe)][_0x1cf6a0(0x243)](_0x342e6c['id'])?{..._0x342e6c,'isAdmin':_0x6d9760['action']===_0x1cf6a0(0x16e)}:_0x342e6c);break;}let _0x2b767f=_0x4fcac3['length'],_0x2f141c=_0x4fcac3[_0x1cf6a0(0x7ba)](_0x5a675f=>_0x5a675f['id']===this[_0x1cf6a0(0x3ec)][_0x1cf6a0(0x490)]+_0x1cf6a0(0x20d)),_0x1d6efd=_0x2f141c&&_0x4fcac3[_0x1cf6a0(0x7ba)](_0x5573b0=>_0x5573b0['id']===this[_0x1cf6a0(0x3ec)][_0x1cf6a0(0x490)]+_0x1cf6a0(0x20d)&&_0x5573b0[_0x1cf6a0(0x67d)]),_0x34813c=_0x2f141c&&(!_0x1034db[_0x1cf6a0(0x1c0)][_0x1cf6a0(0x52a)]||_0x1d6efd)&&(!_0x1034db[_0x1cf6a0(0x1c0)]['isCommunity']||_0x1034db[_0x1cf6a0(0x1c0)][_0x1cf6a0(0x531)]&&_0x1d6efd);await this[_0x1cf6a0(0x799)][_0x1cf6a0(0x4b2)][_0x1cf6a0(0x828)]({'where':{'_id':_0x6d9760['id']}},{'groupdata':{..._0x1034db['groupdata'],'participants':_0x4fcac3,'size':_0x2b767f,'isAdmin':_0x1d6efd,'canSendMessage':_0x34813c}},this['instance'][_0x1cf6a0(0x490)]),this[_0x1cf6a0(0x484)]['info'](this[_0x1cf6a0(0x75c)]+'\x20('+this[_0x1cf6a0(0x3ec)][_0x1cf6a0(0x490)]+_0x1cf6a0(0x254)+_0x6d9760['id']+_0x1cf6a0(0x6e1)+_0x6d9760[_0x1cf6a0(0x1ab)]+_0x1cf6a0(0x41c)+_0x2b767f+_0x1cf6a0(0x590)+_0x1d6efd+_0x1cf6a0(0x1fb)+_0x34813c);}async[a0_0x591e8d(0x493)](_0x149d8d,_0xc3ee8c=!0x0){const _0x5a99de=a0_0x591e8d;try{let _0x27016a=await this[_0x5a99de(0x296)][_0x5a99de(0x850)](_0x149d8d['groupJid']),_0x5b34c1={'groupdata.inviteCode':_0x5a99de(0x194)+_0x27016a};if(_0xc3ee8c){let _0xcbbf74=await this[_0x5a99de(0x799)][_0x5a99de(0x4b2)]['updateOne']({'where':{'_id':_0x149d8d[_0x5a99de(0x703)]}},_0x5b34c1,this[_0x5a99de(0x3ec)]['wuid']);}return{'inviteUrl':_0x5a99de(0x194)+_0x27016a,'inviteCode':_0x27016a};}catch(_0x35db2d){let _0x4e0ab1=_0x5a99de(0x2bb),_0x692fd2=_0x35db2d instanceof Error?_0x35db2d['message']:typeof _0x35db2d==_0x5a99de(0x808)?JSON['stringify'](_0x35db2d):_0x35db2d,_0x15c1f0=_0x4e0ab1+':\x20'+_0x692fd2;throw this[_0x5a99de(0x484)][_0x5a99de(0x62b)](this[_0x5a99de(0x75c)]+'\x20('+this[_0x5a99de(0x3ec)][_0x5a99de(0x490)]+_0x5a99de(0x872)+_0x15c1f0),new F(_0x15c1f0);}}async[a0_0x591e8d(0x2de)](_0x57b848){const _0x62c812=a0_0x591e8d;try{let _0x3a810d=await this[_0x62c812(0x296)][_0x62c812(0x249)](_0x57b848[_0x62c812(0x703)]);return{'revoked':!0x0,'inviteUrl':_0x62c812(0x194)+_0x3a810d,'inviteCode':_0x3a810d};}catch(_0x72fbea){let _0x5ca931=_0x62c812(0x25e),_0x315e0d=_0x72fbea instanceof Error?_0x72fbea[_0x62c812(0x5b7)]:typeof _0x72fbea=='object'?JSON['stringify'](_0x72fbea):_0x72fbea,_0x32b1e6=_0x5ca931+':\x20'+_0x315e0d;throw this[_0x62c812(0x484)][_0x62c812(0x62b)](this['instanceName']+'\x20('+this[_0x62c812(0x3ec)][_0x62c812(0x490)]+_0x62c812(0x872)+_0x32b1e6),new F(_0x32b1e6);}}async[a0_0x591e8d(0x6a7)](_0x14c497){const _0x52e193=a0_0x591e8d;try{if((0x0,D[_0x52e193(0x66f)])(_0x14c497[_0x52e193(0x493)]))var _0x387f02=_0x14c497[_0x52e193(0x493)]['split']('/')[0x3];else var _0x387f02=_0x14c497['inviteCode'];let _0x31c158=await this[_0x52e193(0x296)]['groupAcceptInvite'](_0x387f02);return this[_0x52e193(0x484)][_0x52e193(0x768)](this[_0x52e193(0x75c)]+'\x20('+this[_0x52e193(0x3ec)]['wuid']+'):\x20'+_0x31c158),{'join':!0x0,'inviteCode':_0x387f02,'groupJid':_0x31c158};}catch(_0xd1d7b8){let _0x1512de=_0x52e193(0x59c),_0x1c3cc4=_0xd1d7b8 instanceof Error?_0xd1d7b8[_0x52e193(0x5b7)]:typeof _0xd1d7b8==_0x52e193(0x808)?JSON[_0x52e193(0x62f)](_0xd1d7b8):_0xd1d7b8,_0x569b86=_0x1512de+':\x20'+_0x1c3cc4;throw this[_0x52e193(0x484)][_0x52e193(0x62b)](this[_0x52e193(0x75c)]+'\x20('+this[_0x52e193(0x3ec)]['wuid']+_0x52e193(0x872)+_0x569b86),new F(_0x569b86);}}async['findParticipants'](_0x539800){const _0x2d8e1b=a0_0x591e8d;try{return{'participants':(await this['repository'][_0x2d8e1b(0x4b2)][_0x2d8e1b(0x685)]({'where':{'_id':_0x539800[_0x2d8e1b(0x703)]}},this[_0x2d8e1b(0x3ec)][_0x2d8e1b(0x490)]))['groupdata']['participants']};}catch(_0x36afc9){let _0x3afb5c=_0x2d8e1b(0x572),_0x59b32a=_0x36afc9 instanceof Error?_0x36afc9[_0x2d8e1b(0x5b7)]:typeof _0x36afc9==_0x2d8e1b(0x808)?JSON[_0x2d8e1b(0x62f)](_0x36afc9):_0x36afc9,_0x4494c9=_0x3afb5c+':\x20'+_0x59b32a;throw this['logger'][_0x2d8e1b(0x62b)](this[_0x2d8e1b(0x75c)]+'\x20('+this[_0x2d8e1b(0x3ec)]['wuid']+_0x2d8e1b(0x872)+_0x4494c9),new F(_0x4494c9);}}async[a0_0x591e8d(0x83f)](_0x44e2b5){const _0x32a88d=a0_0x591e8d;try{return await this[_0x32a88d(0x296)][_0x32a88d(0x7ca)](_0x44e2b5[_0x32a88d(0x703)]),{'groupJid':_0x44e2b5[_0x32a88d(0x703)],'leave':!0x0};}catch(_0x8f06cc){let _0x75477=_0x32a88d(0x1fe),_0x30933c=_0x8f06cc instanceof Error?_0x8f06cc['message']:typeof _0x8f06cc=='object'?JSON[_0x32a88d(0x62f)](_0x8f06cc):_0x8f06cc,_0x1aa6b0=_0x75477+':\x20'+_0x30933c;throw this['logger'][_0x32a88d(0x62b)](this['instanceName']+'\x20('+this[_0x32a88d(0x3ec)][_0x32a88d(0x490)]+_0x32a88d(0x872)+_0x1aa6b0),new m(_0x1aa6b0);}}async['pollMessage'](_0x37684c){const _0x428d14=a0_0x591e8d;return await this[_0x428d14(0x859)](_0x37684c[_0x428d14(0x5f6)],{'poll':{'name':_0x37684c[_0x428d14(0x411)]?.['name'],'selectableCount':_0x37684c[_0x428d14(0x411)]['selectableCount'],'values':_0x37684c[_0x428d14(0x411)][_0x428d14(0x78c)]}},_0x37684c?.[_0x428d14(0x4c1)]);}async['listMessage'](_0xf32644){const _0x21dbae=a0_0x591e8d;return await this[_0x21dbae(0x859)](_0xf32644[_0x21dbae(0x5f6)],{'listMessage':{'title':_0xf32644['listMessage']['title'],'description':_0xf32644[_0x21dbae(0x757)][_0x21dbae(0x5e5)],'buttonText':_0xf32644[_0x21dbae(0x757)]?.[_0x21dbae(0x8a9)],'footerText':_0xf32644[_0x21dbae(0x757)]?.[_0x21dbae(0x59d)],'sections':_0xf32644[_0x21dbae(0x757)]['sections'],'listType':0x2}},_0xf32644?.['options']);}async[a0_0x591e8d(0x275)](_0x300c6c){const _0x411556=a0_0x591e8d;let _0x1a628b;if(_0x300c6c[_0x411556(0x275)][_0x411556(0x717)]===_0x411556(0x2ed)){let _0x5835e9=_0x300c6c['menuMessage'][_0x411556(0x7a9)][_0x411556(0x253)]('\x0a'),_0x311843='',_0x1c7d1b='';_0x5835e9!==-0x1?(_0x311843=_0x300c6c['menuMessage'][_0x411556(0x7a9)][_0x411556(0x513)](0x0,_0x5835e9)['trim'](),_0x1c7d1b=_0x300c6c[_0x411556(0x275)]['text'][_0x411556(0x513)](_0x5835e9+0x1)):_0x1c7d1b=_0x300c6c['menuMessage'][_0x411556(0x7a9)];let _0xcffcbc=_0x300c6c[_0x411556(0x275)][_0x411556(0x5c6)][_0x411556(0x516)](_0x567b84=>_0x567b84[_0x411556(0x311)]()!==''),_0x3d36e4=this['createSectionsFromValues'](_0xcffcbc);_0x1a628b={'listMessage':{'title':_0x311843,'description':_0x1c7d1b,'buttonText':_0x300c6c['menuMessage'][_0x411556(0x8a9)]||_0x411556(0x5e9),'footerText':_0x300c6c[_0x411556(0x275)]['footerText'],'sections':_0x3d36e4,'listType':0x2}};}else{if(_0x300c6c[_0x411556(0x275)][_0x411556(0x717)]===_0x411556(0x498)){let _0x534908=_0x300c6c['menuMessage']['choices'][_0x411556(0x516)](_0x179c4e=>!(_0x179c4e[_0x411556(0x755)]('[')&&_0x179c4e['endsWith'](']'))&&_0x179c4e[_0x411556(0x311)]()!=='')[_0x411556(0x276)](_0x15ae90=>_0x15ae90[_0x411556(0x179)]('\x0a')[0x0]);_0x1a628b={'poll':{'name':_0x300c6c[_0x411556(0x275)][_0x411556(0x7a9)],'selectableCount':_0x300c6c[_0x411556(0x275)][_0x411556(0x365)]||0x1,'values':_0x534908}};}}return await this[_0x411556(0x859)](_0x300c6c[_0x411556(0x5f6)],_0x1a628b,_0x300c6c?.['options']);}['createSectionsFromValues'](_0x4d9394){const _0x514d80=a0_0x591e8d;let _0x8e44f6=[],_0xdaf5f0={'rows':[]};return _0x4d9394[_0x514d80(0x5ce)](_0x4e6079=>{const _0x18151a=_0x514d80;if(_0x4e6079[_0x18151a(0x755)]('[')&&_0x4e6079['endsWith'](']'))_0xdaf5f0[_0x18151a(0x353)]['length']>0x0&&_0x8e44f6[_0x18151a(0x57f)](_0xdaf5f0),_0xdaf5f0={'title':_0x4e6079['slice'](0x1,-0x1),'rows':[]};else{let _0x2902ab=_0x4e6079['split']('\x0a')[_0x18151a(0x276)](_0x487574=>_0x487574['trim']()),_0x49b133=_0x2902ab[0x0],_0x1d1703=_0x2902ab[0x1]||null,_0x35192b=_0x2902ab[0x2]||_0x49b133;_0xdaf5f0[_0x18151a(0x353)][_0x18151a(0x57f)]({'title':_0x49b133,'description':_0x1d1703,'rowId':_0x35192b});}}),_0xdaf5f0[_0x514d80(0x353)][_0x514d80(0x836)]>0x0&&_0x8e44f6[_0x514d80(0x57f)](_0xdaf5f0),_0x8e44f6;}async[a0_0x591e8d(0x207)](_0x445f3d,_0x13f52b){const _0x4bed24=a0_0x591e8d;if(await this[_0x4bed24(0x62a)](_0x445f3d,!0x0)){let _0x11048d={'where':{'_id':_0x445f3d['id']}},_0x497f90={'status':[_0x13f52b['status']][0x0]};try{let _0x42ee7f=await this[_0x4bed24(0x799)][_0x4bed24(0x5b7)][_0x4bed24(0x1d9)](_0x11048d,_0x497f90,this[_0x4bed24(0x3ec)][_0x4bed24(0x490)]);_0x42ee7f&&U(this[_0x4bed24(0x75c)],_0x4bed24(0x3e7),{'message':_0x42ee7f});}catch{}}}[a0_0x591e8d(0x189)](_0x578964){const _0xe325ad=a0_0x591e8d;let _0x356ac8=[];return _0x578964[_0xe325ad(0x5ce)](_0x5b4ef8=>{const _0x369df4=_0xe325ad;_0x5b4ef8[_0x369df4(0x560)]&&_0x356ac8[_0x369df4(0x57f)]('['+_0x5b4ef8[_0x369df4(0x560)]+']'),_0x5b4ef8[_0x369df4(0x353)][_0x369df4(0x5ce)](_0x3f4fad=>{const _0x4ebf13=_0x369df4;_0x356ac8[_0x4ebf13(0x57f)](_0x3f4fad[_0x4ebf13(0x560)]);});}),_0x356ac8[_0xe325ad(0x241)]('|');}[a0_0x591e8d(0x29f)](_0x49fa5a){const _0x3d3230=a0_0x591e8d;let _0x310d3b=_0x49fa5a[_0x3d3230(0x4d0)](/\\n/g,'\x0a')['split']('\x0a')[_0x3d3230(0x516)](_0x100249=>_0x100249[_0x3d3230(0x243)](_0x3d3230(0x383))||_0x100249[_0x3d3230(0x243)]('EMAIL')),_0x3d7d6f='';return _0x310d3b[_0x3d3230(0x5ce)](_0x46c82e=>{const _0x45a3f2=_0x3d3230;let _0x46b880=/TEL(?:.*):(.+)/,_0x2ed9d5=/EMAIL(?:.*):(.+)/,_0x258e3e=_0x46c82e[_0x45a3f2(0x1e2)](_0x46b880),_0x51f984=_0x46c82e[_0x45a3f2(0x1e2)](_0x2ed9d5);if(_0x258e3e){let _0x86ff8b=_0x258e3e[0x1][_0x45a3f2(0x4d0)](/-| |\+|\(|\)/g,'')['trim']();_0x3d7d6f+=_0x45a3f2(0x758)+_0x86ff8b+'\x0a';}else{if(_0x51f984){let _0x122695=_0x51f984[0x1]['trim']();_0x3d7d6f+=_0x45a3f2(0x71b)+_0x122695+'\x0a';}}}),_0x3d7d6f['trim']();}async[a0_0x591e8d(0x568)](_0x4e4e67,_0x3392b9,_0x1fcd2b,_0x3dd84a=null){const _0x126500=a0_0x591e8d;if(_0x4e4e67[_0x126500(0x754)])try{let _0x2c9a1e=_0x3392b9[_0x126500(0x27f)][_0x126500(0x166)]['replace'](/:\d{1,2}@/g,'@'),_0x43e60e=_0x3392b9[_0x126500(0x27f)][_0x126500(0x7f7)],_0x5b94cd=_0x2c9a1e[_0x126500(0x426)](_0x126500(0x2b3)),_0x109d69=_0x3392b9[_0x126500(0x39a)]?.['replace'](/:\d{1,2}@/g,'@')||'',_0x5e06df=_0x3392b9[_0x126500(0x78e)]?.[_0x126500(0x7a9)]||_0x3392b9[_0x126500(0x78e)]?.[_0x126500(0x82c)]||_0x3392b9['message_normalized']?.[_0x126500(0x3f6)]||_0x3392b9[_0x126500(0x78e)]?.[_0x126500(0x1f8)]||'',_0xe5b079={'_id':_0x3392b9[_0x126500(0x812)],'remoteJid':_0x43e60e?this['instance']['wuid']:_0x5b94cd?_0x109d69:_0x2c9a1e,'pushName':_0x43e60e?this['instance'][_0x126500(0x725)]||'Eu':_0x3392b9['pushName'],'text':_0x5e06df,'type':_0x3392b9[_0x126500(0x399)],'when':_0x3392b9[_0x126500(0x692)]||Date[_0x126500(0x673)]()};_0x3dd84a||(_0x3dd84a=await this[_0x126500(0x799)][_0x126500(0x4b2)][_0x126500(0x685)]({'where':{'_id':_0x2c9a1e}},this[_0x126500(0x3ec)]['wuid']));let _0x8fb41c=_0x3dd84a?_0x43e60e?_0x3dd84a[_0x126500(0x24a)]:(_0x3dd84a['unreadcount']||0x0)+0x1:_0x43e60e?0x0:0x1,_0xea76a1={'lastmsg':_0x3392b9[_0x126500(0x692)]||Date[_0x126500(0x673)](),'ephemeralExpiration':_0x3392b9['expiration'],'lastMessage':_0xe5b079,'unreadcount':_0x8fb41c,..._0x43e60e||_0x5b94cd?{}:{'name':_0x3392b9[_0x126500(0x870)]},..._0x5b94cd?{'group':_0x5b94cd}:{},...!_0x43e60e&&!_0x5b94cd&&_0x3392b9[_0x126500(0x577)]?{'imagechat':_0x3392b9['profilePictureUrl']}:{}};if(!_0x5b94cd&&(!_0x3dd84a?.[_0x126500(0x2cf)]||!_0x3dd84a[_0x126500(0x2cf)][_0x126500(0x695)])&&_0x3392b9[_0x126500(0x870)]&&!_0x43e60e&&(_0xea76a1={..._0xea76a1,'leadInfo.nome':_0x3392b9[_0x126500(0x870)]}),_0x3dd84a?.['leadInfo'][_0x126500(0x325)]||(_0xea76a1={..._0xea76a1,'leadInfo.etiquetas':[]}),_0x3dd84a?.[_0x126500(0x2cf)]['customFields']||(_0xea76a1={..._0xea76a1,'leadInfo.customFields':[]}),_0x3dd84a?.[_0x126500(0x2cf)][_0x126500(0x82d)]||(_0xea76a1={..._0xea76a1,'leadInfo.tags':[]}),_0x3dd84a&&_0x3dd84a?.[_0x126500(0x6eb)]){let _0x541a38=await this[_0x126500(0x799)][_0x126500(0x835)]['find']({'where':{}},this['instance'][_0x126500(0x490)]),_0x119d90=new Set(_0x541a38[_0x126500(0x276)](_0x378599=>_0x378599[_0x126500(0x812)])),_0x58f97d=(_0x3dd84a['leadInfo']?.[_0x126500(0x325)]||[])[_0x126500(0x516)](_0xdea1e1=>_0x119d90[_0x126500(0x1ea)](_0xdea1e1));_0xea76a1={..._0xea76a1,'imported':!0x1,'leadInfo.etiquetas':_0x58f97d};for(let _0x4fac01 of _0x58f97d)await this[_0x126500(0x180)](_0x4fac01,_0x2c9a1e);}if(!this[_0x126500(0x693)]['flows'][_0x126500(0x2c5)](_0x4b8e55=>_0x4b8e55[_0x126500(0x1e6)]&&_0x5e06df[_0x126500(0x243)](_0x4b8e55[_0x126500(0x1e6)]))&&_0x1fcd2b===_0x126500(0x440)&&_0x43e60e&&this['AutomateSystem']?.['flowConfig'][_0x126500(0x3ab)]&&_0x5e06df[_0x126500(0x311)]()!==this['AutomateSystem']?.[_0x126500(0x7d5)]['stopConversation'][_0x126500(0x311)]()){let _0x98c5cb=(this[_0x126500(0x693)]?.['flowConfig'][_0x126500(0x492)]||0x0)*0xea60,_0x39202c=Date[_0x126500(0x673)]()+_0x98c5cb;_0x3dd84a?.[_0x126500(0x2cf)]?.[_0x126500(0x1d0)]===0x0||(_0xea76a1={..._0xea76a1,'leadInfo.desativadoFluxoAte':_0x39202c},this[_0x126500(0x484)][_0x126500(0x768)](this['instanceName']+'\x20('+this['instance'][_0x126500(0x490)]+'):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20at\x20'+_0x39202c+'.'));}if(_0x5e06df[_0x126500(0x311)]()===this['AutomateSystem']?.['flowConfig'][_0x126500(0x247)][_0x126500(0x311)]()){this['logger'][_0x126500(0x768)](this[_0x126500(0x75c)]+'\x20('+this['instance'][_0x126500(0x490)]+_0x126500(0x5e2)+_0x5e06df);let _0xca9618=Date[_0x126500(0x673)]();this[_0x126500(0x693)]?.[_0x126500(0x7d5)][_0x126500(0x756)]===0x0?_0xea76a1={..._0xea76a1,'leadInfo.desativadoFluxoAte':_0xca9618+0x7591f6200}:_0xea76a1={..._0xea76a1,'leadInfo.desativadoFluxoAte':_0xca9618+this[_0x126500(0x693)]?.[_0x126500(0x7d5)][_0x126500(0x756)]*0x3c*0x3e8};}if(_0x3dd84a=await this[_0x126500(0x799)][_0x126500(0x4b2)][_0x126500(0x828)]({'where':{'_id':_0x2c9a1e}},_0xea76a1,this['instance'][_0x126500(0x490)],{'new':!0x0,'upsert':!0x0}),_0x3dd84a)U(this['instanceName'],'chats',{'chat':_0x3dd84a});else{this[_0x126500(0x484)][_0x126500(0x62b)](this[_0x126500(0x75c)]+'\x20('+this[_0x126500(0x3ec)][_0x126500(0x490)]+_0x126500(0x628));return;}if(_0x43e60e)return this['logger']['verbose'](this[_0x126500(0x75c)]+'\x20('+this[_0x126500(0x3ec)]['wuid']+_0x126500(0x4f3)),null;if(!this[_0x126500(0x693)]?.[_0x126500(0x7d5)][_0x126500(0x3ab)])return this['logger'][_0x126500(0x768)](this[_0x126500(0x75c)]+'\x20('+this[_0x126500(0x3ec)]['wuid']+'):\x20Flow\x20desativado'),null;if(_0x3dd84a[_0x126500(0x812)][_0x126500(0x243)](_0x126500(0x2b3))&&this[_0x126500(0x693)]?.['flowConfig'][_0x126500(0x485)]===!0x0)return this[_0x126500(0x484)][_0x126500(0x768)](this[_0x126500(0x75c)]+'\x20('+this[_0x126500(0x3ec)][_0x126500(0x490)]+'):\x20Ignoring\x20group\x20messages.'),null;if(_0x3dd84a[_0x126500(0x2cf)]){if(_0x3dd84a[_0x126500(0x2cf)][_0x126500(0x1d0)]===0x0||_0x3dd84a['leadInfo']['atendimentoAberto'])return this[_0x126500(0x484)][_0x126500(0x768)](this[_0x126500(0x75c)]+'\x20('+this[_0x126500(0x3ec)][_0x126500(0x490)]+_0x126500(0x6bb)+_0x2c9a1e+_0x126500(0x43f)),null;if(_0x3dd84a[_0x126500(0x2cf)][_0x126500(0x1d0)]>Date['now']()&&!_0x3392b9[_0x126500(0x78e)]?.['vote'])return this['logger'][_0x126500(0x768)](this[_0x126500(0x75c)]+'\x20('+this[_0x126500(0x3ec)]['wuid']+_0x126500(0x514)+new Date(_0x3dd84a[_0x126500(0x2cf)][_0x126500(0x1d0)])[_0x126500(0x7e8)]()+',\x20saindo.'),null;}this[_0x126500(0x484)][_0x126500(0x768)](this[_0x126500(0x75c)]+'\x20('+this[_0x126500(0x3ec)][_0x126500(0x490)]+_0x126500(0x702)),this['StartBot'](_0x3392b9,_0x1fcd2b);}catch(_0x1e30c7){let _0x27885b=_0x126500(0x25c),_0x36d0ec=_0x1e30c7 instanceof Error?_0x1e30c7[_0x126500(0x5b7)]:typeof _0x1e30c7==_0x126500(0x808)?JSON['stringify'](_0x1e30c7):_0x1e30c7,_0x1e1588=_0x27885b+':\x20'+_0x36d0ec;return this['logger'][_0x126500(0x62b)](this[_0x126500(0x75c)]+'\x20('+this[_0x126500(0x3ec)][_0x126500(0x490)]+'):\x20'+_0x1e1588),null;}}async[a0_0x591e8d(0x7bb)](_0x3b7dcf,_0x42f9ad){const _0x511410=a0_0x591e8d;if(_0x42f9ad['ENABLED']){let _0x482f27=_0x3b7dcf[_0x511410(0x276)](async _0x5b4201=>{const _0x40057a=_0x511410;try{let _0x1e2c0f={'_id':_0x5b4201[_0x40057a(0x812)],'owner':_0x5b4201[_0x40057a(0x7d9)],'lastcache':0x0};if(Object[_0x40057a(0x34b)](_0x5b4201)[_0x40057a(0x5ce)](_0x1d3078=>{_0x5b4201[_0x1d3078]!==null&&(_0x1e2c0f[_0x1d3078]=_0x5b4201[_0x1d3078]);}),_0x1e2c0f[_0x40057a(0x3aa)]===null&&(_0x1e2c0f['imagechat']=_0x40057a(0x357)),Object[_0x40057a(0x34b)](_0x1e2c0f)[_0x40057a(0x836)]>0x0)return await this['repository'][_0x40057a(0x4b2)][_0x40057a(0x828)]({'where':{'_id':_0x5b4201[_0x40057a(0x812)]}},_0x1e2c0f,this[_0x40057a(0x3ec)]['wuid']);}catch(_0x568bfa){let _0x3ad8fb=_0x40057a(0x7db)+_0x5b4201['_id'],_0x331321=_0x568bfa instanceof Error?_0x568bfa[_0x40057a(0x5b7)]:typeof _0x568bfa==_0x40057a(0x808)?JSON[_0x40057a(0x62f)](_0x568bfa):_0x568bfa,_0x490904=_0x3ad8fb+':\x20'+_0x331321;return this[_0x40057a(0x484)][_0x40057a(0x62b)](this[_0x40057a(0x75c)]+'\x20('+this[_0x40057a(0x3ec)][_0x40057a(0x490)]+_0x40057a(0x872)+_0x490904),null;}}),_0x17836b=(await Promise['all'](_0x482f27))['filter'](_0x338059=>_0x338059!==null)[_0x511410(0x836)];this[_0x511410(0x484)][_0x511410(0x768)](this[_0x511410(0x75c)]+'\x20('+this[_0x511410(0x3ec)][_0x511410(0x490)]+_0x511410(0x872)+_0x17836b+_0x511410(0x299)+this[_0x511410(0x3ec)][_0x511410(0x490)]+'\x20inseridos\x20no\x20banco\x20de\x20dados...');}}async[a0_0x591e8d(0x846)](_0x164f68){const _0x98d055=a0_0x591e8d;this[_0x98d055(0x484)][_0x98d055(0x768)](this[_0x98d055(0x75c)]+'\x20('+this[_0x98d055(0x3ec)][_0x98d055(0x490)]+_0x98d055(0x2c6));let _0x4213b9={'readMessages':[{'remoteJid':_0x164f68[_0x98d055(0x546)]['lastReceivedMessage'][_0x98d055(0x27f)]['remoteJid'],'fromMe':_0x164f68['chatLog']['lastReceivedMessage'][_0x98d055(0x27f)][_0x98d055(0x7f7)],'id':_0x164f68['chatLog']['lastReceivedMessage']['key']['id']}]};await this[_0x98d055(0x4e2)](_0x4213b9);}async[a0_0x591e8d(0x3b5)](_0x2dbfb5,_0x383594){const _0x35b65c=a0_0x591e8d;try{let {key:_0x32d77c,message_normalized:_0x1718cb}=_0x2dbfb5,_0x5d9022=_0x1718cb,_0x3effb5=_0x1718cb[_0x35b65c(0x7a9)]||_0x1718cb[_0x35b65c(0x82c)]||_0x1718cb[_0x35b65c(0x3f6)]||_0x1718cb[_0x35b65c(0x1f8)]||'',_0x69791c=_0x32d77c[_0x35b65c(0x166)],_0x16db02=null,_0x4e8158=this[_0x35b65c(0x693)][_0x35b65c(0x26a)][_0x35b65c(0x2c5)](_0x59d438=>_0x59d438[_0x35b65c(0x1e6)]&&_0x3effb5[_0x35b65c(0x243)](_0x59d438[_0x35b65c(0x1e6)]));if(_0x4e8158&&_0x383594===_0x35b65c(0x440)){let _0x30a6b5=await this['repository'][_0x35b65c(0x4cc)][_0x35b65c(0x685)]({'where':{'_id':_0x4e8158[_0x35b65c(0x812)]}});if(this[_0x35b65c(0x484)]['verbose'](this[_0x35b65c(0x75c)]+'\x20('+this[_0x35b65c(0x3ec)][_0x35b65c(0x490)]+_0x35b65c(0x4dd)),_0x30a6b5&&_0x30a6b5[_0x35b65c(0x658)]?.[_0x35b65c(0x243)](this[_0x35b65c(0x3ec)][_0x35b65c(0x490)]))_0x16db02=await this[_0x35b65c(0x5bb)](_0x30a6b5,_0x32d77c,_0x5d9022);else return this[_0x35b65c(0x484)][_0x35b65c(0x768)](this['instanceName']+'\x20('+this[_0x35b65c(0x3ec)]['wuid']+_0x35b65c(0x68b)),null;}else this['logger'][_0x35b65c(0x768)](this[_0x35b65c(0x75c)]+'\x20('+this[_0x35b65c(0x3ec)]['wuid']+'):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand');if(_0x16db02=await this[_0x35b65c(0x25b)](_0x69791c,_0x5d9022),_0x16db02){this[_0x35b65c(0x484)][_0x35b65c(0x768)](this[_0x35b65c(0x75c)]+'\x20('+this[_0x35b65c(0x3ec)][_0x35b65c(0x490)]+_0x35b65c(0x17d)),!_0x32d77c[_0x35b65c(0x7f7)]&&_0x16db02[_0x35b65c(0x2b9)]&&this['readMessageBot'](_0x16db02);let _0x5104a8=await this['NextBlock'](_0x16db02);_0x5104a8&&await this['processblock'](_0x16db02,_0x5104a8);}}catch(_0x54b628){this['logger'][_0x35b65c(0x62b)](this[_0x35b65c(0x75c)]+'\x20('+this[_0x35b65c(0x3ec)]['wuid']+'):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20'+(_0x54b628 instanceof Error?_0x54b628[_0x35b65c(0x5b7)]:JSON[_0x35b65c(0x62f)](_0x54b628,null,0x2)));}}['flattenObject'](_0x1593cc,_0x1bd31a='',_0x5f18c1={}){const _0x3df065=a0_0x591e8d;return typeof _0x1593cc!=_0x3df065(0x808)||_0x1593cc===null?(_0x1bd31a&&(_0x5f18c1[_0x1bd31a]=_0x1593cc),_0x5f18c1):(Object[_0x3df065(0x852)](_0x1593cc)[_0x3df065(0x5ce)](([_0x5bc036,_0x102583])=>{const _0xb4eba7=_0x3df065;let _0x2e4d25=_0x1bd31a?_0x1bd31a+'.'+_0x5bc036:'_'+_0x5bc036;Array['isArray'](_0x102583)?_0x102583['forEach']((_0x5010e6,_0x40ef33)=>{const _0x289073=a0_0x3f1e;this[_0x289073(0x1a5)](_0x5010e6,_0x2e4d25+'['+_0x40ef33+']',_0x5f18c1);}):typeof _0x102583==_0xb4eba7(0x808)&&_0x102583!==null?this[_0xb4eba7(0x1a5)](_0x102583,_0x2e4d25,_0x5f18c1):_0x5f18c1[_0x2e4d25]=String(_0x102583);}),_0x5f18c1);}[a0_0x591e8d(0x892)](_0x4b39ad){const _0x4f62d1=a0_0x591e8d;let _0x274425={};for(let _0x585b5a of _0x4b39ad)typeof _0x585b5a[_0x4f62d1(0x1f8)]=='string'&&typeof _0x585b5a[_0x4f62d1(0x30e)]==_0x4f62d1(0x2f2)&&(_0x274425[_0x585b5a[_0x4f62d1(0x1f8)]]=_0x585b5a[_0x4f62d1(0x30e)]);return _0x274425;}async[a0_0x591e8d(0x262)](_0x4d4f75){const _0x5f25d8=a0_0x591e8d;if(!this['AutomateSystem']?.[_0x5f25d8(0x7d5)][_0x5f25d8(0x3ab)]||_0x4d4f75[_0x5f25d8(0x360)]!==_0x5f25d8(0x4b7)&&_0x4d4f75[_0x5f25d8(0x3db)]==='')return null;let _0xb30b41=_0x4d4f75[_0x5f25d8(0x546)][_0x5f25d8(0x201)]||_0x5f25d8(0x67e);typeof _0x4d4f75[_0x5f25d8(0x546)][_0x5f25d8(0x185)]>'u'&&(_0x4d4f75['chatLog'][_0x5f25d8(0x185)]=!0x0);let _0x3885d8=_0x4d4f75[_0x5f25d8(0x546)][_0x5f25d8(0x185)];this[_0x5f25d8(0x484)][_0x5f25d8(0x768)](this[_0x5f25d8(0x75c)]+'\x20('+this['instance'][_0x5f25d8(0x490)]+_0x5f25d8(0x30d)+_0xb30b41+',\x20lastCondition:\x20'+_0x3885d8);let _0x202d57=_0xb30b41===_0x5f25d8(0x67e)?_0x4d4f75[_0x5f25d8(0x308)][_0x5f25d8(0x2c5)](_0x5dba5a=>_0x5dba5a[_0x5f25d8(0x717)]==='start'):_0x4d4f75['blocks'][_0x5f25d8(0x2c5)](_0x11f19f=>_0x11f19f['_id'][_0x5f25d8(0x44c)]()===_0xb30b41['toString']());if(!_0x202d57)return this['logger']['error'](this['instanceName']+'\x20('+this[_0x5f25d8(0x3ec)]['wuid']+_0x5f25d8(0x6cf)+_0xb30b41),null;let _0x550bae={'_pushName':_0x4d4f75?.[_0x5f25d8(0x546)]?.[_0x5f25d8(0x55a)]?.[_0x5f25d8(0x870)]||'','_sender':this['instance'][_0x5f25d8(0x490)]||'',..._0x4d4f75[_0x5f25d8(0x546)][_0x5f25d8(0x195)]},_0x4992cb=null;if(_0x4d4f75[_0x5f25d8(0x3db)]){let _0x280484=_0x4d4f75['chatLog']['lastReceivedMessage']['vote'],_0x52b5de=_0x4d4f75[_0x5f25d8(0x462)][_0x5f25d8(0x2c5)](_0x22ea68=>_0x22ea68[_0x5f25d8(0x171)]===_0x280484);if(_0x52b5de){let _0x260e89=_0x52b5de[_0x5f25d8(0x65a)];if(_0x4992cb=_0x4d4f75[_0x5f25d8(0x308)]['find'](_0x460d89=>_0x460d89[_0x5f25d8(0x663)]===_0x260e89&&_0x460d89['order']===0x1),_0x202d57[_0x5f25d8(0x301)][_0x5f25d8(0x3af)]){let _0x221ab4={'id':_0x4d4f75[_0x5f25d8(0x3db)],'remoteJid':_0x4d4f75[_0x5f25d8(0x166)],'fromMe':!0x0};await this[_0x5f25d8(0x545)](_0x221ab4);}if(_0x202d57[_0x5f25d8(0x301)][_0x5f25d8(0x3af)]&&_0x202d57['uazapi'][_0x5f25d8(0x899)]&&_0x202d57['uazapi'][_0x5f25d8(0x33d)]==='poll'){let _0x5dfb74={'number':_0x4d4f75['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x5f25d8(0x5c7)+_0x4d4f75[_0x5f25d8(0x50d)]+'\x0a*Voc\x20respondeu*:\x0a'+_0x280484}};await this['textMessage'](_0x5dfb74);}_0x4d4f75[_0x5f25d8(0x360)]=_0x5f25d8(0x4b7),_0x4d4f75[_0x5f25d8(0x3db)]='',_0x4d4f75[_0x5f25d8(0x50d)]='',_0x4d4f75[_0x5f25d8(0x462)]=[];}else{this[_0x5f25d8(0x484)][_0x5f25d8(0x768)](this[_0x5f25d8(0x75c)]+'\x20('+this[_0x5f25d8(0x3ec)][_0x5f25d8(0x490)]+_0x5f25d8(0x642));let _0x396f7d={'activatedCount':_0x4d4f75[_0x5f25d8(0x546)][_0x5f25d8(0x1a6)][_0x5f25d8(0x516)](_0x1628dd=>String(_0x1628dd['blockId'])===String(_0xb30b41))['length'],'moreLogs':[_0x5f25d8(0x26f)]};if(_0x202d57[_0x5f25d8(0x301)]['pollErrorMessage']){let _0x18474c={'number':_0x4d4f75[_0x5f25d8(0x166)],'options':{'delay':0x0},'textMessage':{'text':_0x202d57[_0x5f25d8(0x301)][_0x5f25d8(0x4bd)]}};await this[_0x5f25d8(0x4fb)](_0x18474c);}if(_0x202d57[_0x5f25d8(0x42c)]!==void 0x0&&_0x396f7d[_0x5f25d8(0x842)]>=_0x202d57[_0x5f25d8(0x42c)]){let _0x2361e0=Date[_0x5f25d8(0x673)](),_0x18faa7=_0x202d57[_0x5f25d8(0x6b7)]??0xa;isNaN(_0x18faa7)&&(_0x18faa7=0xa);let _0x19ec09=_0x2361e0+_0x18faa7*0x3c*0x3e8;_0x396f7d[_0x5f25d8(0x219)]=_0x19ec09,_0x396f7d[_0x5f25d8(0x6b5)][_0x5f25d8(0x57f)](_0x5f25d8(0x4e1)),this[_0x5f25d8(0x70e)](_0x4d4f75,_0x19ec09),_0x4d4f75['waitingMenu_id']='',_0x4d4f75['waitingMenu_text']='',_0x4d4f75[_0x5f25d8(0x462)]=[];}return this[_0x5f25d8(0x5e0)](_0x4d4f75,_0x202d57,_0x396f7d,!0x0),null;}}if(_0x3885d8&&_0x202d57[_0x5f25d8(0x65a)]&&!_0x4d4f75['waitingMenu_id']){let _0x176c17=_0x4d4f75[_0x5f25d8(0x308)]['filter'](_0x2e7a11=>_0x2e7a11[_0x5f25d8(0x663)][_0x5f25d8(0x44c)]()===_0x202d57[_0x5f25d8(0x65a)]['toString']())[_0x5f25d8(0x543)]((_0x29ed01,_0x27101f)=>_0x29ed01['order']-_0x27101f[_0x5f25d8(0x31a)]);_0x176c17[_0x5f25d8(0x836)]>0x0&&(_0x4992cb=_0x176c17[0x0]);}if(!_0x4992cb){let _0x2bebaf=_0x202d57[_0x5f25d8(0x663)],_0x35b4c4=_0x4d4f75['blocks'][_0x5f25d8(0x516)](_0x79ff26=>_0x79ff26[_0x5f25d8(0x663)]===_0x2bebaf&&_0x79ff26['order']>_0x202d57[_0x5f25d8(0x31a)])[_0x5f25d8(0x543)]((_0x24a8c5,_0x410532)=>_0x24a8c5[_0x5f25d8(0x31a)]-_0x410532[_0x5f25d8(0x31a)]);_0x35b4c4[_0x5f25d8(0x836)]>0x0&&(_0x4992cb=_0x35b4c4[0x0]);}if(!_0x4992cb)return _0x4d4f75[_0x5f25d8(0x360)]=_0x5f25d8(0x764),null;_0x4d4f75[_0x5f25d8(0x546)][_0x5f25d8(0x195)]=_0x550bae;let _0x49bad5=JSON[_0x5f25d8(0x3da)](JSON[_0x5f25d8(0x62f)](_0x4992cb));return this[_0x5f25d8(0x48a)](_0x49bad5,_0x4d4f75[_0x5f25d8(0x546)]['realVariables']),_0x4d4f75[_0x5f25d8(0x546)][_0x5f25d8(0x201)]=_0x49bad5[_0x5f25d8(0x812)],_0x4d4f75[_0x5f25d8(0x546)][_0x5f25d8(0x185)]=!0x0,_0x49bad5;}[a0_0x591e8d(0x4d2)](_0x57d49b,_0x5cb31a){const _0x21987f=a0_0x591e8d;return _0x57d49b[_0x21987f(0x4d0)](/\{\{([^}]+)\}\}/g,(_0xf4addf,_0x3f7bd6)=>_0x5cb31a[_0x3f7bd6]||'');}[a0_0x591e8d(0x48a)](_0x5a0aa5,_0x5a4255){const _0xea7568=a0_0x591e8d;for(let _0x126b46 in _0x5a0aa5)typeof _0x5a0aa5[_0x126b46]=='string'?_0x5a0aa5[_0x126b46]=this[_0xea7568(0x4d2)](_0x5a0aa5[_0x126b46],_0x5a4255):typeof _0x5a0aa5[_0x126b46]=='object'&&this[_0xea7568(0x48a)](_0x5a0aa5[_0x126b46],_0x5a4255);}async[a0_0x591e8d(0x564)](_0x486e1a,_0xd90431){const _0x3c7403=a0_0x591e8d;let _0x22f185=_0xd90431[_0x3c7403(0x812)];if(_0x486e1a[_0x3c7403(0x546)]&&_0x486e1a[_0x3c7403(0x546)]['blockLogs']){let _0x4e9b8e=_0x486e1a[_0x3c7403(0x546)][_0x3c7403(0x1a6)][_0x3c7403(0x516)](_0x135c88=>String(_0x135c88['blockId'])===String(_0x22f185))[_0x3c7403(0x481)]();if(_0x4e9b8e&&_0x4e9b8e['error']&&_0xd90431[_0x3c7403(0x55e)])return _0x486e1a[_0x3c7403(0x360)]='closed',await this[_0x3c7403(0x739)](_0x486e1a),null;}if(_0xd90431['type']===_0x3c7403(0x301)&&_0xd90431[_0x3c7403(0x301)][_0x3c7403(0x688)]===_0x3c7403(0x86b)&&_0x486e1a[_0x3c7403(0x3db)])return _0x486e1a['chatLog'][_0x3c7403(0x201)]=_0x22f185,await this[_0x3c7403(0x739)](_0x486e1a),null;let _0x1dabc5=await this[_0x3c7403(0x262)](_0x486e1a);if(_0x486e1a[_0x3c7403(0x546)]&&_0x486e1a['chatLog'][_0x3c7403(0x1a6)]){let _0x62cb75=_0x486e1a[_0x3c7403(0x546)][_0x3c7403(0x1a6)][_0x3c7403(0x516)](_0x41673d=>String(_0x41673d[_0x3c7403(0x7d6)])===String(_0x22f185))[_0x3c7403(0x836)];if(_0xd90431[_0x3c7403(0x42c)]!==void 0x0&&_0x62cb75>=_0xd90431[_0x3c7403(0x42c)]){let _0x381f9f=Date[_0x3c7403(0x673)](),_0x563913=_0xd90431[_0x3c7403(0x6b7)]??0xa;isNaN(_0x563913)&&(_0x563913=0xa);let _0x1e2933=_0x381f9f+_0x563913*0x3c*0x3e8,_0x39ed3d={'newStoppedUntil':_0x1e2933};return this[_0x3c7403(0x70e)](_0x486e1a,_0x1e2933),this['updateConversation'](_0x486e1a,_0xd90431,_0x39ed3d,!0x0),null;}}_0x1dabc5&&_0x1dabc5[_0x3c7403(0x717)]!==_0x3c7403(0x6a0)&&await this[_0x3c7403(0x2aa)](_0x486e1a,_0x1dabc5),_0x1dabc5||await this['saveConversationToDatabase'](_0x486e1a),_0x1dabc5&&_0x1dabc5[_0x3c7403(0x717)]==='save'&&(_0x486e1a['chatLog']['lastBlockId']=_0x22f185,await this['saveConversationToDatabase'](_0x486e1a));}async[a0_0x591e8d(0x2aa)](_0x53b40c,_0x41a455){const _0x32f025=a0_0x591e8d;try{let _0x5a73f1=_0x41a455['type'];this[_0x32f025(0x484)]['verbose'](this[_0x32f025(0x75c)]+'\x20('+this[_0x32f025(0x3ec)][_0x32f025(0x490)]+'):\x20Going\x20to\x20'+_0x5a73f1);let _0x56062a={'uazapi':()=>this[_0x32f025(0x432)](_0x53b40c,_0x41a455),'save':()=>this[_0x32f025(0x611)](_0x53b40c,_0x41a455),'stop':()=>this[_0x32f025(0x247)](_0x53b40c,_0x41a455),'condition':()=>this[_0x32f025(0x214)](_0x53b40c,_0x41a455),'varedit':()=>this[_0x32f025(0x300)](_0x53b40c,_0x41a455),'apirequest':()=>this[_0x32f025(0x69a)](_0x53b40c,_0x41a455),'goToFlow':()=>this[_0x32f025(0x7fd)](_0x53b40c,_0x41a455),'scheduleFlow':()=>this[_0x32f025(0x7b4)](_0x53b40c,_0x41a455),'awaitSeconds':()=>this['processawaitSeconds'](_0x53b40c,_0x41a455),'clearVariables':()=>this['processclearVariables'](_0x53b40c,_0x41a455)}[_0x5a73f1];_0x56062a&&await _0x56062a();}catch(_0xa2807d){this[_0x32f025(0x484)][_0x32f025(0x62b)](this['instanceName']+'\x20('+this['instance'][_0x32f025(0x490)]+_0x32f025(0x230)+(_0xa2807d instanceof Error?_0xa2807d['message']:JSON[_0x32f025(0x62f)](_0xa2807d,null,0x2)));}}async[a0_0x591e8d(0x5a6)](_0x2472b5,_0x5e54a5){const _0x3e072b=a0_0x591e8d;if(this[_0x3e072b(0x484)]['verbose'](this[_0x3e072b(0x75c)]+'\x20('+this[_0x3e072b(0x3ec)][_0x3e072b(0x490)]+'):\x20Entrou\x20na\x20funo\x20processawaitSeconds'),!_0x2472b5||!_0x5e54a5)return this[_0x3e072b(0x484)][_0x3e072b(0x62b)](this[_0x3e072b(0x75c)]+'\x20('+this[_0x3e072b(0x3ec)][_0x3e072b(0x490)]+_0x3e072b(0x3bb)),null;let _0x57e4b5=+_0x5e54a5[_0x3e072b(0x448)];isNaN(_0x57e4b5)&&(_0x57e4b5=0x0),_0x57e4b5=Math[_0x3e072b(0x46b)](_0x57e4b5,0x3c),await(0x0,w['delay'])(_0x57e4b5*0x3e8);let _0x29ca52={'moreLogs':[_0x3e072b(0x460)+_0x57e4b5+_0x3e072b(0x839)]};return await this[_0x3e072b(0x5e0)](_0x2472b5,_0x5e54a5,_0x29ca52),_0x57e4b5;}async[a0_0x591e8d(0x54f)](_0x446d7c,_0x30a9f1){const _0x440dd6=a0_0x591e8d;if(this[_0x440dd6(0x484)][_0x440dd6(0x768)](this[_0x440dd6(0x75c)]+'\x20('+this[_0x440dd6(0x3ec)][_0x440dd6(0x490)]+'):\x20Entrou\x20na\x20funo\x20clearVariables'),!_0x446d7c||!_0x30a9f1)return this['logger']['error'](this[_0x440dd6(0x75c)]+'\x20('+this[_0x440dd6(0x3ec)]['wuid']+_0x440dd6(0x3bb)),null;let _0x1673e8=[];if(_0x30a9f1[_0x440dd6(0x1b7)][_0x440dd6(0x311)]()===_0x440dd6(0x21f)){let _0x344c65=[_0x440dd6(0x392),'_pushName','_error',_0x440dd6(0x707),_0x440dd6(0x2ae),_0x440dd6(0x812),_0x440dd6(0x4fe)];_0x1673e8=Object['keys'](_0x446d7c['chatLog']['realVariables'])['filter'](_0x2a9e64=>_0x2a9e64[_0x440dd6(0x755)]('_')&&!_0x344c65[_0x440dd6(0x243)](_0x2a9e64));}else _0x1673e8=_0x30a9f1[_0x440dd6(0x1b7)][_0x440dd6(0x179)]('|')[_0x440dd6(0x276)](_0x2797cc=>(_0x2797cc=_0x2797cc[_0x440dd6(0x4d0)](/[{}]/g,'')[_0x440dd6(0x311)](),_0x2797cc[_0x440dd6(0x755)]('_')?_0x2797cc:'_'+_0x2797cc));let _0x3095d7=[];_0x1673e8['forEach'](_0x2caa6f=>{const _0x3c622b=_0x440dd6;_0x2caa6f in _0x446d7c['chatLog'][_0x3c622b(0x195)]&&(delete _0x446d7c['chatLog'][_0x3c622b(0x195)][_0x2caa6f],_0x3095d7['push'](_0x2caa6f));}),_0x3095d7[_0x440dd6(0x836)]>0x0?this[_0x440dd6(0x484)][_0x440dd6(0x768)](this[_0x440dd6(0x75c)]+'\x20('+this['instance']['wuid']+_0x440dd6(0x6d8)+_0x3095d7[_0x440dd6(0x241)](',\x20')):this[_0x440dd6(0x484)]['verbose'](this[_0x440dd6(0x75c)]+'\x20('+this[_0x440dd6(0x3ec)][_0x440dd6(0x490)]+'):\x20Nenhuma\x20varivel\x20especificada\x20foi\x20encontrada\x20para\x20remoo');let _0x5515d0={'moreLogs':['Removidas\x20as\x20variveis:\x20'+_0x3095d7[_0x440dd6(0x241)](',\x20')]};return await this[_0x440dd6(0x5e0)](_0x446d7c,_0x30a9f1,_0x5515d0),null;}async[a0_0x591e8d(0x7b4)](_0x46fcf5,_0x329888){const _0x28e6fe=a0_0x591e8d;if(this[_0x28e6fe(0x484)][_0x28e6fe(0x768)](this[_0x28e6fe(0x75c)]+'\x20('+this[_0x28e6fe(0x3ec)]['wuid']+'):\x20Entrou\x20na\x20funo\x20scheduleFlow'),!_0x46fcf5||!_0x329888)return this[_0x28e6fe(0x484)][_0x28e6fe(0x62b)](this[_0x28e6fe(0x75c)]+'\x20('+this[_0x28e6fe(0x3ec)][_0x28e6fe(0x490)]+_0x28e6fe(0x3bb)),null;let _0x1fa064=_0x46fcf5['remoteJid'];_0x329888[_0x28e6fe(0x657)][_0x28e6fe(0x166)]&&_0x329888[_0x28e6fe(0x657)]['remoteJid'][_0x28e6fe(0x311)]()!==''&&(_0x1fa064=_0x329888[_0x28e6fe(0x301)]['remoteJid'][_0x28e6fe(0x311)]());let _0x383326=_0x329888[_0x28e6fe(0x657)][_0x28e6fe(0x467)]*0xea60,_0x4117d3=Date[_0x28e6fe(0x673)]()+_0x383326,_0x59dc63={'status':_0x28e6fe(0x769),'info':_0x28e6fe(0x684)+_0x46fcf5[_0x28e6fe(0x1f8)],'remoteJids':[_0x1fa064],'when':_0x4117d3,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x28e6fe(0x4cc),'flowName':_0x329888[_0x28e6fe(0x657)][_0x28e6fe(0x86f)]};this[_0x28e6fe(0x621)](_0x59dc63);let _0x37f755=await this[_0x28e6fe(0x262)](_0x46fcf5);_0x37f755&&await this[_0x28e6fe(0x2aa)](_0x46fcf5,_0x37f755);}async[a0_0x591e8d(0x7fd)](_0x1e0c20,_0x176670){const _0x36fb7c=a0_0x591e8d;if(this[_0x36fb7c(0x484)][_0x36fb7c(0x768)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x36fb7c(0x290)),!_0x1e0c20||!_0x176670)return this['logger'][_0x36fb7c(0x62b)](this[_0x36fb7c(0x75c)]+'\x20('+this[_0x36fb7c(0x3ec)][_0x36fb7c(0x490)]+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;await this[_0x36fb7c(0x5e0)](_0x1e0c20,_0x176670,{},!0x0,!0x0);let _0x492a58=_0x176670['goToFlow'];_0x1e0c20=await this[_0x36fb7c(0x34c)](_0x492a58,_0x1e0c20[_0x36fb7c(0x166)],_0x1e0c20[_0x36fb7c(0x546)][_0x36fb7c(0x195)]);let _0x4978dd=await this['NextBlock'](_0x1e0c20);_0x4978dd&&await this['processblock'](_0x1e0c20,_0x4978dd);}async[a0_0x591e8d(0x34c)](_0x54574e,_0x1b3f4c,_0x214c04){const _0x380682=a0_0x591e8d;this[_0x380682(0x484)][_0x380682(0x768)](this['instanceName']+'\x20('+this[_0x380682(0x3ec)]['wuid']+_0x380682(0x69d));try{let _0x350b34=this[_0x380682(0x693)]['flows'][_0x380682(0x2c5)](_0x5eefba=>_0x5eefba[_0x380682(0x812)]===_0x54574e);_0x350b34||this[_0x380682(0x484)][_0x380682(0x62b)](this[_0x380682(0x75c)]+'\x20('+this[_0x380682(0x3ec)][_0x380682(0x490)]+'):\x20Flow\x20\x27'+_0x54574e+_0x380682(0x39e));let _0x2beb37=await this[_0x380682(0x799)][_0x380682(0x4cc)][_0x380682(0x685)]({'where':{'_id':_0x350b34[_0x380682(0x812)]}});if(!_0x2beb37||!_0x2beb37[_0x380682(0x658)]?.[_0x380682(0x243)](this['instance'][_0x380682(0x490)]))throw this[_0x380682(0x484)][_0x380682(0x62b)](this[_0x380682(0x75c)]+'\x20('+this[_0x380682(0x3ec)][_0x380682(0x490)]+'):\x20Flow\x20\x27'+_0x54574e+_0x380682(0x70d)),new m('Flow\x20\x27'+_0x54574e+_0x380682(0x70d));let _0x158565=require(_0x380682(0x1b6))[_0x380682(0x5f3)],_0x706f5b=Date[_0x380682(0x673)](),_0x310c3a=_0x380682(0x67e),_0x2db54c={},_0x5853d4={},_0x542884=this[_0x380682(0x693)][_0x380682(0x26a)]['find'](_0x221cfc=>_0x221cfc[_0x380682(0x812)]===_0x2beb37[_0x380682(0x812)]?.[_0x380682(0x44c)]()),_0x25adb3=_0x542884?.[_0x380682(0x797)]??_0x2beb37[_0x380682(0x797)]??0x0,_0x550e2f=_0x542884?.['readMessages']??_0x2beb37[_0x380682(0x2b9)]??!0x1,_0x319d2b={'flowId':_0x350b34[_0x380682(0x812)],'readMessages':_0x350b34[_0x380682(0x2b9)],..._0x2beb37,'chatLog':null},_0x1b7088={'lastReceivedMessage':_0x2db54c,'lastSendMessage':_0x5853d4,'lastBlockId':_0x310c3a,'lastCondition':!0x0,'realVariables':_0x214c04};_0x319d2b[_0x380682(0x546)]=_0x1b7088,_0x319d2b[_0x380682(0x546)][_0x380682(0x195)]={..._0x214c04},delete _0x319d2b['_id'],_0x319d2b[_0x380682(0x812)]=new _0x158565(),_0x319d2b[_0x380682(0x53e)]=_0x706f5b,_0x319d2b[_0x380682(0x360)]=_0x380682(0x4b7),_0x319d2b[_0x380682(0x166)]=_0x1b3f4c,_0x319d2b[_0x380682(0x797)]=_0x25adb3,_0x319d2b['readMessages']=_0x550e2f;let _0x84222=await this[_0x380682(0x799)][_0x380682(0x8a8)][_0x380682(0x828)](_0x319d2b[_0x380682(0x812)],_0x319d2b,this[_0x380682(0x3ec)][_0x380682(0x490)]);return this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x380682(0x3ec)][_0x380682(0x490)]+_0x380682(0x5ae)),_0x84222?_0x319d2b:null;}catch(_0x599c9c){let _0xbcc2c8=_0x380682(0x236),_0x4377b9=_0x599c9c instanceof Error?_0x599c9c['message']:typeof _0x599c9c==_0x380682(0x808)?JSON['stringify'](_0x599c9c):_0x599c9c,_0x18cbf3=_0xbcc2c8+':\x20'+_0x4377b9;throw this[_0x380682(0x484)][_0x380682(0x62b)](this['instanceName']+'\x20('+this[_0x380682(0x3ec)][_0x380682(0x490)]+_0x380682(0x872)+_0x18cbf3),new m(_0x18cbf3);}}async[a0_0x591e8d(0x69a)](_0xe03d14,_0x40946d){const _0x29a1a4=a0_0x591e8d;let _0x4cebdc,_0x437a59;try{let _0x32add7=_0x40946d['apirequest'];if(!_0x32add7||!_0x32add7[_0x29a1a4(0x18d)]||!_0x32add7[_0x29a1a4(0x3fe)])throw new Error(_0x29a1a4(0x368));let _0x4140aa;(['https://api.openai.com/v1/audio/speech',_0x29a1a4(0x4e5),_0x29a1a4(0x44f)]['some'](_0x46dace=>_0x32add7[_0x29a1a4(0x18d)]['includes'](_0x46dace))||_0x32add7[_0x29a1a4(0x26e)])&&(_0x4140aa=_0x29a1a4(0x7aa));let _0x4b9a6d='\u205f',_0x507da2;try{_0x507da2=JSON[_0x29a1a4(0x3da)](_0x32add7[_0x29a1a4(0x41a)][_0x29a1a4(0x4d0)](new RegExp(_0x4b9a6d,'g'),''));}catch(_0x12175e){throw _0x12175e;}let _0x114a9e={'method':_0x32add7['method'],'url':_0x32add7[_0x29a1a4(0x18d)],'headers':_0x32add7['header']||{},..._0x32add7['method'][_0x29a1a4(0x453)]()!==_0x29a1a4(0x7e1)&&_0x32add7[_0x29a1a4(0x41a)]?{'data':JSON[_0x29a1a4(0x3da)](_0x32add7['bodyString']['replace'](new RegExp(_0x4b9a6d,'g'),''))}:{},..._0x4140aa&&{'responseType':_0x4140aa}},_0x3196eb=await(0x0,Q[_0x29a1a4(0x2ab)])(_0x114a9e),_0x10ab0f=_0x3196eb[_0x29a1a4(0x711)][_0x29a1a4(0x74e)];if(_0x10ab0f&&_0x10ab0f[_0x29a1a4(0x243)](_0x29a1a4(0x612))||typeof _0x3196eb[_0x29a1a4(0x495)]==_0x29a1a4(0x2f2)){if(typeof _0x3196eb[_0x29a1a4(0x495)]==_0x29a1a4(0x2f2)){let _0xe912b7=_0x3196eb[_0x29a1a4(0x495)][_0x29a1a4(0x4d0)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x29a1a4(0x311)]();try{_0x4cebdc=JSON[_0x29a1a4(0x3da)](_0xe912b7);}catch(_0x4e80d7){this[_0x29a1a4(0x484)][_0x29a1a4(0x62b)](_0x29a1a4(0x2a3)+_0x4e80d7['message']),_0x4cebdc={'_apiResponse':_0x3196eb['data']};}}else _0x4cebdc=_0x3196eb[_0x29a1a4(0x495)];let _0x4af09a=_0xe03d14['chatLog'][_0x29a1a4(0x195)],_0x1e4303=this[_0x29a1a4(0x1a5)](_0x4cebdc);return Object[_0x29a1a4(0x5ba)](_0x4af09a,_0x1e4303),_0xe03d14[_0x29a1a4(0x546)][_0x29a1a4(0x195)]=_0x4af09a,_0x437a59={'error':!0x1,'apiResponse':_0x4cebdc},this[_0x29a1a4(0x5e0)](_0xe03d14,_0x40946d,_0x437a59),_0x4cebdc;}if(_0x10ab0f&&(_0x10ab0f['includes']('application/octet-stream')||_0x10ab0f['includes'](_0x29a1a4(0x861))||_0x10ab0f[_0x29a1a4(0x243)](_0x29a1a4(0x6f4))||_0x10ab0f[_0x29a1a4(0x243)](_0x29a1a4(0x519)))){this[_0x29a1a4(0x484)][_0x29a1a4(0x768)](this[_0x29a1a4(0x75c)]+'\x20('+this['instance'][_0x29a1a4(0x490)]+_0x29a1a4(0x580)+_0x10ab0f);let _0x193b20=(0x0,Y['v4'])(),_0x2dbfe1='',_0x5db1f2={'image/jpeg':'.jpg','image/png':_0x29a1a4(0x3ae),'image/gif':'.gif','image/webp':_0x29a1a4(0x20a),'image/svg+xml':_0x29a1a4(0x1bf),'audio/mpeg':'.mp3','audio/ogg':_0x29a1a4(0x753),'audio/wav':_0x29a1a4(0x71e),'video/mp4':_0x29a1a4(0x803),'video/webm':_0x29a1a4(0x425),'video/ogg':_0x29a1a4(0x696),'text/plain':'.txt','application/pdf':_0x29a1a4(0x74b),'application/msword':'.doc','application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x29a1a4(0x766),'application/vnd.ms-excel':_0x29a1a4(0x165),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x29a1a4(0x375),'application/vnd.ms-powerpoint':_0x29a1a4(0x4aa),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x29a1a4(0x7a6)};_0x5db1f2[_0x10ab0f]?(_0x2dbfe1=_0x5db1f2[_0x10ab0f],this[_0x29a1a4(0x484)][_0x29a1a4(0x768)](this[_0x29a1a4(0x75c)]+'\x20('+this[_0x29a1a4(0x3ec)]['wuid']+_0x29a1a4(0x4b9)+_0x2dbfe1)):(_0x2dbfe1=_0x29a1a4(0x873),this[_0x29a1a4(0x484)][_0x29a1a4(0x768)](this[_0x29a1a4(0x75c)]+'\x20('+this['instance']['wuid']+_0x29a1a4(0x6b1)+_0x2dbfe1)),_0x193b20+=_0x2dbfe1,this['logger'][_0x29a1a4(0x768)](this[_0x29a1a4(0x75c)]+'\x20('+this[_0x29a1a4(0x3ec)][_0x29a1a4(0x490)]+_0x29a1a4(0x36f)+_0x193b20);let _0x51b8e1=this[_0x29a1a4(0x285)][_0x29a1a4(0x2f4)](_0x29a1a4(0x371))[_0x29a1a4(0x83c)];if(!_0x51b8e1){let _0xa3c2f4=this[_0x29a1a4(0x285)][_0x29a1a4(0x2f4)](_0x29a1a4(0x887));_0x51b8e1=_0x29a1a4(0x427)+(_0xa3c2f4&&_0xa3c2f4[_0x29a1a4(0x468)][_0x29a1a4(0x179)]('/')[0x4]);}let _0x2ff0ab=Buffer[_0x29a1a4(0x4f4)](_0x3196eb[_0x29a1a4(0x495)]);await this[_0x29a1a4(0x3cf)](_0x2ff0ab,_0x193b20);let _0x9d442d='/media/'+_0x193b20;_0x9d442d=''+_0x51b8e1+_0x9d442d,_0x4cebdc={'fileUrl':_0x9d442d},_0xe03d14[_0x29a1a4(0x546)][_0x29a1a4(0x195)][_0x29a1a4(0x594)]=_0x9d442d;let _0x588ecd=_0xe03d14['chatLog'][_0x29a1a4(0x195)],_0x11f8f4=this[_0x29a1a4(0x1a5)](_0x4cebdc);return Object[_0x29a1a4(0x5ba)](_0x588ecd,_0x11f8f4),_0xe03d14[_0x29a1a4(0x546)][_0x29a1a4(0x195)]=_0x588ecd,_0x437a59={'error':!0x1,'apiResponse':{'fileUrl':_0x9d442d}},this[_0x29a1a4(0x5e0)](_0xe03d14,_0x40946d,_0x437a59),_0x4cebdc;}}catch(_0x41dba6){this['logger']['error'](_0x29a1a4(0x314)+_0x41dba6[_0x29a1a4(0x5b7)]),_0x41dba6['response']&&(_0x4cebdc=_0x41dba6[_0x29a1a4(0x539)][_0x29a1a4(0x495)]);let _0xfd57e9=_0xe03d14[_0x29a1a4(0x546)]['realVariables'],_0x23a6be=this[_0x29a1a4(0x1a5)](_0x4cebdc);return Object[_0x29a1a4(0x5ba)](_0xfd57e9,_0x23a6be),_0xe03d14[_0x29a1a4(0x546)]['realVariables']=_0xfd57e9,_0x437a59={'error':!0x0,'errorLog':_0x41dba6['toString'](),'apiResponse':_0x4cebdc},this[_0x29a1a4(0x5e0)](_0xe03d14,_0x40946d,_0x437a59),{'success':!0x1};}}[a0_0x591e8d(0x5ca)](_0x57d7f0,_0x5793d7){const _0x455670=a0_0x591e8d;let _0x153f4b=_0x12459d=>{const _0x396e71=a0_0x3f1e;let _0x2393d=_0x12459d[_0x396e71(0x4d0)](/[^0-9.,-]/g,'')[_0x396e71(0x4d0)](',','.'),_0x4987fe=parseFloat(_0x2393d);return isNaN(_0x4987fe)?null:_0x4987fe;},_0x30cc36=_0x5793d7[_0x455670(0x23c)],_0x555fe3=_0x5793d7[_0x455670(0x7b1)];typeof _0x30cc36=='string'&&(_0x30cc36=this['replaceVariables'](_0x30cc36,_0x57d7f0['chatLog'][_0x455670(0x195)])??''),typeof _0x555fe3==_0x455670(0x2f2)&&(_0x555fe3=this['replaceVariables'](_0x555fe3,_0x57d7f0['chatLog'][_0x455670(0x195)])??'');let _0x2b69aa=null;if(!_0x5793d7[_0x455670(0x83b)])return null;switch(this[_0x455670(0x484)]['verbose'](this[_0x455670(0x75c)]+'\x20('+this[_0x455670(0x3ec)][_0x455670(0x490)]+_0x455670(0x321)+_0x30cc36),this[_0x455670(0x484)][_0x455670(0x768)](this[_0x455670(0x75c)]+'\x20('+this[_0x455670(0x3ec)][_0x455670(0x490)]+_0x455670(0x5c9)+_0x555fe3),_0x5793d7[_0x455670(0x83b)]){case'+':case'-':case'*':case'/':let _0x2797c4=_0x153f4b(_0x30cc36||'0'),_0x340adc=_0x153f4b(_0x555fe3||'0');if(_0x2797c4===null)return null;switch(_0x5793d7[_0x455670(0x83b)]){case'+':_0x2b69aa=_0x2797c4+(_0x340adc??0x0);break;case'-':_0x2b69aa=_0x2797c4-(_0x340adc??0x0);break;case'*':_0x2b69aa=_0x2797c4*(_0x340adc??0x1);break;case'/':_0x340adc!==0x0&&(_0x2b69aa=_0x2797c4/(_0x340adc??0x1));break;}break;case _0x455670(0x820):case'findAndReplaceRegex':let _0x4a6be2=_0x555fe3,_0x477ac3=_0x5793d7['replaceValue'];if(typeof _0x477ac3==_0x455670(0x2f2)&&(_0x477ac3=this[_0x455670(0x4d2)](_0x477ac3,_0x57d7f0[_0x455670(0x546)][_0x455670(0x195)])??''),_0x4a6be2&&_0x477ac3!==void 0x0){let _0x472026=_0x5793d7[_0x455670(0x83b)]===_0x455670(0x820)?new RegExp(_0x4a6be2[_0x455670(0x4d0)](/[-\/\\^$*+?.()|[\]{}]/g,'\x5c$&'),'g'):new RegExp(_0x4a6be2,'g');_0x2b69aa=_0x30cc36['replace'](_0x472026,_0x477ac3);}else console[_0x455670(0x746)](_0x455670(0x2ef));break;case _0x455670(0x788):_0x2b69aa=_0x555fe3;break;case'extractRegex':let _0x30d86f=_0x30cc36[_0x455670(0x1e2)](new RegExp(_0x555fe3||''));_0x2b69aa=_0x30d86f?_0x30d86f[0x0]:'';break;case _0x455670(0x45d):_0x2b69aa=_0x30cc36[_0x455670(0x340)](0x0,parseInt(_0x555fe3||'0'));break;case _0x455670(0x1b3):let _0x5c7084=parseInt(_0x555fe3||'0');_0x2b69aa=_0x30cc36['slice'](_0x30cc36[_0x455670(0x836)]-_0x5c7084);break;case _0x455670(0x585):let _0x3e62e8=_0x153f4b(_0x30cc36),_0x227875=parseInt(_0x555fe3||'0');_0x227875=Math[_0x455670(0x2da)](_0x227875),_0x3e62e8!==null?_0x2b69aa=_0x3e62e8[_0x455670(0x7e8)](_0x455670(0x28d),{'minimumFractionDigits':_0x227875,'maximumFractionDigits':_0x227875}):(console[_0x455670(0x746)](_0x455670(0x867)+_0x30cc36),_0x2b69aa=null);break;case'toBRL':let _0xb0cb93=_0x153f4b(_0x30cc36);_0xb0cb93!==null?_0x2b69aa=_0xb0cb93[_0x455670(0x7e8)]('pt-BR',{'style':_0x455670(0x48d),'currency':_0x455670(0x442)}):(console[_0x455670(0x746)](_0x455670(0x7ff)+_0x30cc36),_0x2b69aa=null);break;case'upperCase':_0x2b69aa=_0x30cc36[_0x455670(0x453)]();break;case _0x455670(0x70b):_0x2b69aa=_0x30cc36['toLowerCase']();break;case _0x455670(0x444):_0x2b69aa=_0x30cc36[_0x455670(0x179)]('\x20')['map'](_0x55b747=>_0x55b747[_0x455670(0x352)](0x0)[_0x455670(0x453)]()+_0x55b747[_0x455670(0x340)](0x1)[_0x455670(0x1f1)]())[_0x455670(0x241)]('\x20');break;case _0x455670(0x5d6):_0x2b69aa=_0x30cc36['trim']();break;default:_0x2b69aa=_0x30cc36;}return _0x2b69aa!==null?_0x2b69aa[_0x455670(0x44c)]():null;}async[a0_0x591e8d(0x300)](_0x3afd1a,_0x462ccc){const _0x31e840=a0_0x591e8d;try{let _0x1b6d74=_0x3afd1a[_0x31e840(0x29b)]?.[_0x31e840(0x516)](_0x482380=>_0x482380['blockId']===_0x462ccc['_id']?.[_0x31e840(0x44c)]())||[],_0x508ca3=_0x462ccc[_0x31e840(0x459)],_0x12673f=null,_0x4d4cf7=[],_0x5e2267=_0x3afd1a[_0x31e840(0x546)]['realVariables'][_0x508ca3];_0x4d4cf7['push'](_0x31e840(0x794)+_0x5e2267+'\x22');for(let _0x1d3b06 of _0x1b6d74){_0x1d3b06[_0x31e840(0x23c)]=_0x5e2267,_0x12673f=_0x1d3b06['firstValue'];let _0x1ac42e;try{_0x1ac42e=this['applyvaredit'](_0x3afd1a,_0x1d3b06);}catch(_0x10357b){this[_0x31e840(0x484)][_0x31e840(0x62b)]('Erro\x20ao\x20aplicar\x20varedit:\x20'+_0x10357b['message']);continue;}if(_0x1ac42e!==null){let _0x19fcb0=_0x31e840(0x6ba)+_0x1d3b06[_0x31e840(0x83b)]+'\x22',_0x521756=[_0x31e840(0x75e),_0x31e840(0x384),_0x31e840(0x70b),_0x31e840(0x444),'trimmed'];_0x1d3b06['editOperator']===_0x31e840(0x820)||_0x1d3b06['editOperator']===_0x31e840(0x69e)?_0x19fcb0+=_0x31e840(0x6df)+_0x1d3b06['secondValue']+_0x31e840(0x1fc)+_0x1d3b06[_0x31e840(0x160)]+'\x22':!_0x521756[_0x31e840(0x243)](_0x1d3b06[_0x31e840(0x83b)])&&_0x1d3b06[_0x31e840(0x7b1)]!==null&&_0x1d3b06[_0x31e840(0x7b1)]!==void 0x0&&(_0x19fcb0+=_0x31e840(0x5c3)+_0x1d3b06[_0x31e840(0x7b1)]+'\x22'),_0x19fcb0+=_0x31e840(0x3f1)+_0x1ac42e+'.',_0x4d4cf7[_0x31e840(0x57f)](_0x19fcb0);}_0x1ac42e!==null&&(_0x5e2267=_0x1ac42e);}if(_0x3afd1a[_0x31e840(0x546)][_0x31e840(0x195)]&&_0x462ccc['saveVariable']){_0x3afd1a[_0x31e840(0x546)][_0x31e840(0x195)][_0x462ccc['saveVariable']]=_0x5e2267;let _0xd308a0={'variable':_0x462ccc[_0x31e840(0x459)],'oldValue':_0x12673f,'newValue':_0x5e2267,'moreLogs':_0x4d4cf7};try{this['updateConversation'](_0x3afd1a,_0x462ccc,_0xd308a0);}catch(_0x24b12b){this[_0x31e840(0x484)][_0x31e840(0x62b)](_0x31e840(0x81a)+_0x24b12b[_0x31e840(0x5b7)]);}}return _0x508ca3;}catch(_0x135f8b){return this[_0x31e840(0x484)]['error']('Erro\x20inesperado\x20em\x20processvaredits:\x20'+_0x135f8b[_0x31e840(0x5b7)]),null;}}async['processConditions'](_0x5a1944,_0xc8f9ba){const _0x179afe=a0_0x591e8d;try{let _0xc75722=[],_0x34202f=_0x5a1944['conditions'][_0x179afe(0x516)](_0x4900af=>_0x4900af[_0x179afe(0x7d6)]===_0xc8f9ba[_0x179afe(0x812)][_0x179afe(0x44c)]()),_0x43ce62=null,_0x2aa75a=!0x1;for(let _0x5af7a9 of _0x34202f){let _0x35803a=this[_0x179afe(0x7d2)](_0x5a1944,_0x5af7a9);_0xc75722[_0x179afe(0x57f)](_0x179afe(0x3d8)+_0x5af7a9[_0x179afe(0x23c)]+_0x179afe(0x5b2)+_0x5af7a9[_0x179afe(0x4d4)]+_0x179afe(0x2a7)+_0x5af7a9[_0x179afe(0x7b1)]+_0x179afe(0x4f9)+_0x35803a),_0x43ce62===null?_0x43ce62=_0x35803a:_0x5af7a9[_0x179afe(0x68e)]===_0x179afe(0x24d)?(_0x43ce62=_0x43ce62&&_0x35803a,_0x35803a||(_0x2aa75a=!0x0)):_0x5af7a9[_0x179afe(0x68e)]==='or'&&(_0x2aa75a||(_0x43ce62=_0x43ce62||_0x35803a));}_0x43ce62===null&&(_0x43ce62=!0x0);let _0x462aa0={'moreLogs':_0xc75722};_0x5a1944[_0x179afe(0x546)][_0x179afe(0x185)]=_0x43ce62,await this['updateConversation'](_0x5a1944,_0xc8f9ba,_0x462aa0);}catch(_0x117fee){this[_0x179afe(0x484)][_0x179afe(0x62b)](this[_0x179afe(0x75c)]+'\x20('+this['instance'][_0x179afe(0x490)]+_0x179afe(0x21b)+(_0x117fee instanceof Error?_0x117fee[_0x179afe(0x5b7)]:JSON['stringify'](_0x117fee,null,0x2)));}}[a0_0x591e8d(0x7d2)](_0x519c81,_0x25dde6){const _0x1c35fc=a0_0x591e8d;let _0x2655c7=_0x25dde6[_0x1c35fc(0x23c)],_0x559c64=_0x25dde6['secondValue'];typeof _0x2655c7==_0x1c35fc(0x2f2)&&(_0x2655c7=this[_0x1c35fc(0x4d2)](_0x2655c7,_0x519c81[_0x1c35fc(0x546)]['realVariables'])??''),typeof _0x559c64==_0x1c35fc(0x2f2)&&(_0x559c64=this[_0x1c35fc(0x4d2)](_0x559c64,_0x519c81['chatLog']['realVariables'])??'');try{switch(_0x25dde6['expression']){case'equal':return _0x2655c7===_0x559c64;case _0x1c35fc(0x7c4):return _0x2655c7!==_0x559c64;case _0x1c35fc(0x72c):return this['contains'](_0x2655c7,_0x559c64);case'notContains':return!this['contains'](_0x2655c7,_0x559c64);case'greater':return parseFloat(_0x2655c7)>parseFloat(_0x559c64);case _0x1c35fc(0x173):return parseFloat(_0x2655c7)<parseFloat(_0x559c64);case'notEmpty':return _0x2655c7!=='';case _0x1c35fc(0x420):return _0x2655c7==='';case _0x1c35fc(0x257):return new RegExp(_0x559c64)[_0x1c35fc(0x749)](_0x2655c7);case _0x1c35fc(0x64b):return!new RegExp(_0x559c64)['test'](_0x2655c7);default:return!0x1;}}catch(_0x6bc7d4){return this['logger'][_0x1c35fc(0x62b)](_0x1c35fc(0x40f)+_0x6bc7d4),!0x1;}}[a0_0x591e8d(0x72c)](_0x5ce644,_0x1df0b5){const _0x1ca4c7=a0_0x591e8d;if(_0x5ce644===_0x1df0b5&&/^\d+$/[_0x1ca4c7(0x749)](_0x5ce644))return!0x0;if(this[_0x1ca4c7(0x50e)](_0x5ce644)&&/^\d+$/[_0x1ca4c7(0x749)](_0x1df0b5)){let _0x28fb18=_0x5ce644[_0x1ca4c7(0x179)](',')['map'](_0x4fc45d=>parseInt(_0x4fc45d[_0x1ca4c7(0x311)]())),_0x3a956d=parseInt(_0x1df0b5);return _0x28fb18['includes'](_0x3a956d);}return _0x5ce644[_0x1ca4c7(0x243)](_0x1df0b5);}['isListOfNumbers'](_0x2fe1b0){const _0x1db14d=a0_0x591e8d;return/^\d+(,\d+)*$/[_0x1db14d(0x749)](_0x2fe1b0);}['processConditionsTest'](_0x2fdccf){const _0x42d390=a0_0x591e8d;let _0x309bdf=!0x0,_0x10e344=null;for(let _0x11287b of _0x2fdccf){let _0x1a945c=this[_0x42d390(0x273)](_0x11287b);if(_0x10e344==='or'&&_0x1a945c){_0x309bdf=!0x0;break;}if(_0x10e344===_0x42d390(0x24d)&&!_0x1a945c){_0x309bdf=!0x1;break;}_0x10e344=_0x11287b[_0x42d390(0x68e)];}return _0x309bdf;}[a0_0x591e8d(0x273)](_0x11a117){const _0x17f020=a0_0x591e8d;let _0x2eddae=_0x11a117[_0x17f020(0x23c)],_0x2ab685=_0x11a117[_0x17f020(0x7b1)];try{switch(_0x11a117[_0x17f020(0x4d4)]){case'equal':return String(_0x2eddae)===String(_0x2ab685);case _0x17f020(0x7c4):return String(_0x2eddae)!==String(_0x2ab685);case _0x17f020(0x72c):return String(_0x2eddae)[_0x17f020(0x243)](String(_0x2ab685));case'notContains':return!String(_0x2eddae)[_0x17f020(0x243)](String(_0x2ab685));case _0x17f020(0x5d4):return parseFloat(String(_0x2eddae))>parseFloat(String(_0x2ab685));case'less':return parseFloat(String(_0x2eddae))<parseFloat(String(_0x2ab685));case _0x17f020(0x38e):return String(_0x2eddae)!=='';case'empty':return String(_0x2eddae)==='';case _0x17f020(0x257):return new RegExp(String(_0x2ab685))[_0x17f020(0x749)](String(_0x2eddae));case _0x17f020(0x64b):return!new RegExp(String(_0x2ab685))['test'](String(_0x2eddae));default:return!0x1;}}catch(_0x1f6e05){return this[_0x17f020(0x484)][_0x17f020(0x62b)](_0x17f020(0x40f)+_0x1f6e05),!0x1;}}async[a0_0x591e8d(0x611)](_0x2b7472,_0x3adfb5){const _0x77e4e7=a0_0x591e8d;if(this['logger'][_0x77e4e7(0x768)](this[_0x77e4e7(0x75c)]+'\x20('+this['instance'][_0x77e4e7(0x490)]+'):\x20Entrou\x20na\x20funo\x20saveReply'),!_0x2b7472||!_0x3adfb5)return this[_0x77e4e7(0x484)][_0x77e4e7(0x62b)](this[_0x77e4e7(0x75c)]+'\x20('+this['instance'][_0x77e4e7(0x490)]+_0x77e4e7(0x3bb)),null;let _0x475f36=_0x2b7472[_0x77e4e7(0x546)]['lastReceivedMessage'][_0x77e4e7(0x27f)]['id'];this['logger'][_0x77e4e7(0x768)](this['instanceName']+'\x20('+this['instance'][_0x77e4e7(0x490)]+_0x77e4e7(0x445)+_0x475f36);let _0x1639dd={'key':{'id':_0x475f36}},_0x10ed5f=_0x3adfb5['saveVariable'];_0x2b7472[_0x77e4e7(0x546)][_0x77e4e7(0x195)]['_'+_0x10ed5f+_0x77e4e7(0x192)]=null,_0x2b7472[_0x77e4e7(0x546)][_0x77e4e7(0x195)]['_'+_0x10ed5f+_0x77e4e7(0x1d8)]=null,_0x2b7472[_0x77e4e7(0x546)][_0x77e4e7(0x195)]['_'+_0x10ed5f+'.extension']=null,_0x2b7472[_0x77e4e7(0x546)][_0x77e4e7(0x195)]['_'+_0x10ed5f+_0x77e4e7(0x40a)]=_0x2b7472['chatLog'][_0x77e4e7(0x55a)][_0x77e4e7(0x717)];try{let _0x18c0aa=await this[_0x77e4e7(0x4af)](_0x1639dd);this[_0x77e4e7(0x484)]['verbose'](this[_0x77e4e7(0x75c)]+'\x20('+this[_0x77e4e7(0x3ec)][_0x77e4e7(0x490)]+_0x77e4e7(0x645)),_0x2b7472[_0x77e4e7(0x546)]['realVariables']['_'+_0x10ed5f+_0x77e4e7(0x817)]=_0x18c0aa[_0x77e4e7(0x594)],_0x2b7472[_0x77e4e7(0x546)][_0x77e4e7(0x195)]['_'+_0x10ed5f+_0x77e4e7(0x1d8)]=_0x18c0aa['mimetype'];let _0x13e04d=_0x18c0aa['mimetype'][_0x77e4e7(0x1e2)](/\/(\w+)$/),_0x3c1dc6=_0x13e04d?_0x13e04d[0x1]:null;_0x2b7472['chatLog'][_0x77e4e7(0x195)]['_'+_0x10ed5f+'.extension']=_0x3c1dc6,this[_0x77e4e7(0x484)][_0x77e4e7(0x768)](this[_0x77e4e7(0x75c)]+'\x20('+this[_0x77e4e7(0x3ec)][_0x77e4e7(0x490)]+_0x77e4e7(0x470)+_0x10ed5f+'\x27.');}catch(_0x1faf1b){this['logger'][_0x77e4e7(0x62b)](this[_0x77e4e7(0x75c)]+'\x20('+this['instance'][_0x77e4e7(0x490)]+_0x77e4e7(0x678)+_0x1faf1b['message']);}let _0x1797f4=_0x2b7472[_0x77e4e7(0x546)][_0x77e4e7(0x55a)][_0x77e4e7(0x7a9)]||_0x2b7472['chatLog'][_0x77e4e7(0x55a)][_0x77e4e7(0x82c)]||_0x2b7472[_0x77e4e7(0x546)]['lastReceivedMessage'][_0x77e4e7(0x3f6)];try{_0x2b7472[_0x77e4e7(0x546)][_0x77e4e7(0x195)]||(_0x2b7472[_0x77e4e7(0x546)][_0x77e4e7(0x195)]={});let _0x5064b2=_0x2b7472[_0x77e4e7(0x546)][_0x77e4e7(0x195)][_0x10ed5f];_0x2b7472[_0x77e4e7(0x546)]['realVariables'][_0x10ed5f]=_0x1797f4;let _0x56b682={'variable':_0x10ed5f,'oldValue':_0x5064b2,'newValue':_0x1797f4};this[_0x77e4e7(0x5e0)](_0x2b7472,_0x3adfb5,_0x56b682),this[_0x77e4e7(0x484)][_0x77e4e7(0x768)](this[_0x77e4e7(0x75c)]+'\x20('+this[_0x77e4e7(0x3ec)][_0x77e4e7(0x490)]+_0x77e4e7(0x6f5));}catch(_0xc6a0d0){let _0x3a5bfd={'error':!0x0,'errorLog':_0xc6a0d0[_0x77e4e7(0x44c)]()};return this[_0x77e4e7(0x5e0)](_0x2b7472,_0x3adfb5,_0x3a5bfd),this['logger'][_0x77e4e7(0x62b)](this['instanceName']+'\x20('+this['instance'][_0x77e4e7(0x490)]+_0x77e4e7(0x2d0)+(_0xc6a0d0 instanceof Error?_0xc6a0d0[_0x77e4e7(0x5b7)]:JSON[_0x77e4e7(0x62f)](_0xc6a0d0,null,0x2))),null;}}async['stopConversation'](_0x318ce9,_0x55e6e2){const _0x1ac51f=a0_0x591e8d;if(this[_0x1ac51f(0x484)][_0x1ac51f(0x768)](this['instanceName']+'\x20('+this[_0x1ac51f(0x3ec)][_0x1ac51f(0x490)]+'):\x20Entrou\x20na\x20funo\x20stop'),!_0x318ce9||!_0x55e6e2)return this[_0x1ac51f(0x484)][_0x1ac51f(0x62b)](this[_0x1ac51f(0x75c)]+'\x20('+this[_0x1ac51f(0x3ec)]['wuid']+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;let _0x2f9e90=Date[_0x1ac51f(0x673)](),_0x39fb43=parseInt(_0x55e6e2['stopMinutes'],0xa);if(isNaN(_0x39fb43))return this[_0x1ac51f(0x484)][_0x1ac51f(0x62b)](this['instanceName']+'\x20('+this[_0x1ac51f(0x3ec)][_0x1ac51f(0x490)]+_0x1ac51f(0x3a9)),null;let _0x53e113={'newStoppedUntil':_0x2f9e90+_0x39fb43*0x3c*0x3e8};return await this['updateConversation'](_0x318ce9,_0x55e6e2,_0x53e113,!0x0),null;}async[a0_0x591e8d(0x432)](_0x5806c8,_0xb45928){const _0x5a28ce=a0_0x591e8d;try{switch(_0xb45928[_0x5a28ce(0x301)][_0x5a28ce(0x688)]){case'sendText':await this[_0x5a28ce(0x529)](_0x5806c8,_0xb45928);break;case _0x5a28ce(0x81c):await this[_0x5a28ce(0x4bf)](_0x5806c8,_0xb45928);break;case'sendLocation':await this[_0x5a28ce(0x847)](_0x5806c8,_0xb45928);break;case'sendAudio':await this[_0x5a28ce(0x700)](_0x5806c8,_0xb45928);break;case _0x5a28ce(0x4f0):await this[_0x5a28ce(0x1e3)](_0x5806c8,_0xb45928);break;case _0x5a28ce(0x86b):await this[_0x5a28ce(0x6b8)](_0x5806c8,_0xb45928);break;case _0x5a28ce(0x4c0):await this[_0x5a28ce(0x6b8)](_0x5806c8,_0xb45928);break;case _0x5a28ce(0x545):await this['uazapiDeleteMessage'](_0x5806c8,_0xb45928);break;default:this[_0x5a28ce(0x484)][_0x5a28ce(0x62b)](this[_0x5a28ce(0x75c)]+'\x20('+this[_0x5a28ce(0x3ec)][_0x5a28ce(0x490)]+'):\x20Comando\x20desconhecido:\x20'+_0xb45928['uazapi']['command']);}}catch(_0x499a9c){this[_0x5a28ce(0x484)]['error'](this[_0x5a28ce(0x75c)]+'\x20('+this[_0x5a28ce(0x3ec)]['wuid']+'):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20'+(_0x499a9c instanceof Error?_0x499a9c[_0x5a28ce(0x5b7)]:JSON[_0x5a28ce(0x62f)](_0x499a9c,null,0x2)));}}async['updateConversation'](_0x223452,_0x476124,_0x890b8d,_0x26eddd=!0x1,_0x38224a=!0x1){const _0x171533=a0_0x591e8d;_0x223452[_0x171533(0x546)][_0x171533(0x1a6)]||(_0x223452['chatLog'][_0x171533(0x1a6)]=[]);let _0x16ae54=(_0x223452[_0x171533(0x546)][_0x171533(0x1a6)]?.[_0x171533(0x836)]??0x0)+0x1,_0x3d6261=_0x223452['chatLog'][_0x171533(0x1a6)][_0x171533(0x516)](_0x39e581=>String(_0x39e581[_0x171533(0x7d6)])===String(_0x476124['_id']))[_0x171533(0x836)]+0x1,_0x2feb65=_0x890b8d?.[_0x171533(0x44e)]??Date['now'](),_0x1a1617=_0x890b8d?.[_0x171533(0x62b)]?_0x890b8d[_0x171533(0x438)]??_0x890b8d[_0x171533(0x62b)][_0x171533(0x44c)]():void 0x0,_0x552a1d={'onTime':_0x2feb65,'blockId':_0x476124[_0x171533(0x812)],'order':_0x16ae54,'activatedCount':_0x3d6261,'error':_0x890b8d?.[_0x171533(0x62b)]??!0x1,'messageId':_0x890b8d?.[_0x171533(0x58e)],'apiResponse':_0x890b8d?.[_0x171533(0x47a)],'apiResponseString':_0x890b8d?.['apiResponse']?JSON[_0x171533(0x62f)](_0x890b8d?.[_0x171533(0x47a)]):void 0x0,'variable':_0x890b8d?.[_0x171533(0x7a4)],'oldValue':_0x890b8d?.[_0x171533(0x650)],'newValue':_0x890b8d?.['newValue'],'newStoppedUntil':_0x890b8d?.[_0x171533(0x219)],'moreLogs':_0x890b8d?.[_0x171533(0x6b5)],'errorLog':_0x1a1617};if(_0x890b8d[_0x171533(0x6b5)]&&_0x890b8d[_0x171533(0x6b5)][_0x171533(0x836)]>0x0){let _0x5a8536=_0x890b8d[_0x171533(0x6b5)]['map'](_0x3a765e=>this[_0x171533(0x2a2)](_0x3a765e,_0x223452[_0x171533(0x546)][_0x171533(0x195)]));_0x552a1d[_0x171533(0x6b5)]=_0x5a8536;}if(_0x223452[_0x171533(0x546)][_0x171533(0x195)]||(_0x223452[_0x171533(0x546)][_0x171533(0x195)]={}),_0x223452[_0x171533(0x546)]['realVariables'][_0x171533(0x60a)]=String(_0x3d6261),_0x223452[_0x171533(0x546)][_0x171533(0x195)][_0x171533(0x783)]=String(_0x890b8d[_0x171533(0x62b)]??!0x1),_0x223452['chatLog'][_0x171533(0x1a6)]['push'](_0x552a1d),_0x223452[_0x171533(0x546)][_0x171533(0x195)][_0x171533(0x3ba)]&&_0x223452['chatLog']['realVariables']['telefone']!==_0x223452[_0x171533(0x166)]){let _0x2482fb=(await this['whatsappNumber']({'numbers':[_0x223452[_0x171533(0x546)][_0x171533(0x195)]['telefone']]}))[0x0][_0x171533(0x833)];_0x223452[_0x171533(0x546)][_0x171533(0x195)][_0x171533(0x3ba)]=_0x2482fb,_0x223452[_0x171533(0x166)]=_0x2482fb;try{let _0x47273d={'_id':{'$ne':_0x223452[_0x171533(0x812)]},'remoteJid':_0x2482fb,'status':_0x171533(0x4b7)},_0x3a1a1a={'status':'closed'};await this[_0x171533(0x799)][_0x171533(0x8a8)][_0x171533(0x430)](_0x47273d,_0x3a1a1a,this[_0x171533(0x3ec)][_0x171533(0x490)]),this[_0x171533(0x484)]['verbose'](this['instanceName']+'\x20('+this[_0x171533(0x3ec)][_0x171533(0x490)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.');}catch(_0x1bdfb4){this['logger'][_0x171533(0x62b)](this[_0x171533(0x75c)]+'\x20('+this[_0x171533(0x3ec)][_0x171533(0x490)]+_0x171533(0x422)+_0x1bdfb4[_0x171533(0x5b7)]);}try{let _0x173f3c=_0x223452['chatLog'][_0x171533(0x195)],_0x20f0a3=await this[_0x171533(0x71f)](_0x2482fb),_0x329f4d={..._0x173f3c,..._0x20f0a3,'_remoteJid':_0x2482fb};_0x223452[_0x171533(0x546)][_0x171533(0x195)]=_0x329f4d;}catch(_0x2d3281){this[_0x171533(0x484)][_0x171533(0x62b)](this[_0x171533(0x75c)]+'\x20('+this[_0x171533(0x3ec)][_0x171533(0x490)]+_0x171533(0x7cd)+_0x2d3281[_0x171533(0x5b7)]);}}_0x223452['chatLog']['lastBlockId']=_0x476124[_0x171533(0x812)][_0x171533(0x44c)](),_0x223452[_0x171533(0x546)][_0x171533(0x74a)]&&(_0x223452[_0x171533(0x546)][_0x171533(0x74a)]=_0x223452[_0x171533(0x546)][_0x171533(0x74a)]),_0x223452[_0x171533(0x546)][_0x171533(0x55a)]&&(_0x223452['chatLog']['lastReceivedMessage']=_0x223452[_0x171533(0x546)][_0x171533(0x55a)]),_0x223452[_0x171533(0x546)][_0x171533(0x185)]&&(_0x223452[_0x171533(0x546)]['lastCondition']=_0x223452[_0x171533(0x546)]['lastCondition']),_0x38224a&&(_0x223452['status']=_0x171533(0x764)),_0x26eddd?this['saveConversationToDatabase'](_0x223452):this['goNextblock'](_0x223452,_0x476124);}[a0_0x591e8d(0x2a2)](_0x1b15a2,_0x2d0f88){const _0x381da2=a0_0x591e8d;return _0x1b15a2[_0x381da2(0x4d0)](/\{\{([^}]+)\}\}/g,(_0x48f531,_0x105ee5)=>_0x2d0f88[_0x105ee5]?'{{'+_0x105ee5+_0x381da2(0x591)+_0x2d0f88[_0x105ee5]+'\x22':'{{'+_0x105ee5+_0x381da2(0x56e));}async[a0_0x591e8d(0x739)](_0x10ae6c){const _0x34e2b9=a0_0x591e8d;try{let _0x3c3553=Object[_0x34e2b9(0x852)](_0x10ae6c[_0x34e2b9(0x546)][_0x34e2b9(0x195)])[_0x34e2b9(0x276)](([_0x3ae4e5,_0x152364])=>({'name':_0x3ae4e5,'value':_0x152364})),_0x3e71e6={'status':_0x10ae6c[_0x34e2b9(0x360)],'remoteJid':_0x10ae6c['remoteJid'],'blocks':_0x10ae6c[_0x34e2b9(0x308)],'waitingMenu_id':_0x10ae6c[_0x34e2b9(0x3db)],'waitingMenu_text':_0x10ae6c['waitingMenu_text'],'waitingMenu_replyOptions':_0x10ae6c[_0x34e2b9(0x462)],'chatLog':{'lastBlockId':_0x10ae6c[_0x34e2b9(0x546)]['lastBlockId'],'lastSendMessage':_0x10ae6c[_0x34e2b9(0x546)][_0x34e2b9(0x74a)],'lastReceivedMessage':_0x10ae6c['chatLog'][_0x34e2b9(0x55a)],'lastCondition':_0x10ae6c[_0x34e2b9(0x546)]['lastCondition'],'chatVariables':_0x3c3553,'realVariables':_0x10ae6c['chatLog'][_0x34e2b9(0x195)],'blockLogs':_0x10ae6c[_0x34e2b9(0x546)][_0x34e2b9(0x1a6)]}},_0x16ca84=await this[_0x34e2b9(0x799)][_0x34e2b9(0x8a8)][_0x34e2b9(0x828)](_0x10ae6c[_0x34e2b9(0x812)],_0x3e71e6,this[_0x34e2b9(0x3ec)][_0x34e2b9(0x490)]);if(_0x16ca84){this[_0x34e2b9(0x484)]['verbose'](this[_0x34e2b9(0x75c)]+'\x20('+this[_0x34e2b9(0x3ec)][_0x34e2b9(0x490)]+'):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20'+_0x16ca84[_0x34e2b9(0x812)]);try{let _0xa47b0d=[_0x34e2b9(0x695),_0x34e2b9(0x8a4),'email',_0x34e2b9(0x182),_0x34e2b9(0x360),'notas','responsavelid',_0x34e2b9(0x82d),_0x34e2b9(0x325),_0x34e2b9(0x603)];if(!this[_0x34e2b9(0x693)]&&(await this[_0x34e2b9(0x689)](),!this['AutomateSystem']))throw new Error(_0x34e2b9(0x36b));let _0x39a217=this['AutomateSystem']?.['customFields'][_0x34e2b9(0x276)](_0x275911=>_0x275911[_0x34e2b9(0x1f8)]),_0x4dc322={};Object[_0x34e2b9(0x852)](_0x10ae6c[_0x34e2b9(0x546)][_0x34e2b9(0x195)])[_0x34e2b9(0x5ce)](([_0x44894c,_0x29c636])=>{const _0x16389c=_0x34e2b9;_0xa47b0d[_0x16389c(0x243)](_0x44894c)&&(_0x44894c===_0x16389c(0x82d)&&typeof _0x29c636=='string'?_0x4dc322[_0x44894c]=_0x29c636[_0x16389c(0x179)](',')[_0x16389c(0x276)](_0x49499e=>_0x49499e[_0x16389c(0x311)]())['filter'](_0x409d2c=>_0x409d2c!==''):_0x44894c===_0x16389c(0x325)&&typeof _0x29c636==_0x16389c(0x2f2)?_0x4dc322[_0x44894c]=_0x29c636[_0x16389c(0x179)](',')[_0x16389c(0x276)](_0x230a88=>_0x230a88[_0x16389c(0x311)]())['filter'](_0x56c09c=>_0x56c09c!==''):_0x4dc322[_0x44894c]=_0x29c636);});let _0x4a14cb=_0x10ae6c['chatLog']['blockLogs'][_0x10ae6c[_0x34e2b9(0x546)][_0x34e2b9(0x1a6)][_0x34e2b9(0x836)]-0x1];if(_0x4a14cb){let _0x3e531c=_0x4a14cb[_0x34e2b9(0x219)];_0x3e531c!==void 0x0&&(_0x4dc322[_0x34e2b9(0x1d0)]=_0x3e531c[_0x34e2b9(0x44c)]());}let _0x2e03f1=_0x3c3553[_0x34e2b9(0x516)](_0x413538=>_0x39a217['includes'](_0x413538[_0x34e2b9(0x1f8)]));this[_0x34e2b9(0x484)][_0x34e2b9(0x768)](this[_0x34e2b9(0x75c)]+'\x20('+this[_0x34e2b9(0x3ec)][_0x34e2b9(0x490)]+_0x34e2b9(0x2d6)),this[_0x34e2b9(0x484)][_0x34e2b9(0x768)](_0x4dc322),this['logger'][_0x34e2b9(0x768)](this[_0x34e2b9(0x75c)]+'\x20('+this[_0x34e2b9(0x3ec)][_0x34e2b9(0x490)]+_0x34e2b9(0x18f)),this[_0x34e2b9(0x484)][_0x34e2b9(0x768)](_0x2e03f1);let _0x104976=_0x2e03f1['map'](_0xce0347=>{const _0x578d3b=_0x34e2b9;let _0x307de4=this[_0x578d3b(0x693)]?.['customFields'][_0x578d3b(0x2c5)](_0x1c020d=>_0x1c020d[_0x578d3b(0x1f8)]===_0xce0347[_0x578d3b(0x1f8)]);if(!_0x307de4)throw new Error('Campo\x20personalizado\x20no\x20encontrado\x20para\x20o\x20nome\x20'+_0xce0347[_0x578d3b(0x1f8)]);return{'_id':_0x307de4[_0x578d3b(0x812)],'value':_0xce0347[_0x578d3b(0x30e)]};});this[_0x34e2b9(0x484)][_0x34e2b9(0x768)](this[_0x34e2b9(0x75c)]+'\x20('+this[_0x34e2b9(0x3ec)][_0x34e2b9(0x490)]+_0x34e2b9(0x2eb)),this['logger'][_0x34e2b9(0x768)](_0x104976),await this['saveChatVariables'](_0x10ae6c[_0x34e2b9(0x166)],_0x4dc322,_0x104976);}catch(_0x17dddd){this[_0x34e2b9(0x484)][_0x34e2b9(0x62b)](this[_0x34e2b9(0x75c)]+'\x20('+this[_0x34e2b9(0x3ec)]['wuid']+'):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20'+(_0x17dddd instanceof Error?_0x17dddd[_0x34e2b9(0x5b7)]:JSON['stringify'](_0x17dddd,null,0x2)));}}else this['logger'][_0x34e2b9(0x62b)](this[_0x34e2b9(0x75c)]+'\x20('+this['instance']['wuid']+'):\x20A\x20atualizao\x20no\x20BD\x20da\x20conversa\x20no\x20foi\x20bem\x20sucedida');}catch(_0x4b5d73){this['logger'][_0x34e2b9(0x62b)](this[_0x34e2b9(0x75c)]+'\x20('+this['instance'][_0x34e2b9(0x490)]+_0x34e2b9(0x6fb)+(_0x4b5d73 instanceof Error?_0x4b5d73['message']:JSON[_0x34e2b9(0x62f)](_0x4b5d73,null,0x2)));}}async[a0_0x591e8d(0x704)](_0x76b6dc,_0x119e92,_0x49e1d7){const _0x1d7c59=a0_0x591e8d;try{let _0x1ce551={'leadInfo.leadnome':_0x119e92[_0x1d7c59(0x695)],'leadInfo.nomecompleto':_0x119e92[_0x1d7c59(0x8a4)],'leadInfo.email':_0x119e92[_0x1d7c59(0x60f)],'leadInfo.cpf':_0x119e92[_0x1d7c59(0x182)],'leadInfo.status':_0x119e92[_0x1d7c59(0x360)],'leadInfo.notas':_0x119e92[_0x1d7c59(0x7df)],'leadInfo.responsavelid':_0x119e92['responsavelid'],'leadInfo.tags':_0x119e92[_0x1d7c59(0x82d)],'leadInfo.etiquetas':_0x119e92['etiquetas'],'leadInfo.customFields':_0x49e1d7,'leadInfo.atendimentoAberto':_0x119e92[_0x1d7c59(0x603)]},_0x262634=await this[_0x1d7c59(0x799)]['chat'][_0x1d7c59(0x685)]({'where':{'_id':_0x76b6dc}},this[_0x1d7c59(0x3ec)]['wuid']);if(!_0x262634)return _0x1d7c59(0x4c4);let _0x286541=new Set(_0x262634['leadInfo'][_0x1d7c59(0x325)]||[]),_0x250863=new Set(_0x119e92['etiquetas']||[]),_0x59a08f=await this[_0x1d7c59(0x799)][_0x1d7c59(0x835)]['find']({'where':{}},this[_0x1d7c59(0x3ec)]['wuid']),_0x694329=new Set(_0x59a08f[_0x1d7c59(0x276)](_0x3c2917=>_0x3c2917[_0x1d7c59(0x812)])),_0x31210c=[..._0x250863][_0x1d7c59(0x516)](_0x3187d3=>!_0x286541[_0x1d7c59(0x1ea)](_0x3187d3)&&_0x694329[_0x1d7c59(0x1ea)](_0x3187d3)),_0x505bfd=[..._0x286541][_0x1d7c59(0x516)](_0x2e7fcf=>!_0x250863['has'](_0x2e7fcf));for(let _0x67dace of _0x31210c)await this['AddChatLabel'](_0x67dace,_0x262634[_0x1d7c59(0x812)]),_0x286541['add'](_0x67dace);for(let _0x3631f0 of _0x505bfd)await this[_0x1d7c59(0x43c)](_0x3631f0,_0x262634[_0x1d7c59(0x812)]),_0x286541['delete'](_0x3631f0);if(_0x1d7c59(0x1d0)in _0x119e92){let _0x147ca5=_0x119e92[_0x1d7c59(0x1d0)];_0x1ce551[_0x1d7c59(0x40e)]=_0x147ca5?Number(_0x147ca5):null;}if('atendimentoAberto'in _0x119e92){let _0x31e798=_0x119e92['atendimentoAberto'][_0x1d7c59(0x1f1)]();_0x1ce551[_0x1d7c59(0x4e7)]=_0x31e798===_0x1d7c59(0x5a0)||_0x31e798==='1'||_0x31e798===_0x1d7c59(0x3b9)||_0x31e798===_0x1d7c59(0x24e);}let _0x4f3208=await this['repository']['chat'][_0x1d7c59(0x828)]({'where':{'_id':_0x76b6dc}},_0x1ce551,this[_0x1d7c59(0x3ec)][_0x1d7c59(0x490)]);_0x4f3208?(this[_0x1d7c59(0x484)][_0x1d7c59(0x768)](this[_0x1d7c59(0x75c)]+'\x20('+this[_0x1d7c59(0x3ec)][_0x1d7c59(0x490)]+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20'+_0x4f3208[_0x1d7c59(0x812)]),U(this[_0x1d7c59(0x75c)],_0x1d7c59(0x672),{'chat':_0x4f3208})):this[_0x1d7c59(0x484)]['error'](this[_0x1d7c59(0x75c)]+'\x20('+this[_0x1d7c59(0x3ec)][_0x1d7c59(0x490)]+_0x1d7c59(0x636));}catch(_0xf0efff){this[_0x1d7c59(0x484)][_0x1d7c59(0x62b)](this[_0x1d7c59(0x75c)]+'\x20('+this[_0x1d7c59(0x3ec)][_0x1d7c59(0x490)]+_0x1d7c59(0x699)+(_0xf0efff instanceof Error?_0xf0efff[_0x1d7c59(0x5b7)]:JSON['stringify'](_0xf0efff,null,0x2)));}}async['updateStopChat'](_0x1dfb70,_0x35e1d6){const _0x28aac6=a0_0x591e8d;this[_0x28aac6(0x484)][_0x28aac6(0x768)](this[_0x28aac6(0x75c)]+'\x20('+this['instance'][_0x28aac6(0x490)]+'):\x20atualizao\x20chat:\x20'+_0x35e1d6);try{let _0x32aceb=await this[_0x28aac6(0x799)][_0x28aac6(0x4b2)][_0x28aac6(0x828)]({'where':{'_id':_0x1dfb70[_0x28aac6(0x166)]}},{'leadInfo.desativadoFluxoAte':_0x35e1d6},this[_0x28aac6(0x3ec)]['wuid']);this[_0x28aac6(0x484)][_0x28aac6(0x768)](this[_0x28aac6(0x75c)]+'\x20('+this[_0x28aac6(0x3ec)]['wuid']+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20'+_0x1dfb70['_id']),this['logger'][_0x28aac6(0x768)](this[_0x28aac6(0x75c)]+'\x20('+this[_0x28aac6(0x3ec)][_0x28aac6(0x490)]+'):\x20atualizao\x20chat:\x20'+JSON['stringify'](_0x32aceb,null,0x2)),_0x32aceb&&U(this[_0x28aac6(0x75c)],_0x28aac6(0x672),{'chat':_0x32aceb});}catch(_0xf38b0b){this[_0x28aac6(0x484)][_0x28aac6(0x62b)](this[_0x28aac6(0x75c)]+'\x20('+this[_0x28aac6(0x3ec)][_0x28aac6(0x490)]+_0x28aac6(0x45f)+(_0xf38b0b instanceof Error?_0xf38b0b[_0x28aac6(0x5b7)]:JSON[_0x28aac6(0x62f)](_0xf38b0b,null,0x2)));}}async[a0_0x591e8d(0x60c)](_0xe8043a){const _0x1c1daa=a0_0x591e8d;try{this['logger'][_0x1c1daa(0x768)](this[_0x1c1daa(0x75c)]+'\x20('+this[_0x1c1daa(0x3ec)][_0x1c1daa(0x490)]+_0x1c1daa(0x22f));let _0x416efc=_0xe8043a[_0x1c1daa(0x4d0)](/\D/g,''),_0x2f0a12=this[_0x1c1daa(0x693)][_0x1c1daa(0x26a)][_0x1c1daa(0x2c5)](_0x1391f3=>_0x1391f3[_0x1c1daa(0x578)]===_0x416efc);if(_0x2f0a12||(this[_0x1c1daa(0x484)][_0x1c1daa(0x768)](this[_0x1c1daa(0x75c)]+'\x20('+this[_0x1c1daa(0x3ec)][_0x1c1daa(0x490)]+_0x1c1daa(0x7ad)),_0x2f0a12=this[_0x1c1daa(0x693)]['flows']['find'](_0x181974=>_0x181974[_0x1c1daa(0x2ab)]===!0x0)),!_0x2f0a12)return this[_0x1c1daa(0x484)][_0x1c1daa(0x768)](this[_0x1c1daa(0x75c)]+'\x20('+this[_0x1c1daa(0x3ec)][_0x1c1daa(0x490)]+'):\x20No\x20achou\x20nenhum\x20flow'),null;let _0x33c2c7=await this[_0x1c1daa(0x799)][_0x1c1daa(0x4cc)]['findOne']({'where':{'_id':_0x2f0a12['_id']}});if(!_0x33c2c7||!_0x33c2c7[_0x1c1daa(0x658)]?.[_0x1c1daa(0x243)](this['instance'][_0x1c1daa(0x490)]))throw this[_0x1c1daa(0x484)][_0x1c1daa(0x62b)](this[_0x1c1daa(0x75c)]+'\x20('+this[_0x1c1daa(0x3ec)]['wuid']+_0x1c1daa(0x159)+_0x33c2c7[_0x1c1daa(0x812)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x1c1daa(0x6ab)+_0x33c2c7[_0x1c1daa(0x812)]+_0x1c1daa(0x70d));return _0x33c2c7;}catch(_0x5411f5){return this[_0x1c1daa(0x484)][_0x1c1daa(0x62b)](this[_0x1c1daa(0x75c)]+'\x20('+this[_0x1c1daa(0x3ec)]['wuid']+'):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20'+(_0x5411f5 instanceof Error?_0x5411f5['message']:JSON[_0x1c1daa(0x62f)](_0x5411f5,null,0x2))),null;}}async[a0_0x591e8d(0x25b)](_0x5a3c9a,_0x42e01c){const _0x3b3899=a0_0x591e8d;try{let _0x201894=!!_0x42e01c[_0x3b3899(0x3f6)],_0x58fb48=_0x42e01c[_0x3b3899(0x46d)],_0xfed407=null;if(this[_0x3b3899(0x484)][_0x3b3899(0x768)](this[_0x3b3899(0x75c)]+'\x20('+this[_0x3b3899(0x3ec)][_0x3b3899(0x490)]+_0x3b3899(0x615)+_0x201894+'\x20quoted:\x20'+_0x58fb48),_0x201894){this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x3b3899(0x3ec)]['wuid']+_0x3b3899(0x74c));let _0x5a18f6={'where':{'remoteJid':_0x5a3c9a,'waitingMenu_id':_0x58fb48}};if(_0xfed407=await this[_0x3b3899(0x799)]['flowConversation'][_0x3b3899(0x685)](_0x5a18f6,this[_0x3b3899(0x3ec)][_0x3b3899(0x490)]),!_0xfed407)return this['logger'][_0x3b3899(0x768)](this[_0x3b3899(0x75c)]+'\x20('+this[_0x3b3899(0x3ec)]['wuid']+_0x3b3899(0x583)),null;let _0x1b43b3=Date['now'](),_0x43cf08=_0xfed407?.['minutesToClose']||0x0,_0x1de3fb=_0x1b43b3-_0x43cf08*0x3c*0x3e8;if(_0xfed407[_0x3b3899(0x53e)]<_0x1de3fb){this[_0x3b3899(0x484)]['verbose'](this[_0x3b3899(0x75c)]+'\x20('+this[_0x3b3899(0x3ec)][_0x3b3899(0x490)]+_0x3b3899(0x19e));let _0x5f3f44={'number':_0xfed407[_0x3b3899(0x166)],'options':{'delay':0x0},'textMessage':{'text':_0xfed407['waitingMenu_ExpiredMessage']}};await this[_0x3b3899(0x4fb)](_0x5f3f44);let _0x571c44={'status':_0x3b3899(0x764),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this['repository']['flowConversation'][_0x3b3899(0x828)](_0xfed407['_id'],_0x571c44,this[_0x3b3899(0x3ec)][_0x3b3899(0x490)]),null;}return _0xfed407['lastInteraction']=Date[_0x3b3899(0x673)](),_0xfed407[_0x3b3899(0x546)][_0x3b3899(0x55a)]=_0x42e01c,_0xfed407;}else{this[_0x3b3899(0x484)][_0x3b3899(0x768)](this[_0x3b3899(0x75c)]+'\x20('+this['instance'][_0x3b3899(0x490)]+_0x3b3899(0x872)+this[_0x3b3899(0x3ec)][_0x3b3899(0x490)]+'\x20no\x20\x20um\x20voto\x20enviado\x20pelo\x20usurio'),this['logger'][_0x3b3899(0x768)](this['instanceName']+'\x20('+this[_0x3b3899(0x3ec)]['wuid']+_0x3b3899(0x5d3));let _0xcc4efb={'where':{'remoteJid':_0x5a3c9a,'status':_0x3b3899(0x4b7)}};if(_0xfed407=await this[_0x3b3899(0x799)][_0x3b3899(0x8a8)][_0x3b3899(0x685)](_0xcc4efb,this[_0x3b3899(0x3ec)]['wuid']),!_0xfed407){let _0x3b44e7=await this[_0x3b3899(0x60c)](_0x5a3c9a);if(_0x3b44e7&&(_0xfed407=await this['createNewConversation'](_0x3b44e7,_0x42e01c[_0x3b3899(0x27f)],_0x42e01c)),!_0xfed407)return null;}let _0xdb28dc=Date['now'](),_0x1bf9ad=_0xfed407?.[_0x3b3899(0x797)]||0x0,_0x250619=_0xdb28dc-_0x1bf9ad*0x3c*0x3e8;if(this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x3b3899(0x3ec)][_0x3b3899(0x490)]+_0x3b3899(0x701)+_0xdb28dc+_0x3b3899(0x58d)+_0x1bf9ad+_0x3b3899(0x789)+_0x250619),this[_0x3b3899(0x484)][_0x3b3899(0x768)](this['instanceName']+'\x20('+this['instance'][_0x3b3899(0x490)]+_0x3b3899(0x1db)),this[_0x3b3899(0x484)][_0x3b3899(0x768)](this[_0x3b3899(0x75c)]+'\x20('+this['instance'][_0x3b3899(0x490)]+_0x3b3899(0x33b)+_0xfed407['lastInteraction']),this['logger']['verbose'](this[_0x3b3899(0x75c)]+'\x20('+this[_0x3b3899(0x3ec)]['wuid']+'):\x20expirationTime:\x20'+_0x250619),_0xfed407[_0x3b3899(0x53e)]<_0x250619){this[_0x3b3899(0x484)][_0x3b3899(0x768)](this[_0x3b3899(0x75c)]+'\x20('+this[_0x3b3899(0x3ec)][_0x3b3899(0x490)]+_0x3b3899(0x675));let _0x52376c=await this[_0x3b3899(0x60c)](_0x5a3c9a);if(_0x52376c===null)return null;_0xfed407&&await this[_0x3b3899(0x799)][_0x3b3899(0x8a8)][_0x3b3899(0x828)](_0xfed407['_id'],{'status':_0x3b3899(0x764)},this[_0x3b3899(0x3ec)]['wuid']),_0xfed407=await this[_0x3b3899(0x5bb)](_0x52376c,_0x42e01c[_0x3b3899(0x27f)],_0x42e01c);}return _0xfed407[_0x3b3899(0x53e)]=_0xdb28dc,_0xfed407[_0x3b3899(0x546)][_0x3b3899(0x55a)]=_0x42e01c,_0xfed407;}}catch(_0x2cae20){return this['logger']['error'](this[_0x3b3899(0x75c)]+'\x20('+this[_0x3b3899(0x3ec)]['wuid']+_0x3b3899(0x3be)+(_0x2cae20 instanceof Error?_0x2cae20[_0x3b3899(0x5b7)]:JSON[_0x3b3899(0x62f)](_0x2cae20,null,0x2))),null;}}async[a0_0x591e8d(0x5bb)](_0x3b2d70,_0x5d7956,_0x39efe0){const _0x24a7aa=a0_0x591e8d;this[_0x24a7aa(0x484)][_0x24a7aa(0x768)](this[_0x24a7aa(0x75c)]+'\x20('+this[_0x24a7aa(0x3ec)][_0x24a7aa(0x490)]+_0x24a7aa(0x8ab));try{let _0x410718=require(_0x24a7aa(0x1b6))[_0x24a7aa(0x5f3)],_0xd5fb1d=Date[_0x24a7aa(0x673)](),_0x2c8483=_0x24a7aa(0x67e),_0x4c9a93=_0x5d7956[_0x24a7aa(0x7f7)]?null:_0x39efe0,_0x641cd4=_0x5d7956['fromMe']?_0x39efe0:null,_0x575699=_0x5d7956[_0x24a7aa(0x166)],_0x39fadc=this[_0x24a7aa(0x693)][_0x24a7aa(0x26a)]['find'](_0x4d6872=>_0x4d6872['_id']===_0x3b2d70[_0x24a7aa(0x812)]?.[_0x24a7aa(0x44c)]()),_0x87ba69=_0x39fadc?.[_0x24a7aa(0x797)]??_0x3b2d70[_0x24a7aa(0x797)]??0x0,_0x3f8466=_0x39fadc?.[_0x24a7aa(0x2b9)]??_0x3b2d70['readMessages']??!0x1;await this[_0x24a7aa(0x2f0)](_0x575699);let _0x550195={'flowId':_0x3b2d70[_0x24a7aa(0x812)],..._0x3b2d70,'chatLog':null},_0x285c68=await this[_0x24a7aa(0x892)](_0x550195['variables']),_0x55ffe5=await this['getVariablesChat'](_0x575699),_0x12d0d3={..._0x285c68,..._0x55ffe5,'_remoteJid':_0x575699},_0x32ceb5={'lastReceivedMessage':_0x4c9a93,'lastSendMessage':_0x641cd4,'lastBlockId':_0x2c8483,'lastCondition':!0x0,'realVariables':_0x12d0d3};_0x550195[_0x24a7aa(0x546)]=_0x32ceb5,delete _0x550195[_0x24a7aa(0x812)],_0x550195[_0x24a7aa(0x812)]=new _0x410718(),_0x550195[_0x24a7aa(0x53e)]=_0xd5fb1d,_0x550195[_0x24a7aa(0x360)]=_0x24a7aa(0x4b7),_0x550195[_0x24a7aa(0x166)]=_0x575699,_0x550195[_0x24a7aa(0x797)]=_0x87ba69,_0x550195[_0x24a7aa(0x2b9)]=_0x3f8466;let _0x5f2b22=await this[_0x24a7aa(0x799)][_0x24a7aa(0x8a8)]['updateOne'](_0x550195[_0x24a7aa(0x812)],_0x550195,this[_0x24a7aa(0x3ec)][_0x24a7aa(0x490)]);return this[_0x24a7aa(0x484)][_0x24a7aa(0x768)](this['instanceName']+'\x20('+this[_0x24a7aa(0x3ec)][_0x24a7aa(0x490)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x5f2b22?_0x550195:null;}catch(_0x1be250){return this['logger'][_0x24a7aa(0x62b)](this[_0x24a7aa(0x75c)]+'\x20('+this[_0x24a7aa(0x3ec)][_0x24a7aa(0x490)]+'):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20'+(_0x1be250 instanceof Error?_0x1be250[_0x24a7aa(0x5b7)]:JSON[_0x24a7aa(0x62f)](_0x1be250,null,0x2))),_0x1be250;}}async['uazapiSendText'](_0x19bc6e,_0x5133ea){const _0x27441d=a0_0x591e8d;let _0x417920=_0x19bc6e['remoteJid'];_0x5133ea[_0x27441d(0x301)][_0x27441d(0x166)]&&_0x5133ea[_0x27441d(0x301)][_0x27441d(0x166)]['trim']()!==''&&(_0x417920=_0x5133ea[_0x27441d(0x301)][_0x27441d(0x166)][_0x27441d(0x311)]()),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x27441d(0x3ec)]['wuid']+_0x27441d(0x16d));let _0x5e3a09={'number':_0x417920,'options':{'delay':_0x5133ea[_0x27441d(0x301)][_0x27441d(0x1ca)],'linkPreview':_0x5133ea[_0x27441d(0x301)][_0x27441d(0x86e)]},'textMessage':{'text':_0x5133ea[_0x27441d(0x301)][_0x27441d(0x7a9)]}};try{let _0x1183e4=await this[_0x27441d(0x4fb)](_0x5e3a09);if(_0x1183e4){let _0x204818={'_id':_0x1183e4[_0x27441d(0x27f)]['id'],'_fromMe':_0x1183e4['key']['fromMe'],'_remoteJid':_0x1183e4[_0x27441d(0x27f)][_0x27441d(0x166)]},_0x4f2e50=(0x0,w['normalizeMessageContent'])(_0x1183e4[_0x27441d(0x5b7)]),_0x51eb60=(0x0,w[_0x27441d(0x366)])(_0x4f2e50);_0x19bc6e[_0x27441d(0x546)]['lastBlockId']=_0x5133ea[_0x27441d(0x812)][_0x27441d(0x44c)]();let {message_normalized:_0x5d66ae}=this[_0x27441d(0x48f)](_0x4f2e50,_0x51eb60,null);_0x19bc6e[_0x27441d(0x546)]['lastSendMessage']=await _0x5d66ae;let _0x1fb33d={'messageId':_0x1183e4[_0x27441d(0x27f)]['id']},_0x37ddbd=_0x19bc6e[_0x27441d(0x546)]['realVariables'];Object['assign'](_0x37ddbd,_0x204818),_0x19bc6e[_0x27441d(0x546)][_0x27441d(0x195)]=_0x37ddbd,this[_0x27441d(0x5e0)](_0x19bc6e,_0x5133ea,_0x1fb33d);}else{let _0x5a5b17={'error':!0x0};this[_0x27441d(0x5e0)](_0x19bc6e,_0x5133ea,_0x5a5b17),this[_0x27441d(0x484)]['error'](this['instanceName']+'\x20('+this[_0x27441d(0x3ec)][_0x27441d(0x490)]+_0x27441d(0x742));}}catch(_0x28bcb6){let _0x2a016c={'error':!0x0,'errorLog':_0x28bcb6['toString']()};this[_0x27441d(0x5e0)](_0x19bc6e,_0x5133ea,_0x2a016c),this[_0x27441d(0x484)][_0x27441d(0x62b)](this[_0x27441d(0x75c)]+'\x20('+this[_0x27441d(0x3ec)]['wuid']+_0x27441d(0x587)+(_0x28bcb6 instanceof Error?_0x28bcb6[_0x27441d(0x5b7)]:JSON['stringify'](_0x28bcb6,null,0x2)));}}async[a0_0x591e8d(0x4bf)](_0x17f801,_0x1c1dbe){const _0x192c5e=a0_0x591e8d;let _0x941605=_0x17f801[_0x192c5e(0x166)];_0x1c1dbe[_0x192c5e(0x301)][_0x192c5e(0x166)]&&_0x1c1dbe['uazapi'][_0x192c5e(0x166)][_0x192c5e(0x311)]()!==''&&(_0x941605=_0x1c1dbe[_0x192c5e(0x301)][_0x192c5e(0x166)][_0x192c5e(0x311)]()),this[_0x192c5e(0x484)]['verbose'](this['instanceName']+'\x20('+this[_0x192c5e(0x3ec)][_0x192c5e(0x490)]+_0x192c5e(0x6e5));let _0xfc206a={'number':_0x941605,'options':{'delay':_0x1c1dbe[_0x192c5e(0x301)]['delay'],'linkPreview':_0x1c1dbe[_0x192c5e(0x301)][_0x192c5e(0x86e)]},'mediaMessage':{'mediatype':_0x1c1dbe['uazapi'][_0x192c5e(0x6b0)],'caption':_0x1c1dbe[_0x192c5e(0x301)]['caption'],'media':_0x1c1dbe[_0x192c5e(0x301)]['media'],'fileName':_0x1c1dbe['uazapi'][_0x192c5e(0x875)]}};try{let _0x383db7=await this[_0x192c5e(0x174)](_0xfc206a);if(_0x383db7){let _0x3965c6={'_id':_0x383db7[_0x192c5e(0x27f)]['id'],'_fromMe':_0x383db7[_0x192c5e(0x27f)][_0x192c5e(0x7f7)],'_remoteJid':_0x383db7['key'][_0x192c5e(0x166)]},_0x2ab490=(0x0,w['normalizeMessageContent'])(_0x383db7[_0x192c5e(0x5b7)]),_0x5cd208=(0x0,w[_0x192c5e(0x366)])(_0x2ab490);_0x17f801[_0x192c5e(0x546)][_0x192c5e(0x201)]=_0x1c1dbe[_0x192c5e(0x812)]['toString']();let {message_normalized:_0x21f134}=this[_0x192c5e(0x48f)](_0x2ab490,_0x5cd208,null);_0x17f801[_0x192c5e(0x546)]['lastSendMessage']=await _0x21f134;let _0x4e5e5a={'messageId':_0x383db7[_0x192c5e(0x27f)]['id']},_0x1a1e04=_0x17f801[_0x192c5e(0x546)]['realVariables'];Object['assign'](_0x1a1e04,_0x3965c6),_0x17f801['chatLog'][_0x192c5e(0x195)]=_0x1a1e04,this[_0x192c5e(0x5e0)](_0x17f801,_0x1c1dbe,_0x4e5e5a);}else{let _0x5e2f5f={'error':!0x0};this[_0x192c5e(0x5e0)](_0x17f801,_0x1c1dbe,_0x5e2f5f),this[_0x192c5e(0x484)][_0x192c5e(0x62b)](this[_0x192c5e(0x75c)]+'\x20('+this['instance'][_0x192c5e(0x490)]+_0x192c5e(0x57b));}}catch(_0x2451a8){let _0x5f236e={'error':!0x0,'errorLog':_0x2451a8[_0x192c5e(0x44c)]()};this[_0x192c5e(0x5e0)](_0x17f801,_0x1c1dbe,_0x5f236e),this['logger'][_0x192c5e(0x62b)](this[_0x192c5e(0x75c)]+'\x20('+this[_0x192c5e(0x3ec)][_0x192c5e(0x490)]+_0x192c5e(0x596)+(_0x2451a8 instanceof Error?_0x2451a8['message']:JSON[_0x192c5e(0x62f)](_0x2451a8,null,0x2)));}}async[a0_0x591e8d(0x847)](_0x2d8e00,_0x5766fa){const _0x192bc4=a0_0x591e8d;let _0x4d2cc5=_0x2d8e00[_0x192bc4(0x166)];_0x5766fa[_0x192bc4(0x301)][_0x192bc4(0x166)]&&_0x5766fa[_0x192bc4(0x301)][_0x192bc4(0x166)][_0x192bc4(0x311)]()!==''&&(_0x4d2cc5=_0x5766fa[_0x192bc4(0x301)]['remoteJid'][_0x192bc4(0x311)]()),this[_0x192bc4(0x484)][_0x192bc4(0x768)](this[_0x192bc4(0x75c)]+'\x20('+this['instance'][_0x192bc4(0x490)]+_0x192bc4(0x3ed));let _0x1b6766={'number':_0x4d2cc5,'options':{'delay':_0x5766fa['uazapi']['delay']},'locationMessage':{'name':_0x5766fa[_0x192bc4(0x301)]['name'],'address':_0x5766fa['uazapi'][_0x192bc4(0x73d)],'latitude':_0x5766fa['uazapi'][_0x192bc4(0x822)],'longitude':_0x5766fa['uazapi']['longitude']}};try{let _0x2c55c7=await this[_0x192bc4(0x502)](_0x1b6766);if(_0x2c55c7){let _0x55eeda={'_id':_0x2c55c7[_0x192bc4(0x27f)]['id'],'_fromMe':_0x2c55c7[_0x192bc4(0x27f)][_0x192bc4(0x7f7)],'_remoteJid':_0x2c55c7[_0x192bc4(0x27f)][_0x192bc4(0x166)]},_0x2eb5fe=(0x0,w[_0x192bc4(0x7b0)])(_0x2c55c7[_0x192bc4(0x5b7)]),_0x4e0c51=(0x0,w[_0x192bc4(0x366)])(_0x2eb5fe);_0x2d8e00[_0x192bc4(0x546)][_0x192bc4(0x201)]=_0x5766fa[_0x192bc4(0x812)]['toString']();let {message_normalized:_0x28c44e}=this['normalizeMessage'](_0x2eb5fe,_0x4e0c51,null);_0x2d8e00[_0x192bc4(0x546)]['lastSendMessage']=await _0x28c44e;let _0x178622={'messageId':_0x2c55c7[_0x192bc4(0x27f)]['id']},_0x1df865=_0x2d8e00[_0x192bc4(0x546)][_0x192bc4(0x195)];Object[_0x192bc4(0x5ba)](_0x1df865,_0x55eeda),_0x2d8e00[_0x192bc4(0x546)][_0x192bc4(0x195)]=_0x1df865,this[_0x192bc4(0x5e0)](_0x2d8e00,_0x5766fa,_0x178622);}else{let _0x25ac09={'error':!0x0};this['updateConversation'](_0x2d8e00,_0x5766fa,_0x25ac09),this['logger'][_0x192bc4(0x62b)](this[_0x192bc4(0x75c)]+'\x20('+this[_0x192bc4(0x3ec)]['wuid']+_0x192bc4(0x1c4));}}catch(_0x1fbacf){let _0x1beb82={'error':!0x0,'errorLog':_0x1fbacf[_0x192bc4(0x44c)]()};this[_0x192bc4(0x5e0)](_0x2d8e00,_0x5766fa,_0x1beb82),this[_0x192bc4(0x484)][_0x192bc4(0x62b)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x192bc4(0x8a1)+(_0x1fbacf instanceof Error?_0x1fbacf[_0x192bc4(0x5b7)]:JSON[_0x192bc4(0x62f)](_0x1fbacf,null,0x2)));}}async[a0_0x591e8d(0x700)](_0x5398f6,_0x470010){const _0x1faa66=a0_0x591e8d;let _0x42d293=_0x5398f6['remoteJid'];_0x470010[_0x1faa66(0x301)]['remoteJid']&&_0x470010['uazapi'][_0x1faa66(0x166)][_0x1faa66(0x311)]()!==''&&(_0x42d293=_0x470010['uazapi'][_0x1faa66(0x166)][_0x1faa66(0x311)]()),this['logger'][_0x1faa66(0x768)](this[_0x1faa66(0x75c)]+'\x20('+this[_0x1faa66(0x3ec)][_0x1faa66(0x490)]+'):\x20Enviando\x20udio');let _0x509fbf={'number':_0x42d293,'options':{'delay':_0x470010[_0x1faa66(0x301)]['delay']},'audioMessage':{'audio':_0x470010[_0x1faa66(0x301)][_0x1faa66(0x6f4)]}};try{let _0x3b7b58=await this[_0x1faa66(0x463)](_0x509fbf);if(_0x3b7b58){let _0x74eb6d={'_id':_0x3b7b58['key']['id'],'_fromMe':_0x3b7b58[_0x1faa66(0x27f)][_0x1faa66(0x7f7)],'_remoteJid':_0x3b7b58['key'][_0x1faa66(0x166)]},_0x45ecad=(0x0,w['normalizeMessageContent'])(_0x3b7b58[_0x1faa66(0x5b7)]),_0x537c8c=(0x0,w[_0x1faa66(0x366)])(_0x45ecad);_0x5398f6['chatLog']['lastBlockId']=_0x470010['_id'][_0x1faa66(0x44c)]();let {message_normalized:_0x44fd5f}=this[_0x1faa66(0x48f)](_0x45ecad,_0x537c8c,null);_0x5398f6[_0x1faa66(0x546)]['lastSendMessage']=await _0x44fd5f;let _0x48a7e5={'messageId':_0x3b7b58[_0x1faa66(0x27f)]['id']},_0x2c98d9=_0x5398f6[_0x1faa66(0x546)][_0x1faa66(0x195)];Object[_0x1faa66(0x5ba)](_0x2c98d9,_0x74eb6d),_0x5398f6[_0x1faa66(0x546)][_0x1faa66(0x195)]=_0x2c98d9,this[_0x1faa66(0x5e0)](_0x5398f6,_0x470010,_0x48a7e5);}else{let _0x85cc3a={'error':!0x0};this[_0x1faa66(0x5e0)](_0x5398f6,_0x470010,_0x85cc3a),this['logger']['error'](this[_0x1faa66(0x75c)]+'\x20('+this['instance'][_0x1faa66(0x490)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio.');}}catch(_0x20eeff){let _0xd1ef1e={'error':!0x0,'errorLog':_0x20eeff[_0x1faa66(0x44c)]()};this[_0x1faa66(0x5e0)](_0x5398f6,_0x470010,_0xd1ef1e),this[_0x1faa66(0x484)][_0x1faa66(0x62b)](this[_0x1faa66(0x75c)]+'\x20('+this[_0x1faa66(0x3ec)][_0x1faa66(0x490)]+_0x1faa66(0x2f3)+(_0x20eeff instanceof Error?_0x20eeff[_0x1faa66(0x5b7)]:JSON['stringify'](_0x20eeff,null,0x2)));}}async[a0_0x591e8d(0x1e3)](_0x3a4e82,_0x3e7871){const _0x45ffc1=a0_0x591e8d;let _0x54cc4e=_0x3a4e82[_0x45ffc1(0x166)];_0x3e7871[_0x45ffc1(0x301)]['remoteJid']&&_0x3e7871['uazapi'][_0x45ffc1(0x166)][_0x45ffc1(0x311)]()!==''&&(_0x54cc4e=_0x3e7871[_0x45ffc1(0x301)][_0x45ffc1(0x166)][_0x45ffc1(0x311)]()),this['logger'][_0x45ffc1(0x768)](this['instanceName']+'\x20('+this[_0x45ffc1(0x3ec)][_0x45ffc1(0x490)]+_0x45ffc1(0x894));let _0x564bd0={'number':_0x54cc4e,'options':{'delay':_0x3e7871['uazapi']['delay']},'contactMessage':[{'fullName':_0x3e7871[_0x45ffc1(0x301)][_0x45ffc1(0x388)],'phoneNumber':_0x3e7871[_0x45ffc1(0x301)]['phoneNumber']}]};try{let _0x4ad3a0=await this[_0x45ffc1(0x15f)](_0x564bd0);if(_0x4ad3a0){let _0x4c8d12={'_id':_0x4ad3a0[_0x45ffc1(0x27f)]['id'],'_fromMe':_0x4ad3a0[_0x45ffc1(0x27f)][_0x45ffc1(0x7f7)],'_remoteJid':_0x4ad3a0[_0x45ffc1(0x27f)][_0x45ffc1(0x166)]},_0x3e04a9=(0x0,w[_0x45ffc1(0x7b0)])(_0x4ad3a0[_0x45ffc1(0x5b7)]),_0x484b16=(0x0,w[_0x45ffc1(0x366)])(_0x3e04a9);_0x3a4e82[_0x45ffc1(0x546)][_0x45ffc1(0x201)]=_0x3e7871[_0x45ffc1(0x812)][_0x45ffc1(0x44c)]();let {message_normalized:_0x58b7d0}=this[_0x45ffc1(0x48f)](_0x3e04a9,_0x484b16,null);_0x3a4e82[_0x45ffc1(0x546)][_0x45ffc1(0x74a)]=await _0x58b7d0;let _0x11c400={'messageId':_0x4ad3a0[_0x45ffc1(0x27f)]['id']},_0x3844ce=_0x3a4e82[_0x45ffc1(0x546)][_0x45ffc1(0x195)];Object[_0x45ffc1(0x5ba)](_0x3844ce,_0x4c8d12),_0x3a4e82[_0x45ffc1(0x546)][_0x45ffc1(0x195)]=_0x3844ce,this[_0x45ffc1(0x5e0)](_0x3a4e82,_0x3e7871,_0x11c400);}else{let _0x41cf76={'error':!0x0};this['updateConversation'](_0x3a4e82,_0x3e7871,_0x41cf76),this['logger']['error'](this[_0x45ffc1(0x75c)]+'\x20('+this['instance'][_0x45ffc1(0x490)]+_0x45ffc1(0x5a5));}}catch(_0xe49436){let _0x3e3f5d={'error':!0x0,'errorLog':_0xe49436['toString']()};this[_0x45ffc1(0x5e0)](_0x3a4e82,_0x3e7871,_0x3e3f5d),this['logger']['error'](this['instanceName']+'\x20('+this[_0x45ffc1(0x3ec)]['wuid']+_0x45ffc1(0x27c)+(_0xe49436 instanceof Error?_0xe49436[_0x45ffc1(0x5b7)]:JSON[_0x45ffc1(0x62f)](_0xe49436,null,0x2)));}}['replaceVariablesInReplyOptions'](_0x1ee6d0,_0x260693){const _0x4eeea7=a0_0x591e8d;for(let _0x25906f of _0x1ee6d0)_0x25906f[_0x4eeea7(0x171)]&&(_0x25906f[_0x4eeea7(0x171)]=this['replaceVariables'](_0x25906f[_0x4eeea7(0x171)],_0x260693)),_0x25906f[_0x4eeea7(0x213)]&&(_0x25906f[_0x4eeea7(0x213)]=this[_0x4eeea7(0x4d2)](_0x25906f['optionDescription'],_0x260693));}async[a0_0x591e8d(0x6b8)](_0xe3622f,_0x3acbf2){const _0x1cfbb4=a0_0x591e8d;let _0x244d9b=_0xe3622f['remoteJid'];_0x3acbf2[_0x1cfbb4(0x301)][_0x1cfbb4(0x166)]&&_0x3acbf2[_0x1cfbb4(0x301)]['remoteJid'][_0x1cfbb4(0x311)]()!==''&&(_0x244d9b=_0x3acbf2['uazapi']['remoteJid'][_0x1cfbb4(0x311)]()),this['logger'][_0x1cfbb4(0x768)](this['instanceName']+'\x20('+this[_0x1cfbb4(0x3ec)][_0x1cfbb4(0x490)]+'):\x20Enviando\x20enquete');let _0x5e0733=_0xe3622f['replyOptions'][_0x1cfbb4(0x516)](_0x1fead2=>_0x1fead2[_0x1cfbb4(0x7d6)]===_0x3acbf2[_0x1cfbb4(0x812)])[_0x1cfbb4(0x543)]((_0x3ac2c5,_0x3ef9d3)=>_0x3ac2c5[_0x1cfbb4(0x31a)]-_0x3ef9d3[_0x1cfbb4(0x31a)]);this[_0x1cfbb4(0x339)](_0x5e0733,_0xe3622f[_0x1cfbb4(0x546)][_0x1cfbb4(0x195)]);let _0x1da7b8=_0x5e0733[_0x1cfbb4(0x276)](_0x3784ed=>_0x3784ed[_0x1cfbb4(0x171)]),_0xb3de09={'number':_0x244d9b,'menuMessage':{'type':_0x3acbf2[_0x1cfbb4(0x301)][_0x1cfbb4(0x33d)]||_0x1cfbb4(0x498),'text':_0x3acbf2[_0x1cfbb4(0x301)][_0x1cfbb4(0x7a9)]||_0x3acbf2[_0x1cfbb4(0x301)][_0x1cfbb4(0x1f8)],'footerText':_0x3acbf2['uazapi'][_0x1cfbb4(0x59d)],'buttonText':_0x3acbf2[_0x1cfbb4(0x301)][_0x1cfbb4(0x8a9)],'selectableCount':0x1,'choices':_0x1da7b8},'options':{'delay':_0x3acbf2['uazapi']['delay']}};try{let _0x5a6c85=await this[_0x1cfbb4(0x275)](_0xb3de09);if(_0x5a6c85){let _0x3070bd={'_id':_0x5a6c85[_0x1cfbb4(0x27f)]['id'],'_fromMe':_0x5a6c85[_0x1cfbb4(0x27f)][_0x1cfbb4(0x7f7)],'_remoteJid':_0x5a6c85[_0x1cfbb4(0x27f)]['remoteJid']};_0x3acbf2[_0x1cfbb4(0x301)]['menuIgnoreNonVotes']===!0x0&&(_0xe3622f[_0x1cfbb4(0x360)]=_0x1cfbb4(0x23a),this[_0x1cfbb4(0x484)][_0x1cfbb4(0x768)](this[_0x1cfbb4(0x75c)]+'\x20('+this[_0x1cfbb4(0x3ec)]['wuid']+_0x1cfbb4(0x5d0)+_0xe3622f['status'])),this[_0x1cfbb4(0x484)]['verbose'](this[_0x1cfbb4(0x75c)]+'\x20('+this[_0x1cfbb4(0x3ec)][_0x1cfbb4(0x490)]+_0x1cfbb4(0x7dd)+(_0x3acbf2[_0x1cfbb4(0x301)][_0x1cfbb4(0x1f8)]||_0x3acbf2[_0x1cfbb4(0x301)][_0x1cfbb4(0x7a9)])),_0xe3622f[_0x1cfbb4(0x3db)]=_0x5a6c85[_0x1cfbb4(0x27f)]['id'],_0xe3622f[_0x1cfbb4(0x50d)]=_0x3acbf2['uazapi'][_0x1cfbb4(0x1f8)]||_0x3acbf2[_0x1cfbb4(0x301)]['text'],_0xe3622f['waitingMenu_replyOptions']=_0x5e0733,_0x3acbf2[_0x1cfbb4(0x301)][_0x1cfbb4(0x7f0)]&&(_0xe3622f[_0x1cfbb4(0x421)]=_0x3acbf2[_0x1cfbb4(0x301)][_0x1cfbb4(0x7f0)]),this['logger']['verbose'](this[_0x1cfbb4(0x75c)]+'\x20('+this['instance'][_0x1cfbb4(0x490)]+_0x1cfbb4(0x43a)+_0xe3622f[_0x1cfbb4(0x50d)]);let _0x6d277=(0x0,w[_0x1cfbb4(0x7b0)])(_0x5a6c85['message']),_0x350477=(0x0,w[_0x1cfbb4(0x366)])(_0x6d277);_0xe3622f[_0x1cfbb4(0x546)][_0x1cfbb4(0x201)]=_0x3acbf2['_id'][_0x1cfbb4(0x44c)]();let {message_normalized:_0x5e01d6}=this[_0x1cfbb4(0x48f)](_0x6d277,_0x350477,null);_0xe3622f[_0x1cfbb4(0x546)][_0x1cfbb4(0x74a)]=await _0x5e01d6;let _0x53fd6b={'messageId':_0x5a6c85[_0x1cfbb4(0x27f)]['id']},_0x37f206=_0xe3622f[_0x1cfbb4(0x546)][_0x1cfbb4(0x195)];Object[_0x1cfbb4(0x5ba)](_0x37f206,_0x3070bd),_0xe3622f[_0x1cfbb4(0x546)][_0x1cfbb4(0x195)]=_0x37f206,this[_0x1cfbb4(0x5e0)](_0xe3622f,_0x3acbf2,_0x53fd6b);}else{let _0x31d0e9={'error':!0x0};this['updateConversation'](_0xe3622f,_0x3acbf2,_0x31d0e9),this[_0x1cfbb4(0x484)][_0x1cfbb4(0x62b)](this['instanceName']+'\x20('+this[_0x1cfbb4(0x3ec)][_0x1cfbb4(0x490)]+_0x1cfbb4(0x40c));}}catch(_0x394618){let _0x37a208={'error':!0x0,'errorLog':_0x394618 instanceof Error?_0x394618[_0x1cfbb4(0x5b7)]:JSON['stringify'](_0x394618,null,0x2)};this['updateConversation'](_0xe3622f,_0x3acbf2,_0x37a208),this[_0x1cfbb4(0x484)][_0x1cfbb4(0x62b)](this[_0x1cfbb4(0x75c)]+'\x20('+this['instance']['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20'+(_0x394618 instanceof Error?_0x394618[_0x1cfbb4(0x5b7)]:JSON[_0x1cfbb4(0x62f)](_0x394618,null,0x2)));}}async['uazapiDeleteMessage'](_0x4d3e04,_0x56275f){const _0x410335=a0_0x591e8d;this[_0x410335(0x484)][_0x410335(0x768)](this['instanceName']+'\x20('+this[_0x410335(0x3ec)][_0x410335(0x490)]+'):\x20Deletando\x20mensagem');let _0x4f5074=_0x4d3e04['chatLog'][_0x410335(0x1a6)][_0x410335(0x2c5)](_0x412a5e=>_0x412a5e[_0x410335(0x7d6)][_0x410335(0x44c)]()===_0x56275f[_0x410335(0x301)][_0x410335(0x7d6)]['toString']()),_0x3708b5={'id':_0x4f5074[_0x410335(0x58e)],'remoteJid':_0x4f5074[_0x410335(0x166)],'fromMe':_0x4f5074['fromMe']};try{let _0x1ed554=await this['deleteMessage'](_0x3708b5);if(_0x1ed554){let _0x3aeb06=(0x0,w['normalizeMessageContent'])(_0x1ed554[_0x410335(0x5b7)]),_0xc67aee=(0x0,w[_0x410335(0x366)])(_0x3aeb06);_0x4d3e04['chatLog'][_0x410335(0x201)]=_0x56275f[_0x410335(0x812)][_0x410335(0x44c)]();let {message_normalized:_0x1a2d35}=this['normalizeMessage'](_0x3aeb06,_0xc67aee,null);_0x4d3e04[_0x410335(0x546)][_0x410335(0x74a)]=await _0x1a2d35;let _0x4cc4b4={};this[_0x410335(0x5e0)](_0x4d3e04,_0x56275f,_0x4cc4b4);}else{let _0x4f9aca={'error':!0x0};this['updateConversation'](_0x4d3e04,_0x56275f,_0x4f9aca),this[_0x410335(0x484)][_0x410335(0x62b)](this['instanceName']+'\x20('+this[_0x410335(0x3ec)][_0x410335(0x490)]+_0x410335(0x73a));}}catch(_0x222d3b){let _0x142d6b={'error':!0x0,'errorLog':_0x222d3b instanceof Error?_0x222d3b[_0x410335(0x5b7)]:JSON[_0x410335(0x62f)](_0x222d3b,null,0x2)};this[_0x410335(0x5e0)](_0x4d3e04,_0x56275f,_0x142d6b),this[_0x410335(0x484)]['error'](this['instanceName']+'\x20('+this[_0x410335(0x3ec)][_0x410335(0x490)]+_0x410335(0x774)+(_0x222d3b instanceof Error?_0x222d3b[_0x410335(0x5b7)]:JSON['stringify'](_0x222d3b,null,0x2)));}}async[a0_0x591e8d(0x162)](_0x1392a4,_0x3ac8e9){const _0x125c29=a0_0x591e8d;if(_0x1392a4['name']||(_0x1392a4[_0x125c29(0x1f8)]=(0x0,Y['v4'])()),_0x3ac8e9!==$i&&_0x1392a4?.[_0x125c29(0x5db)])throw new m('Para\x20criar\x20fluxo\x20global,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20global');if(_0x125c29(0x812)in _0x1392a4&&_0x125c29(0x7d9)in _0x1392a4)return this[_0x125c29(0x2f9)](_0x1392a4[_0x125c29(0x7d9)],_0x1392a4[_0x125c29(0x812)]);this[_0x125c29(0x484)]['verbose'](this[_0x125c29(0x75c)]+'\x20('+this[_0x125c29(0x3ec)]['wuid']+_0x125c29(0x660));let _0x26a423=this[_0x125c29(0x5c0)](_0x1392a4['name']),_0x4cb90b=new pe[(_0x125c29(0x52e))][(_0x125c29(0x5f3))](),_0x1e010a={'_id':_0x4cb90b,'default':!0x0,'title':'Incio','x':0x0,'y':0x0},_0x3e405a={'_id':new pe[(_0x125c29(0x52e))][(_0x125c29(0x5f3))](),'order':0x1,'groupId':_0x4cb90b[_0x125c29(0x44c)](),'type':_0x125c29(0x67e)},_0x4aff92=this[_0x125c29(0x3ec)][_0x125c29(0x490)],_0x31a785={'_id':(0x0,Y['v4'])(),'owner':_0x4aff92,'name':_0x26a423,'whoCanEdit':[_0x4aff92],'whoCanUse':[_0x4aff92],'groups':[_0x1e010a],'blocks':[_0x3e405a],..._0x1392a4};try{let _0x72ff1f=await this[_0x125c29(0x799)][_0x125c29(0x4cc)]['createAndSave'](_0x31a785);return await this[_0x125c29(0x65e)](),_0x72ff1f;}catch(_0x39b4b6){let _0x2f6124=_0x125c29(0x895),_0x374752=_0x39b4b6 instanceof Error?_0x39b4b6[_0x125c29(0x5b7)]:typeof _0x39b4b6==_0x125c29(0x808)?JSON['stringify'](_0x39b4b6):_0x39b4b6,_0x4bb666=_0x2f6124+':\x20'+_0x374752;throw this[_0x125c29(0x484)]['error'](this[_0x125c29(0x75c)]+'\x20('+this['instance']['wuid']+_0x125c29(0x872)+_0x4bb666),new m(_0x4bb666);}}async[a0_0x591e8d(0x2f9)](_0x37a4ca,_0x417ea0){const _0x4328e6=a0_0x591e8d;try{this[_0x4328e6(0x484)]['verbose'](this[_0x4328e6(0x75c)]+'\x20('+this[_0x4328e6(0x3ec)]['wuid']+_0x4328e6(0x1a1));let _0x2f5551=await this[_0x4328e6(0x799)]['flow'][_0x4328e6(0x685)]({'where':{'_id':_0x417ea0,'owner':_0x37a4ca}});if(!_0x2f5551)throw new m(_0x4328e6(0x27b));if(_0x2f5551[_0x4328e6(0x312)]===!0x1&&!_0x2f5551[_0x4328e6(0x5db)])throw new m('Esse\x20fluxo\x20no\x20permite\x20importao.');let _0x4a3725=new Set(_0x2f5551[_0x4328e6(0x658)]??[]);_0x4a3725[_0x4328e6(0x67f)](this[_0x4328e6(0x3ec)][_0x4328e6(0x490)]);let _0x1138b5=await this['repository'][_0x4328e6(0x4cc)][_0x4328e6(0x828)](_0x417ea0,{..._0x2f5551,'whoCanUse':Array[_0x4328e6(0x4f4)](_0x4a3725)});return await this['synchronizeAndMapFlows'](),_0x1138b5;}catch(_0x2c0297){let _0x1ede9b=_0x4328e6(0x342),_0x37b0bb=_0x2c0297 instanceof Error?_0x2c0297[_0x4328e6(0x5b7)]:typeof _0x2c0297==_0x4328e6(0x808)?JSON['stringify'](_0x2c0297):_0x2c0297,_0x3c4d62=_0x1ede9b+':\x20'+_0x37b0bb;throw this['logger'][_0x4328e6(0x62b)](this[_0x4328e6(0x75c)]+'\x20('+this['instance']['wuid']+_0x4328e6(0x872)+_0x3c4d62),new m(_0x3c4d62);}}['getUniqueFlowName'](_0x1e379b){const _0x39194d=a0_0x591e8d;let _0x5e33cb=_0x1e379b,_0x53328f=0x1;for(;this[_0x39194d(0x693)]['flows'][_0x39194d(0x7ba)](_0x245440=>_0x245440[_0x39194d(0x1f8)]===_0x5e33cb);)_0x53328f++,_0x5e33cb=_0x1e379b+'\x20('+_0x53328f+')';return _0x5e33cb;}async[a0_0x591e8d(0x5e7)](_0x131b68){const _0x5dc08e=a0_0x591e8d;try{if(this[_0x5dc08e(0x484)][_0x5dc08e(0x768)](this[_0x5dc08e(0x75c)]+'\x20('+this[_0x5dc08e(0x3ec)]['wuid']+_0x5dc08e(0x85d)+_0x131b68[_0x5dc08e(0x812)]+_0x5dc08e(0x1ef)+_0x131b68[_0x5dc08e(0x337)]),!this[_0x5dc08e(0x693)]['flows'][_0x5dc08e(0x2c5)](_0x60f15a=>_0x60f15a[_0x5dc08e(0x812)]===_0x131b68['_id']))throw this[_0x5dc08e(0x484)][_0x5dc08e(0x768)](this[_0x5dc08e(0x75c)]+'\x20('+this[_0x5dc08e(0x3ec)][_0x5dc08e(0x490)]+_0x5dc08e(0x72a)+_0x131b68[_0x5dc08e(0x812)]+_0x5dc08e(0x800)),new m('Fluxo\x20no\x20encontrado\x20na\x20memria.');let _0xfba82a=await this[_0x5dc08e(0x799)][_0x5dc08e(0x4cc)][_0x5dc08e(0x685)]({'where':{'_id':_0x131b68[_0x5dc08e(0x812)]}});if(!_0xfba82a)throw new m(_0x5dc08e(0x500));if(this[_0x5dc08e(0x3ec)]['wuid']===_0xfba82a[_0x5dc08e(0x7d9)]){this[_0x5dc08e(0x484)]['verbose'](this[_0x5dc08e(0x75c)]+'\x20('+this[_0x5dc08e(0x3ec)][_0x5dc08e(0x490)]+_0x5dc08e(0x27d)+_0x131b68[_0x5dc08e(0x812)]+_0x5dc08e(0x677));let _0x4f2d6f=await this['repository'][_0x5dc08e(0x4cc)][_0x5dc08e(0x1cc)]({'where':{'_id':_0x131b68[_0x5dc08e(0x812)]}});return await this[_0x5dc08e(0x65e)](),_0x4f2d6f;}return this[_0x5dc08e(0x484)][_0x5dc08e(0x768)](this[_0x5dc08e(0x75c)]+'\x20('+this[_0x5dc08e(0x3ec)]['wuid']+_0x5dc08e(0x6a2)+this['instance'][_0x5dc08e(0x490)]+_0x5dc08e(0x4c8)+_0x131b68[_0x5dc08e(0x812)]+_0x5dc08e(0x5ad)),_0xfba82a['whoCanUse']=(_0xfba82a[_0x5dc08e(0x658)]??[])[_0x5dc08e(0x516)](_0x5537bc=>_0x5537bc!==this[_0x5dc08e(0x3ec)][_0x5dc08e(0x490)]),_0xfba82a[_0x5dc08e(0x5c8)]=(_0xfba82a['whoCanEdit']??[])[_0x5dc08e(0x516)](_0xf6bbcf=>_0xf6bbcf!==this[_0x5dc08e(0x3ec)]['wuid']),_0xfba82a['whoCanEdit'][_0x5dc08e(0x836)]===0x0&&_0xfba82a[_0x5dc08e(0x658)][_0x5dc08e(0x836)]>0x0&&(_0xfba82a[_0x5dc08e(0x5c8)][_0x5dc08e(0x57f)](_0xfba82a['whoCanUse'][0x0]),this[_0x5dc08e(0x484)][_0x5dc08e(0x768)](this[_0x5dc08e(0x75c)]+'\x20('+this[_0x5dc08e(0x3ec)][_0x5dc08e(0x490)]+_0x5dc08e(0x5c5)+_0xfba82a[_0x5dc08e(0x658)][0x0]+'\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27'+_0x131b68[_0x5dc08e(0x812)]+_0x5dc08e(0x5ad))),await this[_0x5dc08e(0x799)][_0x5dc08e(0x4cc)][_0x5dc08e(0x828)](_0xfba82a['_id'],_0xfba82a),await this['synchronizeAndMapFlows'](),{'message':'Fluxo\x20\x27'+_0x131b68[_0x5dc08e(0x1f8)]+_0x5dc08e(0x6d1)};}catch(_0x351be4){return this[_0x5dc08e(0x484)][_0x5dc08e(0x62b)](this['instanceName']+'\x20('+this[_0x5dc08e(0x3ec)][_0x5dc08e(0x490)]+_0x5dc08e(0x3cd)+(_0x351be4 instanceof Error?_0x351be4[_0x5dc08e(0x5b7)]:JSON[_0x5dc08e(0x62f)](_0x351be4,null,0x2))),{'message':_0x5dc08e(0x522)+(_0x351be4 instanceof Error?_0x351be4[_0x5dc08e(0x5b7)]:JSON[_0x5dc08e(0x62f)](_0x351be4,null,0x2))};}}async['getFlow'](_0x5376a3){const _0x1b9d83=a0_0x591e8d;try{if(this[_0x1b9d83(0x484)][_0x1b9d83(0x7ed)](this[_0x1b9d83(0x75c)]+'\x20('+this[_0x1b9d83(0x3ec)][_0x1b9d83(0x490)]+'):\x20Buscando\x20flow,\x20id:\x20'+_0x5376a3),!this['AutomateSystem']&&(await this[_0x1b9d83(0x689)](),!this[_0x1b9d83(0x693)]))return null;let _0x3fcea0=await this['repository'][_0x1b9d83(0x4cc)]['findOne']({'where':{'_id':_0x5376a3}});if(!_0x3fcea0)throw new m(_0x1b9d83(0x73b)+_0x5376a3+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.');if(!(_0x3fcea0[_0x1b9d83(0x5db)]||_0x3fcea0[_0x1b9d83(0x658)]?.[_0x1b9d83(0x243)](this[_0x1b9d83(0x3ec)][_0x1b9d83(0x490)])))throw new m(_0x1b9d83(0x369)+name+'\x27');_0x3fcea0[_0x1b9d83(0x5db)]&&!_0x3fcea0[_0x1b9d83(0x658)]?.[_0x1b9d83(0x243)](this[_0x1b9d83(0x3ec)]['wuid'])&&(_0x3fcea0[_0x1b9d83(0x658)]=[..._0x3fcea0['whoCanUse']??[],this[_0x1b9d83(0x3ec)][_0x1b9d83(0x490)]],await this['repository'][_0x1b9d83(0x4cc)][_0x1b9d83(0x828)](_0x3fcea0['_id'],_0x3fcea0),this[_0x1b9d83(0x65e)]());let _0x10b64a=this[_0x1b9d83(0x693)]?.[_0x1b9d83(0x772)][_0x1b9d83(0x276)](_0x55df2c=>_0x55df2c['name']),_0x577804=[_0x1b9d83(0x695),_0x1b9d83(0x8a4),_0x1b9d83(0x60f),_0x1b9d83(0x182),'status',_0x1b9d83(0x7df),_0x1b9d83(0x58c),_0x1b9d83(0x82d),'etiquetas',_0x1b9d83(0x3ba),_0x1b9d83(0x603)];_0x3fcea0[_0x1b9d83(0x45a)]=_0x3fcea0[_0x1b9d83(0x45a)][_0x1b9d83(0x516)](_0x4cb40d=>!(_0x4cb40d[_0x1b9d83(0x170)]===_0x1b9d83(0x2cf)||_0x4cb40d['leadInfo'])),_0x577804['forEach'](_0x43e1c0=>{const _0x19865d=_0x1b9d83;_0x3fcea0[_0x19865d(0x45a)][_0x19865d(0x57f)]({'folder':'leadInfo','name':_0x43e1c0,'value':'','doc':'','leadInfo':!0x0});}),_0x10b64a[_0x1b9d83(0x5ce)](_0x2dffce=>{const _0x41b031=_0x1b9d83;let _0x2a8308=_0x3fcea0[_0x41b031(0x45a)][_0x41b031(0x3c5)](_0x4dcf9e=>_0x4dcf9e[_0x41b031(0x1f8)]===_0x2dffce);_0x2a8308===-0x1?_0x3fcea0[_0x41b031(0x45a)][_0x41b031(0x57f)]({'folder':_0x41b031(0x2cf),'name':_0x2dffce,'value':'','doc':'','leadInfo':!0x0}):(_0x3fcea0[_0x41b031(0x45a)][_0x2a8308][_0x41b031(0x170)]='leadInfo',_0x3fcea0['variables'][_0x2a8308]['leadInfo']=!0x0);}),_0x3fcea0[_0x1b9d83(0x308)]&&_0x3fcea0[_0x1b9d83(0x308)][_0x1b9d83(0x836)]>0x0&&_0x3fcea0[_0x1b9d83(0x308)][_0x1b9d83(0x5ce)](_0x4e6f59=>{const _0x361375=_0x1b9d83;_0x4e6f59[_0x361375(0x663)]&&_0x4e6f59[_0x361375(0x65a)]&&_0x4e6f59[_0x361375(0x663)]===_0x4e6f59['next_groupId']&&(_0x4e6f59[_0x361375(0x65a)]=null);});let _0x3c67e6=await this['repository']['flow'][_0x1b9d83(0x828)](_0x3fcea0[_0x1b9d83(0x812)],_0x3fcea0);if(!_0x3c67e6)throw new Error(_0x1b9d83(0x27a));return _0x3c67e6;}catch(_0x311c7d){let _0x1c0aba=_0x1b9d83(0x7cb),_0x342df6=_0x311c7d instanceof Error?_0x311c7d[_0x1b9d83(0x5b7)]:typeof _0x311c7d==_0x1b9d83(0x808)?JSON[_0x1b9d83(0x62f)](_0x311c7d):_0x311c7d,_0x15ed5d=_0x1c0aba+':\x20'+_0x342df6;throw this[_0x1b9d83(0x484)][_0x1b9d83(0x62b)](this[_0x1b9d83(0x75c)]+'\x20('+this[_0x1b9d83(0x3ec)]['wuid']+_0x1b9d83(0x872)+_0x15ed5d),new m(_0x15ed5d);}}async[a0_0x591e8d(0x6cd)](){const _0x3715e5=a0_0x591e8d;try{this['logger'][_0x3715e5(0x768)](this['instanceName']+'\x20('+this['instance'][_0x3715e5(0x490)]+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await this[_0x3715e5(0x65e)]();let _0x55f89c=await this[_0x3715e5(0x799)]['flow'][_0x3715e5(0x4f8)]({'where':{'globalShow':!0x0}});return[...this[_0x3715e5(0x693)][_0x3715e5(0x26a)],..._0x55f89c];}catch(_0x155fdc){return this[_0x3715e5(0x484)]['error'](this['instanceName']+'\x20('+this['instance'][_0x3715e5(0x490)]+_0x3715e5(0x5ee)+(_0x155fdc instanceof Error?_0x155fdc[_0x3715e5(0x5b7)]:JSON[_0x3715e5(0x62f)](_0x155fdc,null,0x2))),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+(_0x155fdc instanceof Error?_0x155fdc[_0x3715e5(0x5b7)]:String(_0x155fdc))};}}async[a0_0x591e8d(0x640)](_0x1631ff,_0x10b0aa){const _0x1a83ff=a0_0x591e8d;try{this[_0x1a83ff(0x484)][_0x1a83ff(0x768)](this[_0x1a83ff(0x75c)]+'\x20('+this['instance'][_0x1a83ff(0x490)]+_0x1a83ff(0x810));let _0xe4688e=this[_0x1a83ff(0x693)]['flows'][_0x1a83ff(0x2c5)](_0x3de5c4=>_0x3de5c4[_0x1a83ff(0x812)]===_0x1631ff[_0x1a83ff(0x812)]);if(!_0xe4688e)throw this[_0x1a83ff(0x484)][_0x1a83ff(0x768)](this[_0x1a83ff(0x75c)]+'\x20('+this[_0x1a83ff(0x3ec)][_0x1a83ff(0x490)]+_0x1a83ff(0x72a)+_0x1631ff[_0x1a83ff(0x812)]+_0x1a83ff(0x800)),new m(_0x1a83ff(0x724));let _0x8d8e24=await this[_0x1a83ff(0x799)][_0x1a83ff(0x4cc)][_0x1a83ff(0x685)]({'where':{'_id':_0x1631ff['_id']}});if(!_0x8d8e24||!_0x8d8e24['whoCanUse']?.[_0x1a83ff(0x243)](this[_0x1a83ff(0x3ec)]['wuid']))throw this[_0x1a83ff(0x484)]['error'](this[_0x1a83ff(0x75c)]+'\x20('+this[_0x1a83ff(0x3ec)][_0x1a83ff(0x490)]+_0x1a83ff(0x159)+_0x1631ff[_0x1a83ff(0x812)]+_0x1a83ff(0x70d)),new m(_0x1a83ff(0x6ab)+_0x1631ff[_0x1a83ff(0x812)]+_0x1a83ff(0x70d));let _0x47f37c=this[_0x1a83ff(0x693)]['flows'][_0x1a83ff(0x3c5)](_0x2f49f3=>_0x2f49f3['_id']===_0xe4688e[_0x1a83ff(0x812)]);if(_0x47f37c!==-0x1){let _0x5cecfe=this[_0x1a83ff(0x693)][_0x1a83ff(0x26a)][_0x47f37c];if(_0x5cecfe[_0x1a83ff(0x1f8)]=_0x1631ff[_0x1a83ff(0x1f8)]??_0x5cecfe[_0x1a83ff(0x1f8)],_0x5cecfe[_0x1a83ff(0x2ab)]=_0x1631ff[_0x1a83ff(0x2ab)]??_0x5cecfe['default'],_0x5cecfe[_0x1a83ff(0x578)]=_0x1631ff[_0x1a83ff(0x578)]??_0x5cecfe[_0x1a83ff(0x578)],_0x5cecfe['startCommand']=_0x1631ff[_0x1a83ff(0x524)]??_0x5cecfe[_0x1a83ff(0x1e6)],_0x5cecfe['minutesToClose']=_0x1631ff[_0x1a83ff(0x797)]??_0x5cecfe['minutesToClose'],_0x5cecfe[_0x1a83ff(0x2b9)]=_0x1631ff['readMessages']??_0x5cecfe['readMessages'],_0x1631ff[_0x1a83ff(0x2ab)]&&this[_0x1a83ff(0x693)][_0x1a83ff(0x26a)]['forEach']((_0x3a70ca,_0x409f4f)=>{const _0x476536=_0x1a83ff;_0x409f4f!==_0x47f37c&&(_0x3a70ca[_0x476536(0x2ab)]=!0x1);}),this[_0x1a83ff(0x693)]['flows'][_0x47f37c]=_0x5cecfe,!await this[_0x1a83ff(0x799)][_0x1a83ff(0x79b)][_0x1a83ff(0x1d9)]({'flows':this[_0x1a83ff(0x693)][_0x1a83ff(0x26a)]},this[_0x1a83ff(0x3ec)][_0x1a83ff(0x490)]))throw new m(_0x1a83ff(0x4db));}let _0x232dad=[_0x1a83ff(0x337),'startID','sharePass',_0x1a83ff(0x2be)];for(let _0x404931 of _0x232dad)delete _0x1631ff[_0x404931];if(_0x8d8e24['whoCanEdit']?.[_0x1a83ff(0x243)](this[_0x1a83ff(0x3ec)][_0x1a83ff(0x490)])||(_0x1631ff={'_id':_0x1631ff[_0x1a83ff(0x812)]}),_0x10b0aa!==$i&&_0x1631ff?.[_0x1a83ff(0x5db)]&&!_0x8d8e24?.[_0x1a83ff(0x5db)])throw new m(_0x1a83ff(0x535));let _0x38386e=new Set(_0x1631ff[_0x1a83ff(0x5c8)]??_0x8d8e24[_0x1a83ff(0x5c8)]);_0x38386e[_0x1a83ff(0x67f)](_0x8d8e24['owner']);let _0x31a862=new Set(_0x1631ff[_0x1a83ff(0x658)]??_0x8d8e24['whoCanUse']??[]);_0x38386e[_0x1a83ff(0x5ce)](_0x18a8bf=>_0x31a862['add'](_0x18a8bf)),_0x31a862[_0x1a83ff(0x67f)](_0x8d8e24[_0x1a83ff(0x7d9)]),this[_0x1a83ff(0x484)][_0x1a83ff(0x768)](this['instanceName']+'\x20('+this[_0x1a83ff(0x3ec)][_0x1a83ff(0x490)]+_0x1a83ff(0x778)+Array[_0x1a83ff(0x4f4)](_0x38386e)),this['logger']['verbose'](this[_0x1a83ff(0x75c)]+'\x20('+this[_0x1a83ff(0x3ec)][_0x1a83ff(0x490)]+_0x1a83ff(0x763)+Array[_0x1a83ff(0x4f4)](_0x31a862));let _0x5974b2=await this[_0x1a83ff(0x32b)](Array[_0x1a83ff(0x4f4)](_0x31a862)),_0x43740c=Array[_0x1a83ff(0x4f4)](_0x38386e)[_0x1a83ff(0x516)](_0x3eec9f=>_0x5974b2[_0x1a83ff(0x243)](_0x3eec9f)),_0x491f98=Array[_0x1a83ff(0x4f4)](_0x31a862)[_0x1a83ff(0x516)](_0x53c6fb=>_0x5974b2[_0x1a83ff(0x243)](_0x53c6fb));this[_0x1a83ff(0x484)][_0x1a83ff(0x768)](this['instanceName']+'\x20('+this[_0x1a83ff(0x3ec)]['wuid']+'):\x20whoCanEdit\x20after\x20validation:\x20'+_0x43740c),this['logger'][_0x1a83ff(0x768)](this[_0x1a83ff(0x75c)]+'\x20('+this[_0x1a83ff(0x3ec)]['wuid']+_0x1a83ff(0x456)+_0x491f98);let _0x557dad={..._0x8d8e24,..._0x1631ff,'whoCanEdit':_0x43740c,'whoCanUse':_0x491f98},_0x513d26=await this[_0x1a83ff(0x799)][_0x1a83ff(0x4cc)]['updateOne'](_0x8d8e24[_0x1a83ff(0x812)],_0x557dad);return await this['synchronizeAndMapFlows'](),_0x513d26;}catch(_0x409db4){let _0xdca5ce='Erro\x20ao\x20alterar\x20fluxo',_0x174db4=_0x409db4 instanceof Error?_0x409db4[_0x1a83ff(0x5b7)]:typeof _0x409db4==_0x1a83ff(0x808)?JSON['stringify'](_0x409db4):_0x409db4,_0x36ecd5=_0xdca5ce+':\x20'+_0x174db4;throw this[_0x1a83ff(0x484)][_0x1a83ff(0x62b)](this[_0x1a83ff(0x75c)]+'\x20('+this[_0x1a83ff(0x3ec)][_0x1a83ff(0x490)]+_0x1a83ff(0x872)+_0x36ecd5),new m(_0x36ecd5);}}async[a0_0x591e8d(0x32b)](_0x2df453){const _0x2b3170=a0_0x591e8d;let _0x3856fc={'numbers':_0x2df453};return(await this[_0x2b3170(0x1b5)](_0x3856fc))[_0x2b3170(0x516)](_0x4dfe4c=>_0x4dfe4c[_0x2b3170(0x5c4)])['map'](_0x4ade8a=>_0x4ade8a[_0x2b3170(0x833)])['map'](_0x42df77=>this[_0x2b3170(0x4ff)](_0x42df77));}['extractPhoneNumber'](_0x980283){let _0x5129a8=_0x980283['match'](/\d+/);return _0x5129a8?_0x5129a8[0x0]:'';}async[a0_0x591e8d(0x5de)](_0x91271c){const _0x4b7e6c=a0_0x591e8d;try{if(this[_0x4b7e6c(0x484)][_0x4b7e6c(0x768)](this['instanceName']+'\x20('+this[_0x4b7e6c(0x3ec)]['wuid']+'):\x20Editando\x20bloco...'),!this['AutomateSystem']['flows']['find'](_0x3c86f5=>_0x3c86f5[_0x4b7e6c(0x812)]===_0x91271c[_0x4b7e6c(0x812)]))throw this[_0x4b7e6c(0x484)]['verbose'](this[_0x4b7e6c(0x75c)]+'\x20('+this[_0x4b7e6c(0x3ec)][_0x4b7e6c(0x490)]+_0x4b7e6c(0x72a)+_0x91271c['_id']+_0x4b7e6c(0x800)),new m(_0x4b7e6c(0x724));let _0x387a3d=await this[_0x4b7e6c(0x799)][_0x4b7e6c(0x4cc)]['findOne']({'where':{'_id':_0x91271c['_id']}});if(!_0x387a3d||!_0x387a3d[_0x4b7e6c(0x658)]?.[_0x4b7e6c(0x243)](this[_0x4b7e6c(0x3ec)][_0x4b7e6c(0x490)]))throw this[_0x4b7e6c(0x484)]['error'](this[_0x4b7e6c(0x75c)]+'\x20('+this[_0x4b7e6c(0x3ec)][_0x4b7e6c(0x490)]+'):\x20Flow\x20\x27'+_0x91271c[_0x4b7e6c(0x812)]+_0x4b7e6c(0x70d)),new m(_0x4b7e6c(0x6ab)+_0x91271c['_id']+_0x4b7e6c(0x70d));if(!_0x387a3d[_0x4b7e6c(0x5c8)]?.[_0x4b7e6c(0x243)](this['instance'][_0x4b7e6c(0x490)]))throw new m(_0x4b7e6c(0x5f1));let {block:_0x2b9766}=_0x91271c;_0x2b9766?.['copy']?this[_0x4b7e6c(0x2b0)](_0x387a3d,_0x91271c):_0x2b9766?.[_0x4b7e6c(0x6f7)]?this[_0x4b7e6c(0x7f1)](_0x387a3d,_0x91271c):_0x2b9766[_0x4b7e6c(0x812)]?await this[_0x4b7e6c(0x6f1)](_0x387a3d,_0x91271c):this[_0x4b7e6c(0x518)](_0x387a3d,_0x91271c);let _0x2a7dbd=await this[_0x4b7e6c(0x799)][_0x4b7e6c(0x4cc)]['updateOne'](_0x387a3d['_id'],_0x387a3d);if(!_0x2a7dbd)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x2a7dbd;}catch(_0x35dc5d){this[_0x4b7e6c(0x1ed)](_0x4b7e6c(0x447)+_0x35dc5d[_0x4b7e6c(0x5b7)]);}}async[a0_0x591e8d(0x2b0)](_0xd60c25,_0x39743e){const _0x2ab5fa=a0_0x591e8d;let _0x2083a6=_0x39743e['block'][_0x2ab5fa(0x812)],_0x55bb5c=_0xd60c25[_0x2ab5fa(0x308)][_0x2ab5fa(0x2c5)](_0x254f38=>_0x254f38[_0x2ab5fa(0x812)][_0x2ab5fa(0x44c)]()===_0x2083a6);if(!_0x55bb5c){this[_0x2ab5fa(0x484)][_0x2ab5fa(0x62b)](this['instanceName']+'\x20('+this[_0x2ab5fa(0x3ec)][_0x2ab5fa(0x490)]+'):\x20Bloco\x20com\x20ID\x20'+_0x2083a6+'\x20no\x20encontrado\x20para\x20cpia');return;}this[_0x2ab5fa(0x484)][_0x2ab5fa(0x768)](this[_0x2ab5fa(0x75c)]+'\x20('+this[_0x2ab5fa(0x3ec)][_0x2ab5fa(0x490)]+_0x2ab5fa(0x508)+JSON[_0x2ab5fa(0x62f)](_0x55bb5c));let _0x3118dd=JSON[_0x2ab5fa(0x3da)](JSON['stringify'](_0x55bb5c));_0x3118dd[_0x2ab5fa(0x812)]=new pe['default']['Types'][(_0x2ab5fa(0x5f3))](),this[_0x2ab5fa(0x484)]['verbose'](this['instanceName']+'\x20('+this[_0x2ab5fa(0x3ec)]['wuid']+'):\x20Bloco\x20copiado:\x20'+JSON[_0x2ab5fa(0x62f)](_0x3118dd)),_0xd60c25[_0x2ab5fa(0x308)][_0x2ab5fa(0x57f)](_0x3118dd),this[_0x2ab5fa(0x231)](_0xd60c25[_0x2ab5fa(0x308)],_0x3118dd[_0x2ab5fa(0x663)]);}[a0_0x591e8d(0x1ed)](_0x5d9e8e){const _0x57a9ef=a0_0x591e8d;throw this[_0x57a9ef(0x484)][_0x57a9ef(0x62b)](this[_0x57a9ef(0x75c)]+'\x20('+this[_0x57a9ef(0x3ec)][_0x57a9ef(0x490)]+_0x57a9ef(0x872)+_0x5d9e8e),new m(_0x5d9e8e);}[a0_0x591e8d(0x7f1)](_0x2a61e9,_0x1f45e9){const _0x2ae0de=a0_0x591e8d;let {block:_0x29115b}=_0x1f45e9;if(_0x29115b['type']===_0x2ae0de(0x67e)){this[_0x2ae0de(0x1ed)](_0x2ae0de(0x5eb));return;}if(!_0x29115b[_0x2ae0de(0x812)]){this[_0x2ae0de(0x1ed)]('blockId\x20\x20necessrio\x20para\x20deletar\x20um\x20bloco');return;}let _0x23ec3f=_0x2a61e9[_0x2ae0de(0x308)][_0x2ae0de(0x2c5)](_0x4f6603=>_0x4f6603[_0x2ae0de(0x812)][_0x2ae0de(0x44c)]()===_0x1f45e9[_0x2ae0de(0x5cc)][_0x2ae0de(0x812)]['toString']());if(!_0x23ec3f){this[_0x2ae0de(0x1ed)](_0x2ae0de(0x63a)+_0x29115b[_0x2ae0de(0x812)]+_0x2ae0de(0x272));return;}_0x2a61e9['blocks']=_0x2a61e9[_0x2ae0de(0x308)][_0x2ae0de(0x516)](_0xcb9410=>_0xcb9410[_0x2ae0de(0x812)][_0x2ae0de(0x44c)]()!==_0x1f45e9[_0x2ae0de(0x5cc)][_0x2ae0de(0x812)][_0x2ae0de(0x44c)]()),_0x2a61e9[_0x2ae0de(0x8aa)]=_0x2a61e9[_0x2ae0de(0x8aa)][_0x2ae0de(0x516)](_0x1c24b7=>_0x1c24b7[_0x2ae0de(0x7d6)]!==_0x29115b['_id'][_0x2ae0de(0x44c)]()),_0x2a61e9[_0x2ae0de(0x29b)]=_0x2a61e9[_0x2ae0de(0x29b)][_0x2ae0de(0x516)](_0xf28443=>_0xf28443[_0x2ae0de(0x7d6)]!==_0x29115b['_id'][_0x2ae0de(0x44c)]()),_0x2a61e9[_0x2ae0de(0x2cb)]=_0x2a61e9[_0x2ae0de(0x2cb)][_0x2ae0de(0x516)](_0x414128=>_0x414128[_0x2ae0de(0x7d6)]!==_0x29115b[_0x2ae0de(0x812)][_0x2ae0de(0x44c)]()),this[_0x2ae0de(0x231)](_0x2a61e9['blocks'],_0x23ec3f['groupId']);}async[a0_0x591e8d(0x6f1)](_0x50e673,_0x205ba0){const _0x4e37fd=a0_0x591e8d;let _0x5060e5=_0x50e673[_0x4e37fd(0x308)][_0x4e37fd(0x3c5)](_0x5878b3=>_0x5878b3[_0x4e37fd(0x812)][_0x4e37fd(0x44c)]()===_0x205ba0['block'][_0x4e37fd(0x812)][_0x4e37fd(0x44c)]());if(this['logger'][_0x4e37fd(0x768)](this[_0x4e37fd(0x75c)]+'\x20('+this[_0x4e37fd(0x3ec)]['wuid']+_0x4e37fd(0x869)+_0x5060e5),_0x5060e5===-0x1){this[_0x4e37fd(0x484)][_0x4e37fd(0x768)](_0x4e37fd(0x63a)+_0x205ba0['block'][_0x4e37fd(0x812)]+_0x4e37fd(0x23f));return;}if(_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x717)]===_0x4e37fd(0x67e)){let _0x28025f=Object['keys'](_0x205ba0[_0x4e37fd(0x5cc)]);if(_0x28025f[_0x4e37fd(0x836)]>0x2||_0x28025f[_0x4e37fd(0x836)]===0x2&&!_0x28025f[_0x4e37fd(0x243)]('next_groupId')){this[_0x4e37fd(0x1ed)](_0x4e37fd(0x1aa));return;}}let _0x3e9dbb=_0x50e673['blocks'][_0x5060e5][_0x4e37fd(0x663)];for(let _0x56b673 in _0x205ba0[_0x4e37fd(0x5cc)])_0x205ba0[_0x4e37fd(0x5cc)][_0x4e37fd(0x6d6)](_0x56b673)&&(_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x56b673]=_0x205ba0[_0x4e37fd(0x5cc)][_0x56b673]);if(this[_0x4e37fd(0x484)]['verbose'](this[_0x4e37fd(0x75c)]+'\x20('+this[_0x4e37fd(0x3ec)][_0x4e37fd(0x490)]+_0x4e37fd(0x7ec)+JSON[_0x4e37fd(0x62f)](_0x50e673['blocks'][_0x5060e5])),_0x50e673['blocks'][_0x5060e5][_0x4e37fd(0x480)]&&'header'in _0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)]){this[_0x4e37fd(0x484)][_0x4e37fd(0x768)](this[_0x4e37fd(0x75c)]+'\x20('+this[_0x4e37fd(0x3ec)]['wuid']+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x203273=JSON[_0x4e37fd(0x62f)](_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)]['header'],null,0x1);_0x203273[_0x4e37fd(0x836)]>0x2&&(_0x203273=_0x203273[_0x4e37fd(0x513)](0x1,_0x203273[_0x4e37fd(0x836)]-0x1)[_0x4e37fd(0x311)]()),_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)][_0x4e37fd(0x5e1)]=_0x203273;}if(_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)]&&_0x4e37fd(0x5cb)in _0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)]&&!(_0x4e37fd(0x41a)in _0x50e673['blocks'][_0x5060e5][_0x4e37fd(0x480)])){this['logger'][_0x4e37fd(0x768)](this[_0x4e37fd(0x75c)]+'\x20('+this[_0x4e37fd(0x3ec)]['wuid']+_0x4e37fd(0x250)),_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)][_0x4e37fd(0x8a0)]=!0x1;let _0x491a80=JSON['stringify'](_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)][_0x4e37fd(0x5cb)],null,0x2);_0x50e673[_0x4e37fd(0x308)][_0x5060e5]['apirequest'][_0x4e37fd(0x41a)]=_0x491a80;}if(_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)]&&_0x4e37fd(0x41a)in _0x50e673['blocks'][_0x5060e5][_0x4e37fd(0x480)]){_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)][_0x4e37fd(0x8a0)]=!0x1;let _0x1a9174=_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x480)][_0x4e37fd(0x41a)],_0x511950=this[_0x4e37fd(0x63e)](_0x1a9174);_0x50e673['blocks'][_0x5060e5][_0x4e37fd(0x480)]['bodyString']=_0x511950['result'],_0x50e673['blocks'][_0x5060e5][_0x4e37fd(0x480)][_0x4e37fd(0x8a0)]=_0x511950['error'];}let _0x221343=_0x50e673[_0x4e37fd(0x308)][_0x5060e5][_0x4e37fd(0x663)];_0x3e9dbb!==_0x221343?(this['reorderBlocks'](_0x50e673[_0x4e37fd(0x308)],_0x3e9dbb),this['reorderBlocks'](_0x50e673[_0x4e37fd(0x308)],_0x221343)):this[_0x4e37fd(0x231)](_0x50e673[_0x4e37fd(0x308)],_0x3e9dbb);}[a0_0x591e8d(0x63e)](_0x12411b){const _0x5a0da3=a0_0x591e8d;let _0x4ce92e='\u205f',_0x2b38b1=!0x1,_0x15991f='';for(let _0x39c2a1=0x0;_0x39c2a1<_0x12411b[_0x5a0da3(0x836)];_0x39c2a1++){let _0x1d299d=_0x12411b[_0x39c2a1];_0x1d299d==='\x22'&&(_0x39c2a1===0x0||_0x12411b[_0x39c2a1-0x1]!=='\x5c')&&(_0x2b38b1=!_0x2b38b1),!(!_0x2b38b1&&(_0x1d299d==='\x0a'||_0x1d299d==='\x20'||_0x1d299d===_0x4ce92e))&&(_0x15991f+=_0x1d299d);}let _0xdb2085={},_0x29d55d=9876543210.1234,_0xdc54eb=_0x15991f[_0x5a0da3(0x4d0)](/\{\{([^}]+)\}\}/g,_0x495879=>{let _0x5a3782=_0x495879,_0x375ebb=''+_0x29d55d;return _0xdb2085[_0x375ebb]=_0x5a3782,_0x29d55d+=0.0001,_0x375ebb;}),_0xe1c9fb='',_0x55a278=!0x1;try{let _0x5c4531=JSON[_0x5a0da3(0x3da)](_0xdc54eb);_0xe1c9fb=JSON[_0x5a0da3(0x62f)](_0x5c4531,null,0x2),_0xe1c9fb=_0xe1c9fb[_0x5a0da3(0x4d0)](/\n( +)/g,(_0x10e086,_0xb5930b)=>{const _0x593502=_0x5a0da3;let _0x47607c=_0xb5930b[_0x593502(0x836)];return'\x0a'+_0x4ce92e[_0x593502(0x630)](_0x47607c*0x2);}),_0xe1c9fb=_0xe1c9fb[_0x5a0da3(0x4d0)](/(\d{10,}\.\d+)/g,_0x1552ef=>_0xdb2085[_0x1552ef]||_0x1552ef);}catch(_0x52e3ec){this[_0x5a0da3(0x484)]['error'](_0x5a0da3(0x5fa)+_0x52e3ec),_0xe1c9fb=_0x12411b,_0x55a278=!0x0;}return{'result':_0xe1c9fb,'error':_0x55a278};}['addBlock'](_0x3a5cd7,_0x124bd9){const _0xdb1116=a0_0x591e8d;if(_0x124bd9[_0xdb1116(0x5cc)]['type']==='start'){this[_0xdb1116(0x1ed)]('No\x20\x20permitido\x20adicionar\x20outro\x20bloco\x20padro');return;}if(_0x124bd9[_0xdb1116(0x5cc)][_0xdb1116(0x480)]&&_0xdb1116(0x3c6)in _0x124bd9[_0xdb1116(0x5cc)][_0xdb1116(0x480)]){this[_0xdb1116(0x484)]['verbose'](this[_0xdb1116(0x75c)]+'\x20('+this[_0xdb1116(0x3ec)][_0xdb1116(0x490)]+_0xdb1116(0x748));let _0x5a0e7c=JSON[_0xdb1116(0x62f)](_0x124bd9['block'][_0xdb1116(0x480)]['header'],null,0x1);_0x5a0e7c[_0xdb1116(0x836)]>0x2&&(_0x5a0e7c=_0x5a0e7c[_0xdb1116(0x513)](0x1,_0x5a0e7c[_0xdb1116(0x836)]-0x1)[_0xdb1116(0x311)]()),_0x124bd9[_0xdb1116(0x5cc)]['apirequest'][_0xdb1116(0x5e1)]=_0x5a0e7c;}_0x124bd9[_0xdb1116(0x5cc)][_0xdb1116(0x480)]&&'body'in _0x124bd9[_0xdb1116(0x5cc)][_0xdb1116(0x480)]&&(this['logger'][_0xdb1116(0x768)](this['instanceName']+'\x20('+this['instance']['wuid']+_0xdb1116(0x250)),_0x124bd9[_0xdb1116(0x5cc)][_0xdb1116(0x480)][_0xdb1116(0x41a)]=JSON['stringify'](_0x124bd9[_0xdb1116(0x5cc)][_0xdb1116(0x480)][_0xdb1116(0x5cb)],null,0x1)[_0xdb1116(0x311)]()),_0x3a5cd7['blocks'][_0xdb1116(0x57f)](_0x124bd9[_0xdb1116(0x5cc)]),this[_0xdb1116(0x231)](_0x3a5cd7[_0xdb1116(0x308)],_0x124bd9[_0xdb1116(0x5cc)][_0xdb1116(0x663)]);}[a0_0x591e8d(0x231)](_0x2b37e5,_0xd51949){const _0x3995cd=a0_0x591e8d;let _0x452282=_0x2b37e5['filter'](_0x3a513d=>_0x3a513d[_0x3995cd(0x663)]===_0xd51949);_0x452282[_0x3995cd(0x543)]((_0x20126f,_0x5bfdc6)=>_0x20126f[_0x3995cd(0x31a)]-_0x5bfdc6[_0x3995cd(0x31a)]),_0x452282['forEach']((_0x85d3b7,_0x91302f)=>_0x85d3b7[_0x3995cd(0x31a)]=_0x91302f+0x1);}async[a0_0x591e8d(0x16f)](_0x3c0ed3){const _0x2f627b=a0_0x591e8d;try{if(this['logger'][_0x2f627b(0x768)](this['instanceName']+'\x20('+this['instance'][_0x2f627b(0x490)]+_0x2f627b(0x4a4)),!_0x3c0ed3||!_0x3c0ed3[_0x2f627b(0x79e)]){this[_0x2f627b(0x1ed)](_0x2f627b(0x1ae));return;}if(!this[_0x2f627b(0x693)][_0x2f627b(0x26a)][_0x2f627b(0x2c5)](_0x2ddca0=>_0x2ddca0['_id']===_0x3c0ed3[_0x2f627b(0x812)]))throw this['logger'][_0x2f627b(0x768)](this[_0x2f627b(0x75c)]+'\x20('+this[_0x2f627b(0x3ec)][_0x2f627b(0x490)]+'):\x20Fluxo\x20\x27'+_0x3c0ed3[_0x2f627b(0x812)]+_0x2f627b(0x800)),new m('Fluxo\x20no\x20encontrado\x20na\x20memria.');let _0x5435f2=await this['repository'][_0x2f627b(0x4cc)][_0x2f627b(0x685)]({'where':{'_id':_0x3c0ed3[_0x2f627b(0x812)]}});if(!_0x5435f2||!_0x5435f2['whoCanUse']?.[_0x2f627b(0x243)](this[_0x2f627b(0x3ec)][_0x2f627b(0x490)]))throw this[_0x2f627b(0x484)]['error'](this[_0x2f627b(0x75c)]+'\x20('+this[_0x2f627b(0x3ec)][_0x2f627b(0x490)]+_0x2f627b(0x159)+_0x3c0ed3[_0x2f627b(0x812)]+_0x2f627b(0x70d)),new m('Flow\x20\x27'+_0x3c0ed3[_0x2f627b(0x812)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');if(!_0x5435f2['whoCanEdit']?.['includes'](this['instance'][_0x2f627b(0x490)]))throw new m(_0x2f627b(0x5f1));let {replyOption:_0x37f38a}=_0x3c0ed3;_0x37f38a?.[_0x2f627b(0x6f7)]?(this[_0x2f627b(0x588)](_0x5435f2,_0x3c0ed3),this[_0x2f627b(0x601)](_0x5435f2[_0x2f627b(0x2cb)],_0x3c0ed3[_0x2f627b(0x79e)][_0x2f627b(0x7d6)])):_0x37f38a[_0x2f627b(0x812)]?(await this[_0x2f627b(0x64d)](_0x5435f2,_0x3c0ed3),this[_0x2f627b(0x601)](_0x5435f2['replyOptions'],_0x3c0ed3['replyOption'][_0x2f627b(0x7d6)])):(this[_0x2f627b(0x637)](_0x5435f2,_0x3c0ed3),this[_0x2f627b(0x601)](_0x5435f2[_0x2f627b(0x2cb)],_0x3c0ed3[_0x2f627b(0x79e)]['blockId']));let _0x41ac3a=await this[_0x2f627b(0x799)][_0x2f627b(0x4cc)][_0x2f627b(0x828)](_0x5435f2[_0x2f627b(0x812)],_0x5435f2);if(!_0x41ac3a)throw new Error(_0x2f627b(0x27a));return _0x41ac3a;}catch(_0x1ad016){this[_0x2f627b(0x1ed)](_0x2f627b(0x5d1)+_0x1ad016);}}['reorderReplyOptions'](_0x56504a,_0xb0cccc){const _0x59d294=a0_0x591e8d;_0x56504a[_0x59d294(0x5ce)](_0x26b0a1=>{const _0x4df614=_0x59d294;_0x26b0a1[_0x4df614(0x7d6)]===_0xb0cccc&&_0x26b0a1['order']===void 0x0&&(_0x26b0a1[_0x4df614(0x31a)]=0x270f);});let _0x401d10=_0x56504a['filter'](_0x8b9a2d=>_0x8b9a2d[_0x59d294(0x7d6)]===_0xb0cccc);_0x401d10['sort']((_0x26560b,_0x55afad)=>_0x26560b[_0x59d294(0x31a)]-_0x55afad['order']),_0x401d10['forEach']((_0x49d4d4,_0x3e36a5)=>{_0x49d4d4['order']=_0x3e36a5+0x1;}),_0x56504a[_0x59d294(0x5ce)](_0x5017f5=>{const _0x4d9e17=_0x59d294;if(_0x5017f5[_0x4d9e17(0x7d6)]===_0xb0cccc){let _0x22f6a8=_0x401d10[_0x4d9e17(0x2c5)](_0x364584=>_0x364584[_0x4d9e17(0x812)]&&_0x5017f5['_id']&&_0x364584[_0x4d9e17(0x812)]['toString']()===_0x5017f5[_0x4d9e17(0x812)]['toString']());_0x22f6a8&&(_0x5017f5[_0x4d9e17(0x31a)]=_0x22f6a8['order']);}});}[a0_0x591e8d(0x588)](_0x35f210,_0x147901){const _0x40cadc=a0_0x591e8d;let {replyOption:_0x777025}=_0x147901;if(!_0x777025[_0x40cadc(0x812)]){this[_0x40cadc(0x1ed)](_0x40cadc(0x744));return;}if(!_0x35f210[_0x40cadc(0x2cb)][_0x40cadc(0x2c5)](_0x4eb819=>_0x4eb819[_0x40cadc(0x812)][_0x40cadc(0x44c)]()===_0x147901['replyOption']['_id'][_0x40cadc(0x44c)]())){this[_0x40cadc(0x1ed)]('ReplyOption\x20com\x20ID\x20'+_0x777025[_0x40cadc(0x812)]+_0x40cadc(0x272));return;}_0x35f210['replyOptions']=_0x35f210['replyOptions'][_0x40cadc(0x516)](_0x3f4e48=>_0x3f4e48[_0x40cadc(0x812)]['toString']()!==_0x147901['replyOption'][_0x40cadc(0x812)][_0x40cadc(0x44c)]());}async[a0_0x591e8d(0x64d)](_0x10aebe,_0x26dd10){const _0x2e795c=a0_0x591e8d;let _0x44b2a0=_0x10aebe[_0x2e795c(0x2cb)][_0x2e795c(0x3c5)](_0x5efba8=>_0x5efba8[_0x2e795c(0x812)][_0x2e795c(0x44c)]()===_0x26dd10[_0x2e795c(0x79e)]['_id'][_0x2e795c(0x44c)]());if(_0x44b2a0===-0x1){this[_0x2e795c(0x1ed)](_0x2e795c(0x2b2)+_0x26dd10[_0x2e795c(0x79e)][_0x2e795c(0x812)]+_0x2e795c(0x23f));return;}for(let _0x39bdfc in _0x26dd10['replyOption'])_0x26dd10[_0x2e795c(0x79e)][_0x2e795c(0x6d6)](_0x39bdfc)&&(_0x10aebe['replyOptions'][_0x44b2a0][_0x39bdfc]=_0x26dd10[_0x2e795c(0x79e)][_0x39bdfc]);}[a0_0x591e8d(0x637)](_0x2c209c,_0x139a88){const _0x496eba=a0_0x591e8d;_0x2c209c[_0x496eba(0x2cb)][_0x496eba(0x57f)](_0x139a88[_0x496eba(0x79e)]);}async['editFlowGroup'](_0x3996d8){const _0x44b4a0=a0_0x591e8d;this[_0x44b4a0(0x484)][_0x44b4a0(0x768)](this['instanceName']+'\x20('+this[_0x44b4a0(0x3ec)][_0x44b4a0(0x490)]+_0x44b4a0(0x7c9)+JSON[_0x44b4a0(0x62f)](_0x3996d8,null,0x2));try{if(this[_0x44b4a0(0x484)][_0x44b4a0(0x768)](this[_0x44b4a0(0x75c)]+'\x20('+this[_0x44b4a0(0x3ec)][_0x44b4a0(0x490)]+_0x44b4a0(0x82f)),!this[_0x44b4a0(0x693)][_0x44b4a0(0x26a)][_0x44b4a0(0x2c5)](_0x49b5ab=>_0x49b5ab[_0x44b4a0(0x812)]===_0x3996d8['_id']))throw this[_0x44b4a0(0x484)][_0x44b4a0(0x768)](this[_0x44b4a0(0x75c)]+'\x20('+this[_0x44b4a0(0x3ec)][_0x44b4a0(0x490)]+'):\x20Fluxo\x20\x27'+_0x3996d8[_0x44b4a0(0x812)]+_0x44b4a0(0x800)),new m(_0x44b4a0(0x724));let _0x3c7110=await this[_0x44b4a0(0x799)]['flow']['findOne']({'where':{'_id':_0x3996d8['_id']}});if(!_0x3c7110||!_0x3c7110[_0x44b4a0(0x658)]?.[_0x44b4a0(0x243)](this['instance'][_0x44b4a0(0x490)]))throw this[_0x44b4a0(0x484)][_0x44b4a0(0x62b)](this[_0x44b4a0(0x75c)]+'\x20('+this[_0x44b4a0(0x3ec)][_0x44b4a0(0x490)]+'):\x20Flow\x20\x27'+_0x3996d8['_id']+_0x44b4a0(0x70d)),new m(_0x44b4a0(0x6ab)+_0x3996d8[_0x44b4a0(0x812)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');if(!_0x3c7110['whoCanEdit']?.['includes'](this[_0x44b4a0(0x3ec)]['wuid']))throw new m('Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.');if(_0x3996d8[_0x44b4a0(0x233)]&&_0x3996d8[_0x44b4a0(0x233)]?.['delete']===!0x0){if(this[_0x44b4a0(0x484)][_0x44b4a0(0x768)](this[_0x44b4a0(0x75c)]+'\x20('+this[_0x44b4a0(0x3ec)][_0x44b4a0(0x490)]+_0x44b4a0(0x5ff)),_0x3996d8['group'][_0x44b4a0(0x2ab)]===!0x0)return{'message':_0x44b4a0(0x31f)};if(_0x3c7110['blocks'][_0x44b4a0(0x7ba)](_0x235072=>_0x235072[_0x44b4a0(0x663)][_0x44b4a0(0x44c)]()===_0x3996d8[_0x44b4a0(0x233)][_0x44b4a0(0x812)]))return this['logger'][_0x44b4a0(0x768)](this['instanceName']+'\x20('+this[_0x44b4a0(0x3ec)][_0x44b4a0(0x490)]+_0x44b4a0(0x318)),{'message':_0x44b4a0(0x860)};_0x3c7110[_0x44b4a0(0x824)]=_0x3c7110[_0x44b4a0(0x824)][_0x44b4a0(0x516)](_0x22f5b6=>_0x22f5b6[_0x44b4a0(0x812)]['toString']()!==_0x3996d8[_0x44b4a0(0x233)][_0x44b4a0(0x812)]);}else{if(_0x3996d8[_0x44b4a0(0x233)]){if(_0x3996d8[_0x44b4a0(0x233)][_0x44b4a0(0x2ab)]===!0x0)return{'message':_0x44b4a0(0x56c)};if(_0x3996d8[_0x44b4a0(0x233)][_0x44b4a0(0x812)]){let _0xd78d61=_0x3c7110[_0x44b4a0(0x824)][_0x44b4a0(0x2c5)](_0x1ca971=>_0x1ca971[_0x44b4a0(0x812)][_0x44b4a0(0x44c)]()===_0x3996d8[_0x44b4a0(0x233)][_0x44b4a0(0x812)]);_0xd78d61&&(_0x3996d8[_0x44b4a0(0x233)]['x']<0x0&&(_0x3996d8[_0x44b4a0(0x233)]['x']=0x0),_0x3996d8[_0x44b4a0(0x233)]['y']<0x0&&(_0x3996d8[_0x44b4a0(0x233)]['y']=0x0),Object[_0x44b4a0(0x5ba)](_0xd78d61,_0x3996d8[_0x44b4a0(0x233)]));}else _0x3c7110[_0x44b4a0(0x824)]['push'](_0x3996d8[_0x44b4a0(0x233)]);}}let _0x2b1c83=await this[_0x44b4a0(0x799)][_0x44b4a0(0x4cc)][_0x44b4a0(0x828)](_0x3c7110[_0x44b4a0(0x812)],_0x3c7110);if(!_0x2b1c83)throw new Error(_0x44b4a0(0x27a));return _0x2b1c83;}catch(_0x311906){let _0x42d57e=_0x44b4a0(0x666),_0x16ecf2=_0x311906 instanceof Error?_0x311906[_0x44b4a0(0x5b7)]:typeof _0x311906==_0x44b4a0(0x808)?JSON[_0x44b4a0(0x62f)](_0x311906):_0x311906,_0x14cc9d=_0x42d57e+':\x20'+_0x16ecf2;throw this[_0x44b4a0(0x484)][_0x44b4a0(0x62b)](this['instanceName']+'\x20('+this[_0x44b4a0(0x3ec)][_0x44b4a0(0x490)]+_0x44b4a0(0x872)+_0x14cc9d),new m(_0x14cc9d);}}async[a0_0x591e8d(0x5f9)](_0x31d936){const _0x5ef292=a0_0x591e8d;try{if(this[_0x5ef292(0x484)][_0x5ef292(0x768)](this['instanceName']+'\x20('+this[_0x5ef292(0x3ec)][_0x5ef292(0x490)]+_0x5ef292(0x221)),!this['AutomateSystem']['flows']['find'](_0x41883d=>_0x41883d[_0x5ef292(0x812)]===_0x31d936[_0x5ef292(0x812)]))throw this[_0x5ef292(0x484)][_0x5ef292(0x768)](this[_0x5ef292(0x75c)]+'\x20('+this[_0x5ef292(0x3ec)][_0x5ef292(0x490)]+'):\x20Fluxo\x20\x27'+_0x31d936[_0x5ef292(0x812)]+_0x5ef292(0x800)),new m(_0x5ef292(0x724));let _0x3575cb=await this[_0x5ef292(0x799)][_0x5ef292(0x4cc)][_0x5ef292(0x685)]({'where':{'_id':_0x31d936[_0x5ef292(0x812)]}});if(!_0x3575cb||!_0x3575cb[_0x5ef292(0x658)]?.[_0x5ef292(0x243)](this[_0x5ef292(0x3ec)]['wuid']))throw this[_0x5ef292(0x484)][_0x5ef292(0x62b)](this[_0x5ef292(0x75c)]+'\x20('+this[_0x5ef292(0x3ec)][_0x5ef292(0x490)]+_0x5ef292(0x159)+_0x31d936[_0x5ef292(0x812)]+_0x5ef292(0x70d)),new m(_0x5ef292(0x6ab)+_0x31d936['_id']+_0x5ef292(0x70d));if(!_0x3575cb['whoCanEdit']?.[_0x5ef292(0x243)](this[_0x5ef292(0x3ec)]['wuid']))throw new m(_0x5ef292(0x5f1));let _0x457821=!0x1;if(_0x31d936['condition']?.[_0x5ef292(0x6f7)]===!0x0)_0x3575cb[_0x5ef292(0x8aa)]=_0x3575cb[_0x5ef292(0x8aa)][_0x5ef292(0x516)](_0x433bac=>_0x433bac&&_0x31d936[_0x5ef292(0x1d7)]&&_0x433bac[_0x5ef292(0x812)]&&_0x31d936[_0x5ef292(0x1d7)][_0x5ef292(0x812)]&&_0x433bac['_id']['toString']()!==_0x31d936[_0x5ef292(0x1d7)][_0x5ef292(0x812)][_0x5ef292(0x44c)]()),_0x457821=!0x0;else{let _0x5568d5=_0x3575cb[_0x5ef292(0x8aa)][_0x5ef292(0x2c5)](_0xc133a0=>_0xc133a0&&_0x31d936[_0x5ef292(0x1d7)]&&_0xc133a0['_id']&&_0x31d936[_0x5ef292(0x1d7)][_0x5ef292(0x812)]&&_0xc133a0[_0x5ef292(0x812)][_0x5ef292(0x44c)]()===_0x31d936[_0x5ef292(0x1d7)]['_id'][_0x5ef292(0x44c)]());_0x5568d5?(_0x457821=_0x5568d5[_0x5ef292(0x31a)]!==_0x31d936[_0x5ef292(0x1d7)]['order'],Object[_0x5ef292(0x5ba)](_0x5568d5,_0x31d936[_0x5ef292(0x1d7)])):(_0x3575cb['conditions'][_0x5ef292(0x57f)](_0x31d936[_0x5ef292(0x1d7)]),_0x457821=!0x0);}if(_0x457821){_0x3575cb[_0x5ef292(0x8aa)]['sort']((_0x17f4dc,_0x4d1660)=>_0x17f4dc['order']>_0x4d1660['order']?0x1:_0x4d1660[_0x5ef292(0x31a)]>_0x17f4dc[_0x5ef292(0x31a)]?-0x1:0x0);for(let _0x1310ac=0x0;_0x1310ac<_0x3575cb[_0x5ef292(0x8aa)]['length'];_0x1310ac++)_0x3575cb[_0x5ef292(0x8aa)][_0x1310ac][_0x5ef292(0x31a)]=_0x1310ac+0x1;_0x3575cb['conditions'][_0x5ef292(0x836)]>0x0&&(_0x3575cb[_0x5ef292(0x8aa)][0x0][_0x5ef292(0x68e)]=_0x5ef292(0x24d));}let _0x2f6555=await this[_0x5ef292(0x799)][_0x5ef292(0x4cc)][_0x5ef292(0x828)](_0x3575cb[_0x5ef292(0x812)],_0x3575cb);if(!_0x2f6555)throw new Error(_0x5ef292(0x27a));return _0x2f6555;}catch(_0x536d9d){let _0x29225f=_0x5ef292(0x28a),_0xf94336=_0x536d9d instanceof Error?_0x536d9d[_0x5ef292(0x5b7)]:typeof _0x536d9d==_0x5ef292(0x808)?JSON[_0x5ef292(0x62f)](_0x536d9d):_0x536d9d,_0x1658f7=_0x29225f+':\x20'+_0xf94336;throw this[_0x5ef292(0x484)][_0x5ef292(0x62b)](this[_0x5ef292(0x75c)]+'\x20('+this[_0x5ef292(0x3ec)][_0x5ef292(0x490)]+_0x5ef292(0x872)+_0x1658f7),new m(_0x1658f7);}}async[a0_0x591e8d(0x5fc)](_0x30afa3){const _0x4a64bb=a0_0x591e8d;try{if(this['logger'][_0x4a64bb(0x768)](this['instanceName']+'\x20('+this[_0x4a64bb(0x3ec)][_0x4a64bb(0x490)]+_0x4a64bb(0x397)),!this[_0x4a64bb(0x693)][_0x4a64bb(0x26a)][_0x4a64bb(0x2c5)](_0x1c191c=>_0x1c191c['_id']===_0x30afa3['_id']))throw this[_0x4a64bb(0x484)][_0x4a64bb(0x768)](this[_0x4a64bb(0x75c)]+'\x20('+this[_0x4a64bb(0x3ec)]['wuid']+_0x4a64bb(0x72a)+_0x30afa3[_0x4a64bb(0x812)]+_0x4a64bb(0x800)),new m(_0x4a64bb(0x724));let _0x303d83=await this[_0x4a64bb(0x799)]['flow'][_0x4a64bb(0x685)]({'where':{'_id':_0x30afa3['_id']}});if(!_0x303d83||!_0x303d83[_0x4a64bb(0x658)]?.[_0x4a64bb(0x243)](this[_0x4a64bb(0x3ec)][_0x4a64bb(0x490)]))throw this[_0x4a64bb(0x484)]['error'](this[_0x4a64bb(0x75c)]+'\x20('+this[_0x4a64bb(0x3ec)]['wuid']+_0x4a64bb(0x159)+_0x30afa3[_0x4a64bb(0x812)]+_0x4a64bb(0x70d)),new m('Flow\x20\x27'+_0x30afa3[_0x4a64bb(0x812)]+_0x4a64bb(0x70d));if(!_0x303d83['whoCanEdit']?.[_0x4a64bb(0x243)](this[_0x4a64bb(0x3ec)][_0x4a64bb(0x490)]))throw new m(_0x4a64bb(0x5f1));let _0x47ceda=!0x1;if(_0x30afa3['varedit']?.[_0x4a64bb(0x6f7)]===!0x0)_0x303d83[_0x4a64bb(0x29b)]=_0x303d83[_0x4a64bb(0x29b)]['filter'](_0x2956a6=>_0x2956a6&&_0x30afa3[_0x4a64bb(0x2df)]&&_0x2956a6['_id']&&_0x30afa3['varedit'][_0x4a64bb(0x812)]&&_0x2956a6[_0x4a64bb(0x812)]['toString']()!==_0x30afa3[_0x4a64bb(0x2df)][_0x4a64bb(0x812)]['toString']()),_0x47ceda=!0x0;else{let _0x4dacd8=_0x303d83[_0x4a64bb(0x29b)][_0x4a64bb(0x2c5)](_0x102e53=>_0x102e53&&_0x30afa3[_0x4a64bb(0x2df)]&&_0x102e53[_0x4a64bb(0x812)]&&_0x30afa3[_0x4a64bb(0x2df)][_0x4a64bb(0x812)]&&_0x102e53[_0x4a64bb(0x812)][_0x4a64bb(0x44c)]()===_0x30afa3[_0x4a64bb(0x2df)]['_id'][_0x4a64bb(0x44c)]());_0x4dacd8?(_0x47ceda=_0x4dacd8[_0x4a64bb(0x31a)]!==_0x30afa3[_0x4a64bb(0x2df)][_0x4a64bb(0x31a)],Object['assign'](_0x4dacd8,_0x30afa3[_0x4a64bb(0x2df)])):(_0x303d83[_0x4a64bb(0x29b)][_0x4a64bb(0x57f)](_0x30afa3[_0x4a64bb(0x2df)]),_0x47ceda=!0x0);}if(_0x47ceda){_0x303d83['varedits'][_0x4a64bb(0x543)]((_0x4c839b,_0x163e2c)=>_0x4c839b[_0x4a64bb(0x31a)]>_0x163e2c[_0x4a64bb(0x31a)]?0x1:_0x163e2c[_0x4a64bb(0x31a)]>_0x4c839b[_0x4a64bb(0x31a)]?-0x1:0x0);for(let _0xd7d07c=0x0;_0xd7d07c<_0x303d83[_0x4a64bb(0x29b)][_0x4a64bb(0x836)];_0xd7d07c++)_0x303d83[_0x4a64bb(0x29b)][_0xd7d07c]['order']=_0xd7d07c+0x1;}let _0x5741ea=await this[_0x4a64bb(0x799)]['flow'][_0x4a64bb(0x828)](_0x303d83[_0x4a64bb(0x812)],_0x303d83);if(!_0x5741ea)throw new Error(_0x4a64bb(0x27a));return _0x5741ea;}catch(_0xc9eeb1){let _0x1aea97=_0x4a64bb(0x28a),_0x3040f0=_0xc9eeb1 instanceof Error?_0xc9eeb1['message']:typeof _0xc9eeb1==_0x4a64bb(0x808)?JSON['stringify'](_0xc9eeb1):_0xc9eeb1,_0x5c3ecf=_0x1aea97+':\x20'+_0x3040f0;throw this[_0x4a64bb(0x484)][_0x4a64bb(0x62b)](this[_0x4a64bb(0x75c)]+'\x20('+this[_0x4a64bb(0x3ec)][_0x4a64bb(0x490)]+'):\x20'+_0x5c3ecf),new m(_0x5c3ecf);}}async[a0_0x591e8d(0x4ba)](_0x1ef8db){const _0x1950e4=a0_0x591e8d;try{if(this[_0x1950e4(0x484)][_0x1950e4(0x768)](this[_0x1950e4(0x75c)]+'\x20('+this['instance'][_0x1950e4(0x490)]+_0x1950e4(0x669)),!this[_0x1950e4(0x693)][_0x1950e4(0x26a)][_0x1950e4(0x2c5)](_0x5f0504=>_0x5f0504['_id']===_0x1ef8db[_0x1950e4(0x812)]))throw this[_0x1950e4(0x484)][_0x1950e4(0x768)](this[_0x1950e4(0x75c)]+'\x20('+this[_0x1950e4(0x3ec)][_0x1950e4(0x490)]+_0x1950e4(0x72a)+_0x1ef8db[_0x1950e4(0x812)]+_0x1950e4(0x800)),new m(_0x1950e4(0x724));let _0x39823c=await this[_0x1950e4(0x799)]['flow']['findOne']({'where':{'_id':_0x1ef8db['_id']}});if(!_0x39823c||!_0x39823c['whoCanUse']?.[_0x1950e4(0x243)](this[_0x1950e4(0x3ec)][_0x1950e4(0x490)]))throw this[_0x1950e4(0x484)][_0x1950e4(0x62b)](this[_0x1950e4(0x75c)]+'\x20('+this['instance'][_0x1950e4(0x490)]+'):\x20Flow\x20\x27'+_0x1ef8db['_id']+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x1950e4(0x6ab)+_0x1ef8db['_id']+_0x1950e4(0x70d));if(!_0x39823c[_0x1950e4(0x5c8)]?.[_0x1950e4(0x243)](this[_0x1950e4(0x3ec)][_0x1950e4(0x490)]))throw new m(_0x1950e4(0x5f1));_0x1ef8db[_0x1950e4(0x7a4)][_0x1950e4(0x1f8)]=_0x1ef8db[_0x1950e4(0x7a4)][_0x1950e4(0x1f8)]['trim'](),_0x1ef8db[_0x1950e4(0x7a4)][_0x1950e4(0x1f8)][_0x1950e4(0x755)]('_')&&(_0x1ef8db['variable'][_0x1950e4(0x1f8)]=_0x1ef8db[_0x1950e4(0x7a4)][_0x1950e4(0x1f8)]['substring'](0x1)),_0x1ef8db[_0x1950e4(0x7a4)][_0x1950e4(0x1f8)]=_0x1ef8db[_0x1950e4(0x7a4)][_0x1950e4(0x1f8)][_0x1950e4(0x311)]();let _0x4b2e08=_0x39823c[_0x1950e4(0x45a)]['find'](_0x4b40b7=>_0x4b40b7[_0x1950e4(0x1f8)]===_0x1ef8db[_0x1950e4(0x7a4)]['name']);if(_0x4b2e08?.[_0x1950e4(0x2cf)]===!0x0)throw new Error('No\x20\x20permitido\x20editar\x20uma\x20varivel\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0x1ef8db[_0x1950e4(0x7a4)]?.[_0x1950e4(0x6f7)]===!0x0){if(!_0x4b2e08)return{'message':_0x1950e4(0x3df)};_0x39823c[_0x1950e4(0x45a)]=_0x39823c[_0x1950e4(0x45a)][_0x1950e4(0x516)](_0x16e208=>_0x16e208[_0x1950e4(0x1f8)]!==_0x1ef8db[_0x1950e4(0x7a4)][_0x1950e4(0x1f8)]);}else _0x4b2e08?Object[_0x1950e4(0x5ba)](_0x4b2e08,_0x1ef8db[_0x1950e4(0x7a4)]):_0x39823c[_0x1950e4(0x45a)]['push'](_0x1ef8db[_0x1950e4(0x7a4)]);let _0x3b3153=await this['repository'][_0x1950e4(0x4cc)][_0x1950e4(0x828)](_0x39823c['_id'],_0x39823c);if(!_0x3b3153)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x3b3153;}catch(_0xaede51){let _0x38e94d=_0x1950e4(0x81f),_0x50f570=_0xaede51 instanceof Error?_0xaede51[_0x1950e4(0x5b7)]:typeof _0xaede51==_0x1950e4(0x808)?JSON['stringify'](_0xaede51):_0xaede51,_0x3478e1=_0x38e94d+':\x20'+_0x50f570;throw this[_0x1950e4(0x484)]['error'](this[_0x1950e4(0x75c)]+'\x20('+this[_0x1950e4(0x3ec)][_0x1950e4(0x490)]+'):\x20'+_0x3478e1),new m(_0x3478e1);}}async['startFlow'](_0x309115){const _0x31b049=a0_0x591e8d;let _0x505906=null;try{if(!this['AutomateSystem']?.[_0x31b049(0x7d5)]['enabled'])throw new m(_0x31b049(0x4bb));this[_0x31b049(0x484)][_0x31b049(0x768)](this[_0x31b049(0x75c)]+'\x20('+this[_0x31b049(0x3ec)][_0x31b049(0x490)]+_0x31b049(0x890));let _0x334c93=(await this[_0x31b049(0x1b5)]({'numbers':[_0x309115[_0x31b049(0x166)]]}))[0x0];if(!_0x334c93['exists']&&!(0x0,w[_0x31b049(0x6c9)])(_0x334c93[_0x31b049(0x833)])&&!_0x334c93['jid'][_0x31b049(0x243)](_0x31b049(0x6aa)))throw _0x505906=JSON[_0x31b049(0x62f)](_0x334c93,null,0x2),new m(_0x334c93);let _0x21e70a;if(_0x309115[_0x31b049(0x1f8)][_0x31b049(0x836)]===0x24&&/^[0-9a-fA-F-]{36}$/['test'](_0x309115[_0x31b049(0x1f8)])?_0x21e70a=this['AutomateSystem'][_0x31b049(0x26a)][_0x31b049(0x2c5)](_0x55f177=>_0x55f177['_id']===_0x309115['name']):_0x21e70a=this[_0x31b049(0x693)]['flows'][_0x31b049(0x2c5)](_0x275994=>_0x275994[_0x31b049(0x1f8)]===_0x309115[_0x31b049(0x1f8)]),!_0x21e70a)throw this[_0x31b049(0x484)][_0x31b049(0x768)](this[_0x31b049(0x75c)]+'\x20('+this[_0x31b049(0x3ec)]['wuid']+_0x31b049(0x72a)+_0x309115[_0x31b049(0x1f8)]+'\x27\x20no\x20encontrado'),new m(_0x31b049(0x724));let _0x1f19cf=await this[_0x31b049(0x799)][_0x31b049(0x4cc)][_0x31b049(0x685)]({'where':{'_id':_0x21e70a[_0x31b049(0x812)]}});if(!_0x1f19cf||!_0x1f19cf[_0x31b049(0x658)]?.['includes'](this[_0x31b049(0x3ec)][_0x31b049(0x490)]))throw this[_0x31b049(0x484)][_0x31b049(0x62b)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Flow\x20\x27'+_0x21e70a['_id']+_0x31b049(0x70d)),_0x505906='Flow\x20\x27'+_0x21e70a[_0x31b049(0x812)]+_0x31b049(0x70d),new m(_0x505906);let _0x15f591=await this[_0x31b049(0x5dd)](_0x1f19cf,_0x334c93[_0x31b049(0x833)],_0x309115[_0x31b049(0x1b2)]);if(_0x15f591){this[_0x31b049(0x484)][_0x31b049(0x768)](this[_0x31b049(0x75c)]+'\x20('+this[_0x31b049(0x3ec)]['wuid']+'):\x20Criou\x20conversa\x20no\x20startFlow');let _0x37e24f=await this[_0x31b049(0x262)](_0x15f591);return _0x37e24f&&await this[_0x31b049(0x2aa)](_0x15f591,_0x37e24f),{'message':_0x31b049(0x550)+_0x309115[_0x31b049(0x166)]};}}catch(_0xd7b80){if(this['logger'][_0x31b049(0x62b)](this[_0x31b049(0x75c)]+'\x20('+this[_0x31b049(0x3ec)]['wuid']+_0x31b049(0x780)+(_0xd7b80 instanceof Error?_0xd7b80['message']:JSON[_0x31b049(0x62f)](_0xd7b80,null,0x2))),_0x505906=_0xd7b80 instanceof Error?_0xd7b80['message']:JSON['stringify'](_0xd7b80,null,0x2),_0x505906)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x505906);}}async[a0_0x591e8d(0x7dc)](_0x4c7d51,_0x537aaf,_0x17c6b1){const _0x2003c4=a0_0x591e8d;let _0x148c97=null;try{if(!this[_0x2003c4(0x693)]?.[_0x2003c4(0x7d5)]['enabled'])throw new m('Fluxos\x20no\x20esto\x20ativados');if(this[_0x2003c4(0x484)]['verbose'](this[_0x2003c4(0x75c)]+'\x20('+this['instance'][_0x2003c4(0x490)]+_0x2003c4(0x890)),_0x537aaf){let _0x29dab7=(await this[_0x2003c4(0x1b5)]({'numbers':[_0x537aaf]}))[0x0];if(!_0x29dab7[_0x2003c4(0x5c4)]&&!(0x0,w[_0x2003c4(0x6c9)])(_0x29dab7[_0x2003c4(0x833)])&&!_0x29dab7[_0x2003c4(0x833)][_0x2003c4(0x243)]('@broadcast'))throw _0x148c97=JSON[_0x2003c4(0x62f)](_0x29dab7,null,0x2),new m(_0x29dab7);_0x537aaf=_0x29dab7[_0x2003c4(0x833)];}else _0x537aaf||(_0x537aaf=(0x0,Y['v4'])());let _0x422efb=await this[_0x2003c4(0x799)][_0x2003c4(0x4cc)][_0x2003c4(0x685)]({'where':{'_id':_0x4c7d51}});if(!_0x422efb||!_0x422efb[_0x2003c4(0x658)]?.[_0x2003c4(0x243)](this[_0x2003c4(0x3ec)]['wuid']))throw this[_0x2003c4(0x484)][_0x2003c4(0x62b)](this[_0x2003c4(0x75c)]+'\x20('+this['instance']['wuid']+_0x2003c4(0x159)+_0x4c7d51+_0x2003c4(0x70d)),new m(_0x2003c4(0x6ab)+_0x4c7d51+_0x2003c4(0x70d));let _0x578bd5=await this[_0x2003c4(0x5dd)](_0x422efb,_0x537aaf,null);if(_0x578bd5){this[_0x2003c4(0x484)][_0x2003c4(0x768)](this[_0x2003c4(0x75c)]+'\x20('+this[_0x2003c4(0x3ec)][_0x2003c4(0x490)]+_0x2003c4(0x6c3));let _0xc8bb66;if(_0x17c6b1){let _0x20608a=_0x578bd5[_0x2003c4(0x546)][_0x2003c4(0x195)],_0x461056=this[_0x2003c4(0x1a5)](_0x17c6b1);Object[_0x2003c4(0x5ba)](_0x20608a,_0x461056),_0x578bd5['chatLog']['realVariables']=_0x20608a,_0xc8bb66={'error':!0x1,'apiResponse':_0x17c6b1};}let _0x880426=await this[_0x2003c4(0x262)](_0x578bd5);return _0x880426&&await this[_0x2003c4(0x2aa)](_0x578bd5,_0x880426),{'message':_0x2003c4(0x567)};}}catch(_0x5a5fb4){if(this[_0x2003c4(0x484)][_0x2003c4(0x62b)](this[_0x2003c4(0x75c)]+'\x20('+this[_0x2003c4(0x3ec)][_0x2003c4(0x490)]+_0x2003c4(0x780)+(_0x5a5fb4 instanceof Error?_0x5a5fb4[_0x2003c4(0x5b7)]:JSON['stringify'](_0x5a5fb4,null,0x2))),_0x148c97=_0x5a5fb4 instanceof Error?_0x5a5fb4[_0x2003c4(0x5b7)]:JSON[_0x2003c4(0x62f)](_0x5a5fb4,null,0x2),_0x148c97)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x148c97);}}async['closeExistingConversations'](_0x137554){const _0x45d6f5=a0_0x591e8d;try{let _0xa6b928={'remoteJid':_0x137554,'status':_0x45d6f5(0x4b7)},_0x395f23={'status':_0x45d6f5(0x764)},_0xa37805=await this[_0x45d6f5(0x799)][_0x45d6f5(0x8a8)][_0x45d6f5(0x430)](_0xa6b928,_0x395f23,this[_0x45d6f5(0x3ec)][_0x45d6f5(0x490)]);return this[_0x45d6f5(0x484)][_0x45d6f5(0x768)](this[_0x45d6f5(0x75c)]+'\x20('+this['instance']['wuid']+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0xa37805;}catch(_0x4b17a6){throw this[_0x45d6f5(0x484)][_0x45d6f5(0x62b)](this[_0x45d6f5(0x75c)]+'\x20('+this[_0x45d6f5(0x3ec)][_0x45d6f5(0x490)]+_0x45d6f5(0x422)+_0x4b17a6[_0x45d6f5(0x5b7)]),_0x4b17a6;}}async[a0_0x591e8d(0x5dd)](_0x318367,_0xc76230,_0x291622){const _0x256272=a0_0x591e8d;this[_0x256272(0x484)]['verbose'](this[_0x256272(0x75c)]+'\x20('+this['instance'][_0x256272(0x490)]+_0x256272(0x709)),await this['closeExistingConversations'](_0xc76230);try{let _0x3d8885=require('mongodb')[_0x256272(0x5f3)],_0x5a6028=Date['now'](),_0x470804=_0x256272(0x67e),_0x4e984e={},_0x470864={},_0x1da083=this['AutomateSystem'][_0x256272(0x26a)]['find'](_0x3a19e1=>_0x3a19e1[_0x256272(0x812)]===_0x318367[_0x256272(0x812)]?.[_0x256272(0x44c)]()),_0x402741=_0x1da083?.['minutesToClose']??_0x318367[_0x256272(0x797)]??0x0,_0x2e49ad=_0x1da083?.[_0x256272(0x2b9)]??_0x318367[_0x256272(0x2b9)]??!0x1,_0x1b637f={'flowId':_0x318367[_0x256272(0x812)],..._0x318367,'chatLog':null},_0xd1206=await this[_0x256272(0x892)](_0x1b637f[_0x256272(0x45a)]),_0x2e82ee=await this[_0x256272(0x71f)](_0xc76230),_0x5bca6a={..._0xd1206,..._0x2e82ee,'_remoteJid':_0xc76230},_0x5bb075={'lastReceivedMessage':_0x4e984e,'lastSendMessage':_0x470864,'lastBlockId':_0x470804,'lastCondition':!0x0,'realVariables':_0x5bca6a};_0x1b637f[_0x256272(0x546)]=_0x5bb075,_0x1b637f[_0x256272(0x546)][_0x256272(0x195)]={..._0x5bca6a,..._0x291622},delete _0x1b637f[_0x256272(0x812)],_0x1b637f[_0x256272(0x812)]=new _0x3d8885(),_0x1b637f[_0x256272(0x53e)]=_0x5a6028,_0x1b637f[_0x256272(0x360)]=_0x256272(0x4b7),_0x1b637f[_0x256272(0x166)]=_0xc76230,_0x1b637f['minutesToClose']=_0x402741,_0x1b637f[_0x256272(0x2b9)]=_0x2e49ad,_0x1b637f['_id']=_0x318367[_0x256272(0x812)];let _0x4e2d75=await this[_0x256272(0x799)][_0x256272(0x8a8)][_0x256272(0x828)](_0x1b637f[_0x256272(0x812)],_0x1b637f,this[_0x256272(0x3ec)][_0x256272(0x490)]);return this[_0x256272(0x484)][_0x256272(0x768)](this[_0x256272(0x75c)]+'\x20('+this[_0x256272(0x3ec)][_0x256272(0x490)]+_0x256272(0x5ae)),_0x4e2d75?_0x1b637f:null;}catch(_0x1c47f0){let _0xb05129=_0x256272(0x236),_0x2b0cb0=_0x1c47f0 instanceof Error?_0x1c47f0['message']:typeof _0x1c47f0==_0x256272(0x808)?JSON[_0x256272(0x62f)](_0x1c47f0):_0x1c47f0,_0x497d40=_0xb05129+':\x20'+_0x2b0cb0;throw this[_0x256272(0x484)][_0x256272(0x62b)](this[_0x256272(0x75c)]+'\x20('+this['instance'][_0x256272(0x490)]+_0x256272(0x872)+_0x497d40),new m(_0x497d40);}}async[a0_0x591e8d(0x80d)](_0x1710a8){const _0x388c1e=a0_0x591e8d;try{this[_0x388c1e(0x484)][_0x388c1e(0x768)](this['instanceName']+'\x20('+this[_0x388c1e(0x3ec)]['wuid']+'):\x20Buscando\x20conversa...'),this[_0x388c1e(0x484)][_0x388c1e(0x768)](this[_0x388c1e(0x75c)]+'\x20('+this[_0x388c1e(0x3ec)][_0x388c1e(0x490)]+_0x388c1e(0x4a0)+_0x1710a8);let _0xaffb2b={'where':{'_id':_0x1710a8}};return await this[_0x388c1e(0x799)]['flowConversation'][_0x388c1e(0x685)](_0xaffb2b,this[_0x388c1e(0x3ec)][_0x388c1e(0x490)]);}catch(_0x3acd4b){let _0x2dae55=_0x388c1e(0x406),_0xc44e0f=_0x3acd4b instanceof Error?_0x3acd4b[_0x388c1e(0x5b7)]:typeof _0x3acd4b==_0x388c1e(0x808)?JSON[_0x388c1e(0x62f)](_0x3acd4b):_0x3acd4b,_0x5aa1d0=_0x2dae55+':\x20'+_0xc44e0f;throw this['logger']['error'](this[_0x388c1e(0x75c)]+'\x20('+this[_0x388c1e(0x3ec)][_0x388c1e(0x490)]+_0x388c1e(0x872)+_0x5aa1d0),new m(_0x5aa1d0);}}async[a0_0x591e8d(0x4da)](_0x22686f){const _0x349ea3=a0_0x591e8d;try{return this[_0x349ea3(0x484)]['verbose'](this[_0x349ea3(0x75c)]+'\x20('+this['instance']['wuid']+_0x349ea3(0x4d7)),await this[_0x349ea3(0x799)][_0x349ea3(0x8a8)][_0x349ea3(0x2c5)](_0x22686f,this[_0x349ea3(0x3ec)][_0x349ea3(0x490)]);}catch(_0xf90631){let _0x35ef04=_0x349ea3(0x697),_0x5d0993=_0xf90631 instanceof Error?_0xf90631[_0x349ea3(0x5b7)]:typeof _0xf90631==_0x349ea3(0x808)?JSON['stringify'](_0xf90631):_0xf90631,_0x1c8edd=_0x35ef04+':\x20'+_0x5d0993;throw this[_0x349ea3(0x484)][_0x349ea3(0x62b)](this[_0x349ea3(0x75c)]+'\x20('+this['instance'][_0x349ea3(0x490)]+_0x349ea3(0x872)+_0x1c8edd),new m(_0x1c8edd);}}async[a0_0x591e8d(0x315)](_0x178cb6){const _0x10fda6=a0_0x591e8d;try{return this['logger']['verbose'](this[_0x10fda6(0x75c)]+'\x20('+this[_0x10fda6(0x3ec)][_0x10fda6(0x490)]+'):\x20Deletando\x20conversa...'),this[_0x10fda6(0x484)][_0x10fda6(0x768)](this[_0x10fda6(0x75c)]+'\x20('+this['instance'][_0x10fda6(0x490)]+_0x10fda6(0x3d2)+_0x178cb6),(await this[_0x10fda6(0x799)][_0x10fda6(0x8a8)][_0x10fda6(0x1cc)]({'where':{'_id':_0x178cb6[_0x10fda6(0x812)]}},this['instance'][_0x10fda6(0x490)]))[_0x10fda6(0x57a)]===0x0?{'message':_0x10fda6(0x1d3)}:{'message':_0x10fda6(0x4f2)};}catch(_0xffa006){let _0x363880=_0x10fda6(0x169),_0x1b4a5d=_0xffa006 instanceof Error?_0xffa006[_0x10fda6(0x5b7)]:typeof _0xffa006==_0x10fda6(0x808)?JSON[_0x10fda6(0x62f)](_0xffa006):_0xffa006,_0x2c7ce1=_0x363880+':\x20'+_0x1b4a5d;throw this[_0x10fda6(0x484)][_0x10fda6(0x62b)](this[_0x10fda6(0x75c)]+'\x20('+this['instance']['wuid']+_0x10fda6(0x872)+_0x2c7ce1),new m(_0x2c7ce1);}}async['editConversation'](_0xf6466e){const _0x165d9f=a0_0x591e8d;try{let {_id:_0x2f15dc,chatLog:_0x5f4a9e,status:_0x5b0674}=_0xf6466e;if(!_0x2f15dc)return{'message':_0x165d9f(0x826)};let _0x35c703={};if(_0x5b0674!==void 0x0&&(_0x35c703[_0x165d9f(0x360)]=_0x5b0674),Object[_0x165d9f(0x34b)](_0x35c703)[_0x165d9f(0x836)]===0x0)return{'message':_0x165d9f(0x741)};let _0xc437af=await this[_0x165d9f(0x799)][_0x165d9f(0x8a8)][_0x165d9f(0x828)](_0x2f15dc,_0x35c703,this[_0x165d9f(0x3ec)][_0x165d9f(0x490)]);return _0xc437af||{'message':_0x165d9f(0x423)};}catch(_0x2b4dc7){let _0x3c59c8='Erro\x20ao\x20editar\x20a\x20conversa',_0x174b38=_0x2b4dc7 instanceof Error?_0x2b4dc7[_0x165d9f(0x5b7)]:typeof _0x2b4dc7==_0x165d9f(0x808)?JSON[_0x165d9f(0x62f)](_0x2b4dc7):_0x2b4dc7,_0x2561a0=_0x3c59c8+':\x20'+_0x174b38;throw this[_0x165d9f(0x484)][_0x165d9f(0x62b)](this[_0x165d9f(0x75c)]+'\x20('+this[_0x165d9f(0x3ec)][_0x165d9f(0x490)]+_0x165d9f(0x872)+_0x2561a0),new m(_0x2561a0);}}async['editChat'](_0x49d353){const _0x482b04=a0_0x591e8d;try{_0x49d353[_0x482b04(0x812)]=this[_0x482b04(0x649)](_0x49d353[_0x482b04(0x812)]);let _0x3812e3=await this[_0x482b04(0x799)][_0x482b04(0x4b2)][_0x482b04(0x685)]({'where':{'_id':_0x49d353[_0x482b04(0x812)]}},this[_0x482b04(0x3ec)]['wuid']);if(!_0x3812e3)throw new m(_0x482b04(0x793));let {_id:_0x2d4278,leadInfo:_0x4d70b2}=_0x49d353;if(!_0x2d4278)throw new Error(_0x482b04(0x5cf));if(_0x49d353['delete']===_0x482b04(0x5ec))return await this['deleteChat'](_0x49d353[_0x482b04(0x812)]),await this[_0x482b04(0x799)][_0x482b04(0x4b2)][_0x482b04(0x6f7)]({'where':{'_id':_0x49d353[_0x482b04(0x812)]}},this[_0x482b04(0x3ec)][_0x482b04(0x490)]),await this[_0x482b04(0x799)][_0x482b04(0x5b7)]['delete']({'where':{'key':{'remoteJid':_0x49d353[_0x482b04(0x812)]}}},this[_0x482b04(0x3ec)][_0x482b04(0x490)]),_0x49d353=await this[_0x482b04(0x799)][_0x482b04(0x4b2)][_0x482b04(0x828)]({'where':{'_id':_0x49d353[_0x482b04(0x812)]}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x482b04(0x490)]),U(this[_0x482b04(0x75c)],_0x482b04(0x672),{'chat':_0x49d353}),{'message':_0x482b04(0x5ab)};if(_0x49d353[_0x482b04(0x6f7)]===_0x482b04(0x3e7))return await this[_0x482b04(0x799)][_0x482b04(0x5b7)][_0x482b04(0x6f7)]({'where':{'key':{'remoteJid':_0x49d353[_0x482b04(0x812)]}}},this[_0x482b04(0x3ec)][_0x482b04(0x490)]),_0x49d353=await this['repository'][_0x482b04(0x4b2)][_0x482b04(0x828)]({'where':{'_id':_0x49d353['_id']}},{'lastmsg':0x0,'unreadcount':0x0},this['instance']['wuid']),U(this['instanceName'],_0x482b04(0x672),{'chat':_0x49d353}),{'message':_0x482b04(0x28e)};let _0x36594e=(_0x342b28,_0x47fad2,_0x3f2ad0)=>{const _0x1ccd8b=_0x482b04;_0x342b28&&_0x3f2ad0[_0x1ccd8b(0x5ce)](_0x1dbd64=>{const _0x306dc3=_0x1ccd8b;_0x342b28[_0x1dbd64]!==void 0x0&&(_0x47fad2[_0x306dc3(0x3c4)+_0x1dbd64]=_0x342b28[_0x1dbd64]);});},_0x18e55f={};if(_0x482b04(0x877)in _0x49d353&&(this[_0x482b04(0x484)][_0x482b04(0x768)](this['instanceName']+'\x20('+this[_0x482b04(0x3ec)][_0x482b04(0x490)]+_0x482b04(0x855)+_0x49d353[_0x482b04(0x812)]),_0x49d353[_0x482b04(0x877)]=_0x49d353[_0x482b04(0x877)]===0x0?null:-0x1,await this[_0x482b04(0x296)]['chatModify']({'mute':_0x49d353['muteEndTime']},_0x49d353['_id']),_0x18e55f[_0x482b04(0x877)]=Number(_0x49d353[_0x482b04(0x877)])),_0x4d70b2&&(_0x36594e(_0x4d70b2,_0x18e55f,['nome',_0x482b04(0x8a4),_0x482b04(0x60f),_0x482b04(0x182),_0x482b04(0x360),_0x482b04(0x7df),_0x482b04(0x82d),'atendimentoAberto',_0x482b04(0x58c),'etiquetas',_0x482b04(0x1d0)]),Array[_0x482b04(0x7e5)](_0x4d70b2[_0x482b04(0x772)])&&(_0x18e55f[_0x482b04(0x187)]=_0x4d70b2['customFields'][_0x482b04(0x276)](_0x58c737=>({'_id':_0x58c737[_0x482b04(0x812)],'value':_0x58c737['value']}))),_0x49d353[_0x482b04(0x2cf)]['etiquetas']!==void 0x0)){let _0x1e5041=await this[_0x482b04(0x799)][_0x482b04(0x835)][_0x482b04(0x2c5)]({'where':{}},this['instance'][_0x482b04(0x490)]),_0x396876=new Set(_0x49d353['leadInfo'][_0x482b04(0x325)]||[]),_0x177f4f=new Set(_0x49d353[_0x482b04(0x2cf)]['etiquetas']),_0x505e77=new Set(_0x1e5041[_0x482b04(0x276)](_0x4808d1=>_0x4808d1[_0x482b04(0x812)])),_0x3d93e6=[..._0x177f4f][_0x482b04(0x516)](_0x29cfb5=>!_0x396876[_0x482b04(0x1ea)](_0x29cfb5)&&_0x505e77['has'](_0x29cfb5)),_0xd9e276=[..._0x396876]['filter'](_0x341cbb=>!_0x177f4f[_0x482b04(0x1ea)](_0x341cbb));if(_0x18e55f[_0x482b04(0x379)]=[..._0x396876],_0x3812e3&&!_0x3812e3['imported']){for(let _0x43b09e of _0x3d93e6)await this[_0x482b04(0x180)](_0x43b09e,_0x49d353[_0x482b04(0x812)]),_0x396876[_0x482b04(0x67f)](_0x43b09e);for(let _0x323fb6 of _0xd9e276)await this['RemoveChatLabel'](_0x323fb6,_0x49d353[_0x482b04(0x812)]),_0x396876[_0x482b04(0x6f7)](_0x323fb6);}}if(_0x49d353[_0x482b04(0x24a)]!==void 0x0&&(_0x18e55f['unreadcount']=Number(_0x49d353[_0x482b04(0x24a)])),Object['keys'](_0x18e55f)['length']===0x0)throw new Error(_0x482b04(0x741));let _0x218dc3=await this['repository'][_0x482b04(0x4b2)][_0x482b04(0x828)]({'where':{'_id':_0x49d353[_0x482b04(0x812)]}},_0x18e55f,this[_0x482b04(0x3ec)]['wuid']);return _0x218dc3&&U(this[_0x482b04(0x75c)],_0x482b04(0x672),{'chat':_0x218dc3}),_0x218dc3?(this[_0x482b04(0x484)][_0x482b04(0x768)](this[_0x482b04(0x75c)]+'\x20('+this[_0x482b04(0x3ec)][_0x482b04(0x490)]+_0x482b04(0x872)+JSON[_0x482b04(0x62f)](_0x218dc3,null,0x2)),_0x218dc3):{'message':_0x482b04(0x668)};}catch(_0x573719){let _0x43faea=_0x482b04(0x21d),_0x4b4779=_0x573719 instanceof Error?_0x573719['message']:typeof _0x573719==_0x482b04(0x808)?JSON[_0x482b04(0x62f)](_0x573719):_0x573719,_0x1cfcc0=_0x43faea+':\x20'+_0x4b4779;throw this[_0x482b04(0x484)][_0x482b04(0x62b)](this[_0x482b04(0x75c)]+'\x20('+this[_0x482b04(0x3ec)][_0x482b04(0x490)]+_0x482b04(0x872)+_0x1cfcc0),new m(_0x1cfcc0);}}async['AddChatLabel'](_0x1edb9d,_0x5315c2){const _0x5aba54=a0_0x591e8d;try{await this[_0x5aba54(0x296)][_0x5aba54(0x88e)](_0x5315c2,_0x1edb9d),this[_0x5aba54(0x484)]['info'](this[_0x5aba54(0x75c)]+'\x20('+this[_0x5aba54(0x3ec)]['wuid']+_0x5aba54(0x1a3)+_0x1edb9d+'\x20adicionado\x20ao\x20chat\x20'+_0x5315c2+_0x5aba54(0x2a6));}catch(_0x25433e){this[_0x5aba54(0x484)][_0x5aba54(0x62b)](_0x5aba54(0x7b5)+_0x1edb9d+_0x5aba54(0x223)+_0x5315c2+':\x20'+_0x25433e);}}async[a0_0x591e8d(0x43c)](_0x3c9159,_0x552a72){const _0x1e1351=a0_0x591e8d;try{await this[_0x1e1351(0x296)][_0x1e1351(0x439)](_0x552a72,_0x3c9159),this[_0x1e1351(0x484)][_0x1e1351(0x7ed)](this[_0x1e1351(0x75c)]+'\x20('+this[_0x1e1351(0x3ec)][_0x1e1351(0x490)]+_0x1e1351(0x1a3)+_0x3c9159+_0x1e1351(0x31b)+_0x552a72+'\x20com\x20sucesso.');}catch(_0x64dd74){this[_0x1e1351(0x484)]['error']('Erro\x20ao\x20remover\x20label\x20'+_0x3c9159+_0x1e1351(0x3e2)+_0x552a72+':\x20'+_0x64dd74);}}async['updateAgent'](_0x28c923){const _0x2596f0=a0_0x591e8d;try{let _0x5be413=await this[_0x2596f0(0x799)][_0x2596f0(0x79b)][_0x2596f0(0x67b)](this[_0x2596f0(0x3ec)][_0x2596f0(0x490)]),_0x2be391=_0x28c923[_0x2596f0(0x812)]?_0x5be413[_0x2596f0(0x2a5)][_0x2596f0(0x3c5)](_0xe293bb=>_0xe293bb['_id']===_0x28c923[_0x2596f0(0x812)]):-0x1;if(_0x28c923[_0x2596f0(0x6f7)]&&_0x2be391>-0x1)_0x5be413[_0x2596f0(0x2a5)][_0x2596f0(0x71d)](_0x2be391,0x1);else{if(_0x2be391>-0x1){let _0x228122=_0x5be413['agents'][_0x2be391];_0x28c923[_0x2596f0(0x175)]&&(_0x228122[_0x2596f0(0x175)]=_0x28c923[_0x2596f0(0x175)]),_0x28c923[_0x2596f0(0x1f8)]&&(_0x228122[_0x2596f0(0x1f8)]=_0x28c923['name']),_0x28c923['email']&&(_0x228122[_0x2596f0(0x60f)]=_0x28c923['email']),_0x28c923[_0x2596f0(0x2a4)]&&(_0x228122['role']=_0x28c923[_0x2596f0(0x2a4)]);}else _0x5be413[_0x2596f0(0x2a5)]['push']({'_id':_0x28c923[_0x2596f0(0x812)]||new pe['default'][(_0x2596f0(0x52e))][(_0x2596f0(0x5f3))]()['toString'](),'fone':_0x28c923[_0x2596f0(0x175)],'name':_0x28c923[_0x2596f0(0x1f8)],'email':_0x28c923[_0x2596f0(0x60f)],'role':_0x28c923[_0x2596f0(0x2a4)]});}let _0x46bfd9={'agents':_0x5be413[_0x2596f0(0x2a5)]},_0x5e5497=await this['repository'][_0x2596f0(0x79b)]['update'](_0x46bfd9,this[_0x2596f0(0x3ec)][_0x2596f0(0x490)]);return this[_0x2596f0(0x693)]=_0x5e5497,this[_0x2596f0(0x484)][_0x2596f0(0x768)](this[_0x2596f0(0x75c)]+'\x20('+this[_0x2596f0(0x3ec)]['wuid']+'):\x20alterando\x20this.AutomateSystem'),this[_0x2596f0(0x484)]['verbose'](this[_0x2596f0(0x75c)]+'\x20('+this[_0x2596f0(0x3ec)][_0x2596f0(0x490)]+_0x2596f0(0x872)+this[_0x2596f0(0x693)]),_0x5e5497;}catch(_0x17d615){let _0x39a22d=_0x2596f0(0x6de),_0x23ae54=_0x17d615 instanceof Error?_0x17d615[_0x2596f0(0x5b7)]:typeof _0x17d615=='object'?JSON['stringify'](_0x17d615):_0x17d615,_0x9711da=_0x39a22d+':\x20'+_0x23ae54;throw this[_0x2596f0(0x484)][_0x2596f0(0x62b)](this[_0x2596f0(0x75c)]+'\x20('+this['instance'][_0x2596f0(0x490)]+_0x2596f0(0x872)+_0x9711da),new m(_0x9711da);}}async[a0_0x591e8d(0x82a)](_0x2f0913){const _0x1a3c8b=a0_0x591e8d;try{let _0x79dec6=await this['repository']['automateSystem'][_0x1a3c8b(0x67b)](this[_0x1a3c8b(0x3ec)][_0x1a3c8b(0x490)]),_0x45f505=_0x2f0913[_0x1a3c8b(0x812)]?_0x79dec6['customFields']['findIndex'](_0x137d03=>_0x137d03[_0x1a3c8b(0x812)]===_0x2f0913[_0x1a3c8b(0x812)]):-0x1,_0x19eb87=!0x1,_0x24b247=_0x79dec6[_0x1a3c8b(0x772)][_0x1a3c8b(0x7ba)](_0x1ea472=>_0x1ea472['order']===_0x2f0913[_0x1a3c8b(0x31a)]);if(_0x2f0913[_0x1a3c8b(0x6f7)]&&_0x45f505>-0x1)_0x79dec6['customFields'][_0x1a3c8b(0x71d)](_0x45f505,0x1),_0x19eb87=!0x0;else{if(_0x45f505>-0x1){if(_0x79dec6[_0x1a3c8b(0x772)][_0x1a3c8b(0x7ba)](_0x30f367=>_0x30f367[_0x1a3c8b(0x1f8)]===_0x2f0913['name']&&_0x30f367['_id']!==_0x2f0913[_0x1a3c8b(0x812)]))throw new Error(_0x1a3c8b(0x3e4));let _0x120ed0=_0x79dec6[_0x1a3c8b(0x772)][_0x45f505];_0x2f0913[_0x1a3c8b(0x31a)]&&(_0x24b247||!Number[_0x1a3c8b(0x446)](_0x2f0913[_0x1a3c8b(0x31a)]))&&(_0x120ed0[_0x1a3c8b(0x31a)]=_0x2f0913[_0x1a3c8b(0x31a)],_0x19eb87=!0x0),_0x2f0913[_0x1a3c8b(0x1f8)]&&(_0x120ed0[_0x1a3c8b(0x1f8)]=_0x2f0913['name']);}else{if(_0x79dec6[_0x1a3c8b(0x772)][_0x1a3c8b(0x7ba)](_0x469bae=>_0x469bae[_0x1a3c8b(0x1f8)]===_0x2f0913[_0x1a3c8b(0x1f8)]&&_0x469bae[_0x1a3c8b(0x812)]!==_0x2f0913['_id']))throw new Error('Nome\x20do\x20campo\x20personalizado\x20j\x20existe.');_0x79dec6[_0x1a3c8b(0x772)]['push']({'_id':_0x2f0913[_0x1a3c8b(0x812)]||new pe[(_0x1a3c8b(0x2ab))][(_0x1a3c8b(0x52e))][(_0x1a3c8b(0x5f3))]()[_0x1a3c8b(0x44c)](),'order':_0x2f0913['order'],'name':_0x2f0913[_0x1a3c8b(0x1f8)]}),_0x19eb87=!0x0;}}if(_0x19eb87){_0x79dec6[_0x1a3c8b(0x772)][_0x1a3c8b(0x543)]((_0x307c3a,_0x15cb24)=>_0x307c3a[_0x1a3c8b(0x31a)]>_0x15cb24['order']?0x1:_0x15cb24['order']>_0x307c3a[_0x1a3c8b(0x31a)]?-0x1:0x0);for(let _0x5df1c2=0x0;_0x5df1c2<_0x79dec6[_0x1a3c8b(0x772)][_0x1a3c8b(0x836)];_0x5df1c2++)_0x79dec6[_0x1a3c8b(0x772)][_0x5df1c2][_0x1a3c8b(0x31a)]=_0x5df1c2+0x1;}let _0x9bf6ee=await this[_0x1a3c8b(0x799)][_0x1a3c8b(0x79b)][_0x1a3c8b(0x1d9)](_0x79dec6,this[_0x1a3c8b(0x3ec)][_0x1a3c8b(0x490)]);return this[_0x1a3c8b(0x693)]=_0x9bf6ee,this[_0x1a3c8b(0x484)][_0x1a3c8b(0x768)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x1a3c8b(0x809)),this[_0x1a3c8b(0x484)][_0x1a3c8b(0x768)](this[_0x1a3c8b(0x75c)]+'\x20('+this['instance'][_0x1a3c8b(0x490)]+'):\x20'+this['AutomateSystem']),_0x9bf6ee;}catch(_0x3edc8b){let _0x41d77c=_0x1a3c8b(0x823),_0x5f1a77=_0x3edc8b instanceof Error?_0x3edc8b[_0x1a3c8b(0x5b7)]:typeof _0x3edc8b==_0x1a3c8b(0x808)?JSON['stringify'](_0x3edc8b):_0x3edc8b,_0x254b10=_0x41d77c+':\x20'+_0x5f1a77;throw this[_0x1a3c8b(0x484)]['error'](this[_0x1a3c8b(0x75c)]+'\x20('+this[_0x1a3c8b(0x3ec)][_0x1a3c8b(0x490)]+_0x1a3c8b(0x872)+_0x254b10),new m(_0x254b10);}}async['updateAutoCompleteMessages'](_0xe0d6a8){const _0x5916d0=a0_0x591e8d;try{let _0x150979=await this[_0x5916d0(0x799)][_0x5916d0(0x79b)][_0x5916d0(0x67b)](this[_0x5916d0(0x3ec)][_0x5916d0(0x490)]),_0x31b6e9=_0x150979?.[_0x5916d0(0x255)]?.[_0x5916d0(0x3c5)](_0x248b8d=>_0x248b8d[_0x5916d0(0x812)]===_0xe0d6a8?.['_id']);if(_0xe0d6a8?.[_0x5916d0(0x6f7)])_0x31b6e9>-0x1&&_0x150979?.[_0x5916d0(0x255)]?.[_0x5916d0(0x71d)](_0x31b6e9,0x1);else{if(_0x31b6e9>-0x1){let _0x35e0cd=_0x150979[_0x5916d0(0x255)][_0x31b6e9];_0x35e0cd[_0x5916d0(0x31a)]=_0xe0d6a8?.['order']||_0x35e0cd['order'],_0x35e0cd[_0x5916d0(0x688)]=_0xe0d6a8?.[_0x5916d0(0x688)]||_0x35e0cd[_0x5916d0(0x688)],_0x35e0cd[_0x5916d0(0x5b7)]=_0xe0d6a8?.[_0x5916d0(0x5b7)]||_0x35e0cd[_0x5916d0(0x5b7)];}else{let _0x3aafc9={'_id':_0xe0d6a8?.['_id']||new pe[(_0x5916d0(0x2ab))]['Types']['ObjectId']()[_0x5916d0(0x44c)](),'order':_0xe0d6a8?.[_0x5916d0(0x31a)],'command':_0xe0d6a8?.[_0x5916d0(0x688)],'message':_0xe0d6a8?.[_0x5916d0(0x5b7)]};_0x150979?.[_0x5916d0(0x255)]?.['push'](_0x3aafc9);}}_0x150979?.['autoCompleteMessages']?.[_0x5916d0(0x543)]((_0xec426b,_0x6a222a)=>_0xec426b[_0x5916d0(0x31a)]-_0x6a222a['order']);let _0x228b83=await this['repository']['automateSystem'][_0x5916d0(0x1d9)](_0x150979,this[_0x5916d0(0x3ec)]['wuid']);return this[_0x5916d0(0x693)]=_0x228b83,this['logger'][_0x5916d0(0x768)](this[_0x5916d0(0x75c)]+'\x20('+this['instance'][_0x5916d0(0x490)]+_0x5916d0(0x809)),_0x228b83;}catch(_0x25746d){let _0x36f0bf='Erro\x20ao\x20tentar\x20autoCompleteMessages',_0x5c2c87=_0x25746d instanceof Error?_0x25746d[_0x5916d0(0x5b7)]:typeof _0x25746d==_0x5916d0(0x808)?JSON[_0x5916d0(0x62f)](_0x25746d):_0x25746d,_0x14ab0f=_0x36f0bf+':\x20'+_0x5c2c87;throw this[_0x5916d0(0x484)][_0x5916d0(0x62b)](this['instanceName']+'\x20('+this[_0x5916d0(0x3ec)][_0x5916d0(0x490)]+_0x5916d0(0x872)+_0x14ab0f),new m(_0x14ab0f);}}async[a0_0x591e8d(0x6c1)](_0x352f6a){const _0x3e320d=a0_0x591e8d;try{let _0x53e1be=await this['repository'][_0x3e320d(0x79b)][_0x3e320d(0x67b)](this['instance'][_0x3e320d(0x490)]);if(!_0x53e1be)throw new Error(_0x3e320d(0x66c));let _0x2b678b={'_id':_0x53e1be['_id'],'flowConfig':{'enabled':_0x352f6a[_0x3e320d(0x3ab)]??_0x53e1be[_0x3e320d(0x7d5)]['enabled'],'ignoreGroups':_0x352f6a[_0x3e320d(0x485)]??_0x53e1be[_0x3e320d(0x7d5)]['ignoreGroups'],'stopConversation':_0x352f6a[_0x3e320d(0x247)][_0x3e320d(0x311)]()??_0x53e1be[_0x3e320d(0x7d5)][_0x3e320d(0x247)][_0x3e320d(0x311)](),'stopMinutes':_0x352f6a[_0x3e320d(0x756)]??_0x53e1be[_0x3e320d(0x7d5)][_0x3e320d(0x756)],'stopWhenYouSendMsg':_0x352f6a[_0x3e320d(0x492)]??_0x53e1be['flowConfig'][_0x3e320d(0x492)]}},_0x51699b=await this[_0x3e320d(0x799)][_0x3e320d(0x79b)][_0x3e320d(0x1d9)](_0x2b678b,this[_0x3e320d(0x3ec)][_0x3e320d(0x490)]);return this[_0x3e320d(0x693)]=_0x51699b,this['logger'][_0x3e320d(0x768)](this[_0x3e320d(0x75c)]+'\x20('+this['instance'][_0x3e320d(0x490)]+'):\x20alterando\x20this.AutomateSystem'),this['logger'][_0x3e320d(0x768)](this[_0x3e320d(0x75c)]+'\x20('+this[_0x3e320d(0x3ec)][_0x3e320d(0x490)]+_0x3e320d(0x872)+this[_0x3e320d(0x693)]),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x51699b;}catch(_0x59825b){let _0x443810=_0x3e320d(0x381),_0x561f72=_0x59825b instanceof Error?_0x59825b[_0x3e320d(0x5b7)]:typeof _0x59825b==_0x3e320d(0x808)?JSON['stringify'](_0x59825b):_0x59825b,_0x16fa6c=_0x443810+':\x20'+_0x561f72;throw this[_0x3e320d(0x484)][_0x3e320d(0x62b)](this[_0x3e320d(0x75c)]+'\x20('+this['instance']['wuid']+_0x3e320d(0x872)+_0x16fa6c),new m(_0x16fa6c);}}async[a0_0x591e8d(0x689)](){const _0x4ceb7c=a0_0x591e8d;try{let _0x311e45=await this[_0x4ceb7c(0x799)][_0x4ceb7c(0x79b)][_0x4ceb7c(0x67b)](this['instance'][_0x4ceb7c(0x490)]);return this[_0x4ceb7c(0x693)]=_0x311e45,_0x311e45;}catch(_0x13edc0){let _0x21bc3e='Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem',_0x1a97dd=_0x13edc0 instanceof Error?_0x13edc0['message']:typeof _0x13edc0==_0x4ceb7c(0x808)?JSON['stringify'](_0x13edc0):_0x13edc0,_0x74f345=_0x21bc3e+':\x20'+_0x1a97dd;throw this[_0x4ceb7c(0x484)][_0x4ceb7c(0x62b)](this['instanceName']+'\x20('+this[_0x4ceb7c(0x3ec)][_0x4ceb7c(0x490)]+_0x4ceb7c(0x872)+_0x74f345),new m(_0x74f345);}}async[a0_0x591e8d(0x394)](){const _0x19d383=a0_0x591e8d;await this[_0x19d383(0x801)]['runExclusive'](async()=>{const _0x3a9b26=_0x19d383;this[_0x3a9b26(0x3ec)]['ScheduleMessage'][_0x3a9b26(0x7f6)]&&clearTimeout(this[_0x3a9b26(0x3ec)][_0x3a9b26(0x48c)][_0x3a9b26(0x7f6)]),this[_0x3a9b26(0x3ec)][_0x3a9b26(0x48c)]['timeout']=setTimeout(()=>{const _0x58fbc7=_0x3a9b26;this[_0x58fbc7(0x387)]();},0x2*0x3c*0x3e8+0x14*0x3e8);});}async[a0_0x591e8d(0x387)](){const _0x5e257e=a0_0x591e8d;Date[_0x5e257e(0x673)]()-this['instance'][_0x5e257e(0x48c)]['lastSend']>=0x1d4c0&&(this[_0x5e257e(0x484)][_0x5e257e(0x768)](this['instanceName']+'\x20('+this['instance'][_0x5e257e(0x490)]+_0x5e257e(0x767)),this['instance'][_0x5e257e(0x48c)][_0x5e257e(0x341)]=null,this['instance'][_0x5e257e(0x48c)][_0x5e257e(0x190)]=0x0,this[_0x5e257e(0x3ec)][_0x5e257e(0x48c)][_0x5e257e(0x66a)]=0x0,await this['scheduleNextCheck']());}async[a0_0x591e8d(0x4fd)](){const _0xd99d9a=a0_0x591e8d;await this[_0xd99d9a(0x32f)][_0xd99d9a(0x343)](async()=>{const _0xc3981b=_0xd99d9a;if(!this[_0xc3981b(0x3ec)][_0xc3981b(0x48c)]['isConnected']){this[_0xc3981b(0x484)][_0xc3981b(0x746)](this['instanceName']+'\x20('+this[_0xc3981b(0x3ec)]['wuid']+_0xc3981b(0x3ce)),this[_0xc3981b(0x3ec)][_0xc3981b(0x48c)][_0xc3981b(0x341)]=null,this['instance'][_0xc3981b(0x48c)]['lastSend']=0x0,this[_0xc3981b(0x3ec)][_0xc3981b(0x48c)][_0xc3981b(0x66a)]=0x0;return;}try{await this[_0xc3981b(0x33f)]();let _0x3a1544=await this[_0xc3981b(0x77e)]();if(_0x3a1544['length']===0x0){this[_0xc3981b(0x484)][_0xc3981b(0x746)](this[_0xc3981b(0x75c)]+'\x20('+this[_0xc3981b(0x3ec)][_0xc3981b(0x490)]+_0xc3981b(0x330)),await this['scheduleNextExecution']();return;}this[_0xc3981b(0x3ec)]['ScheduleMessage'][_0xc3981b(0x341)]=_0x3a1544[0x0],await this['processReadyMessages'](_0x3a1544),await this['scheduleNextExecution']();}catch(_0x2a5ae1){this[_0xc3981b(0x484)]['error'](_0xc3981b(0x6f6)+(_0x2a5ae1 instanceof Error?_0x2a5ae1[_0xc3981b(0x5b7)]:JSON['stringify'](_0x2a5ae1,null,0x2))),await this[_0xc3981b(0x49b)]();}});}async[a0_0x591e8d(0x77e)](){const _0x1ee616=a0_0x591e8d;this[_0x1ee616(0x484)]['warn'](this[_0x1ee616(0x75c)]+'\x20('+this[_0x1ee616(0x3ec)][_0x1ee616(0x490)]+_0x1ee616(0x2e6));let _0x14ba26=new Date(Date[_0x1ee616(0x673)]()-0xc*0x3c*0x3c*0x3e8),_0x5f305d={'where':{'status':{'$in':['scheduled',_0x1ee616(0x610)]},'$or':[{'when':{'$lte':new Date(),'$gte':_0x14ba26}},{'when':0x0}]}},_0x5dbfc4=await this[_0x1ee616(0x799)][_0x1ee616(0x67c)][_0x1ee616(0x2c5)](_0x5f305d,this['instance'][_0x1ee616(0x490)]);return this[_0x1ee616(0x484)][_0x1ee616(0x746)](this[_0x1ee616(0x75c)]+'\x20('+this[_0x1ee616(0x3ec)][_0x1ee616(0x490)]+'):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas:\x20'+_0x5dbfc4[_0x1ee616(0x836)]),_0x5dbfc4;}async[a0_0x591e8d(0x6d4)](_0x14179f){const _0x2e4b87=a0_0x591e8d;let _0x171172=Math[_0x2e4b87(0x760)](Math['random']()*0x1389)+0xbb8;for(let _0x2e92e5 of _0x14179f){let _0x51db08={'startSend':Date[_0x2e4b87(0x673)](),'status':_0x2e4b87(0x610)};if(await this[_0x2e4b87(0x799)][_0x2e4b87(0x67c)][_0x2e4b87(0x828)]({'_id':_0x2e92e5['_id']},_0x51db08,this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)])){if(!this[_0x2e4b87(0x3ec)][_0x2e4b87(0x48c)]['isConnected']){this[_0x2e4b87(0x484)][_0x2e4b87(0x746)](this[_0x2e4b87(0x75c)]+'\x20('+this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)]+_0x2e4b87(0x23d));break;}for(this[_0x2e4b87(0x259)]=_0x2e92e5['messages'][_0x2e4b87(0x516)](_0x25b278=>!_0x25b278[_0x2e4b87(0x527)]);this[_0x2e4b87(0x259)]['length']>0x0;){await this[_0x2e4b87(0x394)]();let _0x5055aa=this[_0x2e4b87(0x676)]();if(!_0x5055aa)break;let _0x3d97af=_0x2e92e5[_0x2e4b87(0x3e7)][_0x2e4b87(0x2c5)](_0x57edec=>_0x57edec[_0x2e4b87(0x812)]===_0x5055aa[_0x2e4b87(0x812)]);if(!_0x3d97af)break;if(this[_0x2e4b87(0x3ec)][_0x2e4b87(0x48c)]['lastSend']=Date[_0x2e4b87(0x673)](),_0x3d97af[_0x2e4b87(0x527)]){this[_0x2e4b87(0x484)][_0x2e4b87(0x746)](this[_0x2e4b87(0x75c)]+'\x20('+this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)]+_0x2e4b87(0x295)+_0x3d97af['remoteJid']+_0x2e4b87(0x5f4)),this[_0x2e4b87(0x259)]=this['pendingMessages'][_0x2e4b87(0x516)](_0x574872=>_0x574872['_id']!==_0x3d97af['_id']);continue;}if(!this[_0x2e4b87(0x3ec)][_0x2e4b87(0x48c)][_0x2e4b87(0x2ba)]){this[_0x2e4b87(0x484)][_0x2e4b87(0x746)](this['instanceName']+'\x20('+this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)]+_0x2e4b87(0x3de));break;}if(this[_0x2e4b87(0x3ec)][_0x2e4b87(0x48c)][_0x2e4b87(0x341)][_0x2e4b87(0x360)]==='stopped'){this[_0x2e4b87(0x484)][_0x2e4b87(0x746)](this[_0x2e4b87(0x75c)]+'\x20('+this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)]+_0x2e4b87(0x4ce)),this[_0x2e4b87(0x3ec)]['ScheduleMessage'][_0x2e4b87(0x341)]=null;break;}try{this[_0x2e4b87(0x484)][_0x2e4b87(0x746)](this[_0x2e4b87(0x75c)]+'\x20('+this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)]+'):\x20Enviando\x20mensagem\x20para\x20'+_0x3d97af[_0x2e4b87(0x166)]);let _0x271b15=await this[_0x2e4b87(0x63f)](_0x3d97af['remoteJid'],_0x3d97af),_0x4be594={'$push':{'messagesSend':{'idControl':_0x3d97af[_0x2e4b87(0x812)],'remoteJid':_0x3d97af[_0x2e4b87(0x166)],'error':_0x271b15[_0x2e4b87(0x62b)],'id':_0x271b15[_0x2e4b87(0x62b)]?null:_0x271b15['id'],'error_log':_0x271b15[_0x2e4b87(0x62b)]?_0x271b15[_0x2e4b87(0x181)]?_0x271b15['detail'][_0x2e4b87(0x44c)]():'':null,'log_timestamp':Date[_0x2e4b87(0x673)]()}},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x35910a=[{'elem._id':_0x3d97af[_0x2e4b87(0x812)]}];this['logger'][_0x2e4b87(0x746)](this[_0x2e4b87(0x75c)]+'\x20('+this['instance'][_0x2e4b87(0x490)]+_0x2e4b87(0x6cc)+_0x3d97af[_0x2e4b87(0x812)]);let _0x34095b=await this[_0x2e4b87(0x799)][_0x2e4b87(0x67c)][_0x2e4b87(0x828)]({'_id':_0x2e92e5[_0x2e4b87(0x812)]},_0x4be594,this[_0x2e4b87(0x3ec)]['wuid'],{'arrayFilters':_0x35910a});this[_0x2e4b87(0x3ec)][_0x2e4b87(0x48c)][_0x2e4b87(0x341)]=_0x34095b,_0x271b15[_0x2e4b87(0x62b)]&&this['logger']['error'](this[_0x2e4b87(0x75c)]+'\x20('+this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)]+_0x2e4b87(0x865)+_0x271b15[_0x2e4b87(0x181)]);let _0x44ac35=this[_0x2e4b87(0x83a)](_0x2e92e5[_0x2e4b87(0x284)],_0x2e92e5[_0x2e4b87(0x5f0)]);await this[_0x2e4b87(0x4a1)](_0x44ac35);}catch(_0xa40d5e){this[_0x2e4b87(0x484)][_0x2e4b87(0x62b)](this[_0x2e4b87(0x75c)]+'\x20('+this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)]+_0x2e4b87(0x3cc)+_0x3d97af[_0x2e4b87(0x166)]+':\x20'+(_0xa40d5e instanceof Error?_0xa40d5e[_0x2e4b87(0x5b7)]:JSON[_0x2e4b87(0x62f)](_0xa40d5e,null,0x2)));let _0x20043a={'$push':{'messagesSend':{'idControl':_0x3d97af[_0x2e4b87(0x812)],'remoteJid':_0x3d97af[_0x2e4b87(0x166)],'error':!0x0,'id':null,'error_log':_0xa40d5e instanceof Error?_0xa40d5e[_0x2e4b87(0x5b7)]:JSON[_0x2e4b87(0x62f)](_0xa40d5e,null,0x2),'log_timestamp':Date['now']()}},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x3b6143=[{'elem._id':_0x3d97af[_0x2e4b87(0x812)]}],_0x2af2b0=await this['repository']['scheduleMessage']['updateOne']({'_id':_0x2e92e5[_0x2e4b87(0x812)]},_0x20043a,this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)],{'arrayFilters':_0x3b6143});this[_0x2e4b87(0x3ec)][_0x2e4b87(0x48c)]['processingGroup']=_0x2af2b0;}finally{if(_0x3d97af[_0x2e4b87(0x527)]=!0x0,this['pendingMessages']=this['pendingMessages'][_0x2e4b87(0x516)](_0x5a3158=>_0x5a3158[_0x2e4b87(0x812)]!==_0x3d97af[_0x2e4b87(0x812)]),this[_0x2e4b87(0x259)][_0x2e4b87(0x836)]===0x0&&this[_0x2e4b87(0x3ec)][_0x2e4b87(0x48c)][_0x2e4b87(0x341)][_0x2e4b87(0x360)]!=='stopped'){let _0xdf23bf={'$set':{'status':_0x2e4b87(0x1ee)}},_0x6d7cc5=await this[_0x2e4b87(0x799)][_0x2e4b87(0x67c)]['updateOneById'](_0x2e92e5['_id'],_0xdf23bf,this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)]);this[_0x2e4b87(0x3ec)]['ScheduleMessage'][_0x2e4b87(0x341)]=_0x6d7cc5;}if(this[_0x2e4b87(0x3ec)]['ScheduleMessage'][_0x2e4b87(0x341)][_0x2e4b87(0x360)]===_0x2e4b87(0x294)){this[_0x2e4b87(0x484)][_0x2e4b87(0x746)](this[_0x2e4b87(0x75c)]+'\x20('+this[_0x2e4b87(0x3ec)][_0x2e4b87(0x490)]+_0x2e4b87(0x2b8)+_0x2e92e5[_0x2e4b87(0x812)]+'\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.'),this[_0x2e4b87(0x3ec)][_0x2e4b87(0x48c)][_0x2e4b87(0x341)]=null;break;}}}await new Promise(_0x56f757=>setTimeout(_0x56f757,_0x171172)),global['gc']?global['gc']():console[_0x2e4b87(0x746)](_0x2e4b87(0x329));}}this[_0x2e4b87(0x3ec)][_0x2e4b87(0x48c)]['processingGroup']&&this[_0x2e4b87(0x259)][_0x2e4b87(0x836)]===0x0&&(this[_0x2e4b87(0x3ec)]['ScheduleMessage']['processingGroup']=null);}['getNextPendingMessage'](){const _0xb4d97f=a0_0x591e8d;return this[_0xb4d97f(0x259)]['length']===0x0?null:this['pendingMessages'][_0xb4d97f(0x414)]((_0x1d1fbd,_0x42b2c4)=>(_0x1d1fbd[_0xb4d97f(0x31a)]??Number['MAX_SAFE_INTEGER'])<(_0x42b2c4[_0xb4d97f(0x31a)]??Number[_0xb4d97f(0x293)])?_0x1d1fbd:_0x42b2c4,this[_0xb4d97f(0x259)][0x0]);}async['scheduleNextExecution'](){const _0x5d6f24=a0_0x591e8d;let _0x305dd3=new Date(Date[_0x5d6f24(0x673)]()-0x2932e00),_0x4abf2f={'where':{'status':'scheduled','$or':[{'when':{'$lte':new Date(),'$gte':_0x305dd3}},{'when':0x0}]}},_0x17ab6b=await this[_0x5d6f24(0x799)][_0x5d6f24(0x67c)][_0x5d6f24(0x685)](_0x4abf2f,this['instance']['wuid']);_0x17ab6b&&_0x17ab6b[_0x5d6f24(0x359)]>Date[_0x5d6f24(0x673)]()?this[_0x5d6f24(0x3ec)][_0x5d6f24(0x48c)][_0x5d6f24(0x66a)]=_0x17ab6b['when']-Date['now']():this[_0x5d6f24(0x3ec)]['ScheduleMessage'][_0x5d6f24(0x66a)]=(0x3c+Math[_0x5d6f24(0x760)](Math[_0x5d6f24(0x6a6)]()*0x3c))*0x3c*0x3e8,this['instance'][_0x5d6f24(0x48c)]['delayMessage']=Math[_0x5d6f24(0x450)](this['instance'][_0x5d6f24(0x48c)][_0x5d6f24(0x66a)],0x2*0x3e8);let _0x582ad7=Math[_0x5d6f24(0x410)](this[_0x5d6f24(0x3ec)][_0x5d6f24(0x48c)][_0x5d6f24(0x66a)]/0xea60);if(_0x17ab6b){let _0x49327b=new Date(_0x17ab6b[_0x5d6f24(0x359)])['toLocaleString']();this[_0x5d6f24(0x484)][_0x5d6f24(0x746)](this[_0x5d6f24(0x75c)]+'\x20('+this[_0x5d6f24(0x3ec)][_0x5d6f24(0x490)]+_0x5d6f24(0x29a)+_0x49327b+_0x5d6f24(0x89c)+_0x582ad7+_0x5d6f24(0x1fa));}else this[_0x5d6f24(0x484)][_0x5d6f24(0x746)](this[_0x5d6f24(0x75c)]+'\x20('+this['instance'][_0x5d6f24(0x490)]+_0x5d6f24(0x4d3)+_0x582ad7+_0x5d6f24(0x1fa));setTimeout(()=>this['scheduleNextCheck'](),this[_0x5d6f24(0x3ec)][_0x5d6f24(0x48c)][_0x5d6f24(0x66a)]);}[a0_0x591e8d(0x83a)](_0x469c6c,_0x533b6a){const _0xba02c1=a0_0x591e8d;return _0x469c6c=Math[_0xba02c1(0x450)](0.5,_0x469c6c),_0x533b6a=Math['min'](Math[_0xba02c1(0x450)](0x3,_0x533b6a),0x78),Math[_0xba02c1(0x760)](Math[_0xba02c1(0x6a6)]()*(_0x533b6a-_0x469c6c+0x1)+_0x469c6c)*0x3e8;}[a0_0x591e8d(0x4a1)](_0x1bf549){return new Promise(_0xd0e250=>setTimeout(_0xd0e250,_0x1bf549));}async[a0_0x591e8d(0x71f)](_0x242b80){const _0x599bc4=a0_0x591e8d;if(!this[_0x599bc4(0x693)]&&(await this[_0x599bc4(0x689)](),!this[_0x599bc4(0x693)]))return null;_0x242b80=this['createJid'](_0x242b80);let _0x36324f=await this[_0x599bc4(0x799)][_0x599bc4(0x4b2)]['findOne']({'where':{'_id':_0x242b80}},this['instance']['wuid']),_0x30af9e={};if(_0x36324f&&_0x36324f[_0x599bc4(0x2cf)]){let _0x45fda9=_0x36324f[_0x599bc4(0x2cf)];typeof _0x45fda9[_0x599bc4(0x695)]==_0x599bc4(0x2f2)&&(_0x30af9e[_0x599bc4(0x695)]=_0x45fda9['nome']),typeof _0x45fda9['nomecompleto']==_0x599bc4(0x2f2)&&(_0x30af9e[_0x599bc4(0x8a4)]=_0x45fda9[_0x599bc4(0x8a4)]),typeof _0x45fda9[_0x599bc4(0x60f)]==_0x599bc4(0x2f2)&&(_0x30af9e['email']=_0x45fda9[_0x599bc4(0x60f)]),typeof _0x45fda9['cpf']=='string'&&(_0x30af9e[_0x599bc4(0x182)]=_0x45fda9['cpf']),typeof _0x45fda9[_0x599bc4(0x360)]==_0x599bc4(0x2f2)&&(_0x30af9e[_0x599bc4(0x360)]=_0x45fda9[_0x599bc4(0x360)]),typeof _0x45fda9[_0x599bc4(0x7df)]=='string'&&(_0x30af9e[_0x599bc4(0x7df)]=_0x45fda9['notas']),typeof _0x45fda9[_0x599bc4(0x58c)]==_0x599bc4(0x2f2)&&(_0x30af9e[_0x599bc4(0x58c)]=_0x45fda9[_0x599bc4(0x58c)]),Array['isArray'](_0x45fda9[_0x599bc4(0x82d)])&&(_0x30af9e[_0x599bc4(0x82d)]=_0x45fda9[_0x599bc4(0x82d)][_0x599bc4(0x241)](',\x20')),Array[_0x599bc4(0x7e5)](_0x45fda9[_0x599bc4(0x325)])&&(_0x30af9e[_0x599bc4(0x325)]=_0x45fda9[_0x599bc4(0x325)][_0x599bc4(0x241)](',\x20'));}return _0x36324f&&_0x36324f[_0x599bc4(0x2cf)]&&_0x36324f['leadInfo'][_0x599bc4(0x772)]&&_0x36324f['leadInfo'][_0x599bc4(0x772)][_0x599bc4(0x5ce)](_0x34e978=>{const _0x34e492=_0x599bc4;let _0x275764=this['AutomateSystem']?.[_0x34e492(0x772)][_0x34e492(0x2c5)](_0x598931=>_0x598931[_0x34e492(0x812)]===_0x34e978[_0x34e492(0x812)]);_0x275764&&(_0x30af9e[_0x275764[_0x34e492(0x1f8)]]=_0x34e978[_0x34e492(0x30e)]);}),_0x30af9e;}async[a0_0x591e8d(0x84f)](_0x2d2e40,_0xcaaba){const _0x261525=a0_0x591e8d;try{let _0x9d56a7=await this[_0x261525(0x71f)](_0xcaaba);return this[_0x261525(0x4d2)](_0x2d2e40,_0x9d56a7);}catch(_0x4d7a7a){return this[_0x261525(0x484)][_0x261525(0x62b)](_0x261525(0x747)+_0xcaaba+':\x20'+_0x4d7a7a),_0x2d2e40;}}async[a0_0x591e8d(0x33f)](){const _0x4f342d=a0_0x591e8d;let _0x65c506=async(_0x2c21f0,_0x5849aa)=>{const _0x2d10ed=a0_0x3f1e;let _0x28f36f=(await this[_0x2d10ed(0x799)][_0x2d10ed(0x67c)]['find']({'where':{'type':_0x2c21f0}},this[_0x2d10ed(0x3ec)]['wuid']))[_0x2d10ed(0x276)](async _0x536fb8=>{const _0x12d7a7=_0x2d10ed;let _0x208d64=_0x5849aa(_0x536fb8),_0x2193cb=_0x11a123=>/^\d+$/[_0x12d7a7(0x749)](_0x11a123),_0x4b4ac0=_0x536fb8[_0x12d7a7(0x424)][_0x12d7a7(0x516)](_0xa85775=>_0xa85775[_0x12d7a7(0x426)]('@s.whatsapp.net')?_0xa85775[_0x12d7a7(0x836)]>0x19:_0xa85775[_0x12d7a7(0x426)](_0x12d7a7(0x2b3))?_0xa85775[_0x12d7a7(0x836)]>0xf:_0x2193cb(_0xa85775)?_0xa85775[_0x12d7a7(0x836)]>=0xb:!0x1)[_0x12d7a7(0x276)](_0x2d7e0b=>({'_id':(0x0,Y['v4'])(),'idSchedule':_0x536fb8[_0x12d7a7(0x812)],'type':_0x208d64,'remoteJid':_0x2d7e0b,'flow':_0x536fb8[_0x12d7a7(0x86f)],'text':_0x536fb8[_0x12d7a7(0x5b7)]?.['text'],'delay':_0x536fb8[_0x12d7a7(0x5b7)]?.[_0x12d7a7(0x1ca)],'urlOrBase64':_0x536fb8['message']?.[_0x12d7a7(0x857)],'linkPreview':_0x536fb8['message']?.[_0x12d7a7(0x86e)],'fileName':_0x536fb8[_0x12d7a7(0x5b7)]?.[_0x12d7a7(0x875)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x12d7a7(0x799)]['scheduleMessage']['updateOneById'](_0x536fb8[_0x12d7a7(0x812)],{'$set':{'messages':_0x4b4ac0},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x12d7a7(0x3ec)][_0x12d7a7(0x490)]);}catch(_0xeb75a2){console[_0x12d7a7(0x62b)](_0x12d7a7(0x65f)+_0x536fb8[_0x12d7a7(0x812)]+':',_0xeb75a2);}});await Promise[_0x2d10ed(0x5ec)](_0x28f36f);};await _0x65c506(_0x4f342d(0x7a9),_0x5beee1=>_0x4f342d(0x7a9)),await _0x65c506(_0x4f342d(0x26d),_0x153221=>_0x153221['message']?.[_0x4f342d(0x6b0)]||_0x4f342d(0x26d)),await _0x65c506(_0x4f342d(0x6f4),_0x58b18f=>_0x4f342d(0x6f4)),await _0x65c506('flow',_0x48582a=>_0x4f342d(0x4cc)),await _0x65c506(_0x4f342d(0x861),_0x39c711=>'image'),await _0x65c506(_0x4f342d(0x519),_0xe3d75d=>'video'),await _0x65c506(_0x4f342d(0x373),_0x29e44a=>_0x4f342d(0x373)),this['logger'][_0x4f342d(0x746)](this['instanceName']+'\x20('+this[_0x4f342d(0x3ec)][_0x4f342d(0x490)]+_0x4f342d(0x6ae));}async['editScheduleMessage'](_0x46c463){const _0x1e7e07=a0_0x591e8d;try{if(this[_0x1e7e07(0x484)]['warn'](this[_0x1e7e07(0x75c)]+'\x20('+this[_0x1e7e07(0x3ec)][_0x1e7e07(0x490)]+_0x1e7e07(0x73c)),_0x46c463['_id']||(_0x46c463[_0x1e7e07(0x812)]=(0x0,Y['v4'])()),this[_0x1e7e07(0x3ec)]['ScheduleMessage']['processingGroup']?.[_0x1e7e07(0x812)]===_0x46c463[_0x1e7e07(0x812)]?.['toString']()&&_0x46c463['status']!==_0x1e7e07(0x294))throw new Error(_0x1e7e07(0x862));if(_0x46c463[_0x1e7e07(0x6f7)]&&_0x46c463[_0x1e7e07(0x812)]){let _0xbb6dd9=await this[_0x1e7e07(0x799)][_0x1e7e07(0x67c)][_0x1e7e07(0x1cc)](_0x46c463[_0x1e7e07(0x812)],this['instance'][_0x1e7e07(0x490)]);return setTimeout(()=>this[_0x1e7e07(0x4fd)](),0x7d0),_0xbb6dd9;}let _0x1df9eb=null;if(_0x46c463[_0x1e7e07(0x812)]&&(_0x1df9eb=await this[_0x1e7e07(0x799)][_0x1e7e07(0x67c)]['findById'](_0x46c463['_id'],this['instance'][_0x1e7e07(0x490)])),_0x1df9eb){let {_id:_0x24cddf,owner:_0x5c291f,messages:_0x1b37fd,..._0x2dd5a5}=_0x46c463;if(_0x1b37fd){let _0x3bee96=_0x1b37fd['filter'](_0x3750cc=>!_0x3750cc[_0x1e7e07(0x812)]),_0x340312=_0x1b37fd[_0x1e7e07(0x516)](_0x1a39c9=>_0x1a39c9[_0x1e7e07(0x812)]&&!_0x1a39c9[_0x1e7e07(0x6f7)]),_0x417f81=_0x1b37fd[_0x1e7e07(0x516)](_0x1587ea=>_0x1587ea[_0x1e7e07(0x812)]&&_0x1587ea[_0x1e7e07(0x6f7)]);if(_0x3bee96[_0x1e7e07(0x836)]>0x0&&await this[_0x1e7e07(0x58f)](_0x46c463[_0x1e7e07(0x812)],_0x3bee96),_0x340312['length']>0x0&&await this[_0x1e7e07(0x313)]({'_id':_0x46c463[_0x1e7e07(0x812)],'messages':_0x340312}),_0x417f81[_0x1e7e07(0x836)]>0x0){let _0x56ac5a=_0x417f81[_0x1e7e07(0x276)](_0x58a80a=>({'updateOne':{'filter':{'_id':_0x46c463[_0x1e7e07(0x812)]},'update':{'$pull':{'messages':{'_id':_0x58a80a[_0x1e7e07(0x812)]}}}}}));await this[_0x1e7e07(0x799)]['scheduleMessage'][_0x1e7e07(0x533)](_0x56ac5a,this[_0x1e7e07(0x3ec)][_0x1e7e07(0x490)]);}}let _0x59f69a={'$set':{..._0x2dd5a5,'status':_0x46c463[_0x1e7e07(0x360)]||_0x1df9eb['status']}},_0x8f6588=await this[_0x1e7e07(0x799)][_0x1e7e07(0x67c)][_0x1e7e07(0x33c)](_0x46c463['_id'],_0x59f69a,this['instance'][_0x1e7e07(0x490)]);return _0x8f6588&&(this[_0x1e7e07(0x2d5)](_0x8f6588[_0x1e7e07(0x3e7)]),await this[_0x1e7e07(0x799)]['scheduleMessage'][_0x1e7e07(0x33c)](_0x8f6588[_0x1e7e07(0x812)],{'$set':{'messages':_0x8f6588['messages']}},this[_0x1e7e07(0x3ec)][_0x1e7e07(0x490)])),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),await this[_0x1e7e07(0x33f)](),_0x8f6588;}else{_0x46c463[_0x1e7e07(0x7d9)]=this[_0x1e7e07(0x3ec)][_0x1e7e07(0x490)],_0x46c463[_0x1e7e07(0x3e7)]&&_0x46c463[_0x1e7e07(0x3e7)][_0x1e7e07(0x5ce)](_0x154390=>{const _0x4f2711=_0x1e7e07;_0x154390['_id']||(_0x154390[_0x4f2711(0x812)]=(0x0,Y['v4'])()),_0x154390['idSchedule']||(_0x154390[_0x4f2711(0x7eb)]=_0x46c463['_id']),delete _0x154390[_0x4f2711(0x527)];});let _0x5b1a5a=await this[_0x1e7e07(0x799)][_0x1e7e07(0x67c)]['createAndSave'](_0x46c463,this[_0x1e7e07(0x3ec)][_0x1e7e07(0x490)]);return _0x5b1a5a&&(this[_0x1e7e07(0x2d5)](_0x5b1a5a[_0x1e7e07(0x3e7)]),await this[_0x1e7e07(0x799)][_0x1e7e07(0x67c)]['updateOneById'](_0x5b1a5a[_0x1e7e07(0x812)],{'$set':{'messages':_0x5b1a5a[_0x1e7e07(0x3e7)]}},this['instance']['wuid'])),setTimeout(()=>this[_0x1e7e07(0x4fd)](),0x7d0),_0x5b1a5a;}}catch(_0x20a7e5){let _0x4774ce='Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens',_0x5cb6bd=_0x20a7e5 instanceof Error?_0x20a7e5[_0x1e7e07(0x5b7)]:typeof _0x20a7e5==_0x1e7e07(0x808)?JSON['stringify'](_0x20a7e5):_0x20a7e5,_0x2581f1=_0x4774ce+':\x20'+_0x5cb6bd;throw this[_0x1e7e07(0x484)][_0x1e7e07(0x62b)](this[_0x1e7e07(0x75c)]+'\x20('+this['instance']['wuid']+_0x1e7e07(0x872)+_0x2581f1),new m(_0x2581f1);}}async[a0_0x591e8d(0x58f)](_0x31d1c0,_0x312007){const _0x4dd67a=a0_0x591e8d;try{this[_0x4dd67a(0x484)][_0x4dd67a(0x768)](this['instanceName']+'\x20('+this[_0x4dd67a(0x3ec)]['wuid']+'):\x20Adicionando\x20mensagens\x20ao\x20grupo...'),_0x312007['forEach'](_0x1120c9=>{const _0x1a1914=_0x4dd67a;_0x1120c9['_id']||(_0x1120c9['_id']=(0x0,Y['v4'])()),_0x1120c9[_0x1a1914(0x7eb)]||(_0x1120c9[_0x1a1914(0x7eb)]=_0x31d1c0),delete _0x1120c9[_0x1a1914(0x527)];});let _0x39e170={'$push':{'messages':{'$each':_0x312007}}},_0x42e814=await this[_0x4dd67a(0x799)][_0x4dd67a(0x67c)][_0x4dd67a(0x33c)](_0x31d1c0,_0x39e170,this['instance'][_0x4dd67a(0x490)]);return _0x42e814&&(this[_0x4dd67a(0x2d5)](_0x42e814[_0x4dd67a(0x3e7)]),await this[_0x4dd67a(0x799)][_0x4dd67a(0x67c)]['updateOneById'](_0x42e814[_0x4dd67a(0x812)],{'$set':{'messages':_0x42e814[_0x4dd67a(0x3e7)]}},this[_0x4dd67a(0x3ec)][_0x4dd67a(0x490)])),_0x42e814;}catch(_0x577c20){let _0x16af5a=_0x4dd67a(0x18c),_0x56943d=_0x577c20 instanceof Error?_0x577c20[_0x4dd67a(0x5b7)]:typeof _0x577c20==_0x4dd67a(0x808)?JSON['stringify'](_0x577c20):_0x577c20,_0x11b98b=_0x16af5a+':\x20'+_0x56943d;throw this[_0x4dd67a(0x484)][_0x4dd67a(0x62b)](this[_0x4dd67a(0x75c)]+'\x20('+this['instance'][_0x4dd67a(0x490)]+_0x4dd67a(0x872)+_0x11b98b),new m(_0x11b98b);}}async['editMessagesInGroup'](_0x414107){const _0x32056c=a0_0x591e8d;try{if(this[_0x32056c(0x484)][_0x32056c(0x768)](this[_0x32056c(0x75c)]+'\x20('+this['instance'][_0x32056c(0x490)]+_0x32056c(0x5e3)),!_0x414107[_0x32056c(0x812)]||!_0x414107[_0x32056c(0x3e7)])throw new Error(_0x32056c(0x19d));let _0x54dd95=_0x414107[_0x32056c(0x812)],_0x24d8a=_0x414107[_0x32056c(0x3e7)],_0xc31210=_0x24d8a['filter'](_0xea02be=>!_0xea02be[_0x32056c(0x6f7)])[_0x32056c(0x276)](_0x22240a=>{const _0x4c598e=_0x32056c;let _0x1fa8ae=_0x22240a['_id'];if(!_0x1fa8ae)throw new Error(_0x4c598e(0x512));return _0x22240a['idSchedule']||(_0x22240a[_0x4c598e(0x7eb)]=_0x54dd95),delete _0x22240a['triedToSend'],{'updateOne':{'filter':{'_id':_0x54dd95,'messages._id':_0x1fa8ae},'update':{'$set':{'messages.$[elem]':_0x22240a}},'arrayFilters':[{'elem._id':_0x1fa8ae}]}};}),_0x33f197=_0x24d8a[_0x32056c(0x516)](_0x33e042=>_0x33e042[_0x32056c(0x6f7)])[_0x32056c(0x276)](_0x59a000=>{const _0x199309=_0x32056c;let _0x4b9bf6=_0x59a000[_0x199309(0x812)];if(!_0x4b9bf6)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20excluso.');return{'updateOne':{'filter':{'_id':_0x54dd95},'update':{'$pull':{'messages':{'_id':_0x4b9bf6}}}}};}),_0xc29820=[..._0xc31210,..._0x33f197],_0x3f14a5=await this[_0x32056c(0x799)]['scheduleMessage'][_0x32056c(0x533)](_0xc29820,this['instance'][_0x32056c(0x490)]),_0x1ccac4=await this[_0x32056c(0x799)]['scheduleMessage'][_0x32056c(0x23b)](_0x54dd95,this[_0x32056c(0x3ec)][_0x32056c(0x490)]);return _0x1ccac4&&(this[_0x32056c(0x2d5)](_0x1ccac4[_0x32056c(0x3e7)]),await this[_0x32056c(0x799)][_0x32056c(0x67c)]['updateOneById'](_0x1ccac4[_0x32056c(0x812)],{'$set':{'messages':_0x1ccac4[_0x32056c(0x3e7)]}},this[_0x32056c(0x3ec)]['wuid'])),_0x1ccac4;}catch(_0x33d4d5){let _0x200959=_0x32056c(0x2f5),_0x2acf41=_0x33d4d5 instanceof Error?_0x33d4d5['message']:typeof _0x33d4d5==_0x32056c(0x808)?JSON[_0x32056c(0x62f)](_0x33d4d5):_0x33d4d5,_0x448c46=_0x200959+':\x20'+_0x2acf41;throw this[_0x32056c(0x484)][_0x32056c(0x62b)](this[_0x32056c(0x75c)]+'\x20('+this[_0x32056c(0x3ec)]['wuid']+_0x32056c(0x872)+_0x448c46),new m(_0x448c46);}}async[a0_0x591e8d(0x22a)](){const _0x353a43=a0_0x591e8d;try{let _0x429141={'status':_0x353a43(0x1ee)},_0x5e4a8e=await this[_0x353a43(0x799)]['scheduleMessage'][_0x353a43(0x76e)](_0x429141,this['instance'][_0x353a43(0x490)]);if(!_0x5e4a8e[_0x353a43(0x62b)])this[_0x353a43(0x484)][_0x353a43(0x768)](this[_0x353a43(0x75c)]+'\x20('+this['instance']['wuid']+'):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.');else throw new Error(_0x5e4a8e[_0x353a43(0x62b)][_0x353a43(0x5b7)]||_0x353a43(0x654));return this[_0x353a43(0x5cd)]();}catch(_0xf52828){let _0xf28e60=_0x353a43(0x31c),_0x4fc65f=_0xf52828 instanceof Error?_0xf52828[_0x353a43(0x5b7)]:typeof _0xf52828=='object'?JSON[_0x353a43(0x62f)](_0xf52828):_0xf52828,_0x2a22c1=_0xf28e60+':\x20'+_0x4fc65f;throw this[_0x353a43(0x484)][_0x353a43(0x62b)](this[_0x353a43(0x75c)]+'\x20('+this[_0x353a43(0x3ec)][_0x353a43(0x490)]+_0x353a43(0x872)+_0x2a22c1),new m(_0x2a22c1);}}async[a0_0x591e8d(0x5cd)](){const _0x58ae8c=a0_0x591e8d;try{return await this[_0x58ae8c(0x799)][_0x58ae8c(0x67c)]['find']({'where':{}},this['instance'][_0x58ae8c(0x490)]);}catch(_0x1d43bd){let _0x1c30c=_0x58ae8c(0x281),_0x5d4d59=_0x1d43bd instanceof Error?_0x1d43bd[_0x58ae8c(0x5b7)]:typeof _0x1d43bd==_0x58ae8c(0x808)?JSON[_0x58ae8c(0x62f)](_0x1d43bd):_0x1d43bd,_0x244c6a=_0x1c30c+':\x20'+_0x5d4d59;throw this['logger'][_0x58ae8c(0x62b)](this[_0x58ae8c(0x75c)]+'\x20('+this[_0x58ae8c(0x3ec)]['wuid']+_0x58ae8c(0x872)+_0x244c6a),new m(_0x244c6a);}}[a0_0x591e8d(0x2d5)](_0x313534){const _0x524aa3=a0_0x591e8d;_0x313534[_0x524aa3(0x543)]((_0x1180ad,_0x478f52)=>_0x1180ad[_0x524aa3(0x31a)]-_0x478f52[_0x524aa3(0x31a)]),_0x313534['forEach']((_0x1d73ab,_0x19b988)=>{_0x1d73ab['order']=_0x19b988+0x1;});}async[a0_0x591e8d(0x63f)](_0x133242,_0x19ba47){const _0x5434b9=a0_0x591e8d;try{if(!_0x19ba47)return this[_0x5434b9(0x484)][_0x5434b9(0x62b)](this['instanceName']+'\x20('+this[_0x5434b9(0x3ec)][_0x5434b9(0x490)]+_0x5434b9(0x168)),{'error':!0x0,'detail':_0x5434b9(0x691)};if(_0x19ba47[_0x5434b9(0x717)]===_0x5434b9(0x4cc)&&!this[_0x5434b9(0x693)]?.[_0x5434b9(0x7d5)]['enabled'])return this[_0x5434b9(0x484)][_0x5434b9(0x62b)](this[_0x5434b9(0x75c)]+'\x20('+this[_0x5434b9(0x3ec)][_0x5434b9(0x490)]+'):\x20Fluxos\x20no\x20esto\x20ativados'),{'error':!0x0,'detail':_0x5434b9(0x4bb)};switch(_0x19ba47['type']){case _0x5434b9(0x7a9):return await this['scheduleSendText'](_0x19ba47,_0x133242);case _0x5434b9(0x519):case _0x5434b9(0x861):case'document':return await this[_0x5434b9(0x7cc)](_0x19ba47,_0x133242);case'audio':return await this[_0x5434b9(0x51f)](_0x19ba47,_0x133242);case _0x5434b9(0x4cc):let _0x34168b=new Ve();return _0x34168b['name']=_0x19ba47[_0x5434b9(0x4cc)],_0x34168b['remoteJid']=_0x133242,await this['startFlow'](_0x34168b);default:return this['logger']['error'](this[_0x5434b9(0x75c)]+'\x20('+this['instance'][_0x5434b9(0x490)]+_0x5434b9(0x61d)+_0x19ba47[_0x5434b9(0x717)]),{'error':!0x0,'detail':_0x5434b9(0x7d0)};}}catch(_0x1a6b89){return this[_0x5434b9(0x484)]['error'](this[_0x5434b9(0x75c)]+'\x20('+this[_0x5434b9(0x3ec)][_0x5434b9(0x490)]+_0x5434b9(0x309)+(_0x1a6b89 instanceof Error?_0x1a6b89[_0x5434b9(0x5b7)]:JSON['stringify'](_0x1a6b89,null,0x2))),{'error':!0x0,'detail':_0x1a6b89['message']};}}async['scheduleSendText'](_0xf4efeb,_0x1ff9c0){const _0x3a51fc=a0_0x591e8d;if(this['logger']['verbose'](this[_0x3a51fc(0x75c)]+'\x20('+this[_0x3a51fc(0x3ec)][_0x3a51fc(0x490)]+'):\x20\x27Enviando\x20texto\x20para\x20\x27'+_0x1ff9c0+'\x27'),!_0xf4efeb[_0x3a51fc(0x7a9)]||_0xf4efeb[_0x3a51fc(0x7a9)]['length']===0x0)return{'error':!0x0,'detail':_0x3a51fc(0x825)};let _0x3d1a0c=await this['replaceVariablesChat'](_0xf4efeb[_0x3a51fc(0x7a9)],_0x1ff9c0),_0x5a19fb={'number':_0x1ff9c0,'options':{'delay':_0xf4efeb[_0x3a51fc(0x1ca)],'linkPreview':_0xf4efeb['linkPreview']},'textMessage':{'text':_0x3d1a0c}},_0x4f8988=null;try{let _0x905e53=await this[_0x3a51fc(0x4fb)](_0x5a19fb);if(_0x905e53&&_0x905e53[_0x3a51fc(0x360)])return{'error':!0x1,'id':_0x905e53[_0x3a51fc(0x27f)]['id']};_0x4f8988=JSON['stringify'](_0x905e53),this['logger']['verbose'](this[_0x3a51fc(0x75c)]+'\x20('+this[_0x3a51fc(0x3ec)]['wuid']+_0x3a51fc(0x872)+_0x4f8988);}catch(_0x4c0a9b){this[_0x3a51fc(0x484)]['error'](this['instanceName']+'\x20('+this['instance'][_0x3a51fc(0x490)]+_0x3a51fc(0x834)+(_0x4c0a9b instanceof Error?_0x4c0a9b[_0x3a51fc(0x5b7)]:JSON[_0x3a51fc(0x62f)](_0x4c0a9b,null,0x2))),_0x4f8988=_0x4c0a9b[_0x3a51fc(0x5b7)];}if(_0x4f8988)return{'error':!0x0,'detail':(typeof _0x4f8988==_0x3a51fc(0x808)?JSON[_0x3a51fc(0x62f)](_0x4f8988,null,0x2):_0x4f8988)[_0x3a51fc(0x4d0)](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async[a0_0x591e8d(0x7cc)](_0x519c59,_0x22d389){const _0x33f6d6=a0_0x591e8d;this['logger'][_0x33f6d6(0x768)](this[_0x33f6d6(0x75c)]+'\x20('+this['instance']['wuid']+_0x33f6d6(0x7bc)+_0x22d389+'\x27');let _0x754c0c;_0x519c59['text']&&_0x519c59[_0x33f6d6(0x7a9)][_0x33f6d6(0x836)]>0x0&&(_0x754c0c=await this[_0x33f6d6(0x84f)](_0x519c59[_0x33f6d6(0x7a9)],_0x22d389));let _0x3347bd={'number':_0x22d389,'options':{'delay':_0x519c59[_0x33f6d6(0x1ca)],'linkPreview':_0x519c59[_0x33f6d6(0x86e)]},'mediaMessage':{'mediatype':_0x519c59['type'],'caption':_0x754c0c,'media':_0x519c59[_0x33f6d6(0x857)]}},_0x43f750=null;try{let _0x50d338=await this[_0x33f6d6(0x174)](_0x3347bd);if(_0x50d338&&_0x50d338[_0x33f6d6(0x360)])return{'error':!0x1,'id':_0x50d338['key']['id']};_0x43f750=JSON['stringify'](_0x50d338),this[_0x33f6d6(0x484)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x33f6d6(0x490)]+_0x33f6d6(0x872)+_0x43f750);}catch(_0x1349be){this[_0x33f6d6(0x484)][_0x33f6d6(0x62b)](this['instanceName']+'\x20('+this[_0x33f6d6(0x3ec)]['wuid']+_0x33f6d6(0x6ad)+(_0x1349be instanceof Error?_0x1349be[_0x33f6d6(0x5b7)]:JSON[_0x33f6d6(0x62f)](_0x1349be,null,0x2))),_0x43f750=_0x1349be[_0x33f6d6(0x5b7)];}if(_0x43f750)return{'error':!0x0,'detail':(typeof _0x43f750==_0x33f6d6(0x808)?JSON['stringify'](_0x43f750,null,0x2):_0x43f750)[_0x33f6d6(0x4d0)](/[\[\]{}\n]/g,'\x20')[_0x33f6d6(0x4d0)](/  +/g,'\x20')};}async[a0_0x591e8d(0x51f)](_0x5a5d44,_0x56ab33){const _0x1693e8=a0_0x591e8d;this[_0x1693e8(0x484)]['verbose'](this[_0x1693e8(0x75c)]+'\x20('+this[_0x1693e8(0x3ec)]['wuid']+_0x1693e8(0x63b)+_0x56ab33+'\x27');let _0x4f3784={'number':_0x56ab33,'options':{'delay':_0x5a5d44[_0x1693e8(0x1ca)]},'audioMessage':{'audio':_0x5a5d44[_0x1693e8(0x857)]}},_0x691606=null;try{let _0x415b05=await this[_0x1693e8(0x463)](_0x4f3784);if(_0x415b05&&_0x415b05['status'])return{'error':!0x1,'id':_0x415b05['key']['id']};_0x691606=JSON[_0x1693e8(0x62f)](_0x415b05),this[_0x1693e8(0x484)][_0x1693e8(0x768)](this[_0x1693e8(0x75c)]+'\x20('+this[_0x1693e8(0x3ec)][_0x1693e8(0x490)]+_0x1693e8(0x872)+_0x691606);}catch(_0xc3e8d8){this[_0x1693e8(0x484)][_0x1693e8(0x62b)](this[_0x1693e8(0x75c)]+'\x20('+this['instance'][_0x1693e8(0x490)]+_0x1693e8(0x4f7)+(_0xc3e8d8 instanceof Error?_0xc3e8d8[_0x1693e8(0x5b7)]:JSON['stringify'](_0xc3e8d8,null,0x2))),_0x691606=_0xc3e8d8[_0x1693e8(0x5b7)];}if(_0x691606)return{'error':!0x0,'detail':(typeof _0x691606==_0x1693e8(0x808)?JSON['stringify'](_0x691606,null,0x2):_0x691606)[_0x1693e8(0x4d0)](/[\[\]{}\n]/g,'\x20')[_0x1693e8(0x4d0)](/  +/g,'\x20')};}async['groupDesc'](_0x7d3d6f){const _0x2f402e=a0_0x591e8d;try{return await this[_0x2f402e(0x296)][_0x2f402e(0x16a)](_0x7d3d6f[_0x2f402e(0x703)],_0x7d3d6f[_0x2f402e(0x5e5)]),{'update':'success'};}catch(_0x37847f){let _0x45a9fd=_0x2f402e(0x6d5),_0x578592=_0x37847f instanceof Error?_0x37847f['message']:typeof _0x37847f=='object'?JSON[_0x2f402e(0x62f)](_0x37847f):_0x37847f,_0x331e36=_0x45a9fd+':\x20'+_0x578592;throw this['logger'][_0x2f402e(0x62b)](this[_0x2f402e(0x75c)]+'\x20('+this[_0x2f402e(0x3ec)][_0x2f402e(0x490)]+_0x2f402e(0x872)+_0x331e36),new O(_0x331e36);}}async[a0_0x591e8d(0x1f9)](_0x34acbf){const _0x1737dc=a0_0x591e8d;try{return await this[_0x1737dc(0x296)][_0x1737dc(0x5f7)](_0x34acbf[_0x1737dc(0x703)],_0x34acbf['name']),{'update':'success'};}catch(_0x58b17c){let _0x30555a=_0x1737dc(0x7ae),_0x3be5b2=_0x58b17c instanceof Error?_0x58b17c['message']:typeof _0x58b17c==_0x1737dc(0x808)?JSON[_0x1737dc(0x62f)](_0x58b17c):_0x58b17c,_0x141be8=_0x30555a+':\x20'+_0x3be5b2;throw this['logger'][_0x1737dc(0x62b)](this[_0x1737dc(0x75c)]+'\x20('+this[_0x1737dc(0x3ec)][_0x1737dc(0x490)]+'):\x20'+_0x141be8),new O(_0x141be8);}}async[a0_0x591e8d(0x3e3)](_0x476d8b){const _0x23a200=a0_0x591e8d;try{let _0x408757=await this['client'][_0x23a200(0x36c)](_0x476d8b[_0x23a200(0x703)],_0x476d8b[_0x23a200(0x2d1)]);return{'success':!0x0};}catch(_0x5c8766){let _0x1db236=_0x23a200(0x36e),_0x273a1c=_0x5c8766 instanceof Error?_0x5c8766[_0x23a200(0x5b7)]:typeof _0x5c8766==_0x23a200(0x808)?JSON['stringify'](_0x5c8766):_0x5c8766,_0x111646=_0x1db236+':\x20'+_0x273a1c;throw this['logger'][_0x23a200(0x62b)](this['instanceName']+'\x20('+this['instance'][_0x23a200(0x490)]+_0x23a200(0x872)+_0x111646),new O(_0x111646);}}async[a0_0x591e8d(0x554)](_0x37a5a4){const _0x1162d2=a0_0x591e8d;try{return await this['client']['groupSettingUpdate'](_0x37a5a4['groupJid'],_0x37a5a4['setting']),{'update':_0x1162d2(0x7e4)};}catch(_0x3371e8){let _0x17dc6c=_0x1162d2(0x1c6),_0xdc7ea4=_0x3371e8 instanceof Error?_0x3371e8['message']:typeof _0x3371e8==_0x1162d2(0x808)?JSON[_0x1162d2(0x62f)](_0x3371e8):_0x3371e8,_0x171124=_0x17dc6c+':\x20'+_0xdc7ea4;throw this[_0x1162d2(0x484)][_0x1162d2(0x62b)](this[_0x1162d2(0x75c)]+'\x20('+this[_0x1162d2(0x3ec)]['wuid']+'):\x20'+_0x171124),new O(_0x171124);}}async['updateGroupPicture'](_0x2c523e){const _0x3293bd=a0_0x591e8d;try{let _0x2834c6;if((0x0,D['isURL'])(_0x2c523e[_0x3293bd(0x861)])){let _0x109333=new Date()[_0x3293bd(0x7ab)](),_0x5019f4=_0x2c523e[_0x3293bd(0x861)]+_0x3293bd(0x486)+_0x109333;_0x2834c6=(await Q[_0x3293bd(0x2ab)][_0x3293bd(0x2f4)](_0x5019f4,{'responseType':'arraybuffer'}))[_0x3293bd(0x495)];}else{if((0x0,D[_0x3293bd(0x3d0)])(_0x2c523e[_0x3293bd(0x861)]))_0x2834c6=Buffer['from'](_0x2c523e[_0x3293bd(0x861)],'base64');else throw new m(_0x3293bd(0x542));}return await this['client'][_0x3293bd(0x6fd)](_0x2c523e[_0x3293bd(0x703)],_0x2834c6),{'update':_0x3293bd(0x7e4)};}catch(_0x93e7f1){let _0x13e12c='Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGroupPicture',_0x548c0f=_0x93e7f1 instanceof Error?_0x93e7f1[_0x3293bd(0x5b7)]:typeof _0x93e7f1==_0x3293bd(0x808)?JSON['stringify'](_0x93e7f1):_0x93e7f1,_0x3c3b7e=_0x13e12c+':\x20'+_0x548c0f;throw this[_0x3293bd(0x484)]['error'](this[_0x3293bd(0x75c)]+'\x20('+this[_0x3293bd(0x3ec)][_0x3293bd(0x490)]+_0x3293bd(0x872)+_0x3c3b7e),new O(_0x3c3b7e);}}},Ut=class u{constructor(_0x3c6e52,_0x32a339,_0x4d0a1b){const _0x58fb90=a0_0x591e8d;this[_0x58fb90(0x2d4)]=_0x3c6e52,this['configService']=_0x32a339,this[_0x58fb90(0x799)]=_0x4d0a1b,this['db']={},this[_0x58fb90(0x79c)]={},this[_0x58fb90(0x484)]=new N(u[_0x58fb90(0x1f8)]),this['waInstances']={},(this[_0x58fb90(0x41f)](),this[_0x58fb90(0x478)](),Object[_0x58fb90(0x5ba)](this['db'],_0x32a339[_0x58fb90(0x2f4)](_0x58fb90(0x229))),Object[_0x58fb90(0x5ba)](this[_0x58fb90(0x79c)],_0x32a339[_0x58fb90(0x2f4)]('REDIS')),this[_0x58fb90(0x409)]=this['db'][_0x58fb90(0x754)]?this['repository'][_0x58fb90(0x344)]?.['db'](this['db'][_0x58fb90(0x848)][_0x58fb90(0x186)]+'-instances'):void 0x0,this[_0x58fb90(0x623)]=this[_0x58fb90(0x79c)][_0x58fb90(0x754)]?new ue(this[_0x58fb90(0x79c)]):void 0x0);}async[a0_0x591e8d(0x526)](_0x20f91b){const _0x2aab63=a0_0x591e8d;if(_0x20f91b&&!this[_0x2aab63(0x37e)][_0x20f91b])throw new F(_0x2aab63(0x39b)+_0x20f91b+'\x22\x20not\x20found');let _0x16dfb5=[];for await(let [_0x296336,_0x33c13d]of Object['entries'](this[_0x2aab63(0x37e)]))if(_0x33c13d&&_0x33c13d[_0x2aab63(0x837)][_0x2aab63(0x751)]===_0x2aab63(0x4b7)){let _0x478aa3=await this[_0x2aab63(0x799)][_0x2aab63(0x5ef)][_0x2aab63(0x2c5)](_0x296336);_0x16dfb5['push']({'instance':{'instanceName':_0x296336,'apikey':_0x478aa3[_0x2aab63(0x1e5)],'owner':_0x33c13d[_0x2aab63(0x490)],'profileName':await _0x33c13d['getProfileName']()||_0x2aab63(0x6e9),'profilePictureUrl':_0x33c13d[_0x2aab63(0x577)]}});}return _0x16dfb5[_0x2aab63(0x2c5)](_0x54160e=>_0x54160e[_0x2aab63(0x3ec)][_0x2aab63(0x75c)]===_0x20f91b)??_0x16dfb5;}async[a0_0x591e8d(0x827)](_0x40b726){const _0x517633=a0_0x591e8d;if(this['db']['ENABLED']&&(await this[_0x517633(0x799)]['dbServer'][_0x517633(0x79d)](),(await this['dbInstance'][_0x517633(0x78f)]())[_0x517633(0x836)]>0x0&&await this[_0x517633(0x409)]['dropCollection'](_0x40b726)),this[_0x517633(0x79c)][_0x517633(0x754)]){this[_0x517633(0x623)][_0x517633(0x6f3)]=_0x40b726,await this[_0x517633(0x623)][_0x517633(0x79a)]();return;}}async[a0_0x591e8d(0x248)](){const _0x108af9=a0_0x591e8d;await this[_0x108af9(0x42a)]();let _0x12af47=async _0x9ddd52=>{const _0x47ef98=_0x108af9;let _0x1b7723=new Ce(this[_0x47ef98(0x285)],this[_0x47ef98(0x2d4)],this[_0x47ef98(0x799)]);_0x1b7723[_0x47ef98(0x75c)]=_0x9ddd52,await _0x1b7723[_0x47ef98(0x4c5)](),this[_0x47ef98(0x37e)][_0x9ddd52]=_0x1b7723;};try{if(this[_0x108af9(0x79c)][_0x108af9(0x754)]){let _0xa805ea=await this[_0x108af9(0x623)][_0x108af9(0x238)]();_0xa805ea?.[_0x108af9(0x836)]>0x0&&_0xa805ea[_0x108af9(0x5ce)](async _0x2f7d1a=>await _0x12af47(_0x2f7d1a['split'](':')[0x1]));return;}if(this['db']['ENABLED']){await this[_0x108af9(0x799)][_0x108af9(0x344)][_0x108af9(0x79d)]();let _0x43d021=await this[_0x108af9(0x409)]['collections']();_0x43d021[_0x108af9(0x836)]>0x0&&_0x43d021['forEach'](async _0x3e32f9=>await _0x12af47(_0x3e32f9[_0x108af9(0x1d1)][_0x108af9(0x4d0)](/^[\w-]+\./,'')));return;}}catch(_0xf90f8a){this[_0x108af9(0x484)]['error'](_0xf90f8a);}}async[a0_0x591e8d(0x4e0)](){const _0x35a383=a0_0x591e8d;try{let _0x3b8d73=await this['repository']['auth'][_0x35a383(0x45c)]({'online':!0x1});for(let _0x44e250 of _0x3b8d73){let _0x276a57=_0x44e250[_0x35a383(0x812)];await se[_0x35a383(0x2cd)](W,_0x276a57);}console[_0x35a383(0x2c3)](_0x35a383(0x71a)+_0x3b8d73['length']);let _0xff9c08={'online':!0x1},_0x1f3a83=await this[_0x35a383(0x799)][_0x35a383(0x5ef)][_0x35a383(0x76e)](_0xff9c08);console[_0x35a383(0x2c3)](_0x35a383(0x3f9)+_0x1f3a83[_0x35a383(0x417)]);}catch(_0x4021e2){console[_0x35a383(0x62b)](_0x35a383(0x57c),_0x4021e2);}}async[a0_0x591e8d(0x42a)](){const _0x427723=a0_0x591e8d;try{let _0x5b5b14={'online':!0x1},_0xe24cce={'online':!0x1,'lastDisconnect':Date[_0x427723(0x673)]()},_0x8ce7e4=await this[_0x427723(0x799)][_0x427723(0x5ef)][_0x427723(0x83d)](_0x5b5b14,_0xe24cce);await this[_0x427723(0x4e0)]();}catch(_0x495031){console[_0x427723(0x62b)](_0x427723(0x50b),_0x495031);}}[a0_0x591e8d(0x41f)](){const _0x400277=a0_0x591e8d;this[_0x400277(0x2d4)]['on'](_0x400277(0x6c7),async _0x4992da=>{const _0x47e5f7=_0x400277;try{this[_0x47e5f7(0x37e)][_0x4992da]=void 0x0;}catch{}try{this[_0x47e5f7(0x827)](_0x4992da);}finally{this['logger'][_0x47e5f7(0x746)](_0x47e5f7(0x39b)+_0x4992da+_0x47e5f7(0x346));}});}['noConnection'](){const _0x2ad6db=a0_0x591e8d;this['eventEmitter']['on'](_0x2ad6db(0x1f5),async _0x123a0a=>{const _0x149977=_0x2ad6db;try{this[_0x149977(0x37e)][_0x123a0a]=void 0x0;}catch{}try{this[_0x149977(0x827)](_0x123a0a);}finally{this[_0x149977(0x484)][_0x149977(0x746)](_0x149977(0x39b)+_0x123a0a+_0x149977(0x88b));}});}},jt=class extends T{[a0_0x591e8d(0x52d)](_0x3e85ea){return Zs(_0x3e85ea);}async[a0_0x591e8d(0x292)](_0x4b9264){const _0x3c67de=a0_0x591e8d;if(_0x4b9264[_0x3c67de(0x836)]!==0x0)try{return{'insertCount':(await this[_0x3c67de(0x52d)](_0x4b9264[0x0][_0x3c67de(0x7d9)])[_0x3c67de(0x5d2)]([..._0x4b9264]))['length']};}catch(_0x2ee76c){return _0x2ee76c;}}async[a0_0x591e8d(0x2c5)](_0x432116,_0x16a27c){const _0x337ed5=a0_0x591e8d;try{let _0x9c31ad=this[_0x337ed5(0x52d)](_0x16a27c),_0x19733a=R(_0x432116[_0x337ed5(0x41b)]);return await _0x9c31ad['find'](_0x19733a)['sort']({'lastmsg':-0x1})[_0x337ed5(0x22c)](_0x432116?.[_0x337ed5(0x22c)]??0x0)['lean']();}catch{return[];}}async['findGroupsEspecial'](_0x4eea75,_0x45556d){const _0x172c3d=a0_0x591e8d;try{let _0x56b0ec=this['getChatModelForOwner'](_0x45556d),_0x331c80=R(_0x4eea75[_0x172c3d(0x41b)]);return _0x331c80[_0x172c3d(0x3fb)]={'$ne':[]},await _0x56b0ec['find'](_0x331c80)[_0x172c3d(0x543)]({'lastmsg':-0x1})[_0x172c3d(0x22c)](_0x4eea75?.[_0x172c3d(0x22c)]??0x0)[_0x172c3d(0x7d3)]();}catch{return[];}}async[a0_0x591e8d(0x6f7)](_0x4fb114,_0x391b22){const _0x3ad255=a0_0x591e8d;try{return{'deletedCount':(await this[_0x3ad255(0x52d)](_0x391b22)[_0x3ad255(0x76e)]({..._0x4fb114[_0x3ad255(0x41b)]}))[_0x3ad255(0x57a)]};}catch(_0x42da4c){return{'error':_0x42da4c?.['toString']()};}}async[a0_0x591e8d(0x708)](_0x3343ee,_0x3b21d9){const _0x4bfa5e=a0_0x591e8d;try{return await this[_0x4bfa5e(0x52d)](_0x3b21d9)[_0x4bfa5e(0x76e)]({..._0x3343ee[_0x4bfa5e(0x41b)]}),[];}catch(_0x28b771){return{'error':_0x28b771?.[_0x4bfa5e(0x44c)]()};}}async[a0_0x591e8d(0x685)](_0x552d5c,_0x31e98f){const _0x3b801e=a0_0x591e8d;try{let _0x22e38f=this['getChatModelForOwner'](_0x31e98f),_0x43f776=R(_0x552d5c[_0x3b801e(0x41b)]);return await _0x22e38f[_0x3b801e(0x685)](_0x43f776)[_0x3b801e(0x7d3)]();}catch{return null;}}async[a0_0x591e8d(0x828)](_0x35bbb9,_0x49812c,_0xe9910d,_0x2547ee,_0x4529c2=a0_0x591e8d(0x3bf)){const _0x2c5576=a0_0x591e8d;try{let _0x2faa80={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x2547ee},_0x4c535d=this['getChatModelForOwner'](_0xe9910d),_0x1b78a7=R(_0x35bbb9[_0x2c5576(0x41b)]);Object['keys'](_0x49812c)['forEach'](_0x2688cf=>{_0x49812c[_0x2688cf]==null&&delete _0x49812c[_0x2688cf];});let _0x87c920={};return _0x87c920[_0x4529c2]=_0x49812c,await _0x4c535d['findOneAndUpdate'](_0x1b78a7,_0x87c920,_0x2faa80);}catch(_0x6ac8b9){return console['error'](_0x6ac8b9),null;}}async[a0_0x591e8d(0x430)](_0x4e445d){const _0x55415b=a0_0x591e8d;try{let _0x4bec12=this[_0x55415b(0x52d)](_0x4e445d[0x0][_0x55415b(0x18a)][_0x55415b(0x41b)][_0x55415b(0x7d9)]),_0x5e9a62=_0x4e445d[_0x55415b(0x276)](_0x1dfa2d=>({'updateOne':{'filter':{..._0x1dfa2d[_0x55415b(0x18a)][_0x55415b(0x41b)]},'update':{'$set':_0x1dfa2d[_0x55415b(0x1d9)]},'upsert':!0x0}})),_0x381a46=await _0x4bec12[_0x55415b(0x533)](_0x5e9a62);return _0x381a46[_0x55415b(0x818)]+_0x381a46['upsertedCount'];}catch(_0x2183a5){return console[_0x55415b(0x62b)](_0x2183a5),0x0;}}async[a0_0x591e8d(0x84c)](_0x30397f){const _0x3e2dab=a0_0x591e8d;try{let _0x44b00a={'group_isCommunity':'','group_announce':'','group_size':''},_0x45c3a9={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x5d29d0={'$unset':_0x44b00a};return(await this[_0x3e2dab(0x52d)](_0x30397f)[_0x3e2dab(0x430)](_0x45c3a9,_0x5d29d0))[_0x3e2dab(0x818)];}catch(_0x23955d){return console[_0x3e2dab(0x62b)](_0x3e2dab(0x3c1),_0x23955d),0x0;}}async['updateMissingEtiquetas'](_0x53c8d5){const _0xb48ef0=a0_0x591e8d;try{let _0x56cb72=this[_0xb48ef0(0x52d)](_0x53c8d5),_0x57b725={'leadInfo.etiquetas':{'$exists':!0x1}},_0x1cb914={'$set':{'leadInfo.etiquetas':[]}};return(await _0x56cb72[_0xb48ef0(0x430)](_0x57b725,_0x1cb914))[_0xb48ef0(0x818)];}catch(_0x14d0b0){return console[_0xb48ef0(0x62b)](_0x14d0b0),0x0;}}async[a0_0x591e8d(0x551)](_0x50d932){const _0x18fdf5=a0_0x591e8d;try{let _0x5a9237=this[_0x18fdf5(0x52d)](_0x50d932),_0x315359={'leadInfo.tags':{'$exists':!0x1}},_0x333351={'$set':{'leadInfo.tags':[]}};return(await _0x5a9237['updateMany'](_0x315359,_0x333351))['modifiedCount'];}catch(_0x555656){return console[_0x18fdf5(0x62b)](_0x555656),0x0;}}async[a0_0x591e8d(0x1be)](_0x420979){const _0x254a96=a0_0x591e8d;try{let _0x226c62=this[_0x254a96(0x52d)](_0x420979),_0x4924d1={'leadInfo.customFields':{'$exists':!0x1}},_0x727350={'$set':{'leadInfo.customFields':[]}};return(await _0x226c62[_0x254a96(0x430)](_0x4924d1,_0x727350))['modifiedCount'];}catch(_0x573a37){return console[_0x254a96(0x62b)](_0x573a37),0x0;}}async[a0_0x591e8d(0x5d2)](_0x3c71bd,_0x376c29){const _0x59be89=a0_0x591e8d;if(!Array['isArray'](_0x3c71bd)||_0x3c71bd[_0x59be89(0x836)]===0x0)throw new Error('Nenhum\x20chat\x20fornecido\x20para\x20insero.');try{return(await this['getChatModelForOwner'](_0x376c29)[_0x59be89(0x5d2)](_0x3c71bd))[_0x59be89(0x836)];}catch(_0x29faff){throw console[_0x59be89(0x62b)]('Erro\x20ao\x20inserir\x20chats:',_0x29faff),_0x29faff;}}async['deleteChat'](_0x2e87de,_0xc4ffc8){const _0x50a1c3=a0_0x591e8d;try{await this[_0x50a1c3(0x52d)](_0xc4ffc8)['deleteOne']({'_id':_0x2e87de});}catch(_0x566b40){throw console[_0x50a1c3(0x62b)](_0x50a1c3(0x1af),_0x566b40),_0x566b40;}}},Jt=class extends T{constructor(_0x47cf95,_0x529bfb,_0x477384){const _0x4b34da=a0_0x591e8d;super(_0x529bfb),this[_0x4b34da(0x58b)]=_0x47cf95,this[_0x4b34da(0x285)]=_0x529bfb,this[_0x4b34da(0x5af)]=_0x477384;}async[a0_0x591e8d(0x292)](_0x46722b){const _0xa93603=a0_0x591e8d;if(_0x46722b[_0xa93603(0x836)]!==0x0)try{return{'insertCount':(await this[_0xa93603(0x58b)][_0xa93603(0x5d2)]([..._0x46722b]))[_0xa93603(0x836)]};}catch(_0x2a3e26){return _0x2a3e26;}}async['update'](_0x405886,_0x13552b){const _0x339a18=a0_0x591e8d;try{let _0x390d3a=R(_0x405886[_0x339a18(0x41b)]);return{'updatedCount':(await this[_0x339a18(0x58b)][_0x339a18(0x430)](_0x390d3a,{'$set':_0x13552b}))[_0x339a18(0x818)]};}catch(_0x557263){return console[_0x339a18(0x62b)](_0x339a18(0x402),_0x557263),{'error':_0x557263[_0x339a18(0x44c)]()};}}async[a0_0x591e8d(0x24c)](_0x4ee922){const _0x39d05e=a0_0x591e8d;try{let _0x1f87d6={'_id':{'$in':_0x4ee922}};return await this['cacheContactModel'][_0x39d05e(0x2c5)](_0x1f87d6)[_0x39d05e(0x7d3)]();}catch(_0x397c7a){return console[_0x39d05e(0x62b)](_0x39d05e(0x3dc),_0x397c7a),[];}}async[a0_0x591e8d(0x6f7)](_0x2b2c6b){const _0x4dabb8=a0_0x591e8d;try{return{'deletedCount':(await this[_0x4dabb8(0x58b)][_0x4dabb8(0x76e)]({..._0x2b2c6b[_0x4dabb8(0x41b)]}))[_0x4dabb8(0x57a)]};}catch(_0x526db5){return{'error':_0x526db5?.[_0x4dabb8(0x44c)]()};}}async[a0_0x591e8d(0x2c5)](_0x5264b5){const _0x796890=a0_0x591e8d;try{let _0x468054=R(_0x5264b5[_0x796890(0x41b)]);return await this[_0x796890(0x58b)][_0x796890(0x2c5)](_0x468054)[_0x796890(0x22c)](_0x5264b5?.[_0x796890(0x22c)]??0x0)[_0x796890(0x7d3)]();}catch{return[];}}async[a0_0x591e8d(0x685)](_0x40151f){const _0x25d575=a0_0x591e8d;try{let _0x2e2339=R(_0x40151f[_0x25d575(0x41b)]);return await this[_0x25d575(0x58b)][_0x25d575(0x685)](_0x2e2339)[_0x25d575(0x7d3)]();}catch{return null;}}},qt=class extends T{['getLabelModelForOwner'](_0x3570dc){return Ma(_0x3570dc);}async[a0_0x591e8d(0x828)](_0x5f11c4,_0x430918,_0x5947f9,_0x58ff19){const _0x393bfb=a0_0x591e8d;try{let _0x38d49b={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x58ff19},_0x1346dc=this[_0x393bfb(0x1c9)](_0x5947f9),_0x48d885=R(_0x5f11c4[_0x393bfb(0x41b)]);return await _0x1346dc[_0x393bfb(0x6db)](_0x48d885,{'$set':_0x430918},_0x38d49b);}catch(_0x339c78){return console[_0x393bfb(0x62b)](_0x339c78),null;}}async[a0_0x591e8d(0x2c5)](_0xcdca2b,_0xee438b){const _0x58460b=a0_0x591e8d;try{let _0x2151d4=this[_0x58460b(0x1c9)](_0xee438b),_0x42f97e=R(_0xcdca2b[_0x58460b(0x41b)]);return await _0x2151d4[_0x58460b(0x2c5)](_0x42f97e);}catch(_0x2b0339){console['error'](_0x2b0339);}}async[a0_0x591e8d(0x6f7)](_0x1f8a75,_0x40be63){const _0x226e4e=a0_0x591e8d;try{let _0x2af57c=this['getLabelModelForOwner'](_0x40be63),_0x2c5d98=R(_0x1f8a75['where']);await _0x2af57c['deleteMany'](_0x2c5d98);}catch(_0x59f4f9){console[_0x226e4e(0x62b)](_0x59f4f9);}}async[a0_0x591e8d(0x708)](_0x4aab85){const _0xb00a78=a0_0x591e8d;try{return await this[_0xb00a78(0x1c9)](_0x4aab85)['collection'][_0xb00a78(0x3ad)](),{'success':!0x0};}catch(_0x4e6ca6){return console[_0xb00a78(0x62b)](_0x4e6ca6),{'success':!0x1,'error':_0x4e6ca6};}}},Vt=class{constructor(_0x16fe7d){this['waMonitor']=_0x16fe7d;}async['editChat']({instanceName:_0x289237},_0x4ed9fd){const _0x4d9f2d=a0_0x591e8d;return await this[_0x4d9f2d(0x6f2)][_0x4d9f2d(0x37e)][_0x289237][_0x4d9f2d(0x595)](_0x4ed9fd);}async[a0_0x591e8d(0x1b5)]({instanceName:_0x431428},_0xa54509){const _0xb68d85=a0_0x591e8d;return await this[_0xb68d85(0x6f2)][_0xb68d85(0x37e)][_0x431428][_0xb68d85(0x1b5)](_0xa54509);}async[a0_0x591e8d(0x889)]({instanceName:_0x7d4ba5},_0x590e57){const _0x7a9f19=a0_0x591e8d;return await this[_0x7a9f19(0x6f2)][_0x7a9f19(0x37e)][_0x7d4ba5][_0x7a9f19(0x889)](_0x590e57);}async['readMessage']({instanceName:_0x550a18},_0x51cb43){const _0x22087a=a0_0x591e8d;return await this['waMonitor'][_0x22087a(0x37e)][_0x550a18][_0x22087a(0x4e2)](_0x51cb43);}async[a0_0x591e8d(0x332)]({instanceName:_0x3926c9},_0xc146bf){const _0x416bd0=a0_0x591e8d;return await this[_0x416bd0(0x6f2)]['waInstances'][_0x3926c9][_0x416bd0(0x332)](_0xc146bf);}async[a0_0x591e8d(0x545)]({instanceName:_0x2cba90},_0x3a4a72){const _0x56e655=a0_0x591e8d;return await this[_0x56e655(0x6f2)][_0x56e655(0x37e)][_0x2cba90][_0x56e655(0x545)](_0x3a4a72);}async['fetchProfilePicture']({instanceName:_0xcdf187},_0x1a8752){const _0x39fc77=a0_0x591e8d;return await this[_0x39fc77(0x6f2)][_0x39fc77(0x37e)][_0xcdf187][_0x39fc77(0x1de)](_0x1a8752[_0x39fc77(0x5f6)]);}async[a0_0x591e8d(0x5da)]({instanceName:_0x364914},_0x57833c){const _0x48e67f=a0_0x591e8d;return await this[_0x48e67f(0x6f2)][_0x48e67f(0x37e)][_0x364914]['fetchProfile'](_0x57833c[_0x48e67f(0x5f6)]);}async[a0_0x591e8d(0x390)]({instanceName:_0x215407},_0x2f122f){const _0x6ba7ff=a0_0x591e8d;return await this[_0x6ba7ff(0x6f2)]['waInstances'][_0x215407][_0x6ba7ff(0x390)](_0x2f122f);}async[a0_0x591e8d(0x538)]({instanceName:_0x46f9f8},_0xe74c9d){const _0x3c85c6=a0_0x591e8d;return await this[_0x3c85c6(0x6f2)][_0x3c85c6(0x37e)][_0x46f9f8]['fetchContacts'](_0xe74c9d);}async[a0_0x591e8d(0x4af)]({instanceName:_0x56e5e3},_0x42b42f){const _0x4f817a=a0_0x591e8d;return await this[_0x4f817a(0x6f2)][_0x4f817a(0x37e)][_0x56e5e3]['getBase64FromMediaMessage'](_0x42b42f);}async[a0_0x591e8d(0x6c5)]({instanceName:_0x495da2},_0x1f3697){const _0x2f0f40=a0_0x591e8d;return await this['waMonitor']['waInstances'][_0x495da2][_0x2f0f40(0x6c5)](_0x1f3697);}async[a0_0x591e8d(0x391)]({instanceName:_0x41c2c3}){const _0x326254=a0_0x591e8d;return await this[_0x326254(0x6f2)][_0x326254(0x37e)][_0x41c2c3][_0x326254(0x391)]();}async[a0_0x591e8d(0x3d4)]({instanceName:_0x3daab6}){const _0x2b9ab3=a0_0x591e8d;return await this[_0x2b9ab3(0x6f2)][_0x2b9ab3(0x37e)][_0x3daab6][_0x2b9ab3(0x3d4)]();}async[a0_0x591e8d(0x60e)]({instanceName:_0x4d0aa3}){const _0x439c40=a0_0x591e8d;return await this['waMonitor'][_0x439c40(0x37e)][_0x4d0aa3][_0x439c40(0x60e)]();}async[a0_0x591e8d(0x252)]({instanceName:_0xb5cf31},_0x5da451){return await this['waMonitor']['waInstances'][_0xb5cf31]['updatePrivacySettings'](_0x5da451);}async[a0_0x591e8d(0x4dc)]({instanceName:_0x40ca33},_0x240288){const _0x364628=a0_0x591e8d;return await this[_0x364628(0x6f2)][_0x364628(0x37e)][_0x40ca33][_0x364628(0x4dc)](_0x240288[_0x364628(0x5f6)]);}async[a0_0x591e8d(0x2a0)]({instanceName:_0x4eb218},_0x5ed805){const _0xb272e4=a0_0x591e8d;return await this['waMonitor'][_0xb272e4(0x37e)][_0x4eb218][_0xb272e4(0x2a0)](_0x5ed805[_0xb272e4(0x1f8)]);}async[a0_0x591e8d(0x624)]({instanceName:_0xc9da72},_0x21ae1a){const _0x14399c=a0_0x591e8d;return await this[_0x14399c(0x6f2)]['waInstances'][_0xc9da72][_0x14399c(0x624)](_0x21ae1a['status']);}async['updateProfilePicture']({instanceName:_0x77c1a2},_0xd5464e){const _0x2dd1fb=a0_0x591e8d;return await this['waMonitor']['waInstances'][_0x77c1a2][_0x2dd1fb(0x6fd)](_0xd5464e[_0x2dd1fb(0x7da)]);}async[a0_0x591e8d(0x15d)]({instanceName:_0x8bdd61},_0x159b6c){const _0x300509=a0_0x591e8d;return await this[_0x300509(0x6f2)][_0x300509(0x37e)][_0x8bdd61][_0x300509(0x15d)]();}},Gt=require(a0_0x591e8d(0x234)),Bt=class u{constructor(_0xdca4b5,_0x18f585,_0x1ea8e2,_0x9a62df,_0x19b916){const _0x5c37ea=a0_0x591e8d;this['waMonitor']=_0xdca4b5,this[_0x5c37ea(0x285)]=_0x18f585,this[_0x5c37ea(0x799)]=_0x1ea8e2,this[_0x5c37ea(0x2d4)]=_0x9a62df,this[_0x5c37ea(0x464)]=_0x19b916,this[_0x5c37ea(0x484)]=new N(u[_0x5c37ea(0x1f8)]);}async[a0_0x591e8d(0x562)]({instanceName:_0x12669f,apikey:_0x39e935,number:_0x288e81,proxy:_0x1b6980=!0x0}){const _0x239639=a0_0x591e8d;try{let _0x3a4b8f=new Ce(this[_0x239639(0x285)],this['eventEmitter'],this[_0x239639(0x799)]);_0x3a4b8f[_0x239639(0x75c)]=_0x12669f,this[_0x239639(0x6f2)][_0x239639(0x37e)][_0x3a4b8f[_0x239639(0x75c)]]=_0x3a4b8f;let _0x481c5d={};_0x39e935?(await this[_0x239639(0x799)]['auth'][_0x239639(0x80f)]({'apikey':_0x39e935},_0x12669f),_0x481c5d['apikey']=_0x39e935):_0x481c5d=await this[_0x239639(0x464)][_0x239639(0x517)]({'instanceName':_0x3a4b8f[_0x239639(0x75c)]});let _0x4f7280;if(_0x288e81){if(_0x4f7280=await this[_0x239639(0x28b)](_0x288e81),_0x4f7280[_0x239639(0x62b)])throw new O(_0x4f7280[_0x239639(0x62b)]['toString']());_0x288e81=_0x4f7280[_0x239639(0x5f6)];}let _0x317bcf;return await _0x3a4b8f['connectToWhatsapp'](_0x288e81),await(0x0,Gt[_0x239639(0x1ca)])(0xfa0),_0x288e81&&await(0x0,Gt[_0x239639(0x1ca)])(0xbb8),_0x317bcf=_0x3a4b8f[_0x239639(0x3dd)],{'instance':{'instanceName':_0x3a4b8f[_0x239639(0x75c)],'status':_0x239639(0x503)},'hash':_0x481c5d,'qrcode':_0x317bcf};}catch(_0x18ec74){throw this[_0x239639(0x484)]['error'](_0x18ec74),_0x18ec74;}}async[a0_0x591e8d(0x264)]({instanceName:_0x18e096,number:_0x525713=null}){const _0x3ed918=a0_0x591e8d;try{let _0x406e42=this[_0x3ed918(0x6f2)]['waInstances'][_0x18e096];switch(_0x406e42?.['connectionStatus']?.[_0x3ed918(0x751)]){case _0x3ed918(0x3e5):return await _0x406e42['connectToWhatsapp'](_0x525713),await(0x0,Gt[_0x3ed918(0x1ca)])(0x7d0),_0x406e42[_0x3ed918(0x3dd)];case _0x3ed918(0x811):return _0x406e42['qrCode'];default:return await this[_0x3ed918(0x73f)]({'instanceName':_0x18e096});}}catch(_0x4305fc){this['logger']['log'](_0x4305fc);}}async['connectionState']({instanceName:_0xcefc2e}){const _0x1bb0d1=a0_0x591e8d;let _0x330d79=this[_0x1bb0d1(0x6f2)][_0x1bb0d1(0x37e)][_0xcefc2e]['connectionStatus'],_0x257504=null;_0x330d79[_0x1bb0d1(0x751)]===_0x1bb0d1(0x4b7)&&_0xcefc2e&&(_0x257504=await this[_0x1bb0d1(0x6f2)]['instanceInfo'](_0xcefc2e));let _0x2d35d3=null;return _0x330d79[_0x1bb0d1(0x751)]===_0x1bb0d1(0x811)&&_0xcefc2e&&(_0x2d35d3=this[_0x1bb0d1(0x6f2)][_0x1bb0d1(0x37e)][_0xcefc2e]['qrCode']),{'instance':_0xcefc2e,'connectionStatus':_0x330d79,'instanceInfo':_0x257504,'qrcode':_0x2d35d3};}async[a0_0x591e8d(0x28b)](_0x1b69f3){const _0x3ab0ab=a0_0x591e8d;_0x1b69f3=_0x1b69f3[_0x3ab0ab(0x4d0)](/\D/g,'');let _0x5c8b38=Object[_0x3ab0ab(0x34b)](this[_0x3ab0ab(0x6f2)][_0x3ab0ab(0x37e)])[_0x3ab0ab(0x516)](_0x4929bb=>{const _0x240e98=_0x3ab0ab;let _0xa10c5a=this['waMonitor'][_0x240e98(0x37e)][_0x4929bb];return _0xa10c5a&&_0xa10c5a[_0x240e98(0x837)]&&_0xa10c5a['connectionStatus'][_0x240e98(0x751)]===_0x240e98(0x4b7);});if(_0x5c8b38[_0x3ab0ab(0x836)]===0x0)return{'number':this[_0x3ab0ab(0x244)](_0x1b69f3)};let _0x5342ab=Math['floor'](Math[_0x3ab0ab(0x6a6)]()*_0x5c8b38[_0x3ab0ab(0x836)]),_0xbd7a25=_0x5c8b38[_0x5342ab];try{let _0x18a95c=(await this[_0x3ab0ab(0x6f2)][_0x3ab0ab(0x37e)][_0xbd7a25]['whatsappNumber']({'numbers':[_0x1b69f3]}))['shift']();return _0x18a95c[_0x3ab0ab(0x5c4)]?{'number':_0x18a95c[_0x3ab0ab(0x833)][_0x3ab0ab(0x4d0)](_0x3ab0ab(0x20d),'')}:{'number':_0x1b69f3,'error':'Nmero\x20no\x20possui\x20WhatsApp.'};}catch(_0x89bbff){return this[_0x3ab0ab(0x484)]['error']('Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp:'+_0x89bbff),{'number':_0x1b69f3,'error':_0x3ab0ab(0x202)};}}[a0_0x591e8d(0x244)](_0x1e7ce5){const _0x3d8460=a0_0x591e8d;let _0x1a06cb=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x3d8460(0x3b1)](_0x1e7ce5);if(_0x1a06cb&&_0x1a06cb[0x1]==='55'){let _0x21a382=_0x1a06cb[0x2],_0x47391f=_0x1a06cb[0x3],_0x407656=_0x1a06cb[0x4];if(parseInt(_0x21a382)>=0x1f&&_0x47391f==='9')return _0x1a06cb[0x1]+_0x21a382+_0x407656;}return _0x1e7ce5;}async[a0_0x591e8d(0x336)]({instanceName:_0x35e3be}){const _0x8bd07d=a0_0x591e8d;try{return this[_0x8bd07d(0x6f2)][_0x8bd07d(0x37e)][_0x35e3be]?.[_0x8bd07d(0x296)]?.['ws']?.[_0x8bd07d(0x3e5)](),{'status':_0x8bd07d(0x897),'error':!0x1,'response':{'message':_0x8bd07d(0x4e8)}};}catch(_0x4f7123){this[_0x8bd07d(0x484)][_0x8bd07d(0x62b)](_0x4f7123);}}async[a0_0x591e8d(0x452)]({instanceName:_0x2c9c57}){const _0x400cf7=a0_0x591e8d;return _0x2c9c57?this[_0x400cf7(0x6f2)]['instanceInfo'](_0x2c9c57):this[_0x400cf7(0x6f2)]['instanceInfo']();}async[a0_0x591e8d(0x304)]({instanceName:_0x3fcb0e}){const _0x1babd6=a0_0x591e8d;try{return await this['waMonitor'][_0x1babd6(0x37e)][_0x3fcb0e]?.[_0x1babd6(0x296)]?.[_0x1babd6(0x304)]('Log\x20out\x20instance:\x20'+_0x3fcb0e),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x3aa19b){throw new O(_0x3aa19b['toString']());}}async['deleteInstance']({instanceName:_0x591963}){const _0x2104bd=a0_0x591e8d;if((await this['connectionState']({'instanceName':_0x591963}))[_0x2104bd(0x837)][_0x2104bd(0x751)]==='open')throw new m([_0x2104bd(0x87a),_0x2104bd(0x5e6)]);try{return delete this[_0x2104bd(0x6f2)][_0x2104bd(0x37e)][_0x591963],{'error':!0x1,'message':'Instance\x20deleted'};}catch(_0x17bebf){throw new m(_0x17bebf[_0x2104bd(0x44c)]());}}},ae=require(a0_0x591e8d(0x786)),Wt=class{constructor(_0xfeee6f){this['waMonitor']=_0xfeee6f;}async[a0_0x591e8d(0x326)]({instanceName:_0x5129db},_0x51c2ff){const _0x346068=a0_0x591e8d;return await this[_0x346068(0x6f2)][_0x346068(0x37e)][_0x5129db][_0x346068(0x4fb)](_0x51c2ff);}async['sendMenu']({instanceName:_0x5a6f11},_0x10753e){const _0x59713b=a0_0x591e8d;return await this[_0x59713b(0x6f2)][_0x59713b(0x37e)][_0x5a6f11][_0x59713b(0x275)](_0x10753e);}async[a0_0x591e8d(0x81c)]({instanceName:_0x53f888},_0x2dab06){const _0xe95540=a0_0x591e8d;if((0x0,ae['isBase64'])(_0x2dab06?.[_0xe95540(0x174)]?.[_0xe95540(0x26d)])&&!_0x2dab06?.[_0xe95540(0x174)]?.[_0xe95540(0x875)])throw new m(_0xe95540(0x22b));if((0x0,ae[_0xe95540(0x66f)])(_0x2dab06?.[_0xe95540(0x174)]?.[_0xe95540(0x26d)])||(0x0,ae[_0xe95540(0x3d0)])(_0x2dab06?.['mediaMessage']?.[_0xe95540(0x26d)]))return await this['waMonitor'][_0xe95540(0x37e)][_0x53f888][_0xe95540(0x174)](_0x2dab06);throw new m(_0xe95540(0x1c3));}async[a0_0x591e8d(0x771)]({instanceName:_0x2dc166},_0x3f9b30){const _0x4843fc=a0_0x591e8d;if((0x0,ae[_0x4843fc(0x66f)])(_0x3f9b30[_0x4843fc(0x61b)][_0x4843fc(0x861)])||(0x0,ae['isBase64'])(_0x3f9b30['stickerMessage']['image']))return await this[_0x4843fc(0x6f2)][_0x4843fc(0x37e)][_0x2dc166]['mediaSticker'](_0x3f9b30);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x591e8d(0x864)]({instanceName:_0x1fdf36},_0x2b2297){const _0x30b648=a0_0x591e8d;if((0x0,ae['isURL'])(_0x2b2297[_0x30b648(0x3ea)][_0x30b648(0x6f4)])||(0x0,ae[_0x30b648(0x3d0)])(_0x2b2297[_0x30b648(0x3ea)]['audio']))return await this[_0x30b648(0x6f2)][_0x30b648(0x37e)][_0x1fdf36]['audioWhatsapp'](_0x2b2297);throw new m(_0x30b648(0x1c3));}async['sendButtons']({instanceName:_0x297f7d},_0x26e6e0){const _0x531fd7=a0_0x591e8d;if((0x0,ae[_0x531fd7(0x3d0)])(_0x26e6e0['buttonMessage'][_0x531fd7(0x174)]?.[_0x531fd7(0x26d)])&&!_0x26e6e0[_0x531fd7(0x53c)][_0x531fd7(0x174)]?.[_0x531fd7(0x875)])throw new m(_0x531fd7(0x22b));return await this[_0x531fd7(0x6f2)]['waInstances'][_0x297f7d]['buttonMessage'](_0x26e6e0);}async[a0_0x591e8d(0x3b4)]({instanceName:_0x22749d},_0x126004){const _0x5cb85d=a0_0x591e8d;return await this['waMonitor'][_0x5cb85d(0x37e)][_0x22749d]['locationMessage'](_0x126004);}async[a0_0x591e8d(0x86b)]({instanceName:_0x561391},_0x182c19){const _0x29cd41=a0_0x591e8d;return await this[_0x29cd41(0x6f2)][_0x29cd41(0x37e)][_0x561391][_0x29cd41(0x411)](_0x182c19);}async[a0_0x591e8d(0x82e)]({instanceName:_0x4c08df},_0x4e0bbc){const _0x36a1b6=a0_0x591e8d;return await this[_0x36a1b6(0x6f2)][_0x36a1b6(0x37e)][_0x4c08df]['listMessage'](_0x4e0bbc);}async[a0_0x591e8d(0x4f0)]({instanceName:_0x5ca271},_0x3f0a04){const _0x548887=a0_0x591e8d;return await this[_0x548887(0x6f2)]['waInstances'][_0x5ca271][_0x548887(0x15f)](_0x3f0a04);}async[a0_0x591e8d(0x28c)]({instanceName:_0x4b4b2c},_0x510709){const _0x31eb89=a0_0x591e8d;if(!_0x510709[_0x31eb89(0x4ed)][_0x31eb89(0x555)]['match'](/[^\(\)\w\s-"-\+]+/))throw new m(_0x31eb89(0x3a4));return await this[_0x31eb89(0x6f2)][_0x31eb89(0x37e)][_0x4b4b2c][_0x31eb89(0x4ed)](_0x510709);}async[a0_0x591e8d(0x2fa)]({instanceName:_0x59b4e4},_0x512d5b){const _0x5dfd20=a0_0x591e8d;return await this[_0x5dfd20(0x6f2)][_0x5dfd20(0x37e)][_0x59b4e4][_0x5dfd20(0x806)](_0x512d5b);}},xi=require(a0_0x591e8d(0x37d)),ks=require(a0_0x591e8d(0x38a)),zt=class u{constructor(_0x171af0,_0x4930ee,_0x35c1d1){const _0x52c981=a0_0x591e8d;this[_0x52c981(0x285)]=_0x171af0,this[_0x52c981(0x6f2)]=_0x4930ee,this['repository']=_0x35c1d1,this['logger']=new N(u[_0x52c981(0x1f8)]);}async['jwt'](_0x41a626){const _0x3a822e=a0_0x591e8d;let _0x392c42=this[_0x3a822e(0x285)][_0x3a822e(0x2f4)]('AUTHENTICATION')['JWT'],_0x558080=(0x0,xi[_0x3a822e(0x579)])({'instanceName':_0x41a626[_0x3a822e(0x75c)],'apiName':tt,'tokenId':(0x0,ks['v4'])()},_0x392c42[_0x3a822e(0x376)],{'expiresIn':_0x392c42[_0x3a822e(0x4b6)],'encoding':_0x3a822e(0x59a),'subject':_0x3a822e(0x6c6)}),_0x4f42f6=await this[_0x3a822e(0x799)][_0x3a822e(0x5ef)][_0x3a822e(0x80f)]({'jwt':_0x558080},_0x41a626[_0x3a822e(0x75c)]);if(_0x4f42f6[_0x3a822e(0x62b)])throw this['logger'][_0x3a822e(0x62b)]({'localError':u['name']+'.jwt','error':_0x4f42f6['error']}),new m(_0x3a822e(0x51a),_0x4f42f6[_0x3a822e(0x62b)]?.[_0x3a822e(0x44c)]());return{'jwt':_0x558080};}async['apikey'](_0x2c2ea7){const _0x5f02a6=a0_0x591e8d;let _0x788672=(0x0,ks['v4'])()[_0x5f02a6(0x453)](),_0x94e404=await this[_0x5f02a6(0x799)]['auth']['create']({'apikey':_0x788672},_0x2c2ea7[_0x5f02a6(0x75c)]);if(_0x94e404[_0x5f02a6(0x62b)])throw this[_0x5f02a6(0x484)]['error']({'localError':u[_0x5f02a6(0x1f8)]+_0x5f02a6(0x3fa),'error':_0x94e404[_0x5f02a6(0x62b)]}),new m('Authentication\x20error',_0x94e404['error']?.[_0x5f02a6(0x44c)]());return{'apikey':_0x788672};}async[a0_0x591e8d(0x517)](_0x10cdbf){const _0x2f8f05=a0_0x591e8d;let _0x1db968=this[_0x2f8f05(0x285)][_0x2f8f05(0x2f4)](_0x2f8f05(0x40b));return await this[_0x1db968[_0x2f8f05(0x5d5)]](_0x10cdbf);}},Ht=class{constructor(_0x1a9d14){const _0x2591e8=a0_0x591e8d;this[_0x2591e8(0x6f2)]=_0x1a9d14;}async['createGroup'](_0x4c5578,_0x2d1db7){const _0x80047b=a0_0x591e8d;return await this[_0x80047b(0x6f2)][_0x80047b(0x37e)][_0x4c5578['instanceName']]['createGroup'](_0x2d1db7);}async[a0_0x591e8d(0x4b5)](_0x4b6054,_0x2e2c2c){const _0x1ce45f=a0_0x591e8d;return await this[_0x1ce45f(0x6f2)]['waInstances'][_0x4b6054[_0x1ce45f(0x75c)]][_0x1ce45f(0x4b5)](_0x2e2c2c);}async['groupDesc'](_0x1b4f20,_0x30181f){const _0x5dc54b=a0_0x591e8d;return await this[_0x5dc54b(0x6f2)][_0x5dc54b(0x37e)][_0x1b4f20[_0x5dc54b(0x75c)]][_0x5dc54b(0x78a)](_0x30181f);}async[a0_0x591e8d(0x1f9)](_0x59feef,_0x346622){const _0x2e39af=a0_0x591e8d;return await this[_0x2e39af(0x6f2)]['waInstances'][_0x59feef[_0x2e39af(0x75c)]][_0x2e39af(0x1f9)](_0x346622);}async['groupBetterSetting'](_0xbade64,_0x451d32){const _0x330e75=a0_0x591e8d;return await this[_0x330e75(0x6f2)][_0x330e75(0x37e)][_0xbade64[_0x330e75(0x75c)]]['groupBetterSetting'](_0x451d32);}async[a0_0x591e8d(0x554)](_0x103612,_0x2038d3){const _0x51576b=a0_0x591e8d;return await this[_0x51576b(0x6f2)][_0x51576b(0x37e)][_0x103612[_0x51576b(0x75c)]][_0x51576b(0x554)](_0x2038d3);}async['findGroupInfo'](_0x34c4a5,_0x5c51ec){const _0x19473d=a0_0x591e8d;return await this[_0x19473d(0x6f2)][_0x19473d(0x37e)][_0x34c4a5[_0x19473d(0x75c)]][_0x19473d(0x436)](_0x5c51ec);}async[a0_0x591e8d(0x3eb)](_0xfbb7a1){const _0x30ee35=a0_0x591e8d;return await this[_0x30ee35(0x6f2)]['waInstances'][_0xfbb7a1[_0x30ee35(0x75c)]][_0x30ee35(0x3eb)]();}async[a0_0x591e8d(0x493)](_0x1403f5,_0x3fe466){const _0x5852b4=a0_0x591e8d;return await this[_0x5852b4(0x6f2)][_0x5852b4(0x37e)][_0x1403f5[_0x5852b4(0x75c)]]['inviteCode'](_0x3fe466);}async[a0_0x591e8d(0x6a7)](_0x2701ce,_0x2553dc){const _0x2830f1=a0_0x591e8d;return await this[_0x2830f1(0x6f2)]['waInstances'][_0x2701ce[_0x2830f1(0x75c)]]['joinGroup'](_0x2553dc);}async[a0_0x591e8d(0x569)](_0x7ce289,_0x39cd95){const _0x511446=a0_0x591e8d;return await this[_0x511446(0x6f2)][_0x511446(0x37e)][_0x7ce289['instanceName']][_0x511446(0x569)](_0x39cd95);}async[a0_0x591e8d(0x2de)](_0x3d750f,_0x25a76c){const _0x2c2016=a0_0x591e8d;return await this[_0x2c2016(0x6f2)]['waInstances'][_0x3d750f[_0x2c2016(0x75c)]][_0x2c2016(0x2de)](_0x25a76c);}async['findParticipants'](_0x44334d,_0x5c80dc){const _0x86677d=a0_0x591e8d;return await this[_0x86677d(0x6f2)][_0x86677d(0x37e)][_0x44334d[_0x86677d(0x75c)]][_0x86677d(0x401)](_0x5c80dc);}async[a0_0x591e8d(0x7c5)](_0x3d3963,_0x24b869){const _0x162ad8=a0_0x591e8d;return await this[_0x162ad8(0x6f2)]['waInstances'][_0x3d3963[_0x162ad8(0x75c)]]['updateGParticipant'](_0x24b869);}async[a0_0x591e8d(0x3e3)](_0x4f7bfd,_0x1b332e){const _0x59a5ea=a0_0x591e8d;return await this[_0x59a5ea(0x6f2)]['waInstances'][_0x4f7bfd[_0x59a5ea(0x75c)]][_0x59a5ea(0x3e3)](_0x1b332e);}async[a0_0x591e8d(0x83f)](_0x43d99d,_0x3f6d42){const _0x349057=a0_0x591e8d;return await this[_0x349057(0x6f2)][_0x349057(0x37e)][_0x43d99d[_0x349057(0x75c)]][_0x349057(0x83f)](_0x3f6d42);}},Kt=class{constructor(_0xac6a29){const _0x50161a=a0_0x591e8d;this[_0x50161a(0x6f2)]=_0xac6a29;}['create'](_0x274155,_0x27d516){const _0x2870dd=a0_0x591e8d;return this[_0x2870dd(0x6f2)][_0x2870dd(0x37e)][_0x274155[_0x2870dd(0x75c)]]['setWebhook'](_0x27d516);}async[a0_0x591e8d(0x2c5)](_0xe144a0){const _0x379abe=a0_0x591e8d;try{return await this['waMonitor'][_0x379abe(0x37e)][_0xe144a0[_0x379abe(0x75c)]][_0x379abe(0x509)]();}catch{return{'enabled':null,'url':''};}}},Bp=new N(a0_0x591e8d(0x576)),Qt=class{constructor(_0x13902d){const _0x1da2f9=a0_0x591e8d;this[_0x1da2f9(0x6f2)]=_0x13902d;}async[a0_0x591e8d(0x621)](_0x437872,_0x2c0466){const _0x2797f6=a0_0x591e8d;return await this['waMonitor'][_0x2797f6(0x37e)][_0x437872[_0x2797f6(0x75c)]]['editScheduleMessage'](_0x2c0466);}async['getScheduleMessage'](_0x440270){const _0x1974df=a0_0x591e8d;return await this[_0x1974df(0x6f2)][_0x1974df(0x37e)][_0x440270[_0x1974df(0x75c)]][_0x1974df(0x5cd)]();}async[a0_0x591e8d(0x22a)](_0x1f7005){const _0x17f718=a0_0x591e8d;return await this[_0x17f718(0x6f2)][_0x17f718(0x37e)][_0x1f7005[_0x17f718(0x75c)]][_0x17f718(0x22a)]();}async[a0_0x591e8d(0x689)](_0x32057c){const _0x3b0d17=a0_0x591e8d;return await this[_0x3b0d17(0x6f2)][_0x3b0d17(0x37e)][_0x32057c[_0x3b0d17(0x75c)]][_0x3b0d17(0x689)]();}async[a0_0x591e8d(0x1d2)](_0x527f4d,_0x1374e3){const _0x521283=a0_0x591e8d;return await this['waMonitor'][_0x521283(0x37e)][_0x527f4d[_0x521283(0x75c)]][_0x521283(0x1d2)](_0x1374e3);}async[a0_0x591e8d(0x82a)](_0x15e91c,_0x4d2021){const _0x23d17d=a0_0x591e8d;return await this[_0x23d17d(0x6f2)]['waInstances'][_0x15e91c['instanceName']]['updateCustomFields'](_0x4d2021);}async[a0_0x591e8d(0x2fe)](_0x13444c,_0x1173b0){const _0x2e9808=a0_0x591e8d;return await this[_0x2e9808(0x6f2)]['waInstances'][_0x13444c[_0x2e9808(0x75c)]][_0x2e9808(0x2fe)](_0x1173b0);}async[a0_0x591e8d(0x6c1)](_0x344168,_0xeb5d51){const _0x48509a=a0_0x591e8d;return await this[_0x48509a(0x6f2)][_0x48509a(0x37e)][_0x344168[_0x48509a(0x75c)]][_0x48509a(0x6c1)](_0xeb5d51);}async['startFlow'](_0x519cea,_0x37fbdc){const _0xb92222=a0_0x591e8d;return await this['waMonitor'][_0xb92222(0x37e)][_0x519cea[_0xb92222(0x75c)]][_0xb92222(0x443)](_0x37fbdc);}async[a0_0x591e8d(0x7dc)](_0x94e4c0,_0x266e8b,_0x515bbd,_0x404136){const _0xee6db4=a0_0x591e8d;return await this[_0xee6db4(0x6f2)]['waInstances'][_0x94e4c0][_0xee6db4(0x7dc)](_0x266e8b,_0x515bbd,_0x404136);}async[a0_0x591e8d(0x80d)](_0x1f2644,_0x55aded){const _0x5ce88a=a0_0x591e8d;return await this[_0x5ce88a(0x6f2)][_0x5ce88a(0x37e)][_0x1f2644[_0x5ce88a(0x75c)]][_0x5ce88a(0x80d)](_0x55aded);}async[a0_0x591e8d(0x4da)](_0x4da47c,_0x5c54ff){const _0x243ce1=a0_0x591e8d;return await this['waMonitor'][_0x243ce1(0x37e)][_0x4da47c[_0x243ce1(0x75c)]][_0x243ce1(0x4da)](_0x5c54ff);}async[a0_0x591e8d(0x86d)](_0x299a12,_0x4237ce){const _0x51ea7d=a0_0x591e8d;return await this[_0x51ea7d(0x6f2)]['waInstances'][_0x299a12['instanceName']]['editConversation'](_0x4237ce);}async[a0_0x591e8d(0x315)](_0x3b31fa,_0x20590e){const _0x15afa1=a0_0x591e8d;return await this[_0x15afa1(0x6f2)]['waInstances'][_0x3b31fa[_0x15afa1(0x75c)]][_0x15afa1(0x315)](_0x20590e);}async[a0_0x591e8d(0x883)](_0x5ced82,_0x5d1a45){const _0x224168=a0_0x591e8d;return await this['waMonitor']['waInstances'][_0x5ced82[_0x224168(0x75c)]][_0x224168(0x883)](_0x5d1a45['_id']);}async['createFlow'](_0x28a230,_0x30e278,_0x278153){const _0x1f91ec=a0_0x591e8d;return await this[_0x1f91ec(0x6f2)][_0x1f91ec(0x37e)][_0x28a230[_0x1f91ec(0x75c)]]['createFlow'](_0x30e278,_0x278153);}async[a0_0x591e8d(0x640)](_0x373572,_0x55d4a6,_0x2a17d4){const _0x36e753=a0_0x591e8d;return await this[_0x36e753(0x6f2)][_0x36e753(0x37e)][_0x373572[_0x36e753(0x75c)]][_0x36e753(0x640)](_0x55d4a6,_0x2a17d4);}async['editFlowBlock'](_0x5e5b5d,_0x5389c3){const _0x3474ca=a0_0x591e8d;return await this[_0x3474ca(0x6f2)][_0x3474ca(0x37e)][_0x5e5b5d['instanceName']][_0x3474ca(0x5de)](_0x5389c3);}async[a0_0x591e8d(0x16f)](_0x12566f,_0x234a7b){const _0x21a85e=a0_0x591e8d;return await this['waMonitor'][_0x21a85e(0x37e)][_0x12566f[_0x21a85e(0x75c)]][_0x21a85e(0x16f)](_0x234a7b);}async[a0_0x591e8d(0x722)](_0x153e7d,_0xf4fde1){const _0x5159c3=a0_0x591e8d;return await this[_0x5159c3(0x6f2)][_0x5159c3(0x37e)][_0x153e7d[_0x5159c3(0x75c)]][_0x5159c3(0x722)](_0xf4fde1);}async[a0_0x591e8d(0x5f9)](_0x3e0e6e,_0x26bfe4){const _0x51aac4=a0_0x591e8d;return await this[_0x51aac4(0x6f2)][_0x51aac4(0x37e)][_0x3e0e6e[_0x51aac4(0x75c)]][_0x51aac4(0x5f9)](_0x26bfe4);}async['editFlowVaredit'](_0xe8267,_0x5bbc3c){const _0x3bba64=a0_0x591e8d;return await this['waMonitor'][_0x3bba64(0x37e)][_0xe8267[_0x3bba64(0x75c)]][_0x3bba64(0x5fc)](_0x5bbc3c);}async[a0_0x591e8d(0x4ba)](_0x3225d2,_0x361c3f){const _0x1597b5=a0_0x591e8d;return await this[_0x1597b5(0x6f2)][_0x1597b5(0x37e)][_0x3225d2[_0x1597b5(0x75c)]][_0x1597b5(0x4ba)](_0x361c3f);}async[a0_0x591e8d(0x5e7)](_0x225d47,_0x4fb520){const _0x570fe3=a0_0x591e8d;return await this[_0x570fe3(0x6f2)][_0x570fe3(0x37e)][_0x225d47['instanceName']][_0x570fe3(0x5e7)](_0x4fb520);}async['allFlows'](_0xa715f9){const _0x4f7877=a0_0x591e8d;return await this['waMonitor'][_0x4f7877(0x37e)][_0xa715f9[_0x4f7877(0x75c)]]['allFlows']();}},Yt=class{constructor(_0x4cc0ff){this['webhookService']=_0x4cc0ff;}async[a0_0x591e8d(0x548)](_0x2d8518,_0x4946a1){return this['webhookService']['create'](_0x2d8518,_0x4946a1);}async[a0_0x591e8d(0x509)](_0xe10674){const _0x11b80c=a0_0x591e8d;return this[_0x11b80c(0x631)][_0x11b80c(0x2c5)](_0xe10674);}},Xt=class extends T{constructor(_0xc864d5,_0x2e93e0){const _0x2f060b=a0_0x591e8d;super(_0x2e93e0),this[_0x2f060b(0x499)]=_0xc864d5,this[_0x2f060b(0x285)]=_0x2e93e0;}async[a0_0x591e8d(0x80f)](_0x9ec69e,_0x3393f4){const _0x5d1e7d=a0_0x591e8d;try{return this[_0x5d1e7d(0x327)]['ENABLED']?{'insertCount':(await this[_0x5d1e7d(0x499)][_0x5d1e7d(0x72f)]({'_id':_0x3393f4},{..._0x9ec69e},{'upsert':!0x0}))[_0x5d1e7d(0x818)]}:{'insertCount':0x1};}catch(_0x59d43a){return _0x59d43a;}}async[a0_0x591e8d(0x6f7)](_0x254e32){const _0x19ddcf=a0_0x591e8d;try{if(this[_0x19ddcf(0x327)]['ENABLED']){await this[_0x19ddcf(0x499)][_0x19ddcf(0x1cc)]({'_id':_0x254e32});return;}}catch(_0x494e40){return{'error':_0x494e40};}}async[a0_0x591e8d(0x2c5)](_0x487b66){const _0x2557d1=a0_0x591e8d;try{if(this['dbSettings'][_0x2557d1(0x754)])return await this[_0x2557d1(0x499)][_0x2557d1(0x685)]({'_id':_0x487b66});}catch{return{};}}},Zt=class extends T{constructor(_0x35fb95,_0xc86a8e){const _0x36c872=a0_0x591e8d;super(_0xc86a8e),this[_0x36c872(0x451)]=_0x35fb95,this[_0x36c872(0x285)]=_0xc86a8e,this['auth']=_0xc86a8e[_0x36c872(0x2f4)](_0x36c872(0x40b));}async[a0_0x591e8d(0x80f)](_0x1fa0cc,_0x49111f){const _0x2920f2=a0_0x591e8d;try{if(this['dbSettings']['ENABLED'])return{'insertCount':(await this[_0x2920f2(0x451)][_0x2920f2(0x828)]({'_id':_0x49111f},{'$set':{..._0x1fa0cc}},{'upsert':!0x0}))[_0x2920f2(0x818)]};}catch(_0x3dd5df){return{'error':_0x3dd5df};}}async[a0_0x591e8d(0x83d)](_0x198bb0,_0x34bc37){const _0x3285e4=a0_0x591e8d;try{if(this[_0x3285e4(0x327)][_0x3285e4(0x754)])return{'insertCount':(await this['authModel'][_0x3285e4(0x430)](_0x198bb0,{'$set':_0x34bc37},{'upsert':!0x1}))[_0x3285e4(0x818)]};throw new Error(_0x3285e4(0x441));}catch(_0x44ce8b){return{'error':_0x44ce8b};}}async[a0_0x591e8d(0x76e)](_0x14a50f){const _0x511a48=a0_0x591e8d;try{if(this[_0x511a48(0x327)][_0x511a48(0x754)])return{'insertCount':(await this[_0x511a48(0x451)][_0x511a48(0x76e)](_0x14a50f))[_0x511a48(0x57a)]};throw new Error(_0x511a48(0x42b));}catch(_0x17ac59){return{'error':_0x17ac59};}}async[a0_0x591e8d(0x6f7)](_0x5e30ee){const _0x5877be=a0_0x591e8d;try{if(this['dbSettings'][_0x5877be(0x754)]){await this[_0x5877be(0x451)][_0x5877be(0x1cc)]({'_id':_0x5e30ee});return;}}catch(_0x3770a6){return{'error':_0x3770a6};}}async[a0_0x591e8d(0x2c5)](_0x4e1a73){const _0x2b277e=a0_0x591e8d;try{if(this[_0x2b277e(0x327)][_0x2b277e(0x754)])return await this['authModel']['findOne']({'_id':_0x4e1a73});}catch{return{};}}async[a0_0x591e8d(0x4f8)](){const _0x574a1f=a0_0x591e8d;try{if(this[_0x574a1f(0x327)][_0x574a1f(0x754)])return await this[_0x574a1f(0x451)][_0x574a1f(0x2c5)]();}catch{return[];}}async['findMany'](_0x40c903){const _0x2949ec=a0_0x591e8d;try{if(this[_0x2949ec(0x327)][_0x2949ec(0x754)])return await this['authModel'][_0x2949ec(0x2c5)](_0x40c903);}catch{return[];}}},es=class extends T{async[a0_0x591e8d(0x1cc)](_0xac390d){const _0x4aa084=a0_0x591e8d;try{let _0x348859=R(_0xac390d['where']);return{'deletedCount':(await ye[_0x4aa084(0x1cc)](_0x348859))[_0x4aa084(0x57a)]};}catch(_0x2e4fee){return{'error':_0x2e4fee?.[_0x4aa084(0x44c)]()};}}async[a0_0x591e8d(0x828)](_0xdf31db,_0x548c24){const _0xf71a62=a0_0x591e8d;try{let _0x5b8c9a=await ye[_0xf71a62(0x23b)](_0xdf31db);return _0x5b8c9a?(Object[_0xf71a62(0x5ba)](_0x5b8c9a,_0x548c24),await _0x5b8c9a['save']()):(console[_0xf71a62(0x62b)](_0xf71a62(0x347),_0xdf31db),null);}catch(_0x13c159){return console['error'](_0xf71a62(0x33e),_0x13c159),null;}}async[a0_0x591e8d(0x715)](_0x172b0f){const _0x24193e=a0_0x591e8d;try{return await new ye(_0x172b0f)[_0x24193e(0x6a0)]();}catch(_0x282b5a){return console[_0x24193e(0x62b)]('Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:',_0x282b5a),null;}}async['findAll'](_0x8cb795){const _0x346ae6=a0_0x591e8d;try{let _0x4ba1ce=_0x8cb795[_0x346ae6(0x41b)]??{};return await ye[_0x346ae6(0x2c5)](_0x4ba1ce)[_0x346ae6(0x22c)](_0x8cb795['limit']??0x0)[_0x346ae6(0x7d3)]();}catch(_0x5e6cbf){return console[_0x346ae6(0x62b)](_0x346ae6(0x639),_0x5e6cbf),[];}}async[a0_0x591e8d(0x685)](_0xa8c9dc){const _0x1497cb=a0_0x591e8d;try{let _0x5108fc=R(_0xa8c9dc[_0x1497cb(0x41b)]);return await ye['findOne'](_0x5108fc)[_0x1497cb(0x7d3)]();}catch{return null;}}},ts=class extends T{[a0_0x591e8d(0x547)](_0x4a528e){return ya(_0x4a528e);}async[a0_0x591e8d(0x292)](_0x16975c){const _0x5653d4=a0_0x591e8d;if(_0x16975c[_0x5653d4(0x836)]!==0x0)try{return{'insertCount':(await this[_0x5653d4(0x547)](_0x16975c[0x0]['owner'])[_0x5653d4(0x5d2)]([..._0x16975c]))[_0x5653d4(0x836)]};}catch(_0x8b87d5){return _0x8b87d5;}}async[a0_0x591e8d(0x6f7)](_0x362c9d,_0x155c8c){const _0x10d049=a0_0x591e8d;try{let _0x465e45=this['getConversationModelForOwner'](_0x155c8c),_0x18f9d7=R(_0x362c9d[_0x10d049(0x41b)]);return{'deletedCount':(await _0x465e45[_0x10d049(0x76e)](_0x18f9d7))[_0x10d049(0x57a)]};}catch(_0x353073){return{'error':_0x353073?.['toString']()};}}async[a0_0x591e8d(0x1cc)](_0x38e1b1,_0xd95573){const _0x298be5=a0_0x591e8d;try{let _0x433c2e=this['getConversationModelForOwner'](_0xd95573),_0x553e32=R(_0x38e1b1['where']);return{'deletedCount':(await _0x433c2e[_0x298be5(0x1cc)](_0x553e32))['deletedCount']};}catch(_0x5b81da){return{'error':_0x5b81da?.['toString']()};}}async[a0_0x591e8d(0x1d9)](_0x36a2c0,_0x4178fe){const _0x10dd25=a0_0x591e8d;try{if(_0x36a2c0[_0x10dd25(0x836)]===0x0)return;let _0x902c0c=this['getConversationModelForOwner'](_0x4178fe),_0x6d10cb=_0x36a2c0[_0x10dd25(0x276)](_0x950be=>({'updateOne':{'filter':{'name':_0x950be[_0x10dd25(0x1f8)],'owner':_0x4178fe},'update':{..._0x950be}}})),{modifiedCount:_0x5bb653}=await _0x902c0c[_0x10dd25(0x533)](_0x6d10cb);return{'insertCount':_0x5bb653};}catch{return;}}async[a0_0x591e8d(0x430)](_0x175d36,_0x587491,_0x325453){const _0x2b2fad=a0_0x591e8d;try{return{'modifiedCount':(await this['getConversationModelForOwner'](_0x325453)[_0x2b2fad(0x430)](_0x175d36,{'$set':_0x587491})[_0x2b2fad(0x3b1)]())[_0x2b2fad(0x818)]};}catch(_0x34cdc8){return console[_0x2b2fad(0x62b)](_0x2b2fad(0x7bf),_0x34cdc8),{'error':_0x34cdc8};}}async[a0_0x591e8d(0x828)](_0x5a3e30,_0x3fba90,_0x5689b9){const _0x1faf7d=a0_0x591e8d;try{return await this[_0x1faf7d(0x547)](_0x5689b9)[_0x1faf7d(0x6db)]({'_id':_0x5a3e30},{'$set':_0x3fba90},{'new':!0x0,'upsert':!0x0})[_0x1faf7d(0x7d3)]();}catch(_0x1db2de){return console[_0x1faf7d(0x62b)](_0x1db2de),null;}}async[a0_0x591e8d(0x2c5)](_0x2b3f27,_0x467165){const _0x267fec=a0_0x591e8d;try{return await this[_0x267fec(0x547)](_0x467165)['find'](_0x2b3f27)['sort']({'lastInteraction':-0x1})[_0x267fec(0x7d3)]();}catch{return[];}}async[a0_0x591e8d(0x685)](_0x528229,_0x25fa67){const _0x23484e=a0_0x591e8d;try{return await this[_0x23484e(0x547)](_0x25fa67)[_0x23484e(0x685)]({..._0x528229[_0x23484e(0x41b)]})[_0x23484e(0x7d3)]();}catch{return null;}}async['deleteAll'](_0x4c17bb){const _0x226ef4=a0_0x591e8d;try{return await this[_0x226ef4(0x547)](_0x4c17bb)[_0x226ef4(0x26b)][_0x226ef4(0x3ad)](),{'success':!0x0};}catch(_0x2d9987){return console[_0x226ef4(0x62b)](_0x2d9987),{'success':!0x1,'error':_0x2d9987};}}},ss=class extends T{[a0_0x591e8d(0x643)](_0x43f17d){return ba(_0x43f17d);}async[a0_0x591e8d(0x533)](_0x2e0700,_0x56a9f3){const _0x426f28=a0_0x591e8d;try{return await this[_0x426f28(0x643)](_0x56a9f3)[_0x426f28(0x533)](_0x2e0700);}catch(_0x23f123){return console[_0x426f28(0x62b)](_0x426f28(0x728),_0x23f123),null;}}async['createAndSave'](_0x433904,_0x16092d){const _0x135d97=a0_0x591e8d;try{let _0x44e736=this[_0x135d97(0x643)](_0x16092d);return await new _0x44e736(_0x433904)[_0x135d97(0x6a0)]();}catch(_0x3a6c95){return console[_0x135d97(0x62b)](_0x135d97(0x32e),_0x3a6c95),null;}}async[a0_0x591e8d(0x1cc)](_0x2c4e31,_0x317f3e){const _0x54b39c=a0_0x591e8d;try{return await this[_0x54b39c(0x643)](_0x317f3e)[_0x54b39c(0x6a9)](_0x2c4e31),{};}catch(_0x3b461f){return{'error':_0x3b461f?.['toString']()};}}async[a0_0x591e8d(0x828)](_0xfaad9e,_0x31be98,_0x5b6a38,_0x1f8ac4={}){const _0x1101ca=a0_0x591e8d;try{return await this[_0x1101ca(0x643)](_0x5b6a38)[_0x1101ca(0x6db)](_0xfaad9e,_0x31be98,{..._0x1f8ac4,'new':!0x0})[_0x1101ca(0x7d3)]();}catch(_0x365017){return console['error']('Erro\x20ao\x20atualizar\x20uma\x20mensagem:',_0x365017),null;}}async[a0_0x591e8d(0x33c)](_0x50034e,_0x43d48a,_0x473e7e){const _0x50a1a2=a0_0x591e8d;try{return await this[_0x50a1a2(0x643)](_0x473e7e)[_0x50a1a2(0x82b)](_0x50034e,_0x43d48a,{'new':!0x0})['lean']();}catch(_0x4f68bd){return console['error'](_0x50a1a2(0x38c),_0x4f68bd),null;}}async[a0_0x591e8d(0x2c5)](_0x5b19c0,_0x4ce57d){const _0xca00e5=a0_0x591e8d;try{return await this['getScheduleMessageModelForOwner'](_0x4ce57d)['find'](_0x5b19c0[_0xca00e5(0x41b)])[_0xca00e5(0x22c)](_0x5b19c0?.[_0xca00e5(0x22c)]??0x0)[_0xca00e5(0x543)]({'when':0x1})['lean']();}catch{return[];}}async[a0_0x591e8d(0x685)](_0x5c975e,_0x17a830){const _0x316691=a0_0x591e8d;try{return await this[_0x316691(0x643)](_0x17a830)['findOne'](_0x5c975e['where'])['sort']({'when':0x1})[_0x316691(0x7d3)]();}catch{return null;}}async[a0_0x591e8d(0x23b)](_0x11eef8,_0x3ee0c8){const _0x1b5707=a0_0x591e8d;try{return await this[_0x1b5707(0x643)](_0x3ee0c8)['findById'](_0x11eef8)['lean']();}catch{return null;}}async[a0_0x591e8d(0x76e)](_0x53ea82,_0x287b11){const _0x270bfe=a0_0x591e8d;try{return{'deletedCount':(await this['getScheduleMessageModelForOwner'](_0x287b11)[_0x270bfe(0x76e)](_0x53ea82))[_0x270bfe(0x57a)]};}catch(_0x1d7557){return console[_0x270bfe(0x62b)]('Erro\x20ao\x20deletar\x20mensagens:',_0x1d7557),{'error':_0x1d7557};}}async[a0_0x591e8d(0x708)](_0x11655c){const _0x3dc7e2=a0_0x591e8d;try{return await this[_0x3dc7e2(0x643)](_0x11655c)[_0x3dc7e2(0x26b)][_0x3dc7e2(0x3ad)](),{'success':!0x0};}catch(_0x458bd1){return console[_0x3dc7e2(0x62b)](_0x458bd1),{'success':!0x1,'error':_0x458bd1};}}},as=class extends T{async[a0_0x591e8d(0x1d9)](_0x4577dd,_0x1a0b59){const _0x2c07c5=a0_0x591e8d;try{if(this[_0x2c07c5(0x327)][_0x2c07c5(0x754)])return await $e[_0x2c07c5(0x6db)]({'_id':_0x1a0b59},{'$set':_0x4577dd},{'new':!0x0});}catch(_0xed4d01){throw console[_0x2c07c5(0x62b)](_0x2c07c5(0x854),_0xed4d01),_0xed4d01;}}async[a0_0x591e8d(0x67b)](_0x2c2e08){const _0x248f56=a0_0x591e8d;try{let _0x2a39f4=await $e['findById'](_0x2c2e08);return _0x2a39f4?_0x2a39f4[_0x248f56(0x255)]||(_0x2a39f4[_0x248f56(0x255)]=[],await _0x2a39f4[_0x248f56(0x6a0)]()):(_0x2a39f4=new $e({'_id':_0x2c2e08,'autoCompleteMessages':[]}),await _0x2a39f4[_0x248f56(0x6a0)]()),_0x2a39f4;}catch(_0x5322a5){return _0x5322a5['code']===0x2af8&&_0x5322a5['keyPattern']&&_0x5322a5[_0x248f56(0x164)][_0x248f56(0x35b)]?(console[_0x248f56(0x62b)](_0x248f56(0x792)),await $e[_0x248f56(0x26b)][_0x248f56(0x733)](_0x248f56(0x286)),null):(console[_0x248f56(0x62b)]('Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:',_0x5322a5),null);}}},Uo=new N(a0_0x591e8d(0x43d)),jo=new We(b),Jo=new jt(b),qo=new at(b),Vo=new Jt(aa,b),Go=new Xt(da,b),Bo=new Zt(ca,b),Wo=new Me(qe,b),zo=new es(b),Ho=new qt(b),Ko=new ts(b),Qo=new ss(b),Yo=new as(b),he=new Ge(jo,Jo,qo,Vo,Go,Bo,Wo,zo,Ko,Ho,Qo,Yo,$?.['getClient']()),G=new Ut(ds,b,he),Xo=new zt(b,G,he),Zo=new Kt(G),vs=new Yt(Zo),I=new Qt(G),le=new Bt(G,b,he,ds,Xo),B=new Wt(G),x=new Vt(G),j=new Ht(G);Uo[a0_0x591e8d(0x7ed)](a0_0x591e8d(0x667));var cg=require(a0_0x591e8d(0x8a2)),Ls=require('fs'),Di=A(require(a0_0x591e8d(0x656))),Pi=A(require(a0_0x591e8d(0x898))),ke=class u{static #e;static set[a0_0x591e8d(0x521)](_0xb311ee){this.#e=_0xb311ee;}static get[a0_0x591e8d(0x656)](){const _0x1fff76=a0_0x591e8d;let {FULLCHAIN:_0x1691c9,PRIVKEY:_0x16a625}=b[_0x1fff76(0x2f4)](_0x1fff76(0x887));return Di[_0x1fff76(0x242)]({'cert':(0x0,Ls[_0x1fff76(0x3f7)])(_0x1691c9),'key':(0x0,Ls[_0x1fff76(0x3f7)])(_0x16a625)},u.#e);}static get[a0_0x591e8d(0x898)](){const _0x177ebd=a0_0x591e8d;return Pi[_0x177ebd(0x242)](u.#e);}},Le=A(require('fs')),Ji=A(require(a0_0x591e8d(0x2d7))),Fe=A(require('axios')),os=A(require(a0_0x591e8d(0x81b))),is=require(a0_0x591e8d(0x5df));function er(){const _0x3dc5ad=a0_0x591e8d;G[_0x3dc5ad(0x248)]();let _0x2063cc=os['default'][_0x3dc5ad(0x241)](__dirname,_0x3dc5ad(0x46a));ji(_0x2063cc);}var ji=_0x2a395a=>{const _0x54dd60=a0_0x591e8d;let _0x5309f4=Le[_0x54dd60(0x2ab)][_0x54dd60(0x324)](_0x2a395a),_0x5062ee=0xc*0x3c*0x3c*0x3e8,_0x1e7694=0x2*0x3c*0x3c*0x3e8,_0x4ad525=new Date()['getTime']();_0x5309f4['forEach'](_0x591926=>{const _0x1e12ad=_0x54dd60;let _0x1cfa45=os[_0x1e12ad(0x2ab)]['join'](_0x2a395a,_0x591926),_0x290bcb=Le[_0x1e12ad(0x2ab)]['statSync'](_0x1cfa45)['birthtime'][_0x1e12ad(0x7ab)]();_0x4ad525-_0x290bcb>_0x5062ee&&(Le[_0x1e12ad(0x2ab)][_0x1e12ad(0x1d6)](_0x1cfa45),console[_0x1e12ad(0x2c3)](_0x1e12ad(0x3f2)+_0x591926));}),setTimeout(()=>ji(_0x2a395a),_0x1e7694);};function tr(){const _0x41970b=a0_0x591e8d;let _0x5262b1=new N('SERVER'),_0x5c3dbb=(0x0,me[_0x41970b(0x2ab)])();_0x5c3dbb[_0x41970b(0x16b)]((0x0,Ui[_0x41970b(0x2ab)])({'origin'(_0x270e5c,_0x468f29){const _0x40fa13=_0x41970b;let {ORIGIN:_0xec9a6c}=b[_0x40fa13(0x2f4)](_0x40fa13(0x263));return _0x270e5c||(_0x270e5c='*'),_0xec9a6c[_0x40fa13(0x253)]('*')!==-0x1||_0xec9a6c[_0x40fa13(0x253)](_0x270e5c)!==-0x1?_0x468f29(null,!0x0):_0x468f29(new Error('Not\x20allowed\x20by\x20CORS'));},'methods':[...b[_0x41970b(0x2f4)](_0x41970b(0x263))[_0x41970b(0x413)]],'credentials':b[_0x41970b(0x2f4)](_0x41970b(0x263))['CREDENTIALS']}),(0x0,me['urlencoded'])({'extended':!0x0,'limit':_0x41970b(0x813)}),(0x0,me[_0x41970b(0x853)])({'limit':_0x41970b(0x813)})),_0x5c3dbb[_0x41970b(0x16b)]((_0x23f3b1,_0x4544df,_0x17d921)=>{const _0x2a44f8=_0x41970b;_0x23f3b1['path']['startsWith'](_0x2a44f8(0x501))?_0x17d921():(0x0,Fi[_0x2a44f8(0x2ab)])()(_0x23f3b1,_0x4544df,_0x17d921);}),_0x5c3dbb['set'](_0x41970b(0x63d),_0x41970b(0x50c)),_0x5c3dbb[_0x41970b(0x3b3)](_0x41970b(0x1ce),(0x0,Us['join'])(re,'views')),_0x5c3dbb[_0x41970b(0x16b)](me[_0x41970b(0x2ab)][_0x41970b(0x71c)]((0x0,Us[_0x41970b(0x241)])(re,_0x41970b(0x2cc)))),_0x5c3dbb['use']((_0x1418e9,_0x58c628,_0x3c4f44)=>{let _0x5bfcef=_0x58c628['send'];_0x58c628['send']=function(_0x485504){const _0x536f89=a0_0x3f1e;if(_0x1418e9[_0x536f89(0x18a)][_0x536f89(0x42d)]==='true'||_0x1418e9['headers'][_0x536f89(0x301)]===_0x536f89(0x5a0)){let _0x274d7e=JSON[_0x536f89(0x3da)](_0x485504);_0x485504=JSON[_0x536f89(0x62f)](_0x16fbee(_0x274d7e));}return _0x5bfcef[_0x536f89(0x2d2)](_0x58c628,[_0x485504]);},_0x3c4f44();}),_0x5c3dbb[_0x41970b(0x16b)]('/',xe),_0x5c3dbb[_0x41970b(0x16b)]((_0x5d273a,_0x30e6be,_0x3faf5e,_0x45cd31)=>{const _0x8528f=_0x41970b;if(_0x5d273a)return _0x3faf5e[_0x8528f(0x360)](_0x5d273a[_0x8528f(0x360)]||0x1f4)[_0x8528f(0x853)](_0x5d273a);},(_0x1eb8b7,_0x26e413,_0x5d6cd2)=>{const _0x464460=_0x41970b;let {method:_0x4a5cc2,url:_0x192272}=_0x1eb8b7;_0x26e413['status'](0x194)[_0x464460(0x853)]({'status':0x194,'message':_0x464460(0x20f)+_0x4a5cc2['toUpperCase']()+'\x20'+_0x192272,'error':_0x464460(0x473)}),_0x5d6cd2();});let _0x16fbee=(_0x11df8d,_0x1faad8=_0x41970b(0x7af))=>{const _0x398f7=_0x41970b;let _0x234db2=(_0x3996e0,_0x1276c0=null,_0x18d6e9=!0x1)=>{const _0x3e6cf3=a0_0x3f1e;let _0xde9e47={};return Object[_0x3e6cf3(0x34b)](_0x3996e0)['forEach'](_0x3e19e2=>{const _0x3ff724=_0x3e6cf3;let _0x57cd5e=_0x3996e0[_0x3e19e2],_0x4a2828=''+_0x1faad8+_0x3e19e2;_0x1276c0&&!_0x18d6e9&&(_0x4a2828=_0x1276c0+'.'+_0x3e19e2),!_0x57cd5e&&_0x57cd5e!==0x0&&_0x57cd5e!==!0x1||typeof _0x57cd5e>'u'?_0xde9e47[_0x4a2828]=null:typeof _0x57cd5e!='object'&&!Array[_0x3ff724(0x7e5)](_0x57cd5e)?_0xde9e47[_0x4a2828]=_0x57cd5e:typeof _0x57cd5e==_0x3ff724(0x808)&&!Array['isArray'](_0x57cd5e)?_0xde9e47=Object[_0x3ff724(0x5ba)](_0xde9e47,_0x234db2(_0x57cd5e,_0x4a2828)):Array[_0x3ff724(0x7e5)](_0x57cd5e)&&(typeof _0x57cd5e[0x0]=='object'?(_0xde9e47[_0x4a2828]=[],_0x57cd5e[_0x3ff724(0x5ce)](_0x1b9e83=>{const _0x2be515=_0x3ff724;_0xde9e47[_0x4a2828][_0x2be515(0x57f)](_0x234db2(_0x1b9e83,_0x4a2828,!0x0));})):_0xde9e47[_0x4a2828]=_0x57cd5e);}),_0xde9e47;};return Array['isArray'](_0x11df8d)?_0x11df8d[_0x398f7(0x276)](_0xbd430e=>_0x234db2(_0xbd430e)):typeof _0x11df8d==_0x398f7(0x808)&&_0x11df8d!==null?_0x234db2(_0x11df8d):{};},_0x431681=b[_0x41970b(0x2f4)](_0x41970b(0x371));ke[_0x41970b(0x521)]=_0x5c3dbb;let _0x2ec4f1=ke[_0x431681[_0x41970b(0x5d5)]],_0x3d23fe=_0x41970b(0x7ee);_0x2ec4f1[_0x41970b(0x773)](_0x431681[_0x41970b(0x4d8)],()=>{const _0x579d8f=_0x41970b;_0x5262b1[_0x579d8f(0x2c3)](_0x3d23fe),_0x5262b1[_0x579d8f(0x2c3)](_0x431681[_0x579d8f(0x5d5)][_0x579d8f(0x453)]()+_0x579d8f(0x52c)+_0x431681['PORT']);}),er(),Ys();}var sr=a0_0x591e8d(0x6e8),ar=os['default']['join'](__dirname,a0_0x591e8d(0x474)),Ee=null;function a0_0x5611(){const _0x44a042=['request\x20received\x20in\x20fetchConversation','):\x20Atualizando\x20status\x20da\x20mensagem\x20','allFlows','post','):\x20currentBlock\x20\x20null.\x20No\x20foi\x20possvel\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','ChatRouter','\x27\x20removido\x20do\x20AutomateSystem.','PASSWORD','updateMissingEtiquetas','processReadyMessages','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupDesc','hasOwnProperty','):\x20sender\x20=\x20number:\x20','):\x20Encontradas\x20e\x20removidas\x20as\x20variveis:\x20','STORE_CLEANING_TERMINAL','statusJidList','findOneAndUpdate','Database\x20update\x20result:','updateGroupParticipantsWebhook','Erro\x20ao\x20editar\x20agentes',',\x20valor\x20a\x20encontrar:\x20\x22','Group\x20not\x20found','\x20atualizado\x20com\x20sucesso.\x20Ao:\x20','phoneNumber','LOG_LEVEL','routerPath','):\x20Enviando\x20mdia','delayChatLabel_RETRY_DELAY_MS','ip6eui','https://github.com/uazapi/uazapi.git','not\x20loaded','pollCreationMessageV2','imported','fora\x20do\x20git','\x1b[30m','authState','Falha\x20ao\x20processar\x20a\x20solicitao\x20send_message,\x20numero:\x20','temp-','updateBlock','waMonitor','reference','audio','):\x20Conversa\x20atualizada\x20em\x20memria','Error\x20in\x20scheduleNextCheck:\x20','delete','Schema','oldToken','contacts.upsert','):\x20Erro\x20na\x20atualizao\x20da\x20conversa\x20no\x20BD:\x20','#d8e651','updateProfilePicture','request\x20received\x20in\x20updateFlowConfig','unhandledRejection','uazapiSendAudio','):\x20Current\x20Time:\x20','):\x20Flow\x20ativado\x20e\x20no\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificaes','groupJid','saveChatVariables','vcard','contacts','_activedCount','deleteAll','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','video-cover.png','lowerCase','/instance/fetchInstances','\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo','updateStopChat','):Temp\x20image\x20deleted','sharp','headers','documentMessage','\x0aitem','\x1b[33m','createAndSave','ButtonsMessage','type','exports','isBusiness','Instncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','E-mail:\x20','static','splice','.wav','getVariablesChat','DEBUG','format','editFlowGroup','mentioned','Fluxo\x20no\x20encontrado\x20na\x20memria.','profileName','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20findAndUpdateCacheContact','getLastMessage','Erro\x20ao\x20executar\x20bulkWrite:','DATABASE_CONNECTION_USER','):\x20Fluxo\x20\x27','lastMessage','contains','):\x20condies\x20no\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','everyOne','replaceOne','PRODUCT_LIST','STORE_CHATS','importChatsBatch','dropIndex','):\x20teve\x20mudanas\x20chat.ephemeralExpiration:\x20','setWebhook','getOwnPropertyDescriptor','CHATS_DELETE','SSL_CONF_FULLCHAIN','saveConversationToDatabase','):\x20Falha\x20ao\x20deletar\x20mensagem.','Fluxo\x20id\x20\x27','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','address','creds','connectionState','REDIS','Nenhum\x20campo\x20vlido\x20para\x20atualizao\x20fornecido.','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','detectIPv6PrefixAndInterface','replyOptionId\x20\x20necessrio\x20para\x20deletar\x20um\x20replyOption','promisify','warn','Erro\x20ao\x20substituir\x20variveis\x20para\x20','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','test','lastSendMessage','.pdf','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','data:\x20','content-type','messages.upsert','Input\x20deve\x20ser\x20um\x20array\x20no\x20vazio\x20de\x20chats.','state','ContactsAndGroups','.ogg','ENABLED','startsWith','stopMinutes','listMessage','Telefone:\x20','\x5cd+','BufferJSON','796472KPfShe','instanceName','Stack\x20trace:','toBRL','HOST','floor','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','LICENSE_INVALID','):\x20whoCanUse\x20before\x20validation:\x20','closed','descId','.docx','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','verbose','scheduled','deviceSentMessage','Falha\x20ao\x20recriar\x20IPv6.','USER','connectedClient','deleteMany','):Error\x20in\x20converting\x20audio','#92ceac','sendSticker','customFields','listen','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','randomMac','Erro\x20ao\x20atualizar\x20cacheInstance:','inet6','):\x20whoCanEdit\x20before\x20validation:\x20','buttons','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileStatus','sendDataWebhook',']\x20(','\x20minutos.\x20Ser\x20s\x20','getReadyToSendMessages','envProcess','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','STORE','Falha\x20ao\x20deletar\x20a\x20coleo\x20de\x20mensagens:\x20','_error','This\x20name\x20','inviteUrl','class-validator','originalUrl','setNewValue',',\x20Expiration\x20Time:\x20','groupDesc','licenca','values','instancias:\x20','message_normalized','collections','messageSecret','errors','Erro\x20de\x20duplicidade\x20no\x20ndice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20ndice...','Chat\x20no\x20existe,\x20use\x20a\x20funo\x20de\x20importar\x20para\x20cri-lo','Valor\x20inicial:\x20\x22','SEND_MESSAGE','RECONNECT_TIME_FRAME','minutesToClose','\x1b[46m','repository','delAll','automateSystem','redis','connect','replyOption','rowId','StatusJidList\x20is\x20required','findAndUpdateCacheContact','updateStatusPrivacy','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','variable','../env.yml','.pptx','\x1b[32m%s\x1b[0m','EMAIL:','text','arraybuffer','getTime','basename','):\x20No\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padro...','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupName','_p_','normalizeMessageContent','secondValue','reject','https://ifconfig.me/ip','processScheduleFlow','Erro\x20ao\x20adicionar\x20label\x20','console','removed','#56ccb4','ERROR:\x20','some','upsertChats','):\x20\x27Enviando\x20mdia\x20para\x20\x27','groupMetadata','):Archiving\x20chat','Erro\x20ao\x20atualizar\x20mltiplas\x20conversas:','messages.set','REDIS_PREFIX_KEY','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualizao\x20do\x20git\x20e\x20npm\x20install.','CHATS_SET','notEqual','updateGParticipate','\x1b[32m','_Contacts','send','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','groupLeave','Erro\x20ao\x20buscar\x20o\x20fluxo','scheduleSendMedia','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','createIPv6','emit','Comando\x20desconhecido','config','evaluateCondition','lean','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','flowConfig','blockId','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','last','owner','picture','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','startFlowWebhook','):\x20nextBlock.uazapi.name','Parando\x20aplicao,\x20atualizao\x20recebida','notas','Subdomnio\x20extrado\x20da\x20URL:','GET','out','editflowreply','success','isArray','uncaughtException','getflow','toLocaleString','AppStateSyncKeyData','groupParticipantsUpdate','idSchedule','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','info','\x0a\x0a\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','hGet','menuExpiredMessage','deleteBlock','editedMessage','Background\x20color\x20is\x20required','Enter\x20a\x20value\x20in\x20milliseconds','DARK','timeout','fromMe','base64','CONTACTS_UPSERT','Network\x20Interface\x20detected:\x20','\x1b[44m','Close\x20connection','processgoToFlow','DOCKER_ENV','Valor\x20invlido\x20para\x20converso\x20em\x20BRL:\x20','\x27\x20no\x20encontrado','restartMutex','integer','.mp4','Error\x20fetching\x20and\x20updating\x20profile:\x20','):\x20Chat\x20','statusMessage','):Delete\x20chat','object','):\x20debug\x20alterando\x20this.AutomateSystem','):\x20error:\x20','presenceSubscribe','put','getConversation','QRCODE_UPDATED','create','):\x20Alterando\x20fluxo...','connecting','_id','50mb','generateWAMessageFromContent','superadmin','request\x20received\x20in\x20updateAutoCompleteMessages','.url','modifiedCount','width','Erro\x20ao\x20atualizar\x20conversa:\x20','path','sendMedia','generateRandomIPv6','instances','Erro\x20ao\x20editar\x20varivel\x20do\x20fluxo','findAndReplace','request\x20received\x20in\x20updateCustomFields','latitude','Erro\x20ao\x20tentar\x20updateCustomFields','groups','sem\x20texto\x20na\x20mensagem','O\x20campo\x20_id\x20\x20obrigatrio\x20para\x20editar\x20uma\x20conversa.','cleaningUp','updateOne','Error\x20updating\x20message\x20status:','updateCustomFields','findByIdAndUpdate','caption','tags','sendList','):\x20Editando\x20grupo\x20do\x20fluxo...','gifPlayback','AUTHENTICATION_API_KEY','.X-ABLabel:Celular\x0a','jid','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','label','length','connectionStatus','stateConnection','\x20segundos','getDelay','editOperator','URL','updateAll','contact_blacklist','leaveGroup','):Image\x20created','):Trying\x20to\x20get\x20business\x20profile','activatedCount','readreceipts','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfilePicture','Prxima\x20verificao\x20de\x20licena\x20e\x20se\x20tem\x20atualizao\x20em\x20','readMessageBot','uazapiSendLocation','CONNECTION','dbClient','router','request\x20received\x20in\x20editFlowvariable','removeUnusedChatFields','messaging-history.set','reconnectTimestamps','replaceVariablesChat','groupInviteCode','rm\x20-rf\x20','entries','json','Erro\x20ao\x20atualizar\x20AutomateSystem:','):Alterar\x20configurao\x20de\x20mudo\x20para\x20o\x20chat:\x20','protocolMessage','urlOrBase64','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','sendMessageWithTyping','contacts.update','model','long','):\x20\x27Deletando\x20fluxo,\x20id:\x20','Erro\x20ao\x20normalizar\x20a\x20mensagem:','Configurao\x20SSL\x20recuperada:','No\x20\x20possvel\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','image','No\x20\x20possvel\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20est\x20em\x20processamento.','redisEnv','sendWhatsAppAudio','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','webp','Valor\x20invlido\x20para\x20formatao\x20brasileira:\x20','connectionClosed','):\x20ndice\x20do\x20bloco\x20a\x20ser\x20atualizado:','debug','sendPoll','getDevice','editConversation','linkPreview','flowName','pushName','findGroupInfo','):\x20','.error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','fileName','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperao','muteEndTime','Connection\x20closed\x20for\x20instance:\x20','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','Deletion\x20failed','boolean','output','pollCreationMessageV3','readData','composing','delayChatLabel_MAX_RETRIES','_FlowHistorico','reviver','getFlow','Error\x20in\x20chatModify\x20for\x20number\x20','\x0aFN:','cacheInstanceModel','SSL_CONF','params','importChats','senderKeyDistributionMessage','\x22\x20-\x20NOT\x20CONNECTION','Subdomnio\x20no\x20encontrado','digest','addChatLabel','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','):\x20Iniciando\x20bot...','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','variablesToObject','local_map','):\x20Enviando\x20contato','Erro\x20ao\x20criar\x20fluxo','Unauthorized','SUCCESS','http','pollMessageOnDelete','ephemeralMessage','website',',\x20far\x20nova\x20verificao\x20em\x20','variablesNotFound','ORG:','/64\x20dev\x20','bodyStringErrorParse','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao:\x20','express-async-errors','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','nomecompleto','labels.edit','proxy:\x20','backgroundColor','flowConversation','buttonText','conditions','):\x20Criando\x20nova\x20conversa[createNewConversation]','):\x20ev.flush\x20realizado','):\x20Flow\x20\x27','All_Instances_Config','isLong','cachedContact','removeProfilePicture','viewOnceMessageV2','contactMessage','replaceValue','vir','createFlow','Tentando\x20reconectar...','keyPattern','.xls','remoteJid','bearer','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','Erro\x20ao\x20deletar\x20a\x20conversa','groupUpdateDescription','use','instance.','):\x20Enviando\x20texto','promote','editFlowReply','folder','option','ERROR','less','mediaMessage','fone','enumerable','#01d0e2','subject','split','SERVER_URL','Valor\x20da\x20URL\x20recuperada:','joinGroupValidate','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','ContactModel','@redis/client','AddChatLabel','detail','cpf','findGroupsEspecial','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','lastCondition','DB_PREFIX_NAME','leadInfo.customFields','getStatus','sectionsToString','query','HeaderType','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','url','END:VCARD','):\x20customFieldVariables','lastSend','mimetype','.fileUrl','Error\x20testing\x20IP\x20with\x20','https://chat.whatsapp.com/','realVariables','):\x20[RETRY]:\x20Mximo\x20de\x20tentativas\x20alcanado,\x20desistindo\x20de\x20recuperar','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','\x1b[37m','API_KEY','findRealGroups','arrayUnique','flowPrefixCommand','Dados\x20invlidos\x20para\x20edio\x20de\x20mensagens\x20no\x20grupo.','):\x20Conversa\x20est\x20expirada\x20-\x20voto','startID','\x1b[30m%s\x1b[0m','):\x20Criando\x20fluxo\x20compartilhado...','match_last_seen','):\x20Label\x20','DELIVERY_ACK','flattenObject','blockLogs','/wa-groups','viewOnceMessage','\x20horas\x20e\x20','Somente\x20\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padro','action','sendPresenceUpdate','toArray','Data\x20invlida\x20fornecida','Erro\x20ao\x20deletar\x20chat:','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','getTicketSystem','changeVariables','truncatedtoEnd','connectedName','whatsappNumber','mongodb','clearVariables','deleteflow','env.KEY\x20!==\x20key','ListMessage','DaysToDelete','none','writeFile','updateMissingCustomFields','.svg','groupdata','all_member_add','restrict','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao.','flowActive','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupSetting','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','pm2\x20flush','getLabelModelForOwner','delay','Erro\x20de\x20atualizao:\x20','deleteOne','#ffffff','views','groups.update','desativadoFluxoAte','namespace','updateAgent','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','Subdomnio\x20final:','unlinkSync','condition','.mimetype','update','Erro\x20ao\x20arquivar\x20chat','):\x20A\x20mensagem\x20no\x20foi\x20enviada\x20pelo\x20bot','The\x20','authorization','profilePicture','process','deleteChat','\x20minutos\x20verificar\x20novas\x20mensagens','match','uazapiSendContact','envYaml','apikey','startCommand','https://uazapi-plugin.bubbleapps.io/','flowStopConversation','profile','has','ON\x20-\x20dbName:\x20','optionName','throwAndLogError','done',',\x20global:\x20','0123456789ABCDEF','toLowerCase','fromObject','AUTHENTICATION_JWT_EXPIRIN_IN','deleteImportedChat','no.connection','groupFetchAllParticipating','237580MgDcgX','name','groupName','\x20minutos',',\x20canSendMessage:\x20','\x22,\x20valor\x20a\x20substituir:\x20\x22','Falha\x20ao\x20criar\x20IPv6.','Falha\x20ao\x20processar\x20a\x20solicitao\x20leaveGroup','SERVER_PORT','retrySendMessage','lastBlockId','Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp.','Cache\x20instance\x20update\x20result:\x20','hDel','1709874dgZLwo','imgUrl','updateMessage','):\x20Limpando\x20AutomateSystem','mediaSticker','.webp','validate','Falha\x20ao\x20processar\x20a\x20solicitao\x20findRealGroups','@s.whatsapp.net','editflow','Cannot\x20','fetchProfilePicture','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','ScheduleMessageModel','optionDescription','processConditions','unlocked','g.us','\x1b[33m\x1b[1m','findContacts','newStoppedUntil','Mensagem\x20no\x20suportada','):\x20Error\x20processing\x20conditions:\x20','#00a1f2','Erro\x20ao\x20editar\x20o\x20chat','whatsappNumbers','[all]','sendMessageAck','):\x20Editando\x20condio\x20do\x20fluxo...','#dfaef0','\x20ao\x20chat\x20','getUpdate','LOG_COLOR','request\x20received\x20in\x20getConversation','segundos','cacheContact','DATABASE','deleteDoneMessages','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','limit','testIPv6','\x20and\x20data:','):\x20Buscando\x20flow...','):\x20Error\x20processing\x20the\x20block:\x20','reorderBlocks','msgRetryCounterCache','group','@whiskeysockets/baileys','Contacts\x20not\x20found','Erro\x20ao\x20copiar\x20o\x20documento','\x20is\x20already\x20in\x20use.','instanceKeys','groups_ignore','waitingForReplyMenu','findById','firstValue','):\x20Loop\x20externo\x20interrompido\x20devido\x20\x20flag\x20isConnected','stdout','\x20no\x20encontrado\x20para\x20atualizao.','Error\x20while\x20deleting\x20message\x20for\x20everyone','join','createServer','includes','formatBRNumber','$dbName','ip\x20-6\x20addr\x20add\x20','stopConversation','loadInstance','groupRevokeInvite','unreadcount','Erro\x20ao\x20alterar\x20privacidade','findManyByIds','and','sim','locked','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','Falha\x20ao\x20processar\x20a\x20solicitao\x20getBase64FromMediaMessage','updatePrivacySettings','indexOf','):\x20Grupo\x20','autoCompleteMessages','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','matchRegex','verifiedName','pendingMessages','catch','findConversation','Erro\x20na\x20funo\x20updateChatWithMessage:\x20','convertaudioMP3','Falha\x20ao\x20processar\x20a\x20solicitao\x20revokeInviteCode','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','updateGroupsAddPrivacy','LOG','NextBlock','CORS','connectToWhatsappController','/wa-connection-update','/message','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','verify','https://uazapi-plugin.bubbleapps.io/?url=','flows','collection','networkInterface','media','requestFile','No\x20respondeu\x20com\x20a\x20enquete.','exit','online','\x20no\x20encontrado','evaluateConditionTest','then','menuMessage','map','AutomateFunctions','PENDING','#9ab6c1','Erro\x20ao\x20atualizar\x20o\x20flow.','Nenhum\x20fluxo\x20correspondente\x20encontrado.','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','\x1b[34m%s\x1b[0m','key','CHATS_UPSERT','Erro\x20ao\x20buscar\x20Schedule\x20Messages','AUTHENTICATION_JWT_SECRET','group-participants.update','delaySecMin','configService','autoCompleteMessages.command_1','flushHeaders','IPv6\x20recriado\x20aps\x20falhas\x20de\x20reconexo.','function','Erro\x20ao\x20editar\x20condio\x20do\x20fluxo','verifyWhatsAppNumber','sendReaction','pt-BR','Mensagens\x20deletadas\x20com\x20sucesso.','finish','):\x20Entrou\x20na\x20funo\x20goToFlow','Mac\x20OS','insert','MAX_SAFE_INTEGER','stopped','):\x20Mensagem\x20j\x20enviada\x20para\x20','client','announcement','spawn','\x20chats\x20de\x20','):\x20encontrado\x20prxima\x20mensagem\x20para\x20','varedits','PREFIX_KEY','fetchLatestBaileysVersion','groupValidate','formatVCard','updateProfileName','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','replaceVariablesLogs','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','role','agents','\x20com\x20sucesso.',',\x20Segundo\x20Valor:\x20','_Labels','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGParticipant','processblock','default','PRIVKEY','Button\x20IDs\x20cannot\x20be\x20repeated.','_remoteJid','lastUpdate','copyBlock','sha256','ReplyOption\x20com\x20ID\x20','@g.us','Router','LabelModel','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','cleanStore','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','readMessages','isConnected','Falha\x20ao\x20processar\x20a\x20solicitao\x20inviteCode','Falhou\x20ao\x20encontrar\x20chat\x20','\x20depois\x20','shareOwners','_Chats','chats.set','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','log','encoding','find','):\x20Ler\x20mensagem','iniciando\x20fluxo\x20router','\x1b[43m','\x1b[47m','approve','replyOptions','public','removeIPv6ById','createflow','leadInfo','):\x20Erro\x20durante\x20a\x20atualizao:\x20','expiration','apply','/wa-all-message','eventEmitter','reorderMessages','):\x20leadInfoVariables','ini','toFile','Cache-Control','abs','cwd','.mp3','getContactModelForOwner','revokeInviteCode','varedit','request_time','Por\x20favor,\x20responda\x20\x20ltima\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opes\x20disponveis,\x20sem\x20digitar\x20sua\x20resposta.','Resultado\x20da\x20correspondncia\x20de\x20URL:','loadWebhook','removeData','$pull','):\x20Procurando\x20mensagens\x20para\x20envio','events','numbers','createHash','toNumber','):\x20transformedCustomFieldVariables','SINGLE_SELECT','list','/events/:instance','Valor\x20de\x20find\x20ou\x20replace\x20ausente','closeExistingConversations','write','string','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio:\x20','get','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','Message','Font\x20is\x20required','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','AddUserFlow','sendStatus','eventemitter2','Database\x20connection\x20closed.','last_update','updateAutoCompleteMessages','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','processvaredits','uazapi','VERBOSE','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileName','logout','DATABASE_CONNECTION_DB_PREFIX_NAME','\x1b[31m','memberAddMode','blocks','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','findGroupInfos','creds.json','/instance/connectionState','):\x20lastBlockId:\x20','value','):\x20Limpando\x20delayMessage','^\x5cd+([-]\x5cd+)*@g.us$','trim','shareFlow','editMessagesInGroup','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','deleteConversation','editflowcondition','contactHandle','):\x20tem\x20blocks','DATABASE_CONNECTION_HOST','order','\x20removido\x20do\x20chat\x20','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','presence.update','No\x20\x20permitido\x20deletar\x20o\x20grupo\x20padro','findMessages','):\x20newFirstValue\x20aps\x20replaceVariables:','hSet','findChats','readdirSync','etiquetas','sendText','dbSettings','MESSAGES_SET','Garbage\x20collection\x20no\x20est\x20disponvel.','):\x20[messages.update]\x20group\x20ignored','getValidWhatsAppNumbers','dayjs','stderr','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','checkMutex','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','axios','archiveChat','app-state-sync-key','saveCreds','prepareMediaMessage','restartInstance','global','JWT','replaceVariablesInReplyOptions','ip\x20-6\x20addr\x20show\x20dev\x20','):\x20conversation.lastInteraction:\x20','updateOneById','menuType','Erro\x20ao\x20atualizar\x20o\x20fluxo:','transformScheduledMessagesByType','slice','processingGroup','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','runExclusive','dbServer','longitude','\x22\x20-\x20REMOVED','Fluxo\x20no\x20encontrado\x20para\x20o\x20ID:','proto','/*.json','userDevicesCache','keys','createConversationforgoToFlow','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','parseInt','Conexo\x20estabelecida','setHeader','STORE_MESSAGE','charAt','rows','existsSync','GROUPS_UPSERT','toDataURL','Imagem\x20no\x20encontrada','endSession','when','badSession','autoCompleteMessages.command','not_announcement','updateReadReceiptsPrivacy','pre','listType','status','buffer','editflowblock','CLEANING_INTERVAL','isRunning','selectableCount','getContentType','http://checkip.dyndns.org','Falta\x20informao\x20para\x20a\x20chamada\x20API','Voc\x20no\x20tem\x20permisso\x20para\x20ver\x20o\x20fluxo\x20\x27','READ','AutomateSystem\x20no\x20foi\x20inicializado','groupToggleEphemeral','src','Falha\x20ao\x20processar\x20a\x20solicitao\x20toggleEphemeral','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','cacheInstanceRepository','SERVER','#6f7bcf','document','archived','.xlsx','SECRET','INFO','Detalhes\x20do\x20erro:','leadInfo.etiquetas','formatStatusMessage','useMultiFileAuthState','#9568cf','jsonwebtoken','waInstances','#fed428','request\x20received\x20in\x20editFlowcondition','Erro\x20ao\x20editar\x20configurao\x20de\x20fluxos','presence','TEL','upperCase','node-cache','IPv6\x20address\x20removed:\x20','checkAndRestartProcess','fullName','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','uuid','\x1b[37m%s\x1b[0m','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','makeCacheableSignalKeyStore','notEmpty','ephemeralExpiration','updatePresence','fetchLabels','_sender','\x1b[36m%s\x1b[0m','setRestartTimeout','):\x20teve\x20mudanas\x20chat.archived:\x20','updateChatGroupData','):\x20Editando\x20edio\x20do\x20fluxo...','user','messageType','participant','Instance\x20\x22','statusCode','No\x20suitable\x20network\x20interface\x20found','\x27\x20no\x20encontrado\x20na\x20memria','):Image\x20path:\x20','dataValidate','unavailable','*\x0a\x0a','):\x20condies\x20atendidas,\x20parando\x20verificao...\x20em\x20','\x22reaction\x22\x20must\x20be\x20an\x20emoji','8PfLbMP','getBusinessProfile','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','groupRequestParticipantsList','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20nmero','imagechat','enabled','array','drop','.png','pollOnReplyDelete','StartID:','exec','awaitingApproval','set','sendLocation','StartBot','configureIPv6','admin','Encerrando\x20a\x20API\x20por\x20solicitao\x20via\x20rota\x20/exit','yes','telefone','):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos','sticker','/wa-chats','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','$set','express','Error\x20removing\x20unused\x20chat\x20fields:','Network\x20interfaces\x20detected:\x20','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20ser\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','leadInfo.','findIndex','header','Variveis\x20no\x20encontradas:','\x20no\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','localWebhook','chats.upsert','writeData','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','):\x20Parar\x20funo\x20pois\x20no\x20est\x20conectado','saveMediaToFile','isBase64','PRESENCE_UPDATE','):\x20Query\x20params:','Type\x20not\x20found','fetchChats','contact','removeIPv6','CONTACTS_SET','Primeiro\x20Valor:\x20','Error\x20writing\x20file:\x20','parse','waitingMenu_id','Error\x20finding\x20many\x20contacts:','qrCode','):\x20Envio\x20interrompido\x20devido\x20\x20desconexo.','Varivel\x20no\x20encontrada!','updateLastSeenPrivacy','padStart','\x20do\x20chat\x20','toggleEphemeral','Nome\x20do\x20campo\x20personalizado\x20j\x20existe.','close','keep-alive','messages','isValidIPv6Config','requestPairingCode','audioMessage','findGroups','instance','):\x20Enviando\x20localizao','TEXT','):\x20enviado\x20para\x20[','request\x20received\x20in\x20deleteDoneMessages',',\x20resultado:\x20','Deleted\x20','\x1b[36m','Forbidden','IPv6\x20addresses\x20detected:\x20','vote','readFileSync','Retornando\x20grupos\x20SEM\x20cache','Instncias\x20removidas:\x20','.jwt','groupdata.participants','Mutex','isJidBroadcast','method','webhook','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','findParticipants','Error\x20updating\x20cache\x20contact:','Generated\x20IPv6:\x20','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','!cmd_','Erro\x20ao\x20buscar\x20a\x20conversa','3041040gyeUIJ','updateGParticipant','dbInstance','.type','AUTHENTICATION','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','chatId','leadInfo.desativadoFluxoAte','Erro\x20ao\x20avaliar\x20a\x20condio:\x20','round','pollMessage','selectedOptions','METHODS','reduce','qrcode','GROUP_PARTICIPANTS_UPDATE','insertCount','Nenhum\x20participante\x20vlido\x20encontrado.','readFile','bodyString','where',',\x20Novo\x20tamanho:\x20','):\x20\x27Grupo\x20no\x20encontrado\x20ou\x20groupdata\x20no\x20definido:\x27,\x20','The\x20\x22','removeInstance','empty','waitingMenu_ExpiredMessage','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20voc\x20no\x20\x20o\x20proprietrio\x20da\x20conversa.','remoteJids','.webm','endsWith','https://','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcanada,\x20crie\x20outra\x20instncia...','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','InstancesAlterarTodas','[AUTH]\x20Database\x20is\x20not\x20enabled','maxActives','convert','off','Instance\x20ID:','updateMany','editflowvaredit','processUazapi','util','pairingCode','context','findGroup','CORS_CREDENTIALS','errorLog','removeChatLabel','):\x20conversation.waitingMenu_name','onWhatsApp','RemoveChatLabel','WA\x20MODULE','/chat',',\x20saindo.','MESSAGES_UPSERT','Database\x20is\x20not\x20enabled','BRL','startFlow','capitalizedWords','):\x20mediaMessageInfoId\x20:\x20','isInteger','Erro\x20ao\x20editar\x20o\x20bloco:\x20','awaitSeconds','privacySettings','#9ba6ff','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','toString','request\x20received\x20in\x20createFlow','onTime','https://api.elevenlabs.io/v1/text-to-speech/','max','authModel','fetchInstances','toUpperCase','):Processing\x20audio','chats.delete','):\x20whoCanUse\x20after\x20validation:\x20','MESSAGES_UPDATE','isCommunityAnnounce','saveVariable','variables','this.reconnectAttempts:\x20','findMany','truncatedto','mongoose','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','Pausado\x20por\x20','webhookMap','waitingMenu_replyOptions','audioWhatsapp','authService','Invalid\x20format','joinApprovalMode','timeInMinutes','FULLCHAIN','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','downloads','min','WARN','quoted','isJidUser','myAppStateKeyId','):\x20Detalhes\x20da\x20mdia\x20salvos\x20para\x20\x27','/instance/delete','groups.upsert','Not\x20Found','./.git/config','WebhookGlobal','mediaKey','compression','noConnection','Content-Type','apiResponse','isValidAndUniqueIPv6','/exit','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','updateOnlinePrivacy','\x0a{\x20instance:\x20','apirequest','pop','\x20:\x20','inner','logger','ignoreGroups','?timestamp=','):Image\x20converted\x20to\x20WebP','fetchStatus','groupJoinApprovalMode','replaceVariablesInObject','):\x20teve\x20mudanas\x20chat.muteEndTime:\x20','ScheduleMessage','currency','js-yaml','normalizeMessage','wuid','DATABASE_ENABLED','stopWhenYouSendMsg','inviteCode','Esse\x20fluxo\x20expirou','data','contextInfo','Last\x20message\x20not\x20found','poll','webhookModel','Error\x20adding\x20IPv6\x20address:\x20','scheduleNextExecution','lastRealGroupsFetch','findLabels','/wa-message','/group','):\x20Query\x20params:\x20','sleep','reconnectAttempts','Partes\x20do\x20domnio:','):\x20Editando\x20replyOption...','groupRequestParticipantsUpdate','getOwnPropertyNames','_Messages','ex:\x20\x22groupJid=120362@g.us\x22','connectionUpdate','.ppt','getMIMEType','connection.update','1uznQlP','/wa-qrcode','getBase64FromMediaMessage','!stop','\x20minutos...','chat','STATUS_INSTANCE','https://api.ipify.org?format=json','updateGroupPicture','EXPIRIN_IN','open','contactsArrayMessage','):\x20Extenso\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','editFlowVariable','Fluxos\x20no\x20esto\x20ativados','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','pollErrorMessage',',\x20pairCode:\x20','uazapiSendMedia','sendMenu','options','request\x20received\x20in\x20editFlowgroup','content','chat\x20no\x20encontrado','connectToWhatsapp','LEVEL','groupSettingUpdate','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','waUploadToServer','error\x20get\x20vote','async-mutex','flow','valid','):\x20Envio\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','.\x20Aguardando\x20','replace','pictureUrl','replaceVariables','):\x20no\x20encontrado\x20prxima\x20mensagem,\x20far\x20nova\x20verificao\x20em\x20','expression','GROUPS_UPDATE','ListType','):\x20Buscando\x20conversas...','PORT','initAuthCreds','fetchConversation','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','fetchBusinessProfile','):\x20Condies\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','createGroup','buttonId','cleanDisconnectedInstances','Atingido\x20interaes\x20mximas,\x20parando\x20fluxo','markMessageAsRead','crypto','groupHandler','https://api.openai.com/v1/images/generations','sendMessage','leadInfo.atendimentoAberto','Instance\x20restarted','CHATS_UPDATE','1093980FwEVeO','setContext','groupBetterSetting','reactionMessage','font','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','sendContact','ipv6Prefix','Conversa\x20deletada\x20com\x20sucesso.','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','from','request\x20received\x20in\x20scheduleMessage','groupMemberAddMode','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','findAll',',\x20Resultado:\x20','Subdomnio\x20extrado\x20do\x20caminho\x20SSL:','textMessage','8080','scheduleNextCheck','_fromMe','extractPhoneNumber','Fluxo\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.','/events','locationMessage','created','request\x20received\x20in\x20editFlow','resetReconnectionVariables','/instance','setting','):\x20Bloco\x20original\x20para\x20cpia:\x20','findWebhook','allflows','Erro\x20ao\x20definir\x20instncias\x20como\x20desconectadas:','hbs','waitingMenu_text','isListOfNumbers','utf-8','):Audio\x20converted\x20and\x20stored\x20in\x20cache','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessrios.','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edio.','substring','):\x20Est\x20configurado\x20para\x20parar\x20at\x20','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','filter','generateHash','addBlock','video','Authentication\x20error','paused','ephemeralDuration','labels.association','IP\x20confirmed:\x20','scheduleSendAudio','DATABASE_CONNECTION_PASSWORD','app','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','mentions','startCommandWord','/wa-contacts','instanceInfo','triedToSend','CONNECTION_UPDATE','uazapiSendText','announce','archive','\x20-\x20ON:\x20','getChatModelForOwner','Types','/automate','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','isCommunity','Error\x20fetching\x20group','bulkWrite','):Image\x20is\x20base64','Para\x20marcar\x20esse\x20fluxo\x20como\x20visvel\x20globalmente,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20Global.','Instance\x20Key\x20from\x20DB:',':\x20Verificando\x20se\x20h\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','fetchContacts','response','The\x20global\x20api\x20key\x20must\x20be\x20set','Usando\x20IP\x20existente:\x20','buttonMessage','convertaudio','lastInteraction','messageStubParameters','updateGroupWebhook','API\x20Key\x20invlida.','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','sort','\x1b[1m\x1b[37m','deleteMessage','chatLog','getConversationModelForOwner','createWebhook','stanzaId','--------------------------------------','processPollUpdateMessage','updateProfilePicturePrivacy','Bad\x20Request','flowStopMinutes','processclearVariables','Flow\x20iniciado\x20com\x20','updateMissingTags','URL\x20completa:','conversationTimestamp','groupSetting','reaction','https://ipv6.jsonip.com','^\x5cd+','https://v6.ident.me','PROXY','lastReceivedMessage','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','Nmero:\x20','creation','stopIfLastReturnedError','remove','title','size','createInstance','remote\x20\x22origin\x22','goNextblock','URL\x20no\x20disponvel','CORS_ORIGIN','Flow\x20iniciado','updateChatWithMessage','groupGetInviteInfo','release','available','No\x20\x20permitido\x20adicionar\x20outro\x20grupo\x20padro','HH:mm:ss','}}\x20->\x20valor\x20no\x20encontrado','7xLMinS','getPrototypeOf','Read\x20messages','Falha\x20ao\x20processar\x20a\x20solicitao\x20findParticipants','The\x20property\x20cannot\x20be\x20empty','__esModule','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Cdigo\x20de\x20sada\x20','FlowController','profilePictureUrl','testingWith','sign','deletedCount','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia.','Erro\x20ao\x20limpar\x20instncias\x20desconectadas:','unreadCount','status.instance','push','):\x20Tipo\x20de\x20contedo\x20identificado:\x20','MessageModel','Falha\x20ao\x20processar\x20a\x20solicitao\x20findGroups','):\x20no\x20encontrou','writeFileSync','toBrazilianNumberFormat','mongodb://','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','deleteReplyOption','Missing\x20global\x20api\x20key','code','cacheContactModel','responsavelid',',\x20Minutes\x20to\x20Close:\x20','messageId','addMessagesToGroup',',\x20isAdmin:\x20','}}\x20->\x20\x22','\x20segundos\x20antes\x20de\x20reconectar...','ChatModel','fileUrl','editChat','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20','):Converted\x20image\x20deleted','isJWT','pollCreationMessage','utf8','A\x20licena\x20no\x20\x20vlida,\x20interrompendo\x20a\x20aplicao.','Falha\x20ao\x20processar\x20a\x20solicitao\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','footerText','Request\x20Body:','sendButtons','true','defineAuthState','jpegThumbnail','Subscribed\x20Events:','request\x20received\x20in\x20allFlows','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','processawaitSeconds','\x20tentativas.','decryptPollVote','Instncia:\x20','#fe9dfe','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','preview','\x27...','):\x20Conversa\x20inserida\x20com\x20sucesso.','dbConnection','createConnection','getMessageModelForOwner',',\x20Comparador:\x20','\x20-i\x20','restart','KEY','API\x20Key\x20invlida\x20ou\x20instncia\x20no\x20encontrada.','message','Rtulo\x20invlido\x20ou\x20sem\x20ID.','Erro\x20ao\x20importar\x20chats','assign','createNewConversation','messageHandle','123198uUnQnj','addresss','/instance/connect','getUniqueFlowName','-instances','request\x20received\x20in\x20getAutomateSystem',',\x20valor\x20passado:\x20\x22','exists','):\x20Adicionando\x20\x27','choices','*Pergunta*:\x20\x0a','whoCanEdit','):\x20newSecondValue\x20aps\x20replaceVariables:','applyvaredit','body','block','getScheduleMessage','forEach','O\x20campo\x20id\x20\x20obrigatrio\x20para\x20editar/criar\x20um\x20chat.','):\x20conversation.status:\x20','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','insertMany','):\x20Procurando\x20conversa','greater','TYPE','trimmed','DD/MM\x20HH:mm:ss','contentText','\x1b[1m','fetchProfile','globalShow','):Business\x20profile\x20fetched','createConversationforStartFlow','editFlowBlock','child_process','updateConversation','headerString','):\x20A\x20mensagem\x20\x20\x22stopConversation\x22\x20=\x20','):\x20Editando\x20mensagens\x20no\x20grupo...','displayName','description','The\x20instance\x20needs\x20to\x20be\x20disconnected','deleteFlow','updateMediaMessage','Selecione','PLAYED','No\x20\x20permitido\x20deletar\x20o\x20bloco\x20padro','all','_ScheduleMessages','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','auth','delaySecMax','Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.','?authSource=admin&readPreference=primary&directConnection=true','ObjectId','.\x20Pulando.','prototype','number','groupUpdateSubject','CONTACTS_UPDATE','editFlowCondition','Error\x20parsing\x20JSON:','request\x20body:\x20','editFlowVaredit','count','participants','):\x20delete\x20=\x20true','504006cUrxCT','reorderReplyOptions','redis://127.0.0.1:6379','atendimentoAberto','-whatsapp-api','https://jsonip.com','instanceName\x20not\x20provided.','deleted','.TEL;waid=','URI','_activatedCount','):\x20updateResult:','findFlow','status@broadcast','fetchPrivacySettings','email','sending','saveTextReply','application/json',',\x20qrcodeCount:\x20','eventHandler','):\x20isVote:\x20','convertToWebP','recebido\x20de','beforeExit','\x20foi\x20removido\x20por\x20no\x20ser\x20vlido.','storePath','stickerMessage','API\x20Key\x20from\x20Request:','):\x20Comando\x20desconhecido:\x20','):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','labelId','editScheduleMessage','shift','cache','updateProfileStatus','node-mime-types','):Type\x20defined\x20as\x20audio','):Output\x20path:\x20','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','\x1b[0m','getMessage','error','generate','DATABASE_CONNECTION_URI','$addToSet','stringify','repeat','webhookService','Erro\x20ao\x20iniciar\x20o\x20fluxo.','RemoteJid:','canSendMessage','Erro\x20ao\x20encerrar\x20a\x20API','):\x20Falha\x20ao\x20atualizar\x20as\x20variveis\x20do\x20chat\x20no\x20BD','addReplyOption','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupBetterSetting','Erro\x20ao\x20buscar\x20fluxos:','Bloco\x20com\x20ID\x20','):\x20\x27Enviando\x20audio\x20para\x20\x27','listResponseMessage','view\x20engine','beautifyWithPlaceholders','SendScheduleMessage','editFlow','messages.update','):\x20no\x20\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','getScheduleMessageModelForOwner','Type\x20is\x20required','):\x20Detalhes\x20da\x20mdia\x20obtidos\x20com\x20sucesso.','ip\x20-6\x20addr\x20del\x20','messageContextInfo','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','createJid','del','notMatchRegex','pollUpdateMessage','updateReplyOption','chats.update','\x20mensagens\x20de\x20','oldValue','demote','color','COLOR','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','https://api64.ipify.org?format=json','https','scheduleFlow','whoCanUse','stack','next_groupId','loadEnv','#000000','request\x20received\x20in\x20getFlow','synchronizeAndMapFlows','Erro\x20ao\x20atualizar\x20agendamento\x20','):\x20Criando\x20fluxo...','enviado\x20para','hGetAll','groupId','chatHandle','audio/ogg','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','Module\x20-\x20ON','Nenhum\x20chat\x20encontrado\x20para\x20editar.','):\x20Editando\x20varivel\x20do\x20fluxo...','delayMessage','Content\x20is\x20required','No\x20foi\x20possvel\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automao.','convertedOptions','/instance/create','isURL','recording','request_method','chats','now','groupCreate','):\x20Conversa\x20est\x20expirada','getNextPendingMessage','\x27\x20do\x20banco\x20de\x20dados...','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mdia:\x20','\x20Tentativa\x20de\x20reconexo\x20','redirect','findOrCreate','scheduleMessage','isAdmin','start','add','getHours','):Fetching\x20business\x20profile','Internal\x20Server\x20Error','allContacts','Fluxo\x20agendado\x20pelo\x20fluxo\x20','findOne',',\x20received\x20','audio/ogg;\x20codecs=opus','command','getAutomateSystem','conversation','):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20voc\x20no\x20tem\x20permisso\x20para\x20us-lo','Removendo\x20package-lock.json\x20e\x20a\x20dependncia\x20especfica...','pollCreationMessageKey','OrAnd','text/event-stream','Novo\x20IP\x20criado:\x20','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','messageTimestamp','AutomateSystem','subjectTime','nome','.ogv','Erro\x20ao\x20buscar\x20conversas','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','):\x20Erro\x20ao\x20salvar\x20variveis\x20do\x20chat\x20no\x20BD:\x20','processApiRequest','padEnd','notify','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','findAndReplaceRegex','createOrUpdate','save','groupadd','):\x20Removendo\x20\x27','deleteMessageForEveryone','Falha\x20ao\x20processar\x20a\x20solicitao\x20createGroup','hex','random','joinGroup','SERVER_OFFLINE','findByIdAndDelete','@broadcast','Flow\x20\x27','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20','):\x20Transformao\x20de\x20mensagens\x20agendadas\x20concluda!','env','mediatype','):\x20Usando\x20extenso\x20padro:\x20','):including\x20timestamp\x20in\x20url:\x20','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','uazapi\x20no\x20est\x20instalado\x20pelo\x20git','moreLogs','SSL_CONF_PRIVKEY','stopMinutesMaxActives','uazapiSendMenu','/startFlow/:instance/:startID','Operador:\x20\x22','):\x20Os\x20fluxos\x20esto\x20desativados\x20para\x20','loggedOut','organization','CORS_METHODS','/wa-message-update','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','updateFlowConfig','lastFetchAwaitingApproval','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','\x1b[42m','fetchMessages','g-t','remove.instance','DELETED','isJidGroup','replacer'];a0_0x5611=function(){return _0x44a042;};return a0_0x5611();}function ir(){return new Promise((_0x3a526e,_0x988895)=>{const _0x1b8c3e=a0_0x3f1e;Le[_0x1b8c3e(0x2ab)][_0x1b8c3e(0x419)](ar,'utf-8',(_0x3f21c4,_0x53399b)=>{const _0x21b25d=_0x1b8c3e;if(_0x3f21c4){Ee=_0x3f21c4,_0x3a526e();return;}Ji[_0x21b25d(0x2ab)][_0x21b25d(0x3da)](_0x53399b)[_0x21b25d(0x563)][_0x21b25d(0x18d)]===sr?(Ee=null,_0x3a526e()):(Ee=new Error(_0x21b25d(0x6b4)),_0x3a526e());});});}async function or(){const _0x4f870e=a0_0x591e8d;try{await ir(),await js();}catch(_0x1634f6){console[_0x4f870e(0x62b)]('Erro\x20ao\x20iniciar\x20a\x20aplicao:\x20'+_0x1634f6),process['exit'](0x1);}}or();async function qi(){const _0x549b2a=a0_0x591e8d;let _0x1232f9;try{_0x1232f9=(await Fe[_0x549b2a(0x2ab)][_0x549b2a(0x2f4)](_0x549b2a(0x605)))[_0x549b2a(0x495)]['ip'];}catch(_0x17dd59){console[_0x549b2a(0x62b)](_0x17dd59);try{_0x1232f9=(await Fe[_0x549b2a(0x2ab)]['get'](_0x549b2a(0x4b4)))[_0x549b2a(0x495)]['ip'];}catch(_0x462540){console[_0x549b2a(0x62b)](_0x462540);try{_0x1232f9=(await Fe[_0x549b2a(0x2ab)][_0x549b2a(0x2f4)](_0x549b2a(0x367)))[_0x549b2a(0x495)][_0x549b2a(0x1e2)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x1b84b8){return console[_0x549b2a(0x62b)](_0x1b84b8),!0x1;}}}return _0x1232f9;}var ki=0x0;async function rr(){const _0x5ed277=a0_0x591e8d;let _0x50b253=await new ue(b[_0x5ed277(0x2f4)](_0x5ed277(0x740)))['instanceKeys']();return console[_0x5ed277(0x2c3)](_0x5ed277(0x78d),_0x50b253['length']),_0x50b253['length'];}function nr(_0x9c5b73){const _0x3cfd68=a0_0x591e8d;let _0x43ca50=_0x9c5b73['get'](_0x3cfd68(0x371))[_0x3cfd68(0x83c)],_0x30511f=_0x9c5b73[_0x3cfd68(0x2f4)](_0x3cfd68(0x887));console['log'](_0x3cfd68(0x17b),_0x43ca50),console[_0x3cfd68(0x2c3)](_0x3cfd68(0x85f),_0x30511f);let _0x1a7d27='',_0x10bae3=_0x43ca50||'';if(_0x43ca50){let _0x595596=_0x43ca50['match'](/\/\/(.*?)\./);console[_0x3cfd68(0x2c3)](_0x3cfd68(0x2e2),_0x595596),_0x595596&&_0x595596[0x1]&&(_0x1a7d27=_0x595596[0x1],console[_0x3cfd68(0x2c3)](_0x3cfd68(0x7e0),_0x1a7d27));}if(!_0x1a7d27&&_0x30511f&&_0x30511f[_0x3cfd68(0x468)]){let _0x13a8fb=_0x30511f[_0x3cfd68(0x468)][_0x3cfd68(0x179)]('/');console[_0x3cfd68(0x2c3)]('Partes\x20do\x20caminho\x20FULLCHAIN:',_0x13a8fb);let _0x1b37d8=_0x13a8fb[_0x13a8fb[_0x3cfd68(0x836)]-0x2];if(console['log']('Parte\x20do\x20domnio\x20do\x20caminho\x20FULLCHAIN:',_0x1b37d8),_0x1b37d8){let _0x27f893=_0x1b37d8[_0x3cfd68(0x179)]('.');console[_0x3cfd68(0x2c3)](_0x3cfd68(0x4a3),_0x27f893),_0x27f893['length']>0x2&&(_0x1a7d27=_0x27f893[0x0],console[_0x3cfd68(0x2c3)](_0x3cfd68(0x4fa),_0x1a7d27),_0x10bae3=''+_0x1b37d8);}}return{'subdomain':_0x1a7d27||_0x3cfd68(0x88c),'fullURL':_0x10bae3||_0x3cfd68(0x565)};}var {subdomain:W,fullURL:Js}=nr(b);console[a0_0x591e8d(0x2c3)](a0_0x591e8d(0x1d5),W),console[a0_0x591e8d(0x2c3)](a0_0x591e8d(0x552),Js);async function cr(){const _0x3872f7=a0_0x591e8d;let _0x2c23d8=b[_0x3872f7(0x2f4)](_0x3872f7(0x740)),_0x21e792=b[_0x3872f7(0x2f4)]('AUTHENTICATION')[_0x3872f7(0x199)][_0x3872f7(0x5b5)],_0x1eed1f=b[_0x3872f7(0x2f4)](_0x3872f7(0x887)),_0x150213=await qi(),_0x5e773a=b[_0x3872f7(0x2f4)](_0x3872f7(0x371))['PORT'],_0x260279=Js;try{let _0x1192ce={'ip':_0x150213||null,'redis_enable':_0x2c23d8?.[_0x3872f7(0x754)]||null,'apikey':_0x21e792||null,'ssl':_0x1eed1f?.[_0x3872f7(0x2ac)]||null,'lastupdate':Vi||null,'port':_0x5e773a||null,'gitInstallError':Ee?.[_0x3872f7(0x5b7)]||null,'url':_0x260279||null,'subdomain':W};if(console[_0x3872f7(0x2c3)]('ip:\x20',_0x1192ce['ip']),_0x2c23d8&&_0x2c23d8[_0x3872f7(0x754)]){let _0x2398a1=await rr();_0x1192ce['instanceCount']=_0x2398a1||null;}for(let _0xbc6873 in _0x1192ce)_0x1192ce['hasOwnProperty'](_0xbc6873)&&_0xbc6873!=='ip'&&(_0x1192ce[_0xbc6873]=JSON[_0x3872f7(0x62f)](_0x1192ce[_0xbc6873]));return(await Fe[_0x3872f7(0x2ab)]['post'](_0x3872f7(0x404),_0x1192ce))[_0x3872f7(0x495)];}catch(_0x12c4e3){return console[_0x3872f7(0x62b)](_0x12c4e3),!0x1;}}var Fs=!0x1,Vi=0x25f,lr=0x3,Li=0x1b7740;function a0_0x3f1e(_0x2aaaeb,_0x2d6897){const _0x561180=a0_0x5611();return a0_0x3f1e=function(_0x3f1e6c,_0xf833df){_0x3f1e6c=_0x3f1e6c-0x158;let _0x36d708=_0x561180[_0x3f1e6c];return _0x36d708;},a0_0x3f1e(_0x2aaaeb,_0x2d6897);}async function js(){const _0x4b0402=a0_0x591e8d;let _0x3dccc8=_0x4b0402(0x6ec);Ee===null&&(_0x3dccc8=await qi());let _0x28e468=await cr();if(_0x28e468){if(_0x28e468[_0x4b0402(0x539)][_0x4b0402(0x78b)]===!0x0){Ee===null&&_0x28e468[_0x4b0402(0x539)][_0x4b0402(0x2fd)]-Vi>0x0&&await ur(),Fs||(Fs=!0x0,tr());let _0x14f30f=0x24*0x3c*0x3c,_0x1a3b05=_0x28e468[_0x4b0402(0x539)][_0x4b0402(0x227)]>_0x14f30f?_0x14f30f:_0x28e468[_0x4b0402(0x539)][_0x4b0402(0x227)],_0x33a0a7=Number(_0x1a3b05);if(isNaN(_0x33a0a7)){console[_0x4b0402(0x62b)]('interval\x20no\x20\x20um\x20nmero');return;}let _0x261e81=Math['floor'](_0x33a0a7/0xe10),_0x4d9670=Math['floor'](_0x33a0a7%0xe10/0x3c),_0x5ae51f=new Date(Date[_0x4b0402(0x673)]()+_0x33a0a7*0x3e8);setTimeout(js,_0x33a0a7*0x3e8);let _0x322b20=_0x2a9b3f=>_0x2a9b3f[_0x4b0402(0x44c)]()[_0x4b0402(0x3e1)](0x2,'0'),_0x122eaf=_0x4b0402(0x845)+_0x322b20(_0x261e81)+_0x4b0402(0x1a9)+_0x322b20(_0x4d9670)+_0x4b0402(0x77d)+_0x322b20(_0x5ae51f[_0x4b0402(0x680)]())+':'+_0x322b20(_0x5ae51f['getMinutes']())+'.';console[_0x4b0402(0x2c3)](_0x122eaf);}else return console[_0x4b0402(0x2c3)]('Regularize\x20sua\x20licena\x20no\x20site\x20https://uazapi.dev/'),Fs&&(console[_0x4b0402(0x2c3)](_0x4b0402(0x59b)),process[_0x4b0402(0x270)]()),_0x4b0402(0x762);}else{if(ki++,ki<lr)console[_0x4b0402(0x2c3)]('Servidor\x20de\x20autenticao\x20offline.\x20Nova\x20tentativa\x20em\x20'+Li/0xea60+_0x4b0402(0x4b1)),setTimeout(js,Li);else return console[_0x4b0402(0x62b)]('No\x20foi\x20possvel\x20conectar\x20ao\x20servidor\x20aps\x20vrias\x20tentativas,\x20encerrando\x20a\x20aplicao.'),_0x4b0402(0x6a8);}}async function ur(){const _0x57f844=a0_0x591e8d;console[_0x57f844(0x2c3)](_0x57f844(0x7de)),console[_0x57f844(0x2c3)]('Limpando\x20logs\x20do\x20PM2...'),(0x0,is[_0x57f844(0x298)])(_0x57f844(0x1c8),{'shell':!0x0})['on'](_0x57f844(0x3e5),_0x3daf2a=>{const _0x485bb5=_0x57f844;_0x3daf2a!==0x0?console[_0x485bb5(0x62b)](_0x485bb5(0x400)):(console[_0x485bb5(0x2c3)](_0x485bb5(0x879)),console['log'](_0x485bb5(0x68c)),(0x0,is[_0x485bb5(0x298)])(_0x485bb5(0x469),{'shell':!0x0})['on'](_0x485bb5(0x3e5),_0x4315bb=>{const _0x11d58e=_0x485bb5;if(_0x4315bb!==0x0)console['error'](_0x11d58e(0x511));else{console[_0x11d58e(0x2c3)](_0x11d58e(0x7c2));let _0x125d11=(0x0,is[_0x11d58e(0x298)])('git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm',{'shell':!0x0});_0x125d11[_0x11d58e(0x23e)]['on'](_0x11d58e(0x495),_0x35f411=>{console['log']('Atualizao:\x20'+_0x35f411);}),_0x125d11[_0x11d58e(0x32d)]['on'](_0x11d58e(0x495),_0x16ee5c=>{const _0x5a53dd=_0x11d58e;console[_0x5a53dd(0x62b)](_0x5a53dd(0x1cb)+_0x16ee5c);}),_0x125d11['on'](_0x11d58e(0x270),_0xbdb7e8=>{const _0x185cb3=_0x11d58e;_0xbdb7e8!==0x0?console['error'](_0x185cb3(0x575)+_0xbdb7e8):console[_0x185cb3(0x2c3)]('Sistema\x20atualizado\x20com\x20sucesso!'),console[_0x185cb3(0x2c3)]('Parando\x20aplicao...'),setTimeout(()=>process[_0x185cb3(0x270)](),0x2710);});}}));});}0x0&&(module[a0_0x591e8d(0x718)]={'fullURL':fullURL,'subdomain':subdomain});