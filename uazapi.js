const a0_0x11d42e=a0_0x2924;(function(_0x2de739,_0x22bd25){const _0x2e94dc=a0_0x2924,_0x449a12=_0x2de739();while(!![]){try{const _0x1265f4=-parseInt(_0x2e94dc(0x4ed))/0x1*(-parseInt(_0x2e94dc(0x403))/0x2)+-parseInt(_0x2e94dc(0x1d3))/0x3+-parseInt(_0x2e94dc(0x213))/0x4+-parseInt(_0x2e94dc(0x255))/0x5+-parseInt(_0x2e94dc(0x2dd))/0x6+-parseInt(_0x2e94dc(0x2e7))/0x7*(parseInt(_0x2e94dc(0x5ad))/0x8)+parseInt(_0x2e94dc(0x445))/0x9;if(_0x1265f4===_0x22bd25)break;else _0x449a12['push'](_0x449a12['shift']());}catch(_0x213680){_0x449a12['push'](_0x449a12['shift']());}}}(a0_0x9c33,0x96890));var Ki=Object[a0_0x11d42e(0x3a3)],We=Object['defineProperty'],Qi=Object[a0_0x11d42e(0x126)],Yi=Object[a0_0x11d42e(0x471)],Xi=Object[a0_0x11d42e(0x80a)],Zi=Object[a0_0x11d42e(0x502)]['hasOwnProperty'],eo=(_0x42d63c,_0x4b38a6)=>{for(var _0xc62c35 in _0x4b38a6)We(_0x42d63c,_0xc62c35,{'get':_0x4b38a6[_0xc62c35],'enumerable':!0x0});},Qs=(_0x18c58c,_0x3bd68e,_0x39975e,_0x303411)=>{const _0x3dfb1c=a0_0x11d42e;if(_0x3bd68e&&typeof _0x3bd68e==_0x3dfb1c(0x1cb)||typeof _0x3bd68e==_0x3dfb1c(0x3b6)){for(let _0xd7ffb1 of Yi(_0x3bd68e))!Zi['call'](_0x18c58c,_0xd7ffb1)&&_0xd7ffb1!==_0x39975e&&We(_0x18c58c,_0xd7ffb1,{'get':()=>_0x3bd68e[_0xd7ffb1],'enumerable':!(_0x303411=Qi(_0x3bd68e,_0xd7ffb1))||_0x303411[_0x3dfb1c(0x55e)]});}return _0x18c58c;},I=(_0x4c0d39,_0x13fe96,_0x4b316e)=>(_0x4b316e=_0x4c0d39!=null?Ki(Xi(_0x4c0d39)):{},Qs(_0x13fe96||!_0x4c0d39||!_0x4c0d39['__esModule']?We(_0x4b316e,a0_0x11d42e(0x3de),{'value':_0x4c0d39,'enumerable':!0x0}):_0x4b316e,_0x4c0d39)),to=_0x37b46f=>Qs(We({},a0_0x11d42e(0x25d),{'value':!0x0}),_0x37b46f),Sr={};eo(Sr,{'fullURL':()=>Ks,'subdomain':()=>ge}),module['exports']=to(Sr);var Vi=I(require(a0_0x11d42e(0x37c))),Xs=require('fs'),Zs=require(a0_0x11d42e(0x739)),ea=require(a0_0x11d42e(0x37b)),ze=require(a0_0x11d42e(0x37b)),ce=process[a0_0x11d42e(0x190)](),Me=(0x0,ze[a0_0x11d42e(0x7f4)])(ce,a0_0x11d42e(0x693)),Ys=(0x0,ze[a0_0x11d42e(0x7f4)])(ce,a0_0x11d42e(0x54f)),Cn=(0x0,ze['join'])(ce,'store',a0_0x11d42e(0x44a)),gs=class{constructor(){const _0xc69ab3=a0_0x11d42e;this[_0xc69ab3(0x386)]();}[a0_0x11d42e(0x686)](_0x4098c2){return this['env'][_0x4098c2];}[a0_0x11d42e(0x386)](){const _0x1bc2e8=a0_0x11d42e;this[_0x1bc2e8(0x6f4)]=process[_0x1bc2e8(0x6f4)]?.[_0x1bc2e8(0x5b2)]!==_0x1bc2e8(0x860)?this[_0x1bc2e8(0x243)]():this['envProcess'](),process[_0x1bc2e8(0x6f4)]?.['DOCKER_ENV']==='true'&&(this['env'][_0x1bc2e8(0x65b)][_0x1bc2e8(0x67c)]=_0x1bc2e8(0x331),this[_0x1bc2e8(0x6f4)][_0x1bc2e8(0x65b)][_0x1bc2e8(0x7f1)]=Number[_0x1bc2e8(0x883)](process[_0x1bc2e8(0x6f4)]?.[_0x1bc2e8(0x455)]??'8080'));}['envYaml'](){const _0x201bb6=a0_0x11d42e;return(0x0,Zs[_0x201bb6(0x2e1)])((0x0,Xs[_0x201bb6(0x5cd)])((0x0,ea[_0x201bb6(0x7f4)])(Ys,_0x201bb6(0x654)),{'encoding':_0x201bb6(0x70d)}));}[a0_0x11d42e(0x37f)](){const _0x33d355=a0_0x11d42e;return{'SERVER':{'TYPE':process[_0x33d355(0x6f4)][_0x33d355(0x362)],'PORT':Number[_0x33d355(0x883)](process[_0x33d355(0x6f4)][_0x33d355(0x455)]),'URL':process[_0x33d355(0x6f4)][_0x33d355(0x89c)]},'CORS':{'ORIGIN':process['env']['CORS_ORIGIN'][_0x33d355(0x597)](','),'METHODS':process[_0x33d355(0x6f4)][_0x33d355(0x63f)][_0x33d355(0x597)](','),'CREDENTIALS':process[_0x33d355(0x6f4)]?.[_0x33d355(0x1a9)]===_0x33d355(0x860)},'SSL_CONF':{'PRIVKEY':process['env']?.[_0x33d355(0x487)],'FULLCHAIN':process['env']?.['SSL_CONF_FULLCHAIN']},'STORE':{'CLEANING_INTERVAL':Number['isInteger'](process[_0x33d355(0x6f4)]?.[_0x33d355(0x30f)])?Number['parseInt'](process[_0x33d355(0x6f4)][_0x33d355(0x30f)]):void 0x0,'MESSAGES':process[_0x33d355(0x6f4)]?.[_0x33d355(0x1c9)]===_0x33d355(0x860),'CONTACTS':process['env']?.['STORE_CONTACTS']==='true','CHATS':process['env']?.[_0x33d355(0x652)]===_0x33d355(0x860)},'DATABASE':{'CONNECTION':{'HOST':process[_0x33d355(0x6f4)]?.[_0x33d355(0x3a7)],'PORT':Number['parseInt'](process[_0x33d355(0x6f4)]?.[_0x33d355(0x3a7)]),'USER':process['env'][_0x33d355(0x2f7)],'PASSWORD':process[_0x33d355(0x6f4)][_0x33d355(0x39e)],'URI':process[_0x33d355(0x6f4)][_0x33d355(0x3be)],'DB_PREFIX_NAME':process[_0x33d355(0x6f4)]['DATABASE_CONNECTION_DB_PREFIX_NAME']},'ENABLED':process['env']?.[_0x33d355(0x633)]===_0x33d355(0x860)},'REDIS':{'ENABLED':process[_0x33d355(0x6f4)]?.[_0x33d355(0x6e3)]===_0x33d355(0x860),'URI':process[_0x33d355(0x6f4)]['REDIS_URI']||_0x33d355(0x314),'PREFIX_KEY':process['env']['REDIS_PREFIX_KEY']||_0x33d355(0x1eb)},'LOG':{'LEVEL':process['env']?.[_0x33d355(0x344)]['split'](','),'COLOR':process['env']?.[_0x33d355(0x17c)]===_0x33d355(0x860)},'PROXY':process[_0x33d355(0x6f4)]?.[_0x33d355(0x83d)]===_0x33d355(0x860),'AUTHENTICATION':{'TYPE':process['env'][_0x33d355(0x2ad)],'API_KEY':{'KEY':process[_0x33d355(0x6f4)][_0x33d355(0x84d)]},'JWT':{'EXPIRIN_IN':Number[_0x33d355(0x32c)](process[_0x33d355(0x6f4)]?.['AUTHENTICATION_JWT_EXPIRIN_IN'])?Number[_0x33d355(0x883)](process[_0x33d355(0x6f4)][_0x33d355(0x4c8)]):0xe10,'SECRET':process['env'][_0x33d355(0x68e)]}}};}},S=new gs(),Gi=I(require('cors')),be=I(require(a0_0x11d42e(0x629))),zs=require(a0_0x11d42e(0x37b)),ms=I(require(a0_0x11d42e(0x2e5))),fs=(_0x1d161b=>(_0x1d161b[a0_0x11d42e(0x4c3)]=a0_0x11d42e(0x562),_0x1d161b['INFO']=a0_0x11d42e(0x820),_0x1d161b[a0_0x11d42e(0x2a0)]=a0_0x11d42e(0x878),_0x1d161b[a0_0x11d42e(0x432)]=a0_0x11d42e(0x2cf),_0x1d161b['DEBUG']=a0_0x11d42e(0x3a0),_0x1d161b[a0_0x11d42e(0x23c)]=a0_0x11d42e(0x734),_0x1d161b['DARK']=a0_0x11d42e(0x805),_0x1d161b))(fs||{}),ta=(_0x2707d4=>(_0x2707d4[a0_0x11d42e(0x4c3)]=a0_0x11d42e(0x228),_0x2707d4['DARK']='\x1b[30m%s\x1b[0m',_0x2707d4[a0_0x11d42e(0x5e2)]=a0_0x11d42e(0x5dd),_0x2707d4['WARN']=a0_0x11d42e(0x3da),_0x2707d4[a0_0x11d42e(0x432)]=a0_0x11d42e(0x361),_0x2707d4[a0_0x11d42e(0x40c)]=a0_0x11d42e(0x4a6),_0x2707d4[a0_0x11d42e(0x23c)]=a0_0x11d42e(0x4b8),_0x2707d4))(ta||{}),sa=(_0x461074=>(_0x461074[a0_0x11d42e(0x4c3)]=a0_0x11d42e(0x4c3),_0x461074[a0_0x11d42e(0x2a0)]='WARN',_0x461074[a0_0x11d42e(0x5e2)]='INFO',_0x461074[a0_0x11d42e(0x405)]='DARK',_0x461074[a0_0x11d42e(0x432)]=a0_0x11d42e(0x432),_0x461074[a0_0x11d42e(0x40c)]=a0_0x11d42e(0x40c),_0x461074[a0_0x11d42e(0x23c)]=a0_0x11d42e(0x23c),_0x461074))(sa||{}),aa=(_0x408888=>(_0x408888[a0_0x11d42e(0x4c3)]=a0_0x11d42e(0x13b),_0x408888['INFO']=a0_0x11d42e(0x4ec),_0x408888[a0_0x11d42e(0x2a0)]=a0_0x11d42e(0x1e4),_0x408888[a0_0x11d42e(0x405)]=a0_0x11d42e(0x39a),_0x408888[a0_0x11d42e(0x432)]='\x1b[41m',_0x408888[a0_0x11d42e(0x40c)]=a0_0x11d42e(0x817),_0x408888[a0_0x11d42e(0x23c)]=a0_0x11d42e(0x832),_0x408888))(aa||{}),R=class{constructor(_0x3e4c04=a0_0x11d42e(0x8bb)){const _0x26b69c=a0_0x11d42e;this['context']=_0x3e4c04,this[_0x26b69c(0x155)]=S;}[a0_0x11d42e(0x615)](_0x295af6){const _0x549781=a0_0x11d42e;this[_0x549781(0x76f)]=_0x295af6;}['console'](_0x500ce2,_0x42056e){const _0x4a80e5=a0_0x11d42e;let _0x36a62b=[];this[_0x4a80e5(0x155)][_0x4a80e5(0x686)](_0x4a80e5(0x4c3))[_0x4a80e5(0x2a9)]['forEach'](_0xe8ae0e=>_0x36a62b[_0x4a80e5(0x64a)](sa[_0xe8ae0e]));let _0x518243=typeof _0x500ce2;_0x36a62b['includes'](_0x42056e)&&(S[_0x4a80e5(0x686)](_0x4a80e5(0x4c3))[_0x4a80e5(0x270)]?(console[_0x4a80e5(0x86e)](_0x4a80e5(0x7c7)+ta[_0x42056e],_0x4a80e5(0x8a8),(0x0,ms[_0x4a80e5(0x3de)])()[_0x4a80e5(0x546)](_0x4a80e5(0x59e)),_0x4a80e5(0x50b),fs[_0x42056e]+aa[_0x42056e]+'\x1b[1m',_0x42056e+'\x20\x1b[0m',_0x4a80e5(0x164),this[_0x4a80e5(0x76f)]+'\x1b[0m',fs[_0x42056e],_0x518243!==_0x4a80e5(0x1cb)?_0x500ce2:'',_0x4a80e5(0x50b)),_0x518243==='object'&&console[_0x4a80e5(0x86e)](_0x500ce2,'\x0a')):console['log']((0x0,ms[_0x4a80e5(0x3de)])()[_0x4a80e5(0x546)](_0x4a80e5(0x44c)),_0x42056e+'\x20',''+this[_0x4a80e5(0x76f)],_0x500ce2));}['log'](_0x2c06a1){const _0x26da92=a0_0x11d42e;this['console'](_0x2c06a1,_0x26da92(0x4c3));}[a0_0x11d42e(0x59a)](_0x238255){const _0x157b1b=a0_0x11d42e;this[_0x157b1b(0x6cd)](_0x238255,_0x157b1b(0x5e2));}[a0_0x11d42e(0x4d4)](_0x36c273){const _0x4f528c=a0_0x11d42e;this[_0x4f528c(0x6cd)](_0x36c273,'WARN');}[a0_0x11d42e(0x7bf)](_0x1d6629){const _0x12684f=a0_0x11d42e;this[_0x12684f(0x6cd)](_0x1d6629,_0x12684f(0x432));}[a0_0x11d42e(0x70a)](_0x4b8d5d){const _0x2617d7=a0_0x11d42e;this['console'](_0x4b8d5d,_0x2617d7(0x23c));}[a0_0x11d42e(0x893)](_0x5a3c13){const _0x3b0e27=a0_0x11d42e;this['console'](_0x5a3c13,_0x3b0e27(0x40c));}[a0_0x11d42e(0x7e8)](_0x30a5da){const _0x36b714=a0_0x11d42e;this['console'](_0x30a5da,_0x36b714(0x405));}};function ia(){const _0x1332e3=a0_0x11d42e;process['on'](_0x1332e3(0x59b),(_0x4c6d30,_0xc0760)=>{const _0x59201c=_0x1332e3;new R('uncaughtException')[_0x59201c(0x7bf)]({'origin':_0xc0760,'stderr':process[_0x59201c(0x853)]['fd'],'error':_0x4c6d30});}),process['on'](_0x1332e3(0x69a),(_0x57406a,_0x5ed0c4)=>{const _0x51ee29=_0x1332e3;new R(_0x51ee29(0x69a))[_0x51ee29(0x7bf)]({'origin':_0x5ed0c4,'stderr':process[_0x51ee29(0x853)]['fd'],'error':_0x57406a});});}var oa=I(require(a0_0x11d42e(0x8b4))),ws=new oa[(a0_0x11d42e(0x3de))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Ce=require(a0_0x11d42e(0x2de)),_e=I(require('mongoose')),He=new R('Db\x20Connection'),L=S[a0_0x11d42e(0x686)](a0_0x11d42e(0x683)),T=L[a0_0x11d42e(0x84f)]?L[a0_0x11d42e(0x3c6)][a0_0x11d42e(0x4d8)]?_e[a0_0x11d42e(0x3de)]['createConnection'](L['CONNECTION'][a0_0x11d42e(0x4d8)],{'dbName':L[a0_0x11d42e(0x3c6)][a0_0x11d42e(0x719)]+a0_0x11d42e(0x2a4)}):_e[a0_0x11d42e(0x3de)][a0_0x11d42e(0x565)]('mongodb://'+L[a0_0x11d42e(0x3c6)][a0_0x11d42e(0x807)]+':'+L['CONNECTION'][a0_0x11d42e(0x7f1)]+a0_0x11d42e(0x2cd),{'user':L[a0_0x11d42e(0x3c6)][a0_0x11d42e(0x27f)],'pass':L[a0_0x11d42e(0x3c6)][a0_0x11d42e(0x4b3)],'dbName':L[a0_0x11d42e(0x3c6)][a0_0x11d42e(0x719)]+a0_0x11d42e(0x2a4)}):null;L[a0_0x11d42e(0x84f)]&&He[a0_0x11d42e(0x59a)](a0_0x11d42e(0x765)+T[a0_0x11d42e(0x18e)]);var Y=L[a0_0x11d42e(0x84f)]?L['CONNECTION'][a0_0x11d42e(0x4d8)]?_e[a0_0x11d42e(0x3de)]['createConnection'](L[a0_0x11d42e(0x3c6)][a0_0x11d42e(0x4d8)],{'dbName':a0_0x11d42e(0x797)}):_e['default']['createConnection'](a0_0x11d42e(0x4a1)+L['CONNECTION'][a0_0x11d42e(0x807)]+':'+L[a0_0x11d42e(0x3c6)][a0_0x11d42e(0x7f1)]+'?authSource=admin&readPreference=primary&directConnection=true',{'user':L[a0_0x11d42e(0x3c6)][a0_0x11d42e(0x27f)],'pass':L[a0_0x11d42e(0x3c6)]['PASSWORD'],'dbName':'cachedContacts-whatsapp'}):null;Y&&He[a0_0x11d42e(0x59a)](a0_0x11d42e(0x765)+Y[a0_0x11d42e(0x18e)]),process['on']('beforeExit',()=>{const _0x57244e=a0_0x11d42e;T&&T[_0x57244e(0x85f)](()=>{const _0x422717=_0x57244e;He[_0x422717(0x59a)](_0x422717(0x6ba));}),Y&&Y[_0x57244e(0x85f)](()=>{const _0x16a5ae=_0x57244e;He[_0x16a5ae(0x59a)](_0x16a5ae(0x26b));});});var so=new Ce[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),ao=new Ce[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),io=new Ce[(a0_0x11d42e(0x224))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),oo=new Ce['Schema']({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[so],'default':[]}},{'_id':!0x1}),ro=new Ce[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':oo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':ao},'groupdata':{'type':io,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),ra=_0x443c88=>{const _0x104028=a0_0x11d42e;let _0x5866d5='z_'+_0x443c88+_0x104028(0x880);return T?.[_0x104028(0x650)]('ChatModel',ro,_0x5866d5);},na=require(a0_0x11d42e(0x2de)),no=new na['Schema']({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ca=_0x491cfe=>{const _0x4cec4f=a0_0x11d42e;let _0x1c4da3='z_'+_0x491cfe+'_Contacts';return T?.['model'](_0x4cec4f(0x3c4),no,_0x1c4da3);},la=require(a0_0x11d42e(0x2de)),ys=class{},co=new la[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ua=Y?.['model'](ys['name'],co,'ContactsAndGroups'),da=require(a0_0x11d42e(0x2de)),bs=class{},lo=new da[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),Ke=Y?.[a0_0x11d42e(0x650)](bs['name'],lo,a0_0x11d42e(0x693)),Ms=require('mongoose'),Ss=class{},uo=new Ms[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),po=new Ms['Schema']({'_id':{'type':String},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),pa=Y?.['model'](Ss[a0_0x11d42e(0x414)],po,'messagesLogs'),ha=_0x3380b1=>{const _0x17ec66=a0_0x11d42e;let _0x2bce84='z_'+_0x3380b1+_0x17ec66(0x2bb);return T?.[_0x17ec66(0x650)]('MessageModel',uo,_0x2bce84);},ga=require('mongoose'),Cs=class{},ho=new ga['Schema']({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ma=T?.['model'](Cs[a0_0x11d42e(0x414)],ho,a0_0x11d42e(0x38c)),fa=require('mongoose'),vs=class{},wa=new fa['Schema']({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});function a0_0x9c33(){const _0x4c60d1=['):\x20\x27Enviando\x20mídia\x20para\x20\x27','$set','keys','flows','proto','createConversationforStartFlow','\x1b[46m','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','sendLocation','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','currency','originalUrl',']\x20(','pollMessageOnDelete','isArray','\x1b[34m','):\x20mediaMessageInfoId\x20:\x20','role','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','):\x20Mensagem\x20já\x20enviada\x20para\x20','\x22\x20cannot\x20be\x20empty','groupUpdateSubject','Erro\x20ao\x20alterar\x20privacidade','scheduleMessage','recebido\x20de','pm2\x20flush','\x20não\x20encontrado','autoCompleteMessages.command','ConversationModel','createGroup','automateSystem','Error\x20fetching\x20IPv6\x20count:\x20','modify','\x1b[47m',',\x20isAdmin:\x20',',\x20qrcodeCount:\x20','/events/:instance','SSL_CONF','last','Flow\x20\x27','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','fone','realVariables','PROXY','LICENSE_INVALID','findLabels','no.connection','):\x20Removendo\x20\x27','FULLCHAIN','leadInfo.etiquetas','leadInfo.atendimentoAberto','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','.gif','status.instance','nativeFlowMessage','insertMany','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','participants','Safari','AUTHENTICATION_API_KEY','.webp','ENABLED','memberAddMode','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','filter','stderr','readMessage','owner','drop','Rótulo\x20inválido\x20ou\x20sem\x20ID.','Primeiro\x20Valor:\x20','cacheInstanceRepository','logger','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','.ogg','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','view\x20engine','close','true','labelId','emit','updateProfileName','Network\x20interfaces\x20detected:\x20','events','findRealGroups','./license_attempts.json','):\x20customFieldVariables','selectedDisplayText','chatHandle','cache','/wa-groups','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','log','lastRealGroupsFetch','flushHeaders','!stop','AutomateFunctions','/wa-message-update','groupFetchAllParticipating','ip\x20-6\x20addr\x20add\x20','getLastMessage','cta_url','\x1b[33m','order','clearVariables','waitingMenu_text','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','toBRL','):\x20conversation.lastInteraction:\x20','ip:\x20','_Chats','sendMedia','prepareWAMessageMedia','parseInt','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','encoding','available','next_groupId','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','createServer','\x20segundos...','saveVariable','remote\x20\x22origin\x22','):\x20Editando\x20replyOption...','ListType','getUpdate','thumbnailUrl','#9ab6c1','profileName','debug','sendPresenceUpdate','superadmin','Fluxos\x20não\x20estão\x20ativados','\x20inseridas\x20no\x20banco\x20de\x20dados...','fetchStatus','\x20and\x20data:','group-participants.update','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','SERVER_URL','no-cache','verifyWhatsAppNumber','):\x20atualização\x20chat:\x20','documentWithCaptionMessage','updateMessage','local_map','quick_reply','menuType','groupLeave','Erro\x20ao\x20buscar\x20Schedule\x20Messages','save','\x1b[1m\x1b[37m','GROUPS_UPSERT','Servidor\x20de\x20autenticação\x20offline\x20(Docker).\x20Nova\x20tentativa\x20em\x20','modifiedCount','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','update','#9568cf','contacts.upsert','ip\x20-br\x20link\x20show','setRestartTimeout','getDelay','text','eventemitter2','):\x20Buscando\x20conversa...','removeChatLabel','equal','flattenObject','.wav','statusMessage','Logger','generateWAMessageFromContent','sendText','testingWith','send','isAdmin','getConversation','convertaudioMP3','lastBlockId','globalShow','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','beautifyWithPlaceholders','toNumber','write','notMatchRegex','yes','.error','END:VCARD','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','Parando\x20aplicação...','_activedCount','deleteMessageForEveryone','\x0aFN:','getOwnPropertyDescriptor','Error\x20fetching\x20IPv6\x20addresses:\x20','variable','deleteInstance','XX:XX:XX:XX:XX:XX','menuExpiredMessage','uazapiSendText','connectionUpdate','PENDING','interactiveMessage','hSet','pollCreationMessage','newValue','getStatus','CHATS_SET','Error\x20in\x20buttonsMessage\x20function:','connectToWhatsapp','dbClient','pollOnReplyDelete','editedMessage','):\x20não\x20encontrou','\x1b[42m','getTicketSystem','public','messageType','paused','email','unlocked','width','updateOnlinePrivacy','\x20removido\x20do\x20chat\x20','AppStateSyncKeyData','updateReadReceiptsPrivacy','CHATS_DELETE','end','Contacts\x20not\x20found','pollMessage','/create','):\x20Iniciando\x20processReadyMessages','temp-','#fe9dfe','shift','):\x20Error\x20processing\x20the\x20block:\x20','readMessages','Cache\x20instance\x20update\x20result:\x20','createJid','AddChatLabel','configService','buttons','repeat','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','jsonwebtoken','):\x20Deletando\x20mensagem','instance.','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','status','uazapiDeleteMessage','getFlow','profilePicture','.extension','messaging-history.set','groupdata.participants','\x1b[33m\x1b[1m','delete','error\x20get\x20vote','Número\x20não\x20possui\x20WhatsApp.','_year','Invalid\x20format','chats.upsert','\x20excess\x20IPv6\x20addresses.','logout','CONNECTION_UPDATE','expiration','Failed\x20to\x20prepare\x20media\x20message','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','created','updateFlowConfig','.type','choices','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','array','chats','#ff9484','color','imagechat','updateChatGroupData','LOG_COLOR','creds.json','getUniqueFlowName','connectToWhatsappController','instanceCount','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','protocolMessage','):\x20Limpando\x20AutomateSystem','):\x20teve\x20mudanças\x20chat.archived:\x20','getValidWhatsAppNumbers','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','contacts','transformScheduledMessagesByType','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','):Hash\x20to\x20image\x20name:\x20','content','$dbName','Retornando\x20grupos\x20SEM\x20cache','cwd','):Business\x20profile\x20fetched','getDevice','Usando\x20IP\x20existente:\x20','The\x20\x22','\x22\x20not\x20found','bateu\x20events','deleteReplyOption','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','READ','process','):\x20\x27Enviando\x20texto\x20para\x20\x27','copyBlock','updateProfileStatus','now','\x20tentativas.','Opção\x20Falsa\x20','promisify','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','toLocaleString','s.whatsapp.net','SECRET','request\x20body:\x20','):\x20Não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','telefone','CORS_CREDENTIALS','Internal\x20Server\x20Error','groupId','startFlow','optionDescription',')\x20já\x20foi\x20atingido.\x20Aplicação\x20permanecerá\x20parada\x20para\x20evitar\x20spam.','findContacts','messageLogs','_second','Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo','request\x20received\x20in\x20deleteConversation','delaySecMin','):\x20Conversa\x20atualizada\x20em\x20memória','CONECTADO\x20À\x20UAZAPI','.\x20Aguardando\x20','labels.edit','HistoryProcessed','pollCreationMessageV3','createAndSave','Instância:\x20','Unauthorized','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','):\x20Criando\x20fluxo...','Não\x20respondeu\x20com\x20a\x20enquete.','):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20','/instance','\x5cd+','stopMinutes','editflowgroup','all','request\x20received\x20in\x20editFlow','nativeFlowResponseMessage','STORE_MESSAGE','Bloco\x20com\x20ID\x20','object','jidDecode','child_process','waitingMenu_id','empty','}}\x20->\x20valor\x20não\x20encontrado','processingGroup','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','3529941gkxzHb','0123456789ABCDEF',',\x20saindo.','):Image\x20created','toString','when','header','redisEnv','Comando\x20desconhecido','contactHandle','label','delAll','updateProfilePicturePrivacy','GROUPS_UPDATE','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','pino','splice','\x1b[43m','groupUpdateDescription','findManyByIds','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','):\x20Entrou\x20na\x20função\x20processawaitSeconds','StartID:','authService','uazapi','Nenhum\x20participante\x20válido\x20encontrado.','deleteImportedChat','BufferJSON','address','viewOnceMessageV2','Erro\x20ao\x20remover\x20label\x20','Instance\x20Key\x20from\x20DB:','inner','jwt','variablesNotFound','#64c4ff','SUCCESS','Erro\x20ao\x20alterar\x20fluxo','):\x20whoCanEdit\x20before\x20validation:\x20','display_text','not_announcement','/instance/delete','title','myAppStateKeyId','updateGroupWebhook','leadInfo.','isCommunity','markMessageAsRead','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','createWebhook','):\x20Procurando\x20PRONTAS\x20mensagens\x20para\x20envio','Error\x20writing\x20file:\x20','replacer','/instance/create','):\x20Mensagens\x20PRONTAS\x20para\x20envio\x20encontradas:\x20','Tentativa\x20','ephemeralMessage','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','pt-BR','importChatsBatch','listIPv6Addresses','/wa-chats','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','request\x20received\x20in\x20updateAutoCompleteMessages','2209772WapsOE','updateMissingCustomFields','authorization','mediaSticker','Stack\x20trace:','Module\x20-\x20ON','generate','):\x20Editando\x20edição\x20do\x20fluxo...','segundos','attempts','processawaitSeconds','\x22,\x20valor\x20a\x20substituir:\x20\x22','Router','/config','fromMe','pop','spawn','Schema','subjectTime','updateMissingTags','enabled','\x1b[32m%s\x1b[0m','font','https://api.openai.com/v1/images/generations','/exit','/media/','\x20ao\x20chat\x20','request\x20received\x20in\x20getConversation','instance','checkAndRestartProcess','Error\x20updating\x20message\x20status:','buffer','processblock','vir','):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar','prepareMediaMessage','):\x20Aguardando\x205\x20segundos\x20antes\x20de\x20reconectar...','randomMac','groupToggleEphemeral','ip\x20-6\x20addr\x20del\x20','https://','VERBOSE','mimetype','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','blocks','sendWhatsAppAudio','Close\x20connection','sendMessageWithTypingButtons','envYaml','Erro\x20ao\x20deletar\x20a\x20conversa','groupMemberAddMode','replaceOne','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','):\x20this.client.authState.creds?.myAppStateKeyId:\x20','):\x20delete\x20=\x20true','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20','downloads','Erro\x20ao\x20editar\x20agentes','chatLog','chats.set','SEND_MESSAGE','presence','readMessageBot','PRIVKEY','\x20com\x20sucesso.','4568800aLorIW','.xlsx','-instances','Erro\x20ao\x20arquivar\x20chat','descOwner','https://uazapi-plugin.bubbleapps.io/?url=','?timestamp=','testIPv6','__esModule','\x20-i\x20','findWebhook','rows','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','loggedOut','@s.whatsapp.net','_activatedCount','stanzaId','messages.update','cpf','):Image\x20is\x20base64','subjectOwner','CacheContacts\x20database\x20connection\x20closed.','moreLogs','):Output\x20path:\x20','http://checkip.dyndns.org','):Delete\x20chat','COLOR','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','blockLogs','):\x20Conversa\x20está\x20expirada\x20-\x20voto','ScheduleMessage','reactionMessage','profile','add','Total\x20IPv6\x20addresses\x20detected:\x20','):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20','Chat\x20com\x20ID\x20','.\x20Nova\x20tentativa\x20em\x20','deleteBlock','promote','Cache-Control','USER','contextInfo','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','nomecompleto','webhookModel','lean','loadInstance','reorderBlocks','hex','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','stickerMessage','delayChatLabel','hosted','setWebhook','subject','Partes\x20do\x20domínio:','_pushName','keep-alive','announce','enviado\x20para','isJidBroadcast','groupRevokeInvite',',\x20valor\x20a\x20encontrar:\x20\x22','AddUserFlow','senderKeyDistributionMessage','readData','qrCode','not\x20loaded','networkInterface','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','EMAIL','connection.update','WARN','editflow','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','online','-whatsapp-api','removeInstance','fullName','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','whoCanEdit','LEVEL','normalizeMessage','):\x20Buscando\x20todos\x20os\x20fluxos...','):\x20Conversa\x20inserida\x20com\x20sucesso.','AUTHENTICATION_TYPE','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','):\x20Buscando\x20flow,\x20id:\x20','menu_options','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage','):\x20Bloco\x20com\x20ID\x20','nome','):\x20Entrou\x20na\x20função\x20clearVariables','done','number','isBusinessInstance','):\x20Criando\x20nova\x20conversa[createNewConversation]','admin_add','tags','_Messages','Message','Error\x20removing\x20unused\x20chat\x20fields:','convertToString','Enter\x20a\x20value\x20in\x20milliseconds','connectedName','application/octet-stream','authState','caption','height','\x20atualizado\x20com\x20sucesso.\x20Ação:\x20','pow','jid','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','fetchBusinessProfile','abs','setUpdate','collection','?authSource=admin&readPreference=primary&directConnection=true','updateGParticipate','\x1b[31m','decryptPollVote','https://v6.ident.me','/:instanceName','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','hasOwnProperty','AutomateSystem\x20não\x20foi\x20inicializado','lastCondition','):\x20Encontrado\x20próxima\x20mensagem\x20para\x20','reorderReplyOptions','refused','):\x20[messages.upsert]\x20mensagem\x20duplicada\x20ignorada','bodyString','#ffc5c7','2829678bVVnln','mongoose','All_Instances_Config','editFlowVariable','load','where','/instance/connectionState','groupBetterSetting','dayjs','SERVER_ACK','14aJipRt','long','TEL','lastUpdate','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','remove','trimmed','API\x20Key\x20inválida.','STORE','):Notifying\x20clients\x20for\x20chat:\x20','reconnectAttempts','backgroundColor','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','\x20minutos','groupSettingUpdate','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','DATABASE_CONNECTION_USER','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo','description','isBase64','IPv6\x20Prefix\x20detected:\x20','replaceVariablesChat','):\x20Query\x20params:\x20','descId','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida',',\x20valor\x20passado:\x20\x22','Validate','sendList','):\x20whoCanEdit\x20after\x20validation:\x20','):\x20Ignoring\x20group\x20messages.','Erro\x20ao\x20iniciar\x20fluxo:\x20','charAt','stopConversation','Error\x20finding\x20many\x20contacts:','base64','groupdata','scheduleNextCheck','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','dataValidate','STORE_CLEANING_TERMINAL','PLAYED','random','findAndReplaceRegex','archive','redis://127.0.0.1:6379','deleteOne','buttonText','findByIdAndUpdate','addBlock','/wa-qrcode','/instance/connect','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','findAll','latitude','StartBot','@broadcast','stdout','footerText','groupRequestParticipantsUpdate','crypto','deleteChat','updateChatWithMessage','listType','\x27...','getMessageModelForOwner','fileName','bulkWrite','Authentication\x20error','isInteger','statSync','processConditionsTest','allContacts','convertaudio','http','cleanDisconnectedInstances','timeout','Falha\x20ao\x20recriar\x20IPv6.','headers','replaceVariablesLogs','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','username','waInstances','groupValidate','\x20segundos\x20antes\x20de\x20reconectar...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','ephemeralDuration','writeData','remoteJid','):\x20isVote:\x20','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','https://api.openai.com/v1/audio/speech','LOG_LEVEL','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','):\x20[messaging-history.set]\x20mensagem\x20duplicada\x20ignorada\x20(ID:\x20','sendMessage','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence','toUpperCase','setNewValue','Subdomínio\x20não\x20encontrado','command','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','${Message\x20absent\x20from\x20node}','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','DELETED','listResponseMessage','qrcode','Valor\x20de\x20find\x20ou\x20replace\x20ausente','organization','@g.us','):\x20Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x20','delayChatLabel_MAX_RETRIES','ScheduleMessageModel','METHODS','\x0a*Você\x20respondeu*:\x0a','):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','/instance/fetchInstances','hbs','lastInteraction','isURL','\x1b[31m%s\x1b[0m','SERVER_TYPE','Sistema\x20atualizado\x20com\x20sucesso!','Reiniciando\x20a\x20aplicação...','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','reject','@newsletter','saveChatVariables','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','):\x20Rótulo\x20atualizado:\x20','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','responsavelid','getTime','):\x20Enviando\x20localização','_lastVote','repository','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','):\x20Entrou\x20na\x20função\x20saveReply','createSectionsFromValues','toISOString','Erro\x20inesperado\x20em\x20processvaredits:\x20','ip\x20-6\x20addr\x20show\x20scope\x20global\x20|\x20grep\x20-c\x20inet6','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','path','compression','processScheduleFlow','replaceVariablesInObject','envProcess','numbers','Error\x20testing\x20IP\x20with\x20','Instance\x20restarted','leadInfo.customFields','requestPairingCode','addToProcessedMessages','loadEnv','Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups','contact_blacklist','#d8e651','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','instanceName\x20not\x20provided.','authentication','sendDataWebhook','saveCreds','request\x20received\x20in\x20getFlow','dbSettings','chat\x20não\x20encontrado','Início','document','updateCustomFields','vote','scheduleFlow','./.git/config','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','\x1b[40m','slice','demote','stopMinutesMaxActives','DATABASE_CONNECTION_PASSWORD','integer','\x1b[36m','sendContact','messageContextInfo','create','):\x20updateResult:','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','replaceVariables','DATABASE_CONNECTION_HOST','groups_ignore','The\x20property\x20cannot\x20be\x20empty','cleanStore','creds','\x20minutos\x20verificará\x20novas\x20mensagens','getFullYear','linkPreview','):\x20Label\x20','URL','whatsappNumber','reference','#f64847','throwAndLogError','createHash','function','waUploadToServer','):Trying\x20to\x20get\x20business\x20profile','):\x20Editando\x20bloco...','):\x20Enviando\x20mídia','sendCommand','saveMediaToFile','Removing\x20excess\x20IPv6\x20address:\x20','DATABASE_CONNECTION_URI','processReadyMessages','Erro\x20ao\x20atualizar\x20o\x20flow.','\x20segundos','binary','flowName','ContactModel','findGroupInfos','CONNECTION','getReadyToSendMessages','node-cache','isRunning','waitingMenu_replyOptions','list3','qrcode-terminal','Servidor\x20de\x20autenticação\x20offline.\x20Tentativa\x20','longitude','getProfileName','displayName','Error\x20updating\x20cache\x20contact:','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','upperCase','initAuthCreds','Flow\x20iniciado','):\x20Grupo\x20','options','Last\x20message\x20not\x20found\x20for\x20number:\x20','wuid','\x1b[33m%s\x1b[0m','getBusinessProfile','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','default','toFile','request\x20received\x20in\x20updateCustomFields','Erro\x20ao\x20carregar\x20tentativas:','processvaredits','sharp','Database\x20update\x20result:','STATUS_INSTANCE','updateAll','startFlowWebhook','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','SendScheduleMessage','getAutomateSystem','labels.association','):Sending\x20audio\x20whatsapp','groups.update','redirect','includes','call','):Getting\x20image\x20from\x20url','saveTextReply','):\x20Limpando\x20delayMessage','onTime','Not\x20Found','initializeQueue','action','evaluateCondition','[TESTE\x20RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','request\x20received\x20in\x20getAutomateSystem','cachedContact','RemoteJid:','processPollUpdateMessage','imageMessage','exit','File\x20written\x20to\x20path:\x20','lastSend','Erro\x20ao\x20normalizar\x20a\x20mensagem:','8794fdizVN','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','DARK','apiResponse','.jwt','detectIPv6PrefixAndInterface','deleteConversation','):\x20transformedCustomFieldVariables','hGetAll','DEBUG','leaveGroup','exports','Mac\x20OS','set','/*.json','sendMenu','\x20horas\x20e\x20','name','processUazapi','isSuperAdmin','editFlowVaredit','exists','#d3a91f','updateConversation','contactMessage','response','downloadMediaMessage','KEY','lowerCase','makeCacheableSignalKeyStore','Erro\x20ao\x20salvar\x20tentativas:','updateProfilePicture','RemoveChatLabel','chatId','matchRegex','groupMetadata','single_select','result','updateReplyOption','deleteAllMessages','editMessagesInGroup','views','notas','editFlowCondition','restrict','updateBlock','substring','ERROR','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','remoteJids','Configured\x20new\x20IPv6:\x20','Erro\x20ao\x20tentar\x20autoCompleteMessages','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','phoneNumber','Sem\x20permissão\x20para\x20enviar\x20para\x20esse\x20grupo','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','notEmpty','https://chat.whatsapp.com/','isJidGroup','replaceValue','audio','Erro\x20ao\x20atualizar\x20conversa:\x20','stopIfLastReturnedError','sendPoll','url','#9ba6ff','27071118TLOdHu','Atualização:\x20','everyOne','variablesToObject','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','auth','singleSelectReply','HH:mm:ss','state','findIndex','Garbage\x20collection\x20não\x20está\x20disponível.','findGroupInfo','g.us','unlinkSync','proxy:\x20','false','SERVER_PORT','writeFileSync','arraybuffer','messages','Data\x20inválida\x20fornecida','/wa-all-message','updateGParticipant','Message\x20absent\x20from\x20node','sendMessageAck','updateMediaMessage','/automate','count','fromObject','\x27\x20removido\x20do\x20AutomateSystem.','Error\x20in\x20chatModify\x20for\x20number\x20','InstancesAlterarTodas','upsertedCount','router','\x20minutos...','):\x20Enviando\x20enquete','Mensagem\x20perdida,\x20não\x20foi\x20possível\x20descriptografá-la,\x20abra\x20o\x20WhatsApp\x20no\x20seu\x20celular\x20para\x20visualizá-la','forEach','isListOfNumbers','Erro\x20ao\x20buscar\x20fluxos:','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','):\x20Comando\x20desconhecido:\x20','userDevicesCache','api','getOwnPropertyNames','apikey','headerString','insertCount','):\x20Entrou\x20na\x20função\x20stop','unavailable','addMessagesToGroup','\x20:\x20','fetchLabels','agents','toggleEphemeral','Connection\x20Closed','chats.update','start','stopped','chats.delete','json','lastReceivedMessage','notContains','startID',',\x20received\x20','messageLogsModel','SSL_CONF_PRIVKEY','Erro\x20ao\x20atualizar\x20agendamento\x20','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','generateRandomIPv6','MESSAGES_UPDATE','):\x20\x27Enviando\x20audio\x20para\x20\x27','axios','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','resetReconnectionVariables','formatStatusMessage','Erro\x20ao\x20criar\x20fluxo','pollErrorMessage','dbConnection','Erro\x20ao\x20executar\x20bulkWrite:','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','presenceSubscribe','use','class-validator','setting','groupJid','value','request\x20received\x20in\x20deleteAllMessages','\x22\x20-\x20NOT\x20CONNECTION','app','.\x20Pulando.','mongodb://','muteEndTime','processedMessagesCache','/wa-presence','groupSetting','\x1b[36m%s\x1b[0m','Font\x20is\x20required','Conexão\x20estabelecida','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','getAllData','output','quotedMessage','):\x20Error\x20processing\x20conditions:\x20','c.us','put','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','request_time','deleteAll','PASSWORD','.url','participant','recording','buttonsResponseMessage','\x1b[37m%s\x1b[0m','message_normalized','min','mkdirSync','jpegThumbnail','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','):\x20debug\x20alterando\x20this.AutomateSystem','sleep','getLabelModelForOwner','groupGetInviteInfo','LOG','exec','/media','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','Error\x20while\x20deleting\x20message\x20for\x20everyone','AUTHENTICATION_JWT_EXPIRIN_IN','deleteFlow','sim','activatedCount','createClient','createIPv6','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','groups.upsert','findGroupsEspecial','hosted.lid','content-type','post','warn','locationMessage','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','importChatsAntigo','URI','#ffffff','editFlow','instanceKeys','from','_ScheduleMessages','finish','webhookService','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','Not\x20allowed\x20by\x20CORS','NextBlock','Subscribed\x20Events:','):Type\x20defined\x20as\x20audio','/group','authModel',',\x20Segundo\x20Valor:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','https://jsonip.com','\x20foi\x20interrompido\x20pelo\x20usuário.','stateConnection','\x1b[44m','231DFewsj','joinGroup','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','):\x20Aguardando\x205\x20segundos\x20para\x20garantir\x20interrupção\x20completa...','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','sendStatus','expression','Novo\x20IP\x20criado:\x20','groups','map','createNewConversation','messageId','updateMissingEtiquetas','string','and','Para\x20reiniciar\x20as\x20tentativas,\x20delete\x20o\x20arquivo\x20license_attempts.json','isBusiness','errors','eventHandler','addReplyOption','less','prototype','test','sharePass','_Labels','util','findAndUpdateCacheContact','getMessage','pollCreationMessageKey','normalizeMessageContent','\x1b[0m','triedToSend','processgoToFlow','apirequest','configureIPv6','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','getClient','#92ceac','contains','/webhook','delayChatLabel_RETRY_DELAY_MS','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','Subdomínio\x20extraído\x20da\x20URL:','updateStopChat','instanceInfo','#fed428',',\x20fará\x20nova\x20verificação\x20em\x20','fetchContacts','Database\x20is\x20not\x20enabled','has','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','bodyStringErrorParse','setHeader','updateOneById','conditions','):\x20Enviando\x20mensagem\x20para\x20','getConversationModelForOwner','desc','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','approve','Ambiente\x20Docker\x20detectado\x20-\x20sistema\x20anti-spam\x20desabilitado','Instâncias\x20removidas:\x20','sendMessageWithTyping','):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20','bearer','\x0aitem','GUARD','request\x20received\x20in\x20createFlow','requestFile','uuid','.png','/wa-message','etiquetas','createButtonsFromValues','pairingCode','success','waMonitor','mentions','addresss','flush','deleted','newStoppedUntil','#00a1f2','dbServer','leadInfo.desativadoFluxoAte','match','Fluxo\x20agendado\x20pelo\x20fluxo\x20','unreadcount','blockId','format','getContactModelForOwner','uazapiSendMedia','sign','stack','boolean','isJWT','sections','relayMessage','src','HistoryProcessed\x20definido\x20como\x20true\x20após\x202\x20minutos.','importChats','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','namespace','Selecione','.xls','\x27\x20não\x20encontrado\x20na\x20memória','upsertChats','countIPv6Addresses','):\x20enviado\x20para\x20[','):\x20Criando\x20fluxo\x20compartilhado...','Falha\x20ao\x20criar\x20IPv6.','stopWhenYouSendMsg','fetchProfilePictureUrl','enumerable','atendimentoAberto','flowConfig','retrySendMessage','\x1b[32m','variables','fetchProfilePicture','createConnection',',\x20Novo\x20tamanho:\x20','.fileUrl','deleteMessage','audioWhatsapp','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','\x27\x20não\x20encontrado','pre','groupDesc','Erro\x20desconhecido\x20ao\x20tentar\x20enviar\x20mensagem\x20para\x20o\x20grupo','DELIVERY_ACK','limit','out','toDataURL','archived','imported','entries','lastAttempt','REDIS','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','quoted','length','groupJoinApprovalMode','licenca','rowId','data','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','Connection\x20closed\x20for\x20instance:\x20','scheduleSendMedia','padStart','media','):\x20\x27Deletando\x20fluxo,\x20id:\x20','):\x20Usando\x20extensão\x20padrão:\x20','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','changeVariables','findOne','round','messageStubParameters','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','\x20minutos.\x20Será\x20às\x20','editFlowReply','getScheduleMessage','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','docker','connectionState','findAndReplace','trim','video','cacheContact','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','split','findConversation','config','info','uncaughtException','awaitSeconds','ignoreGroups','DD/MM\x20HH:mm:ss','pollCreationMessageV2','MAX_SAFE_INTEGER','createOrUpdate','request\x20received\x20in\x20updateFlowConfig','listen','):\x20Current\x20Time:\x20','ff:fe','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','app-state-sync-key','message','The\x20global\x20api\x20key\x20must\x20be\x20set','saveConversationToDatabase','urlencoded','ListMessage','1170216TjwyfK','deletedCount','isCommunityAnnounce','detail','vcard','DOCKER_ENV','flow','API_KEY','#000000','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','scheduleSendText','imgUrl','Erro\x20ao\x20buscar\x20conversas','CHATS_UPSERT','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','[AUTH]\x20Database\x20is\x20not\x20enabled','conversation','lastFetchAwaitingApproval','connecting','qrcode.updated','inviteCodeDetails','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','node-mime-types','customFields','templateButtonReplyMessage','delayMessage','parse','extractRegex','every','replyOptions','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','request\x20received\x20in\x20deleteFlow','readFileSync','Type\x20is\x20required','RECONNECT_TIME_FRAME','_day','groupName','Telefone:\x20','image','groupParticipantsUpdate','closeExistingConversations','extractPhoneNumber','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','secondValue','\x20is\x20already\x20in\x20use.','extractMessageContent','):\x20Fluxo\x20\x27','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','\x1b[34m%s\x1b[0m','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','user','INFO','sendMessageWithRetry','groupHandler','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','webp','videoMessage','):Fetching\x20business\x20profile','sha256','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','toBrazilianNumberFormat','audioMessage','mongodb','useMultiFileAuthState','.docx','Botão\x202','https://uazapi-plugin.bubbleapps.io/','catch','Bad\x20Request','uazapiSendMenu','digest','silent','some','Nenhum\x20chat\x20encontrado\x20para\x20editar.','groupadd','processclearVariables','getContentType','):Error\x20in\x20converting\x20audio','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','CONTACTS_SET','Deletion\x20failed','Rótulo\x20deletado:\x27,\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants','menuMessage','insert','queue','createButtonSectionsFromValues','getSeconds','):Processing\x20audio','DisconnectReason','Adicionando\x20novo\x20participante:\x20','createConversationforgoToFlow','client','varedit','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','removed','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','rm\x20-rf\x20','ini','Missing\x20global\x20api\x20key','scheduled','setContext','greater','QRCODE_UPDATED','cleanupExcessiveIPs','global','readFile','noConnection','Error\x20removing\x20IPv6\x20address:\x20','startCommandWord','replyOption','evaluateConditionTest','Fluxo\x20\x27','\x20depois\x20','badSession','CLEANING_INTERVAL','capitalizedWords','.doc','ObjectId','ReplyOption\x20com\x20ID\x20','author','express','Contador\x20de\x20tentativas\x20resetado.','conversationTimestamp','isConnected','presence.update','fileLength','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','padEnd','getflow','fetchPrivacySettings','DATABASE_ENABLED','Erro\x20ao\x20deletar\x20mensagens:','firstValue','):\x20Deletando\x20conversa...','#ffae04','reviver','convertToWebP','statusJidList','):\x20conversation.status:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact','):\x20Procurando\x20conversa','viewOnceMessage','CORS_METHODS','findByIdAndDelete','connectedClient','selectableCount','_p_','Timeout\x20exceeded','EXPIRIN_IN','selectedId','Content-Type','mediaKey','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','push','dbInstance','reorderMessages','revokeInviteCode','CREDENTIALS','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','model','editflowvariable','STORE_CHATS','birthtime','../env.yml','https://ipv6.jsonip.com','group','Esse\x20fluxo\x20não\x20permite\x20importação.','getChatModelForOwner','listMessage','locked','SERVER','verifiedName','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','findGroup','):Audio\x20converted\x20and\x20stored\x20in\x20cache','#83e421','selectedButtonId','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','preview','selectedRowId','_id','audio/ogg','body','truncatedtoEnd','idSchedule','Máximo\x20de\x20tentativas\x20(','scheduleSendAudio','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','Group\x20not\x20found','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','server','CORS','.X-ABLabel:Celular\x0a','):\x20Iniciando\x20processo\x20de\x20deleção...','valid','fetchChats','website','):\x20Buscando\x20flow...','editScheduleMessage','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','^\x5cd+','uazapiSendAudio','loadWebhook','TYPE','.mp3','admin','synchronizeAndMapFlows','getMonth','pushName','\x20do\x20chat\x20','DATABASE','EMAIL:','picture','get','CONTACTS_UPSERT','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','release','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','timeoutPromise','editConversation','AUTHENTICATION_JWT_SECRET','toLowerCase','pictureUrl','):\x20Flow\x20\x27','readreceipts','instances','generateHash','):\x20Flow\x20desativado','lastSendMessage','Instância\x20não\x20encontrada.','getVariablesChat','goNextblock','unhandledRejection','mentioned','findFlow','Fluxo\x20não\x20encontrado\x20na\x20memória.','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','):\x20nextBlock.uazapi.name','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','findOrCreate','):Image\x20is\x20url','LabelModel','\x22reaction\x22\x20must\x20be\x20an\x20emoji','\x0a{\x20instance:\x20','):\x20Atualizando\x20status\x20da\x20mensagem\x20','\x5c$&','block','):\x20newSecondValue\x20após\x20replaceVariables:','.txt','Instance\x20deleted','instancias:\x20','Request\x20Body:','send.message','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','notify','goToFlow','Flow\x20iniciado\x20com\x20','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','findChats','Instance\x20logged\x20out','):\x20Entrou\x20na\x20função\x20scheduleFlow','applyvaredit','last_update','Database\x20connection\x20closed.','):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27','verify','basename','off','formatBRNumber','deleteDoneMessages','getScheduleMessageModelForOwner','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','statusCode','GROUP_PARTICIPANTS_UPDATE','_month','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','reduce','Falta\x20informação\x20para\x20a\x20chamada\x20API','connect','fetchConversation','Instance\x20ID:','console','connectionStatus','):\x20Enviando\x20áudio','MESSAGES_UPSERT','StatusJidList\x20is\x20required','startCommand','getHours','convert','floor','autoCompleteMessages','find','apiName','ephemeralExpiration','\x20contacts','Falhou\x20ao\x20encontrar\x20chat\x20','/events','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','updateGroupPicture','):\x20Entrou\x20na\x20função\x20goToFlow','Erro\x20ao\x20buscar\x20o\x20fluxo','request\x20received\x20in\x20starFlow','reconnectTimestamps','REDIS_ENABLED','waitingForReplyMenu','AUTHENTICATION','updateMany','formatVCard','.pdf','reaction','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','privacySettings','Last\x20message\x20not\x20found','_fromMe','whoCanUse','updateGroupsAddPrivacy','cacheContactModel','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','application/json','processApiRequest','env','interval\x20não\x20é\x20um\x20número','minutesToClose','):\x20[messages.update]\x20group\x20ignored','endSession','audio/ogg;\x20codecs=opus','keyPattern','collections','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','randomBytes','cleaningUp','varedits','joinApprovalMode','env.KEY\x20!==\x20key','):Converted\x20image\x20deleted','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','pendingMessages','writeFile','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','composing','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','verbose','fetchMessages','createFlow','utf-8','chatModify','localWebhook','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','timeInMinutes','archiveChat','flowConversation','contactsArrayMessage','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','Removed\x20','editflowcondition','folder','DB_PREFIX_NAME','oldToken','editChat','deleteMany','max','messages.upsert','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','^\x5cd+([-]\x5cd+)*@g.us$','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','):\x20Bloco\x20original\x20para\x20cópia:\x20','request\x20received\x20in\x20updateAgent','startsWith','3EB0','truncatedto','\x20tentativas.\x20Aplicação\x20permanecerá\x20parada\x20para\x20evitar\x20spam.','indexOf','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','flowActive','PRESENCE_UPDATE','Erro\x20ao\x20importar\x20chats','desativadoFluxoAte','isMessageProcessed','mediatype','removeData','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','):\x20Buscando\x20conversas...','option','\x1b[37m','):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20','50mb','updateAgent','Reusing\x20existing\x20IPv6:\x20','js-yaml','):\x20Criou\x20conversa\x20no\x20startFlow','@whiskeysockets/baileys','CHATS_UPDATE','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture',',\x20canSendMessage:\x20','updatePresence','--------------------------------------','*Teste\x20de\x20Título*\x0a\x0aDescrição\x20de\x20Teste\x0a','inviteCode','/5\x20falhou:\x20','ipv6Prefix','poll','contacts.update','AutomateSystem','type','OrAnd','list','toArray','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','fetchInstances','error_log','):\x20alterando\x20this.AutomateSystem','Partes\x20do\x20caminho\x20FULLCHAIN:','fileUrl','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','/message','oldValue','Instance\x20\x22','editOperator','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','announcement','convertedOptions','Número:\x20','):\x20Instancia\x20isBusiness:\x20','):Temp\x20image\x20deleted','Erro\x20ao\x20tentar\x20updateCustomFields','E-mail:\x20','Error\x20fetching\x20and\x20updating\x20profile:\x20','sem\x20texto\x20na\x20mensagem','getBase64FromMediaMessage','\x20}\x0a','@redis/client','ON\x20-\x20dbName:\x20','lastMessage','ip\x20-6\x20addr\x20show\x20dev\x20','storePath','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens','Erro\x20na\x20função\x20updateChatWithMessage:\x20','params','ip6eui','values','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','context','FlowController','replace','webhook','WebhookGlobal','size','isValidIPv6Config','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','shareOwners','pollUpdateMessage','delay','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings',',\x20Minutes\x20to\x20Close:\x20','condition','https://api64.ipify.org?format=json','\x20-y','messageSecret','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','sendAudio','sendReaction','messageHandle','):Desconectado,\x20parando\x20execução.','none','Falha\x20ao\x20processar\x20fetchBusinessProfile','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','cacheInstanceModel','open','Grupo\x20não\x20encontrado','textMessage','contact','webhookMap','\x20mensagens\x20de\x20','MESSAGES_SET','findOneAndUpdate','_error','updateOne','Mensagem\x20não\x20suportada','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','.webm','cachedData-whatsapp','closed','\x20não\x20encontrado\x20para\x20atualização.','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','urlOrBase64','findParticipants','Generated\x20IPv6:\x20','Falha\x20após\x205\x20tentativas:\x20','canSendMessage','ERROR:\x20','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','createInstance','waitingMenu_ExpiredMessage','existsSync','flowStopConversation','Types','\x20instance\x20does\x20not\x20exist','request\x20received\x20in\x20scheduleMessage','status@broadcast','sort','Erro\x20ao\x20copiar\x20o\x20documento','unreadCount','awaitingApproval','editFlowGroup','key','addChatLabel','endsWith','findById','assign','mediaMessage','updatePrivacySettings','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','groupRequestParticipantsList','uazapiSendLocation','stringify','data:\x20','allflows','routerPath','):\x20','editFlowBlock','error','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','CONTACTS_UPDATE','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','profilePictureUrl','No\x20excess\x20IPv6\x20addresses\x20to\x20remove.','):\x20Enviando\x20contato','messageTimestamp','\x1b[1m','API\x20Key\x20from\x20Request:','undefined','selectedOptions','):\x20Editando\x20grupo\x20do\x20fluxo...','@ffmpeg-installer/ffmpeg','PRODUCT_LIST','PREFIX_KEY','redis','):Image\x20path:\x20','interactiveResponseMessage','.mimetype','maxActives','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','removeProfilePicture','Fluxo\x20id\x20\x27','sendSticker','/wa-contacts','code','allFlows','Parando\x20aplicação,\x20atualização\x20recebida','\x20não\x20encontrado\x20para\x20cópia','}}\x20->\x20\x22','uazapiSendContact','leadInfo','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','restart','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','eventEmitter','express-async-errors','SERVER_OFFLINE','creation','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','dark','method','fetchProfile','Erro\x20ao\x20editar\x20a\x20conversa','instanceName','buttonMessage','Connection','):\x20Não\x20achou\x20nenhum\x20flow','deviceSentMessage','PORT','Log\x20out\x20instance:\x20','!cmd_','join','.\x20Tentando\x20novamente\x20em\x20','https://github.com/uazapi/uazapi.git','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','Deleted\x20','chat','):\x20newFirstValue\x20após\x20replaceVariables:','Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27','Erro\x20ao\x20atualizar\x20o\x20fluxo:','):\x20whoCanUse\x20before\x20validation:\x20','updateAutoCompleteMessages','):\x20leadInfoVariables','findGroups','query','This\x20name\x20','_minute','\x1b[30m','sectionsToString','HOST','IP\x20confirmed:\x20','Erro\x20ao\x20iniciar\x20o\x20fluxo.','getPrototypeOf','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','footer','msgRetryCounterCache','validate','findMessages','/64\x20dev\x20'];a0_0x9c33=function(){return _0x4c60d1;};return a0_0x9c33();}wa[a0_0x11d42e(0x56c)]('save',function(_0x35e632){const _0x25cc5e=a0_0x11d42e;delete this[_0x25cc5e(0x72a)],delete this['flowIgnoreGroups'],delete this['flowPrefixCommand'],delete this[_0x25cc5e(0x7a5)],delete this['flowStopMinutes'],_0x35e632();});var ya=T?.[a0_0x11d42e(0x650)](vs['name'],wa,a0_0x11d42e(0x772)),P=require(a0_0x11d42e(0x2de)),Es=require(a0_0x11d42e(0x532)),Qe=class{},Ns=class{},Sa=new P['Schema']({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),$s=new P['Schema']({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),go=new P['Schema']({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x11d42e(0x74a)},'footerText':{'type':String},'buttonText':{'type':String,'default':'Selecione'},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'pollErrorMessage':{'type':String,'default':'Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.'},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),Ma=new P[(a0_0x11d42e(0x224))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),mo=new P[(a0_0x11d42e(0x224))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),fo=new P[(a0_0x11d42e(0x224))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),As=new P[(a0_0x11d42e(0x224))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),wo=new P[(a0_0x11d42e(0x224))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),Ca=new P['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':go},'apirequest':mo,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':wo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),va=new P[(a0_0x11d42e(0x224))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Ea=new P[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[As],'blocks':[Ca],'groups':[Sa],'conditions':[Ma],'varedits':[va],'replyOptions':{'type':[$s],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x252e26=a0_0x11d42e;return _0x252e26(0x7f3)+Math[_0x252e26(0x311)]()[_0x252e26(0x1d7)](0x24)['slice'](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x11d42e(0x454)},'startID':{'type':String,'default':()=>(0x0,Es['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Es['v4'])()},'shareOwners':{'type':[String],'default':[]}});Ea[a0_0x11d42e(0x56c)](a0_0x11d42e(0x791),function(_0x12c9da){const _0x259af7=a0_0x11d42e;let _0x5a8994=this[_0x259af7(0x88f)]();if(_0x5a8994&&typeof _0x5a8994==_0x259af7(0x1cb)&&_0x259af7(0x812)in _0x5a8994){let _0x3ba1c3=_0x5a8994['$set'];if(_0x3ba1c3){let _0x2d5ffb=new Set(),_0x785ef8=new Set(_0x3ba1c3[_0x259af7(0x563)]?.[_0x259af7(0x4f6)](_0x58fc84=>_0x58fc84[_0x259af7(0x414)])),_0x10273f=JSON[_0x259af7(0x7b9)](_0x3ba1c3),_0x4bc842=/{{(?!_)([^}]*)}}/g,_0x3e3bcb;for(;(_0x3e3bcb=_0x4bc842[_0x259af7(0x4c4)](_0x10273f))!==null;)_0x785ef8[_0x259af7(0x51e)](_0x3e3bcb[0x1])||_0x2d5ffb[_0x259af7(0x277)](_0x3e3bcb[0x1]);_0x2d5ffb[_0x259af7(0x774)]>0x0?(console[_0x259af7(0x4d4)]('Variáveis\x20não\x20encontradas:',Array[_0x259af7(0x4dc)](_0x2d5ffb)),_0x3ba1c3[_0x259af7(0x1f5)]=Array[_0x259af7(0x4dc)](_0x2d5ffb)):_0x3ba1c3[_0x259af7(0x1f5)]=[],this[_0x259af7(0x2cb)]({'$set':_0x3ba1c3});}}_0x12c9da();});var ve=T?.[a0_0x11d42e(0x650)](Ns[a0_0x11d42e(0x414)],Ea,'allFlows'),yo=new P[(a0_0x11d42e(0x224))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[As],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[fo]},{'_id':!0x1}),bo=new P[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[As],'blocks':[Ca],'groups':[Sa],'conditions':[Ma],'varedits':[va],'replyOptions':{'type':[$s],'default':[]},'chatLog':yo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x11d42e(0x78a)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'waitingMenu_replyOptions':{'type':[$s],'default':[]}}),Na=_0x1a477b=>{const _0x46763f=a0_0x11d42e;let _0x105e90='z_'+_0x1a477b+'_FlowHistorico';return T?.[_0x46763f(0x650)](_0x46763f(0x82d),bo,_0x105e90);},So=new P['Schema']({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ba=new P[(a0_0x11d42e(0x224))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),Mo=new P[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[ba],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':'scheduled'},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[So],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':ba,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),$a=_0x5474dd=>{const _0x5f3d63=a0_0x11d42e;let _0x3f7450='z_'+_0x5474dd+_0x5f3d63(0x4dd);return T?.['model'](_0x5f3d63(0x358),Mo,_0x3f7450);},Rs=class{},Co=new P[(a0_0x11d42e(0x224))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),vo=new P[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Eo=new P[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),No=new P[(a0_0x11d42e(0x224))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x11d42e(0x871)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),$o=new P['Schema']({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Ro=new P[(a0_0x11d42e(0x224))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[$o]},'customFields':{'type':[Eo]},'flowConfig':{'type':No,'default':{}},'flows':{'type':[vo],'default':[]},'autoCompleteMessages':{'type':[Co],'default':[]}}),Oe=T?.[a0_0x11d42e(0x650)](Rs[a0_0x11d42e(0x414)],Ro,a0_0x11d42e(0x747)),Ra=require(a0_0x11d42e(0x2de)),Ao=new Ra[(a0_0x11d42e(0x224))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Aa=_0x27827e=>{const _0x551cf0=a0_0x11d42e;let _0x565dc1='z_'+_0x27827e+_0x551cf0(0x505);return T?.[_0x551cf0(0x650)](_0x551cf0(0x6a4),Ao,_0x565dc1);},O=class{constructor(_0x558d48){const _0x2d2892=a0_0x11d42e;this[_0x2d2892(0x390)]=_0x558d48[_0x2d2892(0x686)](_0x2d2892(0x683));}};function A(_0x23f5a1){const _0x4b706f=a0_0x11d42e;let _0x1d4c54={};for(let [_0x53e245,_0x1a3af9]of Object[_0x4b706f(0x575)](_0x23f5a1))if(typeof _0x1a3af9=='object'&&!Array[_0x4b706f(0x81f)](_0x1a3af9)){for(let [_0x3a9b0d,_0x5f5ba1]of Object['entries'](_0x1a3af9))_0x1d4c54[_0x53e245+'.'+_0x3a9b0d]=_0x5f5ba1;}else _0x1d4c54[_0x53e245]=_0x1a3af9;return _0x1d4c54;}var Ye=class{constructor(_0x308531,_0x4dd4b6,_0x334829,_0x33fced,_0x4779c9,_0x28001f,_0x42e505,_0x715839,_0x46dc8c,_0x308a27,_0x17ab37,_0x4af305,_0x1c3103,_0x1fdf38){const _0x4fbcb5=a0_0x11d42e;this[_0x4fbcb5(0x5a8)]=_0x308531,this[_0x4fbcb5(0x7fa)]=_0x4dd4b6,this['contact']=_0x334829,this[_0x4fbcb5(0x595)]=_0x33fced,this['messageLogs']=_0x4779c9,this[_0x4fbcb5(0x772)]=_0x28001f,this['auth']=_0x42e505,this[_0x4fbcb5(0x22f)]=_0x715839,this[_0x4fbcb5(0x5b3)]=_0x46dc8c,this[_0x4fbcb5(0x713)]=_0x308a27,this['label']=_0x17ab37,this['scheduleMessage']=_0x4af305,this[_0x4fbcb5(0x82f)]=_0x1c3103,this['dbClient']=_0x1fdf38;}get[a0_0x11d42e(0x540)](){const _0x4ba970=a0_0x11d42e;return this[_0x4ba970(0x137)];}},Xe=class{},Ze=class extends O{['getMessageModelForOwner'](_0x4084c1){return ha(_0x4084c1);}async[a0_0x11d42e(0x604)](_0x29aeaa,_0x3f07a1){const _0xcc4fa=a0_0x11d42e;if(_0x29aeaa['length']===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0xcc4fa(0x328)](_0x3f07a1)['insertMany']([..._0x29aeaa]))[_0xcc4fa(0x57a)]};}catch(_0x26c6c9){return _0x26c6c9;}}async[a0_0x11d42e(0x6d7)](_0x2b2d94,_0x5dde3b){const _0x3e9ed9=a0_0x11d42e;try{let _0x2d93b2=this[_0x3e9ed9(0x328)](_0x5dde3b),_0x2f5ad3=A(_0x2b2d94[_0x3e9ed9(0x2e2)]);return await _0x2d93b2['find'](_0x2f5ad3)[_0x3e9ed9(0x7aa)]({'messageTimestamp':-0x1})[_0x3e9ed9(0x570)](_0x2b2d94?.['limit']??0x0)[_0x3e9ed9(0x285)]();}catch{return[];}}async[a0_0x11d42e(0x165)](_0x56d95b,_0xed6eae){const _0x5ebf3b=a0_0x11d42e;try{let _0x1a2d71=this[_0x5ebf3b(0x328)](_0xed6eae),_0x17ee85=A(_0x56d95b[_0x5ebf3b(0x2e2)]);await _0x1a2d71[_0x5ebf3b(0x71c)](_0x17ee85);}catch(_0x37deda){console[_0x5ebf3b(0x7bf)](_0x37deda);}}async[a0_0x11d42e(0x8ad)](_0x598a46,_0x27dcae,_0x1ab08e){const _0x5e6b6f=a0_0x11d42e;try{let _0x12b32c=this[_0x5e6b6f(0x328)](_0x1ab08e),_0x5a318c=A(_0x598a46[_0x5e6b6f(0x2e2)]);return await _0x12b32c[_0x5e6b6f(0x791)](_0x5a318c,{'$set':_0x27dcae},{'new':!0x0});}catch(_0x25f2dd){throw console['error'](_0x25f2dd),_0x25f2dd;}}async[a0_0x11d42e(0x849)](_0x528afe,_0x4803e9){const _0xc27b60=a0_0x11d42e;if(_0x528afe[_0xc27b60(0x57a)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0xc27b60(0x328)](_0x4803e9)[_0xc27b60(0x849)]([..._0x528afe]))[_0xc27b60(0x57a)]};}catch(_0x30ddef){return console[_0xc27b60(0x86e)](_0xc27b60(0x7a0),_0x30ddef),_0x30ddef;}}async[a0_0x11d42e(0x4b2)](_0x268142){const _0x2402aa=a0_0x11d42e;try{return await this[_0x2402aa(0x328)](_0x268142)['collection'][_0x2402aa(0x856)](),{'success':!0x0};}catch(_0x129e58){return console[_0x2402aa(0x7bf)](_0x129e58),{'success':!0x1,'error':_0x129e58};}}},Us=I(require(a0_0x11d42e(0x7cc))),w=I(require(a0_0x11d42e(0x73b))),Je=require('fs'),j=I(require('path')),K=I(require(a0_0x11d42e(0x48e))),Di=require(a0_0x11d42e(0x532)),ki=I(require(a0_0x11d42e(0x352))),Li=I(require(a0_0x11d42e(0x3cc))),Ta=[a0_0x11d42e(0x3fe),'documentMessage',a0_0x11d42e(0x5ed),a0_0x11d42e(0x5e8),a0_0x11d42e(0x28a)],Ia=[a0_0x11d42e(0x20b),a0_0x11d42e(0x8a0),a0_0x11d42e(0x63e),a0_0x11d42e(0x1f0)],js=require('os'),Jt=I(require(a0_0x11d42e(0x1e2))),qe=require('child_process'),Fi=require(a0_0x11d42e(0x5c3)),he=I(require(a0_0x11d42e(0x2de))),J=require('class-validator'),le=class{constructor(_0x32c61d,_0x3ce398,_0x51a531){const _0x2ba6ac=a0_0x11d42e;this[_0x2ba6ac(0x2c7)]=_0x32c61d,this[_0x2ba6ac(0x418)]=_0x3ce398,this['name']=_0x51a531;}},et=class{},tt=class{},xe=class{},st=class{},at=class{},Ee=class{},it=class{},ot=class{},rt=class{},nt=class{},kt=I(require(a0_0x11d42e(0x629))),_a=require('fs'),Oa=require('path');async function Pe(_0x24a341){const _0x2befd4=a0_0x11d42e;let _0x2552ec=B[_0x2befd4(0x339)][_0x24a341];if(L[_0x2befd4(0x84f)]){let _0x1cd739=T[_0x2befd4(0x511)]()['db'](L[_0x2befd4(0x3c6)]['DB_PREFIX_NAME']+_0x2befd4(0x257))[_0x2befd4(0x2cc)](_0x24a341);return _0x2552ec||(await _0x1cd739['find']({})[_0x2befd4(0x74b)]())['length']>0x0;}return _0x2552ec||(0x0,_a[_0x2befd4(0x7a4)])((0x0,Oa[_0x2befd4(0x7f4)])(Me,_0x24a341));}async function xa(_0x11f2e0,_0x391de9,_0x5e928f){const _0x10f6e6=a0_0x11d42e;if(_0x11f2e0['originalUrl'][_0x10f6e6(0x3ef)]('/instance/create')||_0x11f2e0[_0x10f6e6(0x81c)]['includes'](_0x10f6e6(0x35d))||_0x11f2e0['originalUrl']['includes'](_0x10f6e6(0x22b))||_0x11f2e0[_0x10f6e6(0x81c)][_0x10f6e6(0x3ef)]('/config')||_0x11f2e0['originalUrl'][_0x10f6e6(0x3ef)](_0x10f6e6(0x31a))||_0x11f2e0[_0x10f6e6(0x81c)]['includes'](_0x10f6e6(0x2e3))||_0x11f2e0[_0x10f6e6(0x81c)][_0x10f6e6(0x3ef)](_0x10f6e6(0x1fc)))return _0x5e928f();let _0x577ae1=_0x11f2e0[_0x10f6e6(0x76b)];if(!_0x577ae1?.[_0x10f6e6(0x7ec)])throw new m(_0x10f6e6(0x38b));if(!await Pe(_0x577ae1['instanceName']))throw new U('The\x20'+_0x577ae1[_0x10f6e6(0x7ec)]+_0x10f6e6(0x7a7));_0x5e928f();}async function Pa(_0xb0d3fb,_0x31ce9c,_0x4626eb){const _0x594679=a0_0x11d42e;if(_0xb0d3fb[_0x594679(0x81c)][_0x594679(0x3ef)](_0x594679(0x208))){let _0x16be89=_0xb0d3fb[_0x594679(0x667)];if(await Pe(_0x16be89[_0x594679(0x7ec)]))throw new X(_0x594679(0x803)+_0x16be89[_0x594679(0x7ec)]+_0x594679(0x5d9));B[_0x594679(0x339)][_0x16be89['instanceName']]&&delete B[_0x594679(0x339)][_0x16be89[_0x594679(0x7ec)]];}_0x4626eb();}var Da=require(a0_0x11d42e(0x499)),ka=I(require(a0_0x11d42e(0x159))),ct=a0_0x11d42e(0x1eb),Io=new R(a0_0x11d42e(0x52f));async function _o(_0x336e09,_0x1b1e84,_0x2294e0){const _0x494edf=a0_0x11d42e;let _0x1397b0=_0x336e09[_0x494edf(0x686)](_0x494edf(0x472));if(_0x1397b0&&S['get'](_0x494edf(0x6e5))[_0x494edf(0x5b4)][_0x494edf(0x41e)]!==_0x1397b0)throw new ae();if(S['get'](_0x494edf(0x6e5))['API_KEY'][_0x494edf(0x41e)]===_0x1397b0)return _0x2294e0();if((_0x336e09['originalUrl'][_0x494edf(0x3ef)](_0x494edf(0x208))||_0x336e09['originalUrl'][_0x494edf(0x3ef)](_0x494edf(0x35d)))&&!_0x1397b0)throw new X(_0x494edf(0x613),_0x494edf(0x5a9));let _0x4d285f=S[_0x494edf(0x686)](_0x494edf(0x6e5))['JWT'];try{let [_0x2a3f39,_0x5b77aa]=_0x336e09[_0x494edf(0x686)](_0x494edf(0x215))[_0x494edf(0x597)]('\x20');if(_0x2a3f39[_0x494edf(0x68f)]()!==_0x494edf(0x52d))throw new ae();if(!(0x0,Da[_0x494edf(0x54c)])(_0x5b77aa))throw new ae();let _0x2cbea5=_0x336e09['params'],_0x407c77=ka['default'][_0x494edf(0x6bc)](_0x5b77aa,_0x4d285f[_0x494edf(0x1a5)],{'ignoreExpiration':_0x4d285f[_0x494edf(0x645)]===0x0});if(_0x2cbea5[_0x494edf(0x7ec)]!==_0x407c77[_0x494edf(0x7ec)]||ct!==_0x407c77[_0x494edf(0x6d8)])throw new ae();return _0x2294e0();}catch(_0x35e0c3){throw Io[_0x494edf(0x7bf)](_0x35e0c3),new ae();}}async function Oo(_0x405a58,_0x2ebc9f,_0x145edd){const _0x18c424=a0_0x11d42e;let _0x59c716=S[_0x18c424(0x686)](_0x18c424(0x6e5))[_0x18c424(0x5b4)],_0x1ff1a4=_0x405a58[_0x18c424(0x686)](_0x18c424(0x472));if(_0x59c716[_0x18c424(0x41e)]===_0x1ff1a4)return _0x145edd();if(_0x405a58[_0x18c424(0x81c)][_0x18c424(0x3ef)](_0x18c424(0x208))){let _0x50a8ba=Fa,_0x3e96cf=_0x405a58[_0x18c424(0x667)][_0x18c424(0x7ec)];if(_0x50a8ba&&_0x3e96cf['toLowerCase']()[_0x18c424(0x724)](_0x50a8ba[_0x18c424(0x68f)]()))return _0x145edd();if(!_0x1ff1a4)throw new X(_0x18c424(0x613),_0x18c424(0x5a9));}if(_0x405a58[_0x18c424(0x81c)]['includes'](_0x18c424(0x35d))&&!_0x1ff1a4)throw new X(_0x18c424(0x613),_0x18c424(0x5a9));if(_0x405a58[_0x18c424(0x81c)][_0x18c424(0x3ef)]('/exit')&&!_0x1ff1a4)throw new X(_0x18c424(0x613),_0x18c424(0x5a9));if(_0x405a58['originalUrl'][_0x18c424(0x3ef)]('/config')&&!_0x1ff1a4)throw new X(_0x18c424(0x613),_0x18c424(0x5a9));try{let _0x2d857d=_0x405a58[_0x18c424(0x76b)],_0x468b3d=await we['auth'][_0x18c424(0x6d7)](_0x2d857d[_0x18c424(0x7ec)]);if(_0x468b3d&&_0x468b3d[_0x18c424(0x472)]===_0x1ff1a4)return _0x145edd();}catch{}throw new ae();}var La={'jwt':_o,'apikey':Oo},wi=require(a0_0x11d42e(0x629)),v=require('uuid'),E=(..._0x3a8913)=>{const _0x3179cf=a0_0x11d42e;let _0x25d4b0={};return _0x3a8913[_0x3179cf(0x46a)](_0x5c1d47=>_0x25d4b0[_0x5c1d47]={'minLength':0x1,'description':_0x3179cf(0x194)+_0x5c1d47+_0x3179cf(0x825)}),{'if':{'propertyNames':{'enum':[..._0x3a8913]}},'then':{'properties':_0x25d4b0}};},N={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'instanceName':{'type':'string'}},...E(a0_0x11d42e(0x7ec))},Dc={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'oldToken':{'type':a0_0x11d42e(0x4fa)}},'required':['oldToken'],...E(a0_0x11d42e(0x71a))},kc={'properties':{'key':{'type':a0_0x11d42e(0x1cb),'properties':{'id':{'type':a0_0x11d42e(0x4fa)},'remoteJid':{'type':a0_0x11d42e(0x4fa)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id',a0_0x11d42e(0x33f),a0_0x11d42e(0x221)],...E('id',a0_0x11d42e(0x33f))},'message':{'type':a0_0x11d42e(0x1cb)}}},ie={'properties':{'delay':{'type':a0_0x11d42e(0x39f),'description':a0_0x11d42e(0x2bf)},'presence':{'type':a0_0x11d42e(0x4fa),'enum':[a0_0x11d42e(0x476),'available',a0_0x11d42e(0x707),'recording',a0_0x11d42e(0x13f)]}}},Z={'type':a0_0x11d42e(0x4fa),'description':a0_0x11d42e(0x169)},Ua={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ie},'textMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'text':{'type':'string'}},'required':[a0_0x11d42e(0x8b3)],...E(a0_0x11d42e(0x8b3))}},'required':[a0_0x11d42e(0x78c),a0_0x11d42e(0x2b6)]},ja={'type':a0_0x11d42e(0x4fa),'pattern':a0_0x11d42e(0x48f),'description':a0_0x11d42e(0x169)},Lc={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...ja},'options':{...ie},'textMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'text':{'type':a0_0x11d42e(0x4fa)}},'required':[a0_0x11d42e(0x8b3)],...E(a0_0x11d42e(0x8b3))}},'required':['textMessage','number']},Fc={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...ja},'options':{...ie},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x11d42e(0x4fa),'enum':[a0_0x11d42e(0x5d3),a0_0x11d42e(0x393),a0_0x11d42e(0x594),a0_0x11d42e(0x43f)]},'media':{'type':a0_0x11d42e(0x4fa)},'fileName':{'type':a0_0x11d42e(0x4fa)},'caption':{'type':a0_0x11d42e(0x4fa)}},'required':['mediatype',a0_0x11d42e(0x583)],...E(a0_0x11d42e(0x329),a0_0x11d42e(0x2c3),a0_0x11d42e(0x583))}},'required':[a0_0x11d42e(0x7b4),a0_0x11d42e(0x2b6)]},Ja={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...Z},'options':{...ie},'stickerMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'image':{'type':a0_0x11d42e(0x4fa)}},'required':[a0_0x11d42e(0x5d3)],...E('image')}},'required':['stickerMessage',a0_0x11d42e(0x2b6)]},qa={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'statusMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'type':{'type':a0_0x11d42e(0x4fa),'enum':['text','image','audio',a0_0x11d42e(0x594)]},'content':{'type':a0_0x11d42e(0x4fa)},'caption':{'type':a0_0x11d42e(0x4fa)},'backgroundColor':{'type':a0_0x11d42e(0x4fa)},'font':{'type':a0_0x11d42e(0x39f),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x11d42e(0x176),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x11d42e(0x4fa),'pattern':a0_0x11d42e(0x679),'description':'\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}},'allContacts':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]}},'required':['type',a0_0x11d42e(0x18d)],...E(a0_0x11d42e(0x748),a0_0x11d42e(0x18d))}},'required':['statusMessage']},Va={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...Z},'options':{...ie},'mediaMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'mediatype':{'type':a0_0x11d42e(0x4fa),'enum':[a0_0x11d42e(0x5d3),a0_0x11d42e(0x393),'video',a0_0x11d42e(0x43f)]},'media':{'type':a0_0x11d42e(0x4fa)},'fileName':{'type':'string'},'caption':{'type':a0_0x11d42e(0x4fa)}},'required':['mediatype','media'],...E(a0_0x11d42e(0x329),a0_0x11d42e(0x2c3),a0_0x11d42e(0x583))}},'required':[a0_0x11d42e(0x7b4),'number']},Ga={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...Z},'options':{...ie},'audioMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'audio':{'type':a0_0x11d42e(0x4fa)}},'required':['audio'],...E(a0_0x11d42e(0x43f))}},'required':[a0_0x11d42e(0x5ed),a0_0x11d42e(0x2b6)]},Ba={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...Z},'pollMessage':{'type':'object','properties':{'name':{'type':a0_0x11d42e(0x4fa)},'selectableCount':{'type':a0_0x11d42e(0x2b6)},'values':{'type':a0_0x11d42e(0x176),'minItems':0x2,'uniqueItems':!0x0}},'required':['name',a0_0x11d42e(0x642),'values'],...E(a0_0x11d42e(0x414),a0_0x11d42e(0x642),'values')}},'required':[a0_0x11d42e(0x2b6),a0_0x11d42e(0x14a)]},Wa={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...Z},'menuMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'text':{'type':a0_0x11d42e(0x4fa)},'choices':{'type':a0_0x11d42e(0x176),'uniqueItems':!0x0}},'required':[a0_0x11d42e(0x8b3),a0_0x11d42e(0x174)],...E(a0_0x11d42e(0x8b3),a0_0x11d42e(0x174))}},'required':[a0_0x11d42e(0x2b6),a0_0x11d42e(0x603)]},za={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...Z},'options':{...ie},'locationMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'latitude':{'type':a0_0x11d42e(0x2b6)},'longitude':{'type':'number'},'name':{'type':'string'},'address':{'type':a0_0x11d42e(0x4fa)}},'required':[a0_0x11d42e(0x31d),a0_0x11d42e(0x3ce)],...E('name',a0_0x11d42e(0x53b))}},'required':['number',a0_0x11d42e(0x4d5)]},Ha={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...Z},'options':{...ie},'listMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'title':{'type':a0_0x11d42e(0x4fa)},'description':{'type':a0_0x11d42e(0x4fa)},'footerText':{'type':a0_0x11d42e(0x4fa)},'buttonText':{'type':a0_0x11d42e(0x4fa)},'sections':{'type':a0_0x11d42e(0x176),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x11d42e(0x1cb),'properties':{'title':{'type':'string'},'rows':{'type':a0_0x11d42e(0x176),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x11d42e(0x1cb),'properties':{'title':{'type':a0_0x11d42e(0x4fa)},'description':{'type':a0_0x11d42e(0x4fa)},'rowId':{'type':'string'}},'required':[a0_0x11d42e(0x1fd),a0_0x11d42e(0x57d)],...E(a0_0x11d42e(0x1fd),a0_0x11d42e(0x57d))}}},'required':[a0_0x11d42e(0x1fd),a0_0x11d42e(0x260)],...E('title')}}},'required':[a0_0x11d42e(0x1fd),a0_0x11d42e(0x2fa),'buttonText','sections'],...E('title',a0_0x11d42e(0x2fa),'buttonText',a0_0x11d42e(0x321))}},'required':['number',a0_0x11d42e(0x659)]},Ka={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...Z},'options':{...ie},'contactMessage':{'type':'array','items':{'type':a0_0x11d42e(0x1cb),'properties':{'fullName':{'type':'string'},'phoneNumber':{'type':a0_0x11d42e(0x4fa),'minLength':0xa}},'required':['fullName','phoneNumber'],...E(a0_0x11d42e(0x2a6))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x11d42e(0x2b6),a0_0x11d42e(0x41b)]},Qa={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'reactionMessage':{'type':'object','properties':{'key':{'type':a0_0x11d42e(0x1cb),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x11d42e(0x4fa)},'fromMe':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]}},'required':['id',a0_0x11d42e(0x33f),a0_0x11d42e(0x221)],...E('id',a0_0x11d42e(0x33f))},'reaction':{'type':a0_0x11d42e(0x4fa)}},'required':['key',a0_0x11d42e(0x6e9)],...E(a0_0x11d42e(0x6e9))}},'required':[a0_0x11d42e(0x275)]},Ya={'$id':(0x0,v['v4'])(),'type':'object','properties':{'numbers':{'type':a0_0x11d42e(0x176),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x11d42e(0x4fa),'pattern':a0_0x11d42e(0x679),'description':a0_0x11d42e(0x77b)}}}},Xa={'$id':(0x0,v['v4'])(),'type':'object','properties':{'readMessages':{'type':a0_0x11d42e(0x176),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':'string'},'fromMe':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x11d42e(0x4fa)}},'required':['id','fromMe','remoteJid'],...E('id','remoteJid')}}},'required':['readMessages']},Za={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'privacySettings':{'type':a0_0x11d42e(0x1cb),'properties':{'readreceipts':{'type':'string','enum':[a0_0x11d42e(0x1c6),a0_0x11d42e(0x786)]},'profile':{'type':a0_0x11d42e(0x4fa),'enum':['all',a0_0x11d42e(0x189),a0_0x11d42e(0x388),'none']},'status':{'type':a0_0x11d42e(0x4fa),'enum':[a0_0x11d42e(0x1c6),a0_0x11d42e(0x189),a0_0x11d42e(0x388),a0_0x11d42e(0x786)]},'online':{'type':'string','enum':['all','match_last_seen']},'last':{'type':a0_0x11d42e(0x4fa),'enum':['all','contacts',a0_0x11d42e(0x388),a0_0x11d42e(0x786)]},'groupadd':{'type':a0_0x11d42e(0x4fa),'enum':[a0_0x11d42e(0x1c6),a0_0x11d42e(0x189),a0_0x11d42e(0x388),a0_0x11d42e(0x786)]}},'required':['readreceipts',a0_0x11d42e(0x276),a0_0x11d42e(0x15d),'online','last',a0_0x11d42e(0x5fa)],...E(a0_0x11d42e(0x692),a0_0x11d42e(0x276),a0_0x11d42e(0x15d),a0_0x11d42e(0x2a3),a0_0x11d42e(0x837),a0_0x11d42e(0x5fa))}},'required':[a0_0x11d42e(0x6eb)]},ei={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'lastMessage':{'type':a0_0x11d42e(0x1cb),'properties':{'key':{'type':a0_0x11d42e(0x1cb),'properties':{'id':{'type':a0_0x11d42e(0x4fa)},'remoteJid':{'type':a0_0x11d42e(0x4fa)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id',a0_0x11d42e(0x221),a0_0x11d42e(0x33f)],...E('id',a0_0x11d42e(0x33f))},'messageTimestamp':{'type':'integer','minLength':0x1}},'required':['key'],...E(a0_0x11d42e(0x7c6))},'archive':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]}},'required':[a0_0x11d42e(0x766),a0_0x11d42e(0x313)]},ti={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'id':{'type':a0_0x11d42e(0x4fa)},'fromMe':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'},'participant':{'type':a0_0x11d42e(0x4fa)}},'required':['id',a0_0x11d42e(0x221),a0_0x11d42e(0x33f)],...E('id',a0_0x11d42e(0x33f),a0_0x11d42e(0x4b5))},si={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'where':{'type':a0_0x11d42e(0x1cb),'properties':{'_id':{'type':'string','minLength':0x1},'pushName':{'type':a0_0x11d42e(0x4fa),'minLength':0x1},'id':{'type':a0_0x11d42e(0x4fa),'minLength':0x1}},...E('_id','id',a0_0x11d42e(0x681))}}},ai={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'name':{'type':a0_0x11d42e(0x4fa)}},...E(a0_0x11d42e(0x414))},ii={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'status':{'type':a0_0x11d42e(0x4fa)}},...E(a0_0x11d42e(0x15d))},De={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{'type':a0_0x11d42e(0x4fa)},'picture':{'type':a0_0x11d42e(0x4fa)}}},oi={'type':'object','properties':{'wuid':{'type':a0_0x11d42e(0x4fa)},'name':{'type':a0_0x11d42e(0x4fa)},'picture':{'type':a0_0x11d42e(0x4fa)},'status':{'type':'string'},'isBusiness':{'type':a0_0x11d42e(0x54b)}}},ri={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'where':{'type':a0_0x11d42e(0x1cb),'properties':{'_id':{'type':a0_0x11d42e(0x4fa),'minLength':0x1},'key':{'type':a0_0x11d42e(0x1cb),'if':{'propertyNames':{'enum':['fromMe',a0_0x11d42e(0x33f),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x11d42e(0x4fa),'minLength':0x1,'description':a0_0x11d42e(0x3a9)},'id':{'type':'string','minLength':0x1,'description':a0_0x11d42e(0x3a9)},'fromMe':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x11d42e(0x1cb)}},...E(a0_0x11d42e(0x665))},'limit':{'type':a0_0x11d42e(0x39f)}}},Uc={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'where':{'type':a0_0x11d42e(0x1cb),'properties':{'_id':{'type':a0_0x11d42e(0x4fa)},'remoteJid':{'type':'string'},'id':{'type':a0_0x11d42e(0x4fa)},'fromMe':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x11d42e(0x4fa)},'status':{'type':a0_0x11d42e(0x4fa),'enum':[a0_0x11d42e(0x432),a0_0x11d42e(0x12e),a0_0x11d42e(0x2e6),'DELIVERY_ACK',a0_0x11d42e(0x199),a0_0x11d42e(0x310)]}},...E('_id',a0_0x11d42e(0x33f),'id',a0_0x11d42e(0x15d))},'limit':{'type':a0_0x11d42e(0x39f)}}},ni={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'number':{...Z},'presence':{'type':a0_0x11d42e(0x4fa),'enum':['unavailable',a0_0x11d42e(0x886),a0_0x11d42e(0x707),a0_0x11d42e(0x4b6),a0_0x11d42e(0x13f)]}},'required':[a0_0x11d42e(0x251),a0_0x11d42e(0x2b6)]},ci={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'subject':{'type':'string'},'description':{'type':'string'},'profilePicture':{'type':a0_0x11d42e(0x4fa)},'participants':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x11d42e(0x4fa),'minLength':0xa,'pattern':a0_0x11d42e(0x1c3),'description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':[a0_0x11d42e(0x28e),a0_0x11d42e(0x84b)],...E('subject',a0_0x11d42e(0x2fa),a0_0x11d42e(0x160))},ke={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'groupJid':{'type':'string','pattern':a0_0x11d42e(0x720)}},'required':[a0_0x11d42e(0x49b)],...E(a0_0x11d42e(0x49b))},li={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'groupJid':{'type':a0_0x11d42e(0x4fa)},'action':{'type':a0_0x11d42e(0x4fa),'enum':[a0_0x11d42e(0x277),a0_0x11d42e(0x2ec),a0_0x11d42e(0x27d),a0_0x11d42e(0x39c),a0_0x11d42e(0x367),a0_0x11d42e(0x528)]},'participants':{'type':a0_0x11d42e(0x176),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x11d42e(0x1c3),'description':a0_0x11d42e(0x89b)}}},'required':[a0_0x11d42e(0x49b),'action',a0_0x11d42e(0x84b)],...E(a0_0x11d42e(0x49b),a0_0x11d42e(0x3f7))},ui={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'groupJid':{'type':a0_0x11d42e(0x4fa)},'expiration':{'type':a0_0x11d42e(0x2b6),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':['groupJid','expiration'],...E(a0_0x11d42e(0x49b),a0_0x11d42e(0x16e))},di={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'groupJid':{'type':a0_0x11d42e(0x4fa)},'image':{'type':a0_0x11d42e(0x4fa)}},'required':[a0_0x11d42e(0x49b),'image'],...E('groupJid','image')},pi={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'groupJid':{'type':'string'},'description':{'type':a0_0x11d42e(0x4fa)}},'required':[a0_0x11d42e(0x49b),'description'],...E(a0_0x11d42e(0x49b),'description')},hi={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'groupJid':{'type':a0_0x11d42e(0x4fa)},'name':{'type':a0_0x11d42e(0x4fa)}},'required':[a0_0x11d42e(0x49b),a0_0x11d42e(0x414)],...E('groupJid',a0_0x11d42e(0x414))},gi={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x11d42e(0x4fa)},'setting':{'type':'string','enum':[a0_0x11d42e(0x759),a0_0x11d42e(0x1fb),a0_0x11d42e(0x141),a0_0x11d42e(0x65a)]}},'required':[a0_0x11d42e(0x49b),a0_0x11d42e(0x49a)],...E('groupJid',a0_0x11d42e(0x49a))},mi={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'groupJid':{'type':a0_0x11d42e(0x4fa)},'restrict':{'type':a0_0x11d42e(0x54b)},'announce':{'type':a0_0x11d42e(0x54b)},'memberAddMode':{'type':a0_0x11d42e(0x54b)},'joinApprovalMode':{'type':'boolean'},'expiration':{'type':a0_0x11d42e(0x39f),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x11d42e(0x4fa)},'description':{'type':a0_0x11d42e(0x4fa)},'image':{'type':a0_0x11d42e(0x4fa)}}},Ts={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'inviteCode':{'type':a0_0x11d42e(0x4fa)}},'required':[a0_0x11d42e(0x742)],...E(a0_0x11d42e(0x742))},fi={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'url':{'type':a0_0x11d42e(0x4fa)},'enabled':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]}},'required':['url',a0_0x11d42e(0x227)]},jc={'$id':(0x0,v['v4'])(),'type':a0_0x11d42e(0x1cb),'properties':{'local_map':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x11d42e(0x54b),'enum':[!0x0,!0x1]}},'required':[a0_0x11d42e(0x8a2),a0_0x11d42e(0x3e5),'QRCODE_UPDATED',a0_0x11d42e(0x790),a0_0x11d42e(0x48c),a0_0x11d42e(0x6d0),'SEND_MESSAGE','CONTACTS_SET','CONTACTS_UPSERT',a0_0x11d42e(0x7c1),a0_0x11d42e(0x72b),a0_0x11d42e(0x134),'CHATS_UPSERT',a0_0x11d42e(0x73c),a0_0x11d42e(0x147),a0_0x11d42e(0x16d),'GROUPS_UPSERT',a0_0x11d42e(0x1e0),a0_0x11d42e(0x6c5)],...E(a0_0x11d42e(0x8a2),'STATUS_INSTANCE',a0_0x11d42e(0x617),'MESSAGES_SET',a0_0x11d42e(0x48c),'MESSAGES_UPSERT',a0_0x11d42e(0x250),a0_0x11d42e(0x5ff),a0_0x11d42e(0x687),a0_0x11d42e(0x7c1),'PRESENCE_UPDATE',a0_0x11d42e(0x134),'CHATS_UPSERT',a0_0x11d42e(0x73c),a0_0x11d42e(0x147),'CONNECTION_UPDATE','GROUPS_UPSERT','GROUPS_UPDATE',a0_0x11d42e(0x6c5))},lt=class{},ut=class extends O{[a0_0x11d42e(0x547)](_0x2d9060){return ca(_0x2d9060);}async[a0_0x11d42e(0x604)](_0x1d49eb){const _0x370db6=a0_0x11d42e;if(_0x1d49eb[_0x370db6(0x57a)]!==0x0)try{return{'insertCount':(await this[_0x370db6(0x547)](_0x1d49eb[0x0][_0x370db6(0x855)])[_0x370db6(0x849)]([..._0x1d49eb]))['length']};}catch(_0x27a21d){return _0x27a21d;}}async[a0_0x11d42e(0x165)](_0x51a494,_0x3e4cab){const _0x604c84=a0_0x11d42e;try{return{'deletedCount':(await this[_0x604c84(0x547)](_0x3e4cab)['deleteMany']({..._0x51a494['where']}))['deletedCount']};}catch(_0xae53b){return{'error':_0xae53b?.[_0x604c84(0x1d7)]()};}}async['update'](_0x44e0cf,_0x2cf384){const _0x4863b1=a0_0x11d42e;try{if(_0x44e0cf[_0x4863b1(0x57a)]===0x0)return;let _0x191fd8=this['getContactModelForOwner'](_0x2cf384),_0x2df11a=_0x44e0cf[_0x4863b1(0x4f6)](_0x3b1bf2=>({'updateOne':{'filter':{'_id':_0x3b1bf2[_0x4863b1(0x665)],'owner':_0x2cf384},'update':{..._0x3b1bf2}}})),{modifiedCount:_0xf93bf3}=await _0x191fd8['bulkWrite'](_0x2df11a);return{'insertCount':_0xf93bf3};}catch{return;}}async[a0_0x11d42e(0x6d7)](_0x31363f,_0x5498a0){const _0x487989=a0_0x11d42e;try{let _0x26a026=this[_0x487989(0x547)](_0x5498a0),_0xf4a0bc=A(_0x31363f[_0x487989(0x2e2)]);return await _0x26a026['find'](_0xf4a0bc)[_0x487989(0x570)](_0x31363f?.[_0x487989(0x570)]??0x0)[_0x487989(0x285)]();}catch{return[];}}async['findOne'](_0x1c05fb,_0x1e38f9){const _0x2265b2=a0_0x11d42e;try{let _0x48d7e9=this[_0x2265b2(0x547)](_0x1e38f9),_0x43a289=A(_0x1c05fb['where']);return await _0x48d7e9[_0x2265b2(0x588)](_0x43a289)['lean']();}catch{return null;}}async[a0_0x11d42e(0x4b2)](_0x351f63){const _0x2042f5=a0_0x11d42e;try{return await this[_0x2042f5(0x547)](_0x351f63)[_0x2042f5(0x2cc)]['drop'](),{'success':!0x0};}catch(_0x570035){return console['error'](_0x570035),{'success':!0x1,'error':_0x570035};}}},dt=require('jsonschema'),Kc=require(a0_0x11d42e(0x7e4)),Is=new R(a0_0x11d42e(0x302)),G=class{['routerPath'](_0x4ce3ec,_0x37b66f=!0x0){const _0x3a3621=a0_0x11d42e;let _0x3784a0='/'+_0x4ce3ec;return _0x37b66f&&(_0x3784a0+=_0x3a3621(0x2d2)),_0x3784a0;}async[a0_0x11d42e(0x30e)](_0xa4274f){const _0x12fa1b=a0_0x11d42e;let {request:_0x5010d0,schema:_0x36f9ed,ClassRef:_0x46e3fd,execute:_0x4ba48e}=_0xa4274f,_0xbe75e6=new _0x46e3fd(),_0x50acb5=_0x5010d0[_0x12fa1b(0x667)],_0x1e2d33=_0x5010d0[_0x12fa1b(0x76b)];_0x5010d0?.[_0x12fa1b(0x802)]&&Object[_0x12fa1b(0x813)](_0x5010d0[_0x12fa1b(0x802)])['length']>0x0&&Object[_0x12fa1b(0x7b3)](_0x1e2d33,_0x5010d0[_0x12fa1b(0x802)]),_0x5010d0['originalUrl'][_0x12fa1b(0x3ef)]('/instance/create')&&Object[_0x12fa1b(0x7b3)](_0x1e2d33,_0x50acb5),Object[_0x12fa1b(0x7b3)](_0xbe75e6,_0x50acb5);let _0x693dc4=_0x36f9ed?(0x0,dt[_0x12fa1b(0x80e)])(_0xbe75e6,_0x36f9ed):{'valid':!0x0,'errors':[]};if(!_0x693dc4[_0x12fa1b(0x673)]){let _0x46f20c=_0x693dc4[_0x12fa1b(0x4fe)][_0x12fa1b(0x4f6)](({property:_0x451b96,stack:_0x12c198,schema:_0x1a7b74})=>{const _0xa89464=_0x12fa1b;let _0x276e6c;return _0x1a7b74[_0xa89464(0x2fa)]?_0x276e6c=_0x1a7b74[_0xa89464(0x2fa)]:_0x276e6c=_0x12c198['replace'](_0xa89464(0x15b),''),{'property':_0x451b96[_0xa89464(0x771)](_0xa89464(0x15b),''),'message':_0x276e6c};});throw Is[_0x12fa1b(0x7bf)]([..._0x46f20c]),new m(..._0x46f20c);}return await _0x4ba48e(_0x1e2d33,_0xbe75e6);}async[a0_0x11d42e(0x33a)](_0x1fd80f){const _0x1349b7=a0_0x11d42e;let {request:_0x25de9f,ClassRef:_0x28912b,schema:_0x46d0f4,execute:_0x711a13}=_0x1fd80f,_0x2f76a3=_0x25de9f[_0x1349b7(0x802)];if(!_0x2f76a3?.[_0x1349b7(0x49b)])throw new m(_0x1349b7(0x721),'ex:\x20\x22groupJid=120362@g.us\x22');let _0x4292fd=_0x25de9f[_0x1349b7(0x76b)],_0x536587=_0x25de9f[_0x1349b7(0x667)],_0x358c44=new _0x28912b();Object['assign'](_0x536587,_0x2f76a3),Object['assign'](_0x358c44,_0x536587);let _0x385249=(0x0,dt[_0x1349b7(0x80e)])(_0x358c44,_0x46d0f4);if(!_0x385249[_0x1349b7(0x673)]){let _0x133655=_0x385249['errors'][_0x1349b7(0x4f6)](({property:_0x538411,stack:_0x10e12b,schema:_0x5d448d})=>{const _0x207cd9=_0x1349b7;let _0x4ec150;return _0x5d448d['description']?_0x4ec150=_0x5d448d['description']:_0x4ec150=_0x10e12b[_0x207cd9(0x771)](_0x207cd9(0x15b),''),{'property':_0x538411[_0x207cd9(0x771)](_0x207cd9(0x15b),''),'message':_0x4ec150};});throw Is[_0x1349b7(0x7bf)]([..._0x133655]),new m(..._0x133655);}return await _0x711a13(_0x4292fd,_0x358c44);}async['joinGroupValidate'](_0x1e0178){const _0x2c2bcd=a0_0x11d42e;let {request:_0x41b7cd,ClassRef:_0x42e086,schema:_0x2d3265,execute:_0x4dae7f}=_0x1e0178,_0x20cdef=_0x41b7cd[_0x2c2bcd(0x667)];if(!_0x20cdef?.[_0x2c2bcd(0x742)])throw new m('The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22');let _0x126b9d=_0x41b7cd[_0x2c2bcd(0x76b)],_0x2d5487=_0x41b7cd[_0x2c2bcd(0x667)],_0x55457a=new _0x42e086();Object[_0x2c2bcd(0x7b3)](_0x2d5487,_0x20cdef),Object[_0x2c2bcd(0x7b3)](_0x55457a,_0x2d5487);let _0x15eb94=(0x0,dt['validate'])(_0x55457a,_0x2d3265);if(!_0x15eb94[_0x2c2bcd(0x673)]){let _0x5f0761=_0x15eb94['errors'][_0x2c2bcd(0x4f6)](({property:_0x115e31,stack:_0xc75d8a,schema:_0x4f72c6})=>{const _0x138935=_0x2c2bcd;let _0x4ac8b5;return _0x4f72c6[_0x138935(0x2fa)]?_0x4ac8b5=_0x4f72c6['description']:_0x4ac8b5=_0xc75d8a[_0x138935(0x771)](_0x138935(0x15b),''),{'property':_0x115e31[_0x138935(0x771)]('instance.',''),'message':_0x4ac8b5};});throw Is[_0x2c2bcd(0x7bf)]([..._0x5f0761]),new m(..._0x5f0761);}return await _0x4dae7f(_0x126b9d,_0x55457a);}},C=class{},ul=new R('ChatRouter'),pt=class extends G{constructor(..._0x375fed){const _0x2356be=a0_0x11d42e;super(),this['router']=(0x0,wi[_0x2356be(0x21f)])(),this[_0x2356be(0x466)]['post'](this['routerPath'](_0x2356be(0x73f)),..._0x375fed,async(_0x56ff12,_0x272776)=>{const _0x386101=_0x2356be;let _0x38a21d=await this[_0x386101(0x30e)]({'request':_0x56ff12,'schema':ni,'ClassRef':et,'execute':(_0x448e18,_0x1340ad)=>D[_0x386101(0x73f)](_0x448e18,_0x1340ad)});return _0x272776[_0x386101(0x15d)](0xc9)[_0x386101(0x481)](_0x38a21d);})[_0x2356be(0x4d3)](this['routerPath']('whatsappNumbers'),..._0x375fed,async(_0x2f34f1,_0x447e66)=>{const _0x5da6f4=_0x2356be;let _0x4ae5ce=await this['dataValidate']({'request':_0x2f34f1,'schema':Ya,'ClassRef':tt,'execute':(_0x133dfd,_0x2d8c1a)=>D[_0x5da6f4(0x3b1)](_0x133dfd,_0x2d8c1a)});return _0x447e66[_0x5da6f4(0x15d)](0xc9)['json'](_0x4ae5ce);})[_0x2356be(0x4d3)](this[_0x2356be(0x7bc)](_0x2356be(0x71b)),..._0x375fed,async(_0x1ddadf,_0x4eb384)=>{const _0x547dc4=_0x2356be;let _0x220c34=await this['dataValidate']({'request':_0x1ddadf,'schema':N,'ClassRef':C,'execute':(_0x2bfd14,_0x1a6cd6)=>D[_0x547dc4(0x71b)](_0x2bfd14,_0x1a6cd6)});return _0x4eb384[_0x547dc4(0x15d)](0xc9)['json'](_0x220c34);})['put'](this[_0x2356be(0x7bc)]('markMessageAsRead'),..._0x375fed,async(_0xae0eb8,_0x12ad66)=>{const _0x15d86f=_0x2356be;let _0x4fa178=await this[_0x15d86f(0x30e)]({'request':_0xae0eb8,'schema':Xa,'ClassRef':it,'execute':(_0x36e441,_0x1a5067)=>D[_0x15d86f(0x854)](_0x36e441,_0x1a5067)});return _0x12ad66[_0x15d86f(0x15d)](0xc9)[_0x15d86f(0x481)](_0x4fa178);})[_0x2356be(0x4af)](this[_0x2356be(0x7bc)](_0x2356be(0x712)),..._0x375fed,async(_0x270a6e,_0x178ade)=>{const _0x591507=_0x2356be;let _0x29f4c2=await this[_0x591507(0x30e)]({'request':_0x270a6e,'schema':ei,'ClassRef':ot,'execute':(_0x564d71,_0x21f98c)=>D[_0x591507(0x712)](_0x564d71,_0x21f98c)});return _0x178ade[_0x591507(0x15d)](0xc9)[_0x591507(0x481)](_0x29f4c2);})[_0x2356be(0x165)](this[_0x2356be(0x7bc)](_0x2356be(0x8d2)),..._0x375fed,async(_0x109366,_0x433687)=>{const _0x44f8b2=_0x2356be;let _0x8a2897=await this[_0x44f8b2(0x30e)]({'request':_0x109366,'schema':ti,'ClassRef':nt,'execute':(_0x34f70d,_0x19dc7f)=>D[_0x44f8b2(0x568)](_0x34f70d,_0x19dc7f)});return _0x433687[_0x44f8b2(0x15d)](0xc9)[_0x44f8b2(0x481)](_0x8a2897);})[_0x2356be(0x4d3)](this[_0x2356be(0x7bc)](_0x2356be(0x55d)),..._0x375fed,async(_0x1b83b9,_0x32ded1)=>{const _0x1b1bfb=_0x2356be;let _0x495a67=await this['dataValidate']({'request':_0x1b83b9,'schema':De,'ClassRef':xe,'execute':(_0x3c6202,_0x16f9ae)=>D[_0x1b1bfb(0x564)](_0x3c6202,_0x16f9ae)});return _0x32ded1[_0x1b1bfb(0x15d)](0xc8)['json'](_0x495a67);})[_0x2356be(0x4d3)](this[_0x2356be(0x7bc)](_0x2356be(0x7ea)),..._0x375fed,async(_0x4333fa,_0x336d3e)=>{const _0x55719f=_0x2356be;let _0x5e9c5a=await this[_0x55719f(0x30e)]({'request':_0x4333fa,'schema':oi,'ClassRef':xe,'execute':(_0x4fc7ca,_0x550f05)=>D[_0x55719f(0x7ea)](_0x4fc7ca,_0x550f05)});return _0x336d3e[_0x55719f(0x15d)](0xc8)[_0x55719f(0x481)](_0x5e9c5a);})[_0x2356be(0x4d3)](this[_0x2356be(0x7bc)](_0x2356be(0x1af)),..._0x375fed,async(_0x1d6211,_0x73d858)=>{const _0x2e003d=_0x2356be;let _0x4c959c=await this[_0x2e003d(0x30e)]({'request':_0x1d6211,'schema':si,'ClassRef':lt,'execute':(_0x1ffc16,_0x1fd477)=>D['fetchContacts'](_0x1ffc16,_0x1fd477)});return _0x73d858['status'](0xc8)[_0x2e003d(0x481)](_0x4c959c);})['post'](this['routerPath'](_0x2356be(0x762)),..._0x375fed,async(_0x59586d,_0x384395)=>{const _0x4398ef=_0x2356be;let _0x4da517=await this[_0x4398ef(0x30e)]({'request':_0x59586d,'schema':null,'ClassRef':Object,'execute':(_0x4e78d6,_0x232882)=>D[_0x4398ef(0x762)](_0x4e78d6,_0x232882)});return _0x384395[_0x4398ef(0x15d)](0xc9)[_0x4398ef(0x481)](_0x4da517);})[_0x2356be(0x4d3)](this['routerPath'](_0x2356be(0x80f)),..._0x375fed,async(_0x31825f,_0x3ab0d9)=>{const _0x25570a=_0x2356be;let _0x4e8bf4=await this['dataValidate']({'request':_0x31825f,'schema':ri,'ClassRef':Xe,'execute':(_0xf4470,_0x51f412)=>D[_0x25570a(0x70b)](_0xf4470,_0x51f412)});return _0x3ab0d9[_0x25570a(0x15d)](0xc8)[_0x25570a(0x481)](_0x4e8bf4);})[_0x2356be(0x686)](this[_0x2356be(0x7bc)](_0x2356be(0x6b5)),..._0x375fed,async(_0x4d5e2a,_0x4b4bc2)=>{const _0x187d9e=_0x2356be;let _0x248d36=await this[_0x187d9e(0x30e)]({'request':_0x4d5e2a,'schema':null,'ClassRef':C,'execute':_0x4f59ee=>D[_0x187d9e(0x674)](_0x4f59ee)});return _0x4b4bc2[_0x187d9e(0x15d)](0xc8)['json'](_0x248d36);})[_0x2356be(0x686)](this[_0x2356be(0x7bc)](_0x2356be(0x83f)),..._0x375fed,async(_0x27721b,_0x59e313)=>{const _0x1c960c=_0x2356be;let _0x2e1a95=await this[_0x1c960c(0x30e)]({'request':_0x27721b,'schema':null,'ClassRef':C,'execute':_0x2ce3c5=>D['fetchLabels'](_0x2ce3c5)});return _0x59e313[_0x1c960c(0x15d)](0xc8)[_0x1c960c(0x481)](_0x2e1a95);})[_0x2356be(0x4af)](this[_0x2356be(0x7bc)]('importChats'),..._0x375fed,async(_0x452bf9,_0x493eaf)=>{const _0x47a249=_0x2356be;let _0x475004=await this['dataValidate']({'request':_0x452bf9,'schema':null,'ClassRef':Array,'execute':(_0x390921,_0x58adf5)=>D[_0x47a249(0x551)](_0x390921,_0x58adf5)});return _0x493eaf[_0x47a249(0x15d)](0xc8)[_0x47a249(0x481)](_0x475004);})['get'](this[_0x2356be(0x7bc)]('fetchPrivacySettings'),..._0x375fed,async(_0x36834b,_0x44dedf)=>{const _0x2a0cbd=_0x2356be;let _0x210139=await this[_0x2a0cbd(0x30e)]({'request':_0x36834b,'schema':null,'ClassRef':C,'execute':_0x2bdaea=>D['fetchPrivacySettings'](_0x2bdaea)});return _0x44dedf[_0x2a0cbd(0x15d)](0xc8)['json'](_0x210139);})['put'](this['routerPath']('updatePrivacySettings'),..._0x375fed,async(_0x583268,_0xbbf9a5)=>{const _0x4a2bd7=_0x2356be;let _0x42f25e=await this['dataValidate']({'request':_0x583268,'schema':Za,'ClassRef':rt,'execute':(_0x3b5dc4,_0x433a27)=>D['updatePrivacySettings'](_0x3b5dc4,_0x433a27)});return _0xbbf9a5[_0x4a2bd7(0x15d)](0xc9)['json'](_0x42f25e);})[_0x2356be(0x4d3)](this['routerPath'](_0x2356be(0x2c9)),..._0x375fed,async(_0x52eeb3,_0x42d240)=>{const _0x5497da=_0x2356be;let _0x48669f=await this['dataValidate']({'request':_0x52eeb3,'schema':De,'ClassRef':Ee,'execute':(_0xd7fba5,_0x3f7406)=>D[_0x5497da(0x2c9)](_0xd7fba5,_0x3f7406)});return _0x42d240['status'](0xc8)['json'](_0x48669f);})[_0x2356be(0x4d3)](this[_0x2356be(0x7bc)]('updateProfileName'),..._0x375fed,async(_0x3e5237,_0x4d6e35)=>{const _0x3dee09=_0x2356be;let _0x2da79a=await this[_0x3dee09(0x30e)]({'request':_0x3e5237,'schema':ai,'ClassRef':st,'execute':(_0x13012b,_0x238a64)=>D['updateProfileName'](_0x13012b,_0x238a64)});return _0x4d6e35[_0x3dee09(0x15d)](0xc8)[_0x3dee09(0x481)](_0x2da79a);})[_0x2356be(0x4d3)](this['routerPath']('updateProfileStatus'),..._0x375fed,async(_0x57c2be,_0x39addf)=>{const _0x5f19ea=_0x2356be;let _0x41d008=await this[_0x5f19ea(0x30e)]({'request':_0x57c2be,'schema':ii,'ClassRef':at,'execute':(_0x3b0a51,_0x506442)=>D[_0x5f19ea(0x19d)](_0x3b0a51,_0x506442)});return _0x39addf[_0x5f19ea(0x15d)](0xc8)[_0x5f19ea(0x481)](_0x41d008);})[_0x2356be(0x4af)](this[_0x2356be(0x7bc)](_0x2356be(0x422)),..._0x375fed,async(_0x5e7bab,_0x550cec)=>{const _0x2ca27b=_0x2356be;let _0x139404=await this[_0x2ca27b(0x30e)]({'request':_0x5e7bab,'schema':De,'ClassRef':Ee,'execute':(_0x11a12c,_0x3edef9)=>D[_0x2ca27b(0x422)](_0x11a12c,_0x3edef9)});return _0x550cec[_0x2ca27b(0x15d)](0xc8)[_0x2ca27b(0x481)](_0x139404);})[_0x2356be(0x165)](this[_0x2356be(0x7bc)](_0x2356be(0x7d5)),..._0x375fed,async(_0x44db8a,_0x41c132)=>{const _0x5199d3=_0x2356be;let _0x5e83da=await this['dataValidate']({'request':_0x44db8a,'schema':De,'ClassRef':Ee,'execute':(_0x149fb8,_0x21bcfe)=>D[_0x5199d3(0x7d5)](_0x149fb8,_0x21bcfe)});return _0x41c132[_0x5199d3(0x15d)](0xc8)['json'](_0x5e83da);});}},yi=require(a0_0x11d42e(0x629)),ht=class{},gt=class{},mt=class{},ft=class{},wt=class{},yt=class{},ee=class{},Le=class{},bt=class extends ee{},St=class extends ee{},Mt=class extends G{constructor(..._0x103b7d){const _0x121558=a0_0x11d42e;super(),this[_0x121558(0x466)]=(0x0,yi['Router'])(),this['router'][_0x121558(0x4d3)](this[_0x121558(0x7bc)](_0x121558(0x3a3)),..._0x103b7d,async(_0x4d8bab,_0x36d049)=>{const _0x402c37=_0x121558;let _0x129350=await this['dataValidate']({'request':_0x4d8bab,'schema':ci,'ClassRef':ht,'execute':(_0x46e7c0,_0x2706b4)=>q[_0x402c37(0x82e)](_0x46e7c0,_0x2706b4)});_0x36d049[_0x402c37(0x15d)](0xc9)[_0x402c37(0x481)](_0x129350);})[_0x121558(0x4af)](this['routerPath'](_0x121558(0x6de)),..._0x103b7d,async(_0xa0aa08,_0x2b20f2)=>{const _0xe090b1=_0x121558;let _0xae1ae3=await this[_0xe090b1(0x33a)]({'request':_0xa0aa08,'schema':di,'ClassRef':gt,'execute':(_0x57cf12,_0x263c81)=>q[_0xe090b1(0x6de)](_0x57cf12,_0x263c81)});_0x2b20f2[_0xe090b1(0x15d)](0xc9)[_0xe090b1(0x481)](_0xae1ae3);})[_0x121558(0x4af)](this[_0x121558(0x7bc)](_0x121558(0x56d)),..._0x103b7d,async(_0x3533b2,_0x5044cb)=>{const _0x39cbb6=_0x121558;let _0x46c5ff=await this[_0x39cbb6(0x33a)]({'request':_0x3533b2,'schema':pi,'ClassRef':mt,'execute':(_0x33ff44,_0x53ac6f)=>q[_0x39cbb6(0x56d)](_0x33ff44,_0x53ac6f)});_0x5044cb[_0x39cbb6(0x15d)](0xc9)[_0x39cbb6(0x481)](_0x46c5ff);})['put'](this[_0x121558(0x7bc)](_0x121558(0x5d1)),..._0x103b7d,async(_0x273d17,_0x45d257)=>{const _0x49f851=_0x121558;let _0xeb02e0=await this[_0x49f851(0x33a)]({'request':_0x273d17,'schema':hi,'ClassRef':ft,'execute':(_0x391146,_0x3c5473)=>q['groupName'](_0x391146,_0x3c5473)});_0x45d257['status'](0xc9)[_0x49f851(0x481)](_0xeb02e0);})[_0x121558(0x4af)](this[_0x121558(0x7bc)]('groupBetterSetting'),..._0x103b7d,async(_0x19d385,_0x2a5d1a)=>{const _0x207eac=_0x121558;let _0x40bbee=await this[_0x207eac(0x33a)]({'request':_0x19d385,'schema':mi,'ClassRef':yt,'execute':(_0x39b25e,_0x4093e3)=>q[_0x207eac(0x2e4)](_0x39b25e,_0x4093e3)});_0x2a5d1a[_0x207eac(0x15d)](0xc9)[_0x207eac(0x481)](_0x40bbee);})['put'](this['routerPath'](_0x121558(0x4a5)),..._0x103b7d,async(_0x432049,_0x31df10)=>{const _0x2779d0=_0x121558;let _0x5f5b5a=await this[_0x2779d0(0x33a)]({'request':_0x432049,'schema':gi,'ClassRef':wt,'execute':(_0x5b8094,_0x3f9271)=>q[_0x2779d0(0x4a5)](_0x5b8094,_0x3f9271)});_0x31df10[_0x2779d0(0x15d)](0xc9)[_0x2779d0(0x481)](_0x5f5b5a);})[_0x121558(0x4af)](this[_0x121558(0x7bc)]('toggleEphemeral'),..._0x103b7d,async(_0x46db06,_0x19b71e)=>{const _0x2001ac=_0x121558;let _0x44dd28=await this[_0x2001ac(0x33a)]({'request':_0x46db06,'schema':ui,'ClassRef':St,'execute':(_0x57bf96,_0x17edfa)=>q['toggleEphemeral'](_0x57bf96,_0x17edfa)});_0x19b71e[_0x2001ac(0x15d)](0xc9)[_0x2001ac(0x481)](_0x44dd28);})[_0x121558(0x686)](this[_0x121558(0x7bc)](_0x121558(0x3c5)),..._0x103b7d,async(_0x5bc9b2,_0x2f0ffa)=>{const _0x597a6c=_0x121558;let _0x575512=await this[_0x597a6c(0x33a)]({'request':_0x5bc9b2,'schema':ke,'ClassRef':ee,'execute':(_0x591b59,_0x329b19)=>q[_0x597a6c(0x450)](_0x591b59,_0x329b19)});_0x2f0ffa['status'](0xc8)['json'](_0x575512);})[_0x121558(0x686)](this[_0x121558(0x7bc)](_0x121558(0x801)),..._0x103b7d,async(_0x2c8454,_0x2eb440)=>{const _0x31d7c1=_0x121558;let _0x250f5b=await this['dataValidate']({'request':_0x2c8454,'schema':N,'ClassRef':C,'execute':_0x111be4=>q[_0x31d7c1(0x801)](_0x111be4)});_0x2eb440[_0x31d7c1(0x15d)](0xc8)['json'](_0x250f5b);})[_0x121558(0x686)](this[_0x121558(0x7bc)]('participants'),..._0x103b7d,async(_0x1e8936,_0x1e806b)=>{const _0x56d015=_0x121558;let _0x3aa40a=await this[_0x56d015(0x33a)]({'request':_0x1e8936,'schema':ke,'ClassRef':ee,'execute':(_0x56a916,_0x48f7fc)=>q[_0x56d015(0x79c)](_0x56a916,_0x48f7fc)});_0x1e806b[_0x56d015(0x15d)](0xc8)[_0x56d015(0x481)](_0x3aa40a);})['get'](this[_0x121558(0x7bc)]('inviteCode'),..._0x103b7d,async(_0xa80868,_0x21a901)=>{const _0x193d2e=_0x121558;let _0x55e14a=await this[_0x193d2e(0x33a)]({'request':_0xa80868,'schema':ke,'ClassRef':ee,'execute':(_0xc61b06,_0x104f5e)=>q[_0x193d2e(0x742)](_0xc61b06,_0x104f5e)});_0x21a901[_0x193d2e(0x15d)](0xc8)['json'](_0x55e14a);})['post'](this[_0x121558(0x7bc)](_0x121558(0x5c1)),..._0x103b7d,async(_0x391c73,_0x5d5dae)=>{const _0x10fb68=_0x121558;let _0x5544c6=await this['joinGroupValidate']({'request':_0x391c73,'schema':Ts,'ClassRef':Le,'execute':(_0x21a3ca,_0x156746)=>q[_0x10fb68(0x4c2)](_0x21a3ca,_0x156746)});_0x5d5dae['status'](0xc9)['json'](_0x5544c6);})[_0x121558(0x4af)](this[_0x121558(0x7bc)](_0x121558(0x4ee)),..._0x103b7d,async(_0x33cc58,_0x1248a2)=>{let _0x4a6c7b=await this['joinGroupValidate']({'request':_0x33cc58,'schema':Ts,'ClassRef':Le,'execute':(_0x4d1691,_0x2a8c08)=>q['joinGroup'](_0x4d1691,_0x2a8c08)});_0x1248a2['status'](0xc9)['json'](_0x4a6c7b);})[_0x121558(0x4af)](this[_0x121558(0x7bc)](_0x121558(0x64d)),..._0x103b7d,async(_0x29505e,_0x4b9918)=>{const _0xa9e647=_0x121558;let _0x1a35a8=await this[_0xa9e647(0x33a)]({'request':_0x29505e,'schema':ke,'ClassRef':ee,'execute':(_0x85a469,_0x1843b5)=>q[_0xa9e647(0x64d)](_0x85a469,_0x1843b5)});_0x4b9918['status'](0xc9)[_0xa9e647(0x481)](_0x1a35a8);})[_0x121558(0x4af)](this[_0x121558(0x7bc)]('updateParticipant'),..._0x103b7d,async(_0x4fff60,_0x2ff12f)=>{const _0x33f70a=_0x121558;let _0x180f9c=await this[_0x33f70a(0x33a)]({'request':_0x4fff60,'schema':li,'ClassRef':bt,'execute':(_0x4daf00,_0x253737)=>q[_0x33f70a(0x2ce)](_0x4daf00,_0x253737)});_0x2ff12f[_0x33f70a(0x15d)](0xc9)[_0x33f70a(0x481)](_0x180f9c);})['delete'](this[_0x121558(0x7bc)]('leaveGroup'),..._0x103b7d,async(_0x462332,_0x44788e)=>{const _0x1c327b=_0x121558;let _0x16f0e6=await this[_0x1c327b(0x33a)]({'request':_0x462332,'schema':{},'ClassRef':ee,'execute':(_0x5cc17b,_0x1d5635)=>q['leaveGroup'](_0x5cc17b,_0x1d5635)});_0x44788e['status'](0xc8)[_0x1c327b(0x481)](_0x16f0e6);});}},bi=require(a0_0x11d42e(0x629)),Ct=class extends G{constructor(_0x439ea9,..._0x5117dc){const _0x4a70be=a0_0x11d42e;super(),this[_0x4a70be(0x155)]=_0x439ea9,this[_0x4a70be(0x466)]=(0x0,bi[_0x4a70be(0x21f)])();let _0x1cb5f0=_0x439ea9[_0x4a70be(0x686)](_0x4a70be(0x6e5));this['router'][_0x4a70be(0x4d3)](_0x4a70be(0x14b),..._0x5117dc,async(_0x4dfbf4,_0x19c1ac)=>{const _0x2f89ab=_0x4a70be;let {instanceName:_0x223f43,apikey:_0x3b50ad,number:_0x3a14d9}=_0x4dfbf4[_0x2f89ab(0x667)],_0x2d696c=await ue[_0x2f89ab(0x7a2)]({'instanceName':_0x223f43,'apikey':_0x3b50ad,'number':_0x3a14d9});return _0x19c1ac[_0x2f89ab(0x15d)](0xc9)[_0x2f89ab(0x481)](_0x2d696c);})[_0x4a70be(0x4af)](this[_0x4a70be(0x7bc)](_0x4a70be(0x7e1)),..._0x5117dc,async(_0x121ab0,_0x305363)=>{const _0x32cdca=_0x4a70be;let _0x592219=await this[_0x32cdca(0x30e)]({'request':_0x121ab0,'schema':N,'ClassRef':C,'execute':_0x48a448=>ue['restartInstance'](_0x48a448)});return _0x305363['status'](0xc8)[_0x32cdca(0x481)](_0x592219);})[_0x4a70be(0x686)](this[_0x4a70be(0x7bc)](_0x4a70be(0x6ca)),..._0x5117dc,async(_0x1c3a43,_0x257a69)=>{const _0x156b3e=_0x4a70be;let _0x20034d=await this[_0x156b3e(0x30e)]({'request':_0x1c3a43,'schema':N,'ClassRef':C,'execute':_0x136396=>ue[_0x156b3e(0x17f)](_0x136396)});return _0x257a69[_0x156b3e(0x15d)](0xc8)['json'](_0x20034d);})['get'](this[_0x4a70be(0x7bc)](_0x4a70be(0x591)),..._0x5117dc,async(_0x2ff407,_0x398737)=>{const _0x47d878=_0x4a70be;let _0x5665a5=await this['dataValidate']({'request':_0x2ff407,'schema':N,'ClassRef':C,'execute':_0x6a4646=>ue[_0x47d878(0x591)](_0x6a4646)});return _0x398737[_0x47d878(0x15d)](0xc8)[_0x47d878(0x481)](_0x5665a5);})[_0x4a70be(0x686)](this[_0x4a70be(0x7bc)](_0x4a70be(0x74e),!0x1),..._0x5117dc,async(_0x17ec1a,_0x4bc573)=>{const _0x1a6375=_0x4a70be;let _0x239058=await this[_0x1a6375(0x30e)]({'request':_0x17ec1a,'schema':null,'ClassRef':C,'execute':_0x33e789=>ue[_0x1a6375(0x74e)](_0x33e789)});return _0x4bc573[_0x1a6375(0x15d)](0xc8)[_0x1a6375(0x481)](_0x239058);})[_0x4a70be(0x165)](this['routerPath'](_0x4a70be(0x16c)),..._0x5117dc,async(_0x14b285,_0x3dba34)=>{const _0x2601db=_0x4a70be;let _0x27c1d2=await this['dataValidate']({'request':_0x14b285,'schema':N,'ClassRef':C,'execute':_0x13c5e9=>ue[_0x2601db(0x16c)](_0x13c5e9)});return _0x3dba34['status'](0xc8)['json'](_0x27c1d2);})[_0x4a70be(0x165)](this[_0x4a70be(0x7bc)](_0x4a70be(0x165)),..._0x5117dc,async(_0x3455dc,_0x26c20b)=>{const _0x4b4557=_0x4a70be;let _0x5cce84=await this[_0x4b4557(0x30e)]({'request':_0x3455dc,'schema':N,'ClassRef':C,'execute':_0x1bfe25=>ue[_0x4b4557(0x129)](_0x1bfe25)});return _0x26c20b['status'](0xc8)['json'](_0x5cce84);});}},Si=require(a0_0x11d42e(0x629)),_s=class{},H=class extends _s{},vt=class extends H{},Et=class extends H{},Nt=class extends H{},$t=class extends H{},Fe=class extends H{},Rt=class extends H{},At=class extends H{},Tt=class extends H{},It=class extends H{},_t=class{},Ot=class extends G{constructor(..._0x3c3f38){const _0xb54381=a0_0x11d42e;super(),this['router']=(0x0,Si['Router'])(),this[_0xb54381(0x466)][_0xb54381(0x4d3)](this[_0xb54381(0x7bc)](_0xb54381(0x8bd)),..._0x3c3f38,async(_0x5f939b,_0x230cfd)=>{const _0x1eb041=_0xb54381;let _0x4b4de5=await this[_0x1eb041(0x30e)]({'request':_0x5f939b,'schema':Ua,'ClassRef':vt,'execute':(_0x55c212,_0x1ef07d)=>W['sendText'](_0x55c212,_0x1ef07d)});return _0x230cfd['status'](0xc9)['json'](_0x4b4de5);})[_0xb54381(0x4d3)](this['routerPath'](_0xb54381(0x881)),..._0x3c3f38,async(_0x2c6b81,_0x380aac)=>{const _0x47a745=_0xb54381;let _0x548290=await this[_0x47a745(0x30e)]({'request':_0x2c6b81,'schema':Va,'ClassRef':Fe,'execute':(_0x3a0145,_0x50a65c)=>W[_0x47a745(0x881)](_0x3a0145,_0x50a65c)});return _0x380aac[_0x47a745(0x15d)](0xc9)['json'](_0x548290);})[_0xb54381(0x4d3)](this[_0xb54381(0x7bc)](_0xb54381(0x412)),..._0x3c3f38,async(_0x4128bc,_0x2e504b)=>{const _0x5abe3f=_0xb54381;let _0x28c6b0=await this[_0x5abe3f(0x30e)]({'request':_0x4128bc,'schema':Wa,'ClassRef':$t,'execute':(_0x35b78d,_0x1d06ff)=>W[_0x5abe3f(0x412)](_0x35b78d,_0x1d06ff)});return _0x2e504b[_0x5abe3f(0x15d)](0xc9)['json'](_0x28c6b0);})[_0xb54381(0x4d3)](this['routerPath'](_0xb54381(0x240)),..._0x3c3f38,async(_0x559d29,_0x51e9c4)=>{const _0x2cf204=_0xb54381;let _0x2f5da3=await this[_0x2cf204(0x30e)]({'request':_0x559d29,'schema':Ga,'ClassRef':Fe,'execute':(_0x587476,_0x279722)=>W[_0x2cf204(0x240)](_0x587476,_0x279722)});return _0x51e9c4[_0x2cf204(0x15d)](0xc9)[_0x2cf204(0x481)](_0x2f5da3);})['post'](this[_0xb54381(0x7bc)](_0xb54381(0x819)),..._0x3c3f38,async(_0x452206,_0x12dff5)=>{const _0x1281a4=_0xb54381;let _0xa49df6=await this[_0x1281a4(0x30e)]({'request':_0x452206,'schema':za,'ClassRef':At,'execute':(_0xfdb378,_0x4059c1)=>W[_0x1281a4(0x819)](_0xfdb378,_0x4059c1)});return _0x12dff5[_0x1281a4(0x15d)](0xc9)[_0x1281a4(0x481)](_0xa49df6);})[_0xb54381(0x4d3)](this['routerPath']('sendList'),..._0x3c3f38,async(_0x166c30,_0x399395)=>{const _0x7207e0=_0xb54381;let _0x20d88d=await this[_0x7207e0(0x30e)]({'request':_0x166c30,'schema':Ha,'ClassRef':Tt,'execute':(_0x1ccbe6,_0x5d6b1a)=>W[_0x7207e0(0x303)](_0x1ccbe6,_0x5d6b1a)});return _0x399395[_0x7207e0(0x15d)](0xc9)[_0x7207e0(0x481)](_0x20d88d);})[_0xb54381(0x4d3)](this['routerPath'](_0xb54381(0x3a1)),..._0x3c3f38,async(_0x2f06b2,_0x3b6513)=>{const _0x2e52a1=_0xb54381;let _0x4e6643=await this[_0x2e52a1(0x30e)]({'request':_0x2f06b2,'schema':Ka,'ClassRef':It,'execute':(_0x1561c0,_0x3267dc)=>W[_0x2e52a1(0x3a1)](_0x1561c0,_0x3267dc)});return _0x3b6513[_0x2e52a1(0x15d)](0xc9)[_0x2e52a1(0x481)](_0x4e6643);})[_0xb54381(0x4d3)](this['routerPath']('sendReaction'),..._0x3c3f38,async(_0x4455fe,_0x2ccd4e)=>{const _0xfecd7d=_0xb54381;let _0x330daa=await this[_0xfecd7d(0x30e)]({'request':_0x4455fe,'schema':Qa,'ClassRef':_t,'execute':(_0x4a4a28,_0x1e1bfe)=>W[_0xfecd7d(0x783)](_0x4a4a28,_0x1e1bfe)});return _0x2ccd4e['status'](0xc9)['json'](_0x330daa);})[_0xb54381(0x4d3)](this['routerPath'](_0xb54381(0x442)),..._0x3c3f38,async(_0x351313,_0x3cff2a)=>{const _0x5a066b=_0xb54381;let _0x273a11=await this['dataValidate']({'request':_0x351313,'schema':Ba,'ClassRef':Nt,'execute':(_0x4575c0,_0x27cec4)=>W[_0x5a066b(0x442)](_0x4575c0,_0x27cec4)});return _0x3cff2a['status'](0xc9)[_0x5a066b(0x481)](_0x273a11);})[_0xb54381(0x4d3)](this[_0xb54381(0x7bc)](_0xb54381(0x4f2)),..._0x3c3f38,async(_0x4dbc99,_0x124013)=>{const _0x180b6c=_0xb54381;let _0x334d46=await this[_0x180b6c(0x30e)]({'request':_0x4dbc99,'schema':qa,'ClassRef':Et,'execute':(_0x4c77b0,_0x5505f8)=>W[_0x180b6c(0x4f2)](_0x4c77b0,_0x5505f8)});return _0x124013[_0x180b6c(0x15d)](0xc9)[_0x180b6c(0x481)](_0x334d46);})[_0xb54381(0x4d3)](this['routerPath']('sendSticker'),..._0x3c3f38,async(_0x51f3f2,_0x458fe4)=>{const _0x1a824a=_0xb54381;let _0x6c1037=await this[_0x1a824a(0x30e)]({'request':_0x51f3f2,'schema':Ja,'ClassRef':Rt,'execute':(_0x5e779d,_0x3ecf11)=>W[_0x1a824a(0x7d7)](_0x5e779d,_0x3ecf11)});return _0x458fe4['status'](0xc9)['json'](_0x6c1037);});}},Mi=require('express'),xt=class{},Pt=class extends G{constructor(..._0x5e2608){const _0x5a36f1=a0_0x11d42e;super(),this['router']=(0x0,Mi[_0x5a36f1(0x21f)])(),this[_0x5a36f1(0x466)][_0x5a36f1(0x4d3)](this[_0x5a36f1(0x7bc)]('set'),..._0x5e2608,async(_0x459a46,_0x44f3bd)=>{const _0x1e88b7=_0x5a36f1;let _0x3265e1=await this['dataValidate']({'request':_0x459a46,'schema':fi,'ClassRef':xt,'execute':(_0x301972,_0x188c63)=>Os[_0x1e88b7(0x204)](_0x301972,_0x188c63)});_0x44f3bd[_0x1e88b7(0x15d)](0xc9)['json'](_0x3265e1);})[_0x5a36f1(0x686)](this['routerPath'](_0x5a36f1(0x6d7)),..._0x5e2608,async(_0x337ab0,_0x36203a)=>{const _0xae1824=_0x5a36f1;let _0x157955=await this['dataValidate']({'request':_0x337ab0,'schema':N,'ClassRef':C,'execute':_0x4aa89b=>Os['findWebhook'](_0x4aa89b)});_0x36203a[_0xae1824(0x15d)](0xc8)['json'](_0x157955);});}},Ci=require('express'),y=new R('FlowRouter'),Dt=class extends G{constructor(..._0x1538e1){const _0x47cc3e=a0_0x11d42e;super(),this['router']=(0x0,Ci[_0x47cc3e(0x21f)])(),this['router'][_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x828)),..._0x1538e1,async(_0x4e9fb7,_0x4cda22)=>{const _0x13ff14=_0x47cc3e;let _0x35fcd7=_0x4e9fb7[_0x13ff14(0x667)];y[_0x13ff14(0x70a)](_0x13ff14(0x7a8)),y['verbose'](_0x13ff14(0x1a6)),y[_0x13ff14(0x70a)](_0x4e9fb7[_0x13ff14(0x667)]);let _0x16a448=await this[_0x13ff14(0x30e)]({'request':_0x4e9fb7,'schema':N,'ClassRef':C,'execute':_0x47ac3f=>_[_0x13ff14(0x677)](_0x47ac3f,_0x35fcd7)});_0x4cda22['status'](0xc8)[_0x13ff14(0x481)](_0x16a448);})[_0x47cc3e(0x686)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x828)),..._0x1538e1,async(_0x42869a,_0x52a53f)=>{const _0x718bad=_0x47cc3e;let _0xa7b7cc=await this[_0x718bad(0x30e)]({'request':_0x42869a,'schema':N,'ClassRef':C,'execute':_0x257318=>_[_0x718bad(0x58e)](_0x257318)});_0x52a53f[_0x718bad(0x15d)](0xc8)[_0x718bad(0x481)](_0xa7b7cc);})[_0x47cc3e(0x165)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x6c0)),..._0x1538e1,async(_0x1eaf9b,_0x513ae7)=>{const _0x228150=_0x47cc3e;y[_0x228150(0x70a)]('request\x20received\x20in\x20deleteDoneMessages');let _0x3a0766=await this[_0x228150(0x30e)]({'request':_0x1eaf9b,'schema':N,'ClassRef':C,'execute':_0x51db9e=>_[_0x228150(0x6c0)](_0x51db9e)});_0x513ae7[_0x228150(0x15d)](0xc8)['json'](_0x3a0766);})[_0x47cc3e(0x165)](this['routerPath'](_0x47cc3e(0x42a)),..._0x1538e1,async(_0x4db9a6,_0x3b11a3)=>{const _0x5668e5=_0x47cc3e;y['verbose'](_0x5668e5(0x49d));let _0x24c568=await this[_0x5668e5(0x30e)]({'request':_0x4db9a6,'schema':N,'ClassRef':C,'execute':_0x16542a=>_['deleteAllMessages'](_0x16542a)});_0x3b11a3[_0x5668e5(0x15d)](0xc8)['json'](_0x24c568);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x1ac)),..._0x1538e1,async(_0x238338,_0xfba133)=>{const _0x26ddaf=_0x47cc3e;let _0x1e5529=_0x238338[_0x26ddaf(0x667)];y[_0x26ddaf(0x70a)](_0x26ddaf(0x6e1)),y['verbose'](_0x26ddaf(0x1a6)),y[_0x26ddaf(0x70a)](_0x238338['body']);let _0x15ac27=await this[_0x26ddaf(0x30e)]({'request':_0x238338,'schema':N,'ClassRef':C,'execute':_0x4d4307=>_[_0x26ddaf(0x1ac)](_0x4d4307,_0x1e5529)});_0xfba133[_0x26ddaf(0x15d)](0xc8)['json'](_0x15ac27);})['get'](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x3ea)),..._0x1538e1,async(_0x53ad18,_0x553739)=>{const _0x1217a7=_0x47cc3e;y[_0x1217a7(0x70a)](_0x1217a7(0x3fa));let _0x3faa4d=await this['dataValidate']({'request':_0x53ad18,'schema':N,'ClassRef':C,'execute':_0x4455df=>_[_0x1217a7(0x3ea)](_0x4455df)});_0x553739[_0x1217a7(0x15d)](0xc8)[_0x1217a7(0x481)](_0x3faa4d);})[_0x47cc3e(0x686)](this['routerPath'](_0x47cc3e(0x13c)),..._0x1538e1,async(_0xcf6f7f,_0x36e9f8)=>{const _0xfcc43d=_0x47cc3e;y['verbose'](_0xfcc43d(0x8cf));let _0x389331=await this[_0xfcc43d(0x30e)]({'request':_0xcf6f7f,'schema':N,'ClassRef':C,'execute':_0x4788af=>_[_0xfcc43d(0x3ea)](_0x4788af)});_0x36e9f8[_0xfcc43d(0x15d)](0xc8)['json'](_0x389331);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x737)),..._0x1538e1,async(_0x5ef61f,_0x259299)=>{const _0x5bb481=_0x47cc3e;let _0x56d4a4=_0x5ef61f[_0x5bb481(0x667)];y['verbose'](_0x5bb481(0x723)),y['verbose'](_0x5bb481(0x1a6)),y[_0x5bb481(0x70a)](_0x5ef61f['body']);let _0x30c14a=await this['dataValidate']({'request':_0x5ef61f,'schema':N,'ClassRef':C,'execute':_0x25c6dd=>_[_0x5bb481(0x737)](_0x25c6dd,_0x56d4a4)});_0x259299['status'](0xc8)[_0x5bb481(0x481)](_0x30c14a);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x394)),..._0x1538e1,async(_0xabcccb,_0x190b55)=>{const _0x8e2ced=_0x47cc3e;let _0x36a98e=_0xabcccb[_0x8e2ced(0x667)];y['verbose'](_0x8e2ced(0x3e0)),y[_0x8e2ced(0x70a)](_0x8e2ced(0x1a6)),y[_0x8e2ced(0x70a)](_0xabcccb['body']);let _0x5e016e=await this['dataValidate']({'request':_0xabcccb,'schema':N,'ClassRef':C,'execute':_0x1682a5=>_[_0x8e2ced(0x394)](_0x1682a5,_0x36a98e)});_0x190b55[_0x8e2ced(0x15d)](0xc8)[_0x8e2ced(0x481)](_0x5e016e);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x7ff)),..._0x1538e1,async(_0x2b3f07,_0x210414)=>{const _0x59ab37=_0x47cc3e;let _0x34469e=_0x2b3f07['body'];y[_0x59ab37(0x70a)](_0x59ab37(0x212)),y[_0x59ab37(0x70a)](_0x59ab37(0x1a6)),y['verbose'](_0x2b3f07[_0x59ab37(0x667)]);let _0xf986e6=await this['dataValidate']({'request':_0x2b3f07,'schema':N,'ClassRef':C,'execute':_0x1c15ec=>_[_0x59ab37(0x7ff)](_0x1c15ec,_0x34469e)});_0x210414[_0x59ab37(0x15d)](0xc8)[_0x59ab37(0x481)](_0xf986e6);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x172)),..._0x1538e1,async(_0x52f6d4,_0x3950d3)=>{const _0x5a792a=_0x47cc3e;let _0x18eb6a=_0x52f6d4[_0x5a792a(0x667)];y[_0x5a792a(0x70a)](_0x5a792a(0x5a2)),y[_0x5a792a(0x70a)]('request\x20body:\x20'),y[_0x5a792a(0x70a)](_0x52f6d4['body']);let _0x35e9ab=await this[_0x5a792a(0x30e)]({'request':_0x52f6d4,'schema':N,'ClassRef':C,'execute':_0x3fafa4=>_[_0x5a792a(0x172)](_0x3fafa4,_0x18eb6a)});_0x3950d3[_0x5a792a(0x15d)](0xc8)[_0x5a792a(0x481)](_0x35e9ab);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)]('getConversation'),..._0x1538e1,async(_0x473b97,_0x5a75bf)=>{const _0x284d08=_0x47cc3e;let _0x3969fd=_0x473b97[_0x284d08(0x667)];y[_0x284d08(0x70a)](_0x284d08(0x22e)),y[_0x284d08(0x70a)](_0x284d08(0x1a6)),y[_0x284d08(0x70a)](_0x473b97[_0x284d08(0x667)]);let _0x3d5789=await this[_0x284d08(0x30e)]({'request':_0x473b97,'schema':N,'ClassRef':C,'execute':_0x5471e3=>_['getConversation'](_0x5471e3,_0x3969fd)});_0x5a75bf[_0x284d08(0x15d)](0xc8)[_0x284d08(0x481)](_0x3d5789);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x6cb)),..._0x1538e1,async(_0x2c5133,_0x556009)=>{const _0x4ff579=_0x47cc3e;let _0x1a916c=_0x2c5133[_0x4ff579(0x667)];y[_0x4ff579(0x70a)]('request\x20received\x20in\x20fetchConversation'),y[_0x4ff579(0x70a)](_0x4ff579(0x1a6)),y[_0x4ff579(0x70a)](_0x2c5133[_0x4ff579(0x667)]);let _0x4f3e96=await this[_0x4ff579(0x30e)]({'request':_0x2c5133,'schema':N,'ClassRef':C,'execute':_0x5622e7=>_[_0x4ff579(0x6cb)](_0x5622e7,_0x1a916c)});_0x556009[_0x4ff579(0x15d)](0xc8)['json'](_0x4f3e96);})['post'](this['routerPath'](_0x47cc3e(0x68d)),..._0x1538e1,async(_0x108641,_0x459b1f)=>{const _0x6427e0=_0x47cc3e;let _0x320186=_0x108641[_0x6427e0(0x667)];y[_0x6427e0(0x70a)]('request\x20received\x20in\x20editConversation'),y[_0x6427e0(0x70a)](_0x6427e0(0x1a6)),y[_0x6427e0(0x70a)](_0x108641[_0x6427e0(0x667)]);let _0x56c851=await this['dataValidate']({'request':_0x108641,'schema':N,'ClassRef':C,'execute':_0x2e985d=>_['editConversation'](_0x2e985d,_0x320186)});_0x459b1f[_0x6427e0(0x15d)](0xc8)[_0x6427e0(0x481)](_0x56c851);})['delete'](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x409)),..._0x1538e1,async(_0x568b13,_0x35b7b4)=>{const _0x4774a1=_0x47cc3e;let _0x353d3e=_0x568b13[_0x4774a1(0x667)];y[_0x4774a1(0x70a)](_0x4774a1(0x1b3)),y[_0x4774a1(0x70a)](_0x4774a1(0x1a6)),y[_0x4774a1(0x70a)](_0x568b13['body']);let _0x3d8d0b=await this[_0x4774a1(0x30e)]({'request':_0x568b13,'schema':N,'ClassRef':C,'execute':_0x4e46fb=>_[_0x4774a1(0x409)](_0x4e46fb,_0x353d3e)});_0x35b7b4['status'](0xc8)['json'](_0x3d8d0b);})[_0x47cc3e(0x4d3)](this['routerPath']('createflow'),..._0x1538e1,async(_0x5ec87e,_0x269548)=>{const _0x5ed466=_0x47cc3e;let _0x3c156e=_0x5ec87e[_0x5ed466(0x667)],_0x2031d2=_0x5ec87e[_0x5ed466(0x335)]['apikey'];y[_0x5ed466(0x70a)](_0x5ed466(0x530)),y['verbose'](_0x5ed466(0x1a6)),y[_0x5ed466(0x70a)](_0x5ec87e[_0x5ed466(0x667)]);let _0x19eed3=await this[_0x5ed466(0x30e)]({'request':_0x5ec87e,'schema':N,'ClassRef':C,'execute':_0x22282a=>_[_0x5ed466(0x70c)](_0x22282a,_0x3c156e,_0x2031d2)});_0x269548[_0x5ed466(0x15d)](0xc8)['json'](_0x19eed3);})['post'](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x2a1)),..._0x1538e1,async(_0x336bf4,_0x28932c)=>{const _0x206791=_0x47cc3e;let _0x2a5f1e=_0x336bf4[_0x206791(0x667)],_0x51c36e=_0x336bf4[_0x206791(0x335)][_0x206791(0x472)];y[_0x206791(0x70a)](_0x206791(0x1c7)),y['verbose'](_0x206791(0x1a6)),y[_0x206791(0x70a)](_0x336bf4[_0x206791(0x667)]),delete _0x2a5f1e['blocks'],delete _0x2a5f1e[_0x206791(0x563)],delete _0x2a5f1e[_0x206791(0x4f5)],delete _0x2a5f1e[_0x206791(0x523)];let _0xffafc9=await this['dataValidate']({'request':_0x336bf4,'schema':N,'ClassRef':C,'execute':_0x3a35d7=>_[_0x206791(0x4da)](_0x3a35d7,_0x2a5f1e,_0x51c36e)});_0x28932c[_0x206791(0x15d)](0xc8)['json'](_0xffafc9);})[_0x47cc3e(0x4d3)](this['routerPath']('editflowblock'),..._0x1538e1,async(_0x3632e1,_0x250758)=>{const _0x4953d2=_0x47cc3e;let _0xd8b131=_0x3632e1[_0x4953d2(0x667)];y[_0x4953d2(0x70a)](_0x4953d2(0x1c7)),y['verbose'](_0x4953d2(0x1a6)),y[_0x4953d2(0x70a)](_0x3632e1['body']);let _0x51474c=await this[_0x4953d2(0x30e)]({'request':_0x3632e1,'schema':N,'ClassRef':C,'execute':_0x357a1d=>_[_0x4953d2(0x7be)](_0x357a1d,_0xd8b131)});_0x250758[_0x4953d2(0x15d)](0xc8)[_0x4953d2(0x481)](_0x51474c);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)]('editflowreply'),..._0x1538e1,async(_0x373acc,_0x1a13d2)=>{const _0x5b4922=_0x47cc3e;let _0xb9a0d7=_0x373acc['body'];y[_0x5b4922(0x70a)](_0x5b4922(0x1c7)),y[_0x5b4922(0x70a)](_0x5b4922(0x1a6)),y[_0x5b4922(0x70a)](_0x373acc['body']);let _0x3ddc19=await this['dataValidate']({'request':_0x373acc,'schema':N,'ClassRef':C,'execute':_0x49c77b=>_[_0x5b4922(0x58d)](_0x49c77b,_0xb9a0d7)});_0x1a13d2[_0x5b4922(0x15d)](0xc8)[_0x5b4922(0x481)](_0x3ddc19);})['post'](this[_0x47cc3e(0x7bc)]('editflowvaredit'),..._0x1538e1,async(_0x312686,_0xbaae48)=>{const _0x5677e8=_0x47cc3e;let _0x1fd7ae=_0x312686['body'];y[_0x5677e8(0x70a)](_0x5677e8(0x1c7)),y[_0x5677e8(0x70a)]('request\x20body:\x20'),y[_0x5677e8(0x70a)](_0x312686[_0x5677e8(0x667)]);let _0x5c136d=await this[_0x5677e8(0x30e)]({'request':_0x312686,'schema':N,'ClassRef':C,'execute':_0x4e08d2=>_['editFlowVaredit'](_0x4e08d2,_0x1fd7ae)});_0xbaae48[_0x5677e8(0x15d)](0xc8)['json'](_0x5c136d);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x1c5)),..._0x1538e1,async(_0x47139e,_0x2a8ef6)=>{const _0x59faab=_0x47cc3e;let _0x5dadfe=_0x47139e[_0x59faab(0x667)];y[_0x59faab(0x70a)]('request\x20received\x20in\x20editFlowgroup'),y[_0x59faab(0x70a)](_0x59faab(0x1a6)),y[_0x59faab(0x70a)](_0x47139e[_0x59faab(0x667)]);let _0x3012d9=await this[_0x59faab(0x30e)]({'request':_0x47139e,'schema':N,'ClassRef':C,'execute':_0x446207=>_[_0x59faab(0x7ae)](_0x446207,_0x5dadfe)});_0x2a8ef6[_0x59faab(0x15d)](0xc8)[_0x59faab(0x481)](_0x3012d9);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x717)),..._0x1538e1,async(_0x30c16b,_0x1d54ec)=>{const _0x5e6aca=_0x47cc3e;let _0x36ec34=_0x30c16b[_0x5e6aca(0x667)];y[_0x5e6aca(0x70a)]('request\x20received\x20in\x20editFlowcondition'),y[_0x5e6aca(0x70a)](_0x5e6aca(0x1a6)),y['verbose'](_0x30c16b[_0x5e6aca(0x667)]);let _0x60a2f=await this['dataValidate']({'request':_0x30c16b,'schema':N,'ClassRef':C,'execute':_0x38a433=>_['editFlowCondition'](_0x38a433,_0x36ec34)});_0x1d54ec[_0x5e6aca(0x15d)](0xc8)[_0x5e6aca(0x481)](_0x60a2f);})[_0x47cc3e(0x4d3)](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x651)),..._0x1538e1,async(_0x5bc858,_0x4486cd)=>{const _0x912526=_0x47cc3e;let _0x2922b4=_0x5bc858['body'];y['verbose']('request\x20received\x20in\x20editFlowvariable'),y[_0x912526(0x70a)](_0x912526(0x1a6)),y[_0x912526(0x70a)](_0x5bc858[_0x912526(0x667)]);let _0x1c6638=await this['dataValidate']({'request':_0x5bc858,'schema':N,'ClassRef':C,'execute':_0xfaa094=>_[_0x912526(0x2e0)](_0xfaa094,_0x2922b4)});_0x4486cd[_0x912526(0x15d)](0xc8)[_0x912526(0x481)](_0x1c6638);})['post'](this[_0x47cc3e(0x7bc)](_0x47cc3e(0x631)),..._0x1538e1,async(_0x38a147,_0x26f39c)=>{const _0x4255dd=_0x47cc3e;let _0x4cf595=_0x38a147[_0x4255dd(0x667)];y[_0x4255dd(0x70a)](_0x4255dd(0x38f)),y[_0x4255dd(0x70a)](_0x4255dd(0x1a6)),y[_0x4255dd(0x70a)](_0x38a147[_0x4255dd(0x667)]);let _0x1daf4b=await this['dataValidate']({'request':_0x38a147,'schema':N,'ClassRef':C,'execute':_0x41cf0d=>_[_0x4255dd(0x15f)](_0x41cf0d,_0x4cf595)});_0x26f39c[_0x4255dd(0x15d)](0xc8)[_0x4255dd(0x481)](_0x1daf4b);})[_0x47cc3e(0x165)](this[_0x47cc3e(0x7bc)]('deleteflow'),..._0x1538e1,async(_0xcc3b82,_0x1246a8)=>{const _0x4ff2df=_0x47cc3e;let _0x865cd8=_0xcc3b82[_0x4ff2df(0x667)];y[_0x4ff2df(0x70a)](_0x4ff2df(0x5cc)),y[_0x4ff2df(0x70a)]('request\x20body:\x20'),y['verbose'](_0xcc3b82['body']);let _0x57df1b=await this[_0x4ff2df(0x30e)]({'request':_0xcc3b82,'schema':N,'ClassRef':C,'execute':_0x26ff68=>_['deleteFlow'](_0x26ff68,_0x865cd8)});_0x1246a8['status'](0xc8)['json'](_0x57df1b);})[_0x47cc3e(0x686)](this['routerPath'](_0x47cc3e(0x7bb)),..._0x1538e1,async(_0x2fd19c,_0x5f3643)=>{const _0x5f0395=_0x47cc3e;y[_0x5f0395(0x70a)]('request\x20received\x20in\x20allFlows');let _0x4b4783=await this['dataValidate']({'request':_0x2fd19c,'schema':N,'ClassRef':C,'execute':_0xc2c64a=>_['allFlows'](_0xc2c64a)});_0x5f3643['status'](0xc8)['json'](_0x4b4783);});}},$i=I(require(a0_0x11d42e(0x37b))),te={};function vi(_0x433213,_0x24f244,_0x1730f6,_0x370608){te[_0x433213]||(te[_0x433213]={}),te[_0x433213][_0x24f244]={'id':_0x24f244,'response':_0x1730f6,'events':_0x370608};}function Ei(_0x2e7a98,_0x19e7da){!te[_0x2e7a98]||!te[_0x2e7a98][_0x19e7da]||delete te[_0x2e7a98][_0x19e7da];}function F(_0x4c54d7,_0x3d0cce,_0x203e9e){const _0x200238=a0_0x11d42e;if(!te[_0x4c54d7])return;let _0x401169=_0x200238(0x7ba)+JSON[_0x200238(0x7b9)](_0x203e9e)+'\x0a\x0a';Object[_0x200238(0x76d)](te[_0x4c54d7])[_0x200238(0x46a)](_0x3ea49a=>{const _0x4757f0=_0x200238;_0x3ea49a['events']['includes'](_0x3d0cce)&&_0x3ea49a[_0x4757f0(0x41c)][_0x4757f0(0x8c8)](_0x401169);});}function Ni(){const _0x348b7f=a0_0x11d42e;let _0x59a45a={};for(let _0x25fc1c in te)_0x59a45a[_0x25fc1c]=Object['values'](te[_0x25fc1c])[_0x348b7f(0x4f6)](_0x4e1de0=>({'id':_0x4e1de0['id'],'events':_0x4e1de0[_0x348b7f(0x865)]}));return _0x59a45a;}var Ri=require(a0_0x11d42e(0x532)),Ps=require(a0_0x11d42e(0x2de)),xs=class{},xo=new Ps[(a0_0x11d42e(0x224))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),Po=new Ps[(a0_0x11d42e(0x224))]({'_id':{'type':String,'default':a0_0x11d42e(0x599)},'WebhookGlobal':{'type':xo},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ne=T?.[a0_0x11d42e(0x650)](xs[a0_0x11d42e(0x414)],Po,a0_0x11d42e(0x2df)),Do=$i[a0_0x11d42e(0x3de)][a0_0x11d42e(0x7f4)](__dirname,a0_0x11d42e(0x24c)),Ue=(0x0,kt['Router'])(),ko=S[a0_0x11d42e(0x686)](a0_0x11d42e(0x6e5))['TYPE'],oe=[xa,Pa,La[ko]];Ue[a0_0x11d42e(0x498)](a0_0x11d42e(0x4c5),kt[a0_0x11d42e(0x3de)]['static'](Do))[a0_0x11d42e(0x686)](a0_0x11d42e(0x835),async(_0x59634c,_0x14f978)=>{const _0x499f9b=a0_0x11d42e;console[_0x499f9b(0x86e)](_0x499f9b(0x196));let _0x5dedb6=_0x59634c[_0x499f9b(0x76b)][_0x499f9b(0x22f)],_0x466529=(_0x59634c[_0x499f9b(0x802)][_0x499f9b(0x865)]||'')['split'](','),_0x197281=(0x0,Ri['v4'])();console[_0x499f9b(0x86e)](_0x499f9b(0x6cc),_0x5dedb6),console[_0x499f9b(0x86e)](_0x499f9b(0x4e3),_0x466529);let _0x2b5725=S['get'](_0x499f9b(0x6e5))[_0x499f9b(0x5b4)],_0x13af7a=_0x59634c[_0x499f9b(0x802)][_0x499f9b(0x472)];if(console['log'](_0x499f9b(0x7c8),_0x13af7a),_0x2b5725['KEY']!==_0x13af7a){console[_0x499f9b(0x86e)](_0x499f9b(0x701));try{let _0x565723=await we[_0x499f9b(0x44a)][_0x499f9b(0x6d7)](_0x5dedb6);if(console[_0x499f9b(0x86e)](_0x499f9b(0x1f2),_0x565723),!_0x565723||_0x565723['apikey']!==_0x13af7a)return console[_0x499f9b(0x86e)]('API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!'),_0x14f978['status'](0x191)['send'](_0x499f9b(0x2ee));}catch(_0x4e7bbd){return console['error']('Error\x20retrieving\x20instance\x20or\x20API\x20Key:',_0x4e7bbd),_0x14f978[_0x499f9b(0x15d)](0x191)[_0x499f9b(0x8bf)](_0x499f9b(0x398));}}if(!await Pe(_0x5dedb6))return _0x14f978[_0x499f9b(0x15d)](0x194)[_0x499f9b(0x8bf)](_0x499f9b(0x697));_0x14f978[_0x499f9b(0x521)](_0x499f9b(0x647),'text/event-stream'),_0x14f978[_0x499f9b(0x521)](_0x499f9b(0x27e),_0x499f9b(0x89d)),_0x14f978['setHeader'](_0x499f9b(0x7ee),_0x499f9b(0x291)),_0x14f978[_0x499f9b(0x870)]();let _0x48076f=_0x499f9b(0x7ba)+JSON[_0x499f9b(0x7b9)]({'info':_0x499f9b(0x4a8)})+'\x0a\x0a';_0x14f978[_0x499f9b(0x8c8)](_0x48076f),vi(_0x5dedb6,_0x197281,_0x14f978,_0x466529),_0x59634c['on'](_0x499f9b(0x85f),()=>{const _0x3412ed=_0x499f9b;console[_0x3412ed(0x86e)](_0x3412ed(0x580)+_0x5dedb6),Ei(_0x5dedb6,_0x197281);});}),Ue[a0_0x11d42e(0x4d3)]('/startFlow/:instance/:startID',async(_0x4547b2,_0xfddd7d)=>{const _0x1a77ac=a0_0x11d42e;console['log']('iniciando\x20fluxo\x20router');let _0x169263=_0x4547b2[_0x1a77ac(0x76b)]['instance'],_0x20f6ac=_0x4547b2[_0x1a77ac(0x76b)][_0x1a77ac(0x484)],_0x591f3f=_0x4547b2['query'][_0x1a77ac(0x33f)]||'',_0x46a45a=_0x4547b2[_0x1a77ac(0x667)];console['log']('Instance\x20Name:',_0x169263),console['log'](_0x1a77ac(0x1e9),_0x20f6ac),console['log'](_0x1a77ac(0x3fc),_0x591f3f),console[_0x1a77ac(0x86e)](_0x1a77ac(0x6ae),_0x46a45a);try{if(!await Pe(_0x169263))return _0xfddd7d['status'](0x194)[_0x1a77ac(0x8bf)](_0x1a77ac(0x697));let _0x3fb4a4=await _[_0x1a77ac(0x3e7)](_0x169263,_0x20f6ac,_0x591f3f,_0x46a45a);_0xfddd7d[_0x1a77ac(0x8bf)](_0x3fb4a4);}catch(_0x1af4d6){console['error'](_0x1af4d6),_0xfddd7d[_0x1a77ac(0x15d)](0x1f4)[_0x1a77ac(0x8bf)](_0x1a77ac(0x809));}}),Ue[a0_0x11d42e(0x686)]('/clients-info',(_0xea91e2,_0x46907c)=>{const _0x189c1c=a0_0x11d42e;let _0x2391bf=Ni();_0x46907c[_0x189c1c(0x481)](_0x2391bf);})[a0_0x11d42e(0x686)]('/',(_0x3989c2,_0x1aa570)=>{const _0x2695f9=a0_0x11d42e;let _0x3c4748=S[_0x2695f9(0x686)]('SERVER')[_0x2695f9(0x3b0)];if(_0x3c4748){let _0x178078=encodeURIComponent(''+_0x3c4748);_0x1aa570[_0x2695f9(0x3ee)](_0x2695f9(0x25a)+_0x178078);return;}let _0x2a6789=S[_0x2695f9(0x686)](_0x2695f9(0x836)),_0x5aa29d=_0x2a6789&&_0x2a6789[_0x2695f9(0x842)][_0x2695f9(0x597)]('/')[0x4];if(_0x5aa29d){let _0xbc32db=encodeURIComponent(_0x2695f9(0x23b)+_0x5aa29d);_0x1aa570['redirect'](_0x2695f9(0x25a)+_0xbc32db);}else _0x1aa570['redirect'](_0x2695f9(0x5f2));})['put'](a0_0x11d42e(0x22b),...oe,async(_0x16f8db,_0x43bd7e)=>{const _0x4e94a4=a0_0x11d42e;try{console[_0x4e94a4(0x86e)](_0x4e94a4(0x36a)),_0x43bd7e[_0x4e94a4(0x15d)](0xc8)[_0x4e94a4(0x481)]({'message':'API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos'}),_0x43bd7e['on'](_0x4e94a4(0x4de),()=>process[_0x4e94a4(0x3ff)](0x0));}catch(_0x54fc48){console['error']('Erro\x20ao\x20tentar\x20encerrar\x20a\x20API',_0x54fc48),_0x43bd7e[_0x4e94a4(0x15d)](0x1f4)[_0x4e94a4(0x481)]({'message':'Erro\x20ao\x20encerrar\x20a\x20API'});}})[a0_0x11d42e(0x4af)](a0_0x11d42e(0x220),...oe,async(_0x181d7c,_0x43f0e7)=>{const _0x4905c8=a0_0x11d42e;try{let _0x90d731=_0x181d7c['body'];await Ne[_0x4905c8(0x793)]({},{'$set':_0x90d731},{'upsert':!0x0});let _0x1ac3c1=await Ne[_0x4905c8(0x588)]();_0x43f0e7[_0x4905c8(0x481)](_0x1ac3c1);}catch(_0x3cdc42){_0x43f0e7['status'](0x190)[_0x4905c8(0x8bf)](_0x3cdc42[_0x4905c8(0x5a8)]);}})[a0_0x11d42e(0x686)](a0_0x11d42e(0x220),...oe,async(_0x30ad8c,_0x5538b3)=>{const _0x187638=a0_0x11d42e;try{let _0x3bdcb5=await Ne[_0x187638(0x588)]();if(!_0x3bdcb5)return _0x5538b3[_0x187638(0x481)]({});_0x5538b3['json'](_0x3bdcb5);}catch(_0x49c372){_0x5538b3[_0x187638(0x15d)](0x1f4)[_0x187638(0x8bf)](_0x49c372[_0x187638(0x5a8)]);}})['use'](a0_0x11d42e(0x1c2),new Ct(S,...oe)[a0_0x11d42e(0x466)])[a0_0x11d42e(0x498)](a0_0x11d42e(0x754),new Ot(...oe)[a0_0x11d42e(0x466)])[a0_0x11d42e(0x498)]('/chat',new pt(...oe)[a0_0x11d42e(0x466)])[a0_0x11d42e(0x498)](a0_0x11d42e(0x4e5),new Mt(...oe)[a0_0x11d42e(0x466)])[a0_0x11d42e(0x498)](a0_0x11d42e(0x514),new Pt(...oe)[a0_0x11d42e(0x466)])[a0_0x11d42e(0x498)](a0_0x11d42e(0x45f),new Dt(...oe)[a0_0x11d42e(0x466)]);var m=class{constructor(..._0x58954f){const _0x95ed43=a0_0x11d42e;throw{'status':0x190,'error':_0x95ed43(0x5f4),'message':_0x58954f['length']>0x0?_0x58954f:void 0x0};}},ae=class{constructor(..._0x262c30){const _0x22dbc6=a0_0x11d42e;throw{'status':0x191,'error':_0x22dbc6(0x1bd),'message':_0x262c30[_0x22dbc6(0x57a)]>0x0?_0x262c30:void 0x0};}},X=class{constructor(..._0x6ed22c){const _0x395f16=a0_0x11d42e;throw{'status':0x193,'error':'Forbidden','message':_0x6ed22c[_0x395f16(0x57a)]>0x0?_0x6ed22c:void 0x0};}},U=class{constructor(..._0xc5d4f9){const _0x22fc77=a0_0x11d42e;throw{'status':0x194,'error':_0x22fc77(0x3f5),'message':_0xc5d4f9['length']>0x0?_0xc5d4f9:void 0x0};}},x=class{constructor(..._0x1f81e1){const _0x4fbd5b=a0_0x11d42e;throw{'status':0x1f4,'error':_0x4fbd5b(0x1aa),'message':_0x1f81e1[_0x4fbd5b(0x57a)]>0x0?_0x1f81e1:void 0x0};}},ye=require(a0_0x11d42e(0x73b));async function Ds(_0x593a7){const _0x38efba=a0_0x11d42e;let _0x4e1583=new R(Ds[_0x38efba(0x414)]),_0x8af47e=T[_0x38efba(0x511)](),_0x1830d6=_0x8af47e['db'](S[_0x38efba(0x686)](_0x38efba(0x683))[_0x38efba(0x3c6)][_0x38efba(0x719)]+'-instances')[_0x38efba(0x2cc)](_0x593a7),_0x26c147=async(_0x4987b7,_0x355a5c)=>{const _0x279c22=_0x38efba;try{return await _0x8af47e[_0x279c22(0x6ca)](),await _0x1830d6[_0x279c22(0x246)]({'_id':_0x355a5c},JSON['parse'](JSON[_0x279c22(0x7b9)](_0x4987b7,ye[_0x279c22(0x1ee)][_0x279c22(0x207)])),{'upsert':!0x0});}catch{}},_0x2248ce=async _0x1d5399=>{const _0x20e58b=_0x38efba;try{await _0x8af47e[_0x20e58b(0x6ca)]();let _0x5aed5b=await _0x1830d6[_0x20e58b(0x588)]({'_id':_0x1d5399}),_0x1c234b=JSON[_0x20e58b(0x7b9)](_0x5aed5b);return JSON['parse'](_0x1c234b,ye[_0x20e58b(0x1ee)][_0x20e58b(0x638)]);}catch{}},_0x223a14=async _0x11e871=>{const _0x16ebe1=_0x38efba;try{return await _0x8af47e['connect'](),await _0x1830d6[_0x16ebe1(0x315)]({'_id':_0x11e871});}catch{}},_0x5a2639=await _0x2248ce(_0x38efba(0x3ab))||(0x0,ye[_0x38efba(0x3d4)])();return{'state':{'creds':_0x5a2639,'keys':{'get':async(_0xe5785,_0x52e2a2)=>{const _0x17e3f7=_0x38efba;let _0x2ad392={};return await Promise['all'](_0x52e2a2[_0x17e3f7(0x4f6)](async _0x501b38=>{const _0x4c9fc1=_0x17e3f7;let _0x4d1c9b=await _0x2248ce(_0xe5785+'-'+_0x501b38);_0xe5785===_0x4c9fc1(0x5a7)&&_0x4d1c9b&&(_0x4d1c9b=ye[_0x4c9fc1(0x815)][_0x4c9fc1(0x2bc)][_0x4c9fc1(0x145)][_0x4c9fc1(0x461)](_0x4d1c9b)),_0x2ad392[_0x501b38]=_0x4d1c9b;})),_0x2ad392;},'set':async _0x5b9ce6=>{const _0x328b2a=_0x38efba;let _0x52a521=[];for(let _0x1ea0c1 in _0x5b9ce6)for(let _0x45f109 in _0x5b9ce6[_0x1ea0c1]){let _0x587df6=_0x5b9ce6[_0x1ea0c1][_0x45f109],_0xd6bd91=_0x1ea0c1+'-'+_0x45f109;_0x52a521[_0x328b2a(0x64a)](_0x587df6?_0x26c147(_0x587df6,_0xd6bd91):_0x223a14(_0xd6bd91));}await Promise[_0x328b2a(0x1c6)](_0x52a521);}}},'saveCreds':async()=>_0x26c147(_0x5a2639,_0x38efba(0x3ab))};}var Js=I(require(a0_0x11d42e(0x2e8))),qs=I(require(a0_0x11d42e(0x3c8))),Ut=require('@whiskeysockets/baileys'),Ai=require(a0_0x11d42e(0x764)),Ft=require(a0_0x11d42e(0x73b)),Lt;function Lo(_0x4d73a9){const _0x425b2f=a0_0x11d42e;return Lt||(Lt=(0x0,Ai[_0x425b2f(0x4cc)])({'url':_0x4d73a9[_0x425b2f(0x4d8)]}),Lt[_0x425b2f(0x6ca)]()),Lt;}var de=class l{constructor(_0x5af160,_0x289f91){const _0x4693b4=a0_0x11d42e;this['redisEnv']=_0x5af160,this['instanceName']=_0x289f91,this['logger']=new R(l[_0x4693b4(0x414)]),this[_0x4693b4(0x60c)]=Lo(_0x5af160);}set[a0_0x11d42e(0x3b2)](_0x4671e7){this['instanceName']=_0x4671e7;}async[a0_0x11d42e(0x4db)](){const _0x93c942=a0_0x11d42e;try{return await this[_0x93c942(0x60c)][_0x93c942(0x3bb)]([_0x93c942(0x813),this['redisEnv'][_0x93c942(0x7ce)]+':*']);}catch(_0x15e93f){this[_0x93c942(0x85a)][_0x93c942(0x7bf)](_0x15e93f);}}async[a0_0x11d42e(0x33e)](_0x4a6a35,_0x399a12){const _0x195a75=a0_0x11d42e;try{let _0x2e1618=JSON[_0x195a75(0x7b9)](_0x399a12,Ft[_0x195a75(0x1ee)]['replacer']);return await this[_0x195a75(0x60c)][_0x195a75(0x130)](this[_0x195a75(0x1da)]['PREFIX_KEY']+':'+this[_0x195a75(0x7ec)],_0x4a6a35,_0x2e1618);}catch(_0x44af2d){this[_0x195a75(0x85a)][_0x195a75(0x7bf)](_0x44af2d);}}async[a0_0x11d42e(0x4aa)](){const _0x1955b1=a0_0x11d42e;try{let _0x3342fd=await this[_0x1955b1(0x60c)][_0x1955b1(0x40b)](this[_0x1955b1(0x1da)][_0x1955b1(0x7ce)]+':'+this[_0x1955b1(0x7ec)]);if(_0x3342fd){for(let _0x58c393 in _0x3342fd)Object[_0x1955b1(0x502)][_0x1955b1(0x2d4)][_0x1955b1(0x3f0)](_0x3342fd,_0x58c393)&&(_0x3342fd[_0x58c393]=JSON['parse'](_0x3342fd[_0x58c393],Ft[_0x1955b1(0x1ee)][_0x1955b1(0x638)]));return _0x3342fd;}}catch(_0x51f34e){this[_0x1955b1(0x85a)][_0x1955b1(0x7bf)](_0x51f34e);}}async[a0_0x11d42e(0x299)](_0x2d1b88){const _0x87aa51=a0_0x11d42e;try{let _0x2eea93=await this[_0x87aa51(0x60c)]['hGet'](this['redisEnv']['PREFIX_KEY']+':'+this[_0x87aa51(0x7ec)],_0x2d1b88);if(_0x2eea93)return JSON[_0x87aa51(0x5c7)](_0x2eea93,Ft[_0x87aa51(0x1ee)]['reviver']);}catch(_0x4c6123){this[_0x87aa51(0x85a)][_0x87aa51(0x7bf)](_0x4c6123);}}async[a0_0x11d42e(0x730)](_0xf42082){const _0x137b64=a0_0x11d42e;try{return await this[_0x137b64(0x60c)]['hDel'](this[_0x137b64(0x1da)]['PREFIX_KEY']+':'+this['instanceName'],_0xf42082);}catch(_0x35aaaa){this[_0x137b64(0x85a)][_0x137b64(0x7bf)](_0x35aaaa);}}async['delAll'](_0x62dc73){const _0x1001ff=a0_0x11d42e;try{return await this[_0x1001ff(0x60c)]['del'](_0x62dc73||this[_0x1001ff(0x1da)][_0x1001ff(0x7ce)]+':'+this[_0x1001ff(0x7ec)]);}catch(_0x75639f){this[_0x1001ff(0x85a)][_0x1001ff(0x7bf)](_0x75639f);}}};async function ks(_0x31a593,_0x496444){const _0x1de7f9=a0_0x11d42e;let _0x161fe3=new R(ks[_0x1de7f9(0x414)]),_0x581c7d=new de(_0x31a593,_0x496444),_0x25cb8a=async(_0x1ae0b8,_0x9b3ea2)=>{const _0x267de3=_0x1de7f9;try{return await _0x581c7d['writeData'](_0x9b3ea2,_0x1ae0b8);}catch(_0x4b820f){return _0x161fe3[_0x267de3(0x7bf)]({'localError':_0x267de3(0x33e),'error':_0x4b820f});}},_0x503e32=async _0x28f41d=>{const _0x5f5513=_0x1de7f9;try{return await _0x581c7d[_0x5f5513(0x299)](_0x28f41d);}catch(_0x527774){_0x161fe3[_0x5f5513(0x7bf)]({'readData':_0x5f5513(0x33e),'error':_0x527774});return;}},_0x312cbb=async _0x566ba2=>{const _0x64e17e=_0x1de7f9;try{return await _0x581c7d[_0x64e17e(0x730)](_0x566ba2);}catch(_0x72b6a0){_0x161fe3[_0x64e17e(0x7bf)]({'readData':_0x64e17e(0x730),'error':_0x72b6a0});}},_0x320e1a=await _0x503e32('creds')||(0x0,Ut[_0x1de7f9(0x3d4)])();return{'state':{'creds':_0x320e1a,'keys':{'get':async(_0x3483dd,_0x25e068)=>{const _0x4825bd=_0x1de7f9;let _0x1720cc={};return await Promise[_0x4825bd(0x1c6)](_0x25e068['map'](async _0x3edf3c=>{const _0x47d0cc=_0x4825bd;let _0x180d07=await _0x503e32(_0x3483dd+'-'+_0x3edf3c);_0x3483dd===_0x47d0cc(0x5a7)&&_0x180d07&&(_0x180d07=Ut[_0x47d0cc(0x815)][_0x47d0cc(0x2bc)][_0x47d0cc(0x145)][_0x47d0cc(0x461)](_0x180d07)),_0x1720cc[_0x3edf3c]=_0x180d07;})),_0x1720cc;},'set':async _0x230d88=>{const _0x8c8edc=_0x1de7f9;let _0x44d869=[];for(let _0x3be05c in _0x230d88)for(let _0xf7978d in _0x230d88[_0x3be05c]){let _0x461f81=_0x230d88[_0x3be05c][_0xf7978d],_0x453799=_0x3be05c+'-'+_0xf7978d;_0x44d869[_0x8c8edc(0x64a)](_0x461f81?await _0x25cb8a(_0x461f81,_0x453799):await _0x312cbb(_0x453799));}await Promise[_0x8c8edc(0x1c6)](_0x44d869);}}},'saveCreds':async()=>await _0x25cb8a(_0x320e1a,_0x1de7f9(0x3ab))};}var k=I(require('fs')),Q=require(a0_0x11d42e(0x532)),qt=I(require(a0_0x11d42e(0x3e3))),re=require(a0_0x11d42e(0x323)),Ti=require(a0_0x11d42e(0x1cd)),Ii=require(a0_0x11d42e(0x506)),_i=I(require(a0_0x11d42e(0x48e))),$e=class extends O{constructor(_0x22dcb6,_0x30e520,_0x3fba31){const _0x331618=a0_0x11d42e;super(_0x30e520),this[_0x331618(0x789)]=_0x22dcb6,this[_0x331618(0x155)]=_0x30e520,this[_0x331618(0x494)]=_0x3fba31;}async[a0_0x11d42e(0x5a1)](_0x2dd5e6,_0x63d34a){const _0x442cc8=a0_0x11d42e;try{if(this[_0x442cc8(0x390)]['ENABLED']){console[_0x442cc8(0x86e)](_0x442cc8(0x709)+_0x63d34a+_0x442cc8(0x899),_0x2dd5e6);let _0x1f30a0=await this[_0x442cc8(0x789)][_0x442cc8(0x791)]({'_id':_0x63d34a},{'$set':_0x2dd5e6},{'new':!0x0,'upsert':!0x0});return console[_0x442cc8(0x86e)](_0x442cc8(0x3e4),_0x1f30a0),_0x1f30a0;}}catch(_0x28d28a){throw console[_0x442cc8(0x7bf)]('Erro\x20ao\x20atualizar\x20cacheInstance:',_0x28d28a),_0x28d28a;}return null;}async[a0_0x11d42e(0x315)](_0x487565){const _0x1bad11=a0_0x11d42e;try{let _0x2666ef=A(_0x487565[_0x1bad11(0x2e2)]);return{'deletedCount':(await this[_0x1bad11(0x789)][_0x1bad11(0x315)](_0x2666ef))[_0x1bad11(0x5ae)]};}catch(_0x102f91){return{'error':_0x102f91?.[_0x1bad11(0x1d7)]()};}}async['findOne'](_0x4e98ff){const _0x5bbdc0=a0_0x11d42e;try{let _0x198cab=A(_0x4e98ff[_0x5bbdc0(0x2e2)]);return await this['cacheInstanceModel'][_0x5bbdc0(0x588)](_0x198cab)[_0x5bbdc0(0x285)]();}catch{return null;}}},Re=(0x0,Ii[a0_0x11d42e(0x1a1)])(Ti['exec']),Ls=0x1f4,Fo=S[a0_0x11d42e(0x686)]('PROXY'),Fs=class{constructor(){const _0x1e3e1f=a0_0x11d42e;this[_0x1e3e1f(0x859)]=new $e(Ke,S),(!this['ipv6Prefix']||!this[_0x1e3e1f(0x29c)])&&Fo&&this[_0x1e3e1f(0x408)]()['then'](async()=>{const _0x38502c=_0x1e3e1f;console[_0x38502c(0x86e)](_0x38502c(0x2fc)+this[_0x38502c(0x744)]),console[_0x38502c(0x86e)]('Network\x20Interface\x20detected:\x20'+this[_0x38502c(0x29c)]),await this[_0x38502c(0x618)]();let _0x529a2f=await this[_0x38502c(0x558)]();console[_0x38502c(0x86e)]('Total\x20de\x20endereços\x20IPv6\x20após\x20a\x20limpeza:\x20'+_0x529a2f);})[_0x1e3e1f(0x5f3)](_0x340c2f=>{const _0x4d3ea0=_0x1e3e1f;console[_0x4d3ea0(0x7bf)](_0x4d3ea0(0x4c6)+_0x340c2f[_0x4d3ea0(0x5a8)]);});}async[a0_0x11d42e(0x618)](){const _0x22fef2=a0_0x11d42e;let _0x4114b8=await this['listIPv6Addresses']();if(console[_0x22fef2(0x86e)](_0x22fef2(0x278)+_0x4114b8[_0x22fef2(0x57a)]),_0x4114b8[_0x22fef2(0x57a)]>Ls){let _0x84b406=_0x4114b8[_0x22fef2(0x39b)](Ls);for(let _0x4cd8d8 of _0x84b406)console[_0x22fef2(0x86e)](_0x22fef2(0x3bd)+_0x4cd8d8),await this['removeIPv6'](_0x4cd8d8);console[_0x22fef2(0x86e)](_0x22fef2(0x716)+_0x84b406[_0x22fef2(0x57a)]+_0x22fef2(0x16b));}else console[_0x22fef2(0x86e)](_0x22fef2(0x7c4));}async[a0_0x11d42e(0x20f)](){const _0x5a4224=a0_0x11d42e;try{let {stdout:_0x2f0a1a}=await Re('ip\x20-6\x20addr\x20show\x20scope\x20global');return _0x2f0a1a[_0x5a4224(0x597)]('\x0a')[_0x5a4224(0x852)](_0x575c48=>_0x575c48[_0x5a4224(0x3ef)]('inet6')&&_0x575c48[_0x5a4224(0x3ef)](_0x5a4224(0x619)))['map'](_0x5e8c06=>_0x5e8c06['match'](/inet6\s+([a-fA-F0-9:]+)\//)?.[0x1])[_0x5a4224(0x852)](Boolean);}catch(_0x451157){return console[_0x5a4224(0x7bf)](_0x5a4224(0x127)+_0x451157[_0x5a4224(0x5a8)]),[];}}async['countIPv6Addresses'](){const _0x4c2434=a0_0x11d42e;try{let {stdout:_0x4441ce}=await Re(_0x4c2434(0x379)),_0x24c8fa=parseInt(_0x4441ce[_0x4c2434(0x593)](),0xa);return console['log']('Total\x20de\x20endereços\x20IPv6\x20globais:\x20'+_0x24c8fa),_0x24c8fa;}catch(_0x1531e8){return console[_0x4c2434(0x7bf)](_0x4c2434(0x830)+_0x1531e8[_0x4c2434(0x5a8)]),0x0;}}async['removeIPv6'](_0x218853){const _0xf565f5=a0_0x11d42e;try{await Re(_0xf565f5(0x23a)+_0x218853+'/64\x20dev\x20'+this['networkInterface']),console['log']('IPv6\x20address\x20removed:\x20'+_0x218853);}catch(_0x746d97){console['error'](_0xf565f5(0x61c)+_0x746d97[_0xf565f5(0x5a8)]);}}async[a0_0x11d42e(0x408)](){const _0x824fdb=a0_0x11d42e;try{let {stdout:_0x1b0e82}=await Re(_0x824fdb(0x8b0));console[_0x824fdb(0x86e)](_0x824fdb(0x864)+_0x1b0e82);let _0x460d1f=_0x1b0e82[_0x824fdb(0x597)]('\x0a')[_0x824fdb(0x4f6)](_0x4b46c5=>_0x4b46c5[_0x824fdb(0x597)]('\x20')[0x0])['filter'](_0xef86b1=>!_0xef86b1['includes']('lo')&&!_0xef86b1['includes'](_0x824fdb(0x590))&&!_0xef86b1[_0x824fdb(0x3ef)](_0x824fdb(0x234))&&!_0xef86b1[_0x824fdb(0x3ef)]('wl')&&!_0xef86b1[_0x824fdb(0x3ef)]('@'));if(console['log']('Filtered\x20network\x20interfaces:\x20'+_0x460d1f),_0x460d1f['length']===0x0)throw new Error('No\x20suitable\x20network\x20interface\x20found');this[_0x824fdb(0x29c)]=_0x460d1f[0x0];let {stdout:_0xf9bd8c}=await Re(_0x824fdb(0x767)+this['networkInterface']);console['log']('IPv6\x20addresses\x20detected:\x20'+_0xf9bd8c);let _0x350f1b=_0xf9bd8c['split']('\x0a')['find'](_0x196612=>_0x196612[_0x824fdb(0x3ef)]('inet6')&&_0x196612[_0x824fdb(0x3ef)](_0x824fdb(0x619)));if(!_0x350f1b)throw new Error(_0x824fdb(0x80b));let _0x1b05a4=_0x350f1b[_0x824fdb(0x542)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x1b05a4)throw new Error(_0x824fdb(0x57f));let [_0x6fd5b1,_0x470e82,_0x29e523]=_0x1b05a4,_0x55c6a5=Math[_0x824fdb(0x6d5)](Number(_0x29e523)/0x10),_0x5f05c4=Number(_0x29e523)%0x10,_0x3bc3bb=_0x470e82['split'](':')[_0x824fdb(0x39b)](0x0,_0x55c6a5)['join'](':');if(_0x5f05c4>0x0){let _0x16e555=_0x470e82[_0x824fdb(0x597)](':')[_0x55c6a5],_0xa0da62=0xffff<<0x10-_0x5f05c4&0xffff,_0x4d7729=(parseInt(_0x16e555,0x10)&_0xa0da62)['toString'](0x10)[_0x824fdb(0x582)](0x4,'0');_0x3bc3bb+=':'+_0x4d7729;}this[_0x824fdb(0x744)]=_0x3bc3bb+':';}catch(_0x596b0b){console['error'](_0x824fdb(0x68b),_0x596b0b);}}async[a0_0x11d42e(0x50f)](_0x510cfa){const _0x1c7672=a0_0x11d42e;let _0x4d141b=_0x1c7672(0x875)+_0x510cfa+_0x1c7672(0x810)+this[_0x1c7672(0x29c)];try{await Re(_0x4d141b),console['log']('IPv6\x20address\x20configured:\x20'+_0x510cfa);}catch(_0x40f4e7){console[_0x1c7672(0x7bf)]('Error\x20adding\x20IPv6\x20address:\x20'+_0x40f4e7);}}['randomMac'](){const _0x2d38c9=a0_0x11d42e;return _0x2d38c9(0x12a)['replace'](/X/g,()=>_0x2d38c9(0x1d4)[_0x2d38c9(0x307)](Math[_0x2d38c9(0x6d5)](Math[_0x2d38c9(0x311)]()*0x10)));}[a0_0x11d42e(0x76c)](_0x2fd00e,_0x58b51d){const _0x32871d=a0_0x11d42e;let _0x11ee57=_0x58b51d[_0x32871d(0x597)](':');return _0x11ee57[0x0]=(parseInt(_0x11ee57[0x0],0x10)^0x2)[_0x32871d(0x1d7)](0x10)[_0x32871d(0x582)](0x2,'0'),''+_0x2fd00e+_0x11ee57[0x0]+_0x11ee57[0x1]+':'+_0x11ee57[0x2]+_0x32871d(0x5a5)+_0x11ee57[0x3]+':'+_0x11ee57[0x4]+_0x11ee57[0x5];}[a0_0x11d42e(0x48b)](){const _0x241883=a0_0x11d42e;let _0x5e757a=this[_0x241883(0x744)];_0x5e757a[_0x241883(0x7b1)](':')||(_0x5e757a+=':');let _0x25eac8=this[_0x241883(0x238)]();return this[_0x241883(0x76c)](_0x5e757a,_0x25eac8);}['isValidIPv6Config'](_0x48fc74){const _0x455125=a0_0x11d42e;return new RegExp(_0x455125(0x7a1))[_0x455125(0x503)](_0x48fc74);}async[a0_0x11d42e(0x25c)](_0x4735f7){const _0x59b9de=a0_0x11d42e;let _0x244b57=[{'url':_0x59b9de(0x655),'parse':_0x1fb6f7=>_0x1fb6f7['ip']},{'url':_0x59b9de(0x77e),'parse':_0x170dc0=>_0x170dc0['ip']},{'url':'https://ifconfig.me/ip','parse':_0x44898d=>_0x44898d[_0x59b9de(0x593)]()},{'url':_0x59b9de(0x2d1),'parse':_0x43f2ce=>_0x43f2ce['trim']()}],_0x5c4ff6=_0x244b57[Math['floor'](Math['random']()*_0x244b57['length'])];try{let _0x23496d=await _i[_0x59b9de(0x3de)][_0x59b9de(0x686)](_0x5c4ff6[_0x59b9de(0x443)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x4735f7}}),_0x515baa=_0x5c4ff6[_0x59b9de(0x5c7)](_0x23496d[_0x59b9de(0x57e)]);return _0x515baa[_0x59b9de(0x68f)]()===_0x4735f7[_0x59b9de(0x68f)]()?(console[_0x59b9de(0x86e)](_0x59b9de(0x808)+_0x4735f7),!0x0):(console[_0x59b9de(0x7bf)]('IP\x20mismatch:\x20configured\x20'+_0x4735f7+_0x59b9de(0x485)+_0x515baa),!0x1);}catch(_0x518a5a){return console[_0x59b9de(0x7bf)](_0x59b9de(0x381)+_0x5c4ff6[_0x59b9de(0x443)]+':\x20'+_0x518a5a[_0x59b9de(0x5a8)]),!0x1;}}async[a0_0x11d42e(0x4cd)](_0x5dd130,_0x57d406){const _0x3c6c14=a0_0x11d42e;if(!this[_0x3c6c14(0x744)]||!this[_0x3c6c14(0x29c)])return console[_0x3c6c14(0x7bf)]('IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.'),null;let _0x33482a=await this[_0x3c6c14(0x20f)]();if(_0x33482a['length']>=Ls){let _0x56ab4a=_0x33482a[Math[_0x3c6c14(0x6d5)](Math[_0x3c6c14(0x311)]()*_0x33482a[_0x3c6c14(0x57a)])];return console[_0x3c6c14(0x86e)](_0x3c6c14(0x738)+_0x56ab4a),_0x56ab4a;}let _0x45605a;do _0x45605a=this[_0x3c6c14(0x48b)](),console[_0x3c6c14(0x86e)](_0x3c6c14(0x79d)+_0x45605a);while(!this[_0x3c6c14(0x775)](_0x45605a));await this[_0x3c6c14(0x50f)](_0x45605a),console[_0x3c6c14(0x86e)](_0x3c6c14(0x435)+_0x45605a);let _0x25ce99={'_id':_0x5dd130+'-'+_0x57d406,'ip':_0x45605a},_0x5c7d51=await this[_0x3c6c14(0x859)][_0x3c6c14(0x5a1)](_0x25ce99,_0x25ce99['_id']);return console[_0x3c6c14(0x86e)](_0x3c6c14(0x152)+_0x5c7d51),_0x45605a;}},Uo=new Fs(),je=Uo,Oi=_0x59272d=>{const _0x9d17a=a0_0x11d42e;if(!_0x59272d)return!0x1;let _0x3a44d1=(0x0,w[_0x9d17a(0x1cc)])(_0x59272d)?.[_0x9d17a(0x66f)]??_0x59272d[_0x9d17a(0x597)]('@')[0x1];return _0x3a44d1?new Set([_0x9d17a(0x1a4),_0x9d17a(0x4ae),'lid',_0x9d17a(0x28c),_0x9d17a(0x4d1)])['has'](_0x3a44d1):!0x1;},Vs=a0_0x11d42e(0x84c),Ui,pe=null,Fa=null,jo=0x3,Jo=null,xi=S[a0_0x11d42e(0x686)]('AUTHENTICATION')[a0_0x11d42e(0x5b4)][a0_0x11d42e(0x41e)],Pi=S[a0_0x11d42e(0x686)](a0_0x11d42e(0x83d));async function qo(){const _0x1f20f7=a0_0x11d42e;let _0x4aec15=await Ne['findOne']();pe=_0x4aec15?.[_0x1f20f7(0x773)]??null,Jo=_0x4aec15?.['DaysToDelete']??null,Vs=_0x4aec15?.[_0x1f20f7(0x641)]??_0x1f20f7(0x84c),Ui=_0x4aec15?.[_0x1f20f7(0x2c0)]??ge??_0x1f20f7(0x1eb);}async function Vo(){await qo();}Vo();var jt={},Ae=class l{constructor(_0x56365f,_0x878bc2,_0x31cc3c){const _0x58234c=a0_0x11d42e;this[_0x58234c(0x155)]=_0x56365f,this[_0x58234c(0x7e3)]=_0x878bc2,this[_0x58234c(0x373)]=_0x31cc3c,this[_0x58234c(0x4a3)]={},this[_0x58234c(0x747)]=null,this[_0x58234c(0x85a)]=new R(l['name']),this[_0x58234c(0x22f)]={},this[_0x58234c(0x70f)]={},this[_0x58234c(0x4eb)]={'state':_0x58234c(0x85f)},this['storePath']=(0x0,j[_0x58234c(0x7f4)])(ce,'downloads'),this['msgRetryCounterCache']=new qs[(_0x58234c(0x3de))](),this[_0x58234c(0x46f)]=new qs[(_0x58234c(0x3de))](),this['endSession']=!0x1,this[_0x58234c(0x78e)]={'status.instance':'/wa-connection-update','connection.update':'/wa-connection-update','qrcode.updated':_0x58234c(0x319),'messages.upsert':_0x58234c(0x534),'send.message':'/wa-message','messages.update':_0x58234c(0x873),'group.upsert':_0x58234c(0x86c),'group.update':'/wa-groups','group-participants.update':_0x58234c(0x86c),'messages.set':_0x58234c(0x45a),'contacts.set':_0x58234c(0x7d8),'contacts.upsert':'/wa-contacts','contacts.update':_0x58234c(0x7d8),'presence.update':_0x58234c(0x4a4),'chats.set':_0x58234c(0x210),'chats.update':_0x58234c(0x210),'chats.upsert':_0x58234c(0x210),'chats.delete':_0x58234c(0x210)},this[_0x58234c(0x2f1)]=0x0,this['reconnectTimestamps']=[],this[_0x58234c(0x5cf)]=0xea60,this[_0x58234c(0x3c9)]=!0x1,this[_0x58234c(0x86a)]={'chats.upsert':async(_0x17b1ed,_0x5a7c72)=>{const _0x5d530e=_0x58234c;let _0x1e3753=[];for await(let _0x41f655 of _0x17b1ed)_0x1e3753['push']({'_id':_0x41f655['id'],'owner':this[_0x5d530e(0x22f)][_0x5d530e(0x3d9)],'group':_0x41f655['id']['endsWith'](_0x5d530e(0x355)),'name':_0x41f655[_0x5d530e(0x414)]||_0x41f655[_0x5d530e(0x3d0)]||null,'contactname':null,'lastmsg':_0x41f655[_0x5d530e(0x62b)]&&_0x41f655['conversationTimestamp'][_0x5d530e(0x1d7)]()['length']<0xd?_0x41f655['conversationTimestamp']*0x3e8:_0x41f655['conversationTimestamp']||null,'archived':_0x41f655[_0x5d530e(0x573)]||!0x1,'unreadcount':_0x41f655[_0x5d530e(0x7ac)]||0x0,'ephemeralExpiration':_0x41f655[_0x5d530e(0x6d9)]||0x0});this[_0x5d530e(0x38d)]('chats.upsert',_0x1e3753);},'chats.update':async(_0x5d3d24,_0x1940cb)=>{const _0x3f00f6=_0x58234c;for(let _0x4a48e2 of _0x5d3d24){let _0x43e32b={'_id':_0x4a48e2['id'],'owner':this[_0x3f00f6(0x22f)][_0x3f00f6(0x3d9)],'archived':_0x4a48e2[_0x3f00f6(0x573)],'muteEndTime':_0x4a48e2['muteEndTime'],'ephemeralExpiration':_0x4a48e2[_0x3f00f6(0x6d9)]},_0x12a6cb=!0x1,_0x1e7428={};_0x43e32b[_0x3f00f6(0x573)]!=null&&(this[_0x3f00f6(0x85a)]['verbose'](this['instanceName']+'\x20('+this[_0x3f00f6(0x22f)][_0x3f00f6(0x3d9)]+_0x3f00f6(0x184)+_0x4a48e2['id']+_0x3f00f6(0x478)+_0x4a48e2[_0x3f00f6(0x573)]),_0x12a6cb=!0x0,_0x1e7428[_0x3f00f6(0x573)]=_0x4a48e2[_0x3f00f6(0x573)]),_0x3f00f6(0x4a2)in _0x4a48e2&&(this[_0x3f00f6(0x85a)][_0x3f00f6(0x70a)](this[_0x3f00f6(0x7ec)]+'\x20('+this[_0x3f00f6(0x22f)][_0x3f00f6(0x3d9)]+_0x3f00f6(0x46d)+_0x4a48e2['id']+_0x3f00f6(0x478)+(_0x4a48e2['muteEndTime']??'0')),_0x12a6cb=!0x0,_0x1e7428['muteEndTime']=_0x4a48e2[_0x3f00f6(0x4a2)]??0x0),_0x3f00f6(0x6d9)in _0x4a48e2&&(this[_0x3f00f6(0x85a)]['verbose'](this[_0x3f00f6(0x7ec)]+'\x20('+this[_0x3f00f6(0x22f)][_0x3f00f6(0x3d9)]+_0x3f00f6(0x7f8)+_0x4a48e2['id']+'\x20:\x20'+(_0x4a48e2[_0x3f00f6(0x6d9)]!==void 0x0?_0x4a48e2[_0x3f00f6(0x6d9)]:_0x3f00f6(0x7c9))),_0x1e7428['ephemeralExpiration']=_0x4a48e2['ephemeralExpiration']===null?0x0:_0x4a48e2[_0x3f00f6(0x6d9)],_0x12a6cb=!0x0);let _0x41a9d4;_0x12a6cb&&(_0x41a9d4=await this[_0x3f00f6(0x373)]['chat'][_0x3f00f6(0x793)]({'where':{'_id':_0x4a48e2['id']}},_0x1e7428,this[_0x3f00f6(0x22f)][_0x3f00f6(0x3d9)])),_0x41a9d4&&F(this['instanceName'],_0x3f00f6(0x177),{'chat':_0x41a9d4});}},'chats.delete':async _0x42be32=>{const _0x11029e=_0x58234c;for(let _0x2fa65c of _0x42be32)if(_0x2fa65c[_0x11029e(0x7b1)](_0x11029e(0x355))){await this[_0x11029e(0x373)][_0x11029e(0x7fa)][_0x11029e(0x165)]({'where':{'_id':_0x2fa65c}},this[_0x11029e(0x22f)][_0x11029e(0x3d9)]);let _0x1c5b59={'where':{'key':{'remoteJid':_0x2fa65c}}};await this[_0x11029e(0x373)][_0x11029e(0x5a8)][_0x11029e(0x165)](_0x1c5b59,this[_0x11029e(0x22f)][_0x11029e(0x3d9)]);}else{await this[_0x11029e(0x373)][_0x11029e(0x7fa)]['updateOne']({'where':{'_id':_0x2fa65c}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x11029e(0x22f)][_0x11029e(0x3d9)]);let _0x3392a2={'where':{'key':{'remoteJid':_0x2fa65c}}};await this['repository']['message'][_0x11029e(0x165)](_0x3392a2,this[_0x11029e(0x22f)][_0x11029e(0x3d9)]);}this[_0x11029e(0x38d)](_0x11029e(0x480),[..._0x42be32]);}},this[_0x58234c(0x1dc)]={'contacts.upsert':async(_0x11d3d3,_0xf61acf)=>{const _0x1b69a5=_0x58234c;let _0x19565a=await this[_0x1b69a5(0x373)][_0x1b69a5(0x78d)][_0x1b69a5(0x6d7)]({'where':{}},this[_0x1b69a5(0x22f)]['wuid']),_0x26e056=[];for await(let _0x430297 of _0x11d3d3)_0x19565a[_0x1b69a5(0x6d7)](_0x4d36eb=>_0x4d36eb[_0x1b69a5(0x665)]===_0x430297['id'])||_0x26e056[_0x1b69a5(0x64a)]({'_id':_0x430297['id'],'pushName':_0x430297?.[_0x1b69a5(0x414)]||_0x430297?.[_0x1b69a5(0x65c)],'owner':this[_0x1b69a5(0x22f)][_0x1b69a5(0x3d9)]});this[_0x1b69a5(0x38d)](_0x1b69a5(0x8af),_0x26e056),await this[_0x1b69a5(0x373)]['contact']['insert'](_0x26e056);},'contacts.update':async(_0x2bb83d,_0x341ffd)=>{const _0x4f11ea=_0x58234c;let _0x4e16df=[];for await(let _0x16f17e of _0x2bb83d)_0x4e16df['push']({'_id':_0x16f17e['id'],'pushName':_0x16f17e?.[_0x4f11ea(0x414)]??_0x16f17e?.[_0x4f11ea(0x65c)],'owner':this[_0x4f11ea(0x22f)][_0x4f11ea(0x3d9)]});this[_0x4f11ea(0x38d)](_0x4f11ea(0x746),_0x4e16df);}},this[_0x58234c(0x784)]={'messaging-history.set':async({messages:_0x278076,chats:_0x48405f,isLatest:_0x1f7eb5},_0x36695a)=>{const _0x1637c0=_0x58234c;if(_0x1f7eb5){setTimeout(()=>{const _0x2b58cc=a0_0x2924;this[_0x2b58cc(0x22f)][_0x2b58cc(0x1b9)]=!0x0,console[_0x2b58cc(0x86e)](_0x2b58cc(0x550));},0x1d4c0);let _0x3f636b=await Promise[_0x1637c0(0x1c6)](_0x48405f[_0x1637c0(0x4f6)](async _0x2c0355=>({'_id':_0x2c0355['id'],'owner':this['instance']['wuid'],'group':_0x2c0355['id'][_0x1637c0(0x7b1)](_0x1637c0(0x355)),'name':_0x2c0355[_0x1637c0(0x414)]||_0x2c0355[_0x1637c0(0x3d0)]||_0x2c0355[_0x1637c0(0x338)]||null,'contactname':null,'lastmsg':_0x2c0355[_0x1637c0(0x62b)]&&_0x2c0355[_0x1637c0(0x62b)]['toString']()['length']<0xd?_0x2c0355[_0x1637c0(0x62b)]*0x3e8:_0x2c0355[_0x1637c0(0x62b)]||null,'archived':_0x2c0355[_0x1637c0(0x573)]||!0x1,'unreadcount':_0x2c0355['unreadCount']||0x0,'ephemeralExpiration':_0x2c0355[_0x1637c0(0x6d9)]||0x0,'muteEndTime':_0x2c0355[_0x1637c0(0x4a2)]||0x0})));this[_0x1637c0(0x38d)](_0x1637c0(0x24f),_0x3f636b),await this[_0x1637c0(0x557)](_0x3f636b,_0x36695a);}let _0x2dc5ba=[],_0x542e9e=Date[_0x1637c0(0x19e)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x41d9a7]of Object[_0x1637c0(0x575)](_0x278076)){if(_0x41d9a7[_0x1637c0(0x5a8)]?.[_0x1637c0(0x182)]||_0x41d9a7[_0x1637c0(0x5a8)]?.[_0x1637c0(0x298)]||!_0x41d9a7[_0x1637c0(0x5a8)]||_0x41d9a7['key'][_0x1637c0(0x33f)]===_0x1637c0(0x7a9)||(Js[_0x1637c0(0x3de)]['isLong'](_0x41d9a7?.['messageTimestamp'])&&(_0x41d9a7[_0x1637c0(0x7c6)]=_0x41d9a7[_0x1637c0(0x7c6)]?.[_0x1637c0(0x8c7)]()),_0x41d9a7[_0x1637c0(0x7c6)]&&_0x41d9a7[_0x1637c0(0x7c6)][_0x1637c0(0x1d7)]()[_0x1637c0(0x57a)]<0xd&&(_0x41d9a7[_0x1637c0(0x7c6)]=_0x41d9a7[_0x1637c0(0x7c6)]*0x3e8),_0x41d9a7['messageTimestamp']<_0x542e9e))continue;let _0x568df9=(0x0,w['normalizeMessageContent'])(_0x41d9a7[_0x1637c0(0x5a8)]),_0x102ecf=(0x0,w[_0x1637c0(0x5fc)])(_0x568df9),{message_normalized:_0x992fdf}=this[_0x1637c0(0x2aa)](_0x568df9,_0x102ecf,null);Object[_0x1637c0(0x813)](_0x992fdf)[_0x1637c0(0x57a)]>0x0&&_0x2dc5ba[_0x1637c0(0x64a)]({'_id':_0x41d9a7[_0x1637c0(0x7af)]['id'],'key':_0x41d9a7[_0x1637c0(0x7af)],'pushName':_0x41d9a7['pushName'],'participant':_0x41d9a7['participant'],'message':_0x568df9,'messageType':_0x102ecf,'message_normalized':{'key':_0x41d9a7['key'],'pushName':_0x41d9a7['pushName'],'messageTimestamp':_0x41d9a7['messageTimestamp'],..._0x992fdf},'messageTimestamp':_0x41d9a7['messageTimestamp'],'owner':this[_0x1637c0(0x22f)][_0x1637c0(0x3d9)]});}_0x36695a[_0x1637c0(0x84f)]&&_0x2dc5ba[_0x1637c0(0x57a)]>0x0&&(this[_0x1637c0(0x85a)]['verbose'](this['instanceName']+'\x20('+this[_0x1637c0(0x22f)][_0x1637c0(0x3d9)]+'):\x20'+_0x2dc5ba[_0x1637c0(0x57a)]+_0x1637c0(0x78f)+this[_0x1637c0(0x22f)][_0x1637c0(0x3d9)]+_0x1637c0(0x897)),await this[_0x1637c0(0x373)][_0x1637c0(0x5a8)][_0x1637c0(0x604)]([..._0x2dc5ba],this[_0x1637c0(0x22f)]['wuid']));let _0x294414=Date[_0x1637c0(0x19e)]()-0xa*0x3c*0x3e8;for(let _0x1fbb79 of _0x2dc5ba)if(this[_0x1637c0(0x22f)][_0x1637c0(0x1b9)]&&_0x1fbb79['messageTimestamp']>=_0x294414){if(this[_0x1637c0(0x72e)](this[_0x1637c0(0x22f)][_0x1637c0(0x3d9)],_0x1fbb79[_0x1637c0(0x665)])){this[_0x1637c0(0x85a)]['verbose'](this['instanceName']+'\x20('+this[_0x1637c0(0x22f)][_0x1637c0(0x3d9)]+_0x1637c0(0x346)+_0x1fbb79['_id']+')');continue;}this['addToProcessedMessages'](this[_0x1637c0(0x22f)][_0x1637c0(0x3d9)],_0x1fbb79[_0x1637c0(0x665)]),this['sendDataWebhook']('messages.upsert',_0x1fbb79);}else this['sendDataWebhook']('messages.set',_0x1fbb79);_0x278076=void 0x0;},'messages.upsert':async({messages:_0x29dcbc,type:_0x5ace18},_0x447e0e)=>{const _0x2a6495=_0x58234c;for(let _0x41c253 of _0x29dcbc){if(this[_0x2a6495(0x70f)]?.[_0x2a6495(0x3a8)]&&_0x41c253[_0x2a6495(0x7af)][_0x2a6495(0x33f)]['includes'](_0x2a6495(0x355))){this[_0x2a6495(0x85a)][_0x2a6495(0x70a)](this[_0x2a6495(0x7ec)]+'\x20('+this[_0x2a6495(0x22f)][_0x2a6495(0x3d9)]+'):\x20[messages.upsert]\x20group\x20ignored');continue;}if(_0x41c253['key'][_0x2a6495(0x33f)]['includes'](_0x2a6495(0x368))||_0x41c253[_0x2a6495(0x7af)][_0x2a6495(0x33f)]==='status@broadcast')continue;if(_0x41c253['messageStubParameters']&&_0x41c253[_0x2a6495(0x58a)][0x0]===_0x2a6495(0x45c)){console[_0x2a6495(0x7bf)](_0x2a6495(0x71f)),await this['fakeReceived'](_0x41c253),jt[_0x41c253[_0x2a6495(0x7af)]['id']]=_0x41c253,this[_0x2a6495(0x561)](_0x41c253,0x0);continue;}if(_0x5ace18!==_0x2a6495(0x6b1)||!_0x41c253?.[_0x2a6495(0x5a8)]||_0x41c253[_0x2a6495(0x5a8)]?.['protocolMessage']||_0x41c253['message']?.[_0x2a6495(0x298)])continue;let _0x3974f1=null,_0x3ecf21=null;if(jt[_0x41c253[_0x2a6495(0x7af)]['id']]&&(console[_0x2a6495(0x7bf)](_0x2a6495(0x43a)),await this[_0x2a6495(0x373)][_0x2a6495(0x1b0)]['delete']({'where':{'_id':_0x41c253[_0x2a6495(0x7af)]['id']}}),delete jt[_0x41c253[_0x2a6495(0x7af)]['id']]),this[_0x2a6495(0x72e)](this[_0x2a6495(0x22f)][_0x2a6495(0x3d9)],_0x41c253[_0x2a6495(0x7af)]['id'])){this['logger'][_0x2a6495(0x70a)](this[_0x2a6495(0x7ec)]+'\x20('+this['instance']['wuid']+_0x2a6495(0x2da));continue;}this[_0x2a6495(0x385)](this[_0x2a6495(0x22f)][_0x2a6495(0x3d9)],_0x41c253[_0x2a6495(0x7af)]['id']);try{_0x3974f1=await this[_0x2a6495(0x3fd)](_0x41c253),_0x3ecf21=_0x3974f1?_0x3974f1[_0x2a6495(0x7f4)](','):null;}catch(_0x36a924){this[_0x2a6495(0x85a)]['verbose'](this[_0x2a6495(0x7ec)]+'\x20('+this[_0x2a6495(0x22f)][_0x2a6495(0x3d9)]+_0x2a6495(0x7bd)+(_0x36a924 instanceof Error?_0x36a924[_0x2a6495(0x5a8)]:JSON[_0x2a6495(0x7b9)](_0x36a924,null,0x2))),_0x3ecf21=_0x2a6495(0x166);}this['client'][_0x2a6495(0x894)](_0x2a6495(0x476)),Js[_0x2a6495(0x3de)]['isLong'](_0x41c253[_0x2a6495(0x7c6)])&&(_0x41c253[_0x2a6495(0x7c6)]=_0x41c253[_0x2a6495(0x7c6)]?.['toNumber']()),_0x41c253[_0x2a6495(0x7c6)]&&_0x41c253[_0x2a6495(0x7c6)][_0x2a6495(0x1d7)]()[_0x2a6495(0x57a)]<0xd&&(_0x41c253[_0x2a6495(0x7c6)]=_0x41c253['messageTimestamp']*0x3e8);let _0xdeb503=_0x41c253[_0x2a6495(0x5a8)],_0x1cd608=(0x0,w[_0x2a6495(0x50a)])(_0xdeb503),_0x3484fc=(0x0,w['getContentType'])(_0x1cd608),{messageContent:_0x4b9870,message_normalized:_0x9f508d}=this[_0x2a6495(0x2aa)](_0x1cd608,_0x3484fc,_0x3ecf21);if(_0x3484fc===_0x2a6495(0x182)&&_0x4b9870?.['editedMessage']&&(_0x3484fc='editedMessage'),_0x3484fc===_0x2a6495(0x12f)&&_0x41c253[_0x2a6495(0x7af)][_0x2a6495(0x221)])continue;let _0x5cdeb3,_0x3b03a5=_0x41c253[_0x2a6495(0x7af)][_0x2a6495(0x33f)]['endsWith']('@g.us');if(_0x41c253[_0x2a6495(0x7af)][_0x2a6495(0x221)])_0x5cdeb3=this[_0x2a6495(0x22f)]['profilePictureUrl'];else{let _0x29850f=_0x3b03a5?_0x41c253[_0x2a6495(0x7af)][_0x2a6495(0x4b5)]:_0x41c253[_0x2a6495(0x7af)]['remoteJid'];_0x5cdeb3=(await this[_0x2a6495(0x507)](_0x29850f,_0x41c253[_0x2a6495(0x681)],!0x1))['cachedContact'][_0x2a6495(0x690)];}let _0x4bfb64={'_id':_0x41c253[_0x2a6495(0x7af)]['id'],'key':_0x41c253['key'],'isGroup':_0x3b03a5,'profilePictureUrl':_0x5cdeb3,'pushName':_0x41c253[_0x2a6495(0x681)],'message':_0x1cd608,'messageType':_0x3484fc,'message_normalized':{'key':_0x41c253['key'],'pushName':_0x41c253['pushName'],'messageTimestamp':_0x41c253[_0x2a6495(0x7c6)],'source':(0x0,w[_0x2a6495(0x192)])(_0x41c253[_0x2a6495(0x7af)]['id']),..._0x9f508d},'messageTimestamp':_0x41c253['messageTimestamp'],'owner':this[_0x2a6495(0x22f)][_0x2a6495(0x3d9)],'source':(0x0,w[_0x2a6495(0x192)])(_0x41c253[_0x2a6495(0x7af)]['id']),'expiration':_0x4b9870?.['contextInfo']?.['expiration']||0x0};if(!_0x4b9870){if(_0x3484fc===_0x2a6495(0x5bd))return;this[_0x2a6495(0x85a)][_0x2a6495(0x7bf)](_0x2a6495(0x794)),this[_0x2a6495(0x85a)][_0x2a6495(0x7bf)](_0x4bfb64);}if(_0x9f508d[_0x2a6495(0x8b3)]===_0x2a6495(0x34e)){console[_0x2a6495(0x7bf)](_0x2a6495(0x3f9)),await this['fakeReceived'](_0x41c253);continue;}this[_0x2a6495(0x85a)]['log'](this[_0x2a6495(0x7ec)]+'\x20('+this['instance'][_0x2a6495(0x3d9)]+_0x2a6495(0x7bd)+(_0x4bfb64[_0x2a6495(0x7af)]?.['fromMe']?_0x2a6495(0x293):_0x2a6495(0x829))+'\x20['+_0x4bfb64[_0x2a6495(0x7af)]?.[_0x2a6495(0x33f)][_0x2a6495(0x771)](_0x2a6495(0x264),'')+_0x2a6495(0x81d)+_0x4bfb64[_0x2a6495(0x13e)]+')'),_0x4bfb64[_0x2a6495(0x4b9)]?.[_0x2a6495(0x8b3)]&&this[_0x2a6495(0x85a)][_0x2a6495(0x86e)](_0x41c253[_0x2a6495(0x7af)]['id']+':\x20'+_0x4bfb64[_0x2a6495(0x4b9)]?.[_0x2a6495(0x8b3)]),await this[_0x2a6495(0x373)]['message'][_0x2a6495(0x604)]([_0x4bfb64],this[_0x2a6495(0x22f)]['wuid']),this[_0x2a6495(0x38d)]('messages.upsert',_0x4bfb64),F(this[_0x2a6495(0x7ec)],'messages',{'message':_0x4bfb64}),_0x41c253[_0x2a6495(0x7af)][_0x2a6495(0x33f)]!==_0x2a6495(0x7a9)&&await this[_0x2a6495(0x325)](_0x447e0e,_0x4bfb64,_0x2a6495(0x6d0));}},'messages.update':async(_0x141981,_0x4680e9)=>{const _0x345de9=_0x58234c;let _0x4f528a={0x0:'ERROR',0x1:_0x345de9(0x12e),0x2:_0x345de9(0x2e6),0x3:_0x345de9(0x56f),0x4:'READ',0x5:_0x345de9(0x310)};for await(let {key:_0x3d11d7,update:_0x453cd9}of _0x141981){if(this[_0x345de9(0x70f)]?.[_0x345de9(0x3a8)]&&_0x3d11d7[_0x345de9(0x33f)][_0x345de9(0x3ef)](_0x345de9(0x355))){this[_0x345de9(0x85a)][_0x345de9(0x70a)](this[_0x345de9(0x7ec)]+'\x20('+this[_0x345de9(0x22f)][_0x345de9(0x3d9)]+_0x345de9(0x6f7));return;}if(_0x3d11d7[_0x345de9(0x33f)]!==_0x345de9(0x7a9)){let _0x45c230=Date[_0x345de9(0x19e)](),_0x18022e;_0x453cd9[_0x345de9(0x5a8)]===null&&_0x453cd9[_0x345de9(0x15d)]===void 0x0?_0x18022e=_0x345de9(0x350):_0x18022e=_0x4f528a[_0x453cd9[_0x345de9(0x15d)]];let _0x58d8b5=_0x3d11d7['remoteJid'][_0x345de9(0x771)](/:\d{1,2}@/g,'@'),_0xecc502={..._0x3d11d7,'remoteJid':_0x58d8b5,'status':_0x18022e,'datetime':_0x45c230,'owner':this[_0x345de9(0x22f)][_0x345de9(0x3d9)]};this[_0x345de9(0x38d)](_0x345de9(0x267),_0xecc502),await this['updateMessage'](_0x3d11d7,_0xecc502);}}},'labels.association':async({type:_0x35062c,association:_0x320f21})=>{const _0x35e2a8=_0x58234c;if(_0x320f21[_0x35e2a8(0x748)]==='label_jid'){let _0x20f3a8,_0x3d975c=0x0;for(;!_0x20f3a8&&_0x3d975c<this[_0x35e2a8(0x357)];)_0x20f3a8=await this[_0x35e2a8(0x373)][_0x35e2a8(0x7fa)][_0x35e2a8(0x588)]({'where':{'_id':_0x320f21[_0x35e2a8(0x424)]}},this[_0x35e2a8(0x22f)]['wuid']),_0x20f3a8||(_0x3d975c++,this[_0x35e2a8(0x85a)][_0x35e2a8(0x59a)](this[_0x35e2a8(0x7ec)]+'\x20('+this[_0x35e2a8(0x22f)][_0x35e2a8(0x3d9)]+'):\x20Chat\x20'+_0x320f21['chatId']+_0x35e2a8(0x2a7)+this[_0x35e2a8(0x515)]+'ms\x20(tentativa\x20'+_0x3d975c+'/'+this[_0x35e2a8(0x357)]+')'),await this[_0x35e2a8(0x28b)](this[_0x35e2a8(0x515)]));if(!_0x20f3a8){this[_0x35e2a8(0x85a)][_0x35e2a8(0x7bf)](_0x35e2a8(0x6db)+_0x320f21[_0x35e2a8(0x424)]+_0x35e2a8(0x621)+this[_0x35e2a8(0x357)]+_0x35e2a8(0x19f));return;}switch(_0x35062c){case'add':console[_0x35e2a8(0x86e)](_0x320f21),await this[_0x35e2a8(0x373)][_0x35e2a8(0x7fa)]['updateOne']({'where':{'_id':_0x320f21[_0x35e2a8(0x424)]}},{'leadInfo.etiquetas':_0x320f21[_0x35e2a8(0x861)]},this['instance'][_0x35e2a8(0x3d9)],void 0x0,'$addToSet');break;case _0x35e2a8(0x2ec):console[_0x35e2a8(0x86e)](_0x320f21),await this['repository'][_0x35e2a8(0x7fa)][_0x35e2a8(0x793)]({'where':{'_id':_0x320f21[_0x35e2a8(0x424)]}},{'leadInfo.etiquetas':_0x320f21[_0x35e2a8(0x861)]},this['instance'][_0x35e2a8(0x3d9)],void 0x0,'$pull');break;default:this['logger'][_0x35e2a8(0x7bf)]('unknown\x20operation\x20type\x20['+_0x35062c+']');}}},'labels.edit':async _0x27cfb4=>{const _0x441835=_0x58234c;if(!_0x27cfb4||!_0x27cfb4['id']){this[_0x441835(0x85a)][_0x441835(0x7bf)](_0x441835(0x857));return;}if(!_0x27cfb4[_0x441835(0x53d)]){let _0x55ae4c=[_0x441835(0x178),_0x441835(0x1f6),_0x441835(0x51a),'#dfaef0',_0x441835(0x891),'#56ccb4',_0x441835(0x14e),_0x441835(0x419),'#6f7bcf',_0x441835(0x389),'#01d0e2',_0x441835(0x2dc),_0x441835(0x512),_0x441835(0x3b3),_0x441835(0x53f),_0x441835(0x660),_0x441835(0x637),'#b4ebff',_0x441835(0x444),_0x441835(0x8ae)],_0x74f103;typeof _0x27cfb4[_0x441835(0x179)]==_0x441835(0x2b6)&&_0x27cfb4[_0x441835(0x179)]>=0x0&&_0x27cfb4[_0x441835(0x179)]<_0x55ae4c[_0x441835(0x57a)]?_0x74f103=_0x55ae4c[_0x27cfb4['color']]:(this[_0x441835(0x85a)]['error'](_0x441835(0x24b)+_0x27cfb4[_0x441835(0x179)]),_0x74f103='#000000');let _0x5ce9cc={'_id':_0x27cfb4['id'],'colorHex':_0x74f103,'color':_0x27cfb4?.['color'],'name':_0x27cfb4?.[_0x441835(0x414)],'owner':this[_0x441835(0x22f)][_0x441835(0x3d9)]};await this[_0x441835(0x373)][_0x441835(0x1dd)][_0x441835(0x793)]({'where':{'_id':_0x27cfb4['id']}},_0x5ce9cc,this[_0x441835(0x22f)]['wuid']),this[_0x441835(0x85a)][_0x441835(0x59a)](this[_0x441835(0x7ec)]+'\x20('+this[_0x441835(0x22f)][_0x441835(0x3d9)]+_0x441835(0x36c)+_0x27cfb4);}_0x27cfb4[_0x441835(0x53d)]&&(await this[_0x441835(0x373)][_0x441835(0x1dd)]['delete']({'where':{'_id':_0x27cfb4['id']}},this[_0x441835(0x22f)]['wuid']),this[_0x441835(0x85a)][_0x441835(0x59a)](_0x441835(0x601)+_0x27cfb4['id']));}},this[_0x58234c(0x5e4)]={'groups.upsert':async _0x70470e=>{const _0x489b21=_0x58234c;this['localWebhook']?.[_0x489b21(0x3a8)]||this[_0x489b21(0x38d)](_0x489b21(0x4cf),_0x70470e);for(let _0x5f110e of _0x70470e)await this[_0x489b21(0x1ff)](_0x5f110e);},'groups.update':async _0x5cb695=>{const _0x26db7f=_0x58234c;this[_0x26db7f(0x70f)]?.['groups_ignore']||this[_0x26db7f(0x38d)](_0x26db7f(0x3ed),_0x5cb695);for(let _0x4f10a8 of _0x5cb695)await this[_0x26db7f(0x1ff)](_0x4f10a8);},'group-participants.update':async _0x25e9b6=>{const _0x1d5973=_0x58234c;this[_0x1d5973(0x70f)]?.[_0x1d5973(0x3a8)]||this[_0x1d5973(0x38d)](_0x1d5973(0x89a),_0x25e9b6),await this['updateGroupParticipantsWebhook'](_0x25e9b6);}},this[_0x58234c(0x357)]=0x5,this['delayChatLabel_RETRY_DELAY_MS']=0x1388,this[_0x58234c(0x86f)]=0x0,this['processPollUpdateMessage']=async _0x36eccb=>{const _0x4ceb12=_0x58234c;if(_0x36eccb[_0x4ceb12(0x5a8)]?.['pollUpdateMessage']){let _0x52a922=await this[_0x4ceb12(0x508)](_0x36eccb[_0x4ceb12(0x5a8)][_0x4ceb12(0x778)][_0x4ceb12(0x509)],!0x0);if(_0x52a922){let _0x2fd55f=_0x52a922['key'][_0x4ceb12(0x221)]?this['instance'][_0x4ceb12(0x3d9)]+_0x4ceb12(0x264):_0x52a922[_0x4ceb12(0x7af)][_0x4ceb12(0x4b5)]||_0x52a922[_0x4ceb12(0x7af)][_0x4ceb12(0x33f)],_0x3f8a5a=_0x52a922[_0x4ceb12(0x7af)]['id'],_0x730b2f=_0x52a922[_0x4ceb12(0x5a8)],_0x2d0b=Buffer[_0x4ceb12(0x4dc)](_0x730b2f[_0x4ceb12(0x3a2)][_0x4ceb12(0x780)]['toString'](_0x4ceb12(0x288)),_0x4ceb12(0x288)),_0x104aa6=(0x0,w[_0x4ceb12(0x2d0)])(_0x36eccb[_0x4ceb12(0x5a8)][_0x4ceb12(0x778)]['vote'],{'pollCreatorJid':_0x2fd55f,'pollMsgId':_0x3f8a5a,'pollEncKey':_0x2d0b,'voterJid':_0x36eccb['key'][_0x4ceb12(0x221)]?this[_0x4ceb12(0x22f)][_0x4ceb12(0x3d9)]+_0x4ceb12(0x264):_0x36eccb[_0x4ceb12(0x7af)]['remoteJid'][_0x4ceb12(0x7b1)](_0x4ceb12(0x451))?_0x36eccb[_0x4ceb12(0x7af)][_0x4ceb12(0x4b5)]:_0x36eccb[_0x4ceb12(0x7af)][_0x4ceb12(0x33f)]}),_0x68a2f5=[],_0x347d76=_0x104aa6[_0x4ceb12(0x7ca)]['map'](_0x47c991=>Buffer['from'](_0x47c991)['toString'](_0x4ceb12(0x288)));for(let {optionName:_0x2bbc99}of _0x730b2f[_0x4ceb12(0x131)]?.[_0x4ceb12(0x3d7)]||_0x730b2f['pollCreationMessageV3']?.['options']||_0x730b2f[_0x4ceb12(0x59f)]?.['options'])_0x347d76['indexOf']((0x0,w[_0x4ceb12(0x5ea)])(Buffer[_0x4ceb12(0x4dc)](_0x2bbc99))['toString']('hex'))>-0x1&&_0x68a2f5[_0x4ceb12(0x64a)](_0x2bbc99);return _0x68a2f5;}}return null;},this[_0x58234c(0x2aa)]=(_0x3e4974,_0x7a1a3b,_0x5696b9)=>{const _0x500d1f=_0x58234c;try{let _0x359796=_0x3e4974?(0x0,w[_0x500d1f(0x5da)])(_0x3e4974)[_0x7a1a3b]:void 0x0,_0x5d3466={},_0x426e7e=null,_0x2ae48d=null,_0x3077c4=null,_0x30ecb3=null;_0x7a1a3b===_0x500d1f(0x182)&&_0x359796?.['editedMessage']&&(_0x7a1a3b=(0x0,w[_0x500d1f(0x5fc)])(_0x359796[_0x500d1f(0x139)]),_0x426e7e=_0x3e4974[_0x500d1f(0x182)][_0x500d1f(0x7af)]['id'],_0x359796=_0x3e4974[_0x500d1f(0x182)][_0x500d1f(0x139)][_0x7a1a3b]),_0x3e4974[_0x7a1a3b]?.[_0x500d1f(0x280)]?.[_0x500d1f(0x266)]&&_0x3e4974[_0x7a1a3b]?.[_0x500d1f(0x280)]?.[_0x500d1f(0x4ac)]&&(_0x2ae48d=_0x3e4974[_0x7a1a3b][_0x500d1f(0x280)][_0x500d1f(0x266)]),_0x3e4974['reactionMessage']&&(_0x3077c4=_0x3e4974[_0x500d1f(0x275)][_0x500d1f(0x7af)]['id']);let _0x431c6b;if(_0x359796&&typeof _0x359796==_0x500d1f(0x1cb)&&_0x500d1f(0x509)in _0x359796&&({pollCreationMessageKey:_0x431c6b}=_0x359796),_0x7a1a3b==='pollCreationMessage'||_0x7a1a3b===_0x500d1f(0x59f)||_0x7a1a3b===_0x500d1f(0x1ba)){let _0x16914d=_0x359796[_0x500d1f(0x3d7)][_0x500d1f(0x4f6)](_0xcc936a=>_0xcc936a['optionName'])[_0x500d1f(0x7f4)]('|');_0x5d3466['convertedOptions']=_0x16914d;}if(_0x7a1a3b===_0x500d1f(0x12f)){let _0x9f765e=_0x359796[_0x500d1f(0x848)][_0x500d1f(0x156)][_0x500d1f(0x4f6)](_0x5d13b8=>JSON[_0x500d1f(0x5c7)](_0x5d13b8['buttonParamsJson'])[_0x500d1f(0x1fa)])['join']('|');_0x5d3466[_0x500d1f(0x75a)]=_0x9f765e;}_0x7a1a3b==='listResponseMessage'&&(_0x5d3466['buttonOrList_id']=_0x359796?.['singleSelectReply']?.[_0x500d1f(0x664)]);let _0x3f3490='';if(_0x359796&&(_0x3f3490+=_0x359796['name']?_0x359796[_0x500d1f(0x414)]:'',_0x3f3490+=_0x359796[_0x500d1f(0x2c3)]?'\x20'+_0x359796[_0x500d1f(0x2c3)]:'',_0x3f3490+=_0x359796[_0x500d1f(0x5bd)]?'\x20'+_0x359796[_0x500d1f(0x5bd)]:'',_0x3f3490+=_0x359796[_0x500d1f(0x3d0)]?'\x20'+_0x359796['displayName']:'',_0x7a1a3b!==_0x500d1f(0x7d1)&&(_0x3f3490+=_0x359796[_0x500d1f(0x667)]?.[_0x500d1f(0x8b3)]?'\x20'+_0x359796['body'][_0x500d1f(0x8b3)]:''),_0x3f3490+=_0x359796?.[_0x500d1f(0x80c)]?.['text']?'\x20'+_0x359796?.[_0x500d1f(0x80c)]?.['text']:''),_0x7a1a3b===_0x500d1f(0x659)){_0x3f3490=(_0x359796[_0x500d1f(0x1fd)]||'')+'\x0a'+(_0x359796[_0x500d1f(0x2fa)]||'')+'\x0a'+(_0x359796[_0x500d1f(0x321)]||'');let _0x34744c=this[_0x500d1f(0x806)](_0x359796[_0x500d1f(0x54d)]);_0x5d3466[_0x500d1f(0x75a)]=_0x34744c;}if(_0x7a1a3b==='listResponseMessage'&&(_0x5696b9=_0x359796['title'],_0x30ecb3=_0x359796?.[_0x500d1f(0x44b)]?.[_0x500d1f(0x664)]),_0x7a1a3b===_0x500d1f(0x7d1)){let _0x3e51ba=_0x359796?.[_0x500d1f(0x1c8)];_0x3e51ba&&_0x3e51ba['name']===_0x500d1f(0x2b0)&&(_0x30ecb3=JSON[_0x500d1f(0x5c7)](_0x3e51ba['paramsJson'])['id']),_0x5696b9=_0x359796?.[_0x500d1f(0x667)]?.[_0x500d1f(0x8b3)];}if(_0x7a1a3b===_0x500d1f(0x5c5)&&(_0x5696b9=_0x359796?.['selectedDisplayText'],_0x30ecb3=_0x359796?.[_0x500d1f(0x646)]),_0x7a1a3b===_0x500d1f(0x4b7)&&(_0x5696b9=_0x359796?.[_0x500d1f(0x869)],_0x30ecb3=_0x359796?.[_0x500d1f(0x661)]),_0x359796&&_0x359796[_0x500d1f(0x5b1)]){let _0x5c6aa7=this[_0x500d1f(0x6e7)](JSON[_0x500d1f(0x7b9)](_0x359796['vcard'],null,0x2));_0x3f3490=_0x3f3490+'\x0a'+_0x5c6aa7;}if(_0x359796){let {selectedButtonId:_0x4cf82b,nativeFlowResponseMessage:_0x54f267,selectedId:_0x3cccf8,selectedDisplayText:_0x2ccbb6,selectedIndex:_0x335ffc,body:_0x330426,nativeFlowMessage:_0x12e699,singleSelectReply:_0x1db894,sections:_0x305936,listType:_0x45672f,displayName:_0x4d57d1,vcard:_0x16a617,contactVcard:_0x480d85,name:_0x3a9097,caption:_0x3c5c79,conversation:_0x44bcc8,pollCreationMessageKey:_0x428401,footerText:_0x47164,contentText:_0x2cd146,pageCount:_0x46e4fa,headerType:_0x244e82,isAvatar:_0x472725,isAnimated:_0x13901c,fallbackLc:_0x1fac56,fallbackLg:_0x9c1708,namespace:_0x2b74da,elementName:_0x16168e,localizableParams:_0x3592a0,viewOnce:_0x100483,height:_0x4006b7,width:_0x2df92d,key:_0x5d82e1,firstScanLength:_0x3651f4,firstScanSidecar:_0x44ec15,gifPlayback:_0x50dd1,gifAttribution:_0x562696,midQualityFileSha256:_0x1bd8de,scansSidecar:_0x18ffff,streamingSidecar:_0x1875b7,thumbnailHeight:_0xfc739c,thumbnailWidth:_0x59b9e5,thumbnailEncSha256:_0x3e8b33,thumbnailDirectPath:_0x47f64a,canonicalUrl:_0xa98910,matchedText:_0x4e9b31,previewType:_0x29d524,thumbnailSha256:_0x12d67b,deviceListMetadataVersion:_0x10f4ec,inviteLinkGroupTypeV2:_0x2d669b,interactiveAnnotations:_0x24946f,scanLengths:_0x4c9d56,jpegThumbnail:_0x528efa,url:_0xf098d4,mediaKeyTimestamp:_0x3a66c1,waveform:_0x5cf396,stickerSentTs:_0x4c2eda,firstFrameLength:_0x532ac6,fileEncSha256:_0x28a06a,contextInfo:_0x4ffbb0,firstFrameSidecar:_0x22ec6f,directPath:_0x5bca4e,fileSha256:_0x2ae6d4,mediaKey:_0x1e3878,senderTimestampMs:_0x4e4f88,..._0x459abd}=_0x359796;(_0x7a1a3b==='listMessage'||_0x7a1a3b===_0x500d1f(0x351))&&(delete _0x459abd['title'],delete _0x459abd[_0x500d1f(0x2fa)]),typeof _0x359796==_0x500d1f(0x4fa)?_0x5d3466={'text':_0x359796,'type':_0x7a1a3b||_0x500d1f(0x5bd),..._0x426e7e&&{'edited':_0x426e7e},..._0x2ae48d&&{'quoted':_0x2ae48d},..._0x3077c4&&{'reaction':_0x3077c4}}:_0x5d3466={'text':_0x3f3490,..._0x459abd,..._0x7a1a3b===_0x500d1f(0x778)?{'poll_id':_0x359796['pollCreationMessageKey']['id'],'quoted':_0x359796[_0x500d1f(0x509)]['id'],'vote':_0x5696b9}:{},..._0x7a1a3b===_0x500d1f(0x351)?{'buttonOrList_id':_0x30ecb3,'vote':_0x5696b9}:{},..._0x7a1a3b===_0x500d1f(0x7d1)?{'buttonOrList_id':_0x30ecb3,'vote':_0x5696b9}:{},..._0x7a1a3b===_0x500d1f(0x5c5)?{'buttonOrList_id':_0x30ecb3,'vote':_0x5696b9}:{},..._0x7a1a3b===_0x500d1f(0x4b7)?{'buttonOrList_id':_0x30ecb3,'vote':_0x5696b9}:{},'type':_0x7a1a3b,..._0x426e7e&&{'edited':_0x426e7e},..._0x2ae48d&&{'quoted':_0x2ae48d},..._0x3077c4&&{'reaction':_0x3077c4},...(_0x7a1a3b===_0x500d1f(0x131)||_0x7a1a3b==='pollCreationMessageV2'||_0x7a1a3b==='pollCreationMessageV3'||_0x7a1a3b==='listMessage'||_0x7a1a3b===_0x500d1f(0x12f))&&{'convertedOptions':_0x5d3466[_0x500d1f(0x75a)]}};}return{'messageType':_0x7a1a3b,'messageContent':_0x359796,'message_normalized':_0x5d3466};}catch(_0x14d46d){return this[_0x500d1f(0x85a)][_0x500d1f(0x7bf)](_0x500d1f(0x402)+_0x14d46d),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x58234c(0x704)]=[],(this['cleanStore'](),this['initializeQueue'](),this[_0x58234c(0x22f)][_0x58234c(0x1b9)]=!0x0,this['instance'][_0x58234c(0x352)]={'count':0x0},this[_0x58234c(0x22f)]['ScheduleMessage']={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}[a0_0x11d42e(0x385)](_0x4f9b4c,_0x4da051){const _0x326b40=a0_0x11d42e;this[_0x326b40(0x4a3)][_0x4f9b4c]||(this[_0x326b40(0x4a3)][_0x4f9b4c]=new Set()),this[_0x326b40(0x4a3)][_0x4f9b4c]['add'](_0x4da051),setTimeout(()=>this[_0x326b40(0x4a3)][_0x4f9b4c]['delete'](_0x4da051),0x2710);}['isMessageProcessed'](_0x368e8f,_0x568af2){const _0x283a28=a0_0x11d42e;return this[_0x283a28(0x4a3)][_0x368e8f]?.['has'](_0x568af2)??!0x1;}set[a0_0x11d42e(0x7ec)](_0xc83ef7){const _0x4b16c6=a0_0x11d42e;if(!_0xc83ef7){this['instance'][_0x4b16c6(0x414)]=(0x0,Di['v4'])();return;}this[_0x4b16c6(0x22f)]['name']=_0xc83ef7,this[_0x4b16c6(0x38d)](_0x4b16c6(0x847),{'instance':this[_0x4b16c6(0x22f)][_0x4b16c6(0x414)],'status':'created'});}get[a0_0x11d42e(0x7ec)](){const _0x4ca483=a0_0x11d42e;return this[_0x4ca483(0x22f)][_0x4ca483(0x414)];}get[a0_0x11d42e(0x3d9)](){const _0x147901=a0_0x11d42e;return this[_0x147901(0x22f)][_0x147901(0x3d9)];}async[a0_0x11d42e(0x3cf)](){const _0x1198ff=a0_0x11d42e;let _0x3953f1=this[_0x1198ff(0x60c)][_0x1198ff(0x5e1)]?.[_0x1198ff(0x414)]??this[_0x1198ff(0x60c)][_0x1198ff(0x5e1)]?.[_0x1198ff(0x65c)];if(!_0x3953f1){if(this['configService'][_0x1198ff(0x686)]('DATABASE')[_0x1198ff(0x84f)]){let _0x19dadc=await T['getClient']()['db'](this[_0x1198ff(0x155)]['get'](_0x1198ff(0x683))[_0x1198ff(0x3c6)]['DB_PREFIX_NAME']+'-instances')[_0x1198ff(0x2cc)](this[_0x1198ff(0x7ec)])[_0x1198ff(0x588)]({'_id':'creds'});if(_0x19dadc){let _0x15d3f8=JSON['parse'](JSON[_0x1198ff(0x7b9)](_0x19dadc),w[_0x1198ff(0x1ee)]['reviver']);_0x3953f1=_0x15d3f8['me']?.['name']||_0x15d3f8['me']?.[_0x1198ff(0x65c)];}}else{if((0x0,Je[_0x1198ff(0x7a4)])((0x0,j[_0x1198ff(0x7f4)])(Me,this[_0x1198ff(0x7ec)],'creds.json'))){let _0x24a88c=JSON[_0x1198ff(0x5c7)]((0x0,Je[_0x1198ff(0x5cd)])((0x0,j[_0x1198ff(0x7f4)])(Me,this[_0x1198ff(0x7ec)],_0x1198ff(0x17d)),{'encoding':'utf-8'}));_0x3953f1=_0x24a88c['me']?.['name']||_0x24a88c['me']?.['verifiedName'];}}}return _0x3953f1;}get[a0_0x11d42e(0x7c3)](){const _0x14b0b7=a0_0x11d42e;return this[_0x14b0b7(0x22f)][_0x14b0b7(0x7c3)];}async['isBusinessInstance'](){const _0x482118=a0_0x11d42e;let _0xa7670b=this[_0x482118(0x22f)][_0x482118(0x3d9)]+'@s.whatsapp.net';try{await this['client'][_0x482118(0x3db)](_0xa7670b)?this[_0x482118(0x22f)][_0x482118(0x4fd)]=!0x0:this[_0x482118(0x22f)]['isBusiness']=!0x1;}catch{this[_0x482118(0x22f)]['isBusiness']=!0x1;}return this['logger'][_0x482118(0x59a)](this[_0x482118(0x7ec)]+'\x20('+this[_0x482118(0x22f)][_0x482118(0x3d9)]+_0x482118(0x75c)+this['instance'][_0x482118(0x4fd)]),this[_0x482118(0x22f)][_0x482118(0x4fd)];}get['qrCode'](){const _0x5f2cd5=a0_0x11d42e;return this[_0x5f2cd5(0x22f)][_0x5f2cd5(0x1b9)]=!0x1,this[_0x5f2cd5(0x22f)][_0x5f2cd5(0x352)]?.[_0x5f2cd5(0x537)]?{'pairingCode':this[_0x5f2cd5(0x22f)][_0x5f2cd5(0x352)]?.[_0x5f2cd5(0x537)]}:{'code':this[_0x5f2cd5(0x22f)][_0x5f2cd5(0x352)]?.[_0x5f2cd5(0x7d9)],'base64':this[_0x5f2cd5(0x22f)][_0x5f2cd5(0x352)]?.[_0x5f2cd5(0x30a)]};}async['loadWebhook'](){const _0x2f6cff=a0_0x11d42e;let _0x1b63ad=await this[_0x2f6cff(0x373)][_0x2f6cff(0x772)][_0x2f6cff(0x6d7)](this[_0x2f6cff(0x7ec)]);this[_0x2f6cff(0x70f)][_0x2f6cff(0x443)]=_0x1b63ad?.['url'],this[_0x2f6cff(0x70f)][_0x2f6cff(0x227)]=_0x1b63ad?.[_0x2f6cff(0x227)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x8a2)]=_0x1b63ad?.[_0x2f6cff(0x8a2)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x3e5)]=_0x1b63ad?.[_0x2f6cff(0x3e5)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x617)]=_0x1b63ad?.['QRCODE_UPDATED'],this[_0x2f6cff(0x70f)]['SEND_MESSAGE']=_0x1b63ad?.[_0x2f6cff(0x250)],this[_0x2f6cff(0x70f)]['MESSAGES_UPSERT']=_0x1b63ad?.['MESSAGES_UPSERT'],this[_0x2f6cff(0x70f)][_0x2f6cff(0x48c)]=_0x1b63ad?.[_0x2f6cff(0x48c)],this[_0x2f6cff(0x70f)]['GROUPS_UPSERT']=_0x1b63ad?.[_0x2f6cff(0x8a9)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x1e0)]=_0x1b63ad?.[_0x2f6cff(0x1e0)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x6c5)]=_0x1b63ad?.['GROUP_PARTICIPANTS_UPDATE'],this[_0x2f6cff(0x70f)][_0x2f6cff(0x134)]=_0x1b63ad?.[_0x2f6cff(0x134)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x5ba)]=_0x1b63ad?.[_0x2f6cff(0x5ba)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x73c)]=_0x1b63ad?.['CHATS_UPDATE'],this[_0x2f6cff(0x70f)]['CHATS_DELETE']=_0x1b63ad?.[_0x2f6cff(0x147)],this['localWebhook'][_0x2f6cff(0x5ff)]=_0x1b63ad?.[_0x2f6cff(0x5ff)],this['localWebhook']['CONTACTS_UPSERT']=_0x1b63ad?.[_0x2f6cff(0x687)],this['localWebhook'][_0x2f6cff(0x7c1)]=_0x1b63ad?.[_0x2f6cff(0x7c1)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x72b)]=_0x1b63ad?.[_0x2f6cff(0x72b)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x790)]=_0x1b63ad?.[_0x2f6cff(0x790)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x16d)]=_0x1b63ad?.[_0x2f6cff(0x16d)],this[_0x2f6cff(0x70f)][_0x2f6cff(0x3a8)]=_0x1b63ad?.['groups_ignore'];}async[a0_0x11d42e(0x28d)](_0x1ee7ec){const _0x380752=a0_0x11d42e;let _0x430f36=[_0x380752(0x665),'url',_0x380752(0x227),_0x380752(0x8a2),_0x380752(0x3e5),_0x380752(0x617),_0x380752(0x48c),_0x380752(0x6d0),_0x380752(0x250),'GROUPS_UPSERT','GROUPS_UPDATE',_0x380752(0x6c5),'CHATS_SET',_0x380752(0x5ba),_0x380752(0x73c),_0x380752(0x147),_0x380752(0x5ff),_0x380752(0x687),_0x380752(0x7c1),_0x380752(0x72b),'MESSAGES_SET',_0x380752(0x16d),_0x380752(0x3a8)],_0x277d4e={};return _0x430f36[_0x380752(0x46a)](_0x51b1c1=>{_0x1ee7ec[_0x51b1c1]!==void 0x0&&(_0x277d4e[_0x51b1c1]=_0x1ee7ec[_0x51b1c1]);}),_0x277d4e[_0x380752(0x443)]&&(_0x277d4e[_0x380752(0x443)]=_0x277d4e[_0x380752(0x443)][_0x380752(0x593)]()),await this[_0x380752(0x373)][_0x380752(0x772)][_0x380752(0x3a3)](_0x277d4e,this['instanceName']),Object[_0x380752(0x7b3)](this[_0x380752(0x70f)],_0x277d4e),await this[_0x380752(0x373)][_0x380752(0x772)]['find'](this['instanceName']);}async[a0_0x11d42e(0x25f)](){const _0x2f538b=a0_0x11d42e;return await this['repository']['webhook']['find'](this[_0x2f538b(0x7ec)]);}async[a0_0x11d42e(0x38d)](_0x6c03a3,_0x124bd4){const _0x28a2cb=a0_0x11d42e;let _0x11a025=_0x6c03a3[_0x28a2cb(0x771)](/[\.-]/gm,'_')[_0x28a2cb(0x349)](),_0xd11cbf=this['localWebhook'][_0x28a2cb(0x227)]&&(0x0,J[_0x28a2cb(0x360)])(this[_0x28a2cb(0x70f)][_0x28a2cb(0x443)])?this[_0x28a2cb(0x70f)][_0x28a2cb(0x443)]+(this[_0x28a2cb(0x70f)][_0x28a2cb(0x8a2)]?this[_0x28a2cb(0x78e)][_0x6c03a3]:''):null,_0x1e1822=this[_0x28a2cb(0x70f)][_0x11a025],_0x49a9cb=pe&&pe[_0x28a2cb(0x227)]&&(0x0,J[_0x28a2cb(0x360)])(pe[_0x28a2cb(0x443)])?pe['url']+(pe[_0x28a2cb(0x8a2)]?this[_0x28a2cb(0x78e)][_0x6c03a3]:''):null,_0x1cc58f=pe?pe[_0x11a025]:null;if(_0x1e1822&&_0xd11cbf)try{await K[_0x28a2cb(0x3de)][_0x28a2cb(0x3a3)]({'baseURL':_0xd11cbf})[_0x28a2cb(0x4d3)]('',{'event':_0x6c03a3,'instance':this[_0x28a2cb(0x22f)][_0x28a2cb(0x414)],'apikey':this['instance'][_0x28a2cb(0x472)],'data':_0x124bd4}),this[_0x28a2cb(0x85a)][_0x28a2cb(0x86e)](this[_0x28a2cb(0x7ec)]+'\x20('+this['instance'][_0x28a2cb(0x3d9)]+'):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x6c03a3+':\x20'+_0xd11cbf);}catch{this[_0x28a2cb(0x85a)][_0x28a2cb(0x7bf)](this[_0x28a2cb(0x7ec)]+'\x20('+this[_0x28a2cb(0x22f)][_0x28a2cb(0x3d9)]+'):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x6c03a3+':\x20'+_0xd11cbf);}if(_0x1cc58f&&_0x49a9cb)try{await K[_0x28a2cb(0x3de)]['create']({'baseURL':_0x49a9cb})['post']('',{'event':_0x6c03a3,'instance':this[_0x28a2cb(0x22f)][_0x28a2cb(0x414)],'apikey':this['instance'][_0x28a2cb(0x472)],'data':_0x124bd4}),this['logger'][_0x28a2cb(0x86e)](this[_0x28a2cb(0x7ec)]+'\x20('+this[_0x28a2cb(0x22f)][_0x28a2cb(0x3d9)]+_0x28a2cb(0x66c)+_0x6c03a3+':\x20'+_0x49a9cb);}catch{this[_0x28a2cb(0x85a)]['error'](this[_0x28a2cb(0x7ec)]+'\x20('+this[_0x28a2cb(0x22f)]['wuid']+_0x28a2cb(0x610)+_0x6c03a3+':\x20'+_0x49a9cb);}}async['connectionUpdate']({qr:_0x598a3d,connection:_0x21d304,lastDisconnect:_0x482791}){const _0x43e3c3=a0_0x11d42e;if(_0x598a3d){if(this[_0x43e3c3(0x22f)]['qrcode'][_0x43e3c3(0x460)]===jo)return this['sendDataWebhook'](_0x43e3c3(0x5c0),{'message':_0x43e3c3(0x6c7),'statusCode':w[_0x43e3c3(0x609)][_0x43e3c3(0x622)]}),this[_0x43e3c3(0x4eb)]={'state':_0x43e3c3(0x2d9),'statusReason':w[_0x43e3c3(0x609)]['connectionClosed']},this[_0x43e3c3(0x38d)]('connection.update',{'instance':this[_0x43e3c3(0x22f)][_0x43e3c3(0x414)],...this[_0x43e3c3(0x4eb)]}),this[_0x43e3c3(0x38d)](_0x43e3c3(0x847),{'instance':this['instance']['name'],'status':'removed'}),this[_0x43e3c3(0x373)][_0x43e3c3(0x44a)][_0x43e3c3(0x165)](this[_0x43e3c3(0x22f)][_0x43e3c3(0x414)]),this[_0x43e3c3(0x6f8)]=!0x0,this[_0x43e3c3(0x7e3)][_0x43e3c3(0x862)](_0x43e3c3(0x840),this[_0x43e3c3(0x22f)][_0x43e3c3(0x414)]);this[_0x43e3c3(0x22f)][_0x43e3c3(0x352)][_0x43e3c3(0x460)]++;let _0x987c5f={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x43e3c3(0x4d9),'dark':_0x43e3c3(0x5b5)}};ki[_0x43e3c3(0x3de)][_0x43e3c3(0x572)](_0x598a3d,_0x987c5f,(_0x489be9,_0x395c55)=>{const _0x479059=_0x43e3c3;if(_0x489be9){this[_0x479059(0x85a)][_0x479059(0x7bf)](this['instanceName']+'\x20('+this[_0x479059(0x22f)]['wuid']+_0x479059(0x58b)+(_0x489be9 instanceof Error?_0x489be9[_0x479059(0x5a8)]:JSON[_0x479059(0x7b9)](_0x489be9,null,0x2)));return;}this[_0x479059(0x22f)]['qrcode'][_0x479059(0x30a)]=_0x395c55,this[_0x479059(0x22f)][_0x479059(0x352)][_0x479059(0x7d9)]=_0x598a3d,!this[_0x479059(0x438)]&&this[_0x479059(0x38d)](_0x479059(0x5c0),{'qrcode':{'instance':this[_0x479059(0x22f)][_0x479059(0x414)],'pairingCode':this[_0x479059(0x22f)]['qrcode']['pairingCode'],'code':_0x598a3d,'base64':_0x395c55}});}),this['phoneNumber']?this[_0x43e3c3(0x22f)][_0x43e3c3(0x352)]['pairingCode']||(await(0x0,w[_0x43e3c3(0x779)])(0x7d0),this[_0x43e3c3(0x22f)][_0x43e3c3(0x352)][_0x43e3c3(0x537)]=await this[_0x43e3c3(0x60c)][_0x43e3c3(0x384)](this[_0x43e3c3(0x438)])):this[_0x43e3c3(0x22f)][_0x43e3c3(0x352)]['pairingCode']=null,Li[_0x43e3c3(0x3de)][_0x43e3c3(0x219)](_0x598a3d,{'small':!0x0},_0x5dc674=>this[_0x43e3c3(0x85a)]['log'](_0x43e3c3(0x6a6)+this[_0x43e3c3(0x22f)][_0x43e3c3(0x414)]+_0x43e3c3(0x834)+this[_0x43e3c3(0x22f)]['qrcode'][_0x43e3c3(0x460)]+',\x20pairCode:\x20'+this[_0x43e3c3(0x22f)][_0x43e3c3(0x352)]['pairingCode']+_0x43e3c3(0x763)+_0x5dc674));}if(_0x21d304&&(this[_0x43e3c3(0x4eb)]={'state':_0x21d304,'statusReason':_0x482791?.[_0x43e3c3(0x7bf)]?.[_0x43e3c3(0x4ab)]?.[_0x43e3c3(0x6c4)]??0xc8},this[_0x43e3c3(0x38d)](_0x43e3c3(0x29f),{'instance':this[_0x43e3c3(0x22f)]['name'],...this[_0x43e3c3(0x4eb)]})),_0x21d304===_0x43e3c3(0x85f)){if(_0x482791[_0x43e3c3(0x7bf)]?.[_0x43e3c3(0x4ab)]?.['statusCode']!==w[_0x43e3c3(0x609)][_0x43e3c3(0x263)]&&(this[_0x43e3c3(0x2f1)]<0x21||this[_0x43e3c3(0x22f)][_0x43e3c3(0x274)][_0x43e3c3(0x62c)])){this[_0x43e3c3(0x2f1)]++,this[_0x43e3c3(0x6e2)][_0x43e3c3(0x64a)](Date['now']()),this[_0x43e3c3(0x6e2)]=this['reconnectTimestamps'][_0x43e3c3(0x852)](_0xc284bf=>Date[_0x43e3c3(0x19e)]()-_0xc284bf<this[_0x43e3c3(0x5cf)]);let _0xdaaf00=this['reconnectAttempts']<=0x1?0x0:Math[_0x43e3c3(0x4ba)](Math['pow'](0x2,this[_0x43e3c3(0x2f1)]-0x1)*0x3e8,0x493e0);console[_0x43e3c3(0x86e)](this[_0x43e3c3(0x7ec)]+'\x20Tentativa\x20de\x20reconexão\x20'+this[_0x43e3c3(0x2f1)]+_0x43e3c3(0x1b7)+_0xdaaf00/0x3e8+_0x43e3c3(0x33b)),await new Promise(_0x19b3e9=>setTimeout(_0x19b3e9,_0xdaaf00)),console[_0x43e3c3(0x86e)]('Tentando\x20reconectar...'),await this['connectToWhatsapp']();}else{this[_0x43e3c3(0x38d)]('status.instance',{'instance':this[_0x43e3c3(0x22f)][_0x43e3c3(0x414)],'status':_0x43e3c3(0x60f)}),this[_0x43e3c3(0x22f)][_0x43e3c3(0x274)][_0x43e3c3(0x62c)]=!0x1,this[_0x43e3c3(0x373)][_0x43e3c3(0x772)][_0x43e3c3(0x165)](this[_0x43e3c3(0x7ec)]),this[_0x43e3c3(0x373)]['auth'][_0x43e3c3(0x3a3)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x43e3c3(0x19e)]()},this[_0x43e3c3(0x22f)]['name']);try{this[_0x43e3c3(0x85a)][_0x43e3c3(0x70a)](this[_0x43e3c3(0x7ec)]+'\x20('+this['instance']['wuid']+'):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...');let _0x4fa083=await this[_0x43e3c3(0x373)][_0x43e3c3(0x5a8)][_0x43e3c3(0x4b2)](this[_0x43e3c3(0x22f)][_0x43e3c3(0x3d9)]);_0x4fa083[_0x43e3c3(0x538)]?this[_0x43e3c3(0x85a)][_0x43e3c3(0x70a)](this[_0x43e3c3(0x7ec)]+'\x20('+this[_0x43e3c3(0x22f)][_0x43e3c3(0x3d9)]+'):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.'):this[_0x43e3c3(0x85a)]['error'](_0x43e3c3(0x3dc)+_0x4fa083['error']);}catch(_0xb57d2c){this[_0x43e3c3(0x85a)][_0x43e3c3(0x7bf)](_0x43e3c3(0x74c)+_0xb57d2c[_0x43e3c3(0x5a8)]);}this[_0x43e3c3(0x22f)]['ScheduleMessage'][_0x43e3c3(0x5c6)]!==null&&(this[_0x43e3c3(0x85a)][_0x43e3c3(0x70a)](this[_0x43e3c3(0x7ec)]+'\x20('+this[_0x43e3c3(0x22f)]['wuid']+_0x43e3c3(0x3f3)),clearInterval(this[_0x43e3c3(0x22f)][_0x43e3c3(0x274)][_0x43e3c3(0x5c6)]),this['instance'][_0x43e3c3(0x274)][_0x43e3c3(0x5c6)]=null),this[_0x43e3c3(0x85a)][_0x43e3c3(0x70a)](this['instanceName']+'\x20('+this[_0x43e3c3(0x22f)][_0x43e3c3(0x3d9)]+_0x43e3c3(0x183)),this['AutomateSystem']=null,this[_0x43e3c3(0x7e3)][_0x43e3c3(0x862)]('remove.instance',this['instance']['name'],_0x43e3c3(0x1f3)),this[_0x43e3c3(0x60c)]?.['ws']?.[_0x43e3c3(0x85f)](),this['client'][_0x43e3c3(0x148)](new Error(_0x43e3c3(0x241)));}}if(_0x21d304===_0x43e3c3(0x78a)){this[_0x43e3c3(0x85a)][_0x43e3c3(0x4d4)](this[_0x43e3c3(0x7ec)]+'\x20('+this['instance'][_0x43e3c3(0x3d9)]+_0x43e3c3(0x248)+this[_0x43e3c3(0x60c)][_0x43e3c3(0x2c2)][_0x43e3c3(0x3ab)]?.[_0x43e3c3(0x1fe)]),this[_0x43e3c3(0x60c)]['authState'][_0x43e3c3(0x3ab)]?.[_0x43e3c3(0x1fe)]||(this[_0x43e3c3(0x85a)]['warn'](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20ev.flush\x20realizado'),this[_0x43e3c3(0x60c)]['ev'][_0x43e3c3(0x53c)]()),this[_0x43e3c3(0x490)],this['instance'][_0x43e3c3(0x3d9)]=this[_0x43e3c3(0x60c)][_0x43e3c3(0x5e1)]['id'][_0x43e3c3(0x771)](/:\d+/,'')['replace']('@s.whatsapp.net',''),this[_0x43e3c3(0x22f)][_0x43e3c3(0x7c3)]=(await this[_0x43e3c3(0x160)](this[_0x43e3c3(0x22f)][_0x43e3c3(0x3d9)]+'@s.whatsapp.net'))[_0x43e3c3(0x7c3)],this[_0x43e3c3(0x373)][_0x43e3c3(0x44a)]['create']({'online':!0x0,'owner':this[_0x43e3c3(0x22f)][_0x43e3c3(0x3d9)],'lastDisconnect':null},this[_0x43e3c3(0x22f)][_0x43e3c3(0x414)]);let _0x25a341=_0x43e3c3(0x75b)+this['instance'][_0x43e3c3(0x3d9)],_0x5a4bd3=0x28,_0x3268f4=Math[_0x43e3c3(0x6d5)]((_0x5a4bd3-_0x25a341[_0x43e3c3(0x57a)])/0x2),_0x2ae293='\x20'['repeat'](_0x3268f4),_0x3ddf6a=_0x43e3c3(0x1b6),_0x2e9ee9=_0x43e3c3(0x1bc)+this['instance']['name'],_0x206697=(''+_0x2ae293+_0x25a341+_0x2ae293)[_0x43e3c3(0x630)](_0x5a4bd3,'\x20'),_0x41616d=(''+_0x2ae293+_0x3ddf6a+_0x2ae293)['padEnd'](_0x5a4bd3,'\x20'),_0x239f99=(''+_0x2ae293+_0x2e9ee9+_0x2ae293)['padEnd'](_0x5a4bd3,'\x20'),_0x535530=Math['max'](_0x206697['length'],_0x41616d['length'],_0x239f99[_0x43e3c3(0x57a)]),_0x10df0c=_0x206697['padEnd'](_0x535530,'\x20'),_0x2bdf0e=_0x41616d[_0x43e3c3(0x630)](_0x535530,'\x20'),_0x300bb7=_0x239f99['padEnd'](_0x535530,'\x20');this[_0x43e3c3(0x85a)][_0x43e3c3(0x59a)]((_0x43e3c3(0x33c)+'─'[_0x43e3c3(0x157)](_0x535530)+_0x43e3c3(0x175)+_0x2bdf0e+_0x43e3c3(0x36d)+_0x300bb7+_0x43e3c3(0x36d)+_0x10df0c+_0x43e3c3(0x586)+'─'[_0x43e3c3(0x157)](_0x535530)+'┘')[_0x43e3c3(0x771)](/^ +/gm,'\x20\x20')),this[_0x43e3c3(0x872)](),this[_0x43e3c3(0x22f)][_0x43e3c3(0x274)][_0x43e3c3(0x62c)]=!0x0;}}[a0_0x11d42e(0x490)](){const _0x5f108b=a0_0x11d42e;this[_0x5f108b(0x2f1)]=0x0,this['reconnectTimestamps']=[];}async['getMessage'](_0x42f901,_0x378400=!0x1){const _0x43ca97=a0_0x11d42e;try{let _0x379bf3=await this[_0x43ca97(0x373)][_0x43ca97(0x5a8)][_0x43ca97(0x6d7)]({'where':{'_id':_0x42f901['id']}},this[_0x43ca97(0x22f)][_0x43ca97(0x3d9)]);return _0x378400?_0x379bf3[0x0]:_0x379bf3[0x0][_0x43ca97(0x5a8)];}catch{return{'conversation':''};}}[a0_0x11d42e(0x3aa)](){const _0x466fe8=a0_0x11d42e;let _0x309468=this['configService']['get'](_0x466fe8(0x2ef)),_0x19ac08=this[_0x466fe8(0x155)][_0x466fe8(0x686)]('DATABASE');_0x309468?.[_0x466fe8(0x623)]&&!_0x19ac08[_0x466fe8(0x84f)]&&setInterval(()=>{const _0x2676d4=_0x466fe8;try{for(let [_0x5a0776,_0xb46d40]of Object[_0x2676d4(0x575)](_0x309468))_0xb46d40===!0x0&&(0x0,qe['execSync'])(_0x2676d4(0x611)+(0x0,j['join'])(this['storePath'],_0x5a0776[_0x2676d4(0x68f)](),this['instance'][_0x2676d4(0x3d9)])+_0x2676d4(0x411));}catch{}},(_0x309468?.[_0x466fe8(0x623)]??0xe10)*0x3e8);}async['defineAuthState'](){const _0xbf45b5=a0_0x11d42e;let _0x44cf06=this[_0xbf45b5(0x155)][_0xbf45b5(0x686)](_0xbf45b5(0x683)),_0x58eb00=this[_0xbf45b5(0x155)][_0xbf45b5(0x686)](_0xbf45b5(0x577));return _0x58eb00?.[_0xbf45b5(0x84f)]?await ks(_0x58eb00,this[_0xbf45b5(0x22f)][_0xbf45b5(0x414)]):_0x44cf06[_0xbf45b5(0x84f)]?await Ds(this[_0xbf45b5(0x22f)]['name']):await(0x0,w[_0xbf45b5(0x5ef)])((0x0,j[_0xbf45b5(0x7f4)])(Me,this['instance'][_0xbf45b5(0x414)]));}async[a0_0x11d42e(0x872)](){const _0x565681=a0_0x11d42e;let _0x30dc7a=()=>Math['floor'](Math['random']()*0x4e21)+0x7d0,_0x2cb02d=async()=>{const _0x39db48=a0_0x2924;if(!this[_0x39db48(0x22f)][_0x39db48(0x274)]['isConnected']){this[_0x39db48(0x85a)][_0x39db48(0x70a)](this[_0x39db48(0x7ec)]+'\x20('+this[_0x39db48(0x22f)]['wuid']+_0x39db48(0x785)),this[_0x39db48(0x3c9)]=!0x1;return;}if(this['instance'][_0x39db48(0x3d9)]&&this[_0x39db48(0x747)]&&this[_0x39db48(0x22f)][_0x39db48(0x274)][_0x39db48(0x5c6)]!==null&&this[_0x39db48(0x22f)][_0x39db48(0x274)]['delayMessage']!==void 0x0){let _0x1646e9=Math[_0x39db48(0x589)](this[_0x39db48(0x22f)][_0x39db48(0x274)][_0x39db48(0x5c6)]/0xea60);this[_0x39db48(0x85a)][_0x39db48(0x70a)](this[_0x39db48(0x7ec)]+'\x20('+this[_0x39db48(0x22f)][_0x39db48(0x3d9)]+'):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20'+_0x1646e9+_0x39db48(0x3ac)),this[_0x39db48(0x3c9)]=!0x1;return;}else this[_0x39db48(0x22f)][_0x39db48(0x3d9)]&&(this[_0x39db48(0x85a)][_0x39db48(0x70a)](this[_0x39db48(0x7ec)]+'\x20('+this[_0x39db48(0x22f)]['wuid']+_0x39db48(0x4be)),this[_0x39db48(0x747)]||(await this[_0x39db48(0x3ea)](),this[_0x39db48(0x866)](),this[_0x39db48(0x67f)]()),(this[_0x39db48(0x22f)]['ScheduleMessage'][_0x39db48(0x5c6)]===null||this['instance'][_0x39db48(0x274)][_0x39db48(0x5c6)]===void 0x0)&&await this['scheduleNextCheck']());if(this[_0x39db48(0x3c9)]){let _0x305dc8=_0x30dc7a();this[_0x39db48(0x85a)]['verbose'](this['instanceName']+':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20'+_0x305dc8/0x3e8+'\x20segundos'),setTimeout(_0x2cb02d,_0x305dc8);}};if(this['isRunning'])return;this[_0x565681(0x3c9)]=!0x0;let _0x46991b=_0x30dc7a();setTimeout(_0x2cb02d,_0x46991b);}async[a0_0x11d42e(0x67f)](){const _0x2ffec2=a0_0x11d42e;let _0x210f82=this[_0x2ffec2(0x22f)][_0x2ffec2(0x3d9)];try{let _0x116646=await this['repository']['flow']['findAll']({'where':{'$or':[{'owner':_0x210f82},{'whoCanUse':{'$in':[_0x210f82]}},{'shareOwners':{'$in':[_0x210f82]}}]}}),_0x8e88f7=new Map(this[_0x2ffec2(0x747)][_0x2ffec2(0x814)][_0x2ffec2(0x4f6)](_0x4f8228=>[_0x4f8228[_0x2ffec2(0x665)],_0x4f8228])),_0x4fd3f8=_0x116646[_0x2ffec2(0x4f6)](_0x1d8793=>{const _0x768ae6=_0x2ffec2;let _0x2d9392=_0x8e88f7['get'](_0x1d8793[_0x768ae6(0x665)]?.[_0x768ae6(0x1d7)]());return{'_id':_0x1d8793[_0x768ae6(0x665)]?.[_0x768ae6(0x1d7)](),'name':_0x2d9392?.[_0x768ae6(0x414)]??_0x1d8793[_0x768ae6(0x414)],'default':_0x2d9392?.[_0x768ae6(0x3de)]??_0x1d8793['default']??!0x1,'startCommand':_0x2d9392?.[_0x768ae6(0x6d2)]??_0x1d8793['startCommandWord'],'minutesToClose':_0x2d9392?.[_0x768ae6(0x6f6)]??_0x1d8793[_0x768ae6(0x6f6)]??0xa,'readMessages':_0x2d9392?.[_0x768ae6(0x151)]??_0x1d8793['readMessages']??!0x1,'testingWith':_0x2d9392?.['testingWith']??_0x1d8793['testingWith'],'canEdit':_0x1d8793['owner']===_0x210f82||(_0x1d8793[_0x768ae6(0x2a8)]??[])[_0x768ae6(0x3ef)](_0x210f82),'usersCount':(_0x1d8793['shareOwners']??[])[_0x768ae6(0x57a)]??0x0};}),_0x289db0=!0x1;_0x4fd3f8[_0x2ffec2(0x46a)](_0x487f1d=>{const _0x5164a7=_0x2ffec2;_0x487f1d[_0x5164a7(0x3de)]&&(_0x289db0?_0x487f1d[_0x5164a7(0x3de)]=!0x1:_0x289db0=!0x0);}),this[_0x2ffec2(0x747)]['flows']=_0x4fd3f8;let _0x810e89={'flows':_0x4fd3f8};return await this['repository'][_0x2ffec2(0x82f)][_0x2ffec2(0x8ad)](_0x810e89,_0x210f82),this[_0x2ffec2(0x85a)][_0x2ffec2(0x70a)](this[_0x2ffec2(0x7ec)]+'\x20('+_0x210f82+_0x2ffec2(0x203)),_0x4fd3f8['length'];}catch(_0x2b9a41){return this[_0x2ffec2(0x85a)]['error'](this[_0x2ffec2(0x7ec)]+'\x20('+_0x210f82+'):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20'+(_0x2b9a41 instanceof Error?_0x2b9a41['message']:JSON[_0x2ffec2(0x7b9)](_0x2b9a41,null,0x2))),{'message':'Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20'+(_0x2b9a41 instanceof Error?_0x2b9a41[_0x2ffec2(0x5a8)]:JSON['stringify'](_0x2b9a41,null,0x2))};}}async[a0_0x11d42e(0x136)](_0x39daef){const _0x74de3f=a0_0x11d42e;try{let _0x3725ab=await this[_0x74de3f(0x373)][_0x74de3f(0x22f)][_0x74de3f(0x588)]({'where':{'_id':ge+'-'+this[_0x74de3f(0x7ec)]}}),_0x2c4036,_0x4c7af8=!je[_0x74de3f(0x744)]||!je[_0x74de3f(0x29c)];console[_0x74de3f(0x86e)](_0x74de3f(0x740)),console['log'](_0x74de3f(0x453),Pi),console[_0x74de3f(0x86e)]('this.reconnectAttempts:\x20',this[_0x74de3f(0x2f1)]),console['log'](_0x74de3f(0x740)),Pi&&!_0x4c7af8&&(this['reconnectAttempts']<0x4||!this[_0x74de3f(0x2f1)]?_0x3725ab&&_0x3725ab['ip']?(_0x2c4036=_0x3725ab['ip'],console[_0x74de3f(0x86e)](_0x74de3f(0x193)+_0x2c4036)):(_0x2c4036=await je['createIPv6'](ge,this[_0x74de3f(0x22f)][_0x74de3f(0x414)]),_0x2c4036?(console[_0x74de3f(0x86e)](_0x74de3f(0x4f4)+_0x2c4036),await(0x0,w[_0x74de3f(0x779)])(0x7d0)):console[_0x74de3f(0x7bf)](_0x74de3f(0x55b))):this[_0x74de3f(0x2f1)]<0x6&&(console[_0x74de3f(0x86e)]('IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.'),_0x2c4036=await je[_0x74de3f(0x4cd)](ge,this[_0x74de3f(0x22f)][_0x74de3f(0x414)]),_0x2c4036?(console['log']('Novo\x20IP\x20criado:\x20'+_0x2c4036),await(0x0,w[_0x74de3f(0x779)])(0x7d0)):console['error'](_0x74de3f(0x334)))),this[_0x74de3f(0x67b)](),this[_0x74de3f(0x22f)][_0x74de3f(0x472)]=(await this[_0x74de3f(0x373)][_0x74de3f(0x44a)][_0x74de3f(0x6d7)](this[_0x74de3f(0x22f)]['name']))[_0x74de3f(0x472)],this[_0x74de3f(0x22f)]['authState']=await this['defineAuthState']();let _0x1f50df=[Ui,Vs,(0x0,js[_0x74de3f(0x689)])()],_0xbc89cb={'localAddress':_0x2c4036,'auth':{'creds':this[_0x74de3f(0x22f)][_0x74de3f(0x2c2)]['state'][_0x74de3f(0x3ab)],'keys':(0x0,w[_0x74de3f(0x420)])(this['instance'][_0x74de3f(0x2c2)][_0x74de3f(0x44d)]['keys'],(0x0,Jt[_0x74de3f(0x3de)])({'level':_0x74de3f(0x7bf)}))},'logger':(0x0,Jt[_0x74de3f(0x3de)])({'level':_0x74de3f(0x7bf)}),'printQRInTerminal':!0x1,'browser':_0x39daef?[_0x74de3f(0x40f),Vs,(0x0,js[_0x74de3f(0x689)])()]:_0x1f50df,'version':[0x2,0xbb8,0x3d4dd679],'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x186be2=>{const _0x41ffbd=_0x74de3f;let _0x400453=this['localWebhook']?.['groups_ignore']&&(0x0,w[_0x41ffbd(0x43d)])(_0x186be2);return(0x0,w[_0x41ffbd(0x294)])(_0x186be2)||_0x400453;},'msgRetryCounterCache':this[_0x74de3f(0x80d)],'getMessage':async _0x5d58c3=>await this[_0x74de3f(0x508)](_0x5d58c3),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x74de3f(0x46f)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x29899f){const _0x28785f=_0x74de3f;return _0x29899f[_0x28785f(0x7f0)]?.[_0x28785f(0x5a8)]?.[_0x28785f(0x659)]?.[_0x28785f(0x326)]===w[_0x28785f(0x815)][_0x28785f(0x2bc)]['ListMessage'][_0x28785f(0x88e)][_0x28785f(0x7cd)]&&(_0x29899f=JSON[_0x28785f(0x5c7)](JSON['stringify'](_0x29899f)),_0x29899f[_0x28785f(0x7f0)]['message'][_0x28785f(0x659)][_0x28785f(0x326)]=w[_0x28785f(0x815)][_0x28785f(0x2bc)]['ListMessage']['ListType']['SINGLE_SELECT']),_0x29899f[_0x28785f(0x659)]?.[_0x28785f(0x326)]==w[_0x28785f(0x815)][_0x28785f(0x2bc)][_0x28785f(0x5ac)][_0x28785f(0x88e)]['PRODUCT_LIST']&&(_0x29899f=JSON['parse'](JSON[_0x28785f(0x7b9)](_0x29899f)),_0x29899f[_0x28785f(0x659)][_0x28785f(0x326)]=w['proto']['Message']['ListMessage'][_0x28785f(0x88e)]['SINGLE_SELECT']),_0x29899f;}};return this[_0x74de3f(0x6f8)]=!0x1,this[_0x74de3f(0x60c)]=(0x0,w[_0x74de3f(0x3de)])(_0xbc89cb),this[_0x74de3f(0x4ff)](),this[_0x74de3f(0x438)]=_0x39daef,this['client'];}catch(_0x54dfcf){let _0x1fff67='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp',_0x4aa6e5=_0x54dfcf instanceof Error?_0x54dfcf['message']:typeof _0x54dfcf=='object'?JSON['stringify'](_0x54dfcf):_0x54dfcf,_0x242668=_0x1fff67+':\x20'+_0x4aa6e5;throw this['logger'][_0x74de3f(0x7bf)](this[_0x74de3f(0x7ec)]+'\x20('+this['instance'][_0x74de3f(0x3d9)]+'):\x20'+_0x242668),console[_0x74de3f(0x7bf)]('Detalhes\x20do\x20erro:',_0x54dfcf),_0x54dfcf instanceof Error&&console[_0x74de3f(0x7bf)](_0x74de3f(0x217),_0x54dfcf[_0x74de3f(0x54a)]),new x(_0x242668);}}[a0_0x11d42e(0x4ff)](){const _0x569470=a0_0x11d42e;this[_0x569470(0x60c)]['ev'][_0x569470(0x19a)](_0x5caa8f=>{const _0x333557=_0x569470;if(!this[_0x333557(0x6f8)]){let _0x57efec=this[_0x333557(0x155)][_0x333557(0x686)](_0x333557(0x683));if(_0x5caa8f[_0x333557(0x1b8)]){let _0x3316cb=_0x5caa8f[_0x333557(0x1b8)];this[_0x333557(0x784)][_0x333557(0x1b8)](_0x3316cb);}if(_0x5caa8f['labels.association']){let _0x206c14=_0x5caa8f[_0x333557(0x3eb)];this[_0x333557(0x784)][_0x333557(0x3eb)](_0x206c14);}if(_0x5caa8f[_0x333557(0x29f)]&&this[_0x333557(0x12d)](_0x5caa8f[_0x333557(0x29f)]),_0x5caa8f['creds.update']&&this['instance'][_0x333557(0x2c2)][_0x333557(0x38e)](),_0x5caa8f[_0x333557(0x162)]){let _0x17c0f5=_0x5caa8f[_0x333557(0x162)];this[_0x333557(0x784)][_0x333557(0x162)](_0x17c0f5,_0x57efec);}if(_0x5caa8f['messages.upsert']){let _0x25b122=_0x5caa8f[_0x333557(0x71e)];this[_0x333557(0x784)][_0x333557(0x71e)](_0x25b122,_0x57efec);}if(_0x5caa8f[_0x333557(0x267)]){let _0x1be13a=_0x5caa8f[_0x333557(0x267)];this[_0x333557(0x784)][_0x333557(0x267)](_0x1be13a,_0x57efec);}if(_0x5caa8f[_0x333557(0x62d)]){let _0x49ce3f=_0x5caa8f['presence.update'];if(this[_0x333557(0x70f)]?.['groups_ignore']&&_0x49ce3f['id'][_0x333557(0x3ef)](_0x333557(0x355)))return;this[_0x333557(0x38d)]('presence.update',_0x49ce3f);}if(_0x5caa8f[_0x333557(0x4cf)]){let _0x49e199=_0x5caa8f[_0x333557(0x4cf)];this[_0x333557(0x5e4)][_0x333557(0x4cf)](_0x49e199);}if(_0x5caa8f[_0x333557(0x3ed)]){let _0x57356b=_0x5caa8f[_0x333557(0x3ed)];this['groupHandler'][_0x333557(0x3ed)](_0x57356b);}if(_0x5caa8f[_0x333557(0x89a)]){let _0x27cba3=_0x5caa8f[_0x333557(0x89a)];this[_0x333557(0x5e4)]['group-participants.update'](_0x27cba3);}if(_0x5caa8f[_0x333557(0x16a)]){let _0x42882f=_0x5caa8f[_0x333557(0x16a)];this[_0x333557(0x86a)][_0x333557(0x16a)](_0x42882f,_0x57efec);}if(_0x5caa8f['chats.update']){let _0x30b203=_0x5caa8f[_0x333557(0x47d)];this['chatHandle'][_0x333557(0x47d)](_0x30b203,_0x57efec);}if(_0x5caa8f[_0x333557(0x480)]){let _0x5df9d6=_0x5caa8f[_0x333557(0x480)];this[_0x333557(0x86a)][_0x333557(0x480)](_0x5df9d6);}if(_0x5caa8f[_0x333557(0x8af)]){let _0x171169=_0x5caa8f[_0x333557(0x8af)];this[_0x333557(0x1dc)][_0x333557(0x8af)](_0x171169,_0x57efec);}if(_0x5caa8f[_0x333557(0x746)]){let _0x2e4427=_0x5caa8f['contacts.update'];this['contactHandle'][_0x333557(0x746)](_0x2e4427,_0x57efec);}}});}async[a0_0x11d42e(0x561)](_0x3889c8,_0x12ebf2){const _0x5b6192=a0_0x11d42e;if(_0x12ebf2>=0xa){console[_0x5b6192(0x7bf)](this[_0x5b6192(0x7ec)]+'\x20('+this[_0x5b6192(0x22f)][_0x5b6192(0x3d9)]+_0x5b6192(0x235)),delete jt[_0x3889c8[_0x5b6192(0x7af)]['id']];return;}try{console['error'](this[_0x5b6192(0x7ec)]+'\x20('+this[_0x5b6192(0x22f)][_0x5b6192(0x3d9)]+_0x5b6192(0x1c1)+(_0x12ebf2+0x1)),await this[_0x5b6192(0x60c)][_0x5b6192(0x45d)](JSON[_0x5b6192(0x5c7)](_0x3889c8[_0x5b6192(0x58a)][0x1],w[_0x5b6192(0x1ee)][_0x5b6192(0x638)])),console[_0x5b6192(0x7bf)](_0x5b6192(0x4ef));}catch(_0x370600){console[_0x5b6192(0x7bf)](this[_0x5b6192(0x7ec)]+'\x20('+this[_0x5b6192(0x22f)][_0x5b6192(0x3d9)]+_0x5b6192(0x6ea)+_0x370600),setTimeout(()=>this[_0x5b6192(0x561)](_0x3889c8,_0x12ebf2+0x1),Math[_0x5b6192(0x2c6)](0x2,_0x12ebf2)*0x3e8);}}async['fakeReceived'](_0x305f6d){const _0xf45cb8=a0_0x11d42e;let _0x2b2e59=_0x305f6d[_0xf45cb8(0x7af)][_0xf45cb8(0x33f)][_0xf45cb8(0x7b1)](_0xf45cb8(0x355)),_0x20ae7d;if(_0x305f6d[_0xf45cb8(0x7af)]['fromMe'])_0x20ae7d=this[_0xf45cb8(0x22f)][_0xf45cb8(0x7c3)];else{let _0x48463b=_0x2b2e59?_0x305f6d[_0xf45cb8(0x7af)][_0xf45cb8(0x4b5)]:_0x305f6d['key'][_0xf45cb8(0x33f)];_0x20ae7d=(await this[_0xf45cb8(0x507)](_0x48463b,_0x305f6d['pushName'],!0x1))[_0xf45cb8(0x3fb)][_0xf45cb8(0x690)];}_0x305f6d[_0xf45cb8(0x7c6)]&&_0x305f6d['messageTimestamp'][_0xf45cb8(0x1d7)]()[_0xf45cb8(0x57a)]<0xd&&(_0x305f6d[_0xf45cb8(0x7c6)]=_0x305f6d[_0xf45cb8(0x7c6)]*0x3e8);let _0xc32590={'_id':_0x305f6d[_0xf45cb8(0x7af)]['id'],'key':_0x305f6d['key'],'isGroup':_0x2b2e59,'profilePictureUrl':_0x20ae7d,'pushName':_0x305f6d[_0xf45cb8(0x681)],'message':{'text':_0xf45cb8(0x469)},'messageType':'error','message_normalized':{'key':_0x305f6d[_0xf45cb8(0x7af)],'pushName':_0x305f6d[_0xf45cb8(0x681)],'messageTimestamp':_0x305f6d[_0xf45cb8(0x7c6)],'source':(0x0,w[_0xf45cb8(0x192)])(_0x305f6d[_0xf45cb8(0x7af)]['id']),'text':_0xf45cb8(0x469)},'messageTimestamp':_0x305f6d['messageTimestamp'],'owner':this[_0xf45cb8(0x22f)][_0xf45cb8(0x3d9)],'source':(0x0,w[_0xf45cb8(0x192)])(_0x305f6d[_0xf45cb8(0x7af)]['id'])};this[_0xf45cb8(0x85a)][_0xf45cb8(0x7bf)](this['instanceName']+'\x20('+this[_0xf45cb8(0x22f)]['wuid']+_0xf45cb8(0x7bd)+(_0xc32590[_0xf45cb8(0x7af)]?.['fromMe']?'enviado\x20para':_0xf45cb8(0x829))+'\x20['+_0xc32590['key']?.[_0xf45cb8(0x33f)][_0xf45cb8(0x771)](_0xf45cb8(0x264),'')+']\x20('+_0xc32590['messageType']+')'),_0xc32590[_0xf45cb8(0x4b9)]?.[_0xf45cb8(0x8b3)]&&this['logger'][_0xf45cb8(0x7bf)](_0x305f6d[_0xf45cb8(0x7af)]['id']+':\x20'+_0xc32590['message_normalized']?.[_0xf45cb8(0x8b3)]),await this[_0xf45cb8(0x373)]['message'][_0xf45cb8(0x604)]([_0xc32590],this[_0xf45cb8(0x22f)][_0xf45cb8(0x3d9)]),await this[_0xf45cb8(0x373)]['messageLogs'][_0xf45cb8(0x604)]([_0xc32590]),this[_0xf45cb8(0x38d)](_0xf45cb8(0x71e),_0xc32590),F(this[_0xf45cb8(0x7ec)],'messages',{'message':_0xc32590});}['delayChatLabel'](_0x154c4d){return new Promise(_0x374246=>setTimeout(_0x374246,_0x154c4d));}[a0_0x11d42e(0x6bf)](_0x25d9b1){const _0x112a19=a0_0x11d42e;_0x25d9b1=_0x25d9b1['replace'](/\D/g,'');let _0x2342cf=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x112a19(0x4c4)](_0x25d9b1);if(_0x2342cf&&_0x2342cf[0x1]==='55'){let _0x134c55=_0x2342cf[0x2],_0x109ec1=_0x2342cf[0x3],_0x142176=_0x2342cf[0x4];if(parseInt(_0x134c55)>=0x1f&&_0x109ec1==='9')return _0x2342cf[0x1]+_0x134c55+_0x142176;}return _0x25d9b1;}['createJid'](_0x52a823){const _0x1ade71=a0_0x11d42e;return _0x52a823[_0x1ade71(0x3ef)](_0x1ade71(0x355))||_0x52a823[_0x1ade71(0x3ef)](_0x1ade71(0x264))||_0x52a823[_0x1ade71(0x3ef)]('@broadcast')?_0x52a823:(_0x52a823=_0x52a823?.[_0x1ade71(0x771)](/\s/g,'')['replace'](/\+/g,'')[_0x1ade71(0x771)](/\(/g,'')[_0x1ade71(0x771)](/\)/g,'')['split'](/\:/)[0x0][_0x1ade71(0x597)]('@')[0x0],_0x52a823[_0x1ade71(0x57a)]>=0x12?(_0x52a823=_0x52a823[_0x1ade71(0x771)](/[^\d-]/g,''),_0x52a823+_0x1ade71(0x355)):(_0x52a823=_0x52a823[_0x1ade71(0x771)](/\D/g,''),_0x52a823+_0x1ade71(0x264)));}async[a0_0x11d42e(0x73f)](_0x488d54){const _0x2c5994=a0_0x11d42e;let _0xfbccd2=(await this['whatsappNumber']({'numbers':[_0x488d54[_0x2c5994(0x2b6)]]}))[0x0];if(!_0xfbccd2[_0x2c5994(0x418)]&&!(0x0,w[_0x2c5994(0x43d)])(_0xfbccd2[_0x2c5994(0x2c7)])&&!_0xfbccd2[_0x2c5994(0x2c7)][_0x2c5994(0x3ef)](_0x2c5994(0x31f)))throw new m(_0xfbccd2);let _0xebecfa=_0xfbccd2[_0x2c5994(0x2c7)];try{return await this['client'][_0x2c5994(0x497)](_0xebecfa),await this['client'][_0x2c5994(0x894)](_0x488d54['presence'],_0xebecfa),{'status':0xc8,'presence':_0x488d54['presence']};}catch(_0x3bc51e){let _0x3016bd=_0x2c5994(0x348),_0x5e168e=_0x3bc51e instanceof Error?_0x3bc51e[_0x2c5994(0x5a8)]:typeof _0x3bc51e==_0x2c5994(0x1cb)?JSON[_0x2c5994(0x7b9)](_0x3bc51e):_0x3bc51e,_0x78a1f6=_0x3016bd+':\x20'+_0x5e168e;throw this[_0x2c5994(0x85a)][_0x2c5994(0x7bf)](this[_0x2c5994(0x7ec)]+'\x20('+this['instance'][_0x2c5994(0x3d9)]+_0x2c5994(0x7bd)+_0x78a1f6),new m(_0x78a1f6);}}async['findAndUpdateCacheContact'](_0x16e198,_0x3f0d66,_0x5294f2,_0x167426=!0x0){const _0x5d2322=a0_0x11d42e;let _0x248327=await this[_0x5d2322(0x373)][_0x5d2322(0x595)][_0x5d2322(0x588)]({'where':{'_id':_0x16e198}});if(!_0x248327&&!_0x167426)return;let _0xea78e2={'lastUpdate':Date[_0x5d2322(0x19e)]()};if(_0x5294f2||!_0x248327?.[_0x5d2322(0x2ea)]||Date[_0x5d2322(0x19e)]()-_0x248327[_0x5d2322(0x2ea)]>0x18*0x3c*0x3c*0x3e8)try{let _0x12788c=(await this['profilePicture'](_0x16e198))[_0x5d2322(0x7c3)];_0xea78e2[_0x5d2322(0x690)]=_0x12788c;}catch(_0x200489){let _0x8ab7b1=_0x5d2322(0x63c),_0x25e909=_0x200489 instanceof Error?_0x200489['message']:typeof _0x200489=='object'?JSON[_0x5d2322(0x7b9)](_0x200489):_0x200489,_0x2b298d=_0x8ab7b1+':\x20'+_0x25e909;throw this[_0x5d2322(0x85a)]['error'](this[_0x5d2322(0x7ec)]+'\x20('+this[_0x5d2322(0x22f)]['wuid']+_0x5d2322(0x7bd)+_0x2b298d),new m(_0x2b298d);}return _0x3f0d66&&_0x248327?.[_0x5d2322(0x414)]!==_0x3f0d66&&(_0xea78e2[_0x5d2322(0x414)]=_0x3f0d66),Object['keys'](_0xea78e2)[_0x5d2322(0x57a)]>0x1&&(_0x248327?await this[_0x5d2322(0x373)]['cacheContact']['update']({'where':{'_id':_0x16e198}},_0xea78e2):await this[_0x5d2322(0x373)][_0x5d2322(0x595)]['insert']([{'_id':_0x16e198,..._0xea78e2}]),_0x248327={..._0x248327,..._0xea78e2}),{'cachedContact':_0x248327};}async[a0_0x11d42e(0x160)](_0x344b10){const _0x36e9c2=a0_0x11d42e;let _0x312eb4=this['createJid'](_0x344b10);try{return{'wuid':_0x312eb4,'profilePictureUrl':await this[_0x36e9c2(0x60c)][_0x36e9c2(0x7c3)](_0x312eb4,_0x36e9c2(0x5d3))};}catch{return{'wuid':_0x312eb4,'profilePictureUrl':null};}}async[a0_0x11d42e(0x5e3)](_0x30f752,_0x5cd0e0,_0x3d86b8){const _0x48698e=a0_0x11d42e;let _0x121c7a=0x0;for(;_0x121c7a<0x5;)try{return await this[_0x48698e(0x52b)](_0x30f752,_0x5cd0e0,_0x3d86b8);}catch(_0xca06e9){if(_0x121c7a++,_0xca06e9 instanceof Error&&_0xca06e9[_0x48698e(0x5a8)]===_0x48698e(0x47c)){if(_0x121c7a>=0x5)throw new m(_0x48698e(0x79e)+_0xca06e9[_0x48698e(0x5a8)]);this[_0x48698e(0x85a)]['warn'](_0x48698e(0x20a)+_0x121c7a+_0x48698e(0x743)+_0xca06e9[_0x48698e(0x5a8)]+_0x48698e(0x7f5)+0x1388/0x3e8+_0x48698e(0x88a)),await new Promise(_0x384644=>setTimeout(_0x384644,0x1388));}else throw new m(_0xca06e9['message']);}}async[a0_0x11d42e(0x52b)](_0x6558d9,_0x64f625,_0x4f851a){const _0x2ebdce=a0_0x11d42e;let _0x16b751;try{let _0x121de8=(await this[_0x2ebdce(0x3b1)]({'numbers':[_0x6558d9]}))?.['shift']();if(!_0x121de8['exists']&&!(0x0,w[_0x2ebdce(0x43d)])(_0x121de8[_0x2ebdce(0x2c7)])&&!_0x121de8[_0x2ebdce(0x2c7)][_0x2ebdce(0x3ef)](_0x2ebdce(0x31f)))throw new m(_0x121de8);_0x16b751=_0x121de8[_0x2ebdce(0x2c7)];}catch(_0x4e7716){_0x16b751=_0x6558d9,this[_0x2ebdce(0x85a)][_0x2ebdce(0x4d4)](this[_0x2ebdce(0x7ec)]+'\x20('+this[_0x2ebdce(0x22f)][_0x2ebdce(0x3d9)]+'):\x20error:\x20'+_0x4e7716[_0x2ebdce(0x5a8)]),this[_0x2ebdce(0x85a)][_0x2ebdce(0x4d4)](this[_0x2ebdce(0x7ec)]+'\x20('+this[_0x2ebdce(0x22f)][_0x2ebdce(0x3d9)]+'):\x20sender\x20=\x20number:\x20'+_0x16b751);}try{if(_0x16b751||(_0x16b751=_0x6558d9,this[_0x2ebdce(0x85a)][_0x2ebdce(0x4d4)](this[_0x2ebdce(0x7ec)]+'\x20('+this[_0x2ebdce(0x22f)][_0x2ebdce(0x3d9)]+_0x2ebdce(0x8ac)+_0x16b751)),_0x4f851a||(_0x4f851a={}),_0x4f851a?.['delay']){await this[_0x2ebdce(0x60c)][_0x2ebdce(0x497)](_0x16b751),await this[_0x2ebdce(0x60c)]['sendPresenceUpdate'](_0x4f851a?.[_0x2ebdce(0x251)]??_0x2ebdce(0x707),_0x16b751);let _0x4f4f62=Math[_0x2ebdce(0x4ba)](_0x4f851a['delay'],0x2710);await(0x0,w[_0x2ebdce(0x779)])(_0x4f4f62),await this[_0x2ebdce(0x60c)][_0x2ebdce(0x894)](_0x2ebdce(0x13f),_0x16b751);}let _0x17bfc1=_0x4f851a?.['linkPreview']!=!0x1?void 0x0:!0x1,_0x106bc6;if(_0x4f851a?.[_0x2ebdce(0x579)]){let {key:_0x2077ea,message:_0x28e961}=_0x4f851a[_0x2ebdce(0x579)];if(_0x28e961)_0x106bc6={'key':_0x2077ea,'message':_0x28e961};else{let _0x5ae040=await this[_0x2ebdce(0x508)](_0x2077ea,!0x0);_0x5ae040?.['key']&&(_0x106bc6=_0x5ae040);}}let _0x29ce93=await this['repository'][_0x2ebdce(0x7fa)]['findOne']({'where':{'_id':_0x16b751}},this['instance']['wuid']),_0x3ef2c2,_0x1749f6=null;if((0x0,w[_0x2ebdce(0x43d)])(_0x16b751))try{if(_0x1749f6=_0x29ce93[_0x2ebdce(0x30b)],!_0x1749f6)throw new U(_0x2ebdce(0x78b));if(!_0x1749f6[_0x2ebdce(0x79f)])throw new m('Sem\x20permissão\x20para\x20enviar\x20para\x20esse\x20grupo');_0x4f851a?.[_0x2ebdce(0x53a)]&&(_0x4f851a['mentions']?.[_0x2ebdce(0x447)]?_0x3ef2c2=_0x1749f6['participants'][_0x2ebdce(0x4f6)](_0x2c769d=>_0x2c769d['id']):_0x4f851a[_0x2ebdce(0x53a)]?.[_0x2ebdce(0x69b)]?.[_0x2ebdce(0x57a)]&&(_0x3ef2c2=_0x4f851a['mentions'][_0x2ebdce(0x69b)][_0x2ebdce(0x4f6)](_0x98bf0c=>{const _0x5f35cc=_0x2ebdce;let _0x20add3=this[_0x5f35cc(0x153)](_0x98bf0c);return(0x0,w[_0x5f35cc(0x43d)])(_0x20add3)?null:_0x20add3;})));}catch(_0xe35203){throw _0xe35203 instanceof U?new U(_0x2ebdce(0x78b)):_0xe35203 instanceof m?new m(_0x2ebdce(0x439)):new Error(_0x2ebdce(0x56e));}let _0x15086f=await((async()=>{const _0x54bdcb=_0x2ebdce;let _0x59992d={'quoted':_0x106bc6,'ephemeralExpiration':_0x29ce93?.[_0x54bdcb(0x6d9)]??0x0};if(!_0x64f625[_0x54bdcb(0x43f)]&&!_0x64f625[_0x54bdcb(0x745)]&&!_0x64f625['sticker']&&!_0x64f625[_0x54bdcb(0x5bd)]&&_0x16b751!==_0x54bdcb(0x7a9)&&_0x64f625[_0x54bdcb(0x275)])return await this['client'][_0x54bdcb(0x347)](_0x16b751,{'react':{'text':_0x64f625[_0x54bdcb(0x275)][_0x54bdcb(0x8b3)],'key':_0x64f625[_0x54bdcb(0x275)][_0x54bdcb(0x7af)]}},_0x59992d);if(_0x64f625[_0x54bdcb(0x5bd)]){let _0x5c5639=_0x64f625['conversation'];return _0x4f851a?.[_0x54bdcb(0x587)]&&(_0x5c5639=await this[_0x54bdcb(0x2fd)](_0x5c5639,_0x16b751)),await this[_0x54bdcb(0x60c)][_0x54bdcb(0x347)](_0x16b751,{'text':_0x5c5639,'mentions':_0x3ef2c2,'linkPreview':_0x17bfc1},_0x59992d);}return!_0x64f625[_0x54bdcb(0x43f)]&&!_0x64f625[_0x54bdcb(0x745)]&&_0x16b751!=_0x54bdcb(0x7a9)?await this[_0x54bdcb(0x60c)][_0x54bdcb(0x347)](_0x16b751,{'forward':{'key':{'remoteJid':this[_0x54bdcb(0x22f)][_0x54bdcb(0x3d9)],'fromMe':!0x0},'message':_0x64f625},'mentions':_0x3ef2c2},_0x59992d):_0x16b751===_0x54bdcb(0x7a9)?await this[_0x54bdcb(0x60c)][_0x54bdcb(0x347)](_0x16b751,_0x64f625['status'][_0x54bdcb(0x18d)],{'backgroundColor':_0x64f625[_0x54bdcb(0x15d)][_0x54bdcb(0x733)][_0x54bdcb(0x2f2)],'font':_0x64f625[_0x54bdcb(0x15d)][_0x54bdcb(0x733)][_0x54bdcb(0x229)],'statusJidList':_0x64f625[_0x54bdcb(0x15d)][_0x54bdcb(0x733)][_0x54bdcb(0x63a)]}):await this[_0x54bdcb(0x60c)][_0x54bdcb(0x347)](_0x16b751,_0x64f625,_0x59992d);})()),_0x416c1d=(0x0,w[_0x2ebdce(0x50a)])(_0x15086f['message']),_0x1208fc=(0x0,w['getContentType'])(_0x416c1d),{message_normalized:_0x219c47}=this[_0x2ebdce(0x2aa)](_0x416c1d,_0x1208fc,null),_0x1a7c05={'_id':_0x15086f[_0x2ebdce(0x7af)]['id'],'key':_0x15086f[_0x2ebdce(0x7af)],'pushName':_0x15086f['pushName'],'isGroup':_0x15086f['key']['remoteJid'][_0x2ebdce(0x7b1)](_0x2ebdce(0x355)),'profilePictureUrl':this['instance']['profilePictureUrl'],'message':_0x416c1d,'messageType':_0x1208fc,'message_normalized':{'key':_0x15086f[_0x2ebdce(0x7af)],'pushName':_0x15086f[_0x2ebdce(0x681)],'messageTimestamp':_0x15086f[_0x2ebdce(0x7c6)]&&_0x15086f[_0x2ebdce(0x7c6)][_0x2ebdce(0x1d7)]()[_0x2ebdce(0x57a)]<0xd?_0x15086f['messageTimestamp']*0x3e8:_0x15086f['messageTimestamp']||null,'source':(0x0,w[_0x2ebdce(0x192)])(_0x15086f[_0x2ebdce(0x7af)]['id']),..._0x219c47},'messageTimestamp':_0x15086f[_0x2ebdce(0x7c6)]&&_0x15086f[_0x2ebdce(0x7c6)][_0x2ebdce(0x1d7)]()[_0x2ebdce(0x57a)]<0xd?_0x15086f[_0x2ebdce(0x7c6)]*0x3e8:_0x15086f['messageTimestamp']||null,'owner':this[_0x2ebdce(0x22f)]['wuid'],'source':(0x0,w[_0x2ebdce(0x192)])(_0x15086f['key']['id'])};return this[_0x2ebdce(0x85a)][_0x2ebdce(0x4d4)](this[_0x2ebdce(0x7ec)]+'\x20('+this['instance'][_0x2ebdce(0x3d9)]+_0x2ebdce(0x559)+_0x1a7c05[_0x2ebdce(0x7af)]?.['remoteJid'][_0x2ebdce(0x771)](_0x2ebdce(0x264),'')+']\x20('+_0x1a7c05[_0x2ebdce(0x13e)]+')'),_0x1a7c05['message_normalized']?.[_0x2ebdce(0x8b3)]&&this['logger'][_0x2ebdce(0x4d4)](_0x1a7c05[_0x2ebdce(0x4b9)]?.[_0x2ebdce(0x8b3)]),this[_0x2ebdce(0x38d)]('send.message',_0x1a7c05),F(this[_0x2ebdce(0x7ec)],_0x2ebdce(0x458),{'message':_0x1a7c05}),this[_0x2ebdce(0x325)](this['configService'][_0x2ebdce(0x686)]('DATABASE'),_0x1a7c05,_0x2ebdce(0x250),_0x29ce93),await this['repository']['message']['insert']([_0x1a7c05],this[_0x2ebdce(0x22f)][_0x2ebdce(0x3d9)]),_0x15086f;}catch(_0x50356f){let _0xae1977=_0x2ebdce(0x374)+_0x16b751,_0x33af22=_0x50356f instanceof Error?_0x50356f[_0x2ebdce(0x5a8)]:typeof _0x50356f==_0x2ebdce(0x1cb)?JSON[_0x2ebdce(0x7b9)](_0x50356f):_0x50356f,_0x5864f6=_0xae1977+':\x20'+_0x33af22;throw this[_0x2ebdce(0x85a)]['error'](this['instanceName']+'\x20('+this[_0x2ebdce(0x22f)][_0x2ebdce(0x3d9)]+_0x2ebdce(0x7bd)+_0x5864f6),new m(_0x5864f6);}}async[a0_0x11d42e(0x242)](_0x2d9a38,_0x127445,_0x3d15a8){const _0x349946=a0_0x11d42e;let _0x294d01=this[_0x349946(0x153)](_0x2d9a38),_0x300da0=(await this[_0x349946(0x3b1)]({'numbers':[_0x294d01]}))[0x0];if(!_0x300da0[_0x349946(0x418)]&&!(0x0,w['isJidGroup'])(_0x300da0[_0x349946(0x2c7)]))throw new m(_0x300da0);let _0x33a84a=(0x0,w[_0x349946(0x43d)])(_0x294d01)?_0x294d01:_0x300da0['jid'];if((0x0,w[_0x349946(0x43d)])(_0x33a84a))try{await this[_0x349946(0x60c)][_0x349946(0x426)](_0x33a84a);}catch{throw new m(_0x349946(0x66d));}try{_0x3d15a8?.[_0x349946(0x779)]&&(await this['client'][_0x349946(0x497)](_0x33a84a),await this['client'][_0x349946(0x894)](_0x3d15a8?.['presence']??_0x349946(0x707),_0x294d01),await(0x0,w[_0x349946(0x779)])(_0x3d15a8[_0x349946(0x779)]),await this[_0x349946(0x60c)][_0x349946(0x894)](_0x349946(0x13f),_0x33a84a));let _0x1d974b=await((async()=>{const _0x5a3e6c=_0x349946;let _0x559f2b;if(_0x3d15a8?.['quoted']){let {key:_0x112792,message:_0x1d41da}=_0x3d15a8[_0x5a3e6c(0x579)];if(_0x1d41da)_0x559f2b={'key':_0x112792,'message':_0x1d41da};else{let _0x3d6fd0=await this[_0x5a3e6c(0x508)](_0x112792,!0x0);_0x3d6fd0?.[_0x5a3e6c(0x7af)]&&(_0x559f2b=_0x3d6fd0);}}let _0x14f3c4=_0x5a3e6c(0x725)+(0x0,re[_0x5a3e6c(0x6fd)])(0x12)[_0x5a3e6c(0x1d7)](_0x5a3e6c(0x288))[_0x5a3e6c(0x349)](),_0x580941=(0x0,w[_0x5a3e6c(0x8bc)])(_0x33a84a,_0x127445,{'timestamp':new Date(),'userJid':this[_0x5a3e6c(0x22f)][_0x5a3e6c(0x3d9)],'messageId':_0x14f3c4,'quoted':_0x559f2b}),_0x3f9e1b=await this['client'][_0x5a3e6c(0x54e)](_0x33a84a,_0x580941[_0x5a3e6c(0x5a8)],{'messageId':_0x14f3c4});_0x580941[_0x5a3e6c(0x7af)]={'id':_0x3f9e1b,'remoteJid':_0x294d01,'participant':Oi(_0x294d01)?void 0x0:_0x294d01,'fromMe':!0x0};for(let [_0x3e18a4,_0x16823f]of Object[_0x5a3e6c(0x575)](_0x580941))(!_0x16823f||Array[_0x5a3e6c(0x81f)](_0x16823f)&&_0x16823f['length']===0x0)&&delete _0x580941[_0x3e18a4];return this[_0x5a3e6c(0x60c)]['ev'][_0x5a3e6c(0x862)](_0x5a3e6c(0x71e),{'messages':[_0x580941],'type':_0x5a3e6c(0x6b1)}),_0x580941;})()),_0x44ac95=await this[_0x349946(0x373)][_0x349946(0x7fa)][_0x349946(0x588)]({'where':{'_id':_0x33a84a}},this[_0x349946(0x22f)][_0x349946(0x3d9)]),_0x48434f=(0x0,w[_0x349946(0x50a)])(_0x1d974b[_0x349946(0x5a8)]),_0x1cacce=(0x0,w['getContentType'])(_0x48434f),{message_normalized:_0x3a2fb6}=this[_0x349946(0x2aa)](_0x48434f,_0x1cacce,null),_0x5235ec={'_id':_0x1d974b['key']['id'],'key':_0x1d974b[_0x349946(0x7af)],'pushName':_0x1d974b[_0x349946(0x681)],'isGroup':_0x1d974b[_0x349946(0x7af)][_0x349946(0x33f)][_0x349946(0x7b1)]('@g.us'),'profilePictureUrl':this[_0x349946(0x22f)][_0x349946(0x7c3)],'message':_0x48434f,'messageType':_0x1cacce,'message_normalized':{'key':_0x1d974b[_0x349946(0x7af)],'pushName':_0x1d974b[_0x349946(0x681)],'messageTimestamp':_0x1d974b[_0x349946(0x7c6)]&&_0x1d974b[_0x349946(0x7c6)][_0x349946(0x1d7)]()[_0x349946(0x57a)]<0xd?_0x1d974b[_0x349946(0x7c6)]*0x3e8:_0x1d974b[_0x349946(0x7c6)]||null,'source':(0x0,w[_0x349946(0x192)])(_0x1d974b[_0x349946(0x7af)]['id']),..._0x3a2fb6},'messageTimestamp':_0x1d974b[_0x349946(0x7c6)]&&_0x1d974b[_0x349946(0x7c6)]['toString']()[_0x349946(0x57a)]<0xd?_0x1d974b[_0x349946(0x7c6)]*0x3e8:_0x1d974b[_0x349946(0x7c6)]||null,'owner':this[_0x349946(0x22f)]['wuid'],'source':(0x0,w[_0x349946(0x192)])(_0x1d974b[_0x349946(0x7af)]['id'])};return this[_0x349946(0x85a)]['warn'](this['instanceName']+'\x20('+this[_0x349946(0x22f)][_0x349946(0x3d9)]+'):\x20enviado\x20para\x20['+_0x5235ec[_0x349946(0x7af)]?.[_0x349946(0x33f)][_0x349946(0x771)](_0x349946(0x264),'')+_0x349946(0x81d)+_0x5235ec[_0x349946(0x13e)]+')'),_0x5235ec[_0x349946(0x4b9)]?.['text']&&this[_0x349946(0x85a)][_0x349946(0x4d4)](_0x5235ec[_0x349946(0x4b9)]?.[_0x349946(0x8b3)]),this[_0x349946(0x38d)](_0x349946(0x6af),_0x5235ec),F(this['instanceName'],_0x349946(0x458),{'message':_0x5235ec}),this[_0x349946(0x325)](this[_0x349946(0x155)][_0x349946(0x686)](_0x349946(0x683)),_0x5235ec,_0x349946(0x250),_0x44ac95),await this[_0x349946(0x373)][_0x349946(0x5a8)][_0x349946(0x604)]([_0x5235ec],this[_0x349946(0x22f)][_0x349946(0x3d9)]),_0x1d974b;}catch(_0xb05f2a){throw this['logger'][_0x349946(0x7bf)](_0xb05f2a),new m(_0xb05f2a[_0x349946(0x1d7)]());}}get[a0_0x11d42e(0x6ce)](){const _0x4f190a=a0_0x11d42e;return this[_0x4f190a(0x4eb)];}async[a0_0x11d42e(0x78c)](_0x58de04){const _0x1c26b3=a0_0x11d42e;return await this[_0x1c26b3(0x5e3)](_0x58de04[_0x1c26b3(0x2b6)],{'conversation':_0x58de04['textMessage'][_0x1c26b3(0x8b3)]},_0x58de04?.['options']);}async[a0_0x11d42e(0x491)](_0x4c203d){const _0x3784de=a0_0x11d42e;if(!_0x4c203d['type'])throw new m(_0x3784de(0x5ce));if(!_0x4c203d[_0x3784de(0x18d)])throw new m('Content\x20is\x20required');if(_0x4c203d[_0x3784de(0x32f)]){let _0x2a44c6=await this[_0x3784de(0x373)][_0x3784de(0x78d)][_0x3784de(0x6d7)]({'where':{}},this[_0x3784de(0x22f)][_0x3784de(0x3d9)]);if(!_0x2a44c6[_0x3784de(0x57a)])throw new m(_0x3784de(0x149));_0x4c203d['statusJidList']=_0x2a44c6['filter'](_0x3bc880=>_0x3bc880[_0x3784de(0x681)])[_0x3784de(0x4f6)](_0x3c8def=>_0x3c8def[_0x3784de(0x665)]);}if(!_0x4c203d[_0x3784de(0x63a)]?.[_0x3784de(0x57a)]&&!_0x4c203d['allContacts'])throw new m(_0x3784de(0x6d1));if(_0x4c203d[_0x3784de(0x748)]===_0x3784de(0x8b3)){if(!_0x4c203d[_0x3784de(0x2f2)])throw new m('Background\x20color\x20is\x20required');if(!_0x4c203d[_0x3784de(0x229)])throw new m(_0x3784de(0x4a7));return{'content':{'text':_0x4c203d[_0x3784de(0x18d)]},'option':{'backgroundColor':_0x4c203d['backgroundColor'],'font':_0x4c203d[_0x3784de(0x229)],'statusJidList':_0x4c203d['statusJidList']}};}if(_0x4c203d['type']===_0x3784de(0x5d3))return{'content':{'image':{'url':_0x4c203d[_0x3784de(0x18d)]},'caption':_0x4c203d[_0x3784de(0x2c3)]},'option':{'statusJidList':_0x4c203d[_0x3784de(0x63a)]}};if(_0x4c203d[_0x3784de(0x748)]===_0x3784de(0x594))return{'content':{'video':{'url':_0x4c203d[_0x3784de(0x18d)]},'caption':_0x4c203d['caption']},'option':{'statusJidList':_0x4c203d['statusJidList']}};if(_0x4c203d[_0x3784de(0x748)]===_0x3784de(0x43f)){this[_0x3784de(0x85a)][_0x3784de(0x70a)](this['instanceName']+'\x20('+this[_0x3784de(0x22f)][_0x3784de(0x3d9)]+_0x3784de(0x4e4)),this[_0x3784de(0x85a)]['verbose'](this[_0x3784de(0x7ec)]+'\x20('+this[_0x3784de(0x22f)]['wuid']+'):Processing\x20audio');let _0x300aa8=await this[_0x3784de(0x330)](_0x4c203d[_0x3784de(0x18d)]);if(typeof _0x300aa8==_0x3784de(0x4fa)){this[_0x3784de(0x85a)][_0x3784de(0x70a)](this[_0x3784de(0x7ec)]+'\x20('+this[_0x3784de(0x22f)][_0x3784de(0x3d9)]+'):Audio\x20processed');let _0x2808e9=k[_0x3784de(0x5cd)](_0x300aa8)[_0x3784de(0x1d7)](_0x3784de(0x30a));return{'content':{'audio':Buffer[_0x3784de(0x4dc)](_0x2808e9,'base64'),'ptt':!0x0,'mimetype':_0x3784de(0x666)},'option':{'statusJidList':_0x4c203d[_0x3784de(0x63a)]}};}else throw new x(_0x300aa8);}throw new m('Type\x20not\x20found');}async[a0_0x11d42e(0x8ba)](_0x4d3467){const _0x493b42=a0_0x11d42e;return await this[_0x493b42(0x5e3)]('status@broadcast',{'status':await this[_0x493b42(0x491)](_0x4d3467[_0x493b42(0x8ba)])});}async[a0_0x11d42e(0x236)](_0x5c47ee){const _0x131c56=a0_0x11d42e;try{let _0x3141f2=await(0x0,w[_0x131c56(0x882)])({[_0x5c47ee[_0x131c56(0x72f)]]:(0x0,J[_0x131c56(0x360)])(_0x5c47ee[_0x131c56(0x583)])?{'url':_0x5c47ee['media']}:Buffer[_0x131c56(0x4dc)](_0x5c47ee[_0x131c56(0x583)],_0x131c56(0x30a))},{'upload':this[_0x131c56(0x60c)][_0x131c56(0x3b7)]}),_0x40032f=_0x5c47ee[_0x131c56(0x72f)]+_0x131c56(0x2bc);if(_0x5c47ee[_0x131c56(0x72f)]===_0x131c56(0x393)&&!_0x5c47ee[_0x131c56(0x329)]){let _0x358b47=new RegExp(/.*\/(.+?)\./)[_0x131c56(0x4c4)](_0x5c47ee[_0x131c56(0x583)]);_0x5c47ee[_0x131c56(0x329)]=_0x358b47?_0x358b47[0x1]:null;}let _0x216f6e;return(0x0,J['isURL'])(_0x5c47ee['media'])?_0x216f6e=(await K[_0x131c56(0x3de)][_0x131c56(0x686)](_0x5c47ee[_0x131c56(0x583)],{'responseType':_0x131c56(0x457)}))['headers'][_0x131c56(0x4d2)]:_0x216f6e=(0x0,Fi['getMIMEType'])(_0x5c47ee[_0x131c56(0x329)]),_0x3141f2[_0x40032f][_0x131c56(0x2c3)]=_0x5c47ee?.['caption'],_0x3141f2[_0x40032f][_0x131c56(0x23d)]=_0x216f6e,_0x3141f2[_0x40032f][_0x131c56(0x329)]=_0x5c47ee[_0x131c56(0x329)],_0x5c47ee[_0x131c56(0x72f)]===_0x131c56(0x594)&&(_0x3141f2[_0x40032f][_0x131c56(0x4bc)]=Uint8Array[_0x131c56(0x4dc)]((0x0,Je['readFileSync'])((0x0,j['join'])(process[_0x131c56(0x190)](),'video-cover.png'))),_0x3141f2[_0x40032f]['gifPlayback']=!0x1),(0x0,w['generateWAMessageFromContent'])('',{[_0x40032f]:{..._0x3141f2[_0x40032f]}},{'userJid':this[_0x131c56(0x22f)]['wuid']});}catch(_0x334e9b){let _0x195ba1=_0x131c56(0x2b1),_0x323596=_0x334e9b instanceof Error?_0x334e9b[_0x131c56(0x5a8)]:typeof _0x334e9b==_0x131c56(0x1cb)?JSON[_0x131c56(0x7b9)](_0x334e9b):_0x334e9b,_0x323c8c=_0x195ba1+':\x20'+_0x323596;throw this[_0x131c56(0x85a)][_0x131c56(0x7bf)](this[_0x131c56(0x7ec)]+'\x20('+this[_0x131c56(0x22f)][_0x131c56(0x3d9)]+_0x131c56(0x7bd)+_0x323c8c),new x(_0x323c8c);}}async[a0_0x11d42e(0x7b4)](_0x5ba69c){const _0x47f7ca=a0_0x11d42e;let _0x1a18d9=0x0;for(;_0x1a18d9<0x5;)try{let _0x417611=await this[_0x47f7ca(0x236)](_0x5ba69c[_0x47f7ca(0x7b4)]);return await this['sendMessageWithRetry'](_0x5ba69c[_0x47f7ca(0x2b6)],{..._0x417611[_0x47f7ca(0x5a8)]},_0x5ba69c?.[_0x47f7ca(0x3d7)]);}catch(_0x2edcb5){if(_0x1a18d9++,_0x2edcb5 instanceof Error&&_0x2edcb5[_0x47f7ca(0x5a8)]===_0x47f7ca(0x47c)){if(_0x1a18d9>=0x5)throw new m('Falha\x20ao\x20preparar\x20a\x20mensagem\x20de\x20mídia\x20após\x205\x20tentativas:\x20'+_0x2edcb5['message']);this['logger'][_0x47f7ca(0x4d4)](_0x47f7ca(0x20a)+_0x1a18d9+'/5\x20de\x20preparar\x20mídia\x20falhou:\x20'+_0x2edcb5[_0x47f7ca(0x5a8)]+_0x47f7ca(0x7f5)+0x1388/0x3e8+_0x47f7ca(0x88a)),await new Promise(_0x3e6991=>setTimeout(_0x3e6991,0x1388));}else throw new m(_0x2edcb5[_0x47f7ca(0x5a8)]);}}async[a0_0x11d42e(0x639)](_0x3ad79a,_0x3d2569){const _0x16b1d5=a0_0x11d42e;try{this[_0x16b1d5(0x85a)][_0x16b1d5(0x70a)](this['instanceName']+'\x20('+this['instance'][_0x16b1d5(0x3d9)]+'):Converting\x20image\x20to\x20WebP\x20to\x20sticker');let _0x739c77,_0xa3fe63=_0x3d2569+'-'+new Date()[_0x16b1d5(0x370)]();this[_0x16b1d5(0x85a)][_0x16b1d5(0x70a)](this[_0x16b1d5(0x7ec)]+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+_0x16b1d5(0x18c)+_0xa3fe63);let _0x128972=''+(0x0,j[_0x16b1d5(0x7f4)])(this[_0x16b1d5(0x768)],_0xa3fe63+'.webp');if(this[_0x16b1d5(0x85a)][_0x16b1d5(0x70a)](this['instanceName']+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+_0x16b1d5(0x26d)+_0x128972),(0x0,J[_0x16b1d5(0x2fb)])(_0x3ad79a)){this[_0x16b1d5(0x85a)][_0x16b1d5(0x70a)](this[_0x16b1d5(0x7ec)]+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+_0x16b1d5(0x269));let _0x32edfe=_0x3ad79a[_0x16b1d5(0x771)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x1144f9=Buffer[_0x16b1d5(0x4dc)](_0x32edfe,_0x16b1d5(0x30a));_0x739c77=''+(0x0,j[_0x16b1d5(0x7f4)])(this[_0x16b1d5(0x768)],_0x16b1d5(0x14d)+_0xa3fe63+_0x16b1d5(0x533)),this[_0x16b1d5(0x85a)]['verbose'](this[_0x16b1d5(0x7ec)]+'\x20('+this['instance']['wuid']+_0x16b1d5(0x7d0)+_0x739c77),await(0x0,qt[_0x16b1d5(0x3de)])(_0x1144f9)['toFile'](_0x739c77),this[_0x16b1d5(0x85a)]['verbose'](this[_0x16b1d5(0x7ec)]+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+'):Image\x20created');}else{this[_0x16b1d5(0x85a)][_0x16b1d5(0x70a)](this[_0x16b1d5(0x7ec)]+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+_0x16b1d5(0x6a3));let _0x5782bb=new Date()[_0x16b1d5(0x370)](),_0x2b193b=_0x3ad79a+_0x16b1d5(0x25b)+_0x5782bb;this[_0x16b1d5(0x85a)]['verbose'](this[_0x16b1d5(0x7ec)]+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+'):including\x20timestamp\x20in\x20url:\x20'+_0x2b193b);let _0x1b79fe=await K[_0x16b1d5(0x3de)]['get'](_0x2b193b,{'responseType':'arraybuffer'});this[_0x16b1d5(0x85a)][_0x16b1d5(0x70a)](this['instanceName']+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+_0x16b1d5(0x3f1));let _0x3421b0=Buffer['from'](_0x1b79fe[_0x16b1d5(0x57e)],_0x16b1d5(0x3c2));_0x739c77=''+(0x0,j['join'])(this[_0x16b1d5(0x768)],'temp-'+_0xa3fe63+'.png'),this[_0x16b1d5(0x85a)][_0x16b1d5(0x70a)](this[_0x16b1d5(0x7ec)]+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+_0x16b1d5(0x7d0)+_0x739c77),await(0x0,qt[_0x16b1d5(0x3de)])(_0x3421b0)[_0x16b1d5(0x3df)](_0x739c77),this[_0x16b1d5(0x85a)][_0x16b1d5(0x70a)](this[_0x16b1d5(0x7ec)]+'\x20('+this['instance'][_0x16b1d5(0x3d9)]+_0x16b1d5(0x1d6));}return await(0x0,qt[_0x16b1d5(0x3de)])(_0x739c77)[_0x16b1d5(0x5e7)]()[_0x16b1d5(0x3df)](_0x128972),this['logger'][_0x16b1d5(0x70a)](this[_0x16b1d5(0x7ec)]+'\x20('+this['instance']['wuid']+'):Image\x20converted\x20to\x20WebP'),k[_0x16b1d5(0x452)](_0x739c77),this[_0x16b1d5(0x85a)]['verbose'](this[_0x16b1d5(0x7ec)]+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+_0x16b1d5(0x75d)),_0x128972;}catch(_0x252ce7){let _0x27bbca=_0x16b1d5(0x433),_0x4d4ccb=_0x252ce7 instanceof Error?_0x252ce7['message']:typeof _0x252ce7==_0x16b1d5(0x1cb)?JSON[_0x16b1d5(0x7b9)](_0x252ce7):_0x252ce7,_0x36bf05=_0x27bbca+':\x20'+_0x4d4ccb;this['logger'][_0x16b1d5(0x7bf)](this['instanceName']+'\x20('+this[_0x16b1d5(0x22f)][_0x16b1d5(0x3d9)]+'):\x20'+_0x36bf05);}}async[a0_0x11d42e(0x216)](_0x19dbec){const _0x246b98=a0_0x11d42e;let _0x59d353=await this['convertToWebP'](_0x19dbec[_0x246b98(0x28a)][_0x246b98(0x5d3)],_0x19dbec[_0x246b98(0x2b6)]),_0x3c3ed6=await this[_0x246b98(0x5e3)](_0x19dbec[_0x246b98(0x2b6)],{'sticker':{'url':_0x59d353}},_0x19dbec?.[_0x246b98(0x3d7)]);return k[_0x246b98(0x452)](_0x59d353),this['logger'][_0x246b98(0x70a)](this[_0x246b98(0x7ec)]+'\x20('+this['instance'][_0x246b98(0x3d9)]+_0x246b98(0x702)),_0x3c3ed6;}async['audioWhatsapp'](_0x5c5dcb){const _0x5a24b9=a0_0x11d42e;if(this[_0x5a24b9(0x85a)][_0x5a24b9(0x70a)](this['instanceName']+'\x20('+this['instance'][_0x5a24b9(0x3d9)]+_0x5a24b9(0x3ec)),!_0x5c5dcb[_0x5a24b9(0x3d7)]?.[_0x5a24b9(0x885)]&&_0x5c5dcb[_0x5a24b9(0x3d7)]?.[_0x5a24b9(0x885)]!==!0x1&&(_0x5c5dcb[_0x5a24b9(0x3d7)]['encoding']=!0x0),_0x5c5dcb['options']?.['encoding']){let _0x2c9f67=await this[_0x5a24b9(0x330)](_0x5c5dcb[_0x5a24b9(0x5ed)][_0x5a24b9(0x43f)]);if(typeof _0x2c9f67==_0x5a24b9(0x4fa)){let _0x1b0d0b=k[_0x5a24b9(0x5cd)](_0x2c9f67)['toString'](_0x5a24b9(0x30a));return this['sendMessageWithRetry'](_0x5c5dcb[_0x5a24b9(0x2b6)],{'audio':Buffer[_0x5a24b9(0x4dc)](_0x1b0d0b,_0x5a24b9(0x30a)),'ptt':!0x0,'mimetype':_0x5a24b9(0x6f9)},{'presence':_0x5a24b9(0x4b6),'delay':_0x5c5dcb?.[_0x5a24b9(0x3d7)]?.[_0x5a24b9(0x779)]});}else throw new x(_0x2c9f67);}return await this[_0x5a24b9(0x5e3)](_0x5c5dcb[_0x5a24b9(0x2b6)],{'audio':(0x0,J[_0x5a24b9(0x360)])(_0x5c5dcb['audioMessage'][_0x5a24b9(0x43f)])?{'url':_0x5c5dcb[_0x5a24b9(0x5ed)][_0x5a24b9(0x43f)]}:Buffer[_0x5a24b9(0x4dc)](_0x5c5dcb[_0x5a24b9(0x5ed)][_0x5a24b9(0x43f)],_0x5a24b9(0x30a)),'ptt':!0x0,'mimetype':_0x5a24b9(0x6f9)},{'presence':'recording','delay':_0x5c5dcb?.['options']?.['delay']});}async[a0_0x11d42e(0x330)](_0x44a763){const _0xb77435=a0_0x11d42e;this['logger']['verbose'](this[_0xb77435(0x7ec)]+'\x20('+this[_0xb77435(0x22f)][_0xb77435(0x3d9)]+_0xb77435(0x608));let _0x3bcb28=(0x0,J[_0xb77435(0x360)])(_0x44a763)?(0x0,re[_0xb77435(0x3b5)])('sha256')[_0xb77435(0x8ad)](_0x44a763)[_0xb77435(0x5f6)]('hex'):(0x0,re[_0xb77435(0x3b5)])(_0xb77435(0x5ea))['update'](_0x44a763)[_0xb77435(0x5f6)]('hex'),_0x458b30=''+(0x0,j[_0xb77435(0x7f4)])(this['storePath'],_0x3bcb28+_0xb77435(0x85c));if(k[_0xb77435(0x7a4)](_0x458b30))return this[_0xb77435(0x85a)][_0xb77435(0x70a)](this[_0xb77435(0x7ec)]+'\x20('+this[_0xb77435(0x22f)][_0xb77435(0x3d9)]+_0xb77435(0x6a1)),_0x458b30;let _0x53035d=''+(0x0,j['join'])(this[_0xb77435(0x768)],_0xb77435(0x14d)+(0x0,Q['v4'])()+_0xb77435(0x67d));if((0x0,J[_0xb77435(0x360)])(_0x44a763)){let _0x317921=new Date()[_0xb77435(0x370)](),_0x2c3516=_0x44a763+_0xb77435(0x25b)+_0x317921,_0x59d925=await K[_0xb77435(0x3de)][_0xb77435(0x686)](_0x2c3516,{'responseType':_0xb77435(0x457)});k[_0xb77435(0x456)](_0x53035d,_0x59d925[_0xb77435(0x57e)]);}else{let _0x3377bc=Buffer[_0xb77435(0x4dc)](_0x44a763,'base64');k['writeFileSync'](_0x53035d,_0x3377bc);}return new Promise((_0x1d3921,_0x12606a)=>{const _0x2120f6=_0xb77435;(0x0,qe[_0x2120f6(0x4c4)])(Us[_0x2120f6(0x3de)][_0x2120f6(0x37b)]+'\x20-i\x20'+_0x53035d+_0x2120f6(0x74d)+_0x458b30+_0x2120f6(0x77f),_0x5b6956=>{const _0x2f8c24=_0x2120f6;if(k[_0x2f8c24(0x452)](_0x53035d),_0x5b6956){this['logger']['verbose'](this[_0x2f8c24(0x7ec)]+'\x20('+this['instance'][_0x2f8c24(0x3d9)]+'):Error\x20in\x20converting\x20audio'),_0x12606a(_0x5b6956);return;}this[_0x2f8c24(0x85a)][_0x2f8c24(0x70a)](this[_0x2f8c24(0x7ec)]+'\x20('+this[_0x2f8c24(0x22f)][_0x2f8c24(0x3d9)]+_0x2f8c24(0x65f)),_0x1d3921(_0x458b30);});});}async['convertaudioMP3'](_0x420279){const _0x4f482d=a0_0x11d42e;this[_0x4f482d(0x85a)]['verbose'](this[_0x4f482d(0x7ec)]+'\x20('+this[_0x4f482d(0x22f)][_0x4f482d(0x3d9)]+_0x4f482d(0x608));let _0x49a44e=(0x0,re[_0x4f482d(0x3b5)])('sha256')[_0x4f482d(0x8ad)](_0x420279)[_0x4f482d(0x5f6)](_0x4f482d(0x288)),_0x4f83ca=''+(0x0,j[_0x4f482d(0x7f4)])(this[_0x4f482d(0x768)],_0x49a44e+'.mp3');if(k['existsSync'](_0x4f83ca))return this[_0x4f482d(0x85a)]['verbose'](this['instanceName']+'\x20('+this[_0x4f482d(0x22f)][_0x4f482d(0x3d9)]+_0x4f482d(0x6a1)),j[_0x4f482d(0x3de)][_0x4f482d(0x6bd)](_0x4f83ca);let _0x583de5=''+(0x0,j[_0x4f482d(0x7f4)])(this[_0x4f482d(0x768)],_0x4f482d(0x14d)+_0x49a44e+_0x4f482d(0x85c));if((0x0,J[_0x4f482d(0x360)])(_0x420279)){let _0x293334=new Date()['getTime'](),_0x1b5ef2=_0x420279+_0x4f482d(0x25b)+_0x293334,_0x42c54e=await K[_0x4f482d(0x3de)][_0x4f482d(0x686)](_0x1b5ef2,{'responseType':_0x4f482d(0x457)});k[_0x4f482d(0x456)](_0x583de5,_0x42c54e[_0x4f482d(0x57e)]);}else{let _0x595e59=Buffer[_0x4f482d(0x4dc)](_0x420279,_0x4f482d(0x30a));k[_0x4f482d(0x456)](_0x583de5,_0x595e59);}return new Promise((_0x4b0dee,_0x4a8348)=>{const _0x37bef5=_0x4f482d;(0x0,qe['exec'])(Us['default'][_0x37bef5(0x37b)]+_0x37bef5(0x25e)+_0x583de5+_0x37bef5(0x851)+_0x4f83ca+_0x37bef5(0x77f),_0x18ddb7=>{const _0x24a6ca=_0x37bef5;if(k['unlinkSync'](_0x583de5),_0x18ddb7){this[_0x24a6ca(0x85a)][_0x24a6ca(0x70a)](this[_0x24a6ca(0x7ec)]+'\x20('+this[_0x24a6ca(0x22f)][_0x24a6ca(0x3d9)]+_0x24a6ca(0x5fd)),_0x4a8348(_0x18ddb7);return;}this[_0x24a6ca(0x85a)][_0x24a6ca(0x70a)](this[_0x24a6ca(0x7ec)]+'\x20('+this[_0x24a6ca(0x22f)][_0x24a6ca(0x3d9)]+_0x24a6ca(0x65f)),_0x4b0dee(j[_0x24a6ca(0x3de)][_0x24a6ca(0x6bd)](_0x4f83ca));});});}async[a0_0x11d42e(0x7ed)](_0x156bc0){const _0x51d2a9=a0_0x11d42e;console[_0x51d2a9(0x86e)]('[service]\x20request\x20received\x20in\x20sendButtons',_0x156bc0);let _0x40dbf0;try{_0x156bc0[_0x51d2a9(0x7ed)]?.['thumbnailUrl']&&(_0x40dbf0=await this[_0x51d2a9(0x236)]({'mediatype':_0x51d2a9(0x5d3),'media':_0x156bc0[_0x51d2a9(0x7ed)][_0x51d2a9(0x890)]}));}catch(_0xf661cb){throw console[_0x51d2a9(0x7bf)]('Error\x20in\x20prepareMediaMessage:',_0xf661cb),new Error(_0x51d2a9(0x16f));}try{let _0x274a4f={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x51d2a9(0x741)},'footer':{'text':'Rodapé\x20de\x20Teste'},'header':((()=>{const _0x4b5f08=_0x51d2a9;if(_0x40dbf0?.[_0x4b5f08(0x5a8)]?.[_0x4b5f08(0x3fe)])return{'hasMediaAttachment':!!_0x40dbf0[_0x4b5f08(0x5a8)][_0x4b5f08(0x3fe)],'imageMessage':_0x40dbf0[_0x4b5f08(0x5a8)][_0x4b5f08(0x3fe)]};})()),'nativeFlowMessage':{'buttons':[{'name':_0x51d2a9(0x8a3),'buttonParamsJson':JSON[_0x51d2a9(0x7b9)]({'display_text':'Botão\x201','id':'1'})},{'name':_0x51d2a9(0x8a3),'buttonParamsJson':JSON[_0x51d2a9(0x7b9)]({'display_text':_0x51d2a9(0x5f1),'id':'2'})}],'messageParamsJson':JSON['stringify']({'from':_0x51d2a9(0x470),'templateId':_0x51d2a9(0x725)+(0x0,re[_0x51d2a9(0x6fd)])(0x12)[_0x51d2a9(0x1d7)](_0x51d2a9(0x288))['toUpperCase']()})}}}}};return await this[_0x51d2a9(0x242)](_0x156bc0[_0x51d2a9(0x2b6)],_0x274a4f,_0x156bc0?.['options']);}catch(_0x1051fe){throw console['error'](_0x51d2a9(0x135),_0x1051fe),new Error('Failed\x20to\x20send\x20buttons\x20message');}}async[a0_0x11d42e(0x4d5)](_0x21cf77){const _0x653a0f=a0_0x11d42e;return await this[_0x653a0f(0x5e3)](_0x21cf77['number'],{'locationMessage':{'degreesLatitude':_0x21cf77[_0x653a0f(0x4d5)][_0x653a0f(0x31d)],'degreesLongitude':_0x21cf77['locationMessage'][_0x653a0f(0x3ce)],'name':_0x21cf77[_0x653a0f(0x4d5)]?.[_0x653a0f(0x414)],'address':_0x21cf77[_0x653a0f(0x4d5)]?.['address']}},_0x21cf77?.[_0x653a0f(0x3d7)]);}async[a0_0x11d42e(0x41b)](_0x3f48eb){const _0x2da7b2=a0_0x11d42e;let _0x29d83d={},_0x4d213f=async _0x528e2d=>{const _0x4ae026=a0_0x2924;let _0x53df3b='BEGIN:VCARD\x0aVERSION:3.0\x0aN:'+_0x528e2d[_0x4ae026(0x2a6)]+_0x4ae026(0x125)+_0x528e2d['fullName']+'\x0a';_0x528e2d['organization']&&(_0x53df3b+='ORG:'+_0x528e2d[_0x4ae026(0x354)]+';\x0a'),_0x528e2d[_0x4ae026(0x140)]&&(_0x53df3b+=_0x4ae026(0x684)+_0x528e2d[_0x4ae026(0x140)]+'\x0a'),_0x528e2d[_0x4ae026(0x443)]&&(_0x53df3b+='URL:'+_0x528e2d['url']+'\x0a');let _0x1408be='',_0x1c35a4=0x1;if(_0x528e2d['phoneNumber']){let _0x1bdb0c=_0x528e2d[_0x4ae026(0x438)][_0x4ae026(0x597)]('|');for(let _0x4c6278 of _0x1bdb0c){let _0x265213=await this[_0x4ae026(0x3b1)]({'numbers':[_0x4c6278]}),_0x568301=(_0x265213[_0x4ae026(0x57a)]>0x0?_0x265213[0x0]['jid']:this['createJid'](_0x4c6278))[_0x4ae026(0x771)](_0x4ae026(0x264),'');_0x1408be+='item'+_0x1c35a4+'.TEL;waid='+_0x568301+':'+_0x4c6278+_0x4ae026(0x52e)+_0x1c35a4+_0x4ae026(0x671),_0x1c35a4++;}}return _0x53df3b+=_0x1408be+_0x4ae026(0x8cc),_0x53df3b;};return _0x3f48eb['contactMessage'][_0x2da7b2(0x57a)]===0x1?_0x29d83d[_0x2da7b2(0x41b)]={'displayName':_0x3f48eb[_0x2da7b2(0x41b)][0x0]['fullName'],'vcard':await _0x4d213f(_0x3f48eb['contactMessage'][0x0])}:_0x29d83d[_0x2da7b2(0x714)]={'displayName':_0x3f48eb[_0x2da7b2(0x41b)][_0x2da7b2(0x57a)]+_0x2da7b2(0x6da),'contacts':await Promise[_0x2da7b2(0x1c6)](_0x3f48eb['contactMessage'][_0x2da7b2(0x4f6)](async _0x3755fb=>({'displayName':_0x3755fb['fullName'],'vcard':await _0x4d213f(_0x3755fb)})))},await this[_0x2da7b2(0x5e3)](_0x3f48eb['number'],{..._0x29d83d},_0x3f48eb?.[_0x2da7b2(0x3d7)]);}async[a0_0x11d42e(0x275)](_0x36451b){const _0x56315b=a0_0x11d42e;return await this[_0x56315b(0x5e3)](_0x36451b['reactionMessage'][_0x56315b(0x7af)][_0x56315b(0x33f)],{'reactionMessage':{'key':_0x36451b['reactionMessage']['key'],'text':_0x36451b[_0x56315b(0x275)]['reaction']}});}async[a0_0x11d42e(0x3b1)](_0x59957b){const _0x2b4c58=a0_0x11d42e;let _0x38f1fd=[];for await(let _0x2344e8 of _0x59957b[_0x2b4c58(0x380)]){let _0x2164c9=this[_0x2b4c58(0x153)](_0x2344e8),_0x84bc84=!0x1;try{if((0x0,w[_0x2b4c58(0x43d)])(_0x2164c9)){let _0x12d756=(await this[_0x2b4c58(0x373)]['chat']['findOne']({'where':{'_id':_0x2164c9}},this['instance'][_0x2b4c58(0x3d9)]))[_0x2b4c58(0x30b)];_0x12d756?(_0x84bc84=!0x0,_0x38f1fd[_0x2b4c58(0x64a)](new le(_0x12d756['id'],_0x84bc84,_0x12d756?.[_0x2b4c58(0x28e)]))):(_0x12d756=await this[_0x2b4c58(0x65e)]({'groupJid':_0x2164c9},_0x2b4c58(0x1f3)),_0x38f1fd[_0x2b4c58(0x64a)](new le(_0x12d756['id'],!!_0x12d756?.['id'],_0x12d756?.[_0x2b4c58(0x28e)])));}else{if(_0x2164c9[_0x2b4c58(0x3ef)]('@broadcast'))_0x38f1fd[_0x2b4c58(0x64a)](new le(_0x2164c9,!0x0));else{let _0x123990=(await this[_0x2b4c58(0x60c)]['onWhatsApp'](_0x2164c9))[0x0];_0x38f1fd[_0x2b4c58(0x64a)](new le(_0x123990['jid'],_0x123990[_0x2b4c58(0x418)]));}}}catch{(0x0,w[_0x2b4c58(0x43d)])(_0x2164c9)||await this[_0x2b4c58(0x1ed)](_0x2164c9),_0x38f1fd[_0x2b4c58(0x64a)](new le(_0x2344e8,!0x1));}}return _0x38f1fd;}async['deleteImportedChat'](_0x18604f){const _0x3a29ca=a0_0x11d42e;try{await this[_0x3a29ca(0x373)][_0x3a29ca(0x7fa)][_0x3a29ca(0x588)]({'where':{'_id':_0x18604f,'imported':!0x0}},this['instance'][_0x3a29ca(0x3d9)])&&(await this[_0x3a29ca(0x373)][_0x3a29ca(0x7fa)][_0x3a29ca(0x324)](_0x18604f,this[_0x3a29ca(0x22f)][_0x3a29ca(0x3d9)]),this[_0x3a29ca(0x85a)][_0x3a29ca(0x59a)](_0x3a29ca(0x27a)+_0x18604f+_0x3a29ca(0x8c5)));}catch(_0x58274d){let _0x277a2e=_0x3a29ca(0x823),_0x259820=_0x58274d instanceof Error?_0x58274d[_0x3a29ca(0x5a8)]:typeof _0x58274d==_0x3a29ca(0x1cb)?JSON[_0x3a29ca(0x7b9)](_0x58274d):_0x58274d,_0x48406a=_0x277a2e+':\x20'+_0x259820;this[_0x3a29ca(0x85a)][_0x3a29ca(0x7bf)](this[_0x3a29ca(0x7ec)]+'\x20('+this[_0x3a29ca(0x22f)][_0x3a29ca(0x3d9)]+_0x3a29ca(0x7bd)+_0x48406a);}}async[a0_0x11d42e(0x202)](_0x5db0cb){const _0x59c6ad=a0_0x11d42e;try{let _0x47ee9d=_0x5db0cb[_0x59c6ad(0x151)][_0x59c6ad(0x852)](_0x5b528a=>(0x0,w['isJidGroup'])(_0x5b528a[_0x59c6ad(0x33f)])||Oi(_0x5b528a[_0x59c6ad(0x33f)]))['map'](_0x443f93=>({'remoteJid':_0x443f93[_0x59c6ad(0x33f)],'fromMe':_0x443f93[_0x59c6ad(0x221)],'id':_0x443f93['id']}));await this[_0x59c6ad(0x60c)][_0x59c6ad(0x151)](_0x47ee9d);let _0x4d9d25=_0x47ee9d[_0x59c6ad(0x4f6)](_0x413e73=>this[_0x59c6ad(0x8a1)](_0x413e73,{'status':_0x59c6ad(0x199),'owner':this[_0x59c6ad(0x22f)][_0x59c6ad(0x3d9)]})),_0x2166df=_0x47ee9d[_0x59c6ad(0x4f6)](_0x2b5bcf=>this[_0x59c6ad(0x373)][_0x59c6ad(0x7fa)]['updateOne']({'where':{'_id':_0x2b5bcf[_0x59c6ad(0x33f)]}},{'unreadcount':0x0},this[_0x59c6ad(0x22f)]['wuid'])),[_0x3703a4,_0x52ac12]=await Promise[_0x59c6ad(0x1c6)]([Promise['all'](_0x4d9d25),Promise[_0x59c6ad(0x1c6)](_0x2166df)]);return _0x52ac12['filter'](_0x1e0e58=>_0x1e0e58!==null)['forEach'](_0x588e06=>{const _0x77360a=_0x59c6ad;F(this[_0x77360a(0x7ec)],'chats',{'chat':_0x588e06});}),{'message':'Read\x20messages','read':_0x59c6ad(0x538)};}catch(_0xc5715c){let _0x1a261f=_0x59c6ad(0x703),_0x44e44e=_0xc5715c instanceof Error?_0xc5715c[_0x59c6ad(0x5a8)]:typeof _0xc5715c=='object'?JSON[_0x59c6ad(0x7b9)](_0xc5715c):_0xc5715c,_0x3a4bf6=_0x1a261f+':\x20'+_0x44e44e;throw this[_0x59c6ad(0x85a)][_0x59c6ad(0x7bf)](this[_0x59c6ad(0x7ec)]+'\x20('+this[_0x59c6ad(0x22f)][_0x59c6ad(0x3d9)]+'):\x20'+_0x3a4bf6),new x(_0x3a4bf6);}}async[a0_0x11d42e(0x876)](_0x5b5235){const _0x2a7d99=a0_0x11d42e;let _0x3470e8={'where':{'key':{'remoteJid':_0x5b5235}},'limit':0x1},_0x41132e=await this[_0x2a7d99(0x70b)](_0x3470e8);return _0x41132e||(this[_0x2a7d99(0x85a)][_0x2a7d99(0x7bf)](_0x2a7d99(0x3d8)+_0x5b5235),null);}async[a0_0x11d42e(0x712)](_0xba8b28){const _0x5853dc=a0_0x11d42e;this['logger'][_0x5853dc(0x70a)](this[_0x5853dc(0x7ec)]+'\x20('+this[_0x5853dc(0x22f)][_0x5853dc(0x3d9)]+'):Archiving\x20chat');try{let _0x5dcbc3=_0xba8b28[_0x5853dc(0x766)],_0x2e0ca2=_0xba8b28[_0x5853dc(0x7fa)];if(!_0x5dcbc3&&_0x2e0ca2?_0x5dcbc3=await this[_0x5853dc(0x876)](_0x2e0ca2):(_0x5dcbc3=_0xba8b28[_0x5853dc(0x766)],_0x5dcbc3['messageTimestamp']=_0x5dcbc3?.[_0x5853dc(0x7c6)]??Date[_0x5853dc(0x19e)](),_0x2e0ca2=_0x5dcbc3?.['key']?.[_0x5853dc(0x33f)]),!_0x5dcbc3||Object[_0x5853dc(0x813)](_0x5dcbc3)[_0x5853dc(0x57a)]===0x0)throw new U(_0x5853dc(0x6ec));this['logger'][_0x5853dc(0x70a)](this[_0x5853dc(0x7ec)]+'\x20('+this[_0x5853dc(0x22f)][_0x5853dc(0x3d9)]+'):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x2e0ca2);try{await this['client'][_0x5853dc(0x70e)]({'archive':_0xba8b28['archive'],'lastMessages':[_0x5dcbc3]},this[_0x5853dc(0x153)](_0x2e0ca2));}catch(_0x1db2f7){let _0x29fdce=_0x5853dc(0x463)+_0x2e0ca2,_0x452392=_0x1db2f7 instanceof Error?_0x1db2f7[_0x5853dc(0x5a8)]:typeof _0x1db2f7==_0x5853dc(0x1cb)?JSON[_0x5853dc(0x7b9)](_0x1db2f7):_0x1db2f7,_0x2eb7c8=_0x29fdce+':\x20'+_0x452392;this[_0x5853dc(0x85a)][_0x5853dc(0x7bf)](this[_0x5853dc(0x7ec)]+'\x20('+this['instance']['wuid']+'):\x20'+_0x2eb7c8);}this['logger'][_0x5853dc(0x70a)](this['instanceName']+'\x20('+this[_0x5853dc(0x22f)][_0x5853dc(0x3d9)]+_0x5853dc(0x79a)+_0x2e0ca2);let _0x545e20=await this['repository']['chat'][_0x5853dc(0x793)]({'where':{'_id':_0x5dcbc3?.[_0x5853dc(0x7af)]?.['remoteJid']}},{'archived':_0xba8b28[_0x5853dc(0x313)]},this[_0x5853dc(0x22f)][_0x5853dc(0x3d9)]);return _0x545e20?(this[_0x5853dc(0x85a)][_0x5853dc(0x70a)](this[_0x5853dc(0x7ec)]+'\x20('+this[_0x5853dc(0x22f)][_0x5853dc(0x3d9)]+_0x5853dc(0x2f0)+JSON[_0x5853dc(0x7b9)](_0x545e20)),F(this[_0x5853dc(0x7ec)],_0x5853dc(0x177),{'chat':_0x545e20})):this[_0x5853dc(0x85a)]['error'](this[_0x5853dc(0x7ec)]+'\x20('+this[_0x5853dc(0x22f)]['wuid']+_0x5853dc(0x449)+_0x2e0ca2),{'chatId':_0x2e0ca2,'archived':_0xba8b28[_0x5853dc(0x313)]};}catch(_0x311501){let _0x3a2479=_0x5853dc(0x258),_0x24f170=_0x311501 instanceof Error?_0x311501['message']:typeof _0x311501==_0x5853dc(0x1cb)?JSON['stringify'](_0x311501):_0x311501,_0x410827=_0x3a2479+':\x20'+_0x24f170;throw this[_0x5853dc(0x85a)][_0x5853dc(0x7bf)](this['instanceName']+'\x20('+this[_0x5853dc(0x22f)]['wuid']+_0x5853dc(0x7bd)+_0x410827),new x(_0x410827);}}async[a0_0x11d42e(0x324)](_0xdc48e7){const _0x57a9f4=a0_0x11d42e;this[_0x57a9f4(0x85a)]['verbose'](this[_0x57a9f4(0x7ec)]+'\x20('+this[_0x57a9f4(0x22f)]['wuid']+_0x57a9f4(0x26f));try{let _0x5e9ba0=await this['getLastMessage'](_0xdc48e7);if(!_0x5e9ba0||Object[_0x57a9f4(0x813)](_0x5e9ba0)[_0x57a9f4(0x57a)]===0x0)throw new U(_0x57a9f4(0x6ec));let _0x5ec541=_0x5e9ba0[0x0];this['logger']['verbose'](this[_0x57a9f4(0x7ec)]+'\x20('+this['instance'][_0x57a9f4(0x3d9)]+'):Delete\x20chat\x20in\x20client\x20for\x20number:\x20'+_0xdc48e7);try{await this['client']['chatModify']({'delete':!0x0,'lastMessages':[{'key':_0x5ec541[_0x57a9f4(0x7af)],'messageTimestamp':_0x5ec541['messageTimestamp']}]},this[_0x57a9f4(0x153)](_0xdc48e7));}catch(_0x38d72e){this[_0x57a9f4(0x85a)][_0x57a9f4(0x7bf)](_0x57a9f4(0x463)+_0xdc48e7+':\x20'+_0x38d72e[_0x57a9f4(0x1d7)]());}this[_0x57a9f4(0x85a)][_0x57a9f4(0x70a)](this[_0x57a9f4(0x7ec)]+'\x20('+this[_0x57a9f4(0x22f)][_0x57a9f4(0x3d9)]+'):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0xdc48e7);return;}catch(_0x2c175a){throw this[_0x57a9f4(0x85a)][_0x57a9f4(0x7bf)](this[_0x57a9f4(0x7ec)]+'\x20('+this[_0x57a9f4(0x22f)][_0x57a9f4(0x3d9)]+_0x57a9f4(0x7f7)+_0x2c175a[_0x57a9f4(0x1d7)]()),new x({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0x2c175a[_0x57a9f4(0x1d7)]()]});}}async[a0_0x11d42e(0x568)](_0xde3636){const _0xeecfc7=a0_0x11d42e;try{let _0x5c3013=await this['client'][_0xeecfc7(0x347)](_0xde3636[_0xeecfc7(0x33f)],{'delete':_0xde3636});try{let _0x53ab48=await this[_0xeecfc7(0x8a1)](_0xde3636,{'status':_0xeecfc7(0x350),'owner':this['instance']['wuid']});this[_0xeecfc7(0x85a)][_0xeecfc7(0x70a)](this[_0xeecfc7(0x7ec)]+'\x20('+this['instance']['wuid']+_0xeecfc7(0x3a4)+_0x53ab48);}catch(_0x3dcf91){this['logger'][_0xeecfc7(0x7bf)](_0xeecfc7(0x231)+_0x3dcf91);}return _0x5c3013;}catch(_0x49d4dc){throw new x(_0xeecfc7(0x4c7),_0x49d4dc?.[_0xeecfc7(0x1d7)]());}}async[a0_0x11d42e(0x762)](_0x275c2e){const _0x5a0287=a0_0x11d42e;try{let _0x2a1cc3=_0x275c2e?.[_0x5a0287(0x5a8)]?_0x275c2e:await this['getMessage'](_0x275c2e[_0x5a0287(0x7af)],!0x0);for(let _0x461deb of Ia)_0x2a1cc3[_0x5a0287(0x5a8)][_0x461deb]&&(_0x2a1cc3[_0x5a0287(0x5a8)]=_0x2a1cc3[_0x5a0287(0x5a8)][_0x461deb][_0x5a0287(0x5a8)]);let _0x54ec8c,_0x12c071;for(let _0x9de8d of Ta)if(_0x54ec8c=_0x2a1cc3['message'][_0x9de8d],_0x54ec8c){_0x12c071=_0x9de8d;break;}if(!_0x54ec8c)throw _0x5a0287(0x649);typeof _0x54ec8c[_0x5a0287(0x648)]==_0x5a0287(0x1cb)&&(_0x2a1cc3[_0x5a0287(0x5a8)]=JSON[_0x5a0287(0x5c7)](JSON['stringify'](_0x2a1cc3[_0x5a0287(0x5a8)])));let _0x5aa98b=await(0x0,w[_0x5a0287(0x41d)])({'key':_0x2a1cc3?.[_0x5a0287(0x7af)],'message':_0x2a1cc3?.['message']},_0x5a0287(0x232),{},{'logger':(0x0,Jt[_0x5a0287(0x3de)])({'level':_0x5a0287(0x5f7)}),'reuploadRequest':this['client'][_0x5a0287(0x45e)]});if(!(_0x5aa98b instanceof Buffer))throw new Error(_0x5a0287(0x788));let _0x521b0a=this[_0x5a0287(0x155)][_0x5a0287(0x686)](_0x5a0287(0x683)),_0x3e6649,_0x3cb0a4;if(_0x54ec8c[_0x5a0287(0x329)])_0x3e6649=_0x54ec8c['fileName'];else{let _0x467c06=_0x54ec8c['mimetype']?.[_0x5a0287(0x542)](/\/(\w+)/),_0x4a55a1=_0x467c06?_0x467c06[0x1]:null;if(!_0x4a55a1)throw new Error(_0x5a0287(0x7c0));_0x3e6649=(0x0,Q['v4'])()+'.'+_0x4a55a1;}_0x12c071==='audioMessage'?_0x3cb0a4='/media/'+await this[_0x5a0287(0x8c2)](_0x5aa98b[_0x5a0287(0x1d7)](_0x5a0287(0x30a))):(await this[_0x5a0287(0x3bc)](_0x5aa98b,_0x3e6649),_0x3cb0a4=_0x5a0287(0x22c)+_0x3e6649);let _0x2d3e89=this['configService'][_0x5a0287(0x686)]('SERVER')[_0x5a0287(0x3b0)];if(!_0x2d3e89){let _0x163fbe=this[_0x5a0287(0x155)]['get'](_0x5a0287(0x836));_0x2d3e89=_0x5a0287(0x23b)+(_0x163fbe&&_0x163fbe['FULLCHAIN'][_0x5a0287(0x597)]('/')[0x4]);}_0x3cb0a4=''+_0x2d3e89+_0x3cb0a4;let _0x53bc2e=0xc*0x3c*0x3c*0x3e8,_0x1e3557={'where':{'_id':_0x2a1cc3['key']['id']}},_0x39a570={'message_normalized.fileUrl':_0x3cb0a4,'message_normalized.expires_fileUrl':Date[_0x5a0287(0x19e)]()+_0x53bc2e};try{let _0x244fc3=await this[_0x5a0287(0x373)][_0x5a0287(0x5a8)][_0x5a0287(0x8ad)](_0x1e3557,_0x39a570,this[_0x5a0287(0x22f)]['wuid']);_0x244fc3&&F(this[_0x5a0287(0x7ec)],_0x5a0287(0x458),{'message':_0x244fc3});}catch(_0x403c76){let _0x3cdc43='Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage',_0x43129e=_0x403c76 instanceof Error?_0x403c76[_0x5a0287(0x5a8)]:typeof _0x403c76=='object'?JSON[_0x5a0287(0x7b9)](_0x403c76):_0x403c76,_0xc51083=_0x3cdc43+':\x20'+_0x43129e;this[_0x5a0287(0x85a)][_0x5a0287(0x7bf)](this['instanceName']+'\x20('+this[_0x5a0287(0x22f)]['wuid']+_0x5a0287(0x7bd)+_0xc51083);}return{'mediaType':_0x12c071,'fileName':_0x54ec8c[_0x5a0287(0x329)],'caption':_0x54ec8c[_0x5a0287(0x2c3)],'size':{'fileLength':_0x54ec8c[_0x5a0287(0x62e)],'height':_0x54ec8c[_0x5a0287(0x2c4)],'width':_0x54ec8c[_0x5a0287(0x142)]},'mimetype':_0x54ec8c['mimetype'],'base64':_0x5aa98b[_0x5a0287(0x1d7)](_0x5a0287(0x30a)),'fileUrl':_0x3cb0a4,'expires_fileUrl':Date['now']()+_0x53bc2e};}catch(_0x3652cf){let _0x1ee586='Falha\x20ao\x20processar\x20a\x20solicitação',_0xcc80=_0x3652cf instanceof Error?_0x3652cf[_0x5a0287(0x5a8)]:typeof _0x3652cf==_0x5a0287(0x1cb)?JSON[_0x5a0287(0x7b9)](_0x3652cf):_0x3652cf,_0x14f9ed=_0x1ee586+':\x20'+_0xcc80;throw this[_0x5a0287(0x85a)]['error'](this[_0x5a0287(0x7ec)]+'\x20('+this[_0x5a0287(0x22f)]['wuid']+'):\x20'+_0x14f9ed),new m(_0x14f9ed);}}async['saveMediaToFile'](_0x3bf7fe,_0xcaa587){const _0xb926bd=a0_0x11d42e;let _0x27eb33=j[_0xb926bd(0x3de)][_0xb926bd(0x7f4)](__dirname,_0xb926bd(0x24c));k[_0xb926bd(0x7a4)](_0x27eb33)||k[_0xb926bd(0x4bb)](_0x27eb33,{'recursive':!0x0});let _0x565dae=j['default'][_0xb926bd(0x7f4)](_0x27eb33,_0xcaa587);return new Promise((_0x1375a8,_0x478b77)=>{const _0x484ab2=_0xb926bd;k[_0x484ab2(0x705)](_0x565dae,_0x3bf7fe,_0x36140c=>{const _0x88729d=_0x484ab2;_0x36140c?(this['logger'][_0x88729d(0x7bf)](_0x88729d(0x206)+(_0x36140c instanceof Error?_0x36140c[_0x88729d(0x5a8)]:JSON[_0x88729d(0x7b9)](_0x36140c,null,0x2))),_0x478b77(_0x36140c)):(this[_0x88729d(0x85a)][_0x88729d(0x86e)](_0x88729d(0x400)+_0x565dae),_0x1375a8(_0x565dae));});});}async['fetchContacts'](_0x1220eb){const _0x5c4dac=a0_0x11d42e;return await this[_0x5c4dac(0x373)][_0x5c4dac(0x78d)][_0x5c4dac(0x6d7)](_0x1220eb,this['instance'][_0x5c4dac(0x3d9)]);}async['fetchLabels'](){const _0x50b660=a0_0x11d42e;return await this[_0x50b660(0x373)]['label'][_0x50b660(0x6d7)]({'where':{}},this[_0x50b660(0x22f)]['wuid']);}async[a0_0x11d42e(0x70b)](_0x36de18){const _0x492fd3=a0_0x11d42e;return await this[_0x492fd3(0x373)][_0x492fd3(0x5a8)][_0x492fd3(0x6d7)](_0x36de18,this[_0x492fd3(0x22f)][_0x492fd3(0x3d9)]);}async[a0_0x11d42e(0x674)](){const _0x5b4e23=a0_0x11d42e;return this['repository'][_0x5b4e23(0x7fa)]['removeUnusedChatFields'](this[_0x5b4e23(0x22f)][_0x5b4e23(0x3d9)]),this[_0x5b4e23(0x373)][_0x5b4e23(0x7fa)][_0x5b4e23(0x4f9)](this[_0x5b4e23(0x22f)][_0x5b4e23(0x3d9)]),this[_0x5b4e23(0x373)][_0x5b4e23(0x7fa)][_0x5b4e23(0x226)](this[_0x5b4e23(0x22f)][_0x5b4e23(0x3d9)]),this[_0x5b4e23(0x373)][_0x5b4e23(0x7fa)][_0x5b4e23(0x214)](this['instance']['wuid']),await this[_0x5b4e23(0x373)][_0x5b4e23(0x7fa)][_0x5b4e23(0x6d7)]({'where':{}},this[_0x5b4e23(0x22f)][_0x5b4e23(0x3d9)]);}async[a0_0x11d42e(0x4d7)](_0xafb3c5){const _0x3fb1e2=a0_0x11d42e;try{if(!Array['isArray'](_0xafb3c5)||_0xafb3c5['length']===0x0)throw new Error(_0x3fb1e2(0x710));let _0x5714c8=[],_0x45a217=[];for(let _0x528f51 of _0xafb3c5){if(_0x528f51[_0x3fb1e2(0x665)])_0x528f51[_0x3fb1e2(0x665)]=this[_0x3fb1e2(0x153)](_0x528f51[_0x3fb1e2(0x665)]);else continue;await this[_0x3fb1e2(0x373)]['chat']['findOne']({'where':{'_id':_0x528f51[_0x3fb1e2(0x665)]}},this[_0x3fb1e2(0x22f)][_0x3fb1e2(0x3d9)])?_0x45a217['push']({'_id':_0x528f51['_id'],'leadInfo':_0x528f51[_0x3fb1e2(0x7df)],'owner':this[_0x3fb1e2(0x22f)][_0x3fb1e2(0x3d9)]}):_0x5714c8[_0x3fb1e2(0x64a)]({'_id':_0x528f51['_id'],'owner':this[_0x3fb1e2(0x22f)][_0x3fb1e2(0x3d9)],'leadInfo':_0x528f51[_0x3fb1e2(0x7df)],'imported':!0x0});}return _0x45a217['length']>0x0&&await this[_0x3fb1e2(0x373)][_0x3fb1e2(0x7fa)]['updateMany'](_0x45a217['map'](_0x3a41aa=>({'query':{'where':{'_id':_0x3a41aa[_0x3fb1e2(0x665)],'owner':this[_0x3fb1e2(0x22f)][_0x3fb1e2(0x3d9)]}},'update':_0x3a41aa}))),_0x5714c8['length']>0x0&&await this[_0x3fb1e2(0x373)][_0x3fb1e2(0x7fa)][_0x3fb1e2(0x849)](_0x5714c8,this[_0x3fb1e2(0x22f)][_0x3fb1e2(0x3d9)]),{'updated':_0x45a217[_0x3fb1e2(0x57a)],'inserted':_0x5714c8['length']};}catch(_0x4bf974){let _0x2caa2c=_0x3fb1e2(0x72c),_0x411ba7=_0x4bf974 instanceof Error?_0x4bf974[_0x3fb1e2(0x5a8)]:typeof _0x4bf974==_0x3fb1e2(0x1cb)?JSON['stringify'](_0x4bf974):_0x4bf974,_0x22f6ef=_0x2caa2c+':\x20'+_0x411ba7;throw this[_0x3fb1e2(0x85a)][_0x3fb1e2(0x7bf)](this[_0x3fb1e2(0x7ec)]+'\x20('+this[_0x3fb1e2(0x22f)][_0x3fb1e2(0x3d9)]+_0x3fb1e2(0x7bd)+_0x22f6ef),new m(_0x22f6ef);}}async[a0_0x11d42e(0x551)](_0x5c942a){const _0x258e78=a0_0x11d42e;try{if(!Array[_0x258e78(0x81f)](_0x5c942a)||_0x5c942a[_0x258e78(0x57a)]===0x0)throw new Error(_0x258e78(0x710));let _0x192192=0x64,_0x39be02=0x0;for(let _0x267bfe=0x0;_0x267bfe<_0x5c942a[_0x258e78(0x57a)];_0x267bfe+=_0x192192){let _0x13f9cd=_0x5c942a[_0x258e78(0x39b)](_0x267bfe,_0x267bfe+_0x192192),{updated:_0x14142f}=await this[_0x258e78(0x20e)](_0x13f9cd);_0x39be02+=_0x14142f;}return{'updated':_0x39be02};}catch(_0x1dc11c){let _0x5a4c7b=_0x258e78(0x72c),_0xf7a667=_0x1dc11c instanceof Error?_0x1dc11c['message']:typeof _0x1dc11c==_0x258e78(0x1cb)?JSON[_0x258e78(0x7b9)](_0x1dc11c):_0x1dc11c,_0x4952f9=_0x5a4c7b+':\x20'+_0xf7a667;throw this[_0x258e78(0x85a)]['error'](this[_0x258e78(0x7ec)]+'\x20('+this[_0x258e78(0x22f)][_0x258e78(0x3d9)]+'):\x20'+_0x4952f9),new m(_0x4952f9);}}async[a0_0x11d42e(0x20e)](_0xb7f821){const _0x7ef45b=a0_0x11d42e;try{let _0x2337c8=await this[_0x7ef45b(0x373)]['label']['find']({'where':{}},this['instance']['wuid']),_0x25f908=new Set(_0x2337c8['map'](_0x2607b5=>_0x2607b5[_0x7ef45b(0x665)])),_0xde1830=[],_0x22c3f8=[];for(let _0x14b41a of _0xb7f821){if(!_0x14b41a[_0x7ef45b(0x665)])continue;_0x14b41a[_0x7ef45b(0x665)]=this[_0x7ef45b(0x153)](_0x14b41a[_0x7ef45b(0x665)]);let _0x1b9a24=await this[_0x7ef45b(0x373)][_0x7ef45b(0x7fa)][_0x7ef45b(0x588)]({'where':{'_id':_0x14b41a[_0x7ef45b(0x665)]}},this[_0x7ef45b(0x22f)][_0x7ef45b(0x3d9)]),_0x3cf785={};if(Object['entries'](_0x14b41a[_0x7ef45b(0x7df)])[_0x7ef45b(0x46a)](([_0x3dde0b,_0x5c2e72])=>{const _0x26fdc8=_0x7ef45b;_0x3cf785[_0x26fdc8(0x200)+_0x3dde0b]=_0x5c2e72;}),_0x1b9a24&&!_0x1b9a24[_0x7ef45b(0x574)]){let _0x3591f7=(_0x14b41a[_0x7ef45b(0x7df)][_0x7ef45b(0x535)]||[])[_0x7ef45b(0x852)](_0x3a4af1=>_0x25f908[_0x7ef45b(0x51e)](_0x3a4af1)),_0x52b578=new Set(_0x1b9a24[_0x7ef45b(0x7df)][_0x7ef45b(0x535)]||[]),_0x2bfc0d=_0x3591f7[_0x7ef45b(0x852)](_0x4195e3=>!_0x52b578['has'](_0x4195e3)),_0x8f8db8=[..._0x52b578]['filter'](_0x151738=>!_0x3591f7[_0x7ef45b(0x3ef)](_0x151738));_0x22c3f8[_0x7ef45b(0x64a)](..._0x2bfc0d[_0x7ef45b(0x4f6)](_0x1f5ffd=>this[_0x7ef45b(0x154)](_0x1f5ffd,_0x14b41a['_id']))),_0x22c3f8[_0x7ef45b(0x64a)](..._0x8f8db8[_0x7ef45b(0x4f6)](_0x4e29f2=>this[_0x7ef45b(0x423)](_0x4e29f2,_0x14b41a[_0x7ef45b(0x665)]))),_0x14b41a[_0x7ef45b(0x7df)][_0x7ef45b(0x535)]=_0x3591f7,_0xde1830[_0x7ef45b(0x64a)]({'query':{'where':{'_id':_0x14b41a[_0x7ef45b(0x665)],'owner':this[_0x7ef45b(0x22f)][_0x7ef45b(0x3d9)]}},'update':_0x3cf785});}else _0x3cf785[_0x7ef45b(0x574)]=!0x0,_0xde1830[_0x7ef45b(0x64a)]({'query':{'where':{'_id':_0x14b41a[_0x7ef45b(0x665)],'owner':this['instance'][_0x7ef45b(0x3d9)]}},'update':_0x3cf785});}let _0x16ade0=await this[_0x7ef45b(0x373)]['chat'][_0x7ef45b(0x6e6)](_0xde1830);return await Promise[_0x7ef45b(0x1c6)](_0x22c3f8),{'updated':_0x16ade0};}catch(_0x22b053){let _0x5155d0=_0x7ef45b(0x72c),_0x1a4b75=_0x22b053 instanceof Error?_0x22b053['message']:typeof _0x22b053==_0x7ef45b(0x1cb)?JSON[_0x7ef45b(0x7b9)](_0x22b053):_0x22b053,_0x485418=_0x5155d0+':\x20'+_0x1a4b75;throw this[_0x7ef45b(0x85a)][_0x7ef45b(0x7bf)](this[_0x7ef45b(0x7ec)]+'\x20('+this[_0x7ef45b(0x22f)][_0x7ef45b(0x3d9)]+_0x7ef45b(0x7bd)+_0x485418),new m(_0x485418);}}async[a0_0x11d42e(0x632)](){return await this['client']['fetchPrivacySettings']();}async[a0_0x11d42e(0x7b5)](_0x55f679){const _0x45cd34=a0_0x11d42e;try{return await this[_0x45cd34(0x60c)][_0x45cd34(0x146)](_0x55f679[_0x45cd34(0x6eb)]['readreceipts']),await this[_0x45cd34(0x60c)][_0x45cd34(0x1df)](_0x55f679[_0x45cd34(0x6eb)][_0x45cd34(0x276)]),await this[_0x45cd34(0x60c)]['updateStatusPrivacy'](_0x55f679[_0x45cd34(0x6eb)]['status']),await this[_0x45cd34(0x60c)][_0x45cd34(0x143)](_0x55f679[_0x45cd34(0x6eb)][_0x45cd34(0x2a3)]),await this[_0x45cd34(0x60c)]['updateLastSeenPrivacy'](_0x55f679['privacySettings']['last']),await this[_0x45cd34(0x60c)][_0x45cd34(0x6ef)](_0x55f679['privacySettings'][_0x45cd34(0x5fa)]),this['client']?.['ws']?.[_0x45cd34(0x85f)](),{'update':'success','data':{'readreceipts':_0x55f679[_0x45cd34(0x6eb)][_0x45cd34(0x692)],'profile':_0x55f679[_0x45cd34(0x6eb)][_0x45cd34(0x276)],'status':_0x55f679[_0x45cd34(0x6eb)][_0x45cd34(0x15d)],'online':_0x55f679[_0x45cd34(0x6eb)][_0x45cd34(0x2a3)],'last':_0x55f679['privacySettings'][_0x45cd34(0x837)],'groupadd':_0x55f679[_0x45cd34(0x6eb)]['groupadd']}};}catch(_0x265a7e){let _0x5d0ba0=_0x45cd34(0x827),_0x3f5dea=_0x265a7e instanceof Error?_0x265a7e[_0x45cd34(0x5a8)]:typeof _0x265a7e==_0x45cd34(0x1cb)?JSON[_0x45cd34(0x7b9)](_0x265a7e):_0x265a7e,_0x87e34d=_0x5d0ba0+':\x20'+_0x3f5dea;throw this[_0x45cd34(0x85a)][_0x45cd34(0x7bf)](this['instanceName']+'\x20('+this[_0x45cd34(0x22f)][_0x45cd34(0x3d9)]+_0x45cd34(0x7bd)+_0x87e34d),new m(_0x87e34d);}}async[a0_0x11d42e(0x7ea)](_0x1c0a34){const _0x432ecc=a0_0x11d42e;let _0x1c585f=(_0x1c0a34?this['createJid'](_0x1c0a34):this[_0x432ecc(0x60c)]?.[_0x432ecc(0x5e1)]?.['id'])[_0x432ecc(0x771)](/:\d{1,2}@/g,'@');this['logger']['verbose'](this[_0x432ecc(0x7ec)]+'\x20('+this[_0x432ecc(0x22f)][_0x432ecc(0x3d9)]+'):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20'+_0x1c585f);let _0x17f232=await this[_0x432ecc(0x373)][_0x432ecc(0x78d)][_0x432ecc(0x588)]({'where':{'_id':_0x1c585f}},this[_0x432ecc(0x22f)][_0x432ecc(0x3d9)]),_0x354870=_0x17f232?_0x17f232[_0x432ecc(0x681)]:null;try{let _0x499da6=(await this['whatsappNumber']({'numbers':[_0x1c585f]}))?.[_0x432ecc(0x14f)](),_0x5877e5=(await this[_0x432ecc(0x507)](_0x1c585f,null,!0x1))[_0x432ecc(0x3fb)][_0x432ecc(0x690)],_0x638992=await this[_0x432ecc(0x133)](_0x499da6?.[_0x432ecc(0x2c7)]),_0x4c4466=await this[_0x432ecc(0x2c9)](_0x499da6?.[_0x432ecc(0x2c7)]),_0x19b591=(await this[_0x432ecc(0x507)](_0x1c585f,null,!0x1))[_0x432ecc(0x3fb)][_0x432ecc(0x414)],_0x1a65ca=await this[_0x432ecc(0x373)]['chat'][_0x432ecc(0x588)]({'where':{'_id':_0x1c585f}},this[_0x432ecc(0x22f)][_0x432ecc(0x3d9)]),_0x28043e=typeof _0x638992?.[_0x432ecc(0x15d)]==_0x432ecc(0x4fa)?_0x638992[_0x432ecc(0x15d)]:'',_0x77b787={'imagechat':_0x5877e5,'contactname':_0x354870||null,'pushName':_0x19b591,'status':_0x28043e,'isBusiness':_0x4c4466[_0x432ecc(0x4fd)],'email':_0x4c4466?.[_0x432ecc(0x140)],'description':_0x4c4466?.[_0x432ecc(0x2fa)],'website':_0x4c4466?.[_0x432ecc(0x675)]?.[_0x432ecc(0x14f)](),'lastcache':Date['now'](),'imported':!_0x1a65ca},_0x98d43c=await this[_0x432ecc(0x373)]['chat']['updateOne']({'where':{'_id':_0x1c585f}},_0x77b787,this[_0x432ecc(0x22f)][_0x432ecc(0x3d9)]),_0x5711b4={'owner':this['instance']['wuid'],'_id':_0x1c585f,'profilePictureUrl':_0x5877e5,'status':_0x28043e};return this[_0x432ecc(0x373)][_0x432ecc(0x78d)][_0x432ecc(0x8ad)]([_0x5711b4],this[_0x432ecc(0x22f)][_0x432ecc(0x3d9)]),_0x98d43c&&F(this[_0x432ecc(0x7ec)],_0x432ecc(0x177),{'chat':_0x98d43c}),{'wuid':_0x499da6?.[_0x432ecc(0x2c7)]||_0x1c585f,'name':_0x499da6?.[_0x432ecc(0x414)],'pushName':_0x19b591,'numberExists':_0x499da6?.['exists'],'picture':_0x5877e5,'status':_0x638992?.[_0x432ecc(0x15d)],'isBusiness':_0x4c4466[_0x432ecc(0x4fd)],'email':_0x4c4466?.[_0x432ecc(0x140)],'description':_0x4c4466?.[_0x432ecc(0x2fa)],'website':_0x4c4466?.[_0x432ecc(0x675)]?.[_0x432ecc(0x14f)]()};}catch(_0xccdf3){return this[_0x432ecc(0x85a)][_0x432ecc(0x7bf)](_0x432ecc(0x760)+(_0xccdf3 instanceof Error?_0xccdf3[_0x432ecc(0x5a8)]:JSON[_0x432ecc(0x7b9)](_0xccdf3,null,0x2))),{};}}async[a0_0x11d42e(0x2c9)](_0x587ec2){const _0x36805d=a0_0x11d42e;this[_0x36805d(0x85a)][_0x36805d(0x70a)](this[_0x36805d(0x7ec)]+'\x20('+this['instance'][_0x36805d(0x3d9)]+_0x36805d(0x5e9));try{let _0x52ae63=_0x587ec2?this[_0x36805d(0x153)](_0x587ec2):this[_0x36805d(0x22f)][_0x36805d(0x3d9)],_0x4b384a=await this[_0x36805d(0x60c)]['getBusinessProfile'](_0x52ae63);return this[_0x36805d(0x85a)]['verbose'](this[_0x36805d(0x7ec)]+'\x20('+this[_0x36805d(0x22f)][_0x36805d(0x3d9)]+_0x36805d(0x3b8)),_0x4b384a?(this['logger'][_0x36805d(0x70a)](this[_0x36805d(0x7ec)]+'\x20('+this['instance']['wuid']+_0x36805d(0x191)),{'isBusiness':!0x0,..._0x4b384a}):{'isBusiness':!0x1,'message':'Not\x20is\x20business\x20profile',...(await this[_0x36805d(0x3b1)]({'numbers':[_0x52ae63]}))?.[_0x36805d(0x14f)]()};}catch(_0x5d2733){let _0x12ea9f=_0x36805d(0x787),_0x3d2fa3=_0x5d2733 instanceof Error?_0x5d2733['message']:typeof _0x5d2733==_0x36805d(0x1cb)?JSON[_0x36805d(0x7b9)](_0x5d2733):_0x5d2733,_0x58fa9b=_0x12ea9f+':\x20'+_0x3d2fa3;throw this[_0x36805d(0x85a)][_0x36805d(0x7bf)](this[_0x36805d(0x7ec)]+'\x20('+this[_0x36805d(0x22f)][_0x36805d(0x3d9)]+_0x36805d(0x7bd)+_0x58fa9b),new x(_0x58fa9b);}}async[a0_0x11d42e(0x133)](_0x15589b){const _0x279e2b=a0_0x11d42e;let _0x5bf046=this[_0x279e2b(0x153)](_0x15589b);try{return{'wuid':_0x5bf046,'status':(await this[_0x279e2b(0x60c)][_0x279e2b(0x898)](_0x5bf046))[0x0]?.['status']};}catch{return{'wuid':_0x5bf046,'status':null};}}async[a0_0x11d42e(0x863)](_0x10d02d){const _0x333f59=a0_0x11d42e;try{return await this['client'][_0x333f59(0x863)](_0x10d02d),{'update':_0x333f59(0x538)};}catch(_0x38f1f2){let _0x4b5ea8=_0x333f59(0x23e),_0x3c288a=_0x38f1f2 instanceof Error?_0x38f1f2['message']:typeof _0x38f1f2=='object'?JSON[_0x333f59(0x7b9)](_0x38f1f2):_0x38f1f2,_0x3d9db6=_0x4b5ea8+':\x20'+_0x3c288a;throw this[_0x333f59(0x85a)][_0x333f59(0x7bf)](this['instanceName']+'\x20('+this[_0x333f59(0x22f)][_0x333f59(0x3d9)]+'):\x20'+_0x3d9db6),new x(_0x3d9db6);}}async[a0_0x11d42e(0x19d)](_0x49ec35){const _0xb44ba2=a0_0x11d42e;try{return await this[_0xb44ba2(0x60c)][_0xb44ba2(0x19d)](_0x49ec35),{'update':_0xb44ba2(0x538)};}catch(_0x1125a9){let _0x2991b8=_0xb44ba2(0x271),_0x39b7a3=_0x1125a9 instanceof Error?_0x1125a9['message']:typeof _0x1125a9==_0xb44ba2(0x1cb)?JSON[_0xb44ba2(0x7b9)](_0x1125a9):_0x1125a9,_0x464db9=_0x2991b8+':\x20'+_0x39b7a3;throw this[_0xb44ba2(0x85a)]['error'](this[_0xb44ba2(0x7ec)]+'\x20('+this[_0xb44ba2(0x22f)][_0xb44ba2(0x3d9)]+_0xb44ba2(0x7bd)+_0x464db9),new x(_0x464db9);}}async[a0_0x11d42e(0x422)](_0x5b4ebe){const _0x3e5bd3=a0_0x11d42e;try{let _0x5b680b;if((0x0,J['isURL'])(_0x5b4ebe)){let _0x2ad428=new Date()[_0x3e5bd3(0x370)](),_0x20f070=_0x5b4ebe+_0x3e5bd3(0x25b)+_0x2ad428;_0x5b680b=(await K[_0x3e5bd3(0x3de)]['get'](_0x20f070,{'responseType':'arraybuffer'}))[_0x3e5bd3(0x57e)];}else{if((0x0,J[_0x3e5bd3(0x2fb)])(_0x5b4ebe))_0x5b680b=Buffer[_0x3e5bd3(0x4dc)](_0x5b4ebe,_0x3e5bd3(0x30a));else throw new m(_0x3e5bd3(0x29d));}return await this['client'][_0x3e5bd3(0x422)](this['instance'][_0x3e5bd3(0x3d9)],_0x5b680b),{'update':'success'};}catch(_0x26b849){let _0x571f83='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture',_0x53c6fe=_0x26b849 instanceof Error?_0x26b849['message']:typeof _0x26b849==_0x3e5bd3(0x1cb)?JSON[_0x3e5bd3(0x7b9)](_0x26b849):_0x26b849,_0x2dcafe=_0x571f83+':\x20'+_0x53c6fe;throw this[_0x3e5bd3(0x85a)][_0x3e5bd3(0x7bf)](this[_0x3e5bd3(0x7ec)]+'\x20('+this[_0x3e5bd3(0x22f)][_0x3e5bd3(0x3d9)]+_0x3e5bd3(0x7bd)+_0x2dcafe),new x(_0x2dcafe);}}async[a0_0x11d42e(0x7d5)](){const _0x5d1c24=a0_0x11d42e;try{return await this[_0x5d1c24(0x60c)][_0x5d1c24(0x7d5)](this['instance'][_0x5d1c24(0x3d9)]),{'update':'success'};}catch(_0xf22381){let _0x4348eb=_0x5d1c24(0x73d),_0x5720cc=_0xf22381 instanceof Error?_0xf22381[_0x5d1c24(0x5a8)]:typeof _0xf22381==_0x5d1c24(0x1cb)?JSON[_0x5d1c24(0x7b9)](_0xf22381):_0xf22381,_0x1d5740=_0x4348eb+':\x20'+_0x5720cc;throw this[_0x5d1c24(0x85a)][_0x5d1c24(0x7bf)](this[_0x5d1c24(0x7ec)]+'\x20('+this[_0x5d1c24(0x22f)]['wuid']+'):\x20'+_0x1d5740),new x(_0x1d5740);}}async[a0_0x11d42e(0x82e)](_0x2cca74){const _0x3aa1fb=a0_0x11d42e;try{let _0x55b42c=(await this['whatsappNumber']({'numbers':_0x2cca74[_0x3aa1fb(0x84b)]}))['filter'](_0x44021c=>_0x44021c[_0x3aa1fb(0x418)])[_0x3aa1fb(0x4f6)](_0x3896ea=>_0x3896ea[_0x3aa1fb(0x2c7)]),{id:_0xca90c3}=await this['client']['groupCreate'](_0x2cca74[_0x3aa1fb(0x28e)],_0x55b42c);_0x2cca74?.[_0x3aa1fb(0x2fa)]&&await this[_0x3aa1fb(0x60c)]['groupUpdateDescription'](_0xca90c3,_0x2cca74[_0x3aa1fb(0x2fa)]);let _0x32af31=await this['client'][_0x3aa1fb(0x426)](_0xca90c3);return _0x32af31[_0x3aa1fb(0x7ad)]=[],await this['updateChatGroupData'](_0x32af31),{'metadata':_0x32af31};}catch(_0x38db5f){let _0x2e1ffb=_0x3aa1fb(0x65d),_0x58224c=_0x38db5f instanceof Error?_0x38db5f['message']:typeof _0x38db5f==_0x3aa1fb(0x1cb)?JSON[_0x3aa1fb(0x7b9)](_0x38db5f):_0x38db5f,_0x3426a0=_0x2e1ffb+':\x20'+_0x58224c;throw this['logger'][_0x3aa1fb(0x7bf)](this['instanceName']+'\x20('+this[_0x3aa1fb(0x22f)][_0x3aa1fb(0x3d9)]+_0x3aa1fb(0x7bd)+_0x3426a0),new x(_0x3426a0);}}async['groupBetterSetting'](_0x44f4b8){const _0x526993=a0_0x11d42e;try{if(_0x44f4b8[_0x526993(0x42f)]===!0x0&&await this[_0x526993(0x60c)]['groupSettingUpdate'](_0x44f4b8['groupJid'],'locked'),_0x44f4b8['restrict']===!0x1&&await this[_0x526993(0x60c)]['groupSettingUpdate'](_0x44f4b8['groupJid'],_0x526993(0x141)),_0x44f4b8['announce']===!0x0&&await this[_0x526993(0x60c)]['groupSettingUpdate'](_0x44f4b8['groupJid'],'announcement'),_0x44f4b8[_0x526993(0x292)]===!0x1&&await this[_0x526993(0x60c)][_0x526993(0x2f5)](_0x44f4b8[_0x526993(0x49b)],_0x526993(0x1fb)),_0x44f4b8['memberAddMode']===!0x0&&await this[_0x526993(0x60c)][_0x526993(0x245)](_0x44f4b8[_0x526993(0x49b)],'all_member_add'),_0x44f4b8[_0x526993(0x850)]===!0x1&&await this[_0x526993(0x60c)][_0x526993(0x245)](_0x44f4b8[_0x526993(0x49b)],_0x526993(0x2b9)),_0x44f4b8[_0x526993(0x700)]===!0x0&&await this[_0x526993(0x60c)][_0x526993(0x57b)](_0x44f4b8['groupJid'],'on'),_0x44f4b8[_0x526993(0x700)]===!0x1&&await this[_0x526993(0x60c)][_0x526993(0x57b)](_0x44f4b8[_0x526993(0x49b)],_0x526993(0x6be)),typeof _0x44f4b8['expiration']<'u'&&_0x44f4b8[_0x526993(0x16e)]!==null&&await this[_0x526993(0x60c)][_0x526993(0x239)](_0x44f4b8[_0x526993(0x49b)],_0x44f4b8[_0x526993(0x16e)]),_0x44f4b8['name']&&await this[_0x526993(0x60c)][_0x526993(0x826)](_0x44f4b8[_0x526993(0x49b)],_0x44f4b8['name']),_0x44f4b8[_0x526993(0x2fa)]&&await this['client']['groupUpdateDescription'](_0x44f4b8[_0x526993(0x49b)],_0x44f4b8[_0x526993(0x2fa)]),_0x44f4b8[_0x526993(0x5d3)]){let _0x1c359b;if((0x0,J[_0x526993(0x360)])(_0x44f4b8['image'])){let _0x4dd030=new Date()[_0x526993(0x370)](),_0x59405e=_0x44f4b8[_0x526993(0x5d3)]+_0x526993(0x25b)+_0x4dd030;_0x1c359b=(await K['default'][_0x526993(0x686)](_0x59405e,{'responseType':_0x526993(0x457)}))[_0x526993(0x57e)];}else{if((0x0,J[_0x526993(0x2fb)])(_0x44f4b8[_0x526993(0x5d3)]))_0x1c359b=Buffer[_0x526993(0x4dc)](_0x44f4b8[_0x526993(0x5d3)],_0x526993(0x30a));else throw new m(_0x526993(0x29d));}await this[_0x526993(0x60c)][_0x526993(0x422)](_0x44f4b8[_0x526993(0x49b)],_0x1c359b);}return await this[_0x526993(0x65e)]({'groupJid':_0x44f4b8[_0x526993(0x49b)]});}catch(_0x44d25e){let _0x3cf00c=_0x526993(0x37a),_0x3b8376=_0x44d25e instanceof Error?_0x44d25e['message']:typeof _0x44d25e==_0x526993(0x1cb)?JSON[_0x526993(0x7b9)](_0x44d25e):_0x44d25e,_0xcb5c76=_0x3cf00c+':\x20'+_0x3b8376;throw this[_0x526993(0x85a)]['error'](this['instanceName']+'\x20('+this[_0x526993(0x22f)]['wuid']+_0x526993(0x7bd)+_0xcb5c76),new x(_0xcb5c76);}}async[a0_0x11d42e(0x45b)](_0x4ea189){const _0x5979ca=a0_0x11d42e;try{let _0x535095=_0x4ea189[_0x5979ca(0x84b)]['map'](_0x1ea85c=>this['createJid'](_0x1ea85c));if(_0x4ea189['action']===_0x5979ca(0x528)||_0x4ea189[_0x5979ca(0x3f7)]===_0x5979ca(0x367))await this['client'][_0x5979ca(0x322)](_0x4ea189[_0x5979ca(0x49b)],_0x535095,_0x4ea189['action']);else{if(_0x4ea189[_0x5979ca(0x3f7)]===_0x5979ca(0x277)){let _0x12781a=(await this[_0x5979ca(0x3b1)]({'numbers':_0x4ea189[_0x5979ca(0x84b)]}))['filter'](_0x202c0b=>_0x202c0b[_0x5979ca(0x418)])[_0x5979ca(0x4f6)](_0x1b1a59=>this['createJid'](_0x1b1a59[_0x5979ca(0x2c7)]));if(_0x12781a[_0x5979ca(0x57a)]===0x0)throw new m(_0x5979ca(0x1ec));await this[_0x5979ca(0x60c)][_0x5979ca(0x5d4)](_0x4ea189[_0x5979ca(0x49b)],_0x12781a,_0x5979ca(0x277));}else await this[_0x5979ca(0x60c)][_0x5979ca(0x5d4)](_0x4ea189['groupJid'],_0x535095,_0x4ea189['action']);}return await this['findGroup']({'groupJid':_0x4ea189[_0x5979ca(0x49b)]});}catch(_0x80a6b7){let _0x373bde='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant',_0x4502f7=_0x80a6b7 instanceof Error?_0x80a6b7['message']:typeof _0x80a6b7=='object'?JSON[_0x5979ca(0x7b9)](_0x80a6b7):_0x80a6b7,_0x5e88c6=_0x373bde+':\x20'+_0x4502f7;throw this[_0x5979ca(0x85a)][_0x5979ca(0x7bf)](this[_0x5979ca(0x7ec)]+'\x20('+this[_0x5979ca(0x22f)][_0x5979ca(0x3d9)]+_0x5979ca(0x7bd)+_0x5e88c6),new m(_0x5e88c6);}}async['groupGetInviteInfo'](_0x75b151){const _0x4c7797=a0_0x11d42e;try{return await this[_0x4c7797(0x60c)][_0x4c7797(0x4c2)](_0x75b151[_0x4c7797(0x742)]);}catch(_0x18f6c1){let _0x1ddf52='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo',_0x88e42d=_0x18f6c1 instanceof Error?_0x18f6c1[_0x4c7797(0x5a8)]:typeof _0x18f6c1=='object'?JSON['stringify'](_0x18f6c1):_0x18f6c1,_0x429e5b=_0x1ddf52+':\x20'+_0x88e42d;throw this[_0x4c7797(0x85a)][_0x4c7797(0x7bf)](this[_0x4c7797(0x7ec)]+'\x20('+this[_0x4c7797(0x22f)]['wuid']+'):\x20'+_0x429e5b),new m(_0x429e5b);}}async[a0_0x11d42e(0x65e)](_0x2ed5ad,_0x577c53=a0_0x11d42e(0x571)){const _0x7b917c=a0_0x11d42e;try{let _0x2f095b=await this['repository'][_0x7b917c(0x7fa)][_0x7b917c(0x588)]({'where':{'_id':_0x2ed5ad['groupJid']}},this[_0x7b917c(0x22f)]['wuid']),_0x585944=_0x2f095b?_0x2f095b[_0x7b917c(0x30b)]:null,_0x1657ff=0x18*0x3c*0x3c*0x3e8;if(!_0x585944||_0x585944[_0x7b917c(0x2ea)]&&Date['now']()-_0x585944[_0x7b917c(0x2ea)]>_0x1657ff){let _0x5497b2=await this[_0x7b917c(0x60c)][_0x7b917c(0x426)](_0x2ed5ad['groupJid']);if(_0x5497b2['subjectTime']=_0x5497b2?.[_0x7b917c(0x225)]&&_0x5497b2[_0x7b917c(0x225)][_0x7b917c(0x1d7)]()[_0x7b917c(0x57a)]<0xd?_0x5497b2?.[_0x7b917c(0x225)]*0x3e8:_0x5497b2?.[_0x7b917c(0x225)]||null,_0x5497b2[_0x7b917c(0x7e6)]=_0x5497b2?.['creation']&&_0x5497b2[_0x7b917c(0x7e6)]['toString']()[_0x7b917c(0x57a)]<0xd?_0x5497b2?.['creation']*0x3e8:_0x5497b2?.[_0x7b917c(0x7e6)]||null,_0x585944={..._0x5497b2,'lastUpdate':Date[_0x7b917c(0x19e)]()},!_0x5497b2)return;}let _0x84d241=_0x585944[_0x7b917c(0x84b)]?.['some'](_0x16ab7b=>_0x16ab7b['id']===this[_0x7b917c(0x22f)][_0x7b917c(0x3d9)]+_0x7b917c(0x264)&&_0x16ab7b['admin']!=null)||!0x1;!_0x585944['inviteCode']&&_0x84d241&&(_0x585944['inviteCode']=(await this['inviteCode'](_0x2ed5ad,!0x1))['inviteUrl']);let _0x388bec=(!_0x585944['announce']||_0x84d241)&&(!_0x585944['isCommunity']||_0x84d241);_0x585944[_0x7b917c(0x8c0)]=_0x84d241,_0x585944[_0x7b917c(0x79f)]=_0x388bec;let _0x4c686e=[];if(_0x84d241&&_0x585944[_0x7b917c(0x700)])try{_0x4c686e=await this['client'][_0x7b917c(0x7b7)](_0x2ed5ad[_0x7b917c(0x49b)]),_0x585944[_0x7b917c(0x5be)]=Date[_0x7b917c(0x19e)]();}catch(_0x51d307){this[_0x7b917c(0x85a)][_0x7b917c(0x70a)](this[_0x7b917c(0x7ec)]+'\x20('+this[_0x7b917c(0x22f)]['wuid']+_0x7b917c(0x282)+_0x2ed5ad['groupJid']+':\x20'+(_0x51d307 instanceof Error?_0x51d307[_0x7b917c(0x5a8)]:JSON[_0x7b917c(0x7b9)](_0x51d307,null,0x2)));}try{_0x585944[_0x7b917c(0x5d3)]=(await this[_0x7b917c(0x507)](_0x2ed5ad[_0x7b917c(0x49b)],null,!0x0))[_0x7b917c(0x3fb)][_0x7b917c(0x690)];}catch(_0xb845ee){this[_0x7b917c(0x85a)][_0x7b917c(0x70a)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x7b917c(0x62f)+_0x2ed5ad['groupJid']+':\x20'+(_0xb845ee instanceof Error?_0xb845ee['message']:JSON['stringify'](_0xb845ee,null,0x2)));}let _0x145f62=_0x585944[_0x7b917c(0x84b)][_0x7b917c(0x4f6)](_0x2020b3=>_0x2020b3['id']),_0x20b962=_0x4c686e[_0x7b917c(0x4f6)](_0x4b09cb=>_0x4b09cb[_0x7b917c(0x2c7)]),_0x54a111=await this[_0x7b917c(0x373)][_0x7b917c(0x595)]['findManyByIds']([..._0x145f62,..._0x20b962]);_0x585944[_0x7b917c(0x84b)]=_0x585944[_0x7b917c(0x84b)]['map'](_0x1b229f=>{const _0x14397d=_0x7b917c;let _0x597d10=_0x54a111[_0x14397d(0x6d7)](_0x19707f=>_0x19707f['_id']===_0x1b229f['id']);return{'id':_0x1b229f['id'],'isAdmin':['admin',_0x14397d(0x895)][_0x14397d(0x3ef)](_0x1b229f[_0x14397d(0x67e)]),'admin':_0x1b229f['admin'],'pushName':_0x597d10?.[_0x14397d(0x414)],'profilePictureUrl':_0x597d10?.[_0x14397d(0x690)]};}),_0x585944[_0x7b917c(0x7ad)]=_0x4c686e['map'](_0x495513=>{const _0x36e8f3=_0x7b917c;let _0x224a0c=_0x54a111[_0x36e8f3(0x6d7)](_0x31579a=>_0x31579a[_0x36e8f3(0x665)]===_0x495513[_0x36e8f3(0x2c7)]);return{'id':_0x495513['jid'],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x224a0c?.[_0x36e8f3(0x414)],'profilePictureUrl':_0x224a0c?.[_0x36e8f3(0x690)],'request_method':_0x495513['request_method'],'request_time':_0x495513[_0x36e8f3(0x4b1)]};});let _0x5ec9d6=await this[_0x7b917c(0x373)][_0x7b917c(0x7fa)][_0x7b917c(0x793)]({'where':{'_id':_0x2ed5ad[_0x7b917c(0x49b)]}},{'imagechat':_0x585944[_0x7b917c(0x5d3)],'name':_0x585944['subject'],'lastcache':Date[_0x7b917c(0x19e)](),'groupdata':_0x585944},this[_0x7b917c(0x22f)][_0x7b917c(0x3d9)]);return F(this[_0x7b917c(0x7ec)],_0x7b917c(0x177),{'chat':_0x5ec9d6}),{'metadata':_0x585944};}catch(_0x1b5a1c){if(_0x577c53==='inner')return;throw new U('Error\x20fetching\x20group',_0x1b5a1c[_0x7b917c(0x5a8)][_0x7b917c(0x1d7)]());}}async['findGroups'](){const _0x373d9a=a0_0x11d42e;try{this['logger'][_0x373d9a(0x59a)]('Retornando\x20grupos\x20COM\x20cache');let _0x29719a=Date[_0x373d9a(0x19e)](),_0xd3748c=0x3*0x3c*0x3c*0x3e8;return _0x29719a-this[_0x373d9a(0x86f)]>_0xd3748c&&(this[_0x373d9a(0x866)](),this[_0x373d9a(0x86f)]=_0x29719a),(await this[_0x373d9a(0x373)][_0x373d9a(0x7fa)][_0x373d9a(0x4d0)]({'where':{'group':!0x0}},this['instance'][_0x373d9a(0x3d9)]))['map'](_0x1d0ce1=>({..._0x1d0ce1[_0x373d9a(0x30b)],'groupJid':_0x1d0ce1?.[_0x373d9a(0x665)],'participants':_0x1d0ce1?.[_0x373d9a(0x30b)]?.[_0x373d9a(0x84b)]||[],'awaitingApproval':_0x1d0ce1?.[_0x373d9a(0x30b)]?.[_0x373d9a(0x7ad)]||[],'image':_0x1d0ce1?.[_0x373d9a(0x17a)]}));}catch(_0x4475c1){let _0x5ecc24='Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups',_0xf14b95=_0x4475c1 instanceof Error?_0x4475c1['message']:typeof _0x4475c1==_0x373d9a(0x1cb)?JSON[_0x373d9a(0x7b9)](_0x4475c1):_0x4475c1,_0x2db193=_0x5ecc24+':\x20'+_0xf14b95;throw this[_0x373d9a(0x85a)]['error'](this[_0x373d9a(0x7ec)]+'\x20('+this[_0x373d9a(0x22f)][_0x373d9a(0x3d9)]+'):\x20'+_0x2db193),new U(_0x2db193);}}async['findRealGroups'](){const _0x413979=a0_0x11d42e;try{this['logger']['info'](_0x413979(0x18f));let _0x444c8c=[],_0x3dbb08=await this[_0x413979(0x60c)][_0x413979(0x874)](),_0x3c2455=Object[_0x413979(0x76d)](_0x3dbb08);for(let _0x3705d0=0x0;_0x3705d0<_0x3c2455[_0x413979(0x57a)];_0x3705d0++){let _0x10302b=_0x3c2455[_0x3705d0];(0x0,w[_0x413979(0x43d)])(_0x10302b?.['id'])&&(_0x444c8c[_0x413979(0x64a)]({'groupJid':_0x10302b?.['id'],'subject':_0x10302b?.[_0x413979(0x28e)],'subjectOwner':_0x10302b?.[_0x413979(0x26a)]?.[_0x413979(0x597)]('@')[0x0],'subjectTime':_0x10302b?.[_0x413979(0x225)],'creation':_0x10302b?.[_0x413979(0x7e6)],'size':_0x10302b?.[_0x413979(0x84b)]?.[_0x413979(0x57a)],'owner':_0x10302b?.[_0x413979(0x855)]?.[_0x413979(0x597)]('@')[0x0],'desc':_0x10302b?.[_0x413979(0x526)],'restrict':_0x10302b?.[_0x413979(0x42f)],'announce':_0x10302b?.[_0x413979(0x292)],'image':null,'isCommunity':_0x10302b?.['isCommunity'],'joinApprovalMode':_0x10302b?.[_0x413979(0x700)],'memberCanAddParticipant':_0x10302b?.['memberAddMode'],'participants':_0x10302b?.[_0x413979(0x84b)],'descOwner':_0x10302b?.[_0x413979(0x259)],'descId':_0x10302b?.[_0x413979(0x2ff)],'memberAddMode':_0x10302b?.[_0x413979(0x850)],'isCommunityAnnounce':_0x10302b?.[_0x413979(0x5af)],'ephemeralDuration':_0x10302b?.[_0x413979(0x33d)]||0x0,'author':_0x10302b?.[_0x413979(0x628)]}),this[_0x413979(0x17b)](_0x3c2455[_0x3705d0]));}return _0x444c8c;}catch(_0x5cbd24){let _0x2f909b=_0x413979(0x387),_0x320b87=_0x5cbd24 instanceof Error?_0x5cbd24[_0x413979(0x5a8)]:typeof _0x5cbd24=='object'?JSON['stringify'](_0x5cbd24):_0x5cbd24,_0x39d04f=_0x2f909b+':\x20'+_0x320b87;throw this[_0x413979(0x85a)][_0x413979(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x413979(0x3d9)]+_0x413979(0x7bd)+_0x39d04f),new U(_0x39d04f);}}async[a0_0x11d42e(0x17b)](_0x580fa1){const _0x11965c=a0_0x11d42e;let _0x151305=await this['repository']['chat'][_0x11965c(0x588)]({'where':{'_id':_0x580fa1['id']}},this['instance'][_0x11965c(0x3d9)]);if(_0x580fa1[_0x11965c(0x225)]=_0x580fa1?.[_0x11965c(0x225)]&&_0x580fa1[_0x11965c(0x225)][_0x11965c(0x1d7)]()['length']<0xd?_0x580fa1?.[_0x11965c(0x225)]*0x3e8:_0x580fa1?.[_0x11965c(0x225)]||null,_0x580fa1[_0x11965c(0x7e6)]=_0x580fa1?.[_0x11965c(0x7e6)]&&_0x580fa1[_0x11965c(0x7e6)]['toString']()[_0x11965c(0x57a)]<0xd?_0x580fa1?.[_0x11965c(0x7e6)]*0x3e8:_0x580fa1?.[_0x11965c(0x7e6)]||null,!_0x580fa1['image'])try{_0x580fa1[_0x11965c(0x5d3)]=await this[_0x11965c(0x60c)][_0x11965c(0x7c3)](_0x580fa1['id'],_0x11965c(0x663));}catch(_0xbf31d4){this[_0x11965c(0x85a)][_0x11965c(0x70a)](this[_0x11965c(0x7ec)]+'\x20('+this[_0x11965c(0x22f)]['wuid']+_0x11965c(0x62f)+_0x580fa1['id']+':\x20'+(_0xbf31d4 instanceof Error?_0xbf31d4[_0x11965c(0x5a8)]:JSON[_0x11965c(0x7b9)](_0xbf31d4,null,0x2)));}let _0x8d1b2d=_0x580fa1['participants'][_0x11965c(0x4f6)](_0xae0c41=>{const _0x247854=_0x11965c;let _0x35d0a0=_0x151305?.[_0x247854(0x30b)]?.[_0x247854(0x84b)][_0x247854(0x6d7)](_0x5bc6f5=>_0x5bc6f5['id']===_0xae0c41['id']);return{..._0xae0c41,'isAdmin':['admin',_0x247854(0x895)][_0x247854(0x3ef)](_0xae0c41[_0x247854(0x67e)]),'admin':_0xae0c41['admin'],'name':_0x35d0a0?.['name']||_0xae0c41['name'],'imgUrl':_0x35d0a0?.['imgUrl']||_0xae0c41[_0x247854(0x5b8)]};}),_0x51c31f=_0x8d1b2d[_0x11965c(0x5f8)](_0x4413d2=>_0x4413d2['id']===this[_0x11965c(0x22f)][_0x11965c(0x3d9)]+_0x11965c(0x264)&&_0x4413d2[_0x11965c(0x67e)]!=null)||!0x1,_0xc449d3=(!_0x580fa1['announce']||_0x51c31f)&&(!_0x580fa1[_0x11965c(0x201)]||_0x51c31f),_0x2feb9a={..._0x580fa1,'participants':_0x8d1b2d,'awaitingApproval':_0x151305?.['groupdata']?.[_0x11965c(0x7ad)]||[],'lastFetchAwaitingApproval':_0x151305?.[_0x11965c(0x30b)]?.[_0x11965c(0x5be)],'isAdmin':_0x51c31f,'canSendMessage':_0xc449d3,'lastUpdate':Date[_0x11965c(0x19e)]()};await this[_0x11965c(0x373)][_0x11965c(0x7fa)][_0x11965c(0x793)]({'where':{'_id':_0x580fa1['id']}},{'imagechat':_0x580fa1['image'],'name':_0x580fa1[_0x11965c(0x28e)],'group':!0x0,'groupdata':_0x2feb9a,'lastcache':Date[_0x11965c(0x19e)]()},this[_0x11965c(0x22f)][_0x11965c(0x3d9)]),F(this['instanceName'],_0x11965c(0x177),{'chat':_0x580fa1});}async['updateGroupWebhook'](_0x33a18e){const _0xe0b76=a0_0x11d42e;let _0x476692=await this[_0xe0b76(0x373)][_0xe0b76(0x7fa)][_0xe0b76(0x588)]({'where':{'_id':_0x33a18e['id']}},this['instance'][_0xe0b76(0x3d9)]);_0x33a18e[_0xe0b76(0x225)]=_0x33a18e?.[_0xe0b76(0x225)]&&_0x33a18e[_0xe0b76(0x225)][_0xe0b76(0x1d7)]()[_0xe0b76(0x57a)]<0xd?_0x33a18e?.[_0xe0b76(0x225)]*0x3e8:_0x33a18e?.['subjectTime']||null,_0x33a18e['creation']=_0x33a18e?.[_0xe0b76(0x7e6)]&&_0x33a18e[_0xe0b76(0x7e6)][_0xe0b76(0x1d7)]()[_0xe0b76(0x57a)]<0xd?_0x33a18e?.['creation']*0x3e8:_0x33a18e?.[_0xe0b76(0x7e6)]||null,_0x33a18e[_0xe0b76(0x742)]&&(_0x33a18e[_0xe0b76(0x742)]=_0xe0b76(0x43c)+_0x33a18e[_0xe0b76(0x742)]);let _0x5b353b=_0x476692?.[_0xe0b76(0x30b)]?{..._0x476692[_0xe0b76(0x30b)]}:{};Object[_0xe0b76(0x813)](_0x33a18e)[_0xe0b76(0x46a)](_0x332c80=>{_0x332c80!=='id'&&(_0x5b353b[_0x332c80]=_0x33a18e[_0x332c80]);});let _0x24d6d1=_0x5b353b[_0xe0b76(0x84b)]?.[_0xe0b76(0x5f8)](_0x41ef8d=>_0x41ef8d['id']===this['instance'][_0xe0b76(0x3d9)]+_0xe0b76(0x264)&&_0x41ef8d[_0xe0b76(0x67e)]!=null)||!0x1;_0x5b353b['isAdmin']=_0x24d6d1;let _0x55a677=(!_0x5b353b[_0xe0b76(0x292)]||_0x24d6d1)&&(!_0x5b353b[_0xe0b76(0x201)]||_0x24d6d1);_0x5b353b[_0xe0b76(0x79f)]=_0x55a677;let _0x122d7d={'group':!0x0,'groupdata':_0x5b353b};_0x33a18e[_0xe0b76(0x28e)]&&(_0x122d7d['name']=_0x33a18e['subject']),await this[_0xe0b76(0x373)][_0xe0b76(0x7fa)][_0xe0b76(0x793)]({'where':{'_id':_0x33a18e['id']}},_0x122d7d,this[_0xe0b76(0x22f)]['wuid'],{'upsert':!0x0}),F(this[_0xe0b76(0x7ec)],'chats',{'chat':_0x122d7d});}async['updateGroupParticipantsWebhook'](_0x1fdaa1){const _0x58b986=a0_0x11d42e;let _0x8e040f=await this[_0x58b986(0x373)][_0x58b986(0x7fa)][_0x58b986(0x588)]({'where':{'_id':_0x1fdaa1['id']}},this[_0x58b986(0x22f)][_0x58b986(0x3d9)]);if(!_0x8e040f||!_0x8e040f[_0x58b986(0x30b)]){this[_0x58b986(0x85a)][_0x58b986(0x59a)](this[_0x58b986(0x7ec)]+'\x20('+this[_0x58b986(0x22f)]['wuid']+_0x58b986(0x356)+_0x1fdaa1['id']);return;}let _0x399779=_0x1fdaa1['participants'][_0x58b986(0x4f6)](_0x45bbda=>_0x45bbda['id']),_0x157f01=_0x399779['length']?await this[_0x58b986(0x373)][_0x58b986(0x595)]['findManyByIds'](_0x399779):[],_0x55ec53=new Map(_0x157f01['map'](_0x296400=>[_0x296400[_0x58b986(0x665)],_0x296400])),_0x15033f=_0x3b3759=>{const _0x3977eb=_0x58b986;let _0x34ac85=_0x55ec53[_0x3977eb(0x686)](_0x3b3759['id']),_0x47b3ae=_0x3b3759[_0x3977eb(0x67e)]??(_0x3b3759[_0x3977eb(0x416)]?'superadmin':_0x3b3759[_0x3977eb(0x8c0)]?_0x3977eb(0x67e):null),_0x4378bf=_0x34ac85?.[_0x3977eb(0x414)]??_0x3b3759[_0x3977eb(0x414)]??_0x3b3759['notify']??_0x3b3759['verifiedName']??_0x3b3759['id'],_0x38beee=_0x34ac85?.[_0x3977eb(0x690)]??_0x3b3759[_0x3977eb(0x5b8)]??null,_0x66fc26=_0x3b3759[_0x3977eb(0x8c0)]??_0x47b3ae!==null;return{..._0x3b3759,'id':_0x3b3759['id'],'name':_0x4378bf,'notify':_0x3b3759['notify']??_0x34ac85?.[_0x3977eb(0x414)],'imgUrl':_0x38beee,'isAdmin':_0x66fc26,'isSuperAdmin':_0x3b3759[_0x3977eb(0x416)]??_0x47b3ae===_0x3977eb(0x895),'admin':_0x47b3ae};},_0x4405f9=[..._0x8e040f[_0x58b986(0x30b)]?.[_0x58b986(0x84b)]??[]];switch(_0x1fdaa1[_0x58b986(0x3f7)]){case _0x58b986(0x277):_0x1fdaa1[_0x58b986(0x84b)]['forEach'](_0x38e541=>{const _0x54d53e=_0x58b986;if(!_0x4405f9[_0x54d53e(0x5f8)](_0x1817fe=>_0x1817fe['id']===_0x38e541['id'])){let _0x3a8749=_0x15033f(_0x38e541);_0x4405f9[_0x54d53e(0x64a)](_0x3a8749),this['logger'][_0x54d53e(0x59a)](_0x54d53e(0x60a)+JSON[_0x54d53e(0x7b9)](_0x3a8749));}});break;case'remove':_0x4405f9=_0x4405f9[_0x58b986(0x852)](_0x11efd6=>!_0x399779[_0x58b986(0x3ef)](_0x11efd6['id']));break;case _0x58b986(0x27d):_0x4405f9=_0x4405f9[_0x58b986(0x4f6)](_0x5d305d=>_0x399779[_0x58b986(0x3ef)](_0x5d305d['id'])?{..._0x5d305d,'isAdmin':!0x0,'isSuperAdmin':_0x5d305d[_0x58b986(0x416)]??!0x1,'admin':_0x58b986(0x67e)}:_0x5d305d);break;case _0x58b986(0x39c):_0x4405f9=_0x4405f9[_0x58b986(0x4f6)](_0x5d340b=>_0x399779[_0x58b986(0x3ef)](_0x5d340b['id'])?{..._0x5d340b,'isAdmin':!0x1,'isSuperAdmin':!0x1,'admin':null}:_0x5d340b);break;case _0x58b986(0x831):_0x4405f9=_0x4405f9['map'](_0x22fffb=>{const _0x2b8b67=_0x58b986;if(!_0x399779[_0x2b8b67(0x3ef)](_0x22fffb['id']))return _0x22fffb;let _0x5b90af=_0x1fdaa1['participants'][_0x2b8b67(0x6d7)](_0x2c55f9=>_0x2c55f9['id']===_0x22fffb['id']);if(!_0x5b90af)return _0x22fffb;let _0xa958a8=_0x15033f(_0x5b90af);return{..._0x22fffb,'name':_0xa958a8[_0x2b8b67(0x414)]??_0x22fffb[_0x2b8b67(0x414)],'imgUrl':_0xa958a8[_0x2b8b67(0x5b8)]??_0x22fffb[_0x2b8b67(0x5b8)],'isAdmin':_0xa958a8[_0x2b8b67(0x8c0)],'admin':_0xa958a8[_0x2b8b67(0x67e)]};});break;default:break;}let _0x20b84b=_0x4405f9[_0x58b986(0x57a)],_0x12494f=_0x4405f9[_0x58b986(0x5f8)](_0x5b133b=>_0x5b133b['id']===this['instance'][_0x58b986(0x3d9)]+_0x58b986(0x264)),_0xe8411=_0x12494f&&_0x4405f9[_0x58b986(0x5f8)](_0xec3c7c=>_0xec3c7c['id']===this[_0x58b986(0x22f)][_0x58b986(0x3d9)]+'@s.whatsapp.net'&&_0xec3c7c[_0x58b986(0x67e)]!=null)||!0x1,_0x1118a2=_0x12494f&&(!_0x8e040f[_0x58b986(0x30b)][_0x58b986(0x292)]||_0xe8411)&&(!_0x8e040f[_0x58b986(0x30b)][_0x58b986(0x201)]||_0xe8411);await this[_0x58b986(0x373)]['chat'][_0x58b986(0x793)]({'where':{'_id':_0x1fdaa1['id']}},{'groupdata':{..._0x8e040f[_0x58b986(0x30b)],'participants':_0x4405f9,'size':_0x20b84b,'isAdmin':_0xe8411,'canSendMessage':_0x1118a2}},this['instance']['wuid']),this[_0x58b986(0x85a)][_0x58b986(0x59a)](this[_0x58b986(0x7ec)]+'\x20('+this[_0x58b986(0x22f)]['wuid']+_0x58b986(0x3d6)+_0x1fdaa1['id']+_0x58b986(0x2c5)+_0x1fdaa1[_0x58b986(0x3f7)]+_0x58b986(0x566)+_0x20b84b+_0x58b986(0x833)+_0xe8411+_0x58b986(0x73e)+_0x1118a2);}async['inviteCode'](_0x1525a3,_0x4b6bfb=!0x0){const _0x214a65=a0_0x11d42e;try{let _0x583965=await this[_0x214a65(0x60c)]['groupInviteCode'](_0x1525a3[_0x214a65(0x49b)]),_0x190051={'groupdata.inviteCode':'https://chat.whatsapp.com/'+_0x583965};if(_0x4b6bfb){let _0xae900b=await this[_0x214a65(0x373)][_0x214a65(0x7fa)][_0x214a65(0x793)]({'where':{'_id':_0x1525a3['groupJid']}},_0x190051,this[_0x214a65(0x22f)]['wuid']);}return{'inviteUrl':_0x214a65(0x43c)+_0x583965,'inviteCode':_0x583965};}catch(_0x420a8f){let _0x1d805e=_0x214a65(0x5e6),_0x3c0f9c=_0x420a8f instanceof Error?_0x420a8f[_0x214a65(0x5a8)]:typeof _0x420a8f==_0x214a65(0x1cb)?JSON[_0x214a65(0x7b9)](_0x420a8f):_0x420a8f,_0x2cacba=_0x1d805e+':\x20'+_0x3c0f9c;throw this['logger'][_0x214a65(0x7bf)](this[_0x214a65(0x7ec)]+'\x20('+this[_0x214a65(0x22f)][_0x214a65(0x3d9)]+_0x214a65(0x7bd)+_0x2cacba),new U(_0x2cacba);}}async[a0_0x11d42e(0x64d)](_0x43cb3e){const _0x237a2e=a0_0x11d42e;try{let _0x5ab216=await this[_0x237a2e(0x60c)][_0x237a2e(0x295)](_0x43cb3e[_0x237a2e(0x49b)]);return{'revoked':!0x0,'inviteUrl':_0x237a2e(0x43c)+_0x5ab216,'inviteCode':_0x5ab216};}catch(_0x5c7e8b){let _0x776d01=_0x237a2e(0x2f8),_0x4ba48d=_0x5c7e8b instanceof Error?_0x5c7e8b[_0x237a2e(0x5a8)]:typeof _0x5c7e8b==_0x237a2e(0x1cb)?JSON[_0x237a2e(0x7b9)](_0x5c7e8b):_0x5c7e8b,_0x559369=_0x776d01+':\x20'+_0x4ba48d;throw this[_0x237a2e(0x85a)][_0x237a2e(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x237a2e(0x3d9)]+_0x237a2e(0x7bd)+_0x559369),new U(_0x559369);}}async[a0_0x11d42e(0x4ee)](_0x3c87f1){const _0xbcab5=a0_0x11d42e;try{if((0x0,J['isURL'])(_0x3c87f1[_0xbcab5(0x742)]))var _0x275184=_0x3c87f1['inviteCode']['split']('/')[0x3];else var _0x275184=_0x3c87f1['inviteCode'];let _0x360c1b=await this[_0xbcab5(0x60c)]['groupAcceptInvite'](_0x275184);return this[_0xbcab5(0x85a)][_0xbcab5(0x70a)](this['instanceName']+'\x20('+this[_0xbcab5(0x22f)][_0xbcab5(0x3d9)]+_0xbcab5(0x7bd)+_0x360c1b),{'join':!0x0,'inviteCode':_0x275184,'groupJid':_0x360c1b};}catch(_0x161ba9){let _0x2969f9=_0xbcab5(0x170),_0x16561d=_0x161ba9 instanceof Error?_0x161ba9[_0xbcab5(0x5a8)]:typeof _0x161ba9=='object'?JSON['stringify'](_0x161ba9):_0x161ba9,_0x55f769=_0x2969f9+':\x20'+_0x16561d;throw this[_0xbcab5(0x85a)]['error'](this['instanceName']+'\x20('+this[_0xbcab5(0x22f)]['wuid']+_0xbcab5(0x7bd)+_0x55f769),new U(_0x55f769);}}async[a0_0x11d42e(0x79c)](_0x3ed1cc){const _0x44e5e1=a0_0x11d42e;try{return{'participants':(await this[_0x44e5e1(0x373)][_0x44e5e1(0x7fa)]['findOne']({'where':{'_id':_0x3ed1cc[_0x44e5e1(0x49b)]}},this[_0x44e5e1(0x22f)][_0x44e5e1(0x3d9)]))['groupdata']['participants']};}catch(_0x2c4d9e){let _0x211bcd=_0x44e5e1(0x602),_0x2c5378=_0x2c4d9e instanceof Error?_0x2c4d9e[_0x44e5e1(0x5a8)]:typeof _0x2c4d9e==_0x44e5e1(0x1cb)?JSON[_0x44e5e1(0x7b9)](_0x2c4d9e):_0x2c4d9e,_0x4dd24d=_0x211bcd+':\x20'+_0x2c5378;throw this[_0x44e5e1(0x85a)][_0x44e5e1(0x7bf)](this[_0x44e5e1(0x7ec)]+'\x20('+this[_0x44e5e1(0x22f)][_0x44e5e1(0x3d9)]+_0x44e5e1(0x7bd)+_0x4dd24d),new U(_0x4dd24d);}}async[a0_0x11d42e(0x40d)](_0x3239e3){const _0x5e02f7=a0_0x11d42e;try{return await this[_0x5e02f7(0x60c)][_0x5e02f7(0x8a5)](_0x3239e3['groupJid']),{'groupJid':_0x3239e3[_0x5e02f7(0x49b)],'leave':!0x0};}catch(_0x104c11){let _0x25dd5d=_0x5e02f7(0x4e8),_0x13af7e=_0x104c11 instanceof Error?_0x104c11['message']:typeof _0x104c11==_0x5e02f7(0x1cb)?JSON[_0x5e02f7(0x7b9)](_0x104c11):_0x104c11,_0x20c3fa=_0x25dd5d+':\x20'+_0x13af7e;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x5e02f7(0x22f)][_0x5e02f7(0x3d9)]+_0x5e02f7(0x7bd)+_0x20c3fa),new m(_0x20c3fa);}}async['pollMessage'](_0x505991){const _0x939b26=a0_0x11d42e;return await this[_0x939b26(0x52b)](_0x505991[_0x939b26(0x2b6)],{'poll':{'name':_0x505991[_0x939b26(0x14a)]?.['name'],'selectableCount':_0x505991[_0x939b26(0x14a)][_0x939b26(0x642)],'values':_0x505991[_0x939b26(0x14a)][_0x939b26(0x76d)]}},_0x505991?.['options']);}async['listMessage'](_0x391207){const _0x413258=a0_0x11d42e;return await this['sendMessageWithTyping'](_0x391207[_0x413258(0x2b6)],{'listMessage':{'title':_0x391207[_0x413258(0x659)][_0x413258(0x1fd)],'description':_0x391207[_0x413258(0x659)]['description'],'buttonText':_0x391207[_0x413258(0x659)]?.[_0x413258(0x316)],'footerText':_0x391207[_0x413258(0x659)]?.['footerText'],'sections':_0x391207['listMessage']['sections'],'listType':0x2}},_0x391207?.[_0x413258(0x3d7)]);}async['menuMessage'](_0x439dbb){const _0x24a966=a0_0x11d42e;this[_0x24a966(0x22f)][_0x24a966(0x4fd)]===void 0x0&&await this[_0x24a966(0x2b7)]();let _0x393e7f;if(_0x439dbb[_0x24a966(0x603)][_0x24a966(0x748)]===_0x24a966(0x74a)||_0x439dbb['menuMessage'][_0x24a966(0x748)]==='list2'){let _0x5aa67e=_0x439dbb['menuMessage']['text'][_0x24a966(0x728)]('\x0a'),_0x2f529f='',_0x4051a7='';_0x5aa67e!==-0x1?(_0x2f529f=_0x439dbb['menuMessage'][_0x24a966(0x8b3)]['substring'](0x0,_0x5aa67e)[_0x24a966(0x593)](),_0x4051a7=_0x439dbb[_0x24a966(0x603)][_0x24a966(0x8b3)][_0x24a966(0x431)](_0x5aa67e+0x1)):_0x4051a7=_0x439dbb[_0x24a966(0x603)][_0x24a966(0x8b3)];let _0x2ee207=_0x439dbb[_0x24a966(0x603)][_0x24a966(0x174)][_0x24a966(0x852)](_0x17f3d6=>_0x17f3d6[_0x24a966(0x593)]()!==''),_0x465926=this['createSectionsFromValues'](_0x2ee207);_0x393e7f={'listMessage':{'title':_0x2f529f,'description':_0x4051a7,'buttonText':_0x439dbb[_0x24a966(0x603)][_0x24a966(0x316)]||_0x24a966(0x554),'footerText':_0x439dbb[_0x24a966(0x603)][_0x24a966(0x321)],'sections':_0x465926,'listType':0x2}};}else{if(_0x439dbb[_0x24a966(0x603)]['type']==='poll'){let _0x4df754=_0x439dbb['menuMessage'][_0x24a966(0x174)][_0x24a966(0x852)](_0x25165f=>!(_0x25165f[_0x24a966(0x724)]('[')&&_0x25165f[_0x24a966(0x7b1)](']'))&&_0x25165f[_0x24a966(0x593)]()!=='')[_0x24a966(0x4f6)](_0x36860a=>_0x36860a[_0x24a966(0x597)]('\x0a')[0x0]);for(;_0x4df754[_0x24a966(0x57a)]<0x2;)_0x4df754[_0x24a966(0x64a)](_0x24a966(0x1a0)+(_0x4df754[_0x24a966(0x57a)]+0x1));_0x393e7f={'poll':{'name':_0x439dbb[_0x24a966(0x603)]['text'],'selectableCount':_0x439dbb[_0x24a966(0x603)][_0x24a966(0x642)]||0x1,'values':_0x4df754}};}else{if(_0x439dbb[_0x24a966(0x603)][_0x24a966(0x748)]==='button'){let _0x331c4a=this[_0x24a966(0x536)](_0x439dbb[_0x24a966(0x603)]['choices'][_0x24a966(0x852)](_0x25e32e=>!(_0x25e32e[_0x24a966(0x724)]('[')&&_0x25e32e[_0x24a966(0x7b1)](']'))));return _0x393e7f={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x439dbb[_0x24a966(0x603)][_0x24a966(0x8b3)]},'footer':_0x439dbb[_0x24a966(0x603)][_0x24a966(0x321)]?{'text':_0x439dbb[_0x24a966(0x603)]['footerText']}:void 0x0,'nativeFlowMessage':{'buttons':_0x331c4a,'messageParamsJson':JSON['stringify']({'from':_0x24a966(0x470),'templateId':'3EB0'+(0x0,re[_0x24a966(0x6fd)])(0x12)['toString'](_0x24a966(0x288))[_0x24a966(0x349)]()})}}}}},await this[_0x24a966(0x242)](_0x439dbb['number'],_0x393e7f,_0x439dbb?.[_0x24a966(0x3d7)]);}else{if(_0x439dbb['menuMessage'][_0x24a966(0x748)]===_0x24a966(0x3cb)){let _0x2dd17b=this['createButtonSectionsFromValues'](_0x439dbb[_0x24a966(0x603)][_0x24a966(0x174)]);return _0x393e7f={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x439dbb[_0x24a966(0x603)][_0x24a966(0x8b3)]},'footer':_0x439dbb[_0x24a966(0x603)][_0x24a966(0x321)]?{'text':_0x439dbb[_0x24a966(0x603)][_0x24a966(0x321)]}:void 0x0,'nativeFlowMessage':{'buttons':_0x2dd17b,'messageParamsJson':JSON['stringify']({'from':_0x24a966(0x470),'templateId':'3EB0'+(0x0,re[_0x24a966(0x6fd)])(0x12)[_0x24a966(0x1d7)](_0x24a966(0x288))[_0x24a966(0x349)]()})}}}}},await this[_0x24a966(0x242)](_0x439dbb[_0x24a966(0x2b6)],_0x393e7f,_0x439dbb?.[_0x24a966(0x3d7)]);}}}}return await this[_0x24a966(0x52b)](_0x439dbb['number'],_0x393e7f,_0x439dbb?.[_0x24a966(0x3d7)]);}[a0_0x11d42e(0x536)](_0x2f3215){const _0x5944e7=a0_0x11d42e;return _0x2f3215[_0x5944e7(0x4f6)](_0x171e82=>{const _0x2e7bb5=_0x5944e7;let _0x592eff=_0x171e82[_0x2e7bb5(0x597)]('\x0a')['map'](_0x5e932f=>_0x5e932f[_0x2e7bb5(0x593)]()),_0x37b5e8=_0x592eff[0x0],_0x127483=_0x592eff[0x1]||_0x37b5e8,_0x8ffd6d=_0x127483[_0x2e7bb5(0x724)]('http')?_0x2e7bb5(0x877):_0x2e7bb5(0x8a3);return{'name':_0x8ffd6d,'buttonParamsJson':JSON[_0x2e7bb5(0x7b9)]({'display_text':_0x37b5e8,'id':_0x8ffd6d===_0x2e7bb5(0x8a3)?_0x127483:void 0x0,'url':_0x8ffd6d===_0x2e7bb5(0x877)?_0x127483:void 0x0})};});}[a0_0x11d42e(0x606)](_0x5a29e6){const _0x294ee7=a0_0x11d42e;let _0x494b3c=[],_0x529ef4={'title':'','rows':[]};return _0x5a29e6[_0x294ee7(0x46a)](_0x386786=>{const _0x1c0ef0=_0x294ee7;if(_0x386786[_0x1c0ef0(0x724)]('[')&&_0x386786['endsWith'](']'))_0x529ef4['rows'][_0x1c0ef0(0x57a)]>0x0&&_0x494b3c[_0x1c0ef0(0x64a)](_0x529ef4),_0x529ef4={'title':_0x386786[_0x1c0ef0(0x39b)](0x1,-0x1),'rows':[]};else{let _0x52132c=_0x386786['split']('\x0a')[_0x1c0ef0(0x4f6)](_0x421f5c=>_0x421f5c[_0x1c0ef0(0x593)]()),_0x29c44c=_0x52132c[0x0],_0x522afe=_0x52132c[0x1]?_0x52132c[0x1]:void 0x0,_0x2042b2=_0x52132c[0x2]||_0x29c44c;_0x529ef4[_0x1c0ef0(0x260)][_0x1c0ef0(0x64a)]({'title':_0x29c44c,'description':_0x522afe,'id':_0x2042b2});}}),_0x529ef4[_0x294ee7(0x260)][_0x294ee7(0x57a)]>0x0&&_0x494b3c['push'](_0x529ef4),[{'name':_0x294ee7(0x427),'buttonParamsJson':JSON[_0x294ee7(0x7b9)]({'title':'Selecione\x20uma\x20opção','sections':_0x494b3c})}];}[a0_0x11d42e(0x376)](_0x544e66){const _0x16c341=a0_0x11d42e;let _0x173511=[],_0x32875c={'rows':[]};return _0x544e66[_0x16c341(0x46a)](_0x383226=>{const _0x2132e6=_0x16c341;if(_0x383226[_0x2132e6(0x724)]('[')&&_0x383226[_0x2132e6(0x7b1)](']'))_0x32875c['rows']['length']>0x0&&_0x173511[_0x2132e6(0x64a)](_0x32875c),_0x32875c={'title':_0x383226[_0x2132e6(0x39b)](0x1,-0x1),'rows':[]};else{let _0x152345=_0x383226[_0x2132e6(0x597)]('\x0a')[_0x2132e6(0x4f6)](_0x5cd9d5=>_0x5cd9d5[_0x2132e6(0x593)]()),_0x3ea2de=_0x152345[0x0],_0xe65632=_0x152345[0x1]||null,_0x3b5a9e=_0x152345[0x2]||_0x3ea2de;_0x32875c[_0x2132e6(0x260)][_0x2132e6(0x64a)]({'title':_0x3ea2de,'description':_0xe65632,'rowId':_0x3b5a9e});}}),_0x32875c['rows'][_0x16c341(0x57a)]>0x0&&_0x173511[_0x16c341(0x64a)](_0x32875c),_0x173511;}async[a0_0x11d42e(0x8a1)](_0x2c3684,_0x79753b){const _0x4b6286=a0_0x11d42e;if(await this[_0x4b6286(0x508)](_0x2c3684,!0x0)){let _0x14c9c2={'where':{'_id':_0x2c3684['id']}},_0x1ceb03={'status':[_0x79753b[_0x4b6286(0x15d)]][0x0]};try{let _0x29d002=await this['repository'][_0x4b6286(0x5a8)][_0x4b6286(0x8ad)](_0x14c9c2,_0x1ceb03,this[_0x4b6286(0x22f)][_0x4b6286(0x3d9)]);_0x29d002&&F(this['instanceName'],_0x4b6286(0x458),{'message':_0x29d002});}catch{}}}[a0_0x11d42e(0x806)](_0x39e47e){const _0x21909a=a0_0x11d42e;let _0x53f743=[];return _0x39e47e[_0x21909a(0x46a)](_0x4d8814=>{const _0x5ec8cf=_0x21909a;_0x4d8814[_0x5ec8cf(0x1fd)]&&_0x53f743[_0x5ec8cf(0x64a)]('['+_0x4d8814[_0x5ec8cf(0x1fd)]+']'),_0x4d8814[_0x5ec8cf(0x260)][_0x5ec8cf(0x46a)](_0x3ca1c8=>{const _0x1680c7=_0x5ec8cf;_0x53f743[_0x1680c7(0x64a)](_0x3ca1c8['title']);});}),_0x53f743[_0x21909a(0x7f4)]('|');}[a0_0x11d42e(0x6e7)](_0x4e1daa){const _0x39682a=a0_0x11d42e;let _0x2fddfb=_0x4e1daa[_0x39682a(0x771)](/\\n/g,'\x0a')[_0x39682a(0x597)]('\x0a')[_0x39682a(0x852)](_0x2dbcbf=>_0x2dbcbf[_0x39682a(0x3ef)](_0x39682a(0x2e9))||_0x2dbcbf[_0x39682a(0x3ef)](_0x39682a(0x29e))),_0x418ddf='';return _0x2fddfb[_0x39682a(0x46a)](_0x4f9922=>{const _0x40d161=_0x39682a;let _0x2b31be=/TEL(?:.*):(.+)/,_0x4a6ebd=/EMAIL(?:.*):(.+)/,_0x40e28c=_0x4f9922['match'](_0x2b31be),_0x5de115=_0x4f9922[_0x40d161(0x542)](_0x4a6ebd);if(_0x40e28c){let _0x265460=_0x40e28c[0x1]['replace'](/-| |\+|\(|\)/g,'')[_0x40d161(0x593)]();_0x418ddf+=_0x40d161(0x5d2)+_0x265460+'\x0a';}else{if(_0x5de115){let _0x54eb23=_0x5de115[0x1]['trim']();_0x418ddf+=_0x40d161(0x75f)+_0x54eb23+'\x0a';}}}),_0x418ddf[_0x39682a(0x593)]();}async[a0_0x11d42e(0x325)](_0x13d9e8,_0x25cd4b,_0x520097,_0x35b5de=null){const _0x2c9a35=a0_0x11d42e;if(_0x13d9e8[_0x2c9a35(0x84f)])try{let _0x4310e5=_0x25cd4b['key'][_0x2c9a35(0x33f)][_0x2c9a35(0x771)](/:\d{1,2}@/g,'@'),_0x31dcbb=_0x25cd4b[_0x2c9a35(0x7af)][_0x2c9a35(0x221)],_0x139773=_0x4310e5[_0x2c9a35(0x7b1)](_0x2c9a35(0x355)),_0x908ee6=_0x25cd4b[_0x2c9a35(0x4b5)]?.[_0x2c9a35(0x771)](/:\d{1,2}@/g,'@')||'',_0x3ced74=_0x25cd4b[_0x2c9a35(0x4b9)]?.[_0x2c9a35(0x8b3)]||_0x25cd4b[_0x2c9a35(0x4b9)]?.[_0x2c9a35(0x2c3)]||_0x25cd4b[_0x2c9a35(0x4b9)]?.['vote']||_0x25cd4b[_0x2c9a35(0x4b9)]?.[_0x2c9a35(0x414)]||'',_0x10718e={'_id':_0x25cd4b[_0x2c9a35(0x665)],'remoteJid':_0x31dcbb?this[_0x2c9a35(0x22f)][_0x2c9a35(0x3d9)]:_0x139773?_0x908ee6:_0x4310e5,'pushName':_0x31dcbb?this['instance'][_0x2c9a35(0x892)]||'Eu':_0x25cd4b[_0x2c9a35(0x681)],'text':_0x3ced74,'type':_0x25cd4b[_0x2c9a35(0x13e)],'when':_0x25cd4b[_0x2c9a35(0x7c6)]||Date[_0x2c9a35(0x19e)]()};_0x35b5de||(_0x35b5de=await this[_0x2c9a35(0x373)][_0x2c9a35(0x7fa)][_0x2c9a35(0x588)]({'where':{'_id':_0x4310e5}},this['instance']['wuid']));let _0x30ed7c=_0x31dcbb?0x0:_0x35b5de?(_0x35b5de[_0x2c9a35(0x544)]||0x0)+0x1:0x1,_0x50e631={'lastmsg':_0x25cd4b[_0x2c9a35(0x7c6)]||Date[_0x2c9a35(0x19e)](),'ephemeralExpiration':_0x25cd4b['expiration'],'lastMessage':_0x10718e,'unreadcount':_0x30ed7c,..._0x31dcbb||_0x139773?{}:{'name':_0x25cd4b[_0x2c9a35(0x681)]},..._0x139773?{'group':_0x139773}:{},...!_0x31dcbb&&!_0x139773&&_0x25cd4b[_0x2c9a35(0x7c3)]?{'imagechat':_0x25cd4b[_0x2c9a35(0x7c3)]}:{}};if(!_0x139773&&(!_0x35b5de?.[_0x2c9a35(0x7df)]||!_0x35b5de['leadInfo']['nome'])&&_0x25cd4b[_0x2c9a35(0x681)]&&!_0x31dcbb&&(_0x50e631={..._0x50e631,'leadInfo.nome':_0x25cd4b[_0x2c9a35(0x681)]}),_0x35b5de?.[_0x2c9a35(0x7df)][_0x2c9a35(0x535)]||(_0x50e631={..._0x50e631,'leadInfo.etiquetas':[]}),_0x35b5de?.[_0x2c9a35(0x7df)][_0x2c9a35(0x5c4)]||(_0x50e631={..._0x50e631,'leadInfo.customFields':[]}),_0x35b5de?.[_0x2c9a35(0x7df)][_0x2c9a35(0x2ba)]||(_0x50e631={..._0x50e631,'leadInfo.tags':[]}),_0x35b5de&&_0x35b5de?.[_0x2c9a35(0x574)]){let _0x298e7d=await this[_0x2c9a35(0x373)]['label'][_0x2c9a35(0x6d7)]({'where':{}},this[_0x2c9a35(0x22f)]['wuid']),_0x2a3754=new Set(_0x298e7d[_0x2c9a35(0x4f6)](_0x58aa5e=>_0x58aa5e[_0x2c9a35(0x665)])),_0x2fbe0e=(_0x35b5de['leadInfo']?.[_0x2c9a35(0x535)]||[])['filter'](_0x4f310e=>_0x2a3754[_0x2c9a35(0x51e)](_0x4f310e));_0x50e631={..._0x50e631,'imported':!0x1,'leadInfo.etiquetas':_0x2fbe0e};for(let _0x57af77 of _0x2fbe0e)await this['AddChatLabel'](_0x57af77,_0x4310e5);}if(!this[_0x2c9a35(0x747)][_0x2c9a35(0x814)][_0x2c9a35(0x6d7)](_0x2fc1db=>_0x2fc1db['startCommand']&&_0x3ced74[_0x2c9a35(0x3ef)](_0x2fc1db[_0x2c9a35(0x6d2)]))&&_0x520097===_0x2c9a35(0x6d0)&&_0x31dcbb&&this[_0x2c9a35(0x747)]?.[_0x2c9a35(0x560)][_0x2c9a35(0x227)]&&_0x3ced74['trim']()!==this['AutomateSystem']?.[_0x2c9a35(0x560)]['stopConversation'][_0x2c9a35(0x593)]()){let _0x413c19=(this[_0x2c9a35(0x747)]?.[_0x2c9a35(0x560)][_0x2c9a35(0x55c)]||0x0)*0xea60,_0x2c7115=Date[_0x2c9a35(0x19e)]()+_0x413c19;_0x35b5de?.[_0x2c9a35(0x7df)]?.[_0x2c9a35(0x72d)]===0x0||(_0x50e631={..._0x50e631,'leadInfo.desativadoFluxoAte':_0x2c7115},this[_0x2c9a35(0x85a)][_0x2c9a35(0x70a)](this[_0x2c9a35(0x7ec)]+'\x20('+this[_0x2c9a35(0x22f)][_0x2c9a35(0x3d9)]+_0x2c9a35(0x5df)+_0x2c7115+'.'));}if(_0x3ced74[_0x2c9a35(0x593)]()===this[_0x2c9a35(0x747)]?.[_0x2c9a35(0x560)][_0x2c9a35(0x308)]['trim']()){this[_0x2c9a35(0x85a)][_0x2c9a35(0x70a)](this[_0x2c9a35(0x7ec)]+'\x20('+this[_0x2c9a35(0x22f)][_0x2c9a35(0x3d9)]+_0x2c9a35(0x279)+_0x3ced74);let _0x5bd36b=Date[_0x2c9a35(0x19e)]();this['AutomateSystem']?.[_0x2c9a35(0x560)][_0x2c9a35(0x1c4)]===0x0?_0x50e631={..._0x50e631,'leadInfo.desativadoFluxoAte':_0x5bd36b+0x7591f6200}:_0x50e631={..._0x50e631,'leadInfo.desativadoFluxoAte':_0x5bd36b+this[_0x2c9a35(0x747)]?.['flowConfig']['stopMinutes']*0x3c*0x3e8};}if(_0x35b5de=await this[_0x2c9a35(0x373)][_0x2c9a35(0x7fa)][_0x2c9a35(0x793)]({'where':{'_id':_0x4310e5}},_0x50e631,this[_0x2c9a35(0x22f)][_0x2c9a35(0x3d9)],{'new':!0x0,'upsert':!0x0}),_0x35b5de)F(this[_0x2c9a35(0x7ec)],'chats',{'chat':_0x35b5de});else{this[_0x2c9a35(0x85a)][_0x2c9a35(0x7bf)](this[_0x2c9a35(0x7ec)]+'\x20('+this[_0x2c9a35(0x22f)]['wuid']+_0x2c9a35(0x7b6));return;}if(_0x31dcbb)return this[_0x2c9a35(0x85a)][_0x2c9a35(0x70a)](this[_0x2c9a35(0x7ec)]+'\x20('+this[_0x2c9a35(0x22f)][_0x2c9a35(0x3d9)]+_0x2c9a35(0x2a2)),null;if(!this['AutomateSystem']?.['flowConfig'][_0x2c9a35(0x227)])return this['logger'][_0x2c9a35(0x70a)](this['instanceName']+'\x20('+this[_0x2c9a35(0x22f)]['wuid']+_0x2c9a35(0x695)),null;if(_0x35b5de[_0x2c9a35(0x665)][_0x2c9a35(0x3ef)](_0x2c9a35(0x355))&&this[_0x2c9a35(0x747)]?.[_0x2c9a35(0x560)][_0x2c9a35(0x59d)]===!0x0)return this[_0x2c9a35(0x85a)][_0x2c9a35(0x70a)](this['instanceName']+'\x20('+this[_0x2c9a35(0x22f)][_0x2c9a35(0x3d9)]+_0x2c9a35(0x305)),null;if(_0x35b5de['leadInfo']){if(_0x35b5de[_0x2c9a35(0x7df)][_0x2c9a35(0x72d)]===0x0||_0x35b5de[_0x2c9a35(0x7df)][_0x2c9a35(0x55f)])return this[_0x2c9a35(0x85a)][_0x2c9a35(0x70a)](this['instanceName']+'\x20('+this[_0x2c9a35(0x22f)][_0x2c9a35(0x3d9)]+_0x2c9a35(0x281)+_0x4310e5+_0x2c9a35(0x1d5)),null;if(_0x35b5de[_0x2c9a35(0x7df)][_0x2c9a35(0x72d)]>Date[_0x2c9a35(0x19e)]()&&!_0x25cd4b['message_normalized']?.[_0x2c9a35(0x395)])return this[_0x2c9a35(0x85a)][_0x2c9a35(0x70a)](this[_0x2c9a35(0x7ec)]+'\x20('+this[_0x2c9a35(0x22f)][_0x2c9a35(0x3d9)]+_0x2c9a35(0x35c)+new Date(_0x35b5de[_0x2c9a35(0x7df)][_0x2c9a35(0x72d)])[_0x2c9a35(0x1a3)]()+_0x2c9a35(0x1d5)),null;}this[_0x2c9a35(0x85a)][_0x2c9a35(0x70a)](this[_0x2c9a35(0x7ec)]+'\x20('+this['instance'][_0x2c9a35(0x3d9)]+_0x2c9a35(0x36b)),this[_0x2c9a35(0x31e)](_0x25cd4b,_0x520097);}catch(_0x1860cf){let _0x18b093=_0x2c9a35(0x76a),_0x16e941=_0x1860cf instanceof Error?_0x1860cf[_0x2c9a35(0x5a8)]:typeof _0x1860cf==_0x2c9a35(0x1cb)?JSON[_0x2c9a35(0x7b9)](_0x1860cf):_0x1860cf,_0x88d07d=_0x18b093+':\x20'+_0x16e941;return this[_0x2c9a35(0x85a)][_0x2c9a35(0x7bf)](this[_0x2c9a35(0x7ec)]+'\x20('+this['instance'][_0x2c9a35(0x3d9)]+_0x2c9a35(0x7bd)+_0x88d07d),null;}}async[a0_0x11d42e(0x557)](_0x2b7153,_0x23bee9){const _0x12e6ac=a0_0x11d42e;if(_0x23bee9['ENABLED']){let _0x3f60d2=_0x2b7153[_0x12e6ac(0x4f6)](async _0x25e892=>{const _0x41d860=_0x12e6ac;try{let _0x21a41b={'_id':_0x25e892[_0x41d860(0x665)],'owner':_0x25e892[_0x41d860(0x855)],'lastcache':0x0};if(Object[_0x41d860(0x813)](_0x25e892)['forEach'](_0xc16e7e=>{_0x25e892[_0xc16e7e]!==null&&(_0x21a41b[_0xc16e7e]=_0x25e892[_0xc16e7e]);}),_0x21a41b[_0x41d860(0x17a)]===null&&(_0x21a41b[_0x41d860(0x17a)]='Imagem\x20não\x20encontrada'),Object[_0x41d860(0x813)](_0x21a41b)[_0x41d860(0x57a)]>0x0)return await this[_0x41d860(0x373)]['chat']['updateOne']({'where':{'_id':_0x25e892[_0x41d860(0x665)]}},_0x21a41b,this[_0x41d860(0x22f)][_0x41d860(0x3d9)]);}catch(_0x3f1a51){let _0x58fa25='Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20'+_0x25e892['_id'],_0x54f37c=_0x3f1a51 instanceof Error?_0x3f1a51[_0x41d860(0x5a8)]:typeof _0x3f1a51==_0x41d860(0x1cb)?JSON[_0x41d860(0x7b9)](_0x3f1a51):_0x3f1a51,_0x4569ae=_0x58fa25+':\x20'+_0x54f37c;return this[_0x41d860(0x85a)][_0x41d860(0x7bf)](this[_0x41d860(0x7ec)]+'\x20('+this[_0x41d860(0x22f)][_0x41d860(0x3d9)]+_0x41d860(0x7bd)+_0x4569ae),null;}}),_0x460905=(await Promise['all'](_0x3f60d2))[_0x12e6ac(0x852)](_0x8f885e=>_0x8f885e!==null)[_0x12e6ac(0x57a)];this[_0x12e6ac(0x85a)][_0x12e6ac(0x70a)](this[_0x12e6ac(0x7ec)]+'\x20('+this[_0x12e6ac(0x22f)][_0x12e6ac(0x3d9)]+_0x12e6ac(0x7bd)+_0x460905+'\x20chats\x20de\x20'+this[_0x12e6ac(0x22f)][_0x12e6ac(0x3d9)]+'\x20inseridos\x20no\x20banco\x20de\x20dados...');}}async[a0_0x11d42e(0x252)](_0x1cf4aa){const _0x226684=a0_0x11d42e;this[_0x226684(0x85a)][_0x226684(0x70a)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Ler\x20mensagem');let _0x425aad={'readMessages':[{'remoteJid':_0x1cf4aa[_0x226684(0x24e)][_0x226684(0x482)]['key'][_0x226684(0x33f)],'fromMe':_0x1cf4aa['chatLog'][_0x226684(0x482)][_0x226684(0x7af)][_0x226684(0x221)],'id':_0x1cf4aa[_0x226684(0x24e)][_0x226684(0x482)][_0x226684(0x7af)]['id']}]};await this[_0x226684(0x202)](_0x425aad);}async[a0_0x11d42e(0x31e)](_0x5c604d,_0x434244){const _0x437c97=a0_0x11d42e;try{let {key:_0x1c6536,message_normalized:_0xceb644}=_0x5c604d,_0x3ee5f6=_0xceb644,_0x3386b2=_0xceb644['text']||_0xceb644[_0x437c97(0x2c3)]||_0xceb644[_0x437c97(0x395)]||_0xceb644[_0x437c97(0x414)]||'',_0x5a92cc=_0x1c6536['remoteJid'],_0x57206e=null,_0x47a8fa=this[_0x437c97(0x747)]['flows']['find'](_0x4e334c=>_0x4e334c['startCommand']&&_0x3386b2[_0x437c97(0x3ef)](_0x4e334c[_0x437c97(0x6d2)]));if(_0x47a8fa&&_0x434244==='MESSAGES_UPSERT'){let _0x342b09=await this[_0x437c97(0x373)][_0x437c97(0x5b3)][_0x437c97(0x588)]({'where':{'_id':_0x47a8fa[_0x437c97(0x665)]}});if(this[_0x437c97(0x85a)][_0x437c97(0x70a)](this[_0x437c97(0x7ec)]+'\x20('+this[_0x437c97(0x22f)][_0x437c97(0x3d9)]+_0x437c97(0x758)),_0x342b09&&_0x342b09['whoCanUse']?.[_0x437c97(0x3ef)](this[_0x437c97(0x22f)][_0x437c97(0x3d9)]))_0x57206e=await this[_0x437c97(0x4f7)](_0x342b09,_0x1c6536,_0x3ee5f6);else return this[_0x437c97(0x85a)][_0x437c97(0x70a)](this[_0x437c97(0x7ec)]+'\x20('+this[_0x437c97(0x22f)][_0x437c97(0x3d9)]+_0x437c97(0x4f1)),null;}else this['logger']['verbose'](this[_0x437c97(0x7ec)]+'\x20('+this['instance']['wuid']+_0x437c97(0x1be));if(_0x57206e=await this[_0x437c97(0x598)](_0x5a92cc,_0x3ee5f6),_0x57206e){this['logger'][_0x437c97(0x70a)](this[_0x437c97(0x7ec)]+'\x20('+this['instance'][_0x437c97(0x3d9)]+_0x437c97(0x6c2)),!_0x1c6536[_0x437c97(0x221)]&&_0x57206e['readMessages']&&this['readMessageBot'](_0x57206e);let _0x47999e=await this['NextBlock'](_0x57206e);_0x47999e&&await this[_0x437c97(0x233)](_0x57206e,_0x47999e);}}catch(_0x2deb64){this['logger'][_0x437c97(0x7bf)](this[_0x437c97(0x7ec)]+'\x20('+this[_0x437c97(0x22f)]['wuid']+_0x437c97(0x5a6)+(_0x2deb64 instanceof Error?_0x2deb64['message']:JSON[_0x437c97(0x7b9)](_0x2deb64,null,0x2)));}}[a0_0x11d42e(0x8b8)](_0x26c964,_0x160ffb='',_0x4e4712={}){const _0x171859=a0_0x11d42e;return typeof _0x26c964!=_0x171859(0x1cb)||_0x26c964===null?(_0x160ffb&&(_0x4e4712[_0x160ffb]=_0x26c964),_0x4e4712):(Object[_0x171859(0x575)](_0x26c964)[_0x171859(0x46a)](([_0x31be61,_0x72084c])=>{const _0x52c2d2=_0x171859;let _0x3f8b45=_0x160ffb?_0x160ffb+'.'+_0x31be61:'_'+_0x31be61;Array[_0x52c2d2(0x81f)](_0x72084c)?_0x72084c[_0x52c2d2(0x46a)]((_0x3f5979,_0x255f48)=>{const _0x3aee69=_0x52c2d2;this[_0x3aee69(0x8b8)](_0x3f5979,_0x3f8b45+'['+_0x255f48+']',_0x4e4712);}):typeof _0x72084c=='object'&&_0x72084c!==null?this['flattenObject'](_0x72084c,_0x3f8b45,_0x4e4712):_0x4e4712[_0x3f8b45]=String(_0x72084c);}),_0x4e4712);}[a0_0x11d42e(0x448)](_0x23eb86){const _0x37e9de=a0_0x11d42e;let _0x2d8b9a={};for(let _0xd0c17d of _0x23eb86)typeof _0xd0c17d[_0x37e9de(0x414)]=='string'&&typeof _0xd0c17d[_0x37e9de(0x49c)]==_0x37e9de(0x4fa)&&(_0x2d8b9a[_0xd0c17d['name']]=_0xd0c17d[_0x37e9de(0x49c)]);return _0x2d8b9a;}async[a0_0x11d42e(0x4e2)](_0x23fca8){const _0x34ff34=a0_0x11d42e;if(!this[_0x34ff34(0x747)]?.[_0x34ff34(0x560)][_0x34ff34(0x227)]||_0x23fca8['status']!==_0x34ff34(0x78a)&&_0x23fca8[_0x34ff34(0x1ce)]==='')return null;let _0x3d8c70=_0x23fca8[_0x34ff34(0x24e)][_0x34ff34(0x8c3)]||_0x34ff34(0x47e);typeof _0x23fca8[_0x34ff34(0x24e)][_0x34ff34(0x2d6)]>'u'&&(_0x23fca8[_0x34ff34(0x24e)]['lastCondition']=!0x0);let _0x445996=_0x23fca8[_0x34ff34(0x24e)][_0x34ff34(0x2d6)];this[_0x34ff34(0x85a)]['verbose'](this[_0x34ff34(0x7ec)]+'\x20('+this[_0x34ff34(0x22f)][_0x34ff34(0x3d9)]+'):\x20lastBlockId:\x20'+_0x3d8c70+',\x20lastCondition:\x20'+_0x445996);let _0x5061fe=_0x3d8c70===_0x34ff34(0x47e)?_0x23fca8[_0x34ff34(0x23f)][_0x34ff34(0x6d7)](_0x2e2092=>_0x2e2092[_0x34ff34(0x748)]===_0x34ff34(0x47e)):_0x23fca8[_0x34ff34(0x23f)][_0x34ff34(0x6d7)](_0x5557f4=>_0x5557f4[_0x34ff34(0x665)][_0x34ff34(0x1d7)]()===_0x3d8c70[_0x34ff34(0x1d7)]());if(!_0x5061fe)return this[_0x34ff34(0x85a)][_0x34ff34(0x7bf)](this[_0x34ff34(0x7ec)]+'\x20('+this[_0x34ff34(0x22f)]['wuid']+_0x34ff34(0x34f)+_0x3d8c70),null;let _0x5a5ef0={'_pushName':_0x23fca8?.[_0x34ff34(0x24e)]?.[_0x34ff34(0x482)]?.[_0x34ff34(0x681)]||'','_sender':this[_0x34ff34(0x22f)]['wuid']||'',..._0x23fca8[_0x34ff34(0x24e)]['realVariables']},_0x24472d=new Date();_0x5a5ef0[_0x34ff34(0x5d0)]=_0x24472d['getDate'](),_0x5a5ef0[_0x34ff34(0x6c6)]=_0x24472d[_0x34ff34(0x680)]()+0x1,_0x5a5ef0[_0x34ff34(0x168)]=_0x24472d[_0x34ff34(0x3ad)](),_0x5a5ef0['_hour']=_0x24472d[_0x34ff34(0x6d3)](),_0x5a5ef0[_0x34ff34(0x804)]=_0x24472d['getMinutes'](),_0x5a5ef0[_0x34ff34(0x1b1)]=_0x24472d[_0x34ff34(0x607)]();let _0x2a7087=null;if(_0x23fca8[_0x34ff34(0x1ce)]){let _0x18cf90=_0x23fca8[_0x34ff34(0x24e)][_0x34ff34(0x482)][_0x34ff34(0x395)],_0xc81390=_0x23fca8[_0x34ff34(0x3ca)][_0x34ff34(0x6d7)](_0x230e90=>_0x230e90[_0x34ff34(0x733)]===_0x18cf90);if(_0xc81390){let _0x5247aa=_0xc81390[_0x34ff34(0x887)];if(_0x2a7087=_0x23fca8[_0x34ff34(0x23f)]['find'](_0x25268e=>_0x25268e[_0x34ff34(0x1ab)]===_0x5247aa&&_0x25268e['order']===0x1),_0x5061fe[_0x34ff34(0x1eb)][_0x34ff34(0x138)]){let _0x2a2583={'id':_0x23fca8['waitingMenu_id'],'remoteJid':_0x23fca8['remoteJid'],'fromMe':!0x0};await this[_0x34ff34(0x568)](_0x2a2583);}if(_0x5061fe[_0x34ff34(0x1eb)][_0x34ff34(0x138)]&&_0x5061fe[_0x34ff34(0x1eb)][_0x34ff34(0x81e)]&&_0x5061fe[_0x34ff34(0x1eb)][_0x34ff34(0x8a4)]===_0x34ff34(0x745)){let _0xf0d974={'number':_0x23fca8[_0x34ff34(0x33f)],'options':{'delay':0x0},'textMessage':{'text':'*Pergunta*:\x20\x0a'+_0x23fca8[_0x34ff34(0x87b)]+_0x34ff34(0x35a)+_0x18cf90}};await this[_0x34ff34(0x78c)](_0xf0d974);}_0x5a5ef0[_0x34ff34(0x372)]=_0x18cf90,_0x23fca8['status']='open',_0x23fca8[_0x34ff34(0x1ce)]='',_0x23fca8['waitingMenu_text']='',_0x23fca8['waitingMenu_replyOptions']=[];}else{this[_0x34ff34(0x85a)]['verbose'](this[_0x34ff34(0x7ec)]+'\x20('+this[_0x34ff34(0x22f)][_0x34ff34(0x3d9)]+_0x34ff34(0x731));let _0x52d3c9={'activatedCount':_0x23fca8[_0x34ff34(0x24e)]['blockLogs']['filter'](_0x2288ff=>String(_0x2288ff[_0x34ff34(0x545)])===String(_0x3d8c70))[_0x34ff34(0x57a)],'moreLogs':[_0x34ff34(0x1c0)]};if(_0x5061fe[_0x34ff34(0x1eb)]['pollErrorMessage']){let _0x183813={'number':_0x23fca8[_0x34ff34(0x33f)],'options':{'delay':0x0},'textMessage':{'text':_0x5061fe[_0x34ff34(0x1eb)][_0x34ff34(0x493)]}};await this['textMessage'](_0x183813);}if(_0x5061fe[_0x34ff34(0x7d3)]!==void 0x0&&_0x52d3c9[_0x34ff34(0x4cb)]>=_0x5061fe[_0x34ff34(0x7d3)]){let _0xe3609f=Date[_0x34ff34(0x19e)](),_0x34b00e=_0x5061fe[_0x34ff34(0x39d)]??0xa;isNaN(_0x34b00e)&&(_0x34b00e=0xa);let _0x1ba2ef=_0xe3609f+_0x34b00e*0x3c*0x3e8;_0x52d3c9[_0x34ff34(0x53e)]=_0x1ba2ef,_0x52d3c9[_0x34ff34(0x26c)][_0x34ff34(0x64a)](_0x34ff34(0x708)),this[_0x34ff34(0x518)](_0x23fca8,_0x1ba2ef),_0x23fca8[_0x34ff34(0x1ce)]='',_0x23fca8[_0x34ff34(0x87b)]='',_0x23fca8[_0x34ff34(0x3ca)]=[];}return this[_0x34ff34(0x41a)](_0x23fca8,_0x5061fe,_0x52d3c9,!0x0),null;}}if(_0x445996&&_0x5061fe[_0x34ff34(0x887)]&&!_0x23fca8[_0x34ff34(0x1ce)]){let _0x22ecf6=_0x23fca8['blocks'][_0x34ff34(0x852)](_0xd074d1=>_0xd074d1[_0x34ff34(0x1ab)][_0x34ff34(0x1d7)]()===_0x5061fe[_0x34ff34(0x887)][_0x34ff34(0x1d7)]())[_0x34ff34(0x7aa)]((_0x444db7,_0x25c6ca)=>_0x444db7[_0x34ff34(0x879)]-_0x25c6ca[_0x34ff34(0x879)]);_0x22ecf6[_0x34ff34(0x57a)]>0x0&&(_0x2a7087=_0x22ecf6[0x0]);}if(!_0x2a7087){let _0x58e68d=_0x5061fe['groupId'],_0x4a8bfe=_0x23fca8[_0x34ff34(0x23f)]['filter'](_0x15b9a6=>_0x15b9a6[_0x34ff34(0x1ab)]===_0x58e68d&&_0x15b9a6[_0x34ff34(0x879)]>_0x5061fe[_0x34ff34(0x879)])[_0x34ff34(0x7aa)]((_0x1570f3,_0x46541e)=>_0x1570f3[_0x34ff34(0x879)]-_0x46541e['order']);_0x4a8bfe[_0x34ff34(0x57a)]>0x0&&(_0x2a7087=_0x4a8bfe[0x0]);}if(!_0x2a7087)return _0x23fca8[_0x34ff34(0x15d)]=_0x34ff34(0x798),null;_0x23fca8['chatLog'][_0x34ff34(0x83c)]=_0x5a5ef0;let _0x18a4d3=JSON[_0x34ff34(0x5c7)](JSON[_0x34ff34(0x7b9)](_0x2a7087));return this[_0x34ff34(0x37e)](_0x18a4d3,_0x23fca8[_0x34ff34(0x24e)][_0x34ff34(0x83c)]),_0x23fca8[_0x34ff34(0x24e)][_0x34ff34(0x8c3)]=_0x18a4d3[_0x34ff34(0x665)],_0x23fca8[_0x34ff34(0x24e)]['lastCondition']=!0x0,_0x18a4d3;}[a0_0x11d42e(0x3a6)](_0x217c47,_0x1af5e){const _0x3c180e=a0_0x11d42e;return _0x217c47[_0x3c180e(0x771)](/\{\{([^}]+)\}\}/g,(_0x64a34c,_0x4ca357)=>_0x1af5e[_0x4ca357]||'');}['replaceVariablesInObject'](_0x180f03,_0xc06091){const _0x294bcd=a0_0x11d42e;for(let _0x1baf4e in _0x180f03)typeof _0x180f03[_0x1baf4e]==_0x294bcd(0x4fa)?_0x180f03[_0x1baf4e]=this[_0x294bcd(0x3a6)](_0x180f03[_0x1baf4e],_0xc06091):typeof _0x180f03[_0x1baf4e]==_0x294bcd(0x1cb)&&this[_0x294bcd(0x37e)](_0x180f03[_0x1baf4e],_0xc06091);}async[a0_0x11d42e(0x699)](_0x449aff,_0x4dc613){const _0x2d0e9b=a0_0x11d42e;let _0x3b0d90=_0x4dc613[_0x2d0e9b(0x665)];if(_0x449aff[_0x2d0e9b(0x24e)]&&_0x449aff[_0x2d0e9b(0x24e)]['blockLogs']){let _0x4684ed=_0x449aff[_0x2d0e9b(0x24e)][_0x2d0e9b(0x272)][_0x2d0e9b(0x852)](_0x183d56=>String(_0x183d56[_0x2d0e9b(0x545)])===String(_0x3b0d90))[_0x2d0e9b(0x222)]();if(_0x4684ed&&_0x4684ed[_0x2d0e9b(0x7bf)]&&_0x4dc613[_0x2d0e9b(0x441)])return _0x449aff[_0x2d0e9b(0x15d)]=_0x2d0e9b(0x798),await this[_0x2d0e9b(0x5aa)](_0x449aff),null;}if(_0x4dc613[_0x2d0e9b(0x748)]===_0x2d0e9b(0x1eb)&&_0x4dc613[_0x2d0e9b(0x1eb)][_0x2d0e9b(0x34c)]===_0x2d0e9b(0x442)&&_0x449aff[_0x2d0e9b(0x1ce)])return _0x449aff[_0x2d0e9b(0x24e)][_0x2d0e9b(0x8c3)]=_0x3b0d90,await this[_0x2d0e9b(0x5aa)](_0x449aff),null;let _0x4422e8=await this['NextBlock'](_0x449aff);if(_0x449aff[_0x2d0e9b(0x24e)]&&_0x449aff[_0x2d0e9b(0x24e)][_0x2d0e9b(0x272)]){let _0x176251=_0x449aff[_0x2d0e9b(0x24e)][_0x2d0e9b(0x272)][_0x2d0e9b(0x852)](_0x1ebc27=>String(_0x1ebc27[_0x2d0e9b(0x545)])===String(_0x3b0d90))[_0x2d0e9b(0x57a)];if(_0x4dc613['maxActives']!==void 0x0&&_0x176251>=_0x4dc613['maxActives']){let _0x50304c=Date[_0x2d0e9b(0x19e)](),_0x4b82d3=_0x4dc613[_0x2d0e9b(0x39d)]??0xa;isNaN(_0x4b82d3)&&(_0x4b82d3=0xa);let _0x1274d6=_0x50304c+_0x4b82d3*0x3c*0x3e8,_0x39df09={'newStoppedUntil':_0x1274d6};return this['updateStopChat'](_0x449aff,_0x1274d6),this[_0x2d0e9b(0x41a)](_0x449aff,_0x4dc613,_0x39df09,!0x0),null;}}_0x4422e8&&_0x4422e8[_0x2d0e9b(0x748)]!=='save'&&await this['processblock'](_0x449aff,_0x4422e8),_0x4422e8||await this['saveConversationToDatabase'](_0x449aff),_0x4422e8&&_0x4422e8['type']===_0x2d0e9b(0x8a7)&&(_0x449aff[_0x2d0e9b(0x24e)][_0x2d0e9b(0x8c3)]=_0x3b0d90,await this[_0x2d0e9b(0x5aa)](_0x449aff));}async[a0_0x11d42e(0x233)](_0x1bf564,_0x2058d6){const _0xa123a8=a0_0x11d42e;try{let _0x29e1da=_0x2058d6[_0xa123a8(0x748)];this[_0xa123a8(0x85a)]['verbose'](this[_0xa123a8(0x7ec)]+'\x20('+this[_0xa123a8(0x22f)][_0xa123a8(0x3d9)]+'):\x20Going\x20to\x20'+_0x29e1da);let _0x5a3a33={'uazapi':()=>this[_0xa123a8(0x415)](_0x1bf564,_0x2058d6),'save':()=>this[_0xa123a8(0x3f2)](_0x1bf564,_0x2058d6),'stop':()=>this[_0xa123a8(0x308)](_0x1bf564,_0x2058d6),'condition':()=>this['processConditions'](_0x1bf564,_0x2058d6),'varedit':()=>this[_0xa123a8(0x3e2)](_0x1bf564,_0x2058d6),'apirequest':()=>this[_0xa123a8(0x6f3)](_0x1bf564,_0x2058d6),'goToFlow':()=>this[_0xa123a8(0x50d)](_0x1bf564,_0x2058d6),'scheduleFlow':()=>this['processScheduleFlow'](_0x1bf564,_0x2058d6),'awaitSeconds':()=>this[_0xa123a8(0x21d)](_0x1bf564,_0x2058d6),'clearVariables':()=>this[_0xa123a8(0x5fb)](_0x1bf564,_0x2058d6)}[_0x29e1da];_0x5a3a33&&await _0x5a3a33();}catch(_0x20dd8b){this[_0xa123a8(0x85a)][_0xa123a8(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0xa123a8(0x3d9)]+_0xa123a8(0x150)+(_0x20dd8b instanceof Error?_0x20dd8b['message']:JSON[_0xa123a8(0x7b9)](_0x20dd8b,null,0x2)));}}async['processawaitSeconds'](_0x51884d,_0x200008){const _0x2c0da8=a0_0x11d42e;if(this[_0x2c0da8(0x85a)][_0x2c0da8(0x70a)](this['instanceName']+'\x20('+this[_0x2c0da8(0x22f)][_0x2c0da8(0x3d9)]+_0x2c0da8(0x1e8)),!_0x51884d||!_0x200008)return this['logger']['error'](this['instanceName']+'\x20('+this[_0x2c0da8(0x22f)]['wuid']+_0x2c0da8(0x5e0)),null;let _0x2e9e8b=+_0x200008[_0x2c0da8(0x59c)];isNaN(_0x2e9e8b)&&(_0x2e9e8b=0x0),_0x2e9e8b=Math[_0x2c0da8(0x4ba)](_0x2e9e8b,0x3c),await(0x0,w['delay'])(_0x2e9e8b*0x3e8);let _0x1806e2={'moreLogs':['Pausado\x20por\x20'+_0x2e9e8b+_0x2c0da8(0x3c1)]};return await this[_0x2c0da8(0x41a)](_0x51884d,_0x200008,_0x1806e2),_0x2e9e8b;}async['processclearVariables'](_0x28fe07,_0x398099){const _0x3e7163=a0_0x11d42e;if(this[_0x3e7163(0x85a)][_0x3e7163(0x70a)](this[_0x3e7163(0x7ec)]+'\x20('+this[_0x3e7163(0x22f)][_0x3e7163(0x3d9)]+_0x3e7163(0x2b4)),!_0x28fe07||!_0x398099)return this[_0x3e7163(0x85a)][_0x3e7163(0x7bf)](this[_0x3e7163(0x7ec)]+'\x20('+this[_0x3e7163(0x22f)][_0x3e7163(0x3d9)]+_0x3e7163(0x5e0)),null;let _0x424959=[];if(_0x398099[_0x3e7163(0x87a)][_0x3e7163(0x593)]()==='[all]'){let _0x191f28=['_sender',_0x3e7163(0x290),_0x3e7163(0x792),_0x3e7163(0x8d1),'_remoteJid',_0x3e7163(0x665),_0x3e7163(0x6ed)];_0x424959=Object[_0x3e7163(0x813)](_0x28fe07[_0x3e7163(0x24e)][_0x3e7163(0x83c)])[_0x3e7163(0x852)](_0x2e5ab7=>_0x2e5ab7[_0x3e7163(0x724)]('_')&&!_0x191f28['includes'](_0x2e5ab7));}else _0x424959=_0x398099[_0x3e7163(0x87a)][_0x3e7163(0x597)]('|')['map'](_0x4712b3=>(_0x4712b3=_0x4712b3[_0x3e7163(0x771)](/[{}]/g,'')[_0x3e7163(0x593)](),_0x4712b3['startsWith']('_')?_0x4712b3:'_'+_0x4712b3));let _0x49251c=[];_0x424959[_0x3e7163(0x46a)](_0x288366=>{const _0x1b0ace=_0x3e7163;_0x288366 in _0x28fe07['chatLog']['realVariables']&&(delete _0x28fe07[_0x1b0ace(0x24e)][_0x1b0ace(0x83c)][_0x288366],_0x49251c[_0x1b0ace(0x64a)](_0x288366));}),_0x49251c[_0x3e7163(0x57a)]>0x0?this[_0x3e7163(0x85a)][_0x3e7163(0x70a)](this[_0x3e7163(0x7ec)]+'\x20('+this[_0x3e7163(0x22f)][_0x3e7163(0x3d9)]+_0x3e7163(0x6fc)+_0x49251c[_0x3e7163(0x7f4)](',\x20')):this[_0x3e7163(0x85a)][_0x3e7163(0x70a)](this['instanceName']+'\x20('+this[_0x3e7163(0x22f)][_0x3e7163(0x3d9)]+_0x3e7163(0x35b));let _0x188d2e={'moreLogs':['Removidas\x20as\x20variáveis:\x20'+_0x49251c[_0x3e7163(0x7f4)](',\x20')]};return await this[_0x3e7163(0x41a)](_0x28fe07,_0x398099,_0x188d2e),null;}async[a0_0x11d42e(0x37d)](_0x4f1243,_0x44095a){const _0x12ab25=a0_0x11d42e;if(this[_0x12ab25(0x85a)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x12ab25(0x6b7)),!_0x4f1243||!_0x44095a)return this[_0x12ab25(0x85a)][_0x12ab25(0x7bf)](this[_0x12ab25(0x7ec)]+'\x20('+this[_0x12ab25(0x22f)][_0x12ab25(0x3d9)]+_0x12ab25(0x5e0)),null;let _0x478fb2=_0x4f1243[_0x12ab25(0x33f)];_0x44095a[_0x12ab25(0x396)][_0x12ab25(0x33f)]&&_0x44095a[_0x12ab25(0x396)]['remoteJid']['trim']()!==''&&(_0x478fb2=_0x44095a[_0x12ab25(0x1eb)]['remoteJid'][_0x12ab25(0x593)]());let _0x4c4c91=_0x44095a['scheduleFlow'][_0x12ab25(0x711)]*0xea60,_0x42c3db=Date[_0x12ab25(0x19e)]()+_0x4c4c91,_0x1e24d4={'status':_0x12ab25(0x614),'info':_0x12ab25(0x543)+_0x4f1243[_0x12ab25(0x414)],'remoteJids':[_0x478fb2],'when':_0x42c3db,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x12ab25(0x5b3),'flowName':_0x44095a[_0x12ab25(0x396)][_0x12ab25(0x3c3)]};this['editScheduleMessage'](_0x1e24d4);let _0x24d6dd=await this['NextBlock'](_0x4f1243);_0x24d6dd&&await this[_0x12ab25(0x233)](_0x4f1243,_0x24d6dd);}async[a0_0x11d42e(0x50d)](_0x3df954,_0x1ca202){const _0x5e83b3=a0_0x11d42e;if(this[_0x5e83b3(0x85a)]['verbose'](this[_0x5e83b3(0x7ec)]+'\x20('+this[_0x5e83b3(0x22f)][_0x5e83b3(0x3d9)]+_0x5e83b3(0x6df)),!_0x3df954||!_0x1ca202)return this[_0x5e83b3(0x85a)]['error'](this[_0x5e83b3(0x7ec)]+'\x20('+this[_0x5e83b3(0x22f)]['wuid']+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;await this[_0x5e83b3(0x41a)](_0x3df954,_0x1ca202,{},!0x0,!0x0);let _0x17ec29=_0x1ca202[_0x5e83b3(0x6b2)];_0x3df954=await this[_0x5e83b3(0x60b)](_0x17ec29,_0x3df954[_0x5e83b3(0x33f)],_0x3df954[_0x5e83b3(0x24e)][_0x5e83b3(0x83c)]);let _0x4837c5=await this[_0x5e83b3(0x4e2)](_0x3df954);_0x4837c5&&await this[_0x5e83b3(0x233)](_0x3df954,_0x4837c5);}async[a0_0x11d42e(0x60b)](_0x4c6dee,_0xce6e8a,_0x1ad5dd){const _0x14ffe8=a0_0x11d42e;this[_0x14ffe8(0x85a)]['verbose'](this[_0x14ffe8(0x7ec)]+'\x20('+this['instance'][_0x14ffe8(0x3d9)]+_0x14ffe8(0x662));try{let _0x533ae8=this[_0x14ffe8(0x747)][_0x14ffe8(0x814)][_0x14ffe8(0x6d7)](_0x33402b=>_0x33402b['_id']===_0x4c6dee);_0x533ae8||this['logger'][_0x14ffe8(0x7bf)](this[_0x14ffe8(0x7ec)]+'\x20('+this[_0x14ffe8(0x22f)][_0x14ffe8(0x3d9)]+'):\x20Flow\x20\x27'+_0x4c6dee+_0x14ffe8(0x556));let _0x27cecf=await this[_0x14ffe8(0x373)][_0x14ffe8(0x5b3)][_0x14ffe8(0x588)]({'where':{'_id':_0x533ae8['_id']}});if(!_0x27cecf||!_0x27cecf['whoCanUse']?.['includes'](this[_0x14ffe8(0x22f)][_0x14ffe8(0x3d9)]))throw this['logger'][_0x14ffe8(0x7bf)](this[_0x14ffe8(0x7ec)]+'\x20('+this['instance'][_0x14ffe8(0x3d9)]+_0x14ffe8(0x691)+_0x4c6dee+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x14ffe8(0x838)+_0x4c6dee+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x452a08=require('mongodb')['ObjectId'],_0x2a938d=Date[_0x14ffe8(0x19e)](),_0x5294e4=_0x14ffe8(0x47e),_0x17173f={},_0x53b004={},_0x15c79e=this[_0x14ffe8(0x747)][_0x14ffe8(0x814)][_0x14ffe8(0x6d7)](_0x5cf7d3=>_0x5cf7d3['_id']===_0x27cecf[_0x14ffe8(0x665)]?.['toString']()),_0x30a5b0=_0x15c79e?.[_0x14ffe8(0x6f6)]??_0x27cecf[_0x14ffe8(0x6f6)]??0x0,_0x3f7f29=_0x15c79e?.['readMessages']??_0x27cecf[_0x14ffe8(0x151)]??!0x1,_0xe79d75={'flowId':_0x533ae8[_0x14ffe8(0x665)],'readMessages':_0x533ae8[_0x14ffe8(0x151)],..._0x27cecf,'chatLog':null},_0xbdd30b={'lastReceivedMessage':_0x17173f,'lastSendMessage':_0x53b004,'lastBlockId':_0x5294e4,'lastCondition':!0x0,'realVariables':_0x1ad5dd};_0xe79d75[_0x14ffe8(0x24e)]=_0xbdd30b,_0xe79d75[_0x14ffe8(0x24e)][_0x14ffe8(0x83c)]={..._0x1ad5dd},delete _0xe79d75[_0x14ffe8(0x665)],_0xe79d75[_0x14ffe8(0x665)]=new _0x452a08(),_0xe79d75[_0x14ffe8(0x35f)]=_0x2a938d,_0xe79d75[_0x14ffe8(0x15d)]=_0x14ffe8(0x78a),_0xe79d75[_0x14ffe8(0x33f)]=_0xce6e8a,_0xe79d75[_0x14ffe8(0x6f6)]=_0x30a5b0,_0xe79d75[_0x14ffe8(0x151)]=_0x3f7f29;let _0x1ab3b6=await this['repository'][_0x14ffe8(0x713)][_0x14ffe8(0x793)](_0xe79d75[_0x14ffe8(0x665)],_0xe79d75,this['instance'][_0x14ffe8(0x3d9)]);return this[_0x14ffe8(0x85a)]['verbose'](this[_0x14ffe8(0x7ec)]+'\x20('+this[_0x14ffe8(0x22f)][_0x14ffe8(0x3d9)]+_0x14ffe8(0x2ac)),_0x1ab3b6?_0xe79d75:null;}catch(_0x120332){let _0x36f43b=_0x14ffe8(0x7ab),_0xa98d1a=_0x120332 instanceof Error?_0x120332[_0x14ffe8(0x5a8)]:typeof _0x120332=='object'?JSON[_0x14ffe8(0x7b9)](_0x120332):_0x120332,_0xe65335=_0x36f43b+':\x20'+_0xa98d1a;throw this['logger'][_0x14ffe8(0x7bf)](this[_0x14ffe8(0x7ec)]+'\x20('+this[_0x14ffe8(0x22f)][_0x14ffe8(0x3d9)]+_0x14ffe8(0x7bd)+_0xe65335),new m(_0xe65335);}}async['processApiRequest'](_0x450e81,_0x46d992){const _0x5687e3=a0_0x11d42e;let _0x27955c,_0x1a136c;try{let _0x4bdc48=_0x46d992[_0x5687e3(0x50e)];if(!_0x4bdc48||!_0x4bdc48[_0x5687e3(0x443)]||!_0x4bdc48[_0x5687e3(0x7e9)])throw new Error(_0x5687e3(0x6c9));let _0x257c6c;([_0x5687e3(0x343),_0x5687e3(0x22a),'https://api.elevenlabs.io/v1/text-to-speech/'][_0x5687e3(0x5f8)](_0x995f8c=>_0x4bdc48[_0x5687e3(0x443)][_0x5687e3(0x3ef)](_0x995f8c))||_0x4bdc48[_0x5687e3(0x531)])&&(_0x257c6c=_0x5687e3(0x457));let _0x21c551='\u205f',_0x3bf427;try{_0x3bf427=JSON['parse'](_0x4bdc48[_0x5687e3(0x2db)][_0x5687e3(0x771)](new RegExp(_0x21c551,'g'),''));}catch(_0x5ec718){throw _0x5ec718;}let _0x322fd0={'method':_0x4bdc48['method'],'url':_0x4bdc48['url'],'headers':_0x4bdc48[_0x5687e3(0x1d9)]||{},..._0x4bdc48[_0x5687e3(0x7e9)]['toUpperCase']()!=='GET'&&_0x4bdc48[_0x5687e3(0x2db)]?{'data':JSON[_0x5687e3(0x5c7)](_0x4bdc48[_0x5687e3(0x2db)][_0x5687e3(0x771)](new RegExp(_0x21c551,'g'),''))}:{},..._0x257c6c&&{'responseType':_0x257c6c}},_0x3543fd=await(0x0,K['default'])(_0x322fd0),_0x1192d3=_0x3543fd[_0x5687e3(0x335)][_0x5687e3(0x4d2)];if(_0x1192d3&&_0x1192d3[_0x5687e3(0x3ef)](_0x5687e3(0x6f2))||typeof _0x3543fd[_0x5687e3(0x57e)]==_0x5687e3(0x4fa)){if(typeof _0x3543fd[_0x5687e3(0x57e)]==_0x5687e3(0x4fa)){let _0x44e5ab=_0x3543fd[_0x5687e3(0x57e)]['replace'](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')['trim']();try{_0x27955c=JSON[_0x5687e3(0x5c7)](_0x44e5ab);}catch(_0xb199c5){this[_0x5687e3(0x85a)]['error'](_0x5687e3(0x2ae)+_0xb199c5['message']),_0x27955c={'_apiResponse':_0x3543fd['data']};}}else _0x27955c=_0x3543fd['data'];let _0x47d948=_0x450e81[_0x5687e3(0x24e)][_0x5687e3(0x83c)],_0x16c41a=this[_0x5687e3(0x8b8)](_0x27955c);return Object[_0x5687e3(0x7b3)](_0x47d948,_0x16c41a),_0x450e81[_0x5687e3(0x24e)]['realVariables']=_0x47d948,_0x1a136c={'error':!0x1,'apiResponse':_0x27955c},this['updateConversation'](_0x450e81,_0x46d992,_0x1a136c),_0x27955c;}if(_0x1192d3&&(_0x1192d3[_0x5687e3(0x3ef)](_0x5687e3(0x2c1))||_0x1192d3[_0x5687e3(0x3ef)]('image')||_0x1192d3['includes']('audio')||_0x1192d3['includes']('video'))){this[_0x5687e3(0x85a)]['verbose'](this[_0x5687e3(0x7ec)]+'\x20('+this[_0x5687e3(0x22f)]['wuid']+_0x5687e3(0x735)+_0x1192d3);let _0x5211e9=(0x0,Q['v4'])(),_0x3db291='',_0x2aa999={'image/jpeg':'.jpg','image/png':_0x5687e3(0x533),'image/gif':_0x5687e3(0x846),'image/webp':_0x5687e3(0x84e),'image/svg+xml':'.svg','audio/mpeg':_0x5687e3(0x67d),'audio/ogg':_0x5687e3(0x85c),'audio/wav':_0x5687e3(0x8b9),'video/mp4':'.mp4','video/webm':_0x5687e3(0x796),'video/ogg':'.ogv','text/plain':_0x5687e3(0x6ab),'application/pdf':_0x5687e3(0x6e8),'application/msword':_0x5687e3(0x625),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x5687e3(0x5f0),'application/vnd.ms-excel':_0x5687e3(0x555),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x5687e3(0x256),'application/vnd.ms-powerpoint':'.ppt','application/vnd.openxmlformats-officedocument.presentationml.presentation':'.pptx'};_0x2aa999[_0x1192d3]?(_0x3db291=_0x2aa999[_0x1192d3],this['logger']['verbose'](this[_0x5687e3(0x7ec)]+'\x20('+this[_0x5687e3(0x22f)]['wuid']+_0x5687e3(0x5b6)+_0x3db291)):(_0x3db291=_0x5687e3(0x8cb),this['logger'][_0x5687e3(0x70a)](this['instanceName']+'\x20('+this[_0x5687e3(0x22f)][_0x5687e3(0x3d9)]+_0x5687e3(0x585)+_0x3db291)),_0x5211e9+=_0x3db291,this['logger']['verbose'](this[_0x5687e3(0x7ec)]+'\x20('+this[_0x5687e3(0x22f)][_0x5687e3(0x3d9)]+'):\x20Nome\x20do\x20arquivo\x20gerado:\x20'+_0x5211e9);let _0x37c428=this[_0x5687e3(0x155)]['get'](_0x5687e3(0x65b))[_0x5687e3(0x3b0)];if(!_0x37c428){let _0x301775=this[_0x5687e3(0x155)][_0x5687e3(0x686)](_0x5687e3(0x836));_0x37c428='https://'+(_0x301775&&_0x301775[_0x5687e3(0x842)][_0x5687e3(0x597)]('/')[0x4]);}let _0x538198=Buffer[_0x5687e3(0x4dc)](_0x3543fd['data']);await this[_0x5687e3(0x3bc)](_0x538198,_0x5211e9);let _0x390a46=_0x5687e3(0x22c)+_0x5211e9;_0x390a46=''+_0x37c428+_0x390a46,_0x27955c={'fileUrl':_0x390a46},_0x450e81['chatLog'][_0x5687e3(0x83c)]['fileUrl']=_0x390a46;let _0x3091b0=_0x450e81[_0x5687e3(0x24e)][_0x5687e3(0x83c)],_0x598c09=this[_0x5687e3(0x8b8)](_0x27955c);return Object[_0x5687e3(0x7b3)](_0x3091b0,_0x598c09),_0x450e81[_0x5687e3(0x24e)][_0x5687e3(0x83c)]=_0x3091b0,_0x1a136c={'error':!0x1,'apiResponse':{'fileUrl':_0x390a46}},this[_0x5687e3(0x41a)](_0x450e81,_0x46d992,_0x1a136c),_0x27955c;}}catch(_0x5e4f93){this[_0x5687e3(0x85a)][_0x5687e3(0x7bf)]('Erro\x20ao\x20processar\x20a\x20chamada\x20API:'+_0x5e4f93[_0x5687e3(0x5a8)]),_0x5e4f93['response']&&(_0x27955c=_0x5e4f93[_0x5687e3(0x41c)]['data']);let _0xa27d0=_0x450e81['chatLog']['realVariables'],_0x187b95=this[_0x5687e3(0x8b8)](_0x27955c);return Object[_0x5687e3(0x7b3)](_0xa27d0,_0x187b95),_0x450e81['chatLog'][_0x5687e3(0x83c)]=_0xa27d0,_0x1a136c={'error':!0x0,'errorLog':_0x5e4f93[_0x5687e3(0x1d7)](),'apiResponse':_0x27955c},this[_0x5687e3(0x41a)](_0x450e81,_0x46d992,_0x1a136c),{'success':!0x1};}}[a0_0x11d42e(0x6b8)](_0x45990e,_0x54d160){const _0x4ef28e=a0_0x11d42e;let _0x2e63c6=_0x13c005=>{const _0x1e5eea=a0_0x2924;let _0x5226e5=_0x13c005[_0x1e5eea(0x771)](/[^0-9.,-]/g,'')[_0x1e5eea(0x771)](',','.'),_0x3b5548=parseFloat(_0x5226e5);return isNaN(_0x3b5548)?null:_0x3b5548;},_0x35dbda=_0x54d160['firstValue'],_0x3520bf=_0x54d160['secondValue'];typeof _0x35dbda==_0x4ef28e(0x4fa)&&(_0x35dbda=this['replaceVariables'](_0x35dbda,_0x45990e[_0x4ef28e(0x24e)]['realVariables'])??''),typeof _0x3520bf==_0x4ef28e(0x4fa)&&(_0x3520bf=this[_0x4ef28e(0x3a6)](_0x3520bf,_0x45990e[_0x4ef28e(0x24e)][_0x4ef28e(0x83c)])??'');let _0xfbd956=null;if(!_0x54d160[_0x4ef28e(0x757)])return null;switch(this[_0x4ef28e(0x85a)][_0x4ef28e(0x70a)](this[_0x4ef28e(0x7ec)]+'\x20('+this['instance'][_0x4ef28e(0x3d9)]+_0x4ef28e(0x7fb)+_0x35dbda),this[_0x4ef28e(0x85a)]['verbose'](this[_0x4ef28e(0x7ec)]+'\x20('+this[_0x4ef28e(0x22f)][_0x4ef28e(0x3d9)]+_0x4ef28e(0x6aa)+_0x3520bf),_0x54d160[_0x4ef28e(0x757)]){case'+':case'-':case'*':case'/':let _0x3170e8=_0x2e63c6(_0x35dbda||'0'),_0x27c438=_0x2e63c6(_0x3520bf||'0');if(_0x3170e8===null)return null;switch(_0x54d160[_0x4ef28e(0x757)]){case'+':_0xfbd956=_0x3170e8+(_0x27c438??0x0);break;case'-':_0xfbd956=_0x3170e8-(_0x27c438??0x0);break;case'*':_0xfbd956=_0x3170e8*(_0x27c438??0x1);break;case'/':_0x27c438!==0x0&&(_0xfbd956=_0x3170e8/(_0x27c438??0x1));break;}break;case _0x4ef28e(0x592):case _0x4ef28e(0x312):let _0x11643e=_0x3520bf,_0x4bb18a=_0x54d160[_0x4ef28e(0x43e)];if(typeof _0x4bb18a==_0x4ef28e(0x4fa)&&(_0x4bb18a=this['replaceVariables'](_0x4bb18a,_0x45990e[_0x4ef28e(0x24e)][_0x4ef28e(0x83c)])??''),_0x11643e&&_0x4bb18a!==void 0x0){let _0x5b17cd=_0x54d160['editOperator']===_0x4ef28e(0x592)?new RegExp(_0x11643e[_0x4ef28e(0x771)](/[-\/\\^$*+?.()|[\]{}]/g,_0x4ef28e(0x6a8)),'g'):new RegExp(_0x11643e,'g');_0xfbd956=_0x35dbda['replace'](_0x5b17cd,_0x4bb18a);}else console['warn'](_0x4ef28e(0x353));break;case _0x4ef28e(0x34a):_0xfbd956=_0x3520bf;break;case _0x4ef28e(0x5c8):let _0x2f7da1=_0x35dbda[_0x4ef28e(0x542)](new RegExp(_0x3520bf||''));_0xfbd956=_0x2f7da1?_0x2f7da1[0x0]:'';break;case _0x4ef28e(0x726):_0xfbd956=_0x35dbda['slice'](0x0,parseInt(_0x3520bf||'0'));break;case _0x4ef28e(0x668):let _0x1da51c=parseInt(_0x3520bf||'0');_0xfbd956=_0x35dbda[_0x4ef28e(0x39b)](_0x35dbda[_0x4ef28e(0x57a)]-_0x1da51c);break;case _0x4ef28e(0x5ec):let _0x40a642=_0x2e63c6(_0x35dbda),_0x315abe=parseInt(_0x3520bf||'0');_0x315abe=Math[_0x4ef28e(0x2ca)](_0x315abe),_0x40a642!==null?_0xfbd956=_0x40a642['toLocaleString']('pt-BR',{'minimumFractionDigits':_0x315abe,'maximumFractionDigits':_0x315abe}):(console[_0x4ef28e(0x4d4)](_0x4ef28e(0x578)+_0x35dbda),_0xfbd956=null);break;case _0x4ef28e(0x87d):let _0x317e4b=_0x2e63c6(_0x35dbda);_0x317e4b!==null?_0xfbd956=_0x317e4b['toLocaleString'](_0x4ef28e(0x20d),{'style':_0x4ef28e(0x81b),'currency':'BRL'}):(console[_0x4ef28e(0x4d4)](_0x4ef28e(0x30d)+_0x35dbda),_0xfbd956=null);break;case _0x4ef28e(0x3d3):_0xfbd956=_0x35dbda[_0x4ef28e(0x349)]();break;case _0x4ef28e(0x41f):_0xfbd956=_0x35dbda[_0x4ef28e(0x68f)]();break;case _0x4ef28e(0x624):_0xfbd956=_0x35dbda['split']('\x20')[_0x4ef28e(0x4f6)](_0x3c5a64=>_0x3c5a64[_0x4ef28e(0x307)](0x0)[_0x4ef28e(0x349)]()+_0x3c5a64['slice'](0x1)[_0x4ef28e(0x68f)]())['join']('\x20');break;case _0x4ef28e(0x2be):_0xfbd956=JSON['stringify'](_0x35dbda);break;case _0x4ef28e(0x2ed):_0xfbd956=_0x35dbda['trim']();break;default:_0xfbd956=_0x35dbda;}return _0xfbd956!==null?_0xfbd956[_0x4ef28e(0x1d7)]():null;}async[a0_0x11d42e(0x3e2)](_0x4bcf06,_0x5cd461){const _0x596029=a0_0x11d42e;try{let _0x401495=_0x4bcf06[_0x596029(0x6ff)]?.['filter'](_0x30991f=>_0x30991f[_0x596029(0x545)]===_0x5cd461[_0x596029(0x665)]?.[_0x596029(0x1d7)]())||[],_0x4730dc=_0x5cd461['saveVariable'],_0x3c8b68=null,_0x2be612=[],_0x509770=_0x4bcf06[_0x596029(0x24e)][_0x596029(0x83c)][_0x4730dc];_0x2be612[_0x596029(0x64a)]('Valor\x20inicial:\x20\x22'+_0x509770+'\x22');for(let _0x20d06b of _0x401495){_0x20d06b['firstValue']=_0x509770,_0x3c8b68=_0x20d06b[_0x596029(0x635)];let _0x5df69b;try{_0x5df69b=this[_0x596029(0x6b8)](_0x4bcf06,_0x20d06b);}catch(_0x53bfb0){this[_0x596029(0x85a)][_0x596029(0x7bf)]('Erro\x20ao\x20aplicar\x20varedit:\x20'+_0x53bfb0[_0x596029(0x5a8)]);continue;}if(_0x5df69b!==null){let _0x520c19='Operador:\x20\x22'+_0x20d06b[_0x596029(0x757)]+'\x22',_0x5af846=[_0x596029(0x87d),_0x596029(0x3d3),_0x596029(0x41f),_0x596029(0x624),_0x596029(0x2ed)];_0x20d06b[_0x596029(0x757)]==='findAndReplace'||_0x20d06b[_0x596029(0x757)]==='findAndReplaceRegex'?_0x520c19+=_0x596029(0x296)+_0x20d06b[_0x596029(0x5d8)]+_0x596029(0x21e)+_0x20d06b[_0x596029(0x43e)]+'\x22':!_0x5af846[_0x596029(0x3ef)](_0x20d06b[_0x596029(0x757)])&&_0x20d06b[_0x596029(0x5d8)]!==null&&_0x20d06b['secondValue']!==void 0x0&&(_0x520c19+=_0x596029(0x301)+_0x20d06b['secondValue']+'\x22'),_0x520c19+=',\x20resultado:\x20'+_0x5df69b+'.',_0x2be612['push'](_0x520c19);}_0x5df69b!==null&&(_0x509770=_0x5df69b);}if(_0x4bcf06[_0x596029(0x24e)][_0x596029(0x83c)]&&_0x5cd461[_0x596029(0x88b)]){_0x4bcf06[_0x596029(0x24e)][_0x596029(0x83c)][_0x5cd461[_0x596029(0x88b)]]=_0x509770;let _0x31235b={'variable':_0x5cd461['saveVariable'],'oldValue':_0x3c8b68,'newValue':_0x509770,'moreLogs':_0x2be612};try{this['updateConversation'](_0x4bcf06,_0x5cd461,_0x31235b);}catch(_0x659ee){this['logger'][_0x596029(0x7bf)](_0x596029(0x440)+_0x659ee['message']);}}return _0x4730dc;}catch(_0x4a60df){return this[_0x596029(0x85a)][_0x596029(0x7bf)](_0x596029(0x378)+_0x4a60df[_0x596029(0x5a8)]),null;}}async['processConditions'](_0x1bfbc3,_0x58c994){const _0x20985c=a0_0x11d42e;try{let _0x515e76=[],_0x19698e=_0x1bfbc3[_0x20985c(0x523)][_0x20985c(0x852)](_0x2fe3de=>_0x2fe3de['blockId']===_0x58c994['_id'][_0x20985c(0x1d7)]()),_0x4243ce=null,_0xaac688=!0x1;for(let _0x129aac of _0x19698e){let _0x37f8e2=this[_0x20985c(0x3f8)](_0x1bfbc3,_0x129aac);_0x515e76[_0x20985c(0x64a)](_0x20985c(0x858)+_0x129aac['firstValue']+',\x20Comparador:\x20'+_0x129aac[_0x20985c(0x4f3)]+_0x20985c(0x4e7)+_0x129aac[_0x20985c(0x5d8)]+',\x20Resultado:\x20'+_0x37f8e2),_0x4243ce===null?_0x4243ce=_0x37f8e2:_0x129aac['OrAnd']===_0x20985c(0x4fb)?(_0x4243ce=_0x4243ce&&_0x37f8e2,_0x37f8e2||(_0xaac688=!0x0)):_0x129aac['OrAnd']==='or'&&(_0xaac688||(_0x4243ce=_0x4243ce||_0x37f8e2));}_0x4243ce===null&&(_0x4243ce=!0x0);let _0x3d48dc={'moreLogs':_0x515e76};_0x1bfbc3[_0x20985c(0x24e)][_0x20985c(0x2d6)]=_0x4243ce,await this[_0x20985c(0x41a)](_0x1bfbc3,_0x58c994,_0x3d48dc);}catch(_0x39782f){this[_0x20985c(0x85a)][_0x20985c(0x7bf)](this[_0x20985c(0x7ec)]+'\x20('+this[_0x20985c(0x22f)]['wuid']+_0x20985c(0x4ad)+(_0x39782f instanceof Error?_0x39782f[_0x20985c(0x5a8)]:JSON[_0x20985c(0x7b9)](_0x39782f,null,0x2)));}}[a0_0x11d42e(0x3f8)](_0x39f0e9,_0x1f0c41){const _0xc402fb=a0_0x11d42e;let _0x32f2fb=_0x1f0c41['firstValue'],_0x104ac5=_0x1f0c41['secondValue'];typeof _0x32f2fb==_0xc402fb(0x4fa)&&(_0x32f2fb=this[_0xc402fb(0x3a6)](_0x32f2fb,_0x39f0e9[_0xc402fb(0x24e)][_0xc402fb(0x83c)])??''),typeof _0x104ac5==_0xc402fb(0x4fa)&&(_0x104ac5=this['replaceVariables'](_0x104ac5,_0x39f0e9[_0xc402fb(0x24e)][_0xc402fb(0x83c)])??'');try{switch(_0x1f0c41[_0xc402fb(0x4f3)]){case _0xc402fb(0x8b7):return _0x32f2fb===_0x104ac5;case'notEqual':return _0x32f2fb!==_0x104ac5;case _0xc402fb(0x513):return this[_0xc402fb(0x513)](_0x32f2fb,_0x104ac5);case _0xc402fb(0x483):return!this[_0xc402fb(0x513)](_0x32f2fb,_0x104ac5);case _0xc402fb(0x616):return parseFloat(_0x32f2fb)>parseFloat(_0x104ac5);case _0xc402fb(0x501):return parseFloat(_0x32f2fb)<parseFloat(_0x104ac5);case _0xc402fb(0x43b):return _0x32f2fb!=='';case _0xc402fb(0x1cf):return _0x32f2fb==='';case _0xc402fb(0x425):return new RegExp(_0x104ac5)[_0xc402fb(0x503)](_0x32f2fb);case _0xc402fb(0x8c9):return!new RegExp(_0x104ac5)[_0xc402fb(0x503)](_0x32f2fb);default:return!0x1;}}catch(_0x4cbac5){return this[_0xc402fb(0x85a)][_0xc402fb(0x7bf)](_0xc402fb(0x87c)+_0x4cbac5),!0x1;}}[a0_0x11d42e(0x513)](_0x187928,_0x3d9003){const _0x58c6c7=a0_0x11d42e;if(_0x187928===_0x3d9003&&/^\d+$/['test'](_0x187928))return!0x0;if(this[_0x58c6c7(0x46b)](_0x187928)&&/^\d+$/['test'](_0x3d9003)){let _0x5032df=_0x187928[_0x58c6c7(0x597)](',')[_0x58c6c7(0x4f6)](_0x2eb677=>parseInt(_0x2eb677[_0x58c6c7(0x593)]())),_0x26a4a6=parseInt(_0x3d9003);return _0x5032df[_0x58c6c7(0x3ef)](_0x26a4a6);}return _0x187928[_0x58c6c7(0x3ef)](_0x3d9003);}[a0_0x11d42e(0x46b)](_0xfa24c7){const _0x274ebd=a0_0x11d42e;return/^\d+(,\d+)*$/[_0x274ebd(0x503)](_0xfa24c7);}[a0_0x11d42e(0x32e)](_0x2584e5){const _0x565b12=a0_0x11d42e;let _0x593059=!0x0,_0x4a5863=null;for(let _0x29049f of _0x2584e5){let _0x4fc173=this[_0x565b12(0x61f)](_0x29049f);if(_0x4a5863==='or'&&_0x4fc173){_0x593059=!0x0;break;}if(_0x4a5863===_0x565b12(0x4fb)&&!_0x4fc173){_0x593059=!0x1;break;}_0x4a5863=_0x29049f[_0x565b12(0x749)];}return _0x593059;}['evaluateConditionTest'](_0x11f6ac){const _0x4d3548=a0_0x11d42e;let _0x38f78a=_0x11f6ac['firstValue'],_0x212477=_0x11f6ac[_0x4d3548(0x5d8)];try{switch(_0x11f6ac[_0x4d3548(0x4f3)]){case'equal':return String(_0x38f78a)===String(_0x212477);case'notEqual':return String(_0x38f78a)!==String(_0x212477);case _0x4d3548(0x513):return String(_0x38f78a)['includes'](String(_0x212477));case _0x4d3548(0x483):return!String(_0x38f78a)['includes'](String(_0x212477));case _0x4d3548(0x616):return parseFloat(String(_0x38f78a))>parseFloat(String(_0x212477));case _0x4d3548(0x501):return parseFloat(String(_0x38f78a))<parseFloat(String(_0x212477));case _0x4d3548(0x43b):return String(_0x38f78a)!=='';case _0x4d3548(0x1cf):return String(_0x38f78a)==='';case'matchRegex':return new RegExp(String(_0x212477))[_0x4d3548(0x503)](String(_0x38f78a));case'notMatchRegex':return!new RegExp(String(_0x212477))[_0x4d3548(0x503)](String(_0x38f78a));default:return!0x1;}}catch(_0x2a1cf6){return this['logger'][_0x4d3548(0x7bf)](_0x4d3548(0x87c)+_0x2a1cf6),!0x1;}}async[a0_0x11d42e(0x3f2)](_0x61e214,_0x2797fc){const _0x3658e8=a0_0x11d42e;if(this[_0x3658e8(0x85a)][_0x3658e8(0x70a)](this[_0x3658e8(0x7ec)]+'\x20('+this['instance']['wuid']+_0x3658e8(0x375)),!_0x61e214||!_0x2797fc)return this[_0x3658e8(0x85a)][_0x3658e8(0x7bf)](this['instanceName']+'\x20('+this[_0x3658e8(0x22f)][_0x3658e8(0x3d9)]+_0x3658e8(0x5e0)),null;let _0x2a602e=_0x61e214['chatLog']['lastReceivedMessage'][_0x3658e8(0x7af)]['id'];this['logger'][_0x3658e8(0x70a)](this[_0x3658e8(0x7ec)]+'\x20('+this[_0x3658e8(0x22f)][_0x3658e8(0x3d9)]+_0x3658e8(0x821)+_0x2a602e);let _0x3e8d88={'key':{'id':_0x2a602e}},_0x27fdd0=_0x2797fc[_0x3658e8(0x88b)];_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x83c)]['_'+_0x27fdd0+_0x3658e8(0x567)]=null,_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x83c)]['_'+_0x27fdd0+_0x3658e8(0x7d2)]=null,_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x83c)]['_'+_0x27fdd0+_0x3658e8(0x161)]=null,_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x83c)]['_'+_0x27fdd0+_0x3658e8(0x173)]=_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x482)][_0x3658e8(0x748)];try{let _0x1a62c6=await this[_0x3658e8(0x762)](_0x3e8d88);this[_0x3658e8(0x85a)][_0x3658e8(0x70a)](this['instanceName']+'\x20('+this[_0x3658e8(0x22f)][_0x3658e8(0x3d9)]+_0x3658e8(0x341)),_0x61e214['chatLog']['realVariables']['_'+_0x27fdd0+_0x3658e8(0x4b4)]=_0x1a62c6[_0x3658e8(0x752)],_0x61e214[_0x3658e8(0x24e)]['realVariables']['_'+_0x27fdd0+_0x3658e8(0x7d2)]=_0x1a62c6[_0x3658e8(0x23d)];let _0x20b143=_0x1a62c6[_0x3658e8(0x23d)][_0x3658e8(0x542)](/\/(\w+)$/),_0x450418=_0x20b143?_0x20b143[0x1]:null;_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x83c)]['_'+_0x27fdd0+_0x3658e8(0x161)]=_0x450418,this[_0x3658e8(0x85a)][_0x3658e8(0x70a)](this['instanceName']+'\x20('+this['instance'][_0x3658e8(0x3d9)]+_0x3658e8(0x6bb)+_0x27fdd0+'\x27.');}catch(_0x1e318e){this[_0x3658e8(0x85a)][_0x3658e8(0x7bf)](this[_0x3658e8(0x7ec)]+'\x20('+this[_0x3658e8(0x22f)]['wuid']+'):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20'+_0x1e318e['message']);}let _0x48a39c=_0x61e214[_0x3658e8(0x24e)]['lastReceivedMessage'][_0x3658e8(0x8b3)]||_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x482)]['caption']||_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x482)][_0x3658e8(0x395)];try{_0x61e214['chatLog'][_0x3658e8(0x83c)]||(_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x83c)]={});let _0x5956ad=_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x83c)][_0x27fdd0];_0x61e214[_0x3658e8(0x24e)][_0x3658e8(0x83c)][_0x27fdd0]=_0x48a39c;let _0x46316c={'variable':_0x27fdd0,'oldValue':_0x5956ad,'newValue':_0x48a39c};this[_0x3658e8(0x41a)](_0x61e214,_0x2797fc,_0x46316c),this[_0x3658e8(0x85a)][_0x3658e8(0x70a)](this[_0x3658e8(0x7ec)]+'\x20('+this[_0x3658e8(0x22f)][_0x3658e8(0x3d9)]+_0x3658e8(0x1b5));}catch(_0x50f4cd){let _0x2cd074={'error':!0x0,'errorLog':_0x50f4cd[_0x3658e8(0x1d7)]()};return this[_0x3658e8(0x41a)](_0x61e214,_0x2797fc,_0x2cd074),this[_0x3658e8(0x85a)][_0x3658e8(0x7bf)](this[_0x3658e8(0x7ec)]+'\x20('+this[_0x3658e8(0x22f)][_0x3658e8(0x3d9)]+'):\x20Erro\x20durante\x20a\x20atualização:\x20'+(_0x50f4cd instanceof Error?_0x50f4cd[_0x3658e8(0x5a8)]:JSON[_0x3658e8(0x7b9)](_0x50f4cd,null,0x2))),null;}}async[a0_0x11d42e(0x308)](_0x59b5bf,_0x49ac49){const _0x4bd555=a0_0x11d42e;if(this['logger'][_0x4bd555(0x70a)](this[_0x4bd555(0x7ec)]+'\x20('+this[_0x4bd555(0x22f)][_0x4bd555(0x3d9)]+_0x4bd555(0x475)),!_0x59b5bf||!_0x49ac49)return this[_0x4bd555(0x85a)]['error'](this[_0x4bd555(0x7ec)]+'\x20('+this[_0x4bd555(0x22f)][_0x4bd555(0x3d9)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x39974a=Date[_0x4bd555(0x19e)](),_0x44fbcd=parseInt(_0x49ac49[_0x4bd555(0x1c4)],0xa);if(isNaN(_0x44fbcd))return this[_0x4bd555(0x85a)][_0x4bd555(0x7bf)](this[_0x4bd555(0x7ec)]+'\x20('+this[_0x4bd555(0x22f)][_0x4bd555(0x3d9)]+'):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número'),null;let _0x173ae4={'newStoppedUntil':_0x39974a+_0x44fbcd*0x3c*0x3e8};return await this['updateConversation'](_0x59b5bf,_0x49ac49,_0x173ae4,!0x0),null;}async[a0_0x11d42e(0x415)](_0x44a984,_0x3a6db5){const _0x10c90f=a0_0x11d42e;try{switch(_0x3a6db5[_0x10c90f(0x1eb)][_0x10c90f(0x34c)]){case _0x10c90f(0x8bd):await this[_0x10c90f(0x12c)](_0x44a984,_0x3a6db5);break;case _0x10c90f(0x881):await this[_0x10c90f(0x548)](_0x44a984,_0x3a6db5);break;case _0x10c90f(0x819):await this[_0x10c90f(0x7b8)](_0x44a984,_0x3a6db5);break;case _0x10c90f(0x782):await this[_0x10c90f(0x67a)](_0x44a984,_0x3a6db5);break;case _0x10c90f(0x3a1):await this[_0x10c90f(0x7de)](_0x44a984,_0x3a6db5);break;case _0x10c90f(0x442):await this[_0x10c90f(0x5f5)](_0x44a984,_0x3a6db5);break;case'sendMenu':await this[_0x10c90f(0x5f5)](_0x44a984,_0x3a6db5);break;case'deleteMessage':await this['uazapiDeleteMessage'](_0x44a984,_0x3a6db5);break;default:this['logger']['error'](this[_0x10c90f(0x7ec)]+'\x20('+this[_0x10c90f(0x22f)]['wuid']+'):\x20Comando\x20desconhecido:\x20'+_0x3a6db5['uazapi'][_0x10c90f(0x34c)]);}}catch(_0x5ae86a){this[_0x10c90f(0x85a)][_0x10c90f(0x7bf)](this[_0x10c90f(0x7ec)]+'\x20('+this[_0x10c90f(0x22f)]['wuid']+'):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20'+(_0x5ae86a instanceof Error?_0x5ae86a[_0x10c90f(0x5a8)]:JSON[_0x10c90f(0x7b9)](_0x5ae86a,null,0x2)));}}async['updateConversation'](_0x57b7cb,_0x36e553,_0x55a81f,_0x5ae8d8=!0x1,_0x40d555=!0x1){const _0x3f7b0c=a0_0x11d42e;_0x57b7cb[_0x3f7b0c(0x24e)]['blockLogs']||(_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x272)]=[]);let _0x3199bc=(_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x272)]?.[_0x3f7b0c(0x57a)]??0x0)+0x1,_0x52788b=_0x57b7cb[_0x3f7b0c(0x24e)]['blockLogs'][_0x3f7b0c(0x852)](_0xda323c=>String(_0xda323c[_0x3f7b0c(0x545)])===String(_0x36e553[_0x3f7b0c(0x665)]))['length']+0x1,_0x5cb7ef=_0x55a81f?.[_0x3f7b0c(0x3f4)]??Date['now'](),_0x25a641=_0x55a81f?.[_0x3f7b0c(0x7bf)]?_0x55a81f['errorLog']??_0x55a81f[_0x3f7b0c(0x7bf)]['toString']():void 0x0,_0x4a4d9e={'onTime':_0x5cb7ef,'blockId':_0x36e553[_0x3f7b0c(0x665)],'order':_0x3199bc,'activatedCount':_0x52788b,'error':_0x55a81f?.['error']??!0x1,'messageId':_0x55a81f?.[_0x3f7b0c(0x4f8)],'apiResponse':_0x55a81f?.[_0x3f7b0c(0x406)],'apiResponseString':_0x55a81f?.['apiResponse']?JSON[_0x3f7b0c(0x7b9)](_0x55a81f?.[_0x3f7b0c(0x406)]):void 0x0,'variable':_0x55a81f?.[_0x3f7b0c(0x128)],'oldValue':_0x55a81f?.[_0x3f7b0c(0x755)],'newValue':_0x55a81f?.[_0x3f7b0c(0x132)],'newStoppedUntil':_0x55a81f?.[_0x3f7b0c(0x53e)],'moreLogs':_0x55a81f?.[_0x3f7b0c(0x26c)],'errorLog':_0x25a641};if(_0x55a81f[_0x3f7b0c(0x26c)]&&_0x55a81f[_0x3f7b0c(0x26c)][_0x3f7b0c(0x57a)]>0x0){let _0x4a2969=_0x55a81f['moreLogs']['map'](_0x512a19=>this[_0x3f7b0c(0x336)](_0x512a19,_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x83c)]));_0x4a4d9e[_0x3f7b0c(0x26c)]=_0x4a2969;}if(_0x57b7cb[_0x3f7b0c(0x24e)]['realVariables']||(_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x83c)]={}),_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x83c)][_0x3f7b0c(0x265)]=String(_0x52788b),_0x57b7cb['chatLog'][_0x3f7b0c(0x83c)][_0x3f7b0c(0x792)]=String(_0x55a81f['error']??!0x1),_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x272)]['push'](_0x4a4d9e),_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x83c)][_0x3f7b0c(0x1a8)]&&_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x83c)][_0x3f7b0c(0x1a8)]!==_0x57b7cb['remoteJid']){let _0x3ad77c=(await this['whatsappNumber']({'numbers':[_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x83c)]['telefone']]}))[0x0]['jid'];_0x57b7cb[_0x3f7b0c(0x24e)]['realVariables']['telefone']=_0x3ad77c,_0x57b7cb[_0x3f7b0c(0x33f)]=_0x3ad77c;try{let _0x4a8cce={'_id':{'$ne':_0x57b7cb[_0x3f7b0c(0x665)]},'remoteJid':_0x3ad77c,'status':_0x3f7b0c(0x78a)},_0x2b31b2={'status':_0x3f7b0c(0x798)};await this[_0x3f7b0c(0x373)]['flowConversation'][_0x3f7b0c(0x6e6)](_0x4a8cce,_0x2b31b2,this[_0x3f7b0c(0x22f)]['wuid']),this[_0x3f7b0c(0x85a)][_0x3f7b0c(0x70a)](this['instanceName']+'\x20('+this[_0x3f7b0c(0x22f)][_0x3f7b0c(0x3d9)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.');}catch(_0x338e83){this[_0x3f7b0c(0x85a)][_0x3f7b0c(0x7bf)](this[_0x3f7b0c(0x7ec)]+'\x20('+this[_0x3f7b0c(0x22f)][_0x3f7b0c(0x3d9)]+_0x3f7b0c(0x7d4)+_0x338e83['message']);}try{let _0x5a8c1e=_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x83c)],_0x4c26c0=await this['getVariablesChat'](_0x3ad77c),_0xccd930={..._0x5a8c1e,..._0x4c26c0,'_remoteJid':_0x3ad77c};_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x83c)]=_0xccd930;}catch(_0x448e9b){this['logger']['error'](this[_0x3f7b0c(0x7ec)]+'\x20('+this[_0x3f7b0c(0x22f)][_0x3f7b0c(0x3d9)]+_0x3f7b0c(0x729)+_0x448e9b[_0x3f7b0c(0x5a8)]);}}_0x57b7cb[_0x3f7b0c(0x24e)]['lastBlockId']=_0x36e553[_0x3f7b0c(0x665)]['toString'](),_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x696)]&&(_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x696)]=_0x57b7cb['chatLog'][_0x3f7b0c(0x696)]),_0x57b7cb[_0x3f7b0c(0x24e)]['lastReceivedMessage']&&(_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x482)]=_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x482)]),_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x2d6)]&&(_0x57b7cb['chatLog'][_0x3f7b0c(0x2d6)]=_0x57b7cb[_0x3f7b0c(0x24e)][_0x3f7b0c(0x2d6)]),_0x40d555&&(_0x57b7cb[_0x3f7b0c(0x15d)]='closed'),_0x5ae8d8?this[_0x3f7b0c(0x5aa)](_0x57b7cb):this[_0x3f7b0c(0x699)](_0x57b7cb,_0x36e553);}[a0_0x11d42e(0x336)](_0x3aaeb6,_0x2240c1){const _0xd77fbc=a0_0x11d42e;return _0x3aaeb6[_0xd77fbc(0x771)](/\{\{([^}]+)\}\}/g,(_0x396d61,_0x44ac8a)=>_0x2240c1[_0x44ac8a]?'{{'+_0x44ac8a+_0xd77fbc(0x7dd)+_0x2240c1[_0x44ac8a]+'\x22':'{{'+_0x44ac8a+_0xd77fbc(0x1d0));}async[a0_0x11d42e(0x5aa)](_0x16d733){const _0x4874ce=a0_0x11d42e;try{let _0x1ef590=Object[_0x4874ce(0x575)](_0x16d733[_0x4874ce(0x24e)][_0x4874ce(0x83c)])['map'](([_0x3bbe86,_0x1d1fd6])=>({'name':_0x3bbe86,'value':_0x1d1fd6})),_0x18e519={'status':_0x16d733[_0x4874ce(0x15d)],'remoteJid':_0x16d733['remoteJid'],'blocks':_0x16d733[_0x4874ce(0x23f)],'waitingMenu_id':_0x16d733[_0x4874ce(0x1ce)],'waitingMenu_text':_0x16d733[_0x4874ce(0x87b)],'waitingMenu_replyOptions':_0x16d733[_0x4874ce(0x3ca)],'chatLog':{'lastBlockId':_0x16d733['chatLog'][_0x4874ce(0x8c3)],'lastSendMessage':_0x16d733[_0x4874ce(0x24e)][_0x4874ce(0x696)],'lastReceivedMessage':_0x16d733['chatLog'][_0x4874ce(0x482)],'lastCondition':_0x16d733['chatLog'][_0x4874ce(0x2d6)],'chatVariables':_0x1ef590,'realVariables':_0x16d733['chatLog'][_0x4874ce(0x83c)],'blockLogs':_0x16d733[_0x4874ce(0x24e)]['blockLogs']}},_0x462f24=await this['repository'][_0x4874ce(0x713)][_0x4874ce(0x793)](_0x16d733[_0x4874ce(0x665)],_0x18e519,this[_0x4874ce(0x22f)][_0x4874ce(0x3d9)]);if(_0x462f24){this[_0x4874ce(0x85a)]['verbose'](this['instanceName']+'\x20('+this[_0x4874ce(0x22f)]['wuid']+_0x4874ce(0x845)+_0x462f24[_0x4874ce(0x665)]);try{let _0x4ef00c=[_0x4874ce(0x2b3),_0x4874ce(0x283),_0x4874ce(0x140),_0x4874ce(0x268),_0x4874ce(0x15d),_0x4874ce(0x42d),_0x4874ce(0x36f),_0x4874ce(0x2ba),_0x4874ce(0x535),'atendimentoAberto'];if(!this[_0x4874ce(0x747)]&&(await this['getAutomateSystem'](),!this[_0x4874ce(0x747)]))throw new Error(_0x4874ce(0x2d5));let _0x365d44=this['AutomateSystem']?.[_0x4874ce(0x5c4)][_0x4874ce(0x4f6)](_0x264d13=>_0x264d13['name']),_0x542de4={};Object[_0x4874ce(0x575)](_0x16d733['chatLog'][_0x4874ce(0x83c)])[_0x4874ce(0x46a)](([_0x24560e,_0x2ebe55])=>{const _0x444e09=_0x4874ce;_0x4ef00c['includes'](_0x24560e)&&(_0x24560e===_0x444e09(0x2ba)&&typeof _0x2ebe55==_0x444e09(0x4fa)?_0x542de4[_0x24560e]=_0x2ebe55[_0x444e09(0x597)](',')[_0x444e09(0x4f6)](_0x332e07=>_0x332e07[_0x444e09(0x593)]())['filter'](_0x4c6f5f=>_0x4c6f5f!==''):_0x24560e===_0x444e09(0x535)&&typeof _0x2ebe55==_0x444e09(0x4fa)?_0x542de4[_0x24560e]=_0x2ebe55[_0x444e09(0x597)](',')[_0x444e09(0x4f6)](_0x53f947=>_0x53f947[_0x444e09(0x593)]())[_0x444e09(0x852)](_0x2ed59b=>_0x2ed59b!==''):_0x542de4[_0x24560e]=_0x2ebe55);});let _0x2310fa=_0x16d733[_0x4874ce(0x24e)]['blockLogs'][_0x16d733['chatLog'][_0x4874ce(0x272)][_0x4874ce(0x57a)]-0x1];if(_0x2310fa){let _0x3585ab=_0x2310fa[_0x4874ce(0x53e)];_0x3585ab!==void 0x0&&(_0x542de4['desativadoFluxoAte']=_0x3585ab['toString']());}let _0x67e600=_0x1ef590['filter'](_0x53b5da=>_0x365d44[_0x4874ce(0x3ef)](_0x53b5da[_0x4874ce(0x414)]));this[_0x4874ce(0x85a)]['verbose'](this['instanceName']+'\x20('+this[_0x4874ce(0x22f)][_0x4874ce(0x3d9)]+_0x4874ce(0x800)),this[_0x4874ce(0x85a)][_0x4874ce(0x70a)](_0x542de4),this[_0x4874ce(0x85a)]['verbose'](this[_0x4874ce(0x7ec)]+'\x20('+this[_0x4874ce(0x22f)]['wuid']+_0x4874ce(0x868)),this[_0x4874ce(0x85a)][_0x4874ce(0x70a)](_0x67e600);let _0x4f0498=_0x67e600['map'](_0x15ddae=>{const _0x2d6066=_0x4874ce;let _0x19806c=this[_0x2d6066(0x747)]?.[_0x2d6066(0x5c4)][_0x2d6066(0x6d7)](_0x172a76=>_0x172a76[_0x2d6066(0x414)]===_0x15ddae[_0x2d6066(0x414)]);if(!_0x19806c)throw new Error(_0x2d6066(0x198)+_0x15ddae[_0x2d6066(0x414)]);return{'_id':_0x19806c['_id'],'value':_0x15ddae[_0x2d6066(0x49c)]};});this[_0x4874ce(0x85a)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x4874ce(0x3d9)]+_0x4874ce(0x40a)),this['logger'][_0x4874ce(0x70a)](_0x4f0498),await this[_0x4874ce(0x369)](_0x16d733['remoteJid'],_0x542de4,_0x4f0498);}catch(_0x2ff790){this[_0x4874ce(0x85a)][_0x4874ce(0x7bf)](this[_0x4874ce(0x7ec)]+'\x20('+this['instance'][_0x4874ce(0x3d9)]+_0x4874ce(0x366)+(_0x2ff790 instanceof Error?_0x2ff790['message']:JSON[_0x4874ce(0x7b9)](_0x2ff790,null,0x2)));}}else this['logger'][_0x4874ce(0x7bf)](this[_0x4874ce(0x7ec)]+'\x20('+this[_0x4874ce(0x22f)]['wuid']+_0x4874ce(0x300));}catch(_0x51931f){this[_0x4874ce(0x85a)][_0x4874ce(0x7bf)](this[_0x4874ce(0x7ec)]+'\x20('+this[_0x4874ce(0x22f)][_0x4874ce(0x3d9)]+_0x4874ce(0x404)+(_0x51931f instanceof Error?_0x51931f[_0x4874ce(0x5a8)]:JSON[_0x4874ce(0x7b9)](_0x51931f,null,0x2)));}}async[a0_0x11d42e(0x369)](_0x398c11,_0x28691e,_0x4ceaaa){const _0x5d2a98=a0_0x11d42e;try{let _0x5dc9a2={'leadInfo.leadnome':_0x28691e[_0x5d2a98(0x2b3)],'leadInfo.nomecompleto':_0x28691e[_0x5d2a98(0x283)],'leadInfo.email':_0x28691e[_0x5d2a98(0x140)],'leadInfo.cpf':_0x28691e[_0x5d2a98(0x268)],'leadInfo.status':_0x28691e[_0x5d2a98(0x15d)],'leadInfo.notas':_0x28691e[_0x5d2a98(0x42d)],'leadInfo.responsavelid':_0x28691e[_0x5d2a98(0x36f)],'leadInfo.tags':_0x28691e[_0x5d2a98(0x2ba)],'leadInfo.etiquetas':_0x28691e[_0x5d2a98(0x535)],'leadInfo.customFields':_0x4ceaaa,'leadInfo.atendimentoAberto':_0x28691e[_0x5d2a98(0x55f)]},_0x39ceac=await this[_0x5d2a98(0x373)][_0x5d2a98(0x7fa)]['findOne']({'where':{'_id':_0x398c11}},this[_0x5d2a98(0x22f)][_0x5d2a98(0x3d9)]);if(!_0x39ceac)return _0x5d2a98(0x391);let _0x2bdd2d=new Set(_0x39ceac[_0x5d2a98(0x7df)]['etiquetas']||[]),_0x1b3a52=new Set(_0x28691e[_0x5d2a98(0x535)]||[]),_0x37cdb2=await this[_0x5d2a98(0x373)][_0x5d2a98(0x1dd)][_0x5d2a98(0x6d7)]({'where':{}},this[_0x5d2a98(0x22f)][_0x5d2a98(0x3d9)]),_0x4445a5=new Set(_0x37cdb2[_0x5d2a98(0x4f6)](_0x319df8=>_0x319df8[_0x5d2a98(0x665)])),_0x17b158=[..._0x1b3a52][_0x5d2a98(0x852)](_0x9bb8c=>!_0x2bdd2d['has'](_0x9bb8c)&&_0x4445a5[_0x5d2a98(0x51e)](_0x9bb8c)),_0x1ed2cf=[..._0x2bdd2d][_0x5d2a98(0x852)](_0x1f3af2=>!_0x1b3a52[_0x5d2a98(0x51e)](_0x1f3af2));for(let _0x4e81b4 of _0x17b158)await this[_0x5d2a98(0x154)](_0x4e81b4,_0x39ceac[_0x5d2a98(0x665)]),_0x2bdd2d[_0x5d2a98(0x277)](_0x4e81b4);for(let _0x329ef3 of _0x1ed2cf)await this[_0x5d2a98(0x423)](_0x329ef3,_0x39ceac[_0x5d2a98(0x665)]),_0x2bdd2d[_0x5d2a98(0x165)](_0x329ef3);if(_0x5d2a98(0x72d)in _0x28691e){let _0x31edbe=_0x28691e[_0x5d2a98(0x72d)];_0x5dc9a2[_0x5d2a98(0x541)]=_0x31edbe?Number(_0x31edbe):null;}if(_0x5d2a98(0x55f)in _0x28691e){let _0x1d619b=_0x28691e[_0x5d2a98(0x55f)][_0x5d2a98(0x68f)]();_0x5dc9a2[_0x5d2a98(0x844)]=_0x1d619b===_0x5d2a98(0x860)||_0x1d619b==='1'||_0x1d619b===_0x5d2a98(0x8ca)||_0x1d619b===_0x5d2a98(0x4ca);}let _0x3e2b8b=await this['repository'][_0x5d2a98(0x7fa)][_0x5d2a98(0x793)]({'where':{'_id':_0x398c11}},_0x5dc9a2,this['instance']['wuid']);_0x3e2b8b?(this[_0x5d2a98(0x85a)][_0x5d2a98(0x70a)](this['instanceName']+'\x20('+this[_0x5d2a98(0x22f)][_0x5d2a98(0x3d9)]+_0x5d2a98(0x186)+_0x3e2b8b[_0x5d2a98(0x665)]),F(this[_0x5d2a98(0x7ec)],_0x5d2a98(0x177),{'chat':_0x3e2b8b})):this[_0x5d2a98(0x85a)]['error'](this[_0x5d2a98(0x7ec)]+'\x20('+this[_0x5d2a98(0x22f)][_0x5d2a98(0x3d9)]+_0x5d2a98(0x795));}catch(_0x3d1255){this['logger'][_0x5d2a98(0x7bf)](this[_0x5d2a98(0x7ec)]+'\x20('+this['instance'][_0x5d2a98(0x3d9)]+'):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20'+(_0x3d1255 instanceof Error?_0x3d1255['message']:JSON[_0x5d2a98(0x7b9)](_0x3d1255,null,0x2)));}}async[a0_0x11d42e(0x518)](_0x481a65,_0xf42569){const _0x4da7cd=a0_0x11d42e;this['logger'][_0x4da7cd(0x70a)](this[_0x4da7cd(0x7ec)]+'\x20('+this[_0x4da7cd(0x22f)]['wuid']+'):\x20atualização\x20chat:\x20'+_0xf42569);try{let _0x5c7143=await this[_0x4da7cd(0x373)][_0x4da7cd(0x7fa)]['updateOne']({'where':{'_id':_0x481a65['remoteJid']}},{'leadInfo.desativadoFluxoAte':_0xf42569},this[_0x4da7cd(0x22f)][_0x4da7cd(0x3d9)]);this[_0x4da7cd(0x85a)][_0x4da7cd(0x70a)](this[_0x4da7cd(0x7ec)]+'\x20('+this[_0x4da7cd(0x22f)][_0x4da7cd(0x3d9)]+_0x4da7cd(0x4b0)+_0x481a65[_0x4da7cd(0x665)]),this[_0x4da7cd(0x85a)][_0x4da7cd(0x70a)](this[_0x4da7cd(0x7ec)]+'\x20('+this[_0x4da7cd(0x22f)][_0x4da7cd(0x3d9)]+_0x4da7cd(0x89f)+JSON[_0x4da7cd(0x7b9)](_0x5c7143,null,0x2)),_0x5c7143&&F(this['instanceName'],_0x4da7cd(0x177),{'chat':_0x5c7143});}catch(_0x4f29e6){this[_0x4da7cd(0x85a)][_0x4da7cd(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x4da7cd(0x3d9)]+_0x4da7cd(0x4a9)+(_0x4f29e6 instanceof Error?_0x4f29e6['message']:JSON[_0x4da7cd(0x7b9)](_0x4f29e6,null,0x2)));}}async[a0_0x11d42e(0x69c)](_0x29ee14){const _0x1ebe97=a0_0x11d42e;try{this[_0x1ebe97(0x85a)]['verbose'](this[_0x1ebe97(0x7ec)]+'\x20('+this[_0x1ebe97(0x22f)][_0x1ebe97(0x3d9)]+_0x1ebe97(0x676));let _0x253aa5=_0x29ee14['replace'](/\D/g,''),_0x2e6a8a=this[_0x1ebe97(0x747)]['flows'][_0x1ebe97(0x6d7)](_0x25ff2b=>_0x25ff2b[_0x1ebe97(0x8be)]===_0x253aa5);if(_0x2e6a8a||(this['logger'][_0x1ebe97(0x70a)](this[_0x1ebe97(0x7ec)]+'\x20('+this[_0x1ebe97(0x22f)]['wuid']+_0x1ebe97(0x56a)),_0x2e6a8a=this[_0x1ebe97(0x747)][_0x1ebe97(0x814)]['find'](_0x2f4b18=>_0x2f4b18['default']===!0x0)),!_0x2e6a8a)return this[_0x1ebe97(0x85a)][_0x1ebe97(0x70a)](this[_0x1ebe97(0x7ec)]+'\x20('+this[_0x1ebe97(0x22f)]['wuid']+_0x1ebe97(0x7ef)),null;let _0x2a0965=await this['repository'][_0x1ebe97(0x5b3)][_0x1ebe97(0x588)]({'where':{'_id':_0x2e6a8a[_0x1ebe97(0x665)]}});if(!_0x2a0965||!_0x2a0965['whoCanUse']?.['includes'](this[_0x1ebe97(0x22f)][_0x1ebe97(0x3d9)]))throw this['logger'][_0x1ebe97(0x7bf)](this[_0x1ebe97(0x7ec)]+'\x20('+this[_0x1ebe97(0x22f)]['wuid']+_0x1ebe97(0x691)+_0x2a0965['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x1ebe97(0x838)+_0x2a0965[_0x1ebe97(0x665)]+_0x1ebe97(0x552));return _0x2a0965;}catch(_0xba68b0){return this[_0x1ebe97(0x85a)][_0x1ebe97(0x7bf)](this[_0x1ebe97(0x7ec)]+'\x20('+this[_0x1ebe97(0x22f)]['wuid']+_0x1ebe97(0x24a)+(_0xba68b0 instanceof Error?_0xba68b0[_0x1ebe97(0x5a8)]:JSON[_0x1ebe97(0x7b9)](_0xba68b0,null,0x2))),null;}}async[a0_0x11d42e(0x598)](_0x4d3e18,_0x277170){const _0x22e55e=a0_0x11d42e;try{let _0x244ad3=!!_0x277170[_0x22e55e(0x395)],_0x161ed8=_0x277170[_0x22e55e(0x579)],_0x28a423=null;if(this['logger'][_0x22e55e(0x70a)](this[_0x22e55e(0x7ec)]+'\x20('+this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]+_0x22e55e(0x340)+_0x244ad3+'\x20quoted:\x20'+_0x161ed8),_0x244ad3){this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x22e55e(0x3d9)]+'):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto');let _0x426aac={'where':{'remoteJid':_0x4d3e18,'waitingMenu_id':_0x161ed8}};if(_0x28a423=await this[_0x22e55e(0x373)]['flowConversation']['findOne'](_0x426aac,this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]),!_0x28a423)return this[_0x22e55e(0x85a)][_0x22e55e(0x70a)](this['instanceName']+'\x20('+this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]+_0x22e55e(0x13a)),null;let _0x45fa16=Date[_0x22e55e(0x19e)](),_0x1d780a=_0x28a423?.[_0x22e55e(0x6f6)]||0x0,_0x4bea3b=_0x45fa16-_0x1d780a*0x3c*0x3e8;if(_0x28a423[_0x22e55e(0x35f)]<_0x4bea3b){this[_0x22e55e(0x85a)][_0x22e55e(0x70a)](this[_0x22e55e(0x7ec)]+'\x20('+this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]+_0x22e55e(0x273));let _0x2e6e21={'number':_0x28a423[_0x22e55e(0x33f)],'options':{'delay':0x0},'textMessage':{'text':_0x28a423[_0x22e55e(0x7a3)]}};await this[_0x22e55e(0x78c)](_0x2e6e21);let _0x47d565={'status':_0x22e55e(0x798),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x22e55e(0x373)]['flowConversation'][_0x22e55e(0x793)](_0x28a423[_0x22e55e(0x665)],_0x47d565,this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]),null;}return _0x28a423[_0x22e55e(0x35f)]=Date[_0x22e55e(0x19e)](),_0x28a423['chatLog'][_0x22e55e(0x482)]=_0x277170,_0x28a423;}else{this['logger'][_0x22e55e(0x70a)](this['instanceName']+'\x20('+this[_0x22e55e(0x22f)]['wuid']+_0x22e55e(0x7bd)+this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]+_0x22e55e(0x66e)),this['logger'][_0x22e55e(0x70a)](this[_0x22e55e(0x7ec)]+'\x20('+this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]+_0x22e55e(0x63d));let _0x4af19f={'where':{'remoteJid':_0x4d3e18,'status':'open'}};if(_0x28a423=await this[_0x22e55e(0x373)]['flowConversation']['findOne'](_0x4af19f,this['instance'][_0x22e55e(0x3d9)]),!_0x28a423){let _0x50b0d0=await this[_0x22e55e(0x69c)](_0x4d3e18);if(_0x50b0d0&&(_0x28a423=await this[_0x22e55e(0x4f7)](_0x50b0d0,_0x277170[_0x22e55e(0x7af)],_0x277170)),!_0x28a423)return null;}let _0x3668a8=Date[_0x22e55e(0x19e)](),_0x19d166=_0x28a423?.[_0x22e55e(0x6f6)]||0x0,_0x2ab14d=_0x3668a8-_0x19d166*0x3c*0x3e8;if(this[_0x22e55e(0x85a)][_0x22e55e(0x70a)](this[_0x22e55e(0x7ec)]+'\x20('+this[_0x22e55e(0x22f)]['wuid']+_0x22e55e(0x5a4)+_0x3668a8+_0x22e55e(0x77c)+_0x19d166+',\x20Expiration\x20Time:\x20'+_0x2ab14d),this[_0x22e55e(0x85a)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x22e55e(0x3d9)]+_0x22e55e(0x84a)),this[_0x22e55e(0x85a)][_0x22e55e(0x70a)](this[_0x22e55e(0x7ec)]+'\x20('+this['instance'][_0x22e55e(0x3d9)]+_0x22e55e(0x87e)+_0x28a423[_0x22e55e(0x35f)]),this[_0x22e55e(0x85a)][_0x22e55e(0x70a)](this[_0x22e55e(0x7ec)]+'\x20('+this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]+'):\x20expirationTime:\x20'+_0x2ab14d),_0x28a423['lastInteraction']<_0x2ab14d){this[_0x22e55e(0x85a)]['verbose'](this[_0x22e55e(0x7ec)]+'\x20('+this[_0x22e55e(0x22f)]['wuid']+'):\x20Conversa\x20está\x20expirada');let _0x19c1dd=await this[_0x22e55e(0x69c)](_0x4d3e18);if(_0x19c1dd===null)return null;_0x28a423&&await this[_0x22e55e(0x373)][_0x22e55e(0x713)][_0x22e55e(0x793)](_0x28a423[_0x22e55e(0x665)],{'status':_0x22e55e(0x798)},this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]),_0x28a423=await this[_0x22e55e(0x4f7)](_0x19c1dd,_0x277170['key'],_0x277170);}return _0x28a423[_0x22e55e(0x35f)]=_0x3668a8,_0x28a423[_0x22e55e(0x24e)][_0x22e55e(0x482)]=_0x277170,_0x28a423;}}catch(_0x2c3056){return this[_0x22e55e(0x85a)][_0x22e55e(0x7bf)](this[_0x22e55e(0x7ec)]+'\x20('+this[_0x22e55e(0x22f)][_0x22e55e(0x3d9)]+_0x22e55e(0x489)+(_0x2c3056 instanceof Error?_0x2c3056[_0x22e55e(0x5a8)]:JSON[_0x22e55e(0x7b9)](_0x2c3056,null,0x2))),null;}}async['createNewConversation'](_0x12ac65,_0x1e6f0f,_0x8e4976){const _0x5a1fd4=a0_0x11d42e;this[_0x5a1fd4(0x85a)]['verbose'](this[_0x5a1fd4(0x7ec)]+'\x20('+this[_0x5a1fd4(0x22f)][_0x5a1fd4(0x3d9)]+_0x5a1fd4(0x2b8));try{let _0x1e73fd=require(_0x5a1fd4(0x5ee))['ObjectId'],_0x41aba9=Date[_0x5a1fd4(0x19e)](),_0x396b92=_0x5a1fd4(0x47e),_0x227928=_0x1e6f0f[_0x5a1fd4(0x221)]?null:_0x8e4976,_0x3aa22e=_0x1e6f0f['fromMe']?_0x8e4976:null,_0x580348=_0x1e6f0f['remoteJid'],_0x34b564=this['AutomateSystem']['flows'][_0x5a1fd4(0x6d7)](_0x950c6d=>_0x950c6d[_0x5a1fd4(0x665)]===_0x12ac65[_0x5a1fd4(0x665)]?.['toString']()),_0x516ee0=_0x34b564?.[_0x5a1fd4(0x6f6)]??_0x12ac65[_0x5a1fd4(0x6f6)]??0x0,_0x2634de=_0x34b564?.[_0x5a1fd4(0x151)]??_0x12ac65[_0x5a1fd4(0x151)]??!0x1;await this[_0x5a1fd4(0x5d5)](_0x580348);let _0x40f2b8={'flowId':_0x12ac65[_0x5a1fd4(0x665)],..._0x12ac65,'chatLog':null},_0x3ae002=await this[_0x5a1fd4(0x448)](_0x40f2b8[_0x5a1fd4(0x563)]),_0x3a7e25=await this[_0x5a1fd4(0x698)](_0x580348),_0xa9a0d5={..._0x3ae002,..._0x3a7e25,'_remoteJid':_0x580348},_0x42e5fe={'lastReceivedMessage':_0x227928,'lastSendMessage':_0x3aa22e,'lastBlockId':_0x396b92,'lastCondition':!0x0,'realVariables':_0xa9a0d5};_0x40f2b8[_0x5a1fd4(0x24e)]=_0x42e5fe,delete _0x40f2b8[_0x5a1fd4(0x665)],_0x40f2b8[_0x5a1fd4(0x665)]=new _0x1e73fd(),_0x40f2b8[_0x5a1fd4(0x35f)]=_0x41aba9,_0x40f2b8[_0x5a1fd4(0x15d)]=_0x5a1fd4(0x78a),_0x40f2b8[_0x5a1fd4(0x33f)]=_0x580348,_0x40f2b8[_0x5a1fd4(0x6f6)]=_0x516ee0,_0x40f2b8[_0x5a1fd4(0x151)]=_0x2634de;let _0x2f1221=await this[_0x5a1fd4(0x373)][_0x5a1fd4(0x713)][_0x5a1fd4(0x793)](_0x40f2b8[_0x5a1fd4(0x665)],_0x40f2b8,this[_0x5a1fd4(0x22f)][_0x5a1fd4(0x3d9)]);return this[_0x5a1fd4(0x85a)][_0x5a1fd4(0x70a)](this[_0x5a1fd4(0x7ec)]+'\x20('+this[_0x5a1fd4(0x22f)][_0x5a1fd4(0x3d9)]+_0x5a1fd4(0x2ac)),_0x2f1221?_0x40f2b8:null;}catch(_0x33c16e){return this['logger'][_0x5a1fd4(0x7bf)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x5a1fd4(0x85b)+(_0x33c16e instanceof Error?_0x33c16e[_0x5a1fd4(0x5a8)]:JSON[_0x5a1fd4(0x7b9)](_0x33c16e,null,0x2))),_0x33c16e;}}async['uazapiSendText'](_0x382a3a,_0x284be2){const _0x279762=a0_0x11d42e;let _0x482a3f=_0x382a3a[_0x279762(0x33f)];_0x284be2[_0x279762(0x1eb)]['remoteJid']&&_0x284be2[_0x279762(0x1eb)][_0x279762(0x33f)][_0x279762(0x593)]()!==''&&(_0x482a3f=_0x284be2['uazapi'][_0x279762(0x33f)][_0x279762(0x593)]()),this[_0x279762(0x85a)]['verbose'](this[_0x279762(0x7ec)]+'\x20('+this[_0x279762(0x22f)][_0x279762(0x3d9)]+'):\x20Enviando\x20texto');let _0x3823ef={'number':_0x482a3f,'options':{'delay':_0x284be2[_0x279762(0x1eb)][_0x279762(0x779)],'linkPreview':_0x284be2[_0x279762(0x1eb)][_0x279762(0x3ae)]},'textMessage':{'text':_0x284be2[_0x279762(0x1eb)][_0x279762(0x8b3)]}};try{let _0x5d8b54=await this['textMessage'](_0x3823ef);if(_0x5d8b54){let _0x29e85e={'_id':_0x5d8b54[_0x279762(0x7af)]['id'],'_fromMe':_0x5d8b54[_0x279762(0x7af)][_0x279762(0x221)],'_remoteJid':_0x5d8b54[_0x279762(0x7af)]['remoteJid']},_0x2d421f=(0x0,w[_0x279762(0x50a)])(_0x5d8b54[_0x279762(0x5a8)]),_0x1008ab=(0x0,w[_0x279762(0x5fc)])(_0x2d421f);_0x382a3a[_0x279762(0x24e)]['lastBlockId']=_0x284be2[_0x279762(0x665)][_0x279762(0x1d7)]();let {message_normalized:_0x5b0b04}=this[_0x279762(0x2aa)](_0x2d421f,_0x1008ab,null);_0x382a3a[_0x279762(0x24e)]['lastSendMessage']=await _0x5b0b04;let _0x52d6a6={'messageId':_0x5d8b54[_0x279762(0x7af)]['id']},_0x105728=_0x382a3a[_0x279762(0x24e)]['realVariables'];Object[_0x279762(0x7b3)](_0x105728,_0x29e85e),_0x382a3a[_0x279762(0x24e)][_0x279762(0x83c)]=_0x105728,this[_0x279762(0x41a)](_0x382a3a,_0x284be2,_0x52d6a6);}else{let _0x5a29a8={'error':!0x0};this[_0x279762(0x41a)](_0x382a3a,_0x284be2,_0x5a29a8),this[_0x279762(0x85a)][_0x279762(0x7bf)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x279762(0x36e));}}catch(_0x5e47e8){let _0x4fdddf={'error':!0x0,'errorLog':_0x5e47e8[_0x279762(0x1d7)]()};this['updateConversation'](_0x382a3a,_0x284be2,_0x4fdddf),this['logger'][_0x279762(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x279762(0x3d9)]+_0x279762(0x688)+(_0x5e47e8 instanceof Error?_0x5e47e8[_0x279762(0x5a8)]:JSON[_0x279762(0x7b9)](_0x5e47e8,null,0x2)));}}async[a0_0x11d42e(0x548)](_0x4cb105,_0x5c4665){const _0x501f2d=a0_0x11d42e;let _0x51d2e2=_0x4cb105[_0x501f2d(0x33f)];_0x5c4665[_0x501f2d(0x1eb)]['remoteJid']&&_0x5c4665['uazapi'][_0x501f2d(0x33f)]['trim']()!==''&&(_0x51d2e2=_0x5c4665[_0x501f2d(0x1eb)][_0x501f2d(0x33f)][_0x501f2d(0x593)]()),this['logger'][_0x501f2d(0x70a)](this[_0x501f2d(0x7ec)]+'\x20('+this['instance'][_0x501f2d(0x3d9)]+_0x501f2d(0x3ba));let _0x3efa30={'number':_0x51d2e2,'options':{'delay':_0x5c4665[_0x501f2d(0x1eb)][_0x501f2d(0x779)],'linkPreview':_0x5c4665['uazapi'][_0x501f2d(0x3ae)]},'mediaMessage':{'mediatype':_0x5c4665[_0x501f2d(0x1eb)][_0x501f2d(0x72f)],'caption':_0x5c4665[_0x501f2d(0x1eb)]['caption'],'media':_0x5c4665[_0x501f2d(0x1eb)]['media'],'fileName':_0x5c4665[_0x501f2d(0x1eb)][_0x501f2d(0x329)]}};try{let _0x641684=await this[_0x501f2d(0x7b4)](_0x3efa30);if(_0x641684){let _0x40b8bf={'_id':_0x641684[_0x501f2d(0x7af)]['id'],'_fromMe':_0x641684['key'][_0x501f2d(0x221)],'_remoteJid':_0x641684[_0x501f2d(0x7af)]['remoteJid']},_0x43bf97=(0x0,w['normalizeMessageContent'])(_0x641684[_0x501f2d(0x5a8)]),_0x171704=(0x0,w[_0x501f2d(0x5fc)])(_0x43bf97);_0x4cb105['chatLog'][_0x501f2d(0x8c3)]=_0x5c4665['_id'][_0x501f2d(0x1d7)]();let {message_normalized:_0x359353}=this[_0x501f2d(0x2aa)](_0x43bf97,_0x171704,null);_0x4cb105[_0x501f2d(0x24e)][_0x501f2d(0x696)]=await _0x359353;let _0x1d874a={'messageId':_0x641684[_0x501f2d(0x7af)]['id']},_0x5bc829=_0x4cb105[_0x501f2d(0x24e)][_0x501f2d(0x83c)];Object[_0x501f2d(0x7b3)](_0x5bc829,_0x40b8bf),_0x4cb105['chatLog'][_0x501f2d(0x83c)]=_0x5bc829,this[_0x501f2d(0x41a)](_0x4cb105,_0x5c4665,_0x1d874a);}else{let _0x5240a3={'error':!0x0};this[_0x501f2d(0x41a)](_0x4cb105,_0x5c4665,_0x5240a3),this['logger'][_0x501f2d(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x501f2d(0x3d9)]+_0x501f2d(0x399));}}catch(_0x3bae0d){let _0x33e6fb={'error':!0x0,'errorLog':_0x3bae0d[_0x501f2d(0x1d7)]()};this['updateConversation'](_0x4cb105,_0x5c4665,_0x33e6fb),this['logger'][_0x501f2d(0x7bf)](this[_0x501f2d(0x7ec)]+'\x20('+this[_0x501f2d(0x22f)][_0x501f2d(0x3d9)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20'+(_0x3bae0d instanceof Error?_0x3bae0d['message']:JSON[_0x501f2d(0x7b9)](_0x3bae0d,null,0x2)));}}async[a0_0x11d42e(0x7b8)](_0x26fcab,_0x42ff23){const _0x5c8363=a0_0x11d42e;let _0x32357d=_0x26fcab[_0x5c8363(0x33f)];_0x42ff23[_0x5c8363(0x1eb)][_0x5c8363(0x33f)]&&_0x42ff23[_0x5c8363(0x1eb)][_0x5c8363(0x33f)]['trim']()!==''&&(_0x32357d=_0x42ff23[_0x5c8363(0x1eb)][_0x5c8363(0x33f)][_0x5c8363(0x593)]()),this[_0x5c8363(0x85a)][_0x5c8363(0x70a)](this[_0x5c8363(0x7ec)]+'\x20('+this[_0x5c8363(0x22f)]['wuid']+_0x5c8363(0x371));let _0x481a1a={'number':_0x32357d,'options':{'delay':_0x42ff23[_0x5c8363(0x1eb)][_0x5c8363(0x779)]},'locationMessage':{'name':_0x42ff23[_0x5c8363(0x1eb)]['name'],'address':_0x42ff23[_0x5c8363(0x1eb)][_0x5c8363(0x1ef)],'latitude':_0x42ff23[_0x5c8363(0x1eb)][_0x5c8363(0x31d)],'longitude':_0x42ff23[_0x5c8363(0x1eb)][_0x5c8363(0x3ce)]}};try{let _0x4b7ead=await this['locationMessage'](_0x481a1a);if(_0x4b7ead){let _0x3aaa6b={'_id':_0x4b7ead['key']['id'],'_fromMe':_0x4b7ead['key'][_0x5c8363(0x221)],'_remoteJid':_0x4b7ead[_0x5c8363(0x7af)]['remoteJid']},_0x305f68=(0x0,w[_0x5c8363(0x50a)])(_0x4b7ead[_0x5c8363(0x5a8)]),_0x2de1df=(0x0,w[_0x5c8363(0x5fc)])(_0x305f68);_0x26fcab['chatLog'][_0x5c8363(0x8c3)]=_0x42ff23[_0x5c8363(0x665)]['toString']();let {message_normalized:_0x295294}=this[_0x5c8363(0x2aa)](_0x305f68,_0x2de1df,null);_0x26fcab[_0x5c8363(0x24e)][_0x5c8363(0x696)]=await _0x295294;let _0x2bab88={'messageId':_0x4b7ead[_0x5c8363(0x7af)]['id']},_0x541fef=_0x26fcab[_0x5c8363(0x24e)]['realVariables'];Object['assign'](_0x541fef,_0x3aaa6b),_0x26fcab[_0x5c8363(0x24e)][_0x5c8363(0x83c)]=_0x541fef,this[_0x5c8363(0x41a)](_0x26fcab,_0x42ff23,_0x2bab88);}else{let _0x43a43a={'error':!0x0};this[_0x5c8363(0x41a)](_0x26fcab,_0x42ff23,_0x43a43a),this['logger'][_0x5c8363(0x7bf)](this[_0x5c8363(0x7ec)]+'\x20('+this[_0x5c8363(0x22f)][_0x5c8363(0x3d9)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.');}}catch(_0x3ba7e3){let _0x18f3b1={'error':!0x0,'errorLog':_0x3ba7e3['toString']()};this[_0x5c8363(0x41a)](_0x26fcab,_0x42ff23,_0x18f3b1),this[_0x5c8363(0x85a)][_0x5c8363(0x7bf)](this[_0x5c8363(0x7ec)]+'\x20('+this['instance'][_0x5c8363(0x3d9)]+_0x5c8363(0x69e)+(_0x3ba7e3 instanceof Error?_0x3ba7e3['message']:JSON[_0x5c8363(0x7b9)](_0x3ba7e3,null,0x2)));}}async[a0_0x11d42e(0x67a)](_0x5b1f55,_0xadbf41){const _0x6c530d=a0_0x11d42e;let _0x27de9f=_0x5b1f55[_0x6c530d(0x33f)];_0xadbf41[_0x6c530d(0x1eb)]['remoteJid']&&_0xadbf41[_0x6c530d(0x1eb)][_0x6c530d(0x33f)][_0x6c530d(0x593)]()!==''&&(_0x27de9f=_0xadbf41['uazapi'][_0x6c530d(0x33f)][_0x6c530d(0x593)]()),this['logger']['verbose'](this[_0x6c530d(0x7ec)]+'\x20('+this[_0x6c530d(0x22f)][_0x6c530d(0x3d9)]+_0x6c530d(0x6cf));let _0x4d0879={'number':_0x27de9f,'options':{'delay':_0xadbf41[_0x6c530d(0x1eb)][_0x6c530d(0x779)]},'audioMessage':{'audio':_0xadbf41[_0x6c530d(0x1eb)][_0x6c530d(0x43f)]}};try{let _0x7a3341=await this['audioWhatsapp'](_0x4d0879);if(_0x7a3341){let _0x54d223={'_id':_0x7a3341[_0x6c530d(0x7af)]['id'],'_fromMe':_0x7a3341[_0x6c530d(0x7af)][_0x6c530d(0x221)],'_remoteJid':_0x7a3341[_0x6c530d(0x7af)][_0x6c530d(0x33f)]},_0x18e0d1=(0x0,w[_0x6c530d(0x50a)])(_0x7a3341['message']),_0x3e7235=(0x0,w[_0x6c530d(0x5fc)])(_0x18e0d1);_0x5b1f55[_0x6c530d(0x24e)]['lastBlockId']=_0xadbf41[_0x6c530d(0x665)][_0x6c530d(0x1d7)]();let {message_normalized:_0x16a0ac}=this['normalizeMessage'](_0x18e0d1,_0x3e7235,null);_0x5b1f55[_0x6c530d(0x24e)]['lastSendMessage']=await _0x16a0ac;let _0x21d25f={'messageId':_0x7a3341[_0x6c530d(0x7af)]['id']},_0x534e92=_0x5b1f55[_0x6c530d(0x24e)][_0x6c530d(0x83c)];Object[_0x6c530d(0x7b3)](_0x534e92,_0x54d223),_0x5b1f55[_0x6c530d(0x24e)][_0x6c530d(0x83c)]=_0x534e92,this[_0x6c530d(0x41a)](_0x5b1f55,_0xadbf41,_0x21d25f);}else{let _0xcd5e23={'error':!0x0};this['updateConversation'](_0x5b1f55,_0xadbf41,_0xcd5e23),this[_0x6c530d(0x85a)][_0x6c530d(0x7bf)](this[_0x6c530d(0x7ec)]+'\x20('+this[_0x6c530d(0x22f)][_0x6c530d(0x3d9)]+_0x6c530d(0x5de));}}catch(_0x10c5a6){let _0x1e6203={'error':!0x0,'errorLog':_0x10c5a6[_0x6c530d(0x1d7)]()};this[_0x6c530d(0x41a)](_0x5b1f55,_0xadbf41,_0x1e6203),this[_0x6c530d(0x85a)][_0x6c530d(0x7bf)](this[_0x6c530d(0x7ec)]+'\x20('+this[_0x6c530d(0x22f)][_0x6c530d(0x3d9)]+_0x6c530d(0x6dd)+(_0x10c5a6 instanceof Error?_0x10c5a6['message']:JSON['stringify'](_0x10c5a6,null,0x2)));}}async['uazapiSendContact'](_0xf7b727,_0x32aff8){const _0x11741b=a0_0x11d42e;let _0x4f6361=_0xf7b727[_0x11741b(0x33f)];_0x32aff8['uazapi'][_0x11741b(0x33f)]&&_0x32aff8[_0x11741b(0x1eb)][_0x11741b(0x33f)]['trim']()!==''&&(_0x4f6361=_0x32aff8[_0x11741b(0x1eb)][_0x11741b(0x33f)][_0x11741b(0x593)]()),this[_0x11741b(0x85a)][_0x11741b(0x70a)](this[_0x11741b(0x7ec)]+'\x20('+this[_0x11741b(0x22f)]['wuid']+_0x11741b(0x7c5));let _0x5c45ea={'number':_0x4f6361,'options':{'delay':_0x32aff8['uazapi']['delay']},'contactMessage':[{'fullName':_0x32aff8['uazapi'][_0x11741b(0x2a6)],'phoneNumber':_0x32aff8[_0x11741b(0x1eb)][_0x11741b(0x438)]}]};try{let _0x373982=await this[_0x11741b(0x41b)](_0x5c45ea);if(_0x373982){let _0x586cb5={'_id':_0x373982['key']['id'],'_fromMe':_0x373982['key']['fromMe'],'_remoteJid':_0x373982[_0x11741b(0x7af)][_0x11741b(0x33f)]},_0x565887=(0x0,w[_0x11741b(0x50a)])(_0x373982[_0x11741b(0x5a8)]),_0x5809e1=(0x0,w['getContentType'])(_0x565887);_0xf7b727['chatLog']['lastBlockId']=_0x32aff8['_id'][_0x11741b(0x1d7)]();let {message_normalized:_0x1b46ab}=this['normalizeMessage'](_0x565887,_0x5809e1,null);_0xf7b727['chatLog']['lastSendMessage']=await _0x1b46ab;let _0x3b57ad={'messageId':_0x373982['key']['id']},_0x6b4301=_0xf7b727[_0x11741b(0x24e)][_0x11741b(0x83c)];Object[_0x11741b(0x7b3)](_0x6b4301,_0x586cb5),_0xf7b727[_0x11741b(0x24e)][_0x11741b(0x83c)]=_0x6b4301,this[_0x11741b(0x41a)](_0xf7b727,_0x32aff8,_0x3b57ad);}else{let _0x2af568={'error':!0x0};this[_0x11741b(0x41a)](_0xf7b727,_0x32aff8,_0x2af568),this[_0x11741b(0x85a)][_0x11741b(0x7bf)](this[_0x11741b(0x7ec)]+'\x20('+this[_0x11741b(0x22f)][_0x11741b(0x3d9)]+_0x11741b(0x753));}}catch(_0x56d9c2){let _0x32b146={'error':!0x0,'errorLog':_0x56d9c2['toString']()};this[_0x11741b(0x41a)](_0xf7b727,_0x32aff8,_0x32b146),this[_0x11741b(0x85a)][_0x11741b(0x7bf)](this[_0x11741b(0x7ec)]+'\x20('+this[_0x11741b(0x22f)][_0x11741b(0x3d9)]+_0x11741b(0x7c2)+(_0x56d9c2 instanceof Error?_0x56d9c2[_0x11741b(0x5a8)]:JSON[_0x11741b(0x7b9)](_0x56d9c2,null,0x2)));}}['replaceVariablesInReplyOptions'](_0x19e1ac,_0xd3a86f){const _0x13b0d9=a0_0x11d42e;for(let _0x58905d of _0x19e1ac)_0x58905d[_0x13b0d9(0x733)]&&(_0x58905d[_0x13b0d9(0x733)]=this[_0x13b0d9(0x3a6)](_0x58905d[_0x13b0d9(0x733)],_0xd3a86f)),_0x58905d[_0x13b0d9(0x1ad)]&&(_0x58905d[_0x13b0d9(0x1ad)]=this[_0x13b0d9(0x3a6)](_0x58905d[_0x13b0d9(0x1ad)],_0xd3a86f));}async[a0_0x11d42e(0x5f5)](_0x5bb346,_0x570733){const _0xeca562=a0_0x11d42e;let _0x577d44=_0x5bb346['remoteJid'];_0x570733[_0xeca562(0x1eb)][_0xeca562(0x33f)]&&_0x570733['uazapi']['remoteJid'][_0xeca562(0x593)]()!==''&&(_0x577d44=_0x570733[_0xeca562(0x1eb)][_0xeca562(0x33f)][_0xeca562(0x593)]()),this[_0xeca562(0x85a)]['verbose'](this[_0xeca562(0x7ec)]+'\x20('+this[_0xeca562(0x22f)][_0xeca562(0x3d9)]+_0xeca562(0x468));let _0x55c334=_0x5bb346[_0xeca562(0x5ca)][_0xeca562(0x852)](_0x27c77a=>_0x27c77a['blockId']===_0x570733['_id'])[_0xeca562(0x7aa)]((_0x2ab7f4,_0xb7c69f)=>_0x2ab7f4[_0xeca562(0x879)]-_0xb7c69f[_0xeca562(0x879)]);this['replaceVariablesInReplyOptions'](_0x55c334,_0x5bb346[_0xeca562(0x24e)][_0xeca562(0x83c)]);let _0x516425=_0x55c334[_0xeca562(0x4f6)](_0x536db9=>_0x536db9[_0xeca562(0x733)]),_0x10779b={'number':_0x577d44,'menuMessage':{'type':_0x570733[_0xeca562(0x1eb)][_0xeca562(0x8a4)]||'poll','text':_0x570733[_0xeca562(0x1eb)][_0xeca562(0x8b3)]||_0x570733[_0xeca562(0x1eb)]['name'],'footerText':_0x570733[_0xeca562(0x1eb)]['footerText'],'buttonText':_0x570733[_0xeca562(0x1eb)][_0xeca562(0x316)],'selectableCount':0x1,'choices':_0x516425},'options':{'delay':_0x570733[_0xeca562(0x1eb)]['delay']}};try{let _0x5ab1c1=await this['menuMessage'](_0x10779b);if(_0x5ab1c1){let _0x220b71={'_id':_0x5ab1c1[_0xeca562(0x7af)]['id'],'_fromMe':_0x5ab1c1[_0xeca562(0x7af)][_0xeca562(0x221)],'_remoteJid':_0x5ab1c1[_0xeca562(0x7af)][_0xeca562(0x33f)]};_0x570733[_0xeca562(0x1eb)]['menuIgnoreNonVotes']===!0x0&&(_0x5bb346[_0xeca562(0x15d)]=_0xeca562(0x6e4),this['logger']['verbose'](this[_0xeca562(0x7ec)]+'\x20('+this[_0xeca562(0x22f)][_0xeca562(0x3d9)]+_0xeca562(0x63b)+_0x5bb346[_0xeca562(0x15d)])),this[_0xeca562(0x85a)]['verbose'](this[_0xeca562(0x7ec)]+'\x20('+this[_0xeca562(0x22f)]['wuid']+_0xeca562(0x69f)+(_0x570733[_0xeca562(0x1eb)]['name']||_0x570733[_0xeca562(0x1eb)][_0xeca562(0x8b3)])),_0x5bb346[_0xeca562(0x1ce)]=_0x5ab1c1[_0xeca562(0x7af)]['id'],_0x5bb346['waitingMenu_text']=_0x570733['uazapi']['name']||_0x570733[_0xeca562(0x1eb)][_0xeca562(0x8b3)],_0x5bb346[_0xeca562(0x3ca)]=_0x55c334,_0x570733[_0xeca562(0x1eb)][_0xeca562(0x12b)]&&(_0x5bb346['waitingMenu_ExpiredMessage']=_0x570733['uazapi'][_0xeca562(0x12b)]),this[_0xeca562(0x85a)][_0xeca562(0x70a)](this[_0xeca562(0x7ec)]+'\x20('+this[_0xeca562(0x22f)][_0xeca562(0x3d9)]+'):\x20conversation.waitingMenu_name'+_0x5bb346[_0xeca562(0x87b)]);let _0x5286d9=(0x0,w[_0xeca562(0x50a)])(_0x5ab1c1['message']),_0x392296=(0x0,w[_0xeca562(0x5fc)])(_0x5286d9);_0x5bb346['chatLog'][_0xeca562(0x8c3)]=_0x570733['_id']['toString']();let {message_normalized:_0x265f58}=this['normalizeMessage'](_0x5286d9,_0x392296,null);_0x5bb346[_0xeca562(0x24e)][_0xeca562(0x696)]=await _0x265f58;let _0x11a3db={'messageId':_0x5ab1c1[_0xeca562(0x7af)]['id']},_0x2c14e5=_0x5bb346['chatLog']['realVariables'];Object['assign'](_0x2c14e5,_0x220b71),_0x5bb346['chatLog'][_0xeca562(0x83c)]=_0x2c14e5,this[_0xeca562(0x41a)](_0x5bb346,_0x570733,_0x11a3db);}else{let _0x1ac75d={'error':!0x0};this['updateConversation'](_0x5bb346,_0x570733,_0x1ac75d),this[_0xeca562(0x85a)][_0xeca562(0x7bf)](this[_0xeca562(0x7ec)]+'\x20('+this[_0xeca562(0x22f)][_0xeca562(0x3d9)]+_0xeca562(0x7e7));}}catch(_0x50ed43){let _0x5ec4dd={'error':!0x0,'errorLog':_0x50ed43 instanceof Error?_0x50ed43[_0xeca562(0x5a8)]:JSON[_0xeca562(0x7b9)](_0x50ed43,null,0x2)};this['updateConversation'](_0x5bb346,_0x570733,_0x5ec4dd),this[_0xeca562(0x85a)][_0xeca562(0x7bf)](this[_0xeca562(0x7ec)]+'\x20('+this[_0xeca562(0x22f)]['wuid']+_0xeca562(0x7e0)+(_0x50ed43 instanceof Error?_0x50ed43[_0xeca562(0x5a8)]:JSON[_0xeca562(0x7b9)](_0x50ed43,null,0x2)));}}async[a0_0x11d42e(0x15e)](_0x453fa1,_0x3222b3){const _0x44dae5=a0_0x11d42e;this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x44dae5(0x22f)][_0x44dae5(0x3d9)]+_0x44dae5(0x15a));let _0x51ee4d=_0x453fa1[_0x44dae5(0x24e)]['blockLogs'][_0x44dae5(0x6d7)](_0x5327b1=>_0x5327b1[_0x44dae5(0x545)]['toString']()===_0x3222b3[_0x44dae5(0x1eb)][_0x44dae5(0x545)][_0x44dae5(0x1d7)]()),_0x20ad2a={'id':_0x51ee4d[_0x44dae5(0x4f8)],'remoteJid':_0x51ee4d[_0x44dae5(0x33f)],'fromMe':_0x51ee4d['fromMe']};try{let _0x4e3163=await this[_0x44dae5(0x568)](_0x20ad2a);if(_0x4e3163){let _0x3e2627=(0x0,w['normalizeMessageContent'])(_0x4e3163['message']),_0x1c119f=(0x0,w[_0x44dae5(0x5fc)])(_0x3e2627);_0x453fa1[_0x44dae5(0x24e)]['lastBlockId']=_0x3222b3['_id']['toString']();let {message_normalized:_0x34e784}=this[_0x44dae5(0x2aa)](_0x3e2627,_0x1c119f,null);_0x453fa1[_0x44dae5(0x24e)][_0x44dae5(0x696)]=await _0x34e784;let _0x354ed2={};this[_0x44dae5(0x41a)](_0x453fa1,_0x3222b3,_0x354ed2);}else{let _0x96e2be={'error':!0x0};this[_0x44dae5(0x41a)](_0x453fa1,_0x3222b3,_0x96e2be),this[_0x44dae5(0x85a)]['error'](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Falha\x20ao\x20deletar\x20mensagem.');}}catch(_0x62e2af){let _0x5eba1f={'error':!0x0,'errorLog':_0x62e2af instanceof Error?_0x62e2af[_0x44dae5(0x5a8)]:JSON[_0x44dae5(0x7b9)](_0x62e2af,null,0x2)};this[_0x44dae5(0x41a)](_0x453fa1,_0x3222b3,_0x5eba1f),this[_0x44dae5(0x85a)][_0x44dae5(0x7bf)](this[_0x44dae5(0x7ec)]+'\x20('+this['instance'][_0x44dae5(0x3d9)]+_0x44dae5(0x8cd)+(_0x62e2af instanceof Error?_0x62e2af[_0x44dae5(0x5a8)]:JSON[_0x44dae5(0x7b9)](_0x62e2af,null,0x2)));}}async[a0_0x11d42e(0x70c)](_0x1f2ee3,_0xfbae39){const _0x245958=a0_0x11d42e;if(_0x1f2ee3['name']||(_0x1f2ee3[_0x245958(0x414)]=(0x0,Q['v4'])()),_0xfbae39!==xi&&_0x1f2ee3?.[_0x245958(0x8c4)])throw new m(_0x245958(0x496));if(_0x245958(0x665)in _0x1f2ee3&&_0x245958(0x855)in _0x1f2ee3)return this[_0x245958(0x297)](_0x1f2ee3['owner'],_0x1f2ee3[_0x245958(0x665)]);this[_0x245958(0x85a)][_0x245958(0x70a)](this[_0x245958(0x7ec)]+'\x20('+this[_0x245958(0x22f)][_0x245958(0x3d9)]+_0x245958(0x1bf));let _0x1b1af9=this[_0x245958(0x17e)](_0x1f2ee3[_0x245958(0x414)]),_0x3dd666=new he[(_0x245958(0x7a6))][(_0x245958(0x626))](),_0x4e4be2={'_id':_0x3dd666,'default':!0x0,'title':_0x245958(0x392),'x':0x0,'y':0x0},_0x5926ef={'_id':new he[(_0x245958(0x7a6))][(_0x245958(0x626))](),'order':0x1,'groupId':_0x3dd666['toString'](),'type':'start'},_0x5d8079=this[_0x245958(0x22f)][_0x245958(0x3d9)],_0x25bbdf={'_id':(0x0,Q['v4'])(),'owner':_0x5d8079,'name':_0x1b1af9,'whoCanEdit':[_0x5d8079],'whoCanUse':[_0x5d8079],'groups':[_0x4e4be2],'blocks':[_0x5926ef],..._0x1f2ee3};try{let _0x3ac074=await this[_0x245958(0x373)][_0x245958(0x5b3)][_0x245958(0x1bb)](_0x25bbdf);return await this[_0x245958(0x67f)](),_0x3ac074;}catch(_0x55d4b1){let _0x239458=_0x245958(0x492),_0x6782df=_0x55d4b1 instanceof Error?_0x55d4b1[_0x245958(0x5a8)]:typeof _0x55d4b1==_0x245958(0x1cb)?JSON[_0x245958(0x7b9)](_0x55d4b1):_0x55d4b1,_0x324f85=_0x239458+':\x20'+_0x6782df;throw this[_0x245958(0x85a)][_0x245958(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x245958(0x3d9)]+_0x245958(0x7bd)+_0x324f85),new m(_0x324f85);}}async[a0_0x11d42e(0x297)](_0x42c6fc,_0x4382a4){const _0x73e080=a0_0x11d42e;try{this['logger']['verbose'](this[_0x73e080(0x7ec)]+'\x20('+this[_0x73e080(0x22f)][_0x73e080(0x3d9)]+_0x73e080(0x55a));let _0xf84990=await this['repository'][_0x73e080(0x5b3)]['findOne']({'where':{'_id':_0x4382a4,'owner':_0x42c6fc}});if(!_0xf84990)throw new m('Nenhum\x20fluxo\x20correspondente\x20encontrado.');if(_0xf84990['shareFlow']===!0x1&&!_0xf84990[_0x73e080(0x8c4)])throw new m(_0x73e080(0x657));let _0x4c7579=new Set(_0xf84990[_0x73e080(0x6ee)]??[]);_0x4c7579[_0x73e080(0x277)](this[_0x73e080(0x22f)][_0x73e080(0x3d9)]);let _0x1906e2=await this[_0x73e080(0x373)][_0x73e080(0x5b3)][_0x73e080(0x793)](_0x4382a4,{..._0xf84990,'whoCanUse':Array['from'](_0x4c7579)});return await this[_0x73e080(0x67f)](),_0x1906e2;}catch(_0x1cb561){let _0x23bd5f=_0x73e080(0x187),_0x7e16ed=_0x1cb561 instanceof Error?_0x1cb561[_0x73e080(0x5a8)]:typeof _0x1cb561=='object'?JSON['stringify'](_0x1cb561):_0x1cb561,_0x2cf0af=_0x23bd5f+':\x20'+_0x7e16ed;throw this[_0x73e080(0x85a)][_0x73e080(0x7bf)](this['instanceName']+'\x20('+this[_0x73e080(0x22f)][_0x73e080(0x3d9)]+_0x73e080(0x7bd)+_0x2cf0af),new m(_0x2cf0af);}}[a0_0x11d42e(0x17e)](_0x14b529){const _0x108994=a0_0x11d42e;let _0x42c0b3=_0x14b529,_0x5569a1=0x1;for(;this[_0x108994(0x747)]['flows']['some'](_0x553ac2=>_0x553ac2[_0x108994(0x414)]===_0x42c0b3);)_0x5569a1++,_0x42c0b3=_0x14b529+'\x20('+_0x5569a1+')';return _0x42c0b3;}async[a0_0x11d42e(0x4c9)](_0x78c036){const _0x1494ab=a0_0x11d42e;try{if(this[_0x1494ab(0x85a)][_0x1494ab(0x70a)](this[_0x1494ab(0x7ec)]+'\x20('+this[_0x1494ab(0x22f)]['wuid']+_0x1494ab(0x584)+_0x78c036[_0x1494ab(0x665)]+',\x20global:\x20'+_0x78c036[_0x1494ab(0x619)]),!this['AutomateSystem'][_0x1494ab(0x814)][_0x1494ab(0x6d7)](_0x10e141=>_0x10e141[_0x1494ab(0x665)]===_0x78c036[_0x1494ab(0x665)]))throw this[_0x1494ab(0x85a)][_0x1494ab(0x70a)](this['instanceName']+'\x20('+this[_0x1494ab(0x22f)]['wuid']+_0x1494ab(0x5db)+_0x78c036[_0x1494ab(0x665)]+_0x1494ab(0x56b)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x5b88d4=await this['repository'][_0x1494ab(0x5b3)]['findOne']({'where':{'_id':_0x78c036[_0x1494ab(0x665)]}});if(!_0x5b88d4)throw new m(_0x1494ab(0x510));if(this['instance'][_0x1494ab(0x3d9)]===_0x5b88d4[_0x1494ab(0x855)]){this[_0x1494ab(0x85a)][_0x1494ab(0x70a)](this[_0x1494ab(0x7ec)]+'\x20('+this[_0x1494ab(0x22f)][_0x1494ab(0x3d9)]+'):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27'+_0x78c036[_0x1494ab(0x665)]+'\x27\x20do\x20banco\x20de\x20dados...');let _0x442435=await this[_0x1494ab(0x373)][_0x1494ab(0x5b3)][_0x1494ab(0x315)]({'where':{'_id':_0x78c036[_0x1494ab(0x665)]}});return await this['synchronizeAndMapFlows'](),_0x442435;}return this[_0x1494ab(0x85a)][_0x1494ab(0x70a)](this[_0x1494ab(0x7ec)]+'\x20('+this[_0x1494ab(0x22f)][_0x1494ab(0x3d9)]+_0x1494ab(0x841)+this[_0x1494ab(0x22f)][_0x1494ab(0x3d9)]+_0x1494ab(0x4ce)+_0x78c036['_id']+_0x1494ab(0x327)),_0x5b88d4['whoCanUse']=(_0x5b88d4['whoCanUse']??[])['filter'](_0x51012b=>_0x51012b!==this['instance']['wuid']),_0x5b88d4[_0x1494ab(0x2a8)]=(_0x5b88d4[_0x1494ab(0x2a8)]??[])['filter'](_0x42cec9=>_0x42cec9!==this[_0x1494ab(0x22f)][_0x1494ab(0x3d9)]),_0x5b88d4[_0x1494ab(0x2a8)][_0x1494ab(0x57a)]===0x0&&_0x5b88d4[_0x1494ab(0x6ee)][_0x1494ab(0x57a)]>0x0&&(_0x5b88d4[_0x1494ab(0x2a8)][_0x1494ab(0x64a)](_0x5b88d4[_0x1494ab(0x6ee)][0x0]),this[_0x1494ab(0x85a)][_0x1494ab(0x70a)](this[_0x1494ab(0x7ec)]+'\x20('+this[_0x1494ab(0x22f)][_0x1494ab(0x3d9)]+'):\x20Adicionando\x20\x27'+_0x5b88d4['whoCanUse'][0x0]+_0x1494ab(0x6b0)+_0x78c036[_0x1494ab(0x665)]+_0x1494ab(0x327))),await this['repository'][_0x1494ab(0x5b3)]['updateOne'](_0x5b88d4[_0x1494ab(0x665)],_0x5b88d4),await this['synchronizeAndMapFlows'](),{'message':_0x1494ab(0x620)+_0x78c036['name']+_0x1494ab(0x462)};}catch(_0x9312ec){return this['logger']['error'](this[_0x1494ab(0x7ec)]+'\x20('+this['instance'][_0x1494ab(0x3d9)]+_0x1494ab(0x527)+(_0x9312ec instanceof Error?_0x9312ec['message']:JSON['stringify'](_0x9312ec,null,0x2))),{'message':_0x1494ab(0x1a2)+(_0x9312ec instanceof Error?_0x9312ec[_0x1494ab(0x5a8)]:JSON[_0x1494ab(0x7b9)](_0x9312ec,null,0x2))};}}async[a0_0x11d42e(0x15f)](_0x16979e){const _0x1822cd=a0_0x11d42e;try{if(this['logger'][_0x1822cd(0x59a)](this[_0x1822cd(0x7ec)]+'\x20('+this[_0x1822cd(0x22f)][_0x1822cd(0x3d9)]+_0x1822cd(0x2af)+_0x16979e),!this[_0x1822cd(0x747)]&&(await this[_0x1822cd(0x3ea)](),!this[_0x1822cd(0x747)]))return null;let _0x48fc73=await this[_0x1822cd(0x373)][_0x1822cd(0x5b3)][_0x1822cd(0x588)]({'where':{'_id':_0x16979e}});if(!_0x48fc73)throw new m(_0x1822cd(0x7d6)+_0x16979e+_0x1822cd(0x5dc));if(!(_0x48fc73['globalShow']||_0x48fc73[_0x1822cd(0x6ee)]?.[_0x1822cd(0x3ef)](this[_0x1822cd(0x22f)][_0x1822cd(0x3d9)])))throw new m(_0x1822cd(0x7fc)+name+'\x27');_0x48fc73[_0x1822cd(0x8c4)]&&!_0x48fc73[_0x1822cd(0x6ee)]?.[_0x1822cd(0x3ef)](this['instance'][_0x1822cd(0x3d9)])&&(_0x48fc73['whoCanUse']=[..._0x48fc73['whoCanUse']??[],this[_0x1822cd(0x22f)][_0x1822cd(0x3d9)]],await this[_0x1822cd(0x373)][_0x1822cd(0x5b3)]['updateOne'](_0x48fc73['_id'],_0x48fc73),this[_0x1822cd(0x67f)]());let _0xff1bfa=this[_0x1822cd(0x747)]?.[_0x1822cd(0x5c4)][_0x1822cd(0x4f6)](_0x750faf=>_0x750faf[_0x1822cd(0x414)]),_0x23b635=[_0x1822cd(0x2b3),_0x1822cd(0x283),_0x1822cd(0x140),'cpf','status',_0x1822cd(0x42d),_0x1822cd(0x36f),_0x1822cd(0x2ba),_0x1822cd(0x535),_0x1822cd(0x1a8),_0x1822cd(0x55f)];_0x48fc73[_0x1822cd(0x563)]=_0x48fc73[_0x1822cd(0x563)][_0x1822cd(0x852)](_0x498549=>!(_0x498549['folder']===_0x1822cd(0x7df)||_0x498549[_0x1822cd(0x7df)])),_0x23b635[_0x1822cd(0x46a)](_0x4b11da=>{const _0x1b97ae=_0x1822cd;_0x48fc73['variables'][_0x1b97ae(0x64a)]({'folder':_0x1b97ae(0x7df),'name':_0x4b11da,'value':'','doc':'','leadInfo':!0x0});}),_0xff1bfa[_0x1822cd(0x46a)](_0x166b38=>{const _0x57547a=_0x1822cd;let _0x5c493f=_0x48fc73[_0x57547a(0x563)][_0x57547a(0x44e)](_0x19550c=>_0x19550c[_0x57547a(0x414)]===_0x166b38);_0x5c493f===-0x1?_0x48fc73['variables'][_0x57547a(0x64a)]({'folder':_0x57547a(0x7df),'name':_0x166b38,'value':'','doc':'','leadInfo':!0x0}):(_0x48fc73[_0x57547a(0x563)][_0x5c493f][_0x57547a(0x718)]=_0x57547a(0x7df),_0x48fc73[_0x57547a(0x563)][_0x5c493f][_0x57547a(0x7df)]=!0x0);}),_0x48fc73[_0x1822cd(0x23f)]&&_0x48fc73[_0x1822cd(0x23f)][_0x1822cd(0x57a)]>0x0&&_0x48fc73[_0x1822cd(0x23f)]['forEach'](_0x134da1=>{const _0xbf19a5=_0x1822cd;_0x134da1[_0xbf19a5(0x1ab)]&&_0x134da1[_0xbf19a5(0x887)]&&_0x134da1['groupId']===_0x134da1[_0xbf19a5(0x887)]&&(_0x134da1[_0xbf19a5(0x887)]=null);});let _0x1aeabb=await this[_0x1822cd(0x373)][_0x1822cd(0x5b3)][_0x1822cd(0x793)](_0x48fc73[_0x1822cd(0x665)],_0x48fc73);if(!_0x1aeabb)throw new Error(_0x1822cd(0x3c0));return _0x1aeabb;}catch(_0x1c20dc){let _0x44b3c9=_0x1822cd(0x6e0),_0x53c212=_0x1c20dc instanceof Error?_0x1c20dc['message']:typeof _0x1c20dc=='object'?JSON[_0x1822cd(0x7b9)](_0x1c20dc):_0x1c20dc,_0x4e0fd9=_0x44b3c9+':\x20'+_0x53c212;throw this[_0x1822cd(0x85a)]['error'](this[_0x1822cd(0x7ec)]+'\x20('+this['instance'][_0x1822cd(0x3d9)]+_0x1822cd(0x7bd)+_0x4e0fd9),new m(_0x4e0fd9);}}async[a0_0x11d42e(0x7da)](){const _0x3ade02=a0_0x11d42e;try{this[_0x3ade02(0x85a)][_0x3ade02(0x70a)](this[_0x3ade02(0x7ec)]+'\x20('+this['instance'][_0x3ade02(0x3d9)]+_0x3ade02(0x2ab)),await this['synchronizeAndMapFlows']();let _0x391c2d=await this[_0x3ade02(0x373)]['flow'][_0x3ade02(0x31c)]({'where':{'globalShow':!0x0}});return[...this[_0x3ade02(0x747)][_0x3ade02(0x814)],..._0x391c2d];}catch(_0xddd774){return this[_0x3ade02(0x85a)][_0x3ade02(0x7bf)](this[_0x3ade02(0x7ec)]+'\x20('+this[_0x3ade02(0x22f)][_0x3ade02(0x3d9)]+'):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20'+(_0xddd774 instanceof Error?_0xddd774[_0x3ade02(0x5a8)]:JSON['stringify'](_0xddd774,null,0x2))),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+(_0xddd774 instanceof Error?_0xddd774[_0x3ade02(0x5a8)]:String(_0xddd774))};}}async[a0_0x11d42e(0x4da)](_0x3e486e,_0x1272d2){const _0xcb68a4=a0_0x11d42e;try{this[_0xcb68a4(0x85a)][_0xcb68a4(0x70a)](this[_0xcb68a4(0x7ec)]+'\x20('+this[_0xcb68a4(0x22f)]['wuid']+'):\x20Alterando\x20fluxo...');let _0xb2d083=this[_0xcb68a4(0x747)][_0xcb68a4(0x814)]['find'](_0x2568f1=>_0x2568f1[_0xcb68a4(0x665)]===_0x3e486e[_0xcb68a4(0x665)]);if(!_0xb2d083)throw this[_0xcb68a4(0x85a)]['verbose'](this[_0xcb68a4(0x7ec)]+'\x20('+this['instance'][_0xcb68a4(0x3d9)]+_0xcb68a4(0x5db)+_0x3e486e[_0xcb68a4(0x665)]+_0xcb68a4(0x56b)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x15464d=await this[_0xcb68a4(0x373)][_0xcb68a4(0x5b3)][_0xcb68a4(0x588)]({'where':{'_id':_0x3e486e[_0xcb68a4(0x665)]}});if(!_0x15464d||!_0x15464d[_0xcb68a4(0x6ee)]?.[_0xcb68a4(0x3ef)](this[_0xcb68a4(0x22f)][_0xcb68a4(0x3d9)]))throw this[_0xcb68a4(0x85a)][_0xcb68a4(0x7bf)](this[_0xcb68a4(0x7ec)]+'\x20('+this['instance'][_0xcb68a4(0x3d9)]+_0xcb68a4(0x691)+_0x3e486e[_0xcb68a4(0x665)]+_0xcb68a4(0x552)),new m(_0xcb68a4(0x838)+_0x3e486e[_0xcb68a4(0x665)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0xdf083e=this[_0xcb68a4(0x747)][_0xcb68a4(0x814)][_0xcb68a4(0x44e)](_0x30da3a=>_0x30da3a[_0xcb68a4(0x665)]===_0xb2d083[_0xcb68a4(0x665)]);if(_0xdf083e!==-0x1){let _0x2c9f4b=this[_0xcb68a4(0x747)][_0xcb68a4(0x814)][_0xdf083e];if(_0x2c9f4b[_0xcb68a4(0x414)]=_0x3e486e[_0xcb68a4(0x414)]??_0x2c9f4b[_0xcb68a4(0x414)],_0x2c9f4b['default']=_0x3e486e[_0xcb68a4(0x3de)]??_0x2c9f4b[_0xcb68a4(0x3de)],_0x2c9f4b[_0xcb68a4(0x8be)]=_0x3e486e[_0xcb68a4(0x8be)]??_0x2c9f4b[_0xcb68a4(0x8be)],_0x2c9f4b[_0xcb68a4(0x6d2)]=_0x3e486e[_0xcb68a4(0x61d)]??_0x2c9f4b[_0xcb68a4(0x6d2)],_0x2c9f4b[_0xcb68a4(0x6f6)]=_0x3e486e[_0xcb68a4(0x6f6)]??_0x2c9f4b[_0xcb68a4(0x6f6)],_0x2c9f4b[_0xcb68a4(0x151)]=_0x3e486e[_0xcb68a4(0x151)]??_0x2c9f4b[_0xcb68a4(0x151)],_0x3e486e['default']&&this['AutomateSystem']['flows'][_0xcb68a4(0x46a)]((_0x4b923e,_0x3756bb)=>{const _0x4e7168=_0xcb68a4;_0x3756bb!==_0xdf083e&&(_0x4b923e[_0x4e7168(0x3de)]=!0x1);}),this[_0xcb68a4(0x747)]['flows'][_0xdf083e]=_0x2c9f4b,!await this[_0xcb68a4(0x373)][_0xcb68a4(0x82f)][_0xcb68a4(0x8ad)]({'flows':this[_0xcb68a4(0x747)][_0xcb68a4(0x814)]},this[_0xcb68a4(0x22f)][_0xcb68a4(0x3d9)]))throw new m(_0xcb68a4(0x6c3));}let _0x1b0f29=[_0xcb68a4(0x619),'startID',_0xcb68a4(0x504),_0xcb68a4(0x777)];for(let _0x5d2083 of _0x1b0f29)delete _0x3e486e[_0x5d2083];if(_0x15464d[_0xcb68a4(0x2a8)]?.[_0xcb68a4(0x3ef)](this[_0xcb68a4(0x22f)][_0xcb68a4(0x3d9)])||(_0x3e486e={'_id':_0x3e486e[_0xcb68a4(0x665)]}),_0x1272d2!==xi&&_0x3e486e?.[_0xcb68a4(0x8c4)]&&!_0x15464d?.[_0xcb68a4(0x8c4)])throw new m('Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.');let _0x5b4d4b=new Set(_0x3e486e['whoCanEdit']??_0x15464d[_0xcb68a4(0x2a8)]);_0x5b4d4b[_0xcb68a4(0x277)](_0x15464d['owner']);let _0x3e2302=new Set(_0x3e486e['whoCanUse']??_0x15464d[_0xcb68a4(0x6ee)]??[]);_0x5b4d4b[_0xcb68a4(0x46a)](_0x445afd=>_0x3e2302[_0xcb68a4(0x277)](_0x445afd)),_0x3e2302[_0xcb68a4(0x277)](_0x15464d['owner']),this[_0xcb68a4(0x85a)][_0xcb68a4(0x70a)](this[_0xcb68a4(0x7ec)]+'\x20('+this['instance']['wuid']+_0xcb68a4(0x1f9)+Array[_0xcb68a4(0x4dc)](_0x5b4d4b)),this[_0xcb68a4(0x85a)][_0xcb68a4(0x70a)](this[_0xcb68a4(0x7ec)]+'\x20('+this[_0xcb68a4(0x22f)][_0xcb68a4(0x3d9)]+_0xcb68a4(0x7fe)+Array[_0xcb68a4(0x4dc)](_0x3e2302));let _0x1eb071=await this['getValidWhatsAppNumbers'](Array[_0xcb68a4(0x4dc)](_0x3e2302)),_0x26b4ba=Array[_0xcb68a4(0x4dc)](_0x5b4d4b)[_0xcb68a4(0x852)](_0x37f7ed=>_0x1eb071['includes'](_0x37f7ed)),_0x475402=Array[_0xcb68a4(0x4dc)](_0x3e2302)[_0xcb68a4(0x852)](_0x30d734=>_0x1eb071['includes'](_0x30d734));this[_0xcb68a4(0x85a)][_0xcb68a4(0x70a)](this['instanceName']+'\x20('+this[_0xcb68a4(0x22f)]['wuid']+_0xcb68a4(0x304)+_0x26b4ba),this['logger'][_0xcb68a4(0x70a)](this[_0xcb68a4(0x7ec)]+'\x20('+this[_0xcb68a4(0x22f)]['wuid']+'):\x20whoCanUse\x20after\x20validation:\x20'+_0x475402);let _0x385fe2={..._0x15464d,..._0x3e486e,'whoCanEdit':_0x26b4ba,'whoCanUse':_0x475402},_0x593728=await this[_0xcb68a4(0x373)][_0xcb68a4(0x5b3)][_0xcb68a4(0x793)](_0x15464d[_0xcb68a4(0x665)],_0x385fe2);return await this[_0xcb68a4(0x67f)](),_0x593728;}catch(_0x37f5ac){let _0x63e9d7=_0xcb68a4(0x1f8),_0x301ba4=_0x37f5ac instanceof Error?_0x37f5ac[_0xcb68a4(0x5a8)]:typeof _0x37f5ac==_0xcb68a4(0x1cb)?JSON['stringify'](_0x37f5ac):_0x37f5ac,_0x23cb50=_0x63e9d7+':\x20'+_0x301ba4;throw this['logger'][_0xcb68a4(0x7bf)](this['instanceName']+'\x20('+this[_0xcb68a4(0x22f)][_0xcb68a4(0x3d9)]+_0xcb68a4(0x7bd)+_0x23cb50),new m(_0x23cb50);}}async[a0_0x11d42e(0x185)](_0xdcd5a3){const _0x90ed4c=a0_0x11d42e;let _0x4ebac0={'numbers':_0xdcd5a3};return(await this[_0x90ed4c(0x3b1)](_0x4ebac0))['filter'](_0x78bd5c=>_0x78bd5c['exists'])[_0x90ed4c(0x4f6)](_0x2bdd80=>_0x2bdd80[_0x90ed4c(0x2c7)])[_0x90ed4c(0x4f6)](_0x34bf0c=>this['extractPhoneNumber'](_0x34bf0c));}[a0_0x11d42e(0x5d6)](_0x11163f){const _0x5267d9=a0_0x11d42e;let _0xc4e505=_0x11163f[_0x5267d9(0x542)](/\d+/);return _0xc4e505?_0xc4e505[0x0]:'';}async[a0_0x11d42e(0x7be)](_0x4a71ed){const _0x21cc87=a0_0x11d42e;try{if(this[_0x21cc87(0x85a)][_0x21cc87(0x70a)](this[_0x21cc87(0x7ec)]+'\x20('+this[_0x21cc87(0x22f)]['wuid']+_0x21cc87(0x3b9)),!this[_0x21cc87(0x747)]['flows']['find'](_0x6e7cda=>_0x6e7cda[_0x21cc87(0x665)]===_0x4a71ed['_id']))throw this[_0x21cc87(0x85a)]['verbose'](this['instanceName']+'\x20('+this[_0x21cc87(0x22f)][_0x21cc87(0x3d9)]+'):\x20Fluxo\x20\x27'+_0x4a71ed[_0x21cc87(0x665)]+'\x27\x20não\x20encontrado'),new m(_0x21cc87(0x69d));let _0x3892f6=await this['repository'][_0x21cc87(0x5b3)]['findOne']({'where':{'_id':_0x4a71ed['_id']}});if(!_0x3892f6||!_0x3892f6[_0x21cc87(0x6ee)]?.[_0x21cc87(0x3ef)](this[_0x21cc87(0x22f)][_0x21cc87(0x3d9)]))throw this[_0x21cc87(0x85a)][_0x21cc87(0x7bf)](this[_0x21cc87(0x7ec)]+'\x20('+this['instance'][_0x21cc87(0x3d9)]+_0x21cc87(0x691)+_0x4a71ed[_0x21cc87(0x665)]+_0x21cc87(0x552)),new m(_0x21cc87(0x838)+_0x4a71ed[_0x21cc87(0x665)]+_0x21cc87(0x552));if(!_0x3892f6[_0x21cc87(0x2a8)]?.['includes'](this[_0x21cc87(0x22f)][_0x21cc87(0x3d9)]))throw new m(_0x21cc87(0x4d6));let {block:_0x1ab8bf}=_0x4a71ed;_0x1ab8bf?.['copy']?this['copyBlock'](_0x3892f6,_0x4a71ed):_0x1ab8bf?.[_0x21cc87(0x165)]?this[_0x21cc87(0x27c)](_0x3892f6,_0x4a71ed):_0x1ab8bf[_0x21cc87(0x665)]?await this[_0x21cc87(0x430)](_0x3892f6,_0x4a71ed):this[_0x21cc87(0x318)](_0x3892f6,_0x4a71ed);let _0x5e0516=await this['repository'][_0x21cc87(0x5b3)][_0x21cc87(0x793)](_0x3892f6[_0x21cc87(0x665)],_0x3892f6);if(!_0x5e0516)throw new Error(_0x21cc87(0x3c0));return _0x5e0516;}catch(_0x2e2fdd){this[_0x21cc87(0x3b4)]('Erro\x20ao\x20editar\x20o\x20bloco:\x20'+_0x2e2fdd[_0x21cc87(0x5a8)]);}}async[a0_0x11d42e(0x19c)](_0x258522,_0x1639a5){const _0x3bb0d9=a0_0x11d42e;let _0x2ec07b=_0x1639a5[_0x3bb0d9(0x6a9)][_0x3bb0d9(0x665)],_0x19e186=_0x258522['blocks'][_0x3bb0d9(0x6d7)](_0x303a14=>_0x303a14[_0x3bb0d9(0x665)][_0x3bb0d9(0x1d7)]()===_0x2ec07b);if(!_0x19e186){this[_0x3bb0d9(0x85a)]['error'](this[_0x3bb0d9(0x7ec)]+'\x20('+this['instance']['wuid']+_0x3bb0d9(0x2b2)+_0x2ec07b+_0x3bb0d9(0x7dc));return;}this[_0x3bb0d9(0x85a)][_0x3bb0d9(0x70a)](this[_0x3bb0d9(0x7ec)]+'\x20('+this[_0x3bb0d9(0x22f)][_0x3bb0d9(0x3d9)]+_0x3bb0d9(0x722)+JSON[_0x3bb0d9(0x7b9)](_0x19e186));let _0x17ae1e=JSON[_0x3bb0d9(0x5c7)](JSON[_0x3bb0d9(0x7b9)](_0x19e186));_0x17ae1e[_0x3bb0d9(0x665)]=new he[(_0x3bb0d9(0x3de))][(_0x3bb0d9(0x7a6))][(_0x3bb0d9(0x626))](),this[_0x3bb0d9(0x85a)][_0x3bb0d9(0x70a)](this[_0x3bb0d9(0x7ec)]+'\x20('+this['instance']['wuid']+'):\x20Bloco\x20copiado:\x20'+JSON['stringify'](_0x17ae1e)),_0x258522['blocks'][_0x3bb0d9(0x64a)](_0x17ae1e),this['reorderBlocks'](_0x258522['blocks'],_0x17ae1e[_0x3bb0d9(0x1ab)]);}[a0_0x11d42e(0x3b4)](_0x2f6501){const _0x4b946c=a0_0x11d42e;throw this[_0x4b946c(0x85a)][_0x4b946c(0x7bf)](this[_0x4b946c(0x7ec)]+'\x20('+this[_0x4b946c(0x22f)][_0x4b946c(0x3d9)]+_0x4b946c(0x7bd)+_0x2f6501),new m(_0x2f6501);}[a0_0x11d42e(0x27c)](_0x3836b1,_0x425e49){const _0x29edc9=a0_0x11d42e;let {block:_0x397c0e}=_0x425e49;if(_0x397c0e[_0x29edc9(0x748)]===_0x29edc9(0x47e)){this[_0x29edc9(0x3b4)](_0x29edc9(0x289));return;}if(!_0x397c0e['_id']){this['throwAndLogError']('blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco');return;}let _0x3e4a3e=_0x3836b1[_0x29edc9(0x23f)]['find'](_0x5d5559=>_0x5d5559[_0x29edc9(0x665)][_0x29edc9(0x1d7)]()===_0x425e49[_0x29edc9(0x6a9)][_0x29edc9(0x665)]['toString']());if(!_0x3e4a3e){this[_0x29edc9(0x3b4)](_0x29edc9(0x1ca)+_0x397c0e['_id']+_0x29edc9(0x82b));return;}_0x3836b1[_0x29edc9(0x23f)]=_0x3836b1[_0x29edc9(0x23f)]['filter'](_0xfc6f37=>_0xfc6f37[_0x29edc9(0x665)][_0x29edc9(0x1d7)]()!==_0x425e49[_0x29edc9(0x6a9)]['_id'][_0x29edc9(0x1d7)]()),_0x3836b1[_0x29edc9(0x523)]=_0x3836b1[_0x29edc9(0x523)]['filter'](_0x23902a=>_0x23902a['blockId']!==_0x397c0e[_0x29edc9(0x665)][_0x29edc9(0x1d7)]()),_0x3836b1[_0x29edc9(0x6ff)]=_0x3836b1[_0x29edc9(0x6ff)]['filter'](_0x1ab05e=>_0x1ab05e[_0x29edc9(0x545)]!==_0x397c0e['_id'][_0x29edc9(0x1d7)]()),_0x3836b1[_0x29edc9(0x5ca)]=_0x3836b1[_0x29edc9(0x5ca)][_0x29edc9(0x852)](_0x1ec65d=>_0x1ec65d['blockId']!==_0x397c0e['_id'][_0x29edc9(0x1d7)]()),this[_0x29edc9(0x287)](_0x3836b1[_0x29edc9(0x23f)],_0x3e4a3e['groupId']);}async[a0_0x11d42e(0x430)](_0x588833,_0x512fe6){const _0x497e90=a0_0x11d42e;let _0x423146=_0x588833[_0x497e90(0x23f)][_0x497e90(0x44e)](_0x190641=>_0x190641['_id'][_0x497e90(0x1d7)]()===_0x512fe6[_0x497e90(0x6a9)][_0x497e90(0x665)][_0x497e90(0x1d7)]());if(this[_0x497e90(0x85a)][_0x497e90(0x70a)](this[_0x497e90(0x7ec)]+'\x20('+this['instance']['wuid']+_0x497e90(0x18b)+_0x423146),_0x423146===-0x1){this[_0x497e90(0x85a)]['verbose'](_0x497e90(0x1ca)+_0x512fe6[_0x497e90(0x6a9)][_0x497e90(0x665)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}if(_0x588833[_0x497e90(0x23f)][_0x423146]['type']===_0x497e90(0x47e)){let _0x1b9cfc=Object['keys'](_0x512fe6['block']);if(_0x1b9cfc[_0x497e90(0x57a)]>0x2||_0x1b9cfc[_0x497e90(0x57a)]===0x2&&!_0x1b9cfc[_0x497e90(0x3ef)](_0x497e90(0x887))){this[_0x497e90(0x3b4)]('Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão');return;}}let _0x2fe8dd=_0x588833[_0x497e90(0x23f)][_0x423146]['groupId'];for(let _0x5d2a5e in _0x512fe6['block'])_0x512fe6[_0x497e90(0x6a9)][_0x497e90(0x2d4)](_0x5d2a5e)&&(_0x588833[_0x497e90(0x23f)][_0x423146][_0x5d2a5e]=_0x512fe6[_0x497e90(0x6a9)][_0x5d2a5e]);if(this[_0x497e90(0x85a)]['verbose'](this['instanceName']+'\x20('+this[_0x497e90(0x22f)][_0x497e90(0x3d9)]+_0x497e90(0x2f6)+JSON[_0x497e90(0x7b9)](_0x588833[_0x497e90(0x23f)][_0x423146])),_0x588833['blocks'][_0x423146]['apirequest']&&_0x497e90(0x1d9)in _0x588833[_0x497e90(0x23f)][_0x423146][_0x497e90(0x50e)]){this['logger'][_0x497e90(0x70a)](this[_0x497e90(0x7ec)]+'\x20('+this[_0x497e90(0x22f)][_0x497e90(0x3d9)]+_0x497e90(0x38a));let _0x1af831=JSON[_0x497e90(0x7b9)](_0x588833['blocks'][_0x423146][_0x497e90(0x50e)][_0x497e90(0x1d9)],null,0x1);_0x1af831[_0x497e90(0x57a)]>0x2&&(_0x1af831=_0x1af831[_0x497e90(0x431)](0x1,_0x1af831['length']-0x1)[_0x497e90(0x593)]()),_0x588833[_0x497e90(0x23f)][_0x423146][_0x497e90(0x50e)][_0x497e90(0x473)]=_0x1af831;}if(_0x588833[_0x497e90(0x23f)][_0x423146]['apirequest']&&_0x497e90(0x667)in _0x588833[_0x497e90(0x23f)][_0x423146]['apirequest']&&!(_0x497e90(0x2db)in _0x588833['blocks'][_0x423146]['apirequest'])){this['logger'][_0x497e90(0x70a)](this[_0x497e90(0x7ec)]+'\x20('+this[_0x497e90(0x22f)][_0x497e90(0x3d9)]+_0x497e90(0x706)),_0x588833[_0x497e90(0x23f)][_0x423146]['apirequest'][_0x497e90(0x520)]=!0x1;let _0x58527e=JSON[_0x497e90(0x7b9)](_0x588833[_0x497e90(0x23f)][_0x423146]['apirequest'][_0x497e90(0x667)],null,0x2);_0x588833['blocks'][_0x423146][_0x497e90(0x50e)][_0x497e90(0x2db)]=_0x58527e;}if(_0x588833[_0x497e90(0x23f)][_0x423146]['apirequest']&&'bodyString'in _0x588833[_0x497e90(0x23f)][_0x423146]['apirequest']){_0x588833['blocks'][_0x423146]['apirequest'][_0x497e90(0x520)]=!0x1;let _0x2395b3=_0x588833[_0x497e90(0x23f)][_0x423146][_0x497e90(0x50e)][_0x497e90(0x2db)],_0x4e5b32=this['beautifyWithPlaceholders'](_0x2395b3);_0x588833['blocks'][_0x423146][_0x497e90(0x50e)]['bodyString']=_0x4e5b32[_0x497e90(0x428)],_0x588833[_0x497e90(0x23f)][_0x423146][_0x497e90(0x50e)][_0x497e90(0x520)]=_0x4e5b32[_0x497e90(0x7bf)];}let _0x5ae4f8=_0x588833[_0x497e90(0x23f)][_0x423146][_0x497e90(0x1ab)];_0x2fe8dd!==_0x5ae4f8?(this[_0x497e90(0x287)](_0x588833['blocks'],_0x2fe8dd),this['reorderBlocks'](_0x588833[_0x497e90(0x23f)],_0x5ae4f8)):this[_0x497e90(0x287)](_0x588833[_0x497e90(0x23f)],_0x2fe8dd);}[a0_0x11d42e(0x8c6)](_0x412487){const _0x397375=a0_0x11d42e;let _0x369722='\u205f',_0x4e6c8e=!0x1,_0x33577e='';for(let _0x2a86a9=0x0;_0x2a86a9<_0x412487['length'];_0x2a86a9++){let _0x4f55d5=_0x412487[_0x2a86a9];_0x4f55d5==='\x22'&&(_0x2a86a9===0x0||_0x412487[_0x2a86a9-0x1]!=='\x5c')&&(_0x4e6c8e=!_0x4e6c8e),!(!_0x4e6c8e&&(_0x4f55d5==='\x0a'||_0x4f55d5==='\x20'||_0x4f55d5===_0x369722))&&(_0x33577e+=_0x4f55d5);}let _0x26212d={},_0x26c4c7=9876543210.1234,_0x218d30=_0x33577e[_0x397375(0x771)](/\{\{([^}]+)\}\}/g,_0x492686=>{let _0x15bcee=_0x492686,_0x26b7c2=''+_0x26c4c7;return _0x26212d[_0x26b7c2]=_0x15bcee,_0x26c4c7+=0.0001,_0x26b7c2;}),_0x176448='',_0x19b4c5=!0x1;try{let _0xd73720=JSON[_0x397375(0x5c7)](_0x218d30);_0x176448=JSON[_0x397375(0x7b9)](_0xd73720,null,0x2),_0x176448=_0x176448[_0x397375(0x771)](/\n( +)/g,(_0x3d266f,_0x234a3b)=>{const _0x2bae33=_0x397375;let _0x3c6b29=_0x234a3b['length'];return'\x0a'+_0x369722[_0x2bae33(0x157)](_0x3c6b29*0x2);}),_0x176448=_0x176448[_0x397375(0x771)](/(\d{10,}\.\d+)/g,_0x195b91=>_0x26212d[_0x195b91]||_0x195b91);}catch(_0x24ee45){this[_0x397375(0x85a)][_0x397375(0x7bf)]('Error\x20parsing\x20JSON:'+_0x24ee45),_0x176448=_0x412487,_0x19b4c5=!0x0;}return{'result':_0x176448,'error':_0x19b4c5};}[a0_0x11d42e(0x318)](_0x28bb97,_0x2d68ef){const _0x166808=a0_0x11d42e;if(_0x2d68ef['block'][_0x166808(0x748)]==='start'){this[_0x166808(0x3b4)](_0x166808(0x839));return;}if(_0x2d68ef[_0x166808(0x6a9)]['apirequest']&&_0x166808(0x1d9)in _0x2d68ef[_0x166808(0x6a9)]['apirequest']){this['logger'][_0x166808(0x70a)](this[_0x166808(0x7ec)]+'\x20('+this[_0x166808(0x22f)][_0x166808(0x3d9)]+_0x166808(0x38a));let _0xe4368d=JSON[_0x166808(0x7b9)](_0x2d68ef[_0x166808(0x6a9)][_0x166808(0x50e)]['header'],null,0x1);_0xe4368d[_0x166808(0x57a)]>0x2&&(_0xe4368d=_0xe4368d[_0x166808(0x431)](0x1,_0xe4368d[_0x166808(0x57a)]-0x1)[_0x166808(0x593)]()),_0x2d68ef['block'][_0x166808(0x50e)][_0x166808(0x473)]=_0xe4368d;}_0x2d68ef[_0x166808(0x6a9)][_0x166808(0x50e)]&&_0x166808(0x667)in _0x2d68ef[_0x166808(0x6a9)][_0x166808(0x50e)]&&(this[_0x166808(0x85a)]['verbose'](this[_0x166808(0x7ec)]+'\x20('+this[_0x166808(0x22f)][_0x166808(0x3d9)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x2d68ef[_0x166808(0x6a9)][_0x166808(0x50e)][_0x166808(0x2db)]=JSON[_0x166808(0x7b9)](_0x2d68ef[_0x166808(0x6a9)][_0x166808(0x50e)]['body'],null,0x1)[_0x166808(0x593)]()),_0x28bb97[_0x166808(0x23f)][_0x166808(0x64a)](_0x2d68ef[_0x166808(0x6a9)]),this[_0x166808(0x287)](_0x28bb97[_0x166808(0x23f)],_0x2d68ef[_0x166808(0x6a9)][_0x166808(0x1ab)]);}['reorderBlocks'](_0x1d2628,_0x115b6f){const _0x36828=a0_0x11d42e;let _0x231c57=_0x1d2628[_0x36828(0x852)](_0x36ffa4=>_0x36ffa4[_0x36828(0x1ab)]===_0x115b6f);_0x231c57[_0x36828(0x7aa)]((_0x4a6332,_0x37678f)=>_0x4a6332['order']-_0x37678f[_0x36828(0x879)]),_0x231c57[_0x36828(0x46a)]((_0x204691,_0x39a5e2)=>_0x204691['order']=_0x39a5e2+0x1);}async['editFlowReply'](_0x2da3ad){const _0x4dc885=a0_0x11d42e;try{if(this['logger'][_0x4dc885(0x70a)](this[_0x4dc885(0x7ec)]+'\x20('+this[_0x4dc885(0x22f)][_0x4dc885(0x3d9)]+_0x4dc885(0x88d)),!_0x2da3ad||!_0x2da3ad[_0x4dc885(0x61e)]){this['throwAndLogError'](_0x4dc885(0x459));return;}if(!this[_0x4dc885(0x747)][_0x4dc885(0x814)][_0x4dc885(0x6d7)](_0x10c509=>_0x10c509[_0x4dc885(0x665)]===_0x2da3ad[_0x4dc885(0x665)]))throw this['logger']['verbose'](this[_0x4dc885(0x7ec)]+'\x20('+this[_0x4dc885(0x22f)][_0x4dc885(0x3d9)]+_0x4dc885(0x5db)+_0x2da3ad['_id']+_0x4dc885(0x56b)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x3b8b28=await this[_0x4dc885(0x373)][_0x4dc885(0x5b3)][_0x4dc885(0x588)]({'where':{'_id':_0x2da3ad['_id']}});if(!_0x3b8b28||!_0x3b8b28[_0x4dc885(0x6ee)]?.[_0x4dc885(0x3ef)](this[_0x4dc885(0x22f)][_0x4dc885(0x3d9)]))throw this[_0x4dc885(0x85a)][_0x4dc885(0x7bf)](this[_0x4dc885(0x7ec)]+'\x20('+this[_0x4dc885(0x22f)][_0x4dc885(0x3d9)]+_0x4dc885(0x691)+_0x2da3ad[_0x4dc885(0x665)]+_0x4dc885(0x552)),new m(_0x4dc885(0x838)+_0x2da3ad[_0x4dc885(0x665)]+_0x4dc885(0x552));if(!_0x3b8b28[_0x4dc885(0x2a8)]?.['includes'](this[_0x4dc885(0x22f)][_0x4dc885(0x3d9)]))throw new m(_0x4dc885(0x4d6));let {replyOption:_0x1281a6}=_0x2da3ad;_0x1281a6?.[_0x4dc885(0x165)]?(this[_0x4dc885(0x197)](_0x3b8b28,_0x2da3ad),this[_0x4dc885(0x2d8)](_0x3b8b28['replyOptions'],_0x2da3ad[_0x4dc885(0x61e)][_0x4dc885(0x545)])):_0x1281a6[_0x4dc885(0x665)]?(await this[_0x4dc885(0x429)](_0x3b8b28,_0x2da3ad),this['reorderReplyOptions'](_0x3b8b28[_0x4dc885(0x5ca)],_0x2da3ad[_0x4dc885(0x61e)]['blockId'])):(this[_0x4dc885(0x500)](_0x3b8b28,_0x2da3ad),this[_0x4dc885(0x2d8)](_0x3b8b28['replyOptions'],_0x2da3ad[_0x4dc885(0x61e)][_0x4dc885(0x545)]));let _0x356e1f=await this['repository'][_0x4dc885(0x5b3)]['updateOne'](_0x3b8b28[_0x4dc885(0x665)],_0x3b8b28);if(!_0x356e1f)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x356e1f;}catch(_0x4c5263){this[_0x4dc885(0x3b4)](_0x4dc885(0x51f)+_0x4c5263);}}['reorderReplyOptions'](_0x2aeb1a,_0xc752d1){const _0x5974b5=a0_0x11d42e;_0x2aeb1a[_0x5974b5(0x46a)](_0x20be56=>{const _0x5e3ba8=_0x5974b5;_0x20be56[_0x5e3ba8(0x545)]===_0xc752d1&&_0x20be56[_0x5e3ba8(0x879)]===void 0x0&&(_0x20be56[_0x5e3ba8(0x879)]=0x270f);});let _0x16dd25=_0x2aeb1a['filter'](_0x1b94f2=>_0x1b94f2[_0x5974b5(0x545)]===_0xc752d1);_0x16dd25[_0x5974b5(0x7aa)]((_0x137cfc,_0xc95309)=>_0x137cfc[_0x5974b5(0x879)]-_0xc95309['order']),_0x16dd25[_0x5974b5(0x46a)]((_0x11a0e3,_0x1ae3c9)=>{_0x11a0e3['order']=_0x1ae3c9+0x1;}),_0x2aeb1a[_0x5974b5(0x46a)](_0x29e9d7=>{const _0x54616f=_0x5974b5;if(_0x29e9d7[_0x54616f(0x545)]===_0xc752d1){let _0x24c4c9=_0x16dd25[_0x54616f(0x6d7)](_0x54ffb6=>_0x54ffb6[_0x54616f(0x665)]&&_0x29e9d7[_0x54616f(0x665)]&&_0x54ffb6['_id']['toString']()===_0x29e9d7[_0x54616f(0x665)]['toString']());_0x24c4c9&&(_0x29e9d7[_0x54616f(0x879)]=_0x24c4c9[_0x54616f(0x879)]);}});}[a0_0x11d42e(0x197)](_0x4cf7a6,_0x2466de){const _0x18a9f6=a0_0x11d42e;let {replyOption:_0x1c5334}=_0x2466de;if(!_0x1c5334[_0x18a9f6(0x665)]){this['throwAndLogError'](_0x18a9f6(0x6a0));return;}if(!_0x4cf7a6[_0x18a9f6(0x5ca)]['find'](_0x465ce7=>_0x465ce7[_0x18a9f6(0x665)][_0x18a9f6(0x1d7)]()===_0x2466de[_0x18a9f6(0x61e)][_0x18a9f6(0x665)][_0x18a9f6(0x1d7)]())){this['throwAndLogError'](_0x18a9f6(0x627)+_0x1c5334[_0x18a9f6(0x665)]+'\x20não\x20encontrado');return;}_0x4cf7a6[_0x18a9f6(0x5ca)]=_0x4cf7a6['replyOptions']['filter'](_0x37a413=>_0x37a413[_0x18a9f6(0x665)][_0x18a9f6(0x1d7)]()!==_0x2466de['replyOption'][_0x18a9f6(0x665)][_0x18a9f6(0x1d7)]());}async[a0_0x11d42e(0x429)](_0x2fbe60,_0x3d9bbe){const _0x54bb43=a0_0x11d42e;let _0x3b939f=_0x2fbe60[_0x54bb43(0x5ca)]['findIndex'](_0x4c23ce=>_0x4c23ce['_id'][_0x54bb43(0x1d7)]()===_0x3d9bbe[_0x54bb43(0x61e)][_0x54bb43(0x665)][_0x54bb43(0x1d7)]());if(_0x3b939f===-0x1){this[_0x54bb43(0x3b4)](_0x54bb43(0x627)+_0x3d9bbe['replyOption']['_id']+_0x54bb43(0x799));return;}for(let _0x3e82a7 in _0x3d9bbe[_0x54bb43(0x61e)])_0x3d9bbe[_0x54bb43(0x61e)][_0x54bb43(0x2d4)](_0x3e82a7)&&(_0x2fbe60[_0x54bb43(0x5ca)][_0x3b939f][_0x3e82a7]=_0x3d9bbe[_0x54bb43(0x61e)][_0x3e82a7]);}[a0_0x11d42e(0x500)](_0x51f35c,_0x309cb3){const _0x3d681f=a0_0x11d42e;_0x51f35c[_0x3d681f(0x5ca)]['push'](_0x309cb3[_0x3d681f(0x61e)]);}async[a0_0x11d42e(0x7ae)](_0x55400e){const _0xe12e6b=a0_0x11d42e;this[_0xe12e6b(0x85a)][_0xe12e6b(0x70a)](this[_0xe12e6b(0x7ec)]+'\x20('+this['instance']['wuid']+'):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20'+JSON['stringify'](_0x55400e,null,0x2));try{if(this['logger'][_0xe12e6b(0x70a)](this['instanceName']+'\x20('+this['instance'][_0xe12e6b(0x3d9)]+_0xe12e6b(0x7cb)),!this[_0xe12e6b(0x747)][_0xe12e6b(0x814)]['find'](_0x1bc08f=>_0x1bc08f['_id']===_0x55400e['_id']))throw this[_0xe12e6b(0x85a)][_0xe12e6b(0x70a)](this['instanceName']+'\x20('+this[_0xe12e6b(0x22f)][_0xe12e6b(0x3d9)]+_0xe12e6b(0x5db)+_0x55400e[_0xe12e6b(0x665)]+_0xe12e6b(0x56b)),new m(_0xe12e6b(0x69d));let _0x1d004f=await this['repository']['flow'][_0xe12e6b(0x588)]({'where':{'_id':_0x55400e[_0xe12e6b(0x665)]}});if(!_0x1d004f||!_0x1d004f[_0xe12e6b(0x6ee)]?.['includes'](this[_0xe12e6b(0x22f)][_0xe12e6b(0x3d9)]))throw this['logger'][_0xe12e6b(0x7bf)](this[_0xe12e6b(0x7ec)]+'\x20('+this[_0xe12e6b(0x22f)]['wuid']+_0xe12e6b(0x691)+_0x55400e[_0xe12e6b(0x665)]+_0xe12e6b(0x552)),new m(_0xe12e6b(0x838)+_0x55400e[_0xe12e6b(0x665)]+_0xe12e6b(0x552));if(!_0x1d004f[_0xe12e6b(0x2a8)]?.[_0xe12e6b(0x3ef)](this[_0xe12e6b(0x22f)][_0xe12e6b(0x3d9)]))throw new m(_0xe12e6b(0x4d6));if(_0x55400e['group']&&_0x55400e[_0xe12e6b(0x656)]?.[_0xe12e6b(0x165)]===!0x0){if(this[_0xe12e6b(0x85a)][_0xe12e6b(0x70a)](this[_0xe12e6b(0x7ec)]+'\x20('+this[_0xe12e6b(0x22f)]['wuid']+_0xe12e6b(0x249)),_0x55400e['group'][_0xe12e6b(0x3de)]===!0x0)return{'message':_0xe12e6b(0x5eb)};if(_0x1d004f[_0xe12e6b(0x23f)][_0xe12e6b(0x5f8)](_0x2d0be2=>_0x2d0be2['groupId'][_0xe12e6b(0x1d7)]()===_0x55400e[_0xe12e6b(0x656)]['_id']))return this[_0xe12e6b(0x85a)][_0xe12e6b(0x70a)](this[_0xe12e6b(0x7ec)]+'\x20('+this['instance'][_0xe12e6b(0x3d9)]+'):\x20tem\x20blocks'),{'message':_0xe12e6b(0x337)};_0x1d004f[_0xe12e6b(0x4f5)]=_0x1d004f[_0xe12e6b(0x4f5)][_0xe12e6b(0x852)](_0x402756=>_0x402756['_id'][_0xe12e6b(0x1d7)]()!==_0x55400e[_0xe12e6b(0x656)][_0xe12e6b(0x665)]);}else{if(_0x55400e[_0xe12e6b(0x656)]){if(_0x55400e[_0xe12e6b(0x656)][_0xe12e6b(0x3de)]===!0x0)return{'message':'Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão'};if(_0x55400e[_0xe12e6b(0x656)][_0xe12e6b(0x665)]){let _0x56d31e=_0x1d004f['groups'][_0xe12e6b(0x6d7)](_0x274730=>_0x274730['_id']['toString']()===_0x55400e[_0xe12e6b(0x656)]['_id']);_0x56d31e&&(_0x55400e[_0xe12e6b(0x656)]['x']<0x0&&(_0x55400e[_0xe12e6b(0x656)]['x']=0x0),_0x55400e['group']['y']<0x0&&(_0x55400e[_0xe12e6b(0x656)]['y']=0x0),Object[_0xe12e6b(0x7b3)](_0x56d31e,_0x55400e['group']));}else _0x1d004f[_0xe12e6b(0x4f5)][_0xe12e6b(0x64a)](_0x55400e['group']);}}let _0x322a81=await this[_0xe12e6b(0x373)][_0xe12e6b(0x5b3)][_0xe12e6b(0x793)](_0x1d004f['_id'],_0x1d004f);if(!_0x322a81)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x322a81;}catch(_0x153632){let _0x393876=_0xe12e6b(0x76e),_0xf29ed4=_0x153632 instanceof Error?_0x153632[_0xe12e6b(0x5a8)]:typeof _0x153632=='object'?JSON[_0xe12e6b(0x7b9)](_0x153632):_0x153632,_0x5d294e=_0x393876+':\x20'+_0xf29ed4;throw this['logger']['error'](this[_0xe12e6b(0x7ec)]+'\x20('+this[_0xe12e6b(0x22f)]['wuid']+_0xe12e6b(0x7bd)+_0x5d294e),new m(_0x5d294e);}}async[a0_0x11d42e(0x42e)](_0x2f20fc){const _0xb62526=a0_0x11d42e;try{if(this['logger'][_0xb62526(0x70a)](this[_0xb62526(0x7ec)]+'\x20('+this[_0xb62526(0x22f)][_0xb62526(0x3d9)]+'):\x20Editando\x20condição\x20do\x20fluxo...'),!this[_0xb62526(0x747)][_0xb62526(0x814)][_0xb62526(0x6d7)](_0x3fa880=>_0x3fa880[_0xb62526(0x665)]===_0x2f20fc[_0xb62526(0x665)]))throw this[_0xb62526(0x85a)][_0xb62526(0x70a)](this[_0xb62526(0x7ec)]+'\x20('+this[_0xb62526(0x22f)]['wuid']+_0xb62526(0x5db)+_0x2f20fc['_id']+'\x27\x20não\x20encontrado'),new m(_0xb62526(0x69d));let _0x435646=await this[_0xb62526(0x373)][_0xb62526(0x5b3)][_0xb62526(0x588)]({'where':{'_id':_0x2f20fc[_0xb62526(0x665)]}});if(!_0x435646||!_0x435646[_0xb62526(0x6ee)]?.[_0xb62526(0x3ef)](this[_0xb62526(0x22f)]['wuid']))throw this[_0xb62526(0x85a)][_0xb62526(0x7bf)](this['instanceName']+'\x20('+this[_0xb62526(0x22f)]['wuid']+_0xb62526(0x691)+_0x2f20fc[_0xb62526(0x665)]+_0xb62526(0x552)),new m(_0xb62526(0x838)+_0x2f20fc[_0xb62526(0x665)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x435646[_0xb62526(0x2a8)]?.[_0xb62526(0x3ef)](this['instance']['wuid']))throw new m(_0xb62526(0x4d6));let _0x372c12=!0x1;if(_0x2f20fc[_0xb62526(0x77d)]?.[_0xb62526(0x165)]===!0x0)_0x435646['conditions']=_0x435646[_0xb62526(0x523)][_0xb62526(0x852)](_0x2021b2=>_0x2021b2&&_0x2f20fc[_0xb62526(0x77d)]&&_0x2021b2[_0xb62526(0x665)]&&_0x2f20fc[_0xb62526(0x77d)][_0xb62526(0x665)]&&_0x2021b2[_0xb62526(0x665)][_0xb62526(0x1d7)]()!==_0x2f20fc['condition']['_id'][_0xb62526(0x1d7)]()),_0x372c12=!0x0;else{let _0x16eaf5=_0x435646[_0xb62526(0x523)][_0xb62526(0x6d7)](_0x532f32=>_0x532f32&&_0x2f20fc['condition']&&_0x532f32[_0xb62526(0x665)]&&_0x2f20fc['condition'][_0xb62526(0x665)]&&_0x532f32[_0xb62526(0x665)][_0xb62526(0x1d7)]()===_0x2f20fc[_0xb62526(0x77d)][_0xb62526(0x665)][_0xb62526(0x1d7)]());_0x16eaf5?(_0x372c12=_0x16eaf5['order']!==_0x2f20fc[_0xb62526(0x77d)][_0xb62526(0x879)],Object[_0xb62526(0x7b3)](_0x16eaf5,_0x2f20fc[_0xb62526(0x77d)])):(_0x435646[_0xb62526(0x523)][_0xb62526(0x64a)](_0x2f20fc[_0xb62526(0x77d)]),_0x372c12=!0x0);}if(_0x372c12){_0x435646[_0xb62526(0x523)][_0xb62526(0x7aa)]((_0x56f596,_0x2dea78)=>_0x56f596['order']>_0x2dea78['order']?0x1:_0x2dea78[_0xb62526(0x879)]>_0x56f596[_0xb62526(0x879)]?-0x1:0x0);for(let _0x436478=0x0;_0x436478<_0x435646['conditions']['length'];_0x436478++)_0x435646[_0xb62526(0x523)][_0x436478][_0xb62526(0x879)]=_0x436478+0x1;_0x435646[_0xb62526(0x523)][_0xb62526(0x57a)]>0x0&&(_0x435646[_0xb62526(0x523)][0x0][_0xb62526(0x749)]=_0xb62526(0x4fb));}let _0x10a9c1=await this[_0xb62526(0x373)][_0xb62526(0x5b3)][_0xb62526(0x793)](_0x435646['_id'],_0x435646);if(!_0x10a9c1)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x10a9c1;}catch(_0x3c350b){let _0x29d7d6='Erro\x20ao\x20editar\x20condição\x20do\x20fluxo',_0x1c9043=_0x3c350b instanceof Error?_0x3c350b[_0xb62526(0x5a8)]:typeof _0x3c350b==_0xb62526(0x1cb)?JSON[_0xb62526(0x7b9)](_0x3c350b):_0x3c350b,_0x333ed4=_0x29d7d6+':\x20'+_0x1c9043;throw this[_0xb62526(0x85a)][_0xb62526(0x7bf)](this['instanceName']+'\x20('+this[_0xb62526(0x22f)]['wuid']+'):\x20'+_0x333ed4),new m(_0x333ed4);}}async['editFlowVaredit'](_0x4f6c34){const _0x25f4b9=a0_0x11d42e;try{if(this[_0x25f4b9(0x85a)][_0x25f4b9(0x70a)](this[_0x25f4b9(0x7ec)]+'\x20('+this[_0x25f4b9(0x22f)][_0x25f4b9(0x3d9)]+_0x25f4b9(0x21a)),!this[_0x25f4b9(0x747)][_0x25f4b9(0x814)][_0x25f4b9(0x6d7)](_0x3da6b0=>_0x3da6b0[_0x25f4b9(0x665)]===_0x4f6c34[_0x25f4b9(0x665)]))throw this[_0x25f4b9(0x85a)][_0x25f4b9(0x70a)](this[_0x25f4b9(0x7ec)]+'\x20('+this['instance']['wuid']+_0x25f4b9(0x5db)+_0x4f6c34[_0x25f4b9(0x665)]+_0x25f4b9(0x56b)),new m(_0x25f4b9(0x69d));let _0x6207b1=await this['repository'][_0x25f4b9(0x5b3)][_0x25f4b9(0x588)]({'where':{'_id':_0x4f6c34[_0x25f4b9(0x665)]}});if(!_0x6207b1||!_0x6207b1[_0x25f4b9(0x6ee)]?.[_0x25f4b9(0x3ef)](this[_0x25f4b9(0x22f)][_0x25f4b9(0x3d9)]))throw this['logger'][_0x25f4b9(0x7bf)](this['instanceName']+'\x20('+this[_0x25f4b9(0x22f)][_0x25f4b9(0x3d9)]+_0x25f4b9(0x691)+_0x4f6c34[_0x25f4b9(0x665)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x25f4b9(0x838)+_0x4f6c34[_0x25f4b9(0x665)]+_0x25f4b9(0x552));if(!_0x6207b1['whoCanEdit']?.['includes'](this[_0x25f4b9(0x22f)]['wuid']))throw new m(_0x25f4b9(0x4d6));let _0x1df5f9=!0x1;if(_0x4f6c34['varedit']?.['delete']===!0x0)_0x6207b1[_0x25f4b9(0x6ff)]=_0x6207b1['varedits'][_0x25f4b9(0x852)](_0x3058b0=>_0x3058b0&&_0x4f6c34[_0x25f4b9(0x60d)]&&_0x3058b0[_0x25f4b9(0x665)]&&_0x4f6c34['varedit'][_0x25f4b9(0x665)]&&_0x3058b0['_id'][_0x25f4b9(0x1d7)]()!==_0x4f6c34[_0x25f4b9(0x60d)][_0x25f4b9(0x665)]['toString']()),_0x1df5f9=!0x0;else{let _0x1d8e48=_0x6207b1['varedits'][_0x25f4b9(0x6d7)](_0x23094b=>_0x23094b&&_0x4f6c34[_0x25f4b9(0x60d)]&&_0x23094b[_0x25f4b9(0x665)]&&_0x4f6c34[_0x25f4b9(0x60d)][_0x25f4b9(0x665)]&&_0x23094b[_0x25f4b9(0x665)][_0x25f4b9(0x1d7)]()===_0x4f6c34[_0x25f4b9(0x60d)]['_id'][_0x25f4b9(0x1d7)]());_0x1d8e48?(_0x1df5f9=_0x1d8e48[_0x25f4b9(0x879)]!==_0x4f6c34[_0x25f4b9(0x60d)][_0x25f4b9(0x879)],Object[_0x25f4b9(0x7b3)](_0x1d8e48,_0x4f6c34[_0x25f4b9(0x60d)])):(_0x6207b1[_0x25f4b9(0x6ff)][_0x25f4b9(0x64a)](_0x4f6c34['varedit']),_0x1df5f9=!0x0);}if(_0x1df5f9){_0x6207b1[_0x25f4b9(0x6ff)][_0x25f4b9(0x7aa)]((_0x315c34,_0x44bb4b)=>_0x315c34[_0x25f4b9(0x879)]>_0x44bb4b['order']?0x1:_0x44bb4b[_0x25f4b9(0x879)]>_0x315c34[_0x25f4b9(0x879)]?-0x1:0x0);for(let _0x3a95ec=0x0;_0x3a95ec<_0x6207b1[_0x25f4b9(0x6ff)]['length'];_0x3a95ec++)_0x6207b1[_0x25f4b9(0x6ff)][_0x3a95ec]['order']=_0x3a95ec+0x1;}let _0x2ac7bc=await this[_0x25f4b9(0x373)][_0x25f4b9(0x5b3)][_0x25f4b9(0x793)](_0x6207b1['_id'],_0x6207b1);if(!_0x2ac7bc)throw new Error(_0x25f4b9(0x3c0));return _0x2ac7bc;}catch(_0x501de8){let _0x2c0fa4=_0x25f4b9(0x1e1),_0x1eead7=_0x501de8 instanceof Error?_0x501de8[_0x25f4b9(0x5a8)]:typeof _0x501de8==_0x25f4b9(0x1cb)?JSON[_0x25f4b9(0x7b9)](_0x501de8):_0x501de8,_0x580110=_0x2c0fa4+':\x20'+_0x1eead7;throw this['logger'][_0x25f4b9(0x7bf)](this['instanceName']+'\x20('+this[_0x25f4b9(0x22f)][_0x25f4b9(0x3d9)]+'):\x20'+_0x580110),new m(_0x580110);}}async[a0_0x11d42e(0x2e0)](_0x2e0856){const _0xb90756=a0_0x11d42e;try{if(this[_0xb90756(0x85a)][_0xb90756(0x70a)](this[_0xb90756(0x7ec)]+'\x20('+this['instance'][_0xb90756(0x3d9)]+'):\x20Editando\x20variável\x20do\x20fluxo...'),!this[_0xb90756(0x747)][_0xb90756(0x814)][_0xb90756(0x6d7)](_0x363537=>_0x363537[_0xb90756(0x665)]===_0x2e0856['_id']))throw this[_0xb90756(0x85a)]['verbose'](this['instanceName']+'\x20('+this[_0xb90756(0x22f)][_0xb90756(0x3d9)]+_0xb90756(0x5db)+_0x2e0856[_0xb90756(0x665)]+_0xb90756(0x56b)),new m(_0xb90756(0x69d));let _0x4d2e32=await this['repository'][_0xb90756(0x5b3)][_0xb90756(0x588)]({'where':{'_id':_0x2e0856[_0xb90756(0x665)]}});if(!_0x4d2e32||!_0x4d2e32[_0xb90756(0x6ee)]?.[_0xb90756(0x3ef)](this[_0xb90756(0x22f)][_0xb90756(0x3d9)]))throw this[_0xb90756(0x85a)][_0xb90756(0x7bf)](this['instanceName']+'\x20('+this[_0xb90756(0x22f)][_0xb90756(0x3d9)]+_0xb90756(0x691)+_0x2e0856['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0xb90756(0x838)+_0x2e0856[_0xb90756(0x665)]+_0xb90756(0x552));if(!_0x4d2e32[_0xb90756(0x2a8)]?.[_0xb90756(0x3ef)](this[_0xb90756(0x22f)][_0xb90756(0x3d9)]))throw new m(_0xb90756(0x4d6));_0x2e0856[_0xb90756(0x128)][_0xb90756(0x414)]=_0x2e0856[_0xb90756(0x128)][_0xb90756(0x414)][_0xb90756(0x593)](),_0x2e0856[_0xb90756(0x128)][_0xb90756(0x414)][_0xb90756(0x724)]('_')&&(_0x2e0856['variable'][_0xb90756(0x414)]=_0x2e0856[_0xb90756(0x128)][_0xb90756(0x414)][_0xb90756(0x431)](0x1)),_0x2e0856['variable'][_0xb90756(0x414)]=_0x2e0856[_0xb90756(0x128)][_0xb90756(0x414)][_0xb90756(0x593)]();let _0x158273=_0x4d2e32[_0xb90756(0x563)][_0xb90756(0x6d7)](_0x70f40d=>_0x70f40d[_0xb90756(0x414)]===_0x2e0856[_0xb90756(0x128)]['name']);if(_0x158273?.[_0xb90756(0x7df)]===!0x0)throw new Error('Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0x2e0856[_0xb90756(0x128)]?.['delete']===!0x0){if(!_0x158273)return{'message':'Variável\x20não\x20encontrada!'};_0x4d2e32[_0xb90756(0x563)]=_0x4d2e32[_0xb90756(0x563)][_0xb90756(0x852)](_0x14637c=>_0x14637c[_0xb90756(0x414)]!==_0x2e0856['variable'][_0xb90756(0x414)]);}else _0x158273?Object[_0xb90756(0x7b3)](_0x158273,_0x2e0856['variable']):_0x4d2e32[_0xb90756(0x563)][_0xb90756(0x64a)](_0x2e0856[_0xb90756(0x128)]);let _0x2d06d6=await this[_0xb90756(0x373)][_0xb90756(0x5b3)][_0xb90756(0x793)](_0x4d2e32['_id'],_0x4d2e32);if(!_0x2d06d6)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x2d06d6;}catch(_0x3cdb08){let _0x5b8ee9=_0xb90756(0x2f9),_0x365daa=_0x3cdb08 instanceof Error?_0x3cdb08[_0xb90756(0x5a8)]:typeof _0x3cdb08==_0xb90756(0x1cb)?JSON[_0xb90756(0x7b9)](_0x3cdb08):_0x3cdb08,_0x43d8bf=_0x5b8ee9+':\x20'+_0x365daa;throw this[_0xb90756(0x85a)]['error'](this[_0xb90756(0x7ec)]+'\x20('+this[_0xb90756(0x22f)][_0xb90756(0x3d9)]+_0xb90756(0x7bd)+_0x43d8bf),new m(_0x43d8bf);}}async[a0_0x11d42e(0x1ac)](_0x45cf67){const _0x210544=a0_0x11d42e;let _0x48b252=null;try{if(!this['AutomateSystem']?.[_0x210544(0x560)]['enabled'])throw new m(_0x210544(0x896));this[_0x210544(0x85a)][_0x210544(0x70a)](this[_0x210544(0x7ec)]+'\x20('+this[_0x210544(0x22f)][_0x210544(0x3d9)]+'):\x20Iniciando\x20bot...');let _0x2317c9=(await this[_0x210544(0x3b1)]({'numbers':[_0x45cf67['remoteJid']]}))[0x0];if(!_0x2317c9[_0x210544(0x418)]&&!(0x0,w[_0x210544(0x43d)])(_0x2317c9[_0x210544(0x2c7)])&&!_0x2317c9['jid'][_0x210544(0x3ef)]('@broadcast'))throw _0x48b252=JSON[_0x210544(0x7b9)](_0x2317c9,null,0x2),new m(_0x2317c9);let _0x2c4eec;if(_0x45cf67[_0x210544(0x414)][_0x210544(0x57a)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x210544(0x503)](_0x45cf67[_0x210544(0x414)])?_0x2c4eec=this[_0x210544(0x747)][_0x210544(0x814)][_0x210544(0x6d7)](_0x24b1c=>_0x24b1c['_id']===_0x45cf67[_0x210544(0x414)]):_0x2c4eec=this[_0x210544(0x747)]['flows'][_0x210544(0x6d7)](_0x7c8995=>_0x7c8995['name']===_0x45cf67[_0x210544(0x414)]),!_0x2c4eec)throw this[_0x210544(0x85a)][_0x210544(0x70a)](this[_0x210544(0x7ec)]+'\x20('+this[_0x210544(0x22f)][_0x210544(0x3d9)]+_0x210544(0x5db)+_0x45cf67[_0x210544(0x414)]+_0x210544(0x56b)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x1f35a2=await this['repository']['flow'][_0x210544(0x588)]({'where':{'_id':_0x2c4eec['_id']}});if(!_0x1f35a2||!_0x1f35a2[_0x210544(0x6ee)]?.[_0x210544(0x3ef)](this['instance'][_0x210544(0x3d9)]))throw this['logger']['error'](this[_0x210544(0x7ec)]+'\x20('+this['instance'][_0x210544(0x3d9)]+_0x210544(0x691)+_0x2c4eec[_0x210544(0x665)]+_0x210544(0x552)),_0x48b252=_0x210544(0x838)+_0x2c4eec['_id']+_0x210544(0x552),new m(_0x48b252);let _0x1b1c07=await this['createConversationforStartFlow'](_0x1f35a2,_0x2317c9[_0x210544(0x2c7)],_0x45cf67[_0x210544(0x587)]);if(_0x1b1c07){this[_0x210544(0x85a)][_0x210544(0x70a)](this[_0x210544(0x7ec)]+'\x20('+this[_0x210544(0x22f)][_0x210544(0x3d9)]+_0x210544(0x73a));let _0x22c308=await this[_0x210544(0x4e2)](_0x1b1c07);return _0x22c308&&await this[_0x210544(0x233)](_0x1b1c07,_0x22c308),{'message':_0x210544(0x6b3)+_0x45cf67[_0x210544(0x33f)]};}}catch(_0x3a76fd){if(this[_0x210544(0x85a)]['error'](this[_0x210544(0x7ec)]+'\x20('+this[_0x210544(0x22f)][_0x210544(0x3d9)]+_0x210544(0x77a)+(_0x3a76fd instanceof Error?_0x3a76fd['message']:JSON['stringify'](_0x3a76fd,null,0x2))),_0x48b252=_0x3a76fd instanceof Error?_0x3a76fd[_0x210544(0x5a8)]:JSON[_0x210544(0x7b9)](_0x3a76fd,null,0x2),_0x48b252)throw new m(_0x210544(0x306)+_0x48b252);}}async[a0_0x11d42e(0x3e7)](_0x1c2e5f,_0x2d64e6,_0x173def){const _0x9201fb=a0_0x11d42e;let _0x2ed796=null;try{if(!this[_0x9201fb(0x747)]?.[_0x9201fb(0x560)]['enabled'])throw new m(_0x9201fb(0x896));if(this[_0x9201fb(0x85a)][_0x9201fb(0x70a)](this[_0x9201fb(0x7ec)]+'\x20('+this[_0x9201fb(0x22f)]['wuid']+'):\x20Iniciando\x20bot...'),_0x2d64e6){let _0x13b9d9=(await this[_0x9201fb(0x3b1)]({'numbers':[_0x2d64e6]}))[0x0];if(!_0x13b9d9[_0x9201fb(0x418)]&&!(0x0,w[_0x9201fb(0x43d)])(_0x13b9d9['jid'])&&!_0x13b9d9[_0x9201fb(0x2c7)]['includes'](_0x9201fb(0x31f)))throw _0x2ed796=JSON[_0x9201fb(0x7b9)](_0x13b9d9,null,0x2),new m(_0x13b9d9);_0x2d64e6=_0x13b9d9[_0x9201fb(0x2c7)];}else _0x2d64e6||(_0x2d64e6=(0x0,Q['v4'])());let _0x148326=await this[_0x9201fb(0x373)][_0x9201fb(0x5b3)][_0x9201fb(0x588)]({'where':{'_id':_0x1c2e5f}});if(!_0x148326||!_0x148326[_0x9201fb(0x6ee)]?.[_0x9201fb(0x3ef)](this['instance'][_0x9201fb(0x3d9)]))throw this['logger'][_0x9201fb(0x7bf)](this[_0x9201fb(0x7ec)]+'\x20('+this[_0x9201fb(0x22f)][_0x9201fb(0x3d9)]+'):\x20Flow\x20\x27'+_0x1c2e5f+_0x9201fb(0x552)),new m('Flow\x20\x27'+_0x1c2e5f+_0x9201fb(0x552));let _0x2b523c=await this['createConversationforStartFlow'](_0x148326,_0x2d64e6,null);if(_0x2b523c){this['logger']['verbose'](this[_0x9201fb(0x7ec)]+'\x20('+this[_0x9201fb(0x22f)][_0x9201fb(0x3d9)]+_0x9201fb(0x247));let _0x3173bb;if(_0x173def){let _0x139ac5=_0x2b523c[_0x9201fb(0x24e)][_0x9201fb(0x83c)],_0x146c47=this[_0x9201fb(0x8b8)](_0x173def);Object[_0x9201fb(0x7b3)](_0x139ac5,_0x146c47),_0x2b523c[_0x9201fb(0x24e)][_0x9201fb(0x83c)]=_0x139ac5,_0x3173bb={'error':!0x1,'apiResponse':_0x173def};}let _0x9f58d3=await this[_0x9201fb(0x4e2)](_0x2b523c);return _0x9f58d3&&await this[_0x9201fb(0x233)](_0x2b523c,_0x9f58d3),{'message':_0x9201fb(0x3d5)};}}catch(_0x236371){if(this[_0x9201fb(0x85a)][_0x9201fb(0x7bf)](this[_0x9201fb(0x7ec)]+'\x20('+this[_0x9201fb(0x22f)][_0x9201fb(0x3d9)]+_0x9201fb(0x77a)+(_0x236371 instanceof Error?_0x236371[_0x9201fb(0x5a8)]:JSON['stringify'](_0x236371,null,0x2))),_0x2ed796=_0x236371 instanceof Error?_0x236371[_0x9201fb(0x5a8)]:JSON[_0x9201fb(0x7b9)](_0x236371,null,0x2),_0x2ed796)throw new m(_0x9201fb(0x306)+_0x2ed796);}}async[a0_0x11d42e(0x5d5)](_0x535187){const _0x2bf9f4=a0_0x11d42e;try{let _0x233d95={'remoteJid':_0x535187,'status':_0x2bf9f4(0x78a)},_0x54d839={'status':_0x2bf9f4(0x798)},_0x47709e=await this[_0x2bf9f4(0x373)][_0x2bf9f4(0x713)][_0x2bf9f4(0x6e6)](_0x233d95,_0x54d839,this['instance'][_0x2bf9f4(0x3d9)]);return this[_0x2bf9f4(0x85a)][_0x2bf9f4(0x70a)](this[_0x2bf9f4(0x7ec)]+'\x20('+this[_0x2bf9f4(0x22f)][_0x2bf9f4(0x3d9)]+_0x2bf9f4(0x5bb)),_0x47709e;}catch(_0x4e482d){throw this['logger'][_0x2bf9f4(0x7bf)](this[_0x2bf9f4(0x7ec)]+'\x20('+this['instance'][_0x2bf9f4(0x3d9)]+_0x2bf9f4(0x7d4)+_0x4e482d[_0x2bf9f4(0x5a8)]),_0x4e482d;}}async[a0_0x11d42e(0x816)](_0xf2eb3c,_0x155834,_0x803918){const _0x4bd33d=a0_0x11d42e;this['logger'][_0x4bd33d(0x70a)](this[_0x4bd33d(0x7ec)]+'\x20('+this[_0x4bd33d(0x22f)][_0x4bd33d(0x3d9)]+'):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]'),await this[_0x4bd33d(0x5d5)](_0x155834);try{let _0x5af40f=require('mongodb')[_0x4bd33d(0x626)],_0x230e9c=Date['now'](),_0x4af9f7='start',_0x3969fe={},_0x288c4b={},_0x24c19e=this[_0x4bd33d(0x747)][_0x4bd33d(0x814)]['find'](_0x2d06e8=>_0x2d06e8[_0x4bd33d(0x665)]===_0xf2eb3c['_id']?.[_0x4bd33d(0x1d7)]()),_0x34f1df=_0x24c19e?.[_0x4bd33d(0x6f6)]??_0xf2eb3c[_0x4bd33d(0x6f6)]??0x0,_0x4997f4=_0x24c19e?.[_0x4bd33d(0x151)]??_0xf2eb3c[_0x4bd33d(0x151)]??!0x1,_0x361b11={'flowId':_0xf2eb3c[_0x4bd33d(0x665)],..._0xf2eb3c,'chatLog':null},_0x1157a8=await this['variablesToObject'](_0x361b11[_0x4bd33d(0x563)]),_0xc90691=await this[_0x4bd33d(0x698)](_0x155834),_0x9d2013={..._0x1157a8,..._0xc90691,'_remoteJid':_0x155834},_0x46fd07={'lastReceivedMessage':_0x3969fe,'lastSendMessage':_0x288c4b,'lastBlockId':_0x4af9f7,'lastCondition':!0x0,'realVariables':_0x9d2013};_0x361b11[_0x4bd33d(0x24e)]=_0x46fd07,_0x361b11[_0x4bd33d(0x24e)][_0x4bd33d(0x83c)]={..._0x9d2013,..._0x803918},delete _0x361b11[_0x4bd33d(0x665)],_0x361b11[_0x4bd33d(0x665)]=new _0x5af40f(),_0x361b11[_0x4bd33d(0x35f)]=_0x230e9c,_0x361b11[_0x4bd33d(0x15d)]='open',_0x361b11['remoteJid']=_0x155834,_0x361b11['minutesToClose']=_0x34f1df,_0x361b11[_0x4bd33d(0x151)]=_0x4997f4,_0x361b11[_0x4bd33d(0x665)]=_0xf2eb3c[_0x4bd33d(0x665)];let _0x2a4129=await this[_0x4bd33d(0x373)][_0x4bd33d(0x713)][_0x4bd33d(0x793)](_0x361b11[_0x4bd33d(0x665)],_0x361b11,this['instance']['wuid']);return this[_0x4bd33d(0x85a)][_0x4bd33d(0x70a)](this['instanceName']+'\x20('+this[_0x4bd33d(0x22f)]['wuid']+_0x4bd33d(0x2ac)),_0x2a4129?_0x361b11:null;}catch(_0x1fb6f9){let _0x33ce0e=_0x4bd33d(0x7ab),_0x57d888=_0x1fb6f9 instanceof Error?_0x1fb6f9['message']:typeof _0x1fb6f9==_0x4bd33d(0x1cb)?JSON[_0x4bd33d(0x7b9)](_0x1fb6f9):_0x1fb6f9,_0x3e70ea=_0x33ce0e+':\x20'+_0x57d888;throw this[_0x4bd33d(0x85a)][_0x4bd33d(0x7bf)](this[_0x4bd33d(0x7ec)]+'\x20('+this[_0x4bd33d(0x22f)][_0x4bd33d(0x3d9)]+'):\x20'+_0x3e70ea),new m(_0x3e70ea);}}async[a0_0x11d42e(0x8c1)](_0x376b5e){const _0x14285f=a0_0x11d42e;try{this[_0x14285f(0x85a)]['verbose'](this[_0x14285f(0x7ec)]+'\x20('+this['instance'][_0x14285f(0x3d9)]+_0x14285f(0x8b5)),this['logger'][_0x14285f(0x70a)](this[_0x14285f(0x7ec)]+'\x20('+this['instance'][_0x14285f(0x3d9)]+_0x14285f(0x2fe)+_0x376b5e);let _0x31c459={'where':{'_id':_0x376b5e}};return await this['repository'][_0x14285f(0x713)][_0x14285f(0x588)](_0x31c459,this['instance'][_0x14285f(0x3d9)]);}catch(_0x4bf9ed){let _0x544c47='Erro\x20ao\x20buscar\x20a\x20conversa',_0x5b2307=_0x4bf9ed instanceof Error?_0x4bf9ed[_0x14285f(0x5a8)]:typeof _0x4bf9ed=='object'?JSON[_0x14285f(0x7b9)](_0x4bf9ed):_0x4bf9ed,_0x7d6950=_0x544c47+':\x20'+_0x5b2307;throw this[_0x14285f(0x85a)][_0x14285f(0x7bf)](this[_0x14285f(0x7ec)]+'\x20('+this[_0x14285f(0x22f)]['wuid']+_0x14285f(0x7bd)+_0x7d6950),new m(_0x7d6950);}}async[a0_0x11d42e(0x6cb)](_0x3b8ac4){const _0x7c2ce6=a0_0x11d42e;try{return this[_0x7c2ce6(0x85a)][_0x7c2ce6(0x70a)](this[_0x7c2ce6(0x7ec)]+'\x20('+this[_0x7c2ce6(0x22f)][_0x7c2ce6(0x3d9)]+_0x7c2ce6(0x732)),await this[_0x7c2ce6(0x373)]['flowConversation'][_0x7c2ce6(0x6d7)](_0x3b8ac4,this[_0x7c2ce6(0x22f)][_0x7c2ce6(0x3d9)]);}catch(_0xcdd4ee){let _0x563fc9=_0x7c2ce6(0x5b9),_0x2831d3=_0xcdd4ee instanceof Error?_0xcdd4ee[_0x7c2ce6(0x5a8)]:typeof _0xcdd4ee==_0x7c2ce6(0x1cb)?JSON['stringify'](_0xcdd4ee):_0xcdd4ee,_0x3af2ee=_0x563fc9+':\x20'+_0x2831d3;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x7c2ce6(0x22f)][_0x7c2ce6(0x3d9)]+_0x7c2ce6(0x7bd)+_0x3af2ee),new m(_0x3af2ee);}}async[a0_0x11d42e(0x409)](_0x438e60){const _0x3f091b=a0_0x11d42e;try{return this[_0x3f091b(0x85a)][_0x3f091b(0x70a)](this['instanceName']+'\x20('+this[_0x3f091b(0x22f)][_0x3f091b(0x3d9)]+_0x3f091b(0x636)),this[_0x3f091b(0x85a)][_0x3f091b(0x70a)](this[_0x3f091b(0x7ec)]+'\x20('+this[_0x3f091b(0x22f)][_0x3f091b(0x3d9)]+'):\x20Query\x20params:'+_0x438e60),(await this[_0x3f091b(0x373)][_0x3f091b(0x713)][_0x3f091b(0x315)]({'where':{'_id':_0x438e60[_0x3f091b(0x665)]}},this[_0x3f091b(0x22f)]['wuid']))[_0x3f091b(0x5ae)]===0x0?{'message':_0x3f091b(0x64f)}:{'message':'Conversa\x20deletada\x20com\x20sucesso.'};}catch(_0x4453d0){let _0x593320=_0x3f091b(0x244),_0x331518=_0x4453d0 instanceof Error?_0x4453d0[_0x3f091b(0x5a8)]:typeof _0x4453d0==_0x3f091b(0x1cb)?JSON[_0x3f091b(0x7b9)](_0x4453d0):_0x4453d0,_0x58f799=_0x593320+':\x20'+_0x331518;throw this[_0x3f091b(0x85a)][_0x3f091b(0x7bf)](this[_0x3f091b(0x7ec)]+'\x20('+this[_0x3f091b(0x22f)][_0x3f091b(0x3d9)]+_0x3f091b(0x7bd)+_0x58f799),new m(_0x58f799);}}async[a0_0x11d42e(0x68d)](_0x16ad15){const _0x2d2955=a0_0x11d42e;try{let {_id:_0x4f3f25,chatLog:_0xd8ed24,status:_0x1e5821}=_0x16ad15;if(!_0x4f3f25)return{'message':'O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.'};let _0x3f877f={};if(_0x1e5821!==void 0x0&&(_0x3f877f[_0x2d2955(0x15d)]=_0x1e5821),Object[_0x2d2955(0x813)](_0x3f877f)['length']===0x0)return{'message':_0x2d2955(0x7e2)};let _0x32e11a=await this['repository']['flowConversation'][_0x2d2955(0x793)](_0x4f3f25,_0x3f877f,this[_0x2d2955(0x22f)][_0x2d2955(0x3d9)]);return _0x32e11a||{'message':_0x2d2955(0x345)};}catch(_0x1ac6b4){let _0x474bf1=_0x2d2955(0x7eb),_0x154930=_0x1ac6b4 instanceof Error?_0x1ac6b4[_0x2d2955(0x5a8)]:typeof _0x1ac6b4==_0x2d2955(0x1cb)?JSON[_0x2d2955(0x7b9)](_0x1ac6b4):_0x1ac6b4,_0x2bf6a0=_0x474bf1+':\x20'+_0x154930;throw this[_0x2d2955(0x85a)]['error'](this[_0x2d2955(0x7ec)]+'\x20('+this[_0x2d2955(0x22f)][_0x2d2955(0x3d9)]+_0x2d2955(0x7bd)+_0x2bf6a0),new m(_0x2bf6a0);}}async[a0_0x11d42e(0x71b)](_0x236edb){const _0x5d0d6c=a0_0x11d42e;try{_0x236edb[_0x5d0d6c(0x665)]=this[_0x5d0d6c(0x153)](_0x236edb[_0x5d0d6c(0x665)]);let _0x157275=await this[_0x5d0d6c(0x373)][_0x5d0d6c(0x7fa)]['findOne']({'where':{'_id':_0x236edb['_id']}},this['instance'][_0x5d0d6c(0x3d9)]);if(!_0x157275)throw new m(_0x5d0d6c(0x1b2));let {_id:_0x582bff,leadInfo:_0x22e5d2}=_0x236edb;if(!_0x582bff)throw new Error(_0x5d0d6c(0x188));if(_0x236edb[_0x5d0d6c(0x165)]==='all')return await this[_0x5d0d6c(0x324)](_0x236edb['_id']),await this[_0x5d0d6c(0x373)][_0x5d0d6c(0x7fa)][_0x5d0d6c(0x165)]({'where':{'_id':_0x236edb[_0x5d0d6c(0x665)]}},this[_0x5d0d6c(0x22f)][_0x5d0d6c(0x3d9)]),await this[_0x5d0d6c(0x373)][_0x5d0d6c(0x5a8)][_0x5d0d6c(0x165)]({'where':{'key':{'remoteJid':_0x236edb['_id']}}},this['instance'][_0x5d0d6c(0x3d9)]),_0x236edb=await this[_0x5d0d6c(0x373)][_0x5d0d6c(0x7fa)]['updateOne']({'where':{'_id':_0x236edb[_0x5d0d6c(0x665)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x5d0d6c(0x22f)][_0x5d0d6c(0x3d9)]),F(this[_0x5d0d6c(0x7ec)],_0x5d0d6c(0x177),{'chat':_0x236edb}),{'message':'Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.'};if(_0x236edb[_0x5d0d6c(0x165)]===_0x5d0d6c(0x458))return await this[_0x5d0d6c(0x373)]['message'][_0x5d0d6c(0x165)]({'where':{'key':{'remoteJid':_0x236edb[_0x5d0d6c(0x665)]}}},this[_0x5d0d6c(0x22f)][_0x5d0d6c(0x3d9)]),_0x236edb=await this[_0x5d0d6c(0x373)][_0x5d0d6c(0x7fa)]['updateOne']({'where':{'_id':_0x236edb[_0x5d0d6c(0x665)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x5d0d6c(0x22f)][_0x5d0d6c(0x3d9)]),F(this[_0x5d0d6c(0x7ec)],_0x5d0d6c(0x177),{'chat':_0x236edb}),{'message':'Mensagens\x20deletadas\x20com\x20sucesso.'};let _0x2d19cd=(_0x2003b7,_0x2edc66,_0x399d9c)=>{const _0x127262=_0x5d0d6c;_0x2003b7&&_0x399d9c[_0x127262(0x46a)](_0x268b4e=>{const _0x1876ff=_0x127262;_0x2003b7[_0x268b4e]!==void 0x0&&(_0x2edc66[_0x1876ff(0x200)+_0x268b4e]=_0x2003b7[_0x268b4e]);});},_0x468b17={};if(_0x5d0d6c(0x4a2)in _0x236edb&&(this[_0x5d0d6c(0x85a)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x5d0d6c(0x3d9)]+_0x5d0d6c(0x52c)+_0x236edb[_0x5d0d6c(0x665)]),_0x236edb[_0x5d0d6c(0x4a2)]=_0x236edb[_0x5d0d6c(0x4a2)]===0x0?null:-0x1,await this[_0x5d0d6c(0x60c)][_0x5d0d6c(0x70e)]({'mute':_0x236edb['muteEndTime']},_0x236edb[_0x5d0d6c(0x665)]),_0x468b17[_0x5d0d6c(0x4a2)]=Number(_0x236edb[_0x5d0d6c(0x4a2)])),_0x22e5d2&&(_0x2d19cd(_0x22e5d2,_0x468b17,['nome',_0x5d0d6c(0x283),_0x5d0d6c(0x140),_0x5d0d6c(0x268),_0x5d0d6c(0x15d),_0x5d0d6c(0x42d),_0x5d0d6c(0x2ba),_0x5d0d6c(0x55f),_0x5d0d6c(0x36f),_0x5d0d6c(0x535),_0x5d0d6c(0x72d)]),Array[_0x5d0d6c(0x81f)](_0x22e5d2[_0x5d0d6c(0x5c4)])&&(_0x468b17[_0x5d0d6c(0x383)]=_0x22e5d2['customFields']['map'](_0x939038=>({'_id':_0x939038[_0x5d0d6c(0x665)],'value':_0x939038['value']}))),_0x236edb[_0x5d0d6c(0x7df)][_0x5d0d6c(0x535)]!==void 0x0)){let _0x6a9b3a=await this[_0x5d0d6c(0x373)][_0x5d0d6c(0x1dd)][_0x5d0d6c(0x6d7)]({'where':{}},this['instance'][_0x5d0d6c(0x3d9)]),_0x268b1b=new Set(_0x236edb['leadInfo'][_0x5d0d6c(0x535)]||[]),_0x2aa278=new Set(_0x236edb[_0x5d0d6c(0x7df)][_0x5d0d6c(0x535)]),_0x26bf5e=new Set(_0x6a9b3a[_0x5d0d6c(0x4f6)](_0x384508=>_0x384508[_0x5d0d6c(0x665)])),_0x2214a8=[..._0x2aa278][_0x5d0d6c(0x852)](_0x54050b=>!_0x268b1b[_0x5d0d6c(0x51e)](_0x54050b)&&_0x26bf5e[_0x5d0d6c(0x51e)](_0x54050b)),_0x143c5d=[..._0x268b1b]['filter'](_0x4f28f9=>!_0x2aa278[_0x5d0d6c(0x51e)](_0x4f28f9));if(_0x468b17[_0x5d0d6c(0x843)]=[..._0x268b1b],_0x157275&&!_0x157275[_0x5d0d6c(0x574)]){for(let _0x44906e of _0x2214a8)await this[_0x5d0d6c(0x154)](_0x44906e,_0x236edb[_0x5d0d6c(0x665)]),_0x268b1b['add'](_0x44906e);for(let _0x18f9b6 of _0x143c5d)await this[_0x5d0d6c(0x423)](_0x18f9b6,_0x236edb[_0x5d0d6c(0x665)]),_0x268b1b[_0x5d0d6c(0x165)](_0x18f9b6);}}if(_0x236edb['unreadcount']!==void 0x0&&(_0x468b17[_0x5d0d6c(0x544)]=Number(_0x236edb[_0x5d0d6c(0x544)])),Object[_0x5d0d6c(0x813)](_0x468b17)[_0x5d0d6c(0x57a)]===0x0)throw new Error(_0x5d0d6c(0x7e2));let _0x34cb96=await this['repository'][_0x5d0d6c(0x7fa)][_0x5d0d6c(0x793)]({'where':{'_id':_0x236edb['_id']}},_0x468b17,this[_0x5d0d6c(0x22f)][_0x5d0d6c(0x3d9)]);return _0x34cb96&&F(this[_0x5d0d6c(0x7ec)],'chats',{'chat':_0x34cb96}),_0x34cb96?(this[_0x5d0d6c(0x85a)][_0x5d0d6c(0x70a)](this[_0x5d0d6c(0x7ec)]+'\x20('+this[_0x5d0d6c(0x22f)][_0x5d0d6c(0x3d9)]+_0x5d0d6c(0x7bd)+JSON[_0x5d0d6c(0x7b9)](_0x34cb96,null,0x2)),_0x34cb96):{'message':_0x5d0d6c(0x5f9)};}catch(_0x1aff0e){let _0x3bdce3='Erro\x20ao\x20editar\x20o\x20chat',_0x3588f3=_0x1aff0e instanceof Error?_0x1aff0e['message']:typeof _0x1aff0e==_0x5d0d6c(0x1cb)?JSON[_0x5d0d6c(0x7b9)](_0x1aff0e):_0x1aff0e,_0x48c55f=_0x3bdce3+':\x20'+_0x3588f3;throw this[_0x5d0d6c(0x85a)][_0x5d0d6c(0x7bf)](this[_0x5d0d6c(0x7ec)]+'\x20('+this['instance'][_0x5d0d6c(0x3d9)]+_0x5d0d6c(0x7bd)+_0x48c55f),new m(_0x48c55f);}}async['AddChatLabel'](_0x260b76,_0x493b54){const _0x1f8d09=a0_0x11d42e;try{await this[_0x1f8d09(0x60c)][_0x1f8d09(0x7b0)](_0x493b54,_0x260b76),this[_0x1f8d09(0x85a)][_0x1f8d09(0x59a)](this[_0x1f8d09(0x7ec)]+'\x20('+this['instance'][_0x1f8d09(0x3d9)]+_0x1f8d09(0x3af)+_0x260b76+'\x20adicionado\x20ao\x20chat\x20'+_0x493b54+'\x20com\x20sucesso.');}catch(_0x2613f){this[_0x1f8d09(0x85a)][_0x1f8d09(0x7bf)]('Erro\x20ao\x20adicionar\x20label\x20'+_0x260b76+_0x1f8d09(0x22d)+_0x493b54+':\x20'+_0x2613f);}}async[a0_0x11d42e(0x423)](_0x391e9d,_0x32dd06){const _0x51d6d7=a0_0x11d42e;try{await this['client'][_0x51d6d7(0x8b6)](_0x32dd06,_0x391e9d),this[_0x51d6d7(0x85a)][_0x51d6d7(0x59a)](this[_0x51d6d7(0x7ec)]+'\x20('+this[_0x51d6d7(0x22f)][_0x51d6d7(0x3d9)]+_0x51d6d7(0x3af)+_0x391e9d+_0x51d6d7(0x144)+_0x32dd06+_0x51d6d7(0x254));}catch(_0x2c7668){this[_0x51d6d7(0x85a)][_0x51d6d7(0x7bf)](_0x51d6d7(0x1f1)+_0x391e9d+_0x51d6d7(0x682)+_0x32dd06+':\x20'+_0x2c7668);}}async[a0_0x11d42e(0x737)](_0x2e2902){const _0x4e5bd6=a0_0x11d42e;try{let _0xb28575=await this[_0x4e5bd6(0x373)][_0x4e5bd6(0x82f)]['findOrCreate'](this['instance'][_0x4e5bd6(0x3d9)]),_0x21bf6d=_0x2e2902[_0x4e5bd6(0x665)]?_0xb28575[_0x4e5bd6(0x47a)][_0x4e5bd6(0x44e)](_0x58a59c=>_0x58a59c[_0x4e5bd6(0x665)]===_0x2e2902[_0x4e5bd6(0x665)]):-0x1;if(_0x2e2902[_0x4e5bd6(0x165)]&&_0x21bf6d>-0x1)_0xb28575[_0x4e5bd6(0x47a)][_0x4e5bd6(0x1e3)](_0x21bf6d,0x1);else{if(_0x21bf6d>-0x1){let _0x386c94=_0xb28575[_0x4e5bd6(0x47a)][_0x21bf6d];_0x2e2902[_0x4e5bd6(0x83b)]&&(_0x386c94[_0x4e5bd6(0x83b)]=_0x2e2902[_0x4e5bd6(0x83b)]),_0x2e2902[_0x4e5bd6(0x414)]&&(_0x386c94[_0x4e5bd6(0x414)]=_0x2e2902[_0x4e5bd6(0x414)]),_0x2e2902[_0x4e5bd6(0x140)]&&(_0x386c94[_0x4e5bd6(0x140)]=_0x2e2902[_0x4e5bd6(0x140)]),_0x2e2902[_0x4e5bd6(0x822)]&&(_0x386c94['role']=_0x2e2902[_0x4e5bd6(0x822)]);}else _0xb28575['agents'][_0x4e5bd6(0x64a)]({'_id':_0x2e2902[_0x4e5bd6(0x665)]||new he[(_0x4e5bd6(0x3de))]['Types'][(_0x4e5bd6(0x626))]()[_0x4e5bd6(0x1d7)](),'fone':_0x2e2902[_0x4e5bd6(0x83b)],'name':_0x2e2902[_0x4e5bd6(0x414)],'email':_0x2e2902[_0x4e5bd6(0x140)],'role':_0x2e2902[_0x4e5bd6(0x822)]});}let _0x399af6={'agents':_0xb28575[_0x4e5bd6(0x47a)]},_0x3feed4=await this[_0x4e5bd6(0x373)][_0x4e5bd6(0x82f)][_0x4e5bd6(0x8ad)](_0x399af6,this['instance'][_0x4e5bd6(0x3d9)]);return this[_0x4e5bd6(0x747)]=_0x3feed4,this[_0x4e5bd6(0x85a)][_0x4e5bd6(0x70a)](this[_0x4e5bd6(0x7ec)]+'\x20('+this['instance'][_0x4e5bd6(0x3d9)]+'):\x20alterando\x20this.AutomateSystem'),this[_0x4e5bd6(0x85a)][_0x4e5bd6(0x70a)](this['instanceName']+'\x20('+this[_0x4e5bd6(0x22f)][_0x4e5bd6(0x3d9)]+_0x4e5bd6(0x7bd)+this[_0x4e5bd6(0x747)]),_0x3feed4;}catch(_0x5bdffe){let _0xdeec0f=_0x4e5bd6(0x24d),_0x45dfc1=_0x5bdffe instanceof Error?_0x5bdffe[_0x4e5bd6(0x5a8)]:typeof _0x5bdffe==_0x4e5bd6(0x1cb)?JSON[_0x4e5bd6(0x7b9)](_0x5bdffe):_0x5bdffe,_0x45a297=_0xdeec0f+':\x20'+_0x45dfc1;throw this['logger'][_0x4e5bd6(0x7bf)](this[_0x4e5bd6(0x7ec)]+'\x20('+this[_0x4e5bd6(0x22f)]['wuid']+'):\x20'+_0x45a297),new m(_0x45a297);}}async['updateCustomFields'](_0x404413){const _0x1d6eaf=a0_0x11d42e;try{let _0xe252c5=await this[_0x1d6eaf(0x373)][_0x1d6eaf(0x82f)][_0x1d6eaf(0x6a2)](this[_0x1d6eaf(0x22f)][_0x1d6eaf(0x3d9)]),_0x2de79d=_0x404413[_0x1d6eaf(0x665)]?_0xe252c5[_0x1d6eaf(0x5c4)][_0x1d6eaf(0x44e)](_0x890863=>_0x890863[_0x1d6eaf(0x665)]===_0x404413['_id']):-0x1,_0x2c0f24=!0x1,_0x3f7a51=_0xe252c5[_0x1d6eaf(0x5c4)]['some'](_0x54971c=>_0x54971c[_0x1d6eaf(0x879)]===_0x404413[_0x1d6eaf(0x879)]);if(_0x404413[_0x1d6eaf(0x165)]&&_0x2de79d>-0x1)_0xe252c5['customFields']['splice'](_0x2de79d,0x1),_0x2c0f24=!0x0;else{if(_0x2de79d>-0x1){if(_0xe252c5[_0x1d6eaf(0x5c4)][_0x1d6eaf(0x5f8)](_0x46427d=>_0x46427d['name']===_0x404413['name']&&_0x46427d[_0x1d6eaf(0x665)]!==_0x404413[_0x1d6eaf(0x665)]))throw new Error('Nome\x20do\x20campo\x20personalizado\x20já\x20existe.');let _0x1992d2=_0xe252c5[_0x1d6eaf(0x5c4)][_0x2de79d];_0x404413['order']&&(_0x3f7a51||!Number[_0x1d6eaf(0x32c)](_0x404413[_0x1d6eaf(0x879)]))&&(_0x1992d2['order']=_0x404413[_0x1d6eaf(0x879)],_0x2c0f24=!0x0),_0x404413['name']&&(_0x1992d2[_0x1d6eaf(0x414)]=_0x404413[_0x1d6eaf(0x414)]);}else{if(_0xe252c5[_0x1d6eaf(0x5c4)][_0x1d6eaf(0x5f8)](_0x57aced=>_0x57aced[_0x1d6eaf(0x414)]===_0x404413[_0x1d6eaf(0x414)]&&_0x57aced[_0x1d6eaf(0x665)]!==_0x404413[_0x1d6eaf(0x665)]))throw new Error(_0x1d6eaf(0x211));_0xe252c5[_0x1d6eaf(0x5c4)][_0x1d6eaf(0x64a)]({'_id':_0x404413[_0x1d6eaf(0x665)]||new he[(_0x1d6eaf(0x3de))]['Types'][(_0x1d6eaf(0x626))]()['toString'](),'order':_0x404413[_0x1d6eaf(0x879)],'name':_0x404413['name']}),_0x2c0f24=!0x0;}}if(_0x2c0f24){_0xe252c5[_0x1d6eaf(0x5c4)]['sort']((_0x519a6e,_0x9722e8)=>_0x519a6e['order']>_0x9722e8[_0x1d6eaf(0x879)]?0x1:_0x9722e8[_0x1d6eaf(0x879)]>_0x519a6e['order']?-0x1:0x0);for(let _0xdb8308=0x0;_0xdb8308<_0xe252c5[_0x1d6eaf(0x5c4)][_0x1d6eaf(0x57a)];_0xdb8308++)_0xe252c5['customFields'][_0xdb8308][_0x1d6eaf(0x879)]=_0xdb8308+0x1;}let _0x3c3b76=await this[_0x1d6eaf(0x373)]['automateSystem']['update'](_0xe252c5,this['instance'][_0x1d6eaf(0x3d9)]);return this[_0x1d6eaf(0x747)]=_0x3c3b76,this[_0x1d6eaf(0x85a)][_0x1d6eaf(0x70a)](this[_0x1d6eaf(0x7ec)]+'\x20('+this[_0x1d6eaf(0x22f)][_0x1d6eaf(0x3d9)]+_0x1d6eaf(0x4bf)),this[_0x1d6eaf(0x85a)][_0x1d6eaf(0x70a)](this[_0x1d6eaf(0x7ec)]+'\x20('+this['instance']['wuid']+_0x1d6eaf(0x7bd)+this['AutomateSystem']),_0x3c3b76;}catch(_0x26504e){let _0x3e0e6d=_0x1d6eaf(0x75e),_0x42b87b=_0x26504e instanceof Error?_0x26504e['message']:typeof _0x26504e==_0x1d6eaf(0x1cb)?JSON['stringify'](_0x26504e):_0x26504e,_0x562ba2=_0x3e0e6d+':\x20'+_0x42b87b;throw this[_0x1d6eaf(0x85a)][_0x1d6eaf(0x7bf)](this[_0x1d6eaf(0x7ec)]+'\x20('+this[_0x1d6eaf(0x22f)][_0x1d6eaf(0x3d9)]+_0x1d6eaf(0x7bd)+_0x562ba2),new m(_0x562ba2);}}async[a0_0x11d42e(0x7ff)](_0x3cb157){const _0xac552e=a0_0x11d42e;try{let _0x43fe38=await this[_0xac552e(0x373)][_0xac552e(0x82f)][_0xac552e(0x6a2)](this[_0xac552e(0x22f)][_0xac552e(0x3d9)]),_0x12ae19=_0x43fe38?.['autoCompleteMessages']?.['findIndex'](_0xbb3d23=>_0xbb3d23[_0xac552e(0x665)]===_0x3cb157?.['_id']);if(_0x3cb157?.[_0xac552e(0x165)])_0x12ae19>-0x1&&_0x43fe38?.[_0xac552e(0x6d6)]?.['splice'](_0x12ae19,0x1);else{if(_0x12ae19>-0x1){let _0x4a4fcd=_0x43fe38[_0xac552e(0x6d6)][_0x12ae19];_0x4a4fcd[_0xac552e(0x879)]=_0x3cb157?.[_0xac552e(0x879)]||_0x4a4fcd[_0xac552e(0x879)],_0x4a4fcd[_0xac552e(0x34c)]=_0x3cb157?.['command']||_0x4a4fcd[_0xac552e(0x34c)],_0x4a4fcd['message']=_0x3cb157?.[_0xac552e(0x5a8)]||_0x4a4fcd[_0xac552e(0x5a8)];}else{let _0x21e38e={'_id':_0x3cb157?.[_0xac552e(0x665)]||new he[(_0xac552e(0x3de))][(_0xac552e(0x7a6))][(_0xac552e(0x626))]()['toString'](),'order':_0x3cb157?.[_0xac552e(0x879)],'command':_0x3cb157?.[_0xac552e(0x34c)],'message':_0x3cb157?.[_0xac552e(0x5a8)]};_0x43fe38?.[_0xac552e(0x6d6)]?.[_0xac552e(0x64a)](_0x21e38e);}}_0x43fe38?.[_0xac552e(0x6d6)]?.[_0xac552e(0x7aa)]((_0x4e3d0f,_0x446aef)=>_0x4e3d0f['order']-_0x446aef[_0xac552e(0x879)]);let _0x27fcee=await this['repository']['automateSystem'][_0xac552e(0x8ad)](_0x43fe38,this[_0xac552e(0x22f)][_0xac552e(0x3d9)]);return this['AutomateSystem']=_0x27fcee,this[_0xac552e(0x85a)][_0xac552e(0x70a)](this[_0xac552e(0x7ec)]+'\x20('+this[_0xac552e(0x22f)][_0xac552e(0x3d9)]+'):\x20debug\x20alterando\x20this.AutomateSystem'),_0x27fcee;}catch(_0x5e59be){let _0x1e69ff=_0xac552e(0x436),_0x3d3c99=_0x5e59be instanceof Error?_0x5e59be[_0xac552e(0x5a8)]:typeof _0x5e59be==_0xac552e(0x1cb)?JSON[_0xac552e(0x7b9)](_0x5e59be):_0x5e59be,_0x2e87f4=_0x1e69ff+':\x20'+_0x3d3c99;throw this[_0xac552e(0x85a)]['error'](this[_0xac552e(0x7ec)]+'\x20('+this[_0xac552e(0x22f)][_0xac552e(0x3d9)]+_0xac552e(0x7bd)+_0x2e87f4),new m(_0x2e87f4);}}async[a0_0x11d42e(0x172)](_0x443de5){const _0x23560d=a0_0x11d42e;try{let _0x220c8f=await this[_0x23560d(0x373)][_0x23560d(0x82f)]['findOrCreate'](this[_0x23560d(0x22f)][_0x23560d(0x3d9)]);if(!_0x220c8f)throw new Error('Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.');let _0xe7759c={'_id':_0x220c8f[_0x23560d(0x665)],'flowConfig':{'enabled':_0x443de5[_0x23560d(0x227)]??_0x220c8f[_0x23560d(0x560)][_0x23560d(0x227)],'ignoreGroups':_0x443de5['ignoreGroups']??_0x220c8f[_0x23560d(0x560)][_0x23560d(0x59d)],'stopConversation':_0x443de5[_0x23560d(0x308)][_0x23560d(0x593)]()??_0x220c8f[_0x23560d(0x560)][_0x23560d(0x308)]['trim'](),'stopMinutes':_0x443de5[_0x23560d(0x1c4)]??_0x220c8f[_0x23560d(0x560)]['stopMinutes'],'stopWhenYouSendMsg':_0x443de5[_0x23560d(0x55c)]??_0x220c8f[_0x23560d(0x560)][_0x23560d(0x55c)]}},_0x43f2b4=await this[_0x23560d(0x373)][_0x23560d(0x82f)][_0x23560d(0x8ad)](_0xe7759c,this[_0x23560d(0x22f)]['wuid']);return this[_0x23560d(0x747)]=_0x43f2b4,this[_0x23560d(0x85a)][_0x23560d(0x70a)](this['instanceName']+'\x20('+this[_0x23560d(0x22f)][_0x23560d(0x3d9)]+_0x23560d(0x750)),this[_0x23560d(0x85a)][_0x23560d(0x70a)](this['instanceName']+'\x20('+this[_0x23560d(0x22f)][_0x23560d(0x3d9)]+_0x23560d(0x7bd)+this[_0x23560d(0x747)]),setTimeout(()=>this[_0x23560d(0x30c)](),0x7d0),_0x43f2b4;}catch(_0x531b55){let _0x39aa54='Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos',_0x3c9086=_0x531b55 instanceof Error?_0x531b55[_0x23560d(0x5a8)]:typeof _0x531b55==_0x23560d(0x1cb)?JSON[_0x23560d(0x7b9)](_0x531b55):_0x531b55,_0x285dce=_0x39aa54+':\x20'+_0x3c9086;throw this[_0x23560d(0x85a)][_0x23560d(0x7bf)](this[_0x23560d(0x7ec)]+'\x20('+this[_0x23560d(0x22f)][_0x23560d(0x3d9)]+'):\x20'+_0x285dce),new m(_0x285dce);}}async[a0_0x11d42e(0x3ea)](){const _0x47d13c=a0_0x11d42e;try{let _0x576795=await this[_0x47d13c(0x373)][_0x47d13c(0x82f)]['findOrCreate'](this[_0x47d13c(0x22f)][_0x47d13c(0x3d9)]);return this[_0x47d13c(0x747)]=_0x576795,_0x576795;}catch(_0x1dec65){let _0x4260f2=_0x47d13c(0x81a),_0x326de0=_0x1dec65 instanceof Error?_0x1dec65[_0x47d13c(0x5a8)]:typeof _0x1dec65==_0x47d13c(0x1cb)?JSON[_0x47d13c(0x7b9)](_0x1dec65):_0x1dec65,_0x8717ea=_0x4260f2+':\x20'+_0x326de0;throw this[_0x47d13c(0x85a)]['error'](this['instanceName']+'\x20('+this[_0x47d13c(0x22f)][_0x47d13c(0x3d9)]+_0x47d13c(0x7bd)+_0x8717ea),new m(_0x8717ea);}}async[a0_0x11d42e(0x3f6)](){const _0x1fc5b6=a0_0x11d42e;let _0x4fb543=(await import('p-queue'))[_0x1fc5b6(0x3de)];this['queue']=new _0x4fb543({'concurrency':0x1});}async['setRestartTimeout'](){const _0x360dd3=a0_0x11d42e;this[_0x360dd3(0x22f)]['ScheduleMessage'][_0x360dd3(0x333)]&&clearTimeout(this[_0x360dd3(0x22f)][_0x360dd3(0x274)][_0x360dd3(0x333)]),this[_0x360dd3(0x22f)]['ScheduleMessage'][_0x360dd3(0x333)]=setTimeout(()=>{const _0x184161=_0x360dd3;this[_0x184161(0x230)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x11d42e(0x230)](){const _0x8216dc=a0_0x11d42e;let _0x3548a5=this['instance']['ScheduleMessage']['lastSend'];(_0x3548a5===0x0||_0x3548a5===null||Date[_0x8216dc(0x19e)]()-_0x3548a5>=0x1d4c0)&&(this[_0x8216dc(0x85a)][_0x8216dc(0x70a)](this[_0x8216dc(0x7ec)]+'\x20('+this['instance'][_0x8216dc(0x3d9)]+_0x8216dc(0x2eb)),this[_0x8216dc(0x22f)][_0x8216dc(0x274)][_0x8216dc(0x1d1)]=null,this[_0x8216dc(0x22f)][_0x8216dc(0x274)][_0x8216dc(0x401)]=0x0,this[_0x8216dc(0x22f)]['ScheduleMessage']['delayMessage']=0x0,await this[_0x8216dc(0x30c)]());}async[a0_0x11d42e(0x30c)](){const _0xb54ab8=a0_0x11d42e;this[_0xb54ab8(0x85a)][_0xb54ab8(0x4d4)](this[_0xb54ab8(0x7ec)]+'\x20('+this[_0xb54ab8(0x22f)]['wuid']+'):\x20Procurando\x20mensagens\x20para\x20envio'),await this[_0xb54ab8(0x18a)]();let _0x40bf73=await this[_0xb54ab8(0x3c7)]();_0x40bf73[_0xb54ab8(0x57a)]>0x0&&(setTimeout(()=>this[_0xb54ab8(0x230)](),0x14*0x3e8),this[_0xb54ab8(0x85a)][_0xb54ab8(0x4d4)](this[_0xb54ab8(0x7ec)]+'\x20('+this[_0xb54ab8(0x22f)][_0xb54ab8(0x3d9)]+'):\x20Há\x20mensagens\x20prontas,\x20limpando\x20e\x20adicionando\x20à\x20fila'),this[_0xb54ab8(0x605)]['clear'](),this['queue'][_0xb54ab8(0x277)](()=>this[_0xb54ab8(0x3bf)](_0x40bf73)));let _0x3ec108={'where':{'status':_0xb54ab8(0x614),'when':{'$gt':Date[_0xb54ab8(0x19e)]()}}},_0xa442b1=await this[_0xb54ab8(0x373)][_0xb54ab8(0x828)][_0xb54ab8(0x588)](_0x3ec108,this['instance']['wuid']);_0xa442b1&&_0xa442b1[_0xb54ab8(0x1d8)]-Date[_0xb54ab8(0x19e)]()<=0x6ddd00?this[_0xb54ab8(0x22f)][_0xb54ab8(0x274)][_0xb54ab8(0x5c6)]=_0xa442b1[_0xb54ab8(0x1d8)]-Date[_0xb54ab8(0x19e)]():this[_0xb54ab8(0x22f)]['ScheduleMessage']['delayMessage']=(0x3c+Math[_0xb54ab8(0x6d5)](Math['random']()*0x3c))*0x3c*0x3e8,this[_0xb54ab8(0x22f)][_0xb54ab8(0x274)][_0xb54ab8(0x5c6)]=Math['max'](this[_0xb54ab8(0x22f)]['ScheduleMessage'][_0xb54ab8(0x5c6)],0x1*0x2*0x3e8);let _0x5b93d2=Math['round'](this[_0xb54ab8(0x22f)][_0xb54ab8(0x274)][_0xb54ab8(0x5c6)]/0xea60);if(_0xa442b1){let _0x29137d=new Date(_0xa442b1[_0xb54ab8(0x1d8)])[_0xb54ab8(0x1a3)]();this[_0xb54ab8(0x85a)]['warn'](this[_0xb54ab8(0x7ec)]+'\x20('+this['instance']['wuid']+_0xb54ab8(0x2d7)+_0x29137d+_0xb54ab8(0x51b)+_0x5b93d2+_0xb54ab8(0x2f4));}else this[_0xb54ab8(0x85a)][_0xb54ab8(0x4d4)](this[_0xb54ab8(0x7ec)]+'\x20('+this['instance'][_0xb54ab8(0x3d9)]+_0xb54ab8(0x1a7)+_0x5b93d2+'\x20minutos');setTimeout(()=>{const _0x52c833=_0xb54ab8;this[_0x52c833(0x30c)]();},this[_0xb54ab8(0x22f)]['ScheduleMessage']['delayMessage']);}async['getReadyToSendMessages'](){const _0x5df6bf=a0_0x11d42e;this[_0x5df6bf(0x85a)][_0x5df6bf(0x4d4)](this[_0x5df6bf(0x7ec)]+'\x20('+this['instance'][_0x5df6bf(0x3d9)]+_0x5df6bf(0x205));let _0x4e9a42=Date['now']()-0xc*0x3c*0x3c*0x3e8,_0x3b214d={'where':{'status':{'$in':[_0x5df6bf(0x614),'sending']},'$or':[{'when':{'$lte':Date['now'](),'$gte':_0x4e9a42}},{'when':0x0}]}},_0x2ac2a9=await this[_0x5df6bf(0x373)]['scheduleMessage'][_0x5df6bf(0x6d7)](_0x3b214d,this['instance'][_0x5df6bf(0x3d9)]);return this[_0x5df6bf(0x85a)][_0x5df6bf(0x4d4)](this[_0x5df6bf(0x7ec)]+'\x20('+this[_0x5df6bf(0x22f)][_0x5df6bf(0x3d9)]+_0x5df6bf(0x209)+_0x2ac2a9[_0x5df6bf(0x57a)]),_0x2ac2a9;}async[a0_0x11d42e(0x3bf)](_0x312e27){const _0x266104=a0_0x11d42e;this[_0x266104(0x85a)][_0x266104(0x4d4)](this[_0x266104(0x7ec)]+'\x20('+this[_0x266104(0x22f)][_0x266104(0x3d9)]+_0x266104(0x14c));let _0x508461=0x3*0x3e8,_0x33afe6=0x8*0x3e8,_0x3b6c30=Math[_0x266104(0x6d5)](Math[_0x266104(0x311)]()*(_0x33afe6-_0x508461+0x1))+_0x508461,_0xb0b70f=()=>this['pendingMessages'][_0x266104(0x57a)]===0x0?null:this[_0x266104(0x704)][_0x266104(0x6c8)]((_0xa0136e,_0x1fac78)=>(_0xa0136e['order']??Number[_0x266104(0x5a0)])<(_0x1fac78[_0x266104(0x879)]??Number[_0x266104(0x5a0)])?_0xa0136e:_0x1fac78,this[_0x266104(0x704)][0x0]);_0x312e27=await this[_0x266104(0x3c7)]();for(let _0x2caf4a of _0x312e27){await this[_0x266104(0x8b1)]();let _0x2bd7b9=0x3*0x3e8,_0x4e930e={'_id':_0x2caf4a[_0x266104(0x665)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x266104(0x19e)]()-_0x2bd7b9}}]},_0x4ebaa2={'startSend':Date[_0x266104(0x19e)](),'status':'sending'},_0x5a3504=await this['repository'][_0x266104(0x828)]['updateOne'](_0x4e930e,_0x4ebaa2,this['instance'][_0x266104(0x3d9)]);if(this[_0x266104(0x704)]=_0x5a3504['messages'][_0x266104(0x852)](_0x31e3f3=>!_0x31e3f3['triedToSend']),!_0x5a3504){setTimeout(()=>this[_0x266104(0x230)](),0xa*0x3e8);continue;}if(this[_0x266104(0x22f)][_0x266104(0x274)][_0x266104(0x1d1)]=_0x5a3504,!this[_0x266104(0x22f)][_0x266104(0x274)][_0x266104(0x62c)]){this[_0x266104(0x85a)][_0x266104(0x4d4)](this['instanceName']+'\x20('+this[_0x266104(0x22f)][_0x266104(0x3d9)]+_0x266104(0x181));break;}for(;this[_0x266104(0x704)][_0x266104(0x57a)]>0x0;){await this['setRestartTimeout']();let _0x11d030=_0xb0b70f();if(!_0x11d030)break;let _0x474872=_0x2caf4a['messages'][_0x266104(0x6d7)](_0x10086=>_0x10086[_0x266104(0x665)]===_0x11d030[_0x266104(0x665)]);if(!_0x474872)break;if(this[_0x266104(0x22f)][_0x266104(0x274)]['lastSend']=Date['now'](),_0x474872['triedToSend']){this[_0x266104(0x85a)][_0x266104(0x4d4)](this[_0x266104(0x7ec)]+'\x20('+this[_0x266104(0x22f)]['wuid']+_0x266104(0x824)+_0x474872[_0x266104(0x33f)]+_0x266104(0x4a0)),this[_0x266104(0x704)]=this[_0x266104(0x704)][_0x266104(0x852)](_0x5c1f77=>_0x5c1f77['_id']!==_0x474872['_id']);continue;}if(!this[_0x266104(0x22f)][_0x266104(0x274)][_0x266104(0x62c)]){this[_0x266104(0x85a)][_0x266104(0x4d4)](this['instanceName']+'\x20('+this[_0x266104(0x22f)]['wuid']+'):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.');break;}if(!this['instance'][_0x266104(0x274)][_0x266104(0x1d1)]){this[_0x266104(0x85a)][_0x266104(0x4d4)](this[_0x266104(0x7ec)]+'\x20('+this[_0x266104(0x22f)][_0x266104(0x3d9)]+_0x266104(0x60e)+_0x2caf4a[_0x266104(0x665)]+_0x266104(0x4ea));break;}let _0x31a25e={'idControl':_0x474872['_id'],'remoteJid':_0x474872[_0x266104(0x33f)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0x266104(0x19e)]()},_0x3eb494=null;try{this[_0x266104(0x85a)][_0x266104(0x4d4)](this['instanceName']+'\x20('+this[_0x266104(0x22f)][_0x266104(0x3d9)]+_0x266104(0x524)+_0x474872['remoteJid']);let _0x10b2e1=await Promise['race']([this[_0x266104(0x3e9)](_0x474872[_0x266104(0x33f)],_0x474872),this['timeoutPromise'](0x78*0x3e8)]);_0x31a25e[_0x266104(0x7bf)]=_0x10b2e1[_0x266104(0x7bf)],_0x31a25e['id']=_0x10b2e1[_0x266104(0x7bf)]?null:_0x10b2e1['id'],_0x31a25e[_0x266104(0x74f)]=_0x10b2e1[_0x266104(0x7bf)]?_0x10b2e1[_0x266104(0x5b0)]?_0x10b2e1['detail'][_0x266104(0x1d7)]():'':null;let _0x5e212e=_0x2caf4a[_0x266104(0x458)][_0x266104(0x44e)](_0x3f02ff=>_0x3f02ff[_0x266104(0x665)]===_0x474872[_0x266104(0x665)]);_0x5e212e!==-0x1&&(_0x2caf4a[_0x266104(0x458)][_0x5e212e][_0x266104(0x50c)]=!0x0);let _0xdb9799={'$push':{'messagesSend':_0x31a25e},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x35126b=[{'elem._id':_0x474872[_0x266104(0x665)]}];if(this['logger'][_0x266104(0x4d4)](this['instanceName']+'\x20('+this[_0x266104(0x22f)][_0x266104(0x3d9)]+_0x266104(0x6a7)+_0x474872[_0x266104(0x665)]),_0x3eb494=await this[_0x266104(0x373)][_0x266104(0x828)][_0x266104(0x793)]({'_id':_0x2caf4a[_0x266104(0x665)]},_0xdb9799,this['instance'][_0x266104(0x3d9)],{'arrayFilters':_0x35126b}),_0x10b2e1['error']){this[_0x266104(0x85a)][_0x266104(0x7bf)](this[_0x266104(0x7ec)]+'\x20('+this[_0x266104(0x22f)]['wuid']+_0x266104(0x20c)+_0x10b2e1[_0x266104(0x5b0)]);continue;}let _0x3f77c0=this[_0x266104(0x8b2)](_0x2caf4a[_0x266104(0x1b4)],_0x2caf4a['delaySecMax']);await this[_0x266104(0x4c0)](_0x3f77c0);}catch(_0x17b4bf){this[_0x266104(0x85a)][_0x266104(0x7bf)](this[_0x266104(0x7ec)]+'\x20('+this[_0x266104(0x22f)][_0x266104(0x3d9)]+_0x266104(0x262)+_0x474872[_0x266104(0x33f)]+':\x20'+(_0x17b4bf instanceof Error?_0x17b4bf[_0x266104(0x5a8)]:JSON[_0x266104(0x7b9)](_0x17b4bf,null,0x2))),_0x31a25e[_0x266104(0x7bf)]=!0x0,_0x31a25e[_0x266104(0x74f)]=_0x17b4bf['message'];let _0x4c4bd4=_0x2caf4a[_0x266104(0x458)][_0x266104(0x44e)](_0x433b9=>_0x433b9['_id']===_0x474872[_0x266104(0x665)]);_0x4c4bd4!==-0x1&&(_0x2caf4a[_0x266104(0x458)][_0x4c4bd4][_0x266104(0x50c)]=!0x0);let _0x11d8f6={'$push':{'messagesSend':_0x31a25e},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x40da38=[{'elem._id':_0x474872['_id']}];this[_0x266104(0x85a)][_0x266104(0x4d4)](this['instanceName']+'\x20('+this[_0x266104(0x22f)][_0x266104(0x3d9)]+_0x266104(0x83a)+_0x474872[_0x266104(0x665)]),_0x3eb494=await this[_0x266104(0x373)][_0x266104(0x828)][_0x266104(0x793)]({'_id':_0x2caf4a[_0x266104(0x665)]},_0x11d8f6,this['instance'][_0x266104(0x3d9)],{'arrayFilters':_0x40da38});}finally{if(_0x3eb494&&_0x3eb494[_0x266104(0x15d)]===_0x266104(0x47f)){this[_0x266104(0x85a)][_0x266104(0x4d4)](this[_0x266104(0x7ec)]+'\x20('+this[_0x266104(0x22f)][_0x266104(0x3d9)]+_0x266104(0x60e)+_0x474872[_0x266104(0x665)]+_0x266104(0x68a));break;}let _0x305181=_0x3eb494[_0x266104(0x458)]['find'](_0x34e1d8=>_0x34e1d8[_0x266104(0x665)]===_0x474872['_id']);if(_0x305181&&!_0x305181[_0x266104(0x50c)]){let _0x3b5865={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x3e6477=[{'elem._id':_0x474872[_0x266104(0x665)]}];await this[_0x266104(0x373)]['scheduleMessage'][_0x266104(0x793)]({'_id':_0x3eb494[_0x266104(0x665)]},_0x3b5865,this['instance'][_0x266104(0x3d9)],{'arrayFilters':_0x3e6477});}if(this['pendingMessages']=_0x3eb494['messages'][_0x266104(0x852)](_0x1a024a=>!_0x1a024a[_0x266104(0x50c)]),!this[_0x266104(0x22f)][_0x266104(0x274)][_0x266104(0x1d1)]){await this[_0x266104(0x8b1)](),this['logger']['warn'](this[_0x266104(0x7ec)]+'\x20('+this['instance'][_0x266104(0x3d9)]+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x2caf4a[_0x266104(0x665)]+_0x266104(0x4ea));break;}}}this['pendingMessages']=[];let _0x452a38=await this[_0x266104(0x373)][_0x266104(0x828)][_0x266104(0x7b2)](_0x2caf4a[_0x266104(0x665)],this[_0x266104(0x22f)]['wuid']);if(_0x452a38[_0x266104(0x458)][_0x266104(0x5c9)](_0x3261b3=>_0x3261b3[_0x266104(0x50c)])&&_0x452a38[_0x266104(0x15d)]!=='stopped'){let _0x36538e={'$set':{'status':_0x266104(0x2b5)}};await this[_0x266104(0x373)]['scheduleMessage']['updateOneById'](_0x452a38[_0x266104(0x665)],_0x36538e,this[_0x266104(0x22f)][_0x266104(0x3d9)]);}await new Promise(_0x488e2=>setTimeout(_0x488e2,_0x3b6c30)),global['gc']?global['gc']():console[_0x266104(0x4d4)](_0x266104(0x44f));}}[a0_0x11d42e(0x68c)](_0x781dd9){const _0x5e5a04=a0_0x11d42e;return new Promise((_0x53c453,_0x2d10dd)=>setTimeout(()=>_0x2d10dd(new Error(_0x5e5a04(0x644))),_0x781dd9));}['getDelay'](_0x1a9dda,_0x5cf69d){const _0x5e87c5=a0_0x11d42e;return _0x1a9dda=Math[_0x5e87c5(0x71d)](0.5,_0x1a9dda),_0x5cf69d=Math[_0x5e87c5(0x4ba)](Math[_0x5e87c5(0x71d)](0x3,_0x5cf69d),0x78),Math['floor'](Math[_0x5e87c5(0x311)]()*(_0x5cf69d-_0x1a9dda+0x1)+_0x1a9dda)*0x3e8;}[a0_0x11d42e(0x4c0)](_0x5c8362){return new Promise(_0x5a41d2=>setTimeout(_0x5a41d2,_0x5c8362));}async[a0_0x11d42e(0x698)](_0x126b05){const _0x51b071=a0_0x11d42e;if(!this['AutomateSystem']&&(await this['getAutomateSystem'](),!this[_0x51b071(0x747)]))return null;_0x126b05=this[_0x51b071(0x153)](_0x126b05);let _0x3ea38d=await this[_0x51b071(0x373)][_0x51b071(0x7fa)][_0x51b071(0x588)]({'where':{'_id':_0x126b05}},this[_0x51b071(0x22f)][_0x51b071(0x3d9)]),_0x22664b={};if(_0x3ea38d&&_0x3ea38d['leadInfo']){let _0x365647=_0x3ea38d[_0x51b071(0x7df)];typeof _0x365647[_0x51b071(0x2b3)]==_0x51b071(0x4fa)&&(_0x22664b[_0x51b071(0x2b3)]=_0x365647[_0x51b071(0x2b3)]),typeof _0x365647['nomecompleto']==_0x51b071(0x4fa)&&(_0x22664b[_0x51b071(0x283)]=_0x365647[_0x51b071(0x283)]),typeof _0x365647['email']==_0x51b071(0x4fa)&&(_0x22664b[_0x51b071(0x140)]=_0x365647[_0x51b071(0x140)]),typeof _0x365647['cpf']==_0x51b071(0x4fa)&&(_0x22664b[_0x51b071(0x268)]=_0x365647[_0x51b071(0x268)]),typeof _0x365647[_0x51b071(0x15d)]=='string'&&(_0x22664b[_0x51b071(0x15d)]=_0x365647[_0x51b071(0x15d)]),typeof _0x365647[_0x51b071(0x42d)]==_0x51b071(0x4fa)&&(_0x22664b[_0x51b071(0x42d)]=_0x365647[_0x51b071(0x42d)]),typeof _0x365647['responsavelid']==_0x51b071(0x4fa)&&(_0x22664b[_0x51b071(0x36f)]=_0x365647['responsavelid']),Array[_0x51b071(0x81f)](_0x365647[_0x51b071(0x2ba)])&&(_0x22664b[_0x51b071(0x2ba)]=_0x365647[_0x51b071(0x2ba)][_0x51b071(0x7f4)](',\x20')),Array[_0x51b071(0x81f)](_0x365647[_0x51b071(0x535)])&&(_0x22664b[_0x51b071(0x535)]=_0x365647[_0x51b071(0x535)][_0x51b071(0x7f4)](',\x20'));}return _0x3ea38d&&_0x3ea38d[_0x51b071(0x7df)]&&_0x3ea38d['leadInfo'][_0x51b071(0x5c4)]&&_0x3ea38d[_0x51b071(0x7df)][_0x51b071(0x5c4)][_0x51b071(0x46a)](_0x5035d4=>{const _0x34321d=_0x51b071;let _0x49e6fd=this['AutomateSystem']?.[_0x34321d(0x5c4)]['find'](_0x4c613a=>_0x4c613a[_0x34321d(0x665)]===_0x5035d4['_id']);_0x49e6fd&&(_0x22664b[_0x49e6fd['name']]=_0x5035d4[_0x34321d(0x49c)]);}),_0x22664b;}async[a0_0x11d42e(0x2fd)](_0x59b18f,_0x283f68){const _0x2507cd=a0_0x11d42e;try{let _0x1aa642=await this[_0x2507cd(0x698)](_0x283f68);return this[_0x2507cd(0x3a6)](_0x59b18f,_0x1aa642);}catch(_0x4d9722){return this[_0x2507cd(0x85a)][_0x2507cd(0x7bf)](_0x2507cd(0x2f3)+_0x283f68+':\x20'+_0x4d9722),_0x59b18f;}}async[a0_0x11d42e(0x18a)](){const _0xea1b01=a0_0x11d42e;let _0xacea97=async(_0x44de7a,_0x4db2a3)=>{const _0x342567=a0_0x2924;let _0x359a7b=(await this['repository'][_0x342567(0x828)]['find']({'where':{'type':_0x44de7a}},this[_0x342567(0x22f)]['wuid']))[_0x342567(0x4f6)](async _0x94eb99=>{const _0x13dc32=_0x342567;let _0x302d3f=_0x4db2a3(_0x94eb99),_0x5a4e8b=_0x587e3f=>/^\d+$/['test'](_0x587e3f),_0x5890c1=_0x94eb99[_0x13dc32(0x434)][_0x13dc32(0x852)](_0x5f6673=>_0x5f6673[_0x13dc32(0x7b1)](_0x13dc32(0x264))?_0x5f6673[_0x13dc32(0x57a)]>0x19:_0x5f6673[_0x13dc32(0x7b1)](_0x13dc32(0x355))?_0x5f6673[_0x13dc32(0x57a)]>0xf:_0x5a4e8b(_0x5f6673)?_0x5f6673['length']>=0xb:!0x1)['map'](_0x31ae58=>({'_id':(0x0,Q['v4'])(),'idSchedule':_0x94eb99['_id'],'type':_0x302d3f,'remoteJid':_0x31ae58,'flow':_0x94eb99['flowName'],'text':_0x94eb99['message']?.[_0x13dc32(0x8b3)],'delay':_0x94eb99[_0x13dc32(0x5a8)]?.[_0x13dc32(0x779)],'urlOrBase64':_0x94eb99['message']?.['urlOrBase64'],'linkPreview':_0x94eb99[_0x13dc32(0x5a8)]?.[_0x13dc32(0x3ae)],'fileName':_0x94eb99[_0x13dc32(0x5a8)]?.[_0x13dc32(0x329)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x13dc32(0x373)]['scheduleMessage']['updateOneById'](_0x94eb99[_0x13dc32(0x665)],{'$set':{'messages':_0x5890c1},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x13dc32(0x22f)]['wuid']);}catch(_0x4d8649){console[_0x13dc32(0x7bf)](_0x13dc32(0x488)+_0x94eb99[_0x13dc32(0x665)]+':',_0x4d8649);}});await Promise[_0x342567(0x1c6)](_0x359a7b);};await _0xacea97(_0xea1b01(0x8b3),_0x3adabd=>_0xea1b01(0x8b3)),await _0xacea97('media',_0x168b21=>_0x168b21[_0xea1b01(0x5a8)]?.[_0xea1b01(0x72f)]||_0xea1b01(0x583)),await _0xacea97(_0xea1b01(0x43f),_0x2c00d1=>_0xea1b01(0x43f)),await _0xacea97(_0xea1b01(0x5b3),_0x108d91=>'flow'),await _0xacea97(_0xea1b01(0x5d3),_0x10cf9a=>'image'),await _0xacea97('video',_0x3dc5cd=>_0xea1b01(0x594)),await _0xacea97('document',_0x5e10df=>_0xea1b01(0x393)),this[_0xea1b01(0x85a)]['warn'](this[_0xea1b01(0x7ec)]+'\x20('+this['instance']['wuid']+_0xea1b01(0x5c2));}async[a0_0x11d42e(0x677)](_0x23c318){const _0x64b03c=a0_0x11d42e;try{if(this[_0x64b03c(0x85a)][_0x64b03c(0x4d4)](this['instanceName']+'\x20('+this['instance'][_0x64b03c(0x3d9)]+_0x64b03c(0x1d2)),_0x23c318[_0x64b03c(0x665)]||(_0x23c318[_0x64b03c(0x665)]=(0x0,Q['v4'])()),this[_0x64b03c(0x22f)][_0x64b03c(0x274)]['processingGroup']?.[_0x64b03c(0x665)]===_0x23c318[_0x64b03c(0x665)]?.[_0x64b03c(0x1d7)]()){if(_0x23c318['status']===_0x64b03c(0x47f))this[_0x64b03c(0x22f)]['ScheduleMessage']['processingGroup']=null;else throw new Error('Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.');}if(_0x23c318[_0x64b03c(0x165)]&&_0x23c318[_0x64b03c(0x665)]){let _0x392a10=await this[_0x64b03c(0x373)]['scheduleMessage'][_0x64b03c(0x315)](_0x23c318['_id'],this[_0x64b03c(0x22f)]['wuid']);return setTimeout(()=>this[_0x64b03c(0x30c)](),0x7d0),_0x392a10;}let _0x4a0382=null;if(_0x23c318[_0x64b03c(0x665)]&&(_0x4a0382=await this[_0x64b03c(0x373)][_0x64b03c(0x828)]['findById'](_0x23c318[_0x64b03c(0x665)],this[_0x64b03c(0x22f)][_0x64b03c(0x3d9)])),_0x4a0382){let {_id:_0x3df3c9,owner:_0x49cf88,messages:_0x27549e,..._0x1cc9a3}=_0x23c318;if(_0x27549e){let _0x361ab6=_0x27549e[_0x64b03c(0x852)](_0x47c579=>!_0x47c579['_id']),_0x1cf07e=_0x27549e[_0x64b03c(0x852)](_0x31ccc2=>_0x31ccc2[_0x64b03c(0x665)]&&!_0x31ccc2[_0x64b03c(0x165)]),_0x29df73=_0x27549e[_0x64b03c(0x852)](_0x1b6075=>_0x1b6075[_0x64b03c(0x665)]&&_0x1b6075[_0x64b03c(0x165)]);if(_0x361ab6[_0x64b03c(0x57a)]>0x0&&await this[_0x64b03c(0x477)](_0x23c318[_0x64b03c(0x665)],_0x361ab6),_0x1cf07e[_0x64b03c(0x57a)]>0x0&&await this[_0x64b03c(0x42b)]({'_id':_0x23c318[_0x64b03c(0x665)],'messages':_0x1cf07e}),_0x29df73[_0x64b03c(0x57a)]>0x0){let _0x5815bb=_0x29df73['map'](_0xfc084f=>({'updateOne':{'filter':{'_id':_0x23c318[_0x64b03c(0x665)]},'update':{'$pull':{'messages':{'_id':_0xfc084f['_id']}}}}}));await this['repository'][_0x64b03c(0x828)][_0x64b03c(0x32a)](_0x5815bb,this[_0x64b03c(0x22f)]['wuid']);}}let _0x3c5131={'$set':{..._0x1cc9a3,'status':_0x23c318[_0x64b03c(0x15d)]||_0x4a0382[_0x64b03c(0x15d)]}},_0x4ab3aa=await this[_0x64b03c(0x373)]['scheduleMessage']['updateOneById'](_0x23c318[_0x64b03c(0x665)],_0x3c5131,this['instance'][_0x64b03c(0x3d9)]);return _0x4ab3aa&&(this['reorderMessages'](_0x4ab3aa[_0x64b03c(0x458)]),await this[_0x64b03c(0x373)]['scheduleMessage']['updateOneById'](_0x4ab3aa[_0x64b03c(0x665)],{'$set':{'messages':_0x4ab3aa[_0x64b03c(0x458)]}},this['instance']['wuid'])),setTimeout(()=>this[_0x64b03c(0x30c)](),0x7d0),await this['transformScheduledMessagesByType'](),_0x4ab3aa;}else{_0x23c318[_0x64b03c(0x855)]=this[_0x64b03c(0x22f)][_0x64b03c(0x3d9)],_0x23c318['messages']&&_0x23c318[_0x64b03c(0x458)]['forEach'](_0x1aaee0=>{const _0x531524=_0x64b03c;_0x1aaee0[_0x531524(0x665)]||(_0x1aaee0['_id']=(0x0,Q['v4'])()),_0x1aaee0[_0x531524(0x669)]||(_0x1aaee0[_0x531524(0x669)]=_0x23c318[_0x531524(0x665)]),delete _0x1aaee0[_0x531524(0x50c)];});let _0x2851dd=await this[_0x64b03c(0x373)]['scheduleMessage'][_0x64b03c(0x1bb)](_0x23c318,this[_0x64b03c(0x22f)][_0x64b03c(0x3d9)]);return _0x2851dd&&(this[_0x64b03c(0x64c)](_0x2851dd['messages']),await this['repository']['scheduleMessage'][_0x64b03c(0x522)](_0x2851dd['_id'],{'$set':{'messages':_0x2851dd[_0x64b03c(0x458)]}},this[_0x64b03c(0x22f)][_0x64b03c(0x3d9)])),setTimeout(()=>this[_0x64b03c(0x30c)](),0x7d0),_0x2851dd;}}catch(_0x412edd){let _0x5dfc41=_0x64b03c(0x158),_0x1c9d88=_0x412edd instanceof Error?_0x412edd[_0x64b03c(0x5a8)]:typeof _0x412edd=='object'?JSON[_0x64b03c(0x7b9)](_0x412edd):_0x412edd,_0x30bbb8=_0x5dfc41+':\x20'+_0x1c9d88;throw this['logger']['error'](this[_0x64b03c(0x7ec)]+'\x20('+this[_0x64b03c(0x22f)][_0x64b03c(0x3d9)]+'):\x20'+_0x30bbb8),new m(_0x30bbb8);}}async[a0_0x11d42e(0x477)](_0x2f8cf2,_0x1f25ef){const _0x467b66=a0_0x11d42e;try{this[_0x467b66(0x85a)][_0x467b66(0x70a)](this[_0x467b66(0x7ec)]+'\x20('+this[_0x467b66(0x22f)][_0x467b66(0x3d9)]+_0x467b66(0x437)),_0x1f25ef[_0x467b66(0x46a)](_0x23bc05=>{const _0x3c3673=_0x467b66;_0x23bc05[_0x3c3673(0x665)]||(_0x23bc05['_id']=(0x0,Q['v4'])()),_0x23bc05['idSchedule']||(_0x23bc05[_0x3c3673(0x669)]=_0x2f8cf2),delete _0x23bc05[_0x3c3673(0x50c)];});let _0x5dec30={'$push':{'messages':{'$each':_0x1f25ef}}},_0x54fad4=await this['repository']['scheduleMessage'][_0x467b66(0x522)](_0x2f8cf2,_0x5dec30,this['instance']['wuid']);return _0x54fad4&&(this[_0x467b66(0x64c)](_0x54fad4[_0x467b66(0x458)]),await this['repository'][_0x467b66(0x828)]['updateOneById'](_0x54fad4[_0x467b66(0x665)],{'$set':{'messages':_0x54fad4[_0x467b66(0x458)]}},this['instance'][_0x467b66(0x3d9)])),_0x54fad4;}catch(_0x51c9a5){let _0x162216='Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo',_0xa8324c=_0x51c9a5 instanceof Error?_0x51c9a5[_0x467b66(0x5a8)]:typeof _0x51c9a5==_0x467b66(0x1cb)?JSON[_0x467b66(0x7b9)](_0x51c9a5):_0x51c9a5,_0xd94f37=_0x162216+':\x20'+_0xa8324c;throw this['logger'][_0x467b66(0x7bf)](this[_0x467b66(0x7ec)]+'\x20('+this[_0x467b66(0x22f)]['wuid']+'):\x20'+_0xd94f37),new m(_0xd94f37);}}async[a0_0x11d42e(0x42b)](_0x294d34){const _0x38a474=a0_0x11d42e;try{if(this[_0x38a474(0x85a)]['verbose'](this[_0x38a474(0x7ec)]+'\x20('+this[_0x38a474(0x22f)][_0x38a474(0x3d9)]+'):\x20Editando\x20mensagens\x20no\x20grupo...'),!_0x294d34['_id']||!_0x294d34[_0x38a474(0x458)])throw new Error('Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.');let _0x325e67=_0x294d34[_0x38a474(0x665)],_0x2a98b3=_0x294d34[_0x38a474(0x458)],_0x462004=_0x2a98b3[_0x38a474(0x852)](_0xc2c9c6=>!_0xc2c9c6[_0x38a474(0x165)])[_0x38a474(0x4f6)](_0x132723=>{const _0x58a44f=_0x38a474;let _0x3ae3f5=_0x132723['_id'];if(!_0x3ae3f5)throw new Error(_0x58a44f(0x4bd));return _0x132723['idSchedule']||(_0x132723[_0x58a44f(0x669)]=_0x325e67),delete _0x132723[_0x58a44f(0x50c)],{'updateOne':{'filter':{'_id':_0x325e67,'messages._id':_0x3ae3f5},'update':{'$set':{'messages.$[elem]':_0x132723}},'arrayFilters':[{'elem._id':_0x3ae3f5}]}};}),_0x16c705=_0x2a98b3[_0x38a474(0x852)](_0x5b5503=>_0x5b5503[_0x38a474(0x165)])[_0x38a474(0x4f6)](_0x4a6057=>{const _0x44509a=_0x38a474;let _0x4d9a9c=_0x4a6057[_0x44509a(0x665)];if(!_0x4d9a9c)throw new Error(_0x44509a(0x15c));return{'updateOne':{'filter':{'_id':_0x325e67},'update':{'$pull':{'messages':{'_id':_0x4d9a9c}}}}};}),_0x4a383d=[..._0x462004,..._0x16c705],_0x3af17b=await this[_0x38a474(0x373)][_0x38a474(0x828)][_0x38a474(0x32a)](_0x4a383d,this[_0x38a474(0x22f)][_0x38a474(0x3d9)]),_0x90ec1e=await this[_0x38a474(0x373)]['scheduleMessage']['findById'](_0x325e67,this['instance'][_0x38a474(0x3d9)]);return _0x90ec1e&&(this[_0x38a474(0x64c)](_0x90ec1e[_0x38a474(0x458)]),await this[_0x38a474(0x373)][_0x38a474(0x828)][_0x38a474(0x522)](_0x90ec1e[_0x38a474(0x665)],{'$set':{'messages':_0x90ec1e['messages']}},this['instance'][_0x38a474(0x3d9)])),_0x90ec1e;}catch(_0x398892){let _0x16c307='Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo',_0x5102be=_0x398892 instanceof Error?_0x398892[_0x38a474(0x5a8)]:typeof _0x398892==_0x38a474(0x1cb)?JSON[_0x38a474(0x7b9)](_0x398892):_0x398892,_0x5bb9b0=_0x16c307+':\x20'+_0x5102be;throw this['logger'][_0x38a474(0x7bf)](this[_0x38a474(0x7ec)]+'\x20('+this[_0x38a474(0x22f)]['wuid']+_0x38a474(0x7bd)+_0x5bb9b0),new m(_0x5bb9b0);}}async['deleteDoneMessages'](){const _0x58a78b=a0_0x11d42e;try{let _0xd4eb08={'status':_0x58a78b(0x2b5)},_0x21b62a=await this[_0x58a78b(0x373)][_0x58a78b(0x828)][_0x58a78b(0x71c)](_0xd4eb08,this['instance'][_0x58a78b(0x3d9)]);if(!_0x21b62a['error'])this[_0x58a78b(0x85a)][_0x58a78b(0x70a)](this[_0x58a78b(0x7ec)]+'\x20('+this[_0x58a78b(0x22f)]['wuid']+_0x58a78b(0x48a));else throw new Error(_0x21b62a[_0x58a78b(0x7bf)]['message']||_0x58a78b(0x5e5));return this[_0x58a78b(0x58e)]();}catch(_0x3a79fd){let _0x5aa9ae=_0x58a78b(0x34d),_0x2e8b1b=_0x3a79fd instanceof Error?_0x3a79fd[_0x58a78b(0x5a8)]:typeof _0x3a79fd==_0x58a78b(0x1cb)?JSON[_0x58a78b(0x7b9)](_0x3a79fd):_0x3a79fd,_0x37cfbd=_0x5aa9ae+':\x20'+_0x2e8b1b;throw this[_0x58a78b(0x85a)][_0x58a78b(0x7bf)](this[_0x58a78b(0x7ec)]+'\x20('+this[_0x58a78b(0x22f)]['wuid']+'):\x20'+_0x37cfbd),new m(_0x37cfbd);}}async['deleteAllMessages'](){const _0x28e4e6=a0_0x11d42e;try{this[_0x28e4e6(0x22f)]['ScheduleMessage'][_0x28e4e6(0x62c)]=!0x1,this[_0x28e4e6(0x22f)][_0x28e4e6(0x274)][_0x28e4e6(0x1d1)]=null,this['queue']&&this['queue']['clear'](),this[_0x28e4e6(0x85a)][_0x28e4e6(0x70a)](this[_0x28e4e6(0x7ec)]+'\x20('+this[_0x28e4e6(0x22f)][_0x28e4e6(0x3d9)]+_0x28e4e6(0x4f0)),await new Promise(_0x59c63d=>setTimeout(_0x59c63d,0x1388)),this[_0x28e4e6(0x85a)][_0x28e4e6(0x70a)](this[_0x28e4e6(0x7ec)]+'\x20('+this[_0x28e4e6(0x22f)]['wuid']+_0x28e4e6(0x672));let _0x1bbedf=await this[_0x28e4e6(0x373)][_0x28e4e6(0x828)]['deleteMany']({},this[_0x28e4e6(0x22f)][_0x28e4e6(0x3d9)]);if(!_0x1bbedf[_0x28e4e6(0x7bf)])this[_0x28e4e6(0x85a)][_0x28e4e6(0x70a)](this[_0x28e4e6(0x7ec)]+'\x20('+this[_0x28e4e6(0x22f)][_0x28e4e6(0x3d9)]+'):\x20Todos\x20os\x20grupos\x20de\x20mensagens\x20foram\x20deletados\x20com\x20sucesso.'),this['logger'][_0x28e4e6(0x70a)](this[_0x28e4e6(0x7ec)]+'\x20('+this[_0x28e4e6(0x22f)][_0x28e4e6(0x3d9)]+_0x28e4e6(0x237)),await new Promise(_0x318d8d=>setTimeout(_0x318d8d,0x1388)),this['instance'][_0x28e4e6(0x274)][_0x28e4e6(0x62c)]=!0x0,this[_0x28e4e6(0x85a)][_0x28e4e6(0x70a)](this[_0x28e4e6(0x7ec)]+'\x20('+this['instance']['wuid']+'):\x20Reconectando\x20serviço\x20de\x20mensagens\x20após\x20limpeza.'),this[_0x28e4e6(0x30c)]();else throw new Error(_0x1bbedf['error'][_0x28e4e6(0x5a8)]||_0x28e4e6(0x5e5));return this[_0x28e4e6(0x58e)]();}catch(_0x3a1584){let _0x3f3fe0=_0x28e4e6(0x769),_0x27a1ed=_0x3a1584 instanceof Error?_0x3a1584['message']:typeof _0x3a1584==_0x28e4e6(0x1cb)?JSON['stringify'](_0x3a1584):_0x3a1584,_0x16ceb4=_0x3f3fe0+':\x20'+_0x27a1ed;throw this[_0x28e4e6(0x85a)][_0x28e4e6(0x7bf)](this[_0x28e4e6(0x7ec)]+'\x20('+this[_0x28e4e6(0x22f)][_0x28e4e6(0x3d9)]+_0x28e4e6(0x7bd)+_0x16ceb4),new m(_0x16ceb4);}}async[a0_0x11d42e(0x58e)](){const _0x16d296=a0_0x11d42e;try{return await this[_0x16d296(0x373)][_0x16d296(0x828)][_0x16d296(0x6d7)]({'where':{}},this[_0x16d296(0x22f)][_0x16d296(0x3d9)]);}catch(_0x55f7cf){let _0x231045=_0x16d296(0x8a6),_0x33c3ec=_0x55f7cf instanceof Error?_0x55f7cf['message']:typeof _0x55f7cf==_0x16d296(0x1cb)?JSON[_0x16d296(0x7b9)](_0x55f7cf):_0x55f7cf,_0x13e2aa=_0x231045+':\x20'+_0x33c3ec;throw this[_0x16d296(0x85a)]['error'](this[_0x16d296(0x7ec)]+'\x20('+this[_0x16d296(0x22f)][_0x16d296(0x3d9)]+_0x16d296(0x7bd)+_0x13e2aa),new m(_0x13e2aa);}}[a0_0x11d42e(0x64c)](_0x10e04e){const _0x836963=a0_0x11d42e;_0x10e04e[_0x836963(0x7aa)]((_0x297562,_0x2d50ea)=>_0x297562[_0x836963(0x879)]-_0x2d50ea[_0x836963(0x879)]),_0x10e04e['forEach']((_0x23ceda,_0x38e173)=>{const _0x102336=_0x836963;_0x23ceda[_0x102336(0x879)]=_0x38e173+0x1;});}async[a0_0x11d42e(0x3e9)](_0x178350,_0x4ea8c6){const _0x1ca822=a0_0x11d42e;try{if(!_0x4ea8c6)return this[_0x1ca822(0x85a)]['error'](this[_0x1ca822(0x7ec)]+'\x20('+this[_0x1ca822(0x22f)][_0x1ca822(0x3d9)]+_0x1ca822(0x342)),{'error':!0x0,'detail':_0x1ca822(0x85d)};if(_0x4ea8c6[_0x1ca822(0x748)]==='flow'&&!this[_0x1ca822(0x747)]?.[_0x1ca822(0x560)][_0x1ca822(0x227)])return this[_0x1ca822(0x85a)]['error'](this[_0x1ca822(0x7ec)]+'\x20('+this['instance'][_0x1ca822(0x3d9)]+'):\x20Fluxos\x20não\x20estão\x20ativados'),{'error':!0x0,'detail':'Fluxos\x20não\x20estão\x20ativados'};switch(_0x4ea8c6['type']){case _0x1ca822(0x8b3):return await this['scheduleSendText'](_0x4ea8c6,_0x178350);case _0x1ca822(0x594):case'image':case _0x1ca822(0x393):return await this[_0x1ca822(0x581)](_0x4ea8c6,_0x178350);case _0x1ca822(0x43f):return await this[_0x1ca822(0x66b)](_0x4ea8c6,_0x178350);case _0x1ca822(0x5b3):let _0x415598=new Qe();return _0x415598[_0x1ca822(0x414)]=_0x4ea8c6[_0x1ca822(0x5b3)],_0x415598['remoteJid']=_0x178350,await this[_0x1ca822(0x1ac)](_0x415598);default:return this[_0x1ca822(0x85a)][_0x1ca822(0x7bf)](this[_0x1ca822(0x7ec)]+'\x20('+this['instance'][_0x1ca822(0x3d9)]+_0x1ca822(0x46e)+_0x4ea8c6[_0x1ca822(0x748)]),{'error':!0x0,'detail':_0x1ca822(0x1db)};}}catch(_0x349009){return this[_0x1ca822(0x85a)][_0x1ca822(0x7bf)](this[_0x1ca822(0x7ec)]+'\x20('+this[_0x1ca822(0x22f)][_0x1ca822(0x3d9)]+_0x1ca822(0x6b4)+(_0x349009 instanceof Error?_0x349009['message']:JSON[_0x1ca822(0x7b9)](_0x349009,null,0x2))),{'error':!0x0,'detail':_0x349009[_0x1ca822(0x5a8)]};}}async[a0_0x11d42e(0x5b7)](_0x2f3408,_0x10bde0){const _0x494141=a0_0x11d42e;if(this[_0x494141(0x85a)][_0x494141(0x70a)](this[_0x494141(0x7ec)]+'\x20('+this[_0x494141(0x22f)][_0x494141(0x3d9)]+_0x494141(0x19b)+_0x10bde0+'\x27'),!_0x2f3408[_0x494141(0x8b3)]||_0x2f3408[_0x494141(0x8b3)][_0x494141(0x57a)]===0x0)return{'error':!0x0,'detail':_0x494141(0x761)};let _0xc25b39=await this[_0x494141(0x2fd)](_0x2f3408[_0x494141(0x8b3)],_0x10bde0),_0x1d7460={'number':_0x10bde0,'options':{'delay':_0x2f3408['delay'],'linkPreview':_0x2f3408[_0x494141(0x3ae)]},'textMessage':{'text':_0xc25b39}},_0x52dfdb=null;try{let _0x4d4dd0=await this['textMessage'](_0x1d7460);if(_0x4d4dd0&&_0x4d4dd0[_0x494141(0x15d)])return{'error':!0x1,'id':_0x4d4dd0[_0x494141(0x7af)]['id']};_0x52dfdb=JSON[_0x494141(0x7b9)](_0x4d4dd0),this[_0x494141(0x85a)][_0x494141(0x70a)](this[_0x494141(0x7ec)]+'\x20('+this['instance']['wuid']+_0x494141(0x7bd)+_0x52dfdb);}catch(_0x52c68b){this[_0x494141(0x85a)][_0x494141(0x7bf)](this['instanceName']+'\x20('+this[_0x494141(0x22f)][_0x494141(0x3d9)]+_0x494141(0x3dd)+(_0x52c68b instanceof Error?_0x52c68b[_0x494141(0x5a8)]:JSON[_0x494141(0x7b9)](_0x52c68b,null,0x2))),_0x52dfdb=_0x52c68b[_0x494141(0x5a8)];}if(_0x52dfdb)return{'error':!0x0,'detail':(typeof _0x52dfdb==_0x494141(0x1cb)?JSON[_0x494141(0x7b9)](_0x52dfdb,null,0x2):_0x52dfdb)[_0x494141(0x771)](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async[a0_0x11d42e(0x581)](_0x2d5a56,_0x1f4ce8){const _0x2deb87=a0_0x11d42e;this[_0x2deb87(0x85a)]['verbose'](this[_0x2deb87(0x7ec)]+'\x20('+this[_0x2deb87(0x22f)][_0x2deb87(0x3d9)]+_0x2deb87(0x811)+_0x1f4ce8+'\x27');let _0x316ea2;_0x2d5a56[_0x2deb87(0x8b3)]&&_0x2d5a56['text']['length']>0x0&&(_0x316ea2=await this['replaceVariablesChat'](_0x2d5a56[_0x2deb87(0x8b3)],_0x1f4ce8));let _0x35c0d7={'number':_0x1f4ce8,'options':{'delay':_0x2d5a56[_0x2deb87(0x779)],'linkPreview':_0x2d5a56[_0x2deb87(0x3ae)]},'mediaMessage':{'mediatype':_0x2d5a56[_0x2deb87(0x748)],'caption':_0x316ea2,'media':_0x2d5a56[_0x2deb87(0x79b)]}},_0x7f4206=null;try{let _0x5e40cf=await this[_0x2deb87(0x7b4)](_0x35c0d7);if(_0x5e40cf&&_0x5e40cf['status'])return{'error':!0x1,'id':_0x5e40cf[_0x2deb87(0x7af)]['id']};_0x7f4206=JSON[_0x2deb87(0x7b9)](_0x5e40cf),this[_0x2deb87(0x85a)][_0x2deb87(0x70a)](this['instanceName']+'\x20('+this[_0x2deb87(0x22f)][_0x2deb87(0x3d9)]+_0x2deb87(0x7bd)+_0x7f4206);}catch(_0x566772){this[_0x2deb87(0x85a)][_0x2deb87(0x7bf)](this[_0x2deb87(0x7ec)]+'\x20('+this[_0x2deb87(0x22f)][_0x2deb87(0x3d9)]+_0x2deb87(0x3a5)+(_0x566772 instanceof Error?_0x566772[_0x2deb87(0x5a8)]:JSON[_0x2deb87(0x7b9)](_0x566772,null,0x2))),_0x7f4206=_0x566772[_0x2deb87(0x5a8)];}if(_0x7f4206)return{'error':!0x0,'detail':(typeof _0x7f4206==_0x2deb87(0x1cb)?JSON[_0x2deb87(0x7b9)](_0x7f4206,null,0x2):_0x7f4206)[_0x2deb87(0x771)](/[\[\]{}\n]/g,'\x20')[_0x2deb87(0x771)](/  +/g,'\x20')};}async[a0_0x11d42e(0x66b)](_0x49a7af,_0x16fe13){const _0x4493ef=a0_0x11d42e;this[_0x4493ef(0x85a)][_0x4493ef(0x70a)](this['instanceName']+'\x20('+this[_0x4493ef(0x22f)]['wuid']+_0x4493ef(0x48d)+_0x16fe13+'\x27');let _0x131132={'number':_0x16fe13,'options':{'delay':_0x49a7af[_0x4493ef(0x779)]},'audioMessage':{'audio':_0x49a7af[_0x4493ef(0x79b)]}},_0x314a93=null;try{let _0x41b208=await this[_0x4493ef(0x569)](_0x131132);if(_0x41b208&&_0x41b208[_0x4493ef(0x15d)])return{'error':!0x1,'id':_0x41b208['key']['id']};_0x314a93=JSON[_0x4493ef(0x7b9)](_0x41b208),this[_0x4493ef(0x85a)][_0x4493ef(0x70a)](this[_0x4493ef(0x7ec)]+'\x20('+this[_0x4493ef(0x22f)][_0x4493ef(0x3d9)]+_0x4493ef(0x7bd)+_0x314a93);}catch(_0x33bd09){this[_0x4493ef(0x85a)][_0x4493ef(0x7bf)](this['instanceName']+'\x20('+this[_0x4493ef(0x22f)][_0x4493ef(0x3d9)]+_0x4493ef(0x5d7)+(_0x33bd09 instanceof Error?_0x33bd09[_0x4493ef(0x5a8)]:JSON[_0x4493ef(0x7b9)](_0x33bd09,null,0x2))),_0x314a93=_0x33bd09[_0x4493ef(0x5a8)];}if(_0x314a93)return{'error':!0x0,'detail':(typeof _0x314a93==_0x4493ef(0x1cb)?JSON[_0x4493ef(0x7b9)](_0x314a93,null,0x2):_0x314a93)[_0x4493ef(0x771)](/[\[\]{}\n]/g,'\x20')[_0x4493ef(0x771)](/  +/g,'\x20')};}async[a0_0x11d42e(0x56d)](_0xbffa6e){const _0x4c54f8=a0_0x11d42e;try{return await this['client'][_0x4c54f8(0x1e5)](_0xbffa6e[_0x4c54f8(0x49b)],_0xbffa6e[_0x4c54f8(0x2fa)]),{'update':_0x4c54f8(0x538)};}catch(_0x3eec38){let _0x10d64e='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc',_0x4f7ddf=_0x3eec38 instanceof Error?_0x3eec38[_0x4c54f8(0x5a8)]:typeof _0x3eec38==_0x4c54f8(0x1cb)?JSON[_0x4c54f8(0x7b9)](_0x3eec38):_0x3eec38,_0x557e0b=_0x10d64e+':\x20'+_0x4f7ddf;throw this['logger']['error'](this[_0x4c54f8(0x7ec)]+'\x20('+this[_0x4c54f8(0x22f)][_0x4c54f8(0x3d9)]+_0x4c54f8(0x7bd)+_0x557e0b),new x(_0x557e0b);}}async[a0_0x11d42e(0x5d1)](_0x19eb42){const _0x148a3c=a0_0x11d42e;try{return await this[_0x148a3c(0x60c)][_0x148a3c(0x826)](_0x19eb42['groupJid'],_0x19eb42['name']),{'update':'success'};}catch(_0x134594){let _0x50c475=_0x148a3c(0x2c8),_0xeceab8=_0x134594 instanceof Error?_0x134594[_0x148a3c(0x5a8)]:typeof _0x134594==_0x148a3c(0x1cb)?JSON['stringify'](_0x134594):_0x134594,_0x250d3a=_0x50c475+':\x20'+_0xeceab8;throw this[_0x148a3c(0x85a)]['error'](this[_0x148a3c(0x7ec)]+'\x20('+this[_0x148a3c(0x22f)][_0x148a3c(0x3d9)]+_0x148a3c(0x7bd)+_0x250d3a),new x(_0x250d3a);}}async['toggleEphemeral'](_0x3abde8){const _0x212d5e=a0_0x11d42e;try{let _0x44d6b7=await this[_0x212d5e(0x60c)][_0x212d5e(0x239)](_0x3abde8[_0x212d5e(0x49b)],_0x3abde8['expiration']);return{'success':!0x0};}catch(_0xfb4d34){let _0x3c03b6='Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral',_0xdd18f2=_0xfb4d34 instanceof Error?_0xfb4d34[_0x212d5e(0x5a8)]:typeof _0xfb4d34==_0x212d5e(0x1cb)?JSON[_0x212d5e(0x7b9)](_0xfb4d34):_0xfb4d34,_0x92ef5b=_0x3c03b6+':\x20'+_0xdd18f2;throw this[_0x212d5e(0x85a)][_0x212d5e(0x7bf)](this[_0x212d5e(0x7ec)]+'\x20('+this['instance']['wuid']+_0x212d5e(0x7bd)+_0x92ef5b),new x(_0x92ef5b);}}async['groupSetting'](_0x13587f){const _0x3c0a83=a0_0x11d42e;try{return await this[_0x3c0a83(0x60c)][_0x3c0a83(0x2f5)](_0x13587f[_0x3c0a83(0x49b)],_0x13587f['setting']),{'update':_0x3c0a83(0x538)};}catch(_0x1798cf){let _0x291b6e=_0x3c0a83(0x715),_0x306da4=_0x1798cf instanceof Error?_0x1798cf[_0x3c0a83(0x5a8)]:typeof _0x1798cf==_0x3c0a83(0x1cb)?JSON[_0x3c0a83(0x7b9)](_0x1798cf):_0x1798cf,_0x1393a0=_0x291b6e+':\x20'+_0x306da4;throw this[_0x3c0a83(0x85a)][_0x3c0a83(0x7bf)](this[_0x3c0a83(0x7ec)]+'\x20('+this[_0x3c0a83(0x22f)][_0x3c0a83(0x3d9)]+_0x3c0a83(0x7bd)+_0x1393a0),new x(_0x1393a0);}}async[a0_0x11d42e(0x6de)](_0x954926){const _0x5d8fa0=a0_0x11d42e;try{let _0x2be0d9;if((0x0,J[_0x5d8fa0(0x360)])(_0x954926[_0x5d8fa0(0x5d3)])){let _0x2c3a69=new Date()[_0x5d8fa0(0x370)](),_0x13ddb2=_0x954926[_0x5d8fa0(0x5d3)]+'?timestamp='+_0x2c3a69;_0x2be0d9=(await K[_0x5d8fa0(0x3de)][_0x5d8fa0(0x686)](_0x13ddb2,{'responseType':_0x5d8fa0(0x457)}))[_0x5d8fa0(0x57e)];}else{if((0x0,J['isBase64'])(_0x954926['image']))_0x2be0d9=Buffer['from'](_0x954926[_0x5d8fa0(0x5d3)],_0x5d8fa0(0x30a));else throw new m(_0x5d8fa0(0x29d));}return await this['client'][_0x5d8fa0(0x422)](_0x954926[_0x5d8fa0(0x49b)],_0x2be0d9),{'update':_0x5d8fa0(0x538)};}catch(_0xc265c7){let _0xcf4b01='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture',_0x774caa=_0xc265c7 instanceof Error?_0xc265c7[_0x5d8fa0(0x5a8)]:typeof _0xc265c7==_0x5d8fa0(0x1cb)?JSON['stringify'](_0xc265c7):_0xc265c7,_0x854eca=_0xcf4b01+':\x20'+_0x774caa;throw this[_0x5d8fa0(0x85a)][_0x5d8fa0(0x7bf)](this[_0x5d8fa0(0x7ec)]+'\x20('+this['instance'][_0x5d8fa0(0x3d9)]+'):\x20'+_0x854eca),new x(_0x854eca);}}},Vt=class l{constructor(_0x467082,_0x354add,_0x195311){const _0x529751=a0_0x11d42e;this[_0x529751(0x7e3)]=_0x467082,this[_0x529751(0x155)]=_0x354add,this[_0x529751(0x373)]=_0x195311,this['db']={},this[_0x529751(0x7cf)]={},this[_0x529751(0x85a)]=new R(l[_0x529751(0x414)]),this[_0x529751(0x339)]={},(this[_0x529751(0x2a5)](),this['noConnection'](),Object[_0x529751(0x7b3)](this['db'],_0x354add[_0x529751(0x686)](_0x529751(0x683))),Object[_0x529751(0x7b3)](this['redis'],_0x354add[_0x529751(0x686)](_0x529751(0x577))),this['dbInstance']=this['db'][_0x529751(0x84f)]?this[_0x529751(0x373)][_0x529751(0x540)]?.['db'](this['db'][_0x529751(0x3c6)][_0x529751(0x719)]+_0x529751(0x257)):void 0x0,this['cache']=this['redis']['ENABLED']?new de(this[_0x529751(0x7cf)]):void 0x0);}async[a0_0x11d42e(0x519)](_0x18d845){const _0xd46934=a0_0x11d42e;if(_0x18d845&&!this[_0xd46934(0x339)][_0x18d845])throw new U(_0xd46934(0x756)+_0x18d845+_0xd46934(0x195));let _0x2d8fc4=[];for await(let [_0x5ce52c,_0x580aca]of Object['entries'](this[_0xd46934(0x339)]))if(_0x580aca&&_0x580aca['connectionStatus']['state']===_0xd46934(0x78a)){let _0x4d8786=await this[_0xd46934(0x373)]['auth'][_0xd46934(0x6d7)](_0x5ce52c);_0x2d8fc4[_0xd46934(0x64a)]({'instance':{'instanceName':_0x5ce52c,'apikey':_0x4d8786[_0xd46934(0x472)],'owner':_0x580aca['wuid'],'profileName':await _0x580aca['getProfileName']()||_0xd46934(0x29b),'profilePictureUrl':_0x580aca[_0xd46934(0x7c3)]}});}return _0x2d8fc4[_0xd46934(0x6d7)](_0x5f241e=>_0x5f241e[_0xd46934(0x22f)][_0xd46934(0x7ec)]===_0x18d845)??_0x2d8fc4;}async[a0_0x11d42e(0x6fe)](_0x7f6a2e){const _0x38c443=a0_0x11d42e;if(this['db']['ENABLED']&&(await this[_0x38c443(0x373)]['dbServer']['connect'](),(await this[_0x38c443(0x64b)][_0x38c443(0x6fb)]())[_0x38c443(0x57a)]>0x0&&await this[_0x38c443(0x64b)]['dropCollection'](_0x7f6a2e)),this[_0x38c443(0x7cf)]['ENABLED']){this[_0x38c443(0x86b)][_0x38c443(0x3b2)]=_0x7f6a2e,await this[_0x38c443(0x86b)][_0x38c443(0x1de)]();return;}}async[a0_0x11d42e(0x286)](){const _0x398b1f=a0_0x11d42e;await this[_0x398b1f(0x464)]();let _0x308e8b=async _0xbdbeef=>{const _0x505959=_0x398b1f;let _0x3bf7ba=new Ae(this[_0x505959(0x155)],this[_0x505959(0x7e3)],this['repository']);_0x3bf7ba[_0x505959(0x7ec)]=_0xbdbeef,await _0x3bf7ba[_0x505959(0x136)](),this[_0x505959(0x339)][_0xbdbeef]=_0x3bf7ba;};try{if(this[_0x398b1f(0x7cf)]['ENABLED']){let _0x5d92ce=await this[_0x398b1f(0x86b)][_0x398b1f(0x4db)]();_0x5d92ce?.[_0x398b1f(0x57a)]>0x0&&_0x5d92ce[_0x398b1f(0x46a)](async _0x4e418a=>await _0x308e8b(_0x4e418a['split'](':')[0x1]));return;}if(this['db'][_0x398b1f(0x84f)]){await this['repository'][_0x398b1f(0x540)][_0x398b1f(0x6ca)]();let _0x4d6a5f=await this[_0x398b1f(0x64b)][_0x398b1f(0x6fb)]();_0x4d6a5f[_0x398b1f(0x57a)]>0x0&&_0x4d6a5f['forEach'](async _0x367d02=>await _0x308e8b(_0x367d02[_0x398b1f(0x553)][_0x398b1f(0x771)](/^[\w-]+\./,'')));return;}}catch(_0x3f9c37){this['logger'][_0x398b1f(0x7bf)](_0x3f9c37);}}async[a0_0x11d42e(0x332)](){const _0x1f65ca=a0_0x11d42e;try{let _0x247c2d=await this[_0x1f65ca(0x373)][_0x1f65ca(0x44a)]['findMany']({'online':!0x1});console[_0x1f65ca(0x86e)](_0x1f65ca(0x678)+_0x247c2d['length']);let _0x1da45e={'online':!0x1},_0x136fb9=await this[_0x1f65ca(0x373)]['auth'][_0x1f65ca(0x71c)](_0x1da45e);console[_0x1f65ca(0x86e)](_0x1f65ca(0x52a)+_0x136fb9[_0x1f65ca(0x474)]);}catch(_0x22d0a5){console[_0x1f65ca(0x7bf)]('Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:',_0x22d0a5);}}async[a0_0x11d42e(0x464)](){const _0x3b5eff=a0_0x11d42e;try{let _0xcf1188={'online':!0x1},_0x2c1632={'online':!0x1,'lastDisconnect':Date[_0x3b5eff(0x19e)]()},_0xe7d70=await this['repository'][_0x3b5eff(0x44a)][_0x3b5eff(0x3e6)](_0xcf1188,_0x2c1632);await this['cleanDisconnectedInstances']();}catch(_0x19a379){console['error'](_0x3b5eff(0x781),_0x19a379);}}[a0_0x11d42e(0x2a5)](){const _0x2670ef=a0_0x11d42e;this[_0x2670ef(0x7e3)]['on']('remove.instance',async _0x44a7bf=>{const _0x3546d9=_0x2670ef;try{this[_0x3546d9(0x339)][_0x44a7bf]=void 0x0;}catch{}try{this[_0x3546d9(0x6fe)](_0x44a7bf);}finally{this['logger'][_0x3546d9(0x4d4)](_0x3546d9(0x756)+_0x44a7bf+'\x22\x20-\x20REMOVED');}});}[a0_0x11d42e(0x61b)](){const _0xd6b4d2=a0_0x11d42e;this['eventEmitter']['on'](_0xd6b4d2(0x840),async _0x21d85e=>{const _0x2246c1=_0xd6b4d2;try{this[_0x2246c1(0x339)][_0x21d85e]=void 0x0;}catch{}try{this['cleaningUp'](_0x21d85e);}finally{this[_0x2246c1(0x85a)][_0x2246c1(0x4d4)](_0x2246c1(0x756)+_0x21d85e+_0x2246c1(0x49e));}});}},Gt=class extends O{['getChatModelForOwner'](_0x4f7a3a){return ra(_0x4f7a3a);}async[a0_0x11d42e(0x604)](_0x4c028f){const _0x1aee3c=a0_0x11d42e;if(_0x4c028f[_0x1aee3c(0x57a)]!==0x0)try{return{'insertCount':(await this[_0x1aee3c(0x658)](_0x4c028f[0x0][_0x1aee3c(0x855)])[_0x1aee3c(0x849)]([..._0x4c028f]))[_0x1aee3c(0x57a)]};}catch(_0xabf380){return _0xabf380;}}async['find'](_0x169915,_0x35e2b7){const _0x1b838e=a0_0x11d42e;try{let _0x4809d3=this[_0x1b838e(0x658)](_0x35e2b7),_0x28d325=A(_0x169915[_0x1b838e(0x2e2)]);return await _0x4809d3['find'](_0x28d325)[_0x1b838e(0x7aa)]({'lastmsg':-0x1})[_0x1b838e(0x570)](_0x169915?.[_0x1b838e(0x570)]??0x0)[_0x1b838e(0x285)]();}catch{return[];}}async['findGroupsEspecial'](_0x51d8ab,_0x816db){const _0x592061=a0_0x11d42e;try{let _0x2b6351=this['getChatModelForOwner'](_0x816db),_0x45c2a3=A(_0x51d8ab[_0x592061(0x2e2)]);return _0x45c2a3[_0x592061(0x163)]={'$ne':[]},await _0x2b6351[_0x592061(0x6d7)](_0x45c2a3)[_0x592061(0x7aa)]({'lastmsg':-0x1})['limit'](_0x51d8ab?.[_0x592061(0x570)]??0x0)[_0x592061(0x285)]();}catch{return[];}}async['delete'](_0x34f1ad,_0x1fd9bb){const _0x4897c8=a0_0x11d42e;try{return{'deletedCount':(await this[_0x4897c8(0x658)](_0x1fd9bb)['deleteMany']({..._0x34f1ad[_0x4897c8(0x2e2)]}))[_0x4897c8(0x5ae)]};}catch(_0x27b7e9){return{'error':_0x27b7e9?.[_0x4897c8(0x1d7)]()};}}async[a0_0x11d42e(0x4b2)](_0xf97af8,_0x1a7cf5){const _0x263d48=a0_0x11d42e;try{return await this['getChatModelForOwner'](_0x1a7cf5)[_0x263d48(0x71c)]({..._0xf97af8[_0x263d48(0x2e2)]}),[];}catch(_0xfddc24){return{'error':_0xfddc24?.[_0x263d48(0x1d7)]()};}}async[a0_0x11d42e(0x588)](_0x3e9407,_0x3f4a10){const _0x17ed25=a0_0x11d42e;try{let _0x47ec26=this[_0x17ed25(0x658)](_0x3f4a10),_0x32efcd=A(_0x3e9407['where']);return await _0x47ec26['findOne'](_0x32efcd)[_0x17ed25(0x285)]();}catch{return null;}}async['updateOne'](_0x437ec6,_0x4b3c02,_0x5a402c,_0x4f4ecf,_0x408ccb='$set'){const _0xc5f53b=a0_0x11d42e;try{let _0x36691b={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x4f4ecf},_0x4eeaf2=this[_0xc5f53b(0x658)](_0x5a402c),_0x3e7b3b=A(_0x437ec6[_0xc5f53b(0x2e2)]);Object['keys'](_0x4b3c02)[_0xc5f53b(0x46a)](_0x341991=>{_0x4b3c02[_0x341991]==null&&delete _0x4b3c02[_0x341991];});let _0x3b507d={};return _0x3b507d[_0x408ccb]=_0x4b3c02,await _0x4eeaf2[_0xc5f53b(0x791)](_0x3e7b3b,_0x3b507d,_0x36691b);}catch(_0x30bdcc){return console[_0xc5f53b(0x7bf)](_0x30bdcc),null;}}async[a0_0x11d42e(0x6e6)](_0x26e351){const _0x301579=a0_0x11d42e;try{let _0x722f06=this[_0x301579(0x658)](_0x26e351[0x0][_0x301579(0x802)][_0x301579(0x2e2)][_0x301579(0x855)]),_0x2e1d53=_0x26e351['map'](_0x195809=>({'updateOne':{'filter':{..._0x195809['query'][_0x301579(0x2e2)]},'update':{'$set':_0x195809['update']},'upsert':!0x0}})),_0x314877=await _0x722f06['bulkWrite'](_0x2e1d53);return _0x314877[_0x301579(0x8ab)]+_0x314877[_0x301579(0x465)];}catch(_0x4a5d41){return console[_0x301579(0x7bf)](_0x4a5d41),0x0;}}async['removeUnusedChatFields'](_0x157076){const _0xbaf781=a0_0x11d42e;try{let _0x598a48={'group_isCommunity':'','group_announce':'','group_size':''},_0x17ca6f={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x28d058={'$unset':_0x598a48};return(await this[_0xbaf781(0x658)](_0x157076)[_0xbaf781(0x6e6)](_0x17ca6f,_0x28d058))[_0xbaf781(0x8ab)];}catch(_0x2629a9){return console[_0xbaf781(0x7bf)](_0xbaf781(0x2bd),_0x2629a9),0x0;}}async[a0_0x11d42e(0x4f9)](_0x28d6a3){const _0x27e46e=a0_0x11d42e;try{let _0x1e8c44=this[_0x27e46e(0x658)](_0x28d6a3),_0x1d96c1={'leadInfo.etiquetas':{'$exists':!0x1}},_0x4038a6={'$set':{'leadInfo.etiquetas':[]}};return(await _0x1e8c44[_0x27e46e(0x6e6)](_0x1d96c1,_0x4038a6))[_0x27e46e(0x8ab)];}catch(_0x2457e1){return console[_0x27e46e(0x7bf)](_0x2457e1),0x0;}}async['updateMissingTags'](_0x1e4bd6){const _0x32ab3d=a0_0x11d42e;try{let _0x562980=this[_0x32ab3d(0x658)](_0x1e4bd6),_0x313289={'leadInfo.tags':{'$exists':!0x1}},_0x8dfe27={'$set':{'leadInfo.tags':[]}};return(await _0x562980[_0x32ab3d(0x6e6)](_0x313289,_0x8dfe27))[_0x32ab3d(0x8ab)];}catch(_0x431a43){return console[_0x32ab3d(0x7bf)](_0x431a43),0x0;}}async['updateMissingCustomFields'](_0x3ec120){const _0x1bde51=a0_0x11d42e;try{let _0x4cb872=this[_0x1bde51(0x658)](_0x3ec120),_0x1d88f7={'leadInfo.customFields':{'$exists':!0x1}},_0x49337d={'$set':{'leadInfo.customFields':[]}};return(await _0x4cb872[_0x1bde51(0x6e6)](_0x1d88f7,_0x49337d))['modifiedCount'];}catch(_0x1f36b9){return console[_0x1bde51(0x7bf)](_0x1f36b9),0x0;}}async[a0_0x11d42e(0x849)](_0xcc83d5,_0x2c1569){const _0x24aed8=a0_0x11d42e;if(!Array[_0x24aed8(0x81f)](_0xcc83d5)||_0xcc83d5[_0x24aed8(0x57a)]===0x0)throw new Error(_0x24aed8(0x3e8));try{return(await this[_0x24aed8(0x658)](_0x2c1569)[_0x24aed8(0x849)](_0xcc83d5))[_0x24aed8(0x57a)];}catch(_0x5a73b0){throw console[_0x24aed8(0x7bf)]('Erro\x20ao\x20inserir\x20chats:',_0x5a73b0),_0x5a73b0;}}async[a0_0x11d42e(0x324)](_0x860c29,_0x2ace37){const _0xfb0d74=a0_0x11d42e;try{await this[_0xfb0d74(0x658)](_0x2ace37)['deleteOne']({'_id':_0x860c29});}catch(_0x9ab28f){throw console[_0xfb0d74(0x7bf)]('Erro\x20ao\x20deletar\x20chat:',_0x9ab28f),_0x9ab28f;}}},Bt=class extends O{constructor(_0x30abfe,_0x243afd,_0x297cf8){const _0x2a7aeb=a0_0x11d42e;super(_0x243afd),this[_0x2a7aeb(0x6f0)]=_0x30abfe,this[_0x2a7aeb(0x155)]=_0x243afd,this[_0x2a7aeb(0x494)]=_0x297cf8;}async[a0_0x11d42e(0x604)](_0x5c20a3){const _0x4dbd6c=a0_0x11d42e;if(_0x5c20a3['length']!==0x0)try{return{'insertCount':(await this['cacheContactModel'][_0x4dbd6c(0x849)]([..._0x5c20a3]))['length']};}catch(_0xaf5cd7){return _0xaf5cd7;}}async[a0_0x11d42e(0x8ad)](_0x4dac05,_0x32b373){const _0x5496f7=a0_0x11d42e;try{let _0x359468=A(_0x4dac05[_0x5496f7(0x2e2)]);return{'updatedCount':(await this[_0x5496f7(0x6f0)]['updateMany'](_0x359468,{'$set':_0x32b373}))[_0x5496f7(0x8ab)]};}catch(_0xd75e9b){return console[_0x5496f7(0x7bf)](_0x5496f7(0x3d1),_0xd75e9b),{'error':_0xd75e9b[_0x5496f7(0x1d7)]()};}}async[a0_0x11d42e(0x1e6)](_0x89bc6d){const _0x3cbb13=a0_0x11d42e;try{let _0x20aeb0={'_id':{'$in':_0x89bc6d}};return await this['cacheContactModel']['find'](_0x20aeb0)[_0x3cbb13(0x285)]();}catch(_0x2b5385){return console['error'](_0x3cbb13(0x309),_0x2b5385),[];}}async[a0_0x11d42e(0x165)](_0x296924){const _0x379fcf=a0_0x11d42e;try{return{'deletedCount':(await this['cacheContactModel'][_0x379fcf(0x71c)]({..._0x296924[_0x379fcf(0x2e2)]}))[_0x379fcf(0x5ae)]};}catch(_0x4cdf8f){return{'error':_0x4cdf8f?.[_0x379fcf(0x1d7)]()};}}async[a0_0x11d42e(0x6d7)](_0x14066c){const _0x21b370=a0_0x11d42e;try{let _0x136f9e=A(_0x14066c[_0x21b370(0x2e2)]);return await this[_0x21b370(0x6f0)][_0x21b370(0x6d7)](_0x136f9e)[_0x21b370(0x570)](_0x14066c?.[_0x21b370(0x570)]??0x0)['lean']();}catch{return[];}}async['findOne'](_0x6d25ee){const _0x80284=a0_0x11d42e;try{let _0x256ee0=A(_0x6d25ee[_0x80284(0x2e2)]);return await this['cacheContactModel'][_0x80284(0x588)](_0x256ee0)['lean']();}catch{return null;}}},Wt=class extends O{constructor(_0x549ea4,_0x1cee9f,_0x1b7068){const _0x4b76c9=a0_0x11d42e;super(_0x1cee9f),this[_0x4b76c9(0x486)]=_0x549ea4,this[_0x4b76c9(0x155)]=_0x1cee9f,this[_0x4b76c9(0x494)]=_0x1b7068;}async[a0_0x11d42e(0x604)](_0x4cfa7c){const _0x14a133=a0_0x11d42e;if(_0x4cfa7c['length']!==0x0)try{return{'insertCount':(await this[_0x14a133(0x486)]['insertMany']([..._0x4cfa7c]))[_0x14a133(0x57a)]};}catch(_0x19dfcb){return _0x19dfcb;}}async['update'](_0x410c4c,_0x5661fb){const _0x3805ca=a0_0x11d42e;try{let _0x58c5bb=A(_0x410c4c[_0x3805ca(0x2e2)]);return{'updatedCount':(await this[_0x3805ca(0x486)][_0x3805ca(0x6e6)](_0x58c5bb,{'$set':_0x5661fb}))['modifiedCount']};}catch(_0x6ec8cb){return console[_0x3805ca(0x7bf)](_0x3805ca(0x3d1),_0x6ec8cb),{'error':_0x6ec8cb[_0x3805ca(0x1d7)]()};}}async['delete'](_0x2b368c){const _0x2c529d=a0_0x11d42e;try{return{'deletedCount':(await this['messageLogsModel'][_0x2c529d(0x71c)]({..._0x2b368c[_0x2c529d(0x2e2)]}))[_0x2c529d(0x5ae)]};}catch(_0x17553c){return{'error':_0x17553c?.[_0x2c529d(0x1d7)]()};}}async[a0_0x11d42e(0x588)](_0x1abc31){const _0xe9ac46=a0_0x11d42e;try{let _0x1f6293=A(_0x1abc31[_0xe9ac46(0x2e2)]);return await this['messageLogsModel'][_0xe9ac46(0x588)](_0x1f6293)[_0xe9ac46(0x285)]();}catch{return null;}}},zt=class extends O{[a0_0x11d42e(0x4c1)](_0x3f0597){return Aa(_0x3f0597);}async[a0_0x11d42e(0x793)](_0xfc7b21,_0x206291,_0x44295c,_0x24b7e6){const _0x1d8b05=a0_0x11d42e;try{let _0x58ca23={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x24b7e6},_0x1b7346=this[_0x1d8b05(0x4c1)](_0x44295c),_0xc22278=A(_0xfc7b21[_0x1d8b05(0x2e2)]);return await _0x1b7346[_0x1d8b05(0x791)](_0xc22278,{'$set':_0x206291},_0x58ca23);}catch(_0x46be43){return console[_0x1d8b05(0x7bf)](_0x46be43),null;}}async[a0_0x11d42e(0x6d7)](_0x39e0dd,_0x23fa7b){const _0x54f660=a0_0x11d42e;try{let _0x280ba1=this[_0x54f660(0x4c1)](_0x23fa7b),_0xca8638=A(_0x39e0dd['where']);return await _0x280ba1['find'](_0xca8638);}catch(_0x2cbf32){console[_0x54f660(0x7bf)](_0x2cbf32);}}async[a0_0x11d42e(0x165)](_0x1f7a9c,_0x69e60e){const _0x18b347=a0_0x11d42e;try{let _0xc687a2=this[_0x18b347(0x4c1)](_0x69e60e),_0x5a5f74=A(_0x1f7a9c[_0x18b347(0x2e2)]);await _0xc687a2[_0x18b347(0x71c)](_0x5a5f74);}catch(_0x488035){console[_0x18b347(0x7bf)](_0x488035);}}async[a0_0x11d42e(0x4b2)](_0x434e5c){const _0x2d544f=a0_0x11d42e;try{return await this['getLabelModelForOwner'](_0x434e5c)[_0x2d544f(0x2cc)][_0x2d544f(0x856)](),{'success':!0x0};}catch(_0x34e357){return console[_0x2d544f(0x7bf)](_0x34e357),{'success':!0x1,'error':_0x34e357};}}},Ht=class{constructor(_0x3fbdbd){const _0x55b22a=a0_0x11d42e;this[_0x55b22a(0x539)]=_0x3fbdbd;}async[a0_0x11d42e(0x71b)]({instanceName:_0x5a0628},_0x1817e9){const _0x5268df=a0_0x11d42e;return await this[_0x5268df(0x539)][_0x5268df(0x339)][_0x5a0628]['editChat'](_0x1817e9);}async[a0_0x11d42e(0x3b1)]({instanceName:_0x3a0ba0},_0x580ed3){const _0x1d0ca3=a0_0x11d42e;return await this['waMonitor'][_0x1d0ca3(0x339)][_0x3a0ba0][_0x1d0ca3(0x3b1)](_0x580ed3);}async[a0_0x11d42e(0x551)]({instanceName:_0x1d161a},_0x25b67b){const _0x29e2e3=a0_0x11d42e;return await this[_0x29e2e3(0x539)]['waInstances'][_0x1d161a][_0x29e2e3(0x551)](_0x25b67b);}async['readMessage']({instanceName:_0x4de721},_0x28291d){const _0x45a07a=a0_0x11d42e;return await this[_0x45a07a(0x539)][_0x45a07a(0x339)][_0x4de721]['markMessageAsRead'](_0x28291d);}async[a0_0x11d42e(0x712)]({instanceName:_0x3739af},_0x544621){const _0x28d18a=a0_0x11d42e;return await this[_0x28d18a(0x539)][_0x28d18a(0x339)][_0x3739af][_0x28d18a(0x712)](_0x544621);}async[a0_0x11d42e(0x568)]({instanceName:_0x5cc28c},_0x1a14c4){const _0x54dfa2=a0_0x11d42e;return await this['waMonitor'][_0x54dfa2(0x339)][_0x5cc28c]['deleteMessage'](_0x1a14c4);}async['fetchProfilePicture']({instanceName:_0x4cd139},_0x70c8ab){const _0x5b1243=a0_0x11d42e;return await this[_0x5b1243(0x539)][_0x5b1243(0x339)][_0x4cd139][_0x5b1243(0x160)](_0x70c8ab[_0x5b1243(0x2b6)]);}async['fetchProfile']({instanceName:_0x26e319},_0x541d1b){const _0x2b1fc3=a0_0x11d42e;return await this[_0x2b1fc3(0x539)]['waInstances'][_0x26e319]['fetchProfile'](_0x541d1b[_0x2b1fc3(0x2b6)]);}async[a0_0x11d42e(0x73f)]({instanceName:_0x4e204f},_0xa522c2){const _0xf430c6=a0_0x11d42e;return await this['waMonitor'][_0xf430c6(0x339)][_0x4e204f][_0xf430c6(0x73f)](_0xa522c2);}async[a0_0x11d42e(0x51c)]({instanceName:_0x4c4e92},_0x5bd544){const _0x3ee0dc=a0_0x11d42e;return await this[_0x3ee0dc(0x539)][_0x3ee0dc(0x339)][_0x4c4e92][_0x3ee0dc(0x51c)](_0x5bd544);}async[a0_0x11d42e(0x762)]({instanceName:_0xb146a4},_0x520c6d){const _0x10b121=a0_0x11d42e;return await this['waMonitor'][_0x10b121(0x339)][_0xb146a4][_0x10b121(0x762)](_0x520c6d);}async[a0_0x11d42e(0x70b)]({instanceName:_0x466a7c},_0x128f4d){const _0x4e2192=a0_0x11d42e;return await this['waMonitor']['waInstances'][_0x466a7c][_0x4e2192(0x70b)](_0x128f4d);}async[a0_0x11d42e(0x479)]({instanceName:_0x421e33}){const _0xb0b1c3=a0_0x11d42e;return await this[_0xb0b1c3(0x539)][_0xb0b1c3(0x339)][_0x421e33][_0xb0b1c3(0x479)]();}async[a0_0x11d42e(0x674)]({instanceName:_0x2fae11}){const _0x49c618=a0_0x11d42e;return await this[_0x49c618(0x539)][_0x49c618(0x339)][_0x2fae11][_0x49c618(0x674)]();}async[a0_0x11d42e(0x632)]({instanceName:_0x483063}){const _0x2c65e2=a0_0x11d42e;return await this[_0x2c65e2(0x539)]['waInstances'][_0x483063][_0x2c65e2(0x632)]();}async[a0_0x11d42e(0x7b5)]({instanceName:_0x2f4f98},_0x7a5ff1){const _0x25e06a=a0_0x11d42e;return await this[_0x25e06a(0x539)][_0x25e06a(0x339)][_0x2f4f98][_0x25e06a(0x7b5)](_0x7a5ff1);}async[a0_0x11d42e(0x2c9)]({instanceName:_0x358d9c},_0x206fab){const _0x3d7379=a0_0x11d42e;return await this[_0x3d7379(0x539)]['waInstances'][_0x358d9c]['fetchBusinessProfile'](_0x206fab[_0x3d7379(0x2b6)]);}async['updateProfileName']({instanceName:_0x4c89ee},_0x5df549){const _0x2f4b45=a0_0x11d42e;return await this[_0x2f4b45(0x539)][_0x2f4b45(0x339)][_0x4c89ee][_0x2f4b45(0x863)](_0x5df549[_0x2f4b45(0x414)]);}async['updateProfileStatus']({instanceName:_0x52ba7a},_0x48c203){const _0x5561e5=a0_0x11d42e;return await this[_0x5561e5(0x539)]['waInstances'][_0x52ba7a][_0x5561e5(0x19d)](_0x48c203[_0x5561e5(0x15d)]);}async[a0_0x11d42e(0x422)]({instanceName:_0x2d36f6},_0x580e81){const _0x35b085=a0_0x11d42e;return await this[_0x35b085(0x539)][_0x35b085(0x339)][_0x2d36f6][_0x35b085(0x422)](_0x580e81[_0x35b085(0x685)]);}async[a0_0x11d42e(0x7d5)]({instanceName:_0x489b7c},_0x37c35c){const _0xc53d02=a0_0x11d42e;return await this[_0xc53d02(0x539)][_0xc53d02(0x339)][_0x489b7c][_0xc53d02(0x7d5)]();}},Kt=require(a0_0x11d42e(0x73b)),Qt=class l{constructor(_0x58a1e1,_0x4a5f86,_0x523588,_0x258de1,_0x58003f){const _0x47a5f8=a0_0x11d42e;this[_0x47a5f8(0x539)]=_0x58a1e1,this[_0x47a5f8(0x155)]=_0x4a5f86,this[_0x47a5f8(0x373)]=_0x523588,this[_0x47a5f8(0x7e3)]=_0x258de1,this['authService']=_0x58003f,this[_0x47a5f8(0x85a)]=new R(l[_0x47a5f8(0x414)]);}async['createInstance']({instanceName:_0x4248f2,apikey:_0x21de37,number:_0x5ca0a4,proxy:_0x4bafb1=!0x0}){const _0x2c89d9=a0_0x11d42e;try{let _0x477f5c=new Ae(this[_0x2c89d9(0x155)],this['eventEmitter'],this[_0x2c89d9(0x373)]);_0x477f5c[_0x2c89d9(0x7ec)]=_0x4248f2,this[_0x2c89d9(0x539)]['waInstances'][_0x477f5c[_0x2c89d9(0x7ec)]]=_0x477f5c;let _0x4fe570={};_0x21de37?(await this[_0x2c89d9(0x373)][_0x2c89d9(0x44a)][_0x2c89d9(0x3a3)]({'apikey':_0x21de37},_0x4248f2),_0x4fe570[_0x2c89d9(0x472)]=_0x21de37):_0x4fe570=await this[_0x2c89d9(0x1ea)][_0x2c89d9(0x694)]({'instanceName':_0x477f5c[_0x2c89d9(0x7ec)]});let _0x48ef32;if(_0x5ca0a4){if(_0x48ef32=await this['verifyWhatsAppNumber'](_0x5ca0a4),_0x48ef32['error'])throw new x(_0x48ef32['error'][_0x2c89d9(0x1d7)]());_0x5ca0a4=_0x48ef32['number'];}let _0x48b1a3;return await _0x477f5c[_0x2c89d9(0x136)](_0x5ca0a4),await(0x0,Kt[_0x2c89d9(0x779)])(0xfa0),_0x5ca0a4&&await(0x0,Kt[_0x2c89d9(0x779)])(0xbb8),_0x48b1a3=_0x477f5c[_0x2c89d9(0x29a)],{'instance':{'instanceName':_0x477f5c[_0x2c89d9(0x7ec)],'status':_0x2c89d9(0x171)},'hash':_0x4fe570,'qrcode':_0x48b1a3};}catch(_0x85d780){throw this[_0x2c89d9(0x85a)][_0x2c89d9(0x7bf)](_0x85d780),_0x85d780;}}async['connectToWhatsappController']({instanceName:_0x5e4078,number:_0x59fa8=null}){const _0x3f10ac=a0_0x11d42e;try{let _0x1a1e08=this['waMonitor']['waInstances'][_0x5e4078];switch(_0x1a1e08?.[_0x3f10ac(0x6ce)]?.[_0x3f10ac(0x44d)]){case'close':return await _0x1a1e08[_0x3f10ac(0x136)](_0x59fa8),await(0x0,Kt[_0x3f10ac(0x779)])(0x7d0),_0x1a1e08['qrCode'];case _0x3f10ac(0x5bf):return _0x1a1e08[_0x3f10ac(0x29a)];default:return await this[_0x3f10ac(0x591)]({'instanceName':_0x5e4078});}}catch(_0x3eb291){this[_0x3f10ac(0x85a)][_0x3f10ac(0x86e)](_0x3eb291);}}async['connectionState']({instanceName:_0x317dea}){const _0x3de322=a0_0x11d42e;let _0x15c6dc=this[_0x3de322(0x539)][_0x3de322(0x339)][_0x317dea][_0x3de322(0x6ce)],_0x34eb4e=null;_0x15c6dc[_0x3de322(0x44d)]===_0x3de322(0x78a)&&_0x317dea&&(_0x34eb4e=await this[_0x3de322(0x539)][_0x3de322(0x519)](_0x317dea));let _0x49bdda=null;return _0x15c6dc[_0x3de322(0x44d)]===_0x3de322(0x5bf)&&_0x317dea&&(_0x49bdda=this['waMonitor'][_0x3de322(0x339)][_0x317dea][_0x3de322(0x29a)]),{'instance':_0x317dea,'connectionStatus':_0x15c6dc,'instanceInfo':_0x34eb4e,'qrcode':_0x49bdda};}async[a0_0x11d42e(0x89e)](_0x14eaa7){const _0x45ba5b=a0_0x11d42e;_0x14eaa7=_0x14eaa7[_0x45ba5b(0x771)](/\D/g,'');let _0x38dc94=Object['keys'](this[_0x45ba5b(0x539)][_0x45ba5b(0x339)])[_0x45ba5b(0x852)](_0x2b947e=>{const _0x8de0fe=_0x45ba5b;let _0x3c73a2=this['waMonitor'][_0x8de0fe(0x339)][_0x2b947e];return _0x3c73a2&&_0x3c73a2['connectionStatus']&&_0x3c73a2[_0x8de0fe(0x6ce)]['state']===_0x8de0fe(0x78a);});if(_0x38dc94['length']===0x0)return{'number':this[_0x45ba5b(0x6bf)](_0x14eaa7)};let _0x5e4d76=Math[_0x45ba5b(0x6d5)](Math['random']()*_0x38dc94[_0x45ba5b(0x57a)]),_0x16bd89=_0x38dc94[_0x5e4d76];try{let _0x22b0d3=(await this[_0x45ba5b(0x539)]['waInstances'][_0x16bd89]['whatsappNumber']({'numbers':[_0x14eaa7]}))[_0x45ba5b(0x14f)]();return _0x22b0d3[_0x45ba5b(0x418)]?{'number':_0x22b0d3[_0x45ba5b(0x2c7)][_0x45ba5b(0x771)]('@s.whatsapp.net','')}:{'number':_0x14eaa7,'error':_0x45ba5b(0x167)};}catch(_0x1a526b){return this[_0x45ba5b(0x85a)][_0x45ba5b(0x7bf)](_0x45ba5b(0x6f1)+_0x1a526b),{'number':_0x14eaa7,'error':'Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.'};}}[a0_0x11d42e(0x6bf)](_0x4ee14f){const _0x2f0efd=a0_0x11d42e;let _0x4ce736=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x2f0efd(0x4c4)](_0x4ee14f);if(_0x4ce736&&_0x4ce736[0x1]==='55'){let _0xad343=_0x4ce736[0x2],_0x1d5153=_0x4ce736[0x3],_0x4c8f5c=_0x4ce736[0x4];if(parseInt(_0xad343)>=0x1f&&_0x1d5153==='9')return _0x4ce736[0x1]+_0xad343+_0x4c8f5c;}return _0x4ee14f;}async['restartInstance']({instanceName:_0x5bfbf5}){const _0x19f642=a0_0x11d42e;try{return this[_0x19f642(0x539)]['waInstances'][_0x5bfbf5]?.[_0x19f642(0x60c)]?.['ws']?.['close'](),{'status':_0x19f642(0x1f7),'error':!0x1,'response':{'message':_0x19f642(0x382)}};}catch(_0x14e840){this[_0x19f642(0x85a)][_0x19f642(0x7bf)](_0x14e840);}}async[a0_0x11d42e(0x74e)]({instanceName:_0x3e11c9}){const _0x293de6=a0_0x11d42e;return _0x3e11c9?this['waMonitor']['instanceInfo'](_0x3e11c9):this[_0x293de6(0x539)][_0x293de6(0x519)]();}async[a0_0x11d42e(0x16c)]({instanceName:_0x16a35d}){const _0xbea98a=a0_0x11d42e;try{return await this[_0xbea98a(0x539)][_0xbea98a(0x339)][_0x16a35d]?.['client']?.['logout'](_0xbea98a(0x7f2)+_0x16a35d),{'error':!0x1,'message':_0xbea98a(0x6b6)};}catch(_0x2abf1f){throw new x(_0x2abf1f['toString']());}}async[a0_0x11d42e(0x129)]({instanceName:_0x1309f9}){const _0x2f8c31=a0_0x11d42e;if((await this[_0x2f8c31(0x591)]({'instanceName':_0x1309f9}))[_0x2f8c31(0x6ce)]['state']===_0x2f8c31(0x78a))throw new m([_0x2f8c31(0x600),'The\x20instance\x20needs\x20to\x20be\x20disconnected']);try{return delete this[_0x2f8c31(0x539)][_0x2f8c31(0x339)][_0x1309f9],{'error':!0x1,'message':_0x2f8c31(0x6ac)};}catch(_0x98c62c){throw new m(_0x98c62c[_0x2f8c31(0x1d7)]());}}},ne=require(a0_0x11d42e(0x499)),Yt=class{constructor(_0x4d158b){this['waMonitor']=_0x4d158b;}async[a0_0x11d42e(0x8bd)]({instanceName:_0x592e56},_0x135ca9){const _0x55b5ca=a0_0x11d42e;return await this[_0x55b5ca(0x539)][_0x55b5ca(0x339)][_0x592e56][_0x55b5ca(0x78c)](_0x135ca9);}async[a0_0x11d42e(0x412)]({instanceName:_0x20d688},_0x53ac0c){const _0x1c9e4=a0_0x11d42e;return await this[_0x1c9e4(0x539)][_0x1c9e4(0x339)][_0x20d688][_0x1c9e4(0x603)](_0x53ac0c);}async[a0_0x11d42e(0x881)]({instanceName:_0x24f645},_0x7dfc91){const _0x1bfc17=a0_0x11d42e;if((0x0,ne[_0x1bfc17(0x2fb)])(_0x7dfc91?.['mediaMessage']?.[_0x1bfc17(0x583)])&&!_0x7dfc91?.['mediaMessage']?.[_0x1bfc17(0x329)])throw new m('For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.');if((0x0,ne[_0x1bfc17(0x360)])(_0x7dfc91?.[_0x1bfc17(0x7b4)]?.[_0x1bfc17(0x583)])||(0x0,ne['isBase64'])(_0x7dfc91?.[_0x1bfc17(0x7b4)]?.[_0x1bfc17(0x583)]))return await this[_0x1bfc17(0x539)][_0x1bfc17(0x339)][_0x24f645]['mediaMessage'](_0x7dfc91);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x11d42e(0x7d7)]({instanceName:_0x4ff6a9},_0x3d8882){const _0x332d7d=a0_0x11d42e;if((0x0,ne['isURL'])(_0x3d8882['stickerMessage'][_0x332d7d(0x5d3)])||(0x0,ne[_0x332d7d(0x2fb)])(_0x3d8882[_0x332d7d(0x28a)]['image']))return await this['waMonitor'][_0x332d7d(0x339)][_0x4ff6a9][_0x332d7d(0x216)](_0x3d8882);throw new m(_0x332d7d(0x1e7));}async['sendWhatsAppAudio']({instanceName:_0x514ab7},_0x452486){const _0x2d3545=a0_0x11d42e;if((0x0,ne[_0x2d3545(0x360)])(_0x452486[_0x2d3545(0x5ed)][_0x2d3545(0x43f)])||(0x0,ne['isBase64'])(_0x452486[_0x2d3545(0x5ed)][_0x2d3545(0x43f)]))return await this['waMonitor']['waInstances'][_0x514ab7][_0x2d3545(0x569)](_0x452486);throw new m(_0x2d3545(0x1e7));}async['sendButtons']({instanceName:_0x2facc1},_0x4d3abd){const _0xd9be8e=a0_0x11d42e;return await this[_0xd9be8e(0x539)][_0xd9be8e(0x339)][_0x2facc1][_0xd9be8e(0x7ed)](_0x4d3abd);}async[a0_0x11d42e(0x819)]({instanceName:_0x472746},_0x29e425){const _0x3fcbcf=a0_0x11d42e;return await this['waMonitor'][_0x3fcbcf(0x339)][_0x472746][_0x3fcbcf(0x4d5)](_0x29e425);}async[a0_0x11d42e(0x442)]({instanceName:_0x389180},_0x262dc2){const _0x2d0461=a0_0x11d42e;return await this[_0x2d0461(0x539)][_0x2d0461(0x339)][_0x389180]['pollMessage'](_0x262dc2);}async[a0_0x11d42e(0x303)]({instanceName:_0x48dec0},_0x207641){const _0x1e0de0=a0_0x11d42e;return await this[_0x1e0de0(0x539)][_0x1e0de0(0x339)][_0x48dec0][_0x1e0de0(0x659)](_0x207641);}async[a0_0x11d42e(0x3a1)]({instanceName:_0x71eb43},_0x45dd30){const _0x5f0781=a0_0x11d42e;return await this[_0x5f0781(0x539)]['waInstances'][_0x71eb43][_0x5f0781(0x41b)](_0x45dd30);}async[a0_0x11d42e(0x783)]({instanceName:_0x5b9ac2},_0x4d0789){const _0x473592=a0_0x11d42e;if(!_0x4d0789[_0x473592(0x275)]['reaction'][_0x473592(0x542)](/[^\(\)\w\sà-ú"-\+]+/))throw new m(_0x473592(0x6a5));return await this[_0x473592(0x539)]['waInstances'][_0x5b9ac2][_0x473592(0x275)](_0x4d0789);}async[a0_0x11d42e(0x4f2)]({instanceName:_0x25bcc7},_0x177e99){const _0x13f353=a0_0x11d42e;return await this[_0x13f353(0x539)]['waInstances'][_0x25bcc7][_0x13f353(0x8ba)](_0x177e99);}},ji=require(a0_0x11d42e(0x159)),Gs=require(a0_0x11d42e(0x532)),Xt=class l{constructor(_0x15ab98,_0xfad76e,_0x174251){const _0x1963d6=a0_0x11d42e;this[_0x1963d6(0x155)]=_0x15ab98,this['waMonitor']=_0xfad76e,this['repository']=_0x174251,this[_0x1963d6(0x85a)]=new R(l[_0x1963d6(0x414)]);}async[a0_0x11d42e(0x1f4)](_0x1b8be8){const _0x33e79d=a0_0x11d42e;let _0x18358c=this[_0x33e79d(0x155)][_0x33e79d(0x686)]('AUTHENTICATION')['JWT'],_0x43c758=(0x0,ji[_0x33e79d(0x549)])({'instanceName':_0x1b8be8[_0x33e79d(0x7ec)],'apiName':ct,'tokenId':(0x0,Gs['v4'])()},_0x18358c[_0x33e79d(0x1a5)],{'expiresIn':_0x18358c[_0x33e79d(0x645)],'encoding':'utf8','subject':'g-t'}),_0x3a4760=await this[_0x33e79d(0x373)][_0x33e79d(0x44a)][_0x33e79d(0x3a3)]({'jwt':_0x43c758},_0x1b8be8[_0x33e79d(0x7ec)]);if(_0x3a4760[_0x33e79d(0x7bf)])throw this[_0x33e79d(0x85a)][_0x33e79d(0x7bf)]({'localError':l[_0x33e79d(0x414)]+_0x33e79d(0x407),'error':_0x3a4760['error']}),new m(_0x33e79d(0x32b),_0x3a4760['error']?.[_0x33e79d(0x1d7)]());return{'jwt':_0x43c758};}async[a0_0x11d42e(0x472)](_0x2d4ed4){const _0x2a3109=a0_0x11d42e;let _0x5f522b=(0x0,Gs['v4'])()['toUpperCase'](),_0x56c016=await this[_0x2a3109(0x373)][_0x2a3109(0x44a)][_0x2a3109(0x3a3)]({'apikey':_0x5f522b},_0x2d4ed4[_0x2a3109(0x7ec)]);if(_0x56c016[_0x2a3109(0x7bf)])throw this[_0x2a3109(0x85a)][_0x2a3109(0x7bf)]({'localError':l[_0x2a3109(0x414)]+'.jwt','error':_0x56c016[_0x2a3109(0x7bf)]}),new m(_0x2a3109(0x32b),_0x56c016['error']?.[_0x2a3109(0x1d7)]());return{'apikey':_0x5f522b};}async[a0_0x11d42e(0x694)](_0x202958){const _0x2b1e08=a0_0x11d42e;let _0x25b314=this[_0x2b1e08(0x155)][_0x2b1e08(0x686)](_0x2b1e08(0x6e5));return await this[_0x25b314[_0x2b1e08(0x67c)]](_0x202958);}},Zt=class{constructor(_0xd54c7a){const _0x191a9b=a0_0x11d42e;this[_0x191a9b(0x539)]=_0xd54c7a;}async[a0_0x11d42e(0x82e)](_0x498cc7,_0x28b898){const _0x7bd17c=a0_0x11d42e;return await this[_0x7bd17c(0x539)]['waInstances'][_0x498cc7['instanceName']][_0x7bd17c(0x82e)](_0x28b898);}async[a0_0x11d42e(0x6de)](_0x4dcd82,_0x5bf05f){const _0x1e36eb=a0_0x11d42e;return await this[_0x1e36eb(0x539)][_0x1e36eb(0x339)][_0x4dcd82[_0x1e36eb(0x7ec)]][_0x1e36eb(0x6de)](_0x5bf05f);}async[a0_0x11d42e(0x56d)](_0x54bbeb,_0x4cde87){const _0x76b3b3=a0_0x11d42e;return await this['waMonitor'][_0x76b3b3(0x339)][_0x54bbeb[_0x76b3b3(0x7ec)]][_0x76b3b3(0x56d)](_0x4cde87);}async[a0_0x11d42e(0x5d1)](_0x233285,_0x54ff49){const _0x30abd1=a0_0x11d42e;return await this[_0x30abd1(0x539)][_0x30abd1(0x339)][_0x233285[_0x30abd1(0x7ec)]][_0x30abd1(0x5d1)](_0x54ff49);}async[a0_0x11d42e(0x2e4)](_0x5f431a,_0x290d9a){const _0x12a7e2=a0_0x11d42e;return await this[_0x12a7e2(0x539)][_0x12a7e2(0x339)][_0x5f431a[_0x12a7e2(0x7ec)]][_0x12a7e2(0x2e4)](_0x290d9a);}async[a0_0x11d42e(0x4a5)](_0x1f123f,_0xc11485){const _0x4b9db9=a0_0x11d42e;return await this[_0x4b9db9(0x539)][_0x4b9db9(0x339)][_0x1f123f[_0x4b9db9(0x7ec)]][_0x4b9db9(0x4a5)](_0xc11485);}async['findGroupInfo'](_0x2157a8,_0x5d1a43){const _0x5836b6=a0_0x11d42e;return await this[_0x5836b6(0x539)][_0x5836b6(0x339)][_0x2157a8['instanceName']][_0x5836b6(0x65e)](_0x5d1a43);}async[a0_0x11d42e(0x801)](_0x4a0394){const _0x37b5de=a0_0x11d42e;return await this[_0x37b5de(0x539)][_0x37b5de(0x339)][_0x4a0394[_0x37b5de(0x7ec)]][_0x37b5de(0x801)]();}async[a0_0x11d42e(0x742)](_0x22cb15,_0x1aacc1){const _0xb8067a=a0_0x11d42e;return await this[_0xb8067a(0x539)]['waInstances'][_0x22cb15[_0xb8067a(0x7ec)]]['inviteCode'](_0x1aacc1);}async[a0_0x11d42e(0x4ee)](_0x5cccfa,_0x1a1da9){const _0xf411b5=a0_0x11d42e;return await this[_0xf411b5(0x539)][_0xf411b5(0x339)][_0x5cccfa[_0xf411b5(0x7ec)]][_0xf411b5(0x4ee)](_0x1a1da9);}async['groupGetInviteInfo'](_0x439c7f,_0x9332fd){const _0x4e7b04=a0_0x11d42e;return await this[_0x4e7b04(0x539)][_0x4e7b04(0x339)][_0x439c7f[_0x4e7b04(0x7ec)]][_0x4e7b04(0x4c2)](_0x9332fd);}async[a0_0x11d42e(0x64d)](_0x55b6a3,_0x3814ce){const _0xe4e528=a0_0x11d42e;return await this[_0xe4e528(0x539)][_0xe4e528(0x339)][_0x55b6a3[_0xe4e528(0x7ec)]][_0xe4e528(0x64d)](_0x3814ce);}async[a0_0x11d42e(0x79c)](_0x229d24,_0x3266a9){const _0x53ff7f=a0_0x11d42e;return await this['waMonitor']['waInstances'][_0x229d24[_0x53ff7f(0x7ec)]][_0x53ff7f(0x79c)](_0x3266a9);}async['updateGParticipate'](_0x5e7e86,_0x42e0a9){const _0x504143=a0_0x11d42e;return await this[_0x504143(0x539)][_0x504143(0x339)][_0x5e7e86['instanceName']][_0x504143(0x45b)](_0x42e0a9);}async['toggleEphemeral'](_0x8753dd,_0x2e6a7a){const _0x33ad69=a0_0x11d42e;return await this[_0x33ad69(0x539)][_0x33ad69(0x339)][_0x8753dd['instanceName']][_0x33ad69(0x47b)](_0x2e6a7a);}async[a0_0x11d42e(0x40d)](_0x4ada5e,_0xf86f6e){const _0x291314=a0_0x11d42e;return await this['waMonitor'][_0x291314(0x339)][_0x4ada5e[_0x291314(0x7ec)]][_0x291314(0x40d)](_0xf86f6e);}},es=class{constructor(_0xd96b17){const _0x12e5c6=a0_0x11d42e;this[_0x12e5c6(0x539)]=_0xd96b17;}['create'](_0x3f6cb4,_0x5b7233){const _0x43defb=a0_0x11d42e;return this['waMonitor'][_0x43defb(0x339)][_0x3f6cb4[_0x43defb(0x7ec)]][_0x43defb(0x28d)](_0x5b7233);}async[a0_0x11d42e(0x6d7)](_0x224576){const _0x1d30a1=a0_0x11d42e;try{return await this['waMonitor'][_0x1d30a1(0x339)][_0x224576[_0x1d30a1(0x7ec)]][_0x1d30a1(0x25f)]();}catch{return{'enabled':null,'url':''};}}},mh=new R(a0_0x11d42e(0x770)),ts=class{constructor(_0x2ef071){this['waMonitor']=_0x2ef071;}async['editScheduleMessage'](_0x3113b0,_0x15506d){const _0x53fec9=a0_0x11d42e;return await this[_0x53fec9(0x539)]['waInstances'][_0x3113b0[_0x53fec9(0x7ec)]]['editScheduleMessage'](_0x15506d);}async[a0_0x11d42e(0x58e)](_0x2dddf8){const _0x45c6e6=a0_0x11d42e;return await this[_0x45c6e6(0x539)]['waInstances'][_0x2dddf8[_0x45c6e6(0x7ec)]]['getScheduleMessage']();}async[a0_0x11d42e(0x6c0)](_0x18a419){const _0x3b24f6=a0_0x11d42e;return await this[_0x3b24f6(0x539)][_0x3b24f6(0x339)][_0x18a419['instanceName']]['deleteDoneMessages']();}async[a0_0x11d42e(0x42a)](_0x4fd898){const _0x243947=a0_0x11d42e;return await this[_0x243947(0x539)][_0x243947(0x339)][_0x4fd898['instanceName']]['deleteAllMessages']();}async[a0_0x11d42e(0x3ea)](_0xc766e5){const _0x50708d=a0_0x11d42e;return await this[_0x50708d(0x539)][_0x50708d(0x339)][_0xc766e5['instanceName']][_0x50708d(0x3ea)]();}async['updateAgent'](_0x27f250,_0x517d0b){const _0x57f775=a0_0x11d42e;return await this[_0x57f775(0x539)][_0x57f775(0x339)][_0x27f250['instanceName']][_0x57f775(0x737)](_0x517d0b);}async['updateCustomFields'](_0x51c1b0,_0x152836){const _0x5a196e=a0_0x11d42e;return await this[_0x5a196e(0x539)]['waInstances'][_0x51c1b0['instanceName']]['updateCustomFields'](_0x152836);}async[a0_0x11d42e(0x7ff)](_0x1c7821,_0x1ac019){const _0x4f9125=a0_0x11d42e;return await this[_0x4f9125(0x539)][_0x4f9125(0x339)][_0x1c7821[_0x4f9125(0x7ec)]][_0x4f9125(0x7ff)](_0x1ac019);}async[a0_0x11d42e(0x172)](_0xb1ad8e,_0x3f5952){const _0xd23ea4=a0_0x11d42e;return await this['waMonitor']['waInstances'][_0xb1ad8e[_0xd23ea4(0x7ec)]][_0xd23ea4(0x172)](_0x3f5952);}async[a0_0x11d42e(0x1ac)](_0x590d36,_0x528fbf){const _0x564158=a0_0x11d42e;return await this[_0x564158(0x539)]['waInstances'][_0x590d36[_0x564158(0x7ec)]]['startFlow'](_0x528fbf);}async[a0_0x11d42e(0x3e7)](_0x321b76,_0x404f18,_0x856a4f,_0x27d704){const _0x5e1fc1=a0_0x11d42e;return await this[_0x5e1fc1(0x539)][_0x5e1fc1(0x339)][_0x321b76][_0x5e1fc1(0x3e7)](_0x404f18,_0x856a4f,_0x27d704);}async[a0_0x11d42e(0x8c1)](_0x1ce438,_0x1f8775){const _0x306d07=a0_0x11d42e;return await this[_0x306d07(0x539)][_0x306d07(0x339)][_0x1ce438[_0x306d07(0x7ec)]][_0x306d07(0x8c1)](_0x1f8775);}async['fetchConversation'](_0x1be57d,_0x1f2e4b){const _0x97b42b=a0_0x11d42e;return await this[_0x97b42b(0x539)][_0x97b42b(0x339)][_0x1be57d[_0x97b42b(0x7ec)]][_0x97b42b(0x6cb)](_0x1f2e4b);}async['editConversation'](_0xe205f5,_0x3337af){const _0x175629=a0_0x11d42e;return await this['waMonitor'][_0x175629(0x339)][_0xe205f5[_0x175629(0x7ec)]][_0x175629(0x68d)](_0x3337af);}async[a0_0x11d42e(0x409)](_0x579927,_0x5cfa53){const _0x1ac183=a0_0x11d42e;return await this['waMonitor'][_0x1ac183(0x339)][_0x579927[_0x1ac183(0x7ec)]][_0x1ac183(0x409)](_0x5cfa53);}async[a0_0x11d42e(0x15f)](_0x229209,_0x5237a5){const _0x4e1150=a0_0x11d42e;return await this['waMonitor'][_0x4e1150(0x339)][_0x229209[_0x4e1150(0x7ec)]][_0x4e1150(0x15f)](_0x5237a5['_id']);}async[a0_0x11d42e(0x70c)](_0x432d46,_0x436766,_0x12b033){const _0x6b697a=a0_0x11d42e;return await this[_0x6b697a(0x539)][_0x6b697a(0x339)][_0x432d46[_0x6b697a(0x7ec)]][_0x6b697a(0x70c)](_0x436766,_0x12b033);}async['editFlow'](_0x39a538,_0x49a3b3,_0x2396af){const _0xb124e2=a0_0x11d42e;return await this[_0xb124e2(0x539)][_0xb124e2(0x339)][_0x39a538[_0xb124e2(0x7ec)]][_0xb124e2(0x4da)](_0x49a3b3,_0x2396af);}async[a0_0x11d42e(0x7be)](_0x50f803,_0x5f4eb5){const _0xe8123d=a0_0x11d42e;return await this[_0xe8123d(0x539)][_0xe8123d(0x339)][_0x50f803[_0xe8123d(0x7ec)]][_0xe8123d(0x7be)](_0x5f4eb5);}async[a0_0x11d42e(0x58d)](_0x1e41e9,_0x5d6495){const _0x69fdc7=a0_0x11d42e;return await this[_0x69fdc7(0x539)][_0x69fdc7(0x339)][_0x1e41e9[_0x69fdc7(0x7ec)]][_0x69fdc7(0x58d)](_0x5d6495);}async[a0_0x11d42e(0x7ae)](_0x314b1a,_0x10255e){const _0x3b3b75=a0_0x11d42e;return await this[_0x3b3b75(0x539)]['waInstances'][_0x314b1a[_0x3b3b75(0x7ec)]][_0x3b3b75(0x7ae)](_0x10255e);}async[a0_0x11d42e(0x42e)](_0x99b622,_0x11c316){const _0x159d0a=a0_0x11d42e;return await this[_0x159d0a(0x539)][_0x159d0a(0x339)][_0x99b622['instanceName']][_0x159d0a(0x42e)](_0x11c316);}async[a0_0x11d42e(0x417)](_0x33a354,_0x409304){const _0x14b4b3=a0_0x11d42e;return await this[_0x14b4b3(0x539)]['waInstances'][_0x33a354[_0x14b4b3(0x7ec)]]['editFlowVaredit'](_0x409304);}async[a0_0x11d42e(0x2e0)](_0x4e21ee,_0x22a319){const _0x3b5deb=a0_0x11d42e;return await this[_0x3b5deb(0x539)][_0x3b5deb(0x339)][_0x4e21ee[_0x3b5deb(0x7ec)]]['editFlowVariable'](_0x22a319);}async[a0_0x11d42e(0x4c9)](_0x247e55,_0x79a3bf){const _0x30245d=a0_0x11d42e;return await this['waMonitor'][_0x30245d(0x339)][_0x247e55[_0x30245d(0x7ec)]][_0x30245d(0x4c9)](_0x79a3bf);}async[a0_0x11d42e(0x7da)](_0x25a06e){const _0x311d99=a0_0x11d42e;return await this[_0x311d99(0x539)]['waInstances'][_0x25a06e[_0x311d99(0x7ec)]][_0x311d99(0x7da)]();}},ss=class{constructor(_0x3c10a7){const _0xf7f076=a0_0x11d42e;this[_0xf7f076(0x4df)]=_0x3c10a7;}async[a0_0x11d42e(0x204)](_0x18337b,_0x251bf4){const _0xb4f244=a0_0x11d42e;return this[_0xb4f244(0x4df)][_0xb4f244(0x3a3)](_0x18337b,_0x251bf4);}async[a0_0x11d42e(0x25f)](_0x4bd2fc){const _0x3c87f9=a0_0x11d42e;return this[_0x3c87f9(0x4df)]['find'](_0x4bd2fc);}},as=class extends O{constructor(_0x28a83c,_0x569ed1){const _0x478b8c=a0_0x11d42e;super(_0x569ed1),this[_0x478b8c(0x284)]=_0x28a83c,this[_0x478b8c(0x155)]=_0x569ed1;}async[a0_0x11d42e(0x3a3)](_0x46335d,_0x4f1997){const _0x596607=a0_0x11d42e;try{return this[_0x596607(0x390)][_0x596607(0x84f)]?{'insertCount':(await this[_0x596607(0x284)]['replaceOne']({'_id':_0x4f1997},{..._0x46335d},{'upsert':!0x0}))[_0x596607(0x8ab)]}:{'insertCount':0x1};}catch(_0x194b97){return _0x194b97;}}async['delete'](_0x293246){const _0x1b9dcb=a0_0x11d42e;try{if(this[_0x1b9dcb(0x390)]['ENABLED']){await this[_0x1b9dcb(0x284)][_0x1b9dcb(0x315)]({'_id':_0x293246});return;}}catch(_0x436320){return{'error':_0x436320};}}async[a0_0x11d42e(0x6d7)](_0x39d31c){const _0x1d8e37=a0_0x11d42e;try{if(this[_0x1d8e37(0x390)]['ENABLED'])return await this[_0x1d8e37(0x284)]['findOne']({'_id':_0x39d31c});}catch{return{};}}},is=class extends O{constructor(_0x309127,_0x15af5a){const _0x31a299=a0_0x11d42e;super(_0x15af5a),this[_0x31a299(0x4e6)]=_0x309127,this[_0x31a299(0x155)]=_0x15af5a,this[_0x31a299(0x44a)]=_0x15af5a[_0x31a299(0x686)](_0x31a299(0x6e5));}async[a0_0x11d42e(0x3a3)](_0x271003,_0x2115b5){const _0x64a1ef=a0_0x11d42e;try{if(this[_0x64a1ef(0x390)][_0x64a1ef(0x84f)])return{'insertCount':(await this[_0x64a1ef(0x4e6)][_0x64a1ef(0x793)]({'_id':_0x2115b5},{'$set':{..._0x271003}},{'upsert':!0x0}))[_0x64a1ef(0x8ab)]};}catch(_0x233b07){return{'error':_0x233b07};}}async['updateAll'](_0x2f23f0,_0x2c1687){const _0x4a4260=a0_0x11d42e;try{if(this[_0x4a4260(0x390)]['ENABLED'])return{'insertCount':(await this[_0x4a4260(0x4e6)][_0x4a4260(0x6e6)](_0x2f23f0,{'$set':_0x2c1687},{'upsert':!0x1}))[_0x4a4260(0x8ab)]};throw new Error(_0x4a4260(0x51d));}catch(_0x126bcb){return{'error':_0x126bcb};}}async[a0_0x11d42e(0x71c)](_0x3c16b0){const _0x4350e8=a0_0x11d42e;try{if(this[_0x4350e8(0x390)]['ENABLED'])return{'insertCount':(await this[_0x4350e8(0x4e6)][_0x4350e8(0x71c)](_0x3c16b0))[_0x4350e8(0x5ae)]};throw new Error(_0x4350e8(0x5bc));}catch(_0x5c8e19){return{'error':_0x5c8e19};}}async[a0_0x11d42e(0x165)](_0x2ecae5){const _0x5dd2ca=a0_0x11d42e;try{if(this[_0x5dd2ca(0x390)][_0x5dd2ca(0x84f)]){await this[_0x5dd2ca(0x4e6)][_0x5dd2ca(0x315)]({'_id':_0x2ecae5});return;}}catch(_0x4aa1c0){return{'error':_0x4aa1c0};}}async['find'](_0x492167){const _0x5b0db4=a0_0x11d42e;try{if(this[_0x5b0db4(0x390)][_0x5b0db4(0x84f)])return await this[_0x5b0db4(0x4e6)][_0x5b0db4(0x588)]({'_id':_0x492167});}catch{return{};}}async['findAll'](){const _0x297f07=a0_0x11d42e;try{if(this[_0x297f07(0x390)][_0x297f07(0x84f)])return await this[_0x297f07(0x4e6)][_0x297f07(0x6d7)]();}catch{return[];}}async['findMany'](_0x2d3fed){const _0x1dd362=a0_0x11d42e;try{if(this[_0x1dd362(0x390)][_0x1dd362(0x84f)])return await this[_0x1dd362(0x4e6)][_0x1dd362(0x6d7)](_0x2d3fed);}catch{return[];}}},os=class extends O{async[a0_0x11d42e(0x315)](_0x45699b){const _0x438d5e=a0_0x11d42e;try{let _0x7e3217=A(_0x45699b['where']);return{'deletedCount':(await ve[_0x438d5e(0x315)](_0x7e3217))[_0x438d5e(0x5ae)]};}catch(_0x53efe){return{'error':_0x53efe?.[_0x438d5e(0x1d7)]()};}}async[a0_0x11d42e(0x793)](_0x402d87,_0x385784){const _0x2ffcca=a0_0x11d42e;try{let _0x514894=await ve['findById'](_0x402d87);return _0x514894?(Object['assign'](_0x514894,_0x385784),await _0x514894['save']()):(console[_0x2ffcca(0x7bf)](_0x2ffcca(0x888),_0x402d87),null);}catch(_0x2c6b91){return console[_0x2ffcca(0x7bf)](_0x2ffcca(0x7fd),_0x2c6b91),null;}}async[a0_0x11d42e(0x1bb)](_0x5a30a5){const _0x2a6e1a=a0_0x11d42e;try{return await new ve(_0x5a30a5)[_0x2a6e1a(0x8a7)]();}catch(_0x3dd684){return console[_0x2a6e1a(0x7bf)](_0x2a6e1a(0x818),_0x3dd684),null;}}async[a0_0x11d42e(0x31c)](_0x32895d){const _0x24b34f=a0_0x11d42e;try{let _0x2299b9=_0x32895d['where']??{};return await ve[_0x24b34f(0x6d7)](_0x2299b9)[_0x24b34f(0x570)](_0x32895d[_0x24b34f(0x570)]??0x0)[_0x24b34f(0x285)]();}catch(_0x5602cf){return console['error'](_0x24b34f(0x46c),_0x5602cf),[];}}async[a0_0x11d42e(0x588)](_0x423e6f){const _0x5b5bbf=a0_0x11d42e;try{let _0x19aea7=A(_0x423e6f[_0x5b5bbf(0x2e2)]);return await ve[_0x5b5bbf(0x588)](_0x19aea7)[_0x5b5bbf(0x285)]();}catch{return null;}}},rs=class extends O{[a0_0x11d42e(0x525)](_0x565c8f){return Na(_0x565c8f);}async[a0_0x11d42e(0x604)](_0x2fd9f0){const _0x33e1df=a0_0x11d42e;if(_0x2fd9f0[_0x33e1df(0x57a)]!==0x0)try{return{'insertCount':(await this[_0x33e1df(0x525)](_0x2fd9f0[0x0][_0x33e1df(0x855)])['insertMany']([..._0x2fd9f0]))[_0x33e1df(0x57a)]};}catch(_0x5b504f){return _0x5b504f;}}async[a0_0x11d42e(0x165)](_0x2416df,_0x20b79b){const _0x837628=a0_0x11d42e;try{let _0x9219d2=this['getConversationModelForOwner'](_0x20b79b),_0x4410ae=A(_0x2416df['where']);return{'deletedCount':(await _0x9219d2[_0x837628(0x71c)](_0x4410ae))[_0x837628(0x5ae)]};}catch(_0x45e785){return{'error':_0x45e785?.[_0x837628(0x1d7)]()};}}async[a0_0x11d42e(0x315)](_0x7b10c7,_0xfeb987){const _0x5a47a7=a0_0x11d42e;try{let _0x49706c=this['getConversationModelForOwner'](_0xfeb987),_0x5c946b=A(_0x7b10c7[_0x5a47a7(0x2e2)]);return{'deletedCount':(await _0x49706c[_0x5a47a7(0x315)](_0x5c946b))[_0x5a47a7(0x5ae)]};}catch(_0x2af757){return{'error':_0x2af757?.['toString']()};}}async[a0_0x11d42e(0x8ad)](_0x32bfea,_0x2c90f9){const _0x1886e2=a0_0x11d42e;try{if(_0x32bfea[_0x1886e2(0x57a)]===0x0)return;let _0x5e793d=this[_0x1886e2(0x525)](_0x2c90f9),_0xd0ba2d=_0x32bfea[_0x1886e2(0x4f6)](_0x499dc9=>({'updateOne':{'filter':{'name':_0x499dc9[_0x1886e2(0x414)],'owner':_0x2c90f9},'update':{..._0x499dc9}}})),{modifiedCount:_0x31e8f8}=await _0x5e793d['bulkWrite'](_0xd0ba2d);return{'insertCount':_0x31e8f8};}catch{return;}}async[a0_0x11d42e(0x6e6)](_0x4fe14b,_0x5b0b4b,_0x50e05f){const _0x60439=a0_0x11d42e;try{return{'modifiedCount':(await this['getConversationModelForOwner'](_0x50e05f)[_0x60439(0x6e6)](_0x4fe14b,{'$set':_0x5b0b4b})['exec']())[_0x60439(0x8ab)]};}catch(_0x1f0d4c){return console[_0x60439(0x7bf)](_0x60439(0x31b),_0x1f0d4c),{'error':_0x1f0d4c};}}async[a0_0x11d42e(0x793)](_0x1b97de,_0x22c060,_0x4daf73){const _0x4a0e48=a0_0x11d42e;try{return await this['getConversationModelForOwner'](_0x4daf73)['findOneAndUpdate']({'_id':_0x1b97de},{'$set':_0x22c060},{'new':!0x0,'upsert':!0x0})[_0x4a0e48(0x285)]();}catch(_0x177944){return console[_0x4a0e48(0x7bf)](_0x177944),null;}}async[a0_0x11d42e(0x6d7)](_0x526259,_0x4d5eef){const _0x4ff1fc=a0_0x11d42e;try{return await this['getConversationModelForOwner'](_0x4d5eef)[_0x4ff1fc(0x6d7)](_0x526259)[_0x4ff1fc(0x7aa)]({'lastInteraction':-0x1})['lean']();}catch{return[];}}async['findOne'](_0x5a058b,_0x175b72){const _0x151d65=a0_0x11d42e;try{return await this[_0x151d65(0x525)](_0x175b72)[_0x151d65(0x588)]({..._0x5a058b[_0x151d65(0x2e2)]})[_0x151d65(0x285)]();}catch{return null;}}async[a0_0x11d42e(0x4b2)](_0x330034){const _0x258139=a0_0x11d42e;try{return await this[_0x258139(0x525)](_0x330034)[_0x258139(0x2cc)][_0x258139(0x856)](),{'success':!0x0};}catch(_0x551ab3){return console['error'](_0x551ab3),{'success':!0x1,'error':_0x551ab3};}}},ns=class extends O{[a0_0x11d42e(0x6c1)](_0x45f277){return $a(_0x45f277);}async[a0_0x11d42e(0x32a)](_0x1518dc,_0x4d2af9){const _0x34d86b=a0_0x11d42e;try{return await this['getScheduleMessageModelForOwner'](_0x4d2af9)[_0x34d86b(0x32a)](_0x1518dc);}catch(_0x13c9c6){return console[_0x34d86b(0x7bf)](_0x34d86b(0x495),_0x13c9c6),null;}}async[a0_0x11d42e(0x1bb)](_0x35ccd5,_0x3dc166){const _0x2e2b0b=a0_0x11d42e;try{let _0x48635b=this[_0x2e2b0b(0x6c1)](_0x3dc166);return await new _0x48635b(_0x35ccd5)[_0x2e2b0b(0x8a7)]();}catch(_0x3725c7){return console[_0x2e2b0b(0x7bf)](_0x2e2b0b(0x86d),_0x3725c7),null;}}async[a0_0x11d42e(0x315)](_0x202942,_0x548513){const _0x36e39e=a0_0x11d42e;try{return await this[_0x36e39e(0x6c1)](_0x548513)[_0x36e39e(0x640)](_0x202942),{};}catch(_0xc46df8){return{'error':_0xc46df8?.[_0x36e39e(0x1d7)]()};}}async[a0_0x11d42e(0x793)](_0x389249,_0x49cb5b,_0x49da93,_0x3ef74={}){const _0x1bf43a=a0_0x11d42e;try{return await this[_0x1bf43a(0x6c1)](_0x49da93)[_0x1bf43a(0x791)](_0x389249,_0x49cb5b,{..._0x3ef74,'new':!0x0})[_0x1bf43a(0x285)]();}catch(_0x38a6f4){return console['error'](_0x1bf43a(0x516),_0x38a6f4),null;}}async['updateOneById'](_0x4897b7,_0x19af51,_0x363319){const _0x4123b0=a0_0x11d42e;try{return await this[_0x4123b0(0x6c1)](_0x363319)[_0x4123b0(0x317)](_0x4897b7,_0x19af51,{'new':!0x0})[_0x4123b0(0x285)]();}catch(_0x1d9924){return console[_0x4123b0(0x7bf)](_0x4123b0(0x516),_0x1d9924),null;}}async[a0_0x11d42e(0x6d7)](_0x38f9b9,_0x5b6ab5){const _0x5bd0ce=a0_0x11d42e;try{return await this['getScheduleMessageModelForOwner'](_0x5b6ab5)['find'](_0x38f9b9[_0x5bd0ce(0x2e2)])['limit'](_0x38f9b9?.[_0x5bd0ce(0x570)]??0x0)['sort']({'when':0x1})[_0x5bd0ce(0x285)]();}catch{return[];}}async['findOne'](_0x388838,_0x4c560a){const _0x26ffd0=a0_0x11d42e;try{return await this['getScheduleMessageModelForOwner'](_0x4c560a)['findOne'](_0x388838['where'])['sort']({'when':0x1})[_0x26ffd0(0x285)]();}catch{return null;}}async['findById'](_0x37d5bc,_0x46e6d7){const _0x300f4f=a0_0x11d42e;try{return await this['getScheduleMessageModelForOwner'](_0x46e6d7)[_0x300f4f(0x7b2)](_0x37d5bc)[_0x300f4f(0x285)]();}catch{return null;}}async[a0_0x11d42e(0x71c)](_0x63cdb0,_0x509e49){const _0x403937=a0_0x11d42e;try{return{'deletedCount':(await this[_0x403937(0x6c1)](_0x509e49)[_0x403937(0x71c)](_0x63cdb0))['deletedCount']};}catch(_0x3eb9cc){return console[_0x403937(0x7bf)](_0x403937(0x634),_0x3eb9cc),{'error':_0x3eb9cc};}}async[a0_0x11d42e(0x4b2)](_0x4e8894){const _0x273a38=a0_0x11d42e;try{return await this[_0x273a38(0x6c1)](_0x4e8894)[_0x273a38(0x2cc)][_0x273a38(0x856)](),{'success':!0x0};}catch(_0x95d97e){return console[_0x273a38(0x7bf)](_0x95d97e),{'success':!0x1,'error':_0x95d97e};}}},cs=class extends O{async[a0_0x11d42e(0x8ad)](_0xf28ae8,_0xb52e87){const _0x87d5f1=a0_0x11d42e;try{if(this[_0x87d5f1(0x390)]['ENABLED'])return await Oe[_0x87d5f1(0x791)]({'_id':_0xb52e87},{'$set':_0xf28ae8},{'new':!0x0});}catch(_0x55418f){throw console['error']('Erro\x20ao\x20atualizar\x20AutomateSystem:',_0x55418f),_0x55418f;}}async[a0_0x11d42e(0x6a2)](_0x22a959){const _0x200242=a0_0x11d42e;try{let _0x4bc464=await Oe['findById'](_0x22a959);return _0x4bc464?_0x4bc464[_0x200242(0x6d6)]||(_0x4bc464[_0x200242(0x6d6)]=[],await _0x4bc464[_0x200242(0x8a7)]()):(_0x4bc464=new Oe({'_id':_0x22a959,'autoCompleteMessages':[]}),await _0x4bc464['save']()),_0x4bc464;}catch(_0x1d4032){return _0x1d4032[_0x200242(0x7d9)]===0x2af8&&_0x1d4032[_0x200242(0x6fa)]&&_0x1d4032[_0x200242(0x6fa)][_0x200242(0x82c)]?(console[_0x200242(0x7bf)]('Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...'),await Oe[_0x200242(0x2cc)]['dropIndex']('autoCompleteMessages.command_1'),null):(console[_0x200242(0x7bf)]('Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:',_0x1d4032),null);}}},Go=new R('WA\x20MODULE'),Bo=new Ze(S),Wo=new Gt(S),zo=new ut(S),Ho=new Bt(ua,S),Ko=new Wt(pa,S),Qo=new as(ya,S),Yo=new is(ma,S),Xo=new $e(Ke,S),Zo=new os(S),er=new zt(S),tr=new rs(S),sr=new ns(S),ar=new cs(S),we=new Ye(Bo,Wo,zo,Ho,Ko,Qo,Yo,Xo,Zo,tr,er,sr,ar,T?.[a0_0x11d42e(0x511)]()),B=new Vt(ws,S,we),ir=new Xt(S,B,we),or=new es(B),Os=new ss(or),_=new ts(B),ue=new Qt(B,S,we,ws,ir),W=new Yt(B),D=new Ht(B),q=new Zt(B);Go[a0_0x11d42e(0x59a)](a0_0x11d42e(0x218));var xg=require(a0_0x11d42e(0x7e4)),Bs=require('fs'),Ji=I(require('https')),qi=I(require('http')),Ve=class l{static #e;static set['app'](_0x378c0e){this.#e=_0x378c0e;}static get['https'](){const _0x279904=a0_0x11d42e;let {FULLCHAIN:_0x49ad92,PRIVKEY:_0x46c1f5}=S[_0x279904(0x686)]('SSL_CONF');return Ji[_0x279904(0x889)]({'cert':(0x0,Bs[_0x279904(0x5cd)])(_0x49ad92),'key':(0x0,Bs[_0x279904(0x5cd)])(_0x46c1f5)},l.#e);}static get[a0_0x11d42e(0x331)](){const _0x229f8c=a0_0x11d42e;return qi[_0x229f8c(0x889)](l.#e);}},se=I(require('fs')),Wi=I(require(a0_0x11d42e(0x612))),Ge=I(require('axios')),ds=I(require(a0_0x11d42e(0x37b))),us=require('child_process');function rr(){const _0x2a5aaa=a0_0x11d42e;B[_0x2a5aaa(0x286)]();let _0x1bc1e7=ds['default'][_0x2a5aaa(0x7f4)](__dirname,_0x2a5aaa(0x24c));Bi(_0x1bc1e7);}var Bi=_0x3f79a9=>{const _0x3200a3=a0_0x11d42e;let _0xbb9fb3=se[_0x3200a3(0x3de)]['readdirSync'](_0x3f79a9),_0x3b33be=0xc*0x3c*0x3c*0x3e8,_0x2900da=0x2*0x3c*0x3c*0x3e8,_0x4d52a4=new Date()[_0x3200a3(0x370)]();_0xbb9fb3[_0x3200a3(0x46a)](_0x4b1e84=>{const _0x39569c=_0x3200a3;let _0x13fe24=ds['default'][_0x39569c(0x7f4)](_0x3f79a9,_0x4b1e84),_0x1d4649=se[_0x39569c(0x3de)][_0x39569c(0x32d)](_0x13fe24)[_0x39569c(0x653)][_0x39569c(0x370)]();_0x4d52a4-_0x1d4649>_0x3b33be&&(se[_0x39569c(0x3de)][_0x39569c(0x452)](_0x13fe24),console[_0x39569c(0x86e)](_0x39569c(0x7f9)+_0x4b1e84));}),setTimeout(()=>Bi(_0x3f79a9),_0x2900da);};function nr(){const _0x1ecb97=a0_0x11d42e;let _0xab32d6=new R('SERVER'),_0x3ab0a1=(0x0,be[_0x1ecb97(0x3de)])();_0x3ab0a1['use']((0x0,Gi['default'])({'origin'(_0x437b0e,_0xb55c5b){const _0x3d5f4b=_0x1ecb97;let {ORIGIN:_0x58227b}=S[_0x3d5f4b(0x686)](_0x3d5f4b(0x670));return _0x437b0e||(_0x437b0e='*'),_0x58227b[_0x3d5f4b(0x728)]('*')!==-0x1||_0x58227b['indexOf'](_0x437b0e)!==-0x1?_0xb55c5b(null,!0x0):_0xb55c5b(new Error(_0x3d5f4b(0x4e1)));},'methods':[...S[_0x1ecb97(0x686)]('CORS')[_0x1ecb97(0x359)]],'credentials':S[_0x1ecb97(0x686)](_0x1ecb97(0x670))[_0x1ecb97(0x64e)]}),(0x0,be[_0x1ecb97(0x5ab)])({'extended':!0x0,'limit':_0x1ecb97(0x736)}),(0x0,be[_0x1ecb97(0x481)])({'limit':'50mb'})),_0x3ab0a1[_0x1ecb97(0x498)]((_0x47b381,_0x54f9d5,_0x43d55f)=>{const _0x52ef75=_0x1ecb97;_0x47b381[_0x52ef75(0x37b)][_0x52ef75(0x724)](_0x52ef75(0x6dc))?_0x43d55f():(0x0,Vi[_0x52ef75(0x3de)])()(_0x47b381,_0x54f9d5,_0x43d55f);}),_0x3ab0a1[_0x1ecb97(0x410)](_0x1ecb97(0x85e),_0x1ecb97(0x35e)),_0x3ab0a1[_0x1ecb97(0x410)]('views',(0x0,zs[_0x1ecb97(0x7f4)])(ce,_0x1ecb97(0x42c))),_0x3ab0a1[_0x1ecb97(0x498)](be[_0x1ecb97(0x3de)]['static']((0x0,zs[_0x1ecb97(0x7f4)])(ce,_0x1ecb97(0x13d)))),_0x3ab0a1[_0x1ecb97(0x498)]((_0x4ecee4,_0x2b256f,_0x4ca1c8)=>{let _0x59f854=_0x2b256f['send'];_0x2b256f['send']=function(_0x258fd3){const _0x47b35a=a0_0x2924;if(_0x4ecee4[_0x47b35a(0x802)][_0x47b35a(0x6d4)]===_0x47b35a(0x860)||_0x4ecee4['headers'][_0x47b35a(0x1eb)]==='true'){let _0x40d282=JSON['parse'](_0x258fd3);_0x258fd3=JSON[_0x47b35a(0x7b9)](_0x25757d(_0x40d282));}return _0x59f854['apply'](_0x2b256f,[_0x258fd3]);},_0x4ca1c8();}),_0x3ab0a1['use']('/',Ue),_0x3ab0a1['use']((_0x14f14c,_0xd64f9b,_0xe900c7,_0x275a7f)=>{const _0xca50d5=_0x1ecb97;if(_0x14f14c)return _0xe900c7[_0xca50d5(0x15d)](_0x14f14c[_0xca50d5(0x15d)]||0x1f4)['json'](_0x14f14c);},(_0x4ee54c,_0x200bf9,_0x145038)=>{const _0x57ab1d=_0x1ecb97;let {method:_0x237eb6,url:_0x4738b1}=_0x4ee54c;_0x200bf9['status'](0x194)[_0x57ab1d(0x481)]({'status':0x194,'message':'Cannot\x20'+_0x237eb6['toUpperCase']()+'\x20'+_0x4738b1,'error':_0x57ab1d(0x3f5)}),_0x145038();});let _0x25757d=(_0x2534bf,_0x111ecc=_0x1ecb97(0x643))=>{const _0xe977c0=_0x1ecb97;let _0x59a195=(_0x2852a3,_0x478222=null,_0x3f04f8=!0x1)=>{const _0x248e5a=a0_0x2924;let _0x231170={};return Object[_0x248e5a(0x813)](_0x2852a3)[_0x248e5a(0x46a)](_0x3dca9c=>{const _0x3b599f=_0x248e5a;let _0x21626c=_0x2852a3[_0x3dca9c],_0x46eee2=''+_0x111ecc+_0x3dca9c;_0x478222&&!_0x3f04f8&&(_0x46eee2=_0x478222+'.'+_0x3dca9c),!_0x21626c&&_0x21626c!==0x0&&_0x21626c!==!0x1||typeof _0x21626c>'u'?_0x231170[_0x46eee2]=null:typeof _0x21626c!=_0x3b599f(0x1cb)&&!Array[_0x3b599f(0x81f)](_0x21626c)?_0x231170[_0x46eee2]=_0x21626c:typeof _0x21626c==_0x3b599f(0x1cb)&&!Array[_0x3b599f(0x81f)](_0x21626c)?_0x231170=Object['assign'](_0x231170,_0x59a195(_0x21626c,_0x46eee2)):Array[_0x3b599f(0x81f)](_0x21626c)&&(typeof _0x21626c[0x0]==_0x3b599f(0x1cb)?(_0x231170[_0x46eee2]=[],_0x21626c[_0x3b599f(0x46a)](_0x4ee790=>{_0x231170[_0x46eee2]['push'](_0x59a195(_0x4ee790,_0x46eee2,!0x0));})):_0x231170[_0x46eee2]=_0x21626c);}),_0x231170;};return Array[_0xe977c0(0x81f)](_0x2534bf)?_0x2534bf['map'](_0x4784df=>_0x59a195(_0x4784df)):typeof _0x2534bf==_0xe977c0(0x1cb)&&_0x2534bf!==null?_0x59a195(_0x2534bf):{};},_0x558896=S['get']('SERVER');Ve[_0x1ecb97(0x49f)]=_0x3ab0a1;let _0x17d14d=Ve[_0x558896[_0x1ecb97(0x67c)]],_0x185e63=_0x1ecb97(0x5fe);_0x17d14d[_0x1ecb97(0x5a3)](_0x558896[_0x1ecb97(0x7f1)],()=>{const _0x5d611e=_0x1ecb97;_0xab32d6[_0x5d611e(0x86e)](_0x185e63),_0xab32d6[_0x5d611e(0x86e)](_0x558896[_0x5d611e(0x67c)]['toUpperCase']()+'\x20-\x20ON:\x20'+_0x558896[_0x5d611e(0x7f1)]);}),rr(),ia();}function a0_0x2924(_0x371885,_0x14c18d){const _0x9c334d=a0_0x9c33();return a0_0x2924=function(_0x2924e9,_0x54cde8){_0x2924e9=_0x2924e9-0x125;let _0x52f7b2=_0x9c334d[_0x2924e9];return _0x52f7b2;},a0_0x2924(_0x371885,_0x14c18d);}var cr=a0_0x11d42e(0x7f6),lr=ds[a0_0x11d42e(0x3de)][a0_0x11d42e(0x7f4)](__dirname,a0_0x11d42e(0x397)),Ie=null;function ur(){return new Promise((_0x5d5974,_0x2e46b7)=>{const _0x3a13b2=a0_0x2924;se[_0x3a13b2(0x3de)][_0x3a13b2(0x61a)](lr,_0x3a13b2(0x70d),(_0x59d1f6,_0x28a531)=>{const _0x40d8dc=_0x3a13b2;if(_0x59d1f6){Ie=_0x59d1f6,_0x5d5974();return;}Wi[_0x40d8dc(0x3de)]['parse'](_0x28a531)[_0x40d8dc(0x88c)]['url']===cr?(Ie=null,_0x5d5974()):(Ie=new Error('uazapi\x20não\x20está\x20instalado\x20pelo\x20git'),_0x5d5974());});});}async function dr(){const _0x24ed1f=a0_0x11d42e;try{await ur(),await Hs();}catch(_0x38f4a5){console[_0x24ed1f(0x7bf)](_0x24ed1f(0x776)+_0x38f4a5),console['log']('Aplicação\x20permanecerá\x20em\x20estado\x20de\x20espera...');}}dr();async function zi(){const _0x3df2e4=a0_0x11d42e;let _0x1a9de2;try{_0x1a9de2=(await Ge['default']['get'](_0x3df2e4(0x4e9)))[_0x3df2e4(0x57e)]['ip'];}catch(_0x42d2a6){console[_0x3df2e4(0x7bf)](_0x42d2a6);try{_0x1a9de2=(await Ge['default']['get']('https://api.ipify.org?format=json'))['data']['ip'];}catch(_0x42c2ca){console['error'](_0x42c2ca);try{_0x1a9de2=(await Ge[_0x3df2e4(0x3de)][_0x3df2e4(0x686)](_0x3df2e4(0x26e)))[_0x3df2e4(0x57e)][_0x3df2e4(0x542)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x1540f5){return console[_0x3df2e4(0x7bf)](_0x1540f5),!0x1;}}}return _0x1a9de2;}var Be=a0_0x11d42e(0x867),me=0x0;function pr(_0x5144b5){const _0x3ed114=a0_0x11d42e;try{let _0x2f5543={'attempts':_0x5144b5,'timestamp':Date[_0x3ed114(0x19e)](),'lastAttempt':new Date()[_0x3ed114(0x377)]()};se[_0x3ed114(0x3de)][_0x3ed114(0x456)](Be,JSON[_0x3ed114(0x7b9)](_0x2f5543,null,0x2));}catch(_0xd44973){console[_0x3ed114(0x7bf)](_0x3ed114(0x421),_0xd44973);}}function hr(){const _0x3241d9=a0_0x11d42e;try{if(se[_0x3241d9(0x3de)][_0x3241d9(0x7a4)](Be)){let _0x52f98a=JSON['parse'](se[_0x3241d9(0x3de)][_0x3241d9(0x5cd)](Be,'utf8'));return console[_0x3241d9(0x86e)]('Tentativas\x20carregadas\x20do\x20arquivo:\x20'+_0x52f98a[_0x3241d9(0x21c)]+'\x20(última:\x20'+_0x52f98a[_0x3241d9(0x576)]+')'),_0x52f98a[_0x3241d9(0x21c)]||0x0;}}catch(_0x4309c3){console[_0x3241d9(0x7bf)](_0x3241d9(0x3e1),_0x4309c3);}return 0x0;}function gr(){const _0x51e110=a0_0x11d42e;try{se[_0x51e110(0x3de)][_0x51e110(0x7a4)](Be)&&(se['default']['unlinkSync'](Be),console[_0x51e110(0x86e)](_0x51e110(0x62a)));}catch(_0x4f81a1){console[_0x51e110(0x7bf)]('Erro\x20ao\x20resetar\x20tentativas:',_0x4f81a1);}}var mr=process['env']?.[a0_0x11d42e(0x5b2)]===a0_0x11d42e(0x860);mr?console[a0_0x11d42e(0x86e)](a0_0x11d42e(0x529)):me=hr();async function fr(){const _0x2b4442=a0_0x11d42e;let _0x2ab276=await new de(S['get']('REDIS'))[_0x2b4442(0x4db)]();return console['log'](_0x2b4442(0x6ad),_0x2ab276[_0x2b4442(0x57a)]),_0x2ab276[_0x2b4442(0x57a)];}function wr(_0x4a69f9){const _0x526a93=a0_0x11d42e;let _0x533ffe=_0x4a69f9[_0x526a93(0x686)](_0x526a93(0x65b))['URL'],_0x4b4466=_0x4a69f9[_0x526a93(0x686)](_0x526a93(0x836));console['log']('Valor\x20da\x20URL\x20recuperada:',_0x533ffe),console[_0x526a93(0x86e)]('Configuração\x20SSL\x20recuperada:',_0x4b4466);let _0x1828bb='',_0x109c4d=_0x533ffe||'';if(_0x533ffe){let _0x111414=_0x533ffe[_0x526a93(0x542)](/\/\/(.*?)\./);console[_0x526a93(0x86e)]('Resultado\x20da\x20correspondência\x20de\x20URL:',_0x111414),_0x111414&&_0x111414[0x1]&&(_0x1828bb=_0x111414[0x1],console[_0x526a93(0x86e)](_0x526a93(0x517),_0x1828bb));}if(!_0x1828bb&&_0x4b4466&&_0x4b4466[_0x526a93(0x842)]){let _0x31674a=_0x4b4466[_0x526a93(0x842)][_0x526a93(0x597)]('/');console[_0x526a93(0x86e)](_0x526a93(0x751),_0x31674a);let _0x101473=_0x31674a[_0x31674a[_0x526a93(0x57a)]-0x2];if(console['log'](_0x526a93(0x596),_0x101473),_0x101473){let _0x1d9bb8=_0x101473[_0x526a93(0x597)]('.');console[_0x526a93(0x86e)](_0x526a93(0x28f),_0x1d9bb8),_0x1d9bb8['length']>0x2&&(_0x1828bb=_0x1d9bb8[0x0],console[_0x526a93(0x86e)]('Subdomínio\x20extraído\x20do\x20caminho\x20SSL:',_0x1828bb),_0x109c4d=''+_0x101473);}}return{'subdomain':_0x1828bb||_0x526a93(0x34b),'fullURL':_0x109c4d||'URL\x20não\x20disponível'};}var {subdomain:ge,fullURL:Ks}=wr(S);console[a0_0x11d42e(0x86e)]('Subdomínio\x20final:',ge),console[a0_0x11d42e(0x86e)]('URL\x20completa:',Ks);async function yr(){const _0x56e13d=a0_0x11d42e;let _0x548053=S[_0x56e13d(0x686)]('REDIS'),_0x250bc1=S['get'](_0x56e13d(0x6e5))[_0x56e13d(0x5b4)]['KEY'],_0x123f8b=S[_0x56e13d(0x686)](_0x56e13d(0x836)),_0x527d4f=await zi(),_0x50029a=S[_0x56e13d(0x686)](_0x56e13d(0x65b))[_0x56e13d(0x7f1)],_0x396ba1=Ks;try{let _0x2112dd={'ip':_0x527d4f||null,'redis_enable':_0x548053?.[_0x56e13d(0x84f)]||null,'apikey':_0x250bc1||null,'ssl':_0x123f8b?.[_0x56e13d(0x253)]||null,'lastupdate':Hi||null,'port':_0x50029a||null,'gitInstallError':Ie?.['message']||null,'url':_0x396ba1||null,'subdomain':ge};if(console[_0x56e13d(0x86e)](_0x56e13d(0x87f),_0x2112dd['ip']),_0x548053&&_0x548053[_0x56e13d(0x84f)]){let _0x4ad76f=await fr();_0x2112dd[_0x56e13d(0x180)]=_0x4ad76f||null;}for(let _0x34d876 in _0x2112dd)_0x2112dd[_0x56e13d(0x2d4)](_0x34d876)&&_0x34d876!=='ip'&&(_0x2112dd[_0x34d876]=JSON[_0x56e13d(0x7b9)](_0x2112dd[_0x34d876]));return(await Ge[_0x56e13d(0x3de)]['post']('https://uazapi.bubbleapps.io/api/1.1/wf/verificar_v1/',_0x2112dd))[_0x56e13d(0x57e)];}catch(_0x18ab9c){return console[_0x56e13d(0x7bf)](_0x18ab9c),!0x1;}}var Ws=!0x1,Hi=0x288,Te=0x3,ls=0x1b7740;async function Hs(){const _0x45adb7=a0_0x11d42e;let _0x48bfbc=process['env']?.[_0x45adb7(0x5b2)]===_0x45adb7(0x860);if(!_0x48bfbc&&me>=Te)return console['error'](_0x45adb7(0x66a)+Te+_0x45adb7(0x1ae)),console[_0x45adb7(0x86e)](_0x45adb7(0x4fc)),'MAX_ATTEMPTS_REACHED';let _0x15480a='fora\x20do\x20git';Ie===null&&(_0x15480a=await zi());let _0x301289=await yr();if(_0x301289){if(_0x301289[_0x45adb7(0x41c)][_0x45adb7(0x57c)]===!0x0){_0x48bfbc||(gr(),me=0x0),Ie===null&&_0x301289['response'][_0x45adb7(0x6b9)]-Hi>0x0&&await br(),Ws||(Ws=!0x0,nr());let _0x2f7cfc=0x24*0x3c*0x3c,_0x4f21b7=_0x301289[_0x45adb7(0x41c)][_0x45adb7(0x21b)]>_0x2f7cfc?_0x2f7cfc:_0x301289['response']['segundos'],_0x2a86f5=Number(_0x4f21b7);if(isNaN(_0x2a86f5)){console['error'](_0x45adb7(0x6f5));return;}let _0x1fe48c=Math[_0x45adb7(0x6d5)](_0x2a86f5/0xe10),_0x477e8c=Math[_0x45adb7(0x6d5)](_0x2a86f5%0xe10/0x3c),_0x145c94=new Date(Date[_0x45adb7(0x19e)]()+_0x2a86f5*0x3e8);setTimeout(()=>{const _0x3d2939=_0x45adb7;console[_0x3d2939(0x86e)](_0x3d2939(0x364)),process[_0x3d2939(0x3ff)](0x0);},_0x2a86f5*0x3e8);let _0x4a7454=_0x790236=>_0x790236['toString']()['padStart'](0x2,'0'),_0x5eab70=_0x45adb7(0x4e0)+_0x4a7454(_0x1fe48c)+_0x45adb7(0x413)+_0x4a7454(_0x477e8c)+_0x45adb7(0x58c)+_0x4a7454(_0x145c94['getHours']())+':'+_0x4a7454(_0x145c94['getMinutes']())+'.';console[_0x45adb7(0x86e)](_0x5eab70);}else return console[_0x45adb7(0x86e)](_0x45adb7(0x3d2)),Ws&&(console[_0x45adb7(0x86e)]('A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.'),process[_0x45adb7(0x3ff)]()),_0x45adb7(0x83e);}else{if(_0x48bfbc||(me++,pr(me)),!_0x48bfbc&&me<Te)console[_0x45adb7(0x86e)](_0x45adb7(0x3cd)+me+'/'+Te+_0x45adb7(0x27b)+ls/0xea60+_0x45adb7(0x467)),setTimeout(Hs,ls);else{if(!_0x48bfbc&&me>=Te)return console[_0x45adb7(0x7bf)](_0x45adb7(0x261)+Te+_0x45adb7(0x727)),console[_0x45adb7(0x86e)](_0x45adb7(0x4fc)),_0x45adb7(0x7e5);_0x48bfbc&&(console[_0x45adb7(0x86e)](_0x45adb7(0x8aa)+ls/0xea60+_0x45adb7(0x467)),setTimeout(Hs,ls));}}}async function br(){const _0x3c01a4=a0_0x11d42e;console[_0x3c01a4(0x86e)](_0x3c01a4(0x7db)),console[_0x3c01a4(0x86e)]('Limpando\x20logs\x20do\x20PM2...'),(0x0,us[_0x3c01a4(0x223)])(_0x3c01a4(0x82a),{'shell':!0x0})['on'](_0x3c01a4(0x85f),_0x5ebe63=>{const _0x177037=_0x3c01a4;_0x5ebe63!==0x0?console[_0x177037(0x7bf)]('Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.'):(console['log'](_0x177037(0x8ce)),console[_0x177037(0x86e)](_0x177037(0x2d3)),(0x0,us[_0x177037(0x223)])(_0x177037(0x58f),{'shell':!0x0})['on']('close',_0x555d4e=>{const _0x500f6a=_0x177037;if(_0x555d4e!==0x0)console['error']('Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.');else{console['log'](_0x500f6a(0x5cb));let _0x5823ed=(0x0,us['spawn'])(_0x500f6a(0x365),{'shell':!0x0});_0x5823ed[_0x500f6a(0x320)]['on']('data',_0x5e08ae=>{const _0x5de357=_0x500f6a;console[_0x5de357(0x86e)](_0x5de357(0x446)+_0x5e08ae);}),_0x5823ed['stderr']['on'](_0x500f6a(0x57e),_0x3b95c1=>{console['error']('Erro\x20de\x20atualização:\x20'+_0x3b95c1);}),_0x5823ed['on'](_0x500f6a(0x3ff),_0x2f1406=>{const _0x5c3c7e=_0x500f6a;_0x2f1406!==0x0?console['error'](_0x5c3c7e(0x884)+_0x2f1406):console[_0x5c3c7e(0x86e)](_0x5c3c7e(0x363)),console[_0x5c3c7e(0x86e)](_0x5c3c7e(0x8d0)),setTimeout(()=>process[_0x5c3c7e(0x3ff)](),0x2710);});}}));});}0x0&&(module[a0_0x11d42e(0x40e)]={'fullURL':fullURL,'subdomain':subdomain});