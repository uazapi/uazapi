const a0_0x3b8fac=a0_0x56c3;(function(_0x4a4635,_0x38d3c8){const _0x122364=a0_0x56c3,_0x4d732a=_0x4a4635();while(!![]){try{const _0x12ebad=parseInt(_0x122364(0x15a))/0x1*(parseInt(_0x122364(0x48f))/0x2)+parseInt(_0x122364(0x330))/0x3+-parseInt(_0x122364(0x35f))/0x4+-parseInt(_0x122364(0x3ee))/0x5+parseInt(_0x122364(0x3e8))/0x6+parseInt(_0x122364(0x1e1))/0x7*(-parseInt(_0x122364(0x104))/0x8)+-parseInt(_0x122364(0x59a))/0x9;if(_0x12ebad===_0x38d3c8)break;else _0x4d732a['push'](_0x4d732a['shift']());}catch(_0x5e4e7d){_0x4d732a['push'](_0x4d732a['shift']());}}}(a0_0x14ca,0x1a397));var Ki=Object[a0_0x3b8fac(0x2c0)],Be=Object[a0_0x3b8fac(0x1bd)],Qi=Object[a0_0x3b8fac(0x697)],Yi=Object[a0_0x3b8fac(0x64f)],Xi=Object[a0_0x3b8fac(0x72c)],Zi=Object[a0_0x3b8fac(0x56a)]['hasOwnProperty'],eo=(_0x375bcd,_0x1c0a47)=>{for(var _0x116175 in _0x1c0a47)Be(_0x375bcd,_0x116175,{'get':_0x1c0a47[_0x116175],'enumerable':!0x0});},Hs=(_0x1fe926,_0x94b2df,_0x3390c9,_0x37840c)=>{const _0x4bbe05=a0_0x3b8fac;if(_0x94b2df&&typeof _0x94b2df==_0x4bbe05(0x4f6)||typeof _0x94b2df=='function'){for(let _0x53fd0a of Yi(_0x94b2df))!Zi[_0x4bbe05(0x117)](_0x1fe926,_0x53fd0a)&&_0x53fd0a!==_0x3390c9&&Be(_0x1fe926,_0x53fd0a,{'get':()=>_0x94b2df[_0x53fd0a],'enumerable':!(_0x37840c=Qi(_0x94b2df,_0x53fd0a))||_0x37840c[_0x4bbe05(0x40d)]});}return _0x1fe926;},I=(_0x383f7f,_0x4b3ec2,_0xa3c553)=>(_0xa3c553=_0x383f7f!=null?Ki(Xi(_0x383f7f)):{},Hs(_0x4b3ec2||!_0x383f7f||!_0x383f7f['__esModule']?Be(_0xa3c553,a0_0x3b8fac(0x151),{'value':_0x383f7f,'enumerable':!0x0}):_0xa3c553,_0x383f7f)),to=_0x57595d=>Hs(Be({},a0_0x3b8fac(0x4b5),{'value':!0x0}),_0x57595d),mr={};eo(mr,{'fullURL':()=>Ws,'subdomain':()=>K}),module[a0_0x3b8fac(0xb7)]=to(mr);var Vi=I(require(a0_0x3b8fac(0x149))),Qs=require('fs'),Ys=require(a0_0x3b8fac(0x3b7)),Xs=require(a0_0x3b8fac(0x655)),We=require('path'),ue=process[a0_0x3b8fac(0x6c4)](),Me=(0x0,We[a0_0x3b8fac(0x4c9)])(ue,a0_0x3b8fac(0x57d)),Ks=(0x0,We[a0_0x3b8fac(0x4c9)])(ue,a0_0x3b8fac(0x31f)),an=(0x0,We[a0_0x3b8fac(0x4c9)])(ue,a0_0x3b8fac(0x711),a0_0x3b8fac(0x66e)),hs=class{constructor(){this['loadEnv']();}[a0_0x3b8fac(0x184)](_0x49240d){const _0x50f68a=a0_0x3b8fac;return this[_0x50f68a(0x3e5)][_0x49240d];}[a0_0x3b8fac(0x6c5)](){const _0x53bc50=a0_0x3b8fac;this[_0x53bc50(0x3e5)]=process[_0x53bc50(0x3e5)]?.[_0x53bc50(0x6c3)]!=='true'?this[_0x53bc50(0x328)]():this[_0x53bc50(0x344)](),process[_0x53bc50(0x3e5)]?.[_0x53bc50(0x6c3)]===_0x53bc50(0x5d3)&&(this['env'][_0x53bc50(0x3ba)][_0x53bc50(0xa7)]=_0x53bc50(0x512),this['env']['SERVER'][_0x53bc50(0x157)]=Number[_0x53bc50(0x49e)](process[_0x53bc50(0x3e5)]?.['SERVER_PORT']??'8080'));}[a0_0x3b8fac(0x328)](){const _0x4a3eba=a0_0x3b8fac;return(0x0,Ys[_0x4a3eba(0x588)])((0x0,Qs[_0x4a3eba(0x676)])((0x0,Xs[_0x4a3eba(0x4c9)])(Ks,_0x4a3eba(0x31c)),{'encoding':'utf-8'}));}['envProcess'](){const _0x34c696=a0_0x3b8fac;return{'SERVER':{'TYPE':process[_0x34c696(0x3e5)][_0x34c696(0xbd)],'PORT':Number[_0x34c696(0x49e)](process[_0x34c696(0x3e5)][_0x34c696(0x2e7)]),'URL':process[_0x34c696(0x3e5)][_0x34c696(0x39c)]},'CORS':{'ORIGIN':process['env']['CORS_ORIGIN'][_0x34c696(0x45d)](','),'METHODS':process[_0x34c696(0x3e5)][_0x34c696(0x30f)][_0x34c696(0x45d)](','),'CREDENTIALS':process[_0x34c696(0x3e5)]?.['CORS_CREDENTIALS']===_0x34c696(0x5d3)},'SSL_CONF':{'PRIVKEY':process[_0x34c696(0x3e5)]?.[_0x34c696(0x5a3)],'FULLCHAIN':process[_0x34c696(0x3e5)]?.[_0x34c696(0x6d1)]},'STORE':{'CLEANING_INTERVAL':Number[_0x34c696(0x251)](process['env']?.[_0x34c696(0x728)])?Number[_0x34c696(0x49e)](process[_0x34c696(0x3e5)]['STORE_CLEANING_TERMINAL']):void 0x0,'MESSAGES':process[_0x34c696(0x3e5)]?.[_0x34c696(0x451)]===_0x34c696(0x5d3),'CONTACTS':process['env']?.['STORE_CONTACTS']===_0x34c696(0x5d3),'CHATS':process[_0x34c696(0x3e5)]?.[_0x34c696(0x50e)]===_0x34c696(0x5d3)},'DATABASE':{'CONNECTION':{'HOST':process[_0x34c696(0x3e5)]?.[_0x34c696(0x515)],'PORT':Number[_0x34c696(0x49e)](process[_0x34c696(0x3e5)]?.['DATABASE_CONNECTION_HOST']),'USER':process[_0x34c696(0x3e5)]['DATABASE_CONNECTION_USER'],'PASSWORD':process[_0x34c696(0x3e5)][_0x34c696(0x1da)],'URI':process[_0x34c696(0x3e5)]['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x34c696(0x3e5)][_0x34c696(0x3ca)]},'ENABLED':process[_0x34c696(0x3e5)]?.[_0x34c696(0x52c)]===_0x34c696(0x5d3)},'REDIS':{'ENABLED':process[_0x34c696(0x3e5)]?.[_0x34c696(0x1a4)]===_0x34c696(0x5d3),'URI':process[_0x34c696(0x3e5)][_0x34c696(0x152)]||_0x34c696(0x140),'PREFIX_KEY':process[_0x34c696(0x3e5)][_0x34c696(0x47d)]||_0x34c696(0x77b)},'LOG':{'LEVEL':process[_0x34c696(0x3e5)]?.[_0x34c696(0xad)][_0x34c696(0x45d)](','),'COLOR':process[_0x34c696(0x3e5)]?.[_0x34c696(0x502)]===_0x34c696(0x5d3)},'PROXY':process[_0x34c696(0x3e5)]?.[_0x34c696(0x260)]===_0x34c696(0x5d3),'AUTHENTICATION':{'TYPE':process[_0x34c696(0x3e5)][_0x34c696(0x1d4)],'API_KEY':{'KEY':process[_0x34c696(0x3e5)][_0x34c696(0x4e3)]},'JWT':{'EXPIRIN_IN':Number['isInteger'](process['env']?.[_0x34c696(0x343)])?Number['parseInt'](process['env'][_0x34c696(0x343)]):0xe10,'SECRET':process[_0x34c696(0x3e5)][_0x34c696(0x3a6)]}}};}},b=new hs(),Gi=I(require(a0_0x3b8fac(0x5bf))),be=I(require(a0_0x3b8fac(0x99))),Gs=require(a0_0x3b8fac(0x655)),gs=I(require(a0_0x3b8fac(0x1f7))),ms=(_0xe1cdae=>(_0xe1cdae[a0_0x3b8fac(0x78)]='\x1b[32m',_0xe1cdae[a0_0x3b8fac(0x447)]='\x1b[34m',_0xe1cdae[a0_0x3b8fac(0x58f)]='\x1b[33m',_0xe1cdae[a0_0x3b8fac(0x580)]=a0_0x3b8fac(0xc4),_0xe1cdae[a0_0x3b8fac(0xb9)]=a0_0x3b8fac(0x2bc),_0xe1cdae[a0_0x3b8fac(0x247)]=a0_0x3b8fac(0x640),_0xe1cdae[a0_0x3b8fac(0x3c0)]=a0_0x3b8fac(0x4db),_0xe1cdae))(ms||{}),Zs=(_0xd2728f=>(_0xd2728f[a0_0x3b8fac(0x78)]=a0_0x3b8fac(0x5ee),_0xd2728f[a0_0x3b8fac(0x3c0)]='\x1b[30m%s\x1b[0m',_0xd2728f[a0_0x3b8fac(0x447)]=a0_0x3b8fac(0x3d0),_0xd2728f['WARN']=a0_0x3b8fac(0x7a),_0xd2728f[a0_0x3b8fac(0x580)]=a0_0x3b8fac(0x1c4),_0xd2728f[a0_0x3b8fac(0xb9)]=a0_0x3b8fac(0x5ac),_0xd2728f[a0_0x3b8fac(0x247)]=a0_0x3b8fac(0x240),_0xd2728f))(Zs||{}),ea=(_0x432a2a=>(_0x432a2a[a0_0x3b8fac(0x78)]='LOG',_0x432a2a['WARN']=a0_0x3b8fac(0x58f),_0x432a2a[a0_0x3b8fac(0x447)]=a0_0x3b8fac(0x447),_0x432a2a[a0_0x3b8fac(0x3c0)]=a0_0x3b8fac(0x3c0),_0x432a2a['ERROR']=a0_0x3b8fac(0x580),_0x432a2a[a0_0x3b8fac(0xb9)]=a0_0x3b8fac(0xb9),_0x432a2a['VERBOSE']=a0_0x3b8fac(0x247),_0x432a2a))(ea||{}),ta=(_0x31c0ff=>(_0x31c0ff['LOG']='\x1b[42m',_0x31c0ff[a0_0x3b8fac(0x447)]=a0_0x3b8fac(0x54c),_0x31c0ff[a0_0x3b8fac(0x58f)]=a0_0x3b8fac(0x5e8),_0x31c0ff[a0_0x3b8fac(0x3c0)]=a0_0x3b8fac(0x695),_0x31c0ff[a0_0x3b8fac(0x580)]='\x1b[41m',_0x31c0ff[a0_0x3b8fac(0xb9)]='\x1b[46m',_0x31c0ff[a0_0x3b8fac(0x247)]='\x1b[47m',_0x31c0ff))(ta||{}),$=class{constructor(_0x1e9f51=a0_0x3b8fac(0x3c2)){const _0x4257d8=a0_0x3b8fac;this[_0x4257d8(0x69e)]=_0x1e9f51,this[_0x4257d8(0x2e2)]=b;}[a0_0x3b8fac(0x6b9)](_0x1555f4){this['context']=_0x1555f4;}['console'](_0x408f2d,_0x149c3b){const _0x15e9b9=a0_0x3b8fac;let _0x52f931=[];this['configService']['get'](_0x15e9b9(0x78))[_0x15e9b9(0x5ad)]['forEach'](_0x4fc8f9=>_0x52f931[_0x15e9b9(0x42a)](ea[_0x4fc8f9]));let _0x31d41c=typeof _0x408f2d;_0x52f931[_0x15e9b9(0x43a)](_0x149c3b)&&(b[_0x15e9b9(0x184)](_0x15e9b9(0x78))['COLOR']?(console[_0x15e9b9(0x514)](_0x15e9b9(0x1c3)+Zs[_0x149c3b],'\x1b[1m\x1b[37m',(0x0,gs['default'])()['format'](_0x15e9b9(0x61d)),_0x15e9b9(0x689),ms[_0x149c3b]+ta[_0x149c3b]+_0x15e9b9(0x1c3),_0x149c3b+_0x15e9b9(0x3dd),_0x15e9b9(0x6e9),this[_0x15e9b9(0x69e)]+_0x15e9b9(0x689),ms[_0x149c3b],_0x31d41c!==_0x15e9b9(0x4f6)?_0x408f2d:'',_0x15e9b9(0x689)),_0x31d41c===_0x15e9b9(0x4f6)&&console['log'](_0x408f2d,'\x0a')):console[_0x15e9b9(0x514)]((0x0,gs[_0x15e9b9(0x151)])()[_0x15e9b9(0x55f)](_0x15e9b9(0x370)),_0x149c3b+'\x20',''+this[_0x15e9b9(0x69e)],_0x408f2d));}[a0_0x3b8fac(0x514)](_0x2858ef){const _0x205b8f=a0_0x3b8fac;this['console'](_0x2858ef,_0x205b8f(0x78));}[a0_0x3b8fac(0x685)](_0x282185){const _0x343592=a0_0x3b8fac;this[_0x343592(0x4c3)](_0x282185,'INFO');}['warn'](_0x4a89a6){const _0x2e1976=a0_0x3b8fac;this[_0x2e1976(0x4c3)](_0x4a89a6,'WARN');}['error'](_0x318e14){const _0x39e94c=a0_0x3b8fac;this[_0x39e94c(0x4c3)](_0x318e14,_0x39e94c(0x580));}[a0_0x3b8fac(0x592)](_0x3d28fa){const _0x346fd7=a0_0x3b8fac;this['console'](_0x3d28fa,_0x346fd7(0x247));}[a0_0x3b8fac(0x245)](_0x41d7cf){const _0x3eb05c=a0_0x3b8fac;this[_0x3eb05c(0x4c3)](_0x41d7cf,_0x3eb05c(0xb9));}[a0_0x3b8fac(0x562)](_0x2ac7da){const _0x3e19d4=a0_0x3b8fac;this[_0x3e19d4(0x4c3)](_0x2ac7da,_0x3e19d4(0x3c0));}};function sa(){const _0x521417=a0_0x3b8fac;process['on'](_0x521417(0x7e),(_0x2793c9,_0x6d2a8b)=>{const _0x410217=_0x521417;new $('uncaughtException')[_0x410217(0x3a7)]({'origin':_0x6d2a8b,'stderr':process[_0x410217(0x52f)]['fd'],'error':_0x2793c9});}),process['on']('unhandledRejection',(_0x56c8ce,_0x25416f)=>{const _0x57d3db=_0x521417;new $(_0x57d3db(0x561))['error']({'origin':_0x25416f,'stderr':process['stderr']['fd'],'error':_0x56c8ce});});}var aa=I(require(a0_0x3b8fac(0x3df))),fs=new aa['default']({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Ce=require(a0_0x3b8fac(0x40f)),Ie=I(require(a0_0x3b8fac(0x40f))),ze=new $(a0_0x3b8fac(0x176)),U=b[a0_0x3b8fac(0x184)](a0_0x3b8fac(0x22d)),R=U[a0_0x3b8fac(0x1fe)]?U[a0_0x3b8fac(0x41a)]['URI']?Ie['default']['createConnection'](U[a0_0x3b8fac(0x41a)]['URI'],{'dbName':U[a0_0x3b8fac(0x41a)][a0_0x3b8fac(0xb6)]+a0_0x3b8fac(0x6af)}):Ie[a0_0x3b8fac(0x151)][a0_0x3b8fac(0x641)](a0_0x3b8fac(0x24c)+U['CONNECTION']['HOST']+':'+U[a0_0x3b8fac(0x41a)][a0_0x3b8fac(0x157)]+a0_0x3b8fac(0x453),{'user':U['CONNECTION'][a0_0x3b8fac(0x4d8)],'pass':U[a0_0x3b8fac(0x41a)][a0_0x3b8fac(0x213)],'dbName':U['CONNECTION'][a0_0x3b8fac(0xb6)]+a0_0x3b8fac(0x6af)}):null;U['ENABLED']&&ze[a0_0x3b8fac(0x685)](a0_0x3b8fac(0x229)+R['$dbName']);function a0_0x56c3(_0xedd2ee,_0x41adc1){const _0x14ca7b=a0_0x14ca();return a0_0x56c3=function(_0x56c33a,_0x30e0e9){_0x56c33a=_0x56c33a-0x78;let _0x3ed2c1=_0x14ca7b[_0x56c33a];return _0x3ed2c1;},a0_0x56c3(_0xedd2ee,_0x41adc1);}var de=U[a0_0x3b8fac(0x1fe)]?U['CONNECTION'][a0_0x3b8fac(0x207)]?Ie['default'][a0_0x3b8fac(0x641)](U[a0_0x3b8fac(0x41a)]['URI'],{'dbName':a0_0x3b8fac(0x6e0)}):Ie[a0_0x3b8fac(0x151)][a0_0x3b8fac(0x641)](a0_0x3b8fac(0x24c)+U[a0_0x3b8fac(0x41a)][a0_0x3b8fac(0x6ce)]+':'+U[a0_0x3b8fac(0x41a)]['PORT']+a0_0x3b8fac(0x453),{'user':U[a0_0x3b8fac(0x41a)][a0_0x3b8fac(0x4d8)],'pass':U[a0_0x3b8fac(0x41a)][a0_0x3b8fac(0x213)],'dbName':'cachedContacts-whatsapp'}):null;de&&ze[a0_0x3b8fac(0x685)](a0_0x3b8fac(0x229)+de[a0_0x3b8fac(0x8b)]),process['on'](a0_0x3b8fac(0x69a),()=>{const _0x2ac3f9=a0_0x3b8fac;R&&R[_0x2ac3f9(0x6a1)](()=>{const _0x328332=_0x2ac3f9;ze[_0x328332(0x685)](_0x328332(0x1ff));}),de&&de['close'](()=>{const _0x52dae5=_0x2ac3f9;ze['info'](_0x52dae5(0x196));});});var so=new Ce['Schema']({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),ao=new Ce[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),io=new Ce[(a0_0x3b8fac(0x4d1))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),oo=new Ce[(a0_0x3b8fac(0x4d1))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[so],'default':[]}},{'_id':!0x1}),ro=new Ce[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':oo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':ao},'groupdata':{'type':io,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),ia=_0xd0120=>{const _0x1222d6=a0_0x3b8fac;let _0x4de9aa='z_'+_0xd0120+_0x1222d6(0x7c8);return R?.[_0x1222d6(0xdd)](_0x1222d6(0x372),ro,_0x4de9aa);},oa=require('mongoose'),no=new oa['Schema']({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ra=_0x581b84=>{const _0x2460c5=a0_0x3b8fac;let _0x333bc1='z_'+_0x581b84+'_Contacts';return R?.[_0x2460c5(0xdd)](_0x2460c5(0x27e),no,_0x333bc1);},na=require(a0_0x3b8fac(0x40f)),ws=class{},co=new na['Schema']({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ca=de?.[a0_0x3b8fac(0xdd)](ws[a0_0x3b8fac(0x26b)],co,a0_0x3b8fac(0x3bd)),la=require(a0_0x3b8fac(0x40f)),ys=class{},lo=new la[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),He=de?.[a0_0x3b8fac(0xdd)](ys[a0_0x3b8fac(0x26b)],lo,a0_0x3b8fac(0x57d)),ua=require(a0_0x3b8fac(0x40f)),uo=new ua['Schema']({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),da=_0x22869a=>{const _0x363099=a0_0x3b8fac;let _0x537f2c='z_'+_0x22869a+_0x363099(0x41d);return R?.[_0x363099(0xdd)]('MessageModel',uo,_0x537f2c);},pa=require(a0_0x3b8fac(0x40f)),bs=class{},po=new pa[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ha=R?.['model'](bs[a0_0x3b8fac(0x26b)],po,a0_0x3b8fac(0x40c)),ga=require(a0_0x3b8fac(0x40f)),Ss=class{},ma=new ga[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ma[a0_0x3b8fac(0xbe)](a0_0x3b8fac(0x2f8),function(_0x1fd1a7){const _0x30dcf2=a0_0x3b8fac;delete this[_0x30dcf2(0x98)],delete this[_0x30dcf2(0x3f9)],delete this[_0x30dcf2(0x435)],delete this[_0x30dcf2(0x48b)],delete this['flowStopMinutes'],_0x1fd1a7();});var fa=R?.[a0_0x3b8fac(0xdd)](Ss[a0_0x3b8fac(0x26b)],ma,a0_0x3b8fac(0x4c4)),P=require(a0_0x3b8fac(0x40f)),Ms=require(a0_0x3b8fac(0x12a)),Ke=class{},ya=new P['Schema']({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Cs=new P[(a0_0x3b8fac(0x4d1))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),ho=new P[(a0_0x3b8fac(0x4d1))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':'list'},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x3b8fac(0x1ee)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x3b8fac(0x46a)},'pollErrorMessage':{'type':String,'default':a0_0x3b8fac(0xf8)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),ba=new P[(a0_0x3b8fac(0x4d1))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),go=new P[(a0_0x3b8fac(0x4d1))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),mo=new P[(a0_0x3b8fac(0x4d1))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Ns=new P[(a0_0x3b8fac(0x4d1))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),fo=new P[(a0_0x3b8fac(0x4d1))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),Sa=new P[(a0_0x3b8fac(0x4d1))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':ho},'apirequest':go,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':fo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),Ma=new P[(a0_0x3b8fac(0x4d1))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Es=class{},Ca=new P[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Ns],'blocks':[Sa],'groups':[ya],'conditions':[ba],'varedits':[Ma],'replyOptions':{'type':[Cs],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x4ad4a7=a0_0x3b8fac;return _0x4ad4a7(0x686)+Math[_0x4ad4a7(0x334)]()[_0x4ad4a7(0x2eb)](0x24)[_0x4ad4a7(0x484)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':'false'},'startID':{'type':String,'default':()=>(0x0,Ms['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ms['v4'])()},'shareOwners':{'type':[String],'default':[]}});Ca[a0_0x3b8fac(0xbe)](a0_0x3b8fac(0x2d7),function(_0x155ce8){const _0x5c7765=a0_0x3b8fac;let _0x1e4086=this['getUpdate']();if(_0x1e4086&&typeof _0x1e4086=='object'&&_0x5c7765(0x7ad)in _0x1e4086){let _0x38d4df=_0x1e4086[_0x5c7765(0x7ad)];if(_0x38d4df){let _0x478606=new Set(),_0x16ec6f=new Set(_0x38d4df[_0x5c7765(0x2dc)]?.[_0x5c7765(0x23a)](_0x1bd5d5=>_0x1bd5d5['name'])),_0x10473d=JSON[_0x5c7765(0x5e5)](_0x38d4df),_0x13c4aa=/{{(?!_)([^}]*)}}/g,_0x209054;for(;(_0x209054=_0x13c4aa['exec'](_0x10473d))!==null;)_0x16ec6f['has'](_0x209054[0x1])||_0x478606[_0x5c7765(0x1a8)](_0x209054[0x1]);_0x478606[_0x5c7765(0x33d)]>0x0?(console[_0x5c7765(0x1a9)](_0x5c7765(0x6bb),Array[_0x5c7765(0x2ab)](_0x478606)),_0x38d4df['variablesNotFound']=Array['from'](_0x478606)):_0x38d4df[_0x5c7765(0x105)]=[],this[_0x5c7765(0x583)]({'$set':_0x38d4df});}}_0x155ce8();});var Ee=R?.[a0_0x3b8fac(0xdd)](Es[a0_0x3b8fac(0x26b)],Ca,a0_0x3b8fac(0x147)),wo=new P[(a0_0x3b8fac(0x4d1))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Ns],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[mo]},{'_id':!0x1}),yo=new P[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Ns],'blocks':[Sa],'groups':[ya],'conditions':[ba],'varedits':[Ma],'replyOptions':{'type':[Cs],'default':[]},'chatLog':wo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x3b8fac(0x627)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x3b8fac(0x46a)},'waitingMenu_replyOptions':{'type':[Cs],'default':[]}}),Ea=_0x2bd908=>{const _0x50afdf=a0_0x3b8fac;let _0x471a1c='z_'+_0x2bd908+_0x50afdf(0x5a4);return R?.[_0x50afdf(0xdd)](_0x50afdf(0x6d3),yo,_0x471a1c);},bo=new P[(a0_0x3b8fac(0x4d1))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),wa=new P[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),So=new P['Schema']({'_id':{'type':String,'_id':!0x0},'messages':{'type':[wa],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x3b8fac(0x51f)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[bo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':wa,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),va=_0x2e17f3=>{let _0x1efa85='z_'+_0x2e17f3+'_ScheduleMessages';return R?.['model']('ScheduleMessageModel',So,_0x1efa85);},vs=class{},Mo=new P[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),Co=new P[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Eo=new P[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),vo=new P[(a0_0x3b8fac(0x4d1))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':'!stop'},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),No=new P[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),$o=new P[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[No]},'customFields':{'type':[Eo]},'flowConfig':{'type':vo,'default':{}},'flows':{'type':[Co],'default':[]},'autoCompleteMessages':{'type':[Mo],'default':[]}}),Te=R?.[a0_0x3b8fac(0xdd)](vs[a0_0x3b8fac(0x26b)],$o,a0_0x3b8fac(0x351)),Na=require('mongoose'),Ro=new Na[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),$a=_0x2976e0=>{const _0x3c443d=a0_0x3b8fac;let _0x179c92='z_'+_0x2976e0+_0x3c443d(0x5b4);return R?.[_0x3c443d(0xdd)](_0x3c443d(0x32e),Ro,_0x179c92);},_=class{constructor(_0x53c53f){const _0x20e73c=a0_0x3b8fac;this[_0x20e73c(0x2fd)]=_0x53c53f[_0x20e73c(0x184)]('DATABASE');}};function A(_0xd9bc2f){const _0x5aaf76=a0_0x3b8fac;let _0xd89550={};for(let [_0x3b7439,_0x481980]of Object[_0x5aaf76(0x4b7)](_0xd9bc2f))if(typeof _0x481980=='object'&&!Array[_0x5aaf76(0x338)](_0x481980)){for(let [_0x3c8c19,_0x46a1b9]of Object['entries'](_0x481980))_0xd89550[_0x3b7439+'.'+_0x3c8c19]=_0x46a1b9;}else _0xd89550[_0x3b7439]=_0x481980;return _0xd89550;}var Qe=class{constructor(_0x2f2343,_0x5b4ba1,_0x2ed588,_0x51bd7e,_0x153b93,_0x496bf8,_0x1283e4,_0x183408,_0x32ae31,_0xff192e,_0x368b1c,_0x326d17,_0x560140){const _0x3a6b02=a0_0x3b8fac;this[_0x3a6b02(0x4ab)]=_0x2f2343,this[_0x3a6b02(0x273)]=_0x5b4ba1,this[_0x3a6b02(0x7a8)]=_0x2ed588,this[_0x3a6b02(0x20a)]=_0x51bd7e,this[_0x3a6b02(0x4c4)]=_0x153b93,this[_0x3a6b02(0x66e)]=_0x496bf8,this[_0x3a6b02(0x448)]=_0x1283e4,this[_0x3a6b02(0x297)]=_0x183408,this[_0x3a6b02(0x7ab)]=_0x32ae31,this[_0x3a6b02(0x396)]=_0xff192e,this[_0x3a6b02(0x674)]=_0x368b1c,this[_0x3a6b02(0x241)]=_0x326d17,this[_0x3a6b02(0x6bf)]=_0x560140;}get[a0_0x3b8fac(0x88)](){const _0x8ecf7a=a0_0x3b8fac;return this[_0x8ecf7a(0x6bf)];}},Ye=class{},Xe=class extends _{['getMessageModelForOwner'](_0x12fa17){return da(_0x12fa17);}async['insert'](_0x3ec0e8,_0x57157e){const _0x42c8a6=a0_0x3b8fac;if(_0x3ec0e8[_0x42c8a6(0x3c8)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x42c8a6(0x6a0)](_0x57157e)[_0x42c8a6(0x67d)]([..._0x3ec0e8]))[_0x42c8a6(0x3c8)]};}catch(_0x19476b){return _0x19476b;}}async['find'](_0x2c391b,_0x3d1713){const _0x160cea=a0_0x3b8fac;try{let _0x4322b1=this[_0x160cea(0x6a0)](_0x3d1713),_0x4fdbd8=A(_0x2c391b[_0x160cea(0x287)]);return await _0x4322b1[_0x160cea(0x7a1)](_0x4fdbd8)[_0x160cea(0x77f)]({'messageTimestamp':-0x1})[_0x160cea(0x606)](_0x2c391b?.[_0x160cea(0x606)]??0x0)[_0x160cea(0x555)]();}catch{return[];}}async[a0_0x3b8fac(0x23f)](_0x2afca0,_0xfbc1b0){const _0x1a3679=a0_0x3b8fac;try{let _0x3848e0=this[_0x1a3679(0x6a0)](_0xfbc1b0),_0x24ef0e=A(_0x2afca0['where']);await _0x3848e0[_0x1a3679(0x57b)](_0x24ef0e);}catch(_0x50eb5d){console[_0x1a3679(0x3a7)](_0x50eb5d);}}async[a0_0x3b8fac(0x1b6)](_0x4dc491,_0x57f403,_0x121af8){const _0x263265=a0_0x3b8fac;try{let _0x5d3a35=this[_0x263265(0x6a0)](_0x121af8),_0x19dcd5=A(_0x4dc491[_0x263265(0x287)]);return await _0x5d3a35[_0x263265(0x2d7)](_0x19dcd5,{'$set':_0x57f403},{'new':!0x0});}catch(_0x2f9d62){throw console[_0x263265(0x3a7)](_0x2f9d62),_0x2f9d62;}}async[a0_0x3b8fac(0x67d)](_0x972348,_0x52604b){const _0x144d6d=a0_0x3b8fac;if(_0x972348[_0x144d6d(0x3c8)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x144d6d(0x6a0)](_0x52604b)[_0x144d6d(0x67d)]([..._0x972348]))[_0x144d6d(0x3c8)]};}catch(_0x143e34){return console[_0x144d6d(0x514)](_0x144d6d(0x361),_0x143e34),_0x143e34;}}async['deleteAll'](_0xd7404b){const _0x1632a2=a0_0x3b8fac;try{return await this[_0x1632a2(0x6a0)](_0xd7404b)['collection'][_0x1632a2(0x687)](),{'success':!0x0};}catch(_0x3a04a7){return console[_0x1632a2(0x3a7)](_0x3a04a7),{'success':!0x1,'error':_0x3a04a7};}}},Ps=I(require('@ffmpeg-installer/ffmpeg')),w=I(require(a0_0x3b8fac(0x556))),Fe=require('fs'),j=I(require('path')),te=I(require(a0_0x3b8fac(0x667))),xi=require('uuid'),Di=I(require(a0_0x3b8fac(0x7bd))),Pi=I(require(a0_0x3b8fac(0x6ac))),Ra=['imageMessage',a0_0x3b8fac(0x1d3),a0_0x3b8fac(0x563),a0_0x3b8fac(0x713),'stickerMessage'],Aa=[a0_0x3b8fac(0xa5),a0_0x3b8fac(0x693),a0_0x3b8fac(0x21e),a0_0x3b8fac(0x290)],ks=require('os'),qt=I(require(a0_0x3b8fac(0x124))),Ue=require(a0_0x3b8fac(0x182)),ki=require(a0_0x3b8fac(0x6cd)),Ls=require('async-mutex'),fe=I(require(a0_0x3b8fac(0x40f))),L=require(a0_0x3b8fac(0x40a)),pe=class{constructor(_0x595e0e,_0x123b95,_0x1d3fbf){const _0x1f3100=a0_0x3b8fac;this['jid']=_0x595e0e,this[_0x1f3100(0x323)]=_0x123b95,this[_0x1f3100(0x26b)]=_0x1d3fbf;}},Ze=class{},et=class{},Oe=class{},tt=class{},st=class{},ve=class{},at=class{},it=class{},ot=class{},rt=class{},kt=I(require(a0_0x3b8fac(0x99))),Ia=require('fs'),Ta=require(a0_0x3b8fac(0x655));async function _e(_0x4ac65c){const _0x5e3364=a0_0x3b8fac;let _0x33f1dc=z[_0x5e3364(0x2ed)][_0x4ac65c];if(U['ENABLED']){let _0x2fad5b=R[_0x5e3364(0x53b)]()['db'](U[_0x5e3364(0x41a)][_0x5e3364(0xb6)]+_0x5e3364(0xeb))[_0x5e3364(0x712)](_0x4ac65c);return _0x33f1dc||(await _0x2fad5b[_0x5e3364(0x7a1)]({})[_0x5e3364(0x1fd)]())[_0x5e3364(0x3c8)]>0x0;}return _0x33f1dc||(0x0,Ia['existsSync'])((0x0,Ta[_0x5e3364(0x4c9)])(Me,_0x4ac65c));}async function Oa(_0x4724d8,_0x215986,_0x2301ce){const _0x497f86=a0_0x3b8fac;if(_0x4724d8[_0x497f86(0x1fb)][_0x497f86(0x43a)]('/instance/create')||_0x4724d8['originalUrl'][_0x497f86(0x43a)](_0x497f86(0x3f0))||_0x4724d8[_0x497f86(0x1fb)][_0x497f86(0x43a)](_0x497f86(0x4a7))||_0x4724d8[_0x497f86(0x1fb)][_0x497f86(0x43a)](_0x497f86(0x339))||_0x4724d8[_0x497f86(0x1fb)][_0x497f86(0x43a)](_0x497f86(0x70f))||_0x4724d8[_0x497f86(0x1fb)][_0x497f86(0x43a)](_0x497f86(0x1d5))||_0x4724d8[_0x497f86(0x1fb)][_0x497f86(0x43a)](_0x497f86(0x530)))return _0x2301ce();let _0x1effb5=_0x4724d8[_0x497f86(0x40e)];if(!_0x1effb5?.[_0x497f86(0x2af)])throw new m(_0x497f86(0xbc));if(!await _e(_0x1effb5[_0x497f86(0x2af)]))throw new J('The\x20'+_0x1effb5[_0x497f86(0x2af)]+_0x497f86(0x567));_0x2301ce();}async function _a(_0x1c1f3d,_0x23bf8d,_0x37fa48){const _0x390977=a0_0x3b8fac;if(_0x1c1f3d['originalUrl'][_0x390977(0x43a)](_0x390977(0x598))){let _0xb7d03b=_0x1c1f3d[_0x390977(0x6fc)];if(await _e(_0xb7d03b[_0x390977(0x2af)]))throw new se(_0x390977(0x604)+_0xb7d03b[_0x390977(0x2af)]+'\x20is\x20already\x20in\x20use.');z[_0x390977(0x2ed)][_0xb7d03b[_0x390977(0x2af)]]&&delete z[_0x390977(0x2ed)][_0xb7d03b[_0x390977(0x2af)]];}_0x37fa48();}var xa=require(a0_0x3b8fac(0x40a)),Da=I(require(a0_0x3b8fac(0x653))),nt=a0_0x3b8fac(0x77b),Io=new $(a0_0x3b8fac(0x4bd));async function To(_0x1c59fb,_0x593627,_0x18d52f){const _0x206e3c=a0_0x3b8fac;let _0x91e424=_0x1c59fb[_0x206e3c(0x184)](_0x206e3c(0x129));if(_0x91e424&&b['get'](_0x206e3c(0x331))[_0x206e3c(0x467)][_0x206e3c(0xd6)]!==_0x91e424)throw new ce();if(b[_0x206e3c(0x184)](_0x206e3c(0x331))['API_KEY'][_0x206e3c(0xd6)]===_0x91e424)return _0x18d52f();if((_0x1c59fb[_0x206e3c(0x1fb)]['includes'](_0x206e3c(0x598))||_0x1c59fb[_0x206e3c(0x1fb)][_0x206e3c(0x43a)](_0x206e3c(0x3f0)))&&!_0x91e424)throw new se(_0x206e3c(0x3d3),_0x206e3c(0x29a));let _0x494505=b[_0x206e3c(0x184)](_0x206e3c(0x331))[_0x206e3c(0x412)];try{let [_0x18be78,_0xb16153]=_0x1c59fb['get'](_0x206e3c(0xd9))[_0x206e3c(0x45d)]('\x20');if(_0x18be78[_0x206e3c(0x106)]()!==_0x206e3c(0x158))throw new ce();if(!(0x0,xa[_0x206e3c(0x37e)])(_0xb16153))throw new ce();let _0x44a3b9=_0x1c59fb[_0x206e3c(0x40e)],_0x4be3f6=Da[_0x206e3c(0x151)][_0x206e3c(0x420)](_0xb16153,_0x494505['SECRET'],{'ignoreExpiration':_0x494505[_0x206e3c(0x34d)]===0x0});if(_0x44a3b9[_0x206e3c(0x2af)]!==_0x4be3f6['instanceName']||nt!==_0x4be3f6['apiName'])throw new ce();return _0x18d52f();}catch(_0x2418af){throw Io[_0x206e3c(0x3a7)](_0x2418af),new ce();}}async function Oo(_0x245a0a,_0x5cd625,_0xbea022){const _0x270c02=a0_0x3b8fac;let _0xd32e37=b[_0x270c02(0x184)](_0x270c02(0x331))[_0x270c02(0x467)],_0x3db2ee=_0x245a0a[_0x270c02(0x184)]('apikey');if(_0xd32e37['KEY']===_0x3db2ee)return _0xbea022();if(_0x245a0a[_0x270c02(0x1fb)]['includes'](_0x270c02(0x598))){let _0x2470a1=ka,_0x145696=_0x245a0a[_0x270c02(0x6fc)]['instanceName'];if(_0x2470a1&&_0x145696[_0x270c02(0x106)]()['startsWith'](_0x2470a1[_0x270c02(0x106)]()))return _0xbea022();if(!_0x3db2ee)throw new se(_0x270c02(0x3d3),'The\x20global\x20api\x20key\x20must\x20be\x20set');}if(_0x245a0a[_0x270c02(0x1fb)][_0x270c02(0x43a)]('/instance/fetchInstances')&&!_0x3db2ee)throw new se(_0x270c02(0x3d3),_0x270c02(0x29a));if(_0x245a0a[_0x270c02(0x1fb)]['includes'](_0x270c02(0x4a7))&&!_0x3db2ee)throw new se(_0x270c02(0x3d3),_0x270c02(0x29a));if(_0x245a0a[_0x270c02(0x1fb)][_0x270c02(0x43a)](_0x270c02(0x339))&&!_0x3db2ee)throw new se(_0x270c02(0x3d3),_0x270c02(0x29a));try{let _0x1eb8dd=_0x245a0a['params'],_0x4589f2=await we[_0x270c02(0x66e)][_0x270c02(0x7a1)](_0x1eb8dd[_0x270c02(0x2af)]);if(_0x4589f2&&_0x4589f2['apikey']===_0x3db2ee)return _0xbea022();}catch{}throw new ce();}var Pa={'jwt':To,'apikey':Oo},fi=require('express'),E=require(a0_0x3b8fac(0x12a)),C=(..._0x36bb10)=>{const _0x336f35=a0_0x3b8fac;let _0x389f91={};return _0x36bb10['forEach'](_0x5eb895=>_0x389f91[_0x5eb895]={'minLength':0x1,'description':_0x336f35(0x5e0)+_0x5eb895+_0x336f35(0x5f6)}),{'if':{'propertyNames':{'enum':[..._0x36bb10]}},'then':{'properties':_0x389f91}};},v={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'instanceName':{'type':a0_0x3b8fac(0x20d)}},...C(a0_0x3b8fac(0x2af))},fc={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'oldToken':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x3c9)],...C(a0_0x3b8fac(0x3c9))},wc={'properties':{'key':{'type':'object','properties':{'id':{'type':a0_0x3b8fac(0x20d)},'remoteJid':{'type':a0_0x3b8fac(0x20d)},'fromMe':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x3b8fac(0x123)],...C('id',a0_0x3b8fac(0x6d5))},'message':{'type':a0_0x3b8fac(0x4f6)}}},ae={'properties':{'delay':{'type':a0_0x3b8fac(0x34a),'description':a0_0x3b8fac(0x163)},'presence':{'type':a0_0x3b8fac(0x20d),'enum':['unavailable','available','composing','recording',a0_0x3b8fac(0xde)]}}},Z={'type':a0_0x3b8fac(0x20d),'description':a0_0x3b8fac(0x7a4)},La={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'textMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'text':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x284)],...C('text')}},'required':[a0_0x3b8fac(0x663),'number']},Fa={'type':'string','pattern':a0_0x3b8fac(0x597),'description':a0_0x3b8fac(0x7a4)},yc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Fa},'options':{...ae},'textMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'text':{'type':a0_0x3b8fac(0x20d)}},'required':['text'],...C('text')}},'required':[a0_0x3b8fac(0x663),a0_0x3b8fac(0x377)]},bc={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'number':{...Fa},'options':{...ae},'mediaMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'mediatype':{'type':a0_0x3b8fac(0x20d),'enum':[a0_0x3b8fac(0x410),a0_0x3b8fac(0x51c),a0_0x3b8fac(0x136),a0_0x3b8fac(0x3bc)]},'media':{'type':a0_0x3b8fac(0x20d)},'fileName':{'type':a0_0x3b8fac(0x20d)},'caption':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x6e8),a0_0x3b8fac(0x14f)],...C(a0_0x3b8fac(0x35c),a0_0x3b8fac(0x31e),a0_0x3b8fac(0x14f))}},'required':[a0_0x3b8fac(0x2fe),'number']},Ua={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'number':{...Z},'options':{...ae},'stickerMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'image':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x410)],...C(a0_0x3b8fac(0x410))}},'required':[a0_0x3b8fac(0x649),a0_0x3b8fac(0x377)]},ja={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'statusMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'type':{'type':a0_0x3b8fac(0x20d),'enum':['text','image','audio',a0_0x3b8fac(0x136)]},'content':{'type':'string'},'caption':{'type':'string'},'backgroundColor':{'type':a0_0x3b8fac(0x20d)},'font':{'type':a0_0x3b8fac(0x34a),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x3b8fac(0x637),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3b8fac(0x20d),'pattern':a0_0x3b8fac(0x100),'description':a0_0x3b8fac(0x463)}},'allContacts':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x3b8fac(0x1a2),a0_0x3b8fac(0x417)],...C(a0_0x3b8fac(0x1a2),a0_0x3b8fac(0x417))}},'required':[a0_0x3b8fac(0x79)]},Ja={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'number':{...Z},'options':{...ae},'mediaMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'mediatype':{'type':a0_0x3b8fac(0x20d),'enum':['image',a0_0x3b8fac(0x51c),'video','audio']},'media':{'type':a0_0x3b8fac(0x20d)},'fileName':{'type':'string'},'caption':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x6e8),a0_0x3b8fac(0x14f)],...C('fileName','caption',a0_0x3b8fac(0x14f))}},'required':[a0_0x3b8fac(0x2fe),a0_0x3b8fac(0x377)]},qa={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'number':{...Z},'options':{...ae},'audioMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'audio':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x3bc)],...C(a0_0x3b8fac(0x3bc))}},'required':['audioMessage',a0_0x3b8fac(0x377)]},Va={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'pollMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'name':{'type':a0_0x3b8fac(0x20d)},'selectableCount':{'type':a0_0x3b8fac(0x377)},'values':{'type':a0_0x3b8fac(0x637),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x3b8fac(0x26b),'selectableCount',a0_0x3b8fac(0x569)],...C(a0_0x3b8fac(0x26b),a0_0x3b8fac(0x4fb),'values')}},'required':['number',a0_0x3b8fac(0x122)]},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'number':{...Z},'menuMessage':{'type':'object','properties':{'text':{'type':a0_0x3b8fac(0x20d)},'choices':{'type':a0_0x3b8fac(0x637),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x3b8fac(0x284),a0_0x3b8fac(0x7b)],...C(a0_0x3b8fac(0x284),a0_0x3b8fac(0x7b))}},'required':[a0_0x3b8fac(0x377),a0_0x3b8fac(0x574)]},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'number':{...Z},'options':{...ae},'buttonMessage':{'type':'object','properties':{'title':{'type':a0_0x3b8fac(0x20d)},'description':{'type':a0_0x3b8fac(0x20d)},'footerText':{'type':a0_0x3b8fac(0x20d)},'buttons':{'type':a0_0x3b8fac(0x637),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3b8fac(0x4f6),'properties':{'buttonText':{'type':a0_0x3b8fac(0x20d)},'buttonId':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x3cb),a0_0x3b8fac(0x2b5)],...C(a0_0x3b8fac(0x3cb),a0_0x3b8fac(0x2b5))}},'mediaMessage':{'type':'object','properties':{'media':{'type':a0_0x3b8fac(0x20d)},'fileName':{'type':a0_0x3b8fac(0x20d)},'mediatype':{'type':a0_0x3b8fac(0x20d),'enum':[a0_0x3b8fac(0x410),a0_0x3b8fac(0x51c),a0_0x3b8fac(0x136)]}},'required':['media','mediatype'],...C(a0_0x3b8fac(0x14f),a0_0x3b8fac(0x35c))}},'required':[a0_0x3b8fac(0x399),a0_0x3b8fac(0x1dc)],...C(a0_0x3b8fac(0x399),a0_0x3b8fac(0x53f))}},'required':[a0_0x3b8fac(0x377),a0_0x3b8fac(0x723)]},Wa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'locationMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'latitude':{'type':a0_0x3b8fac(0x377)},'longitude':{'type':a0_0x3b8fac(0x377)},'name':{'type':a0_0x3b8fac(0x20d)},'address':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x43c),a0_0x3b8fac(0xf3)],...C(a0_0x3b8fac(0x26b),'addresss')}},'required':['number','locationMessage']},za={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'listMessage':{'type':a0_0x3b8fac(0x4f6),'properties':{'title':{'type':a0_0x3b8fac(0x20d)},'description':{'type':a0_0x3b8fac(0x20d)},'footerText':{'type':a0_0x3b8fac(0x20d)},'buttonText':{'type':'string'},'sections':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3b8fac(0x4f6),'properties':{'title':{'type':a0_0x3b8fac(0x20d)},'rows':{'type':a0_0x3b8fac(0x637),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3b8fac(0x4f6),'properties':{'title':{'type':a0_0x3b8fac(0x20d)},'description':{'type':a0_0x3b8fac(0x20d)},'rowId':{'type':a0_0x3b8fac(0x20d)}},'required':['title',a0_0x3b8fac(0x4a6)],...C('title',a0_0x3b8fac(0x4a6))}}},'required':[a0_0x3b8fac(0x399),a0_0x3b8fac(0x21c)],...C(a0_0x3b8fac(0x399))}}},'required':[a0_0x3b8fac(0x399),a0_0x3b8fac(0x53f),a0_0x3b8fac(0x3cb),a0_0x3b8fac(0x4ae)],...C(a0_0x3b8fac(0x399),a0_0x3b8fac(0x53f),a0_0x3b8fac(0x3cb),a0_0x3b8fac(0x383))}},'required':['number','listMessage']},Ha={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'number':{...Z},'options':{...ae},'contactMessage':{'type':a0_0x3b8fac(0x637),'items':{'type':a0_0x3b8fac(0x4f6),'properties':{'fullName':{'type':a0_0x3b8fac(0x20d)},'phoneNumber':{'type':a0_0x3b8fac(0x20d),'minLength':0xa}},'required':[a0_0x3b8fac(0x22e),a0_0x3b8fac(0x316)],...C(a0_0x3b8fac(0x22e))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x3b8fac(0x377),a0_0x3b8fac(0x4d3)]},Ka={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'reactionMessage':{'type':'object','properties':{'key':{'type':a0_0x3b8fac(0x4f6),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x3b8fac(0x20d)},'fromMe':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]}},'required':['id',a0_0x3b8fac(0x6d5),'fromMe'],...C('id',a0_0x3b8fac(0x6d5))},'reaction':{'type':a0_0x3b8fac(0x20d)}},'required':['key',a0_0x3b8fac(0x25b)],...C('reaction')}},'required':[a0_0x3b8fac(0x359)]},Qa={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'numbers':{'type':a0_0x3b8fac(0x637),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x3b8fac(0x100),'description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},Ya={'$id':(0x0,E['v4'])(),'type':'object','properties':{'readMessages':{'type':a0_0x3b8fac(0x637),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x3b8fac(0x20d)},'fromMe':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x3b8fac(0x20d)}},'required':['id',a0_0x3b8fac(0x123),'remoteJid'],...C('id','remoteJid')}}},'required':[a0_0x3b8fac(0x198)]},Xa={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'privacySettings':{'type':a0_0x3b8fac(0x4f6),'properties':{'readreceipts':{'type':'string','enum':[a0_0x3b8fac(0x62c),a0_0x3b8fac(0x3c6)]},'profile':{'type':a0_0x3b8fac(0x20d),'enum':[a0_0x3b8fac(0x62c),a0_0x3b8fac(0x4bb),a0_0x3b8fac(0x252),a0_0x3b8fac(0x3c6)]},'status':{'type':a0_0x3b8fac(0x20d),'enum':[a0_0x3b8fac(0x62c),'contacts','contact_blacklist',a0_0x3b8fac(0x3c6)]},'online':{'type':a0_0x3b8fac(0x20d),'enum':[a0_0x3b8fac(0x62c),a0_0x3b8fac(0x58e)]},'last':{'type':a0_0x3b8fac(0x20d),'enum':[a0_0x3b8fac(0x62c),a0_0x3b8fac(0x4bb),a0_0x3b8fac(0x252),a0_0x3b8fac(0x3c6)]},'groupadd':{'type':a0_0x3b8fac(0x20d),'enum':[a0_0x3b8fac(0x62c),a0_0x3b8fac(0x4bb),a0_0x3b8fac(0x252),a0_0x3b8fac(0x3c6)]}},'required':[a0_0x3b8fac(0x7a7),a0_0x3b8fac(0x7c0),'status','online','last',a0_0x3b8fac(0x30d)],...C('readreceipts',a0_0x3b8fac(0x7c0),a0_0x3b8fac(0x233),a0_0x3b8fac(0x6fa),a0_0x3b8fac(0x301),a0_0x3b8fac(0x30d))}},'required':[a0_0x3b8fac(0x115)]},Za={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'lastMessage':{'type':'object','properties':{'key':{'type':a0_0x3b8fac(0x4f6),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x3b8fac(0x20d)},'fromMe':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]}},'required':['id','fromMe',a0_0x3b8fac(0x6d5)],...C('id',a0_0x3b8fac(0x6d5))},'messageTimestamp':{'type':a0_0x3b8fac(0x34a),'minLength':0x1}},'required':[a0_0x3b8fac(0x3fb)],...C(a0_0x3b8fac(0x118))},'archive':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]}},'required':['lastMessage',a0_0x3b8fac(0x85)]},ei={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'id':{'type':a0_0x3b8fac(0x20d)},'fromMe':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x3b8fac(0x20d)},'participant':{'type':a0_0x3b8fac(0x20d)}},'required':['id','fromMe','remoteJid'],...C('id','remoteJid','participant')},ti={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'where':{'type':a0_0x3b8fac(0x4f6),'properties':{'_id':{'type':a0_0x3b8fac(0x20d),'minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':'string','minLength':0x1}},...C('_id','id',a0_0x3b8fac(0x60e))}}},si={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'name':{'type':'string'}},...C(a0_0x3b8fac(0x26b))},ai={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'status':{'type':'string'}},...C(a0_0x3b8fac(0x233))},xe={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{'type':a0_0x3b8fac(0x20d)},'picture':{'type':a0_0x3b8fac(0x20d)}}},ii={'type':a0_0x3b8fac(0x4f6),'properties':{'wuid':{'type':a0_0x3b8fac(0x20d)},'name':{'type':a0_0x3b8fac(0x20d)},'picture':{'type':a0_0x3b8fac(0x20d)},'status':{'type':'string'},'isBusiness':{'type':a0_0x3b8fac(0xa1)}}},oi={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x3b8fac(0x20d),'minLength':0x1},'key':{'type':a0_0x3b8fac(0x4f6),'if':{'propertyNames':{'enum':[a0_0x3b8fac(0x123),'remoteJid','id']}},'then':{'properties':{'remoteJid':{'type':a0_0x3b8fac(0x20d),'minLength':0x1,'description':a0_0x3b8fac(0x3eb)},'id':{'type':a0_0x3b8fac(0x20d),'minLength':0x1,'description':a0_0x3b8fac(0x3eb)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x3b8fac(0x4f6)}},...C('_id')},'limit':{'type':a0_0x3b8fac(0x34a)}}},Sc={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x3b8fac(0x20d)},'remoteJid':{'type':a0_0x3b8fac(0x20d)},'id':{'type':a0_0x3b8fac(0x20d)},'fromMe':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'participant':{'type':'string'},'status':{'type':a0_0x3b8fac(0x20d),'enum':['ERROR','PENDING','SERVER_ACK',a0_0x3b8fac(0x296),a0_0x3b8fac(0x64e),a0_0x3b8fac(0x587)]}},...C('_id',a0_0x3b8fac(0x6d5),'id','status')},'limit':{'type':a0_0x3b8fac(0x34a)}}},ri={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'presence':{'type':a0_0x3b8fac(0x20d),'enum':[a0_0x3b8fac(0x5ea),'available',a0_0x3b8fac(0x6f9),a0_0x3b8fac(0x5e9),a0_0x3b8fac(0xde)]}},'required':[a0_0x3b8fac(0x17a),a0_0x3b8fac(0x377)]},ni={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'subject':{'type':a0_0x3b8fac(0x20d)},'description':{'type':a0_0x3b8fac(0x20d)},'profilePicture':{'type':a0_0x3b8fac(0x20d)},'participants':{'type':a0_0x3b8fac(0x637),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3b8fac(0x20d),'minLength':0xa,'pattern':a0_0x3b8fac(0x747),'description':a0_0x3b8fac(0x5f1)}}},'required':[a0_0x3b8fac(0x155),'participants'],...C(a0_0x3b8fac(0x155),a0_0x3b8fac(0x53f),a0_0x3b8fac(0x392))},De={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'groupJid':{'type':a0_0x3b8fac(0x20d),'pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':[a0_0x3b8fac(0x658)],...C(a0_0x3b8fac(0x658))},ci={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'groupJid':{'type':'string'},'action':{'type':a0_0x3b8fac(0x20d),'enum':[a0_0x3b8fac(0x1a8),a0_0x3b8fac(0x109),a0_0x3b8fac(0x17f),'demote',a0_0x3b8fac(0x69c),'approve']},'participants':{'type':a0_0x3b8fac(0x637),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':'\x5cd+','description':a0_0x3b8fac(0x5f1)}}},'required':[a0_0x3b8fac(0x658),a0_0x3b8fac(0x670),'participants'],...C(a0_0x3b8fac(0x658),a0_0x3b8fac(0x670))},li={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'groupJid':{'type':a0_0x3b8fac(0x20d)},'expiration':{'type':'number','enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x3b8fac(0x658),a0_0x3b8fac(0x1a7)],...C(a0_0x3b8fac(0x658),a0_0x3b8fac(0x1a7))},ui={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'image':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x658),a0_0x3b8fac(0x410)],...C('groupJid',a0_0x3b8fac(0x410))},di={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'description':{'type':a0_0x3b8fac(0x20d)}},'required':['groupJid',a0_0x3b8fac(0x53f)],...C(a0_0x3b8fac(0x658),a0_0x3b8fac(0x53f))},pi={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'groupJid':{'type':a0_0x3b8fac(0x20d)},'name':{'type':a0_0x3b8fac(0x20d)}},'required':[a0_0x3b8fac(0x658),a0_0x3b8fac(0x26b)],...C(a0_0x3b8fac(0x658),'name')},hi={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'groupJid':{'type':'string'},'setting':{'type':a0_0x3b8fac(0x20d),'enum':['announcement',a0_0x3b8fac(0x1be),a0_0x3b8fac(0x188),'locked']}},'required':[a0_0x3b8fac(0x658),a0_0x3b8fac(0x41e)],...C(a0_0x3b8fac(0x658),'setting')},gi={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'restrict':{'type':a0_0x3b8fac(0xa1)},'announce':{'type':a0_0x3b8fac(0xa1)},'memberAddMode':{'type':a0_0x3b8fac(0xa1)},'joinApprovalMode':{'type':a0_0x3b8fac(0xa1)},'expiration':{'type':a0_0x3b8fac(0x34a),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x3b8fac(0x20d)},'description':{'type':a0_0x3b8fac(0x20d)},'image':{'type':a0_0x3b8fac(0x20d)}}},$s={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'inviteCode':{'type':'string'}},'required':[a0_0x3b8fac(0x537)],...C(a0_0x3b8fac(0x537))},mi={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'url':{'type':a0_0x3b8fac(0x20d)},'enabled':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]}},'required':[a0_0x3b8fac(0x772),a0_0x3b8fac(0x1d1)]},Mc={'$id':(0x0,E['v4'])(),'type':a0_0x3b8fac(0x4f6),'properties':{'local_map':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':'boolean','enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':'boolean','enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x3b8fac(0xa1),'enum':[!0x0,!0x1]}},'required':['local_map',a0_0x3b8fac(0x193),a0_0x3b8fac(0x500),'MESSAGES_SET',a0_0x3b8fac(0x329),'MESSAGES_UPSERT',a0_0x3b8fac(0x777),'CONTACTS_SET','CONTACTS_UPSERT',a0_0x3b8fac(0x71a),a0_0x3b8fac(0x1f6),a0_0x3b8fac(0x37d),a0_0x3b8fac(0x5f2),a0_0x3b8fac(0x216),a0_0x3b8fac(0x354),a0_0x3b8fac(0x495),'GROUPS_UPSERT',a0_0x3b8fac(0x4d6),a0_0x3b8fac(0x3c3)],...C('local_map','STATUS_INSTANCE','QRCODE_UPDATED',a0_0x3b8fac(0x58c),a0_0x3b8fac(0x329),a0_0x3b8fac(0x2c8),a0_0x3b8fac(0x777),a0_0x3b8fac(0x2d6),'CONTACTS_UPSERT',a0_0x3b8fac(0x71a),a0_0x3b8fac(0x1f6),'CHATS_SET',a0_0x3b8fac(0x5f2),a0_0x3b8fac(0x216),a0_0x3b8fac(0x354),a0_0x3b8fac(0x495),a0_0x3b8fac(0x4f1),a0_0x3b8fac(0x4d6),a0_0x3b8fac(0x3c3))},ct=class{},lt=class extends _{[a0_0x3b8fac(0x30c)](_0x3f6ff4){return ra(_0x3f6ff4);}async[a0_0x3b8fac(0x28b)](_0x1d1ca5){const _0x21af2a=a0_0x3b8fac;if(_0x1d1ca5[_0x21af2a(0x3c8)]!==0x0)try{return{'insertCount':(await this['getContactModelForOwner'](_0x1d1ca5[0x0][_0x21af2a(0x7a2)])[_0x21af2a(0x67d)]([..._0x1d1ca5]))['length']};}catch(_0x31709a){return _0x31709a;}}async[a0_0x3b8fac(0x23f)](_0x43a889,_0x144409){const _0x4682a9=a0_0x3b8fac;try{return{'deletedCount':(await this[_0x4682a9(0x30c)](_0x144409)['deleteMany']({..._0x43a889[_0x4682a9(0x287)]}))['deletedCount']};}catch(_0x5d8ca2){return{'error':_0x5d8ca2?.[_0x4682a9(0x2eb)]()};}}async[a0_0x3b8fac(0x1b6)](_0xe6d38e,_0x3e5455){const _0x54a929=a0_0x3b8fac;try{if(_0xe6d38e[_0x54a929(0x3c8)]===0x0)return;let _0x18ffe7=this[_0x54a929(0x30c)](_0x3e5455),_0x1840fa=_0xe6d38e[_0x54a929(0x23a)](_0x670eb1=>({'updateOne':{'filter':{'_id':_0x670eb1[_0x54a929(0x4ff)],'owner':_0x3e5455},'update':{..._0x670eb1}}})),{modifiedCount:_0x2b9666}=await _0x18ffe7[_0x54a929(0x352)](_0x1840fa);return{'insertCount':_0x2b9666};}catch{return;}}async[a0_0x3b8fac(0x7a1)](_0x18b752,_0x517601){const _0x2a02df=a0_0x3b8fac;try{let _0x1db9c8=this[_0x2a02df(0x30c)](_0x517601),_0x4e2bee=A(_0x18b752[_0x2a02df(0x287)]);return await _0x1db9c8[_0x2a02df(0x7a1)](_0x4e2bee)[_0x2a02df(0x606)](_0x18b752?.[_0x2a02df(0x606)]??0x0)[_0x2a02df(0x555)]();}catch{return[];}}async[a0_0x3b8fac(0x7ac)](_0x535008,_0x17ced9){const _0x12dd8a=a0_0x3b8fac;try{let _0x33b265=this[_0x12dd8a(0x30c)](_0x17ced9),_0x2f1798=A(_0x535008[_0x12dd8a(0x287)]);return await _0x33b265[_0x12dd8a(0x7ac)](_0x2f1798)[_0x12dd8a(0x555)]();}catch{return null;}}async['deleteAll'](_0x4c3cf5){const _0x206f65=a0_0x3b8fac;try{return await this[_0x206f65(0x30c)](_0x4c3cf5)[_0x206f65(0x712)]['drop'](),{'success':!0x0};}catch(_0x5c0151){return console[_0x206f65(0x3a7)](_0x5c0151),{'success':!0x1,'error':_0x5c0151};}}},ut=require('jsonschema'),Tc=require(a0_0x3b8fac(0x13c)),Rs=new $('Validate'),G=class{[a0_0x3b8fac(0x10c)](_0x5501e3,_0x2ab15f=!0x0){let _0x2f2621='/'+_0x5501e3;return _0x2ab15f&&(_0x2f2621+='/:instanceName'),_0x2f2621;}async[a0_0x3b8fac(0x602)](_0x3624ff){const _0x33d098=a0_0x3b8fac;let {request:_0x468695,schema:_0x743d2b,ClassRef:_0x44d758,execute:_0x1b0f1b}=_0x3624ff,_0x2006ac=new _0x44d758(),_0x4bfca9=_0x468695[_0x33d098(0x6fc)],_0x4ac0ac=_0x468695[_0x33d098(0x40e)];_0x468695?.[_0x33d098(0x644)]&&Object['keys'](_0x468695['query'])['length']>0x0&&Object[_0x33d098(0x6da)](_0x4ac0ac,_0x468695[_0x33d098(0x644)]),_0x468695['originalUrl']['includes'](_0x33d098(0x598))&&Object[_0x33d098(0x6da)](_0x4ac0ac,_0x4bfca9),Object[_0x33d098(0x6da)](_0x2006ac,_0x4bfca9);let _0x1bbd45=_0x743d2b?(0x0,ut[_0x33d098(0x4df)])(_0x2006ac,_0x743d2b):{'valid':!0x0,'errors':[]};if(!_0x1bbd45[_0x33d098(0x558)]){let _0x4d5b8e=_0x1bbd45[_0x33d098(0x254)][_0x33d098(0x23a)](({property:_0x35b11,stack:_0xba44b,schema:_0x1b5034})=>{const _0x380237=_0x33d098;let _0x48ded5;return _0x1b5034[_0x380237(0x53f)]?_0x48ded5=_0x1b5034['description']:_0x48ded5=_0xba44b[_0x380237(0x1c6)](_0x380237(0x360),''),{'property':_0x35b11[_0x380237(0x1c6)]('instance.',''),'message':_0x48ded5};});throw Rs[_0x33d098(0x3a7)]([..._0x4d5b8e]),new m(..._0x4d5b8e);}return await _0x1b0f1b(_0x4ac0ac,_0x2006ac);}async['groupValidate'](_0x13c81e){const _0x14f237=a0_0x3b8fac;let {request:_0x50b07b,ClassRef:_0x92e72,schema:_0x498f1d,execute:_0x4c0ad4}=_0x13c81e,_0xe23e86=_0x50b07b[_0x14f237(0x644)];if(!_0xe23e86?.[_0x14f237(0x658)])throw new m('The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','ex:\x20\x22groupJid=120362@g.us\x22');let _0x243f00=_0x50b07b[_0x14f237(0x40e)],_0x1231f6=_0x50b07b['body'],_0x2404c1=new _0x92e72();Object[_0x14f237(0x6da)](_0x1231f6,_0xe23e86),Object['assign'](_0x2404c1,_0x1231f6);let _0x3fc295=(0x0,ut['validate'])(_0x2404c1,_0x498f1d);if(!_0x3fc295[_0x14f237(0x558)]){let _0x1bc4cc=_0x3fc295['errors']['map'](({property:_0xc2dd1b,stack:_0x1153cf,schema:_0x46e716})=>{const _0x1d5e73=_0x14f237;let _0x50e5b9;return _0x46e716[_0x1d5e73(0x53f)]?_0x50e5b9=_0x46e716[_0x1d5e73(0x53f)]:_0x50e5b9=_0x1153cf[_0x1d5e73(0x1c6)](_0x1d5e73(0x360),''),{'property':_0xc2dd1b['replace']('instance.',''),'message':_0x50e5b9};});throw Rs['error']([..._0x1bc4cc]),new m(..._0x1bc4cc);}return await _0x4c0ad4(_0x243f00,_0x2404c1);}async[a0_0x3b8fac(0x494)](_0x5a7915){const _0x5af875=a0_0x3b8fac;let {request:_0x438321,ClassRef:_0x517b35,schema:_0x453070,execute:_0x226029}=_0x5a7915,_0xe1d98c=_0x438321[_0x5af875(0x6fc)];if(!_0xe1d98c?.['inviteCode'])throw new m(_0x5af875(0x313),'ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22');let _0x280687=_0x438321['params'],_0x2539a4=_0x438321[_0x5af875(0x6fc)],_0x13838b=new _0x517b35();Object[_0x5af875(0x6da)](_0x2539a4,_0xe1d98c),Object[_0x5af875(0x6da)](_0x13838b,_0x2539a4);let _0x2cadf7=(0x0,ut['validate'])(_0x13838b,_0x453070);if(!_0x2cadf7['valid']){let _0x32a734=_0x2cadf7[_0x5af875(0x254)][_0x5af875(0x23a)](({property:_0x2b68b8,stack:_0x345f64,schema:_0x3b1dcd})=>{const _0x473e36=_0x5af875;let _0x1e8796;return _0x3b1dcd[_0x473e36(0x53f)]?_0x1e8796=_0x3b1dcd['description']:_0x1e8796=_0x345f64[_0x473e36(0x1c6)](_0x473e36(0x360),''),{'property':_0x2b68b8[_0x473e36(0x1c6)](_0x473e36(0x360),''),'message':_0x1e8796};});throw Rs['error']([..._0x32a734]),new m(..._0x32a734);}return await _0x226029(_0x280687,_0x13838b);}},M=class{},Bc=new $(a0_0x3b8fac(0x668)),dt=class extends G{constructor(..._0x225bb6){const _0x1e13c4=a0_0x3b8fac;super(),this['router']=(0x0,fi[_0x1e13c4(0x78d)])(),this[_0x1e13c4(0xdc)][_0x1e13c4(0x154)](this[_0x1e13c4(0x10c)](_0x1e13c4(0x650)),..._0x225bb6,async(_0x259622,_0x1886d5)=>{const _0x230061=_0x1e13c4;let _0x58d7ff=await this[_0x230061(0x602)]({'request':_0x259622,'schema':ri,'ClassRef':Ze,'execute':(_0x4f9cb8,_0x125b97)=>k['updatePresence'](_0x4f9cb8,_0x125b97)});return _0x1886d5[_0x230061(0x233)](0xc9)[_0x230061(0xfe)](_0x58d7ff);})[_0x1e13c4(0x154)](this[_0x1e13c4(0x10c)](_0x1e13c4(0xcd)),..._0x225bb6,async(_0x1480d1,_0xe1ae7c)=>{const _0x40d7a4=_0x1e13c4;let _0x2e8f45=await this[_0x40d7a4(0x602)]({'request':_0x1480d1,'schema':Qa,'ClassRef':et,'execute':(_0x3bd3a5,_0x3fbc45)=>k[_0x40d7a4(0x269)](_0x3bd3a5,_0x3fbc45)});return _0xe1ae7c[_0x40d7a4(0x233)](0xc9)[_0x40d7a4(0xfe)](_0x2e8f45);})[_0x1e13c4(0x154)](this['routerPath'](_0x1e13c4(0x3d9)),..._0x225bb6,async(_0x5cd410,_0x10ee32)=>{const _0xa8986c=_0x1e13c4;let _0x291d5c=await this['dataValidate']({'request':_0x5cd410,'schema':v,'ClassRef':M,'execute':(_0x65c208,_0x5f1cad)=>k[_0xa8986c(0x3d9)](_0x65c208,_0x5f1cad)});return _0x10ee32[_0xa8986c(0x233)](0xc9)[_0xa8986c(0xfe)](_0x291d5c);})['put'](this[_0x1e13c4(0x10c)](_0x1e13c4(0x589)),..._0x225bb6,async(_0xb9bba3,_0x2482bf)=>{const _0x4927f9=_0x1e13c4;let _0x4c43c8=await this[_0x4927f9(0x602)]({'request':_0xb9bba3,'schema':Ya,'ClassRef':at,'execute':(_0x318bb9,_0x167407)=>k[_0x4927f9(0x5ff)](_0x318bb9,_0x167407)});return _0x2482bf[_0x4927f9(0x233)](0xc9)[_0x4927f9(0xfe)](_0x4c43c8);})['put'](this['routerPath'](_0x1e13c4(0x3ac)),..._0x225bb6,async(_0x4d636b,_0x18676c)=>{const _0x401344=_0x1e13c4;let _0x330b26=await this[_0x401344(0x602)]({'request':_0x4d636b,'schema':Za,'ClassRef':it,'execute':(_0x398bab,_0xa238a4)=>k['archiveChat'](_0x398bab,_0xa238a4)});return _0x18676c[_0x401344(0x233)](0xc9)[_0x401344(0xfe)](_0x330b26);})[_0x1e13c4(0x23f)](this[_0x1e13c4(0x10c)](_0x1e13c4(0x4d9)),..._0x225bb6,async(_0xcbc0f,_0x507873)=>{const _0x13d66=_0x1e13c4;let _0x14de32=await this['dataValidate']({'request':_0xcbc0f,'schema':ei,'ClassRef':rt,'execute':(_0x2dbd3a,_0x501abf)=>k[_0x13d66(0x16d)](_0x2dbd3a,_0x501abf)});return _0x507873[_0x13d66(0x233)](0xc9)[_0x13d66(0xfe)](_0x14de32);})[_0x1e13c4(0x154)](this[_0x1e13c4(0x10c)](_0x1e13c4(0x47f)),..._0x225bb6,async(_0x2a8b02,_0x8f1b4e)=>{const _0x14ab64=_0x1e13c4;let _0x2dd6be=await this[_0x14ab64(0x602)]({'request':_0x2a8b02,'schema':xe,'ClassRef':Oe,'execute':(_0x422e83,_0x2070e1)=>k['fetchProfilePicture'](_0x422e83,_0x2070e1)});return _0x8f1b4e[_0x14ab64(0x233)](0xc8)['json'](_0x2dd6be);})[_0x1e13c4(0x154)](this['routerPath']('fetchProfile'),..._0x225bb6,async(_0x1684c6,_0x6ad95c)=>{const _0x4a89f6=_0x1e13c4;let _0x24116a=await this[_0x4a89f6(0x602)]({'request':_0x1684c6,'schema':ii,'ClassRef':Oe,'execute':(_0x47be76,_0x2c8c01)=>k['fetchProfile'](_0x47be76,_0x2c8c01)});return _0x6ad95c[_0x4a89f6(0x233)](0xc8)[_0x4a89f6(0xfe)](_0x24116a);})[_0x1e13c4(0x154)](this['routerPath']('findContacts'),..._0x225bb6,async(_0x5a057c,_0x4b6232)=>{const _0x201792=_0x1e13c4;let _0x2e4a20=await this[_0x201792(0x602)]({'request':_0x5a057c,'schema':ti,'ClassRef':ct,'execute':(_0x2d883e,_0x5aeaf9)=>k[_0x201792(0x32b)](_0x2d883e,_0x5aeaf9)});return _0x4b6232[_0x201792(0x233)](0xc8)[_0x201792(0xfe)](_0x2e4a20);})[_0x1e13c4(0x154)](this['routerPath']('getBase64FromMediaMessage'),..._0x225bb6,async(_0x592e03,_0x83fa41)=>{const _0x3e185b=_0x1e13c4;let _0x18a69e=await this[_0x3e185b(0x602)]({'request':_0x592e03,'schema':null,'ClassRef':Object,'execute':(_0x21a9fb,_0x4015a5)=>k['getBase64FromMediaMessage'](_0x21a9fb,_0x4015a5)});return _0x83fa41[_0x3e185b(0x233)](0xc9)[_0x3e185b(0xfe)](_0x18a69e);})[_0x1e13c4(0x154)](this[_0x1e13c4(0x10c)](_0x1e13c4(0x1c9)),..._0x225bb6,async(_0x425e,_0x5c443c)=>{const _0x3a88e3=_0x1e13c4;let _0x433b3b=await this['dataValidate']({'request':_0x425e,'schema':oi,'ClassRef':Ye,'execute':(_0x3fe414,_0xebb8ee)=>k[_0x3a88e3(0x753)](_0x3fe414,_0xebb8ee)});return _0x5c443c[_0x3a88e3(0x233)](0xc8)[_0x3a88e3(0xfe)](_0x433b3b);})[_0x1e13c4(0x184)](this['routerPath'](_0x1e13c4(0x280)),..._0x225bb6,async(_0x4977a8,_0x190d89)=>{const _0x4eaefc=_0x1e13c4;let _0x1e8114=await this['dataValidate']({'request':_0x4977a8,'schema':null,'ClassRef':M,'execute':_0x125361=>k[_0x4eaefc(0x6b7)](_0x125361)});return _0x190d89[_0x4eaefc(0x233)](0xc8)['json'](_0x1e8114);})['get'](this[_0x1e13c4(0x10c)]('findLabels'),..._0x225bb6,async(_0x188955,_0x46c34c)=>{const _0x877feb=_0x1e13c4;let _0x2d8796=await this[_0x877feb(0x602)]({'request':_0x188955,'schema':null,'ClassRef':M,'execute':_0x39e1ab=>k[_0x877feb(0x390)](_0x39e1ab)});return _0x46c34c[_0x877feb(0x233)](0xc8)[_0x877feb(0xfe)](_0x2d8796);})[_0x1e13c4(0x3a2)](this['routerPath']('importChats'),..._0x225bb6,async(_0x2e5797,_0x10ca55)=>{const _0x568f47=_0x1e13c4;let _0x365305=await this['dataValidate']({'request':_0x2e5797,'schema':null,'ClassRef':Array,'execute':(_0x64f53,_0xbe995d)=>k[_0x568f47(0x5db)](_0x64f53,_0xbe995d)});return _0x10ca55[_0x568f47(0x233)](0xc8)[_0x568f47(0xfe)](_0x365305);})[_0x1e13c4(0x184)](this['routerPath']('fetchPrivacySettings'),..._0x225bb6,async(_0x3ecee8,_0x364a27)=>{const _0x5acf1d=_0x1e13c4;let _0x1f6615=await this[_0x5acf1d(0x602)]({'request':_0x3ecee8,'schema':null,'ClassRef':M,'execute':_0x588e55=>k[_0x5acf1d(0x54b)](_0x588e55)});return _0x364a27[_0x5acf1d(0x233)](0xc8)[_0x5acf1d(0xfe)](_0x1f6615);})[_0x1e13c4(0x3a2)](this[_0x1e13c4(0x10c)]('updatePrivacySettings'),..._0x225bb6,async(_0x3cfc77,_0x5a4251)=>{const _0x1218c1=_0x1e13c4;let _0x486c4d=await this[_0x1218c1(0x602)]({'request':_0x3cfc77,'schema':Xa,'ClassRef':ot,'execute':(_0x3c801e,_0x1b155a)=>k[_0x1218c1(0x1dd)](_0x3c801e,_0x1b155a)});return _0x5a4251['status'](0xc9)[_0x1218c1(0xfe)](_0x486c4d);})[_0x1e13c4(0x154)](this[_0x1e13c4(0x10c)]('fetchBusinessProfile'),..._0x225bb6,async(_0x24b0bf,_0x42ad82)=>{const _0x48c083=_0x1e13c4;let _0x33a1df=await this[_0x48c083(0x602)]({'request':_0x24b0bf,'schema':xe,'ClassRef':ve,'execute':(_0x5e5f4c,_0x5c5cac)=>k[_0x48c083(0x4de)](_0x5e5f4c,_0x5c5cac)});return _0x42ad82['status'](0xc8)[_0x48c083(0xfe)](_0x33a1df);})[_0x1e13c4(0x154)](this[_0x1e13c4(0x10c)]('updateProfileName'),..._0x225bb6,async(_0x4adeb5,_0xf46062)=>{const _0x47f158=_0x1e13c4;let _0x26acc8=await this['dataValidate']({'request':_0x4adeb5,'schema':si,'ClassRef':tt,'execute':(_0x2f3414,_0x5865e6)=>k[_0x47f158(0x279)](_0x2f3414,_0x5865e6)});return _0xf46062[_0x47f158(0x233)](0xc8)[_0x47f158(0xfe)](_0x26acc8);})[_0x1e13c4(0x154)](this[_0x1e13c4(0x10c)]('updateProfileStatus'),..._0x225bb6,async(_0x16b5e9,_0x4f1a7f)=>{const _0x5447da=_0x1e13c4;let _0x1d9210=await this[_0x5447da(0x602)]({'request':_0x16b5e9,'schema':ai,'ClassRef':st,'execute':(_0x265af5,_0x3c0572)=>k['updateProfileStatus'](_0x265af5,_0x3c0572)});return _0x4f1a7f[_0x5447da(0x233)](0xc8)['json'](_0x1d9210);})[_0x1e13c4(0x3a2)](this[_0x1e13c4(0x10c)]('updateProfilePicture'),..._0x225bb6,async(_0x7fb9be,_0x686782)=>{const _0x4491df=_0x1e13c4;let _0x23e146=await this[_0x4491df(0x602)]({'request':_0x7fb9be,'schema':xe,'ClassRef':ve,'execute':(_0x2416e9,_0xdb28ee)=>k[_0x4491df(0x459)](_0x2416e9,_0xdb28ee)});return _0x686782[_0x4491df(0x233)](0xc8)[_0x4491df(0xfe)](_0x23e146);})[_0x1e13c4(0x23f)](this[_0x1e13c4(0x10c)](_0x1e13c4(0x24e)),..._0x225bb6,async(_0x21b56d,_0x154045)=>{const _0x53f7bc=_0x1e13c4;let _0x1a1b4b=await this['dataValidate']({'request':_0x21b56d,'schema':xe,'ClassRef':ve,'execute':(_0x463dc2,_0x453c45)=>k[_0x53f7bc(0x24e)](_0x463dc2,_0x453c45)});return _0x154045['status'](0xc8)['json'](_0x1a1b4b);});}},wi=require('express'),pt=class{},ht=class{},gt=class{},mt=class{},ft=class{},wt=class{},ie=class{},Pe=class{},yt=class extends ie{},bt=class extends ie{},St=class extends G{constructor(..._0x94184e){const _0x42b31f=a0_0x3b8fac;super(),this[_0x42b31f(0xdc)]=(0x0,wi[_0x42b31f(0x78d)])(),this[_0x42b31f(0xdc)][_0x42b31f(0x154)](this['routerPath'](_0x42b31f(0x2c0)),..._0x94184e,async(_0x4366b3,_0x44bf39)=>{const _0x4bd8e4=_0x42b31f;let _0x4efebc=await this[_0x4bd8e4(0x602)]({'request':_0x4366b3,'schema':ni,'ClassRef':pt,'execute':(_0x25902b,_0x1fa26a)=>V[_0x4bd8e4(0x22b)](_0x25902b,_0x1fa26a)});_0x44bf39[_0x4bd8e4(0x233)](0xc9)[_0x4bd8e4(0xfe)](_0x4efebc);})[_0x42b31f(0x3a2)](this['routerPath'](_0x42b31f(0x31b)),..._0x94184e,async(_0x56775d,_0x17095f)=>{const _0x4be1e9=_0x42b31f;let _0x2ad206=await this[_0x4be1e9(0x8f)]({'request':_0x56775d,'schema':ui,'ClassRef':ht,'execute':(_0x467446,_0x1b5780)=>V[_0x4be1e9(0x31b)](_0x467446,_0x1b5780)});_0x17095f['status'](0xc9)[_0x4be1e9(0xfe)](_0x2ad206);})[_0x42b31f(0x3a2)](this[_0x42b31f(0x10c)](_0x42b31f(0x291)),..._0x94184e,async(_0x5dac32,_0x47b8f2)=>{const _0x2972db=_0x42b31f;let _0x318a6b=await this[_0x2972db(0x8f)]({'request':_0x5dac32,'schema':di,'ClassRef':gt,'execute':(_0x1da4d8,_0x344377)=>V[_0x2972db(0x291)](_0x1da4d8,_0x344377)});_0x47b8f2['status'](0xc9)['json'](_0x318a6b);})[_0x42b31f(0x3a2)](this[_0x42b31f(0x10c)]('groupName'),..._0x94184e,async(_0x196be5,_0x5c65d2)=>{const _0x2c14a4=_0x42b31f;let _0xdb20e4=await this[_0x2c14a4(0x8f)]({'request':_0x196be5,'schema':pi,'ClassRef':mt,'execute':(_0x9341f7,_0x2b5e99)=>V[_0x2c14a4(0x565)](_0x9341f7,_0x2b5e99)});_0x5c65d2[_0x2c14a4(0x233)](0xc9)[_0x2c14a4(0xfe)](_0xdb20e4);})[_0x42b31f(0x3a2)](this['routerPath'](_0x42b31f(0x2e9)),..._0x94184e,async(_0x33d2c3,_0x3880bb)=>{const _0x1ac79e=_0x42b31f;let _0x42b78e=await this[_0x1ac79e(0x8f)]({'request':_0x33d2c3,'schema':gi,'ClassRef':wt,'execute':(_0x591b6d,_0x555e26)=>V[_0x1ac79e(0x2e9)](_0x591b6d,_0x555e26)});_0x3880bb[_0x1ac79e(0x233)](0xc9)[_0x1ac79e(0xfe)](_0x42b78e);})[_0x42b31f(0x3a2)](this['routerPath'](_0x42b31f(0x2e0)),..._0x94184e,async(_0x15390f,_0x223c50)=>{const _0x246236=_0x42b31f;let _0x5c28be=await this[_0x246236(0x8f)]({'request':_0x15390f,'schema':hi,'ClassRef':ft,'execute':(_0x439927,_0x35b65d)=>V[_0x246236(0x2e0)](_0x439927,_0x35b65d)});_0x223c50[_0x246236(0x233)](0xc9)['json'](_0x5c28be);})[_0x42b31f(0x3a2)](this[_0x42b31f(0x10c)](_0x42b31f(0x274)),..._0x94184e,async(_0x1c09cb,_0x782e6b)=>{const _0x1bafb4=_0x42b31f;let _0x31881e=await this[_0x1bafb4(0x8f)]({'request':_0x1c09cb,'schema':li,'ClassRef':bt,'execute':(_0x19c9bd,_0x44e8e1)=>V[_0x1bafb4(0x274)](_0x19c9bd,_0x44e8e1)});_0x782e6b['status'](0xc9)[_0x1bafb4(0xfe)](_0x31881e);})[_0x42b31f(0x184)](this[_0x42b31f(0x10c)](_0x42b31f(0x156)),..._0x94184e,async(_0x4179b1,_0x591d2b)=>{const _0x4d6b53=_0x42b31f;let _0x137d8d=await this['groupValidate']({'request':_0x4179b1,'schema':De,'ClassRef':ie,'execute':(_0x5d61e5,_0x3c0312)=>V[_0x4d6b53(0x3c4)](_0x5d61e5,_0x3c0312)});_0x591d2b[_0x4d6b53(0x233)](0xc8)[_0x4d6b53(0xfe)](_0x137d8d);})[_0x42b31f(0x184)](this['routerPath'](_0x42b31f(0x549)),..._0x94184e,async(_0x8a622c,_0x8211ca)=>{const _0x1a56d7=_0x42b31f;let _0x16e1ff=await this[_0x1a56d7(0x602)]({'request':_0x8a622c,'schema':v,'ClassRef':M,'execute':_0x11f6ab=>V[_0x1a56d7(0x549)](_0x11f6ab)});_0x8211ca[_0x1a56d7(0x233)](0xc8)[_0x1a56d7(0xfe)](_0x16e1ff);})[_0x42b31f(0x184)](this['routerPath'](_0x42b31f(0x18b)),..._0x94184e,async(_0x3ee5a3,_0x428f8b)=>{const _0x4439ff=_0x42b31f;let _0x414e94=await this[_0x4439ff(0x8f)]({'request':_0x3ee5a3,'schema':De,'ClassRef':ie,'execute':(_0x2b0432,_0x4c4f7c)=>V[_0x4439ff(0x5ed)](_0x2b0432,_0x4c4f7c)});_0x428f8b[_0x4439ff(0x233)](0xc8)[_0x4439ff(0xfe)](_0x414e94);})[_0x42b31f(0x184)](this[_0x42b31f(0x10c)]('inviteCode'),..._0x94184e,async(_0x41eaa3,_0x244a9c)=>{const _0x21f07b=_0x42b31f;let _0x5cc6b0=await this[_0x21f07b(0x8f)]({'request':_0x41eaa3,'schema':De,'ClassRef':ie,'execute':(_0x2f373a,_0x3ae43f)=>V[_0x21f07b(0x537)](_0x2f373a,_0x3ae43f)});_0x244a9c[_0x21f07b(0x233)](0xc8)[_0x21f07b(0xfe)](_0x5cc6b0);})['post'](this[_0x42b31f(0x10c)](_0x42b31f(0x52e)),..._0x94184e,async(_0x377bc3,_0x1d02d6)=>{const _0x454603=_0x42b31f;let _0x5d1573=await this[_0x454603(0x494)]({'request':_0x377bc3,'schema':$s,'ClassRef':Pe,'execute':(_0x4bf208,_0x5bb9e3)=>V[_0x454603(0x1d6)](_0x4bf208,_0x5bb9e3)});_0x1d02d6[_0x454603(0x233)](0xc9)[_0x454603(0xfe)](_0x5d1573);})[_0x42b31f(0x3a2)](this[_0x42b31f(0x10c)](_0x42b31f(0x237)),..._0x94184e,async(_0xbf0e57,_0x388713)=>{const _0xd60b9d=_0x42b31f;let _0xda901b=await this['joinGroupValidate']({'request':_0xbf0e57,'schema':$s,'ClassRef':Pe,'execute':(_0x55f7c7,_0x5d29ed)=>V['joinGroup'](_0x55f7c7,_0x5d29ed)});_0x388713[_0xd60b9d(0x233)](0xc9)[_0xd60b9d(0xfe)](_0xda901b);})['put'](this[_0x42b31f(0x10c)](_0x42b31f(0x28f)),..._0x94184e,async(_0x2d26d8,_0x34765a)=>{const _0x3df557=_0x42b31f;let _0x3d2919=await this[_0x3df557(0x8f)]({'request':_0x2d26d8,'schema':De,'ClassRef':ie,'execute':(_0x3fa7c8,_0x39d564)=>V['revokeInviteCode'](_0x3fa7c8,_0x39d564)});_0x34765a[_0x3df557(0x233)](0xc9)['json'](_0x3d2919);})[_0x42b31f(0x3a2)](this[_0x42b31f(0x10c)](_0x42b31f(0x23d)),..._0x94184e,async(_0x3aaaf9,_0x1f6f9f)=>{const _0xbcb782=_0x42b31f;let _0x9716b7=await this[_0xbcb782(0x8f)]({'request':_0x3aaaf9,'schema':ci,'ClassRef':yt,'execute':(_0x18e2c4,_0x226722)=>V[_0xbcb782(0x325)](_0x18e2c4,_0x226722)});_0x1f6f9f['status'](0xc9)[_0xbcb782(0xfe)](_0x9716b7);})[_0x42b31f(0x23f)](this[_0x42b31f(0x10c)](_0x42b31f(0x275)),..._0x94184e,async(_0x3d00a9,_0x5b756b)=>{const _0x211417=_0x42b31f;let _0x38cae8=await this['groupValidate']({'request':_0x3d00a9,'schema':{},'ClassRef':ie,'execute':(_0x2d2cdd,_0x266fe8)=>V[_0x211417(0x275)](_0x2d2cdd,_0x266fe8)});_0x5b756b['status'](0xc8)[_0x211417(0xfe)](_0x38cae8);});}},yi=require(a0_0x3b8fac(0x99)),Mt=class extends G{constructor(_0x52d22d,..._0x213314){const _0x565d00=a0_0x3b8fac;super(),this[_0x565d00(0x2e2)]=_0x52d22d,this[_0x565d00(0xdc)]=(0x0,yi[_0x565d00(0x78d)])();let _0x4a1331=_0x52d22d['get']('AUTHENTICATION');this['router']['post'](_0x565d00(0x8a),..._0x213314,async(_0x357805,_0x3e5db8)=>{const _0xf9be1f=_0x565d00;let {instanceName:_0x9248c2,apikey:_0x1b0010,number:_0x491587}=_0x357805[_0xf9be1f(0x6fc)],_0xf68778=await he[_0xf9be1f(0x7c7)]({'instanceName':_0x9248c2,'apikey':_0x1b0010,'number':_0x491587});return _0x3e5db8[_0xf9be1f(0x233)](0xc9)['json'](_0xf68778);})[_0x565d00(0x3a2)](this[_0x565d00(0x10c)](_0x565d00(0x6f2)),..._0x213314,async(_0x57b971,_0x90f158)=>{const _0x326f71=_0x565d00;let _0x5ee799=await this['dataValidate']({'request':_0x57b971,'schema':v,'ClassRef':M,'execute':_0x4a1c6d=>he['restartInstance'](_0x4a1c6d)});return _0x90f158[_0x326f71(0x233)](0xc8)[_0x326f71(0xfe)](_0x5ee799);})[_0x565d00(0x184)](this[_0x565d00(0x10c)](_0x565d00(0x3f7)),..._0x213314,async(_0x5e06f5,_0x14a8ea)=>{const _0x4a0668=_0x565d00;let _0x4398f3=await this[_0x4a0668(0x602)]({'request':_0x5e06f5,'schema':v,'ClassRef':M,'execute':_0xb73f93=>he['connectToWhatsappController'](_0xb73f93)});return _0x14a8ea[_0x4a0668(0x233)](0xc8)[_0x4a0668(0xfe)](_0x4398f3);})[_0x565d00(0x184)](this[_0x565d00(0x10c)](_0x565d00(0x4f3)),..._0x213314,async(_0x2e4f4f,_0x36a4a0)=>{const _0x55f76c=_0x565d00;let _0x379480=await this[_0x55f76c(0x602)]({'request':_0x2e4f4f,'schema':v,'ClassRef':M,'execute':_0x46f6b5=>he[_0x55f76c(0x4f3)](_0x46f6b5)});return _0x36a4a0[_0x55f76c(0x233)](0xc8)[_0x55f76c(0xfe)](_0x379480);})['get'](this[_0x565d00(0x10c)](_0x565d00(0x535),!0x1),..._0x213314,async(_0x20bf94,_0x51d0be)=>{const _0x4eebd9=_0x565d00;let _0x44bdc7=await this[_0x4eebd9(0x602)]({'request':_0x20bf94,'schema':null,'ClassRef':M,'execute':_0x4161e9=>he[_0x4eebd9(0x535)](_0x4161e9)});return _0x51d0be[_0x4eebd9(0x233)](0xc8)['json'](_0x44bdc7);})[_0x565d00(0x23f)](this['routerPath'](_0x565d00(0xfc)),..._0x213314,async(_0x4432a7,_0x431936)=>{const _0x1eb18c=_0x565d00;let _0x244abe=await this['dataValidate']({'request':_0x4432a7,'schema':v,'ClassRef':M,'execute':_0x29c7d0=>he[_0x1eb18c(0xfc)](_0x29c7d0)});return _0x431936[_0x1eb18c(0x233)](0xc8)[_0x1eb18c(0xfe)](_0x244abe);})[_0x565d00(0x23f)](this[_0x565d00(0x10c)](_0x565d00(0x23f)),..._0x213314,async(_0x48d267,_0x59529d)=>{const _0x57a745=_0x565d00;let _0x30db57=await this[_0x57a745(0x602)]({'request':_0x48d267,'schema':v,'ClassRef':M,'execute':_0x33e53d=>he[_0x57a745(0x1de)](_0x33e53d)});return _0x59529d[_0x57a745(0x233)](0xc8)['json'](_0x30db57);});}},bi=require(a0_0x3b8fac(0x99)),As=class{},Y=class extends As{},Ct=class extends Y{},Et=class extends Y{},vt=class extends Y{},Nt=class extends Y{},ke=class extends Y{},$t=class extends Y{},Rt=class extends Y{},At=class extends Y{},It=class extends Y{},Tt=class extends Y{},Ot=class{},_t=class extends G{constructor(..._0x5b24f4){const _0x396492=a0_0x3b8fac;super(),this[_0x396492(0xdc)]=(0x0,bi['Router'])(),this[_0x396492(0xdc)][_0x396492(0x154)](this[_0x396492(0x10c)](_0x396492(0x397)),..._0x5b24f4,async(_0x399065,_0x3f7d4f)=>{const _0x79f628=_0x396492;let _0x4263c1=await this['dataValidate']({'request':_0x399065,'schema':La,'ClassRef':Ct,'execute':(_0x40ef9c,_0x58eda7)=>H[_0x79f628(0x397)](_0x40ef9c,_0x58eda7)});return _0x3f7d4f[_0x79f628(0x233)](0xc9)[_0x79f628(0xfe)](_0x4263c1);})[_0x396492(0x154)](this['routerPath'](_0x396492(0x1b4)),..._0x5b24f4,async(_0x159d90,_0x4d7bea)=>{const _0x54cd41=_0x396492;let _0x2e8c5f=await this[_0x54cd41(0x602)]({'request':_0x159d90,'schema':Ja,'ClassRef':ke,'execute':(_0x5e4f6a,_0x54eab9)=>H[_0x54cd41(0x1b4)](_0x5e4f6a,_0x54eab9)});return _0x4d7bea[_0x54cd41(0x233)](0xc9)[_0x54cd41(0xfe)](_0x2e8c5f);})[_0x396492(0x154)](this['routerPath'](_0x396492(0x60d)),..._0x5b24f4,async(_0xdefdfa,_0x5915c7)=>{const _0x2b907f=_0x396492;let _0x5b260=await this['dataValidate']({'request':_0xdefdfa,'schema':Ga,'ClassRef':Nt,'execute':(_0x222b72,_0x4474ec)=>H[_0x2b907f(0x60d)](_0x222b72,_0x4474ec)});return _0x5915c7['status'](0xc9)[_0x2b907f(0xfe)](_0x5b260);})[_0x396492(0x154)](this[_0x396492(0x10c)](_0x396492(0x6dd)),..._0x5b24f4,async(_0x1f3133,_0x2e6735)=>{const _0x5648fe=_0x396492;let _0x138a3c=await this[_0x5648fe(0x602)]({'request':_0x1f3133,'schema':qa,'ClassRef':ke,'execute':(_0x51deec,_0x766356)=>H[_0x5648fe(0x6dd)](_0x51deec,_0x766356)});return _0x2e6735[_0x5648fe(0x233)](0xc9)[_0x5648fe(0xfe)](_0x138a3c);})['post'](this[_0x396492(0x10c)]('sendButtons'),..._0x5b24f4,async(_0xfec7d1,_0x3d895a)=>{const _0x2ac0c7=_0x396492;let _0x3615a2=await this[_0x2ac0c7(0x602)]({'request':_0xfec7d1,'schema':Ba,'ClassRef':Rt,'execute':(_0xc89f42,_0x5bc160)=>H['sendButtons'](_0xc89f42,_0x5bc160)});return _0x3d895a[_0x2ac0c7(0x233)](0xc9)[_0x2ac0c7(0xfe)](_0x3615a2);})[_0x396492(0x154)](this[_0x396492(0x10c)](_0x396492(0x67f)),..._0x5b24f4,async(_0x55a0cc,_0x4fe940)=>{const _0x530f96=_0x396492;let _0x10b64e=await this[_0x530f96(0x602)]({'request':_0x55a0cc,'schema':Wa,'ClassRef':At,'execute':(_0x3c1644,_0x14c8c4)=>H[_0x530f96(0x67f)](_0x3c1644,_0x14c8c4)});return _0x4fe940['status'](0xc9)[_0x530f96(0xfe)](_0x10b64e);})[_0x396492(0x154)](this[_0x396492(0x10c)](_0x396492(0x692)),..._0x5b24f4,async(_0x56173d,_0x240614)=>{const _0x3a2305=_0x396492;let _0xf6c9d9=await this[_0x3a2305(0x602)]({'request':_0x56173d,'schema':za,'ClassRef':It,'execute':(_0x412f5a,_0x5bca06)=>H[_0x3a2305(0x692)](_0x412f5a,_0x5bca06)});return _0x240614[_0x3a2305(0x233)](0xc9)[_0x3a2305(0xfe)](_0xf6c9d9);})[_0x396492(0x154)](this[_0x396492(0x10c)](_0x396492(0x3ad)),..._0x5b24f4,async(_0x1ec8bf,_0x2f8d0f)=>{const _0x46f536=_0x396492;let _0x13e393=await this[_0x46f536(0x602)]({'request':_0x1ec8bf,'schema':Ha,'ClassRef':Tt,'execute':(_0x26a295,_0x2329ee)=>H[_0x46f536(0x3ad)](_0x26a295,_0x2329ee)});return _0x2f8d0f[_0x46f536(0x233)](0xc9)[_0x46f536(0xfe)](_0x13e393);})[_0x396492(0x154)](this['routerPath'](_0x396492(0x22c)),..._0x5b24f4,async(_0x4d2f67,_0x4d7046)=>{const _0x1db35d=_0x396492;let _0x3a6086=await this[_0x1db35d(0x602)]({'request':_0x4d2f67,'schema':Ka,'ClassRef':Ot,'execute':(_0x139ae3,_0x1a6314)=>H[_0x1db35d(0x22c)](_0x139ae3,_0x1a6314)});return _0x4d7046[_0x1db35d(0x233)](0xc9)['json'](_0x3a6086);})[_0x396492(0x154)](this[_0x396492(0x10c)](_0x396492(0x349)),..._0x5b24f4,async(_0x27ddd6,_0x1058ae)=>{const _0x2d4f0b=_0x396492;let _0x36f3d7=await this['dataValidate']({'request':_0x27ddd6,'schema':Va,'ClassRef':vt,'execute':(_0x16ffc0,_0x250432)=>H[_0x2d4f0b(0x349)](_0x16ffc0,_0x250432)});return _0x1058ae[_0x2d4f0b(0x233)](0xc9)['json'](_0x36f3d7);})['post'](this['routerPath'](_0x396492(0x547)),..._0x5b24f4,async(_0x504681,_0x34705d)=>{const _0x2f9f9f=_0x396492;let _0x5e2376=await this[_0x2f9f9f(0x602)]({'request':_0x504681,'schema':ja,'ClassRef':Et,'execute':(_0x3db949,_0x12f560)=>H[_0x2f9f9f(0x547)](_0x3db949,_0x12f560)});return _0x34705d[_0x2f9f9f(0x233)](0xc9)['json'](_0x5e2376);})['post'](this['routerPath'](_0x396492(0x4ec)),..._0x5b24f4,async(_0xea193c,_0x37d7ec)=>{const _0x2b464b=_0x396492;let _0x57bf24=await this[_0x2b464b(0x602)]({'request':_0xea193c,'schema':Ua,'ClassRef':$t,'execute':(_0x4b74f6,_0x1d50f8)=>H[_0x2b464b(0x4ec)](_0x4b74f6,_0x1d50f8)});return _0x37d7ec[_0x2b464b(0x233)](0xc9)[_0x2b464b(0xfe)](_0x57bf24);});}},Si=require(a0_0x3b8fac(0x99)),xt=class{},Dt=class extends G{constructor(..._0x295107){const _0x47eb9b=a0_0x3b8fac;super(),this[_0x47eb9b(0xdc)]=(0x0,Si[_0x47eb9b(0x78d)])(),this[_0x47eb9b(0xdc)][_0x47eb9b(0x154)](this[_0x47eb9b(0x10c)](_0x47eb9b(0x720)),..._0x295107,async(_0x516d29,_0x44da70)=>{const _0x42f2d4=_0x47eb9b;let _0x278b66=await this['dataValidate']({'request':_0x516d29,'schema':mi,'ClassRef':xt,'execute':(_0x3c4a3b,_0x33ae70)=>Is[_0x42f2d4(0x70c)](_0x3c4a3b,_0x33ae70)});_0x44da70[_0x42f2d4(0x233)](0xc9)[_0x42f2d4(0xfe)](_0x278b66);})[_0x47eb9b(0x184)](this[_0x47eb9b(0x10c)](_0x47eb9b(0x7a1)),..._0x295107,async(_0x39833a,_0x2610c9)=>{const _0x4b0155=_0x47eb9b;let _0x258c85=await this[_0x4b0155(0x602)]({'request':_0x39833a,'schema':v,'ClassRef':M,'execute':_0x40634b=>Is[_0x4b0155(0x6d7)](_0x40634b)});_0x2610c9[_0x4b0155(0x233)](0xc8)[_0x4b0155(0xfe)](_0x258c85);});}},Mi=require('express'),y=new $(a0_0x3b8fac(0x71b)),Pt=class extends G{constructor(..._0x67add2){const _0xecfa6a=a0_0x3b8fac;super(),this[_0xecfa6a(0xdc)]=(0x0,Mi[_0xecfa6a(0x78d)])(),this[_0xecfa6a(0xdc)]['post'](this[_0xecfa6a(0x10c)]('scheduleMessage'),..._0x67add2,async(_0x11cd0b,_0x39dd35)=>{const _0x5d1b5f=_0xecfa6a;let _0x106c0d=_0x11cd0b['body'];y[_0x5d1b5f(0x592)](_0x5d1b5f(0x74b)),y[_0x5d1b5f(0x592)]('request\x20body:\x20'),y[_0x5d1b5f(0x592)](_0x11cd0b[_0x5d1b5f(0x6fc)]);let _0x7a789e=await this['dataValidate']({'request':_0x11cd0b,'schema':v,'ClassRef':M,'execute':_0x1fc127=>T[_0x5d1b5f(0x473)](_0x1fc127,_0x106c0d)});_0x39dd35[_0x5d1b5f(0x233)](0xc8)[_0x5d1b5f(0xfe)](_0x7a789e);})[_0xecfa6a(0x184)](this[_0xecfa6a(0x10c)](_0xecfa6a(0x674)),..._0x67add2,async(_0x153d7b,_0x432e91)=>{const _0x2ff9da=_0xecfa6a;let _0x396d70=await this['dataValidate']({'request':_0x153d7b,'schema':v,'ClassRef':M,'execute':_0x37cbc4=>T[_0x2ff9da(0x335)](_0x37cbc4)});_0x432e91[_0x2ff9da(0x233)](0xc8)[_0x2ff9da(0xfe)](_0x396d70);})[_0xecfa6a(0x23f)](this['routerPath']('deleteDoneMessages'),..._0x67add2,async(_0x22f11,_0x429b5c)=>{const _0x14f4fa=_0xecfa6a;y[_0x14f4fa(0x592)](_0x14f4fa(0x48c));let _0x481884=await this[_0x14f4fa(0x602)]({'request':_0x22f11,'schema':v,'ClassRef':M,'execute':_0x2639e9=>T[_0x14f4fa(0x27d)](_0x2639e9)});_0x429b5c[_0x14f4fa(0x233)](0xc8)[_0x14f4fa(0xfe)](_0x481884);})[_0xecfa6a(0x154)](this[_0xecfa6a(0x10c)](_0xecfa6a(0x73a)),..._0x67add2,async(_0x11f1ab,_0x3689a3)=>{const _0x4e291d=_0xecfa6a;let _0x23863b=_0x11f1ab[_0x4e291d(0x6fc)];y[_0x4e291d(0x592)](_0x4e291d(0x2e6)),y[_0x4e291d(0x592)]('request\x20body:\x20'),y['verbose'](_0x11f1ab[_0x4e291d(0x6fc)]);let _0x177436=await this[_0x4e291d(0x602)]({'request':_0x11f1ab,'schema':v,'ClassRef':M,'execute':_0x1d087f=>T[_0x4e291d(0x73a)](_0x1d087f,_0x23863b)});_0x3689a3[_0x4e291d(0x233)](0xc8)['json'](_0x177436);})[_0xecfa6a(0x184)](this[_0xecfa6a(0x10c)](_0xecfa6a(0x407)),..._0x67add2,async(_0x3f1c7b,_0x3b2f61)=>{const _0x11a819=_0xecfa6a;y['verbose'](_0x11a819(0x57f));let _0x461f44=await this[_0x11a819(0x602)]({'request':_0x3f1c7b,'schema':v,'ClassRef':M,'execute':_0x508c89=>T[_0x11a819(0x407)](_0x508c89)});_0x3b2f61['status'](0xc8)[_0x11a819(0xfe)](_0x461f44);})[_0xecfa6a(0x184)](this[_0xecfa6a(0x10c)](_0xecfa6a(0x114)),..._0x67add2,async(_0x327983,_0x147826)=>{const _0x54d65a=_0xecfa6a;y['verbose'](_0x54d65a(0x3ab));let _0x339f84=await this['dataValidate']({'request':_0x327983,'schema':v,'ClassRef':M,'execute':_0x4437b4=>T['getAutomateSystem'](_0x4437b4)});_0x147826[_0x54d65a(0x233)](0xc8)[_0x54d65a(0xfe)](_0x339f84);})[_0xecfa6a(0x154)](this['routerPath'](_0xecfa6a(0x7bc)),..._0x67add2,async(_0x342283,_0x4190bf)=>{const _0x123153=_0xecfa6a;let _0x28024c=_0x342283[_0x123153(0x6fc)];y['verbose'](_0x123153(0x6c1)),y[_0x123153(0x592)](_0x123153(0x75b)),y['verbose'](_0x342283[_0x123153(0x6fc)]);let _0x15ccd2=await this[_0x123153(0x602)]({'request':_0x342283,'schema':v,'ClassRef':M,'execute':_0x2b700d=>T[_0x123153(0x7bc)](_0x2b700d,_0x28024c)});_0x4190bf[_0x123153(0x233)](0xc8)[_0x123153(0xfe)](_0x15ccd2);})['post'](this[_0xecfa6a(0x10c)]('updateCustomFields'),..._0x67add2,async(_0x289dca,_0x133337)=>{const _0x3603e7=_0xecfa6a;let _0x1f1c71=_0x289dca[_0x3603e7(0x6fc)];y['verbose'](_0x3603e7(0xef)),y['verbose'](_0x3603e7(0x75b)),y[_0x3603e7(0x592)](_0x289dca[_0x3603e7(0x6fc)]);let _0x4a47a9=await this[_0x3603e7(0x602)]({'request':_0x289dca,'schema':v,'ClassRef':M,'execute':_0x557c71=>T[_0x3603e7(0x7a5)](_0x557c71,_0x1f1c71)});_0x133337[_0x3603e7(0x233)](0xc8)[_0x3603e7(0xfe)](_0x4a47a9);})[_0xecfa6a(0x154)](this[_0xecfa6a(0x10c)](_0xecfa6a(0x5f9)),..._0x67add2,async(_0x27c29d,_0x7fb436)=>{const _0x373812=_0xecfa6a;let _0x12b006=_0x27c29d[_0x373812(0x6fc)];y[_0x373812(0x592)](_0x373812(0x379)),y[_0x373812(0x592)](_0x373812(0x75b)),y[_0x373812(0x592)](_0x27c29d[_0x373812(0x6fc)]);let _0x560a95=await this['dataValidate']({'request':_0x27c29d,'schema':v,'ClassRef':M,'execute':_0x18417f=>T['updateAutoCompleteMessages'](_0x18417f,_0x12b006)});_0x7fb436['status'](0xc8)[_0x373812(0xfe)](_0x560a95);})[_0xecfa6a(0x154)](this[_0xecfa6a(0x10c)](_0xecfa6a(0xb5)),..._0x67add2,async(_0x394728,_0x194d6a)=>{const _0x3f5cb5=_0xecfa6a;let _0x4c0f5f=_0x394728['body'];y[_0x3f5cb5(0x592)]('request\x20received\x20in\x20updateFlowConfig'),y['verbose'](_0x3f5cb5(0x75b)),y[_0x3f5cb5(0x592)](_0x394728[_0x3f5cb5(0x6fc)]);let _0x46ea37=await this[_0x3f5cb5(0x602)]({'request':_0x394728,'schema':v,'ClassRef':M,'execute':_0x337cf0=>T['updateFlowConfig'](_0x337cf0,_0x4c0f5f)});_0x194d6a[_0x3f5cb5(0x233)](0xc8)[_0x3f5cb5(0xfe)](_0x46ea37);})['post'](this['routerPath'](_0xecfa6a(0x796)),..._0x67add2,async(_0x4a6945,_0x4db656)=>{const _0x4e4f6a=_0xecfa6a;let _0x270434=_0x4a6945[_0x4e4f6a(0x6fc)];y[_0x4e4f6a(0x592)](_0x4e4f6a(0x3de)),y[_0x4e4f6a(0x592)]('request\x20body:\x20'),y['verbose'](_0x4a6945[_0x4e4f6a(0x6fc)]);let _0x458f41=await this['dataValidate']({'request':_0x4a6945,'schema':v,'ClassRef':M,'execute':_0x4da4a5=>T[_0x4e4f6a(0x796)](_0x4da4a5,_0x270434)});_0x4db656[_0x4e4f6a(0x233)](0xc8)[_0x4e4f6a(0xfe)](_0x458f41);})['post'](this[_0xecfa6a(0x10c)](_0xecfa6a(0x1a5)),..._0x67add2,async(_0x17356f,_0x5ee26b)=>{const _0x34250d=_0xecfa6a;let _0x59192a=_0x17356f[_0x34250d(0x6fc)];y[_0x34250d(0x592)](_0x34250d(0x76d)),y['verbose'](_0x34250d(0x75b)),y[_0x34250d(0x592)](_0x17356f['body']);let _0x193971=await this['dataValidate']({'request':_0x17356f,'schema':v,'ClassRef':M,'execute':_0x4ce468=>T[_0x34250d(0x1a5)](_0x4ce468,_0x59192a)});_0x5ee26b[_0x34250d(0x233)](0xc8)[_0x34250d(0xfe)](_0x193971);})[_0xecfa6a(0x154)](this[_0xecfa6a(0x10c)](_0xecfa6a(0x6cc)),..._0x67add2,async(_0x1d4bb9,_0x5c32b6)=>{const _0xd6ca76=_0xecfa6a;let _0x42a13f=_0x1d4bb9[_0xd6ca76(0x6fc)];y[_0xd6ca76(0x592)](_0xd6ca76(0x5f7)),y[_0xd6ca76(0x592)](_0xd6ca76(0x75b)),y[_0xd6ca76(0x592)](_0x1d4bb9[_0xd6ca76(0x6fc)]);let _0x578d05=await this['dataValidate']({'request':_0x1d4bb9,'schema':v,'ClassRef':M,'execute':_0x3d57f8=>T[_0xd6ca76(0x6cc)](_0x3d57f8,_0x42a13f)});_0x5c32b6['status'](0xc8)[_0xd6ca76(0xfe)](_0x578d05);})['delete'](this[_0xecfa6a(0x10c)](_0xecfa6a(0x144)),..._0x67add2,async(_0x2916ef,_0x43a073)=>{const _0x2ef291=_0xecfa6a;let _0x2b136a=_0x2916ef[_0x2ef291(0x6fc)];y[_0x2ef291(0x592)]('request\x20received\x20in\x20deleteConversation'),y['verbose'](_0x2ef291(0x75b)),y[_0x2ef291(0x592)](_0x2916ef[_0x2ef291(0x6fc)]);let _0x444f8c=await this[_0x2ef291(0x602)]({'request':_0x2916ef,'schema':v,'ClassRef':M,'execute':_0x414d34=>T[_0x2ef291(0x144)](_0x414d34,_0x2b136a)});_0x43a073[_0x2ef291(0x233)](0xc8)['json'](_0x444f8c);})[_0xecfa6a(0x154)](this['routerPath'](_0xecfa6a(0x54f)),..._0x67add2,async(_0x3fd292,_0x478c7c)=>{const _0x4ea0c2=_0xecfa6a;let _0x9f31af=_0x3fd292[_0x4ea0c2(0x6fc)],_0x58c0ea=_0x3fd292[_0x4ea0c2(0x7a3)]['apikey'];y[_0x4ea0c2(0x592)](_0x4ea0c2(0x510)),y[_0x4ea0c2(0x592)](_0x4ea0c2(0x75b)),y['verbose'](_0x3fd292[_0x4ea0c2(0x6fc)]);let _0x1e27cb=await this[_0x4ea0c2(0x602)]({'request':_0x3fd292,'schema':v,'ClassRef':M,'execute':_0x31d5ce=>T['createFlow'](_0x31d5ce,_0x9f31af,_0x58c0ea)});_0x478c7c[_0x4ea0c2(0x233)](0xc8)['json'](_0x1e27cb);})['post'](this[_0xecfa6a(0x10c)](_0xecfa6a(0x3b4)),..._0x67add2,async(_0x244516,_0x328b1e)=>{const _0x11e8ae=_0xecfa6a;let _0x49aa96=_0x244516[_0x11e8ae(0x6fc)],_0xdf0cb5=_0x244516[_0x11e8ae(0x7a3)][_0x11e8ae(0x129)];y['verbose'](_0x11e8ae(0x428)),y[_0x11e8ae(0x592)](_0x11e8ae(0x75b)),y[_0x11e8ae(0x592)](_0x244516[_0x11e8ae(0x6fc)]),delete _0x49aa96[_0x11e8ae(0x389)],delete _0x49aa96[_0x11e8ae(0x2dc)],delete _0x49aa96['groups'],delete _0x49aa96[_0x11e8ae(0x5e6)];let _0xc469d4=await this[_0x11e8ae(0x602)]({'request':_0x244516,'schema':v,'ClassRef':M,'execute':_0x40ddf8=>T[_0x11e8ae(0x7b4)](_0x40ddf8,_0x49aa96,_0xdf0cb5)});_0x328b1e[_0x11e8ae(0x233)](0xc8)[_0x11e8ae(0xfe)](_0xc469d4);})['post'](this['routerPath'](_0xecfa6a(0x716)),..._0x67add2,async(_0x2764a3,_0x348047)=>{const _0x2e8309=_0xecfa6a;let _0x4ca15b=_0x2764a3[_0x2e8309(0x6fc)];y[_0x2e8309(0x592)](_0x2e8309(0x428)),y[_0x2e8309(0x592)](_0x2e8309(0x75b)),y[_0x2e8309(0x592)](_0x2764a3['body']);let _0x2f22c6=await this[_0x2e8309(0x602)]({'request':_0x2764a3,'schema':v,'ClassRef':M,'execute':_0x1027fc=>T[_0x2e8309(0x5b0)](_0x1027fc,_0x4ca15b)});_0x348047[_0x2e8309(0x233)](0xc8)['json'](_0x2f22c6);})[_0xecfa6a(0x154)](this['routerPath'](_0xecfa6a(0x20f)),..._0x67add2,async(_0x48ed21,_0x32eacb)=>{const _0x52a543=_0xecfa6a;let _0x39595c=_0x48ed21[_0x52a543(0x6fc)];y[_0x52a543(0x592)](_0x52a543(0x428)),y['verbose'](_0x52a543(0x75b)),y['verbose'](_0x48ed21[_0x52a543(0x6fc)]);let _0x349938=await this[_0x52a543(0x602)]({'request':_0x48ed21,'schema':v,'ClassRef':M,'execute':_0x442837=>T[_0x52a543(0xae)](_0x442837,_0x39595c)});_0x32eacb[_0x52a543(0x233)](0xc8)[_0x52a543(0xfe)](_0x349938);})[_0xecfa6a(0x154)](this[_0xecfa6a(0x10c)](_0xecfa6a(0x83)),..._0x67add2,async(_0x2b15f5,_0xf7c442)=>{const _0x2d3b4c=_0xecfa6a;let _0x4fd495=_0x2b15f5[_0x2d3b4c(0x6fc)];y[_0x2d3b4c(0x592)]('request\x20received\x20in\x20editFlow'),y[_0x2d3b4c(0x592)]('request\x20body:\x20'),y[_0x2d3b4c(0x592)](_0x2b15f5['body']);let _0x297720=await this['dataValidate']({'request':_0x2b15f5,'schema':v,'ClassRef':M,'execute':_0x54fe97=>T[_0x2d3b4c(0x187)](_0x54fe97,_0x4fd495)});_0xf7c442[_0x2d3b4c(0x233)](0xc8)[_0x2d3b4c(0xfe)](_0x297720);})[_0xecfa6a(0x154)](this['routerPath'](_0xecfa6a(0xd7)),..._0x67add2,async(_0x20ae59,_0x518b78)=>{const _0x55db65=_0xecfa6a;let _0x29f756=_0x20ae59['body'];y['verbose'](_0x55db65(0x27a)),y['verbose'](_0x55db65(0x75b)),y['verbose'](_0x20ae59[_0x55db65(0x6fc)]);let _0x5ec897=await this[_0x55db65(0x602)]({'request':_0x20ae59,'schema':v,'ClassRef':M,'execute':_0x1b5daa=>T[_0x55db65(0x190)](_0x1b5daa,_0x29f756)});_0x518b78[_0x55db65(0x233)](0xc8)[_0x55db65(0xfe)](_0x5ec897);})[_0xecfa6a(0x154)](this['routerPath']('editflowcondition'),..._0x67add2,async(_0x17906c,_0x1aa209)=>{const _0x14adc4=_0xecfa6a;let _0x30e4ff=_0x17906c[_0x14adc4(0x6fc)];y['verbose']('request\x20received\x20in\x20editFlowcondition'),y[_0x14adc4(0x592)](_0x14adc4(0x75b)),y[_0x14adc4(0x592)](_0x17906c['body']);let _0x11034e=await this[_0x14adc4(0x602)]({'request':_0x17906c,'schema':v,'ClassRef':M,'execute':_0x4d2c04=>T[_0x14adc4(0x13a)](_0x4d2c04,_0x30e4ff)});_0x1aa209[_0x14adc4(0x233)](0xc8)['json'](_0x11034e);})[_0xecfa6a(0x154)](this[_0xecfa6a(0x10c)](_0xecfa6a(0x2f6)),..._0x67add2,async(_0x2590a9,_0x192d1c)=>{const _0x702ed6=_0xecfa6a;let _0x2f9ab0=_0x2590a9[_0x702ed6(0x6fc)];y[_0x702ed6(0x592)](_0x702ed6(0x137)),y['verbose']('request\x20body:\x20'),y[_0x702ed6(0x592)](_0x2590a9['body']);let _0x1ad9b8=await this['dataValidate']({'request':_0x2590a9,'schema':v,'ClassRef':M,'execute':_0x3bfc34=>T[_0x702ed6(0xab)](_0x3bfc34,_0x2f9ab0)});_0x192d1c[_0x702ed6(0x233)](0xc8)['json'](_0x1ad9b8);})['post'](this['routerPath']('getflow'),..._0x67add2,async(_0x718a5f,_0x5280a7)=>{const _0x531c29=_0xecfa6a;let _0x22e404=_0x718a5f[_0x531c29(0x6fc)];y[_0x531c29(0x592)](_0x531c29(0x38c)),y[_0x531c29(0x592)](_0x531c29(0x75b)),y[_0x531c29(0x592)](_0x718a5f['body']);let _0x2ac9da=await this['dataValidate']({'request':_0x718a5f,'schema':v,'ClassRef':M,'execute':_0x38adb9=>T[_0x531c29(0x1a1)](_0x38adb9,_0x22e404)});_0x5280a7[_0x531c29(0x233)](0xc8)['json'](_0x2ac9da);})[_0xecfa6a(0x23f)](this['routerPath']('deleteflow'),..._0x67add2,async(_0xf6e923,_0x38ea60)=>{const _0x45332e=_0xecfa6a;let _0x5206fe=_0xf6e923[_0x45332e(0x6fc)];y[_0x45332e(0x592)](_0x45332e(0x1f3)),y[_0x45332e(0x592)](_0x45332e(0x75b)),y[_0x45332e(0x592)](_0xf6e923[_0x45332e(0x6fc)]);let _0x38af98=await this['dataValidate']({'request':_0xf6e923,'schema':v,'ClassRef':M,'execute':_0x333fb7=>T[_0x45332e(0x227)](_0x333fb7,_0x5206fe)});_0x38ea60[_0x45332e(0x233)](0xc8)[_0x45332e(0xfe)](_0x38af98);})[_0xecfa6a(0x184)](this['routerPath']('allflows'),..._0x67add2,async(_0x4f954a,_0x4b976d)=>{const _0x42741f=_0xecfa6a;y[_0x42741f(0x592)]('request\x20received\x20in\x20allFlows');let _0x1c35bf=await this[_0x42741f(0x602)]({'request':_0x4f954a,'schema':v,'ClassRef':M,'execute':_0x3b93f6=>T[_0x42741f(0x147)](_0x3b93f6)});_0x4b976d[_0x42741f(0x233)](0xc8)[_0x42741f(0xfe)](_0x1c35bf);});}},Ni=I(require(a0_0x3b8fac(0x655))),oe={};function Ci(_0x410198,_0x572c1b,_0x519c94,_0x3ba876){oe[_0x410198]||(oe[_0x410198]={}),oe[_0x410198][_0x572c1b]={'id':_0x572c1b,'response':_0x519c94,'events':_0x3ba876};}function Ei(_0x4a2fb4,_0x4e4c18){!oe[_0x4a2fb4]||!oe[_0x4a2fb4][_0x4e4c18]||delete oe[_0x4a2fb4][_0x4e4c18];}function q(_0x5861ea,_0x38263d,_0x341e70){const _0x2ca6d9=a0_0x3b8fac;if(!oe[_0x5861ea])return;let _0x340f3d=_0x2ca6d9(0x413)+JSON[_0x2ca6d9(0x5e5)](_0x341e70)+'\x0a\x0a';Object[_0x2ca6d9(0x569)](oe[_0x5861ea])[_0x2ca6d9(0x73e)](_0x2530bf=>{const _0x5f4840=_0x2ca6d9;_0x2530bf[_0x5f4840(0x230)][_0x5f4840(0x43a)](_0x38263d)&&_0x2530bf[_0x5f4840(0x238)][_0x5f4840(0x4b8)](_0x340f3d);});}function vi(){const _0xd448c5=a0_0x3b8fac;let _0x1a4ac2={};for(let _0x5520fd in oe)_0x1a4ac2[_0x5520fd]=Object['values'](oe[_0x5520fd])['map'](_0xc052a6=>({'id':_0xc052a6['id'],'events':_0xc052a6[_0xd448c5(0x230)]}));return _0x1a4ac2;}var $i=require(a0_0x3b8fac(0x12a)),Os=require(a0_0x3b8fac(0x40f)),Ts=class{},_o=new Os['Schema']({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),xo=new Os[(a0_0x3b8fac(0x4d1))]({'_id':{'type':String,'default':'config'},'WebhookGlobal':{'type':_o},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ne=R?.[a0_0x3b8fac(0xdd)](Ts[a0_0x3b8fac(0x26b)],xo,a0_0x3b8fac(0x6b6)),Do=Ni['default']['join'](__dirname,a0_0x3b8fac(0x5b5)),Le=(0x0,kt['Router'])(),Po=b[a0_0x3b8fac(0x184)](a0_0x3b8fac(0x331))[a0_0x3b8fac(0xa7)],le=[Oa,_a,Pa[Po]];Le[a0_0x3b8fac(0x571)](a0_0x3b8fac(0x62f),kt[a0_0x3b8fac(0x151)][a0_0x3b8fac(0x11d)](Do))[a0_0x3b8fac(0x184)](a0_0x3b8fac(0x30b),async(_0x5cf42c,_0x381569)=>{const _0x1310c7=a0_0x3b8fac;console[_0x1310c7(0x514)](_0x1310c7(0x374));let _0x522181=_0x5cf42c[_0x1310c7(0x40e)][_0x1310c7(0x448)],_0x1f9ee7=(_0x5cf42c[_0x1310c7(0x644)][_0x1310c7(0x230)]||'')[_0x1310c7(0x45d)](','),_0x48bbe7=(0x0,$i['v4'])();console['log'](_0x1310c7(0x434),_0x522181),console[_0x1310c7(0x514)](_0x1310c7(0x3e9),_0x1f9ee7);let _0x4c0bb0=b[_0x1310c7(0x184)](_0x1310c7(0x331))['API_KEY'],_0x540402=_0x5cf42c[_0x1310c7(0x644)][_0x1310c7(0x129)];if(console[_0x1310c7(0x514)](_0x1310c7(0x23e),_0x540402),_0x4c0bb0[_0x1310c7(0xd6)]!==_0x540402){console['log'](_0x1310c7(0x2f5));try{let _0x2a2c4b=await we['auth'][_0x1310c7(0x7a1)](_0x522181);if(console[_0x1310c7(0x514)](_0x1310c7(0x192),_0x2a2c4b),!_0x2a2c4b||_0x2a2c4b[_0x1310c7(0x129)]!==_0x540402)return console[_0x1310c7(0x514)](_0x1310c7(0x7b3)),_0x381569[_0x1310c7(0x233)](0x191)['send'](_0x1310c7(0x6bd));}catch(_0x438352){return console[_0x1310c7(0x3a7)](_0x1310c7(0x55b),_0x438352),_0x381569[_0x1310c7(0x233)](0x191)['send'](_0x1310c7(0x27c));}}if(!await _e(_0x522181))return _0x381569[_0x1310c7(0x233)](0x194)[_0x1310c7(0x3f4)]('Instncia\x20no\x20encontrada.');_0x381569[_0x1310c7(0x452)](_0x1310c7(0x79f),_0x1310c7(0x256)),_0x381569[_0x1310c7(0x452)]('Cache-Control',_0x1310c7(0x7b2)),_0x381569[_0x1310c7(0x452)](_0x1310c7(0x28e),_0x1310c7(0x6cf)),_0x381569[_0x1310c7(0x1d0)]();let _0x4ce5da='data:\x20'+JSON[_0x1310c7(0x5e5)]({'info':_0x1310c7(0x4cd)})+'\x0a\x0a';_0x381569[_0x1310c7(0x4b8)](_0x4ce5da),Ci(_0x522181,_0x48bbe7,_0x381569,_0x1f9ee7),_0x5cf42c['on'](_0x1310c7(0x6a1),()=>{const _0x3915ea=_0x1310c7;console[_0x3915ea(0x514)](_0x3915ea(0x64d)+_0x522181),Ei(_0x522181,_0x48bbe7);});}),Le[a0_0x3b8fac(0x154)](a0_0x3b8fac(0x74c),async(_0x48af44,_0x3aef90)=>{const _0x199346=a0_0x3b8fac;console['log'](_0x199346(0x54a));let _0xf23a64=_0x48af44[_0x199346(0x40e)][_0x199346(0x448)],_0x506004=_0x48af44[_0x199346(0x40e)][_0x199346(0x682)],_0x454ede=_0x48af44[_0x199346(0x644)][_0x199346(0x6d5)]||'',_0x38a432=_0x48af44['body'];console[_0x199346(0x514)]('Instance\x20Name:',_0xf23a64),console[_0x199346(0x514)](_0x199346(0x2ce),_0x506004),console['log'](_0x199346(0xff),_0x454ede),console[_0x199346(0x514)](_0x199346(0x2a0),_0x38a432);try{if(!await _e(_0xf23a64))return _0x3aef90['status'](0x194)[_0x199346(0x3f4)](_0x199346(0x3e3));let _0x1e71e2=await T['startFlowWebhook'](_0xf23a64,_0x506004,_0x454ede,_0x38a432);_0x3aef90[_0x199346(0x3f4)](_0x1e71e2);}catch(_0x3484d8){console[_0x199346(0x3a7)](_0x3484d8),_0x3aef90[_0x199346(0x233)](0x1f4)[_0x199346(0x3f4)](_0x199346(0x347));}}),Le[a0_0x3b8fac(0x184)]('/clients-info',(_0x3e3caf,_0x7a87d3)=>{let _0x3dcc50=vi();_0x7a87d3['json'](_0x3dcc50);})['get']('/',(_0x2ac432,_0x1aa850)=>{const _0x3e0014=a0_0x3b8fac;let _0x4e11f3=b[_0x3e0014(0x184)](_0x3e0014(0x3ba))[_0x3e0014(0x3b9)];if(_0x4e11f3){let _0x45e832=encodeURIComponent(''+_0x4e11f3);_0x1aa850[_0x3e0014(0x7aa)](_0x3e0014(0x7ca)+_0x45e832);return;}let _0x2b0719=b[_0x3e0014(0x184)]('SSL_CONF'),_0x402b7b=_0x2b0719&&_0x2b0719['FULLCHAIN'][_0x3e0014(0x45d)]('/')[0x4];if(_0x402b7b){let _0x23ba5f=encodeURIComponent(_0x3e0014(0x111)+_0x402b7b);_0x1aa850[_0x3e0014(0x7aa)](_0x3e0014(0x7ca)+_0x23ba5f);}else _0x1aa850['redirect'](_0x3e0014(0x12c));})['put']('/exit',...le,async(_0x5f3038,_0x37c822)=>{const _0x46e3d4=a0_0x3b8fac;try{console[_0x46e3d4(0x514)](_0x46e3d4(0x1af)),_0x37c822['status'](0xc8)[_0x46e3d4(0xfe)]({'message':_0x46e3d4(0x5fb)}),_0x37c822['on'](_0x46e3d4(0x327),()=>process[_0x46e3d4(0x314)](0x0));}catch(_0x1ea3c9){console[_0x46e3d4(0x3a7)]('Erro\x20ao\x20tentar\x20encerrar\x20a\x20API',_0x1ea3c9),_0x37c822[_0x46e3d4(0x233)](0x1f4)[_0x46e3d4(0xfe)]({'message':_0x46e3d4(0x4af)});}})[a0_0x3b8fac(0x3a2)]('/config',...le,async(_0x5e962a,_0x428569)=>{const _0x16a8cb=a0_0x3b8fac;try{let _0x14fa96=_0x5e962a[_0x16a8cb(0x6fc)];await Ne[_0x16a8cb(0x7b6)]({},{'$set':_0x14fa96},{'upsert':!0x0});let _0x5d95f9=await Ne['findOne']();_0x428569[_0x16a8cb(0xfe)](_0x5d95f9);}catch(_0xd79d5f){_0x428569[_0x16a8cb(0x233)](0x190)[_0x16a8cb(0x3f4)](_0xd79d5f['message']);}})[a0_0x3b8fac(0x184)](a0_0x3b8fac(0x339),...le,async(_0x1d5624,_0x4b9c02)=>{const _0xbe1bd=a0_0x3b8fac;try{let _0x3aedcf=await Ne[_0xbe1bd(0x7ac)]();if(!_0x3aedcf)return _0x4b9c02[_0xbe1bd(0xfe)]({});_0x4b9c02[_0xbe1bd(0xfe)](_0x3aedcf);}catch(_0x14179d){_0x4b9c02['status'](0x1f4)[_0xbe1bd(0x3f4)](_0x14179d[_0xbe1bd(0x4ab)]);}})[a0_0x3b8fac(0x571)](a0_0x3b8fac(0x72d),new Mt(b,...le)[a0_0x3b8fac(0xdc)])[a0_0x3b8fac(0x571)](a0_0x3b8fac(0x2d4),new _t(...le)[a0_0x3b8fac(0xdc)])[a0_0x3b8fac(0x571)](a0_0x3b8fac(0x5c8),new dt(...le)[a0_0x3b8fac(0xdc)])[a0_0x3b8fac(0x571)](a0_0x3b8fac(0x52a),new St(...le)[a0_0x3b8fac(0xdc)])[a0_0x3b8fac(0x571)](a0_0x3b8fac(0x61a),new Dt(...le)[a0_0x3b8fac(0xdc)])[a0_0x3b8fac(0x571)](a0_0x3b8fac(0xfd),new Pt(...le)['router']);var m=class{constructor(..._0x254a7a){const _0x1f748c=a0_0x3b8fac;throw{'status':0x190,'error':_0x1f748c(0xd5),'message':_0x254a7a[_0x1f748c(0x3c8)]>0x0?_0x254a7a:void 0x0};}},ce=class{constructor(..._0x4a91e3){const _0x42cef5=a0_0x3b8fac;throw{'status':0x191,'error':_0x42cef5(0x704),'message':_0x4a91e3[_0x42cef5(0x3c8)]>0x0?_0x4a91e3:void 0x0};}},se=class{constructor(..._0x5e8bc6){const _0x295a04=a0_0x3b8fac;throw{'status':0x193,'error':'Forbidden','message':_0x5e8bc6[_0x295a04(0x3c8)]>0x0?_0x5e8bc6:void 0x0};}},J=class{constructor(..._0x2dd870){const _0x499ee5=a0_0x3b8fac;throw{'status':0x194,'error':_0x499ee5(0x6e5),'message':_0x2dd870[_0x499ee5(0x3c8)]>0x0?_0x2dd870:void 0x0};}},x=class{constructor(..._0x57e138){const _0x24a53f=a0_0x3b8fac;throw{'status':0x1f4,'error':'Internal\x20Server\x20Error','message':_0x57e138[_0x24a53f(0x3c8)]>0x0?_0x57e138:void 0x0};}},ye=require(a0_0x3b8fac(0x556));async function _s(_0x56d15a){const _0x590950=a0_0x3b8fac;let _0x3adea2=new $(_s['name']),_0x408a22=R[_0x590950(0x53b)](),_0x13d79c=_0x408a22['db'](b[_0x590950(0x184)]('DATABASE')[_0x590950(0x41a)][_0x590950(0xb6)]+_0x590950(0xeb))['collection'](_0x56d15a),_0x195828=async(_0x45fd4d,_0x384b34)=>{const _0x17724d=_0x590950;try{return await _0x408a22[_0x17724d(0x3f7)](),await _0x13d79c['replaceOne']({'_id':_0x384b34},JSON[_0x17724d(0x224)](JSON[_0x17724d(0x5e5)](_0x45fd4d,ye[_0x17724d(0x461)][_0x17724d(0x4a2)])),{'upsert':!0x0});}catch{}},_0x22ebf1=async _0x5d0da7=>{const _0xcc123b=_0x590950;try{await _0x408a22['connect']();let _0x43b1ba=await _0x13d79c['findOne']({'_id':_0x5d0da7}),_0x16dccc=JSON[_0xcc123b(0x5e5)](_0x43b1ba);return JSON[_0xcc123b(0x224)](_0x16dccc,ye['BufferJSON'][_0xcc123b(0x2bd)]);}catch{}},_0x22b862=async _0x4ced33=>{const _0x323562=_0x590950;try{return await _0x408a22[_0x323562(0x3f7)](),await _0x13d79c[_0x323562(0x793)]({'_id':_0x4ced33});}catch{}},_0x2cc6d4=await _0x22ebf1('creds')||(0x0,ye['initAuthCreds'])();return{'state':{'creds':_0x2cc6d4,'keys':{'get':async(_0x2bad98,_0x3808cb)=>{let _0x28369c={};return await Promise['all'](_0x3808cb['map'](async _0x3ea5ed=>{const _0x4bd372=a0_0x56c3;let _0x4c637f=await _0x22ebf1(_0x2bad98+'-'+_0x3ea5ed);_0x2bad98===_0x4bd372(0x53c)&&_0x4c637f&&(_0x4c637f=ye[_0x4bd372(0x5f3)][_0x4bd372(0x654)][_0x4bd372(0x41b)][_0x4bd372(0x2b1)](_0x4c637f)),_0x28369c[_0x3ea5ed]=_0x4c637f;})),_0x28369c;},'set':async _0x1fa596=>{const _0x53fbb6=_0x590950;let _0x4fb76f=[];for(let _0x312113 in _0x1fa596)for(let _0x471be2 in _0x1fa596[_0x312113]){let _0x464966=_0x1fa596[_0x312113][_0x471be2],_0x25b8fc=_0x312113+'-'+_0x471be2;_0x4fb76f['push'](_0x464966?_0x195828(_0x464966,_0x25b8fc):_0x22b862(_0x25b8fc));}await Promise[_0x53fbb6(0x62c)](_0x4fb76f);}}},'saveCreds':async()=>_0x195828(_0x2cc6d4,'creds')};}var Fs=I(require(a0_0x3b8fac(0xca))),Us=I(require(a0_0x3b8fac(0xea))),Ut=require(a0_0x3b8fac(0x556)),Ri=require(a0_0x3b8fac(0x7f)),Ft=require(a0_0x3b8fac(0x556)),Lt;function ko(_0x3f7a23){const _0x4d44bb=a0_0x3b8fac;return Lt||(Lt=(0x0,Ri[_0x4d44bb(0x73f)])({'url':_0x3f7a23[_0x4d44bb(0x207)]}),Lt[_0x4d44bb(0x3f7)]()),Lt;}var ge=class u{constructor(_0x1e6be6,_0x6d216){const _0x2d98bd=a0_0x3b8fac;this[_0x2d98bd(0x78f)]=_0x1e6be6,this['instanceName']=_0x6d216,this[_0x2d98bd(0x738)]=new $(u['name']),this[_0x2d98bd(0x488)]=ko(_0x1e6be6);}set[a0_0x3b8fac(0x14e)](_0x287e36){const _0x2a5726=a0_0x3b8fac;this[_0x2a5726(0x2af)]=_0x287e36;}async[a0_0x3b8fac(0x65f)](){const _0x2c1a4d=a0_0x3b8fac;try{return await this[_0x2c1a4d(0x488)][_0x2c1a4d(0x7d5)]([_0x2c1a4d(0x63b),this[_0x2c1a4d(0x78f)]['PREFIX_KEY']+':*']);}catch(_0x42aa95){this[_0x2c1a4d(0x738)][_0x2c1a4d(0x3a7)](_0x42aa95);}}async[a0_0x3b8fac(0x3a3)](_0xf8562f,_0x22cf5e){const _0xb1743a=a0_0x3b8fac;try{let _0xbf1eda=JSON['stringify'](_0x22cf5e,Ft['BufferJSON'][_0xb1743a(0x4a2)]);return await this[_0xb1743a(0x488)]['hSet'](this['redisEnv']['PREFIX_KEY']+':'+this[_0xb1743a(0x2af)],_0xf8562f,_0xbf1eda);}catch(_0x289e76){this['logger'][_0xb1743a(0x3a7)](_0x289e76);}}async[a0_0x3b8fac(0x1c7)](){const _0x457666=a0_0x3b8fac;try{let _0x619ac3=await this[_0x457666(0x488)]['hGetAll'](this[_0x457666(0x78f)][_0x457666(0x657)]+':'+this['instanceName']);if(_0x619ac3){for(let _0x2a9ebf in _0x619ac3)Object['prototype'][_0x457666(0x11b)][_0x457666(0x117)](_0x619ac3,_0x2a9ebf)&&(_0x619ac3[_0x2a9ebf]=JSON[_0x457666(0x224)](_0x619ac3[_0x2a9ebf],Ft['BufferJSON'][_0x457666(0x2bd)]));return _0x619ac3;}}catch(_0x5a8f97){this[_0x457666(0x738)][_0x457666(0x3a7)](_0x5a8f97);}}async[a0_0x3b8fac(0xaf)](_0x3d083e){const _0x1e9034=a0_0x3b8fac;try{let _0x782f6a=await this['client'][_0x1e9034(0x337)](this['redisEnv']['PREFIX_KEY']+':'+this[_0x1e9034(0x2af)],_0x3d083e);if(_0x782f6a)return JSON[_0x1e9034(0x224)](_0x782f6a,Ft['BufferJSON'][_0x1e9034(0x2bd)]);}catch(_0x12643d){this['logger'][_0x1e9034(0x3a7)](_0x12643d);}}async[a0_0x3b8fac(0x315)](_0x2fb9da){const _0xaa8d78=a0_0x3b8fac;try{return await this[_0xaa8d78(0x488)]['hDel'](this[_0xaa8d78(0x78f)][_0xaa8d78(0x657)]+':'+this['instanceName'],_0x2fb9da);}catch(_0x3a6add){this[_0xaa8d78(0x738)]['error'](_0x3a6add);}}async[a0_0x3b8fac(0x591)](_0x1322e2){const _0x177e7c=a0_0x3b8fac;try{return await this[_0x177e7c(0x488)]['del'](_0x1322e2||this[_0x177e7c(0x78f)][_0x177e7c(0x657)]+':'+this['instanceName']);}catch(_0x429880){this[_0x177e7c(0x738)][_0x177e7c(0x3a7)](_0x429880);}}};async function xs(_0x4e1db2,_0x429e93){const _0x468384=a0_0x3b8fac;let _0x1b15eb=new $(xs[_0x468384(0x26b)]),_0x4ae9ba=new ge(_0x4e1db2,_0x429e93),_0x1106fc=async(_0x3e8a41,_0x44e0ba)=>{const _0x25ac93=_0x468384;try{return await _0x4ae9ba['writeData'](_0x44e0ba,_0x3e8a41);}catch(_0x4714fa){return _0x1b15eb[_0x25ac93(0x3a7)]({'localError':_0x25ac93(0x3a3),'error':_0x4714fa});}},_0x339d35=async _0x1542b0=>{const _0x124925=_0x468384;try{return await _0x4ae9ba['readData'](_0x1542b0);}catch(_0x5569dd){_0x1b15eb[_0x124925(0x3a7)]({'readData':_0x124925(0x3a3),'error':_0x5569dd});return;}},_0x13b765=async _0x3a742e=>{const _0x334ada=_0x468384;try{return await _0x4ae9ba[_0x334ada(0x315)](_0x3a742e);}catch(_0xf2ec60){_0x1b15eb['error']({'readData':_0x334ada(0x315),'error':_0xf2ec60});}},_0x104292=await _0x339d35(_0x468384(0x16a))||(0x0,Ut['initAuthCreds'])();return{'state':{'creds':_0x104292,'keys':{'get':async(_0x5749a4,_0x4aa9f8)=>{const _0x416a85=_0x468384;let _0x4aab7e={};return await Promise[_0x416a85(0x62c)](_0x4aa9f8[_0x416a85(0x23a)](async _0x1da762=>{const _0x3fd2d4=_0x416a85;let _0x2a6d22=await _0x339d35(_0x5749a4+'-'+_0x1da762);_0x5749a4===_0x3fd2d4(0x53c)&&_0x2a6d22&&(_0x2a6d22=Ut['proto']['Message'][_0x3fd2d4(0x41b)][_0x3fd2d4(0x2b1)](_0x2a6d22)),_0x4aab7e[_0x1da762]=_0x2a6d22;})),_0x4aab7e;},'set':async _0x590d65=>{const _0x16dd81=_0x468384;let _0x405713=[];for(let _0x17ac01 in _0x590d65)for(let _0x1f4e7e in _0x590d65[_0x17ac01]){let _0x3f0e56=_0x590d65[_0x17ac01][_0x1f4e7e],_0x169db9=_0x17ac01+'-'+_0x1f4e7e;_0x405713[_0x16dd81(0x42a)](_0x3f0e56?await _0x1106fc(_0x3f0e56,_0x169db9):await _0x13b765(_0x169db9));}await Promise[_0x16dd81(0x62c)](_0x405713);}}},'saveCreds':async()=>await _0x1106fc(_0x104292,_0x468384(0x16a))};}var F=I(require('fs')),X=require(a0_0x3b8fac(0x12a)),Vt=I(require('sharp')),Gt=require(a0_0x3b8fac(0x18f)),Ai=require('child_process'),Ii=require(a0_0x3b8fac(0x5be)),Ti=I(require(a0_0x3b8fac(0x667))),$e=class extends _{constructor(_0x501200,_0xb303fc,_0x5ac9ee){const _0x17a24d=a0_0x3b8fac;super(_0xb303fc),this[_0x17a24d(0x366)]=_0x501200,this[_0x17a24d(0x2e2)]=_0xb303fc,this['dbConnection']=_0x5ac9ee;}async[a0_0x3b8fac(0x39f)](_0x4e806e,_0x47e053){const _0x28f156=a0_0x3b8fac;try{if(this[_0x28f156(0x2fd)]['ENABLED']){console[_0x28f156(0x514)](_0x28f156(0xd1)+_0x47e053+_0x28f156(0x624),_0x4e806e);let _0x4f0ec1=await this['cacheInstanceModel']['findOneAndUpdate']({'_id':_0x47e053},{'$set':_0x4e806e},{'new':!0x0,'upsert':!0x0});return console['log']('Database\x20update\x20result:',_0x4f0ec1),_0x4f0ec1;}}catch(_0x10760c){throw console[_0x28f156(0x3a7)]('Erro\x20ao\x20atualizar\x20cacheInstance:',_0x10760c),_0x10760c;}return null;}async[a0_0x3b8fac(0x793)](_0x747422){const _0x37616a=a0_0x3b8fac;try{let _0x232230=A(_0x747422[_0x37616a(0x287)]);return{'deletedCount':(await this[_0x37616a(0x366)]['deleteOne'](_0x232230))[_0x37616a(0x2b8)]};}catch(_0x749ed7){return{'error':_0x749ed7?.[_0x37616a(0x2eb)]()};}}async[a0_0x3b8fac(0x7ac)](_0x615046){const _0x735090=a0_0x3b8fac;try{let _0x40b3d3=A(_0x615046['where']);return await this[_0x735090(0x366)][_0x735090(0x7ac)](_0x40b3d3)['lean']();}catch{return null;}}},jt=(0x0,Ii[a0_0x3b8fac(0x12d)])(Ai[a0_0x3b8fac(0x126)]),Lo=b[a0_0x3b8fac(0x184)](a0_0x3b8fac(0x260)),Ds=class{constructor(){const _0x14e55e=a0_0x3b8fac;this[_0x14e55e(0x542)]=new $e(He,b),(!this[_0x14e55e(0x66c)]||!this[_0x14e55e(0x45c)])&&Lo&&this[_0x14e55e(0x348)]()[_0x14e55e(0x620)](()=>{const _0x8ef932=_0x14e55e;console[_0x8ef932(0x514)](_0x8ef932(0x780)+this[_0x8ef932(0x66c)]),console['log']('Network\x20Interface\x20detected:\x20'+this[_0x8ef932(0x45c)]);})[_0x14e55e(0x1b5)](_0x540b14=>{const _0x177d28=_0x14e55e;console[_0x177d28(0x3a7)](_0x177d28(0x507)+_0x540b14['message']);});}async[a0_0x3b8fac(0x348)](){const _0x238d52=a0_0x3b8fac;try{let {stdout:_0x550d44}=await jt(_0x238d52(0x2ae));console[_0x238d52(0x514)](_0x238d52(0x63c)+_0x550d44);let _0x98d5d4=_0x550d44[_0x238d52(0x45d)]('\x0a')[_0x238d52(0x23a)](_0x361be0=>_0x361be0[_0x238d52(0x45d)]('\x20')[0x0])[_0x238d52(0x34f)](_0x20b4df=>!_0x20b4df[_0x238d52(0x43a)]('lo')&&!_0x20b4df[_0x238d52(0x43a)](_0x238d52(0x546))&&!_0x20b4df[_0x238d52(0x43a)]('vir')&&!_0x20b4df[_0x238d52(0x43a)]('wl')&&!_0x20b4df[_0x238d52(0x43a)]('@'));if(console[_0x238d52(0x514)](_0x238d52(0x8e)+_0x98d5d4),_0x98d5d4['length']===0x0)throw new Error(_0x238d52(0x3f2));this[_0x238d52(0x45c)]=_0x98d5d4[0x0];let {stdout:_0x3c2dac}=await jt(_0x238d52(0x3af)+this[_0x238d52(0x45c)]);console[_0x238d52(0x514)](_0x238d52(0x517)+_0x3c2dac);let _0x146a09=_0x3c2dac['split']('\x0a')[_0x238d52(0x7a1)](_0x21fff6=>_0x21fff6[_0x238d52(0x43a)](_0x238d52(0x62a))&&_0x21fff6[_0x238d52(0x43a)](_0x238d52(0x5d2)));if(!_0x146a09)throw new Error(_0x238d52(0x2d8));let _0x4f9c11=_0x146a09['match'](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x4f9c11)throw new Error('Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address');let [_0x403cee,_0x595a18,_0x1880b9]=_0x4f9c11,_0xec1e80=Math['floor'](Number(_0x1880b9)/0x10),_0xcd78ef=Number(_0x1880b9)%0x10,_0x330192=_0x595a18[_0x238d52(0x45d)](':')[_0x238d52(0x484)](0x0,_0xec1e80)[_0x238d52(0x4c9)](':');if(_0xcd78ef>0x0){let _0x4df0f0=_0x595a18['split'](':')[_0xec1e80],_0x9eb586=0xffff<<0x10-_0xcd78ef&0xffff,_0x564418=(parseInt(_0x4df0f0,0x10)&_0x9eb586)['toString'](0x10)[_0x238d52(0x56c)](0x4,'0');_0x330192+=':'+_0x564418;}this[_0x238d52(0x66c)]=_0x330192+':';}catch(_0x5ca84a){console[_0x238d52(0x3a7)]('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:',_0x5ca84a);}}async[a0_0x3b8fac(0x579)](_0x481926){const _0x33bb69=a0_0x3b8fac;let _0x10655c=_0x33bb69(0xe9)+_0x481926+'/64\x20dev\x20'+this[_0x33bb69(0x45c)];try{await jt(_0x10655c),console[_0x33bb69(0x514)](_0x33bb69(0x418)+_0x481926);}catch(_0x53c349){console[_0x33bb69(0x3a7)](_0x33bb69(0x652)+_0x53c349);}}async['removeIPv6'](_0x3f7a74){const _0x2998da=a0_0x3b8fac;let _0x4e87ed=_0x2998da(0x32a)+_0x3f7a74+_0x2998da(0x478)+this[_0x2998da(0x45c)];try{await jt(_0x4e87ed),console[_0x2998da(0x514)](_0x2998da(0x3d7)+_0x3f7a74);}catch(_0x45078d){console[_0x2998da(0x3a7)]('Error\x20removing\x20IPv6\x20address:\x20'+_0x45078d);}}['randomMac'](){const _0x4e4c8c=a0_0x3b8fac;return _0x4e4c8c(0x1bc)[_0x4e4c8c(0x1c6)](/X/g,()=>_0x4e4c8c(0x491)[_0x4e4c8c(0xc9)](Math[_0x4e4c8c(0x3e0)](Math['random']()*0x10)));}[a0_0x3b8fac(0x55c)](_0x4334db,_0x119c08){const _0x5394f4=a0_0x3b8fac;let _0x229e41=_0x119c08[_0x5394f4(0x45d)](':');return _0x229e41[0x0]=(parseInt(_0x229e41[0x0],0x10)^0x2)[_0x5394f4(0x2eb)](0x10)[_0x5394f4(0x56c)](0x2,'0'),''+_0x4334db+_0x229e41[0x0]+_0x229e41[0x1]+':'+_0x229e41[0x2]+_0x5394f4(0x536)+_0x229e41[0x3]+':'+_0x229e41[0x4]+_0x229e41[0x5];}[a0_0x3b8fac(0x5b7)](){const _0x446753=a0_0x3b8fac;let _0x4155c4=this[_0x446753(0x66c)];_0x4155c4[_0x446753(0x64c)](':')||(_0x4155c4+=':');let _0x1ba06b=this[_0x446753(0x7b5)]();return this[_0x446753(0x55c)](_0x4155c4,_0x1ba06b);}['isValidIPv6Config'](_0x27f07e){const _0x4dda80=a0_0x3b8fac;return new RegExp(_0x4dda80(0x6d9))[_0x4dda80(0x4e2)](_0x27f07e);}async['testIPv6'](_0x2819b7){const _0x50cbdb=a0_0x3b8fac;let _0x2cc99a=[{'url':'https://ipv6.jsonip.com','parse':_0x53bbe8=>_0x53bbe8['ip']},{'url':_0x50cbdb(0x609),'parse':_0x3f3f4e=>_0x3f3f4e['ip']},{'url':'https://ifconfig.me/ip','parse':_0x32bb55=>_0x32bb55[_0x50cbdb(0x73c)]()},{'url':'https://v6.ident.me','parse':_0x33b286=>_0x33b286[_0x50cbdb(0x73c)]()}],_0x27f007=_0x2cc99a[Math[_0x50cbdb(0x3e0)](Math[_0x50cbdb(0x334)]()*_0x2cc99a[_0x50cbdb(0x3c8)])];try{let _0x32e0e9=await Ti[_0x50cbdb(0x151)]['get'](_0x27f007['url'],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x2819b7}}),_0x345a63=_0x27f007['parse'](_0x32e0e9['data']);return _0x345a63['toLowerCase']()===_0x2819b7[_0x50cbdb(0x106)]()?(console[_0x50cbdb(0x514)](_0x50cbdb(0x664)+_0x2819b7),!0x0):(console[_0x50cbdb(0x3a7)]('IP\x20mismatch:\x20configured\x20'+_0x2819b7+',\x20received\x20'+_0x345a63),!0x1);}catch(_0x434d52){return console[_0x50cbdb(0x3a7)](_0x50cbdb(0xc6)+_0x27f007[_0x50cbdb(0x772)]+':\x20'+_0x434d52[_0x50cbdb(0x4ab)]),!0x1;}}async[a0_0x3b8fac(0x6d8)](_0xbd36d5,_0x5cc50d){const _0x21761c=a0_0x3b8fac;if(!this['ipv6Prefix']||!this[_0x21761c(0x45c)])return console[_0x21761c(0x3a7)](_0x21761c(0x6de)),null;let _0xad94fe;do _0xad94fe=this['generateRandomIPv6'](),console[_0x21761c(0x514)](_0x21761c(0x67e)+_0xad94fe);while(!await this[_0x21761c(0xcb)](_0xad94fe));await this[_0x21761c(0x579)](_0xad94fe),console[_0x21761c(0x514)](_0x21761c(0x298)+_0xad94fe);let _0x2c43da={'_id':_0xbd36d5+'-'+_0x5cc50d,'ip':_0xad94fe},_0x4b63ec=await this[_0x21761c(0x542)][_0x21761c(0x39f)](_0x2c43da,_0x2c43da[_0x21761c(0x4ff)]);return console[_0x21761c(0x514)](_0x21761c(0x74e)+_0x4b63ec),_0xad94fe;}async['isValidAndUniqueIPv6'](_0x33c1d9){const _0x4c76fc=a0_0x3b8fac;return this[_0x4c76fc(0x3fd)](_0x33c1d9)?!await this[_0x4c76fc(0x542)][_0x4c76fc(0x7ac)]({'where':{'ip':_0x33c1d9}}):!0x1;}async['removeIPv6ById'](_0x16b349,_0x46539a){const _0x38b874=a0_0x3b8fac;let _0x277b49=_0x16b349+'-'+_0x46539a,_0x391004=await this[_0x38b874(0x542)][_0x38b874(0x7ac)]({'where':{'_id':_0x277b49}});_0x391004&&_0x391004['ip']&&(await this[_0x38b874(0x3e4)](_0x391004['ip']),await this[_0x38b874(0x542)][_0x38b874(0x793)]({'where':{'_id':_0x277b49}}));}},Fo=new Ds(),re=Fo,js=a0_0x3b8fac(0x266),Li,me=null,ka=null,Uo=0x3,jo=null,Oi=b[a0_0x3b8fac(0x184)](a0_0x3b8fac(0x331))[a0_0x3b8fac(0x467)][a0_0x3b8fac(0xd6)],_i=b[a0_0x3b8fac(0x184)](a0_0x3b8fac(0x260));async function Jo(){const _0x59c7e3=a0_0x3b8fac;let _0x25e194=await Ne[_0x59c7e3(0x7ac)]();me=_0x25e194?.['WebhookGlobal']??null,jo=_0x25e194?.[_0x59c7e3(0x2ff)]??null,js=_0x25e194?.[_0x59c7e3(0x264)]??_0x59c7e3(0x266),Li=_0x25e194?.[_0x59c7e3(0x1f4)]??K??_0x59c7e3(0x77b);}async function qo(){await Jo();}qo();function a0_0x14ca(){const _0x7a3c8c=['#92ceac','findParticipants','\x1b[32m%s\x1b[0m','fetchStatus','\x0a*Voc\x20respondeu*:\x0a','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','CHATS_UPSERT','proto','upsertChats','\x20do\x20chat\x20','\x22\x20cannot\x20be\x20empty','request\x20received\x20in\x20editConversation','TEL','updateAutoCompleteMessages','sem\x20texto\x20na\x20mensagem','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20ser\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','error_log','messageContextInfo','):\x20\x27Enviando\x20mdia\x20para\x20\x27','readMessage','#fed428','Background\x20color\x20is\x20required','dataValidate','Erro\x20ao\x20editar\x20o\x20bloco:\x20','This\x20name\x20','isJidUser','limit','sleep','Authentication\x20error','https://api64.ipify.org?format=json','):Audio\x20converted\x20and\x20stored\x20in\x20cache','.xlsx','_fromMe','sendMenu','pushName','activatedCount','repository','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','color','AutomateFunctions','):\x20whoCanEdit\x20before\x20validation:\x20','):\x20Buscando\x20conversas...','globalShow','Erro\x20ao\x20atualizar\x20mltiplas\x20conversas:','badSession','messages.upsert','/webhook','contextInfo','label_jid','DD/MM\x20HH:mm:ss','telefone','updateLastSeenPrivacy','then','conversation','collections','):\x20atualizao\x20chat:\x20','\x20and\x20data:','Chat\x20com\x20ID\x20','empty','open','CLEANING_INTERVAL','ephemeralExpiration','inet6','connectionClosed','all','arrayUnique','updateMissingCustomFields','/media','flowName','):\x20No\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padro...','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','cacheContactModel','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','desativadoFluxoAte','http://checkip.dyndns.org','array','updateProfileStatus','conversationTimestamp','website','keys','Network\x20interfaces\x20detected:\x20','beautifyWithPlaceholders','contacts.update','isListOfNumbers','\x1b[37m','createConnection','errorLog','groupUpdateSubject','query','deviceSentMessage','Nenhum\x20campo\x20vlido\x20para\x20atualizao\x20fornecido.','.ppt',',\x20lastCondition:\x20','stickerMessage','*\x0a\x0a','presence.update','endsWith','Connection\x20closed\x20for\x20instance:\x20','READ','getOwnPropertyNames','updatePresence','Partes\x20do\x20domnio:','Error\x20adding\x20IPv6\x20address:\x20','jsonwebtoken','Message','path','Falha\x20ao\x20processar\x20a\x20solicitao\x20findGroups','PREFIX_KEY','groupJid','upperCase',',\x20pairCode:\x20',',\x20Comparador:\x20','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','updateChatWithMessage','ignoreGroups','instanceKeys','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','licenca','findByIdAndDelete','textMessage','IP\x20confirmed:\x20','group-participants.update','remote\x20\x22origin\x22','axios','ChatRouter','groupAcceptInvite','waitingMenu_replyOptions','toLocaleString','ipv6Prefix','getVariablesChat','auth','updateGParticipant','action','getGroupMetadataCache','50mb','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','scheduleMessage','Nenhum\x20chat\x20encontrado\x20para\x20editar.','readFileSync','):\x20whoCanUse\x20before\x20validation:\x20','result','\x20com\x20sucesso.','local_map','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','setWebhook','insertMany','Generated\x20IPv6:\x20','sendLocation','extractPhoneNumber','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','startID','apirequest','$pull','info','!cmd_','drop','imported','\x1b[0m','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','_activatedCount','isCommunityAnnounce','audio/ogg',',\x20isAdmin:\x20','.extension','groups_ignore','):\x20Editando\x20bloco...','sendList','documentWithCaptionMessage','updateAll','\x1b[40m','\x20depois\x20','getOwnPropertyDescriptor','next_groupId',',\x20valor\x20a\x20encontrar:\x20\x22','beforeExit','Erro\x20ao\x20buscar\x20o\x20fluxo','reject','Erro\x20ao\x20iniciar\x20fluxo:\x20','context','findGroup','getMessageModelForOwner','close','lastFetchAwaitingApproval','downloadMediaMessage','\x20ao\x20chat\x20','convertToWebP','processgoToFlow','fetchProfile','sha256','Configurao\x20SSL\x20recuperada:','release','StartBot','qrcode-terminal','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','messages','-whatsapp-api','email','):Processing\x20audio','prepareWAMessageMedia','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mdia:\x20','modifiedCount','REDIS','All_Instances_Config','fetchChats','waMonitor','setContext','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','Variveis\x20no\x20encontradas:','emit','API\x20Key\x20invlida.','):\x20teve\x20mudanas\x20chat.ephemeralExpiration:\x20','dbClient','Deletion\x20failed','request\x20received\x20in\x20updateAgent','SERVER_OFFLINE','DOCKER_ENV','cwd','loadEnv','match','isAdmin','):\x20no\x20encontrado\x20prxima\x20mensagem,\x20far\x20nova\x20verificao\x20em\x20','reconnectAttempts','blockId','messaging-history.set','editConversation','node-mime-types','HOST','keep-alive','updateGroupWebhook','SSL_CONF_FULLCHAIN','messageType','ConversationModel','):\x20conversation.lastInteraction:\x20','remoteJid','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','findWebhook','createIPv6','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','assign','author','/media/','sendWhatsAppAudio','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','.txt','cachedData-whatsapp','createNewConversation','ScheduleMessage','Last\x20message\x20not\x20found','):\x20no\x20encontrou','Not\x20Found','Para\x20criar\x20fluxo\x20global,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20global','InstancesAlterarTodas','mediatype','\x1b[33m\x1b[1m','jid','\x20segundos','unreadCount','SendScheduleMessage','Falha\x20ao\x20deletar\x20a\x20coleo\x20de\x20mensagens:\x20','Fluxos\x20no\x20esto\x20ativados','creds.json',',\x20Expiration\x20Time:\x20','restart','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualizao\x20do\x20git\x20e\x20npm\x20install.','DisconnectReason','height','subjectTime','variablesToObject','stopWhenYouSendMsg','composing','online','updateMessage','body','OrAnd','Falha\x20ao\x20processar\x20a\x20solicitao\x20inviteCode','):\x20Conversa\x20est\x20expirada','isJidBroadcast','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','):\x20Envio\x20interrompido\x20devido\x20a\x20UUID\x20de\x20processo\x20no\x20corresponder.','Erro\x20ao\x20deletar\x20chat:','Unauthorized','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','):\x20Editando\x20grupo\x20do\x20fluxo...','contactHandle','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','groupdata.participants','):\x20Enviando\x20udio','padEnd','createWebhook','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','dbConnection','/instance/connect','request_time','store','collection','videoMessage','replaceValue','/wa-connection-update','editflowblock','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20','Erro\x20ao\x20alterar\x20fluxo','CORS','CONTACTS_UPDATE','FlowRouter','dbInstance','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','approve','Bloco\x20com\x20ID\x20','set','blockLogs','normalizeMessage','buttonMessage','Flow\x20iniciado\x20com\x20','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','\x20foi\x20removido\x20por\x20no\x20ser\x20vlido.','\x20adicionado\x20ao\x20chat\x20','STORE_CLEANING_TERMINAL','firstValue','Falha\x20ao\x20processar\x20a\x20solicitao\x20revokeInviteCode','#ffffff','getPrototypeOf','/instance','deleteChat','updateOneById','authModel','video-cover.png','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','Erro\x20ao\x20editar\x20o\x20chat','saveCreds','scheduleSendText','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','findGroupsEspecial','logger','Cannot\x20','startFlow','.mimetype','trim','Removidas\x20as\x20variveis:\x20','forEach','createClient','):Image\x20is\x20url','.ogg','Type\x20is\x20required',',\x20Novo\x20tamanho:\x20','getChatModelForOwner','sendMessageAck','SSL_CONF','\x5cd+','convertedOptions','):Sending\x20audio\x20whatsapp','statusJidList','request\x20received\x20in\x20scheduleMessage','/startFlow/:instance/:startID','done','Cache\x20instance\x20update\x20result:\x20','basename','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','Contacts\x20not\x20found','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','fetchMessages','qrCode','vcard','jpegThumbnail','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','notify','keyPattern','ephemeralDuration','request\x20body:\x20','O\x20campo\x20id\x20\x20obrigatrio\x20para\x20editar/criar\x20um\x20chat.','announcement','Instncias\x20removidas:\x20','labels.edit','whoCanUse','):\x20Label\x20','participant','delayChatLabel_MAX_RETRIES','waitingForReplyMenu','#000000','groupJoinApprovalMode','.fileUrl','.\x20Pulando.','addMessagesToGroup','poll','getValidWhatsAppNumbers','muteEndTime','request\x20received\x20in\x20fetchConversation','Limpando\x20logs\x20do\x20PM2...','\x20segundos\x20antes\x20de\x20reconectar...','Button\x20IDs\x20cannot\x20be\x20repeated.','delayMessage','url','loadWebhook','checkAndRestartProcess','verifyWhatsAppNumber','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','SEND_MESSAGE','.docx','copyBlock','reconnectTimestamps','uazapi','all_member_add','findIndex','displayName','sort','IPv6\x20Prefix\x20detected:\x20','Nenhum\x20chat\x20fornecido\x20para\x20insero.','chatId','notMatchRegex','announce','):Desconectado,\x20parando\x20execuo.','importChatsAntigo','editMessagesInGroup','Erro\x20de\x20duplicidade\x20no\x20ndice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20ndice...','):\x20Editando\x20mensagens\x20no\x20grupo...','@g.us','substring','):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20voc\x20no\x20tem\x20permisso\x20para\x20us-lo','Router','digest','redisEnv','):\x20Editando\x20condio\x20do\x20fluxo...','Input\x20deve\x20ser\x20um\x20array\x20no\x20vazio\x20de\x20chats.','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20updatePresence','deleteOne','mongodb','Mensagem\x20no\x20suportada','getConversation','Error\x20fetching\x20group','status.instance','retrySendMessage','getMIMEType','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','@broadcast',',\x20global:\x20','leadInfo','Content-Type','value','find','owner','headers','Invalid\x20format','updateCustomFields','Valor\x20da\x20URL\x20recuperada:','readreceipts','contact','stanzaId','redirect','flowConversation','findOne','$set','Falha\x20ao\x20processar\x20a\x20solicitao\x20removeProfilePicture','Mutex','abs','stateConnection','no-cache','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','editFlow','randomMac','updateOne','FULLCHAIN','):\x20Usando\x20extenso\x20padro:\x20','option','processUazapi','):Converted\x20image\x20deleted','updateAgent','qrcode','closeExistingConversations','):\x20this.processingGroup._id:\x20','profile','findManyByIds','leadInfo.etiquetas','leadInfo.atendimentoAberto','Not\x20is\x20business\x20profile','EMAIL:','CONECTADO\x20\x20UAZAPI','createInstance','_Chats','evaluateConditionTest','https://uazapi-plugin.bubbleapps.io/?url=','yes','segundos','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','#ff9484','startCommand','condition','):\x20Atualizando\x20status\x20da\x20mensagem\x20',']\x20(','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','sendCommand','onWhatsApp','stopMinutes','LOG','statusMessage','\x1b[33m%s\x1b[0m','choices','synchronizeAndMapFlows','listResponseMessage','uncaughtException','@redis/client','/wa-message','leadInfo.','\x20minutos\x20verificar\x20novas\x20mensagens','editflowvaredit','):\x20alterando\x20this.AutomateSystem','archive','O\x20campo\x20_id\x20\x20obrigatrio\x20para\x20editar\x20uma\x20conversa.','):including\x20timestamp\x20in\x20url:\x20','dbServer','#d8e651','/create','$dbName','cachedContact','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20voc\x20no\x20\x20o\x20proprietrio\x20da\x20conversa.','Filtered\x20network\x20interfaces:\x20','groupValidate','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGroupPicture','findConversation','sendButtons','pt-BR','removed','method','flowActive','express','findAndUpdateCacheContact','\x20quoted:\x20','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','lastSendMessage','subjectOwner','application/json','boolean','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','\x27\x20removido\x20do\x20AutomateSystem.','STORE','ephemeralMessage','Stack\x20trace:','TYPE',',\x20Minutes\x20to\x20Close:\x20','lastInteraction','Nenhum\x20participante\x20vlido\x20encontrado.','editFlowVariable','updateGroupParticipantsWebhook','LOG_LEVEL','editFlowReply','readData','Falhou\x20ao\x20encontrar\x20chat\x20','pairingCode','newValue','#d3a91f','Erro\x20ao\x20substituir\x20variveis\x20para\x20','updateFlowConfig','DB_PREFIX_NAME','exports','authState','DEBUG','Button\x20texts\x20cannot\x20be\x20repeated','lastUpdate','instanceName\x20not\x20provided.','SERVER_TYPE','pre','reorderReplyOptions','pollCreationMessage','utf-8','Fluxo\x20no\x20encontrado\x20na\x20memria.','\x22reaction\x22\x20must\x20be\x20an\x20emoji','\x1b[31m','generateHash','Error\x20testing\x20IP\x20with\x20','no.connection','newStoppedUntil','charAt','long','isValidAndUniqueIPv6','verifiedName','whatsappNumbers','awaitSeconds','Erro\x20ao\x20copiar\x20o\x20documento','quoted','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','/wa-message-update','Esse\x20fluxo\x20no\x20permite\x20importao.','):Hash\x20to\x20image\x20name:\x20','Bad\x20Request','KEY','editflowgroup','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20excluso.','authorization','RemoveChatLabel','instanceInfo','router','model','paused','):\x20Enviando\x20texto','waitingMenu_text','block','.doc','labelId','replaceOne','instancias:\x20','Falha\x20ao\x20processar\x20a\x20solicitao\x20toggleEphemeral','contacts.upsert','Mac\x20OS','ip\x20-6\x20addr\x20add\x20','node-cache','-instances','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','headerString','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','request\x20received\x20in\x20updateCustomFields','):\x20Deletando\x20conversa...','chats.upsert','Servidor\x20de\x20autenticao\x20offline.\x20Nova\x20tentativa\x20em\x20','longitude','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ObjectId','mkdirSync','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','Por\x20favor,\x20responda\x20\x20ltima\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opes\x20disponveis,\x20sem\x20digitar\x20sua\x20resposta.','execSync','applyvaredit','BRL','logout','/automate','json','RemoteJid:','^\x5cd+','pollCreationMessageV2','Erro\x20ao\x20buscar\x20conversas','Parando\x20aplicao,\x20atualizao\x20recebida','162368HLxpZs','variablesNotFound','toLowerCase','editOperator','backgroundColor','remove','Falha\x20ao\x20processar\x20a\x20solicitao\x20findRealGroups','Retornando\x20grupos\x20SEM\x20cache','routerPath','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','autoCompleteMessages','):\x20Conversa\x20atualizada\x20em\x20memria','hex','https://','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','flattenObject','getTicketSystem','privacySettings','Falha\x20ao\x20processar\x20a\x20solicitao\x20leaveGroup','call','messageTimestamp','Log\x20out\x20instance:\x20','Erro\x20ao\x20editar\x20condio\x20do\x20fluxo','hasOwnProperty','isBusiness','static','username','.webp','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','\x27\x20do\x20banco\x20de\x20dados...','pollMessage','fromMe','pino','Somente\x20\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padro','exec','GET','min','apikey','uuid','eventHandler','https://uazapi-plugin.bubbleapps.io/','promisify','urlOrBase64','connectionStatus','reorderMessages','Instance\x20deleted','Deleted\x20','https://api.openai.com/v1/audio/speech','ids','\x20minutos...','video','request\x20received\x20in\x20editFlowvariable','Erro\x20ao\x20editar\x20agentes','No\x20\x20possvel\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20est\x20em\x20processamento.','editFlowCondition','webp','express-async-errors','options','updateChatGroupData','Erro\x20ao\x20buscar\x20fluxos:','redis://127.0.0.1:6379','secondValue','blockId\x20\x20necessrio\x20para\x20deletar\x20um\x20bloco','Last\x20message\x20not\x20found\x20for\x20number:\x20','deleteConversation','lastMessage','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','allFlows','getScheduleMessageModelForOwner','compression','lowerCase','group','\x22\x20-\x20NOT\x20CONNECTION','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','reference','media','\x20inseridos\x20no\x20banco\x20de\x20dados...','default','REDIS_URI','less','post','subject','findGroupInfos','PORT','bearer','loadInstance','9356GpxrDr','deleteImportedChat','replaceVariables','equal','status@broadcast','sendPresenceUpdate','interval\x20no\x20\x20um\x20nmero','IPv6\x20recriado\x20aps\x20falhas\x20de\x20reconexo.','):\x20Grupo\x20','Enter\x20a\x20value\x20in\x20milliseconds','Garbage\x20collection\x20no\x20est\x20disponvel.','):\x20Bloco\x20copiado:\x20','[all]','File\x20written\x20to\x20path:\x20','groupLeave','pendingMessages','creds','saveVariable','Erro\x20ao\x20arquivar\x20chat','deleteMessage','utf8','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','):\x20Detalhes\x20da\x20mdia\x20obtidos\x20com\x20sucesso.','SERVER_ACK','\x20saindo\x20da\x20funo','views','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','):\x20tem\x20blocks','Db\x20Connection','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio:\x20','messageHandle','):\x20Procurando\x20mensagens\x20para\x20envio','presence','editedMessage','replaceVariablesInReplyOptions','):\x20Os\x20fluxos\x20esto\x20desativados\x20para\x20','useMultiFileAuthState','promote','restrict','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','child_process','now','get','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupGetInviteInfo','stdout','editFlowVaredit','unlocked','connectionUpdate','chatModify','participants','Erro\x20inesperado\x20em\x20processvaredits:\x20','\x27...','normalizeMessageContent','crypto','editFlowGroup','):\x20Removendo\x20\x27','Instance\x20Key\x20from\x20DB:','STATUS_INSTANCE','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','Erro\x20ao\x20importar\x20chats','CacheContacts\x20database\x20connection\x20closed.','\x20}\x0a','readMessages','Erro\x20ao\x20buscar\x20metadados\x20do\x20grupo\x20para\x20','):Notifying\x20clients\x20for\x20chat:\x20','whoCanEdit','https://chat.whatsapp.com/','realVariables','\x20tentativas.','varedit','getBase64FromMediaMessage','getFlow','type','toBRL','REDIS_ENABLED','fetchConversation','getMessage','expiration','add','warn','):\x20condies\x20atendidas,\x20parando\x20verificao...\x20em\x20','mentioned','getBusinessProfile','groupCreate','):\x20\x27Enviando\x20texto\x20para\x20\x27','Encerrando\x20a\x20API\x20por\x20solicitao\x20via\x20rota\x20/exit','etiquetas','profilePictureUrl','):\x20newFirstValue\x20aps\x20replaceVariables:','order','sendMedia','catch','update','createConversationforStartFlow','deleteBlock','sectionsToString','leadInfo.desativadoFluxoAte','updateOnlinePrivacy','XX:XX:XX:XX:XX:XX','defineProperty','not_announcement','vote','Prxima\x20verificao\x20de\x20licena\x20e\x20se\x20tem\x20atualizao\x20em\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia.','creation','\x1b[1m','\x1b[31m%s\x1b[0m','joinApprovalMode','replace','getAllData','testingWith','findMessages','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','$addToSet','findMany','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20no\x20esto\x20ativados.','StatusJidList\x20is\x20required','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','flushHeaders','enabled','AddChatLabel','documentMessage','AUTHENTICATION_TYPE','/instance/connectionState','groupGetInviteInfo','Group\x20not\x20found','):\x20Fluxos\x20no\x20esto\x20ativados','):\x20Detalhes\x20da\x20mdia\x20salvos\x20para\x20\x27','DATABASE_CONNECTION_PASSWORD','optionName','buttons','updatePrivacySettings','deleteInstance','tags','):\x20newSecondValue\x20aps\x20replaceVariables:','7VcQmpy','):\x20Enviando\x20mdia','eventEmitter','):Error\x20in\x20converting\x20audio','\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo','uazapiSendMenu','_remoteJid','Erro\x20ao\x20tentar\x20autoCompleteMessages','deleted','NextBlock','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','#56ccb4',',\x20far\x20nova\x20verificao\x20em\x20','Selecione','msgRetryCounterCache','Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp:','):\x20Flow\x20desativado','listMessage','request\x20received\x20in\x20deleteFlow','connectedName','SUCCESS','PRESENCE_UPDATE','dayjs','role','saveConversationToDatabase','lastRealGroupsFetch','originalUrl','findFlow','toArray','ENABLED','Database\x20connection\x20closed.','messages.set','send.message','.mp4','gifPlayback','Comando\x20desconhecido','Erro\x20ao\x20atualizar\x20o\x20flow.','sendMessage','URI','Voc\x20no\x20tem\x20permisso\x20para\x20ver\x20o\x20fluxo\x20\x27','lastBlockId','cacheContact','arraybuffer','#6f7bcf','string','):\x20Loop\x20externo\x20interrompido\x20devido\x20\x20flag\x20isConnected','editflowreply','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','and','removeIPv6ById','PASSWORD','scheduleSendAudio','createAndSave','CHATS_UPDATE','DELETED','importChatsBatch','wuid','):Image\x20created','state','rows','uazapi\x20no\x20est\x20instalado\x20pelo\x20git','viewOnceMessage','sharePass','):\x20Error\x20processing\x20the\x20block:\x20','bodyStringErrorParse',':\x20Verificando\x20se\x20h\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','reduce','parse','):Image\x20converted\x20to\x20WebP','varedits','deleteFlow','Fluxo\x20agendado\x20pelo\x20fluxo\x20','ON\x20-\x20dbName:\x20','):\x20No\x20achou\x20nenhum\x20flow','createGroup','sendReaction','DATABASE','fullName','count','events','):\x20Conversa\x20est\x20expirada\x20-\x20voto','Fluxo\x20no\x20encontrado\x20para\x20o\x20ID:','status','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','Subdomnio\x20extrado\x20do\x20caminho\x20SSL:','numbers','joinGroup','response','Operador:\x20\x22','map','endSession','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperao','updateParticipant','API\x20Key\x20from\x20Request:','delete','\x1b[37m%s\x1b[0m','automateSystem','decryptPollVote','groupHandler','locationMessage','debug','temp-','VERBOSE','trimmed','groupId','Parando\x20aplicao...','scheduleNextCheck','mongodb://','mimetype','removeProfilePicture','Falha\x20ao\x20processar\x20a\x20solicitao\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','convertaudioMP3','isInteger','contact_blacklist','createConversationforgoToFlow','errors','formatBRNumber','text/event-stream','):\x20Falha\x20ao\x20deletar\x20mensagem.','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao.','processConditionsTest','pictureUrl','reaction','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio.','scheduleFlow','updateProfilePicturePrivacy','notContains','PROXY','chats.delete','METHODS','processingGroup','connectedClient','audioWhatsapp','Safari','processUUID',',\x20Segundo\x20Valor:\x20','whatsappNumber','Para\x20marcar\x20esse\x20fluxo\x20como\x20visvel\x20globalmente,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20Global.','name','chatLog','\x20atualizado\x20com\x20sucesso.\x20Ao:\x20','.mp3','groupMetadata','atendimentoAberto','):\x20currentBlock\x20\x20null.\x20No\x20foi\x20possvel\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','fone','chat','toggleEphemeral','leaveGroup','Rtulo\x20deletado:\x27,\x20','updateGroupsAddPrivacy','enviado\x20para','updateProfileName','request\x20received\x20in\x20editFlowgroup','fora\x20do\x20git','API\x20Key\x20invlida\x20ou\x20instncia\x20no\x20encontrada.','deleteDoneMessages','ContactModel','myAppStateKeyId','findChats','):\x20transformedCustomFieldVariables','command','updateBlock','text','Chat\x20no\x20existe,\x20use\x20a\x20funo\x20de\x20importar\x20para\x20cri-lo','truncatedtoEnd','where','):\x20expirationTime:\x20','Error\x20parsing\x20JSON:','\x22,\x20valor\x20a\x20substituir:\x20\x22','insert','/wa-contacts','findOrCreate','Connection','revokeInviteCode','viewOnceMessageV2','groupDesc','\x20foi\x20interrompido\x20pelo\x20usurio.','):Archiving\x20chat','requestPairingCode','):\x20Fluxo\x20\x27','DELIVERY_ACK','flow','Configured\x20IPv6:\x20','\x5c$&','The\x20global\x20api\x20key\x20must\x20be\x20set','uazapiSendContact','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','greater','groupMemberAddMode','#64c4ff','Request\x20Body:','Erro\x20ao\x20atualizar\x20o\x20fluxo:','/wa-groups','https://api.elevenlabs.io/v1/text-to-speech/','flowConfig','pollUpdateMessage','cleanDisconnectedInstances','No\x20\x20permitido\x20adicionar\x20outro\x20grupo\x20padro','Atingido\x20interaes\x20mximas,\x20parando\x20fluxo','uazapiSendText','PRIVKEY','from','this.reconnectAttempts:\x20','stopIfLastReturnedError','ip\x20-br\x20link\x20show','instanceName','menuExpiredMessage','fromObject','isConnected','No\x20foi\x20possvel\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automao.','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','buttonId','clearVariables','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','deletedCount','extractMessageContent','proxy:\x20','):\x20teve\x20mudanas\x20chat.muteEndTime:\x20','\x1b[36m','reviver','processclearVariables','deleteAll','create','encoding','Retornando\x20grupos\x20COM\x20cache','_sender','throwAndLogError','No\x20\x20possvel\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','):\x20nextBlock.uazapi.name','\x20no\x20encontrado\x20para\x20cpia','MESSAGES_UPSERT','locked','processConditions','Subdomnio\x20extrado\x20da\x20URL:','No\x20respondeu\x20com\x20a\x20enquete.','replyOptions','StartID:','saveTextReply','isJidGroup','formatStatusMessage','Partes\x20do\x20caminho\x20FULLCHAIN:','readFile','/message','folder','CONTACTS_SET','findOneAndUpdate','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','):\x20\x27Enviando\x20audio\x20para\x20\x27','Erro\x20ao\x20tentar\x20updateCustomFields','insertCount','variables','hbs','updateMany','):\x20ev.flush\x20realizado','groupSetting','groups.upsert','configService','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','oldValue','request\x20received\x20in\x20starFlow','SERVER_PORT','isLong','groupBetterSetting','updateMissingTags','toString','Erro\x20ao\x20deletar\x20mensagens:','waInstances','createSectionsFromValues','cpf','updateReplyOption','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','ListType','canSendMessage','makeCacheableSignalKeyStore','env.KEY\x20!==\x20key','editflowvariable','buffer','save','reorderBlocks','delayChatLabel_RETRY_DELAY_MS','connection.update','pow','dbSettings','mediaMessage','DaysToDelete','Sistema\x20atualizado\x20com\x20sucesso!','last','every','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupSetting','.pdf','.url','Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp.','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','replaceVariablesLogs','\x22\x20-\x20REMOVED','#9568cf','/events/:instance','getContactModelForOwner','groupadd','\x20-i\x20','CORS_METHODS','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','SINGLE_SELECT','):\x20Enviando\x20contato','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','exit','removeData','phoneNumber','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','#f64847','https://github.com/uazapi/uazapi.git','groupSettingUpdate','updateGroupPicture','../env.yml','No\x20\x20permitido\x20deletar\x20o\x20grupo\x20padro','caption','src','):\x20Comando\x20desconhecido:\x20','Erro\x20ao\x20alterar\x20privacidade','prepareMediaMessage','exists','deleteReplyOption','updateGParticipate','https://api.openai.com/v1/images/generations','finish','envYaml','MESSAGES_UPDATE','ip\x20-6\x20addr\x20del\x20','fetchContacts','mediaSticker','Resultado\x20da\x20correspondncia\x20de\x20URL:','LabelModel','contains','501750AlFAJp','AUTHENTICATION','delay','\x20mensagens\x20de\x20','random','getScheduleMessage','\x27\x20no\x20encontrado\x20na\x20memria','hGet','isArray','/config','off','):\x20Bloco\x20original\x20para\x20cpia:\x20','isCommunity','size','groupdata','[AUTH]\x20Database\x20is\x20not\x20enabled','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessrios.','):\x20[RETRY]:\x20Mximo\x20de\x20tentativas\x20alcanado,\x20desistindo\x20de\x20recuperar','mediaKey','AUTHENTICATION_JWT_EXPIRIN_IN','envProcess','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','https://jsonip.com','Erro\x20ao\x20iniciar\x20o\x20fluxo.','detectIPv6PrefixAndInterface','sendPoll','integer','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','nomecompleto','EXPIRIN_IN','\x20-\x20ON:\x20','filter','messageStubParameters','AutomateSystem','bulkWrite','groups','CHATS_DELETE','selectedOptions','menuType','defineAuthState','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','reactionMessage','generateWAMessageFromContent','leadInfo.customFields','fileName','.pptx','Pausado\x20por\x20','240844rDRyln','instance.','ERROR:\x20','Conversa\x20deletada\x20com\x20sucesso.','lastReceivedMessage','extractRegex','):\x20Current\x20Time:\x20','cacheInstanceModel','g.us','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','connecting','repeat','readMessageBot','message_normalized','addChatLabel','EMAIL','waitingMenu_ExpiredMessage','HH:mm:ss','.gif','ChatModel','minutesToClose','bateu\x20events','No\x20\x20permitido\x20deletar\x20o\x20bloco\x20padro','Fluxo\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.','number','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20nmero','request\x20received\x20in\x20updateAutoCompleteMessages','):Fetching\x20business\x20profile','capitalizedWords','idSchedule','CHATS_SET','isJWT','apiResponse','goNextblock','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','footerText','listType','CONTACTS_UPSERT','userDevicesCache','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','timeout','blocks','superadmin','replaceVariablesChat','request\x20received\x20in\x20getFlow','admin','uazapiSendMedia',',\x20qrcodeCount:\x20','fetchLabels','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','profilePicture','application/octet-stream','):\x20Query\x20params:','not\x20loaded','label','sendText','pollCreationMessageKey','title','):\x20Chat\x20','Types','SERVER_URL','createJid','some','createOrUpdate','Valor\x20invlido\x20para\x20converso\x20em\x20BRL:\x20','last_update','put','writeData','success','ButtonsMessage','AUTHENTICATION_JWT_SECRET','error','):\x20','updateStopChat','bodyString','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','archiveChat','sendContact','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','ip\x20-6\x20addr\x20show\x20dev\x20','):\x20Buscando\x20flow...','updateMissingEtiquetas','MAX_SAFE_INTEGER','):\x20Flow\x20\x27','editflow',',\x20canSendMessage:\x20','variable','js-yaml','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20','URL','SERVER','):\x20Est\x20configurado\x20para\x20parar\x20at\x20','audio','ContactsAndGroups','Erro\x20ao\x20aplicar\x20varedit:\x20','Error\x20writing\x20file:\x20','DARK','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','Logger','GROUP_PARTICIPANTS_UPDATE','findGroupInfo','processApiRequest','none','.svg','length','oldToken','DATABASE_CONNECTION_DB_PREFIX_NAME','buttonText','header','):\x20Editando\x20varivel\x20do\x20fluxo...','startsWith','waitingMenu_id','\x1b[34m%s\x1b[0m','transformScheduledMessagesByType','changeVariables','Missing\x20global\x20api\x20key','pop','allContacts','?timestamp=','IPv6\x20address\x20removed:\x20','):\x20Flow\x20ativado\x20e\x20no\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificaes','editChat','silent','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20conectar\x20ao\x20whatsapp','#ffae04','\x20\x1b[0m','request\x20received\x20in\x20getConversation','eventemitter2','floor','noConnection','connectToWhatsapp','Instncia\x20no\x20encontrada.','removeIPv6','env','convert','):Temp\x20image\x20deleted','1162878rXfKcu','Subscribed\x20Events:','findAndReplaceRegex','The\x20property\x20cannot\x20be\x20empty','labels.association','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','333565CAvghx','getDevice','/instance/fetchInstances','_error','No\x20suitable\x20network\x20interface\x20found','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfilePicture','send','webhookMap','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','connect','):\x20Limpando\x20AutomateSystem','flowIgnoreGroups','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','key','notEmpty','isValidIPv6Config','):\x20customFieldVariables','imagechat','view\x20engine','storePath','lastSend','refused','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','processScheduleFlow','.type','getAutomateSystem','nome','\x20minutos.\x20Ser\x20s\x20','class-validator','updateConversation','authentication','enumerable','params','mongoose','image','removeUnusedChatFields','JWT','data:\x20','Falha\x20ao\x20processar\x20a\x20solicitao\x20createGroup','Falha\x20ao\x20recriar\x20IPv6.','):\x20ndice\x20do\x20bloco\x20a\x20ser\x20atualizado:','content','IPv6\x20address\x20configured:\x20','findAndReplace','CONNECTION','AppStateSyncKeyData','Falha\x20ao\x20processar\x20a\x20solicitao\x20findParticipants','_Messages','setting','descOwner','verify','Error\x20removing\x20unused\x20chat\x20fields:','font','\x27\x20no\x20encontrado','):\x20Enviando\x20enquete','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','):\x20lastBlockId:\x20','replyOptionId\x20\x20necessrio\x20para\x20deletar\x20um\x20replyOption','request\x20received\x20in\x20editFlow','responsavelid','push','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','.jwt','unlinkSync','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','):\x20Criou\x20conversa\x20no\x20startFlow','getProfileName','uazapiSendAudio','shareOwners','findRealGroups','Instance\x20ID:','flowPrefixCommand','Telefone:\x20','sticker','mentions','getDelay','includes','):\x20conversation.status:\x20','latitude','redis','groupUpdateDescription','stopConversation','getContentType','contactsArrayMessage','/wa-presence','messages.update','connectToWhatsappController','Novo\x20IP\x20criado:\x20','.\x20Aguardando\x20','INFO','instance','Erro\x20ao\x20atualizar\x20agendamento\x20','Varivel\x20no\x20encontrada!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20chats\x20de\x20','output','when','indexOf','lastCondition','STORE_MESSAGE','setHeader','?authSource=admin&readPreference=primary&directConnection=true','PENDING','chats.update','base64','detail','messageSecret','updateProfilePicture','isBase64','\x20no\x20encontrado','networkInterface','split','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','Erro\x20ao\x20executar\x20bulkWrite:','cleanStore','BufferJSON','\x0aFN:','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','max','The\x20instance\x20needs\x20to\x20be\x20disconnected','convertaudio','API_KEY','):\x20A\x20mensagem\x20\x20\x22stopConversation\x22\x20=\x20','writeFile','Esse\x20fluxo\x20expirou','pollErrorMessage','namespace','jwt','No\x20\x20permitido\x20adicionar\x20outro\x20bloco\x20padro','sim','.png','descId','ip:\x20','editScheduleMessage','CREDENTIALS','content-type','):\x20Ignoring\x20group\x20messages.','writeFileSync','/64\x20dev\x20','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','):\x20updateResult:','Incio','remove.instance','REDIS_PREFIX_KEY','processvaredits','fetchProfilePictureUrl','optionDescription','groupRequestParticipantsUpdate','@s.whatsapp.net','Message\x20absent\x20from\x20node','slice','groups.update','webhookModel','):\x20Entrou\x20na\x20funo\x20goToFlow','client','):\x20Going\x20to\x20','):\x20teve\x20mudanas\x20chat.archived:\x20','flowStopConversation','request\x20received\x20in\x20deleteDoneMessages','awaitingApproval','dropCollection','40quyRTX','scheduleSendMedia','0123456789ABCDEF','ms\x20(tentativa\x20','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','joinGroupValidate','CONNECTION_UPDATE','getMinutes','spawn','qrcode.updated','PRODUCT_LIST','Error\x20updating\x20message\x20status:','groupRevokeInvite','Usando\x20IP\x20existente:\x20','Data\x20invlida\x20fornecida','parseInt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','processblock','createHash','replacer','toBrazilianNumberFormat','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','Rtulo\x20invlido\x20ou\x20sem\x20ID.','rowId','/exit','/wa-qrcode','):\x20error:\x20','):\x20isVote:\x20','message','/events','start','sections','Erro\x20ao\x20encerrar\x20a\x20API','Nmero\x20da\x20cor\x20invlido\x20ou\x20fora\x20do\x20intervalo:\x20','restartMutex',',\x20Resultado:\x20','):\x20[messages.upsert]\x20group\x20ignored','localWebhook','__esModule','AutomateSystem\x20no\x20foi\x20inicializado','entries','write','stopped','isRunning','contacts','):\x20encontrado\x20prxima\x20mensagem\x20para\x20','GUARD','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','):\x20\x27Deletando\x20fluxo,\x20id:\x20','\x20removido\x20do\x20chat\x20','restartInstance','contentText','console','webhook','flows','isURL','):\x20Adicionando\x20\x27','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','join','menuIgnoreNonVotes','Erro\x20ao\x20remover\x20label\x20','\x0a\x0a\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','Conexo\x20estabelecida','fileUrl','instanceCount','Instance\x20\x22','Schema','sendDataWebhook','contactMessage','memberAddMode','getConversationModelForOwner','GROUPS_UPDATE','chats.set','USER','deleteMessageForEveryone','):\x20Extenso\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','\x1b[30m','readdirSync','\x20-y','fetchBusinessProfile','validate','findAll','):\x20\x27Grupo\x20no\x20encontrado\x20ou\x20groupdata\x20no\x20definido:\x27,\x20','test','AUTHENTICATION_API_KEY','sending','webhookService','replaceVariablesInObject','Error\x20in\x20chatModify\x20for\x20number\x20','):Image\x20is\x20base64','Atualizao:\x20','toNumber','https://api.ipify.org?format=json','sendSticker','maxActives','round','Close\x20connection','app','GROUPS_UPSERT','pm2\x20flush','connectionState','user','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','object','_p_','chats','preview','_pushName','selectableCount','startCommandWord','updateStatusPrivacy','linkPreview','_id','QRCODE_UPDATED','organization','LOG_COLOR','\x20horas\x20e\x20','address','listen','protocolMessage','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','sendMessageWithTyping','replyOption','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','binary','cleaningUp','profileName','STORE_CHATS','):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos','request\x20received\x20in\x20createFlow','Mensagens\x20deletadas\x20com\x20sucesso.','http','Erro\x20ao\x20avaliar\x20a\x20condio:\x20','log','DATABASE_CONNECTION_HOST','Subdomnio\x20final:','IPv6\x20addresses\x20detected:\x20','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','stopMinutesMaxActives','):\x20debug\x20alterando\x20this.AutomateSystem','customFields','document','generate','createFlow','scheduled','checkMutex','cache','):\x20mediaMessageInfoId\x20:\x20','):\x20Buscando\x20conversa...','\x20no\x20encontrado\x20para\x20atualizao.','urlencoded','Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','evaluateCondition','.ogv','/group','removeInstance','DATABASE_ENABLED','birthtime','inviteCodeDetails','stderr','/instance/delete','\x20:\x20','public','Erro\x20ao\x20editar\x20a\x20conversa','formatVCard','fetchInstances','ff:fe','inviteCode','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','error\x20get\x20vote','startFlowWebhook','getClient','app-state-sync-key','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','addReplyOption','description','Erro\x20ao\x20adicionar\x20label\x20','):\x20Limpando\x20delayMessage','cacheInstanceRepository','uazapiSendLocation','getUniqueFlowName','saveChatVariables','docker','sendStatus','pollCreationMessageV3','findGroups','iniciando\x20fluxo\x20router','fetchPrivacySettings','\x1b[44m','Error\x20while\x20deleting\x20message\x20for\x20everyone','#00a1f2','createflow','existsSync','E-mail:\x20','):\x20Query\x20params:\x20','groupToggleEphemeral','):\x20Buscando\x20todos\x20os\x20fluxos...','lean','@whiskeysockets/baileys','getStatus','valid','):\x20sender\x20=\x20number:\x20','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','ip6eui','Erro\x20ao\x20atualizar\x20conversa:\x20','presenceSubscribe','format','addBlock','unhandledRejection','dark','audioMessage','fileLength','groupName','):\x20no\x20\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','\x20instance\x20does\x20not\x20exist','goToFlow','values','prototype','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','padStart','toUpperCase','toFile',',\x20saindo.','URL\x20completa:','use','#9ab6c1','LICENSE_INVALID','menuMessage','Valor\x20inicial:\x20\x22','--------------------------------------','}}\x20->\x20\x22','https','configureIPv6','Read\x20messages','deleteMany','Nome\x20do\x20campo\x20personalizado\x20j\x20existe.','instances','ListMessage','request\x20received\x20in\x20getAutomateSystem','ERROR','delayChatLabel','Erro\x20ao\x20criar\x20fluxo','setUpdate','getLastMessage','shift','list','PLAYED','load','markMessageAsRead','):\x20[messages.update]\x20group\x20ignored','statusCode','MESSAGES_SET','statSync','match_last_seen','WARN','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','delAll','verbose','#fe9dfe','#01d0e2','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','.jpg','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','/instance/create','processawaitSeconds','2641932kTzITw','has','}}\x20->\x20valor\x20no\x20encontrado','HeaderType','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','setRestartTimeout','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Cdigo\x20de\x20sada\x20','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','SSL_CONF_PRIVKEY','_FlowHistorico','uazapiDeleteMessage','notas','process','):\x20Conversa\x20inserida\x20com\x20sucesso.','):\x20Parar\x20funo\x20pois\x20no\x20est\x20conectado','):\x20Deletando\x20mensagem','messageId','\x1b[36m%s\x1b[0m','LEVEL','imgUrl','inner','editFlowBlock','/wa-chats','pollOnReplyDelete','unreadcount','_Labels','downloads','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','generateRandomIPv6','agents','matchRegex','getTime','):\x20Encontradas\x20e\x20removidas\x20as\x20variveis:\x20','):\x20Entrou\x20na\x20funo\x20stop','chatHandle','util','cors','getLabelModelForOwner','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','archived','data','triedToSend','Flow\x20\x27','processPollUpdateMessage','moreLogs','/chat','truncatedto','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGParticipant','flush','):\x20Entrou\x20na\x20funo\x20processawaitSeconds','rm\x20-rf\x20','):\x20Iniciando\x20bot...','quotedMessage','saveMediaToFile','expression','global','true','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','updateReadReceiptsPrivacy','/*.json','Module\x20-\x20ON','Detalhes\x20do\x20erro:','RECONNECT_TIME_FRAME','ORG:','importChats','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','URL\x20no\x20disponvel','closed','groupParticipantsUpdate','The\x20\x22','findById','autoCompleteMessages.command_1','code','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','stringify','conditions','admin_add','\x1b[43m','recording','unavailable','splice'];a0_0x14ca=function(){return _0x7a3c8c;};return a0_0x14ca();}var Jt={},Re=class u{constructor(_0x315a0,_0x3da654,_0x3c3206){const _0x29168c=a0_0x3b8fac;this[_0x29168c(0x2e2)]=_0x315a0,this[_0x29168c(0x1e3)]=_0x3da654,this[_0x29168c(0x610)]=_0x3c3206,this['AutomateSystem']=null,this[_0x29168c(0x738)]=new $(u['name']),this['instance']={},this[_0x29168c(0x4b4)]={},this[_0x29168c(0x7b1)]={'state':'close'},this[_0x29168c(0x401)]=(0x0,j['join'])(ue,_0x29168c(0x5b5)),this['msgRetryCounterCache']=new Us[(_0x29168c(0x151))](),this[_0x29168c(0x386)]=new Us[(_0x29168c(0x151))](),this['endSession']=!0x1,this[_0x29168c(0x3f5)]={'status.instance':_0x29168c(0x715),'connection.update':_0x29168c(0x715),'qrcode.updated':_0x29168c(0x4a8),'messages.upsert':_0x29168c(0x80),'send.message':_0x29168c(0x80),'messages.update':_0x29168c(0xd2),'group.upsert':_0x29168c(0x2a2),'group.update':_0x29168c(0x2a2),'group-participants.update':_0x29168c(0x2a2),'messages.set':'/wa-all-message','contacts.set':_0x29168c(0x28c),'contacts.upsert':'/wa-contacts','contacts.update':'/wa-contacts','presence.update':_0x29168c(0x442),'chats.set':_0x29168c(0x5b1),'chats.update':_0x29168c(0x5b1),'chats.upsert':_0x29168c(0x5b1),'chats.delete':_0x29168c(0x5b1)},this['reconnectAttempts']=0x0,this[_0x29168c(0x77a)]=[],this[_0x29168c(0x5d9)]=0xea60,this[_0x29168c(0x4ba)]=!0x1,this[_0x29168c(0x5bd)]={'chats.upsert':async(_0x2bb90b,_0x46f8f5)=>{const _0x1bf159=_0x29168c;let _0x130ebd=[];for await(let _0x3c80e2 of _0x2bb90b)_0x130ebd['push']({'_id':_0x3c80e2['id'],'owner':this[_0x1bf159(0x448)][_0x1bf159(0x219)],'group':_0x3c80e2['id']['endsWith'](_0x1bf159(0x78a)),'name':_0x3c80e2[_0x1bf159(0x26b)]||_0x3c80e2['displayName']||null,'contactname':null,'lastmsg':_0x3c80e2['conversationTimestamp']&&_0x3c80e2['conversationTimestamp'][_0x1bf159(0x2eb)]()[_0x1bf159(0x3c8)]<0xd?_0x3c80e2[_0x1bf159(0x639)]*0x3e8:_0x3c80e2[_0x1bf159(0x639)]||null,'archived':_0x3c80e2[_0x1bf159(0x5c2)]||!0x1,'unreadcount':_0x3c80e2[_0x1bf159(0x6ec)]||0x0,'ephemeralExpiration':_0x3c80e2[_0x1bf159(0x629)]||0x0});this['sendDataWebhook'](_0x1bf159(0xf1),_0x130ebd);},'chats.update':async(_0xbb63b0,_0x3a7a8d)=>{const _0x18ba7a=_0x29168c;for(let _0x503adc of _0xbb63b0){let _0x48eac6={'_id':_0x503adc['id'],'owner':this['instance'][_0x18ba7a(0x219)],'archived':_0x503adc[_0x18ba7a(0x5c2)],'muteEndTime':_0x503adc['muteEndTime'],'ephemeralExpiration':_0x503adc[_0x18ba7a(0x629)]},_0x3e54ac=!0x1,_0x16bce8={};_0x48eac6['archived']!=null&&(this[_0x18ba7a(0x738)][_0x18ba7a(0x592)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x18ba7a(0x48a)+_0x503adc['id']+_0x18ba7a(0x531)+_0x503adc['archived']),_0x3e54ac=!0x0,_0x16bce8[_0x18ba7a(0x5c2)]=_0x503adc[_0x18ba7a(0x5c2)]),_0x18ba7a(0x76c)in _0x503adc&&(this[_0x18ba7a(0x738)][_0x18ba7a(0x592)](this['instanceName']+'\x20('+this[_0x18ba7a(0x448)][_0x18ba7a(0x219)]+_0x18ba7a(0x2bb)+_0x503adc['id']+_0x18ba7a(0x531)+(_0x503adc[_0x18ba7a(0x76c)]??'0')),_0x3e54ac=!0x0,_0x16bce8[_0x18ba7a(0x76c)]=_0x503adc[_0x18ba7a(0x76c)]??0x0),_0x18ba7a(0x629)in _0x503adc&&(this[_0x18ba7a(0x738)]['verbose'](this[_0x18ba7a(0x2af)]+'\x20('+this[_0x18ba7a(0x448)][_0x18ba7a(0x219)]+_0x18ba7a(0x6be)+_0x503adc['id']+_0x18ba7a(0x531)+(_0x503adc[_0x18ba7a(0x629)]!==void 0x0?_0x503adc[_0x18ba7a(0x629)]:'undefined')),_0x16bce8[_0x18ba7a(0x629)]=_0x503adc['ephemeralExpiration']===null?0x0:_0x503adc[_0x18ba7a(0x629)],_0x3e54ac=!0x0);let _0x51855a;_0x3e54ac&&(_0x51855a=await this[_0x18ba7a(0x610)][_0x18ba7a(0x273)][_0x18ba7a(0x7b6)]({'where':{'_id':_0x503adc['id']}},_0x16bce8,this[_0x18ba7a(0x448)][_0x18ba7a(0x219)])),_0x51855a&&q(this['instanceName'],_0x18ba7a(0x4f8),{'chat':_0x51855a});}},'chats.delete':async _0x6bd4b6=>{const _0x2ba4c=_0x29168c;for(let _0x2a5fd2 of _0x6bd4b6)if(_0x2a5fd2[_0x2ba4c(0x64c)](_0x2ba4c(0x78a))){await this[_0x2ba4c(0x610)][_0x2ba4c(0x273)][_0x2ba4c(0x23f)]({'where':{'_id':_0x2a5fd2}},this['instance']['wuid']);let _0x101638={'where':{'key':{'remoteJid':_0x2a5fd2}}};await this['repository'][_0x2ba4c(0x4ab)][_0x2ba4c(0x23f)](_0x101638,this[_0x2ba4c(0x448)]['wuid']);}else{await this[_0x2ba4c(0x610)][_0x2ba4c(0x273)][_0x2ba4c(0x7b6)]({'where':{'_id':_0x2a5fd2}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x2ba4c(0x219)]);let _0x32f97f={'where':{'key':{'remoteJid':_0x2a5fd2}}};await this['repository'][_0x2ba4c(0x4ab)][_0x2ba4c(0x23f)](_0x32f97f,this[_0x2ba4c(0x448)][_0x2ba4c(0x219)]);}this[_0x2ba4c(0x4d2)](_0x2ba4c(0x261),[..._0x6bd4b6]);}},this['contactHandle']={'contacts.upsert':async(_0x390762,_0x58709a)=>{const _0x53e92f=_0x29168c;let _0x104f21=await this[_0x53e92f(0x610)][_0x53e92f(0x7a8)][_0x53e92f(0x7a1)]({'where':{}},this[_0x53e92f(0x448)]['wuid']),_0x43452f=[];for await(let _0x4b821e of _0x390762)_0x104f21[_0x53e92f(0x7a1)](_0x106a95=>_0x106a95['_id']===_0x4b821e['id'])||_0x43452f[_0x53e92f(0x42a)]({'_id':_0x4b821e['id'],'pushName':_0x4b821e?.[_0x53e92f(0x26b)]||_0x4b821e?.[_0x53e92f(0xcc)],'owner':this['instance'][_0x53e92f(0x219)]});this[_0x53e92f(0x4d2)](_0x53e92f(0xe7),_0x43452f),await this[_0x53e92f(0x610)][_0x53e92f(0x7a8)]['insert'](_0x43452f);},'contacts.update':async(_0xecf613,_0x467682)=>{const _0x2045f5=_0x29168c;let _0x413f49=[];for await(let _0x570aed of _0xecf613)_0x413f49[_0x2045f5(0x42a)]({'_id':_0x570aed['id'],'pushName':_0x570aed?.[_0x2045f5(0x26b)]??_0x570aed?.['verifiedName'],'owner':this[_0x2045f5(0x448)][_0x2045f5(0x219)]});this['sendDataWebhook'](_0x2045f5(0x63e),_0x413f49);}},this[_0x29168c(0x178)]={'messaging-history.set':async({messages:_0x7dba94,chats:_0x41401d,isLatest:_0xfe95f1},_0x3a99ec)=>{const _0x1ffa41=_0x29168c;if(_0xfe95f1){let _0x32bdca=await Promise[_0x1ffa41(0x62c)](_0x41401d[_0x1ffa41(0x23a)](async _0x8d9d51=>({'_id':_0x8d9d51['id'],'owner':this[_0x1ffa41(0x448)][_0x1ffa41(0x219)],'group':_0x8d9d51['id'][_0x1ffa41(0x64c)](_0x1ffa41(0x78a)),'name':_0x8d9d51['name']||_0x8d9d51[_0x1ffa41(0x77e)]||_0x8d9d51[_0x1ffa41(0x11e)]||null,'contactname':null,'lastmsg':_0x8d9d51[_0x1ffa41(0x639)]&&_0x8d9d51['conversationTimestamp'][_0x1ffa41(0x2eb)]()[_0x1ffa41(0x3c8)]<0xd?_0x8d9d51['conversationTimestamp']*0x3e8:_0x8d9d51[_0x1ffa41(0x639)]||null,'archived':_0x8d9d51[_0x1ffa41(0x5c2)]||!0x1,'unreadcount':_0x8d9d51[_0x1ffa41(0x6ec)]||0x0,'ephemeralExpiration':_0x8d9d51[_0x1ffa41(0x629)]||0x0,'muteEndTime':_0x8d9d51[_0x1ffa41(0x76c)]||0x0})));this[_0x1ffa41(0x4d2)](_0x1ffa41(0x4d7),_0x32bdca),await this['upsertChats'](_0x32bdca,_0x3a99ec);}let _0x1d4d28=[],_0x2d75fb=Date[_0x1ffa41(0x183)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x1d7050]of Object[_0x1ffa41(0x4b7)](_0x7dba94)){if(_0x1d7050['message']?.[_0x1ffa41(0x506)]||_0x1d7050[_0x1ffa41(0x4ab)]?.['senderKeyDistributionMessage']||!_0x1d7050[_0x1ffa41(0x4ab)]||_0x1d7050[_0x1ffa41(0x3fb)][_0x1ffa41(0x6d5)]===_0x1ffa41(0x15e)||(Fs[_0x1ffa41(0x151)][_0x1ffa41(0x2e8)](_0x1d7050?.['messageTimestamp'])&&(_0x1d7050['messageTimestamp']=_0x1d7050['messageTimestamp']?.[_0x1ffa41(0x4ea)]()),_0x1d7050[_0x1ffa41(0x118)]&&_0x1d7050[_0x1ffa41(0x118)][_0x1ffa41(0x2eb)]()[_0x1ffa41(0x3c8)]<0xd&&(_0x1d7050[_0x1ffa41(0x118)]=_0x1d7050['messageTimestamp']*0x3e8),_0x1d7050[_0x1ffa41(0x118)]<_0x2d75fb))continue;let _0x102b24=(0x0,w[_0x1ffa41(0x18e)])(_0x1d7050[_0x1ffa41(0x4ab)]),_0x3b341f=(0x0,w[_0x1ffa41(0x440)])(_0x102b24),{message_normalized:_0x26d261}=this[_0x1ffa41(0x722)](_0x102b24,_0x3b341f,null);Object[_0x1ffa41(0x63b)](_0x26d261)[_0x1ffa41(0x3c8)]>0x0&&_0x1d4d28[_0x1ffa41(0x42a)]({'_id':_0x1d7050['key']['id'],'key':_0x1d7050['key'],'pushName':_0x1d7050[_0x1ffa41(0x60e)],'participant':_0x1d7050[_0x1ffa41(0x762)],'message':_0x102b24,'messageType':_0x3b341f,'message_normalized':{'key':_0x1d7050[_0x1ffa41(0x3fb)],'pushName':_0x1d7050[_0x1ffa41(0x60e)],'messageTimestamp':_0x1d7050['messageTimestamp'],..._0x26d261},'messageTimestamp':_0x1d7050[_0x1ffa41(0x118)],'owner':this[_0x1ffa41(0x448)][_0x1ffa41(0x219)]});}_0x3a99ec[_0x1ffa41(0x1fe)]&&_0x1d4d28[_0x1ffa41(0x3c8)]>0x0&&(this[_0x1ffa41(0x738)][_0x1ffa41(0x592)](this[_0x1ffa41(0x2af)]+'\x20('+this['instance']['wuid']+_0x1ffa41(0x3a8)+_0x1d4d28[_0x1ffa41(0x3c8)]+_0x1ffa41(0x333)+this[_0x1ffa41(0x448)]['wuid']+'\x20inseridas\x20no\x20banco\x20de\x20dados...'),await this[_0x1ffa41(0x610)][_0x1ffa41(0x4ab)][_0x1ffa41(0x28b)]([..._0x1d4d28],this[_0x1ffa41(0x448)]['wuid'])),this[_0x1ffa41(0x4d2)](_0x1ffa41(0x200),[..._0x1d4d28]),_0x7dba94=void 0x0;},'messages.upsert':async({messages:_0x5e5d6b,type:_0x14ca72},_0x727041)=>{const _0x425a0c=_0x29168c;for(let _0x3c2d04 of _0x5e5d6b){if(this['localWebhook']?.['groups_ignore']&&_0x3c2d04[_0x425a0c(0x3fb)][_0x425a0c(0x6d5)][_0x425a0c(0x43a)](_0x425a0c(0x78a))){this[_0x425a0c(0x738)][_0x425a0c(0x592)](this[_0x425a0c(0x2af)]+'\x20('+this['instance'][_0x425a0c(0x219)]+_0x425a0c(0x4b3));return;}if(_0x14ca72!==_0x425a0c(0x758)||!_0x3c2d04?.['message']||_0x3c2d04['message']?.[_0x425a0c(0x506)]||_0x3c2d04[_0x425a0c(0x4ab)]['senderKeyDistributionMessage']||_0x3c2d04[_0x425a0c(0x3fb)][_0x425a0c(0x6d5)]===_0x425a0c(0x15e))return;let _0x2bb9a3=null,_0x4a6751=null;if(_0x3c2d04[_0x425a0c(0x350)]&&_0x3c2d04[_0x425a0c(0x350)][0x0]===_0x425a0c(0x483)){console['error'](_0x425a0c(0x23c)),Jt[_0x3c2d04['key']['id']]=_0x3c2d04,this[_0x425a0c(0x799)](_0x3c2d04,0x0);return;}Jt[_0x3c2d04['key']['id']]&&(console[_0x425a0c(0x3a7)](_0x425a0c(0x112)),delete Jt[_0x3c2d04['key']['id']]);try{_0x2bb9a3=await this[_0x425a0c(0x5c6)](_0x3c2d04),_0x4a6751=_0x2bb9a3?_0x2bb9a3[_0x425a0c(0x4c9)](','):null;}catch(_0x11c1c8){this[_0x425a0c(0x738)][_0x425a0c(0x592)](this['instanceName']+'\x20('+this[_0x425a0c(0x448)][_0x425a0c(0x219)]+'):\x20'+(_0x11c1c8 instanceof Error?_0x11c1c8[_0x425a0c(0x4ab)]:JSON[_0x425a0c(0x5e5)](_0x11c1c8,null,0x2))),_0x4a6751=_0x425a0c(0x539);}this[_0x425a0c(0x488)][_0x425a0c(0x15f)]('unavailable'),Fs[_0x425a0c(0x151)][_0x425a0c(0x2e8)](_0x3c2d04[_0x425a0c(0x118)])&&(_0x3c2d04[_0x425a0c(0x118)]=_0x3c2d04[_0x425a0c(0x118)]?.[_0x425a0c(0x4ea)]()),_0x3c2d04[_0x425a0c(0x118)]&&_0x3c2d04[_0x425a0c(0x118)][_0x425a0c(0x2eb)]()[_0x425a0c(0x3c8)]<0xd&&(_0x3c2d04[_0x425a0c(0x118)]=_0x3c2d04[_0x425a0c(0x118)]*0x3e8);let _0x490b89=_0x3c2d04['message'],_0x5f3d63=(0x0,w[_0x425a0c(0x18e)])(_0x490b89),_0x5a7bd5=(0x0,w[_0x425a0c(0x440)])(_0x5f3d63),{messageContent:_0x143a5e,message_normalized:_0x252bbf}=this[_0x425a0c(0x722)](_0x5f3d63,_0x5a7bd5,_0x4a6751);_0x5a7bd5===_0x425a0c(0x506)&&_0x143a5e?.['editedMessage']&&(_0x5a7bd5=_0x425a0c(0x17b));let _0x1f3303,_0x47442d=_0x3c2d04[_0x425a0c(0x3fb)][_0x425a0c(0x6d5)][_0x425a0c(0x64c)](_0x425a0c(0x78a));if(_0x3c2d04['key'][_0x425a0c(0x123)])_0x1f3303=this[_0x425a0c(0x448)][_0x425a0c(0x1b1)];else{let _0x3753af=_0x47442d?_0x3c2d04[_0x425a0c(0x3fb)][_0x425a0c(0x762)]:_0x3c2d04['key'][_0x425a0c(0x6d5)];_0x1f3303=(await this[_0x425a0c(0x9a)](_0x3753af,_0x3c2d04['pushName'],!0x1))[_0x425a0c(0x8c)][_0x425a0c(0x25a)];}let _0x245cfd={'_id':_0x3c2d04['key']['id'],'key':_0x3c2d04[_0x425a0c(0x3fb)],'isGroup':_0x47442d,'profilePictureUrl':_0x1f3303,'pushName':_0x3c2d04[_0x425a0c(0x60e)],'message':_0x5f3d63,'messageType':_0x5a7bd5,'message_normalized':{'key':_0x3c2d04['key'],'pushName':_0x3c2d04[_0x425a0c(0x60e)],'messageTimestamp':_0x3c2d04[_0x425a0c(0x118)],'source':(0x0,w[_0x425a0c(0x3ef)])(_0x3c2d04[_0x425a0c(0x3fb)]['id']),..._0x252bbf},'messageTimestamp':_0x3c2d04['messageTimestamp'],'owner':this['instance'][_0x425a0c(0x219)],'source':(0x0,w[_0x425a0c(0x3ef)])(_0x3c2d04[_0x425a0c(0x3fb)]['id']),'expiration':_0x143a5e?.[_0x425a0c(0x61b)]?.['expiration']||0x0};_0x143a5e||(this[_0x425a0c(0x738)][_0x425a0c(0x3a7)](_0x425a0c(0x795)),this[_0x425a0c(0x738)]['error'](_0x245cfd)),this[_0x425a0c(0x738)][_0x425a0c(0x514)](this[_0x425a0c(0x2af)]+'\x20('+this[_0x425a0c(0x448)][_0x425a0c(0x219)]+_0x425a0c(0x3a8)+(_0x245cfd['key']?.[_0x425a0c(0x123)]?_0x425a0c(0x278):'recebido\x20de')+'\x20['+_0x245cfd['key']?.['remoteJid'][_0x425a0c(0x1c6)](_0x425a0c(0x482),'')+_0x425a0c(0x7d2)+_0x245cfd[_0x425a0c(0x6d2)]+')'),_0x245cfd[_0x425a0c(0x36c)]?.['text']&&this[_0x425a0c(0x738)][_0x425a0c(0x514)](_0x3c2d04[_0x425a0c(0x3fb)]['id']+':\x20'+_0x245cfd[_0x425a0c(0x36c)]?.[_0x425a0c(0x284)]),await this[_0x425a0c(0x610)][_0x425a0c(0x4ab)][_0x425a0c(0x28b)]([_0x245cfd],this['instance'][_0x425a0c(0x219)]),this[_0x425a0c(0x4d2)](_0x425a0c(0x619),_0x245cfd),q(this[_0x425a0c(0x2af)],_0x425a0c(0x6ae),{'message':_0x245cfd}),_0x3c2d04[_0x425a0c(0x3fb)]['remoteJid']!==_0x425a0c(0x15e)&&await this[_0x425a0c(0x65d)](_0x727041,_0x245cfd,_0x425a0c(0x2c8));}},'messages.update':async(_0x23eeb4,_0x57c87e)=>{const _0x510a87=_0x29168c;let _0x48403a={0x0:_0x510a87(0x580),0x1:_0x510a87(0x454),0x2:_0x510a87(0x171),0x3:_0x510a87(0x296),0x4:_0x510a87(0x64e),0x5:_0x510a87(0x587)};for await(let {key:_0x349a60,update:_0x5112e8}of _0x23eeb4){if(this['localWebhook']?.[_0x510a87(0x690)]&&_0x349a60[_0x510a87(0x6d5)][_0x510a87(0x43a)](_0x510a87(0x78a))){this['logger'][_0x510a87(0x592)](this[_0x510a87(0x2af)]+'\x20('+this[_0x510a87(0x448)][_0x510a87(0x219)]+_0x510a87(0x58a));return;}if(_0x349a60['remoteJid']!==_0x510a87(0x15e)){let _0x11f799=Date[_0x510a87(0x183)](),_0x5a3ff5;_0x5112e8[_0x510a87(0x4ab)]===null&&_0x5112e8[_0x510a87(0x233)]===void 0x0?_0x5a3ff5=_0x510a87(0x217):_0x5a3ff5=_0x48403a[_0x5112e8['status']];let _0x576aed=_0x349a60[_0x510a87(0x6d5)][_0x510a87(0x1c6)](/:\d{1,2}@/g,'@'),_0x591de0={..._0x349a60,'remoteJid':_0x576aed,'status':_0x5a3ff5,'datetime':_0x11f799,'owner':this[_0x510a87(0x448)]['wuid']};this[_0x510a87(0x4d2)]('messages.update',_0x591de0),await this[_0x510a87(0x6fb)](_0x349a60,_0x591de0);}}},'labels.association':async({type:_0x4e3155,association:_0x11caa3})=>{const _0x5c8417=_0x29168c;if(_0x11caa3['type']===_0x5c8417(0x61c)){let _0x2ab0e1,_0x3d2c0d=0x0;for(;!_0x2ab0e1&&_0x3d2c0d<this[_0x5c8417(0x763)];)_0x2ab0e1=await this[_0x5c8417(0x610)][_0x5c8417(0x273)]['findOne']({'where':{'_id':_0x11caa3[_0x5c8417(0x782)]}},this[_0x5c8417(0x448)][_0x5c8417(0x219)]),_0x2ab0e1||(_0x3d2c0d++,this[_0x5c8417(0x738)]['info'](this[_0x5c8417(0x2af)]+'\x20('+this[_0x5c8417(0x448)][_0x5c8417(0x219)]+_0x5c8417(0x39a)+_0x11caa3[_0x5c8417(0x782)]+'\x20no\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20'+this[_0x5c8417(0x2fa)]+_0x5c8417(0x492)+_0x3d2c0d+'/'+this[_0x5c8417(0x763)]+')'),await this[_0x5c8417(0x581)](this[_0x5c8417(0x2fa)]));if(!_0x2ab0e1){this[_0x5c8417(0x738)]['error'](_0x5c8417(0xb0)+_0x11caa3[_0x5c8417(0x782)]+_0x5c8417(0x696)+this[_0x5c8417(0x763)]+_0x5c8417(0x19e));return;}switch(_0x4e3155){case'add':console[_0x5c8417(0x514)](_0x11caa3),await this['repository']['chat']['updateOne']({'where':{'_id':_0x11caa3['chatId']}},{'leadInfo.etiquetas':_0x11caa3[_0x5c8417(0xe3)]},this[_0x5c8417(0x448)][_0x5c8417(0x219)],void 0x0,_0x5c8417(0x1cb));break;case _0x5c8417(0x109):console[_0x5c8417(0x514)](_0x11caa3),await this['repository'][_0x5c8417(0x273)]['updateOne']({'where':{'_id':_0x11caa3[_0x5c8417(0x782)]}},{'leadInfo.etiquetas':_0x11caa3[_0x5c8417(0xe3)]},this[_0x5c8417(0x448)]['wuid'],void 0x0,_0x5c8417(0x684));break;default:this[_0x5c8417(0x738)][_0x5c8417(0x3a7)]('unknown\x20operation\x20type\x20['+_0x4e3155+']');}}},'labels.edit':async _0x1ad083=>{const _0x54fac2=_0x29168c;if(!_0x1ad083||!_0x1ad083['id']){this[_0x54fac2(0x738)]['error'](_0x54fac2(0x4a5));return;}if(!_0x1ad083[_0x54fac2(0x1e9)]){let _0x528a73=[_0x54fac2(0x7ce),_0x54fac2(0x29f),_0x54fac2(0x600),'#dfaef0',_0x54fac2(0x572),_0x54fac2(0x1ec),_0x54fac2(0x593),_0x54fac2(0xb3),_0x54fac2(0x20c),_0x54fac2(0x89),_0x54fac2(0x594),'#ffc5c7',_0x54fac2(0x5ec),_0x54fac2(0x318),_0x54fac2(0x54e),'#83e421',_0x54fac2(0x3dc),'#b4ebff','#9ba6ff',_0x54fac2(0x30a)],_0x42cf60;typeof _0x1ad083[_0x54fac2(0x612)]=='number'&&_0x1ad083[_0x54fac2(0x612)]>=0x0&&_0x1ad083[_0x54fac2(0x612)]<_0x528a73[_0x54fac2(0x3c8)]?_0x42cf60=_0x528a73[_0x1ad083[_0x54fac2(0x612)]]:(this[_0x54fac2(0x738)][_0x54fac2(0x3a7)](_0x54fac2(0x4b0)+_0x1ad083['color']),_0x42cf60=_0x54fac2(0x765));let _0xb9b43b={'_id':_0x1ad083['id'],'colorHex':_0x42cf60,'color':_0x1ad083?.[_0x54fac2(0x612)],'name':_0x1ad083?.[_0x54fac2(0x26b)],'owner':this['instance'][_0x54fac2(0x219)]};await this[_0x54fac2(0x610)][_0x54fac2(0x396)]['updateOne']({'where':{'_id':_0x1ad083['id']}},_0xb9b43b,this['instance'][_0x54fac2(0x219)]),this['logger'][_0x54fac2(0x685)](this[_0x54fac2(0x2af)]+'\x20('+this[_0x54fac2(0x448)]['wuid']+'):\x20Rtulo\x20atualizado:\x20'+_0x1ad083);}_0x1ad083[_0x54fac2(0x1e9)]&&(await this['repository']['label'][_0x54fac2(0x23f)]({'where':{'_id':_0x1ad083['id']}},this[_0x54fac2(0x448)]['wuid']),this[_0x54fac2(0x738)]['info'](_0x54fac2(0x276)+_0x1ad083['id']));}},this[_0x29168c(0x243)]={'groups.upsert':async _0x28dd65=>{const _0xfb3dd9=_0x29168c;this[_0xfb3dd9(0x4b4)]?.[_0xfb3dd9(0x690)]||this[_0xfb3dd9(0x4d2)]('groups.upsert',_0x28dd65);for(let _0x103146 of _0x28dd65)await this[_0xfb3dd9(0x6d0)](_0x103146);},'groups.update':async _0x34f7f9=>{const _0x2df7e8=_0x29168c;this[_0x2df7e8(0x4b4)]?.['groups_ignore']||this['sendDataWebhook'](_0x2df7e8(0x485),_0x34f7f9);for(let _0x4d2fa4 of _0x34f7f9)await this[_0x2df7e8(0x6d0)](_0x4d2fa4);},'group-participants.update':async _0x52644f=>{const _0x556ec8=_0x29168c;this[_0x556ec8(0x4b4)]?.[_0x556ec8(0x690)]||this[_0x556ec8(0x4d2)](_0x556ec8(0x665),_0x52644f),await this['updateGroupParticipantsWebhook'](_0x52644f);}},this[_0x29168c(0x763)]=0x5,this[_0x29168c(0x2fa)]=0x1388,this[_0x29168c(0x1fa)]=0x0,this['processPollUpdateMessage']=async _0x3602f6=>{const _0x2533de=_0x29168c;if(_0x3602f6['message']?.[_0x2533de(0x2a5)]){let _0x575900=await this['getMessage'](_0x3602f6['message']['pollUpdateMessage']['pollCreationMessageKey'],!0x0);if(_0x575900){let _0x3d0f1f=_0x575900[_0x2533de(0x3fb)]['fromMe']?this[_0x2533de(0x448)][_0x2533de(0x219)]+_0x2533de(0x482):_0x575900[_0x2533de(0x3fb)][_0x2533de(0x762)]||_0x575900[_0x2533de(0x3fb)][_0x2533de(0x6d5)],_0x2bed0e=_0x575900['key']['id'],_0x2528b6=_0x575900[_0x2533de(0x4ab)],_0x104231=Buffer['from'](_0x2528b6[_0x2533de(0x5fd)][_0x2533de(0x458)][_0x2533de(0x2eb)](_0x2533de(0x110)),_0x2533de(0x110)),_0x11d027=(0x0,w[_0x2533de(0x242)])(_0x3602f6[_0x2533de(0x4ab)][_0x2533de(0x2a5)][_0x2533de(0x1bf)],{'pollCreatorJid':_0x3d0f1f,'pollMsgId':_0x2bed0e,'pollEncKey':_0x104231,'voterJid':_0x3602f6[_0x2533de(0x3fb)][_0x2533de(0x123)]?this['instance']['wuid']+_0x2533de(0x482):_0x3602f6['key'][_0x2533de(0x6d5)]['endsWith'](_0x2533de(0x367))?_0x3602f6[_0x2533de(0x3fb)][_0x2533de(0x762)]:_0x3602f6[_0x2533de(0x3fb)][_0x2533de(0x6d5)]}),_0x18ed5a=[],_0x56c215=_0x11d027[_0x2533de(0x355)][_0x2533de(0x23a)](_0x165d69=>Buffer[_0x2533de(0x2ab)](_0x165d69)[_0x2533de(0x2eb)](_0x2533de(0x110)));for(let {optionName:_0x1a7022}of _0x2528b6[_0x2533de(0xc0)]?.[_0x2533de(0x13d)]||_0x2528b6[_0x2533de(0x548)]?.['options']||_0x2528b6['pollCreationMessageV2']?.[_0x2533de(0x13d)])_0x56c215['indexOf']((0x0,w[_0x2533de(0x6a8)])(Buffer[_0x2533de(0x2ab)](_0x1a7022))[_0x2533de(0x2eb)](_0x2533de(0x110)))>-0x1&&_0x18ed5a['push'](_0x1a7022);return _0x18ed5a;}}return null;},this[_0x29168c(0x722)]=(_0x912ee4,_0x29c033,_0x15dbc6)=>{const _0x237094=_0x29168c;try{let _0x28fbc2=_0x912ee4?(0x0,w[_0x237094(0x2b9)])(_0x912ee4)[_0x29c033]:void 0x0,_0x51793f={},_0x242e01=null,_0xfc072d=null,_0x1b664a=null;_0x29c033==='protocolMessage'&&_0x28fbc2?.[_0x237094(0x17b)]&&(_0x29c033=(0x0,w['getContentType'])(_0x28fbc2[_0x237094(0x17b)]),_0x242e01=_0x912ee4[_0x237094(0x506)][_0x237094(0x3fb)]['id'],_0x28fbc2=_0x912ee4['protocolMessage'][_0x237094(0x17b)][_0x29c033]),_0x912ee4[_0x29c033]?.[_0x237094(0x61b)]?.['stanzaId']&&_0x912ee4[_0x29c033]?.[_0x237094(0x61b)]?.[_0x237094(0x5cf)]&&(_0xfc072d=_0x912ee4[_0x29c033][_0x237094(0x61b)][_0x237094(0x7a9)]),_0x912ee4[_0x237094(0x359)]&&(_0x1b664a=_0x912ee4[_0x237094(0x359)][_0x237094(0x3fb)]['id']);let _0x368afa;if(_0x28fbc2&&typeof _0x28fbc2==_0x237094(0x4f6)&&_0x237094(0x398)in _0x28fbc2&&({pollCreationMessageKey:_0x368afa}=_0x28fbc2),_0x29c033===_0x237094(0xc0)||_0x29c033===_0x237094(0x101)||_0x29c033===_0x237094(0x548)){let _0x2d3515=_0x28fbc2[_0x237094(0x13d)][_0x237094(0x23a)](_0x30f535=>_0x30f535[_0x237094(0x1db)])[_0x237094(0x4c9)]('|');_0x51793f[_0x237094(0x748)]=_0x2d3515;}let _0x5115c2='';if(_0x28fbc2&&(_0x5115c2+=_0x28fbc2[_0x237094(0x26b)]?_0x28fbc2[_0x237094(0x26b)]:'',_0x5115c2+=_0x28fbc2['caption']?'\x20'+_0x28fbc2[_0x237094(0x31e)]:'',_0x5115c2+=_0x28fbc2[_0x237094(0x621)]?'\x20'+_0x28fbc2[_0x237094(0x621)]:'',_0x5115c2+=_0x28fbc2[_0x237094(0x77e)]?'\x20'+_0x28fbc2[_0x237094(0x77e)]:''),_0x29c033==='listMessage'){_0x5115c2=(_0x28fbc2[_0x237094(0x399)]||'')+'\x0a'+(_0x28fbc2[_0x237094(0x53f)]||'')+'\x0a'+(_0x28fbc2[_0x237094(0x383)]||'');let _0x46d928=this[_0x237094(0x1b9)](_0x28fbc2[_0x237094(0x4ae)]);_0x51793f['convertedOptions']=_0x46d928;}if(_0x29c033===_0x237094(0x7d)&&(_0x15dbc6=_0x28fbc2[_0x237094(0x399)]),_0x28fbc2&&_0x28fbc2['vcard']){let _0x286db5=this[_0x237094(0x534)](JSON['stringify'](_0x28fbc2[_0x237094(0x755)],null,0x2));_0x5115c2=_0x5115c2+'\x0a'+_0x286db5;}if(_0x28fbc2){let {sections:_0x46b9bf,listType:_0x2a45e6,displayName:_0x4d627a,vcard:_0x1d968b,contactVcard:_0x551b82,name:_0x126af6,caption:_0x2e0880,conversation:_0x44c4ac,pollCreationMessageKey:_0x5f2c44,footerText:_0x185988,contentText:_0x5aa0ac,pageCount:_0x437548,headerType:_0x33df00,isAvatar:_0x45b069,isAnimated:_0x1caf3b,fallbackLc:_0x4f3aea,fallbackLg:_0x5299bd,namespace:_0x11c7f2,elementName:_0x4d6f0f,localizableParams:_0x20bcea,viewOnce:_0x1954df,height:_0x1e663d,width:_0x316ae0,key:_0x53f760,firstScanLength:_0x1bec38,firstScanSidecar:_0x3d130a,gifPlayback:_0x41743e,gifAttribution:_0x43583d,midQualityFileSha256:_0x394372,scansSidecar:_0x2a0d30,streamingSidecar:_0x3ff7ab,thumbnailHeight:_0x11ad7b,thumbnailWidth:_0x2ec481,thumbnailEncSha256:_0x1919ec,thumbnailDirectPath:_0x2cfd90,canonicalUrl:_0x280776,matchedText:_0x35d570,previewType:_0x375b30,thumbnailSha256:_0x32fdd3,deviceListMetadataVersion:_0x3a1509,inviteLinkGroupTypeV2:_0x6de13d,interactiveAnnotations:_0x27763a,scanLengths:_0x4f38db,jpegThumbnail:_0x3561e5,url:_0x230a0b,mediaKeyTimestamp:_0xf757c,waveform:_0x5dc9bc,stickerSentTs:_0x52a31a,firstFrameLength:_0x19063c,fileEncSha256:_0x586554,contextInfo:_0x4321dc,firstFrameSidecar:_0x2accd7,directPath:_0x593b09,fileSha256:_0x3d2ddc,mediaKey:_0x5c2ed2,senderTimestampMs:_0x5b715c,..._0x42b774}=_0x28fbc2;(_0x29c033===_0x237094(0x1f2)||_0x29c033===_0x237094(0x7d))&&(delete _0x42b774[_0x237094(0x399)],delete _0x42b774[_0x237094(0x53f)]),typeof _0x28fbc2==_0x237094(0x20d)?_0x51793f={'text':_0x28fbc2,'type':_0x29c033||_0x237094(0x621),..._0x242e01&&{'edited':_0x242e01},..._0xfc072d&&{'quoted':_0xfc072d},..._0x1b664a&&{'reaction':_0x1b664a}}:_0x51793f={'text':_0x5115c2,..._0x42b774,..._0x29c033===_0x237094(0x2a5)?{'poll_id':_0x28fbc2[_0x237094(0x398)]['id'],'quoted':_0x28fbc2[_0x237094(0x398)]['id'],'vote':_0x15dbc6}:{},..._0x29c033==='listResponseMessage'?{'vote':_0x15dbc6}:{},'type':_0x29c033,..._0x242e01&&{'edited':_0x242e01},..._0xfc072d&&{'quoted':_0xfc072d},..._0x1b664a&&{'reaction':_0x1b664a},...(_0x29c033===_0x237094(0xc0)||_0x29c033===_0x237094(0x101)||_0x29c033===_0x237094(0x548)||_0x29c033===_0x237094(0x1f2))&&{'convertedOptions':_0x51793f['convertedOptions']}};}return{'messageType':_0x29c033,'messageContent':_0x28fbc2,'message_normalized':_0x51793f};}catch(_0x300bae){return this[_0x237094(0x738)][_0x237094(0x3a7)]('Erro\x20ao\x20normalizar\x20a\x20mensagem:'+_0x300bae),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x29168c(0x4b1)]=new Ls[(_0x29168c(0x7af))](),this[_0x29168c(0x520)]=new Ls[(_0x29168c(0x7af))](),this[_0x29168c(0x267)]=null,this[_0x29168c(0x169)]=[],(this[_0x29168c(0x460)](),this['instance'][_0x29168c(0x7bd)]={'count':0x0},this[_0x29168c(0x448)][_0x29168c(0x6e2)]={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}set[a0_0x3b8fac(0x2af)](_0xcec0a2){const _0x50ca4c=a0_0x3b8fac;if(!_0xcec0a2){this[_0x50ca4c(0x448)]['name']=(0x0,xi['v4'])();return;}this[_0x50ca4c(0x448)]['name']=_0xcec0a2,this['sendDataWebhook']('status.instance',{'instance':this[_0x50ca4c(0x448)]['name'],'status':'created'});}get[a0_0x3b8fac(0x2af)](){const _0x535868=a0_0x3b8fac;return this[_0x535868(0x448)][_0x535868(0x26b)];}get['wuid'](){const _0x36377c=a0_0x3b8fac;return this[_0x36377c(0x448)][_0x36377c(0x219)];}async['getProfileName'](){const _0x5243a2=a0_0x3b8fac;let _0x3bc0e2=this[_0x5243a2(0x488)][_0x5243a2(0x4f4)]?.[_0x5243a2(0x26b)]??this[_0x5243a2(0x488)][_0x5243a2(0x4f4)]?.[_0x5243a2(0xcc)];if(!_0x3bc0e2){if(this[_0x5243a2(0x2e2)][_0x5243a2(0x184)](_0x5243a2(0x22d))['ENABLED']){let _0x54d704=await R[_0x5243a2(0x53b)]()['db'](this[_0x5243a2(0x2e2)][_0x5243a2(0x184)](_0x5243a2(0x22d))[_0x5243a2(0x41a)][_0x5243a2(0xb6)]+_0x5243a2(0xeb))['collection'](this['instanceName'])[_0x5243a2(0x7ac)]({'_id':_0x5243a2(0x16a)});if(_0x54d704){let _0x2cb345=JSON[_0x5243a2(0x224)](JSON[_0x5243a2(0x5e5)](_0x54d704),w[_0x5243a2(0x461)][_0x5243a2(0x2bd)]);_0x3bc0e2=_0x2cb345['me']?.[_0x5243a2(0x26b)]||_0x2cb345['me']?.[_0x5243a2(0xcc)];}}else{if((0x0,Fe[_0x5243a2(0x550)])((0x0,j[_0x5243a2(0x4c9)])(Me,this[_0x5243a2(0x2af)],_0x5243a2(0x6f0)))){let _0x3f483b=JSON['parse']((0x0,Fe['readFileSync'])((0x0,j['join'])(Me,this[_0x5243a2(0x2af)],_0x5243a2(0x6f0)),{'encoding':_0x5243a2(0xc1)}));_0x3bc0e2=_0x3f483b['me']?.['name']||_0x3f483b['me']?.[_0x5243a2(0xcc)];}}}return _0x3bc0e2;}get[a0_0x3b8fac(0x1b1)](){const _0x3f04a6=a0_0x3b8fac;return this[_0x3f04a6(0x448)][_0x3f04a6(0x1b1)];}get[a0_0x3b8fac(0x754)](){const _0x2a6250=a0_0x3b8fac;return this[_0x2a6250(0x448)]['qrcode']?.['pairingCode']?{'pairingCode':this['instance'][_0x2a6250(0x7bd)]?.[_0x2a6250(0xb1)]}:{'code':this[_0x2a6250(0x448)]['qrcode']?.['code'],'base64':this['instance'][_0x2a6250(0x7bd)]?.[_0x2a6250(0x456)]};}async[a0_0x3b8fac(0x773)](){const _0x5e6de7=a0_0x3b8fac;let _0x3425a4=await this[_0x5e6de7(0x610)][_0x5e6de7(0x4c4)][_0x5e6de7(0x7a1)](this[_0x5e6de7(0x2af)]);this[_0x5e6de7(0x4b4)]['url']=_0x3425a4?.[_0x5e6de7(0x772)],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x1d1)]=_0x3425a4?.[_0x5e6de7(0x1d1)],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x67a)]=_0x3425a4?.['local_map'],this['localWebhook'][_0x5e6de7(0x193)]=_0x3425a4?.['STATUS_INSTANCE'],this[_0x5e6de7(0x4b4)]['QRCODE_UPDATED']=_0x3425a4?.['QRCODE_UPDATED'],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x777)]=_0x3425a4?.[_0x5e6de7(0x777)],this['localWebhook'][_0x5e6de7(0x2c8)]=_0x3425a4?.[_0x5e6de7(0x2c8)],this['localWebhook'][_0x5e6de7(0x329)]=_0x3425a4?.['MESSAGES_UPDATE'],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x4f1)]=_0x3425a4?.[_0x5e6de7(0x4f1)],this['localWebhook'][_0x5e6de7(0x4d6)]=_0x3425a4?.['GROUPS_UPDATE'],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x3c3)]=_0x3425a4?.['GROUP_PARTICIPANTS_UPDATE'],this['localWebhook'][_0x5e6de7(0x37d)]=_0x3425a4?.[_0x5e6de7(0x37d)],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x5f2)]=_0x3425a4?.['CHATS_UPSERT'],this['localWebhook'][_0x5e6de7(0x216)]=_0x3425a4?.[_0x5e6de7(0x216)],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x354)]=_0x3425a4?.[_0x5e6de7(0x354)],this['localWebhook']['CONTACTS_SET']=_0x3425a4?.[_0x5e6de7(0x2d6)],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x385)]=_0x3425a4?.[_0x5e6de7(0x385)],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x71a)]=_0x3425a4?.[_0x5e6de7(0x71a)],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x1f6)]=_0x3425a4?.['PRESENCE_UPDATE'],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x58c)]=_0x3425a4?.[_0x5e6de7(0x58c)],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x495)]=_0x3425a4?.[_0x5e6de7(0x495)],this[_0x5e6de7(0x4b4)][_0x5e6de7(0x690)]=_0x3425a4?.[_0x5e6de7(0x690)];}async['setWebhook'](_0x4d3835){const _0x9eff5f=a0_0x3b8fac;let _0x2da6cc=[_0x9eff5f(0x4ff),_0x9eff5f(0x772),'enabled',_0x9eff5f(0x67a),_0x9eff5f(0x193),_0x9eff5f(0x500),_0x9eff5f(0x329),_0x9eff5f(0x2c8),_0x9eff5f(0x777),_0x9eff5f(0x4f1),_0x9eff5f(0x4d6),_0x9eff5f(0x3c3),'CHATS_SET',_0x9eff5f(0x5f2),_0x9eff5f(0x216),_0x9eff5f(0x354),_0x9eff5f(0x2d6),'CONTACTS_UPSERT',_0x9eff5f(0x71a),_0x9eff5f(0x1f6),_0x9eff5f(0x58c),_0x9eff5f(0x495),'groups_ignore'],_0x10530e={};return _0x2da6cc[_0x9eff5f(0x73e)](_0x4740a0=>{_0x4d3835[_0x4740a0]!==void 0x0&&(_0x10530e[_0x4740a0]=_0x4d3835[_0x4740a0]);}),_0x10530e[_0x9eff5f(0x772)]&&(_0x10530e['url']=_0x10530e[_0x9eff5f(0x772)][_0x9eff5f(0x73c)]()),await this[_0x9eff5f(0x610)][_0x9eff5f(0x4c4)]['create'](_0x10530e,this[_0x9eff5f(0x2af)]),Object[_0x9eff5f(0x6da)](this[_0x9eff5f(0x4b4)],_0x10530e),await this['repository'][_0x9eff5f(0x4c4)]['find'](this[_0x9eff5f(0x2af)]);}async[a0_0x3b8fac(0x6d7)](){const _0xfb1fd9=a0_0x3b8fac;return await this[_0xfb1fd9(0x610)][_0xfb1fd9(0x4c4)][_0xfb1fd9(0x7a1)](this['instanceName']);}async[a0_0x3b8fac(0x4d2)](_0x28258e,_0x3ac3d6){const _0x1ad5c1=a0_0x3b8fac;let _0x458614=_0x28258e['replace'](/[\.-]/gm,'_')[_0x1ad5c1(0x56d)](),_0x7b51bf=this['localWebhook'][_0x1ad5c1(0x1d1)]&&(0x0,L['isURL'])(this[_0x1ad5c1(0x4b4)][_0x1ad5c1(0x772)])?this[_0x1ad5c1(0x4b4)]['url']+(this['localWebhook'][_0x1ad5c1(0x67a)]?this[_0x1ad5c1(0x3f5)][_0x28258e]:''):null,_0x328bce=this['localWebhook'][_0x458614],_0x3d2394=me&&me[_0x1ad5c1(0x1d1)]&&(0x0,L['isURL'])(me[_0x1ad5c1(0x772)])?me[_0x1ad5c1(0x772)]+(me[_0x1ad5c1(0x67a)]?this['webhookMap'][_0x28258e]:''):null,_0x3505c7=me?me[_0x458614]:null;if(_0x328bce&&_0x7b51bf)try{await te[_0x1ad5c1(0x151)]['create']({'baseURL':_0x7b51bf})[_0x1ad5c1(0x154)]('',{'event':_0x28258e,'instance':this[_0x1ad5c1(0x448)][_0x1ad5c1(0x26b)],'apikey':this[_0x1ad5c1(0x448)]['apikey'],'data':_0x3ac3d6}),this[_0x1ad5c1(0x738)]['log'](this[_0x1ad5c1(0x2af)]+'\x20('+this['instance'][_0x1ad5c1(0x219)]+_0x1ad5c1(0x590)+_0x28258e+':\x20'+_0x7b51bf);}catch{this['logger'][_0x1ad5c1(0x3a7)](this['instanceName']+'\x20('+this['instance'][_0x1ad5c1(0x219)]+_0x1ad5c1(0x6ba)+_0x28258e+':\x20'+_0x7b51bf);}if(_0x3505c7&&_0x3d2394)try{await te['default'][_0x1ad5c1(0x2c0)]({'baseURL':_0x3d2394})[_0x1ad5c1(0x154)]('',{'event':_0x28258e,'instance':this['instance']['name'],'apikey':this['instance'][_0x1ad5c1(0x129)],'data':_0x3ac3d6}),this[_0x1ad5c1(0x738)][_0x1ad5c1(0x514)](this['instanceName']+'\x20('+this['instance'][_0x1ad5c1(0x219)]+_0x1ad5c1(0x59e)+_0x28258e+':\x20'+_0x3d2394);}catch{this[_0x1ad5c1(0x738)][_0x1ad5c1(0x3a7)](this['instanceName']+'\x20('+this[_0x1ad5c1(0x448)][_0x1ad5c1(0x219)]+_0x1ad5c1(0x10d)+_0x28258e+':\x20'+_0x3d2394);}}async[a0_0x3b8fac(0x189)]({qr:_0x2b9bc6,connection:_0x4b6239,lastDisconnect:_0x54039e}){const _0x1beec0=a0_0x3b8fac;if(_0x2b9bc6){if(this[_0x1beec0(0x448)]['qrcode'][_0x1beec0(0x22f)]===Uo)return this[_0x1beec0(0x4d2)]('qrcode.updated',{'message':'Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcanada,\x20crie\x20outra\x20instncia...','statusCode':w[_0x1beec0(0x6f4)][_0x1beec0(0x618)]}),this[_0x1beec0(0x7b1)]={'state':_0x1beec0(0x403),'statusReason':w[_0x1beec0(0x6f4)][_0x1beec0(0x62b)]},this[_0x1beec0(0x4d2)](_0x1beec0(0x2fb),{'instance':this[_0x1beec0(0x448)][_0x1beec0(0x26b)],...this[_0x1beec0(0x7b1)]}),this['sendDataWebhook'](_0x1beec0(0x798),{'instance':this[_0x1beec0(0x448)]['name'],'status':_0x1beec0(0x96)}),this[_0x1beec0(0x610)][_0x1beec0(0x66e)]['delete'](this[_0x1beec0(0x448)][_0x1beec0(0x26b)]),this[_0x1beec0(0x23b)]=!0x0,re[_0x1beec0(0x212)](K,this[_0x1beec0(0x448)][_0x1beec0(0x26b)]),this[_0x1beec0(0x1e3)][_0x1beec0(0x6bc)](_0x1beec0(0xc7),this[_0x1beec0(0x448)][_0x1beec0(0x26b)]);this[_0x1beec0(0x448)][_0x1beec0(0x7bd)][_0x1beec0(0x22f)]++;let _0xf36e90={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x1beec0(0x72b),'dark':_0x1beec0(0x765)}};Di[_0x1beec0(0x151)]['toDataURL'](_0x2b9bc6,_0xf36e90,(_0x124007,_0x49df8e)=>{const _0x3aac52=_0x1beec0;if(_0x124007){this[_0x3aac52(0x738)][_0x3aac52(0x3a7)](this[_0x3aac52(0x2af)]+'\x20('+this['instance'][_0x3aac52(0x219)]+_0x3aac52(0x234)+(_0x124007 instanceof Error?_0x124007[_0x3aac52(0x4ab)]:JSON[_0x3aac52(0x5e5)](_0x124007,null,0x2)));return;}this[_0x3aac52(0x448)][_0x3aac52(0x7bd)][_0x3aac52(0x456)]=_0x49df8e,this[_0x3aac52(0x448)]['qrcode'][_0x3aac52(0x5e3)]=_0x2b9bc6,!this[_0x3aac52(0x316)]&&this[_0x3aac52(0x4d2)](_0x3aac52(0x498),{'qrcode':{'instance':this[_0x3aac52(0x448)][_0x3aac52(0x26b)],'pairingCode':this[_0x3aac52(0x448)][_0x3aac52(0x7bd)][_0x3aac52(0xb1)],'code':_0x2b9bc6,'base64':_0x49df8e}});}),this[_0x1beec0(0x316)]?this[_0x1beec0(0x448)][_0x1beec0(0x7bd)][_0x1beec0(0xb1)]||(await(0x0,w[_0x1beec0(0x332)])(0x7d0),this[_0x1beec0(0x448)][_0x1beec0(0x7bd)][_0x1beec0(0xb1)]=await this[_0x1beec0(0x488)][_0x1beec0(0x294)](this['phoneNumber'])):this[_0x1beec0(0x448)][_0x1beec0(0x7bd)][_0x1beec0(0xb1)]=null,Pi[_0x1beec0(0x151)][_0x1beec0(0x51d)](_0x2b9bc6,{'small':!0x0},_0x1c6573=>this['logger'][_0x1beec0(0x514)]('\x0a{\x20instance:\x20'+this[_0x1beec0(0x448)]['name']+_0x1beec0(0x38f)+this[_0x1beec0(0x448)][_0x1beec0(0x7bd)][_0x1beec0(0x22f)]+_0x1beec0(0x65a)+this['instance'][_0x1beec0(0x7bd)][_0x1beec0(0xb1)]+_0x1beec0(0x197)+_0x1c6573));}if(_0x4b6239&&(this[_0x1beec0(0x7b1)]={'state':_0x4b6239,'statusReason':_0x54039e?.[_0x1beec0(0x3a7)]?.[_0x1beec0(0x44d)]?.['statusCode']??0xc8},this[_0x1beec0(0x4d2)](_0x1beec0(0x2fb),{'instance':this['instance'][_0x1beec0(0x26b)],...this['stateConnection']})),_0x4b6239==='close'){if(this[_0x1beec0(0x6c9)]++,this[_0x1beec0(0x77a)][_0x1beec0(0x42a)](Date['now']()),this[_0x1beec0(0x77a)]=this['reconnectTimestamps'][_0x1beec0(0x34f)](_0x334522=>Date[_0x1beec0(0x183)]()-_0x334522<this[_0x1beec0(0x5d9)]),_0x54039e[_0x1beec0(0x3a7)]?.[_0x1beec0(0x44d)]?.[_0x1beec0(0x58b)]!==w['DisconnectReason']['loggedOut']){let _0x4ad53f=this[_0x1beec0(0x6c9)]<=0x1?0x0:Math[_0x1beec0(0x128)](Math[_0x1beec0(0x2fc)](0x2,this[_0x1beec0(0x6c9)]-0x1)*0x3e8,0x493e0);console[_0x1beec0(0x514)](this['instanceName']+'\x20Tentativa\x20de\x20reconexo\x20'+this[_0x1beec0(0x6c9)]+_0x1beec0(0x446)+_0x4ad53f/0x3e8+_0x1beec0(0x76f)),await new Promise(_0x880306=>setTimeout(_0x880306,_0x4ad53f)),console[_0x1beec0(0x514)]('Tentando\x20reconectar...'),await this['connectToWhatsapp']();}else{this[_0x1beec0(0x4d2)]('status.instance',{'instance':this[_0x1beec0(0x448)][_0x1beec0(0x26b)],'status':_0x1beec0(0x96)}),this[_0x1beec0(0x448)][_0x1beec0(0x6e2)]['isConnected']=!0x1,this[_0x1beec0(0x610)][_0x1beec0(0x4c4)]['delete'](this[_0x1beec0(0x2af)]),this[_0x1beec0(0x610)][_0x1beec0(0x66e)][_0x1beec0(0x2c0)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x1beec0(0x183)]()},this['instance'][_0x1beec0(0x26b)]),re['removeIPv6ById'](K,this['instance']['name']);try{this[_0x1beec0(0x738)][_0x1beec0(0x592)](this['instanceName']+'\x20('+this[_0x1beec0(0x448)][_0x1beec0(0x219)]+_0x1beec0(0x725));let _0x31e867=await this[_0x1beec0(0x610)][_0x1beec0(0x4ab)]['deleteAll'](this[_0x1beec0(0x448)]['wuid']);_0x31e867['success']?this[_0x1beec0(0x738)]['verbose'](this[_0x1beec0(0x2af)]+'\x20('+this[_0x1beec0(0x448)][_0x1beec0(0x219)]+_0x1beec0(0x6d6)):this[_0x1beec0(0x738)]['error'](_0x1beec0(0x6ee)+_0x31e867[_0x1beec0(0x3a7)]);}catch(_0x4f538e){this[_0x1beec0(0x738)][_0x1beec0(0x3a7)](_0x1beec0(0x34b)+_0x4f538e[_0x1beec0(0x4ab)]);}this[_0x1beec0(0x448)][_0x1beec0(0x6e2)][_0x1beec0(0x771)]!==null&&(this[_0x1beec0(0x738)]['verbose'](this[_0x1beec0(0x2af)]+'\x20('+this['instance'][_0x1beec0(0x219)]+_0x1beec0(0x541)),clearInterval(this[_0x1beec0(0x448)][_0x1beec0(0x6e2)][_0x1beec0(0x771)]),this[_0x1beec0(0x448)][_0x1beec0(0x6e2)][_0x1beec0(0x771)]=null),this[_0x1beec0(0x738)][_0x1beec0(0x592)](this[_0x1beec0(0x2af)]+'\x20('+this[_0x1beec0(0x448)][_0x1beec0(0x219)]+_0x1beec0(0x3f8)),this[_0x1beec0(0x351)]=null,this['eventEmitter'][_0x1beec0(0x6bc)](_0x1beec0(0x47c),this['instance'][_0x1beec0(0x26b)],'inner'),this[_0x1beec0(0x488)]?.['ws']?.[_0x1beec0(0x6a1)](),this[_0x1beec0(0x488)]['end'](new Error(_0x1beec0(0x4ef)));}}if(_0x4b6239==='open'){this[_0x1beec0(0x738)]['warn'](this['instanceName']+'\x20('+this[_0x1beec0(0x448)][_0x1beec0(0x219)]+'):\x20this.client.authState.creds?.myAppStateKeyId:\x20'+this['client'][_0x1beec0(0xb8)]['creds']?.['myAppStateKeyId']),this[_0x1beec0(0x488)][_0x1beec0(0xb8)][_0x1beec0(0x16a)]?.[_0x1beec0(0x27f)]||(this[_0x1beec0(0x738)][_0x1beec0(0x1a9)](this[_0x1beec0(0x2af)]+'\x20('+this[_0x1beec0(0x448)][_0x1beec0(0x219)]+_0x1beec0(0x2df)),this[_0x1beec0(0x488)]['ev'][_0x1beec0(0x5cb)]()),this['resetReconnectionVariables'],this['instance']['wuid']=this[_0x1beec0(0x488)][_0x1beec0(0x4f4)]['id'][_0x1beec0(0x1c6)](/:\d+/,'')[_0x1beec0(0x1c6)](_0x1beec0(0x482),''),this[_0x1beec0(0x448)][_0x1beec0(0x1b1)]=(await this[_0x1beec0(0x392)](this[_0x1beec0(0x448)][_0x1beec0(0x219)]+_0x1beec0(0x482)))[_0x1beec0(0x1b1)],this['repository'][_0x1beec0(0x66e)][_0x1beec0(0x2c0)]({'online':!0x0,'owner':this['instance']['wuid'],'lastDisconnect':null},this[_0x1beec0(0x448)]['name']);let _0x43a656='Nmero:\x20'+this['instance'][_0x1beec0(0x219)],_0x4d609d=0x28,_0x102eb5=Math[_0x1beec0(0x3e0)]((_0x4d609d-_0x43a656['length'])/0x2),_0x6bcc5b='\x20'['repeat'](_0x102eb5),_0x4e7858=_0x1beec0(0x7c6),_0x240f1a='Instncia:\x20'+this['instance']['name'],_0x3a19ed=(''+_0x6bcc5b+_0x43a656+_0x6bcc5b)['padEnd'](_0x4d609d,'\x20'),_0x47e883=(''+_0x6bcc5b+_0x4e7858+_0x6bcc5b)[_0x1beec0(0x70b)](_0x4d609d,'\x20'),_0x3f3455=(''+_0x6bcc5b+_0x240f1a+_0x6bcc5b)['padEnd'](_0x4d609d,'\x20'),_0x3a4a81=Math['max'](_0x3a19ed[_0x1beec0(0x3c8)],_0x47e883[_0x1beec0(0x3c8)],_0x3f3455['length']),_0x4c61b3=_0x3a19ed[_0x1beec0(0x70b)](_0x3a4a81,'\x20'),_0x1c9253=_0x47e883[_0x1beec0(0x70b)](_0x3a4a81,'\x20'),_0xf960aa=_0x3f3455[_0x1beec0(0x70b)](_0x3a4a81,'\x20');this[_0x1beec0(0x738)][_0x1beec0(0x685)]((_0x1beec0(0x146)+''[_0x1beec0(0x36a)](_0x3a4a81)+_0x1beec0(0xf4)+_0x1c9253+_0x1beec0(0x44b)+_0xf960aa+_0x1beec0(0x44b)+_0x4c61b3+_0x1beec0(0x49f)+''[_0x1beec0(0x36a)](_0x3a4a81)+'')['replace'](/^ +/gm,'\x20\x20')),this[_0x1beec0(0x613)](),this[_0x1beec0(0x448)][_0x1beec0(0x6e2)][_0x1beec0(0x2b2)]=!0x0;}}['resetReconnectionVariables'](){const _0x24d2b2=a0_0x3b8fac;this[_0x24d2b2(0x6c9)]=0x0,this[_0x24d2b2(0x77a)]=[];}async[a0_0x3b8fac(0x1a6)](_0x4c9285,_0xc54b97=!0x1){const _0x179638=a0_0x3b8fac;try{let _0x1c27b7=await this[_0x179638(0x610)][_0x179638(0x4ab)]['find']({'where':{'_id':_0x4c9285['id']}},this[_0x179638(0x448)][_0x179638(0x219)]);return _0xc54b97?_0x1c27b7[0x0]:_0x1c27b7[0x0]['message'];}catch{return{'conversation':''};}}['cleanStore'](){const _0x5bdd4d=a0_0x3b8fac;let _0x4981c8=this[_0x5bdd4d(0x2e2)][_0x5bdd4d(0x184)](_0x5bdd4d(0xa4)),_0x2c813c=this[_0x5bdd4d(0x2e2)][_0x5bdd4d(0x184)](_0x5bdd4d(0x22d));_0x4981c8?.[_0x5bdd4d(0x628)]&&!_0x2c813c[_0x5bdd4d(0x1fe)]&&setInterval(()=>{const _0x39951a=_0x5bdd4d;try{for(let [_0xc01be6,_0x49e393]of Object[_0x39951a(0x4b7)](_0x4981c8))_0x49e393===!0x0&&(0x0,Ue[_0x39951a(0xf9)])(_0x39951a(0x5cd)+(0x0,j[_0x39951a(0x4c9)])(this['storePath'],_0xc01be6[_0x39951a(0x106)](),this['instance'][_0x39951a(0x219)])+_0x39951a(0x5d6));}catch{}},(_0x4981c8?.['CLEANING_INTERVAL']??0xe10)*0x3e8);}async['defineAuthState'](){const _0x147bce=a0_0x3b8fac;let _0x4c3c7b=this[_0x147bce(0x2e2)][_0x147bce(0x184)]('DATABASE'),_0x380b0a=this[_0x147bce(0x2e2)][_0x147bce(0x184)]('REDIS');return _0x380b0a?.[_0x147bce(0x1fe)]?await xs(_0x380b0a,this['instance'][_0x147bce(0x26b)]):_0x4c3c7b['ENABLED']?await _s(this[_0x147bce(0x448)][_0x147bce(0x26b)]):await(0x0,w[_0x147bce(0x17e)])((0x0,j[_0x147bce(0x4c9)])(Me,this[_0x147bce(0x448)][_0x147bce(0x26b)]));}async[a0_0x3b8fac(0x613)](){const _0x22e2de=a0_0x3b8fac;let _0x44dd5b=()=>Math[_0x22e2de(0x3e0)](Math[_0x22e2de(0x334)]()*0x4e21)+0x7d0,_0x16c122=async()=>{const _0x5b08ee=_0x22e2de;if(!this['instance'][_0x5b08ee(0x6e2)][_0x5b08ee(0x2b2)]){this[_0x5b08ee(0x738)][_0x5b08ee(0x592)](this[_0x5b08ee(0x2af)]+'\x20('+this[_0x5b08ee(0x448)][_0x5b08ee(0x219)]+_0x5b08ee(0x785)),this[_0x5b08ee(0x4ba)]=!0x1;return;}if(this[_0x5b08ee(0x448)][_0x5b08ee(0x219)]&&this[_0x5b08ee(0x351)]&&this[_0x5b08ee(0x448)]['ScheduleMessage'][_0x5b08ee(0x771)]!==null&&this[_0x5b08ee(0x448)]['ScheduleMessage']['delayMessage']!==void 0x0){let _0x617d85=Math[_0x5b08ee(0x4ee)](this['instance'][_0x5b08ee(0x6e2)][_0x5b08ee(0x771)]/0xea60);this[_0x5b08ee(0x738)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x5b08ee(0x219)]+_0x5b08ee(0x1aa)+_0x617d85+_0x5b08ee(0x82)),this[_0x5b08ee(0x4ba)]=!0x1;return;}else this['instance'][_0x5b08ee(0x219)]&&(this[_0x5b08ee(0x738)][_0x5b08ee(0x592)](this[_0x5b08ee(0x2af)]+'\x20('+this[_0x5b08ee(0x448)][_0x5b08ee(0x219)]+'):\x20condies\x20no\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...'),this[_0x5b08ee(0x351)]||(await this[_0x5b08ee(0x407)](),this['findRealGroups'](),this['synchronizeAndMapFlows']()),(this[_0x5b08ee(0x448)]['ScheduleMessage'][_0x5b08ee(0x771)]===null||this['instance'][_0x5b08ee(0x6e2)][_0x5b08ee(0x771)]===void 0x0)&&await this[_0x5b08ee(0x24b)]());if(this[_0x5b08ee(0x4ba)]){let _0x3c256b=_0x44dd5b();this[_0x5b08ee(0x738)][_0x5b08ee(0x592)](this['instanceName']+_0x5b08ee(0x222)+_0x3c256b/0x3e8+_0x5b08ee(0x6eb)),setTimeout(_0x16c122,_0x3c256b);}};if(this['isRunning'])return;this[_0x22e2de(0x4ba)]=!0x0;let _0x5bf0df=_0x44dd5b();setTimeout(_0x16c122,_0x5bf0df);}async['synchronizeAndMapFlows'](){const _0x3146e4=a0_0x3b8fac;let _0x43b004=this['instance'][_0x3146e4(0x219)];try{let _0x88ccea=await this[_0x3146e4(0x610)][_0x3146e4(0x297)][_0x3146e4(0x4e0)]({'where':{'$or':[{'owner':_0x43b004},{'whoCanUse':{'$in':[_0x43b004]}},{'shareOwners':{'$in':[_0x43b004]}}]}}),_0x1c887a=new Map(this[_0x3146e4(0x351)][_0x3146e4(0x4c5)][_0x3146e4(0x23a)](_0x234875=>[_0x234875[_0x3146e4(0x4ff)],_0x234875])),_0x143638=_0x88ccea[_0x3146e4(0x23a)](_0x3dc9cb=>{const _0x347199=_0x3146e4;let _0x265d9c=_0x1c887a[_0x347199(0x184)](_0x3dc9cb[_0x347199(0x4ff)]?.[_0x347199(0x2eb)]());return{'_id':_0x3dc9cb[_0x347199(0x4ff)]?.['toString'](),'name':_0x265d9c?.['name']??_0x3dc9cb['name'],'default':_0x265d9c?.[_0x347199(0x151)]??_0x3dc9cb[_0x347199(0x151)]??!0x1,'startCommand':_0x265d9c?.['startCommand']??_0x3dc9cb[_0x347199(0x4fc)],'minutesToClose':_0x265d9c?.[_0x347199(0x373)]??_0x3dc9cb['minutesToClose']??0xa,'readMessages':_0x265d9c?.['readMessages']??_0x3dc9cb[_0x347199(0x198)]??!0x1,'testingWith':_0x265d9c?.['testingWith']??_0x3dc9cb[_0x347199(0x1c8)],'canEdit':_0x3dc9cb[_0x347199(0x7a2)]===_0x43b004||(_0x3dc9cb['whoCanEdit']??[])['includes'](_0x43b004),'usersCount':(_0x3dc9cb[_0x347199(0x432)]??[])[_0x347199(0x3c8)]??0x0};}),_0x5808fe=!0x1;_0x143638['forEach'](_0x2612ba=>{const _0x5e2843=_0x3146e4;_0x2612ba[_0x5e2843(0x151)]&&(_0x5808fe?_0x2612ba[_0x5e2843(0x151)]=!0x1:_0x5808fe=!0x0);}),this['AutomateSystem']['flows']=_0x143638;let _0xffc344={'flows':_0x143638};return await this[_0x3146e4(0x610)][_0x3146e4(0x241)][_0x3146e4(0x1b6)](_0xffc344,_0x43b004),this[_0x3146e4(0x738)][_0x3146e4(0x592)](this['instanceName']+'\x20('+_0x43b004+_0x3146e4(0x750)),_0x143638[_0x3146e4(0x3c8)];}catch(_0x47daf5){return this['logger'][_0x3146e4(0x3a7)](this[_0x3146e4(0x2af)]+'\x20('+_0x43b004+_0x3146e4(0x194)+(_0x47daf5 instanceof Error?_0x47daf5['message']:JSON[_0x3146e4(0x5e5)](_0x47daf5,null,0x2))),{'message':'Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20'+(_0x47daf5 instanceof Error?_0x47daf5[_0x3146e4(0x4ab)]:JSON[_0x3146e4(0x5e5)](_0x47daf5,null,0x2))};}}async[a0_0x3b8fac(0x3e2)](_0x4c7a64){const _0x519b13=a0_0x3b8fac;try{let _0x58e68d=await this[_0x519b13(0x610)][_0x519b13(0x448)][_0x519b13(0x7ac)]({'where':{'_id':K+'-'+this[_0x519b13(0x2af)]}}),_0x396779,_0x493aad=!re['ipv6Prefix']||!re['networkInterface'];console[_0x519b13(0x514)](_0x519b13(0x576)),console[_0x519b13(0x514)](_0x519b13(0x2ba),_i),console[_0x519b13(0x514)](_0x519b13(0x2ac),this[_0x519b13(0x6c9)]),console[_0x519b13(0x514)](_0x519b13(0x576)),_i&&!_0x493aad&&(this['reconnectAttempts']<0x4||!this[_0x519b13(0x6c9)]?_0x58e68d&&_0x58e68d['ip']?(_0x396779=_0x58e68d['ip'],console[_0x519b13(0x514)](_0x519b13(0x49c)+_0x396779)):(_0x396779=await re[_0x519b13(0x6d8)](K,this[_0x519b13(0x448)][_0x519b13(0x26b)]),_0x396779?(console[_0x519b13(0x514)](_0x519b13(0x445)+_0x396779),await(0x0,w[_0x519b13(0x332)])(0x7d0)):console['error']('Falha\x20ao\x20criar\x20IPv6.')):this['reconnectAttempts']<0x6&&(await re[_0x519b13(0x212)](K,this[_0x519b13(0x448)]['name']),console[_0x519b13(0x514)](_0x519b13(0x161)),_0x396779=await re[_0x519b13(0x6d8)](K,this[_0x519b13(0x448)][_0x519b13(0x26b)]),_0x396779?(console[_0x519b13(0x514)](_0x519b13(0x445)+_0x396779),await(0x0,w[_0x519b13(0x332)])(0x7d0)):console[_0x519b13(0x3a7)](_0x519b13(0x415)))),this[_0x519b13(0x773)](),this[_0x519b13(0x448)][_0x519b13(0x129)]=(await this[_0x519b13(0x610)][_0x519b13(0x66e)][_0x519b13(0x7a1)](this[_0x519b13(0x448)]['name']))['apikey'],this[_0x519b13(0x448)][_0x519b13(0xb8)]=await this[_0x519b13(0x357)]();let {version:_0xde9043}=await(0x0,w['fetchLatestBaileysVersion'])(),_0x10cf6a=[Li,js,(0x0,ks[_0x519b13(0x6aa)])()],_0x58ee18={'localAddress':_0x396779,'auth':{'creds':this[_0x519b13(0x448)][_0x519b13(0xb8)][_0x519b13(0x21b)][_0x519b13(0x16a)],'keys':(0x0,w[_0x519b13(0x2f4)])(this[_0x519b13(0x448)][_0x519b13(0xb8)]['state']['keys'],(0x0,qt[_0x519b13(0x151)])({'level':_0x519b13(0x3a7)}))},'logger':(0x0,qt[_0x519b13(0x151)])({'level':'error'}),'printQRInTerminal':!0x1,'browser':_0x4c7a64?[_0x519b13(0xe8),js,(0x0,ks['release'])()]:_0x10cf6a,'version':_0xde9043,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x313384=>{const _0x2d11e4=_0x519b13;let _0x45b496=this[_0x2d11e4(0x4b4)]?.['groups_ignore']&&(0x0,w[_0x2d11e4(0x2d0)])(_0x313384);return(0x0,w[_0x2d11e4(0x700)])(_0x313384)||_0x45b496;},'msgRetryCounterCache':this[_0x519b13(0x1ef)],'getMessage':async _0x4cf3b3=>await this[_0x519b13(0x1a6)](_0x4cf3b3),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x519b13(0x386)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0xf944a5){const _0x53f01b=_0x519b13;return _0xf944a5['deviceSentMessage']?.['message']?.['listMessage']?.['listType']===w[_0x53f01b(0x5f3)][_0x53f01b(0x654)]['ListMessage']['ListType'][_0x53f01b(0x499)]&&(_0xf944a5=JSON[_0x53f01b(0x224)](JSON[_0x53f01b(0x5e5)](_0xf944a5)),_0xf944a5[_0x53f01b(0x645)]['message']['listMessage']['listType']=w[_0x53f01b(0x5f3)][_0x53f01b(0x654)][_0x53f01b(0x57e)][_0x53f01b(0x2f2)][_0x53f01b(0x311)]),_0xf944a5[_0x53f01b(0x1f2)]?.[_0x53f01b(0x384)]==w['proto'][_0x53f01b(0x654)][_0x53f01b(0x57e)][_0x53f01b(0x2f2)][_0x53f01b(0x499)]&&(_0xf944a5=JSON[_0x53f01b(0x224)](JSON[_0x53f01b(0x5e5)](_0xf944a5)),_0xf944a5['listMessage'][_0x53f01b(0x384)]=w['proto'][_0x53f01b(0x654)][_0x53f01b(0x57e)]['ListType'][_0x53f01b(0x311)]),_0xf944a5;}};return this['endSession']=!0x1,this[_0x519b13(0x488)]=(0x0,w[_0x519b13(0x151)])(_0x58ee18),this['eventHandler'](),this[_0x519b13(0x316)]=_0x4c7a64,this[_0x519b13(0x488)];}catch(_0x3abbc7){let _0x3c572d=_0x519b13(0x3db),_0x12d080=_0x3abbc7 instanceof Error?_0x3abbc7[_0x519b13(0x4ab)]:typeof _0x3abbc7=='object'?JSON[_0x519b13(0x5e5)](_0x3abbc7):_0x3abbc7,_0x214ea5=_0x3c572d+':\x20'+_0x12d080;throw this[_0x519b13(0x738)][_0x519b13(0x3a7)](this[_0x519b13(0x2af)]+'\x20('+this[_0x519b13(0x448)]['wuid']+_0x519b13(0x3a8)+_0x214ea5),console['error'](_0x519b13(0x5d8),_0x3abbc7),_0x3abbc7 instanceof Error&&console['error'](_0x519b13(0xa6),_0x3abbc7['stack']),new x(_0x214ea5);}}[a0_0x3b8fac(0x12b)](){const _0x4eadc7=a0_0x3b8fac;this[_0x4eadc7(0x488)]['ev'][_0x4eadc7(0x5a7)](_0x713305=>{const _0x4114b2=_0x4eadc7;if(!this[_0x4114b2(0x23b)]){let _0x2fd90d=this[_0x4114b2(0x2e2)][_0x4114b2(0x184)]('DATABASE');if(_0x713305[_0x4114b2(0x75f)]){let _0x1fe750=_0x713305[_0x4114b2(0x75f)];this['messageHandle'][_0x4114b2(0x75f)](_0x1fe750);}if(_0x713305[_0x4114b2(0x3ec)]){let _0x1ed621=_0x713305['labels.association'];this[_0x4114b2(0x178)][_0x4114b2(0x3ec)](_0x1ed621);}if(_0x713305[_0x4114b2(0x2fb)]&&this[_0x4114b2(0x189)](_0x713305[_0x4114b2(0x2fb)]),_0x713305['creds.update']&&this[_0x4114b2(0x448)][_0x4114b2(0xb8)][_0x4114b2(0x734)](),_0x713305[_0x4114b2(0x6cb)]){let _0x5d565d=_0x713305['messaging-history.set'];this[_0x4114b2(0x178)][_0x4114b2(0x6cb)](_0x5d565d,_0x2fd90d);}if(_0x713305['messages.upsert']){let _0x5b1d80=_0x713305['messages.upsert'];this[_0x4114b2(0x178)][_0x4114b2(0x619)](_0x5b1d80,_0x2fd90d);}if(_0x713305[_0x4114b2(0x443)]){let _0x35788e=_0x713305[_0x4114b2(0x443)];this[_0x4114b2(0x178)]['messages.update'](_0x35788e,_0x2fd90d);}if(_0x713305[_0x4114b2(0x64b)]){let _0x25d6ee=_0x713305[_0x4114b2(0x64b)];if(this[_0x4114b2(0x4b4)]?.[_0x4114b2(0x690)]&&_0x25d6ee['id'][_0x4114b2(0x43a)](_0x4114b2(0x78a)))return;this[_0x4114b2(0x4d2)](_0x4114b2(0x64b),_0x25d6ee);}if(_0x713305[_0x4114b2(0x2e1)]){let _0x792570=_0x713305[_0x4114b2(0x2e1)];this[_0x4114b2(0x243)][_0x4114b2(0x2e1)](_0x792570);}if(_0x713305[_0x4114b2(0x485)]){let _0x577ebe=_0x713305['groups.update'];this[_0x4114b2(0x243)]['groups.update'](_0x577ebe);}if(_0x713305['group-participants.update']){let _0x18043b=_0x713305[_0x4114b2(0x665)];this[_0x4114b2(0x243)][_0x4114b2(0x665)](_0x18043b);}if(_0x713305[_0x4114b2(0xf1)]){let _0x15e1e9=_0x713305[_0x4114b2(0xf1)];this[_0x4114b2(0x5bd)][_0x4114b2(0xf1)](_0x15e1e9,_0x2fd90d);}if(_0x713305[_0x4114b2(0x455)]){let _0xa2f4f7=_0x713305[_0x4114b2(0x455)];this['chatHandle']['chats.update'](_0xa2f4f7,_0x2fd90d);}if(_0x713305[_0x4114b2(0x261)]){let _0x11866a=_0x713305['chats.delete'];this['chatHandle'][_0x4114b2(0x261)](_0x11866a);}if(_0x713305[_0x4114b2(0xe7)]){let _0x473470=_0x713305[_0x4114b2(0xe7)];this[_0x4114b2(0x707)]['contacts.upsert'](_0x473470,_0x2fd90d);}if(_0x713305['contacts.update']){let _0x31eab0=_0x713305['contacts.update'];this[_0x4114b2(0x707)]['contacts.update'](_0x31eab0,_0x2fd90d);}}});}async['retrySendMessage'](_0x414fa2,_0x5d4fdf){const _0x1fdc44=a0_0x3b8fac;if(_0x5d4fdf>=0xa){console[_0x1fdc44(0x3a7)](this[_0x1fdc44(0x2af)]+'\x20('+this[_0x1fdc44(0x448)][_0x1fdc44(0x219)]+_0x1fdc44(0x341)),delete Jt[_0x414fa2[_0x1fdc44(0x3fb)]['id']];return;}try{console[_0x1fdc44(0x3a7)](this[_0x1fdc44(0x2af)]+'\x20('+this[_0x1fdc44(0x448)][_0x1fdc44(0x219)]+'):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20'+(_0x5d4fdf+0x1)),await this[_0x1fdc44(0x488)][_0x1fdc44(0x745)](JSON[_0x1fdc44(0x224)](_0x414fa2['messageStubParameters'][0x1],w[_0x1fdc44(0x461)][_0x1fdc44(0x2bd)])),console['error'](_0x1fdc44(0x757));}catch(_0x3ca802){console[_0x1fdc44(0x3a7)](this[_0x1fdc44(0x2af)]+'\x20('+this[_0x1fdc44(0x448)][_0x1fdc44(0x219)]+_0x1fdc44(0x42b)+_0x3ca802),setTimeout(()=>this[_0x1fdc44(0x799)](_0x414fa2,_0x5d4fdf+0x1),Math[_0x1fdc44(0x2fc)](0x2,_0x5d4fdf)*0x3e8);}}['delayChatLabel'](_0x3f675a){return new Promise(_0x5dc72c=>setTimeout(_0x5dc72c,_0x3f675a));}[a0_0x3b8fac(0x255)](_0x5ba5c4){const _0x353888=a0_0x3b8fac;_0x5ba5c4=_0x5ba5c4[_0x353888(0x1c6)](/\D/g,'');let _0x1ef63e=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0x5ba5c4);if(_0x1ef63e&&_0x1ef63e[0x1]==='55'){let _0x37508c=_0x1ef63e[0x2],_0x10a825=_0x1ef63e[0x3],_0x346f61=_0x1ef63e[0x4];if(parseInt(_0x37508c)>=0x1f&&_0x10a825==='9')return _0x1ef63e[0x1]+_0x37508c+_0x346f61;}return _0x5ba5c4;}['createJid'](_0x4eca65){const _0x1e1ad1=a0_0x3b8fac;return _0x4eca65[_0x1e1ad1(0x43a)](_0x1e1ad1(0x78a))||_0x4eca65['includes']('@s.whatsapp.net')||_0x4eca65['includes'](_0x1e1ad1(0x79c))?_0x4eca65:(_0x4eca65=_0x4eca65?.[_0x1e1ad1(0x1c6)](/\s/g,'')[_0x1e1ad1(0x1c6)](/\+/g,'')['replace'](/\(/g,'')['replace'](/\)/g,'')['split'](/\:/)[0x0][_0x1e1ad1(0x45d)]('@')[0x0],_0x4eca65[_0x1e1ad1(0x3c8)]>=0x12?(_0x4eca65=_0x4eca65[_0x1e1ad1(0x1c6)](/[^\d-]/g,''),_0x4eca65+'@g.us'):(_0x4eca65=_0x4eca65[_0x1e1ad1(0x1c6)](/\D/g,''),_0x4eca65+_0x1e1ad1(0x482)));}async[a0_0x3b8fac(0x650)](_0x69b080){const _0x836e7e=a0_0x3b8fac;let _0x22db29=(await this[_0x836e7e(0x269)]({'numbers':[_0x69b080[_0x836e7e(0x377)]]}))[0x0];if(!_0x22db29[_0x836e7e(0x323)]&&!(0x0,w[_0x836e7e(0x2d0)])(_0x22db29[_0x836e7e(0x6ea)])&&!_0x22db29[_0x836e7e(0x6ea)]['includes'](_0x836e7e(0x79c)))throw new m(_0x22db29);let _0x56f439=_0x22db29['jid'];try{return await this[_0x836e7e(0x488)]['presenceSubscribe'](_0x56f439),await this[_0x836e7e(0x488)][_0x836e7e(0x15f)](_0x69b080[_0x836e7e(0x17a)],_0x56f439),{'status':0xc8,'presence':_0x69b080[_0x836e7e(0x17a)]};}catch(_0x3e2a46){let _0x42ab38=_0x836e7e(0x792),_0x6cf934=_0x3e2a46 instanceof Error?_0x3e2a46['message']:typeof _0x3e2a46==_0x836e7e(0x4f6)?JSON[_0x836e7e(0x5e5)](_0x3e2a46):_0x3e2a46,_0x130f92=_0x42ab38+':\x20'+_0x6cf934;throw this[_0x836e7e(0x738)][_0x836e7e(0x3a7)](this[_0x836e7e(0x2af)]+'\x20('+this[_0x836e7e(0x448)][_0x836e7e(0x219)]+_0x836e7e(0x3a8)+_0x130f92),new m(_0x130f92);}}async[a0_0x3b8fac(0x9a)](_0x24af4a,_0x1b7d16,_0x8e51e,_0x41bdd5=!0x0){const _0x1f4e22=a0_0x3b8fac;let _0x4665e2=await this['repository'][_0x1f4e22(0x20a)][_0x1f4e22(0x7ac)]({'where':{'_id':_0x24af4a}});if(!_0x4665e2&&!_0x41bdd5)return;let _0x123b90={'lastUpdate':Date[_0x1f4e22(0x183)]()};if(_0x8e51e||!_0x4665e2?.[_0x1f4e22(0xbb)]||Date['now']()-_0x4665e2[_0x1f4e22(0xbb)]>0x18*0x3c*0x3c*0x3e8)try{let _0x4cdc65=(await this['profilePicture'](_0x24af4a))[_0x1f4e22(0x1b1)];_0x123b90[_0x1f4e22(0x25a)]=_0x4cdc65;}catch(_0x322c3c){let _0x32df47='Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20findAndUpdateCacheContact',_0x4f5451=_0x322c3c instanceof Error?_0x322c3c[_0x1f4e22(0x4ab)]:typeof _0x322c3c==_0x1f4e22(0x4f6)?JSON[_0x1f4e22(0x5e5)](_0x322c3c):_0x322c3c,_0x35eb0c=_0x32df47+':\x20'+_0x4f5451;throw this[_0x1f4e22(0x738)]['error'](this[_0x1f4e22(0x2af)]+'\x20('+this[_0x1f4e22(0x448)][_0x1f4e22(0x219)]+_0x1f4e22(0x3a8)+_0x35eb0c),new m(_0x35eb0c);}return _0x1b7d16&&_0x4665e2?.['name']!==_0x1b7d16&&(_0x123b90['name']=_0x1b7d16),Object[_0x1f4e22(0x63b)](_0x123b90)[_0x1f4e22(0x3c8)]>0x1&&(_0x4665e2?await this[_0x1f4e22(0x610)][_0x1f4e22(0x20a)][_0x1f4e22(0x1b6)]({'where':{'_id':_0x24af4a}},_0x123b90):await this['repository'][_0x1f4e22(0x20a)][_0x1f4e22(0x28b)]([{'_id':_0x24af4a,..._0x123b90}]),_0x4665e2={..._0x4665e2,..._0x123b90}),{'cachedContact':_0x4665e2};}async[a0_0x3b8fac(0x392)](_0x160c85){const _0x4e11dc=a0_0x3b8fac;let _0x17adc5=this[_0x4e11dc(0x39d)](_0x160c85);try{return{'wuid':_0x17adc5,'profilePictureUrl':await this[_0x4e11dc(0x488)]['profilePictureUrl'](_0x17adc5,'image')};}catch{return{'wuid':_0x17adc5,'profilePictureUrl':null};}}async[a0_0x3b8fac(0x508)](_0x252a1b,_0x20ae75,_0xcbd1cd){const _0x5dafc5=a0_0x3b8fac;let _0x13339d;try{let _0x42810a=(await this[_0x5dafc5(0x269)]({'numbers':[_0x252a1b]}))?.['shift']();if(!_0x42810a[_0x5dafc5(0x323)]&&!(0x0,w[_0x5dafc5(0x2d0)])(_0x42810a[_0x5dafc5(0x6ea)])&&!_0x42810a['jid'][_0x5dafc5(0x43a)](_0x5dafc5(0x79c)))throw new m(_0x42810a);_0x13339d=_0x42810a['jid'];}catch(_0x3d2cb5){_0x13339d=_0x252a1b,this[_0x5dafc5(0x738)][_0x5dafc5(0x1a9)](this[_0x5dafc5(0x2af)]+'\x20('+this[_0x5dafc5(0x448)]['wuid']+_0x5dafc5(0x4a9)+_0x3d2cb5[_0x5dafc5(0x4ab)]),this[_0x5dafc5(0x738)][_0x5dafc5(0x1a9)](this[_0x5dafc5(0x2af)]+'\x20('+this[_0x5dafc5(0x448)][_0x5dafc5(0x219)]+_0x5dafc5(0x559)+_0x13339d);}try{if(_0x13339d||(_0x13339d=_0x252a1b,this['logger']['warn'](this[_0x5dafc5(0x2af)]+'\x20('+this[_0x5dafc5(0x448)][_0x5dafc5(0x219)]+_0x5dafc5(0x736)+_0x13339d)),_0xcbd1cd||(_0xcbd1cd={}),_0xcbd1cd?.[_0x5dafc5(0x332)]){await this[_0x5dafc5(0x488)][_0x5dafc5(0x55e)](_0x13339d),await this['client'][_0x5dafc5(0x15f)](_0xcbd1cd?.[_0x5dafc5(0x17a)]??'composing',_0x13339d);let _0x475cea=Math[_0x5dafc5(0x128)](_0xcbd1cd[_0x5dafc5(0x332)],0x2710);await(0x0,w[_0x5dafc5(0x332)])(_0x475cea),await this['client'][_0x5dafc5(0x15f)](_0x5dafc5(0xde),_0x13339d);}let _0x3b6935=_0xcbd1cd?.[_0x5dafc5(0x4fe)]!=!0x1?void 0x0:!0x1,_0x5f4092;if(_0xcbd1cd?.[_0x5dafc5(0xd0)]){let _0x541e9d=_0xcbd1cd?.[_0x5dafc5(0xd0)],_0x41293d=_0x541e9d?.[_0x5dafc5(0x4ab)]?_0x541e9d:await this[_0x5dafc5(0x1a6)](_0x541e9d[_0x5dafc5(0x3fb)],!0x0);_0x41293d&&(_0x5f4092=_0x41293d);}let _0x2606f3,_0x3be7be=null;if((0x0,w[_0x5dafc5(0x2d0)])(_0x13339d))try{if(_0x3be7be=await this[_0x5dafc5(0x671)](_0x13339d),!_0x3be7be)throw new J(_0x5dafc5(0x1d7));_0xcbd1cd?.[_0x5dafc5(0x438)]&&(_0xcbd1cd[_0x5dafc5(0x438)]?.['everyOne']?_0x2606f3=_0x3be7be['participants'][_0x5dafc5(0x23a)](_0xe6d360=>_0xe6d360['id']):_0xcbd1cd[_0x5dafc5(0x438)]?.['mentioned']?.[_0x5dafc5(0x3c8)]&&(_0x2606f3=_0xcbd1cd[_0x5dafc5(0x438)][_0x5dafc5(0x1ab)]['map'](_0x5afcc4=>{const _0x2ff113=_0x5dafc5;let _0x339c09=this[_0x2ff113(0x39d)](_0x5afcc4);return(0x0,w[_0x2ff113(0x2d0)])(_0x339c09)?null:_0x339c09;})));}catch{throw new J(_0x5dafc5(0x1d7));}let _0x1a2575=await this[_0x5dafc5(0x610)][_0x5dafc5(0x273)][_0x5dafc5(0x7ac)]({'where':{'_id':_0x13339d}},this[_0x5dafc5(0x448)][_0x5dafc5(0x219)]),_0x31a2ba=await((async()=>{const _0x2e06f2=_0x5dafc5;let _0x1fe811={'quoted':_0x5f4092,'ephemeralExpiration':_0x1a2575?.[_0x2e06f2(0x629)]??0x0,'useCachedGroupMetadata':!0x0};if(!_0x20ae75['audio']&&!_0x20ae75[_0x2e06f2(0x76a)]&&!_0x20ae75[_0x2e06f2(0x437)]&&!_0x20ae75[_0x2e06f2(0x621)]&&_0x13339d!==_0x2e06f2(0x15e)&&_0x20ae75[_0x2e06f2(0x359)])return await this[_0x2e06f2(0x488)]['sendMessage'](_0x13339d,{'react':{'text':_0x20ae75['reactionMessage']['text'],'key':_0x20ae75[_0x2e06f2(0x359)][_0x2e06f2(0x3fb)]}},_0x1fe811);if(_0x20ae75[_0x2e06f2(0x621)]){let _0x32ab69=_0x20ae75[_0x2e06f2(0x621)];return _0xcbd1cd?.['changeVariables']&&(_0x32ab69=await this['replaceVariablesChat'](_0x32ab69,_0x13339d)),await this[_0x2e06f2(0x488)][_0x2e06f2(0x206)](_0x13339d,{'text':_0x32ab69,'mentions':_0x2606f3,'linkPreview':_0x3b6935},_0x1fe811);}return!_0x20ae75['audio']&&!_0x20ae75[_0x2e06f2(0x76a)]&&_0x13339d!=_0x2e06f2(0x15e)?await this[_0x2e06f2(0x488)][_0x2e06f2(0x206)](_0x13339d,{'forward':{'key':{'remoteJid':this[_0x2e06f2(0x448)][_0x2e06f2(0x219)],'fromMe':!0x0},'message':_0x20ae75},'mentions':_0x2606f3},_0x1fe811):_0x13339d===_0x2e06f2(0x15e)?await this[_0x2e06f2(0x488)]['sendMessage'](_0x13339d,_0x20ae75[_0x2e06f2(0x233)][_0x2e06f2(0x417)],{'backgroundColor':_0x20ae75['status'][_0x2e06f2(0x7b9)]['backgroundColor'],'font':_0x20ae75[_0x2e06f2(0x233)][_0x2e06f2(0x7b9)][_0x2e06f2(0x422)],'statusJidList':_0x20ae75[_0x2e06f2(0x233)][_0x2e06f2(0x7b9)][_0x2e06f2(0x74a)]}):await this[_0x2e06f2(0x488)]['sendMessage'](_0x13339d,_0x20ae75,_0x1fe811);})()),_0x18e49a=(0x0,w[_0x5dafc5(0x18e)])(_0x31a2ba[_0x5dafc5(0x4ab)]),_0x49c312=(0x0,w[_0x5dafc5(0x440)])(_0x18e49a),{message_normalized:_0x488f05}=this[_0x5dafc5(0x722)](_0x18e49a,_0x49c312,null),_0x552ffe={'_id':_0x31a2ba['key']['id'],'key':_0x31a2ba[_0x5dafc5(0x3fb)],'pushName':_0x31a2ba[_0x5dafc5(0x60e)],'isGroup':_0x31a2ba[_0x5dafc5(0x3fb)][_0x5dafc5(0x6d5)][_0x5dafc5(0x64c)]('@g.us'),'profilePictureUrl':this['instance'][_0x5dafc5(0x1b1)],'message':_0x18e49a,'messageType':_0x49c312,'message_normalized':{'key':_0x31a2ba[_0x5dafc5(0x3fb)],'pushName':_0x31a2ba[_0x5dafc5(0x60e)],'messageTimestamp':_0x31a2ba[_0x5dafc5(0x118)]&&_0x31a2ba['messageTimestamp'][_0x5dafc5(0x2eb)]()[_0x5dafc5(0x3c8)]<0xd?_0x31a2ba[_0x5dafc5(0x118)]*0x3e8:_0x31a2ba[_0x5dafc5(0x118)]||null,'source':(0x0,w[_0x5dafc5(0x3ef)])(_0x31a2ba[_0x5dafc5(0x3fb)]['id']),..._0x488f05},'messageTimestamp':_0x31a2ba['messageTimestamp']&&_0x31a2ba['messageTimestamp'][_0x5dafc5(0x2eb)]()[_0x5dafc5(0x3c8)]<0xd?_0x31a2ba[_0x5dafc5(0x118)]*0x3e8:_0x31a2ba['messageTimestamp']||null,'owner':this['instance'][_0x5dafc5(0x219)],'source':(0x0,w[_0x5dafc5(0x3ef)])(_0x31a2ba['key']['id'])};return this[_0x5dafc5(0x738)]['warn'](this[_0x5dafc5(0x2af)]+'\x20('+this[_0x5dafc5(0x448)][_0x5dafc5(0x219)]+'):\x20enviado\x20para\x20['+_0x552ffe[_0x5dafc5(0x3fb)]?.[_0x5dafc5(0x6d5)]['replace']('@s.whatsapp.net','')+_0x5dafc5(0x7d2)+_0x552ffe[_0x5dafc5(0x6d2)]+')'),_0x552ffe[_0x5dafc5(0x36c)]?.[_0x5dafc5(0x284)]&&this[_0x5dafc5(0x738)]['warn'](_0x552ffe[_0x5dafc5(0x36c)]?.['text']),this[_0x5dafc5(0x4d2)](_0x5dafc5(0x201),_0x552ffe),q(this['instanceName'],_0x5dafc5(0x6ae),{'message':_0x552ffe}),this[_0x5dafc5(0x65d)](this[_0x5dafc5(0x2e2)][_0x5dafc5(0x184)](_0x5dafc5(0x22d)),_0x552ffe,_0x5dafc5(0x777),_0x1a2575),await this['repository'][_0x5dafc5(0x4ab)][_0x5dafc5(0x28b)]([_0x552ffe],this[_0x5dafc5(0x448)]['wuid']),_0x31a2ba;}catch(_0x1d6b59){let _0x13cba0='Falha\x20ao\x20processar\x20a\x20solicitao\x20send_message,\x20numero:\x20'+_0x13339d,_0x33d668=_0x1d6b59 instanceof Error?_0x1d6b59[_0x5dafc5(0x4ab)]:typeof _0x1d6b59==_0x5dafc5(0x4f6)?JSON['stringify'](_0x1d6b59):_0x1d6b59,_0x30dca1=_0x13cba0+':\x20'+_0x33d668;throw this[_0x5dafc5(0x738)][_0x5dafc5(0x3a7)](this['instanceName']+'\x20('+this[_0x5dafc5(0x448)][_0x5dafc5(0x219)]+_0x5dafc5(0x3a8)+_0x30dca1),new m(_0x30dca1);}}async['getGroupMetadataCache'](_0x122bf9){const _0x5afd19=a0_0x3b8fac;try{let _0x3bf1f9=await this[_0x5afd19(0x610)][_0x5afd19(0x273)]['findOne']({'where':{'_id':_0x122bf9}},this[_0x5afd19(0x448)][_0x5afd19(0x219)]);return _0x3bf1f9?_0x3bf1f9[_0x5afd19(0x33e)]:null;}catch(_0x3aa510){return this[_0x5afd19(0x738)][_0x5afd19(0x3a7)](_0x5afd19(0x199)+_0x122bf9+':\x20'+_0x3aa510[_0x5afd19(0x4ab)]),null;}}get[a0_0x3b8fac(0x12f)](){const _0x2faab4=a0_0x3b8fac;return this[_0x2faab4(0x7b1)];}async['textMessage'](_0x2c2d4e){const _0x2b6a70=a0_0x3b8fac;return await this[_0x2b6a70(0x508)](_0x2c2d4e[_0x2b6a70(0x377)],{'conversation':_0x2c2d4e[_0x2b6a70(0x663)][_0x2b6a70(0x284)]},_0x2c2d4e?.[_0x2b6a70(0x13d)]);}async['formatStatusMessage'](_0x236c4a){const _0x491012=a0_0x3b8fac;if(!_0x236c4a['type'])throw new m(_0x491012(0x742));if(!_0x236c4a[_0x491012(0x417)])throw new m('Content\x20is\x20required');if(_0x236c4a[_0x491012(0x3d5)]){let _0x19d1a8=await this[_0x491012(0x610)][_0x491012(0x7a8)][_0x491012(0x7a1)]({'where':{}},this['instance'][_0x491012(0x219)]);if(!_0x19d1a8['length'])throw new m(_0x491012(0x751));_0x236c4a['statusJidList']=_0x19d1a8[_0x491012(0x34f)](_0x2c4428=>_0x2c4428[_0x491012(0x60e)])[_0x491012(0x23a)](_0x4bd62f=>_0x4bd62f[_0x491012(0x4ff)]);}if(!_0x236c4a[_0x491012(0x74a)]?.[_0x491012(0x3c8)]&&!_0x236c4a['allContacts'])throw new m(_0x491012(0x1ce));if(_0x236c4a['type']===_0x491012(0x284)){if(!_0x236c4a[_0x491012(0x108)])throw new m(_0x491012(0x601));if(!_0x236c4a[_0x491012(0x422)])throw new m('Font\x20is\x20required');return{'content':{'text':_0x236c4a[_0x491012(0x417)]},'option':{'backgroundColor':_0x236c4a[_0x491012(0x108)],'font':_0x236c4a[_0x491012(0x422)],'statusJidList':_0x236c4a[_0x491012(0x74a)]}};}if(_0x236c4a[_0x491012(0x1a2)]===_0x491012(0x410))return{'content':{'image':{'url':_0x236c4a[_0x491012(0x417)]},'caption':_0x236c4a[_0x491012(0x31e)]},'option':{'statusJidList':_0x236c4a['statusJidList']}};if(_0x236c4a[_0x491012(0x1a2)]===_0x491012(0x136))return{'content':{'video':{'url':_0x236c4a[_0x491012(0x417)]},'caption':_0x236c4a[_0x491012(0x31e)]},'option':{'statusJidList':_0x236c4a['statusJidList']}};if(_0x236c4a[_0x491012(0x1a2)]==='audio'){this['logger'][_0x491012(0x592)](this['instanceName']+'\x20('+this[_0x491012(0x448)]['wuid']+'):Type\x20defined\x20as\x20audio'),this[_0x491012(0x738)]['verbose'](this[_0x491012(0x2af)]+'\x20('+this[_0x491012(0x448)][_0x491012(0x219)]+_0x491012(0x6b1));let _0x4ef08b=await this[_0x491012(0x466)](_0x236c4a[_0x491012(0x417)]);if(typeof _0x4ef08b==_0x491012(0x20d)){this['logger']['verbose'](this[_0x491012(0x2af)]+'\x20('+this['instance'][_0x491012(0x219)]+'):Audio\x20processed');let _0x4e3748=F[_0x491012(0x676)](_0x4ef08b)[_0x491012(0x2eb)](_0x491012(0x456));return{'content':{'audio':Buffer[_0x491012(0x2ab)](_0x4e3748,_0x491012(0x456)),'ptt':!0x0,'mimetype':_0x491012(0x68d)},'option':{'statusJidList':_0x236c4a['statusJidList']}};}else throw new x(_0x4ef08b);}throw new m('Type\x20not\x20found');}async[a0_0x3b8fac(0x79)](_0x4dd69f){const _0x4e456c=a0_0x3b8fac;return await this[_0x4e456c(0x508)]('status@broadcast',{'status':await this[_0x4e456c(0x2d1)](_0x4dd69f[_0x4e456c(0x79)])});}async['prepareMediaMessage'](_0x2fd833){const _0x1bc44d=a0_0x3b8fac;try{let _0x9e5039=await(0x0,w[_0x1bc44d(0x6b2)])({[_0x2fd833['mediatype']]:(0x0,L[_0x1bc44d(0x4c6)])(_0x2fd833['media'])?{'url':_0x2fd833[_0x1bc44d(0x14f)]}:Buffer[_0x1bc44d(0x2ab)](_0x2fd833[_0x1bc44d(0x14f)],'base64')},{'upload':this['client']['waUploadToServer']}),_0x40de29=_0x2fd833[_0x1bc44d(0x6e8)]+'Message';if(_0x2fd833[_0x1bc44d(0x6e8)]===_0x1bc44d(0x51c)&&!_0x2fd833[_0x1bc44d(0x35c)]){let _0x34dd7b=new RegExp(/.*\/(.+?)\./)[_0x1bc44d(0x126)](_0x2fd833['media']);_0x2fd833[_0x1bc44d(0x35c)]=_0x34dd7b?_0x34dd7b[0x1]:null;}let _0x225c15;return(0x0,L[_0x1bc44d(0x4c6)])(_0x2fd833[_0x1bc44d(0x14f)])?_0x225c15=(await te['default'][_0x1bc44d(0x184)](_0x2fd833[_0x1bc44d(0x14f)],{'responseType':_0x1bc44d(0x20b)}))['headers']['content-type']:_0x225c15=(0x0,ki[_0x1bc44d(0x79a)])(_0x2fd833['fileName']),_0x9e5039[_0x40de29][_0x1bc44d(0x31e)]=_0x2fd833?.[_0x1bc44d(0x31e)],_0x9e5039[_0x40de29][_0x1bc44d(0x24d)]=_0x225c15,_0x9e5039[_0x40de29][_0x1bc44d(0x35c)]=_0x2fd833[_0x1bc44d(0x35c)],_0x2fd833[_0x1bc44d(0x6e8)]===_0x1bc44d(0x136)&&(_0x9e5039[_0x40de29][_0x1bc44d(0x756)]=Uint8Array[_0x1bc44d(0x2ab)]((0x0,Fe[_0x1bc44d(0x676)])((0x0,j[_0x1bc44d(0x4c9)])(process[_0x1bc44d(0x6c4)](),_0x1bc44d(0x731)))),_0x9e5039[_0x40de29][_0x1bc44d(0x203)]=!0x1),(0x0,w[_0x1bc44d(0x35a)])('',{[_0x40de29]:{..._0x9e5039[_0x40de29]}},{'userJid':this[_0x1bc44d(0x448)][_0x1bc44d(0x219)]});}catch(_0x3c6de5){let _0x14bec5='Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20prepareMediaMessage',_0xa71329=_0x3c6de5 instanceof Error?_0x3c6de5['message']:typeof _0x3c6de5==_0x1bc44d(0x4f6)?JSON['stringify'](_0x3c6de5):_0x3c6de5,_0x44d67c=_0x14bec5+':\x20'+_0xa71329;throw this['logger'][_0x1bc44d(0x3a7)](this['instanceName']+'\x20('+this[_0x1bc44d(0x448)][_0x1bc44d(0x219)]+'):\x20'+_0x44d67c),new x(_0x44d67c);}}async[a0_0x3b8fac(0x2fe)](_0x4f7bd6){const _0x5d8384=a0_0x3b8fac;let _0xfe67c4=await this[_0x5d8384(0x322)](_0x4f7bd6['mediaMessage']);return await this[_0x5d8384(0x508)](_0x4f7bd6[_0x5d8384(0x377)],{..._0xfe67c4['message']},_0x4f7bd6?.[_0x5d8384(0x13d)]);}async[a0_0x3b8fac(0x6a5)](_0x21c71c,_0x591d60){const _0x4f1db8=a0_0x3b8fac;try{this[_0x4f1db8(0x738)][_0x4f1db8(0x592)](this[_0x4f1db8(0x2af)]+'\x20('+this['instance']['wuid']+_0x4f1db8(0x527));let _0xd279ee,_0x39542e=_0x591d60+'-'+new Date()[_0x4f1db8(0x5ba)]();this[_0x4f1db8(0x738)]['verbose'](this[_0x4f1db8(0x2af)]+'\x20('+this[_0x4f1db8(0x448)][_0x4f1db8(0x219)]+_0x4f1db8(0xd4)+_0x39542e);let _0x25c4f4=''+(0x0,j[_0x4f1db8(0x4c9)])(this['storePath'],_0x39542e+'.webp');if(this[_0x4f1db8(0x738)]['verbose'](this[_0x4f1db8(0x2af)]+'\x20('+this[_0x4f1db8(0x448)][_0x4f1db8(0x219)]+'):Output\x20path:\x20'+_0x25c4f4),(0x0,L['isBase64'])(_0x21c71c)){this[_0x4f1db8(0x738)][_0x4f1db8(0x592)](this['instanceName']+'\x20('+this[_0x4f1db8(0x448)][_0x4f1db8(0x219)]+_0x4f1db8(0x4e8));let _0x49f217=_0x21c71c['replace'](/^data:image\/(jpeg|png|gif);base64,/,''),_0x38439d=Buffer[_0x4f1db8(0x2ab)](_0x49f217,'base64');_0xd279ee=''+(0x0,j['join'])(this[_0x4f1db8(0x401)],_0x4f1db8(0x246)+_0x39542e+_0x4f1db8(0x470)),this[_0x4f1db8(0x738)][_0x4f1db8(0x592)](this[_0x4f1db8(0x2af)]+'\x20('+this[_0x4f1db8(0x448)]['wuid']+'):Image\x20path:\x20'+_0xd279ee),await(0x0,Vt['default'])(_0x38439d)[_0x4f1db8(0x56e)](_0xd279ee),this[_0x4f1db8(0x738)][_0x4f1db8(0x592)](this[_0x4f1db8(0x2af)]+'\x20('+this[_0x4f1db8(0x448)][_0x4f1db8(0x219)]+_0x4f1db8(0x21a));}else{this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x4f1db8(0x448)][_0x4f1db8(0x219)]+_0x4f1db8(0x740));let _0x4447f1=new Date()[_0x4f1db8(0x5ba)](),_0x7e18cf=_0x21c71c+_0x4f1db8(0x3d6)+_0x4447f1;this['logger'][_0x4f1db8(0x592)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4f1db8(0x87)+_0x7e18cf);let _0x1400f5=await te[_0x4f1db8(0x151)]['get'](_0x7e18cf,{'responseType':_0x4f1db8(0x20b)});this[_0x4f1db8(0x738)]['verbose'](this[_0x4f1db8(0x2af)]+'\x20('+this['instance'][_0x4f1db8(0x219)]+'):Getting\x20image\x20from\x20url');let _0x39e91a=Buffer[_0x4f1db8(0x2ab)](_0x1400f5[_0x4f1db8(0x5c3)],_0x4f1db8(0x50b));_0xd279ee=''+(0x0,j['join'])(this['storePath'],'temp-'+_0x39542e+_0x4f1db8(0x470)),this[_0x4f1db8(0x738)]['verbose'](this[_0x4f1db8(0x2af)]+'\x20('+this[_0x4f1db8(0x448)]['wuid']+'):Image\x20path:\x20'+_0xd279ee),await(0x0,Vt['default'])(_0x39e91a)[_0x4f1db8(0x56e)](_0xd279ee),this[_0x4f1db8(0x738)][_0x4f1db8(0x592)](this[_0x4f1db8(0x2af)]+'\x20('+this[_0x4f1db8(0x448)][_0x4f1db8(0x219)]+_0x4f1db8(0x21a));}return await(0x0,Vt['default'])(_0xd279ee)[_0x4f1db8(0x13b)]()['toFile'](_0x25c4f4),this[_0x4f1db8(0x738)][_0x4f1db8(0x592)](this[_0x4f1db8(0x2af)]+'\x20('+this[_0x4f1db8(0x448)][_0x4f1db8(0x219)]+_0x4f1db8(0x225)),F['unlinkSync'](_0xd279ee),this[_0x4f1db8(0x738)]['verbose'](this[_0x4f1db8(0x2af)]+'\x20('+this['instance'][_0x4f1db8(0x219)]+_0x4f1db8(0x3e7)),_0x25c4f4;}catch(_0x2297ed){let _0x34b20c=_0x4f1db8(0x358),_0x22a516=_0x2297ed instanceof Error?_0x2297ed['message']:typeof _0x2297ed==_0x4f1db8(0x4f6)?JSON['stringify'](_0x2297ed):_0x2297ed,_0x252575=_0x34b20c+':\x20'+_0x22a516;this[_0x4f1db8(0x738)][_0x4f1db8(0x3a7)](this[_0x4f1db8(0x2af)]+'\x20('+this[_0x4f1db8(0x448)][_0x4f1db8(0x219)]+_0x4f1db8(0x3a8)+_0x252575);}}async['mediaSticker'](_0x5da2bd){const _0x5a08ba=a0_0x3b8fac;let _0x2c6093=await this[_0x5a08ba(0x6a5)](_0x5da2bd[_0x5a08ba(0x649)][_0x5a08ba(0x410)],_0x5da2bd[_0x5a08ba(0x377)]),_0x5e0b3d=await this[_0x5a08ba(0x508)](_0x5da2bd[_0x5a08ba(0x377)],{'sticker':{'url':_0x2c6093}},_0x5da2bd?.['options']);return F[_0x5a08ba(0x42d)](_0x2c6093),this[_0x5a08ba(0x738)][_0x5a08ba(0x592)](this['instanceName']+'\x20('+this[_0x5a08ba(0x448)][_0x5a08ba(0x219)]+_0x5a08ba(0x7bb)),_0x5e0b3d;}async[a0_0x3b8fac(0x265)](_0x3b8988){const _0x1ea79c=a0_0x3b8fac;if(this['logger'][_0x1ea79c(0x592)](this[_0x1ea79c(0x2af)]+'\x20('+this[_0x1ea79c(0x448)][_0x1ea79c(0x219)]+_0x1ea79c(0x749)),!_0x3b8988['options']?.[_0x1ea79c(0x2c1)]&&_0x3b8988['options']?.['encoding']!==!0x1&&(_0x3b8988[_0x1ea79c(0x13d)][_0x1ea79c(0x2c1)]=!0x0),_0x3b8988[_0x1ea79c(0x13d)]?.[_0x1ea79c(0x2c1)]){let _0x52d82d=await this[_0x1ea79c(0x466)](_0x3b8988['audioMessage'][_0x1ea79c(0x3bc)]);if(typeof _0x52d82d==_0x1ea79c(0x20d)){let _0x5dc200=F[_0x1ea79c(0x676)](_0x52d82d)[_0x1ea79c(0x2eb)](_0x1ea79c(0x456));return this[_0x1ea79c(0x508)](_0x3b8988[_0x1ea79c(0x377)],{'audio':Buffer[_0x1ea79c(0x2ab)](_0x5dc200,_0x1ea79c(0x456)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':'recording','delay':_0x3b8988?.[_0x1ea79c(0x13d)]?.[_0x1ea79c(0x332)]});}else throw new x(_0x52d82d);}return await this[_0x1ea79c(0x508)](_0x3b8988[_0x1ea79c(0x377)],{'audio':(0x0,L[_0x1ea79c(0x4c6)])(_0x3b8988[_0x1ea79c(0x563)][_0x1ea79c(0x3bc)])?{'url':_0x3b8988[_0x1ea79c(0x563)][_0x1ea79c(0x3bc)]}:Buffer[_0x1ea79c(0x2ab)](_0x3b8988['audioMessage'][_0x1ea79c(0x3bc)],_0x1ea79c(0x456)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x1ea79c(0x5e9),'delay':_0x3b8988?.['options']?.['delay']});}async[a0_0x3b8fac(0x466)](_0x5e6142){const _0x3a8408=a0_0x3b8fac;this['logger']['verbose'](this[_0x3a8408(0x2af)]+'\x20('+this[_0x3a8408(0x448)][_0x3a8408(0x219)]+'):Processing\x20audio');let _0x14fb82=(0x0,L['isURL'])(_0x5e6142)?(0x0,Gt[_0x3a8408(0x4a1)])(_0x3a8408(0x6a8))['update'](_0x5e6142)[_0x3a8408(0x78e)](_0x3a8408(0x110)):(0x0,Gt[_0x3a8408(0x4a1)])(_0x3a8408(0x6a8))[_0x3a8408(0x1b6)](_0x5e6142)[_0x3a8408(0x78e)](_0x3a8408(0x110)),_0x1ad6d9=''+(0x0,j[_0x3a8408(0x4c9)])(this[_0x3a8408(0x401)],_0x14fb82+_0x3a8408(0x741));if(F[_0x3a8408(0x550)](_0x1ad6d9))return this[_0x3a8408(0x738)][_0x3a8408(0x592)](this[_0x3a8408(0x2af)]+'\x20('+this[_0x3a8408(0x448)]['wuid']+_0x3a8408(0x210)),_0x1ad6d9;let _0x44b8a5=''+(0x0,j[_0x3a8408(0x4c9)])(this[_0x3a8408(0x401)],'temp-'+(0x0,X['v4'])()+_0x3a8408(0x26e));if((0x0,L[_0x3a8408(0x4c6)])(_0x5e6142)){let _0x22c5c5=new Date()[_0x3a8408(0x5ba)](),_0x47fa94=_0x5e6142+_0x3a8408(0x3d6)+_0x22c5c5,_0x1d6199=await te[_0x3a8408(0x151)][_0x3a8408(0x184)](_0x47fa94,{'responseType':'arraybuffer'});F['writeFileSync'](_0x44b8a5,_0x1d6199[_0x3a8408(0x5c3)]);}else{let _0x489315=Buffer[_0x3a8408(0x2ab)](_0x5e6142,_0x3a8408(0x456));F[_0x3a8408(0x477)](_0x44b8a5,_0x489315);}return new Promise((_0x548dd7,_0x2d6e60)=>{const _0x28ec80=_0x3a8408;(0x0,Ue[_0x28ec80(0x126)])(Ps[_0x28ec80(0x151)]['path']+_0x28ec80(0x30e)+_0x44b8a5+'\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20'+_0x1ad6d9+_0x28ec80(0x4dd),_0x4c3fa0=>{const _0x24f211=_0x28ec80;if(F['unlinkSync'](_0x44b8a5),_0x4c3fa0){this[_0x24f211(0x738)][_0x24f211(0x592)](this['instanceName']+'\x20('+this[_0x24f211(0x448)]['wuid']+_0x24f211(0x1e4)),_0x2d6e60(_0x4c3fa0);return;}this['logger'][_0x24f211(0x592)](this[_0x24f211(0x2af)]+'\x20('+this[_0x24f211(0x448)]['wuid']+_0x24f211(0x60a)),_0x548dd7(_0x1ad6d9);});});}async[a0_0x3b8fac(0x250)](_0x30c1a9){const _0x48c3d6=a0_0x3b8fac;this[_0x48c3d6(0x738)]['verbose'](this['instanceName']+'\x20('+this[_0x48c3d6(0x448)][_0x48c3d6(0x219)]+_0x48c3d6(0x6b1));let _0x340bfc=(0x0,Gt[_0x48c3d6(0x4a1)])(_0x48c3d6(0x6a8))[_0x48c3d6(0x1b6)](_0x30c1a9)[_0x48c3d6(0x78e)](_0x48c3d6(0x110)),_0x26fe35=''+(0x0,j['join'])(this[_0x48c3d6(0x401)],_0x340bfc+_0x48c3d6(0x26e));if(F[_0x48c3d6(0x550)](_0x26fe35))return this[_0x48c3d6(0x738)][_0x48c3d6(0x592)](this[_0x48c3d6(0x2af)]+'\x20('+this[_0x48c3d6(0x448)][_0x48c3d6(0x219)]+_0x48c3d6(0x210)),j[_0x48c3d6(0x151)][_0x48c3d6(0x74f)](_0x26fe35);let _0x3cf3e2=''+(0x0,j[_0x48c3d6(0x4c9)])(this[_0x48c3d6(0x401)],_0x48c3d6(0x246)+_0x340bfc+_0x48c3d6(0x741));if((0x0,L[_0x48c3d6(0x4c6)])(_0x30c1a9)){let _0x388d69=new Date()[_0x48c3d6(0x5ba)](),_0x2f30e8=_0x30c1a9+_0x48c3d6(0x3d6)+_0x388d69,_0x5d7373=await te['default']['get'](_0x2f30e8,{'responseType':_0x48c3d6(0x20b)});F['writeFileSync'](_0x3cf3e2,_0x5d7373[_0x48c3d6(0x5c3)]);}else{let _0x565bdf=Buffer['from'](_0x30c1a9,_0x48c3d6(0x456));F[_0x48c3d6(0x477)](_0x3cf3e2,_0x565bdf);}return new Promise((_0x10f737,_0xa2e056)=>{const _0x2af513=_0x48c3d6;(0x0,Ue[_0x2af513(0x126)])(Ps[_0x2af513(0x151)][_0x2af513(0x655)]+_0x2af513(0x30e)+_0x3cf3e2+_0x2af513(0x381)+_0x26fe35+'\x20-y',_0x3d2eb6=>{const _0x563174=_0x2af513;if(F['unlinkSync'](_0x3cf3e2),_0x3d2eb6){this[_0x563174(0x738)]['verbose'](this['instanceName']+'\x20('+this[_0x563174(0x448)][_0x563174(0x219)]+_0x563174(0x1e4)),_0xa2e056(_0x3d2eb6);return;}this[_0x563174(0x738)]['verbose'](this['instanceName']+'\x20('+this[_0x563174(0x448)]['wuid']+'):Audio\x20converted\x20and\x20stored\x20in\x20cache'),_0x10f737(j['default'][_0x563174(0x74f)](_0x26fe35));});});}async[a0_0x3b8fac(0x723)](_0x1bccf2){const _0x1b3af5=a0_0x3b8fac;let _0xe376={},_0x3c76db='TEXT';if(_0x1bccf2[_0x1b3af5(0x723)]?.[_0x1b3af5(0x2fe)]){_0x3c76db=_0x1bccf2['buttonMessage'][_0x1b3af5(0x2fe)]?.[_0x1b3af5(0x6e8)][_0x1b3af5(0x56d)]()??'TEXT',_0xe376['mediaKey']=_0x3c76db['toLowerCase']()+_0x1b3af5(0x654);let _0x337472=await this['prepareMediaMessage'](_0x1bccf2[_0x1b3af5(0x723)][_0x1b3af5(0x2fe)]);_0xe376['message']=_0x337472[_0x1b3af5(0x4ab)][_0xe376[_0x1b3af5(0x342)]],_0xe376['contentText']='*'+_0x1bccf2[_0x1b3af5(0x723)][_0x1b3af5(0x399)]+_0x1b3af5(0x64a)+_0x1bccf2[_0x1b3af5(0x723)][_0x1b3af5(0x53f)];}let _0x5ace43={'text':_0x1bccf2[_0x1b3af5(0x723)]['buttons'][_0x1b3af5(0x23a)](_0x385c2b=>_0x385c2b['buttonText']),'ids':_0x1bccf2['buttonMessage'][_0x1b3af5(0x1dc)][_0x1b3af5(0x23a)](_0x27e4a2=>_0x27e4a2[_0x1b3af5(0x2b5)])};if(!(0x0,L[_0x1b3af5(0x62d)])(_0x5ace43[_0x1b3af5(0x284)])||!(0x0,L[_0x1b3af5(0x62d)])(_0x5ace43[_0x1b3af5(0x134)]))throw new m(_0x1b3af5(0xba),_0x1b3af5(0x770));return await this[_0x1b3af5(0x508)](_0x1bccf2['number'],{'buttonsMessage':{'text':_0xe376?.[_0x1b3af5(0x342)]?void 0x0:_0x1bccf2[_0x1b3af5(0x723)][_0x1b3af5(0x399)],'contentText':_0xe376?.[_0x1b3af5(0x4c2)]??_0x1bccf2[_0x1b3af5(0x723)][_0x1b3af5(0x53f)],'footerText':_0x1bccf2[_0x1b3af5(0x723)]?.[_0x1b3af5(0x383)],'buttons':_0x1bccf2[_0x1b3af5(0x723)][_0x1b3af5(0x1dc)]['map'](_0x58f059=>({'buttonText':{'displayText':_0x58f059[_0x1b3af5(0x3cb)]},'buttonId':_0x58f059[_0x1b3af5(0x2b5)],'type':0x1})),'headerType':w['proto'][_0x1b3af5(0x654)][_0x1b3af5(0x3a5)][_0x1b3af5(0x59d)][_0x3c76db],[_0xe376?.[_0x1b3af5(0x342)]]:_0xe376?.['message']}},_0x1bccf2?.[_0x1b3af5(0x13d)]);}async['locationMessage'](_0x37cc4f){const _0x1cd462=a0_0x3b8fac;return await this[_0x1cd462(0x508)](_0x37cc4f[_0x1cd462(0x377)],{'locationMessage':{'degreesLatitude':_0x37cc4f['locationMessage'][_0x1cd462(0x43c)],'degreesLongitude':_0x37cc4f[_0x1cd462(0x244)][_0x1cd462(0xf3)],'name':_0x37cc4f[_0x1cd462(0x244)]?.[_0x1cd462(0x26b)],'address':_0x37cc4f['locationMessage']?.[_0x1cd462(0x504)]}},_0x37cc4f?.[_0x1cd462(0x13d)]);}async[a0_0x3b8fac(0x4d3)](_0x116a38){const _0x2f0eb9=a0_0x3b8fac;let _0x593816={},_0x41eba3=async _0x2703ba=>{const _0x43e4f3=a0_0x56c3;let _0x541579=_0x43e4f3(0x79b)+_0x2703ba['fullName']+_0x43e4f3(0x462)+_0x2703ba[_0x43e4f3(0x22e)]+'\x0a';_0x2703ba[_0x43e4f3(0x501)]&&(_0x541579+=_0x43e4f3(0x5da)+_0x2703ba['organization']+';\x0a'),_0x2703ba[_0x43e4f3(0x6b0)]&&(_0x541579+=_0x43e4f3(0x7c5)+_0x2703ba[_0x43e4f3(0x6b0)]+'\x0a'),_0x2703ba[_0x43e4f3(0x772)]&&(_0x541579+='URL:'+_0x2703ba[_0x43e4f3(0x772)]+'\x0a');let _0x27314f='',_0x1b607c=0x1;if(_0x2703ba['phoneNumber']){let _0x4a85cf=_0x2703ba[_0x43e4f3(0x316)]['split']('|');for(let _0x5cb0f9 of _0x4a85cf){let _0x50c8c9=await this[_0x43e4f3(0x269)]({'numbers':[_0x5cb0f9]}),_0x319250=(_0x50c8c9[_0x43e4f3(0x3c8)]>0x0?_0x50c8c9[0x0][_0x43e4f3(0x6ea)]:this[_0x43e4f3(0x39d)](_0x5cb0f9))['replace'](_0x43e4f3(0x482),'');_0x27314f+='item'+_0x1b607c+'.TEL;waid='+_0x319250+':'+_0x5cb0f9+'\x0aitem'+_0x1b607c+'.X-ABLabel:Celular\x0a',_0x1b607c++;}}return _0x541579+=_0x27314f+'END:VCARD',_0x541579;};return _0x116a38[_0x2f0eb9(0x4d3)][_0x2f0eb9(0x3c8)]===0x1?_0x593816[_0x2f0eb9(0x4d3)]={'displayName':_0x116a38[_0x2f0eb9(0x4d3)][0x0]['fullName'],'vcard':await _0x41eba3(_0x116a38[_0x2f0eb9(0x4d3)][0x0])}:_0x593816[_0x2f0eb9(0x441)]={'displayName':_0x116a38[_0x2f0eb9(0x4d3)]['length']+'\x20contacts','contacts':await Promise[_0x2f0eb9(0x62c)](_0x116a38[_0x2f0eb9(0x4d3)][_0x2f0eb9(0x23a)](async _0x555bd6=>({'displayName':_0x555bd6[_0x2f0eb9(0x22e)],'vcard':await _0x41eba3(_0x555bd6)})))},await this[_0x2f0eb9(0x508)](_0x116a38['number'],{..._0x593816},_0x116a38?.[_0x2f0eb9(0x13d)]);}async[a0_0x3b8fac(0x359)](_0x34d9cc){const _0x571436=a0_0x3b8fac;return await this[_0x571436(0x508)](_0x34d9cc[_0x571436(0x359)][_0x571436(0x3fb)][_0x571436(0x6d5)],{'reactionMessage':{'key':_0x34d9cc[_0x571436(0x359)][_0x571436(0x3fb)],'text':_0x34d9cc[_0x571436(0x359)][_0x571436(0x25b)]}});}async['whatsappNumber'](_0x2be473){const _0x3703e0=a0_0x3b8fac;let _0x229469=[];for await(let _0x835608 of _0x2be473[_0x3703e0(0x236)]){let _0x4a4305=this[_0x3703e0(0x39d)](_0x835608),_0x34790d=!0x1;try{if((0x0,w[_0x3703e0(0x2d0)])(_0x4a4305)){let _0x5c14e0=(await this[_0x3703e0(0x610)]['chat'][_0x3703e0(0x7ac)]({'where':{'_id':_0x4a4305}},this['instance']['wuid']))[_0x3703e0(0x33e)];_0x5c14e0?(_0x34790d=!0x0,_0x229469[_0x3703e0(0x42a)](new pe(_0x5c14e0['id'],_0x34790d,_0x5c14e0?.[_0x3703e0(0x155)]))):(_0x5c14e0=await this[_0x3703e0(0x69f)]({'groupJid':_0x4a4305},_0x3703e0(0x5af)),_0x229469[_0x3703e0(0x42a)](new pe(_0x5c14e0['id'],!!_0x5c14e0?.['id'],_0x5c14e0?.[_0x3703e0(0x155)])));}else{if(_0x4a4305['includes'](_0x3703e0(0x79c)))_0x229469[_0x3703e0(0x42a)](new pe(_0x4a4305,!0x0));else{let _0x5ad2f0=(await this[_0x3703e0(0x488)][_0x3703e0(0x7d6)](_0x4a4305))[0x0];_0x229469[_0x3703e0(0x42a)](new pe(_0x5ad2f0['jid'],_0x5ad2f0[_0x3703e0(0x323)]));}}}catch{(0x0,w[_0x3703e0(0x2d0)])(_0x4a4305)||await this[_0x3703e0(0x15b)](_0x4a4305),_0x229469['push'](new pe(_0x835608,!0x1));}}return _0x229469;}async[a0_0x3b8fac(0x15b)](_0x4e7531){const _0x5738ea=a0_0x3b8fac;try{await this[_0x5738ea(0x610)][_0x5738ea(0x273)][_0x5738ea(0x7ac)]({'where':{'_id':_0x4e7531,'imported':!0x0}},this[_0x5738ea(0x448)][_0x5738ea(0x219)])&&(await this[_0x5738ea(0x610)][_0x5738ea(0x273)][_0x5738ea(0x72e)](_0x4e7531,this['instance'][_0x5738ea(0x219)]),this[_0x5738ea(0x738)]['info'](_0x5738ea(0x625)+_0x4e7531+_0x5738ea(0x726)));}catch(_0x8a20db){let _0x2861f4=_0x5738ea(0x120),_0x96be38=_0x8a20db instanceof Error?_0x8a20db[_0x5738ea(0x4ab)]:typeof _0x8a20db=='object'?JSON[_0x5738ea(0x5e5)](_0x8a20db):_0x8a20db,_0xac2f88=_0x2861f4+':\x20'+_0x96be38;this[_0x5738ea(0x738)][_0x5738ea(0x3a7)](this[_0x5738ea(0x2af)]+'\x20('+this[_0x5738ea(0x448)][_0x5738ea(0x219)]+_0x5738ea(0x3a8)+_0xac2f88);}}async[a0_0x3b8fac(0x589)](_0x3d7439){const _0xa843fa=a0_0x3b8fac;try{let _0x510f8e=_0x3d7439['readMessages'][_0xa843fa(0x34f)](_0x1d328e=>(0x0,w[_0xa843fa(0x2d0)])(_0x1d328e[_0xa843fa(0x6d5)])||(0x0,w[_0xa843fa(0x605)])(_0x1d328e[_0xa843fa(0x6d5)]))[_0xa843fa(0x23a)](_0x927c21=>({'remoteJid':_0x927c21[_0xa843fa(0x6d5)],'fromMe':_0x927c21[_0xa843fa(0x123)],'id':_0x927c21['id']}));await this[_0xa843fa(0x488)][_0xa843fa(0x198)](_0x510f8e);let _0x133f7c=_0x510f8e[_0xa843fa(0x23a)](_0x13aed7=>this[_0xa843fa(0x6fb)](_0x13aed7,{'status':_0xa843fa(0x64e),'owner':this['instance'][_0xa843fa(0x219)]})),_0x3bd6ec=_0x510f8e[_0xa843fa(0x23a)](_0x262bcb=>this[_0xa843fa(0x610)][_0xa843fa(0x273)][_0xa843fa(0x7b6)]({'where':{'_id':_0x262bcb['remoteJid']}},{'unreadcount':0x0},this['instance']['wuid'])),[_0x54869a,_0x1fd5a6]=await Promise['all']([Promise['all'](_0x133f7c),Promise['all'](_0x3bd6ec)]);return _0x1fd5a6[_0xa843fa(0x34f)](_0x360e93=>_0x360e93!==null)[_0xa843fa(0x73e)](_0x297780=>{const _0x28d82e=_0xa843fa;q(this[_0x28d82e(0x2af)],_0x28d82e(0x4f8),{'chat':_0x297780});}),{'message':_0xa843fa(0x57a),'read':'success'};}catch(_0x2db5e1){let _0xe86f9f=_0xa843fa(0x701),_0x3707ff=_0x2db5e1 instanceof Error?_0x2db5e1['message']:typeof _0x2db5e1==_0xa843fa(0x4f6)?JSON[_0xa843fa(0x5e5)](_0x2db5e1):_0x2db5e1,_0x2e724c=_0xe86f9f+':\x20'+_0x3707ff;throw this[_0xa843fa(0x738)][_0xa843fa(0x3a7)](this[_0xa843fa(0x2af)]+'\x20('+this[_0xa843fa(0x448)][_0xa843fa(0x219)]+_0xa843fa(0x3a8)+_0x2e724c),new x(_0x2e724c);}}async['getLastMessage'](_0x46c05d){const _0x3495b3=a0_0x3b8fac;let _0x45f580={'where':{'key':{'remoteJid':_0x46c05d}},'limit':0x1},_0x429a1e=await this[_0x3495b3(0x753)](_0x45f580);return _0x429a1e||(this[_0x3495b3(0x738)][_0x3495b3(0x3a7)](_0x3495b3(0x143)+_0x46c05d),null);}async[a0_0x3b8fac(0x3ac)](_0x1ec8ef){const _0x340cd2=a0_0x3b8fac;this['logger'][_0x340cd2(0x592)](this[_0x340cd2(0x2af)]+'\x20('+this['instance'][_0x340cd2(0x219)]+_0x340cd2(0x293));try{let _0x52734a=_0x1ec8ef[_0x340cd2(0x145)],_0x5696f3=_0x1ec8ef['chat'];if(!_0x52734a&&_0x5696f3?_0x52734a=await this['getLastMessage'](_0x5696f3):(_0x52734a=_0x1ec8ef[_0x340cd2(0x145)],_0x52734a[_0x340cd2(0x118)]=_0x52734a?.['messageTimestamp']??Date[_0x340cd2(0x183)](),_0x5696f3=_0x52734a?.[_0x340cd2(0x3fb)]?.[_0x340cd2(0x6d5)]),!_0x52734a||Object['keys'](_0x52734a)[_0x340cd2(0x3c8)]===0x0)throw new J(_0x340cd2(0x6e3));this[_0x340cd2(0x738)]['verbose'](this['instanceName']+'\x20('+this[_0x340cd2(0x448)][_0x340cd2(0x219)]+_0x340cd2(0x595)+_0x5696f3);try{await this[_0x340cd2(0x488)]['chatModify']({'archive':_0x1ec8ef['archive'],'lastMessages':[_0x52734a]},this[_0x340cd2(0x39d)](_0x5696f3));}catch(_0x37d994){let _0xf34398=_0x340cd2(0x4e7)+_0x5696f3,_0x369923=_0x37d994 instanceof Error?_0x37d994[_0x340cd2(0x4ab)]:typeof _0x37d994==_0x340cd2(0x4f6)?JSON[_0x340cd2(0x5e5)](_0x37d994):_0x37d994,_0xa04c67=_0xf34398+':\x20'+_0x369923;this[_0x340cd2(0x738)]['error'](this['instanceName']+'\x20('+this[_0x340cd2(0x448)][_0x340cd2(0x219)]+'):\x20'+_0xa04c67);}this[_0x340cd2(0x738)][_0x340cd2(0x592)](this['instanceName']+'\x20('+this[_0x340cd2(0x448)]['wuid']+_0x340cd2(0x387)+_0x5696f3);let _0x2cc018=await this[_0x340cd2(0x610)]['chat'][_0x340cd2(0x7b6)]({'where':{'_id':_0x52734a?.[_0x340cd2(0x3fb)]?.[_0x340cd2(0x6d5)]}},{'archived':_0x1ec8ef[_0x340cd2(0x85)]},this[_0x340cd2(0x448)][_0x340cd2(0x219)]);return _0x2cc018?(this[_0x340cd2(0x738)][_0x340cd2(0x592)](this[_0x340cd2(0x2af)]+'\x20('+this[_0x340cd2(0x448)][_0x340cd2(0x219)]+_0x340cd2(0x19a)+JSON['stringify'](_0x2cc018)),q(this[_0x340cd2(0x2af)],_0x340cd2(0x4f8),{'chat':_0x2cc018})):this['logger'][_0x340cd2(0x3a7)](this[_0x340cd2(0x2af)]+'\x20('+this[_0x340cd2(0x448)][_0x340cd2(0x219)]+_0x340cd2(0x4c8)+_0x5696f3),{'chatId':_0x5696f3,'archived':_0x1ec8ef[_0x340cd2(0x85)]};}catch(_0x4253a2){let _0x3569a1=_0x340cd2(0x16c),_0x5578ff=_0x4253a2 instanceof Error?_0x4253a2[_0x340cd2(0x4ab)]:typeof _0x4253a2=='object'?JSON[_0x340cd2(0x5e5)](_0x4253a2):_0x4253a2,_0xdc1c87=_0x3569a1+':\x20'+_0x5578ff;throw this[_0x340cd2(0x738)][_0x340cd2(0x3a7)](this[_0x340cd2(0x2af)]+'\x20('+this[_0x340cd2(0x448)]['wuid']+_0x340cd2(0x3a8)+_0xdc1c87),new x(_0xdc1c87);}}async[a0_0x3b8fac(0x72e)](_0x2c347e){const _0x27999d=a0_0x3b8fac;this[_0x27999d(0x738)][_0x27999d(0x592)](this[_0x27999d(0x2af)]+'\x20('+this[_0x27999d(0x448)][_0x27999d(0x219)]+'):Delete\x20chat');try{let _0x54f71e=await this[_0x27999d(0x584)](_0x2c347e);if(!_0x54f71e||Object[_0x27999d(0x63b)](_0x54f71e)[_0x27999d(0x3c8)]===0x0)throw new J(_0x27999d(0x6e3));let _0x567f9c=_0x54f71e[0x0];this[_0x27999d(0x738)][_0x27999d(0x592)](this[_0x27999d(0x2af)]+'\x20('+this['instance'][_0x27999d(0x219)]+'):Delete\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x2c347e);try{await this[_0x27999d(0x488)][_0x27999d(0x18a)]({'delete':!0x0,'lastMessages':[{'key':_0x567f9c[_0x27999d(0x3fb)],'messageTimestamp':_0x567f9c[_0x27999d(0x118)]}]},this[_0x27999d(0x39d)](_0x2c347e));}catch(_0xb8ea10){this[_0x27999d(0x738)][_0x27999d(0x3a7)]('Error\x20in\x20chatModify\x20for\x20number\x20'+_0x2c347e+':\x20'+_0xb8ea10[_0x27999d(0x2eb)]());}this[_0x27999d(0x738)][_0x27999d(0x592)](this[_0x27999d(0x2af)]+'\x20('+this['instance']['wuid']+_0x27999d(0x387)+_0x2c347e);return;}catch(_0x5cc0f2){throw this[_0x27999d(0x738)][_0x27999d(0x3a7)](this[_0x27999d(0x2af)]+'\x20('+this[_0x27999d(0x448)]['wuid']+_0x27999d(0x2e3)+_0x5cc0f2[_0x27999d(0x2eb)]()),new x({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0x5cc0f2['toString']()]});}}async['deleteMessage'](_0x34a4f8){const _0x568eaa=a0_0x3b8fac;try{let _0x822c68=await this[_0x568eaa(0x488)]['sendMessage'](_0x34a4f8[_0x568eaa(0x6d5)],{'delete':_0x34a4f8});try{let _0x4204be=await this[_0x568eaa(0x6fb)](_0x34a4f8,{'status':_0x568eaa(0x217),'owner':this[_0x568eaa(0x448)][_0x568eaa(0x219)]});this[_0x568eaa(0x738)]['verbose'](this[_0x568eaa(0x2af)]+'\x20('+this[_0x568eaa(0x448)][_0x568eaa(0x219)]+_0x568eaa(0x47a)+_0x4204be);}catch(_0x10ca41){this['logger'][_0x568eaa(0x3a7)](_0x568eaa(0x49a)+_0x10ca41);}return _0x822c68;}catch(_0x1e24c7){throw new x(_0x568eaa(0x54d),_0x1e24c7?.[_0x568eaa(0x2eb)]());}}async[a0_0x3b8fac(0x1a0)](_0x5804ba){const _0x6d9910=a0_0x3b8fac;try{let _0x415208=_0x5804ba?.['message']?_0x5804ba:await this[_0x6d9910(0x1a6)](_0x5804ba[_0x6d9910(0x3fb)],!0x0);for(let _0x158368 of Aa)_0x415208['message'][_0x158368]&&(_0x415208[_0x6d9910(0x4ab)]=_0x415208['message'][_0x158368][_0x6d9910(0x4ab)]);let _0x12a49c,_0x5a275d;for(let _0x336d48 of Ra)if(_0x12a49c=_0x415208['message'][_0x336d48],_0x12a49c){_0x5a275d=_0x336d48;break;}if(!_0x12a49c)throw _0x6d9910(0x67b);typeof _0x12a49c[_0x6d9910(0x342)]==_0x6d9910(0x4f6)&&(_0x415208[_0x6d9910(0x4ab)]=JSON[_0x6d9910(0x224)](JSON[_0x6d9910(0x5e5)](_0x415208[_0x6d9910(0x4ab)])));let _0x21c15d=await(0x0,w[_0x6d9910(0x6a3)])({'key':_0x415208?.['key'],'message':_0x415208?.['message']},_0x6d9910(0x2f7),{},{'logger':(0x0,qt['default'])({'level':_0x6d9910(0x3da)}),'reuploadRequest':this[_0x6d9910(0x488)]['updateMediaMessage']});if(!(_0x21c15d instanceof Buffer))throw new Error('Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.');let _0x59d6e7=this['configService'][_0x6d9910(0x184)](_0x6d9910(0x22d)),_0x1a6751,_0x25c1ee;if(_0x12a49c[_0x6d9910(0x35c)])_0x1a6751=_0x12a49c[_0x6d9910(0x35c)];else{let _0x3d9285=_0x12a49c[_0x6d9910(0x24d)]?.[_0x6d9910(0x6c6)](/\/(\w+)/),_0x2772f6=_0x3d9285?_0x3d9285[0x1]:null;if(!_0x2772f6)throw new Error(_0x6d9910(0x345));_0x1a6751=(0x0,X['v4'])()+'.'+_0x2772f6;}_0x5a275d===_0x6d9910(0x563)?_0x25c1ee=_0x6d9910(0x6dc)+await this[_0x6d9910(0x250)](_0x21c15d['toString'](_0x6d9910(0x456))):(await this[_0x6d9910(0x5d0)](_0x21c15d,_0x1a6751),_0x25c1ee=_0x6d9910(0x6dc)+_0x1a6751);let _0x36c714=this[_0x6d9910(0x2e2)][_0x6d9910(0x184)](_0x6d9910(0x3ba))[_0x6d9910(0x3b9)];if(!_0x36c714){let _0x383ab7=this[_0x6d9910(0x2e2)]['get'](_0x6d9910(0x746));_0x36c714=_0x6d9910(0x111)+(_0x383ab7&&_0x383ab7[_0x6d9910(0x7b7)][_0x6d9910(0x45d)]('/')[0x4]);}_0x25c1ee=''+_0x36c714+_0x25c1ee;let _0x5ce0c5=0xc*0x3c*0x3c*0x3e8,_0x118edf={'where':{'_id':_0x415208[_0x6d9910(0x3fb)]['id']}},_0x59f1d4={'message_normalized.fileUrl':_0x25c1ee,'message_normalized.expires_fileUrl':Date[_0x6d9910(0x183)]()+_0x5ce0c5};try{let _0x5cd33c=await this[_0x6d9910(0x610)]['message'][_0x6d9910(0x1b6)](_0x118edf,_0x59f1d4,this[_0x6d9910(0x448)][_0x6d9910(0x219)]);_0x5cd33c&&q(this[_0x6d9910(0x2af)],'messages',{'message':_0x5cd33c});}catch(_0xcc0064){let _0x4be287='Falha\x20ao\x20processar\x20a\x20solicitao\x20getBase64FromMediaMessage',_0x57b304=_0xcc0064 instanceof Error?_0xcc0064[_0x6d9910(0x4ab)]:typeof _0xcc0064==_0x6d9910(0x4f6)?JSON['stringify'](_0xcc0064):_0xcc0064,_0x43c283=_0x4be287+':\x20'+_0x57b304;this['logger'][_0x6d9910(0x3a7)](this[_0x6d9910(0x2af)]+'\x20('+this['instance'][_0x6d9910(0x219)]+_0x6d9910(0x3a8)+_0x43c283);}return{'mediaType':_0x5a275d,'fileName':_0x12a49c[_0x6d9910(0x35c)],'caption':_0x12a49c[_0x6d9910(0x31e)],'size':{'fileLength':_0x12a49c[_0x6d9910(0x564)],'height':_0x12a49c[_0x6d9910(0x6f5)],'width':_0x12a49c['width']},'mimetype':_0x12a49c[_0x6d9910(0x24d)],'base64':_0x21c15d[_0x6d9910(0x2eb)](_0x6d9910(0x456)),'fileUrl':_0x25c1ee,'expires_fileUrl':Date[_0x6d9910(0x183)]()+_0x5ce0c5};}catch(_0x1697c1){let _0x1eb03d='Falha\x20ao\x20processar\x20a\x20solicitao',_0x217079=_0x1697c1 instanceof Error?_0x1697c1[_0x6d9910(0x4ab)]:typeof _0x1697c1==_0x6d9910(0x4f6)?JSON[_0x6d9910(0x5e5)](_0x1697c1):_0x1697c1,_0x4386ba=_0x1eb03d+':\x20'+_0x217079;throw this['logger']['error'](this[_0x6d9910(0x2af)]+'\x20('+this[_0x6d9910(0x448)][_0x6d9910(0x219)]+'):\x20'+_0x4386ba),new m(_0x4386ba);}}async[a0_0x3b8fac(0x5d0)](_0x19626f,_0xa3339c){const _0x4bf420=a0_0x3b8fac;let _0x2b2ab2=j[_0x4bf420(0x151)][_0x4bf420(0x4c9)](__dirname,_0x4bf420(0x5b5));F[_0x4bf420(0x550)](_0x2b2ab2)||F[_0x4bf420(0xf6)](_0x2b2ab2,{'recursive':!0x0});let _0x4046de=j[_0x4bf420(0x151)]['join'](_0x2b2ab2,_0xa3339c);return new Promise((_0x23bac2,_0x59a742)=>{const _0x3cc7f2=_0x4bf420;F[_0x3cc7f2(0x469)](_0x4046de,_0x19626f,_0x4561bf=>{const _0x2a0be3=_0x3cc7f2;_0x4561bf?(this[_0x2a0be3(0x738)][_0x2a0be3(0x3a7)](_0x2a0be3(0x3bf)+(_0x4561bf instanceof Error?_0x4561bf[_0x2a0be3(0x4ab)]:JSON[_0x2a0be3(0x5e5)](_0x4561bf,null,0x2))),_0x59a742(_0x4561bf)):(this[_0x2a0be3(0x738)][_0x2a0be3(0x514)](_0x2a0be3(0x167)+_0x4046de),_0x23bac2(_0x4046de));});});}async[a0_0x3b8fac(0x32b)](_0x59150f){const _0x1dd98d=a0_0x3b8fac;return await this['repository'][_0x1dd98d(0x7a8)][_0x1dd98d(0x7a1)](_0x59150f,this[_0x1dd98d(0x448)][_0x1dd98d(0x219)]);}async['fetchLabels'](){const _0x237da1=a0_0x3b8fac;return await this[_0x237da1(0x610)]['label']['find']({'where':{}},this[_0x237da1(0x448)]['wuid']);}async[a0_0x3b8fac(0x753)](_0x468934){const _0x29aaf5=a0_0x3b8fac;return await this['repository']['message']['find'](_0x468934,this[_0x29aaf5(0x448)][_0x29aaf5(0x219)]);}async[a0_0x3b8fac(0x6b7)](){const _0x2aa2f8=a0_0x3b8fac;return this[_0x2aa2f8(0x610)]['chat'][_0x2aa2f8(0x411)](this['instance'][_0x2aa2f8(0x219)]),this[_0x2aa2f8(0x610)][_0x2aa2f8(0x273)][_0x2aa2f8(0x3b1)](this[_0x2aa2f8(0x448)]['wuid']),this['repository'][_0x2aa2f8(0x273)][_0x2aa2f8(0x2ea)](this[_0x2aa2f8(0x448)][_0x2aa2f8(0x219)]),this[_0x2aa2f8(0x610)][_0x2aa2f8(0x273)][_0x2aa2f8(0x62e)](this['instance'][_0x2aa2f8(0x219)]),await this['repository']['chat'][_0x2aa2f8(0x7a1)]({'where':{}},this[_0x2aa2f8(0x448)][_0x2aa2f8(0x219)]);}async[a0_0x3b8fac(0x786)](_0x765c50){const _0x1542af=a0_0x3b8fac;try{if(!Array['isArray'](_0x765c50)||_0x765c50[_0x1542af(0x3c8)]===0x0)throw new Error(_0x1542af(0x791));let _0x582633=[],_0x515047=[];for(let _0x1e5158 of _0x765c50){if(_0x1e5158[_0x1542af(0x4ff)])_0x1e5158['_id']=this['createJid'](_0x1e5158[_0x1542af(0x4ff)]);else continue;await this['repository'][_0x1542af(0x273)][_0x1542af(0x7ac)]({'where':{'_id':_0x1e5158[_0x1542af(0x4ff)]}},this[_0x1542af(0x448)][_0x1542af(0x219)])?_0x515047[_0x1542af(0x42a)]({'_id':_0x1e5158[_0x1542af(0x4ff)],'leadInfo':_0x1e5158[_0x1542af(0x79e)],'owner':this[_0x1542af(0x448)][_0x1542af(0x219)]}):_0x582633[_0x1542af(0x42a)]({'_id':_0x1e5158['_id'],'owner':this[_0x1542af(0x448)][_0x1542af(0x219)],'leadInfo':_0x1e5158['leadInfo'],'imported':!0x0});}return _0x515047[_0x1542af(0x3c8)]>0x0&&await this[_0x1542af(0x610)][_0x1542af(0x273)]['updateMany'](_0x515047[_0x1542af(0x23a)](_0x9ad73a=>({'query':{'where':{'_id':_0x9ad73a[_0x1542af(0x4ff)],'owner':this['instance'][_0x1542af(0x219)]}},'update':_0x9ad73a}))),_0x582633[_0x1542af(0x3c8)]>0x0&&await this['repository'][_0x1542af(0x273)]['insertMany'](_0x582633,this[_0x1542af(0x448)]['wuid']),{'updated':_0x515047[_0x1542af(0x3c8)],'inserted':_0x582633[_0x1542af(0x3c8)]};}catch(_0x1fc0d0){let _0x1e9900=_0x1542af(0x195),_0x43049b=_0x1fc0d0 instanceof Error?_0x1fc0d0[_0x1542af(0x4ab)]:typeof _0x1fc0d0==_0x1542af(0x4f6)?JSON[_0x1542af(0x5e5)](_0x1fc0d0):_0x1fc0d0,_0x182d07=_0x1e9900+':\x20'+_0x43049b;throw this[_0x1542af(0x738)][_0x1542af(0x3a7)](this['instanceName']+'\x20('+this[_0x1542af(0x448)][_0x1542af(0x219)]+_0x1542af(0x3a8)+_0x182d07),new m(_0x182d07);}}async[a0_0x3b8fac(0x5db)](_0x380438){const _0x9ddcf4=a0_0x3b8fac;try{if(!Array[_0x9ddcf4(0x338)](_0x380438)||_0x380438[_0x9ddcf4(0x3c8)]===0x0)throw new Error(_0x9ddcf4(0x791));let _0x38fc1d=0x64,_0x3a3188=0x0;for(let _0x24b6f8=0x0;_0x24b6f8<_0x380438['length'];_0x24b6f8+=_0x38fc1d){let _0x58ea57=_0x380438[_0x9ddcf4(0x484)](_0x24b6f8,_0x24b6f8+_0x38fc1d),{updated:_0x46a045}=await this[_0x9ddcf4(0x218)](_0x58ea57);_0x3a3188+=_0x46a045;}return{'updated':_0x3a3188};}catch(_0x21d22d){let _0x483f1c=_0x9ddcf4(0x195),_0x31af5b=_0x21d22d instanceof Error?_0x21d22d[_0x9ddcf4(0x4ab)]:typeof _0x21d22d=='object'?JSON[_0x9ddcf4(0x5e5)](_0x21d22d):_0x21d22d,_0xd1edaf=_0x483f1c+':\x20'+_0x31af5b;throw this['logger'][_0x9ddcf4(0x3a7)](this[_0x9ddcf4(0x2af)]+'\x20('+this[_0x9ddcf4(0x448)][_0x9ddcf4(0x219)]+'):\x20'+_0xd1edaf),new m(_0xd1edaf);}}async['importChatsBatch'](_0x4fdb0c){const _0x311f40=a0_0x3b8fac;try{let _0x18ddfb=await this[_0x311f40(0x610)][_0x311f40(0x396)][_0x311f40(0x7a1)]({'where':{}},this[_0x311f40(0x448)][_0x311f40(0x219)]),_0x147e4b=new Set(_0x18ddfb['map'](_0x2c7029=>_0x2c7029[_0x311f40(0x4ff)])),_0x111308=[],_0x2ded6f=[];for(let _0x27212b of _0x4fdb0c){if(!_0x27212b[_0x311f40(0x4ff)])continue;_0x27212b[_0x311f40(0x4ff)]=this['createJid'](_0x27212b[_0x311f40(0x4ff)]);let _0x410bcf=await this[_0x311f40(0x610)]['chat']['findOne']({'where':{'_id':_0x27212b[_0x311f40(0x4ff)]}},this[_0x311f40(0x448)][_0x311f40(0x219)]),_0x9e2dc5={};if(Object[_0x311f40(0x4b7)](_0x27212b[_0x311f40(0x79e)])[_0x311f40(0x73e)](([_0x5eb42d,_0x5362ca])=>{const _0x3fbaab=_0x311f40;_0x9e2dc5[_0x3fbaab(0x81)+_0x5eb42d]=_0x5362ca;}),_0x410bcf&&!_0x410bcf[_0x311f40(0x688)]){let _0x32d6bc=(_0x27212b[_0x311f40(0x79e)][_0x311f40(0x1b0)]||[])[_0x311f40(0x34f)](_0x404441=>_0x147e4b[_0x311f40(0x59b)](_0x404441)),_0x1eedcd=new Set(_0x410bcf[_0x311f40(0x79e)][_0x311f40(0x1b0)]||[]),_0x21eb9e=_0x32d6bc[_0x311f40(0x34f)](_0x1be098=>!_0x1eedcd['has'](_0x1be098)),_0xa7e6f5=[..._0x1eedcd][_0x311f40(0x34f)](_0x140778=>!_0x32d6bc[_0x311f40(0x43a)](_0x140778));_0x2ded6f[_0x311f40(0x42a)](..._0x21eb9e[_0x311f40(0x23a)](_0x36ab9c=>this[_0x311f40(0x1d2)](_0x36ab9c,_0x27212b[_0x311f40(0x4ff)]))),_0x2ded6f[_0x311f40(0x42a)](..._0xa7e6f5[_0x311f40(0x23a)](_0x2fa33e=>this[_0x311f40(0xda)](_0x2fa33e,_0x27212b['_id']))),_0x27212b['leadInfo'][_0x311f40(0x1b0)]=_0x32d6bc,_0x111308[_0x311f40(0x42a)]({'query':{'where':{'_id':_0x27212b['_id'],'owner':this[_0x311f40(0x448)][_0x311f40(0x219)]}},'update':_0x9e2dc5});}else _0x9e2dc5[_0x311f40(0x688)]=!0x0,_0x111308[_0x311f40(0x42a)]({'query':{'where':{'_id':_0x27212b[_0x311f40(0x4ff)],'owner':this[_0x311f40(0x448)][_0x311f40(0x219)]}},'update':_0x9e2dc5});}let _0x15aa51=await this[_0x311f40(0x610)][_0x311f40(0x273)][_0x311f40(0x2de)](_0x111308);return await Promise['all'](_0x2ded6f),{'updated':_0x15aa51};}catch(_0x262673){let _0x2fe401=_0x311f40(0x195),_0x2f892e=_0x262673 instanceof Error?_0x262673[_0x311f40(0x4ab)]:typeof _0x262673==_0x311f40(0x4f6)?JSON[_0x311f40(0x5e5)](_0x262673):_0x262673,_0x155f9b=_0x2fe401+':\x20'+_0x2f892e;throw this[_0x311f40(0x738)][_0x311f40(0x3a7)](this['instanceName']+'\x20('+this[_0x311f40(0x448)][_0x311f40(0x219)]+_0x311f40(0x3a8)+_0x155f9b),new m(_0x155f9b);}}async[a0_0x3b8fac(0x54b)](){const _0x30fa37=a0_0x3b8fac;return await this[_0x30fa37(0x488)][_0x30fa37(0x54b)]();}async[a0_0x3b8fac(0x1dd)](_0x544d0d){const _0x2d0545=a0_0x3b8fac;try{return await this[_0x2d0545(0x488)][_0x2d0545(0x5d5)](_0x544d0d[_0x2d0545(0x115)][_0x2d0545(0x7a7)]),await this['client'][_0x2d0545(0x25e)](_0x544d0d['privacySettings']['profile']),await this['client'][_0x2d0545(0x4fd)](_0x544d0d[_0x2d0545(0x115)][_0x2d0545(0x233)]),await this['client'][_0x2d0545(0x1bb)](_0x544d0d[_0x2d0545(0x115)][_0x2d0545(0x6fa)]),await this[_0x2d0545(0x488)][_0x2d0545(0x61f)](_0x544d0d[_0x2d0545(0x115)][_0x2d0545(0x301)]),await this[_0x2d0545(0x488)][_0x2d0545(0x277)](_0x544d0d[_0x2d0545(0x115)][_0x2d0545(0x30d)]),this['client']?.['ws']?.[_0x2d0545(0x6a1)](),{'update':'success','data':{'readreceipts':_0x544d0d[_0x2d0545(0x115)][_0x2d0545(0x7a7)],'profile':_0x544d0d[_0x2d0545(0x115)]['profile'],'status':_0x544d0d['privacySettings'][_0x2d0545(0x233)],'online':_0x544d0d[_0x2d0545(0x115)]['online'],'last':_0x544d0d[_0x2d0545(0x115)][_0x2d0545(0x301)],'groupadd':_0x544d0d[_0x2d0545(0x115)]['groupadd']}};}catch(_0x302d13){let _0x23efb7=_0x2d0545(0x321),_0x325fad=_0x302d13 instanceof Error?_0x302d13['message']:typeof _0x302d13==_0x2d0545(0x4f6)?JSON[_0x2d0545(0x5e5)](_0x302d13):_0x302d13,_0xf0f6d3=_0x23efb7+':\x20'+_0x325fad;throw this[_0x2d0545(0x738)][_0x2d0545(0x3a7)](this[_0x2d0545(0x2af)]+'\x20('+this[_0x2d0545(0x448)][_0x2d0545(0x219)]+_0x2d0545(0x3a8)+_0xf0f6d3),new m(_0xf0f6d3);}}async['fetchProfile'](_0x7a3fb9){const _0x1b67b6=a0_0x3b8fac;let _0x5f3e72=(_0x7a3fb9?this[_0x1b67b6(0x39d)](_0x7a3fb9):this[_0x1b67b6(0x488)]?.['user']?.['id'])[_0x1b67b6(0x1c6)](/:\d{1,2}@/g,'@');this[_0x1b67b6(0x738)][_0x1b67b6(0x592)](this['instanceName']+'\x20('+this[_0x1b67b6(0x448)][_0x1b67b6(0x219)]+_0x1b67b6(0x7cd)+_0x5f3e72);let _0x488105=await this[_0x1b67b6(0x610)][_0x1b67b6(0x7a8)][_0x1b67b6(0x7ac)]({'where':{'_id':_0x5f3e72}},this[_0x1b67b6(0x448)][_0x1b67b6(0x219)]),_0x328f20=_0x488105?_0x488105[_0x1b67b6(0x60e)]:null;try{let _0x3228c3=(await this[_0x1b67b6(0x269)]({'numbers':[_0x5f3e72]}))?.[_0x1b67b6(0x585)](),_0x20ddde=(await this[_0x1b67b6(0x9a)](_0x5f3e72,null,!0x1))[_0x1b67b6(0x8c)][_0x1b67b6(0x25a)],_0x451ab2=await this['getStatus'](_0x3228c3?.[_0x1b67b6(0x6ea)]),_0x3347c7=await this[_0x1b67b6(0x4de)](_0x3228c3?.['jid']),_0xd2c82f=(await this[_0x1b67b6(0x9a)](_0x5f3e72,null,!0x1))['cachedContact'][_0x1b67b6(0x26b)],_0x18d3aa=await this[_0x1b67b6(0x610)][_0x1b67b6(0x273)][_0x1b67b6(0x7ac)]({'where':{'_id':_0x5f3e72}},this[_0x1b67b6(0x448)][_0x1b67b6(0x219)]),_0x43cd73={'imagechat':_0x20ddde,'contactname':_0x328f20||null,'pushName':_0xd2c82f,'status':_0x451ab2?.[_0x1b67b6(0x233)],'isBusiness':_0x3347c7[_0x1b67b6(0x11c)],'email':_0x3347c7?.[_0x1b67b6(0x6b0)],'description':_0x3347c7?.[_0x1b67b6(0x53f)],'website':_0x3347c7?.[_0x1b67b6(0x63a)]?.[_0x1b67b6(0x585)](),'lastcache':Date['now'](),'imported':!_0x18d3aa},_0x5bdc08=await this[_0x1b67b6(0x610)][_0x1b67b6(0x273)][_0x1b67b6(0x7b6)]({'where':{'_id':_0x5f3e72}},_0x43cd73,this[_0x1b67b6(0x448)]['wuid']),_0x118e86={'owner':this['instance'][_0x1b67b6(0x219)],'_id':_0x5f3e72,'profilePictureUrl':_0x20ddde,'status':_0x451ab2?.[_0x1b67b6(0x233)]};return this[_0x1b67b6(0x610)]['contact'][_0x1b67b6(0x1b6)]([_0x118e86],this['instance']['wuid']),_0x5bdc08&&q(this['instanceName'],_0x1b67b6(0x4f8),{'chat':_0x5bdc08}),{'wuid':_0x3228c3?.[_0x1b67b6(0x6ea)]||_0x5f3e72,'name':_0x3228c3?.[_0x1b67b6(0x26b)],'pushName':_0xd2c82f,'numberExists':_0x3228c3?.[_0x1b67b6(0x323)],'picture':_0x20ddde,'status':_0x451ab2?.[_0x1b67b6(0x233)],'isBusiness':_0x3347c7[_0x1b67b6(0x11c)],'email':_0x3347c7?.[_0x1b67b6(0x6b0)],'description':_0x3347c7?.[_0x1b67b6(0x53f)],'website':_0x3347c7?.[_0x1b67b6(0x63a)]?.[_0x1b67b6(0x585)]()};}catch(_0x250d68){return this['logger'][_0x1b67b6(0x3a7)]('Error\x20fetching\x20and\x20updating\x20profile:\x20'+(_0x250d68 instanceof Error?_0x250d68[_0x1b67b6(0x4ab)]:JSON[_0x1b67b6(0x5e5)](_0x250d68,null,0x2))),{};}}async[a0_0x3b8fac(0x4de)](_0x204327){const _0x4b2b1e=a0_0x3b8fac;this[_0x4b2b1e(0x738)][_0x4b2b1e(0x592)](this[_0x4b2b1e(0x2af)]+'\x20('+this['instance'][_0x4b2b1e(0x219)]+_0x4b2b1e(0x37a));try{let _0x15e01f=_0x204327?this[_0x4b2b1e(0x39d)](_0x204327):this[_0x4b2b1e(0x448)][_0x4b2b1e(0x219)],_0xf067bb=await this[_0x4b2b1e(0x488)][_0x4b2b1e(0x1ac)](_0x15e01f);return this[_0x4b2b1e(0x738)][_0x4b2b1e(0x592)](this[_0x4b2b1e(0x2af)]+'\x20('+this[_0x4b2b1e(0x448)]['wuid']+'):Trying\x20to\x20get\x20business\x20profile'),_0xf067bb?(this[_0x4b2b1e(0x738)][_0x4b2b1e(0x592)](this[_0x4b2b1e(0x2af)]+'\x20('+this[_0x4b2b1e(0x448)][_0x4b2b1e(0x219)]+'):Business\x20profile\x20fetched'),{'isBusiness':!0x0,..._0xf067bb}):{'isBusiness':!0x1,'message':_0x4b2b1e(0x7c4),...(await this[_0x4b2b1e(0x269)]({'numbers':[_0x15e01f]}))?.[_0x4b2b1e(0x585)]()};}catch(_0x3260ab){let _0xb9171a='Falha\x20ao\x20processar\x20fetchBusinessProfile',_0x380ba3=_0x3260ab instanceof Error?_0x3260ab['message']:typeof _0x3260ab==_0x4b2b1e(0x4f6)?JSON['stringify'](_0x3260ab):_0x3260ab,_0x37ec31=_0xb9171a+':\x20'+_0x380ba3;throw this['logger'][_0x4b2b1e(0x3a7)](this[_0x4b2b1e(0x2af)]+'\x20('+this[_0x4b2b1e(0x448)][_0x4b2b1e(0x219)]+'):\x20'+_0x37ec31),new x(_0x37ec31);}}async[a0_0x3b8fac(0x557)](_0x230f96){const _0x3995d1=a0_0x3b8fac;let _0x1fed5e=this[_0x3995d1(0x39d)](_0x230f96);try{return{'wuid':_0x1fed5e,'status':(await this[_0x3995d1(0x488)][_0x3995d1(0x5ef)](_0x1fed5e))[0x0]?.[_0x3995d1(0x233)]};}catch{return{'wuid':_0x1fed5e,'status':null};}}async[a0_0x3b8fac(0x279)](_0x5416bc){const _0x537b39=a0_0x3b8fac;try{return await this['client']['updateProfileName'](_0x5416bc),{'update':'success'};}catch(_0x1b1ef4){let _0x161592='Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileName',_0x403d38=_0x1b1ef4 instanceof Error?_0x1b1ef4[_0x537b39(0x4ab)]:typeof _0x1b1ef4==_0x537b39(0x4f6)?JSON[_0x537b39(0x5e5)](_0x1b1ef4):_0x1b1ef4,_0x429103=_0x161592+':\x20'+_0x403d38;throw this[_0x537b39(0x738)][_0x537b39(0x3a7)](this[_0x537b39(0x2af)]+'\x20('+this[_0x537b39(0x448)][_0x537b39(0x219)]+_0x537b39(0x3a8)+_0x429103),new x(_0x429103);}}async[a0_0x3b8fac(0x638)](_0x380c9a){const _0x3d915f=a0_0x3b8fac;try{return await this[_0x3d915f(0x488)][_0x3d915f(0x638)](_0x380c9a),{'update':_0x3d915f(0x3a4)};}catch(_0x9aeef4){let _0x4277a1='Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileStatus',_0x18f657=_0x9aeef4 instanceof Error?_0x9aeef4[_0x3d915f(0x4ab)]:typeof _0x9aeef4==_0x3d915f(0x4f6)?JSON[_0x3d915f(0x5e5)](_0x9aeef4):_0x9aeef4,_0x1858c7=_0x4277a1+':\x20'+_0x18f657;throw this[_0x3d915f(0x738)]['error'](this['instanceName']+'\x20('+this[_0x3d915f(0x448)][_0x3d915f(0x219)]+_0x3d915f(0x3a8)+_0x1858c7),new x(_0x1858c7);}}async['updateProfilePicture'](_0x4b92ce){const _0x4d6590=a0_0x3b8fac;try{let _0x3355d1;if((0x0,L[_0x4d6590(0x4c6)])(_0x4b92ce)){let _0x4454e7=new Date()[_0x4d6590(0x5ba)](),_0x7c036c=_0x4b92ce+_0x4d6590(0x3d6)+_0x4454e7;_0x3355d1=(await te[_0x4d6590(0x151)]['get'](_0x7c036c,{'responseType':_0x4d6590(0x20b)}))['data'];}else{if((0x0,L[_0x4d6590(0x45a)])(_0x4b92ce))_0x3355d1=Buffer['from'](_0x4b92ce,_0x4d6590(0x456));else throw new m(_0x4d6590(0x4be));}return await this[_0x4d6590(0x488)][_0x4d6590(0x459)](this[_0x4d6590(0x448)]['wuid'],_0x3355d1),{'update':_0x4d6590(0x3a4)};}catch(_0x296b99){let _0x27447c=_0x4d6590(0x3f3),_0x2cf60c=_0x296b99 instanceof Error?_0x296b99['message']:typeof _0x296b99==_0x4d6590(0x4f6)?JSON[_0x4d6590(0x5e5)](_0x296b99):_0x296b99,_0x1facdb=_0x27447c+':\x20'+_0x2cf60c;throw this[_0x4d6590(0x738)]['error'](this['instanceName']+'\x20('+this['instance'][_0x4d6590(0x219)]+_0x4d6590(0x3a8)+_0x1facdb),new x(_0x1facdb);}}async['removeProfilePicture'](){const _0x171c1a=a0_0x3b8fac;try{return await this[_0x171c1a(0x488)][_0x171c1a(0x24e)](this[_0x171c1a(0x448)][_0x171c1a(0x219)]),{'update':'success'};}catch(_0x500d65){let _0x26f247=_0x171c1a(0x7ae),_0xa3e569=_0x500d65 instanceof Error?_0x500d65['message']:typeof _0x500d65=='object'?JSON[_0x171c1a(0x5e5)](_0x500d65):_0x500d65,_0x309b45=_0x26f247+':\x20'+_0xa3e569;throw this[_0x171c1a(0x738)][_0x171c1a(0x3a7)](this[_0x171c1a(0x2af)]+'\x20('+this[_0x171c1a(0x448)][_0x171c1a(0x219)]+_0x171c1a(0x3a8)+_0x309b45),new x(_0x309b45);}}async[a0_0x3b8fac(0x22b)](_0x48cb27){const _0x1cb837=a0_0x3b8fac;try{let _0x38f5d6=(await this['whatsappNumber']({'numbers':_0x48cb27['participants']}))[_0x1cb837(0x34f)](_0x22ba27=>_0x22ba27[_0x1cb837(0x323)])['map'](_0x4b2f06=>_0x4b2f06[_0x1cb837(0x6ea)]),{id:_0x1b7f27}=await this[_0x1cb837(0x488)][_0x1cb837(0x1ad)](_0x48cb27[_0x1cb837(0x155)],_0x38f5d6);_0x48cb27?.[_0x1cb837(0x53f)]&&await this[_0x1cb837(0x488)][_0x1cb837(0x43e)](_0x1b7f27,_0x48cb27[_0x1cb837(0x53f)]);let _0x56c463=await this[_0x1cb837(0x488)][_0x1cb837(0x26f)](_0x1b7f27);return _0x56c463[_0x1cb837(0x48d)]=[],{'metadata':_0x56c463};}catch(_0x2568e8){let _0x20e377=_0x1cb837(0x414),_0x139054=_0x2568e8 instanceof Error?_0x2568e8[_0x1cb837(0x4ab)]:typeof _0x2568e8==_0x1cb837(0x4f6)?JSON[_0x1cb837(0x5e5)](_0x2568e8):_0x2568e8,_0x440a22=_0x20e377+':\x20'+_0x139054;throw this[_0x1cb837(0x738)][_0x1cb837(0x3a7)](this[_0x1cb837(0x2af)]+'\x20('+this[_0x1cb837(0x448)]['wuid']+_0x1cb837(0x3a8)+_0x440a22),new x(_0x440a22);}}async['groupBetterSetting'](_0x3a2b32){const _0x2da7e4=a0_0x3b8fac;try{if(_0x3a2b32[_0x2da7e4(0x180)]===!0x0&&await this['client'][_0x2da7e4(0x31a)](_0x3a2b32[_0x2da7e4(0x658)],_0x2da7e4(0x2c9)),_0x3a2b32[_0x2da7e4(0x180)]===!0x1&&await this['client'][_0x2da7e4(0x31a)](_0x3a2b32[_0x2da7e4(0x658)],_0x2da7e4(0x188)),_0x3a2b32[_0x2da7e4(0x784)]===!0x0&&await this['client'][_0x2da7e4(0x31a)](_0x3a2b32[_0x2da7e4(0x658)],_0x2da7e4(0x75d)),_0x3a2b32[_0x2da7e4(0x784)]===!0x1&&await this[_0x2da7e4(0x488)]['groupSettingUpdate'](_0x3a2b32[_0x2da7e4(0x658)],_0x2da7e4(0x1be)),_0x3a2b32[_0x2da7e4(0x4d4)]===!0x0&&await this['client'][_0x2da7e4(0x29e)](_0x3a2b32[_0x2da7e4(0x658)],_0x2da7e4(0x77c)),_0x3a2b32['memberAddMode']===!0x1&&await this[_0x2da7e4(0x488)][_0x2da7e4(0x29e)](_0x3a2b32[_0x2da7e4(0x658)],_0x2da7e4(0x5e7)),_0x3a2b32[_0x2da7e4(0x1c5)]===!0x0&&await this[_0x2da7e4(0x488)][_0x2da7e4(0x766)](_0x3a2b32[_0x2da7e4(0x658)],'on'),_0x3a2b32[_0x2da7e4(0x1c5)]===!0x1&&await this[_0x2da7e4(0x488)][_0x2da7e4(0x766)](_0x3a2b32[_0x2da7e4(0x658)],_0x2da7e4(0x33a)),typeof _0x3a2b32[_0x2da7e4(0x1a7)]<'u'&&_0x3a2b32['expiration']!==null&&await this[_0x2da7e4(0x488)][_0x2da7e4(0x553)](_0x3a2b32[_0x2da7e4(0x658)],_0x3a2b32[_0x2da7e4(0x1a7)]),_0x3a2b32[_0x2da7e4(0x26b)]&&await this[_0x2da7e4(0x488)][_0x2da7e4(0x643)](_0x3a2b32[_0x2da7e4(0x658)],_0x3a2b32['name']),_0x3a2b32[_0x2da7e4(0x53f)]&&await this[_0x2da7e4(0x488)][_0x2da7e4(0x43e)](_0x3a2b32[_0x2da7e4(0x658)],_0x3a2b32[_0x2da7e4(0x53f)]),_0x3a2b32[_0x2da7e4(0x410)]){let _0x1bc1e7;if((0x0,L[_0x2da7e4(0x4c6)])(_0x3a2b32[_0x2da7e4(0x410)])){let _0x2d455c=new Date()[_0x2da7e4(0x5ba)](),_0x522b9f=_0x3a2b32['image']+_0x2da7e4(0x3d6)+_0x2d455c;_0x1bc1e7=(await te[_0x2da7e4(0x151)][_0x2da7e4(0x184)](_0x522b9f,{'responseType':_0x2da7e4(0x20b)}))[_0x2da7e4(0x5c3)];}else{if((0x0,L[_0x2da7e4(0x45a)])(_0x3a2b32['image']))_0x1bc1e7=Buffer[_0x2da7e4(0x2ab)](_0x3a2b32[_0x2da7e4(0x410)],'base64');else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}await this[_0x2da7e4(0x488)][_0x2da7e4(0x459)](_0x3a2b32['groupJid'],_0x1bc1e7);}return await this['findGroup']({'groupJid':_0x3a2b32[_0x2da7e4(0x658)]});}catch(_0x5b0d2b){let _0xfd2bca='Falha\x20ao\x20processar\x20a\x20solicitao\x20groupBetterSetting',_0x3bb377=_0x5b0d2b instanceof Error?_0x5b0d2b[_0x2da7e4(0x4ab)]:typeof _0x5b0d2b=='object'?JSON['stringify'](_0x5b0d2b):_0x5b0d2b,_0x58797a=_0xfd2bca+':\x20'+_0x3bb377;throw this[_0x2da7e4(0x738)][_0x2da7e4(0x3a7)](this['instanceName']+'\x20('+this['instance'][_0x2da7e4(0x219)]+'):\x20'+_0x58797a),new x(_0x58797a);}}async['updateGParticipant'](_0x55fc2d){const _0x2c497c=a0_0x3b8fac;try{if(_0x55fc2d[_0x2c497c(0x670)]===_0x2c497c(0x71e)||_0x55fc2d[_0x2c497c(0x670)]===_0x2c497c(0x69c)){let _0x51c9be=_0x55fc2d[_0x2c497c(0x18b)]['map'](_0x3531ee=>this[_0x2c497c(0x39d)](_0x3531ee));await this[_0x2c497c(0x488)][_0x2c497c(0x481)](_0x55fc2d[_0x2c497c(0x658)],_0x51c9be,_0x55fc2d[_0x2c497c(0x670)]);}else{if(_0x55fc2d['action']===_0x2c497c(0x1a8)){let _0x283a9b=(await this['whatsappNumber']({'numbers':_0x55fc2d[_0x2c497c(0x18b)]}))['filter'](_0x5a16c8=>_0x5a16c8[_0x2c497c(0x323)])[_0x2c497c(0x23a)](_0x2ddb41=>this[_0x2c497c(0x39d)](_0x2ddb41[_0x2c497c(0x6ea)]));if(_0x283a9b[_0x2c497c(0x3c8)]===0x0)throw new m(_0x2c497c(0xaa));await this[_0x2c497c(0x488)]['groupParticipantsUpdate'](_0x55fc2d['groupJid'],_0x283a9b,_0x2c497c(0x1a8));}else{let _0x38b9c0=_0x55fc2d[_0x2c497c(0x18b)][_0x2c497c(0x23a)](_0x4c919e=>this[_0x2c497c(0x39d)](_0x4c919e));await this[_0x2c497c(0x488)][_0x2c497c(0x5df)](_0x55fc2d['groupJid'],_0x38b9c0,_0x55fc2d[_0x2c497c(0x670)]);}}return await this[_0x2c497c(0x69f)]({'groupJid':_0x55fc2d['groupJid']});}catch(_0x586dcb){let _0x3c0469=_0x2c497c(0x5ca),_0x384229=_0x586dcb instanceof Error?_0x586dcb[_0x2c497c(0x4ab)]:typeof _0x586dcb==_0x2c497c(0x4f6)?JSON[_0x2c497c(0x5e5)](_0x586dcb):_0x586dcb,_0xa4b6d5=_0x3c0469+':\x20'+_0x384229;throw this['logger'][_0x2c497c(0x3a7)](this[_0x2c497c(0x2af)]+'\x20('+this[_0x2c497c(0x448)][_0x2c497c(0x219)]+_0x2c497c(0x3a8)+_0xa4b6d5),new m(_0xa4b6d5);}}async[a0_0x3b8fac(0x1d6)](_0x545c58){const _0x3802ea=a0_0x3b8fac;try{return await this[_0x3802ea(0x488)][_0x3802ea(0x1d6)](_0x545c58[_0x3802ea(0x537)]);}catch(_0x2a31e6){let _0x3f2ab3=_0x3802ea(0x185),_0x5bf00e=_0x2a31e6 instanceof Error?_0x2a31e6[_0x3802ea(0x4ab)]:typeof _0x2a31e6==_0x3802ea(0x4f6)?JSON[_0x3802ea(0x5e5)](_0x2a31e6):_0x2a31e6,_0x22991c=_0x3f2ab3+':\x20'+_0x5bf00e;throw this[_0x3802ea(0x738)][_0x3802ea(0x3a7)](this[_0x3802ea(0x2af)]+'\x20('+this[_0x3802ea(0x448)][_0x3802ea(0x219)]+'):\x20'+_0x22991c),new m(_0x22991c);}}async[a0_0x3b8fac(0x69f)](_0x28a78e,_0x25abc5='out'){const _0x263983=a0_0x3b8fac;try{let _0x3ff6ac=await this[_0x263983(0x610)][_0x263983(0x273)]['findOne']({'where':{'_id':_0x28a78e[_0x263983(0x658)]}},this['instance'][_0x263983(0x219)]),_0x239386=_0x3ff6ac?_0x3ff6ac['groupdata']:null,_0x4962b6=0x18*0x3c*0x3c*0x3e8;if(!_0x239386||_0x239386['lastUpdate']&&Date[_0x263983(0x183)]()-_0x239386['lastUpdate']>_0x4962b6){let _0x542c58=await this['client'][_0x263983(0x26f)](_0x28a78e['groupJid']);if(_0x542c58[_0x263983(0x6f6)]=_0x542c58?.[_0x263983(0x6f6)]&&_0x542c58[_0x263983(0x6f6)][_0x263983(0x2eb)]()[_0x263983(0x3c8)]<0xd?_0x542c58?.[_0x263983(0x6f6)]*0x3e8:_0x542c58?.[_0x263983(0x6f6)]||null,_0x542c58[_0x263983(0x1c2)]=_0x542c58?.[_0x263983(0x1c2)]&&_0x542c58[_0x263983(0x1c2)]['toString']()[_0x263983(0x3c8)]<0xd?_0x542c58?.[_0x263983(0x1c2)]*0x3e8:_0x542c58?.[_0x263983(0x1c2)]||null,_0x239386={..._0x542c58,'lastUpdate':Date[_0x263983(0x183)]()},!_0x542c58)return;}let _0x51a139=_0x239386[_0x263983(0x18b)][_0x263983(0x39e)](_0x303aeb=>_0x303aeb['id']===this[_0x263983(0x448)][_0x263983(0x219)]+_0x263983(0x482)&&_0x303aeb['admin']!=null);!_0x239386[_0x263983(0x537)]&&_0x51a139&&(_0x239386[_0x263983(0x537)]=(await this['inviteCode'](_0x28a78e,!0x1))['inviteUrl']);let _0x3bd3c1=(!_0x239386['announce']||_0x51a139)&&(!_0x239386[_0x263983(0x33c)]||_0x239386['isCommunity']&&_0x239386['isCommunityAnnounce']&&_0x51a139);_0x239386['isAdmin']=_0x51a139,_0x239386[_0x263983(0x2f3)]=_0x3bd3c1;let _0x5cc494=[];if(_0x51a139&&_0x239386['joinApprovalMode'])try{_0x5cc494=await this[_0x263983(0x488)]['groupRequestParticipantsList'](_0x28a78e[_0x263983(0x658)]),_0x239386[_0x263983(0x6a2)]=Date[_0x263983(0x183)]();}catch(_0x3d92d9){this[_0x263983(0x738)][_0x263983(0x592)](this[_0x263983(0x2af)]+'\x20('+this[_0x263983(0x448)][_0x263983(0x219)]+'):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20'+_0x28a78e['groupJid']+':\x20'+(_0x3d92d9 instanceof Error?_0x3d92d9['message']:JSON[_0x263983(0x5e5)](_0x3d92d9,null,0x2)));}try{_0x239386[_0x263983(0x410)]=(await this[_0x263983(0x9a)](_0x28a78e[_0x263983(0x658)],null,!0x0))[_0x263983(0x8c)]['pictureUrl'];}catch(_0x22f139){this[_0x263983(0x738)]['verbose'](this[_0x263983(0x2af)]+'\x20('+this[_0x263983(0x448)][_0x263983(0x219)]+'):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20'+_0x28a78e[_0x263983(0x658)]+':\x20'+(_0x22f139 instanceof Error?_0x22f139[_0x263983(0x4ab)]:JSON[_0x263983(0x5e5)](_0x22f139,null,0x2)));}let _0x589f12=_0x239386['participants']['map'](_0x5f42d9=>_0x5f42d9['id']),_0x3b5552=_0x5cc494[_0x263983(0x23a)](_0x1bb83a=>_0x1bb83a['jid']),_0x132ab3=await this[_0x263983(0x610)][_0x263983(0x20a)][_0x263983(0x7c1)]([..._0x589f12,..._0x3b5552]);_0x239386['participants']=_0x239386[_0x263983(0x18b)][_0x263983(0x23a)](_0x2ce4d5=>{const _0x2247fc=_0x263983;let _0x3615b9=_0x132ab3[_0x2247fc(0x7a1)](_0x54b0c1=>_0x54b0c1[_0x2247fc(0x4ff)]===_0x2ce4d5['id']);return{'id':_0x2ce4d5['id'],'isAdmin':[_0x2247fc(0x38d),_0x2247fc(0x38a)]['includes'](_0x2ce4d5[_0x2247fc(0x38d)]),'admin':_0x2ce4d5[_0x2247fc(0x38d)],'pushName':_0x3615b9?.[_0x2247fc(0x26b)],'profilePictureUrl':_0x3615b9?.[_0x2247fc(0x25a)]};}),_0x239386[_0x263983(0x48d)]=_0x5cc494[_0x263983(0x23a)](_0xe4ead5=>{const _0x5e377e=_0x263983;let _0x8fc89c=_0x132ab3[_0x5e377e(0x7a1)](_0x13f122=>_0x13f122[_0x5e377e(0x4ff)]===_0xe4ead5[_0x5e377e(0x6ea)]);return{'id':_0xe4ead5['jid'],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x8fc89c?.[_0x5e377e(0x26b)],'profilePictureUrl':_0x8fc89c?.[_0x5e377e(0x25a)],'request_method':_0xe4ead5['request_method'],'request_time':_0xe4ead5[_0x5e377e(0x710)]};});let _0x1ef3a0=await this[_0x263983(0x610)][_0x263983(0x273)][_0x263983(0x7b6)]({'where':{'_id':_0x28a78e[_0x263983(0x658)]}},{'imagechat':_0x239386[_0x263983(0x410)],'name':_0x239386['subject'],'lastcache':Date[_0x263983(0x183)](),'groupdata':_0x239386},this[_0x263983(0x448)][_0x263983(0x219)]);return q(this[_0x263983(0x2af)],'chats',{'chat':_0x1ef3a0}),{'metadata':_0x239386};}catch(_0x3404b9){if(_0x25abc5===_0x263983(0x5af))return;throw new J(_0x263983(0x797),_0x3404b9[_0x263983(0x4ab)][_0x263983(0x2eb)]());}}async[a0_0x3b8fac(0x549)](){const _0x59fe43=a0_0x3b8fac;try{this[_0x59fe43(0x738)][_0x59fe43(0x685)](_0x59fe43(0x2c2));let _0x1577a5=Date[_0x59fe43(0x183)](),_0x3d5dcf=0x3*0x3c*0x3c*0x3e8;return _0x1577a5-this['lastRealGroupsFetch']>_0x3d5dcf&&(this[_0x59fe43(0x433)](),this[_0x59fe43(0x1fa)]=_0x1577a5),(await this[_0x59fe43(0x610)][_0x59fe43(0x273)][_0x59fe43(0x737)]({'where':{'group':!0x0}},this[_0x59fe43(0x448)][_0x59fe43(0x219)]))[_0x59fe43(0x23a)](_0x4263e1=>({..._0x4263e1['groupdata'],'groupJid':_0x4263e1?.[_0x59fe43(0x4ff)],'participants':_0x4263e1?.[_0x59fe43(0x33e)]?.[_0x59fe43(0x18b)]||[],'awaitingApproval':_0x4263e1?.['groupdata']?.[_0x59fe43(0x48d)]||[],'image':_0x4263e1?.['imagechat']}));}catch(_0x47a601){let _0x27aeac=_0x59fe43(0x656),_0x280967=_0x47a601 instanceof Error?_0x47a601[_0x59fe43(0x4ab)]:typeof _0x47a601=='object'?JSON[_0x59fe43(0x5e5)](_0x47a601):_0x47a601,_0x4346b9=_0x27aeac+':\x20'+_0x280967;throw this[_0x59fe43(0x738)]['error'](this['instanceName']+'\x20('+this[_0x59fe43(0x448)][_0x59fe43(0x219)]+_0x59fe43(0x3a8)+_0x4346b9),new J(_0x4346b9);}}async[a0_0x3b8fac(0x433)](){const _0x565306=a0_0x3b8fac;try{this[_0x565306(0x738)]['info'](_0x565306(0x10b));let _0x21908d=[],_0x53514b=await this[_0x565306(0x488)]['groupFetchAllParticipating'](),_0xccdb72=Object[_0x565306(0x569)](_0x53514b),_0x36bffa=_0xccdb72['filter'](_0x36abdb=>(0x0,w[_0x565306(0x2d0)])(_0x36abdb?.['id']))[_0x565306(0x23a)](async _0x4c5c45=>{const _0x5178ba=_0x565306;try{return await this[_0x5178ba(0x488)][_0x5178ba(0x1b1)](_0x4c5c45['id'],_0x5178ba(0x4f9));}catch(_0x229190){return this[_0x5178ba(0x738)]['verbose'](this[_0x5178ba(0x2af)]+'\x20('+this['instance'][_0x5178ba(0x219)]+_0x5178ba(0x45e)+_0x4c5c45['id']+':\x20'+(_0x229190 instanceof Error?_0x229190['message']:JSON[_0x5178ba(0x5e5)](_0x229190,null,0x2))),null;}}),_0x2bfac7=await Promise[_0x565306(0x62c)](_0x36bffa);for(let _0x311350=0x0;_0x311350<_0xccdb72[_0x565306(0x3c8)];_0x311350++){let _0x5e5f8e=_0xccdb72[_0x311350];(0x0,w[_0x565306(0x2d0)])(_0x5e5f8e?.['id'])&&(_0x21908d[_0x565306(0x42a)]({'groupJid':_0x5e5f8e?.['id'],'subject':_0x5e5f8e?.[_0x565306(0x155)],'subjectOwner':_0x5e5f8e?.[_0x565306(0x9f)]?.[_0x565306(0x45d)]('@')[0x0],'subjectTime':_0x5e5f8e?.['subjectTime'],'creation':_0x5e5f8e?.['creation'],'size':_0x5e5f8e?.['participants']?.[_0x565306(0x3c8)],'owner':_0x5e5f8e?.[_0x565306(0x7a2)]?.[_0x565306(0x45d)]('@')[0x0],'desc':_0x5e5f8e?.['desc'],'restrict':_0x5e5f8e?.['restrict'],'announce':_0x5e5f8e?.['announce'],'image':_0x2bfac7[_0x311350],'isCommunity':_0x5e5f8e?.[_0x565306(0x33c)],'joinApprovalMode':_0x5e5f8e?.['joinApprovalMode'],'memberCanAddParticipant':_0x5e5f8e?.[_0x565306(0x4d4)],'participants':_0x5e5f8e?.[_0x565306(0x18b)],'descOwner':_0x5e5f8e?.[_0x565306(0x41f)],'descId':_0x5e5f8e?.[_0x565306(0x471)],'memberAddMode':_0x5e5f8e?.[_0x565306(0x4d4)],'isCommunityAnnounce':_0x5e5f8e?.[_0x565306(0x68c)],'ephemeralDuration':_0x5e5f8e?.[_0x565306(0x75a)]||0x0,'author':_0x5e5f8e?.[_0x565306(0x6db)]}),this[_0x565306(0x13e)](_0xccdb72[_0x311350]));}return _0x21908d;}catch(_0x17f28a){let _0x4e01e5=_0x565306(0x10a),_0x40de14=_0x17f28a instanceof Error?_0x17f28a[_0x565306(0x4ab)]:typeof _0x17f28a=='object'?JSON[_0x565306(0x5e5)](_0x17f28a):_0x17f28a,_0x1676cc=_0x4e01e5+':\x20'+_0x40de14;throw this[_0x565306(0x738)][_0x565306(0x3a7)](this[_0x565306(0x2af)]+'\x20('+this[_0x565306(0x448)]['wuid']+'):\x20'+_0x1676cc),new J(_0x1676cc);}}async['updateChatGroupData'](_0x17455f){const _0x2f0772=a0_0x3b8fac;let _0xf85fbb=await this[_0x2f0772(0x610)][_0x2f0772(0x273)][_0x2f0772(0x7ac)]({'where':{'_id':_0x17455f['id']}},this[_0x2f0772(0x448)][_0x2f0772(0x219)]);_0x17455f[_0x2f0772(0x6f6)]=_0x17455f?.['subjectTime']&&_0x17455f[_0x2f0772(0x6f6)]['toString']()[_0x2f0772(0x3c8)]<0xd?_0x17455f?.[_0x2f0772(0x6f6)]*0x3e8:_0x17455f?.[_0x2f0772(0x6f6)]||null,_0x17455f[_0x2f0772(0x1c2)]=_0x17455f?.['creation']&&_0x17455f[_0x2f0772(0x1c2)]['toString']()['length']<0xd?_0x17455f?.[_0x2f0772(0x1c2)]*0x3e8:_0x17455f?.[_0x2f0772(0x1c2)]||null;let _0x13bd94=_0xf85fbb?.[_0x2f0772(0x33e)]?.['awaitingApproval']||[],_0x24d745=_0xf85fbb?.['groupdata']?.[_0x2f0772(0x6a2)],_0xea10e2=_0x17455f[_0x2f0772(0x18b)][_0x2f0772(0x23a)](_0x53e22a=>{const _0xce80c8=_0x2f0772;let _0x2e73a9=_0xf85fbb?.['groupdata']?.[_0xce80c8(0x18b)]['find'](_0x12cd65=>_0x12cd65['id']===_0x53e22a['id']);return{..._0x53e22a,'isAdmin':[_0xce80c8(0x38d),_0xce80c8(0x38a)][_0xce80c8(0x43a)](_0x53e22a[_0xce80c8(0x38d)]),'admin':_0x53e22a[_0xce80c8(0x38d)],'name':_0x2e73a9?.[_0xce80c8(0x26b)]||_0x53e22a[_0xce80c8(0x26b)],'imgUrl':_0x2e73a9?.[_0xce80c8(0x5ae)]||_0x53e22a[_0xce80c8(0x5ae)]};}),_0x2f429e=_0xea10e2[_0x2f0772(0x39e)](_0x5a63b8=>_0x5a63b8['id']===this[_0x2f0772(0x448)]['wuid']+_0x2f0772(0x482)&&_0x5a63b8[_0x2f0772(0x6c7)]),_0x1c36e4=(!_0x17455f[_0x2f0772(0x784)]||_0x2f429e)&&(!_0x17455f[_0x2f0772(0x33c)]||_0x17455f[_0x2f0772(0x33c)]&&_0x17455f[_0x2f0772(0x68c)]&&_0x2f429e),_0x3ed126={..._0x17455f,'participants':_0xea10e2,'awaitingApproval':_0x13bd94,'lastFetchAwaitingApproval':_0x24d745,'isAdmin':_0x2f429e,'canSendMessage':_0x1c36e4,'lastUpdate':Date[_0x2f0772(0x183)]()};await this[_0x2f0772(0x610)]['chat']['updateOne']({'where':{'_id':_0x17455f['id']}},{'name':_0x17455f['subject'],'group':!0x0,'groupdata':_0x3ed126,'lastcache':Date['now']()},this['instance']['wuid']),q(this['instanceName'],'chats',{'chat':_0x17455f});}async['updateGroupWebhook'](_0x2e462c){const _0x4d439e=a0_0x3b8fac;let _0x26b254=await this[_0x4d439e(0x610)][_0x4d439e(0x273)]['findOne']({'where':{'_id':_0x2e462c['id']}},this[_0x4d439e(0x448)][_0x4d439e(0x219)]);_0x2e462c[_0x4d439e(0x6f6)]=_0x2e462c?.[_0x4d439e(0x6f6)]&&_0x2e462c['subjectTime'][_0x4d439e(0x2eb)]()[_0x4d439e(0x3c8)]<0xd?_0x2e462c?.[_0x4d439e(0x6f6)]*0x3e8:_0x2e462c?.['subjectTime']||null,_0x2e462c['creation']=_0x2e462c?.[_0x4d439e(0x1c2)]&&_0x2e462c[_0x4d439e(0x1c2)][_0x4d439e(0x2eb)]()[_0x4d439e(0x3c8)]<0xd?_0x2e462c?.[_0x4d439e(0x1c2)]*0x3e8:_0x2e462c?.['creation']||null,_0x2e462c[_0x4d439e(0x537)]&&(_0x2e462c[_0x4d439e(0x537)]=_0x4d439e(0x19c)+_0x2e462c[_0x4d439e(0x537)]);let _0xa5a8c4=_0x26b254?.[_0x4d439e(0x33e)]?{..._0x26b254[_0x4d439e(0x33e)]}:{};Object[_0x4d439e(0x63b)](_0x2e462c)['forEach'](_0x56d66a=>{_0x56d66a!=='id'&&(_0xa5a8c4[_0x56d66a]=_0x2e462c[_0x56d66a]);});let _0x106c3e=_0xa5a8c4['participants']?.[_0x4d439e(0x39e)](_0x1deef8=>_0x1deef8['id']===this[_0x4d439e(0x448)]['wuid']+_0x4d439e(0x482)&&_0x1deef8['isAdmin'])||!0x1;_0xa5a8c4[_0x4d439e(0x6c7)]=_0x106c3e;let _0x2e9414=(!_0xa5a8c4[_0x4d439e(0x784)]||_0x106c3e)&&(!_0xa5a8c4[_0x4d439e(0x33c)]||_0xa5a8c4[_0x4d439e(0x33c)]&&_0xa5a8c4[_0x4d439e(0x68c)]&&_0x106c3e);_0xa5a8c4[_0x4d439e(0x2f3)]=_0x2e9414;let _0x510849={'group':!0x0,'groupdata':_0xa5a8c4};_0x2e462c['subject']&&(_0x510849[_0x4d439e(0x26b)]=_0x2e462c[_0x4d439e(0x155)]),await this['repository'][_0x4d439e(0x273)][_0x4d439e(0x7b6)]({'where':{'_id':_0x2e462c['id']}},_0x510849,this['instance'][_0x4d439e(0x219)],{'upsert':!0x0}),q(this[_0x4d439e(0x2af)],_0x4d439e(0x4f8),{'chat':_0x510849});}async[a0_0x3b8fac(0xac)](_0x2db6ac){const _0x4fed6f=a0_0x3b8fac;let _0x447c9d=await this[_0x4fed6f(0x610)]['chat'][_0x4fed6f(0x7ac)]({'where':{'_id':_0x2db6ac['id']}},this['instance'][_0x4fed6f(0x219)]);if(!_0x447c9d||!_0x447c9d[_0x4fed6f(0x33e)]){this[_0x4fed6f(0x738)][_0x4fed6f(0x685)](this[_0x4fed6f(0x2af)]+'\x20('+this[_0x4fed6f(0x448)][_0x4fed6f(0x219)]+_0x4fed6f(0x4e1)+_0x2db6ac['id']);return;}let _0x16870e=await this['repository'][_0x4fed6f(0x20a)][_0x4fed6f(0x7c1)](_0x2db6ac[_0x4fed6f(0x18b)]),_0x57795d=[..._0x447c9d[_0x4fed6f(0x33e)]?.['participants']];switch(_0x2db6ac[_0x4fed6f(0x670)]){case _0x4fed6f(0x1a8):let _0x58ed01=_0x16870e[_0x4fed6f(0x23a)](_0x116053=>({'id':_0x116053[_0x4fed6f(0x4ff)],'isAdmin':!0x1,'name':_0x116053[_0x4fed6f(0x26b)],'imgUrl':_0x116053['pictureUrl']}));_0x57795d=[..._0x57795d,..._0x58ed01];break;case _0x4fed6f(0x109):_0x57795d=_0x57795d[_0x4fed6f(0x34f)](_0x1e6682=>!_0x2db6ac[_0x4fed6f(0x18b)][_0x4fed6f(0x43a)](_0x1e6682['id']));break;case'promote':case'demote':_0x57795d=_0x57795d['map'](_0x1352e2=>_0x2db6ac['participants']['includes'](_0x1352e2['id'])?{..._0x1352e2,'isAdmin':_0x2db6ac[_0x4fed6f(0x670)]===_0x4fed6f(0x17f)}:_0x1352e2);break;}let _0x232eb3=_0x57795d[_0x4fed6f(0x3c8)],_0xce387f=_0x57795d['some'](_0x3b4776=>_0x3b4776['id']===this[_0x4fed6f(0x448)][_0x4fed6f(0x219)]+_0x4fed6f(0x482)),_0x168ee1=_0xce387f&&_0x57795d['some'](_0x2831a4=>_0x2831a4['id']===this['instance'][_0x4fed6f(0x219)]+_0x4fed6f(0x482)&&_0x2831a4[_0x4fed6f(0x6c7)]),_0x10d0d5=_0xce387f&&(!_0x447c9d[_0x4fed6f(0x33e)][_0x4fed6f(0x784)]||_0x168ee1)&&(!_0x447c9d[_0x4fed6f(0x33e)][_0x4fed6f(0x33c)]||_0x447c9d['groupdata'][_0x4fed6f(0x33c)]&&_0x168ee1);await this[_0x4fed6f(0x610)][_0x4fed6f(0x273)][_0x4fed6f(0x7b6)]({'where':{'_id':_0x2db6ac['id']}},{'groupdata':{..._0x447c9d[_0x4fed6f(0x33e)],'participants':_0x57795d,'size':_0x232eb3,'isAdmin':_0x168ee1,'canSendMessage':_0x10d0d5}},this[_0x4fed6f(0x448)][_0x4fed6f(0x219)]),this[_0x4fed6f(0x738)]['info'](this[_0x4fed6f(0x2af)]+'\x20('+this[_0x4fed6f(0x448)][_0x4fed6f(0x219)]+_0x4fed6f(0x162)+_0x2db6ac['id']+_0x4fed6f(0x26d)+_0x2db6ac[_0x4fed6f(0x670)]+_0x4fed6f(0x743)+_0x232eb3+_0x4fed6f(0x68e)+_0x168ee1+_0x4fed6f(0x3b5)+_0x10d0d5);}async[a0_0x3b8fac(0x537)](_0x44c5bb,_0x18100f=!0x0){const _0x44802a=a0_0x3b8fac;try{let _0x6c1ddb=await this['client']['groupInviteCode'](_0x44c5bb[_0x44802a(0x658)]),_0x332eb3={'groupdata.inviteCode':_0x44802a(0x19c)+_0x6c1ddb};if(_0x18100f){let _0x454569=await this[_0x44802a(0x610)]['chat'][_0x44802a(0x7b6)]({'where':{'_id':_0x44c5bb['groupJid']}},_0x332eb3,this['instance'][_0x44802a(0x219)]);}return{'inviteUrl':_0x44802a(0x19c)+_0x6c1ddb,'inviteCode':_0x6c1ddb};}catch(_0x51f423){let _0x5444c5=_0x44802a(0x6fe),_0x55254f=_0x51f423 instanceof Error?_0x51f423[_0x44802a(0x4ab)]:typeof _0x51f423==_0x44802a(0x4f6)?JSON['stringify'](_0x51f423):_0x51f423,_0x13e871=_0x5444c5+':\x20'+_0x55254f;throw this[_0x44802a(0x738)]['error'](this[_0x44802a(0x2af)]+'\x20('+this[_0x44802a(0x448)][_0x44802a(0x219)]+_0x44802a(0x3a8)+_0x13e871),new J(_0x13e871);}}async[a0_0x3b8fac(0x28f)](_0xf88196){const _0x403bdc=a0_0x3b8fac;try{let _0x19f5bf=await this[_0x403bdc(0x488)][_0x403bdc(0x49b)](_0xf88196[_0x403bdc(0x658)]);return{'revoked':!0x0,'inviteUrl':'https://chat.whatsapp.com/'+_0x19f5bf,'inviteCode':_0x19f5bf};}catch(_0x490ef7){let _0x12e149=_0x403bdc(0x72a),_0x5e7a10=_0x490ef7 instanceof Error?_0x490ef7[_0x403bdc(0x4ab)]:typeof _0x490ef7=='object'?JSON[_0x403bdc(0x5e5)](_0x490ef7):_0x490ef7,_0x31073e=_0x12e149+':\x20'+_0x5e7a10;throw this[_0x403bdc(0x738)][_0x403bdc(0x3a7)](this[_0x403bdc(0x2af)]+'\x20('+this[_0x403bdc(0x448)][_0x403bdc(0x219)]+_0x403bdc(0x3a8)+_0x31073e),new J(_0x31073e);}}async['joinGroup'](_0x5ab106){const _0x1c2eb0=a0_0x3b8fac;try{if((0x0,L[_0x1c2eb0(0x4c6)])(_0x5ab106['inviteCode']))var _0x51feec=_0x5ab106['inviteCode'][_0x1c2eb0(0x45d)]('/')[0x3];else var _0x51feec=_0x5ab106['inviteCode'];let _0x2aa91b=await this[_0x1c2eb0(0x488)][_0x1c2eb0(0x669)](_0x51feec);return this['logger'][_0x1c2eb0(0x592)](this[_0x1c2eb0(0x2af)]+'\x20('+this['instance'][_0x1c2eb0(0x219)]+_0x1c2eb0(0x3a8)+_0x2aa91b),{'join':!0x0,'inviteCode':_0x51feec,'groupJid':_0x2aa91b};}catch(_0x6005ca){let _0x3aa590=_0x1c2eb0(0x24f),_0x48ffa8=_0x6005ca instanceof Error?_0x6005ca[_0x1c2eb0(0x4ab)]:typeof _0x6005ca=='object'?JSON[_0x1c2eb0(0x5e5)](_0x6005ca):_0x6005ca,_0x4ac9bc=_0x3aa590+':\x20'+_0x48ffa8;throw this['logger'][_0x1c2eb0(0x3a7)](this[_0x1c2eb0(0x2af)]+'\x20('+this[_0x1c2eb0(0x448)]['wuid']+_0x1c2eb0(0x3a8)+_0x4ac9bc),new J(_0x4ac9bc);}}async[a0_0x3b8fac(0x5ed)](_0xfc8f89){const _0x5f57c5=a0_0x3b8fac;try{return{'participants':(await this[_0x5f57c5(0x610)][_0x5f57c5(0x273)][_0x5f57c5(0x7ac)]({'where':{'_id':_0xfc8f89[_0x5f57c5(0x658)]}},this['instance'][_0x5f57c5(0x219)]))[_0x5f57c5(0x33e)][_0x5f57c5(0x18b)]};}catch(_0x480afc){let _0x470986=_0x5f57c5(0x41c),_0xe07171=_0x480afc instanceof Error?_0x480afc['message']:typeof _0x480afc==_0x5f57c5(0x4f6)?JSON[_0x5f57c5(0x5e5)](_0x480afc):_0x480afc,_0x7189c4=_0x470986+':\x20'+_0xe07171;throw this[_0x5f57c5(0x738)][_0x5f57c5(0x3a7)](this['instanceName']+'\x20('+this[_0x5f57c5(0x448)][_0x5f57c5(0x219)]+_0x5f57c5(0x3a8)+_0x7189c4),new J(_0x7189c4);}}async[a0_0x3b8fac(0x275)](_0x205b62){const _0x28f10a=a0_0x3b8fac;try{return await this['client'][_0x28f10a(0x168)](_0x205b62[_0x28f10a(0x658)]),{'groupJid':_0x205b62[_0x28f10a(0x658)],'leave':!0x0};}catch(_0x2cb670){let _0x5bef45=_0x28f10a(0x116),_0x321a80=_0x2cb670 instanceof Error?_0x2cb670['message']:typeof _0x2cb670==_0x28f10a(0x4f6)?JSON['stringify'](_0x2cb670):_0x2cb670,_0x142b70=_0x5bef45+':\x20'+_0x321a80;throw this[_0x28f10a(0x738)][_0x28f10a(0x3a7)](this[_0x28f10a(0x2af)]+'\x20('+this['instance']['wuid']+_0x28f10a(0x3a8)+_0x142b70),new m(_0x142b70);}}async['pollMessage'](_0x413177){const _0x5e3074=a0_0x3b8fac;return await this[_0x5e3074(0x508)](_0x413177[_0x5e3074(0x377)],{'poll':{'name':_0x413177[_0x5e3074(0x122)]?.['name'],'selectableCount':_0x413177['pollMessage'][_0x5e3074(0x4fb)],'values':_0x413177[_0x5e3074(0x122)][_0x5e3074(0x569)]}},_0x413177?.[_0x5e3074(0x13d)]);}async[a0_0x3b8fac(0x1f2)](_0x4ae20b){const _0x1ac9dd=a0_0x3b8fac;return await this[_0x1ac9dd(0x508)](_0x4ae20b[_0x1ac9dd(0x377)],{'listMessage':{'title':_0x4ae20b[_0x1ac9dd(0x1f2)]['title'],'description':_0x4ae20b[_0x1ac9dd(0x1f2)]['description'],'buttonText':_0x4ae20b[_0x1ac9dd(0x1f2)]?.[_0x1ac9dd(0x3cb)],'footerText':_0x4ae20b[_0x1ac9dd(0x1f2)]?.[_0x1ac9dd(0x383)],'sections':_0x4ae20b[_0x1ac9dd(0x1f2)]['sections'],'listType':0x2}},_0x4ae20b?.['options']);}async[a0_0x3b8fac(0x574)](_0x3008db){const _0x5869db=a0_0x3b8fac;let _0x343cd2;if(_0x3008db[_0x5869db(0x574)][_0x5869db(0x1a2)]===_0x5869db(0x586)){let _0x12552d=_0x3008db[_0x5869db(0x574)][_0x5869db(0x284)]['indexOf']('\x0a'),_0x2815af='',_0x2007c='';_0x12552d!==-0x1?(_0x2815af=_0x3008db[_0x5869db(0x574)][_0x5869db(0x284)][_0x5869db(0x78b)](0x0,_0x12552d)['trim'](),_0x2007c=_0x3008db[_0x5869db(0x574)][_0x5869db(0x284)][_0x5869db(0x78b)](_0x12552d+0x1)):_0x2007c=_0x3008db[_0x5869db(0x574)][_0x5869db(0x284)];let _0x353adc=_0x3008db[_0x5869db(0x574)][_0x5869db(0x7b)]['filter'](_0x5f27fd=>_0x5f27fd[_0x5869db(0x73c)]()!==''),_0xbe9f19=this[_0x5869db(0x2ee)](_0x353adc);_0x343cd2={'listMessage':{'title':_0x2815af,'description':_0x2007c,'buttonText':_0x3008db['menuMessage'][_0x5869db(0x3cb)]||_0x5869db(0x1ee),'footerText':_0x3008db[_0x5869db(0x574)]['footerText'],'sections':_0xbe9f19,'listType':0x2}};}else{if(_0x3008db[_0x5869db(0x574)][_0x5869db(0x1a2)]===_0x5869db(0x76a)){let _0x3697b2=_0x3008db[_0x5869db(0x574)][_0x5869db(0x7b)][_0x5869db(0x34f)](_0x1ab5ec=>!(_0x1ab5ec[_0x5869db(0x3ce)]('[')&&_0x1ab5ec[_0x5869db(0x64c)](']'))&&_0x1ab5ec[_0x5869db(0x73c)]()!=='')['map'](_0x594d3f=>_0x594d3f[_0x5869db(0x45d)]('\x0a')[0x0]);_0x343cd2={'poll':{'name':_0x3008db[_0x5869db(0x574)][_0x5869db(0x284)],'selectableCount':_0x3008db[_0x5869db(0x574)][_0x5869db(0x4fb)]||0x1,'values':_0x3697b2}};}}return await this[_0x5869db(0x508)](_0x3008db[_0x5869db(0x377)],_0x343cd2,_0x3008db?.['options']);}['createSectionsFromValues'](_0x5f2ffc){const _0x9400a4=a0_0x3b8fac;let _0x165e31=[],_0x5ef782={'rows':[]};return _0x5f2ffc['forEach'](_0x4bbc68=>{const _0x455f51=a0_0x56c3;if(_0x4bbc68['startsWith']('[')&&_0x4bbc68[_0x455f51(0x64c)](']'))_0x5ef782[_0x455f51(0x21c)]['length']>0x0&&_0x165e31[_0x455f51(0x42a)](_0x5ef782),_0x5ef782={'title':_0x4bbc68[_0x455f51(0x484)](0x1,-0x1),'rows':[]};else{let _0x1ee3f5=_0x4bbc68[_0x455f51(0x45d)]('\x0a')['map'](_0x12784a=>_0x12784a['trim']()),_0x25f7c7=_0x1ee3f5[0x0],_0x2901aa=_0x1ee3f5[0x1]||null,_0x2f1a84=_0x1ee3f5[0x2]||_0x25f7c7;_0x5ef782[_0x455f51(0x21c)]['push']({'title':_0x25f7c7,'description':_0x2901aa,'rowId':_0x2f1a84});}}),_0x5ef782[_0x9400a4(0x21c)][_0x9400a4(0x3c8)]>0x0&&_0x165e31[_0x9400a4(0x42a)](_0x5ef782),_0x165e31;}async[a0_0x3b8fac(0x6fb)](_0x1a1932,_0x2f714e){const _0x3cbb2e=a0_0x3b8fac;if(await this[_0x3cbb2e(0x1a6)](_0x1a1932,!0x0)){let _0x3b6baa={'where':{'_id':_0x1a1932['id']}},_0x2ba883={'status':[_0x2f714e[_0x3cbb2e(0x233)]][0x0]};try{let _0x6e1d3d=await this[_0x3cbb2e(0x610)][_0x3cbb2e(0x4ab)]['update'](_0x3b6baa,_0x2ba883,this[_0x3cbb2e(0x448)][_0x3cbb2e(0x219)]);_0x6e1d3d&&q(this['instanceName'],_0x3cbb2e(0x6ae),{'message':_0x6e1d3d});}catch{}}}[a0_0x3b8fac(0x1b9)](_0x29343b){const _0xf5c026=a0_0x3b8fac;let _0x2ab363=[];return _0x29343b['forEach'](_0x2c1fc9=>{const _0x3e10a4=a0_0x56c3;_0x2c1fc9[_0x3e10a4(0x399)]&&_0x2ab363['push']('['+_0x2c1fc9[_0x3e10a4(0x399)]+']'),_0x2c1fc9[_0x3e10a4(0x21c)][_0x3e10a4(0x73e)](_0x4f143e=>{const _0x7670e4=_0x3e10a4;_0x2ab363[_0x7670e4(0x42a)](_0x4f143e[_0x7670e4(0x399)]);});}),_0x2ab363[_0xf5c026(0x4c9)]('|');}[a0_0x3b8fac(0x534)](_0x458009){const _0x1ccbb4=a0_0x3b8fac;let _0x4d4f9e=_0x458009[_0x1ccbb4(0x1c6)](/\\n/g,'\x0a')[_0x1ccbb4(0x45d)]('\x0a')[_0x1ccbb4(0x34f)](_0x582313=>_0x582313['includes'](_0x1ccbb4(0x5f8))||_0x582313[_0x1ccbb4(0x43a)](_0x1ccbb4(0x36e))),_0x306b82='';return _0x4d4f9e['forEach'](_0x531c64=>{const _0x3d2a68=_0x1ccbb4;let _0x41f4e6=/TEL(?:.*):(.+)/,_0x1b4f21=/EMAIL(?:.*):(.+)/,_0x2eb71c=_0x531c64[_0x3d2a68(0x6c6)](_0x41f4e6),_0x17904f=_0x531c64[_0x3d2a68(0x6c6)](_0x1b4f21);if(_0x2eb71c){let _0x1bfaea=_0x2eb71c[0x1]['replace'](/-| |\+|\(|\)/g,'')['trim']();_0x306b82+=_0x3d2a68(0x436)+_0x1bfaea+'\x0a';}else{if(_0x17904f){let _0x3de415=_0x17904f[0x1][_0x3d2a68(0x73c)]();_0x306b82+=_0x3d2a68(0x551)+_0x3de415+'\x0a';}}}),_0x306b82[_0x1ccbb4(0x73c)]();}async[a0_0x3b8fac(0x65d)](_0x543592,_0x59307,_0x578ce2,_0x928d87=null){const _0xcd250e=a0_0x3b8fac;if(_0x543592['ENABLED'])try{let _0x3f6042=_0x59307[_0xcd250e(0x3fb)][_0xcd250e(0x6d5)][_0xcd250e(0x1c6)](/:\d{1,2}@/g,'@'),_0x5155ae=_0x59307[_0xcd250e(0x3fb)]['fromMe'],_0x81fc49=_0x3f6042[_0xcd250e(0x64c)](_0xcd250e(0x78a)),_0x4feff9=_0x59307[_0xcd250e(0x762)]?.[_0xcd250e(0x1c6)](/:\d{1,2}@/g,'@')||'',_0x31f1f8=_0x59307[_0xcd250e(0x36c)]?.[_0xcd250e(0x284)]||_0x59307[_0xcd250e(0x36c)]?.['caption']||_0x59307[_0xcd250e(0x36c)]?.[_0xcd250e(0x1bf)]||_0x59307[_0xcd250e(0x36c)]?.[_0xcd250e(0x26b)]||'',_0xa2684={'_id':_0x59307[_0xcd250e(0x4ff)],'remoteJid':_0x5155ae?this['instance'][_0xcd250e(0x219)]:_0x81fc49?_0x4feff9:_0x3f6042,'pushName':_0x5155ae?this[_0xcd250e(0x448)][_0xcd250e(0x50d)]||'Eu':_0x59307[_0xcd250e(0x60e)],'text':_0x31f1f8,'type':_0x59307[_0xcd250e(0x6d2)],'when':_0x59307[_0xcd250e(0x118)]||Date[_0xcd250e(0x183)]()};_0x928d87||(_0x928d87=await this[_0xcd250e(0x610)][_0xcd250e(0x273)][_0xcd250e(0x7ac)]({'where':{'_id':_0x3f6042}},this[_0xcd250e(0x448)][_0xcd250e(0x219)]));let _0x4b674e=_0x928d87?_0x5155ae?_0x928d87[_0xcd250e(0x5b3)]:(_0x928d87[_0xcd250e(0x5b3)]||0x0)+0x1:_0x5155ae?0x0:0x1,_0x63b466={'lastmsg':_0x59307[_0xcd250e(0x118)]||Date[_0xcd250e(0x183)](),'ephemeralExpiration':_0x59307[_0xcd250e(0x1a7)],'lastMessage':_0xa2684,'unreadcount':_0x4b674e,..._0x5155ae||_0x81fc49?{}:{'name':_0x59307['pushName']},..._0x81fc49?{'group':_0x81fc49}:{},...!_0x5155ae&&!_0x81fc49&&_0x59307[_0xcd250e(0x1b1)]?{'imagechat':_0x59307[_0xcd250e(0x1b1)]}:{}};if(!_0x81fc49&&(!_0x928d87?.[_0xcd250e(0x79e)]||!_0x928d87['leadInfo'][_0xcd250e(0x408)])&&_0x59307[_0xcd250e(0x60e)]&&!_0x5155ae&&(_0x63b466={..._0x63b466,'leadInfo.nome':_0x59307[_0xcd250e(0x60e)]}),_0x928d87?.[_0xcd250e(0x79e)][_0xcd250e(0x1b0)]||(_0x63b466={..._0x63b466,'leadInfo.etiquetas':[]}),_0x928d87?.[_0xcd250e(0x79e)][_0xcd250e(0x51b)]||(_0x63b466={..._0x63b466,'leadInfo.customFields':[]}),_0x928d87?.[_0xcd250e(0x79e)][_0xcd250e(0x1df)]||(_0x63b466={..._0x63b466,'leadInfo.tags':[]}),_0x928d87&&_0x928d87?.['imported']){let _0x434561=await this[_0xcd250e(0x610)][_0xcd250e(0x396)]['find']({'where':{}},this[_0xcd250e(0x448)]['wuid']),_0x17fac6=new Set(_0x434561[_0xcd250e(0x23a)](_0x8e0fe7=>_0x8e0fe7[_0xcd250e(0x4ff)])),_0x2627da=(_0x928d87[_0xcd250e(0x79e)]?.[_0xcd250e(0x1b0)]||[])[_0xcd250e(0x34f)](_0x2e30ad=>_0x17fac6[_0xcd250e(0x59b)](_0x2e30ad));_0x63b466={..._0x63b466,'imported':!0x1,'leadInfo.etiquetas':_0x2627da};for(let _0x12a5b6 of _0x2627da)await this['AddChatLabel'](_0x12a5b6,_0x3f6042);}if(!this['AutomateSystem'][_0xcd250e(0x4c5)]['find'](_0xda0ac5=>_0xda0ac5[_0xcd250e(0x7cf)]&&_0x31f1f8[_0xcd250e(0x43a)](_0xda0ac5[_0xcd250e(0x7cf)]))&&_0x578ce2==='MESSAGES_UPSERT'&&_0x5155ae&&this['AutomateSystem']?.[_0xcd250e(0x2a4)][_0xcd250e(0x1d1)]&&_0x31f1f8[_0xcd250e(0x73c)]()!==this[_0xcd250e(0x351)]?.[_0xcd250e(0x2a4)][_0xcd250e(0x43f)][_0xcd250e(0x73c)]()){let _0x5dc42e=(this[_0xcd250e(0x351)]?.[_0xcd250e(0x2a4)]['stopWhenYouSendMsg']||0x0)*0xea60,_0x4f11c9=Date[_0xcd250e(0x183)]()+_0x5dc42e;_0x928d87?.[_0xcd250e(0x79e)]?.[_0xcd250e(0x635)]===0x0||(_0x63b466={..._0x63b466,'leadInfo.desativadoFluxoAte':_0x4f11c9},this[_0xcd250e(0x738)][_0xcd250e(0x592)](this['instanceName']+'\x20('+this[_0xcd250e(0x448)][_0xcd250e(0x219)]+'):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20at\x20'+_0x4f11c9+'.'));}if(_0x31f1f8[_0xcd250e(0x73c)]()===this[_0xcd250e(0x351)]?.[_0xcd250e(0x2a4)]['stopConversation'][_0xcd250e(0x73c)]()){this[_0xcd250e(0x738)]['verbose'](this[_0xcd250e(0x2af)]+'\x20('+this[_0xcd250e(0x448)]['wuid']+_0xcd250e(0x468)+_0x31f1f8);let _0x9d3a85=Date['now']();this['AutomateSystem']?.[_0xcd250e(0x2a4)][_0xcd250e(0x7d7)]===0x0?_0x63b466={..._0x63b466,'leadInfo.desativadoFluxoAte':_0x9d3a85+0x7591f6200}:_0x63b466={..._0x63b466,'leadInfo.desativadoFluxoAte':_0x9d3a85+this['AutomateSystem']?.[_0xcd250e(0x2a4)][_0xcd250e(0x7d7)]*0x3c*0x3e8};}if(_0x928d87=await this[_0xcd250e(0x610)][_0xcd250e(0x273)][_0xcd250e(0x7b6)]({'where':{'_id':_0x3f6042}},_0x63b466,this[_0xcd250e(0x448)]['wuid'],{'new':!0x0,'upsert':!0x0}),_0x928d87)q(this[_0xcd250e(0x2af)],_0xcd250e(0x4f8),{'chat':_0x928d87});else{this[_0xcd250e(0x738)][_0xcd250e(0x3a7)](this['instanceName']+'\x20('+this[_0xcd250e(0x448)]['wuid']+_0xcd250e(0x307));return;}if(_0x5155ae)return this[_0xcd250e(0x738)][_0xcd250e(0x592)](this[_0xcd250e(0x2af)]+'\x20('+this['instance']['wuid']+_0xcd250e(0x53d)),null;if(!this['AutomateSystem']?.[_0xcd250e(0x2a4)]['enabled'])return this['logger'][_0xcd250e(0x592)](this[_0xcd250e(0x2af)]+'\x20('+this[_0xcd250e(0x448)][_0xcd250e(0x219)]+_0xcd250e(0x1f1)),null;if(_0x928d87[_0xcd250e(0x4ff)]['includes'](_0xcd250e(0x78a))&&this[_0xcd250e(0x351)]?.[_0xcd250e(0x2a4)]['ignoreGroups']===!0x0)return this[_0xcd250e(0x738)][_0xcd250e(0x592)](this[_0xcd250e(0x2af)]+'\x20('+this[_0xcd250e(0x448)][_0xcd250e(0x219)]+_0xcd250e(0x476)),null;if(_0x928d87['leadInfo']){if(_0x928d87['leadInfo']['desativadoFluxoAte']===0x0||_0x928d87[_0xcd250e(0x79e)][_0xcd250e(0x270)])return this[_0xcd250e(0x738)][_0xcd250e(0x592)](this[_0xcd250e(0x2af)]+'\x20('+this['instance']['wuid']+_0xcd250e(0x17d)+_0x3f6042+',\x20saindo.'),null;if(_0x928d87[_0xcd250e(0x79e)]['desativadoFluxoAte']>Date[_0xcd250e(0x183)]()&&!_0x59307[_0xcd250e(0x36c)]?.['vote'])return this[_0xcd250e(0x738)][_0xcd250e(0x592)](this[_0xcd250e(0x2af)]+'\x20('+this[_0xcd250e(0x448)][_0xcd250e(0x219)]+_0xcd250e(0x3bb)+new Date(_0x928d87[_0xcd250e(0x79e)][_0xcd250e(0x635)])[_0xcd250e(0x66b)]()+_0xcd250e(0x56f)),null;}this[_0xcd250e(0x738)]['verbose'](this[_0xcd250e(0x2af)]+'\x20('+this[_0xcd250e(0x448)][_0xcd250e(0x219)]+_0xcd250e(0x3d8)),this['StartBot'](_0x59307,_0x578ce2);}catch(_0x314d9e){let _0x2f8dd1='Erro\x20na\x20funo\x20updateChatWithMessage:\x20',_0x8bae58=_0x314d9e instanceof Error?_0x314d9e['message']:typeof _0x314d9e==_0xcd250e(0x4f6)?JSON['stringify'](_0x314d9e):_0x314d9e,_0x12bba8=_0x2f8dd1+':\x20'+_0x8bae58;return this[_0xcd250e(0x738)]['error'](this[_0xcd250e(0x2af)]+'\x20('+this[_0xcd250e(0x448)][_0xcd250e(0x219)]+_0xcd250e(0x3a8)+_0x12bba8),null;}}async[a0_0x3b8fac(0x5f4)](_0x7d99bc,_0x42e8fd){const _0x3747b3=a0_0x3b8fac;if(_0x42e8fd[_0x3747b3(0x1fe)]){let _0x100d2b=_0x7d99bc['map'](async _0x1be82b=>{const _0x6575ca=_0x3747b3;try{let _0x19661d={'_id':_0x1be82b[_0x6575ca(0x4ff)],'owner':_0x1be82b[_0x6575ca(0x7a2)],'lastcache':0x0};if(Object[_0x6575ca(0x63b)](_0x1be82b)[_0x6575ca(0x73e)](_0x2a1a6b=>{_0x1be82b[_0x2a1a6b]!==null&&(_0x19661d[_0x2a1a6b]=_0x1be82b[_0x2a1a6b]);}),_0x19661d['imagechat']===null&&(_0x19661d[_0x6575ca(0x3ff)]='Imagem\x20no\x20encontrada'),Object[_0x6575ca(0x63b)](_0x19661d)[_0x6575ca(0x3c8)]>0x0)return await this['repository'][_0x6575ca(0x273)][_0x6575ca(0x7b6)]({'where':{'_id':_0x1be82b[_0x6575ca(0x4ff)]}},_0x19661d,this[_0x6575ca(0x448)][_0x6575ca(0x219)]);}catch(_0x7dba6e){let _0xb514f0=_0x6575ca(0x16f)+_0x1be82b[_0x6575ca(0x4ff)],_0x368461=_0x7dba6e instanceof Error?_0x7dba6e[_0x6575ca(0x4ab)]:typeof _0x7dba6e==_0x6575ca(0x4f6)?JSON['stringify'](_0x7dba6e):_0x7dba6e,_0x66c8a5=_0xb514f0+':\x20'+_0x368461;return this[_0x6575ca(0x738)][_0x6575ca(0x3a7)](this[_0x6575ca(0x2af)]+'\x20('+this['instance'][_0x6575ca(0x219)]+'):\x20'+_0x66c8a5),null;}}),_0x3bd705=(await Promise[_0x3747b3(0x62c)](_0x100d2b))[_0x3747b3(0x34f)](_0x2bf828=>_0x2bf828!==null)[_0x3747b3(0x3c8)];this[_0x3747b3(0x738)][_0x3747b3(0x592)](this['instanceName']+'\x20('+this[_0x3747b3(0x448)]['wuid']+_0x3747b3(0x3a8)+_0x3bd705+_0x3747b3(0x44c)+this[_0x3747b3(0x448)][_0x3747b3(0x219)]+_0x3747b3(0x150));}}async[a0_0x3b8fac(0x36b)](_0x13d1b7){const _0x2fe186=a0_0x3b8fac;this[_0x2fe186(0x738)][_0x2fe186(0x592)](this['instanceName']+'\x20('+this[_0x2fe186(0x448)][_0x2fe186(0x219)]+'):\x20Ler\x20mensagem');let _0x5508c8={'readMessages':[{'remoteJid':_0x13d1b7[_0x2fe186(0x26c)][_0x2fe186(0x363)][_0x2fe186(0x3fb)]['remoteJid'],'fromMe':_0x13d1b7[_0x2fe186(0x26c)][_0x2fe186(0x363)]['key']['fromMe'],'id':_0x13d1b7[_0x2fe186(0x26c)][_0x2fe186(0x363)][_0x2fe186(0x3fb)]['id']}]};await this['markMessageAsRead'](_0x5508c8);}async[a0_0x3b8fac(0x6ab)](_0xb018d4,_0x505cbc){const _0x2249b4=a0_0x3b8fac;try{let {key:_0x352150,message_normalized:_0x2a7171}=_0xb018d4,_0x154293=_0x2a7171,_0x5c2455=_0x2a7171[_0x2249b4(0x284)]||_0x2a7171[_0x2249b4(0x31e)]||_0x2a7171[_0x2249b4(0x1bf)]||_0x2a7171[_0x2249b4(0x26b)]||'',_0x58ae8e=_0x352150[_0x2249b4(0x6d5)],_0x3cab56=null,_0x4488fe=this[_0x2249b4(0x351)]['flows'][_0x2249b4(0x7a1)](_0x35367a=>_0x35367a['startCommand']&&_0x5c2455[_0x2249b4(0x43a)](_0x35367a[_0x2249b4(0x7cf)]));if(_0x4488fe&&_0x505cbc===_0x2249b4(0x2c8)){let _0xe6e16e=await this['repository'][_0x2249b4(0x297)][_0x2249b4(0x7ac)]({'where':{'_id':_0x4488fe[_0x2249b4(0x4ff)]}});if(this[_0x2249b4(0x738)][_0x2249b4(0x592)](this[_0x2249b4(0x2af)]+'\x20('+this[_0x2249b4(0x448)]['wuid']+'):\x20Condies\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.'),_0xe6e16e&&_0xe6e16e[_0x2249b4(0x760)]?.[_0x2249b4(0x43a)](this[_0x2249b4(0x448)][_0x2249b4(0x219)]))_0x3cab56=await this['createNewConversation'](_0xe6e16e,_0x352150,_0x154293);else return this[_0x2249b4(0x738)]['verbose'](this[_0x2249b4(0x2af)]+'\x20('+this[_0x2249b4(0x448)][_0x2249b4(0x219)]+_0x2249b4(0x78c)),null;}else this[_0x2249b4(0x738)][_0x2249b4(0x592)](this['instanceName']+'\x20('+this[_0x2249b4(0x448)][_0x2249b4(0x219)]+'):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand');if(_0x3cab56=await this[_0x2249b4(0x93)](_0x58ae8e,_0x154293),_0x3cab56){this[_0x2249b4(0x738)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x2249b4(0x219)]+_0x2249b4(0xf7)),!_0x352150[_0x2249b4(0x123)]&&_0x3cab56[_0x2249b4(0x198)]&&this[_0x2249b4(0x36b)](_0x3cab56);let _0x3487bd=await this[_0x2249b4(0x1ea)](_0x3cab56);_0x3487bd&&await this[_0x2249b4(0x4a0)](_0x3cab56,_0x3487bd);}}catch(_0x3ca801){this[_0x2249b4(0x738)][_0x2249b4(0x3a7)](this[_0x2249b4(0x2af)]+'\x20('+this[_0x2249b4(0x448)][_0x2249b4(0x219)]+_0x2249b4(0x3c1)+(_0x3ca801 instanceof Error?_0x3ca801['message']:JSON[_0x2249b4(0x5e5)](_0x3ca801,null,0x2)));}}[a0_0x3b8fac(0x113)](_0x1f876d,_0x2f7771='',_0x1fb533={}){const _0x5e3d7b=a0_0x3b8fac;return typeof _0x1f876d!=_0x5e3d7b(0x4f6)||_0x1f876d===null?(_0x2f7771&&(_0x1fb533[_0x2f7771]=_0x1f876d),_0x1fb533):(Object[_0x5e3d7b(0x4b7)](_0x1f876d)[_0x5e3d7b(0x73e)](([_0x38fb06,_0x4b720e])=>{const _0x5400b4=_0x5e3d7b;let _0x547aa0=_0x2f7771?_0x2f7771+'.'+_0x38fb06:'_'+_0x38fb06;Array['isArray'](_0x4b720e)?_0x4b720e[_0x5400b4(0x73e)]((_0x520787,_0x5a53d0)=>{const _0x23213d=_0x5400b4;this[_0x23213d(0x113)](_0x520787,_0x547aa0+'['+_0x5a53d0+']',_0x1fb533);}):typeof _0x4b720e==_0x5400b4(0x4f6)&&_0x4b720e!==null?this[_0x5400b4(0x113)](_0x4b720e,_0x547aa0,_0x1fb533):_0x1fb533[_0x547aa0]=String(_0x4b720e);}),_0x1fb533);}['variablesToObject'](_0x3cc321){const _0x5936ee=a0_0x3b8fac;let _0x10978e={};for(let _0x162d79 of _0x3cc321)typeof _0x162d79['name']==_0x5936ee(0x20d)&&typeof _0x162d79[_0x5936ee(0x7a0)]==_0x5936ee(0x20d)&&(_0x10978e[_0x162d79[_0x5936ee(0x26b)]]=_0x162d79['value']);return _0x10978e;}async[a0_0x3b8fac(0x1ea)](_0x1e3a43){const _0x4f30a1=a0_0x3b8fac;if(!this[_0x4f30a1(0x351)]?.[_0x4f30a1(0x2a4)]['enabled']||_0x1e3a43[_0x4f30a1(0x233)]!==_0x4f30a1(0x627)&&_0x1e3a43['waitingMenu_id']==='')return null;let _0x1cee37=_0x1e3a43[_0x4f30a1(0x26c)][_0x4f30a1(0x209)]||_0x4f30a1(0x4ad);typeof _0x1e3a43[_0x4f30a1(0x26c)][_0x4f30a1(0x450)]>'u'&&(_0x1e3a43[_0x4f30a1(0x26c)]['lastCondition']=!0x0);let _0x7bf119=_0x1e3a43['chatLog']['lastCondition'];this[_0x4f30a1(0x738)][_0x4f30a1(0x592)](this['instanceName']+'\x20('+this[_0x4f30a1(0x448)]['wuid']+_0x4f30a1(0x426)+_0x1cee37+_0x4f30a1(0x648)+_0x7bf119);let _0x510888=_0x1cee37==='start'?_0x1e3a43['blocks']['find'](_0x5d1ebb=>_0x5d1ebb[_0x4f30a1(0x1a2)]==='start'):_0x1e3a43[_0x4f30a1(0x389)][_0x4f30a1(0x7a1)](_0x540b02=>_0x540b02[_0x4f30a1(0x4ff)]['toString']()===_0x1cee37['toString']());if(!_0x510888)return this[_0x4f30a1(0x738)][_0x4f30a1(0x3a7)](this[_0x4f30a1(0x2af)]+'\x20('+this['instance']['wuid']+_0x4f30a1(0x271)+_0x1cee37),null;let _0xd6d567={'_pushName':_0x1e3a43?.['chatLog']?.[_0x4f30a1(0x363)]?.[_0x4f30a1(0x60e)]||'','_sender':this[_0x4f30a1(0x448)]['wuid']||'',..._0x1e3a43[_0x4f30a1(0x26c)][_0x4f30a1(0x19d)]},_0x28fb06=null;if(_0x1e3a43['waitingMenu_id']){let _0x14fb85=_0x1e3a43[_0x4f30a1(0x26c)][_0x4f30a1(0x363)]['vote'],_0x39f590=_0x1e3a43['waitingMenu_replyOptions'][_0x4f30a1(0x7a1)](_0x6874b=>_0x6874b['option']===_0x14fb85);if(_0x39f590){let _0x48d45e=_0x39f590[_0x4f30a1(0x698)];if(_0x28fb06=_0x1e3a43[_0x4f30a1(0x389)]['find'](_0x5054c6=>_0x5054c6['groupId']===_0x48d45e&&_0x5054c6[_0x4f30a1(0x1b3)]===0x1),_0x510888[_0x4f30a1(0x77b)][_0x4f30a1(0x5b2)]){let _0x20518a={'id':_0x1e3a43['waitingMenu_id'],'remoteJid':_0x1e3a43['remoteJid'],'fromMe':!0x0};await this[_0x4f30a1(0x16d)](_0x20518a);}if(_0x510888[_0x4f30a1(0x77b)][_0x4f30a1(0x5b2)]&&_0x510888[_0x4f30a1(0x77b)]['pollMessageOnDelete']&&_0x510888[_0x4f30a1(0x77b)]['menuType']===_0x4f30a1(0x76a)){let _0x2ecc75={'number':_0x1e3a43['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':'*Pergunta*:\x20\x0a'+_0x1e3a43[_0x4f30a1(0xe0)]+_0x4f30a1(0x5f0)+_0x14fb85}};await this[_0x4f30a1(0x663)](_0x2ecc75);}_0x1e3a43[_0x4f30a1(0x233)]=_0x4f30a1(0x627),_0x1e3a43[_0x4f30a1(0x3cf)]='',_0x1e3a43['waitingMenu_text']='',_0x1e3a43[_0x4f30a1(0x66a)]=[];}else{this[_0x4f30a1(0x738)][_0x4f30a1(0x592)](this['instanceName']+'\x20('+this['instance'][_0x4f30a1(0x219)]+_0x4f30a1(0x566));let _0x49775b={'activatedCount':_0x1e3a43[_0x4f30a1(0x26c)]['blockLogs'][_0x4f30a1(0x34f)](_0x8712d9=>String(_0x8712d9[_0x4f30a1(0x6ca)])===String(_0x1cee37))[_0x4f30a1(0x3c8)],'moreLogs':[_0x4f30a1(0x2cc)]};if(_0x510888[_0x4f30a1(0x77b)]['pollErrorMessage']){let _0x30f584={'number':_0x1e3a43[_0x4f30a1(0x6d5)],'options':{'delay':0x0},'textMessage':{'text':_0x510888[_0x4f30a1(0x77b)][_0x4f30a1(0x46b)]}};await this['textMessage'](_0x30f584);}if(_0x510888['maxActives']!==void 0x0&&_0x49775b[_0x4f30a1(0x60f)]>=_0x510888[_0x4f30a1(0x4ed)]){let _0x15d22b=Date['now'](),_0x1b6688=_0x510888[_0x4f30a1(0x519)]??0xa;isNaN(_0x1b6688)&&(_0x1b6688=0xa);let _0x563a67=_0x15d22b+_0x1b6688*0x3c*0x3e8;_0x49775b[_0x4f30a1(0xc8)]=_0x563a67,_0x49775b[_0x4f30a1(0x5c7)]['push'](_0x4f30a1(0x2a8)),this[_0x4f30a1(0x3a9)](_0x1e3a43,_0x563a67),_0x1e3a43[_0x4f30a1(0x3cf)]='',_0x1e3a43[_0x4f30a1(0xe0)]='',_0x1e3a43[_0x4f30a1(0x66a)]=[];}return this[_0x4f30a1(0x40b)](_0x1e3a43,_0x510888,_0x49775b,!0x0),null;}}if(_0x7bf119&&_0x510888[_0x4f30a1(0x698)]&&!_0x1e3a43[_0x4f30a1(0x3cf)]){let _0x3e5e72=_0x1e3a43[_0x4f30a1(0x389)]['filter'](_0x4a4080=>_0x4a4080[_0x4f30a1(0x249)]['toString']()===_0x510888[_0x4f30a1(0x698)]['toString']())[_0x4f30a1(0x77f)]((_0x2f22a8,_0x399d86)=>_0x2f22a8[_0x4f30a1(0x1b3)]-_0x399d86[_0x4f30a1(0x1b3)]);_0x3e5e72[_0x4f30a1(0x3c8)]>0x0&&(_0x28fb06=_0x3e5e72[0x0]);}if(!_0x28fb06){let _0x273c84=_0x510888[_0x4f30a1(0x249)],_0x33324d=_0x1e3a43[_0x4f30a1(0x389)][_0x4f30a1(0x34f)](_0x5d06d7=>_0x5d06d7[_0x4f30a1(0x249)]===_0x273c84&&_0x5d06d7['order']>_0x510888[_0x4f30a1(0x1b3)])[_0x4f30a1(0x77f)]((_0xce1a23,_0x1ea01d)=>_0xce1a23[_0x4f30a1(0x1b3)]-_0x1ea01d[_0x4f30a1(0x1b3)]);_0x33324d[_0x4f30a1(0x3c8)]>0x0&&(_0x28fb06=_0x33324d[0x0]);}if(!_0x28fb06)return _0x1e3a43[_0x4f30a1(0x233)]=_0x4f30a1(0x5de),null;_0x1e3a43[_0x4f30a1(0x26c)][_0x4f30a1(0x19d)]=_0xd6d567;let _0x19bdd1=JSON[_0x4f30a1(0x224)](JSON[_0x4f30a1(0x5e5)](_0x28fb06));return this['replaceVariablesInObject'](_0x19bdd1,_0x1e3a43[_0x4f30a1(0x26c)][_0x4f30a1(0x19d)]),_0x1e3a43[_0x4f30a1(0x26c)][_0x4f30a1(0x209)]=_0x19bdd1[_0x4f30a1(0x4ff)],_0x1e3a43[_0x4f30a1(0x26c)][_0x4f30a1(0x450)]=!0x0,_0x19bdd1;}[a0_0x3b8fac(0x15c)](_0x1f4f91,_0x13890e){const _0x47dbdd=a0_0x3b8fac;return _0x1f4f91[_0x47dbdd(0x1c6)](/\{\{([^}]+)\}\}/g,(_0x249d91,_0x5ecdf4)=>_0x13890e[_0x5ecdf4]||'');}[a0_0x3b8fac(0x4e6)](_0x29588c,_0x52766a){const _0x3bc97c=a0_0x3b8fac;for(let _0x43bbb4 in _0x29588c)typeof _0x29588c[_0x43bbb4]==_0x3bc97c(0x20d)?_0x29588c[_0x43bbb4]=this['replaceVariables'](_0x29588c[_0x43bbb4],_0x52766a):typeof _0x29588c[_0x43bbb4]==_0x3bc97c(0x4f6)&&this['replaceVariablesInObject'](_0x29588c[_0x43bbb4],_0x52766a);}async[a0_0x3b8fac(0x380)](_0x205fb,_0x2abe80){const _0x19faa4=a0_0x3b8fac;let _0x358c44=_0x2abe80[_0x19faa4(0x4ff)];if(_0x205fb[_0x19faa4(0x26c)]&&_0x205fb[_0x19faa4(0x26c)][_0x19faa4(0x721)]){let _0x8bf3d9=_0x205fb[_0x19faa4(0x26c)][_0x19faa4(0x721)]['filter'](_0x2c788c=>String(_0x2c788c[_0x19faa4(0x6ca)])===String(_0x358c44))[_0x19faa4(0x3d4)]();if(_0x8bf3d9&&_0x8bf3d9[_0x19faa4(0x3a7)]&&_0x2abe80[_0x19faa4(0x2ad)])return _0x205fb[_0x19faa4(0x233)]=_0x19faa4(0x5de),await this[_0x19faa4(0x1f9)](_0x205fb),null;}if(_0x2abe80['type']===_0x19faa4(0x77b)&&_0x2abe80['uazapi'][_0x19faa4(0x282)]===_0x19faa4(0x349)&&_0x205fb['waitingMenu_id'])return _0x205fb[_0x19faa4(0x26c)][_0x19faa4(0x209)]=_0x358c44,await this['saveConversationToDatabase'](_0x205fb),null;let _0x5f59cf=await this[_0x19faa4(0x1ea)](_0x205fb);if(_0x205fb[_0x19faa4(0x26c)]&&_0x205fb['chatLog']['blockLogs']){let _0x182645=_0x205fb['chatLog'][_0x19faa4(0x721)][_0x19faa4(0x34f)](_0x1deb73=>String(_0x1deb73[_0x19faa4(0x6ca)])===String(_0x358c44))[_0x19faa4(0x3c8)];if(_0x2abe80[_0x19faa4(0x4ed)]!==void 0x0&&_0x182645>=_0x2abe80['maxActives']){let _0x51d442=Date[_0x19faa4(0x183)](),_0x2d0ee0=_0x2abe80[_0x19faa4(0x519)]??0xa;isNaN(_0x2d0ee0)&&(_0x2d0ee0=0xa);let _0x259881=_0x51d442+_0x2d0ee0*0x3c*0x3e8,_0x40c9c1={'newStoppedUntil':_0x259881};return this[_0x19faa4(0x3a9)](_0x205fb,_0x259881),this[_0x19faa4(0x40b)](_0x205fb,_0x2abe80,_0x40c9c1,!0x0),null;}}_0x5f59cf&&_0x5f59cf[_0x19faa4(0x1a2)]!==_0x19faa4(0x2f8)&&await this[_0x19faa4(0x4a0)](_0x205fb,_0x5f59cf),_0x5f59cf||await this[_0x19faa4(0x1f9)](_0x205fb),_0x5f59cf&&_0x5f59cf[_0x19faa4(0x1a2)]===_0x19faa4(0x2f8)&&(_0x205fb['chatLog']['lastBlockId']=_0x358c44,await this[_0x19faa4(0x1f9)](_0x205fb));}async[a0_0x3b8fac(0x4a0)](_0x3f5121,_0x445070){const _0x4cc7a2=a0_0x3b8fac;try{let _0x4eff7e=_0x445070[_0x4cc7a2(0x1a2)];this[_0x4cc7a2(0x738)][_0x4cc7a2(0x592)](this[_0x4cc7a2(0x2af)]+'\x20('+this[_0x4cc7a2(0x448)]['wuid']+_0x4cc7a2(0x489)+_0x4eff7e);let _0x554332={'uazapi':()=>this[_0x4cc7a2(0x7ba)](_0x3f5121,_0x445070),'save':()=>this['saveTextReply'](_0x3f5121,_0x445070),'stop':()=>this[_0x4cc7a2(0x43f)](_0x3f5121,_0x445070),'condition':()=>this[_0x4cc7a2(0x2ca)](_0x3f5121,_0x445070),'varedit':()=>this[_0x4cc7a2(0x47e)](_0x3f5121,_0x445070),'apirequest':()=>this[_0x4cc7a2(0x3c5)](_0x3f5121,_0x445070),'goToFlow':()=>this[_0x4cc7a2(0x6a6)](_0x3f5121,_0x445070),'scheduleFlow':()=>this['processScheduleFlow'](_0x3f5121,_0x445070),'awaitSeconds':()=>this[_0x4cc7a2(0x599)](_0x3f5121,_0x445070),'clearVariables':()=>this[_0x4cc7a2(0x2be)](_0x3f5121,_0x445070)}[_0x4eff7e];_0x554332&&await _0x554332();}catch(_0x31885c){this['logger'][_0x4cc7a2(0x3a7)](this[_0x4cc7a2(0x2af)]+'\x20('+this[_0x4cc7a2(0x448)][_0x4cc7a2(0x219)]+_0x4cc7a2(0x220)+(_0x31885c instanceof Error?_0x31885c[_0x4cc7a2(0x4ab)]:JSON['stringify'](_0x31885c,null,0x2)));}}async[a0_0x3b8fac(0x599)](_0xdc4b9b,_0x2fb9b8){const _0x2ebb85=a0_0x3b8fac;if(this[_0x2ebb85(0x738)][_0x2ebb85(0x592)](this['instanceName']+'\x20('+this[_0x2ebb85(0x448)][_0x2ebb85(0x219)]+_0x2ebb85(0x5cc)),!_0xdc4b9b||!_0x2fb9b8)return this['logger'][_0x2ebb85(0x3a7)](this[_0x2ebb85(0x2af)]+'\x20('+this[_0x2ebb85(0x448)][_0x2ebb85(0x219)]+_0x2ebb85(0x50f)),null;let _0x4d5276=+_0x2fb9b8[_0x2ebb85(0xce)];isNaN(_0x4d5276)&&(_0x4d5276=0x0),_0x4d5276=Math[_0x2ebb85(0x128)](_0x4d5276,0x3c),await(0x0,w['delay'])(_0x4d5276*0x3e8);let _0x42e72c={'moreLogs':[_0x2ebb85(0x35e)+_0x4d5276+'\x20segundos']};return await this['updateConversation'](_0xdc4b9b,_0x2fb9b8,_0x42e72c),_0x4d5276;}async['processclearVariables'](_0x4f2c5f,_0x4ecf3d){const _0x5417e2=a0_0x3b8fac;if(this[_0x5417e2(0x738)][_0x5417e2(0x592)](this[_0x5417e2(0x2af)]+'\x20('+this[_0x5417e2(0x448)][_0x5417e2(0x219)]+'):\x20Entrou\x20na\x20funo\x20clearVariables'),!_0x4f2c5f||!_0x4ecf3d)return this[_0x5417e2(0x738)][_0x5417e2(0x3a7)](this[_0x5417e2(0x2af)]+'\x20('+this[_0x5417e2(0x448)][_0x5417e2(0x219)]+_0x5417e2(0x50f)),null;let _0x8426b3=[];if(_0x4ecf3d[_0x5417e2(0x2b6)][_0x5417e2(0x73c)]()===_0x5417e2(0x166)){let _0x51a987=[_0x5417e2(0x2c3),_0x5417e2(0x4fa),'_error','_activedCount',_0x5417e2(0x1e7),_0x5417e2(0x4ff),_0x5417e2(0x60c)];_0x8426b3=Object[_0x5417e2(0x63b)](_0x4f2c5f[_0x5417e2(0x26c)][_0x5417e2(0x19d)])['filter'](_0x224f25=>_0x224f25[_0x5417e2(0x3ce)]('_')&&!_0x51a987[_0x5417e2(0x43a)](_0x224f25));}else _0x8426b3=_0x4ecf3d[_0x5417e2(0x2b6)][_0x5417e2(0x45d)]('|')[_0x5417e2(0x23a)](_0x2c860b=>(_0x2c860b=_0x2c860b['replace'](/[{}]/g,'')[_0x5417e2(0x73c)](),_0x2c860b[_0x5417e2(0x3ce)]('_')?_0x2c860b:'_'+_0x2c860b));let _0x3acc30=[];_0x8426b3[_0x5417e2(0x73e)](_0x24eda5=>{const _0x56097b=_0x5417e2;_0x24eda5 in _0x4f2c5f[_0x56097b(0x26c)][_0x56097b(0x19d)]&&(delete _0x4f2c5f['chatLog'][_0x56097b(0x19d)][_0x24eda5],_0x3acc30[_0x56097b(0x42a)](_0x24eda5));}),_0x3acc30['length']>0x0?this[_0x5417e2(0x738)][_0x5417e2(0x592)](this['instanceName']+'\x20('+this[_0x5417e2(0x448)][_0x5417e2(0x219)]+_0x5417e2(0x5bb)+_0x3acc30['join'](',\x20')):this[_0x5417e2(0x738)][_0x5417e2(0x592)](this[_0x5417e2(0x2af)]+'\x20('+this[_0x5417e2(0x448)]['wuid']+'):\x20Nenhuma\x20varivel\x20especificada\x20foi\x20encontrada\x20para\x20remoo');let _0x28eafe={'moreLogs':[_0x5417e2(0x73d)+_0x3acc30['join'](',\x20')]};return await this['updateConversation'](_0x4f2c5f,_0x4ecf3d,_0x28eafe),null;}async[a0_0x3b8fac(0x405)](_0xd3d248,_0x55bb0f){const _0x3c643a=a0_0x3b8fac;if(this[_0x3c643a(0x738)][_0x3c643a(0x592)](this[_0x3c643a(0x2af)]+'\x20('+this['instance'][_0x3c643a(0x219)]+'):\x20Entrou\x20na\x20funo\x20scheduleFlow'),!_0xd3d248||!_0x55bb0f)return this['logger'][_0x3c643a(0x3a7)](this[_0x3c643a(0x2af)]+'\x20('+this[_0x3c643a(0x448)][_0x3c643a(0x219)]+_0x3c643a(0x50f)),null;let _0x2def53=_0xd3d248['remoteJid'];_0x55bb0f[_0x3c643a(0x25d)][_0x3c643a(0x6d5)]&&_0x55bb0f[_0x3c643a(0x25d)]['remoteJid'][_0x3c643a(0x73c)]()!==''&&(_0x2def53=_0x55bb0f['uazapi'][_0x3c643a(0x6d5)][_0x3c643a(0x73c)]());let _0x478733=_0x55bb0f[_0x3c643a(0x25d)]['timeInMinutes']*0xea60,_0x4d344a=Date['now']()+_0x478733,_0x2f0d98={'status':_0x3c643a(0x51f),'info':_0x3c643a(0x228)+_0xd3d248[_0x3c643a(0x26b)],'remoteJids':[_0x2def53],'when':_0x4d344a,'delaySecMin':0x0,'delaySecMax':0x0,'type':'flow','flowName':_0x55bb0f[_0x3c643a(0x25d)]['flowName']};this[_0x3c643a(0x473)](_0x2f0d98);let _0x552b4b=await this['NextBlock'](_0xd3d248);_0x552b4b&&await this[_0x3c643a(0x4a0)](_0xd3d248,_0x552b4b);}async[a0_0x3b8fac(0x6a6)](_0x20c5c1,_0x43c1f9){const _0x378c6f=a0_0x3b8fac;if(this['logger'][_0x378c6f(0x592)](this[_0x378c6f(0x2af)]+'\x20('+this[_0x378c6f(0x448)][_0x378c6f(0x219)]+_0x378c6f(0x487)),!_0x20c5c1||!_0x43c1f9)return this['logger'][_0x378c6f(0x3a7)](this[_0x378c6f(0x2af)]+'\x20('+this[_0x378c6f(0x448)][_0x378c6f(0x219)]+_0x378c6f(0x50f)),null;await this['updateConversation'](_0x20c5c1,_0x43c1f9,{},!0x0,!0x0);let _0x1d005f=_0x43c1f9[_0x378c6f(0x568)];_0x20c5c1=await this[_0x378c6f(0x253)](_0x1d005f,_0x20c5c1['remoteJid'],_0x20c5c1['chatLog'][_0x378c6f(0x19d)]);let _0x5b0911=await this[_0x378c6f(0x1ea)](_0x20c5c1);_0x5b0911&&await this[_0x378c6f(0x4a0)](_0x20c5c1,_0x5b0911);}async[a0_0x3b8fac(0x253)](_0x25416d,_0x1c6273,_0xf34f49){const _0x51dc78=a0_0x3b8fac;this['logger'][_0x51dc78(0x592)](this['instanceName']+'\x20('+this[_0x51dc78(0x448)][_0x51dc78(0x219)]+_0x51dc78(0x2f1));try{let _0x24963f=this[_0x51dc78(0x351)][_0x51dc78(0x4c5)][_0x51dc78(0x7a1)](_0x39daf6=>_0x39daf6[_0x51dc78(0x4ff)]===_0x25416d);_0x24963f||this[_0x51dc78(0x738)][_0x51dc78(0x3a7)](this[_0x51dc78(0x2af)]+'\x20('+this[_0x51dc78(0x448)]['wuid']+_0x51dc78(0x3b3)+_0x25416d+_0x51dc78(0x336));let _0x5b0090=await this[_0x51dc78(0x610)][_0x51dc78(0x297)][_0x51dc78(0x7ac)]({'where':{'_id':_0x24963f['_id']}});if(!_0x5b0090||!_0x5b0090[_0x51dc78(0x760)]?.['includes'](this['instance'][_0x51dc78(0x219)]))throw this[_0x51dc78(0x738)]['error'](this[_0x51dc78(0x2af)]+'\x20('+this[_0x51dc78(0x448)][_0x51dc78(0x219)]+_0x51dc78(0x3b3)+_0x25416d+_0x51dc78(0x1e5)),new m(_0x51dc78(0x5c5)+_0x25416d+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');let _0x56c509=require(_0x51dc78(0x794))[_0x51dc78(0xf5)],_0x2d6d79=Date[_0x51dc78(0x183)](),_0x267142='start',_0x3508ff={},_0x33f0e2={},_0x221e10=this[_0x51dc78(0x351)][_0x51dc78(0x4c5)]['find'](_0x509571=>_0x509571[_0x51dc78(0x4ff)]===_0x5b0090[_0x51dc78(0x4ff)]?.[_0x51dc78(0x2eb)]()),_0x660be2=_0x221e10?.[_0x51dc78(0x373)]??_0x5b0090['minutesToClose']??0x0,_0x44a8fb=_0x221e10?.['readMessages']??_0x5b0090['readMessages']??!0x1,_0xc3cb56={'flowId':_0x24963f[_0x51dc78(0x4ff)],'readMessages':_0x24963f[_0x51dc78(0x198)],..._0x5b0090,'chatLog':null},_0x29a865={'lastReceivedMessage':_0x3508ff,'lastSendMessage':_0x33f0e2,'lastBlockId':_0x267142,'lastCondition':!0x0,'realVariables':_0xf34f49};_0xc3cb56[_0x51dc78(0x26c)]=_0x29a865,_0xc3cb56[_0x51dc78(0x26c)][_0x51dc78(0x19d)]={..._0xf34f49},delete _0xc3cb56['_id'],_0xc3cb56[_0x51dc78(0x4ff)]=new _0x56c509(),_0xc3cb56[_0x51dc78(0xa9)]=_0x2d6d79,_0xc3cb56['status']='open',_0xc3cb56['remoteJid']=_0x1c6273,_0xc3cb56[_0x51dc78(0x373)]=_0x660be2,_0xc3cb56[_0x51dc78(0x198)]=_0x44a8fb;let _0x53fbcc=await this[_0x51dc78(0x610)]['flowConversation'][_0x51dc78(0x7b6)](_0xc3cb56[_0x51dc78(0x4ff)],_0xc3cb56,this['instance'][_0x51dc78(0x219)]);return this['logger'][_0x51dc78(0x592)](this[_0x51dc78(0x2af)]+'\x20('+this[_0x51dc78(0x448)][_0x51dc78(0x219)]+_0x51dc78(0x5a8)),_0x53fbcc?_0xc3cb56:null;}catch(_0x3801ba){let _0x57d65f=_0x51dc78(0xcf),_0x2dda6f=_0x3801ba instanceof Error?_0x3801ba['message']:typeof _0x3801ba==_0x51dc78(0x4f6)?JSON[_0x51dc78(0x5e5)](_0x3801ba):_0x3801ba,_0x3905b9=_0x57d65f+':\x20'+_0x2dda6f;throw this[_0x51dc78(0x738)][_0x51dc78(0x3a7)](this[_0x51dc78(0x2af)]+'\x20('+this[_0x51dc78(0x448)][_0x51dc78(0x219)]+_0x51dc78(0x3a8)+_0x3905b9),new m(_0x3905b9);}}async[a0_0x3b8fac(0x3c5)](_0x2d93ac,_0x423532){const _0x432d0e=a0_0x3b8fac;let _0x1a5aa6,_0x4dda73;try{let _0x595d0d=_0x423532[_0x432d0e(0x683)];if(!_0x595d0d||!_0x595d0d[_0x432d0e(0x772)]||!_0x595d0d[_0x432d0e(0x97)])throw new Error('Falta\x20informao\x20para\x20a\x20chamada\x20API');let _0x2e47ca;([_0x432d0e(0x133),_0x432d0e(0x326),_0x432d0e(0x2a3)]['some'](_0x38868f=>_0x595d0d[_0x432d0e(0x772)][_0x432d0e(0x43a)](_0x38868f))||_0x595d0d['requestFile'])&&(_0x2e47ca=_0x432d0e(0x20b));let _0x2ee43b='\u205f',_0x5fb4b9;try{_0x5fb4b9=JSON[_0x432d0e(0x224)](_0x595d0d[_0x432d0e(0x3aa)][_0x432d0e(0x1c6)](new RegExp(_0x2ee43b,'g'),''));}catch(_0x281c12){throw _0x281c12;}let _0x1cb69a={'method':_0x595d0d[_0x432d0e(0x97)],'url':_0x595d0d[_0x432d0e(0x772)],'headers':_0x595d0d[_0x432d0e(0x3cc)]||{},..._0x595d0d[_0x432d0e(0x97)][_0x432d0e(0x56d)]()!==_0x432d0e(0x127)&&_0x595d0d['bodyString']?{'data':JSON['parse'](_0x595d0d['bodyString']['replace'](new RegExp(_0x2ee43b,'g'),''))}:{},..._0x2e47ca&&{'responseType':_0x2e47ca}},_0x1d5a47=await(0x0,te[_0x432d0e(0x151)])(_0x1cb69a),_0x12ce92=_0x1d5a47[_0x432d0e(0x7a3)][_0x432d0e(0x475)];if(_0x12ce92&&_0x12ce92[_0x432d0e(0x43a)](_0x432d0e(0xa0))||typeof _0x1d5a47[_0x432d0e(0x5c3)]==_0x432d0e(0x20d)){if(typeof _0x1d5a47['data']==_0x432d0e(0x20d)){let _0x1407f0=_0x1d5a47[_0x432d0e(0x5c3)]['replace'](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x432d0e(0x73c)]();try{_0x1a5aa6=JSON[_0x432d0e(0x224)](_0x1407f0);}catch(_0x4ed759){this['logger']['error'](_0x432d0e(0x55a)+_0x4ed759[_0x432d0e(0x4ab)]),_0x1a5aa6={'_apiResponse':_0x1d5a47['data']};}}else _0x1a5aa6=_0x1d5a47[_0x432d0e(0x5c3)];let _0x5d1bee=_0x2d93ac['chatLog'][_0x432d0e(0x19d)],_0x541c4f=this[_0x432d0e(0x113)](_0x1a5aa6);return Object[_0x432d0e(0x6da)](_0x5d1bee,_0x541c4f),_0x2d93ac[_0x432d0e(0x26c)][_0x432d0e(0x19d)]=_0x5d1bee,_0x4dda73={'error':!0x1,'apiResponse':_0x1a5aa6},this[_0x432d0e(0x40b)](_0x2d93ac,_0x423532,_0x4dda73),_0x1a5aa6;}if(_0x12ce92&&(_0x12ce92['includes'](_0x432d0e(0x393))||_0x12ce92[_0x432d0e(0x43a)](_0x432d0e(0x410))||_0x12ce92[_0x432d0e(0x43a)](_0x432d0e(0x3bc))||_0x12ce92[_0x432d0e(0x43a)](_0x432d0e(0x136)))){this[_0x432d0e(0x738)]['verbose'](this[_0x432d0e(0x2af)]+'\x20('+this[_0x432d0e(0x448)][_0x432d0e(0x219)]+'):\x20Tipo\x20de\x20contedo\x20identificado:\x20'+_0x12ce92);let _0xfdbd56=(0x0,X['v4'])(),_0x570012='',_0x4de188={'image/jpeg':_0x432d0e(0x596),'image/png':'.png','image/gif':_0x432d0e(0x371),'image/webp':_0x432d0e(0x11f),'image/svg+xml':_0x432d0e(0x3c7),'audio/mpeg':'.mp3','audio/ogg':_0x432d0e(0x741),'audio/wav':'.wav','video/mp4':_0x432d0e(0x202),'video/webm':'.webm','video/ogg':_0x432d0e(0x529),'text/plain':_0x432d0e(0x6df),'application/pdf':_0x432d0e(0x304),'application/msword':_0x432d0e(0xe2),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x432d0e(0x778),'application/vnd.ms-excel':'.xls','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x432d0e(0x60b),'application/vnd.ms-powerpoint':_0x432d0e(0x647),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x432d0e(0x35d)};_0x4de188[_0x12ce92]?(_0x570012=_0x4de188[_0x12ce92],this[_0x432d0e(0x738)][_0x432d0e(0x592)](this[_0x432d0e(0x2af)]+'\x20('+this[_0x432d0e(0x448)][_0x432d0e(0x219)]+_0x432d0e(0x4da)+_0x570012)):(_0x570012='.error',this[_0x432d0e(0x738)][_0x432d0e(0x592)](this[_0x432d0e(0x2af)]+'\x20('+this[_0x432d0e(0x448)][_0x432d0e(0x219)]+_0x432d0e(0x7b8)+_0x570012)),_0xfdbd56+=_0x570012,this['logger'][_0x432d0e(0x592)](this[_0x432d0e(0x2af)]+'\x20('+this[_0x432d0e(0x448)][_0x432d0e(0x219)]+'):\x20Nome\x20do\x20arquivo\x20gerado:\x20'+_0xfdbd56);let _0x442c1f=this[_0x432d0e(0x2e2)][_0x432d0e(0x184)](_0x432d0e(0x3ba))[_0x432d0e(0x3b9)];if(!_0x442c1f){let _0x18dfb4=this['configService']['get'](_0x432d0e(0x746));_0x442c1f=_0x432d0e(0x111)+(_0x18dfb4&&_0x18dfb4[_0x432d0e(0x7b7)][_0x432d0e(0x45d)]('/')[0x4]);}let _0x2dbb71=Buffer[_0x432d0e(0x2ab)](_0x1d5a47[_0x432d0e(0x5c3)]);await this[_0x432d0e(0x5d0)](_0x2dbb71,_0xfdbd56);let _0x22caf3=_0x432d0e(0x6dc)+_0xfdbd56;_0x22caf3=''+_0x442c1f+_0x22caf3,_0x1a5aa6={'fileUrl':_0x22caf3},_0x2d93ac['chatLog'][_0x432d0e(0x19d)]['fileUrl']=_0x22caf3;let _0x5708a5=_0x2d93ac[_0x432d0e(0x26c)][_0x432d0e(0x19d)],_0x46e56a=this[_0x432d0e(0x113)](_0x1a5aa6);return Object[_0x432d0e(0x6da)](_0x5708a5,_0x46e56a),_0x2d93ac[_0x432d0e(0x26c)]['realVariables']=_0x5708a5,_0x4dda73={'error':!0x1,'apiResponse':{'fileUrl':_0x22caf3}},this[_0x432d0e(0x40b)](_0x2d93ac,_0x423532,_0x4dda73),_0x1a5aa6;}}catch(_0x5130cd){this[_0x432d0e(0x738)][_0x432d0e(0x3a7)]('Erro\x20ao\x20processar\x20a\x20chamada\x20API:'+_0x5130cd[_0x432d0e(0x4ab)]),_0x5130cd[_0x432d0e(0x238)]&&(_0x1a5aa6=_0x5130cd[_0x432d0e(0x238)][_0x432d0e(0x5c3)]);let _0x497887=_0x2d93ac[_0x432d0e(0x26c)][_0x432d0e(0x19d)],_0x4b29a8=this[_0x432d0e(0x113)](_0x1a5aa6);return Object[_0x432d0e(0x6da)](_0x497887,_0x4b29a8),_0x2d93ac[_0x432d0e(0x26c)][_0x432d0e(0x19d)]=_0x497887,_0x4dda73={'error':!0x0,'errorLog':_0x5130cd[_0x432d0e(0x2eb)](),'apiResponse':_0x1a5aa6},this[_0x432d0e(0x40b)](_0x2d93ac,_0x423532,_0x4dda73),{'success':!0x1};}}[a0_0x3b8fac(0xfa)](_0x4ddea9,_0x2531c9){const _0x208a07=a0_0x3b8fac;let _0x180a64=_0x33f8a5=>{const _0x3071bc=a0_0x56c3;let _0x4d10bb=_0x33f8a5[_0x3071bc(0x1c6)](/[^0-9.,-]/g,'')[_0x3071bc(0x1c6)](',','.'),_0x2ad016=parseFloat(_0x4d10bb);return isNaN(_0x2ad016)?null:_0x2ad016;},_0x2960bf=_0x2531c9['firstValue'],_0x8b75b=_0x2531c9[_0x208a07(0x141)];typeof _0x2960bf==_0x208a07(0x20d)&&(_0x2960bf=this[_0x208a07(0x15c)](_0x2960bf,_0x4ddea9[_0x208a07(0x26c)][_0x208a07(0x19d)])??''),typeof _0x8b75b=='string'&&(_0x8b75b=this['replaceVariables'](_0x8b75b,_0x4ddea9['chatLog'][_0x208a07(0x19d)])??'');let _0x4fa6ba=null;if(!_0x2531c9[_0x208a07(0x107)])return null;switch(this['logger'][_0x208a07(0x592)](this['instanceName']+'\x20('+this[_0x208a07(0x448)]['wuid']+_0x208a07(0x1b2)+_0x2960bf),this[_0x208a07(0x738)][_0x208a07(0x592)](this['instanceName']+'\x20('+this[_0x208a07(0x448)]['wuid']+_0x208a07(0x1e0)+_0x8b75b),_0x2531c9[_0x208a07(0x107)]){case'+':case'-':case'*':case'/':let _0x7389fc=_0x180a64(_0x2960bf||'0'),_0x4efff2=_0x180a64(_0x8b75b||'0');if(_0x7389fc===null)return null;switch(_0x2531c9[_0x208a07(0x107)]){case'+':_0x4fa6ba=_0x7389fc+(_0x4efff2??0x0);break;case'-':_0x4fa6ba=_0x7389fc-(_0x4efff2??0x0);break;case'*':_0x4fa6ba=_0x7389fc*(_0x4efff2??0x1);break;case'/':_0x4efff2!==0x0&&(_0x4fa6ba=_0x7389fc/(_0x4efff2??0x1));break;}break;case'findAndReplace':case _0x208a07(0x3ea):let _0xd2ee36=_0x8b75b,_0x487a45=_0x2531c9[_0x208a07(0x714)];if(typeof _0x487a45==_0x208a07(0x20d)&&(_0x487a45=this[_0x208a07(0x15c)](_0x487a45,_0x4ddea9[_0x208a07(0x26c)][_0x208a07(0x19d)])??''),_0xd2ee36&&_0x487a45!==void 0x0){let _0x219577=_0x2531c9[_0x208a07(0x107)]===_0x208a07(0x419)?new RegExp(_0xd2ee36[_0x208a07(0x1c6)](/[-\/\\^$*+?.()|[\]{}]/g,_0x208a07(0x299)),'g'):new RegExp(_0xd2ee36,'g');_0x4fa6ba=_0x2960bf[_0x208a07(0x1c6)](_0x219577,_0x487a45);}else console[_0x208a07(0x1a9)]('Valor\x20de\x20find\x20ou\x20replace\x20ausente');break;case'setNewValue':_0x4fa6ba=_0x8b75b;break;case _0x208a07(0x364):let _0x1ade35=_0x2960bf[_0x208a07(0x6c6)](new RegExp(_0x8b75b||''));_0x4fa6ba=_0x1ade35?_0x1ade35[0x0]:'';break;case _0x208a07(0x5c9):_0x4fa6ba=_0x2960bf['slice'](0x0,parseInt(_0x8b75b||'0'));break;case _0x208a07(0x286):let _0x3674cd=parseInt(_0x8b75b||'0');_0x4fa6ba=_0x2960bf[_0x208a07(0x484)](_0x2960bf['length']-_0x3674cd);break;case _0x208a07(0x4a3):let _0x1ce34f=_0x180a64(_0x2960bf),_0x3760b7=parseInt(_0x8b75b||'0');_0x3760b7=Math[_0x208a07(0x7b0)](_0x3760b7),_0x1ce34f!==null?_0x4fa6ba=_0x1ce34f[_0x208a07(0x66b)]('pt-BR',{'minimumFractionDigits':_0x3760b7,'maximumFractionDigits':_0x3760b7}):(console[_0x208a07(0x1a9)]('Valor\x20invlido\x20para\x20formatao\x20brasileira:\x20'+_0x2960bf),_0x4fa6ba=null);break;case'toBRL':let _0x244086=_0x180a64(_0x2960bf);_0x244086!==null?_0x4fa6ba=_0x244086[_0x208a07(0x66b)](_0x208a07(0x95),{'style':'currency','currency':_0x208a07(0xfb)}):(console[_0x208a07(0x1a9)](_0x208a07(0x3a0)+_0x2960bf),_0x4fa6ba=null);break;case _0x208a07(0x659):_0x4fa6ba=_0x2960bf[_0x208a07(0x56d)]();break;case _0x208a07(0x14a):_0x4fa6ba=_0x2960bf[_0x208a07(0x106)]();break;case _0x208a07(0x37b):_0x4fa6ba=_0x2960bf[_0x208a07(0x45d)]('\x20')[_0x208a07(0x23a)](_0x48c95b=>_0x48c95b['charAt'](0x0)[_0x208a07(0x56d)]()+_0x48c95b[_0x208a07(0x484)](0x1)[_0x208a07(0x106)]())[_0x208a07(0x4c9)]('\x20');break;case _0x208a07(0x248):_0x4fa6ba=_0x2960bf['trim']();break;default:_0x4fa6ba=_0x2960bf;}return _0x4fa6ba!==null?_0x4fa6ba[_0x208a07(0x2eb)]():null;}async['processvaredits'](_0x27cabd,_0x3081e3){const _0x3c22c3=a0_0x3b8fac;try{let _0x248d09=_0x27cabd['varedits']?.[_0x3c22c3(0x34f)](_0x5aeb63=>_0x5aeb63[_0x3c22c3(0x6ca)]===_0x3081e3[_0x3c22c3(0x4ff)]?.[_0x3c22c3(0x2eb)]())||[],_0x2f7c1a=_0x3081e3[_0x3c22c3(0x16b)],_0x53fa34=null,_0x3aae76=[],_0x4d010c=_0x27cabd[_0x3c22c3(0x26c)]['realVariables'][_0x2f7c1a];_0x3aae76[_0x3c22c3(0x42a)](_0x3c22c3(0x575)+_0x4d010c+'\x22');for(let _0x4a5db8 of _0x248d09){_0x4a5db8[_0x3c22c3(0x729)]=_0x4d010c,_0x53fa34=_0x4a5db8[_0x3c22c3(0x729)];let _0x4cd75b;try{_0x4cd75b=this[_0x3c22c3(0xfa)](_0x27cabd,_0x4a5db8);}catch(_0x2ff3a5){this['logger'][_0x3c22c3(0x3a7)](_0x3c22c3(0x3be)+_0x2ff3a5[_0x3c22c3(0x4ab)]);continue;}if(_0x4cd75b!==null){let _0x2b7f94=_0x3c22c3(0x239)+_0x4a5db8[_0x3c22c3(0x107)]+'\x22',_0xa87fbc=[_0x3c22c3(0x1a3),_0x3c22c3(0x659),_0x3c22c3(0x14a),_0x3c22c3(0x37b),'trimmed'];_0x4a5db8['editOperator']===_0x3c22c3(0x419)||_0x4a5db8['editOperator']==='findAndReplaceRegex'?_0x2b7f94+=_0x3c22c3(0x699)+_0x4a5db8['secondValue']+_0x3c22c3(0x28a)+_0x4a5db8[_0x3c22c3(0x714)]+'\x22':!_0xa87fbc[_0x3c22c3(0x43a)](_0x4a5db8[_0x3c22c3(0x107)])&&_0x4a5db8[_0x3c22c3(0x141)]!==null&&_0x4a5db8[_0x3c22c3(0x141)]!==void 0x0&&(_0x2b7f94+=',\x20valor\x20passado:\x20\x22'+_0x4a5db8[_0x3c22c3(0x141)]+'\x22'),_0x2b7f94+=',\x20resultado:\x20'+_0x4cd75b+'.',_0x3aae76[_0x3c22c3(0x42a)](_0x2b7f94);}_0x4cd75b!==null&&(_0x4d010c=_0x4cd75b);}if(_0x27cabd['chatLog'][_0x3c22c3(0x19d)]&&_0x3081e3[_0x3c22c3(0x16b)]){_0x27cabd['chatLog'][_0x3c22c3(0x19d)][_0x3081e3['saveVariable']]=_0x4d010c;let _0x57de2c={'variable':_0x3081e3[_0x3c22c3(0x16b)],'oldValue':_0x53fa34,'newValue':_0x4d010c,'moreLogs':_0x3aae76};try{this[_0x3c22c3(0x40b)](_0x27cabd,_0x3081e3,_0x57de2c);}catch(_0x3bbdc8){this[_0x3c22c3(0x738)]['error'](_0x3c22c3(0x55d)+_0x3bbdc8['message']);}}return _0x2f7c1a;}catch(_0x19e7eb){return this[_0x3c22c3(0x738)][_0x3c22c3(0x3a7)](_0x3c22c3(0x18c)+_0x19e7eb[_0x3c22c3(0x4ab)]),null;}}async['processConditions'](_0xdd6ca8,_0x23fd14){const _0xa49491=a0_0x3b8fac;try{let _0x2dd466=[],_0x34e2f7=_0xdd6ca8[_0xa49491(0x5e6)][_0xa49491(0x34f)](_0x233f47=>_0x233f47['blockId']===_0x23fd14['_id'][_0xa49491(0x2eb)]()),_0x735936=null,_0x53a4e1=!0x1;for(let _0x2791d5 of _0x34e2f7){let _0x471b6a=this['evaluateCondition'](_0xdd6ca8,_0x2791d5);_0x2dd466[_0xa49491(0x42a)]('Primeiro\x20Valor:\x20'+_0x2791d5['firstValue']+_0xa49491(0x65b)+_0x2791d5['expression']+_0xa49491(0x268)+_0x2791d5[_0xa49491(0x141)]+_0xa49491(0x4b2)+_0x471b6a),_0x735936===null?_0x735936=_0x471b6a:_0x2791d5[_0xa49491(0x6fd)]===_0xa49491(0x211)?(_0x735936=_0x735936&&_0x471b6a,_0x471b6a||(_0x53a4e1=!0x0)):_0x2791d5[_0xa49491(0x6fd)]==='or'&&(_0x53a4e1||(_0x735936=_0x735936||_0x471b6a));}_0x735936===null&&(_0x735936=!0x0);let _0xbc6e47={'moreLogs':_0x2dd466};_0xdd6ca8['chatLog']['lastCondition']=_0x735936,await this['updateConversation'](_0xdd6ca8,_0x23fd14,_0xbc6e47);}catch(_0x47e467){this[_0xa49491(0x738)][_0xa49491(0x3a7)](this[_0xa49491(0x2af)]+'\x20('+this[_0xa49491(0x448)]['wuid']+'):\x20Error\x20processing\x20conditions:\x20'+(_0x47e467 instanceof Error?_0x47e467[_0xa49491(0x4ab)]:JSON[_0xa49491(0x5e5)](_0x47e467,null,0x2)));}}[a0_0x3b8fac(0x528)](_0x2cae0d,_0x4dfb09){const _0x450d71=a0_0x3b8fac;let _0x3ccac9=_0x4dfb09['firstValue'],_0x2987ac=_0x4dfb09['secondValue'];typeof _0x3ccac9==_0x450d71(0x20d)&&(_0x3ccac9=this[_0x450d71(0x15c)](_0x3ccac9,_0x2cae0d[_0x450d71(0x26c)]['realVariables'])??''),typeof _0x2987ac==_0x450d71(0x20d)&&(_0x2987ac=this[_0x450d71(0x15c)](_0x2987ac,_0x2cae0d[_0x450d71(0x26c)]['realVariables'])??'');try{switch(_0x4dfb09[_0x450d71(0x5d1)]){case _0x450d71(0x15d):return _0x3ccac9===_0x2987ac;case'notEqual':return _0x3ccac9!==_0x2987ac;case _0x450d71(0x32f):return this[_0x450d71(0x32f)](_0x3ccac9,_0x2987ac);case'notContains':return!this[_0x450d71(0x32f)](_0x3ccac9,_0x2987ac);case _0x450d71(0x29d):return parseFloat(_0x3ccac9)>parseFloat(_0x2987ac);case _0x450d71(0x153):return parseFloat(_0x3ccac9)<parseFloat(_0x2987ac);case _0x450d71(0x3fc):return _0x3ccac9!=='';case _0x450d71(0x626):return _0x3ccac9==='';case _0x450d71(0x5b9):return new RegExp(_0x2987ac)['test'](_0x3ccac9);case _0x450d71(0x783):return!new RegExp(_0x2987ac)[_0x450d71(0x4e2)](_0x3ccac9);default:return!0x1;}}catch(_0x57b4fa){return this[_0x450d71(0x738)][_0x450d71(0x3a7)](_0x450d71(0x513)+_0x57b4fa),!0x1;}}[a0_0x3b8fac(0x32f)](_0x31caef,_0x7ba58d){const _0x86dd6a=a0_0x3b8fac;if(_0x31caef===_0x7ba58d&&/^\d+$/[_0x86dd6a(0x4e2)](_0x31caef))return!0x0;if(this[_0x86dd6a(0x63f)](_0x31caef)&&/^\d+$/[_0x86dd6a(0x4e2)](_0x7ba58d)){let _0x12f113=_0x31caef['split'](',')[_0x86dd6a(0x23a)](_0x42eaa7=>parseInt(_0x42eaa7[_0x86dd6a(0x73c)]())),_0x4c1630=parseInt(_0x7ba58d);return _0x12f113[_0x86dd6a(0x43a)](_0x4c1630);}return _0x31caef[_0x86dd6a(0x43a)](_0x7ba58d);}[a0_0x3b8fac(0x63f)](_0x4ce163){const _0x192ccd=a0_0x3b8fac;return/^\d+(,\d+)*$/[_0x192ccd(0x4e2)](_0x4ce163);}[a0_0x3b8fac(0x259)](_0x174de1){const _0x460195=a0_0x3b8fac;let _0x22ef26=!0x0,_0xd96f93=null;for(let _0x340fe2 of _0x174de1){let _0x5dc280=this[_0x460195(0x7c9)](_0x340fe2);if(_0xd96f93==='or'&&_0x5dc280){_0x22ef26=!0x0;break;}if(_0xd96f93==='and'&&!_0x5dc280){_0x22ef26=!0x1;break;}_0xd96f93=_0x340fe2['OrAnd'];}return _0x22ef26;}[a0_0x3b8fac(0x7c9)](_0x2cb48a){const _0x5ba83e=a0_0x3b8fac;let _0x403293=_0x2cb48a[_0x5ba83e(0x729)],_0xb36e2b=_0x2cb48a[_0x5ba83e(0x141)];try{switch(_0x2cb48a[_0x5ba83e(0x5d1)]){case _0x5ba83e(0x15d):return String(_0x403293)===String(_0xb36e2b);case'notEqual':return String(_0x403293)!==String(_0xb36e2b);case _0x5ba83e(0x32f):return String(_0x403293)[_0x5ba83e(0x43a)](String(_0xb36e2b));case _0x5ba83e(0x25f):return!String(_0x403293)['includes'](String(_0xb36e2b));case'greater':return parseFloat(String(_0x403293))>parseFloat(String(_0xb36e2b));case _0x5ba83e(0x153):return parseFloat(String(_0x403293))<parseFloat(String(_0xb36e2b));case _0x5ba83e(0x3fc):return String(_0x403293)!=='';case'empty':return String(_0x403293)==='';case _0x5ba83e(0x5b9):return new RegExp(String(_0xb36e2b))[_0x5ba83e(0x4e2)](String(_0x403293));case _0x5ba83e(0x783):return!new RegExp(String(_0xb36e2b))['test'](String(_0x403293));default:return!0x1;}}catch(_0x2c3214){return this[_0x5ba83e(0x738)][_0x5ba83e(0x3a7)](_0x5ba83e(0x513)+_0x2c3214),!0x1;}}async[a0_0x3b8fac(0x2cf)](_0x414825,_0x169e5b){const _0x144693=a0_0x3b8fac;if(this[_0x144693(0x738)][_0x144693(0x592)](this[_0x144693(0x2af)]+'\x20('+this[_0x144693(0x448)][_0x144693(0x219)]+'):\x20Entrou\x20na\x20funo\x20saveReply'),!_0x414825||!_0x169e5b)return this['logger'][_0x144693(0x3a7)](this['instanceName']+'\x20('+this['instance'][_0x144693(0x219)]+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;let _0x5c4109=_0x414825['chatLog'][_0x144693(0x363)][_0x144693(0x3fb)]['id'];this[_0x144693(0x738)][_0x144693(0x592)](this['instanceName']+'\x20('+this[_0x144693(0x448)][_0x144693(0x219)]+_0x144693(0x522)+_0x5c4109);let _0x33d579={'key':{'id':_0x5c4109}},_0x3513da=_0x169e5b[_0x144693(0x16b)];_0x414825[_0x144693(0x26c)]['realVariables']['_'+_0x3513da+_0x144693(0x767)]=null,_0x414825[_0x144693(0x26c)][_0x144693(0x19d)]['_'+_0x3513da+'.mimetype']=null,_0x414825[_0x144693(0x26c)]['realVariables']['_'+_0x3513da+_0x144693(0x68f)]=null,_0x414825[_0x144693(0x26c)]['realVariables']['_'+_0x3513da+_0x144693(0x406)]=_0x414825[_0x144693(0x26c)][_0x144693(0x363)][_0x144693(0x1a2)];try{let _0x5652b8=await this[_0x144693(0x1a0)](_0x33d579);this[_0x144693(0x738)]['verbose'](this[_0x144693(0x2af)]+'\x20('+this[_0x144693(0x448)]['wuid']+_0x144693(0x170)),_0x414825[_0x144693(0x26c)][_0x144693(0x19d)]['_'+_0x3513da+_0x144693(0x305)]=_0x5652b8[_0x144693(0x4ce)],_0x414825['chatLog'][_0x144693(0x19d)]['_'+_0x3513da+_0x144693(0x73b)]=_0x5652b8[_0x144693(0x24d)];let _0x57287c=_0x5652b8['mimetype'][_0x144693(0x6c6)](/\/(\w+)$/),_0xcc4d20=_0x57287c?_0x57287c[0x1]:null;_0x414825['chatLog']['realVariables']['_'+_0x3513da+_0x144693(0x68f)]=_0xcc4d20,this['logger']['verbose'](this[_0x144693(0x2af)]+'\x20('+this[_0x144693(0x448)][_0x144693(0x219)]+_0x144693(0x1d9)+_0x3513da+'\x27.');}catch(_0x25bbe1){this['logger'][_0x144693(0x3a7)](this[_0x144693(0x2af)]+'\x20('+this[_0x144693(0x448)][_0x144693(0x219)]+_0x144693(0x6b3)+_0x25bbe1[_0x144693(0x4ab)]);}let _0x35c9c0=_0x414825['chatLog']['lastReceivedMessage'][_0x144693(0x284)]||_0x414825[_0x144693(0x26c)][_0x144693(0x363)]['caption']||_0x414825[_0x144693(0x26c)][_0x144693(0x363)][_0x144693(0x1bf)];try{_0x414825[_0x144693(0x26c)][_0x144693(0x19d)]||(_0x414825[_0x144693(0x26c)]['realVariables']={});let _0x2f4499=_0x414825[_0x144693(0x26c)][_0x144693(0x19d)][_0x3513da];_0x414825['chatLog'][_0x144693(0x19d)][_0x3513da]=_0x35c9c0;let _0x4570bb={'variable':_0x3513da,'oldValue':_0x2f4499,'newValue':_0x35c9c0};this[_0x144693(0x40b)](_0x414825,_0x169e5b,_0x4570bb),this[_0x144693(0x738)][_0x144693(0x592)](this[_0x144693(0x2af)]+'\x20('+this[_0x144693(0x448)][_0x144693(0x219)]+_0x144693(0x10f));}catch(_0x4592d4){let _0x44b74c={'error':!0x0,'errorLog':_0x4592d4[_0x144693(0x2eb)]()};return this[_0x144693(0x40b)](_0x414825,_0x169e5b,_0x44b74c),this[_0x144693(0x738)][_0x144693(0x3a7)](this[_0x144693(0x2af)]+'\x20('+this['instance'][_0x144693(0x219)]+'):\x20Erro\x20durante\x20a\x20atualizao:\x20'+(_0x4592d4 instanceof Error?_0x4592d4[_0x144693(0x4ab)]:JSON[_0x144693(0x5e5)](_0x4592d4,null,0x2))),null;}}async[a0_0x3b8fac(0x43f)](_0x18c764,_0x4b6c62){const _0x1f61be=a0_0x3b8fac;if(this['logger']['verbose'](this[_0x1f61be(0x2af)]+'\x20('+this[_0x1f61be(0x448)][_0x1f61be(0x219)]+_0x1f61be(0x5bc)),!_0x18c764||!_0x4b6c62)return this[_0x1f61be(0x738)][_0x1f61be(0x3a7)](this[_0x1f61be(0x2af)]+'\x20('+this[_0x1f61be(0x448)][_0x1f61be(0x219)]+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;let _0x821d61=Date[_0x1f61be(0x183)](),_0x5e5cc0=parseInt(_0x4b6c62[_0x1f61be(0x7d7)],0xa);if(isNaN(_0x5e5cc0))return this[_0x1f61be(0x738)][_0x1f61be(0x3a7)](this[_0x1f61be(0x2af)]+'\x20('+this[_0x1f61be(0x448)][_0x1f61be(0x219)]+_0x1f61be(0x378)),null;let _0x8875e2={'newStoppedUntil':_0x821d61+_0x5e5cc0*0x3c*0x3e8};return await this[_0x1f61be(0x40b)](_0x18c764,_0x4b6c62,_0x8875e2,!0x0),null;}async[a0_0x3b8fac(0x7ba)](_0x17fcfd,_0x3ad1bf){const _0x52f286=a0_0x3b8fac;try{switch(_0x3ad1bf[_0x52f286(0x77b)][_0x52f286(0x282)]){case _0x52f286(0x397):await this[_0x52f286(0x2a9)](_0x17fcfd,_0x3ad1bf);break;case _0x52f286(0x1b4):await this[_0x52f286(0x38e)](_0x17fcfd,_0x3ad1bf);break;case _0x52f286(0x67f):await this['uazapiSendLocation'](_0x17fcfd,_0x3ad1bf);break;case'sendAudio':await this[_0x52f286(0x431)](_0x17fcfd,_0x3ad1bf);break;case _0x52f286(0x3ad):await this[_0x52f286(0x29b)](_0x17fcfd,_0x3ad1bf);break;case _0x52f286(0x349):await this[_0x52f286(0x1e6)](_0x17fcfd,_0x3ad1bf);break;case _0x52f286(0x60d):await this[_0x52f286(0x1e6)](_0x17fcfd,_0x3ad1bf);break;case _0x52f286(0x16d):await this['uazapiDeleteMessage'](_0x17fcfd,_0x3ad1bf);break;default:this[_0x52f286(0x738)][_0x52f286(0x3a7)](this[_0x52f286(0x2af)]+'\x20('+this[_0x52f286(0x448)]['wuid']+_0x52f286(0x320)+_0x3ad1bf[_0x52f286(0x77b)]['command']);}}catch(_0x34f19c){this[_0x52f286(0x738)][_0x52f286(0x3a7)](this[_0x52f286(0x2af)]+'\x20('+this[_0x52f286(0x448)][_0x52f286(0x219)]+_0x52f286(0x65c)+(_0x34f19c instanceof Error?_0x34f19c['message']:JSON[_0x52f286(0x5e5)](_0x34f19c,null,0x2)));}}async['updateConversation'](_0x254c70,_0x226ed8,_0x3ba271,_0x2e25a3=!0x1,_0x2a79b0=!0x1){const _0x2f0eeb=a0_0x3b8fac;_0x254c70[_0x2f0eeb(0x26c)]['blockLogs']||(_0x254c70['chatLog'][_0x2f0eeb(0x721)]=[]);let _0xe71b27=(_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x721)]?.[_0x2f0eeb(0x3c8)]??0x0)+0x1,_0xdda798=_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x721)][_0x2f0eeb(0x34f)](_0x70072b=>String(_0x70072b[_0x2f0eeb(0x6ca)])===String(_0x226ed8[_0x2f0eeb(0x4ff)]))[_0x2f0eeb(0x3c8)]+0x1,_0x25c6d8=_0x3ba271?.['onTime']??Date[_0x2f0eeb(0x183)](),_0xa69553=_0x3ba271?.[_0x2f0eeb(0x3a7)]?_0x3ba271[_0x2f0eeb(0x642)]??_0x3ba271[_0x2f0eeb(0x3a7)]['toString']():void 0x0,_0x578f23={'onTime':_0x25c6d8,'blockId':_0x226ed8[_0x2f0eeb(0x4ff)],'order':_0xe71b27,'activatedCount':_0xdda798,'error':_0x3ba271?.[_0x2f0eeb(0x3a7)]??!0x1,'messageId':_0x3ba271?.[_0x2f0eeb(0x5ab)],'apiResponse':_0x3ba271?.[_0x2f0eeb(0x37f)],'apiResponseString':_0x3ba271?.['apiResponse']?JSON[_0x2f0eeb(0x5e5)](_0x3ba271?.[_0x2f0eeb(0x37f)]):void 0x0,'variable':_0x3ba271?.[_0x2f0eeb(0x3b6)],'oldValue':_0x3ba271?.[_0x2f0eeb(0x2e5)],'newValue':_0x3ba271?.[_0x2f0eeb(0xb2)],'newStoppedUntil':_0x3ba271?.[_0x2f0eeb(0xc8)],'moreLogs':_0x3ba271?.['moreLogs'],'errorLog':_0xa69553};if(_0x3ba271[_0x2f0eeb(0x5c7)]&&_0x3ba271[_0x2f0eeb(0x5c7)][_0x2f0eeb(0x3c8)]>0x0){let _0x55c00b=_0x3ba271[_0x2f0eeb(0x5c7)]['map'](_0x29d8a7=>this['replaceVariablesLogs'](_0x29d8a7,_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x19d)]));_0x578f23[_0x2f0eeb(0x5c7)]=_0x55c00b;}if(_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x19d)]||(_0x254c70['chatLog'][_0x2f0eeb(0x19d)]={}),_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x19d)][_0x2f0eeb(0x68b)]=String(_0xdda798),_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x19d)][_0x2f0eeb(0x3f1)]=String(_0x3ba271[_0x2f0eeb(0x3a7)]??!0x1),_0x254c70['chatLog']['blockLogs'][_0x2f0eeb(0x42a)](_0x578f23),_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x19d)]['telefone']&&_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x19d)][_0x2f0eeb(0x61e)]!==_0x254c70['remoteJid']){let _0x43dd31=(await this[_0x2f0eeb(0x269)]({'numbers':[_0x254c70['chatLog'][_0x2f0eeb(0x19d)][_0x2f0eeb(0x61e)]]}))[0x0][_0x2f0eeb(0x6ea)];_0x254c70['chatLog']['realVariables']['telefone']=_0x43dd31,_0x254c70[_0x2f0eeb(0x6d5)]=_0x43dd31;try{let _0x35a1f3={'_id':{'$ne':_0x254c70['_id']},'remoteJid':_0x43dd31,'status':_0x2f0eeb(0x627)},_0x45ce43={'status':_0x2f0eeb(0x5de)};await this['repository'][_0x2f0eeb(0x7ab)][_0x2f0eeb(0x2de)](_0x35a1f3,_0x45ce43,this[_0x2f0eeb(0x448)][_0x2f0eeb(0x219)]),this['logger']['verbose'](this[_0x2f0eeb(0x2af)]+'\x20('+this[_0x2f0eeb(0x448)][_0x2f0eeb(0x219)]+_0x2f0eeb(0x705));}catch(_0xe4815e){this[_0x2f0eeb(0x738)][_0x2f0eeb(0x3a7)](this[_0x2f0eeb(0x2af)]+'\x20('+this[_0x2f0eeb(0x448)][_0x2f0eeb(0x219)]+_0x2f0eeb(0x3ed)+_0xe4815e['message']);}try{let _0x505ed3=_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x19d)],_0x1c7740=await this[_0x2f0eeb(0x66d)](_0x43dd31),_0x280b79={..._0x505ed3,..._0x1c7740,'_remoteJid':_0x43dd31};_0x254c70['chatLog'][_0x2f0eeb(0x19d)]=_0x280b79;}catch(_0x11874a){this['logger'][_0x2f0eeb(0x3a7)](this[_0x2f0eeb(0x2af)]+'\x20('+this[_0x2f0eeb(0x448)]['wuid']+_0x2f0eeb(0x776)+_0x11874a[_0x2f0eeb(0x4ab)]);}}_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x209)]=_0x226ed8['_id'][_0x2f0eeb(0x2eb)](),_0x254c70['chatLog'][_0x2f0eeb(0x9e)]&&(_0x254c70['chatLog']['lastSendMessage']=_0x254c70[_0x2f0eeb(0x26c)]['lastSendMessage']),_0x254c70['chatLog']['lastReceivedMessage']&&(_0x254c70[_0x2f0eeb(0x26c)]['lastReceivedMessage']=_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x363)]),_0x254c70[_0x2f0eeb(0x26c)]['lastCondition']&&(_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x450)]=_0x254c70[_0x2f0eeb(0x26c)][_0x2f0eeb(0x450)]),_0x2a79b0&&(_0x254c70[_0x2f0eeb(0x233)]=_0x2f0eeb(0x5de)),_0x2e25a3?this[_0x2f0eeb(0x1f9)](_0x254c70):this[_0x2f0eeb(0x380)](_0x254c70,_0x226ed8);}[a0_0x3b8fac(0x308)](_0x16e267,_0x3b7aef){const _0x4f0784=a0_0x3b8fac;return _0x16e267['replace'](/\{\{([^}]+)\}\}/g,(_0xcefaec,_0xc1c644)=>_0x3b7aef[_0xc1c644]?'{{'+_0xc1c644+_0x4f0784(0x577)+_0x3b7aef[_0xc1c644]+'\x22':'{{'+_0xc1c644+_0x4f0784(0x59c));}async[a0_0x3b8fac(0x1f9)](_0x5e7011){const _0x881833=a0_0x3b8fac;try{let _0x1bc84=Object[_0x881833(0x4b7)](_0x5e7011['chatLog'][_0x881833(0x19d)])[_0x881833(0x23a)](([_0x4e8688,_0x1b12d6])=>({'name':_0x4e8688,'value':_0x1b12d6})),_0x1f5b37={'status':_0x5e7011[_0x881833(0x233)],'remoteJid':_0x5e7011['remoteJid'],'blocks':_0x5e7011[_0x881833(0x389)],'waitingMenu_id':_0x5e7011['waitingMenu_id'],'waitingMenu_text':_0x5e7011[_0x881833(0xe0)],'waitingMenu_replyOptions':_0x5e7011[_0x881833(0x66a)],'chatLog':{'lastBlockId':_0x5e7011['chatLog'][_0x881833(0x209)],'lastSendMessage':_0x5e7011[_0x881833(0x26c)]['lastSendMessage'],'lastReceivedMessage':_0x5e7011[_0x881833(0x26c)][_0x881833(0x363)],'lastCondition':_0x5e7011[_0x881833(0x26c)][_0x881833(0x450)],'chatVariables':_0x1bc84,'realVariables':_0x5e7011['chatLog'][_0x881833(0x19d)],'blockLogs':_0x5e7011[_0x881833(0x26c)][_0x881833(0x721)]}},_0xae844=await this[_0x881833(0x610)][_0x881833(0x7ab)][_0x881833(0x7b6)](_0x5e7011[_0x881833(0x4ff)],_0x1f5b37,this[_0x881833(0x448)][_0x881833(0x219)]);if(_0xae844){this['logger']['verbose'](this[_0x881833(0x2af)]+'\x20('+this[_0x881833(0x448)][_0x881833(0x219)]+_0x881833(0x479)+_0xae844[_0x881833(0x4ff)]);try{let _0x17a724=['nome',_0x881833(0x34c),_0x881833(0x6b0),_0x881833(0x2ef),'status','notas','responsavelid',_0x881833(0x1df),'etiquetas',_0x881833(0x270)];if(!this['AutomateSystem']&&(await this[_0x881833(0x407)](),!this['AutomateSystem']))throw new Error(_0x881833(0x4b6));let _0x3f21e0=this['AutomateSystem']?.['customFields'][_0x881833(0x23a)](_0x1f3f3e=>_0x1f3f3e['name']),_0x32cfde={};Object[_0x881833(0x4b7)](_0x5e7011[_0x881833(0x26c)][_0x881833(0x19d)])[_0x881833(0x73e)](([_0x3874b3,_0x17b9cc])=>{const _0x4084b6=_0x881833;_0x17a724['includes'](_0x3874b3)&&(_0x3874b3===_0x4084b6(0x1df)&&typeof _0x17b9cc==_0x4084b6(0x20d)?_0x32cfde[_0x3874b3]=_0x17b9cc[_0x4084b6(0x45d)](',')['map'](_0x6c03fe=>_0x6c03fe[_0x4084b6(0x73c)]())[_0x4084b6(0x34f)](_0x3863ab=>_0x3863ab!==''):_0x3874b3===_0x4084b6(0x1b0)&&typeof _0x17b9cc==_0x4084b6(0x20d)?_0x32cfde[_0x3874b3]=_0x17b9cc[_0x4084b6(0x45d)](',')['map'](_0x4f2791=>_0x4f2791['trim']())[_0x4084b6(0x34f)](_0x43f29b=>_0x43f29b!==''):_0x32cfde[_0x3874b3]=_0x17b9cc);});let _0x571d3f=_0x5e7011[_0x881833(0x26c)][_0x881833(0x721)][_0x5e7011[_0x881833(0x26c)][_0x881833(0x721)][_0x881833(0x3c8)]-0x1];if(_0x571d3f){let _0x147a64=_0x571d3f[_0x881833(0xc8)];_0x147a64!==void 0x0&&(_0x32cfde[_0x881833(0x635)]=_0x147a64[_0x881833(0x2eb)]());}let _0x582fb3=_0x1bc84[_0x881833(0x34f)](_0x2eae1a=>_0x3f21e0[_0x881833(0x43a)](_0x2eae1a[_0x881833(0x26b)]));this[_0x881833(0x738)]['verbose'](this[_0x881833(0x2af)]+'\x20('+this['instance'][_0x881833(0x219)]+'):\x20leadInfoVariables'),this[_0x881833(0x738)][_0x881833(0x592)](_0x32cfde),this[_0x881833(0x738)][_0x881833(0x592)](this[_0x881833(0x2af)]+'\x20('+this[_0x881833(0x448)][_0x881833(0x219)]+_0x881833(0x3fe)),this[_0x881833(0x738)][_0x881833(0x592)](_0x582fb3);let _0x24d21f=_0x582fb3['map'](_0x125590=>{const _0x4ae0ae=_0x881833;let _0x4257fb=this[_0x4ae0ae(0x351)]?.[_0x4ae0ae(0x51b)][_0x4ae0ae(0x7a1)](_0x4c07b4=>_0x4c07b4[_0x4ae0ae(0x26b)]===_0x125590[_0x4ae0ae(0x26b)]);if(!_0x4257fb)throw new Error('Campo\x20personalizado\x20no\x20encontrado\x20para\x20o\x20nome\x20'+_0x125590['name']);return{'_id':_0x4257fb['_id'],'value':_0x125590['value']};});this[_0x881833(0x738)][_0x881833(0x592)](this[_0x881833(0x2af)]+'\x20('+this[_0x881833(0x448)][_0x881833(0x219)]+_0x881833(0x281)),this['logger'][_0x881833(0x592)](_0x24d21f),await this[_0x881833(0x545)](_0x5e7011['remoteJid'],_0x32cfde,_0x24d21f);}catch(_0x46cff8){this[_0x881833(0x738)][_0x881833(0x3a7)](this[_0x881833(0x2af)]+'\x20('+this[_0x881833(0x448)]['wuid']+_0x881833(0x9d)+(_0x46cff8 instanceof Error?_0x46cff8[_0x881833(0x4ab)]:JSON[_0x881833(0x5e5)](_0x46cff8,null,0x2)));}}else this['logger']['error'](this[_0x881833(0x2af)]+'\x20('+this['instance']['wuid']+'):\x20A\x20atualizao\x20no\x20BD\x20da\x20conversa\x20no\x20foi\x20bem\x20sucedida');}catch(_0x48ce3b){this[_0x881833(0x738)][_0x881833(0x3a7)](this['instanceName']+'\x20('+this[_0x881833(0x448)][_0x881833(0x219)]+'):\x20Erro\x20na\x20atualizao\x20da\x20conversa\x20no\x20BD:\x20'+(_0x48ce3b instanceof Error?_0x48ce3b['message']:JSON['stringify'](_0x48ce3b,null,0x2)));}}async[a0_0x3b8fac(0x545)](_0x3ebbc5,_0x5c793e,_0x3925e7){const _0x418ee4=a0_0x3b8fac;try{let _0xdb1840={'leadInfo.leadnome':_0x5c793e[_0x418ee4(0x408)],'leadInfo.nomecompleto':_0x5c793e['nomecompleto'],'leadInfo.email':_0x5c793e['email'],'leadInfo.cpf':_0x5c793e[_0x418ee4(0x2ef)],'leadInfo.status':_0x5c793e[_0x418ee4(0x233)],'leadInfo.notas':_0x5c793e[_0x418ee4(0x5a6)],'leadInfo.responsavelid':_0x5c793e[_0x418ee4(0x429)],'leadInfo.tags':_0x5c793e[_0x418ee4(0x1df)],'leadInfo.etiquetas':_0x5c793e[_0x418ee4(0x1b0)],'leadInfo.customFields':_0x3925e7,'leadInfo.atendimentoAberto':_0x5c793e[_0x418ee4(0x270)]},_0x25f648=await this[_0x418ee4(0x610)][_0x418ee4(0x273)][_0x418ee4(0x7ac)]({'where':{'_id':_0x3ebbc5}},this['instance'][_0x418ee4(0x219)]);if(!_0x25f648)return'chat\x20no\x20encontrado';let _0x2d5694=new Set(_0x25f648[_0x418ee4(0x79e)][_0x418ee4(0x1b0)]||[]),_0x14940f=new Set(_0x5c793e[_0x418ee4(0x1b0)]||[]),_0x43de08=await this[_0x418ee4(0x610)][_0x418ee4(0x396)][_0x418ee4(0x7a1)]({'where':{}},this[_0x418ee4(0x448)][_0x418ee4(0x219)]),_0xaf97b2=new Set(_0x43de08[_0x418ee4(0x23a)](_0x4142a4=>_0x4142a4[_0x418ee4(0x4ff)])),_0x8d13f5=[..._0x14940f][_0x418ee4(0x34f)](_0x4f38a9=>!_0x2d5694[_0x418ee4(0x59b)](_0x4f38a9)&&_0xaf97b2[_0x418ee4(0x59b)](_0x4f38a9)),_0x4e1e24=[..._0x2d5694][_0x418ee4(0x34f)](_0xfa7d0e=>!_0x14940f[_0x418ee4(0x59b)](_0xfa7d0e));for(let _0x381728 of _0x8d13f5)await this[_0x418ee4(0x1d2)](_0x381728,_0x25f648['_id']),_0x2d5694[_0x418ee4(0x1a8)](_0x381728);for(let _0x1027b3 of _0x4e1e24)await this[_0x418ee4(0xda)](_0x1027b3,_0x25f648[_0x418ee4(0x4ff)]),_0x2d5694['delete'](_0x1027b3);if('desativadoFluxoAte'in _0x5c793e){let _0x2e8426=_0x5c793e[_0x418ee4(0x635)];_0xdb1840[_0x418ee4(0x1ba)]=_0x2e8426?Number(_0x2e8426):null;}if('atendimentoAberto'in _0x5c793e){let _0x129dc9=_0x5c793e[_0x418ee4(0x270)]['toLowerCase']();_0xdb1840[_0x418ee4(0x7c3)]=_0x129dc9===_0x418ee4(0x5d3)||_0x129dc9==='1'||_0x129dc9===_0x418ee4(0x7cb)||_0x129dc9===_0x418ee4(0x46f);}let _0x3256f6=await this[_0x418ee4(0x610)][_0x418ee4(0x273)]['updateOne']({'where':{'_id':_0x3ebbc5}},_0xdb1840,this[_0x418ee4(0x448)][_0x418ee4(0x219)]);_0x3256f6?(this[_0x418ee4(0x738)]['verbose'](this[_0x418ee4(0x2af)]+'\x20('+this[_0x418ee4(0x448)][_0x418ee4(0x219)]+_0x418ee4(0x5a2)+_0x3256f6[_0x418ee4(0x4ff)]),q(this['instanceName'],_0x418ee4(0x4f8),{'chat':_0x3256f6})):this['logger'][_0x418ee4(0x3a7)](this[_0x418ee4(0x2af)]+'\x20('+this[_0x418ee4(0x448)]['wuid']+'):\x20Falha\x20ao\x20atualizar\x20as\x20variveis\x20do\x20chat\x20no\x20BD');}catch(_0x22a891){this[_0x418ee4(0x738)][_0x418ee4(0x3a7)](this[_0x418ee4(0x2af)]+'\x20('+this[_0x418ee4(0x448)][_0x418ee4(0x219)]+'):\x20Erro\x20ao\x20salvar\x20variveis\x20do\x20chat\x20no\x20BD:\x20'+(_0x22a891 instanceof Error?_0x22a891[_0x418ee4(0x4ab)]:JSON[_0x418ee4(0x5e5)](_0x22a891,null,0x2)));}}async[a0_0x3b8fac(0x3a9)](_0x10fc77,_0x255552){const _0x32cf50=a0_0x3b8fac;this[_0x32cf50(0x738)]['verbose'](this['instanceName']+'\x20('+this[_0x32cf50(0x448)][_0x32cf50(0x219)]+_0x32cf50(0x623)+_0x255552);try{let _0x4fe42d=await this[_0x32cf50(0x610)][_0x32cf50(0x273)][_0x32cf50(0x7b6)]({'where':{'_id':_0x10fc77[_0x32cf50(0x6d5)]}},{'leadInfo.desativadoFluxoAte':_0x255552},this[_0x32cf50(0x448)][_0x32cf50(0x219)]);this['logger'][_0x32cf50(0x592)](this[_0x32cf50(0x2af)]+'\x20('+this['instance'][_0x32cf50(0x219)]+_0x32cf50(0x29c)+_0x10fc77[_0x32cf50(0x4ff)]),this[_0x32cf50(0x738)]['verbose'](this['instanceName']+'\x20('+this[_0x32cf50(0x448)][_0x32cf50(0x219)]+_0x32cf50(0x623)+JSON[_0x32cf50(0x5e5)](_0x4fe42d,null,0x2)),_0x4fe42d&&q(this['instanceName'],'chats',{'chat':_0x4fe42d});}catch(_0x2fb1d6){this[_0x32cf50(0x738)][_0x32cf50(0x3a7)](this[_0x32cf50(0x2af)]+'\x20('+this[_0x32cf50(0x448)]['wuid']+_0x32cf50(0x14d)+(_0x2fb1d6 instanceof Error?_0x2fb1d6['message']:JSON[_0x32cf50(0x5e5)](_0x2fb1d6,null,0x2)));}}async[a0_0x3b8fac(0x1fc)](_0x2fa805){const _0x1e5f64=a0_0x3b8fac;try{this[_0x1e5f64(0x738)][_0x1e5f64(0x592)](this[_0x1e5f64(0x2af)]+'\x20('+this[_0x1e5f64(0x448)]['wuid']+_0x1e5f64(0x3b0));let _0x2552e7=_0x2fa805['replace'](/\D/g,''),_0x3d8b92=this['AutomateSystem'][_0x1e5f64(0x4c5)][_0x1e5f64(0x7a1)](_0x220d72=>_0x220d72[_0x1e5f64(0x1c8)]===_0x2552e7);if(_0x3d8b92||(this['logger'][_0x1e5f64(0x592)](this[_0x1e5f64(0x2af)]+'\x20('+this[_0x1e5f64(0x448)][_0x1e5f64(0x219)]+_0x1e5f64(0x631)),_0x3d8b92=this['AutomateSystem'][_0x1e5f64(0x4c5)]['find'](_0x5922c8=>_0x5922c8['default']===!0x0)),!_0x3d8b92)return this[_0x1e5f64(0x738)][_0x1e5f64(0x592)](this[_0x1e5f64(0x2af)]+'\x20('+this[_0x1e5f64(0x448)]['wuid']+_0x1e5f64(0x22a)),null;let _0x5d8f76=await this[_0x1e5f64(0x610)]['flow'][_0x1e5f64(0x7ac)]({'where':{'_id':_0x3d8b92[_0x1e5f64(0x4ff)]}});if(!_0x5d8f76||!_0x5d8f76[_0x1e5f64(0x760)]?.[_0x1e5f64(0x43a)](this[_0x1e5f64(0x448)][_0x1e5f64(0x219)]))throw this[_0x1e5f64(0x738)][_0x1e5f64(0x3a7)](this[_0x1e5f64(0x2af)]+'\x20('+this[_0x1e5f64(0x448)]['wuid']+_0x1e5f64(0x3b3)+_0x5d8f76[_0x1e5f64(0x4ff)]+_0x1e5f64(0x1e5)),new m(_0x1e5f64(0x5c5)+_0x5d8f76['_id']+_0x1e5f64(0x1e5));return _0x5d8f76;}catch(_0x1dd876){return this[_0x1e5f64(0x738)][_0x1e5f64(0x3a7)](this[_0x1e5f64(0x2af)]+'\x20('+this['instance'][_0x1e5f64(0x219)]+_0x1e5f64(0x1eb)+(_0x1dd876 instanceof Error?_0x1dd876[_0x1e5f64(0x4ab)]:JSON[_0x1e5f64(0x5e5)](_0x1dd876,null,0x2))),null;}}async[a0_0x3b8fac(0x93)](_0x4b6348,_0x24bd7c){const _0x40d902=a0_0x3b8fac;try{let _0x515010=!!_0x24bd7c[_0x40d902(0x1bf)],_0x14d005=_0x24bd7c['quoted'],_0x35960c=null;if(this[_0x40d902(0x738)][_0x40d902(0x592)](this[_0x40d902(0x2af)]+'\x20('+this[_0x40d902(0x448)][_0x40d902(0x219)]+_0x40d902(0x4aa)+_0x515010+_0x40d902(0x9b)+_0x14d005),_0x515010){this[_0x40d902(0x738)][_0x40d902(0x592)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x40d902(0x70d));let _0x32c413={'where':{'remoteJid':_0x4b6348,'waitingMenu_id':_0x14d005}};if(_0x35960c=await this[_0x40d902(0x610)]['flowConversation'][_0x40d902(0x7ac)](_0x32c413,this['instance'][_0x40d902(0x219)]),!_0x35960c)return this['logger'][_0x40d902(0x592)](this['instanceName']+'\x20('+this['instance'][_0x40d902(0x219)]+_0x40d902(0x6e4)),null;let _0x11173d=Date[_0x40d902(0x183)](),_0x354e8a=_0x35960c?.[_0x40d902(0x373)]||0x0,_0xfd95f1=_0x11173d-_0x354e8a*0x3c*0x3e8;if(_0x35960c[_0x40d902(0xa9)]<_0xfd95f1){this[_0x40d902(0x738)][_0x40d902(0x592)](this[_0x40d902(0x2af)]+'\x20('+this[_0x40d902(0x448)][_0x40d902(0x219)]+_0x40d902(0x231));let _0x465824={'number':_0x35960c['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x35960c[_0x40d902(0x36f)]}};await this[_0x40d902(0x663)](_0x465824);let _0x3f6d43={'status':_0x40d902(0x5de),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x40d902(0x610)][_0x40d902(0x7ab)][_0x40d902(0x7b6)](_0x35960c['_id'],_0x3f6d43,this['instance'][_0x40d902(0x219)]),null;}return _0x35960c[_0x40d902(0xa9)]=Date[_0x40d902(0x183)](),_0x35960c['chatLog']['lastReceivedMessage']=_0x24bd7c,_0x35960c;}else{this[_0x40d902(0x738)][_0x40d902(0x592)](this[_0x40d902(0x2af)]+'\x20('+this[_0x40d902(0x448)]['wuid']+'):\x20'+this[_0x40d902(0x448)][_0x40d902(0x219)]+'\x20no\x20\x20um\x20voto\x20enviado\x20pelo\x20usurio'),this['logger'][_0x40d902(0x592)](this[_0x40d902(0x2af)]+'\x20('+this['instance']['wuid']+'):\x20Procurando\x20conversa');let _0x59f1fb={'where':{'remoteJid':_0x4b6348,'status':_0x40d902(0x627)}};if(_0x35960c=await this[_0x40d902(0x610)][_0x40d902(0x7ab)][_0x40d902(0x7ac)](_0x59f1fb,this[_0x40d902(0x448)][_0x40d902(0x219)]),!_0x35960c){let _0x572b94=await this['findFlow'](_0x4b6348);if(_0x572b94&&(_0x35960c=await this[_0x40d902(0x6e1)](_0x572b94,_0x24bd7c['key'],_0x24bd7c)),!_0x35960c)return null;}let _0x385813=Date[_0x40d902(0x183)](),_0x4fe67a=_0x35960c?.[_0x40d902(0x373)]||0x0,_0x1f67fc=_0x385813-_0x4fe67a*0x3c*0x3e8;if(this[_0x40d902(0x738)][_0x40d902(0x592)](this[_0x40d902(0x2af)]+'\x20('+this[_0x40d902(0x448)]['wuid']+_0x40d902(0x365)+_0x385813+_0x40d902(0xa8)+_0x4fe67a+_0x40d902(0x6f1)+_0x1f67fc),this[_0x40d902(0x738)][_0x40d902(0x592)](this[_0x40d902(0x2af)]+'\x20('+this[_0x40d902(0x448)]['wuid']+'):\x20A\x20mensagem\x20no\x20foi\x20enviada\x20pelo\x20bot'),this[_0x40d902(0x738)][_0x40d902(0x592)](this[_0x40d902(0x2af)]+'\x20('+this[_0x40d902(0x448)][_0x40d902(0x219)]+_0x40d902(0x6d4)+_0x35960c[_0x40d902(0xa9)]),this[_0x40d902(0x738)][_0x40d902(0x592)](this[_0x40d902(0x2af)]+'\x20('+this[_0x40d902(0x448)][_0x40d902(0x219)]+_0x40d902(0x288)+_0x1f67fc),_0x35960c[_0x40d902(0xa9)]<_0x1f67fc){this[_0x40d902(0x738)][_0x40d902(0x592)](this[_0x40d902(0x2af)]+'\x20('+this['instance']['wuid']+_0x40d902(0x6ff));let _0x3e77e9=await this['findFlow'](_0x4b6348);if(_0x3e77e9===null)return null;_0x35960c&&await this['repository'][_0x40d902(0x7ab)][_0x40d902(0x7b6)](_0x35960c['_id'],{'status':_0x40d902(0x5de)},this[_0x40d902(0x448)][_0x40d902(0x219)]),_0x35960c=await this['createNewConversation'](_0x3e77e9,_0x24bd7c[_0x40d902(0x3fb)],_0x24bd7c);}return _0x35960c[_0x40d902(0xa9)]=_0x385813,_0x35960c['chatLog'][_0x40d902(0x363)]=_0x24bd7c,_0x35960c;}}catch(_0x3eef06){return this[_0x40d902(0x738)][_0x40d902(0x3a7)](this[_0x40d902(0x2af)]+'\x20('+this[_0x40d902(0x448)][_0x40d902(0x219)]+_0x40d902(0x391)+(_0x3eef06 instanceof Error?_0x3eef06[_0x40d902(0x4ab)]:JSON[_0x40d902(0x5e5)](_0x3eef06,null,0x2))),null;}}async['createNewConversation'](_0x11ead7,_0x6e2452,_0x332106){const _0x15f1f7=a0_0x3b8fac;this[_0x15f1f7(0x738)][_0x15f1f7(0x592)](this['instanceName']+'\x20('+this[_0x15f1f7(0x448)][_0x15f1f7(0x219)]+'):\x20Criando\x20nova\x20conversa[createNewConversation]');try{let _0x5881b2=require(_0x15f1f7(0x794))['ObjectId'],_0x3ccd73=Date[_0x15f1f7(0x183)](),_0x2df5b7='start',_0x2522d2=_0x6e2452[_0x15f1f7(0x123)]?null:_0x332106,_0x3b6dcb=_0x6e2452['fromMe']?_0x332106:null,_0x2f3f5d=_0x6e2452[_0x15f1f7(0x6d5)],_0x26641b=this['AutomateSystem']['flows'][_0x15f1f7(0x7a1)](_0x24b743=>_0x24b743[_0x15f1f7(0x4ff)]===_0x11ead7[_0x15f1f7(0x4ff)]?.[_0x15f1f7(0x2eb)]()),_0x332bf1=_0x26641b?.['minutesToClose']??_0x11ead7['minutesToClose']??0x0,_0x1ef1d8=_0x26641b?.[_0x15f1f7(0x198)]??_0x11ead7[_0x15f1f7(0x198)]??!0x1;await this[_0x15f1f7(0x7be)](_0x2f3f5d);let _0x4248dc={'flowId':_0x11ead7[_0x15f1f7(0x4ff)],..._0x11ead7,'chatLog':null},_0xef19be=await this[_0x15f1f7(0x6f7)](_0x4248dc[_0x15f1f7(0x2dc)]),_0x4bfe58=await this['getVariablesChat'](_0x2f3f5d),_0x273b30={..._0xef19be,..._0x4bfe58,'_remoteJid':_0x2f3f5d},_0x3199fc={'lastReceivedMessage':_0x2522d2,'lastSendMessage':_0x3b6dcb,'lastBlockId':_0x2df5b7,'lastCondition':!0x0,'realVariables':_0x273b30};_0x4248dc[_0x15f1f7(0x26c)]=_0x3199fc,delete _0x4248dc[_0x15f1f7(0x4ff)],_0x4248dc[_0x15f1f7(0x4ff)]=new _0x5881b2(),_0x4248dc['lastInteraction']=_0x3ccd73,_0x4248dc[_0x15f1f7(0x233)]=_0x15f1f7(0x627),_0x4248dc[_0x15f1f7(0x6d5)]=_0x2f3f5d,_0x4248dc[_0x15f1f7(0x373)]=_0x332bf1,_0x4248dc[_0x15f1f7(0x198)]=_0x1ef1d8;let _0x1cb8ac=await this[_0x15f1f7(0x610)][_0x15f1f7(0x7ab)][_0x15f1f7(0x7b6)](_0x4248dc['_id'],_0x4248dc,this[_0x15f1f7(0x448)][_0x15f1f7(0x219)]);return this[_0x15f1f7(0x738)][_0x15f1f7(0x592)](this['instanceName']+'\x20('+this[_0x15f1f7(0x448)]['wuid']+_0x15f1f7(0x5a8)),_0x1cb8ac?_0x4248dc:null;}catch(_0x5cb46a){return this['logger'][_0x15f1f7(0x3a7)](this[_0x15f1f7(0x2af)]+'\x20('+this['instance'][_0x15f1f7(0x219)]+_0x15f1f7(0x6ad)+(_0x5cb46a instanceof Error?_0x5cb46a['message']:JSON[_0x15f1f7(0x5e5)](_0x5cb46a,null,0x2))),_0x5cb46a;}}async['uazapiSendText'](_0x328d2f,_0x39ba92){const _0x41c40c=a0_0x3b8fac;let _0x231fe4=_0x328d2f['remoteJid'];_0x39ba92[_0x41c40c(0x77b)][_0x41c40c(0x6d5)]&&_0x39ba92['uazapi'][_0x41c40c(0x6d5)][_0x41c40c(0x73c)]()!==''&&(_0x231fe4=_0x39ba92['uazapi']['remoteJid'][_0x41c40c(0x73c)]()),this[_0x41c40c(0x738)][_0x41c40c(0x592)](this[_0x41c40c(0x2af)]+'\x20('+this[_0x41c40c(0x448)][_0x41c40c(0x219)]+_0x41c40c(0xdf));let _0x4b646a={'number':_0x231fe4,'options':{'delay':_0x39ba92[_0x41c40c(0x77b)][_0x41c40c(0x332)],'linkPreview':_0x39ba92['uazapi'][_0x41c40c(0x4fe)]},'textMessage':{'text':_0x39ba92[_0x41c40c(0x77b)][_0x41c40c(0x284)]}};try{let _0x223496=await this[_0x41c40c(0x663)](_0x4b646a);if(_0x223496){let _0x2e3de7={'_id':_0x223496[_0x41c40c(0x3fb)]['id'],'_fromMe':_0x223496['key']['fromMe'],'_remoteJid':_0x223496[_0x41c40c(0x3fb)][_0x41c40c(0x6d5)]},_0x1e3f4d=(0x0,w[_0x41c40c(0x18e)])(_0x223496['message']),_0x586492=(0x0,w[_0x41c40c(0x440)])(_0x1e3f4d);_0x328d2f['chatLog'][_0x41c40c(0x209)]=_0x39ba92['_id'][_0x41c40c(0x2eb)]();let {message_normalized:_0x25dabd}=this[_0x41c40c(0x722)](_0x1e3f4d,_0x586492,null);_0x328d2f[_0x41c40c(0x26c)][_0x41c40c(0x9e)]=await _0x25dabd;let _0x2f2571={'messageId':_0x223496[_0x41c40c(0x3fb)]['id']},_0x252682=_0x328d2f[_0x41c40c(0x26c)][_0x41c40c(0x19d)];Object[_0x41c40c(0x6da)](_0x252682,_0x2e3de7),_0x328d2f[_0x41c40c(0x26c)][_0x41c40c(0x19d)]=_0x252682,this[_0x41c40c(0x40b)](_0x328d2f,_0x39ba92,_0x2f2571);}else{let _0x25ec26={'error':!0x0};this[_0x41c40c(0x40b)](_0x328d2f,_0x39ba92,_0x25ec26),this['logger'][_0x41c40c(0x3a7)](this[_0x41c40c(0x2af)]+'\x20('+this[_0x41c40c(0x448)][_0x41c40c(0x219)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.');}}catch(_0x3c4432){let _0x38c8d1={'error':!0x0,'errorLog':_0x3c4432[_0x41c40c(0x2eb)]()};this[_0x41c40c(0x40b)](_0x328d2f,_0x39ba92,_0x38c8d1),this[_0x41c40c(0x738)][_0x41c40c(0x3a7)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x41c40c(0x538)+(_0x3c4432 instanceof Error?_0x3c4432[_0x41c40c(0x4ab)]:JSON[_0x41c40c(0x5e5)](_0x3c4432,null,0x2)));}}async['uazapiSendMedia'](_0x413352,_0x2cba23){const _0x571beb=a0_0x3b8fac;let _0x4a300f=_0x413352['remoteJid'];_0x2cba23['uazapi'][_0x571beb(0x6d5)]&&_0x2cba23[_0x571beb(0x77b)][_0x571beb(0x6d5)][_0x571beb(0x73c)]()!==''&&(_0x4a300f=_0x2cba23[_0x571beb(0x77b)]['remoteJid']['trim']()),this[_0x571beb(0x738)][_0x571beb(0x592)](this[_0x571beb(0x2af)]+'\x20('+this[_0x571beb(0x448)][_0x571beb(0x219)]+_0x571beb(0x1e2));let _0xf22614={'number':_0x4a300f,'options':{'delay':_0x2cba23[_0x571beb(0x77b)][_0x571beb(0x332)],'linkPreview':_0x2cba23['uazapi']['linkPreview']},'mediaMessage':{'mediatype':_0x2cba23[_0x571beb(0x77b)][_0x571beb(0x6e8)],'caption':_0x2cba23[_0x571beb(0x77b)][_0x571beb(0x31e)],'media':_0x2cba23[_0x571beb(0x77b)][_0x571beb(0x14f)],'fileName':_0x2cba23[_0x571beb(0x77b)][_0x571beb(0x35c)]}};try{let _0x29bbc7=await this[_0x571beb(0x2fe)](_0xf22614);if(_0x29bbc7){let _0x24a44e={'_id':_0x29bbc7[_0x571beb(0x3fb)]['id'],'_fromMe':_0x29bbc7[_0x571beb(0x3fb)][_0x571beb(0x123)],'_remoteJid':_0x29bbc7['key'][_0x571beb(0x6d5)]},_0x5c34ee=(0x0,w[_0x571beb(0x18e)])(_0x29bbc7[_0x571beb(0x4ab)]),_0x2505e8=(0x0,w[_0x571beb(0x440)])(_0x5c34ee);_0x413352[_0x571beb(0x26c)][_0x571beb(0x209)]=_0x2cba23[_0x571beb(0x4ff)]['toString']();let {message_normalized:_0x57e73f}=this['normalizeMessage'](_0x5c34ee,_0x2505e8,null);_0x413352[_0x571beb(0x26c)]['lastSendMessage']=await _0x57e73f;let _0x505354={'messageId':_0x29bbc7[_0x571beb(0x3fb)]['id']},_0x3c727b=_0x413352[_0x571beb(0x26c)][_0x571beb(0x19d)];Object['assign'](_0x3c727b,_0x24a44e),_0x413352[_0x571beb(0x26c)][_0x571beb(0x19d)]=_0x3c727b,this[_0x571beb(0x40b)](_0x413352,_0x2cba23,_0x505354);}else{let _0x4cb5e8={'error':!0x0};this[_0x571beb(0x40b)](_0x413352,_0x2cba23,_0x4cb5e8),this[_0x571beb(0x738)][_0x571beb(0x3a7)](this[_0x571beb(0x2af)]+'\x20('+this[_0x571beb(0x448)][_0x571beb(0x219)]+_0x571beb(0x1c1));}}catch(_0x5dcbcb){let _0x154774={'error':!0x0,'errorLog':_0x5dcbcb[_0x571beb(0x2eb)]()};this[_0x571beb(0x40b)](_0x413352,_0x2cba23,_0x154774),this[_0x571beb(0x738)][_0x571beb(0x3a7)](this['instanceName']+'\x20('+this['instance'][_0x571beb(0x219)]+_0x571beb(0x3b8)+(_0x5dcbcb instanceof Error?_0x5dcbcb[_0x571beb(0x4ab)]:JSON[_0x571beb(0x5e5)](_0x5dcbcb,null,0x2)));}}async[a0_0x3b8fac(0x543)](_0x575ec5,_0x37bb2b){const _0x1b1b56=a0_0x3b8fac;let _0x4b482b=_0x575ec5[_0x1b1b56(0x6d5)];_0x37bb2b[_0x1b1b56(0x77b)]['remoteJid']&&_0x37bb2b[_0x1b1b56(0x77b)][_0x1b1b56(0x6d5)][_0x1b1b56(0x73c)]()!==''&&(_0x4b482b=_0x37bb2b[_0x1b1b56(0x77b)][_0x1b1b56(0x6d5)]['trim']()),this[_0x1b1b56(0x738)]['verbose'](this[_0x1b1b56(0x2af)]+'\x20('+this['instance'][_0x1b1b56(0x219)]+'):\x20Enviando\x20localizao');let _0x237032={'number':_0x4b482b,'options':{'delay':_0x37bb2b[_0x1b1b56(0x77b)][_0x1b1b56(0x332)]},'locationMessage':{'name':_0x37bb2b[_0x1b1b56(0x77b)]['name'],'address':_0x37bb2b['uazapi'][_0x1b1b56(0x504)],'latitude':_0x37bb2b[_0x1b1b56(0x77b)]['latitude'],'longitude':_0x37bb2b[_0x1b1b56(0x77b)][_0x1b1b56(0xf3)]}};try{let _0x3dd40a=await this[_0x1b1b56(0x244)](_0x237032);if(_0x3dd40a){let _0x16f874={'_id':_0x3dd40a[_0x1b1b56(0x3fb)]['id'],'_fromMe':_0x3dd40a['key'][_0x1b1b56(0x123)],'_remoteJid':_0x3dd40a['key'][_0x1b1b56(0x6d5)]},_0x41e60e=(0x0,w[_0x1b1b56(0x18e)])(_0x3dd40a[_0x1b1b56(0x4ab)]),_0x385a41=(0x0,w['getContentType'])(_0x41e60e);_0x575ec5['chatLog'][_0x1b1b56(0x209)]=_0x37bb2b[_0x1b1b56(0x4ff)][_0x1b1b56(0x2eb)]();let {message_normalized:_0xcfeab8}=this[_0x1b1b56(0x722)](_0x41e60e,_0x385a41,null);_0x575ec5[_0x1b1b56(0x26c)]['lastSendMessage']=await _0xcfeab8;let _0x2fe4e0={'messageId':_0x3dd40a[_0x1b1b56(0x3fb)]['id']},_0x4da20f=_0x575ec5[_0x1b1b56(0x26c)][_0x1b1b56(0x19d)];Object[_0x1b1b56(0x6da)](_0x4da20f,_0x16f874),_0x575ec5[_0x1b1b56(0x26c)]['realVariables']=_0x4da20f,this[_0x1b1b56(0x40b)](_0x575ec5,_0x37bb2b,_0x2fe4e0);}else{let _0x5930a5={'error':!0x0};this[_0x1b1b56(0x40b)](_0x575ec5,_0x37bb2b,_0x5930a5),this[_0x1b1b56(0x738)][_0x1b1b56(0x3a7)](this[_0x1b1b56(0x2af)]+'\x20('+this[_0x1b1b56(0x448)][_0x1b1b56(0x219)]+_0x1b1b56(0x258));}}catch(_0x57a096){let _0x302b62={'error':!0x0,'errorLog':_0x57a096[_0x1b1b56(0x2eb)]()};this[_0x1b1b56(0x40b)](_0x575ec5,_0x37bb2b,_0x302b62),this[_0x1b1b56(0x738)][_0x1b1b56(0x3a7)](this['instanceName']+'\x20('+this[_0x1b1b56(0x448)][_0x1b1b56(0x219)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao:\x20'+(_0x57a096 instanceof Error?_0x57a096[_0x1b1b56(0x4ab)]:JSON[_0x1b1b56(0x5e5)](_0x57a096,null,0x2)));}}async[a0_0x3b8fac(0x431)](_0x191689,_0x1f3f7b){const _0x1e66c3=a0_0x3b8fac;let _0x424680=_0x191689['remoteJid'];_0x1f3f7b[_0x1e66c3(0x77b)][_0x1e66c3(0x6d5)]&&_0x1f3f7b[_0x1e66c3(0x77b)][_0x1e66c3(0x6d5)][_0x1e66c3(0x73c)]()!==''&&(_0x424680=_0x1f3f7b['uazapi'][_0x1e66c3(0x6d5)][_0x1e66c3(0x73c)]()),this[_0x1e66c3(0x738)]['verbose'](this[_0x1e66c3(0x2af)]+'\x20('+this['instance'][_0x1e66c3(0x219)]+_0x1e66c3(0x70a));let _0x410507={'number':_0x424680,'options':{'delay':_0x1f3f7b[_0x1e66c3(0x77b)][_0x1e66c3(0x332)]},'audioMessage':{'audio':_0x1f3f7b[_0x1e66c3(0x77b)][_0x1e66c3(0x3bc)]}};try{let _0x3bf32d=await this['audioWhatsapp'](_0x410507);if(_0x3bf32d){let _0x380a4d={'_id':_0x3bf32d[_0x1e66c3(0x3fb)]['id'],'_fromMe':_0x3bf32d['key'][_0x1e66c3(0x123)],'_remoteJid':_0x3bf32d[_0x1e66c3(0x3fb)]['remoteJid']},_0x1479ca=(0x0,w[_0x1e66c3(0x18e)])(_0x3bf32d[_0x1e66c3(0x4ab)]),_0x554161=(0x0,w[_0x1e66c3(0x440)])(_0x1479ca);_0x191689['chatLog'][_0x1e66c3(0x209)]=_0x1f3f7b[_0x1e66c3(0x4ff)][_0x1e66c3(0x2eb)]();let {message_normalized:_0x2ace3e}=this['normalizeMessage'](_0x1479ca,_0x554161,null);_0x191689[_0x1e66c3(0x26c)][_0x1e66c3(0x9e)]=await _0x2ace3e;let _0x5cb5d3={'messageId':_0x3bf32d[_0x1e66c3(0x3fb)]['id']},_0x1dbf68=_0x191689['chatLog']['realVariables'];Object[_0x1e66c3(0x6da)](_0x1dbf68,_0x380a4d),_0x191689[_0x1e66c3(0x26c)][_0x1e66c3(0x19d)]=_0x1dbf68,this[_0x1e66c3(0x40b)](_0x191689,_0x1f3f7b,_0x5cb5d3);}else{let _0x30c995={'error':!0x0};this[_0x1e66c3(0x40b)](_0x191689,_0x1f3f7b,_0x30c995),this['logger'][_0x1e66c3(0x3a7)](this['instanceName']+'\x20('+this[_0x1e66c3(0x448)][_0x1e66c3(0x219)]+_0x1e66c3(0x25c));}}catch(_0x4c2cb2){let _0x2594b2={'error':!0x0,'errorLog':_0x4c2cb2[_0x1e66c3(0x2eb)]()};this['updateConversation'](_0x191689,_0x1f3f7b,_0x2594b2),this[_0x1e66c3(0x738)][_0x1e66c3(0x3a7)](this[_0x1e66c3(0x2af)]+'\x20('+this['instance'][_0x1e66c3(0x219)]+_0x1e66c3(0x177)+(_0x4c2cb2 instanceof Error?_0x4c2cb2[_0x1e66c3(0x4ab)]:JSON[_0x1e66c3(0x5e5)](_0x4c2cb2,null,0x2)));}}async['uazapiSendContact'](_0x50de9c,_0x406ab9){const _0x427f6b=a0_0x3b8fac;let _0x5a9094=_0x50de9c[_0x427f6b(0x6d5)];_0x406ab9[_0x427f6b(0x77b)][_0x427f6b(0x6d5)]&&_0x406ab9['uazapi']['remoteJid'][_0x427f6b(0x73c)]()!==''&&(_0x5a9094=_0x406ab9[_0x427f6b(0x77b)][_0x427f6b(0x6d5)]['trim']()),this['logger'][_0x427f6b(0x592)](this[_0x427f6b(0x2af)]+'\x20('+this[_0x427f6b(0x448)][_0x427f6b(0x219)]+_0x427f6b(0x312));let _0x49bdaf={'number':_0x5a9094,'options':{'delay':_0x406ab9[_0x427f6b(0x77b)][_0x427f6b(0x332)]},'contactMessage':[{'fullName':_0x406ab9['uazapi'][_0x427f6b(0x22e)],'phoneNumber':_0x406ab9[_0x427f6b(0x77b)]['phoneNumber']}]};try{let _0x1049df=await this[_0x427f6b(0x4d3)](_0x49bdaf);if(_0x1049df){let _0x288a6e={'_id':_0x1049df[_0x427f6b(0x3fb)]['id'],'_fromMe':_0x1049df[_0x427f6b(0x3fb)]['fromMe'],'_remoteJid':_0x1049df[_0x427f6b(0x3fb)]['remoteJid']},_0x527ec9=(0x0,w[_0x427f6b(0x18e)])(_0x1049df[_0x427f6b(0x4ab)]),_0x3ec22a=(0x0,w[_0x427f6b(0x440)])(_0x527ec9);_0x50de9c[_0x427f6b(0x26c)][_0x427f6b(0x209)]=_0x406ab9[_0x427f6b(0x4ff)][_0x427f6b(0x2eb)]();let {message_normalized:_0x41969c}=this[_0x427f6b(0x722)](_0x527ec9,_0x3ec22a,null);_0x50de9c[_0x427f6b(0x26c)][_0x427f6b(0x9e)]=await _0x41969c;let _0x1abf29={'messageId':_0x1049df[_0x427f6b(0x3fb)]['id']},_0x5a7df0=_0x50de9c[_0x427f6b(0x26c)][_0x427f6b(0x19d)];Object['assign'](_0x5a7df0,_0x288a6e),_0x50de9c[_0x427f6b(0x26c)][_0x427f6b(0x19d)]=_0x5a7df0,this[_0x427f6b(0x40b)](_0x50de9c,_0x406ab9,_0x1abf29);}else{let _0x565a68={'error':!0x0};this[_0x427f6b(0x40b)](_0x50de9c,_0x406ab9,_0x565a68),this[_0x427f6b(0x738)]['error'](this[_0x427f6b(0x2af)]+'\x20('+this[_0x427f6b(0x448)][_0x427f6b(0x219)]+_0x427f6b(0xa2));}}catch(_0x3bd79e){let _0x1d6aa5={'error':!0x0,'errorLog':_0x3bd79e[_0x427f6b(0x2eb)]()};this['updateConversation'](_0x50de9c,_0x406ab9,_0x1d6aa5),this[_0x427f6b(0x738)][_0x427f6b(0x3a7)](this[_0x427f6b(0x2af)]+'\x20('+this[_0x427f6b(0x448)][_0x427f6b(0x219)]+_0x427f6b(0x425)+(_0x3bd79e instanceof Error?_0x3bd79e[_0x427f6b(0x4ab)]:JSON[_0x427f6b(0x5e5)](_0x3bd79e,null,0x2)));}}[a0_0x3b8fac(0x17c)](_0x61aadb,_0x552bec){const _0x23074a=a0_0x3b8fac;for(let _0x96c21c of _0x61aadb)_0x96c21c[_0x23074a(0x7b9)]&&(_0x96c21c[_0x23074a(0x7b9)]=this['replaceVariables'](_0x96c21c[_0x23074a(0x7b9)],_0x552bec)),_0x96c21c[_0x23074a(0x480)]&&(_0x96c21c[_0x23074a(0x480)]=this[_0x23074a(0x15c)](_0x96c21c[_0x23074a(0x480)],_0x552bec));}async[a0_0x3b8fac(0x1e6)](_0x15c283,_0x439898){const _0x1805f1=a0_0x3b8fac;let _0x23333c=_0x15c283[_0x1805f1(0x6d5)];_0x439898[_0x1805f1(0x77b)][_0x1805f1(0x6d5)]&&_0x439898[_0x1805f1(0x77b)][_0x1805f1(0x6d5)][_0x1805f1(0x73c)]()!==''&&(_0x23333c=_0x439898[_0x1805f1(0x77b)][_0x1805f1(0x6d5)][_0x1805f1(0x73c)]()),this[_0x1805f1(0x738)]['verbose'](this[_0x1805f1(0x2af)]+'\x20('+this[_0x1805f1(0x448)]['wuid']+_0x1805f1(0x424));let _0x3b371b=_0x15c283[_0x1805f1(0x2cd)][_0x1805f1(0x34f)](_0x5e2b34=>_0x5e2b34[_0x1805f1(0x6ca)]===_0x439898['_id'])[_0x1805f1(0x77f)]((_0xd13c6e,_0xb84980)=>_0xd13c6e[_0x1805f1(0x1b3)]-_0xb84980['order']);this[_0x1805f1(0x17c)](_0x3b371b,_0x15c283[_0x1805f1(0x26c)][_0x1805f1(0x19d)]);let _0x296290=_0x3b371b[_0x1805f1(0x23a)](_0x1da311=>_0x1da311['option']),_0x2af31f={'number':_0x23333c,'menuMessage':{'type':_0x439898[_0x1805f1(0x77b)][_0x1805f1(0x356)]||'poll','text':_0x439898['uazapi'][_0x1805f1(0x284)]||_0x439898[_0x1805f1(0x77b)][_0x1805f1(0x26b)],'footerText':_0x439898['uazapi'][_0x1805f1(0x383)],'buttonText':_0x439898['uazapi'][_0x1805f1(0x3cb)],'selectableCount':0x1,'choices':_0x296290},'options':{'delay':_0x439898[_0x1805f1(0x77b)][_0x1805f1(0x332)]}};try{let _0x2b368c=await this[_0x1805f1(0x574)](_0x2af31f);if(_0x2b368c){let _0x45c3e6={'_id':_0x2b368c[_0x1805f1(0x3fb)]['id'],'_fromMe':_0x2b368c[_0x1805f1(0x3fb)][_0x1805f1(0x123)],'_remoteJid':_0x2b368c[_0x1805f1(0x3fb)][_0x1805f1(0x6d5)]};_0x439898[_0x1805f1(0x77b)][_0x1805f1(0x4ca)]===!0x0&&(_0x15c283['status']=_0x1805f1(0x764),this[_0x1805f1(0x738)][_0x1805f1(0x592)](this[_0x1805f1(0x2af)]+'\x20('+this[_0x1805f1(0x448)][_0x1805f1(0x219)]+_0x1805f1(0x43b)+_0x15c283[_0x1805f1(0x233)])),this[_0x1805f1(0x738)][_0x1805f1(0x592)](this['instanceName']+'\x20('+this['instance'][_0x1805f1(0x219)]+_0x1805f1(0x2c6)+(_0x439898[_0x1805f1(0x77b)][_0x1805f1(0x26b)]||_0x439898['uazapi'][_0x1805f1(0x284)])),_0x15c283[_0x1805f1(0x3cf)]=_0x2b368c[_0x1805f1(0x3fb)]['id'],_0x15c283['waitingMenu_text']=_0x439898[_0x1805f1(0x77b)]['name']||_0x439898[_0x1805f1(0x77b)][_0x1805f1(0x284)],_0x15c283[_0x1805f1(0x66a)]=_0x3b371b,_0x439898['uazapi']['menuExpiredMessage']&&(_0x15c283[_0x1805f1(0x36f)]=_0x439898['uazapi'][_0x1805f1(0x2b0)]),this[_0x1805f1(0x738)][_0x1805f1(0x592)](this[_0x1805f1(0x2af)]+'\x20('+this[_0x1805f1(0x448)][_0x1805f1(0x219)]+'):\x20conversation.waitingMenu_name'+_0x15c283[_0x1805f1(0xe0)]);let _0x13f219=(0x0,w[_0x1805f1(0x18e)])(_0x2b368c[_0x1805f1(0x4ab)]),_0x127609=(0x0,w[_0x1805f1(0x440)])(_0x13f219);_0x15c283[_0x1805f1(0x26c)][_0x1805f1(0x209)]=_0x439898['_id'][_0x1805f1(0x2eb)]();let {message_normalized:_0x3a3500}=this[_0x1805f1(0x722)](_0x13f219,_0x127609,null);_0x15c283['chatLog'][_0x1805f1(0x9e)]=await _0x3a3500;let _0x5c8a1d={'messageId':_0x2b368c[_0x1805f1(0x3fb)]['id']},_0x5428ce=_0x15c283[_0x1805f1(0x26c)][_0x1805f1(0x19d)];Object[_0x1805f1(0x6da)](_0x5428ce,_0x45c3e6),_0x15c283[_0x1805f1(0x26c)]['realVariables']=_0x5428ce,this['updateConversation'](_0x15c283,_0x439898,_0x5c8a1d);}else{let _0x459601={'error':!0x0};this[_0x1805f1(0x40b)](_0x15c283,_0x439898,_0x459601),this[_0x1805f1(0x738)][_0x1805f1(0x3a7)](this[_0x1805f1(0x2af)]+'\x20('+this[_0x1805f1(0x448)][_0x1805f1(0x219)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.');}}catch(_0x15a45e){let _0x1d0fb7={'error':!0x0,'errorLog':_0x15a45e instanceof Error?_0x15a45e[_0x1805f1(0x4ab)]:JSON[_0x1805f1(0x5e5)](_0x15a45e,null,0x2)};this[_0x1805f1(0x40b)](_0x15c283,_0x439898,_0x1d0fb7),this[_0x1805f1(0x738)][_0x1805f1(0x3a7)](this[_0x1805f1(0x2af)]+'\x20('+this[_0x1805f1(0x448)][_0x1805f1(0x219)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20'+(_0x15a45e instanceof Error?_0x15a45e[_0x1805f1(0x4ab)]:JSON[_0x1805f1(0x5e5)](_0x15a45e,null,0x2)));}}async[a0_0x3b8fac(0x5a5)](_0x5859e8,_0x135bb3){const _0x2b5ffc=a0_0x3b8fac;this[_0x2b5ffc(0x738)][_0x2b5ffc(0x592)](this['instanceName']+'\x20('+this[_0x2b5ffc(0x448)][_0x2b5ffc(0x219)]+_0x2b5ffc(0x5aa));let _0xd2d6e4=_0x5859e8['chatLog'][_0x2b5ffc(0x721)][_0x2b5ffc(0x7a1)](_0x4ec530=>_0x4ec530[_0x2b5ffc(0x6ca)][_0x2b5ffc(0x2eb)]()===_0x135bb3[_0x2b5ffc(0x77b)][_0x2b5ffc(0x6ca)][_0x2b5ffc(0x2eb)]()),_0x38655d={'id':_0xd2d6e4[_0x2b5ffc(0x5ab)],'remoteJid':_0xd2d6e4['remoteJid'],'fromMe':_0xd2d6e4[_0x2b5ffc(0x123)]};try{let _0x1acf83=await this[_0x2b5ffc(0x16d)](_0x38655d);if(_0x1acf83){let _0x38c91f=(0x0,w[_0x2b5ffc(0x18e)])(_0x1acf83[_0x2b5ffc(0x4ab)]),_0x44d593=(0x0,w[_0x2b5ffc(0x440)])(_0x38c91f);_0x5859e8[_0x2b5ffc(0x26c)][_0x2b5ffc(0x209)]=_0x135bb3[_0x2b5ffc(0x4ff)][_0x2b5ffc(0x2eb)]();let {message_normalized:_0x4045f3}=this[_0x2b5ffc(0x722)](_0x38c91f,_0x44d593,null);_0x5859e8[_0x2b5ffc(0x26c)]['lastSendMessage']=await _0x4045f3;let _0x3ad816={};this[_0x2b5ffc(0x40b)](_0x5859e8,_0x135bb3,_0x3ad816);}else{let _0x3e02bd={'error':!0x0};this[_0x2b5ffc(0x40b)](_0x5859e8,_0x135bb3,_0x3e02bd),this[_0x2b5ffc(0x738)][_0x2b5ffc(0x3a7)](this[_0x2b5ffc(0x2af)]+'\x20('+this['instance'][_0x2b5ffc(0x219)]+_0x2b5ffc(0x257));}}catch(_0xbf26a0){let _0xd8bdcf={'error':!0x0,'errorLog':_0xbf26a0 instanceof Error?_0xbf26a0[_0x2b5ffc(0x4ab)]:JSON[_0x2b5ffc(0x5e5)](_0xbf26a0,null,0x2)};this[_0x2b5ffc(0x40b)](_0x5859e8,_0x135bb3,_0xd8bdcf),this[_0x2b5ffc(0x738)][_0x2b5ffc(0x3a7)](this[_0x2b5ffc(0x2af)]+'\x20('+this[_0x2b5ffc(0x448)][_0x2b5ffc(0x219)]+_0x2b5ffc(0x181)+(_0xbf26a0 instanceof Error?_0xbf26a0[_0x2b5ffc(0x4ab)]:JSON['stringify'](_0xbf26a0,null,0x2)));}}async[a0_0x3b8fac(0x51e)](_0x35be8a,_0x32b030){const _0x48053b=a0_0x3b8fac;if(_0x35be8a[_0x48053b(0x26b)]||(_0x35be8a[_0x48053b(0x26b)]=(0x0,X['v4'])()),_0x32b030!==Oi&&_0x35be8a?.['globalShow'])throw new m(_0x48053b(0x6e6));if(_0x48053b(0x4ff)in _0x35be8a&&_0x48053b(0x7a2)in _0x35be8a)return this['AddUserFlow'](_0x35be8a['owner'],_0x35be8a[_0x48053b(0x4ff)]);this['logger'][_0x48053b(0x592)](this[_0x48053b(0x2af)]+'\x20('+this[_0x48053b(0x448)][_0x48053b(0x219)]+'):\x20Criando\x20fluxo...');let _0x2a436e=this[_0x48053b(0x544)](_0x35be8a[_0x48053b(0x26b)]),_0x525cbf=new fe[(_0x48053b(0x39b))][(_0x48053b(0xf5))](),_0x5d3e88={'_id':_0x525cbf,'default':!0x0,'title':_0x48053b(0x47b),'x':0x0,'y':0x0},_0x5ecd9b={'_id':new fe[(_0x48053b(0x39b))][(_0x48053b(0xf5))](),'order':0x1,'groupId':_0x525cbf['toString'](),'type':_0x48053b(0x4ad)},_0x3aea85=this[_0x48053b(0x448)][_0x48053b(0x219)],_0x5db5b3={'_id':(0x0,X['v4'])(),'owner':_0x3aea85,'name':_0x2a436e,'whoCanEdit':[_0x3aea85],'whoCanUse':[_0x3aea85],'groups':[_0x5d3e88],'blocks':[_0x5ecd9b],..._0x35be8a};try{let _0x12f773=await this['repository'][_0x48053b(0x297)][_0x48053b(0x215)](_0x5db5b3);return await this['synchronizeAndMapFlows'](),_0x12f773;}catch(_0x528215){let _0x178674=_0x48053b(0x582),_0x4dcc97=_0x528215 instanceof Error?_0x528215['message']:typeof _0x528215==_0x48053b(0x4f6)?JSON['stringify'](_0x528215):_0x528215,_0x25cbff=_0x178674+':\x20'+_0x4dcc97;throw this[_0x48053b(0x738)][_0x48053b(0x3a7)](this[_0x48053b(0x2af)]+'\x20('+this[_0x48053b(0x448)][_0x48053b(0x219)]+_0x48053b(0x3a8)+_0x25cbff),new m(_0x25cbff);}}async['AddUserFlow'](_0x202c6b,_0x4069f3){const _0x509a86=a0_0x3b8fac;try{this['logger'][_0x509a86(0x592)](this[_0x509a86(0x2af)]+'\x20('+this[_0x509a86(0x448)][_0x509a86(0x219)]+'):\x20Criando\x20fluxo\x20compartilhado...');let _0x17c8c9=await this['repository'][_0x509a86(0x297)][_0x509a86(0x7ac)]({'where':{'_id':_0x4069f3,'owner':_0x202c6b}});if(!_0x17c8c9)throw new m('Nenhum\x20fluxo\x20correspondente\x20encontrado.');if(_0x17c8c9['shareFlow']===!0x1&&!_0x17c8c9['globalShow'])throw new m(_0x509a86(0xd3));let _0x200c7c=new Set(_0x17c8c9[_0x509a86(0x760)]??[]);_0x200c7c[_0x509a86(0x1a8)](this[_0x509a86(0x448)][_0x509a86(0x219)]);let _0x18ba19=await this[_0x509a86(0x610)][_0x509a86(0x297)][_0x509a86(0x7b6)](_0x4069f3,{..._0x17c8c9,'whoCanUse':Array[_0x509a86(0x2ab)](_0x200c7c)});return await this[_0x509a86(0x7c)](),_0x18ba19;}catch(_0x4a6c17){let _0x436777=_0x509a86(0x708),_0x47a702=_0x4a6c17 instanceof Error?_0x4a6c17['message']:typeof _0x4a6c17=='object'?JSON[_0x509a86(0x5e5)](_0x4a6c17):_0x4a6c17,_0x594834=_0x436777+':\x20'+_0x47a702;throw this[_0x509a86(0x738)]['error'](this[_0x509a86(0x2af)]+'\x20('+this[_0x509a86(0x448)][_0x509a86(0x219)]+_0x509a86(0x3a8)+_0x594834),new m(_0x594834);}}[a0_0x3b8fac(0x544)](_0x5317af){const _0x57a342=a0_0x3b8fac;let _0x348362=_0x5317af,_0x26989b=0x1;for(;this['AutomateSystem'][_0x57a342(0x4c5)]['some'](_0x2c6638=>_0x2c6638[_0x57a342(0x26b)]===_0x348362);)_0x26989b++,_0x348362=_0x5317af+'\x20('+_0x26989b+')';return _0x348362;}async[a0_0x3b8fac(0x227)](_0x41e68e){const _0x37a481=a0_0x3b8fac;try{if(this[_0x37a481(0x738)][_0x37a481(0x592)](this[_0x37a481(0x2af)]+'\x20('+this[_0x37a481(0x448)][_0x37a481(0x219)]+_0x37a481(0x4bf)+_0x41e68e[_0x37a481(0x4ff)]+_0x37a481(0x79d)+_0x41e68e['global']),!this[_0x37a481(0x351)][_0x37a481(0x4c5)]['find'](_0x4a3d20=>_0x4a3d20['_id']===_0x41e68e[_0x37a481(0x4ff)]))throw this[_0x37a481(0x738)][_0x37a481(0x592)](this[_0x37a481(0x2af)]+'\x20('+this[_0x37a481(0x448)]['wuid']+_0x37a481(0x295)+_0x41e68e['_id']+_0x37a481(0x423)),new m(_0x37a481(0xc2));let _0x4ca05e=await this['repository'][_0x37a481(0x297)]['findOne']({'where':{'_id':_0x41e68e[_0x37a481(0x4ff)]}});if(!_0x4ca05e)throw new m(_0x37a481(0x376));if(this[_0x37a481(0x448)]['wuid']===_0x4ca05e[_0x37a481(0x7a2)]){this[_0x37a481(0x738)][_0x37a481(0x592)](this[_0x37a481(0x2af)]+'\x20('+this[_0x37a481(0x448)][_0x37a481(0x219)]+_0x37a481(0x7d4)+_0x41e68e['_id']+_0x37a481(0x121));let _0xc5ad79=await this[_0x37a481(0x610)]['flow'][_0x37a481(0x793)]({'where':{'_id':_0x41e68e['_id']}});return await this[_0x37a481(0x7c)](),_0xc5ad79;}return this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x37a481(0x219)]+_0x37a481(0x191)+this[_0x37a481(0x448)][_0x37a481(0x219)]+'\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27'+_0x41e68e['_id']+_0x37a481(0x18d)),_0x4ca05e[_0x37a481(0x760)]=(_0x4ca05e[_0x37a481(0x760)]??[])[_0x37a481(0x34f)](_0xd4dbb3=>_0xd4dbb3!==this['instance'][_0x37a481(0x219)]),_0x4ca05e['whoCanEdit']=(_0x4ca05e['whoCanEdit']??[])[_0x37a481(0x34f)](_0x1cc3f6=>_0x1cc3f6!==this[_0x37a481(0x448)][_0x37a481(0x219)]),_0x4ca05e[_0x37a481(0x19b)][_0x37a481(0x3c8)]===0x0&&_0x4ca05e[_0x37a481(0x760)]['length']>0x0&&(_0x4ca05e[_0x37a481(0x19b)][_0x37a481(0x42a)](_0x4ca05e[_0x37a481(0x760)][0x0]),this['logger'][_0x37a481(0x592)](this[_0x37a481(0x2af)]+'\x20('+this[_0x37a481(0x448)][_0x37a481(0x219)]+_0x37a481(0x4c7)+_0x4ca05e[_0x37a481(0x760)][0x0]+_0x37a481(0x5dc)+_0x41e68e[_0x37a481(0x4ff)]+'\x27...')),await this['repository'][_0x37a481(0x297)][_0x37a481(0x7b6)](_0x4ca05e[_0x37a481(0x4ff)],_0x4ca05e),await this['synchronizeAndMapFlows'](),{'message':'Fluxo\x20\x27'+_0x41e68e[_0x37a481(0x26b)]+_0x37a481(0xa3)};}catch(_0xfdd66f){return this['logger']['error'](this[_0x37a481(0x2af)]+'\x20('+this[_0x37a481(0x448)][_0x37a481(0x219)]+_0x37a481(0x4f5)+(_0xfdd66f instanceof Error?_0xfdd66f[_0x37a481(0x4ab)]:JSON[_0x37a481(0x5e5)](_0xfdd66f,null,0x2))),{'message':_0x37a481(0x681)+(_0xfdd66f instanceof Error?_0xfdd66f['message']:JSON['stringify'](_0xfdd66f,null,0x2))};}}async[a0_0x3b8fac(0x1a1)](_0x3918ff){const _0x3718d6=a0_0x3b8fac;try{if(this[_0x3718d6(0x738)][_0x3718d6(0x685)](this[_0x3718d6(0x2af)]+'\x20('+this[_0x3718d6(0x448)][_0x3718d6(0x219)]+'):\x20Buscando\x20flow,\x20id:\x20'+_0x3918ff),!this[_0x3718d6(0x351)]&&(await this[_0x3718d6(0x407)](),!this[_0x3718d6(0x351)]))return null;let _0x23e404=await this[_0x3718d6(0x610)][_0x3718d6(0x297)][_0x3718d6(0x7ac)]({'where':{'_id':_0x3918ff}});if(!_0x23e404)throw new m('Fluxo\x20id\x20\x27'+_0x3918ff+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.');if(!(_0x23e404['globalShow']||_0x23e404[_0x3718d6(0x760)]?.[_0x3718d6(0x43a)](this['instance'][_0x3718d6(0x219)])))throw new m(_0x3718d6(0x208)+name+'\x27');_0x23e404[_0x3718d6(0x616)]&&!_0x23e404[_0x3718d6(0x760)]?.[_0x3718d6(0x43a)](this[_0x3718d6(0x448)][_0x3718d6(0x219)])&&(_0x23e404[_0x3718d6(0x760)]=[..._0x23e404[_0x3718d6(0x760)]??[],this[_0x3718d6(0x448)]['wuid']],await this[_0x3718d6(0x610)][_0x3718d6(0x297)][_0x3718d6(0x7b6)](_0x23e404[_0x3718d6(0x4ff)],_0x23e404),this[_0x3718d6(0x7c)]());let _0x183016=this[_0x3718d6(0x351)]?.[_0x3718d6(0x51b)][_0x3718d6(0x23a)](_0x335aa1=>_0x335aa1[_0x3718d6(0x26b)]),_0x52340c=['nome',_0x3718d6(0x34c),_0x3718d6(0x6b0),_0x3718d6(0x2ef),_0x3718d6(0x233),_0x3718d6(0x5a6),_0x3718d6(0x429),_0x3718d6(0x1df),_0x3718d6(0x1b0),_0x3718d6(0x61e),_0x3718d6(0x270)];_0x23e404[_0x3718d6(0x2dc)]=_0x23e404[_0x3718d6(0x2dc)][_0x3718d6(0x34f)](_0x3ec667=>!(_0x3ec667[_0x3718d6(0x2d5)]==='leadInfo'||_0x3ec667['leadInfo'])),_0x52340c[_0x3718d6(0x73e)](_0x5384fa=>{const _0xe77d97=_0x3718d6;_0x23e404[_0xe77d97(0x2dc)][_0xe77d97(0x42a)]({'folder':_0xe77d97(0x79e),'name':_0x5384fa,'value':'','doc':'','leadInfo':!0x0});}),_0x183016[_0x3718d6(0x73e)](_0x100b4b=>{const _0x2837b5=_0x3718d6;let _0x4093c9=_0x23e404[_0x2837b5(0x2dc)][_0x2837b5(0x77d)](_0x416e51=>_0x416e51['name']===_0x100b4b);_0x4093c9===-0x1?_0x23e404[_0x2837b5(0x2dc)][_0x2837b5(0x42a)]({'folder':_0x2837b5(0x79e),'name':_0x100b4b,'value':'','doc':'','leadInfo':!0x0}):(_0x23e404['variables'][_0x4093c9][_0x2837b5(0x2d5)]='leadInfo',_0x23e404[_0x2837b5(0x2dc)][_0x4093c9][_0x2837b5(0x79e)]=!0x0);}),_0x23e404[_0x3718d6(0x389)]&&_0x23e404[_0x3718d6(0x389)][_0x3718d6(0x3c8)]>0x0&&_0x23e404[_0x3718d6(0x389)][_0x3718d6(0x73e)](_0x2081a5=>{const _0x8ea891=_0x3718d6;_0x2081a5['groupId']&&_0x2081a5['next_groupId']&&_0x2081a5[_0x8ea891(0x249)]===_0x2081a5[_0x8ea891(0x698)]&&(_0x2081a5[_0x8ea891(0x698)]=null);});let _0xe130ad=await this[_0x3718d6(0x610)][_0x3718d6(0x297)]['updateOne'](_0x23e404[_0x3718d6(0x4ff)],_0x23e404);if(!_0xe130ad)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0xe130ad;}catch(_0x5b1308){let _0x238d3b=_0x3718d6(0x69b),_0x36b0d2=_0x5b1308 instanceof Error?_0x5b1308[_0x3718d6(0x4ab)]:typeof _0x5b1308==_0x3718d6(0x4f6)?JSON[_0x3718d6(0x5e5)](_0x5b1308):_0x5b1308,_0x385bbf=_0x238d3b+':\x20'+_0x36b0d2;throw this[_0x3718d6(0x738)]['error'](this[_0x3718d6(0x2af)]+'\x20('+this[_0x3718d6(0x448)]['wuid']+'):\x20'+_0x385bbf),new m(_0x385bbf);}}async['allFlows'](){const _0x420e48=a0_0x3b8fac;try{this[_0x420e48(0x738)][_0x420e48(0x592)](this[_0x420e48(0x2af)]+'\x20('+this[_0x420e48(0x448)]['wuid']+_0x420e48(0x554)),await this[_0x420e48(0x7c)]();let _0x1eb725=await this[_0x420e48(0x610)][_0x420e48(0x297)][_0x420e48(0x4e0)]({'where':{'globalShow':!0x0}});return[...this[_0x420e48(0x351)][_0x420e48(0x4c5)],..._0x1eb725];}catch(_0x1daada){return this[_0x420e48(0x738)][_0x420e48(0x3a7)](this[_0x420e48(0x2af)]+'\x20('+this[_0x420e48(0x448)][_0x420e48(0x219)]+_0x420e48(0x493)+(_0x1daada instanceof Error?_0x1daada[_0x420e48(0x4ab)]:JSON[_0x420e48(0x5e5)](_0x1daada,null,0x2))),{'message':_0x420e48(0x68a)+(_0x1daada instanceof Error?_0x1daada[_0x420e48(0x4ab)]:String(_0x1daada))};}}async[a0_0x3b8fac(0x7b4)](_0x5b7817,_0x75e3ad){const _0x371654=a0_0x3b8fac;try{this[_0x371654(0x738)][_0x371654(0x592)](this[_0x371654(0x2af)]+'\x20('+this[_0x371654(0x448)][_0x371654(0x219)]+'):\x20Alterando\x20fluxo...');let _0x3a8322=this['AutomateSystem'][_0x371654(0x4c5)][_0x371654(0x7a1)](_0x156ca8=>_0x156ca8['_id']===_0x5b7817[_0x371654(0x4ff)]);if(!_0x3a8322)throw this[_0x371654(0x738)][_0x371654(0x592)](this[_0x371654(0x2af)]+'\x20('+this['instance'][_0x371654(0x219)]+_0x371654(0x295)+_0x5b7817[_0x371654(0x4ff)]+_0x371654(0x423)),new m(_0x371654(0xc2));let _0x1437d9=await this[_0x371654(0x610)][_0x371654(0x297)][_0x371654(0x7ac)]({'where':{'_id':_0x5b7817[_0x371654(0x4ff)]}});if(!_0x1437d9||!_0x1437d9[_0x371654(0x760)]?.[_0x371654(0x43a)](this['instance'][_0x371654(0x219)]))throw this['logger'][_0x371654(0x3a7)](this[_0x371654(0x2af)]+'\x20('+this[_0x371654(0x448)]['wuid']+_0x371654(0x3b3)+_0x5b7817[_0x371654(0x4ff)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x371654(0x5c5)+_0x5b7817[_0x371654(0x4ff)]+_0x371654(0x1e5));let _0x3eb43f=this[_0x371654(0x351)][_0x371654(0x4c5)][_0x371654(0x77d)](_0x342558=>_0x342558[_0x371654(0x4ff)]===_0x3a8322[_0x371654(0x4ff)]);if(_0x3eb43f!==-0x1){let _0x108c2c=this['AutomateSystem'][_0x371654(0x4c5)][_0x3eb43f];if(_0x108c2c[_0x371654(0x26b)]=_0x5b7817[_0x371654(0x26b)]??_0x108c2c['name'],_0x108c2c[_0x371654(0x151)]=_0x5b7817[_0x371654(0x151)]??_0x108c2c[_0x371654(0x151)],_0x108c2c[_0x371654(0x1c8)]=_0x5b7817['testingWith']??_0x108c2c[_0x371654(0x1c8)],_0x108c2c[_0x371654(0x7cf)]=_0x5b7817[_0x371654(0x4fc)]??_0x108c2c[_0x371654(0x7cf)],_0x108c2c[_0x371654(0x373)]=_0x5b7817[_0x371654(0x373)]??_0x108c2c[_0x371654(0x373)],_0x108c2c[_0x371654(0x198)]=_0x5b7817['readMessages']??_0x108c2c[_0x371654(0x198)],_0x5b7817[_0x371654(0x151)]&&this[_0x371654(0x351)][_0x371654(0x4c5)][_0x371654(0x73e)]((_0x1289e1,_0x435d1e)=>{const _0x39a4d5=_0x371654;_0x435d1e!==_0x3eb43f&&(_0x1289e1[_0x39a4d5(0x151)]=!0x1);}),this['AutomateSystem']['flows'][_0x3eb43f]=_0x108c2c,!await this[_0x371654(0x610)][_0x371654(0x241)][_0x371654(0x1b6)]({'flows':this[_0x371654(0x351)][_0x371654(0x4c5)]},this[_0x371654(0x448)][_0x371654(0x219)]))throw new m(_0x371654(0x732));}let _0x17723e=[_0x371654(0x5d2),_0x371654(0x682),_0x371654(0x21f),_0x371654(0x432)];for(let _0x345cb8 of _0x17723e)delete _0x5b7817[_0x345cb8];if(_0x1437d9[_0x371654(0x19b)]?.[_0x371654(0x43a)](this[_0x371654(0x448)][_0x371654(0x219)])||(_0x5b7817={'_id':_0x5b7817[_0x371654(0x4ff)]}),_0x75e3ad!==Oi&&_0x5b7817?.[_0x371654(0x616)]&&!_0x1437d9?.[_0x371654(0x616)])throw new m(_0x371654(0x26a));let _0x440c7e=new Set(_0x5b7817[_0x371654(0x19b)]??_0x1437d9[_0x371654(0x19b)]);_0x440c7e[_0x371654(0x1a8)](_0x1437d9[_0x371654(0x7a2)]);let _0x37b008=new Set(_0x5b7817[_0x371654(0x760)]??_0x1437d9[_0x371654(0x760)]??[]);_0x440c7e[_0x371654(0x73e)](_0x304987=>_0x37b008['add'](_0x304987)),_0x37b008['add'](_0x1437d9[_0x371654(0x7a2)]),this['logger'][_0x371654(0x592)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x371654(0x614)+Array[_0x371654(0x2ab)](_0x440c7e)),this[_0x371654(0x738)][_0x371654(0x592)](this[_0x371654(0x2af)]+'\x20('+this[_0x371654(0x448)][_0x371654(0x219)]+_0x371654(0x677)+Array['from'](_0x37b008));let _0xe8d062=await this['getValidWhatsAppNumbers'](Array[_0x371654(0x2ab)](_0x37b008)),_0x51649b=Array[_0x371654(0x2ab)](_0x440c7e)[_0x371654(0x34f)](_0x4afec7=>_0xe8d062[_0x371654(0x43a)](_0x4afec7)),_0x543721=Array[_0x371654(0x2ab)](_0x37b008)[_0x371654(0x34f)](_0x588b68=>_0xe8d062[_0x371654(0x43a)](_0x588b68));this['logger'][_0x371654(0x592)](this[_0x371654(0x2af)]+'\x20('+this[_0x371654(0x448)]['wuid']+'):\x20whoCanEdit\x20after\x20validation:\x20'+_0x51649b),this[_0x371654(0x738)][_0x371654(0x592)](this[_0x371654(0x2af)]+'\x20('+this[_0x371654(0x448)]['wuid']+'):\x20whoCanUse\x20after\x20validation:\x20'+_0x543721);let _0x3b4f2a={..._0x1437d9,..._0x5b7817,'whoCanEdit':_0x51649b,'whoCanUse':_0x543721},_0x28b29d=await this['repository'][_0x371654(0x297)][_0x371654(0x7b6)](_0x1437d9[_0x371654(0x4ff)],_0x3b4f2a);return await this['synchronizeAndMapFlows'](),_0x28b29d;}catch(_0x2dabeb){let _0x12cec2=_0x371654(0x718),_0x14f2ce=_0x2dabeb instanceof Error?_0x2dabeb[_0x371654(0x4ab)]:typeof _0x2dabeb==_0x371654(0x4f6)?JSON[_0x371654(0x5e5)](_0x2dabeb):_0x2dabeb,_0x3bbb24=_0x12cec2+':\x20'+_0x14f2ce;throw this['logger'][_0x371654(0x3a7)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x371654(0x3a8)+_0x3bbb24),new m(_0x3bbb24);}}async[a0_0x3b8fac(0x76b)](_0x46bea){const _0xcd36c3=a0_0x3b8fac;let _0x3044d3={'numbers':_0x46bea};return(await this[_0xcd36c3(0x269)](_0x3044d3))['filter'](_0x46c880=>_0x46c880[_0xcd36c3(0x323)])['map'](_0x166e80=>_0x166e80['jid'])[_0xcd36c3(0x23a)](_0x3ea71b=>this[_0xcd36c3(0x680)](_0x3ea71b));}[a0_0x3b8fac(0x680)](_0xd95df3){let _0x5810a3=_0xd95df3['match'](/\d+/);return _0x5810a3?_0x5810a3[0x0]:'';}async[a0_0x3b8fac(0x5b0)](_0x17f0ae){const _0x195746=a0_0x3b8fac;try{if(this[_0x195746(0x738)][_0x195746(0x592)](this[_0x195746(0x2af)]+'\x20('+this[_0x195746(0x448)][_0x195746(0x219)]+_0x195746(0x691)),!this[_0x195746(0x351)][_0x195746(0x4c5)][_0x195746(0x7a1)](_0x2a8210=>_0x2a8210['_id']===_0x17f0ae[_0x195746(0x4ff)]))throw this[_0x195746(0x738)][_0x195746(0x592)](this[_0x195746(0x2af)]+'\x20('+this[_0x195746(0x448)][_0x195746(0x219)]+_0x195746(0x295)+_0x17f0ae[_0x195746(0x4ff)]+_0x195746(0x423)),new m(_0x195746(0xc2));let _0x55a5da=await this['repository']['flow']['findOne']({'where':{'_id':_0x17f0ae[_0x195746(0x4ff)]}});if(!_0x55a5da||!_0x55a5da[_0x195746(0x760)]?.[_0x195746(0x43a)](this['instance']['wuid']))throw this[_0x195746(0x738)][_0x195746(0x3a7)](this[_0x195746(0x2af)]+'\x20('+this[_0x195746(0x448)][_0x195746(0x219)]+_0x195746(0x3b3)+_0x17f0ae[_0x195746(0x4ff)]+_0x195746(0x1e5)),new m(_0x195746(0x5c5)+_0x17f0ae[_0x195746(0x4ff)]+_0x195746(0x1e5));if(!_0x55a5da['whoCanEdit']?.['includes'](this[_0x195746(0x448)][_0x195746(0x219)]))throw new m('Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.');let {block:_0x528a86}=_0x17f0ae;_0x528a86?.['copy']?this[_0x195746(0x779)](_0x55a5da,_0x17f0ae):_0x528a86?.[_0x195746(0x23f)]?this[_0x195746(0x1b8)](_0x55a5da,_0x17f0ae):_0x528a86[_0x195746(0x4ff)]?await this[_0x195746(0x283)](_0x55a5da,_0x17f0ae):this['addBlock'](_0x55a5da,_0x17f0ae);let _0x50d666=await this[_0x195746(0x610)]['flow'][_0x195746(0x7b6)](_0x55a5da['_id'],_0x55a5da);if(!_0x50d666)throw new Error(_0x195746(0x205));return _0x50d666;}catch(_0x14616f){this[_0x195746(0x2c4)](_0x195746(0x603)+_0x14616f[_0x195746(0x4ab)]);}}async[a0_0x3b8fac(0x779)](_0x3f9c27,_0x3ed930){const _0x53f00d=a0_0x3b8fac;let _0x544d91=_0x3ed930[_0x53f00d(0xe1)][_0x53f00d(0x4ff)],_0x58932c=_0x3f9c27['blocks'][_0x53f00d(0x7a1)](_0x370b24=>_0x370b24[_0x53f00d(0x4ff)]['toString']()===_0x544d91);if(!_0x58932c){this[_0x53f00d(0x738)][_0x53f00d(0x3a7)](this[_0x53f00d(0x2af)]+'\x20('+this['instance'][_0x53f00d(0x219)]+'):\x20Bloco\x20com\x20ID\x20'+_0x544d91+_0x53f00d(0x2c7));return;}this[_0x53f00d(0x738)][_0x53f00d(0x592)](this[_0x53f00d(0x2af)]+'\x20('+this[_0x53f00d(0x448)][_0x53f00d(0x219)]+_0x53f00d(0x33b)+JSON[_0x53f00d(0x5e5)](_0x58932c));let _0x2c7a2e=JSON['parse'](JSON['stringify'](_0x58932c));_0x2c7a2e[_0x53f00d(0x4ff)]=new fe[(_0x53f00d(0x151))][(_0x53f00d(0x39b))]['ObjectId'](),this[_0x53f00d(0x738)]['verbose'](this[_0x53f00d(0x2af)]+'\x20('+this[_0x53f00d(0x448)]['wuid']+_0x53f00d(0x165)+JSON[_0x53f00d(0x5e5)](_0x2c7a2e)),_0x3f9c27['blocks']['push'](_0x2c7a2e),this[_0x53f00d(0x2f9)](_0x3f9c27['blocks'],_0x2c7a2e['groupId']);}[a0_0x3b8fac(0x2c4)](_0x2df8aa){const _0x2a981e=a0_0x3b8fac;throw this[_0x2a981e(0x738)][_0x2a981e(0x3a7)](this[_0x2a981e(0x2af)]+'\x20('+this[_0x2a981e(0x448)]['wuid']+_0x2a981e(0x3a8)+_0x2df8aa),new m(_0x2df8aa);}[a0_0x3b8fac(0x1b8)](_0x49e39c,_0x5a76e4){const _0xdf6847=a0_0x3b8fac;let {block:_0x5c6a08}=_0x5a76e4;if(_0x5c6a08['type']==='start'){this[_0xdf6847(0x2c4)](_0xdf6847(0x375));return;}if(!_0x5c6a08[_0xdf6847(0x4ff)]){this['throwAndLogError'](_0xdf6847(0x142));return;}let _0x3fc41d=_0x49e39c['blocks'][_0xdf6847(0x7a1)](_0x3a6abd=>_0x3a6abd[_0xdf6847(0x4ff)][_0xdf6847(0x2eb)]()===_0x5a76e4[_0xdf6847(0xe1)][_0xdf6847(0x4ff)][_0xdf6847(0x2eb)]());if(!_0x3fc41d){this['throwAndLogError'](_0xdf6847(0x71f)+_0x5c6a08[_0xdf6847(0x4ff)]+_0xdf6847(0x45b));return;}_0x49e39c['blocks']=_0x49e39c[_0xdf6847(0x389)][_0xdf6847(0x34f)](_0x25dcd7=>_0x25dcd7[_0xdf6847(0x4ff)]['toString']()!==_0x5a76e4[_0xdf6847(0xe1)][_0xdf6847(0x4ff)][_0xdf6847(0x2eb)]()),_0x49e39c[_0xdf6847(0x5e6)]=_0x49e39c['conditions'][_0xdf6847(0x34f)](_0x10df0c=>_0x10df0c['blockId']!==_0x5c6a08[_0xdf6847(0x4ff)]['toString']()),_0x49e39c[_0xdf6847(0x226)]=_0x49e39c['varedits'][_0xdf6847(0x34f)](_0x14b97d=>_0x14b97d[_0xdf6847(0x6ca)]!==_0x5c6a08['_id'][_0xdf6847(0x2eb)]()),_0x49e39c['replyOptions']=_0x49e39c[_0xdf6847(0x2cd)][_0xdf6847(0x34f)](_0x3f198e=>_0x3f198e[_0xdf6847(0x6ca)]!==_0x5c6a08[_0xdf6847(0x4ff)][_0xdf6847(0x2eb)]()),this[_0xdf6847(0x2f9)](_0x49e39c['blocks'],_0x3fc41d[_0xdf6847(0x249)]);}async[a0_0x3b8fac(0x283)](_0x155b0d,_0x29cffc){const _0x125aaa=a0_0x3b8fac;let _0x1f2bbc=_0x155b0d[_0x125aaa(0x389)]['findIndex'](_0x55e9e7=>_0x55e9e7[_0x125aaa(0x4ff)][_0x125aaa(0x2eb)]()===_0x29cffc[_0x125aaa(0xe1)][_0x125aaa(0x4ff)]['toString']());if(this[_0x125aaa(0x738)][_0x125aaa(0x592)](this[_0x125aaa(0x2af)]+'\x20('+this[_0x125aaa(0x448)][_0x125aaa(0x219)]+_0x125aaa(0x416)+_0x1f2bbc),_0x1f2bbc===-0x1){this[_0x125aaa(0x738)]['verbose'](_0x125aaa(0x71f)+_0x29cffc[_0x125aaa(0xe1)]['_id']+_0x125aaa(0x524));return;}if(_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x1a2)]===_0x125aaa(0x4ad)){let _0x36c286=Object[_0x125aaa(0x63b)](_0x29cffc[_0x125aaa(0xe1)]);if(_0x36c286[_0x125aaa(0x3c8)]>0x2||_0x36c286[_0x125aaa(0x3c8)]===0x2&&!_0x36c286['includes']('next_groupId')){this[_0x125aaa(0x2c4)](_0x125aaa(0x125));return;}}let _0x3bee98=_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x249)];for(let _0x349125 in _0x29cffc[_0x125aaa(0xe1)])_0x29cffc[_0x125aaa(0xe1)][_0x125aaa(0x11b)](_0x349125)&&(_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x349125]=_0x29cffc[_0x125aaa(0xe1)][_0x349125]);if(this[_0x125aaa(0x738)][_0x125aaa(0x592)](this[_0x125aaa(0x2af)]+'\x20('+this[_0x125aaa(0x448)][_0x125aaa(0x219)]+_0x125aaa(0xec)+JSON[_0x125aaa(0x5e5)](_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc])),_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc]['apirequest']&&_0x125aaa(0x3cc)in _0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x683)]){this['logger']['verbose'](this[_0x125aaa(0x2af)]+'\x20('+this[_0x125aaa(0x448)]['wuid']+_0x125aaa(0x5d4));let _0x5118d3=JSON[_0x125aaa(0x5e5)](_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc]['apirequest'][_0x125aaa(0x3cc)],null,0x1);_0x5118d3[_0x125aaa(0x3c8)]>0x2&&(_0x5118d3=_0x5118d3[_0x125aaa(0x78b)](0x1,_0x5118d3[_0x125aaa(0x3c8)]-0x1)['trim']()),_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x683)][_0x125aaa(0xed)]=_0x5118d3;}if(_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x683)]&&'body'in _0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x683)]&&!(_0x125aaa(0x3aa)in _0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x683)])){this[_0x125aaa(0x738)][_0x125aaa(0x592)](this[_0x125aaa(0x2af)]+'\x20('+this[_0x125aaa(0x448)]['wuid']+_0x125aaa(0x632)),_0x155b0d['blocks'][_0x1f2bbc]['apirequest'][_0x125aaa(0x221)]=!0x1;let _0x408c97=JSON['stringify'](_0x155b0d['blocks'][_0x1f2bbc][_0x125aaa(0x683)][_0x125aaa(0x6fc)],null,0x2);_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc]['apirequest'][_0x125aaa(0x3aa)]=_0x408c97;}if(_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x683)]&&'bodyString'in _0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x683)]){_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc]['apirequest']['bodyStringErrorParse']=!0x1;let _0x4338a1=_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x683)][_0x125aaa(0x3aa)],_0x5a72cd=this[_0x125aaa(0x63d)](_0x4338a1);_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x683)][_0x125aaa(0x3aa)]=_0x5a72cd[_0x125aaa(0x678)],_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc]['apirequest'][_0x125aaa(0x221)]=_0x5a72cd[_0x125aaa(0x3a7)];}let _0x30fd1d=_0x155b0d[_0x125aaa(0x389)][_0x1f2bbc][_0x125aaa(0x249)];_0x3bee98!==_0x30fd1d?(this[_0x125aaa(0x2f9)](_0x155b0d[_0x125aaa(0x389)],_0x3bee98),this[_0x125aaa(0x2f9)](_0x155b0d['blocks'],_0x30fd1d)):this[_0x125aaa(0x2f9)](_0x155b0d[_0x125aaa(0x389)],_0x3bee98);}['beautifyWithPlaceholders'](_0x45dbe0){const _0x459b03=a0_0x3b8fac;let _0x36308c='\u205f',_0x3e9fa=!0x1,_0x5b5e2c='';for(let _0x441a93=0x0;_0x441a93<_0x45dbe0[_0x459b03(0x3c8)];_0x441a93++){let _0xf6529d=_0x45dbe0[_0x441a93];_0xf6529d==='\x22'&&(_0x441a93===0x0||_0x45dbe0[_0x441a93-0x1]!=='\x5c')&&(_0x3e9fa=!_0x3e9fa),!(!_0x3e9fa&&(_0xf6529d==='\x0a'||_0xf6529d==='\x20'||_0xf6529d===_0x36308c))&&(_0x5b5e2c+=_0xf6529d);}let _0x1f7462={},_0x4fae2c=9876543210.1234,_0x273a66=_0x5b5e2c[_0x459b03(0x1c6)](/\{\{([^}]+)\}\}/g,_0x5e12ca=>{let _0xc518b8=_0x5e12ca,_0x1b6605=''+_0x4fae2c;return _0x1f7462[_0x1b6605]=_0xc518b8,_0x4fae2c+=0.0001,_0x1b6605;}),_0x2737b6='',_0x4d5c51=!0x1;try{let _0x9f78d6=JSON[_0x459b03(0x224)](_0x273a66);_0x2737b6=JSON['stringify'](_0x9f78d6,null,0x2),_0x2737b6=_0x2737b6['replace'](/\n( +)/g,(_0x1660ee,_0x59143a)=>{const _0x2f6dff=_0x459b03;let _0x874a7a=_0x59143a[_0x2f6dff(0x3c8)];return'\x0a'+_0x36308c[_0x2f6dff(0x36a)](_0x874a7a*0x2);}),_0x2737b6=_0x2737b6[_0x459b03(0x1c6)](/(\d{10,}\.\d+)/g,_0x39899b=>_0x1f7462[_0x39899b]||_0x39899b);}catch(_0x23c40a){this[_0x459b03(0x738)][_0x459b03(0x3a7)](_0x459b03(0x289)+_0x23c40a),_0x2737b6=_0x45dbe0,_0x4d5c51=!0x0;}return{'result':_0x2737b6,'error':_0x4d5c51};}[a0_0x3b8fac(0x560)](_0x20c6b5,_0x3cc8e8){const _0x5c1ec9=a0_0x3b8fac;if(_0x3cc8e8[_0x5c1ec9(0xe1)][_0x5c1ec9(0x1a2)]===_0x5c1ec9(0x4ad)){this[_0x5c1ec9(0x2c4)](_0x5c1ec9(0x46e));return;}if(_0x3cc8e8[_0x5c1ec9(0xe1)][_0x5c1ec9(0x683)]&&_0x5c1ec9(0x3cc)in _0x3cc8e8[_0x5c1ec9(0xe1)][_0x5c1ec9(0x683)]){this[_0x5c1ec9(0x738)][_0x5c1ec9(0x592)](this[_0x5c1ec9(0x2af)]+'\x20('+this[_0x5c1ec9(0x448)][_0x5c1ec9(0x219)]+_0x5c1ec9(0x5d4));let _0x59daeb=JSON['stringify'](_0x3cc8e8[_0x5c1ec9(0xe1)][_0x5c1ec9(0x683)][_0x5c1ec9(0x3cc)],null,0x1);_0x59daeb[_0x5c1ec9(0x3c8)]>0x2&&(_0x59daeb=_0x59daeb[_0x5c1ec9(0x78b)](0x1,_0x59daeb[_0x5c1ec9(0x3c8)]-0x1)[_0x5c1ec9(0x73c)]()),_0x3cc8e8[_0x5c1ec9(0xe1)]['apirequest'][_0x5c1ec9(0xed)]=_0x59daeb;}_0x3cc8e8[_0x5c1ec9(0xe1)][_0x5c1ec9(0x683)]&&'body'in _0x3cc8e8[_0x5c1ec9(0xe1)]['apirequest']&&(this[_0x5c1ec9(0x738)][_0x5c1ec9(0x592)](this['instanceName']+'\x20('+this[_0x5c1ec9(0x448)][_0x5c1ec9(0x219)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x3cc8e8['block']['apirequest']['bodyString']=JSON[_0x5c1ec9(0x5e5)](_0x3cc8e8[_0x5c1ec9(0xe1)][_0x5c1ec9(0x683)][_0x5c1ec9(0x6fc)],null,0x1)[_0x5c1ec9(0x73c)]()),_0x20c6b5['blocks'][_0x5c1ec9(0x42a)](_0x3cc8e8['block']),this[_0x5c1ec9(0x2f9)](_0x20c6b5[_0x5c1ec9(0x389)],_0x3cc8e8[_0x5c1ec9(0xe1)][_0x5c1ec9(0x249)]);}[a0_0x3b8fac(0x2f9)](_0x152955,_0x1f133d){const _0x4053f9=a0_0x3b8fac;let _0x669afe=_0x152955['filter'](_0x2157ad=>_0x2157ad[_0x4053f9(0x249)]===_0x1f133d);_0x669afe[_0x4053f9(0x77f)]((_0x3010cd,_0x1df77e)=>_0x3010cd['order']-_0x1df77e['order']),_0x669afe[_0x4053f9(0x73e)]((_0x28d65c,_0x4b12a4)=>_0x28d65c[_0x4053f9(0x1b3)]=_0x4b12a4+0x1);}async[a0_0x3b8fac(0xae)](_0x1f433f){const _0x5ca832=a0_0x3b8fac;try{if(this[_0x5ca832(0x738)][_0x5ca832(0x592)](this[_0x5ca832(0x2af)]+'\x20('+this[_0x5ca832(0x448)]['wuid']+'):\x20Editando\x20replyOption...'),!_0x1f433f||!_0x1f433f[_0x5ca832(0x509)]){this['throwAndLogError'](_0x5ca832(0x49d));return;}if(!this[_0x5ca832(0x351)][_0x5ca832(0x4c5)][_0x5ca832(0x7a1)](_0x4f5979=>_0x4f5979['_id']===_0x1f433f[_0x5ca832(0x4ff)]))throw this[_0x5ca832(0x738)][_0x5ca832(0x592)](this['instanceName']+'\x20('+this[_0x5ca832(0x448)][_0x5ca832(0x219)]+_0x5ca832(0x295)+_0x1f433f[_0x5ca832(0x4ff)]+'\x27\x20no\x20encontrado'),new m('Fluxo\x20no\x20encontrado\x20na\x20memria.');let _0x51a366=await this[_0x5ca832(0x610)][_0x5ca832(0x297)][_0x5ca832(0x7ac)]({'where':{'_id':_0x1f433f[_0x5ca832(0x4ff)]}});if(!_0x51a366||!_0x51a366[_0x5ca832(0x760)]?.[_0x5ca832(0x43a)](this[_0x5ca832(0x448)][_0x5ca832(0x219)]))throw this[_0x5ca832(0x738)]['error'](this[_0x5ca832(0x2af)]+'\x20('+this[_0x5ca832(0x448)][_0x5ca832(0x219)]+'):\x20Flow\x20\x27'+_0x1f433f['_id']+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x1f433f[_0x5ca832(0x4ff)]+_0x5ca832(0x1e5));if(!_0x51a366[_0x5ca832(0x19b)]?.[_0x5ca832(0x43a)](this[_0x5ca832(0x448)][_0x5ca832(0x219)]))throw new m(_0x5ca832(0x526));let {replyOption:_0x50a9c5}=_0x1f433f;_0x50a9c5?.[_0x5ca832(0x23f)]?(this['deleteReplyOption'](_0x51a366,_0x1f433f),this[_0x5ca832(0xbf)](_0x51a366[_0x5ca832(0x2cd)],_0x1f433f[_0x5ca832(0x509)]['blockId'])):_0x50a9c5[_0x5ca832(0x4ff)]?(await this['updateReplyOption'](_0x51a366,_0x1f433f),this[_0x5ca832(0xbf)](_0x51a366[_0x5ca832(0x2cd)],_0x1f433f[_0x5ca832(0x509)]['blockId'])):(this[_0x5ca832(0x53e)](_0x51a366,_0x1f433f),this[_0x5ca832(0xbf)](_0x51a366[_0x5ca832(0x2cd)],_0x1f433f['replyOption'][_0x5ca832(0x6ca)]));let _0x48b1e4=await this['repository']['flow']['updateOne'](_0x51a366[_0x5ca832(0x4ff)],_0x51a366);if(!_0x48b1e4)throw new Error(_0x5ca832(0x205));return _0x48b1e4;}catch(_0x343862){this[_0x5ca832(0x2c4)](_0x5ca832(0x2e4)+_0x343862);}}['reorderReplyOptions'](_0x473b4d,_0x116214){const _0x5f20fb=a0_0x3b8fac;_0x473b4d['forEach'](_0x22163c=>{const _0x5a5875=a0_0x56c3;_0x22163c[_0x5a5875(0x6ca)]===_0x116214&&_0x22163c[_0x5a5875(0x1b3)]===void 0x0&&(_0x22163c[_0x5a5875(0x1b3)]=0x270f);});let _0x52638f=_0x473b4d[_0x5f20fb(0x34f)](_0x2d12db=>_0x2d12db[_0x5f20fb(0x6ca)]===_0x116214);_0x52638f['sort']((_0x392746,_0x41325e)=>_0x392746[_0x5f20fb(0x1b3)]-_0x41325e['order']),_0x52638f[_0x5f20fb(0x73e)]((_0x585d5d,_0x12861d)=>{const _0x47d446=_0x5f20fb;_0x585d5d[_0x47d446(0x1b3)]=_0x12861d+0x1;}),_0x473b4d[_0x5f20fb(0x73e)](_0x3979c5=>{const _0x426c3a=_0x5f20fb;if(_0x3979c5[_0x426c3a(0x6ca)]===_0x116214){let _0x46a588=_0x52638f['find'](_0x32959d=>_0x32959d['_id']&&_0x3979c5[_0x426c3a(0x4ff)]&&_0x32959d[_0x426c3a(0x4ff)][_0x426c3a(0x2eb)]()===_0x3979c5[_0x426c3a(0x4ff)]['toString']());_0x46a588&&(_0x3979c5[_0x426c3a(0x1b3)]=_0x46a588[_0x426c3a(0x1b3)]);}});}[a0_0x3b8fac(0x324)](_0x18e792,_0x2ecdb3){const _0x2e8869=a0_0x3b8fac;let {replyOption:_0x34e722}=_0x2ecdb3;if(!_0x34e722[_0x2e8869(0x4ff)]){this[_0x2e8869(0x2c4)](_0x2e8869(0x427));return;}if(!_0x18e792[_0x2e8869(0x2cd)][_0x2e8869(0x7a1)](_0x507ed5=>_0x507ed5[_0x2e8869(0x4ff)][_0x2e8869(0x2eb)]()===_0x2ecdb3['replyOption'][_0x2e8869(0x4ff)][_0x2e8869(0x2eb)]())){this[_0x2e8869(0x2c4)]('ReplyOption\x20com\x20ID\x20'+_0x34e722['_id']+_0x2e8869(0x45b));return;}_0x18e792['replyOptions']=_0x18e792[_0x2e8869(0x2cd)][_0x2e8869(0x34f)](_0x2d0831=>_0x2d0831[_0x2e8869(0x4ff)][_0x2e8869(0x2eb)]()!==_0x2ecdb3['replyOption'][_0x2e8869(0x4ff)][_0x2e8869(0x2eb)]());}async[a0_0x3b8fac(0x2f0)](_0x2cd6ad,_0x5db07e){const _0x1ca5c9=a0_0x3b8fac;let _0x2b96ae=_0x2cd6ad[_0x1ca5c9(0x2cd)][_0x1ca5c9(0x77d)](_0x55ff78=>_0x55ff78[_0x1ca5c9(0x4ff)][_0x1ca5c9(0x2eb)]()===_0x5db07e[_0x1ca5c9(0x509)][_0x1ca5c9(0x4ff)][_0x1ca5c9(0x2eb)]());if(_0x2b96ae===-0x1){this['throwAndLogError']('ReplyOption\x20com\x20ID\x20'+_0x5db07e[_0x1ca5c9(0x509)][_0x1ca5c9(0x4ff)]+_0x1ca5c9(0x524));return;}for(let _0x236c16 in _0x5db07e[_0x1ca5c9(0x509)])_0x5db07e[_0x1ca5c9(0x509)][_0x1ca5c9(0x11b)](_0x236c16)&&(_0x2cd6ad[_0x1ca5c9(0x2cd)][_0x2b96ae][_0x236c16]=_0x5db07e['replyOption'][_0x236c16]);}['addReplyOption'](_0x28d422,_0x60bcb9){const _0x1a92be=a0_0x3b8fac;_0x28d422[_0x1a92be(0x2cd)][_0x1a92be(0x42a)](_0x60bcb9[_0x1a92be(0x509)]);}async[a0_0x3b8fac(0x190)](_0x458981){const _0x3aeeca=a0_0x3b8fac;this[_0x3aeeca(0x738)][_0x3aeeca(0x592)](this[_0x3aeeca(0x2af)]+'\x20('+this[_0x3aeeca(0x448)][_0x3aeeca(0x219)]+_0x3aeeca(0x3f6)+JSON['stringify'](_0x458981,null,0x2));try{if(this[_0x3aeeca(0x738)][_0x3aeeca(0x592)](this[_0x3aeeca(0x2af)]+'\x20('+this[_0x3aeeca(0x448)]['wuid']+_0x3aeeca(0x706)),!this[_0x3aeeca(0x351)]['flows']['find'](_0xab1714=>_0xab1714[_0x3aeeca(0x4ff)]===_0x458981['_id']))throw this[_0x3aeeca(0x738)][_0x3aeeca(0x592)](this[_0x3aeeca(0x2af)]+'\x20('+this[_0x3aeeca(0x448)][_0x3aeeca(0x219)]+_0x3aeeca(0x295)+_0x458981[_0x3aeeca(0x4ff)]+'\x27\x20no\x20encontrado'),new m(_0x3aeeca(0xc2));let _0x58efb5=await this[_0x3aeeca(0x610)][_0x3aeeca(0x297)][_0x3aeeca(0x7ac)]({'where':{'_id':_0x458981[_0x3aeeca(0x4ff)]}});if(!_0x58efb5||!_0x58efb5[_0x3aeeca(0x760)]?.['includes'](this[_0x3aeeca(0x448)]['wuid']))throw this[_0x3aeeca(0x738)]['error'](this[_0x3aeeca(0x2af)]+'\x20('+this[_0x3aeeca(0x448)][_0x3aeeca(0x219)]+'):\x20Flow\x20\x27'+_0x458981[_0x3aeeca(0x4ff)]+_0x3aeeca(0x1e5)),new m('Flow\x20\x27'+_0x458981[_0x3aeeca(0x4ff)]+_0x3aeeca(0x1e5));if(!_0x58efb5[_0x3aeeca(0x19b)]?.[_0x3aeeca(0x43a)](this[_0x3aeeca(0x448)]['wuid']))throw new m('Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.');if(_0x458981[_0x3aeeca(0x14b)]&&_0x458981[_0x3aeeca(0x14b)]?.[_0x3aeeca(0x23f)]===!0x0){if(this[_0x3aeeca(0x738)][_0x3aeeca(0x592)](this[_0x3aeeca(0x2af)]+'\x20('+this[_0x3aeeca(0x448)]['wuid']+'):\x20delete\x20=\x20true'),_0x458981[_0x3aeeca(0x14b)][_0x3aeeca(0x151)]===!0x0)return{'message':_0x3aeeca(0x31d)};if(_0x58efb5[_0x3aeeca(0x389)]['some'](_0x356732=>_0x356732[_0x3aeeca(0x249)][_0x3aeeca(0x2eb)]()===_0x458981[_0x3aeeca(0x14b)]['_id']))return this[_0x3aeeca(0x738)][_0x3aeeca(0x592)](this[_0x3aeeca(0x2af)]+'\x20('+this['instance'][_0x3aeeca(0x219)]+_0x3aeeca(0x175)),{'message':_0x3aeeca(0x2c5)};_0x58efb5['groups']=_0x58efb5['groups'][_0x3aeeca(0x34f)](_0x301c95=>_0x301c95[_0x3aeeca(0x4ff)]['toString']()!==_0x458981[_0x3aeeca(0x14b)][_0x3aeeca(0x4ff)]);}else{if(_0x458981[_0x3aeeca(0x14b)]){if(_0x458981[_0x3aeeca(0x14b)][_0x3aeeca(0x151)]===!0x0)return{'message':_0x3aeeca(0x2a7)};if(_0x458981[_0x3aeeca(0x14b)][_0x3aeeca(0x4ff)]){let _0x1801b7=_0x58efb5[_0x3aeeca(0x353)][_0x3aeeca(0x7a1)](_0xb48c3=>_0xb48c3['_id'][_0x3aeeca(0x2eb)]()===_0x458981['group']['_id']);_0x1801b7&&(_0x458981[_0x3aeeca(0x14b)]['x']<0x0&&(_0x458981[_0x3aeeca(0x14b)]['x']=0x0),_0x458981[_0x3aeeca(0x14b)]['y']<0x0&&(_0x458981[_0x3aeeca(0x14b)]['y']=0x0),Object[_0x3aeeca(0x6da)](_0x1801b7,_0x458981[_0x3aeeca(0x14b)]));}else _0x58efb5[_0x3aeeca(0x353)][_0x3aeeca(0x42a)](_0x458981[_0x3aeeca(0x14b)]);}}let _0x690ed3=await this[_0x3aeeca(0x610)][_0x3aeeca(0x297)]['updateOne'](_0x58efb5[_0x3aeeca(0x4ff)],_0x58efb5);if(!_0x690ed3)throw new Error(_0x3aeeca(0x205));return _0x690ed3;}catch(_0x10286e){let _0x4e2767=_0x3aeeca(0x5c1),_0xdda6a7=_0x10286e instanceof Error?_0x10286e[_0x3aeeca(0x4ab)]:typeof _0x10286e=='object'?JSON[_0x3aeeca(0x5e5)](_0x10286e):_0x10286e,_0xebcde1=_0x4e2767+':\x20'+_0xdda6a7;throw this[_0x3aeeca(0x738)]['error'](this['instanceName']+'\x20('+this[_0x3aeeca(0x448)][_0x3aeeca(0x219)]+_0x3aeeca(0x3a8)+_0xebcde1),new m(_0xebcde1);}}async[a0_0x3b8fac(0x13a)](_0x172660){const _0x5366cc=a0_0x3b8fac;try{if(this[_0x5366cc(0x738)][_0x5366cc(0x592)](this[_0x5366cc(0x2af)]+'\x20('+this[_0x5366cc(0x448)][_0x5366cc(0x219)]+_0x5366cc(0x790)),!this[_0x5366cc(0x351)][_0x5366cc(0x4c5)][_0x5366cc(0x7a1)](_0x41a45f=>_0x41a45f['_id']===_0x172660[_0x5366cc(0x4ff)]))throw this[_0x5366cc(0x738)]['verbose'](this[_0x5366cc(0x2af)]+'\x20('+this['instance'][_0x5366cc(0x219)]+_0x5366cc(0x295)+_0x172660['_id']+_0x5366cc(0x423)),new m(_0x5366cc(0xc2));let _0xbc3a5d=await this['repository'][_0x5366cc(0x297)][_0x5366cc(0x7ac)]({'where':{'_id':_0x172660[_0x5366cc(0x4ff)]}});if(!_0xbc3a5d||!_0xbc3a5d[_0x5366cc(0x760)]?.[_0x5366cc(0x43a)](this[_0x5366cc(0x448)]['wuid']))throw this[_0x5366cc(0x738)]['error'](this[_0x5366cc(0x2af)]+'\x20('+this[_0x5366cc(0x448)][_0x5366cc(0x219)]+_0x5366cc(0x3b3)+_0x172660['_id']+_0x5366cc(0x1e5)),new m(_0x5366cc(0x5c5)+_0x172660[_0x5366cc(0x4ff)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');if(!_0xbc3a5d[_0x5366cc(0x19b)]?.[_0x5366cc(0x43a)](this[_0x5366cc(0x448)][_0x5366cc(0x219)]))throw new m(_0x5366cc(0x526));let _0x3852f1=!0x1;if(_0x172660[_0x5366cc(0x7d0)]?.['delete']===!0x0)_0xbc3a5d[_0x5366cc(0x5e6)]=_0xbc3a5d[_0x5366cc(0x5e6)][_0x5366cc(0x34f)](_0x59a7a2=>_0x59a7a2&&_0x172660[_0x5366cc(0x7d0)]&&_0x59a7a2[_0x5366cc(0x4ff)]&&_0x172660['condition'][_0x5366cc(0x4ff)]&&_0x59a7a2[_0x5366cc(0x4ff)][_0x5366cc(0x2eb)]()!==_0x172660['condition'][_0x5366cc(0x4ff)][_0x5366cc(0x2eb)]()),_0x3852f1=!0x0;else{let _0x6ac2e5=_0xbc3a5d[_0x5366cc(0x5e6)]['find'](_0x3496df=>_0x3496df&&_0x172660['condition']&&_0x3496df[_0x5366cc(0x4ff)]&&_0x172660['condition'][_0x5366cc(0x4ff)]&&_0x3496df[_0x5366cc(0x4ff)][_0x5366cc(0x2eb)]()===_0x172660['condition'][_0x5366cc(0x4ff)][_0x5366cc(0x2eb)]());_0x6ac2e5?(_0x3852f1=_0x6ac2e5[_0x5366cc(0x1b3)]!==_0x172660[_0x5366cc(0x7d0)][_0x5366cc(0x1b3)],Object[_0x5366cc(0x6da)](_0x6ac2e5,_0x172660[_0x5366cc(0x7d0)])):(_0xbc3a5d['conditions'][_0x5366cc(0x42a)](_0x172660[_0x5366cc(0x7d0)]),_0x3852f1=!0x0);}if(_0x3852f1){_0xbc3a5d[_0x5366cc(0x5e6)]['sort']((_0x2414cf,_0x2a55de)=>_0x2414cf[_0x5366cc(0x1b3)]>_0x2a55de['order']?0x1:_0x2a55de[_0x5366cc(0x1b3)]>_0x2414cf[_0x5366cc(0x1b3)]?-0x1:0x0);for(let _0xff5f04=0x0;_0xff5f04<_0xbc3a5d[_0x5366cc(0x5e6)][_0x5366cc(0x3c8)];_0xff5f04++)_0xbc3a5d[_0x5366cc(0x5e6)][_0xff5f04][_0x5366cc(0x1b3)]=_0xff5f04+0x1;_0xbc3a5d[_0x5366cc(0x5e6)][_0x5366cc(0x3c8)]>0x0&&(_0xbc3a5d[_0x5366cc(0x5e6)][0x0]['OrAnd']=_0x5366cc(0x211));}let _0x224a3c=await this['repository'][_0x5366cc(0x297)]['updateOne'](_0xbc3a5d['_id'],_0xbc3a5d);if(!_0x224a3c)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x224a3c;}catch(_0x4988cd){let _0x4cf623=_0x5366cc(0x11a),_0x463638=_0x4988cd instanceof Error?_0x4988cd[_0x5366cc(0x4ab)]:typeof _0x4988cd=='object'?JSON['stringify'](_0x4988cd):_0x4988cd,_0x2f0d68=_0x4cf623+':\x20'+_0x463638;throw this[_0x5366cc(0x738)]['error'](this[_0x5366cc(0x2af)]+'\x20('+this['instance']['wuid']+_0x5366cc(0x3a8)+_0x2f0d68),new m(_0x2f0d68);}}async[a0_0x3b8fac(0x187)](_0x3b53f5){const _0x4ecffc=a0_0x3b8fac;try{if(this[_0x4ecffc(0x738)][_0x4ecffc(0x592)](this[_0x4ecffc(0x2af)]+'\x20('+this[_0x4ecffc(0x448)]['wuid']+'):\x20Editando\x20edio\x20do\x20fluxo...'),!this['AutomateSystem']['flows']['find'](_0x246bb6=>_0x246bb6['_id']===_0x3b53f5[_0x4ecffc(0x4ff)]))throw this['logger'][_0x4ecffc(0x592)](this[_0x4ecffc(0x2af)]+'\x20('+this['instance'][_0x4ecffc(0x219)]+'):\x20Fluxo\x20\x27'+_0x3b53f5[_0x4ecffc(0x4ff)]+_0x4ecffc(0x423)),new m(_0x4ecffc(0xc2));let _0x1aeb79=await this[_0x4ecffc(0x610)][_0x4ecffc(0x297)][_0x4ecffc(0x7ac)]({'where':{'_id':_0x3b53f5[_0x4ecffc(0x4ff)]}});if(!_0x1aeb79||!_0x1aeb79[_0x4ecffc(0x760)]?.['includes'](this[_0x4ecffc(0x448)][_0x4ecffc(0x219)]))throw this[_0x4ecffc(0x738)][_0x4ecffc(0x3a7)](this['instanceName']+'\x20('+this[_0x4ecffc(0x448)][_0x4ecffc(0x219)]+_0x4ecffc(0x3b3)+_0x3b53f5[_0x4ecffc(0x4ff)]+_0x4ecffc(0x1e5)),new m('Flow\x20\x27'+_0x3b53f5[_0x4ecffc(0x4ff)]+_0x4ecffc(0x1e5));if(!_0x1aeb79[_0x4ecffc(0x19b)]?.[_0x4ecffc(0x43a)](this[_0x4ecffc(0x448)]['wuid']))throw new m(_0x4ecffc(0x526));let _0x21d282=!0x1;if(_0x3b53f5['varedit']?.[_0x4ecffc(0x23f)]===!0x0)_0x1aeb79[_0x4ecffc(0x226)]=_0x1aeb79[_0x4ecffc(0x226)][_0x4ecffc(0x34f)](_0x1e12b9=>_0x1e12b9&&_0x3b53f5['varedit']&&_0x1e12b9['_id']&&_0x3b53f5[_0x4ecffc(0x19f)][_0x4ecffc(0x4ff)]&&_0x1e12b9[_0x4ecffc(0x4ff)][_0x4ecffc(0x2eb)]()!==_0x3b53f5[_0x4ecffc(0x19f)][_0x4ecffc(0x4ff)][_0x4ecffc(0x2eb)]()),_0x21d282=!0x0;else{let _0x3990c5=_0x1aeb79['varedits'][_0x4ecffc(0x7a1)](_0x1eaf9e=>_0x1eaf9e&&_0x3b53f5['varedit']&&_0x1eaf9e[_0x4ecffc(0x4ff)]&&_0x3b53f5[_0x4ecffc(0x19f)][_0x4ecffc(0x4ff)]&&_0x1eaf9e[_0x4ecffc(0x4ff)][_0x4ecffc(0x2eb)]()===_0x3b53f5[_0x4ecffc(0x19f)][_0x4ecffc(0x4ff)][_0x4ecffc(0x2eb)]());_0x3990c5?(_0x21d282=_0x3990c5[_0x4ecffc(0x1b3)]!==_0x3b53f5[_0x4ecffc(0x19f)][_0x4ecffc(0x1b3)],Object[_0x4ecffc(0x6da)](_0x3990c5,_0x3b53f5[_0x4ecffc(0x19f)])):(_0x1aeb79['varedits'][_0x4ecffc(0x42a)](_0x3b53f5['varedit']),_0x21d282=!0x0);}if(_0x21d282){_0x1aeb79[_0x4ecffc(0x226)]['sort']((_0x4ef355,_0x4a126f)=>_0x4ef355[_0x4ecffc(0x1b3)]>_0x4a126f[_0x4ecffc(0x1b3)]?0x1:_0x4a126f[_0x4ecffc(0x1b3)]>_0x4ef355[_0x4ecffc(0x1b3)]?-0x1:0x0);for(let _0x35bec7=0x0;_0x35bec7<_0x1aeb79[_0x4ecffc(0x226)][_0x4ecffc(0x3c8)];_0x35bec7++)_0x1aeb79[_0x4ecffc(0x226)][_0x35bec7][_0x4ecffc(0x1b3)]=_0x35bec7+0x1;}let _0x1c7058=await this[_0x4ecffc(0x610)][_0x4ecffc(0x297)][_0x4ecffc(0x7b6)](_0x1aeb79['_id'],_0x1aeb79);if(!_0x1c7058)throw new Error(_0x4ecffc(0x205));return _0x1c7058;}catch(_0x200d07){let _0x19a1b0=_0x4ecffc(0x11a),_0x3f08cb=_0x200d07 instanceof Error?_0x200d07[_0x4ecffc(0x4ab)]:typeof _0x200d07==_0x4ecffc(0x4f6)?JSON[_0x4ecffc(0x5e5)](_0x200d07):_0x200d07,_0x4ebde9=_0x19a1b0+':\x20'+_0x3f08cb;throw this['logger'][_0x4ecffc(0x3a7)](this[_0x4ecffc(0x2af)]+'\x20('+this[_0x4ecffc(0x448)][_0x4ecffc(0x219)]+'):\x20'+_0x4ebde9),new m(_0x4ebde9);}}async['editFlowVariable'](_0x5c026b){const _0x519995=a0_0x3b8fac;try{if(this[_0x519995(0x738)][_0x519995(0x592)](this[_0x519995(0x2af)]+'\x20('+this[_0x519995(0x448)][_0x519995(0x219)]+_0x519995(0x3cd)),!this['AutomateSystem'][_0x519995(0x4c5)]['find'](_0x1f2cb8=>_0x1f2cb8[_0x519995(0x4ff)]===_0x5c026b[_0x519995(0x4ff)]))throw this[_0x519995(0x738)][_0x519995(0x592)](this['instanceName']+'\x20('+this[_0x519995(0x448)][_0x519995(0x219)]+'):\x20Fluxo\x20\x27'+_0x5c026b['_id']+_0x519995(0x423)),new m(_0x519995(0xc2));let _0x1462b2=await this[_0x519995(0x610)][_0x519995(0x297)][_0x519995(0x7ac)]({'where':{'_id':_0x5c026b['_id']}});if(!_0x1462b2||!_0x1462b2['whoCanUse']?.['includes'](this[_0x519995(0x448)]['wuid']))throw this['logger'][_0x519995(0x3a7)](this[_0x519995(0x2af)]+'\x20('+this[_0x519995(0x448)]['wuid']+_0x519995(0x3b3)+_0x5c026b[_0x519995(0x4ff)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x519995(0x5c5)+_0x5c026b['_id']+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');if(!_0x1462b2[_0x519995(0x19b)]?.['includes'](this[_0x519995(0x448)][_0x519995(0x219)]))throw new m(_0x519995(0x526));_0x5c026b[_0x519995(0x3b6)][_0x519995(0x26b)]=_0x5c026b[_0x519995(0x3b6)][_0x519995(0x26b)][_0x519995(0x73c)](),_0x5c026b[_0x519995(0x3b6)][_0x519995(0x26b)][_0x519995(0x3ce)]('_')&&(_0x5c026b[_0x519995(0x3b6)]['name']=_0x5c026b[_0x519995(0x3b6)][_0x519995(0x26b)][_0x519995(0x78b)](0x1)),_0x5c026b[_0x519995(0x3b6)][_0x519995(0x26b)]=_0x5c026b[_0x519995(0x3b6)][_0x519995(0x26b)]['trim']();let _0x113bbd=_0x1462b2[_0x519995(0x2dc)][_0x519995(0x7a1)](_0x5a6dc1=>_0x5a6dc1['name']===_0x5c026b['variable'][_0x519995(0x26b)]);if(_0x113bbd?.[_0x519995(0x79e)]===!0x0)throw new Error('No\x20\x20permitido\x20editar\x20uma\x20varivel\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0x5c026b[_0x519995(0x3b6)]?.[_0x519995(0x23f)]===!0x0){if(!_0x113bbd)return{'message':_0x519995(0x44a)};_0x1462b2[_0x519995(0x2dc)]=_0x1462b2[_0x519995(0x2dc)][_0x519995(0x34f)](_0x12512f=>_0x12512f[_0x519995(0x26b)]!==_0x5c026b[_0x519995(0x3b6)][_0x519995(0x26b)]);}else _0x113bbd?Object[_0x519995(0x6da)](_0x113bbd,_0x5c026b[_0x519995(0x3b6)]):_0x1462b2[_0x519995(0x2dc)][_0x519995(0x42a)](_0x5c026b['variable']);let _0x1cf30d=await this[_0x519995(0x610)][_0x519995(0x297)]['updateOne'](_0x1462b2[_0x519995(0x4ff)],_0x1462b2);if(!_0x1cf30d)throw new Error(_0x519995(0x205));return _0x1cf30d;}catch(_0x45e2d7){let _0x29d210='Erro\x20ao\x20editar\x20varivel\x20do\x20fluxo',_0x400179=_0x45e2d7 instanceof Error?_0x45e2d7['message']:typeof _0x45e2d7==_0x519995(0x4f6)?JSON['stringify'](_0x45e2d7):_0x45e2d7,_0x3ac7da=_0x29d210+':\x20'+_0x400179;throw this['logger'][_0x519995(0x3a7)](this[_0x519995(0x2af)]+'\x20('+this[_0x519995(0x448)][_0x519995(0x219)]+_0x519995(0x3a8)+_0x3ac7da),new m(_0x3ac7da);}}async[a0_0x3b8fac(0x73a)](_0x219aa9){const _0x33d1e6=a0_0x3b8fac;let _0x360f22=null;try{if(!this[_0x33d1e6(0x351)]?.[_0x33d1e6(0x2a4)][_0x33d1e6(0x1d1)])throw new m(_0x33d1e6(0x6ef));this[_0x33d1e6(0x738)][_0x33d1e6(0x592)](this['instanceName']+'\x20('+this[_0x33d1e6(0x448)][_0x33d1e6(0x219)]+_0x33d1e6(0x5ce));let _0x3473d3=(await this[_0x33d1e6(0x269)]({'numbers':[_0x219aa9[_0x33d1e6(0x6d5)]]}))[0x0];if(!_0x3473d3[_0x33d1e6(0x323)]&&!(0x0,w[_0x33d1e6(0x2d0)])(_0x3473d3[_0x33d1e6(0x6ea)])&&!_0x3473d3[_0x33d1e6(0x6ea)]['includes'](_0x33d1e6(0x79c)))throw _0x360f22=JSON[_0x33d1e6(0x5e5)](_0x3473d3,null,0x2),new m(_0x3473d3);let _0xe549a0;if(_0x219aa9[_0x33d1e6(0x26b)][_0x33d1e6(0x3c8)]===0x24&&/^[0-9a-fA-F-]{36}$/['test'](_0x219aa9['name'])?_0xe549a0=this[_0x33d1e6(0x351)][_0x33d1e6(0x4c5)][_0x33d1e6(0x7a1)](_0x2a30e3=>_0x2a30e3[_0x33d1e6(0x4ff)]===_0x219aa9['name']):_0xe549a0=this['AutomateSystem'][_0x33d1e6(0x4c5)][_0x33d1e6(0x7a1)](_0x13f5f9=>_0x13f5f9[_0x33d1e6(0x26b)]===_0x219aa9[_0x33d1e6(0x26b)]),!_0xe549a0)throw this[_0x33d1e6(0x738)][_0x33d1e6(0x592)](this[_0x33d1e6(0x2af)]+'\x20('+this['instance'][_0x33d1e6(0x219)]+'):\x20Fluxo\x20\x27'+_0x219aa9['name']+_0x33d1e6(0x423)),new m(_0x33d1e6(0xc2));let _0x55c40d=await this[_0x33d1e6(0x610)]['flow']['findOne']({'where':{'_id':_0xe549a0[_0x33d1e6(0x4ff)]}});if(!_0x55c40d||!_0x55c40d[_0x33d1e6(0x760)]?.[_0x33d1e6(0x43a)](this['instance'][_0x33d1e6(0x219)]))throw this[_0x33d1e6(0x738)][_0x33d1e6(0x3a7)](this[_0x33d1e6(0x2af)]+'\x20('+this[_0x33d1e6(0x448)][_0x33d1e6(0x219)]+'):\x20Flow\x20\x27'+_0xe549a0[_0x33d1e6(0x4ff)]+_0x33d1e6(0x1e5)),_0x360f22=_0x33d1e6(0x5c5)+_0xe549a0['_id']+_0x33d1e6(0x1e5),new m(_0x360f22);let _0x5dbb15=await this[_0x33d1e6(0x1b7)](_0x55c40d,_0x3473d3['jid'],_0x219aa9[_0x33d1e6(0x3d2)]);if(_0x5dbb15){this[_0x33d1e6(0x738)][_0x33d1e6(0x592)](this[_0x33d1e6(0x2af)]+'\x20('+this[_0x33d1e6(0x448)][_0x33d1e6(0x219)]+_0x33d1e6(0x42f));let _0x49b700=await this[_0x33d1e6(0x1ea)](_0x5dbb15);return _0x49b700&&await this[_0x33d1e6(0x4a0)](_0x5dbb15,_0x49b700),{'message':_0x33d1e6(0x724)+_0x219aa9[_0x33d1e6(0x6d5)]};}}catch(_0x35315f){if(this['logger'][_0x33d1e6(0x3a7)](this['instanceName']+'\x20('+this[_0x33d1e6(0x448)][_0x33d1e6(0x219)]+_0x33d1e6(0x3fa)+(_0x35315f instanceof Error?_0x35315f[_0x33d1e6(0x4ab)]:JSON[_0x33d1e6(0x5e5)](_0x35315f,null,0x2))),_0x360f22=_0x35315f instanceof Error?_0x35315f[_0x33d1e6(0x4ab)]:JSON[_0x33d1e6(0x5e5)](_0x35315f,null,0x2),_0x360f22)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x360f22);}}async[a0_0x3b8fac(0x53a)](_0x2e5072,_0x2f97e9,_0x562136){const _0x43242c=a0_0x3b8fac;let _0x1adc26=null;try{if(!this[_0x43242c(0x351)]?.['flowConfig'][_0x43242c(0x1d1)])throw new m(_0x43242c(0x6ef));if(this[_0x43242c(0x738)][_0x43242c(0x592)](this[_0x43242c(0x2af)]+'\x20('+this['instance'][_0x43242c(0x219)]+_0x43242c(0x5ce)),_0x2f97e9){let _0x8f454b=(await this[_0x43242c(0x269)]({'numbers':[_0x2f97e9]}))[0x0];if(!_0x8f454b[_0x43242c(0x323)]&&!(0x0,w['isJidGroup'])(_0x8f454b[_0x43242c(0x6ea)])&&!_0x8f454b[_0x43242c(0x6ea)][_0x43242c(0x43a)](_0x43242c(0x79c)))throw _0x1adc26=JSON['stringify'](_0x8f454b,null,0x2),new m(_0x8f454b);_0x2f97e9=_0x8f454b[_0x43242c(0x6ea)];}else _0x2f97e9||(_0x2f97e9=(0x0,X['v4'])());let _0x483997=await this[_0x43242c(0x610)]['flow']['findOne']({'where':{'_id':_0x2e5072}});if(!_0x483997||!_0x483997[_0x43242c(0x760)]?.['includes'](this[_0x43242c(0x448)][_0x43242c(0x219)]))throw this[_0x43242c(0x738)]['error'](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Flow\x20\x27'+_0x2e5072+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x2e5072+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');let _0x58259b=await this[_0x43242c(0x1b7)](_0x483997,_0x2f97e9,null);if(_0x58259b){this[_0x43242c(0x738)][_0x43242c(0x592)](this[_0x43242c(0x2af)]+'\x20('+this[_0x43242c(0x448)][_0x43242c(0x219)]+'):\x20Criou\x20conversa\x20no\x20startFlowWebhook');let _0x2e218f;if(_0x562136){let _0x3265b3=_0x58259b[_0x43242c(0x26c)][_0x43242c(0x19d)],_0x36fc44=this['flattenObject'](_0x562136);Object[_0x43242c(0x6da)](_0x3265b3,_0x36fc44),_0x58259b['chatLog'][_0x43242c(0x19d)]=_0x3265b3,_0x2e218f={'error':!0x1,'apiResponse':_0x562136};}let _0x2d5b1c=await this['NextBlock'](_0x58259b);return _0x2d5b1c&&await this[_0x43242c(0x4a0)](_0x58259b,_0x2d5b1c),{'message':'Flow\x20iniciado'};}}catch(_0x23786f){if(this[_0x43242c(0x738)]['error'](this[_0x43242c(0x2af)]+'\x20('+this[_0x43242c(0x448)][_0x43242c(0x219)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+(_0x23786f instanceof Error?_0x23786f[_0x43242c(0x4ab)]:JSON[_0x43242c(0x5e5)](_0x23786f,null,0x2))),_0x1adc26=_0x23786f instanceof Error?_0x23786f[_0x43242c(0x4ab)]:JSON['stringify'](_0x23786f,null,0x2),_0x1adc26)throw new m(_0x43242c(0x69d)+_0x1adc26);}}async['closeExistingConversations'](_0x1fd867){const _0x2e9d6a=a0_0x3b8fac;try{let _0x2b9e75={'remoteJid':_0x1fd867,'status':_0x2e9d6a(0x627)},_0x263835={'status':_0x2e9d6a(0x5de)},_0x4c46ec=await this[_0x2e9d6a(0x610)][_0x2e9d6a(0x7ab)][_0x2e9d6a(0x2de)](_0x2b9e75,_0x263835,this[_0x2e9d6a(0x448)][_0x2e9d6a(0x219)]);return this[_0x2e9d6a(0x738)][_0x2e9d6a(0x592)](this[_0x2e9d6a(0x2af)]+'\x20('+this[_0x2e9d6a(0x448)]['wuid']+_0x2e9d6a(0x705)),_0x4c46ec;}catch(_0x353758){throw this[_0x2e9d6a(0x738)]['error'](this[_0x2e9d6a(0x2af)]+'\x20('+this[_0x2e9d6a(0x448)][_0x2e9d6a(0x219)]+'):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20'+_0x353758[_0x2e9d6a(0x4ab)]),_0x353758;}}async[a0_0x3b8fac(0x1b7)](_0x7f6a57,_0x158654,_0x5c9714){const _0x534dd0=a0_0x3b8fac;this[_0x534dd0(0x738)][_0x534dd0(0x592)](this[_0x534dd0(0x2af)]+'\x20('+this[_0x534dd0(0x448)]['wuid']+'):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]'),await this[_0x534dd0(0x7be)](_0x158654);try{let _0x1569ee=require(_0x534dd0(0x794))[_0x534dd0(0xf5)],_0x3b51ff=Date['now'](),_0x570d0c=_0x534dd0(0x4ad),_0x8f4519={},_0x99b8c9={},_0x42bfec=this['AutomateSystem'][_0x534dd0(0x4c5)][_0x534dd0(0x7a1)](_0x1f5472=>_0x1f5472[_0x534dd0(0x4ff)]===_0x7f6a57[_0x534dd0(0x4ff)]?.[_0x534dd0(0x2eb)]()),_0x5a008d=_0x42bfec?.[_0x534dd0(0x373)]??_0x7f6a57['minutesToClose']??0x0,_0x9714d9=_0x42bfec?.[_0x534dd0(0x198)]??_0x7f6a57['readMessages']??!0x1,_0x5632cd={'flowId':_0x7f6a57[_0x534dd0(0x4ff)],..._0x7f6a57,'chatLog':null},_0x5170d4=await this[_0x534dd0(0x6f7)](_0x5632cd[_0x534dd0(0x2dc)]),_0x33d8e2=await this[_0x534dd0(0x66d)](_0x158654),_0x25332c={..._0x5170d4,..._0x33d8e2,'_remoteJid':_0x158654},_0x27e0ed={'lastReceivedMessage':_0x8f4519,'lastSendMessage':_0x99b8c9,'lastBlockId':_0x570d0c,'lastCondition':!0x0,'realVariables':_0x25332c};_0x5632cd[_0x534dd0(0x26c)]=_0x27e0ed,_0x5632cd[_0x534dd0(0x26c)]['realVariables']={..._0x25332c,..._0x5c9714},delete _0x5632cd['_id'],_0x5632cd[_0x534dd0(0x4ff)]=new _0x1569ee(),_0x5632cd[_0x534dd0(0xa9)]=_0x3b51ff,_0x5632cd[_0x534dd0(0x233)]=_0x534dd0(0x627),_0x5632cd[_0x534dd0(0x6d5)]=_0x158654,_0x5632cd['minutesToClose']=_0x5a008d,_0x5632cd[_0x534dd0(0x198)]=_0x9714d9,_0x5632cd['_id']=_0x7f6a57[_0x534dd0(0x4ff)];let _0x14e039=await this[_0x534dd0(0x610)][_0x534dd0(0x7ab)][_0x534dd0(0x7b6)](_0x5632cd[_0x534dd0(0x4ff)],_0x5632cd,this[_0x534dd0(0x448)][_0x534dd0(0x219)]);return this['logger'][_0x534dd0(0x592)](this[_0x534dd0(0x2af)]+'\x20('+this[_0x534dd0(0x448)][_0x534dd0(0x219)]+_0x534dd0(0x5a8)),_0x14e039?_0x5632cd:null;}catch(_0x432a83){let _0x921bbe=_0x534dd0(0xcf),_0x973141=_0x432a83 instanceof Error?_0x432a83[_0x534dd0(0x4ab)]:typeof _0x432a83=='object'?JSON['stringify'](_0x432a83):_0x432a83,_0xa4d571=_0x921bbe+':\x20'+_0x973141;throw this[_0x534dd0(0x738)]['error'](this[_0x534dd0(0x2af)]+'\x20('+this[_0x534dd0(0x448)][_0x534dd0(0x219)]+_0x534dd0(0x3a8)+_0xa4d571),new m(_0xa4d571);}}async['getConversation'](_0x1856b0){const _0x15ce3b=a0_0x3b8fac;try{this[_0x15ce3b(0x738)]['verbose'](this[_0x15ce3b(0x2af)]+'\x20('+this[_0x15ce3b(0x448)][_0x15ce3b(0x219)]+_0x15ce3b(0x523)),this['logger'][_0x15ce3b(0x592)](this['instanceName']+'\x20('+this[_0x15ce3b(0x448)][_0x15ce3b(0x219)]+_0x15ce3b(0x552)+_0x1856b0);let _0x42c92b={'where':{'_id':_0x1856b0}};return await this[_0x15ce3b(0x610)][_0x15ce3b(0x7ab)]['findOne'](_0x42c92b,this[_0x15ce3b(0x448)][_0x15ce3b(0x219)]);}catch(_0x36582c){let _0x36443b='Erro\x20ao\x20buscar\x20a\x20conversa',_0x271300=_0x36582c instanceof Error?_0x36582c[_0x15ce3b(0x4ab)]:typeof _0x36582c=='object'?JSON['stringify'](_0x36582c):_0x36582c,_0x9b9e3f=_0x36443b+':\x20'+_0x271300;throw this[_0x15ce3b(0x738)][_0x15ce3b(0x3a7)](this[_0x15ce3b(0x2af)]+'\x20('+this[_0x15ce3b(0x448)][_0x15ce3b(0x219)]+'):\x20'+_0x9b9e3f),new m(_0x9b9e3f);}}async[a0_0x3b8fac(0x1a5)](_0x1b6678){const _0x261576=a0_0x3b8fac;try{return this[_0x261576(0x738)][_0x261576(0x592)](this[_0x261576(0x2af)]+'\x20('+this[_0x261576(0x448)][_0x261576(0x219)]+_0x261576(0x615)),await this[_0x261576(0x610)][_0x261576(0x7ab)]['find'](_0x1b6678,this['instance'][_0x261576(0x219)]);}catch(_0x33c559){let _0x5a524b=_0x261576(0x102),_0x30825c=_0x33c559 instanceof Error?_0x33c559[_0x261576(0x4ab)]:typeof _0x33c559==_0x261576(0x4f6)?JSON[_0x261576(0x5e5)](_0x33c559):_0x33c559,_0x259ef1=_0x5a524b+':\x20'+_0x30825c;throw this[_0x261576(0x738)][_0x261576(0x3a7)](this[_0x261576(0x2af)]+'\x20('+this[_0x261576(0x448)]['wuid']+_0x261576(0x3a8)+_0x259ef1),new m(_0x259ef1);}}async[a0_0x3b8fac(0x144)](_0x52aad1){const _0x1fa315=a0_0x3b8fac;try{return this[_0x1fa315(0x738)]['verbose'](this[_0x1fa315(0x2af)]+'\x20('+this['instance'][_0x1fa315(0x219)]+_0x1fa315(0xf0)),this[_0x1fa315(0x738)][_0x1fa315(0x592)](this['instanceName']+'\x20('+this[_0x1fa315(0x448)][_0x1fa315(0x219)]+_0x1fa315(0x394)+_0x52aad1),(await this[_0x1fa315(0x610)]['flowConversation'][_0x1fa315(0x793)]({'where':{'_id':_0x52aad1['_id']}},this[_0x1fa315(0x448)][_0x1fa315(0x219)]))['deletedCount']===0x0?{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.'}:{'message':_0x1fa315(0x362)};}catch(_0x228b6a){let _0x1b8ca6='Erro\x20ao\x20deletar\x20a\x20conversa',_0x190d62=_0x228b6a instanceof Error?_0x228b6a[_0x1fa315(0x4ab)]:typeof _0x228b6a=='object'?JSON[_0x1fa315(0x5e5)](_0x228b6a):_0x228b6a,_0x28ff11=_0x1b8ca6+':\x20'+_0x190d62;throw this[_0x1fa315(0x738)][_0x1fa315(0x3a7)](this['instanceName']+'\x20('+this[_0x1fa315(0x448)][_0x1fa315(0x219)]+_0x1fa315(0x3a8)+_0x28ff11),new m(_0x28ff11);}}async['editConversation'](_0x4a79d8){const _0x41ec82=a0_0x3b8fac;try{let {_id:_0x148430,chatLog:_0x34628f,status:_0x453603}=_0x4a79d8;if(!_0x148430)return{'message':_0x41ec82(0x86)};let _0x1382f6={};if(_0x453603!==void 0x0&&(_0x1382f6[_0x41ec82(0x233)]=_0x453603),Object[_0x41ec82(0x63b)](_0x1382f6)[_0x41ec82(0x3c8)]===0x0)return{'message':'Nenhum\x20campo\x20vlido\x20para\x20atualizao\x20fornecido.'};let _0x2d7019=await this[_0x41ec82(0x610)][_0x41ec82(0x7ab)]['updateOne'](_0x148430,_0x1382f6,this[_0x41ec82(0x448)]['wuid']);return _0x2d7019||{'message':_0x41ec82(0x8d)};}catch(_0x528b20){let _0x599bc7=_0x41ec82(0x533),_0x4127cc=_0x528b20 instanceof Error?_0x528b20[_0x41ec82(0x4ab)]:typeof _0x528b20==_0x41ec82(0x4f6)?JSON[_0x41ec82(0x5e5)](_0x528b20):_0x528b20,_0xdecd7e=_0x599bc7+':\x20'+_0x4127cc;throw this[_0x41ec82(0x738)][_0x41ec82(0x3a7)](this[_0x41ec82(0x2af)]+'\x20('+this[_0x41ec82(0x448)]['wuid']+_0x41ec82(0x3a8)+_0xdecd7e),new m(_0xdecd7e);}}async[a0_0x3b8fac(0x3d9)](_0x1310f7){const _0x2a4e41=a0_0x3b8fac;try{_0x1310f7[_0x2a4e41(0x4ff)]=this[_0x2a4e41(0x39d)](_0x1310f7[_0x2a4e41(0x4ff)]);let _0x1820c6=await this['repository']['chat'][_0x2a4e41(0x7ac)]({'where':{'_id':_0x1310f7[_0x2a4e41(0x4ff)]}},this[_0x2a4e41(0x448)][_0x2a4e41(0x219)]);if(!_0x1820c6)throw new m(_0x2a4e41(0x285));let {_id:_0x59e6f4,leadInfo:_0x4cff02}=_0x1310f7;if(!_0x59e6f4)throw new Error(_0x2a4e41(0x75c));if(_0x1310f7[_0x2a4e41(0x23f)]===_0x2a4e41(0x62c))return await this[_0x2a4e41(0x72e)](_0x1310f7[_0x2a4e41(0x4ff)]),await this[_0x2a4e41(0x610)][_0x2a4e41(0x273)]['delete']({'where':{'_id':_0x1310f7[_0x2a4e41(0x4ff)]}},this[_0x2a4e41(0x448)]['wuid']),await this[_0x2a4e41(0x610)]['message'][_0x2a4e41(0x23f)]({'where':{'key':{'remoteJid':_0x1310f7[_0x2a4e41(0x4ff)]}}},this[_0x2a4e41(0x448)][_0x2a4e41(0x219)]),_0x1310f7=await this['repository'][_0x2a4e41(0x273)][_0x2a4e41(0x7b6)]({'where':{'_id':_0x1310f7[_0x2a4e41(0x4ff)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x2a4e41(0x448)][_0x2a4e41(0x219)]),q(this['instanceName'],'chats',{'chat':_0x1310f7}),{'message':_0x2a4e41(0x71d)};if(_0x1310f7[_0x2a4e41(0x23f)]===_0x2a4e41(0x6ae))return await this['repository'][_0x2a4e41(0x4ab)]['delete']({'where':{'key':{'remoteJid':_0x1310f7[_0x2a4e41(0x4ff)]}}},this[_0x2a4e41(0x448)][_0x2a4e41(0x219)]),_0x1310f7=await this[_0x2a4e41(0x610)][_0x2a4e41(0x273)][_0x2a4e41(0x7b6)]({'where':{'_id':_0x1310f7[_0x2a4e41(0x4ff)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x2a4e41(0x448)]['wuid']),q(this[_0x2a4e41(0x2af)],_0x2a4e41(0x4f8),{'chat':_0x1310f7}),{'message':_0x2a4e41(0x511)};let _0x5c7036=(_0x19b31b,_0x3e7a8c,_0x16efc8)=>{const _0x25ab2f=_0x2a4e41;_0x19b31b&&_0x16efc8[_0x25ab2f(0x73e)](_0x327eb8=>{_0x19b31b[_0x327eb8]!==void 0x0&&(_0x3e7a8c['leadInfo.'+_0x327eb8]=_0x19b31b[_0x327eb8]);});},_0xaa556e={};if(_0x2a4e41(0x76c)in _0x1310f7&&(this[_0x2a4e41(0x738)][_0x2a4e41(0x592)](this[_0x2a4e41(0x2af)]+'\x20('+this['instance']['wuid']+'):Alterar\x20configurao\x20de\x20mudo\x20para\x20o\x20chat:\x20'+_0x1310f7['_id']),_0x1310f7['muteEndTime']=_0x1310f7['muteEndTime']===0x0?null:-0x1,await this[_0x2a4e41(0x488)]['chatModify']({'mute':_0x1310f7[_0x2a4e41(0x76c)]},_0x1310f7[_0x2a4e41(0x4ff)]),_0xaa556e[_0x2a4e41(0x76c)]=Number(_0x1310f7[_0x2a4e41(0x76c)])),_0x4cff02&&(_0x5c7036(_0x4cff02,_0xaa556e,[_0x2a4e41(0x408),_0x2a4e41(0x34c),_0x2a4e41(0x6b0),_0x2a4e41(0x2ef),'status',_0x2a4e41(0x5a6),_0x2a4e41(0x1df),_0x2a4e41(0x270),_0x2a4e41(0x429),'etiquetas',_0x2a4e41(0x635)]),Array[_0x2a4e41(0x338)](_0x4cff02['customFields'])&&(_0xaa556e[_0x2a4e41(0x35b)]=_0x4cff02[_0x2a4e41(0x51b)][_0x2a4e41(0x23a)](_0x5c86c8=>({'_id':_0x5c86c8[_0x2a4e41(0x4ff)],'value':_0x5c86c8[_0x2a4e41(0x7a0)]}))),_0x1310f7[_0x2a4e41(0x79e)][_0x2a4e41(0x1b0)]!==void 0x0)){let _0x52652c=await this[_0x2a4e41(0x610)]['label'][_0x2a4e41(0x7a1)]({'where':{}},this[_0x2a4e41(0x448)][_0x2a4e41(0x219)]),_0x10ce43=new Set(_0x1310f7[_0x2a4e41(0x79e)][_0x2a4e41(0x1b0)]||[]),_0x344861=new Set(_0x1310f7[_0x2a4e41(0x79e)][_0x2a4e41(0x1b0)]),_0x210141=new Set(_0x52652c[_0x2a4e41(0x23a)](_0x5d0cd3=>_0x5d0cd3[_0x2a4e41(0x4ff)])),_0x309491=[..._0x344861][_0x2a4e41(0x34f)](_0x1bf6ee=>!_0x10ce43[_0x2a4e41(0x59b)](_0x1bf6ee)&&_0x210141[_0x2a4e41(0x59b)](_0x1bf6ee)),_0x5bb784=[..._0x10ce43][_0x2a4e41(0x34f)](_0x56b6ca=>!_0x344861[_0x2a4e41(0x59b)](_0x56b6ca));if(_0xaa556e[_0x2a4e41(0x7c2)]=[..._0x10ce43],_0x1820c6&&!_0x1820c6['imported']){for(let _0x2f224b of _0x309491)await this[_0x2a4e41(0x1d2)](_0x2f224b,_0x1310f7[_0x2a4e41(0x4ff)]),_0x10ce43['add'](_0x2f224b);for(let _0x3d1640 of _0x5bb784)await this[_0x2a4e41(0xda)](_0x3d1640,_0x1310f7[_0x2a4e41(0x4ff)]),_0x10ce43[_0x2a4e41(0x23f)](_0x3d1640);}}if(_0x1310f7[_0x2a4e41(0x5b3)]!==void 0x0&&(_0xaa556e['unreadcount']=Number(_0x1310f7[_0x2a4e41(0x5b3)])),Object[_0x2a4e41(0x63b)](_0xaa556e)[_0x2a4e41(0x3c8)]===0x0)throw new Error(_0x2a4e41(0x646));let _0x407e43=await this[_0x2a4e41(0x610)][_0x2a4e41(0x273)][_0x2a4e41(0x7b6)]({'where':{'_id':_0x1310f7['_id']}},_0xaa556e,this['instance'][_0x2a4e41(0x219)]);return _0x407e43&&q(this[_0x2a4e41(0x2af)],_0x2a4e41(0x4f8),{'chat':_0x407e43}),_0x407e43?(this[_0x2a4e41(0x738)][_0x2a4e41(0x592)](this[_0x2a4e41(0x2af)]+'\x20('+this[_0x2a4e41(0x448)][_0x2a4e41(0x219)]+_0x2a4e41(0x3a8)+JSON['stringify'](_0x407e43,null,0x2)),_0x407e43):{'message':_0x2a4e41(0x675)};}catch(_0x595f2d){let _0x579023=_0x2a4e41(0x733),_0x5704cc=_0x595f2d instanceof Error?_0x595f2d[_0x2a4e41(0x4ab)]:typeof _0x595f2d==_0x2a4e41(0x4f6)?JSON[_0x2a4e41(0x5e5)](_0x595f2d):_0x595f2d,_0x57d0d8=_0x579023+':\x20'+_0x5704cc;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x2a4e41(0x448)][_0x2a4e41(0x219)]+_0x2a4e41(0x3a8)+_0x57d0d8),new m(_0x57d0d8);}}async[a0_0x3b8fac(0x1d2)](_0x1c655b,_0x29b464){const _0x1f8291=a0_0x3b8fac;try{await this[_0x1f8291(0x488)][_0x1f8291(0x36d)](_0x29b464,_0x1c655b),this[_0x1f8291(0x738)]['info'](this[_0x1f8291(0x2af)]+'\x20('+this[_0x1f8291(0x448)][_0x1f8291(0x219)]+_0x1f8291(0x761)+_0x1c655b+_0x1f8291(0x727)+_0x29b464+'\x20com\x20sucesso.');}catch(_0x4c892a){this['logger'][_0x1f8291(0x3a7)](_0x1f8291(0x540)+_0x1c655b+_0x1f8291(0x6a4)+_0x29b464+':\x20'+_0x4c892a);}}async[a0_0x3b8fac(0xda)](_0xaad23b,_0x512f9d){const _0x1d3386=a0_0x3b8fac;try{await this[_0x1d3386(0x488)]['removeChatLabel'](_0x512f9d,_0xaad23b),this['logger']['info'](this[_0x1d3386(0x2af)]+'\x20('+this[_0x1d3386(0x448)][_0x1d3386(0x219)]+_0x1d3386(0x761)+_0xaad23b+_0x1d3386(0x4c0)+_0x512f9d+_0x1d3386(0x679));}catch(_0x525e04){this['logger'][_0x1d3386(0x3a7)](_0x1d3386(0x4cb)+_0xaad23b+_0x1d3386(0x5f5)+_0x512f9d+':\x20'+_0x525e04);}}async['updateAgent'](_0x3ee3b8){const _0x6c1256=a0_0x3b8fac;try{let _0x2c4e3d=await this[_0x6c1256(0x610)]['automateSystem'][_0x6c1256(0x28d)](this[_0x6c1256(0x448)][_0x6c1256(0x219)]),_0x2dc406=_0x3ee3b8[_0x6c1256(0x4ff)]?_0x2c4e3d[_0x6c1256(0x5b8)][_0x6c1256(0x77d)](_0x2df9a1=>_0x2df9a1[_0x6c1256(0x4ff)]===_0x3ee3b8['_id']):-0x1;if(_0x3ee3b8[_0x6c1256(0x23f)]&&_0x2dc406>-0x1)_0x2c4e3d['agents'][_0x6c1256(0x5eb)](_0x2dc406,0x1);else{if(_0x2dc406>-0x1){let _0x12eb19=_0x2c4e3d[_0x6c1256(0x5b8)][_0x2dc406];_0x3ee3b8[_0x6c1256(0x272)]&&(_0x12eb19[_0x6c1256(0x272)]=_0x3ee3b8[_0x6c1256(0x272)]),_0x3ee3b8[_0x6c1256(0x26b)]&&(_0x12eb19['name']=_0x3ee3b8[_0x6c1256(0x26b)]),_0x3ee3b8['email']&&(_0x12eb19[_0x6c1256(0x6b0)]=_0x3ee3b8[_0x6c1256(0x6b0)]),_0x3ee3b8[_0x6c1256(0x1f8)]&&(_0x12eb19[_0x6c1256(0x1f8)]=_0x3ee3b8['role']);}else _0x2c4e3d[_0x6c1256(0x5b8)][_0x6c1256(0x42a)]({'_id':_0x3ee3b8[_0x6c1256(0x4ff)]||new fe[(_0x6c1256(0x151))]['Types']['ObjectId']()[_0x6c1256(0x2eb)](),'fone':_0x3ee3b8['fone'],'name':_0x3ee3b8['name'],'email':_0x3ee3b8[_0x6c1256(0x6b0)],'role':_0x3ee3b8['role']});}let _0x1e1041={'agents':_0x2c4e3d[_0x6c1256(0x5b8)]},_0x2c866c=await this['repository']['automateSystem']['update'](_0x1e1041,this[_0x6c1256(0x448)][_0x6c1256(0x219)]);return this['AutomateSystem']=_0x2c866c,this[_0x6c1256(0x738)][_0x6c1256(0x592)](this['instanceName']+'\x20('+this['instance'][_0x6c1256(0x219)]+_0x6c1256(0x84)),this['logger'][_0x6c1256(0x592)](this[_0x6c1256(0x2af)]+'\x20('+this['instance'][_0x6c1256(0x219)]+_0x6c1256(0x3a8)+this[_0x6c1256(0x351)]),_0x2c866c;}catch(_0x3719ca){let _0x18d76c=_0x6c1256(0x138),_0x30ae6b=_0x3719ca instanceof Error?_0x3719ca['message']:typeof _0x3719ca=='object'?JSON[_0x6c1256(0x5e5)](_0x3719ca):_0x3719ca,_0x2b340e=_0x18d76c+':\x20'+_0x30ae6b;throw this[_0x6c1256(0x738)][_0x6c1256(0x3a7)](this[_0x6c1256(0x2af)]+'\x20('+this['instance']['wuid']+_0x6c1256(0x3a8)+_0x2b340e),new m(_0x2b340e);}}async['updateCustomFields'](_0x2ac854){const _0x5ee96d=a0_0x3b8fac;try{let _0x66d0bf=await this[_0x5ee96d(0x610)]['automateSystem'][_0x5ee96d(0x28d)](this[_0x5ee96d(0x448)][_0x5ee96d(0x219)]),_0x19f011=_0x2ac854[_0x5ee96d(0x4ff)]?_0x66d0bf[_0x5ee96d(0x51b)][_0x5ee96d(0x77d)](_0x1093bf=>_0x1093bf[_0x5ee96d(0x4ff)]===_0x2ac854[_0x5ee96d(0x4ff)]):-0x1,_0x26eae7=!0x1,_0x5d9e5b=_0x66d0bf['customFields']['some'](_0x1d551d=>_0x1d551d['order']===_0x2ac854[_0x5ee96d(0x1b3)]);if(_0x2ac854['delete']&&_0x19f011>-0x1)_0x66d0bf[_0x5ee96d(0x51b)][_0x5ee96d(0x5eb)](_0x19f011,0x1),_0x26eae7=!0x0;else{if(_0x19f011>-0x1){if(_0x66d0bf['customFields'][_0x5ee96d(0x39e)](_0x167d3e=>_0x167d3e[_0x5ee96d(0x26b)]===_0x2ac854[_0x5ee96d(0x26b)]&&_0x167d3e[_0x5ee96d(0x4ff)]!==_0x2ac854[_0x5ee96d(0x4ff)]))throw new Error(_0x5ee96d(0x57c));let _0x251408=_0x66d0bf[_0x5ee96d(0x51b)][_0x19f011];_0x2ac854[_0x5ee96d(0x1b3)]&&(_0x5d9e5b||!Number['isInteger'](_0x2ac854[_0x5ee96d(0x1b3)]))&&(_0x251408[_0x5ee96d(0x1b3)]=_0x2ac854['order'],_0x26eae7=!0x0),_0x2ac854[_0x5ee96d(0x26b)]&&(_0x251408['name']=_0x2ac854[_0x5ee96d(0x26b)]);}else{if(_0x66d0bf['customFields'][_0x5ee96d(0x39e)](_0x248d55=>_0x248d55[_0x5ee96d(0x26b)]===_0x2ac854[_0x5ee96d(0x26b)]&&_0x248d55['_id']!==_0x2ac854[_0x5ee96d(0x4ff)]))throw new Error(_0x5ee96d(0x57c));_0x66d0bf[_0x5ee96d(0x51b)][_0x5ee96d(0x42a)]({'_id':_0x2ac854['_id']||new fe[(_0x5ee96d(0x151))][(_0x5ee96d(0x39b))][(_0x5ee96d(0xf5))]()[_0x5ee96d(0x2eb)](),'order':_0x2ac854[_0x5ee96d(0x1b3)],'name':_0x2ac854[_0x5ee96d(0x26b)]}),_0x26eae7=!0x0;}}if(_0x26eae7){_0x66d0bf[_0x5ee96d(0x51b)][_0x5ee96d(0x77f)]((_0x24a356,_0x4b22d1)=>_0x24a356['order']>_0x4b22d1['order']?0x1:_0x4b22d1['order']>_0x24a356['order']?-0x1:0x0);for(let _0x394435=0x0;_0x394435<_0x66d0bf[_0x5ee96d(0x51b)][_0x5ee96d(0x3c8)];_0x394435++)_0x66d0bf[_0x5ee96d(0x51b)][_0x394435][_0x5ee96d(0x1b3)]=_0x394435+0x1;}let _0x17bea9=await this[_0x5ee96d(0x610)]['automateSystem']['update'](_0x66d0bf,this['instance'][_0x5ee96d(0x219)]);return this['AutomateSystem']=_0x17bea9,this[_0x5ee96d(0x738)]['verbose'](this['instanceName']+'\x20('+this[_0x5ee96d(0x448)][_0x5ee96d(0x219)]+'):\x20debug\x20alterando\x20this.AutomateSystem'),this[_0x5ee96d(0x738)]['verbose'](this[_0x5ee96d(0x2af)]+'\x20('+this[_0x5ee96d(0x448)][_0x5ee96d(0x219)]+_0x5ee96d(0x3a8)+this[_0x5ee96d(0x351)]),_0x17bea9;}catch(_0xcd939d){let _0xf92065=_0x5ee96d(0x2da),_0xd5632d=_0xcd939d instanceof Error?_0xcd939d[_0x5ee96d(0x4ab)]:typeof _0xcd939d=='object'?JSON[_0x5ee96d(0x5e5)](_0xcd939d):_0xcd939d,_0x4de6b0=_0xf92065+':\x20'+_0xd5632d;throw this[_0x5ee96d(0x738)]['error'](this[_0x5ee96d(0x2af)]+'\x20('+this[_0x5ee96d(0x448)][_0x5ee96d(0x219)]+_0x5ee96d(0x3a8)+_0x4de6b0),new m(_0x4de6b0);}}async[a0_0x3b8fac(0x5f9)](_0x149cae){const _0x5b2d33=a0_0x3b8fac;try{let _0x22e91b=await this[_0x5b2d33(0x610)]['automateSystem'][_0x5b2d33(0x28d)](this[_0x5b2d33(0x448)][_0x5b2d33(0x219)]),_0x28b8bf=_0x22e91b?.[_0x5b2d33(0x10e)]?.[_0x5b2d33(0x77d)](_0x2c9ebf=>_0x2c9ebf['_id']===_0x149cae?.[_0x5b2d33(0x4ff)]);if(_0x149cae?.[_0x5b2d33(0x23f)])_0x28b8bf>-0x1&&_0x22e91b?.[_0x5b2d33(0x10e)]?.[_0x5b2d33(0x5eb)](_0x28b8bf,0x1);else{if(_0x28b8bf>-0x1){let _0x546cc6=_0x22e91b[_0x5b2d33(0x10e)][_0x28b8bf];_0x546cc6[_0x5b2d33(0x1b3)]=_0x149cae?.[_0x5b2d33(0x1b3)]||_0x546cc6[_0x5b2d33(0x1b3)],_0x546cc6[_0x5b2d33(0x282)]=_0x149cae?.[_0x5b2d33(0x282)]||_0x546cc6['command'],_0x546cc6[_0x5b2d33(0x4ab)]=_0x149cae?.['message']||_0x546cc6[_0x5b2d33(0x4ab)];}else{let _0x5b5a7b={'_id':_0x149cae?.[_0x5b2d33(0x4ff)]||new fe[(_0x5b2d33(0x151))][(_0x5b2d33(0x39b))][(_0x5b2d33(0xf5))]()[_0x5b2d33(0x2eb)](),'order':_0x149cae?.[_0x5b2d33(0x1b3)],'command':_0x149cae?.['command'],'message':_0x149cae?.[_0x5b2d33(0x4ab)]};_0x22e91b?.['autoCompleteMessages']?.[_0x5b2d33(0x42a)](_0x5b5a7b);}}_0x22e91b?.[_0x5b2d33(0x10e)]?.['sort']((_0x38deb3,_0x2a3956)=>_0x38deb3[_0x5b2d33(0x1b3)]-_0x2a3956[_0x5b2d33(0x1b3)]);let _0x307c57=await this[_0x5b2d33(0x610)][_0x5b2d33(0x241)][_0x5b2d33(0x1b6)](_0x22e91b,this[_0x5b2d33(0x448)][_0x5b2d33(0x219)]);return this[_0x5b2d33(0x351)]=_0x307c57,this['logger']['verbose'](this[_0x5b2d33(0x2af)]+'\x20('+this[_0x5b2d33(0x448)]['wuid']+_0x5b2d33(0x51a)),_0x307c57;}catch(_0x327f8b){let _0x229952=_0x5b2d33(0x1e8),_0x333458=_0x327f8b instanceof Error?_0x327f8b[_0x5b2d33(0x4ab)]:typeof _0x327f8b==_0x5b2d33(0x4f6)?JSON['stringify'](_0x327f8b):_0x327f8b,_0x1b7591=_0x229952+':\x20'+_0x333458;throw this[_0x5b2d33(0x738)][_0x5b2d33(0x3a7)](this[_0x5b2d33(0x2af)]+'\x20('+this[_0x5b2d33(0x448)][_0x5b2d33(0x219)]+'):\x20'+_0x1b7591),new m(_0x1b7591);}}async['updateFlowConfig'](_0x19a2d9){const _0x37f1c2=a0_0x3b8fac;try{let _0x10ca14=await this[_0x37f1c2(0x610)][_0x37f1c2(0x241)][_0x37f1c2(0x28d)](this[_0x37f1c2(0x448)][_0x37f1c2(0x219)]);if(!_0x10ca14)throw new Error(_0x37f1c2(0x2b3));let _0xbc84eb={'_id':_0x10ca14[_0x37f1c2(0x4ff)],'flowConfig':{'enabled':_0x19a2d9[_0x37f1c2(0x1d1)]??_0x10ca14[_0x37f1c2(0x2a4)]['enabled'],'ignoreGroups':_0x19a2d9[_0x37f1c2(0x65e)]??_0x10ca14['flowConfig']['ignoreGroups'],'stopConversation':_0x19a2d9[_0x37f1c2(0x43f)][_0x37f1c2(0x73c)]()??_0x10ca14[_0x37f1c2(0x2a4)][_0x37f1c2(0x43f)][_0x37f1c2(0x73c)](),'stopMinutes':_0x19a2d9[_0x37f1c2(0x7d7)]??_0x10ca14['flowConfig']['stopMinutes'],'stopWhenYouSendMsg':_0x19a2d9[_0x37f1c2(0x6f8)]??_0x10ca14[_0x37f1c2(0x2a4)][_0x37f1c2(0x6f8)]}},_0x1a0937=await this[_0x37f1c2(0x610)][_0x37f1c2(0x241)]['update'](_0xbc84eb,this[_0x37f1c2(0x448)][_0x37f1c2(0x219)]);return this[_0x37f1c2(0x351)]=_0x1a0937,this[_0x37f1c2(0x738)][_0x37f1c2(0x592)](this[_0x37f1c2(0x2af)]+'\x20('+this[_0x37f1c2(0x448)][_0x37f1c2(0x219)]+_0x37f1c2(0x84)),this[_0x37f1c2(0x738)][_0x37f1c2(0x592)](this[_0x37f1c2(0x2af)]+'\x20('+this[_0x37f1c2(0x448)][_0x37f1c2(0x219)]+'):\x20'+this[_0x37f1c2(0x351)]),setTimeout(()=>this[_0x37f1c2(0x24b)](),0x7d0),_0x1a0937;}catch(_0x319991){let _0x3e00bc='Erro\x20ao\x20editar\x20configurao\x20de\x20fluxos',_0x25ad39=_0x319991 instanceof Error?_0x319991[_0x37f1c2(0x4ab)]:typeof _0x319991==_0x37f1c2(0x4f6)?JSON[_0x37f1c2(0x5e5)](_0x319991):_0x319991,_0x186d18=_0x3e00bc+':\x20'+_0x25ad39;throw this['logger']['error'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x37f1c2(0x3a8)+_0x186d18),new m(_0x186d18);}}async[a0_0x3b8fac(0x407)](){const _0x5476cd=a0_0x3b8fac;try{let _0x126b99=await this[_0x5476cd(0x610)][_0x5476cd(0x241)][_0x5476cd(0x28d)](this[_0x5476cd(0x448)][_0x5476cd(0x219)]);return this['AutomateSystem']=_0x126b99,_0x126b99;}catch(_0x6a4cd5){let _0x7e56e5='Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem',_0x116fd8=_0x6a4cd5 instanceof Error?_0x6a4cd5[_0x5476cd(0x4ab)]:typeof _0x6a4cd5==_0x5476cd(0x4f6)?JSON[_0x5476cd(0x5e5)](_0x6a4cd5):_0x6a4cd5,_0x454c2e=_0x7e56e5+':\x20'+_0x116fd8;throw this['logger'][_0x5476cd(0x3a7)](this[_0x5476cd(0x2af)]+'\x20('+this[_0x5476cd(0x448)][_0x5476cd(0x219)]+_0x5476cd(0x3a8)+_0x454c2e),new m(_0x454c2e);}}async['setRestartTimeout'](){const _0x246015=a0_0x3b8fac;await this[_0x246015(0x4b1)]['runExclusive'](async()=>{const _0x347c16=_0x246015;this[_0x347c16(0x448)]['ScheduleMessage'][_0x347c16(0x388)]&&clearTimeout(this[_0x347c16(0x448)][_0x347c16(0x6e2)]['timeout']),this[_0x347c16(0x448)][_0x347c16(0x6e2)][_0x347c16(0x388)]=setTimeout(()=>{const _0x4061ae=_0x347c16;this[_0x4061ae(0x774)]();},0x2*0x3c*0x3e8+0x14*0x3e8);});}async['checkAndRestartProcess'](){const _0x5c4797=a0_0x3b8fac;Date[_0x5c4797(0x183)]()-this['instance'][_0x5c4797(0x6e2)]['lastSend']>=0x1d4c0&&(this['logger']['verbose'](this[_0x5c4797(0x2af)]+'\x20('+this[_0x5c4797(0x448)]['wuid']+_0x5c4797(0x174)),this[_0x5c4797(0x448)][_0x5c4797(0x6e2)]['processingGroup']=null,this[_0x5c4797(0x448)][_0x5c4797(0x6e2)][_0x5c4797(0x402)]=0x0,this[_0x5c4797(0x448)]['ScheduleMessage'][_0x5c4797(0x771)]=0x0,this[_0x5c4797(0x267)]=null,await this['scheduleNextCheck']());}async[a0_0x3b8fac(0x24b)](){await this['checkMutex']['runExclusive'](async()=>{const _0x4c5af6=a0_0x56c3;let _0x2cd518=!0x1;this[_0x4c5af6(0x169)]=[],this['processUUID']=(0x0,X['v4'])(),await this[_0x4c5af6(0x3d1)]();let _0x193caf=()=>{const _0x47165b=_0x4c5af6;this[_0x47165b(0x738)][_0x47165b(0x1a9)](this[_0x47165b(0x2af)]+'\x20('+this[_0x47165b(0x448)]['wuid']+_0x47165b(0x7bf)+this[_0x47165b(0x448)][_0x47165b(0x6e2)][_0x47165b(0x263)]?.[_0x47165b(0x4ff)]+_0x47165b(0x172));},_0x4c1f92=async()=>{const _0x497bbf=_0x4c5af6;this[_0x497bbf(0x738)][_0x497bbf(0x1a9)](this[_0x497bbf(0x2af)]+'\x20('+this[_0x497bbf(0x448)][_0x497bbf(0x219)]+_0x497bbf(0x179));let _0x13c90d=new Date(Date[_0x497bbf(0x183)]()-0xc*0x3c*0x3c*0x3e8),_0x3f7d5f={'where':{'status':{'$in':['scheduled',_0x497bbf(0x4e4)]},'$or':[{'when':{'$lte':new Date(),'$gte':_0x13c90d}},{'when':0x0}]}},_0x1476ff=await this[_0x497bbf(0x610)]['scheduleMessage'][_0x497bbf(0x7a1)](_0x3f7d5f,this[_0x497bbf(0x448)]['wuid']);return this[_0x497bbf(0x738)][_0x497bbf(0x1a9)](this[_0x497bbf(0x2af)]+'\x20('+this[_0x497bbf(0x448)]['wuid']+'):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas:\x20'+_0x1476ff[_0x497bbf(0x3c8)]),_0x1476ff;},_0x6da872=()=>this[_0x4c5af6(0x169)][_0x4c5af6(0x3c8)]===0x0?null:this[_0x4c5af6(0x169)][_0x4c5af6(0x223)]((_0x5e49af,_0x86cf)=>(_0x5e49af['order']??Number['MAX_SAFE_INTEGER'])<(_0x86cf[_0x4c5af6(0x1b3)]??Number[_0x4c5af6(0x3b2)])?_0x5e49af:_0x86cf,this[_0x4c5af6(0x169)][0x0]),_0x1b64f4=async _0x5e3624=>{const _0x2f3954=_0x4c5af6;let _0x5565c1=Math[_0x2f3954(0x3e0)](Math[_0x2f3954(0x334)]()*0x1389)+0xbb8;for(let _0x4ac836 of _0x5e3624){let _0x36247a={'_id':_0x4ac836['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x2f3954(0x183)]()-0x2710}}]},_0x3b11a9={'startSend':Date[_0x2f3954(0x183)](),'processUUID':this[_0x2f3954(0x267)],'status':_0x2f3954(0x4e4)};if(!await this[_0x2f3954(0x610)][_0x2f3954(0x674)][_0x2f3954(0x7b6)](_0x36247a,_0x3b11a9,this['instance'][_0x2f3954(0x219)]))return;if(!this[_0x2f3954(0x448)][_0x2f3954(0x6e2)][_0x2f3954(0x2b2)]){this[_0x2f3954(0x738)][_0x2f3954(0x1a9)](this[_0x2f3954(0x2af)]+'\x20('+this[_0x2f3954(0x448)]['wuid']+_0x2f3954(0x20e));break;}for(this['pendingMessages']=_0x4ac836[_0x2f3954(0x6ae)][_0x2f3954(0x34f)](_0x2e7403=>!_0x2e7403[_0x2f3954(0x5c4)]);this['pendingMessages'][_0x2f3954(0x3c8)]>0x0||!_0x2cd518;){await this[_0x2f3954(0x59f)]();let _0x5dea10=_0x6da872();if(!_0x5dea10){_0x2cd518=!0x0;break;}let _0x304bee=_0x4ac836[_0x2f3954(0x6ae)][_0x2f3954(0x7a1)](_0x35ecdb=>_0x35ecdb[_0x2f3954(0x4ff)]===_0x5dea10[_0x2f3954(0x4ff)]);if(!_0x304bee){_0x2cd518=!0x0;break;}if(this[_0x2f3954(0x448)][_0x2f3954(0x6e2)]['lastSend']=Date[_0x2f3954(0x183)](),_0x304bee[_0x2f3954(0x5c4)]){this[_0x2f3954(0x738)][_0x2f3954(0x1a9)](this[_0x2f3954(0x2af)]+'\x20('+this[_0x2f3954(0x448)]['wuid']+'):\x20Mensagem\x20j\x20enviada\x20para\x20'+_0x304bee['remoteJid']+_0x2f3954(0x768)),this['pendingMessages']=this[_0x2f3954(0x169)][_0x2f3954(0x34f)](_0x37667c=>_0x37667c['_id']!==_0x304bee[_0x2f3954(0x4ff)]);continue;}if(!this[_0x2f3954(0x448)][_0x2f3954(0x6e2)][_0x2f3954(0x2b2)]){this[_0x2f3954(0x738)][_0x2f3954(0x1a9)](this['instanceName']+'\x20('+this[_0x2f3954(0x448)][_0x2f3954(0x219)]+'):\x20Envio\x20interrompido\x20devido\x20\x20desconexo.');break;}if(!this[_0x2f3954(0x448)][_0x2f3954(0x6e2)]['processingGroup']){this[_0x2f3954(0x738)][_0x2f3954(0x1a9)](this[_0x2f3954(0x2af)]+'\x20('+this[_0x2f3954(0x448)][_0x2f3954(0x219)]+_0x2f3954(0x7d3)+_0x4ac836['_id']+_0x2f3954(0x292));break;}if(_0x304bee[_0x2f3954(0x1a2)]===_0x2f3954(0x297)&&!this['AutomateSystem']?.[_0x2f3954(0x2a4)][_0x2f3954(0x1d1)]){this['logger'][_0x2f3954(0x3a7)](this[_0x2f3954(0x2af)]+'\x20('+this[_0x2f3954(0x448)][_0x2f3954(0x219)]+_0x2f3954(0x1cd));break;}let _0x3d5df1={'idControl':_0x304bee['_id'],'remoteJid':_0x304bee[_0x2f3954(0x6d5)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0x2f3954(0x183)]()},_0x7de5cd=null;try{this[_0x2f3954(0x738)]['warn'](this[_0x2f3954(0x2af)]+'\x20('+this[_0x2f3954(0x448)][_0x2f3954(0x219)]+'):\x20Enviando\x20mensagem\x20para\x20'+_0x304bee[_0x2f3954(0x6d5)]);let _0x139cbb=await this[_0x2f3954(0x6ed)](_0x304bee['remoteJid'],_0x304bee);_0x3d5df1[_0x2f3954(0x3a7)]=_0x139cbb['error'],_0x3d5df1['id']=_0x139cbb[_0x2f3954(0x3a7)]?null:_0x139cbb['id'],_0x3d5df1['error_log']=_0x139cbb[_0x2f3954(0x3a7)]?_0x139cbb[_0x2f3954(0x457)]?_0x139cbb['detail'][_0x2f3954(0x2eb)]():'':null;let _0x5a736b=_0x4ac836['messages'][_0x2f3954(0x77d)](_0x35cbb8=>_0x35cbb8[_0x2f3954(0x4ff)]===_0x304bee[_0x2f3954(0x4ff)]);_0x5a736b!==-0x1&&(_0x4ac836[_0x2f3954(0x6ae)][_0x5a736b][_0x2f3954(0x5c4)]=!0x0);let _0x2f475e={'$push':{'messagesSend':_0x3d5df1},'$set':{'messages.$[elem].triedToSend':!0x0}},_0xacfb1a=[{'elem._id':_0x304bee[_0x2f3954(0x4ff)]}];if(this[_0x2f3954(0x738)][_0x2f3954(0x1a9)](this[_0x2f3954(0x2af)]+'\x20('+this[_0x2f3954(0x448)][_0x2f3954(0x219)]+_0x2f3954(0x7d1)+_0x304bee[_0x2f3954(0x4ff)]),_0x7de5cd=await this['repository'][_0x2f3954(0x674)]['updateOne']({'_id':_0x4ac836[_0x2f3954(0x4ff)]},_0x2f475e,this[_0x2f3954(0x448)][_0x2f3954(0x219)],{'arrayFilters':_0xacfb1a}),_0x139cbb[_0x2f3954(0x3a7)]){this['logger']['error'](this[_0x2f3954(0x2af)]+'\x20('+this[_0x2f3954(0x448)][_0x2f3954(0x219)]+_0x2f3954(0x42e)+_0x139cbb['detail']);continue;}let _0xb4e495=this[_0x2f3954(0x439)](_0x4ac836['delaySecMin'],_0x4ac836['delaySecMax']);await this[_0x2f3954(0x607)](_0xb4e495);}catch(_0x28b7f6){this[_0x2f3954(0x738)][_0x2f3954(0x3a7)](this[_0x2f3954(0x2af)]+'\x20('+this[_0x2f3954(0x448)]['wuid']+_0x2f3954(0x518)+_0x304bee[_0x2f3954(0x6d5)]+':\x20'+(_0x28b7f6 instanceof Error?_0x28b7f6[_0x2f3954(0x4ab)]:JSON[_0x2f3954(0x5e5)](_0x28b7f6,null,0x2))),_0x3d5df1['error']=!0x0,_0x3d5df1[_0x2f3954(0x5fc)]=_0x28b7f6[_0x2f3954(0x4ab)];let _0x7700e4=_0x4ac836[_0x2f3954(0x6ae)]['findIndex'](_0x199fa0=>_0x199fa0[_0x2f3954(0x4ff)]===_0x304bee[_0x2f3954(0x4ff)]);_0x7700e4!==-0x1&&(_0x4ac836[_0x2f3954(0x6ae)][_0x7700e4][_0x2f3954(0x5c4)]=!0x0);let _0x5b4dc7={'$push':{'messagesSend':_0x3d5df1},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x45edf7=[{'elem._id':_0x304bee[_0x2f3954(0x4ff)]}];this['logger'][_0x2f3954(0x1a9)](this['instanceName']+'\x20('+this[_0x2f3954(0x448)][_0x2f3954(0x219)]+_0x2f3954(0x611)+_0x304bee['_id']),_0x7de5cd=await this['repository'][_0x2f3954(0x674)]['updateOne']({'_id':_0x4ac836[_0x2f3954(0x4ff)]},_0x5b4dc7,this[_0x2f3954(0x448)]['wuid'],{'arrayFilters':_0x45edf7});}finally{if(_0x7de5cd&&_0x7de5cd[_0x2f3954(0x233)]===_0x2f3954(0x4b9)){this[_0x2f3954(0x738)]['warn'](this[_0x2f3954(0x2af)]+'\x20('+this[_0x2f3954(0x448)][_0x2f3954(0x219)]+_0x2f3954(0x7d3)+_0x304bee[_0x2f3954(0x4ff)]+_0x2f3954(0x1cf));break;}let _0x55defa=_0x7de5cd[_0x2f3954(0x6ae)][_0x2f3954(0x7a1)](_0x5c8034=>_0x5c8034[_0x2f3954(0x4ff)]===_0x304bee['_id']);if(_0x55defa&&!_0x55defa[_0x2f3954(0x5c4)]){let _0x22cf5d={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x421426=[{'elem._id':_0x304bee['_id']}];await this['repository'][_0x2f3954(0x674)][_0x2f3954(0x7b6)]({'_id':_0x7de5cd['_id']},_0x22cf5d,this[_0x2f3954(0x448)][_0x2f3954(0x219)],{'arrayFilters':_0x421426});}if(this[_0x2f3954(0x169)]=_0x7de5cd[_0x2f3954(0x6ae)][_0x2f3954(0x34f)](_0x845629=>!_0x845629[_0x2f3954(0x5c4)]),_0x2cd518=this[_0x2f3954(0x169)]['length']===0x0,_0x7de5cd[_0x2f3954(0x267)]!==this[_0x2f3954(0x267)]){this[_0x2f3954(0x738)][_0x2f3954(0x1a9)](this['instanceName']+'\x20('+this['instance'][_0x2f3954(0x219)]+_0x2f3954(0x702));return;}this[_0x2f3954(0x448)][_0x2f3954(0x6e2)][_0x2f3954(0x263)]=_0x7de5cd;}}this[_0x2f3954(0x169)]=[];let _0x1adb96=await this['repository'][_0x2f3954(0x674)][_0x2f3954(0x5e1)](_0x4ac836[_0x2f3954(0x4ff)],this[_0x2f3954(0x448)][_0x2f3954(0x219)]);if(_0x2cd518=_0x1adb96[_0x2f3954(0x6ae)][_0x2f3954(0x302)](_0x3f53cc=>_0x3f53cc['triedToSend']),_0x2cd518&&_0x1adb96[_0x2f3954(0x233)]!=='stopped'){let _0x110f1e={'$set':{'status':_0x2f3954(0x74d)}};await this['repository'][_0x2f3954(0x674)]['updateOneById'](_0x1adb96[_0x2f3954(0x4ff)],_0x110f1e,this[_0x2f3954(0x448)][_0x2f3954(0x219)]);}await new Promise(_0x184d26=>setTimeout(_0x184d26,_0x5565c1)),global['gc']?global['gc']():console[_0x2f3954(0x1a9)](_0x2f3954(0x164));}this['processUUID']=null;},_0x58d3fb=async()=>{const _0x2d90d9=_0x4c5af6;let _0xf0fe50=new Date(Date[_0x2d90d9(0x183)]()-0x2932e00),_0xb7a872={'where':{'status':_0x2d90d9(0x51f),'$or':[{'when':{'$lte':new Date(),'$gte':_0xf0fe50}},{'when':0x0}]}},_0x5f39fa=await this['repository'][_0x2d90d9(0x674)][_0x2d90d9(0x7ac)](_0xb7a872,this[_0x2d90d9(0x448)][_0x2d90d9(0x219)]);_0x5f39fa&&_0x5f39fa[_0x2d90d9(0x44e)]-Date['now']()<=0x6ddd00?this[_0x2d90d9(0x448)][_0x2d90d9(0x6e2)]['delayMessage']=_0x5f39fa[_0x2d90d9(0x44e)]-Date[_0x2d90d9(0x183)]():this['instance'][_0x2d90d9(0x6e2)][_0x2d90d9(0x771)]=(0x3c+Math[_0x2d90d9(0x3e0)](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x2d90d9(0x448)][_0x2d90d9(0x6e2)]['delayMessage']=Math[_0x2d90d9(0x464)](this[_0x2d90d9(0x448)]['ScheduleMessage'][_0x2d90d9(0x771)],0x1*0x2*0x3e8);let _0x459648=Math['round'](this[_0x2d90d9(0x448)][_0x2d90d9(0x6e2)][_0x2d90d9(0x771)]/0xea60);if(_0x5f39fa){let _0x2b5b8f=new Date(_0x5f39fa[_0x2d90d9(0x44e)])['toLocaleString']();this[_0x2d90d9(0x738)]['warn'](this[_0x2d90d9(0x2af)]+'\x20('+this[_0x2d90d9(0x448)][_0x2d90d9(0x219)]+_0x2d90d9(0x4bc)+_0x2b5b8f+_0x2d90d9(0x1ed)+_0x459648+'\x20minutos');}else this[_0x2d90d9(0x738)]['warn'](this['instanceName']+'\x20('+this[_0x2d90d9(0x448)]['wuid']+_0x2d90d9(0x6c8)+_0x459648+'\x20minutos');setTimeout(()=>this[_0x2d90d9(0x24b)](),this[_0x2d90d9(0x448)][_0x2d90d9(0x6e2)][_0x2d90d9(0x771)]);};if(this[_0x4c5af6(0x448)][_0x4c5af6(0x6e2)][_0x4c5af6(0x263)]){await this[_0x4c5af6(0x59f)](),_0x193caf();return;}if(!this['instance'][_0x4c5af6(0x6e2)][_0x4c5af6(0x2b2)]){this[_0x4c5af6(0x738)]['warn'](this['instanceName']+'\x20('+this[_0x4c5af6(0x448)][_0x4c5af6(0x219)]+_0x4c5af6(0x5a9)),this[_0x4c5af6(0x448)]['ScheduleMessage'][_0x4c5af6(0x263)]=null,this[_0x4c5af6(0x448)]['ScheduleMessage'][_0x4c5af6(0x402)]=0x0,this[_0x4c5af6(0x448)]['ScheduleMessage'][_0x4c5af6(0x771)]=0x0;return;}try{let _0x59b28d=await _0x4c1f92();_0x59b28d[_0x4c5af6(0x3c8)]===0x0?this[_0x4c5af6(0x738)][_0x4c5af6(0x1a9)](this['instanceName']+'\x20('+this[_0x4c5af6(0x448)]['wuid']+_0x4c5af6(0xee)):(this[_0x4c5af6(0x448)]['ScheduleMessage'][_0x4c5af6(0x263)]=_0x59b28d[0x0],await _0x1b64f4(_0x59b28d)),await _0x58d3fb(),this[_0x4c5af6(0x448)][_0x4c5af6(0x6e2)][_0x4c5af6(0x263)]=null;}catch(_0x3e1584){this[_0x4c5af6(0x738)][_0x4c5af6(0x3a7)]('Error\x20in\x20scheduleNextCheck:\x20'+(_0x3e1584 instanceof Error?_0x3e1584['message']:JSON[_0x4c5af6(0x5e5)](_0x3e1584,null,0x2)));}});}[a0_0x3b8fac(0x439)](_0x589e20,_0xf5b6da){const _0x299312=a0_0x3b8fac;return _0x589e20=Math[_0x299312(0x464)](0.5,_0x589e20),_0xf5b6da=Math['min'](Math[_0x299312(0x464)](0x3,_0xf5b6da),0x78),Math[_0x299312(0x3e0)](Math['random']()*(_0xf5b6da-_0x589e20+0x1)+_0x589e20)*0x3e8;}[a0_0x3b8fac(0x607)](_0x5861aa){return new Promise(_0x460f0d=>setTimeout(_0x460f0d,_0x5861aa));}async[a0_0x3b8fac(0x66d)](_0x116549){const _0x31514f=a0_0x3b8fac;if(!this[_0x31514f(0x351)]&&(await this[_0x31514f(0x407)](),!this['AutomateSystem']))return null;_0x116549=this['createJid'](_0x116549);let _0x5f1434=await this['repository'][_0x31514f(0x273)][_0x31514f(0x7ac)]({'where':{'_id':_0x116549}},this[_0x31514f(0x448)][_0x31514f(0x219)]),_0x735fd1={};if(_0x5f1434&&_0x5f1434[_0x31514f(0x79e)]){let _0x382c4e=_0x5f1434[_0x31514f(0x79e)];typeof _0x382c4e['nome']==_0x31514f(0x20d)&&(_0x735fd1['nome']=_0x382c4e[_0x31514f(0x408)]),typeof _0x382c4e[_0x31514f(0x34c)]==_0x31514f(0x20d)&&(_0x735fd1['nomecompleto']=_0x382c4e[_0x31514f(0x34c)]),typeof _0x382c4e[_0x31514f(0x6b0)]==_0x31514f(0x20d)&&(_0x735fd1[_0x31514f(0x6b0)]=_0x382c4e[_0x31514f(0x6b0)]),typeof _0x382c4e[_0x31514f(0x2ef)]=='string'&&(_0x735fd1[_0x31514f(0x2ef)]=_0x382c4e[_0x31514f(0x2ef)]),typeof _0x382c4e['status']==_0x31514f(0x20d)&&(_0x735fd1[_0x31514f(0x233)]=_0x382c4e[_0x31514f(0x233)]),typeof _0x382c4e[_0x31514f(0x5a6)]==_0x31514f(0x20d)&&(_0x735fd1['notas']=_0x382c4e[_0x31514f(0x5a6)]),typeof _0x382c4e[_0x31514f(0x429)]==_0x31514f(0x20d)&&(_0x735fd1['responsavelid']=_0x382c4e[_0x31514f(0x429)]),Array[_0x31514f(0x338)](_0x382c4e[_0x31514f(0x1df)])&&(_0x735fd1[_0x31514f(0x1df)]=_0x382c4e[_0x31514f(0x1df)][_0x31514f(0x4c9)](',\x20')),Array[_0x31514f(0x338)](_0x382c4e[_0x31514f(0x1b0)])&&(_0x735fd1[_0x31514f(0x1b0)]=_0x382c4e[_0x31514f(0x1b0)][_0x31514f(0x4c9)](',\x20'));}return _0x5f1434&&_0x5f1434[_0x31514f(0x79e)]&&_0x5f1434[_0x31514f(0x79e)][_0x31514f(0x51b)]&&_0x5f1434[_0x31514f(0x79e)][_0x31514f(0x51b)]['forEach'](_0x302803=>{const _0x325ac2=_0x31514f;let _0x35e4df=this['AutomateSystem']?.[_0x325ac2(0x51b)][_0x325ac2(0x7a1)](_0x8209c0=>_0x8209c0[_0x325ac2(0x4ff)]===_0x302803['_id']);_0x35e4df&&(_0x735fd1[_0x35e4df['name']]=_0x302803[_0x325ac2(0x7a0)]);}),_0x735fd1;}async['replaceVariablesChat'](_0x4d0d90,_0x22f132){const _0x152883=a0_0x3b8fac;try{let _0x1029da=await this[_0x152883(0x66d)](_0x22f132);return this[_0x152883(0x15c)](_0x4d0d90,_0x1029da);}catch(_0x423e53){return this[_0x152883(0x738)][_0x152883(0x3a7)](_0x152883(0xb4)+_0x22f132+':\x20'+_0x423e53),_0x4d0d90;}}async[a0_0x3b8fac(0x3d1)](){const _0x408109=a0_0x3b8fac;let _0x2b90a8=async(_0x185650,_0x549d3d)=>{const _0xce7dcc=a0_0x56c3;let _0x572ed7=(await this[_0xce7dcc(0x610)][_0xce7dcc(0x674)][_0xce7dcc(0x7a1)]({'where':{'type':_0x185650}},this['instance'][_0xce7dcc(0x219)]))[_0xce7dcc(0x23a)](async _0x2029ee=>{const _0x52bc98=_0xce7dcc;let _0x264daa=_0x549d3d(_0x2029ee),_0x31e63c=_0x92d8de=>/^\d+$/[_0x52bc98(0x4e2)](_0x92d8de),_0x22a36d=_0x2029ee['remoteJids']['filter'](_0x3c9945=>_0x3c9945[_0x52bc98(0x64c)](_0x52bc98(0x482))?_0x3c9945[_0x52bc98(0x3c8)]>0x19:_0x3c9945[_0x52bc98(0x64c)](_0x52bc98(0x78a))?_0x3c9945['length']>0xf:_0x31e63c(_0x3c9945)?_0x3c9945['length']>=0xb:!0x1)[_0x52bc98(0x23a)](_0x5e8a6d=>({'_id':(0x0,X['v4'])(),'idSchedule':_0x2029ee[_0x52bc98(0x4ff)],'type':_0x264daa,'remoteJid':_0x5e8a6d,'flow':_0x2029ee[_0x52bc98(0x630)],'text':_0x2029ee[_0x52bc98(0x4ab)]?.[_0x52bc98(0x284)],'delay':_0x2029ee[_0x52bc98(0x4ab)]?.['delay'],'urlOrBase64':_0x2029ee[_0x52bc98(0x4ab)]?.[_0x52bc98(0x12e)],'linkPreview':_0x2029ee[_0x52bc98(0x4ab)]?.['linkPreview'],'fileName':_0x2029ee[_0x52bc98(0x4ab)]?.[_0x52bc98(0x35c)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x52bc98(0x610)][_0x52bc98(0x674)][_0x52bc98(0x72f)](_0x2029ee['_id'],{'$set':{'messages':_0x22a36d},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x52bc98(0x448)][_0x52bc98(0x219)]);}catch(_0x24967a){console[_0x52bc98(0x3a7)](_0x52bc98(0x449)+_0x2029ee[_0x52bc98(0x4ff)]+':',_0x24967a);}});await Promise['all'](_0x572ed7);};await _0x2b90a8(_0x408109(0x284),_0xdc12c5=>_0x408109(0x284)),await _0x2b90a8('media',_0x2f789c=>_0x2f789c['message']?.[_0x408109(0x6e8)]||_0x408109(0x14f)),await _0x2b90a8('audio',_0x219df6=>_0x408109(0x3bc)),await _0x2b90a8(_0x408109(0x297),_0x349368=>_0x408109(0x297)),await _0x2b90a8(_0x408109(0x410),_0x47dd85=>_0x408109(0x410)),await _0x2b90a8(_0x408109(0x136),_0x209b57=>_0x408109(0x136)),await _0x2b90a8(_0x408109(0x51c),_0x3d2b04=>_0x408109(0x51c)),this['logger'][_0x408109(0x1a9)](this[_0x408109(0x2af)]+'\x20('+this[_0x408109(0x448)][_0x408109(0x219)]+'):\x20Transformao\x20de\x20mensagens\x20agendadas\x20concluda!');}async[a0_0x3b8fac(0x473)](_0x417c9f){const _0x16220a=a0_0x3b8fac;try{if(this['logger'][_0x16220a(0x1a9)](this[_0x16220a(0x2af)]+'\x20('+this[_0x16220a(0x448)]['wuid']+_0x16220a(0x9c)),_0x417c9f[_0x16220a(0x4ff)]||(_0x417c9f['_id']=(0x0,X['v4'])()),this[_0x16220a(0x448)][_0x16220a(0x6e2)][_0x16220a(0x263)]?.[_0x16220a(0x4ff)]===_0x417c9f[_0x16220a(0x4ff)]?.['toString']()&&_0x417c9f[_0x16220a(0x233)]!=='stopped')throw new Error(_0x16220a(0x139));if(_0x417c9f[_0x16220a(0x23f)]&&_0x417c9f[_0x16220a(0x4ff)]){let _0x5a7e7c=await this['repository'][_0x16220a(0x674)]['deleteOne'](_0x417c9f['_id'],this[_0x16220a(0x448)][_0x16220a(0x219)]);return setTimeout(()=>this[_0x16220a(0x24b)](),0x7d0),_0x5a7e7c;}let _0x1662e6=null;if(_0x417c9f[_0x16220a(0x4ff)]&&(_0x1662e6=await this['repository'][_0x16220a(0x674)][_0x16220a(0x5e1)](_0x417c9f['_id'],this['instance'][_0x16220a(0x219)])),_0x1662e6){let {_id:_0x3bbb55,owner:_0x586f25,messages:_0x503157,..._0x3c6b94}=_0x417c9f;if(_0x503157){let _0x2de162=_0x503157[_0x16220a(0x34f)](_0xe832f7=>!_0xe832f7[_0x16220a(0x4ff)]),_0x1863ef=_0x503157[_0x16220a(0x34f)](_0x201c7e=>_0x201c7e[_0x16220a(0x4ff)]&&!_0x201c7e[_0x16220a(0x23f)]),_0x8e3029=_0x503157[_0x16220a(0x34f)](_0x271adf=>_0x271adf[_0x16220a(0x4ff)]&&_0x271adf['delete']);if(_0x2de162[_0x16220a(0x3c8)]>0x0&&await this[_0x16220a(0x769)](_0x417c9f[_0x16220a(0x4ff)],_0x2de162),_0x1863ef[_0x16220a(0x3c8)]>0x0&&await this[_0x16220a(0x787)]({'_id':_0x417c9f[_0x16220a(0x4ff)],'messages':_0x1863ef}),_0x8e3029[_0x16220a(0x3c8)]>0x0){let _0x230a53=_0x8e3029[_0x16220a(0x23a)](_0x32b78b=>({'updateOne':{'filter':{'_id':_0x417c9f['_id']},'update':{'$pull':{'messages':{'_id':_0x32b78b['_id']}}}}}));await this[_0x16220a(0x610)][_0x16220a(0x674)][_0x16220a(0x352)](_0x230a53,this['instance'][_0x16220a(0x219)]);}}let _0x4be8c9={'$set':{..._0x3c6b94,'status':_0x417c9f[_0x16220a(0x233)]||_0x1662e6[_0x16220a(0x233)]}},_0x1133dc=await this['repository'][_0x16220a(0x674)][_0x16220a(0x72f)](_0x417c9f['_id'],_0x4be8c9,this[_0x16220a(0x448)][_0x16220a(0x219)]);return _0x1133dc&&(this[_0x16220a(0x130)](_0x1133dc['messages']),await this[_0x16220a(0x610)][_0x16220a(0x674)][_0x16220a(0x72f)](_0x1133dc[_0x16220a(0x4ff)],{'$set':{'messages':_0x1133dc[_0x16220a(0x6ae)]}},this[_0x16220a(0x448)][_0x16220a(0x219)])),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),await this[_0x16220a(0x3d1)](),_0x1133dc;}else{_0x417c9f[_0x16220a(0x7a2)]=this['instance'][_0x16220a(0x219)],_0x417c9f[_0x16220a(0x6ae)]&&_0x417c9f[_0x16220a(0x6ae)][_0x16220a(0x73e)](_0x24a7d0=>{const _0x5c46d5=_0x16220a;_0x24a7d0[_0x5c46d5(0x4ff)]||(_0x24a7d0[_0x5c46d5(0x4ff)]=(0x0,X['v4'])()),_0x24a7d0['idSchedule']||(_0x24a7d0['idSchedule']=_0x417c9f[_0x5c46d5(0x4ff)]),delete _0x24a7d0[_0x5c46d5(0x5c4)];});let _0x374cc8=await this[_0x16220a(0x610)][_0x16220a(0x674)]['createAndSave'](_0x417c9f,this[_0x16220a(0x448)][_0x16220a(0x219)]);return _0x374cc8&&(this[_0x16220a(0x130)](_0x374cc8[_0x16220a(0x6ae)]),await this[_0x16220a(0x610)]['scheduleMessage'][_0x16220a(0x72f)](_0x374cc8['_id'],{'$set':{'messages':_0x374cc8[_0x16220a(0x6ae)]}},this[_0x16220a(0x448)][_0x16220a(0x219)])),setTimeout(()=>this[_0x16220a(0x24b)](),0x7d0),_0x374cc8;}}catch(_0x4707c9){let _0x2ef8ce=_0x16220a(0x317),_0x2178dc=_0x4707c9 instanceof Error?_0x4707c9['message']:typeof _0x4707c9=='object'?JSON[_0x16220a(0x5e5)](_0x4707c9):_0x4707c9,_0x2fb71c=_0x2ef8ce+':\x20'+_0x2178dc;throw this['logger'][_0x16220a(0x3a7)](this[_0x16220a(0x2af)]+'\x20('+this[_0x16220a(0x448)]['wuid']+_0x16220a(0x3a8)+_0x2fb71c),new m(_0x2fb71c);}}async[a0_0x3b8fac(0x769)](_0x44829d,_0x1f6c02){const _0x38ff03=a0_0x3b8fac;try{this[_0x38ff03(0x738)][_0x38ff03(0x592)](this[_0x38ff03(0x2af)]+'\x20('+this[_0x38ff03(0x448)][_0x38ff03(0x219)]+_0x38ff03(0x368)),_0x1f6c02[_0x38ff03(0x73e)](_0x1fe539=>{const _0x210465=_0x38ff03;_0x1fe539[_0x210465(0x4ff)]||(_0x1fe539['_id']=(0x0,X['v4'])()),_0x1fe539[_0x210465(0x37c)]||(_0x1fe539['idSchedule']=_0x44829d),delete _0x1fe539['triedToSend'];});let _0x26c5c1={'$push':{'messages':{'$each':_0x1f6c02}}},_0x1efe25=await this[_0x38ff03(0x610)][_0x38ff03(0x674)][_0x38ff03(0x72f)](_0x44829d,_0x26c5c1,this[_0x38ff03(0x448)][_0x38ff03(0x219)]);return _0x1efe25&&(this['reorderMessages'](_0x1efe25[_0x38ff03(0x6ae)]),await this['repository']['scheduleMessage'][_0x38ff03(0x72f)](_0x1efe25[_0x38ff03(0x4ff)],{'$set':{'messages':_0x1efe25[_0x38ff03(0x6ae)]}},this['instance'][_0x38ff03(0x219)])),_0x1efe25;}catch(_0x4ecdc2){let _0x79d1e8=_0x38ff03(0x3ae),_0x2667b2=_0x4ecdc2 instanceof Error?_0x4ecdc2['message']:typeof _0x4ecdc2=='object'?JSON[_0x38ff03(0x5e5)](_0x4ecdc2):_0x4ecdc2,_0x22b842=_0x79d1e8+':\x20'+_0x2667b2;throw this[_0x38ff03(0x738)][_0x38ff03(0x3a7)](this[_0x38ff03(0x2af)]+'\x20('+this['instance'][_0x38ff03(0x219)]+_0x38ff03(0x3a8)+_0x22b842),new m(_0x22b842);}}async[a0_0x3b8fac(0x787)](_0x63d40f){const _0x2e8e41=a0_0x3b8fac;try{if(this[_0x2e8e41(0x738)][_0x2e8e41(0x592)](this[_0x2e8e41(0x2af)]+'\x20('+this['instance'][_0x2e8e41(0x219)]+_0x2e8e41(0x789)),!_0x63d40f[_0x2e8e41(0x4ff)]||!_0x63d40f[_0x2e8e41(0x6ae)])throw new Error('Dados\x20invlidos\x20para\x20edio\x20de\x20mensagens\x20no\x20grupo.');let _0x4301fa=_0x63d40f[_0x2e8e41(0x4ff)],_0x2b590b=_0x63d40f[_0x2e8e41(0x6ae)],_0x4bb9fd=_0x2b590b[_0x2e8e41(0x34f)](_0x47925d=>!_0x47925d[_0x2e8e41(0x23f)])['map'](_0x23a6e3=>{const _0x281618=_0x2e8e41;let _0x1b68bc=_0x23a6e3['_id'];if(!_0x1b68bc)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edio.');return _0x23a6e3[_0x281618(0x37c)]||(_0x23a6e3[_0x281618(0x37c)]=_0x4301fa),delete _0x23a6e3['triedToSend'],{'updateOne':{'filter':{'_id':_0x4301fa,'messages._id':_0x1b68bc},'update':{'$set':{'messages.$[elem]':_0x23a6e3}},'arrayFilters':[{'elem._id':_0x1b68bc}]}};}),_0xea000a=_0x2b590b['filter'](_0xf34860=>_0xf34860[_0x2e8e41(0x23f)])[_0x2e8e41(0x23a)](_0x4c1af3=>{const _0x554d27=_0x2e8e41;let _0x47d995=_0x4c1af3['_id'];if(!_0x47d995)throw new Error(_0x554d27(0xd8));return{'updateOne':{'filter':{'_id':_0x4301fa},'update':{'$pull':{'messages':{'_id':_0x47d995}}}}};}),_0x5b5203=[..._0x4bb9fd,..._0xea000a],_0x3a822e=await this['repository']['scheduleMessage'][_0x2e8e41(0x352)](_0x5b5203,this[_0x2e8e41(0x448)]['wuid']),_0x19b4b4=await this[_0x2e8e41(0x610)][_0x2e8e41(0x674)][_0x2e8e41(0x5e1)](_0x4301fa,this['instance']['wuid']);return _0x19b4b4&&(this[_0x2e8e41(0x130)](_0x19b4b4[_0x2e8e41(0x6ae)]),await this[_0x2e8e41(0x610)][_0x2e8e41(0x674)][_0x2e8e41(0x72f)](_0x19b4b4[_0x2e8e41(0x4ff)],{'$set':{'messages':_0x19b4b4['messages']}},this[_0x2e8e41(0x448)][_0x2e8e41(0x219)])),_0x19b4b4;}catch(_0x4b3f44){let _0x1d79d2=_0x2e8e41(0x91),_0x5945b2=_0x4b3f44 instanceof Error?_0x4b3f44[_0x2e8e41(0x4ab)]:typeof _0x4b3f44==_0x2e8e41(0x4f6)?JSON[_0x2e8e41(0x5e5)](_0x4b3f44):_0x4b3f44,_0x3992b5=_0x1d79d2+':\x20'+_0x5945b2;throw this[_0x2e8e41(0x738)][_0x2e8e41(0x3a7)](this['instanceName']+'\x20('+this[_0x2e8e41(0x448)][_0x2e8e41(0x219)]+_0x2e8e41(0x3a8)+_0x3992b5),new m(_0x3992b5);}}async['deleteDoneMessages'](){const _0x484201=a0_0x3b8fac;try{let _0x32e1c0={'status':'done'},_0x1d4405=await this[_0x484201(0x610)][_0x484201(0x674)][_0x484201(0x57b)](_0x32e1c0,this[_0x484201(0x448)]['wuid']);if(!_0x1d4405[_0x484201(0x3a7)])this[_0x484201(0x738)][_0x484201(0x592)](this[_0x484201(0x2af)]+'\x20('+this[_0x484201(0x448)][_0x484201(0x219)]+_0x484201(0x660));else throw new Error(_0x1d4405['error'][_0x484201(0x4ab)]||_0x484201(0x404));return this[_0x484201(0x335)]();}catch(_0x5c4cdd){let _0x31f034=_0x484201(0x5b6),_0x3199bf=_0x5c4cdd instanceof Error?_0x5c4cdd[_0x484201(0x4ab)]:typeof _0x5c4cdd==_0x484201(0x4f6)?JSON[_0x484201(0x5e5)](_0x5c4cdd):_0x5c4cdd,_0x3d8fc1=_0x31f034+':\x20'+_0x3199bf;throw this[_0x484201(0x738)][_0x484201(0x3a7)](this['instanceName']+'\x20('+this[_0x484201(0x448)][_0x484201(0x219)]+_0x484201(0x3a8)+_0x3d8fc1),new m(_0x3d8fc1);}}async[a0_0x3b8fac(0x335)](){const _0x2fbe0d=a0_0x3b8fac;try{return await this[_0x2fbe0d(0x610)][_0x2fbe0d(0x674)]['find']({'where':{}},this[_0x2fbe0d(0x448)]['wuid']);}catch(_0x569e93){let _0x330d1c='Erro\x20ao\x20buscar\x20Schedule\x20Messages',_0x147992=_0x569e93 instanceof Error?_0x569e93[_0x2fbe0d(0x4ab)]:typeof _0x569e93==_0x2fbe0d(0x4f6)?JSON[_0x2fbe0d(0x5e5)](_0x569e93):_0x569e93,_0x47b7bf=_0x330d1c+':\x20'+_0x147992;throw this[_0x2fbe0d(0x738)][_0x2fbe0d(0x3a7)](this[_0x2fbe0d(0x2af)]+'\x20('+this[_0x2fbe0d(0x448)][_0x2fbe0d(0x219)]+_0x2fbe0d(0x3a8)+_0x47b7bf),new m(_0x47b7bf);}}[a0_0x3b8fac(0x130)](_0x3d1388){const _0x24253b=a0_0x3b8fac;_0x3d1388[_0x24253b(0x77f)]((_0x1564f9,_0x37684d)=>_0x1564f9['order']-_0x37684d['order']),_0x3d1388[_0x24253b(0x73e)]((_0x2a70ab,_0x2f4007)=>{const _0x3f65d2=_0x24253b;_0x2a70ab[_0x3f65d2(0x1b3)]=_0x2f4007+0x1;});}async[a0_0x3b8fac(0x6ed)](_0xd8154e,_0x4e2cf0){const _0x3b14a4=a0_0x3b8fac;try{if(!_0x4e2cf0)return this[_0x3b14a4(0x738)][_0x3b14a4(0x3a7)](this[_0x3b14a4(0x2af)]+'\x20('+this['instance'][_0x3b14a4(0x219)]+_0x3b14a4(0x2b7)),{'error':!0x0,'detail':_0x3b14a4(0x1ca)};if(_0x4e2cf0[_0x3b14a4(0x1a2)]==='flow'&&!this[_0x3b14a4(0x351)]?.[_0x3b14a4(0x2a4)][_0x3b14a4(0x1d1)])return this[_0x3b14a4(0x738)][_0x3b14a4(0x3a7)](this[_0x3b14a4(0x2af)]+'\x20('+this['instance']['wuid']+_0x3b14a4(0x1d8)),{'error':!0x0,'detail':_0x3b14a4(0x6ef)};switch(_0x4e2cf0[_0x3b14a4(0x1a2)]){case _0x3b14a4(0x284):return await this[_0x3b14a4(0x735)](_0x4e2cf0,_0xd8154e);case _0x3b14a4(0x136):case _0x3b14a4(0x410):case _0x3b14a4(0x51c):return await this[_0x3b14a4(0x490)](_0x4e2cf0,_0xd8154e);case _0x3b14a4(0x3bc):return await this['scheduleSendAudio'](_0x4e2cf0,_0xd8154e);case _0x3b14a4(0x297):let _0x3feee2=new Ke();return _0x3feee2['name']=_0x4e2cf0[_0x3b14a4(0x297)],_0x3feee2[_0x3b14a4(0x6d5)]=_0xd8154e,await this['startFlow'](_0x3feee2);default:return this[_0x3b14a4(0x738)][_0x3b14a4(0x3a7)](this[_0x3b14a4(0x2af)]+'\x20('+this[_0x3b14a4(0x448)][_0x3b14a4(0x219)]+_0x3b14a4(0x320)+_0x4e2cf0['type']),{'error':!0x0,'detail':_0x3b14a4(0x204)};}}catch(_0x3d5849){return this['logger'][_0x3b14a4(0x3a7)](this[_0x3b14a4(0x2af)]+'\x20('+this['instance'][_0x3b14a4(0x219)]+_0x3b14a4(0x673)+(_0x3d5849 instanceof Error?_0x3d5849[_0x3b14a4(0x4ab)]:JSON[_0x3b14a4(0x5e5)](_0x3d5849,null,0x2))),{'error':!0x0,'detail':_0x3d5849[_0x3b14a4(0x4ab)]};}}async['scheduleSendText'](_0x181e25,_0x36093d){const _0x5b13f7=a0_0x3b8fac;if(this[_0x5b13f7(0x738)][_0x5b13f7(0x592)](this['instanceName']+'\x20('+this[_0x5b13f7(0x448)][_0x5b13f7(0x219)]+_0x5b13f7(0x1ae)+_0x36093d+'\x27'),!_0x181e25['text']||_0x181e25[_0x5b13f7(0x284)][_0x5b13f7(0x3c8)]===0x0)return{'error':!0x0,'detail':_0x5b13f7(0x5fa)};let _0x336c93=await this[_0x5b13f7(0x38b)](_0x181e25[_0x5b13f7(0x284)],_0x36093d),_0x4af212={'number':_0x36093d,'options':{'delay':_0x181e25[_0x5b13f7(0x332)],'linkPreview':_0x181e25[_0x5b13f7(0x4fe)]},'textMessage':{'text':_0x336c93}},_0xf22e62=null;try{let _0x506b56=await this['textMessage'](_0x4af212);if(_0x506b56&&_0x506b56[_0x5b13f7(0x233)])return{'error':!0x1,'id':_0x506b56[_0x5b13f7(0x3fb)]['id']};_0xf22e62=JSON[_0x5b13f7(0x5e5)](_0x506b56),this[_0x5b13f7(0x738)]['verbose'](this[_0x5b13f7(0x2af)]+'\x20('+this[_0x5b13f7(0x448)][_0x5b13f7(0x219)]+'):\x20'+_0xf22e62);}catch(_0x3fd1df){this[_0x5b13f7(0x738)]['error'](this[_0x5b13f7(0x2af)]+'\x20('+this[_0x5b13f7(0x448)][_0x5b13f7(0x219)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+(_0x3fd1df instanceof Error?_0x3fd1df['message']:JSON[_0x5b13f7(0x5e5)](_0x3fd1df,null,0x2))),_0xf22e62=_0x3fd1df[_0x5b13f7(0x4ab)];}if(_0xf22e62)return{'error':!0x0,'detail':(typeof _0xf22e62==_0x5b13f7(0x4f6)?JSON[_0x5b13f7(0x5e5)](_0xf22e62,null,0x2):_0xf22e62)[_0x5b13f7(0x1c6)](/[\[\]{}\n]/g,'\x20')[_0x5b13f7(0x1c6)](/  +/g,'\x20')};}async[a0_0x3b8fac(0x490)](_0x1cf6a0,_0x58bb8d){const _0x59ab0d=a0_0x3b8fac;this[_0x59ab0d(0x738)]['verbose'](this['instanceName']+'\x20('+this[_0x59ab0d(0x448)][_0x59ab0d(0x219)]+_0x59ab0d(0x5fe)+_0x58bb8d+'\x27');let _0x497988;_0x1cf6a0[_0x59ab0d(0x284)]&&_0x1cf6a0['text'][_0x59ab0d(0x3c8)]>0x0&&(_0x497988=await this['replaceVariablesChat'](_0x1cf6a0[_0x59ab0d(0x284)],_0x58bb8d));let _0x31c028={'number':_0x58bb8d,'options':{'delay':_0x1cf6a0[_0x59ab0d(0x332)],'linkPreview':_0x1cf6a0[_0x59ab0d(0x4fe)]},'mediaMessage':{'mediatype':_0x1cf6a0['type'],'caption':_0x497988,'media':_0x1cf6a0[_0x59ab0d(0x12e)]}},_0x516dc3=null;try{let _0x317eb1=await this[_0x59ab0d(0x2fe)](_0x31c028);if(_0x317eb1&&_0x317eb1[_0x59ab0d(0x233)])return{'error':!0x1,'id':_0x317eb1['key']['id']};_0x516dc3=JSON[_0x59ab0d(0x5e5)](_0x317eb1),this[_0x59ab0d(0x738)][_0x59ab0d(0x592)](this['instanceName']+'\x20('+this[_0x59ab0d(0x448)][_0x59ab0d(0x219)]+_0x59ab0d(0x3a8)+_0x516dc3);}catch(_0x12376f){this[_0x59ab0d(0x738)]['error'](this['instanceName']+'\x20('+this[_0x59ab0d(0x448)]['wuid']+_0x59ab0d(0x717)+(_0x12376f instanceof Error?_0x12376f['message']:JSON[_0x59ab0d(0x5e5)](_0x12376f,null,0x2))),_0x516dc3=_0x12376f[_0x59ab0d(0x4ab)];}if(_0x516dc3)return{'error':!0x0,'detail':(typeof _0x516dc3==_0x59ab0d(0x4f6)?JSON['stringify'](_0x516dc3,null,0x2):_0x516dc3)[_0x59ab0d(0x1c6)](/[\[\]{}\n]/g,'\x20')[_0x59ab0d(0x1c6)](/  +/g,'\x20')};}async[a0_0x3b8fac(0x214)](_0x13e5fd,_0x40320f){const _0x5e103b=a0_0x3b8fac;this[_0x5e103b(0x738)][_0x5e103b(0x592)](this['instanceName']+'\x20('+this[_0x5e103b(0x448)][_0x5e103b(0x219)]+_0x5e103b(0x2d9)+_0x40320f+'\x27');let _0x4a57a5={'number':_0x40320f,'options':{'delay':_0x13e5fd['delay']},'audioMessage':{'audio':_0x13e5fd[_0x5e103b(0x12e)]}},_0x997a39=null;try{let _0x517158=await this[_0x5e103b(0x265)](_0x4a57a5);if(_0x517158&&_0x517158[_0x5e103b(0x233)])return{'error':!0x1,'id':_0x517158[_0x5e103b(0x3fb)]['id']};_0x997a39=JSON[_0x5e103b(0x5e5)](_0x517158),this[_0x5e103b(0x738)][_0x5e103b(0x592)](this[_0x5e103b(0x2af)]+'\x20('+this[_0x5e103b(0x448)][_0x5e103b(0x219)]+_0x5e103b(0x3a8)+_0x997a39);}catch(_0x413c96){this[_0x5e103b(0x738)]['error'](this[_0x5e103b(0x2af)]+'\x20('+this[_0x5e103b(0x448)][_0x5e103b(0x219)]+_0x5e103b(0x382)+(_0x413c96 instanceof Error?_0x413c96[_0x5e103b(0x4ab)]:JSON[_0x5e103b(0x5e5)](_0x413c96,null,0x2))),_0x997a39=_0x413c96[_0x5e103b(0x4ab)];}if(_0x997a39)return{'error':!0x0,'detail':(typeof _0x997a39==_0x5e103b(0x4f6)?JSON['stringify'](_0x997a39,null,0x2):_0x997a39)[_0x5e103b(0x1c6)](/[\[\]{}\n]/g,'\x20')[_0x5e103b(0x1c6)](/  +/g,'\x20')};}async[a0_0x3b8fac(0x291)](_0x319237){const _0xf80c7e=a0_0x3b8fac;try{return await this['client'][_0xf80c7e(0x43e)](_0x319237[_0xf80c7e(0x658)],_0x319237[_0xf80c7e(0x53f)]),{'update':_0xf80c7e(0x3a4)};}catch(_0x148bcb){let _0x38ea4d='Falha\x20ao\x20processar\x20a\x20solicitao\x20groupDesc',_0x2b4f4a=_0x148bcb instanceof Error?_0x148bcb[_0xf80c7e(0x4ab)]:typeof _0x148bcb==_0xf80c7e(0x4f6)?JSON[_0xf80c7e(0x5e5)](_0x148bcb):_0x148bcb,_0x5516ad=_0x38ea4d+':\x20'+_0x2b4f4a;throw this[_0xf80c7e(0x738)][_0xf80c7e(0x3a7)](this['instanceName']+'\x20('+this[_0xf80c7e(0x448)][_0xf80c7e(0x219)]+_0xf80c7e(0x3a8)+_0x5516ad),new x(_0x5516ad);}}async[a0_0x3b8fac(0x565)](_0x2eadf7){const _0x563284=a0_0x3b8fac;try{return await this[_0x563284(0x488)][_0x563284(0x643)](_0x2eadf7[_0x563284(0x658)],_0x2eadf7[_0x563284(0x26b)]),{'update':_0x563284(0x3a4)};}catch(_0xbb0ea6){let _0xbfb75c='Falha\x20ao\x20processar\x20a\x20solicitao\x20groupName',_0x37c25b=_0xbb0ea6 instanceof Error?_0xbb0ea6[_0x563284(0x4ab)]:typeof _0xbb0ea6==_0x563284(0x4f6)?JSON[_0x563284(0x5e5)](_0xbb0ea6):_0xbb0ea6,_0x5c9179=_0xbfb75c+':\x20'+_0x37c25b;throw this[_0x563284(0x738)][_0x563284(0x3a7)](this[_0x563284(0x2af)]+'\x20('+this[_0x563284(0x448)][_0x563284(0x219)]+_0x563284(0x3a8)+_0x5c9179),new x(_0x5c9179);}}async[a0_0x3b8fac(0x274)](_0x346f19){const _0xea8990=a0_0x3b8fac;try{let _0x21cf55=await this[_0xea8990(0x488)]['groupToggleEphemeral'](_0x346f19['groupJid'],_0x346f19[_0xea8990(0x1a7)]);return{'success':!0x0};}catch(_0x217570){let _0x4ba0af=_0xea8990(0xe6),_0x1e1055=_0x217570 instanceof Error?_0x217570[_0xea8990(0x4ab)]:typeof _0x217570==_0xea8990(0x4f6)?JSON[_0xea8990(0x5e5)](_0x217570):_0x217570,_0x10f9a3=_0x4ba0af+':\x20'+_0x1e1055;throw this['logger'][_0xea8990(0x3a7)](this[_0xea8990(0x2af)]+'\x20('+this[_0xea8990(0x448)][_0xea8990(0x219)]+_0xea8990(0x3a8)+_0x10f9a3),new x(_0x10f9a3);}}async[a0_0x3b8fac(0x2e0)](_0x112baa){const _0x2fa876=a0_0x3b8fac;try{return await this[_0x2fa876(0x488)]['groupSettingUpdate'](_0x112baa[_0x2fa876(0x658)],_0x112baa[_0x2fa876(0x41e)]),{'update':'success'};}catch(_0x24e490){let _0x43493e=_0x2fa876(0x303),_0xcc5b89=_0x24e490 instanceof Error?_0x24e490[_0x2fa876(0x4ab)]:typeof _0x24e490==_0x2fa876(0x4f6)?JSON[_0x2fa876(0x5e5)](_0x24e490):_0x24e490,_0x190dd5=_0x43493e+':\x20'+_0xcc5b89;throw this[_0x2fa876(0x738)][_0x2fa876(0x3a7)](this[_0x2fa876(0x2af)]+'\x20('+this[_0x2fa876(0x448)][_0x2fa876(0x219)]+_0x2fa876(0x3a8)+_0x190dd5),new x(_0x190dd5);}}async[a0_0x3b8fac(0x31b)](_0x5b0657){const _0x4121b5=a0_0x3b8fac;try{let _0x17c74a;if((0x0,L[_0x4121b5(0x4c6)])(_0x5b0657[_0x4121b5(0x410)])){let _0x3411b9=new Date()['getTime'](),_0x47477a=_0x5b0657[_0x4121b5(0x410)]+_0x4121b5(0x3d6)+_0x3411b9;_0x17c74a=(await te[_0x4121b5(0x151)][_0x4121b5(0x184)](_0x47477a,{'responseType':'arraybuffer'}))[_0x4121b5(0x5c3)];}else{if((0x0,L[_0x4121b5(0x45a)])(_0x5b0657['image']))_0x17c74a=Buffer['from'](_0x5b0657[_0x4121b5(0x410)],_0x4121b5(0x456));else throw new m(_0x4121b5(0x4be));}return await this[_0x4121b5(0x488)]['updateProfilePicture'](_0x5b0657['groupJid'],_0x17c74a),{'update':_0x4121b5(0x3a4)};}catch(_0x30d453){let _0x428135=_0x4121b5(0x92),_0xac2b8a=_0x30d453 instanceof Error?_0x30d453[_0x4121b5(0x4ab)]:typeof _0x30d453==_0x4121b5(0x4f6)?JSON[_0x4121b5(0x5e5)](_0x30d453):_0x30d453,_0x49d3fa=_0x428135+':\x20'+_0xac2b8a;throw this[_0x4121b5(0x738)][_0x4121b5(0x3a7)](this['instanceName']+'\x20('+this[_0x4121b5(0x448)][_0x4121b5(0x219)]+_0x4121b5(0x3a8)+_0x49d3fa),new x(_0x49d3fa);}}},Bt=class u{constructor(_0x5c752d,_0x399e86,_0x2569d4){const _0x3c9867=a0_0x3b8fac;this[_0x3c9867(0x1e3)]=_0x5c752d,this['configService']=_0x399e86,this[_0x3c9867(0x610)]=_0x2569d4,this['db']={},this[_0x3c9867(0x43d)]={},this['logger']=new $(u['name']),this['waInstances']={},(this['removeInstance'](),this[_0x3c9867(0x3e1)](),Object[_0x3c9867(0x6da)](this['db'],_0x399e86[_0x3c9867(0x184)](_0x3c9867(0x22d))),Object['assign'](this['redis'],_0x399e86[_0x3c9867(0x184)](_0x3c9867(0x6b5))),this[_0x3c9867(0x71c)]=this['db'][_0x3c9867(0x1fe)]?this[_0x3c9867(0x610)][_0x3c9867(0x88)]?.['db'](this['db'][_0x3c9867(0x41a)]['DB_PREFIX_NAME']+_0x3c9867(0xeb)):void 0x0,this['cache']=this[_0x3c9867(0x43d)][_0x3c9867(0x1fe)]?new ge(this[_0x3c9867(0x43d)]):void 0x0);}async['instanceInfo'](_0x19a9b4){const _0xd4f0e6=a0_0x3b8fac;if(_0x19a9b4&&!this[_0xd4f0e6(0x2ed)][_0x19a9b4])throw new J(_0xd4f0e6(0x4d0)+_0x19a9b4+'\x22\x20not\x20found');let _0x185a62=[];for await(let [_0x57a500,_0x5e02b5]of Object[_0xd4f0e6(0x4b7)](this[_0xd4f0e6(0x2ed)]))if(_0x5e02b5&&_0x5e02b5[_0xd4f0e6(0x12f)][_0xd4f0e6(0x21b)]===_0xd4f0e6(0x627)){let _0x3fe54e=await this['repository'][_0xd4f0e6(0x66e)][_0xd4f0e6(0x7a1)](_0x57a500);_0x185a62[_0xd4f0e6(0x42a)]({'instance':{'instanceName':_0x57a500,'apikey':_0x3fe54e[_0xd4f0e6(0x129)],'owner':_0x5e02b5[_0xd4f0e6(0x219)],'profileName':await _0x5e02b5[_0xd4f0e6(0x430)]()||_0xd4f0e6(0x395),'profilePictureUrl':_0x5e02b5['profilePictureUrl']}});}return _0x185a62[_0xd4f0e6(0x7a1)](_0x563870=>_0x563870[_0xd4f0e6(0x448)][_0xd4f0e6(0x2af)]===_0x19a9b4)??_0x185a62;}async['cleaningUp'](_0x21bb36){const _0x20a1e8=a0_0x3b8fac;if(this['db']['ENABLED']&&(await this[_0x20a1e8(0x610)][_0x20a1e8(0x88)][_0x20a1e8(0x3f7)](),(await this['dbInstance'][_0x20a1e8(0x622)]())['length']>0x0&&await this[_0x20a1e8(0x71c)][_0x20a1e8(0x48e)](_0x21bb36)),this[_0x20a1e8(0x43d)][_0x20a1e8(0x1fe)]){this[_0x20a1e8(0x521)][_0x20a1e8(0x14e)]=_0x21bb36,await this[_0x20a1e8(0x521)][_0x20a1e8(0x591)]();return;}}async['loadInstance'](){const _0x11b627=a0_0x3b8fac;await this['InstancesAlterarTodas']();let _0x28b39d=async _0x2baa1c=>{const _0x17b0dd=a0_0x56c3;let _0x3938e6=new Re(this['configService'],this[_0x17b0dd(0x1e3)],this[_0x17b0dd(0x610)]);_0x3938e6['instanceName']=_0x2baa1c,await _0x3938e6['connectToWhatsapp'](),this[_0x17b0dd(0x2ed)][_0x2baa1c]=_0x3938e6;};try{if(this[_0x11b627(0x43d)]['ENABLED']){let _0x41afc0=await this['cache'][_0x11b627(0x65f)]();_0x41afc0?.['length']>0x0&&_0x41afc0[_0x11b627(0x73e)](async _0x106b4a=>await _0x28b39d(_0x106b4a['split'](':')[0x1]));return;}if(this['db'][_0x11b627(0x1fe)]){await this['repository'][_0x11b627(0x88)][_0x11b627(0x3f7)]();let _0x417ce5=await this[_0x11b627(0x71c)][_0x11b627(0x622)]();_0x417ce5['length']>0x0&&_0x417ce5['forEach'](async _0x1ed728=>await _0x28b39d(_0x1ed728[_0x11b627(0x46c)][_0x11b627(0x1c6)](/^[\w-]+\./,'')));return;}}catch(_0x7e9f50){this[_0x11b627(0x738)][_0x11b627(0x3a7)](_0x7e9f50);}}async[a0_0x3b8fac(0x2a6)](){const _0x5abb2a=a0_0x3b8fac;try{let _0xa844ef=await this[_0x5abb2a(0x610)][_0x5abb2a(0x66e)][_0x5abb2a(0x1cc)]({'online':!0x1});for(let _0x5831c6 of _0xa844ef){let _0x3f3a62=_0x5831c6[_0x5abb2a(0x4ff)];await re[_0x5abb2a(0x212)](K,_0x3f3a62);}console[_0x5abb2a(0x514)]('Instncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20'+_0xa844ef[_0x5abb2a(0x3c8)]);let _0x58f817={'online':!0x1},_0x5cf30a=await this[_0x5abb2a(0x610)][_0x5abb2a(0x66e)][_0x5abb2a(0x57b)](_0x58f817);console[_0x5abb2a(0x514)](_0x5abb2a(0x75e)+_0x5cf30a[_0x5abb2a(0x2db)]);}catch(_0xcd0ab){console[_0x5abb2a(0x3a7)]('Erro\x20ao\x20limpar\x20instncias\x20desconectadas:',_0xcd0ab);}}async[a0_0x3b8fac(0x6e7)](){const _0x25fbf2=a0_0x3b8fac;try{let _0x2c8a5e={'online':!0x1},_0x34f9c7={'online':!0x1,'lastDisconnect':Date[_0x25fbf2(0x183)]()},_0x4c6c1f=await this[_0x25fbf2(0x610)]['auth'][_0x25fbf2(0x694)](_0x2c8a5e,_0x34f9c7);await this[_0x25fbf2(0x2a6)]();}catch(_0xb6a108){console['error']('Erro\x20ao\x20definir\x20instncias\x20como\x20desconectadas:',_0xb6a108);}}[a0_0x3b8fac(0x52b)](){const _0x36a088=a0_0x3b8fac;this[_0x36a088(0x1e3)]['on'](_0x36a088(0x47c),async _0xe96457=>{const _0x1ff818=_0x36a088;try{this[_0x1ff818(0x2ed)][_0xe96457]=void 0x0;}catch{}try{this['cleaningUp'](_0xe96457);}finally{this['logger'][_0x1ff818(0x1a9)]('Instance\x20\x22'+_0xe96457+_0x1ff818(0x309));}});}[a0_0x3b8fac(0x3e1)](){this['eventEmitter']['on']('no.connection',async _0x1fd836=>{const _0x1fad2f=a0_0x56c3;try{this[_0x1fad2f(0x2ed)][_0x1fd836]=void 0x0;}catch{}try{this[_0x1fad2f(0x50c)](_0x1fd836);}finally{this[_0x1fad2f(0x738)][_0x1fad2f(0x1a9)]('Instance\x20\x22'+_0x1fd836+_0x1fad2f(0x14c));}});}},Wt=class extends _{['getChatModelForOwner'](_0x4af8ed){return ia(_0x4af8ed);}async[a0_0x3b8fac(0x28b)](_0x4d1a78){const _0x24daec=a0_0x3b8fac;if(_0x4d1a78[_0x24daec(0x3c8)]!==0x0)try{return{'insertCount':(await this[_0x24daec(0x744)](_0x4d1a78[0x0][_0x24daec(0x7a2)])[_0x24daec(0x67d)]([..._0x4d1a78]))[_0x24daec(0x3c8)]};}catch(_0x22a051){return _0x22a051;}}async[a0_0x3b8fac(0x7a1)](_0x3ccda2,_0x45bcc4){const _0x3cda22=a0_0x3b8fac;try{let _0x397e8c=this[_0x3cda22(0x744)](_0x45bcc4),_0x35b173=A(_0x3ccda2['where']);return await _0x397e8c['find'](_0x35b173)[_0x3cda22(0x77f)]({'lastmsg':-0x1})[_0x3cda22(0x606)](_0x3ccda2?.[_0x3cda22(0x606)]??0x0)[_0x3cda22(0x555)]();}catch{return[];}}async[a0_0x3b8fac(0x737)](_0x4fe9ef,_0x37cbfa){const _0x253488=a0_0x3b8fac;try{let _0x50692f=this[_0x253488(0x744)](_0x37cbfa),_0x5a5d5f=A(_0x4fe9ef[_0x253488(0x287)]);return _0x5a5d5f[_0x253488(0x709)]={'$ne':[]},await _0x50692f['find'](_0x5a5d5f)[_0x253488(0x77f)]({'lastmsg':-0x1})[_0x253488(0x606)](_0x4fe9ef?.['limit']??0x0)[_0x253488(0x555)]();}catch{return[];}}async[a0_0x3b8fac(0x23f)](_0x514601,_0x1ef11f){const _0x4e6590=a0_0x3b8fac;try{return{'deletedCount':(await this[_0x4e6590(0x744)](_0x1ef11f)[_0x4e6590(0x57b)]({..._0x514601[_0x4e6590(0x287)]}))[_0x4e6590(0x2b8)]};}catch(_0x38edec){return{'error':_0x38edec?.[_0x4e6590(0x2eb)]()};}}async[a0_0x3b8fac(0x2bf)](_0x3da45e,_0x3bcf25){const _0x2f3236=a0_0x3b8fac;try{return await this[_0x2f3236(0x744)](_0x3bcf25)['deleteMany']({..._0x3da45e[_0x2f3236(0x287)]}),[];}catch(_0x58037d){return{'error':_0x58037d?.[_0x2f3236(0x2eb)]()};}}async[a0_0x3b8fac(0x7ac)](_0x5d8fc6,_0x3cc598){const _0x351277=a0_0x3b8fac;try{let _0x4946c2=this[_0x351277(0x744)](_0x3cc598),_0x48c618=A(_0x5d8fc6[_0x351277(0x287)]);return await _0x4946c2[_0x351277(0x7ac)](_0x48c618)['lean']();}catch{return null;}}async['updateOne'](_0x44540b,_0x5dbe20,_0x5481f9,_0x4f4ea8,_0x2d125e=a0_0x3b8fac(0x7ad)){const _0x554d4a=a0_0x3b8fac;try{let _0x88e4e7={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x4f4ea8},_0x60e867=this['getChatModelForOwner'](_0x5481f9),_0x5572aa=A(_0x44540b[_0x554d4a(0x287)]);Object[_0x554d4a(0x63b)](_0x5dbe20)['forEach'](_0x10394a=>{_0x5dbe20[_0x10394a]==null&&delete _0x5dbe20[_0x10394a];});let _0x27469d={};return _0x27469d[_0x2d125e]=_0x5dbe20,await _0x60e867[_0x554d4a(0x2d7)](_0x5572aa,_0x27469d,_0x88e4e7);}catch(_0x3141ff){return console[_0x554d4a(0x3a7)](_0x3141ff),null;}}async['updateMany'](_0x6cceed){const _0x5a14fc=a0_0x3b8fac;try{let _0x552251=this[_0x5a14fc(0x744)](_0x6cceed[0x0][_0x5a14fc(0x644)][_0x5a14fc(0x287)][_0x5a14fc(0x7a2)]),_0x15eced=_0x6cceed[_0x5a14fc(0x23a)](_0x1dcaaf=>({'updateOne':{'filter':{..._0x1dcaaf['query']['where']},'update':{'$set':_0x1dcaaf['update']},'upsert':!0x0}})),_0x57e304=await _0x552251['bulkWrite'](_0x15eced);return _0x57e304[_0x5a14fc(0x6b4)]+_0x57e304['upsertedCount'];}catch(_0x20d954){return console[_0x5a14fc(0x3a7)](_0x20d954),0x0;}}async[a0_0x3b8fac(0x411)](_0x2aca03){const _0x2ed64c=a0_0x3b8fac;try{let _0xf7e33e={'group_isCommunity':'','group_announce':'','group_size':''},_0xc68b9={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x3f77ca={'$unset':_0xf7e33e};return(await this[_0x2ed64c(0x744)](_0x2aca03)[_0x2ed64c(0x2de)](_0xc68b9,_0x3f77ca))[_0x2ed64c(0x6b4)];}catch(_0x1fe444){return console[_0x2ed64c(0x3a7)](_0x2ed64c(0x421),_0x1fe444),0x0;}}async[a0_0x3b8fac(0x3b1)](_0x343ad2){const _0x30a50f=a0_0x3b8fac;try{let _0x5af021=this[_0x30a50f(0x744)](_0x343ad2),_0x5f504a={'leadInfo.etiquetas':{'$exists':!0x1}},_0x360005={'$set':{'leadInfo.etiquetas':[]}};return(await _0x5af021[_0x30a50f(0x2de)](_0x5f504a,_0x360005))[_0x30a50f(0x6b4)];}catch(_0x23c17f){return console[_0x30a50f(0x3a7)](_0x23c17f),0x0;}}async[a0_0x3b8fac(0x2ea)](_0x414882){const _0x65a210=a0_0x3b8fac;try{let _0x843c2c=this[_0x65a210(0x744)](_0x414882),_0x236787={'leadInfo.tags':{'$exists':!0x1}},_0x37d904={'$set':{'leadInfo.tags':[]}};return(await _0x843c2c['updateMany'](_0x236787,_0x37d904))[_0x65a210(0x6b4)];}catch(_0x27961a){return console[_0x65a210(0x3a7)](_0x27961a),0x0;}}async[a0_0x3b8fac(0x62e)](_0x4477e4){const _0x18d967=a0_0x3b8fac;try{let _0x1f5b75=this[_0x18d967(0x744)](_0x4477e4),_0x3c275d={'leadInfo.customFields':{'$exists':!0x1}},_0x227b10={'$set':{'leadInfo.customFields':[]}};return(await _0x1f5b75[_0x18d967(0x2de)](_0x3c275d,_0x227b10))[_0x18d967(0x6b4)];}catch(_0x442ce0){return console[_0x18d967(0x3a7)](_0x442ce0),0x0;}}async['insertMany'](_0x1d788a,_0x2eef11){const _0x555123=a0_0x3b8fac;if(!Array[_0x555123(0x338)](_0x1d788a)||_0x1d788a[_0x555123(0x3c8)]===0x0)throw new Error(_0x555123(0x781));try{return(await this['getChatModelForOwner'](_0x2eef11)[_0x555123(0x67d)](_0x1d788a))[_0x555123(0x3c8)];}catch(_0x461bdb){throw console[_0x555123(0x3a7)]('Erro\x20ao\x20inserir\x20chats:',_0x461bdb),_0x461bdb;}}async[a0_0x3b8fac(0x72e)](_0x37dcfa,_0x529348){const _0x537b73=a0_0x3b8fac;try{await this[_0x537b73(0x744)](_0x529348)[_0x537b73(0x793)]({'_id':_0x37dcfa});}catch(_0xf83ca5){throw console[_0x537b73(0x3a7)](_0x537b73(0x703),_0xf83ca5),_0xf83ca5;}}},zt=class extends _{constructor(_0x3ae7e9,_0x482344,_0x4751c4){const _0x229326=a0_0x3b8fac;super(_0x482344),this[_0x229326(0x633)]=_0x3ae7e9,this[_0x229326(0x2e2)]=_0x482344,this[_0x229326(0x70e)]=_0x4751c4;}async[a0_0x3b8fac(0x28b)](_0x417535){const _0x29da2d=a0_0x3b8fac;if(_0x417535[_0x29da2d(0x3c8)]!==0x0)try{return{'insertCount':(await this[_0x29da2d(0x633)][_0x29da2d(0x67d)]([..._0x417535]))[_0x29da2d(0x3c8)]};}catch(_0x2a2238){return _0x2a2238;}}async['update'](_0x54c2da,_0x4cf26a){const _0xf80289=a0_0x3b8fac;try{let _0x65d551=A(_0x54c2da[_0xf80289(0x287)]);return{'updatedCount':(await this[_0xf80289(0x633)][_0xf80289(0x2de)](_0x65d551,{'$set':_0x4cf26a}))[_0xf80289(0x6b4)]};}catch(_0x16e96e){return console[_0xf80289(0x3a7)]('Error\x20updating\x20cache\x20contact:',_0x16e96e),{'error':_0x16e96e[_0xf80289(0x2eb)]()};}}async[a0_0x3b8fac(0x7c1)](_0x1f95ef){const _0x32b38f=a0_0x3b8fac;try{let _0xcc1fcb={'_id':{'$in':_0x1f95ef}};return await this[_0x32b38f(0x633)][_0x32b38f(0x7a1)](_0xcc1fcb)[_0x32b38f(0x555)]();}catch(_0x2bef38){return console['error']('Error\x20finding\x20many\x20contacts:',_0x2bef38),[];}}async[a0_0x3b8fac(0x23f)](_0x4a2bc3){const _0x50546e=a0_0x3b8fac;try{return{'deletedCount':(await this['cacheContactModel'][_0x50546e(0x57b)]({..._0x4a2bc3['where']}))[_0x50546e(0x2b8)]};}catch(_0x1ebd9c){return{'error':_0x1ebd9c?.[_0x50546e(0x2eb)]()};}}async['find'](_0x29ddfd){const _0x47da7e=a0_0x3b8fac;try{let _0x364914=A(_0x29ddfd[_0x47da7e(0x287)]);return await this[_0x47da7e(0x633)]['find'](_0x364914)[_0x47da7e(0x606)](_0x29ddfd?.[_0x47da7e(0x606)]??0x0)[_0x47da7e(0x555)]();}catch{return[];}}async['findOne'](_0x25e106){const _0xdc16b0=a0_0x3b8fac;try{let _0x2f1f3d=A(_0x25e106[_0xdc16b0(0x287)]);return await this[_0xdc16b0(0x633)]['findOne'](_0x2f1f3d)[_0xdc16b0(0x555)]();}catch{return null;}}},Ht=class extends _{['getLabelModelForOwner'](_0x367dc5){return $a(_0x367dc5);}async[a0_0x3b8fac(0x7b6)](_0x374c8e,_0x29e579,_0x176949,_0x12a79c){const _0x1bd250=a0_0x3b8fac;try{let _0x4a973d={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x12a79c},_0x988ec=this['getLabelModelForOwner'](_0x176949),_0x39438c=A(_0x374c8e[_0x1bd250(0x287)]);return await _0x988ec[_0x1bd250(0x2d7)](_0x39438c,{'$set':_0x29e579},_0x4a973d);}catch(_0x1f7583){return console[_0x1bd250(0x3a7)](_0x1f7583),null;}}async[a0_0x3b8fac(0x7a1)](_0x4ab0eb,_0x4da3ef){const _0xe2f2ec=a0_0x3b8fac;try{let _0x5a86a2=this[_0xe2f2ec(0x5c0)](_0x4da3ef),_0x54257d=A(_0x4ab0eb[_0xe2f2ec(0x287)]);return await _0x5a86a2['find'](_0x54257d);}catch(_0x14cd52){console['error'](_0x14cd52);}}async[a0_0x3b8fac(0x23f)](_0x47b1e1,_0x308d18){const _0x318ef4=a0_0x3b8fac;try{let _0x225a1c=this[_0x318ef4(0x5c0)](_0x308d18),_0x1b97d0=A(_0x47b1e1[_0x318ef4(0x287)]);await _0x225a1c[_0x318ef4(0x57b)](_0x1b97d0);}catch(_0x33486b){console['error'](_0x33486b);}}async[a0_0x3b8fac(0x2bf)](_0x580aa6){const _0x259c06=a0_0x3b8fac;try{return await this['getLabelModelForOwner'](_0x580aa6)[_0x259c06(0x712)][_0x259c06(0x687)](),{'success':!0x0};}catch(_0x2c5585){return console[_0x259c06(0x3a7)](_0x2c5585),{'success':!0x1,'error':_0x2c5585};}}},Kt=class{constructor(_0x27bf07){const _0x5c5c73=a0_0x3b8fac;this[_0x5c5c73(0x6b8)]=_0x27bf07;}async[a0_0x3b8fac(0x3d9)]({instanceName:_0x1e31b3},_0x4e0888){const _0x5d8c49=a0_0x3b8fac;return await this[_0x5d8c49(0x6b8)][_0x5d8c49(0x2ed)][_0x1e31b3][_0x5d8c49(0x3d9)](_0x4e0888);}async['whatsappNumber']({instanceName:_0x431f21},_0xe7ce21){const _0x412e70=a0_0x3b8fac;return await this[_0x412e70(0x6b8)][_0x412e70(0x2ed)][_0x431f21][_0x412e70(0x269)](_0xe7ce21);}async[a0_0x3b8fac(0x5db)]({instanceName:_0x57b044},_0x5d939d){const _0x2863b3=a0_0x3b8fac;return await this[_0x2863b3(0x6b8)][_0x2863b3(0x2ed)][_0x57b044][_0x2863b3(0x5db)](_0x5d939d);}async[a0_0x3b8fac(0x5ff)]({instanceName:_0x281f51},_0x107fbc){const _0x29683f=a0_0x3b8fac;return await this[_0x29683f(0x6b8)][_0x29683f(0x2ed)][_0x281f51]['markMessageAsRead'](_0x107fbc);}async['archiveChat']({instanceName:_0x3a3de9},_0x1b0a96){const _0x1f3bee=a0_0x3b8fac;return await this[_0x1f3bee(0x6b8)][_0x1f3bee(0x2ed)][_0x3a3de9][_0x1f3bee(0x3ac)](_0x1b0a96);}async['deleteMessage']({instanceName:_0x20d49d},_0x451cd0){const _0x44f376=a0_0x3b8fac;return await this['waMonitor'][_0x44f376(0x2ed)][_0x20d49d][_0x44f376(0x16d)](_0x451cd0);}async['fetchProfilePicture']({instanceName:_0x5dcbd4},_0xa81b3b){const _0x22c026=a0_0x3b8fac;return await this['waMonitor'][_0x22c026(0x2ed)][_0x5dcbd4][_0x22c026(0x392)](_0xa81b3b[_0x22c026(0x377)]);}async['fetchProfile']({instanceName:_0x14ae08},_0x54821a){const _0x4aa5fd=a0_0x3b8fac;return await this[_0x4aa5fd(0x6b8)]['waInstances'][_0x14ae08][_0x4aa5fd(0x6a7)](_0x54821a[_0x4aa5fd(0x377)]);}async['updatePresence']({instanceName:_0x37d8c1},_0x4d31dc){const _0x4ecd=a0_0x3b8fac;return await this[_0x4ecd(0x6b8)][_0x4ecd(0x2ed)][_0x37d8c1][_0x4ecd(0x650)](_0x4d31dc);}async[a0_0x3b8fac(0x32b)]({instanceName:_0x18c7a9},_0x3caf19){const _0x10e617=a0_0x3b8fac;return await this[_0x10e617(0x6b8)][_0x10e617(0x2ed)][_0x18c7a9][_0x10e617(0x32b)](_0x3caf19);}async[a0_0x3b8fac(0x1a0)]({instanceName:_0x3fb1eb},_0x9fbcdc){const _0x471ec6=a0_0x3b8fac;return await this['waMonitor'][_0x471ec6(0x2ed)][_0x3fb1eb]['getBase64FromMediaMessage'](_0x9fbcdc);}async[a0_0x3b8fac(0x753)]({instanceName:_0x5254e2},_0x28df3a){const _0xe1d931=a0_0x3b8fac;return await this['waMonitor'][_0xe1d931(0x2ed)][_0x5254e2]['fetchMessages'](_0x28df3a);}async[a0_0x3b8fac(0x390)]({instanceName:_0x1d766f}){const _0x4fe172=a0_0x3b8fac;return await this[_0x4fe172(0x6b8)]['waInstances'][_0x1d766f]['fetchLabels']();}async['fetchChats']({instanceName:_0x2a0484}){const _0x7492eb=a0_0x3b8fac;return await this['waMonitor'][_0x7492eb(0x2ed)][_0x2a0484][_0x7492eb(0x6b7)]();}async['fetchPrivacySettings']({instanceName:_0x59f8c4}){const _0x4059b5=a0_0x3b8fac;return await this[_0x4059b5(0x6b8)][_0x4059b5(0x2ed)][_0x59f8c4]['fetchPrivacySettings']();}async['updatePrivacySettings']({instanceName:_0x5e16c0},_0x224f9f){const _0x18426d=a0_0x3b8fac;return await this[_0x18426d(0x6b8)][_0x18426d(0x2ed)][_0x5e16c0][_0x18426d(0x1dd)](_0x224f9f);}async[a0_0x3b8fac(0x4de)]({instanceName:_0x54e22b},_0x433d2b){const _0x343670=a0_0x3b8fac;return await this[_0x343670(0x6b8)][_0x343670(0x2ed)][_0x54e22b]['fetchBusinessProfile'](_0x433d2b[_0x343670(0x377)]);}async[a0_0x3b8fac(0x279)]({instanceName:_0xd339c},_0x292a67){const _0x335b65=a0_0x3b8fac;return await this['waMonitor'][_0x335b65(0x2ed)][_0xd339c]['updateProfileName'](_0x292a67[_0x335b65(0x26b)]);}async['updateProfileStatus']({instanceName:_0x35cec8},_0x868ac7){const _0xca17e0=a0_0x3b8fac;return await this[_0xca17e0(0x6b8)][_0xca17e0(0x2ed)][_0x35cec8][_0xca17e0(0x638)](_0x868ac7[_0xca17e0(0x233)]);}async[a0_0x3b8fac(0x459)]({instanceName:_0x599fa1},_0x253bf6){const _0x1c9bd5=a0_0x3b8fac;return await this[_0x1c9bd5(0x6b8)][_0x1c9bd5(0x2ed)][_0x599fa1]['updateProfilePicture'](_0x253bf6['picture']);}async[a0_0x3b8fac(0x24e)]({instanceName:_0x319680},_0x5b8723){const _0x70469d=a0_0x3b8fac;return await this[_0x70469d(0x6b8)]['waInstances'][_0x319680][_0x70469d(0x24e)]();}},Qt=require(a0_0x3b8fac(0x556)),Yt=class u{constructor(_0x1d29e8,_0x16c491,_0x586a98,_0x5074fb,_0x48f373){const _0x54fa7c=a0_0x3b8fac;this[_0x54fa7c(0x6b8)]=_0x1d29e8,this[_0x54fa7c(0x2e2)]=_0x16c491,this[_0x54fa7c(0x610)]=_0x586a98,this[_0x54fa7c(0x1e3)]=_0x5074fb,this['authService']=_0x48f373,this[_0x54fa7c(0x738)]=new $(u['name']);}async['createInstance']({instanceName:_0x223155,apikey:_0x5e0edc,number:_0x15f015,proxy:_0xe9452a=!0x0}){const _0x1f16d7=a0_0x3b8fac;try{let _0x55a14f=new Re(this[_0x1f16d7(0x2e2)],this[_0x1f16d7(0x1e3)],this[_0x1f16d7(0x610)]);_0x55a14f[_0x1f16d7(0x2af)]=_0x223155,this[_0x1f16d7(0x6b8)][_0x1f16d7(0x2ed)][_0x55a14f['instanceName']]=_0x55a14f;let _0x1f7f00={};_0x5e0edc?(await this[_0x1f16d7(0x610)][_0x1f16d7(0x66e)][_0x1f16d7(0x2c0)]({'apikey':_0x5e0edc},_0x223155),_0x1f7f00[_0x1f16d7(0x129)]=_0x5e0edc):_0x1f7f00=await this['authService'][_0x1f16d7(0xc5)]({'instanceName':_0x55a14f[_0x1f16d7(0x2af)]});let _0x2d3f34;if(_0x15f015){if(_0x2d3f34=await this[_0x1f16d7(0x775)](_0x15f015),_0x2d3f34['error'])throw new x(_0x2d3f34[_0x1f16d7(0x3a7)]['toString']());_0x15f015=_0x2d3f34[_0x1f16d7(0x377)];}let _0x2fc07e;return await _0x55a14f[_0x1f16d7(0x3e2)](_0x15f015),await(0x0,Qt[_0x1f16d7(0x332)])(0xfa0),_0x15f015&&await(0x0,Qt[_0x1f16d7(0x332)])(0xbb8),_0x2fc07e=_0x55a14f[_0x1f16d7(0x754)],{'instance':{'instanceName':_0x55a14f['instanceName'],'status':'created'},'hash':_0x1f7f00,'qrcode':_0x2fc07e};}catch(_0x35fcc9){throw this[_0x1f16d7(0x738)]['error'](_0x35fcc9),_0x35fcc9;}}async[a0_0x3b8fac(0x444)]({instanceName:_0x2c12bd,number:_0x4f7d21=null}){const _0x372016=a0_0x3b8fac;try{let _0x7a088d=this[_0x372016(0x6b8)][_0x372016(0x2ed)][_0x2c12bd];switch(_0x7a088d?.[_0x372016(0x12f)]?.[_0x372016(0x21b)]){case _0x372016(0x6a1):return await _0x7a088d[_0x372016(0x3e2)](_0x4f7d21),await(0x0,Qt['delay'])(0x7d0),_0x7a088d['qrCode'];case _0x372016(0x369):return _0x7a088d[_0x372016(0x754)];default:return await this[_0x372016(0x4f3)]({'instanceName':_0x2c12bd});}}catch(_0x32be18){this[_0x372016(0x738)][_0x372016(0x514)](_0x32be18);}}async['connectionState']({instanceName:_0x265ee8}){const _0x3c0641=a0_0x3b8fac;let _0x1bc7bb=this[_0x3c0641(0x6b8)][_0x3c0641(0x2ed)][_0x265ee8][_0x3c0641(0x12f)],_0x103835=null;_0x1bc7bb[_0x3c0641(0x21b)]===_0x3c0641(0x627)&&_0x265ee8&&(_0x103835=await this[_0x3c0641(0x6b8)][_0x3c0641(0xdb)](_0x265ee8));let _0x849a5=null;return _0x1bc7bb[_0x3c0641(0x21b)]===_0x3c0641(0x369)&&_0x265ee8&&(_0x849a5=this[_0x3c0641(0x6b8)][_0x3c0641(0x2ed)][_0x265ee8][_0x3c0641(0x754)]),{'instance':_0x265ee8,'connectionStatus':_0x1bc7bb,'instanceInfo':_0x103835,'qrcode':_0x849a5};}async[a0_0x3b8fac(0x775)](_0x24a652){const _0x3c3f17=a0_0x3b8fac;_0x24a652=_0x24a652[_0x3c3f17(0x1c6)](/\D/g,'');let _0x1f0c99=Object[_0x3c3f17(0x63b)](this[_0x3c3f17(0x6b8)][_0x3c3f17(0x2ed)])[_0x3c3f17(0x34f)](_0x1810db=>{const _0x1c58b9=_0x3c3f17;let _0x32922b=this[_0x1c58b9(0x6b8)][_0x1c58b9(0x2ed)][_0x1810db];return _0x32922b&&_0x32922b[_0x1c58b9(0x12f)]&&_0x32922b['connectionStatus'][_0x1c58b9(0x21b)]==='open';});if(_0x1f0c99[_0x3c3f17(0x3c8)]===0x0)return{'number':this[_0x3c3f17(0x255)](_0x24a652)};let _0x170e7b=Math[_0x3c3f17(0x3e0)](Math[_0x3c3f17(0x334)]()*_0x1f0c99[_0x3c3f17(0x3c8)]),_0x21323c=_0x1f0c99[_0x170e7b];try{let _0x3fe6a1=(await this[_0x3c3f17(0x6b8)][_0x3c3f17(0x2ed)][_0x21323c][_0x3c3f17(0x269)]({'numbers':[_0x24a652]}))['shift']();return _0x3fe6a1['exists']?{'number':_0x3fe6a1[_0x3c3f17(0x6ea)][_0x3c3f17(0x1c6)]('@s.whatsapp.net','')}:{'number':_0x24a652,'error':'Nmero\x20no\x20possui\x20WhatsApp.'};}catch(_0xbe0ef7){return this[_0x3c3f17(0x738)]['error'](_0x3c3f17(0x1f0)+_0xbe0ef7),{'number':_0x24a652,'error':_0x3c3f17(0x306)};}}[a0_0x3b8fac(0x255)](_0x56b457){const _0xab49e1=a0_0x3b8fac;let _0x2d35a0=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0xab49e1(0x126)](_0x56b457);if(_0x2d35a0&&_0x2d35a0[0x1]==='55'){let _0x5c9916=_0x2d35a0[0x2],_0x9bcf31=_0x2d35a0[0x3],_0x16727b=_0x2d35a0[0x4];if(parseInt(_0x5c9916)>=0x1f&&_0x9bcf31==='9')return _0x2d35a0[0x1]+_0x5c9916+_0x16727b;}return _0x56b457;}async[a0_0x3b8fac(0x4c1)]({instanceName:_0x4d3461}){const _0x4b4e17=a0_0x3b8fac;try{return this[_0x4b4e17(0x6b8)][_0x4b4e17(0x2ed)][_0x4d3461]?.['client']?.['ws']?.['close'](),{'status':_0x4b4e17(0x1f5),'error':!0x1,'response':{'message':'Instance\x20restarted'}};}catch(_0x5a0b0d){this['logger'][_0x4b4e17(0x3a7)](_0x5a0b0d);}}async['fetchInstances']({instanceName:_0x16074f}){const _0x247cbf=a0_0x3b8fac;return _0x16074f?this[_0x247cbf(0x6b8)][_0x247cbf(0xdb)](_0x16074f):this['waMonitor'][_0x247cbf(0xdb)]();}async[a0_0x3b8fac(0xfc)]({instanceName:_0xd2b331}){const _0xfa6c9b=a0_0x3b8fac;try{return await this['waMonitor'][_0xfa6c9b(0x2ed)][_0xd2b331]?.[_0xfa6c9b(0x488)]?.[_0xfa6c9b(0xfc)](_0xfa6c9b(0x119)+_0xd2b331),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x4f0740){throw new x(_0x4f0740[_0xfa6c9b(0x2eb)]());}}async[a0_0x3b8fac(0x1de)]({instanceName:_0x20dbe4}){const _0x5defaa=a0_0x3b8fac;if((await this['connectionState']({'instanceName':_0x20dbe4}))[_0x5defaa(0x12f)][_0x5defaa(0x21b)]===_0x5defaa(0x627))throw new m([_0x5defaa(0x6c0),_0x5defaa(0x465)]);try{return delete this['waMonitor']['waInstances'][_0x20dbe4],{'error':!0x1,'message':_0x5defaa(0x131)};}catch(_0x83895f){throw new m(_0x83895f['toString']());}}},ne=require(a0_0x3b8fac(0x40a)),Xt=class{constructor(_0x448301){const _0x4841ba=a0_0x3b8fac;this[_0x4841ba(0x6b8)]=_0x448301;}async[a0_0x3b8fac(0x397)]({instanceName:_0x228e03},_0x200053){const _0xb49ebd=a0_0x3b8fac;return await this[_0xb49ebd(0x6b8)]['waInstances'][_0x228e03][_0xb49ebd(0x663)](_0x200053);}async[a0_0x3b8fac(0x60d)]({instanceName:_0xce214e},_0x8b2aae){const _0x212c79=a0_0x3b8fac;return await this['waMonitor'][_0x212c79(0x2ed)][_0xce214e][_0x212c79(0x574)](_0x8b2aae);}async[a0_0x3b8fac(0x1b4)]({instanceName:_0x1ca813},_0x148d3a){const _0x226885=a0_0x3b8fac;if((0x0,ne['isBase64'])(_0x148d3a?.[_0x226885(0x2fe)]?.[_0x226885(0x14f)])&&!_0x148d3a?.['mediaMessage']?.[_0x226885(0x35c)])throw new m('For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.');if((0x0,ne[_0x226885(0x4c6)])(_0x148d3a?.[_0x226885(0x2fe)]?.[_0x226885(0x14f)])||(0x0,ne[_0x226885(0x45a)])(_0x148d3a?.[_0x226885(0x2fe)]?.['media']))return await this[_0x226885(0x6b8)]['waInstances'][_0x1ca813][_0x226885(0x2fe)](_0x148d3a);throw new m(_0x226885(0x310));}async[a0_0x3b8fac(0x4ec)]({instanceName:_0x370fd2},_0x1e2c36){const _0x1b72f6=a0_0x3b8fac;if((0x0,ne[_0x1b72f6(0x4c6)])(_0x1e2c36[_0x1b72f6(0x649)]['image'])||(0x0,ne[_0x1b72f6(0x45a)])(_0x1e2c36[_0x1b72f6(0x649)][_0x1b72f6(0x410)]))return await this['waMonitor'][_0x1b72f6(0x2ed)][_0x370fd2][_0x1b72f6(0x32c)](_0x1e2c36);throw new m(_0x1b72f6(0x310));}async[a0_0x3b8fac(0x6dd)]({instanceName:_0x54f7e2},_0x21c38d){const _0x53f74c=a0_0x3b8fac;if((0x0,ne['isURL'])(_0x21c38d[_0x53f74c(0x563)][_0x53f74c(0x3bc)])||(0x0,ne[_0x53f74c(0x45a)])(_0x21c38d[_0x53f74c(0x563)]['audio']))return await this[_0x53f74c(0x6b8)][_0x53f74c(0x2ed)][_0x54f7e2]['audioWhatsapp'](_0x21c38d);throw new m(_0x53f74c(0x310));}async[a0_0x3b8fac(0x94)]({instanceName:_0x2ba531},_0x3b84e2){const _0x5ea460=a0_0x3b8fac;if((0x0,ne[_0x5ea460(0x45a)])(_0x3b84e2['buttonMessage'][_0x5ea460(0x2fe)]?.[_0x5ea460(0x14f)])&&!_0x3b84e2[_0x5ea460(0x723)][_0x5ea460(0x2fe)]?.[_0x5ea460(0x35c)])throw new m(_0x5ea460(0x90));return await this[_0x5ea460(0x6b8)][_0x5ea460(0x2ed)][_0x2ba531]['buttonMessage'](_0x3b84e2);}async[a0_0x3b8fac(0x67f)]({instanceName:_0x1e1157},_0x961b4d){const _0x1308b4=a0_0x3b8fac;return await this[_0x1308b4(0x6b8)][_0x1308b4(0x2ed)][_0x1e1157][_0x1308b4(0x244)](_0x961b4d);}async['sendPoll']({instanceName:_0x501a84},_0x347745){const _0x435077=a0_0x3b8fac;return await this[_0x435077(0x6b8)]['waInstances'][_0x501a84][_0x435077(0x122)](_0x347745);}async[a0_0x3b8fac(0x692)]({instanceName:_0x4e00aa},_0x3a75ee){const _0x4cef9f=a0_0x3b8fac;return await this[_0x4cef9f(0x6b8)][_0x4cef9f(0x2ed)][_0x4e00aa]['listMessage'](_0x3a75ee);}async[a0_0x3b8fac(0x3ad)]({instanceName:_0x4ebc4e},_0x3330dc){return await this['waMonitor']['waInstances'][_0x4ebc4e]['contactMessage'](_0x3330dc);}async[a0_0x3b8fac(0x22c)]({instanceName:_0x57b114},_0x1991eb){const _0x5a50ec=a0_0x3b8fac;if(!_0x1991eb[_0x5a50ec(0x359)]['reaction'][_0x5a50ec(0x6c6)](/[^\(\)\w\s-"-\+]+/))throw new m(_0x5a50ec(0xc3));return await this[_0x5a50ec(0x6b8)][_0x5a50ec(0x2ed)][_0x57b114]['reactionMessage'](_0x1991eb);}async['sendStatus']({instanceName:_0x525b23},_0x1f71ae){const _0x139653=a0_0x3b8fac;return await this[_0x139653(0x6b8)][_0x139653(0x2ed)][_0x525b23][_0x139653(0x79)](_0x1f71ae);}},Fi=require(a0_0x3b8fac(0x653)),Js=require(a0_0x3b8fac(0x12a)),Zt=class u{constructor(_0x30130f,_0x33659c,_0x42448d){const _0x168046=a0_0x3b8fac;this[_0x168046(0x2e2)]=_0x30130f,this[_0x168046(0x6b8)]=_0x33659c,this[_0x168046(0x610)]=_0x42448d,this['logger']=new $(u[_0x168046(0x26b)]);}async[a0_0x3b8fac(0x46d)](_0x2bcc5f){const _0x4c5b08=a0_0x3b8fac;let _0x25af22=this['configService'][_0x4c5b08(0x184)](_0x4c5b08(0x331))[_0x4c5b08(0x412)],_0x27540f=(0x0,Fi['sign'])({'instanceName':_0x2bcc5f[_0x4c5b08(0x2af)],'apiName':nt,'tokenId':(0x0,Js['v4'])()},_0x25af22['SECRET'],{'expiresIn':_0x25af22[_0x4c5b08(0x34d)],'encoding':_0x4c5b08(0x16e),'subject':'g-t'}),_0x59f2ae=await this[_0x4c5b08(0x610)][_0x4c5b08(0x66e)][_0x4c5b08(0x2c0)]({'jwt':_0x27540f},_0x2bcc5f['instanceName']);if(_0x59f2ae[_0x4c5b08(0x3a7)])throw this[_0x4c5b08(0x738)]['error']({'localError':u[_0x4c5b08(0x26b)]+_0x4c5b08(0x42c),'error':_0x59f2ae[_0x4c5b08(0x3a7)]}),new m(_0x4c5b08(0x608),_0x59f2ae[_0x4c5b08(0x3a7)]?.[_0x4c5b08(0x2eb)]());return{'jwt':_0x27540f};}async[a0_0x3b8fac(0x129)](_0x5dc4d1){const _0x3ff6ef=a0_0x3b8fac;let _0x57925b=(0x0,Js['v4'])()[_0x3ff6ef(0x56d)](),_0x51c3d0=await this['repository']['auth'][_0x3ff6ef(0x2c0)]({'apikey':_0x57925b},_0x5dc4d1[_0x3ff6ef(0x2af)]);if(_0x51c3d0['error'])throw this[_0x3ff6ef(0x738)][_0x3ff6ef(0x3a7)]({'localError':u[_0x3ff6ef(0x26b)]+_0x3ff6ef(0x42c),'error':_0x51c3d0['error']}),new m(_0x3ff6ef(0x608),_0x51c3d0[_0x3ff6ef(0x3a7)]?.['toString']());return{'apikey':_0x57925b};}async[a0_0x3b8fac(0xc5)](_0x2e3109){const _0x2d007b=a0_0x3b8fac;let _0x2c9451=this[_0x2d007b(0x2e2)][_0x2d007b(0x184)](_0x2d007b(0x331));return await this[_0x2c9451['TYPE']](_0x2e3109);}},es=class{constructor(_0x15e80f){this['waMonitor']=_0x15e80f;}async[a0_0x3b8fac(0x22b)](_0x2cabe5,_0x55f1de){const _0x129bf0=a0_0x3b8fac;return await this['waMonitor']['waInstances'][_0x2cabe5[_0x129bf0(0x2af)]][_0x129bf0(0x22b)](_0x55f1de);}async['updateGroupPicture'](_0x2a174e,_0x327f08){const _0x2cfac9=a0_0x3b8fac;return await this['waMonitor'][_0x2cfac9(0x2ed)][_0x2a174e[_0x2cfac9(0x2af)]][_0x2cfac9(0x31b)](_0x327f08);}async[a0_0x3b8fac(0x291)](_0x3a6bb2,_0x3abfdb){const _0x5ce1b2=a0_0x3b8fac;return await this[_0x5ce1b2(0x6b8)][_0x5ce1b2(0x2ed)][_0x3a6bb2[_0x5ce1b2(0x2af)]][_0x5ce1b2(0x291)](_0x3abfdb);}async['groupName'](_0x150571,_0x2d8b28){const _0xb6d15f=a0_0x3b8fac;return await this[_0xb6d15f(0x6b8)][_0xb6d15f(0x2ed)][_0x150571['instanceName']][_0xb6d15f(0x565)](_0x2d8b28);}async[a0_0x3b8fac(0x2e9)](_0x452981,_0x2d49ad){const _0x512411=a0_0x3b8fac;return await this[_0x512411(0x6b8)][_0x512411(0x2ed)][_0x452981[_0x512411(0x2af)]]['groupBetterSetting'](_0x2d49ad);}async[a0_0x3b8fac(0x2e0)](_0x44d6f0,_0x26bbfa){const _0x5e05e1=a0_0x3b8fac;return await this[_0x5e05e1(0x6b8)][_0x5e05e1(0x2ed)][_0x44d6f0[_0x5e05e1(0x2af)]]['groupSetting'](_0x26bbfa);}async['findGroupInfo'](_0x112da5,_0x285361){const _0x2d788a=a0_0x3b8fac;return await this[_0x2d788a(0x6b8)][_0x2d788a(0x2ed)][_0x112da5['instanceName']][_0x2d788a(0x69f)](_0x285361);}async[a0_0x3b8fac(0x549)](_0x5e93bb){const _0x11b957=a0_0x3b8fac;return await this[_0x11b957(0x6b8)][_0x11b957(0x2ed)][_0x5e93bb[_0x11b957(0x2af)]][_0x11b957(0x549)]();}async['inviteCode'](_0x44da44,_0x4e3a0f){const _0x353c95=a0_0x3b8fac;return await this[_0x353c95(0x6b8)][_0x353c95(0x2ed)][_0x44da44['instanceName']][_0x353c95(0x537)](_0x4e3a0f);}async[a0_0x3b8fac(0x237)](_0x50cd07,_0x1d9631){const _0x16ce43=a0_0x3b8fac;return await this['waMonitor']['waInstances'][_0x50cd07[_0x16ce43(0x2af)]][_0x16ce43(0x237)](_0x1d9631);}async['groupGetInviteInfo'](_0x1cec29,_0x6406c2){const _0x10e217=a0_0x3b8fac;return await this[_0x10e217(0x6b8)][_0x10e217(0x2ed)][_0x1cec29['instanceName']][_0x10e217(0x1d6)](_0x6406c2);}async[a0_0x3b8fac(0x28f)](_0x2065cb,_0x59d72a){const _0x3e171c=a0_0x3b8fac;return await this[_0x3e171c(0x6b8)]['waInstances'][_0x2065cb['instanceName']]['revokeInviteCode'](_0x59d72a);}async['findParticipants'](_0x4cc3e2,_0x80f0b0){const _0x29a717=a0_0x3b8fac;return await this[_0x29a717(0x6b8)][_0x29a717(0x2ed)][_0x4cc3e2['instanceName']][_0x29a717(0x5ed)](_0x80f0b0);}async[a0_0x3b8fac(0x325)](_0x98819a,_0xb00167){const _0x552869=a0_0x3b8fac;return await this['waMonitor']['waInstances'][_0x98819a[_0x552869(0x2af)]][_0x552869(0x66f)](_0xb00167);}async['toggleEphemeral'](_0x34efbb,_0x120750){const _0x3dd383=a0_0x3b8fac;return await this[_0x3dd383(0x6b8)]['waInstances'][_0x34efbb[_0x3dd383(0x2af)]][_0x3dd383(0x274)](_0x120750);}async['leaveGroup'](_0x3566c3,_0x5946e6){const _0x3a3b9b=a0_0x3b8fac;return await this[_0x3a3b9b(0x6b8)]['waInstances'][_0x3566c3['instanceName']][_0x3a3b9b(0x275)](_0x5946e6);}},ts=class{constructor(_0x3eceba){const _0x178fc5=a0_0x3b8fac;this[_0x178fc5(0x6b8)]=_0x3eceba;}[a0_0x3b8fac(0x2c0)](_0x25e346,_0x5b308f){const _0x34bf1b=a0_0x3b8fac;return this[_0x34bf1b(0x6b8)][_0x34bf1b(0x2ed)][_0x25e346[_0x34bf1b(0x2af)]][_0x34bf1b(0x67c)](_0x5b308f);}async['find'](_0x840150){const _0x132937=a0_0x3b8fac;try{return await this['waMonitor'][_0x132937(0x2ed)][_0x840150[_0x132937(0x2af)]]['findWebhook']();}catch{return{'enabled':null,'url':''};}}},Bp=new $('FlowController'),ss=class{constructor(_0x1eee80){const _0x4ce35b=a0_0x3b8fac;this[_0x4ce35b(0x6b8)]=_0x1eee80;}async['editScheduleMessage'](_0x35e74a,_0x854d06){const _0x15d32e=a0_0x3b8fac;return await this[_0x15d32e(0x6b8)][_0x15d32e(0x2ed)][_0x35e74a['instanceName']]['editScheduleMessage'](_0x854d06);}async['getScheduleMessage'](_0x55c75f){const _0x5dd47a=a0_0x3b8fac;return await this['waMonitor'][_0x5dd47a(0x2ed)][_0x55c75f[_0x5dd47a(0x2af)]][_0x5dd47a(0x335)]();}async[a0_0x3b8fac(0x27d)](_0x12ee7c){const _0x4b74f4=a0_0x3b8fac;return await this[_0x4b74f4(0x6b8)][_0x4b74f4(0x2ed)][_0x12ee7c[_0x4b74f4(0x2af)]][_0x4b74f4(0x27d)]();}async[a0_0x3b8fac(0x407)](_0x2887ef){const _0x2ac1ae=a0_0x3b8fac;return await this[_0x2ac1ae(0x6b8)][_0x2ac1ae(0x2ed)][_0x2887ef[_0x2ac1ae(0x2af)]]['getAutomateSystem']();}async['updateAgent'](_0x39e96a,_0x785671){const _0x4e79b5=a0_0x3b8fac;return await this[_0x4e79b5(0x6b8)]['waInstances'][_0x39e96a[_0x4e79b5(0x2af)]][_0x4e79b5(0x7bc)](_0x785671);}async[a0_0x3b8fac(0x7a5)](_0x13d029,_0x2bd1fe){const _0x161ff5=a0_0x3b8fac;return await this[_0x161ff5(0x6b8)][_0x161ff5(0x2ed)][_0x13d029[_0x161ff5(0x2af)]][_0x161ff5(0x7a5)](_0x2bd1fe);}async[a0_0x3b8fac(0x5f9)](_0x7c430c,_0x176f0d){const _0x36c619=a0_0x3b8fac;return await this[_0x36c619(0x6b8)][_0x36c619(0x2ed)][_0x7c430c[_0x36c619(0x2af)]]['updateAutoCompleteMessages'](_0x176f0d);}async[a0_0x3b8fac(0xb5)](_0x3d2bcc,_0x5dee1e){const _0x318958=a0_0x3b8fac;return await this[_0x318958(0x6b8)][_0x318958(0x2ed)][_0x3d2bcc[_0x318958(0x2af)]][_0x318958(0xb5)](_0x5dee1e);}async[a0_0x3b8fac(0x73a)](_0x1a5646,_0x47eb32){const _0x180610=a0_0x3b8fac;return await this[_0x180610(0x6b8)]['waInstances'][_0x1a5646[_0x180610(0x2af)]][_0x180610(0x73a)](_0x47eb32);}async[a0_0x3b8fac(0x53a)](_0x5a2fae,_0x327f0f,_0x2b4d25,_0x44ab49){const _0x24ac7e=a0_0x3b8fac;return await this[_0x24ac7e(0x6b8)][_0x24ac7e(0x2ed)][_0x5a2fae][_0x24ac7e(0x53a)](_0x327f0f,_0x2b4d25,_0x44ab49);}async[a0_0x3b8fac(0x796)](_0x54ab49,_0x291482){const _0x4745ad=a0_0x3b8fac;return await this[_0x4745ad(0x6b8)][_0x4745ad(0x2ed)][_0x54ab49[_0x4745ad(0x2af)]][_0x4745ad(0x796)](_0x291482);}async[a0_0x3b8fac(0x1a5)](_0x19458e,_0x6205){const _0x377342=a0_0x3b8fac;return await this[_0x377342(0x6b8)][_0x377342(0x2ed)][_0x19458e[_0x377342(0x2af)]][_0x377342(0x1a5)](_0x6205);}async[a0_0x3b8fac(0x6cc)](_0x33dff3,_0x419281){const _0x6d4e74=a0_0x3b8fac;return await this['waMonitor'][_0x6d4e74(0x2ed)][_0x33dff3['instanceName']][_0x6d4e74(0x6cc)](_0x419281);}async[a0_0x3b8fac(0x144)](_0x1389ab,_0x150c98){const _0x27133f=a0_0x3b8fac;return await this[_0x27133f(0x6b8)][_0x27133f(0x2ed)][_0x1389ab[_0x27133f(0x2af)]][_0x27133f(0x144)](_0x150c98);}async[a0_0x3b8fac(0x1a1)](_0x46f45a,_0xf0f9c2){const _0x3ecbfe=a0_0x3b8fac;return await this['waMonitor']['waInstances'][_0x46f45a[_0x3ecbfe(0x2af)]][_0x3ecbfe(0x1a1)](_0xf0f9c2[_0x3ecbfe(0x4ff)]);}async[a0_0x3b8fac(0x51e)](_0x301844,_0x15f4f5,_0x3a8b11){const _0x333a60=a0_0x3b8fac;return await this[_0x333a60(0x6b8)][_0x333a60(0x2ed)][_0x301844[_0x333a60(0x2af)]][_0x333a60(0x51e)](_0x15f4f5,_0x3a8b11);}async[a0_0x3b8fac(0x7b4)](_0x4c2b2f,_0x3fceb4,_0x1a7928){const _0x5dd7ed=a0_0x3b8fac;return await this[_0x5dd7ed(0x6b8)][_0x5dd7ed(0x2ed)][_0x4c2b2f[_0x5dd7ed(0x2af)]]['editFlow'](_0x3fceb4,_0x1a7928);}async[a0_0x3b8fac(0x5b0)](_0x45af7f,_0x2cbb0f){const _0x29f524=a0_0x3b8fac;return await this[_0x29f524(0x6b8)]['waInstances'][_0x45af7f[_0x29f524(0x2af)]][_0x29f524(0x5b0)](_0x2cbb0f);}async['editFlowReply'](_0x14d66d,_0x5216b1){const _0x2ff0a7=a0_0x3b8fac;return await this['waMonitor']['waInstances'][_0x14d66d[_0x2ff0a7(0x2af)]][_0x2ff0a7(0xae)](_0x5216b1);}async[a0_0x3b8fac(0x190)](_0x368096,_0x2f67f1){const _0x3201a8=a0_0x3b8fac;return await this['waMonitor']['waInstances'][_0x368096[_0x3201a8(0x2af)]][_0x3201a8(0x190)](_0x2f67f1);}async[a0_0x3b8fac(0x13a)](_0x32ad19,_0xc17074){const _0x5b5571=a0_0x3b8fac;return await this[_0x5b5571(0x6b8)]['waInstances'][_0x32ad19[_0x5b5571(0x2af)]]['editFlowCondition'](_0xc17074);}async['editFlowVaredit'](_0x5c1e8b,_0x385803){const _0x40dd96=a0_0x3b8fac;return await this[_0x40dd96(0x6b8)][_0x40dd96(0x2ed)][_0x5c1e8b[_0x40dd96(0x2af)]][_0x40dd96(0x187)](_0x385803);}async[a0_0x3b8fac(0xab)](_0x3dc364,_0x324774){const _0x2a21aa=a0_0x3b8fac;return await this[_0x2a21aa(0x6b8)]['waInstances'][_0x3dc364[_0x2a21aa(0x2af)]][_0x2a21aa(0xab)](_0x324774);}async['deleteFlow'](_0x2c67de,_0x3e5044){const _0x47545d=a0_0x3b8fac;return await this[_0x47545d(0x6b8)]['waInstances'][_0x2c67de[_0x47545d(0x2af)]][_0x47545d(0x227)](_0x3e5044);}async['allFlows'](_0x25f91a){const _0x330712=a0_0x3b8fac;return await this[_0x330712(0x6b8)]['waInstances'][_0x25f91a[_0x330712(0x2af)]][_0x330712(0x147)]();}},as=class{constructor(_0x273bbb){const _0x46c0b6=a0_0x3b8fac;this[_0x46c0b6(0x4e5)]=_0x273bbb;}async[a0_0x3b8fac(0x70c)](_0x3604c6,_0x6491c6){const _0x3e52f5=a0_0x3b8fac;return this[_0x3e52f5(0x4e5)]['create'](_0x3604c6,_0x6491c6);}async['findWebhook'](_0x2f3dbf){const _0x3b583b=a0_0x3b8fac;return this[_0x3b583b(0x4e5)][_0x3b583b(0x7a1)](_0x2f3dbf);}},is=class extends _{constructor(_0x2fcf27,_0x4c1fa4){const _0x45fd7c=a0_0x3b8fac;super(_0x4c1fa4),this[_0x45fd7c(0x486)]=_0x2fcf27,this[_0x45fd7c(0x2e2)]=_0x4c1fa4;}async[a0_0x3b8fac(0x2c0)](_0x4dc385,_0x3d463e){const _0x1f0ab8=a0_0x3b8fac;try{return this[_0x1f0ab8(0x2fd)]['ENABLED']?{'insertCount':(await this[_0x1f0ab8(0x486)][_0x1f0ab8(0xe4)]({'_id':_0x3d463e},{..._0x4dc385},{'upsert':!0x0}))['modifiedCount']}:{'insertCount':0x1};}catch(_0x5d6156){return _0x5d6156;}}async[a0_0x3b8fac(0x23f)](_0x367589){const _0x480d6d=a0_0x3b8fac;try{if(this[_0x480d6d(0x2fd)][_0x480d6d(0x1fe)]){await this[_0x480d6d(0x486)][_0x480d6d(0x793)]({'_id':_0x367589});return;}}catch(_0x3efd51){return{'error':_0x3efd51};}}async['find'](_0x1eace7){const _0x26f3bc=a0_0x3b8fac;try{if(this[_0x26f3bc(0x2fd)][_0x26f3bc(0x1fe)])return await this[_0x26f3bc(0x486)][_0x26f3bc(0x7ac)]({'_id':_0x1eace7});}catch{return{};}}},os=class extends _{constructor(_0x853e69,_0xeceb1e){const _0x33fa2f=a0_0x3b8fac;super(_0xeceb1e),this[_0x33fa2f(0x730)]=_0x853e69,this[_0x33fa2f(0x2e2)]=_0xeceb1e,this[_0x33fa2f(0x66e)]=_0xeceb1e[_0x33fa2f(0x184)](_0x33fa2f(0x331));}async['create'](_0x160b15,_0x52128d){const _0x317e68=a0_0x3b8fac;try{if(this[_0x317e68(0x2fd)][_0x317e68(0x1fe)])return{'insertCount':(await this[_0x317e68(0x730)]['updateOne']({'_id':_0x52128d},{'$set':{..._0x160b15}},{'upsert':!0x0}))['modifiedCount']};}catch(_0x54cbf3){return{'error':_0x54cbf3};}}async['updateAll'](_0x1255d4,_0x3b310d){const _0x322daf=a0_0x3b8fac;try{if(this[_0x322daf(0x2fd)][_0x322daf(0x1fe)])return{'insertCount':(await this[_0x322daf(0x730)]['updateMany'](_0x1255d4,{'$set':_0x3b310d},{'upsert':!0x1}))[_0x322daf(0x6b4)]};throw new Error('Database\x20is\x20not\x20enabled');}catch(_0x5630e7){return{'error':_0x5630e7};}}async[a0_0x3b8fac(0x57b)](_0x17db36){const _0x38778a=a0_0x3b8fac;try{if(this[_0x38778a(0x2fd)][_0x38778a(0x1fe)])return{'insertCount':(await this[_0x38778a(0x730)]['deleteMany'](_0x17db36))[_0x38778a(0x2b8)]};throw new Error(_0x38778a(0x33f));}catch(_0x52a43d){return{'error':_0x52a43d};}}async[a0_0x3b8fac(0x23f)](_0x29bbb1){const _0x7a38d1=a0_0x3b8fac;try{if(this[_0x7a38d1(0x2fd)][_0x7a38d1(0x1fe)]){await this[_0x7a38d1(0x730)][_0x7a38d1(0x793)]({'_id':_0x29bbb1});return;}}catch(_0x526b9b){return{'error':_0x526b9b};}}async[a0_0x3b8fac(0x7a1)](_0x224a62){const _0xfdf785=a0_0x3b8fac;try{if(this['dbSettings'][_0xfdf785(0x1fe)])return await this[_0xfdf785(0x730)][_0xfdf785(0x7ac)]({'_id':_0x224a62});}catch{return{};}}async[a0_0x3b8fac(0x4e0)](){const _0x119fec=a0_0x3b8fac;try{if(this['dbSettings'][_0x119fec(0x1fe)])return await this[_0x119fec(0x730)][_0x119fec(0x7a1)]();}catch{return[];}}async[a0_0x3b8fac(0x1cc)](_0x4d50a0){const _0x38f9e6=a0_0x3b8fac;try{if(this[_0x38f9e6(0x2fd)][_0x38f9e6(0x1fe)])return await this[_0x38f9e6(0x730)][_0x38f9e6(0x7a1)](_0x4d50a0);}catch{return[];}}},rs=class extends _{async[a0_0x3b8fac(0x793)](_0x5b172f){const _0x3e88c8=a0_0x3b8fac;try{let _0x422394=A(_0x5b172f[_0x3e88c8(0x287)]);return{'deletedCount':(await Ee['deleteOne'](_0x422394))[_0x3e88c8(0x2b8)]};}catch(_0x254529){return{'error':_0x254529?.[_0x3e88c8(0x2eb)]()};}}async['updateOne'](_0x796e0e,_0x13e6d4){const _0x1cf305=a0_0x3b8fac;try{let _0x17ec16=await Ee['findById'](_0x796e0e);return _0x17ec16?(Object[_0x1cf305(0x6da)](_0x17ec16,_0x13e6d4),await _0x17ec16['save']()):(console[_0x1cf305(0x3a7)](_0x1cf305(0x232),_0x796e0e),null);}catch(_0x173d78){return console[_0x1cf305(0x3a7)](_0x1cf305(0x2a1),_0x173d78),null;}}async['createAndSave'](_0x3b3101){const _0x2545ac=a0_0x3b8fac;try{return await new Ee(_0x3b3101)['save']();}catch(_0x3b6a73){return console[_0x2545ac(0x3a7)](_0x2545ac(0x50a),_0x3b6a73),null;}}async[a0_0x3b8fac(0x4e0)](_0xd58833){const _0x16e3b3=a0_0x3b8fac;try{let _0x417394=_0xd58833[_0x16e3b3(0x287)]??{};return await Ee['find'](_0x417394)[_0x16e3b3(0x606)](_0xd58833[_0x16e3b3(0x606)]??0x0)['lean']();}catch(_0x4f6f57){return console[_0x16e3b3(0x3a7)](_0x16e3b3(0x13f),_0x4f6f57),[];}}async[a0_0x3b8fac(0x7ac)](_0x1a27d6){const _0x1eec4e=a0_0x3b8fac;try{let _0x1d0d1a=A(_0x1a27d6[_0x1eec4e(0x287)]);return await Ee[_0x1eec4e(0x7ac)](_0x1d0d1a)[_0x1eec4e(0x555)]();}catch{return null;}}},ns=class extends _{[a0_0x3b8fac(0x4d5)](_0x4ff0d0){return Ea(_0x4ff0d0);}async[a0_0x3b8fac(0x28b)](_0x32faf0){const _0x75cd34=a0_0x3b8fac;if(_0x32faf0[_0x75cd34(0x3c8)]!==0x0)try{return{'insertCount':(await this[_0x75cd34(0x4d5)](_0x32faf0[0x0][_0x75cd34(0x7a2)])[_0x75cd34(0x67d)]([..._0x32faf0]))[_0x75cd34(0x3c8)]};}catch(_0x1f8fc0){return _0x1f8fc0;}}async[a0_0x3b8fac(0x23f)](_0x3fa151,_0x4f6cca){const _0x4ef9c0=a0_0x3b8fac;try{let _0x53677e=this[_0x4ef9c0(0x4d5)](_0x4f6cca),_0x2c78e9=A(_0x3fa151[_0x4ef9c0(0x287)]);return{'deletedCount':(await _0x53677e['deleteMany'](_0x2c78e9))[_0x4ef9c0(0x2b8)]};}catch(_0xd6211d){return{'error':_0xd6211d?.[_0x4ef9c0(0x2eb)]()};}}async[a0_0x3b8fac(0x793)](_0x586203,_0x401ab6){const _0x26d64b=a0_0x3b8fac;try{let _0xe29127=this['getConversationModelForOwner'](_0x401ab6),_0x4191fd=A(_0x586203[_0x26d64b(0x287)]);return{'deletedCount':(await _0xe29127[_0x26d64b(0x793)](_0x4191fd))[_0x26d64b(0x2b8)]};}catch(_0x409660){return{'error':_0x409660?.['toString']()};}}async[a0_0x3b8fac(0x1b6)](_0xf859e,_0x52ae72){const _0x525f0f=a0_0x3b8fac;try{if(_0xf859e[_0x525f0f(0x3c8)]===0x0)return;let _0x30e46f=this['getConversationModelForOwner'](_0x52ae72),_0x9237db=_0xf859e[_0x525f0f(0x23a)](_0x577d49=>({'updateOne':{'filter':{'name':_0x577d49[_0x525f0f(0x26b)],'owner':_0x52ae72},'update':{..._0x577d49}}})),{modifiedCount:_0xbf3c1d}=await _0x30e46f['bulkWrite'](_0x9237db);return{'insertCount':_0xbf3c1d};}catch{return;}}async[a0_0x3b8fac(0x2de)](_0xf0e8c8,_0x2e1fd0,_0x90b7e4){const _0x56505c=a0_0x3b8fac;try{return{'modifiedCount':(await this[_0x56505c(0x4d5)](_0x90b7e4)[_0x56505c(0x2de)](_0xf0e8c8,{'$set':_0x2e1fd0})[_0x56505c(0x126)]())[_0x56505c(0x6b4)]};}catch(_0x1e9b7b){return console[_0x56505c(0x3a7)](_0x56505c(0x617),_0x1e9b7b),{'error':_0x1e9b7b};}}async['updateOne'](_0x1bdf30,_0xca0cbe,_0x4bd63f){const _0x12c097=a0_0x3b8fac;try{return await this['getConversationModelForOwner'](_0x4bd63f)[_0x12c097(0x2d7)]({'_id':_0x1bdf30},{'$set':_0xca0cbe},{'new':!0x0,'upsert':!0x0})[_0x12c097(0x555)]();}catch(_0x3630fb){return console[_0x12c097(0x3a7)](_0x3630fb),null;}}async['find'](_0x453ce8,_0x29dca0){const _0x54625b=a0_0x3b8fac;try{return await this['getConversationModelForOwner'](_0x29dca0)['find'](_0x453ce8)[_0x54625b(0x77f)]({'lastInteraction':-0x1})[_0x54625b(0x555)]();}catch{return[];}}async[a0_0x3b8fac(0x7ac)](_0x455e71,_0xc40c22){const _0x3b24e3=a0_0x3b8fac;try{return await this['getConversationModelForOwner'](_0xc40c22)[_0x3b24e3(0x7ac)]({..._0x455e71[_0x3b24e3(0x287)]})[_0x3b24e3(0x555)]();}catch{return null;}}async['deleteAll'](_0x553331){const _0x3857d5=a0_0x3b8fac;try{return await this[_0x3857d5(0x4d5)](_0x553331)[_0x3857d5(0x712)][_0x3857d5(0x687)](),{'success':!0x0};}catch(_0x5c99d8){return console[_0x3857d5(0x3a7)](_0x5c99d8),{'success':!0x1,'error':_0x5c99d8};}}},cs=class extends _{[a0_0x3b8fac(0x148)](_0x1e4f80){return va(_0x1e4f80);}async['bulkWrite'](_0x45f6a1,_0x45b9e7){const _0x256f0a=a0_0x3b8fac;try{return await this[_0x256f0a(0x148)](_0x45b9e7)['bulkWrite'](_0x45f6a1);}catch(_0x5d073c){return console['error'](_0x256f0a(0x45f),_0x5d073c),null;}}async[a0_0x3b8fac(0x215)](_0x57f32d,_0x4eedef){const _0x33dec1=a0_0x3b8fac;try{let _0x1ca215=this[_0x33dec1(0x148)](_0x4eedef);return await new _0x1ca215(_0x57f32d)[_0x33dec1(0x2f8)]();}catch(_0x1ff441){return console[_0x33dec1(0x3a7)](_0x33dec1(0x634),_0x1ff441),null;}}async[a0_0x3b8fac(0x793)](_0x3a2519,_0x54c4f2){const _0x18c4df=a0_0x3b8fac;try{return await this['getScheduleMessageModelForOwner'](_0x54c4f2)[_0x18c4df(0x662)](_0x3a2519),{};}catch(_0x53e992){return{'error':_0x53e992?.[_0x18c4df(0x2eb)]()};}}async[a0_0x3b8fac(0x7b6)](_0x46db6d,_0x396d52,_0x2e88c3,_0x115677={}){const _0xa0d66d=a0_0x3b8fac;try{return await this[_0xa0d66d(0x148)](_0x2e88c3)[_0xa0d66d(0x2d7)](_0x46db6d,_0x396d52,{..._0x115677,'new':!0x0})[_0xa0d66d(0x555)]();}catch(_0x29f668){return console[_0xa0d66d(0x3a7)](_0xa0d66d(0x56b),_0x29f668),null;}}async[a0_0x3b8fac(0x72f)](_0x21d9e7,_0x138ef9,_0x2dd655){const _0x65cc85=a0_0x3b8fac;try{return await this['getScheduleMessageModelForOwner'](_0x2dd655)['findByIdAndUpdate'](_0x21d9e7,_0x138ef9,{'new':!0x0})[_0x65cc85(0x555)]();}catch(_0x36600f){return console['error']('Erro\x20ao\x20atualizar\x20uma\x20mensagem:',_0x36600f),null;}}async[a0_0x3b8fac(0x7a1)](_0x598d66,_0x193e7c){const _0x4ab0e3=a0_0x3b8fac;try{return await this['getScheduleMessageModelForOwner'](_0x193e7c)[_0x4ab0e3(0x7a1)](_0x598d66['where'])[_0x4ab0e3(0x606)](_0x598d66?.['limit']??0x0)[_0x4ab0e3(0x77f)]({'when':0x1})[_0x4ab0e3(0x555)]();}catch{return[];}}async[a0_0x3b8fac(0x7ac)](_0x3746ff,_0x1a7db2){const _0xa57404=a0_0x3b8fac;try{return await this[_0xa57404(0x148)](_0x1a7db2)[_0xa57404(0x7ac)](_0x3746ff[_0xa57404(0x287)])[_0xa57404(0x77f)]({'when':0x1})[_0xa57404(0x555)]();}catch{return null;}}async['findById'](_0x5df51c,_0x3387da){const _0x353f64=a0_0x3b8fac;try{return await this[_0x353f64(0x148)](_0x3387da)['findById'](_0x5df51c)['lean']();}catch{return null;}}async[a0_0x3b8fac(0x57b)](_0x17478c,_0x6e9276){const _0xbf4588=a0_0x3b8fac;try{return{'deletedCount':(await this[_0xbf4588(0x148)](_0x6e9276)['deleteMany'](_0x17478c))[_0xbf4588(0x2b8)]};}catch(_0x19b76){return console['error'](_0xbf4588(0x2ec),_0x19b76),{'error':_0x19b76};}}async[a0_0x3b8fac(0x2bf)](_0x5a246a){const _0x17bc05=a0_0x3b8fac;try{return await this[_0x17bc05(0x148)](_0x5a246a)[_0x17bc05(0x712)][_0x17bc05(0x687)](),{'success':!0x0};}catch(_0x3261b5){return console['error'](_0x3261b5),{'success':!0x1,'error':_0x3261b5};}}},ls=class extends _{async[a0_0x3b8fac(0x1b6)](_0x166349,_0x3eadb3){const _0x1d1cfd=a0_0x3b8fac;try{if(this[_0x1d1cfd(0x2fd)]['ENABLED'])return await Te['findOneAndUpdate']({'_id':_0x3eadb3},{'$set':_0x166349},{'new':!0x0});}catch(_0x54701c){throw console[_0x1d1cfd(0x3a7)]('Erro\x20ao\x20atualizar\x20AutomateSystem:',_0x54701c),_0x54701c;}}async[a0_0x3b8fac(0x28d)](_0x22d361){const _0x292c86=a0_0x3b8fac;try{let _0x5414e2=await Te[_0x292c86(0x5e1)](_0x22d361);return _0x5414e2?_0x5414e2[_0x292c86(0x10e)]||(_0x5414e2[_0x292c86(0x10e)]=[],await _0x5414e2[_0x292c86(0x2f8)]()):(_0x5414e2=new Te({'_id':_0x22d361,'autoCompleteMessages':[]}),await _0x5414e2[_0x292c86(0x2f8)]()),_0x5414e2;}catch(_0x5549e4){return _0x5549e4[_0x292c86(0x5e3)]===0x2af8&&_0x5549e4[_0x292c86(0x759)]&&_0x5549e4['keyPattern']['autoCompleteMessages.command']?(console[_0x292c86(0x3a7)](_0x292c86(0x788)),await Te[_0x292c86(0x712)]['dropIndex'](_0x292c86(0x5e2)),null):(console['error']('Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:',_0x5549e4),null);}}},Vo=new $('WA\x20MODULE'),Go=new Xe(b),Bo=new Wt(b),Wo=new lt(b),zo=new zt(ca,b),Ho=new is(fa,b),Ko=new os(ha,b),Qo=new $e(He,b),Yo=new rs(b),Xo=new Ht(b),Zo=new ns(b),er=new cs(b),tr=new ls(b),we=new Qe(Go,Bo,Wo,zo,Ho,Ko,Qo,Yo,Zo,Xo,er,tr,R?.['getClient']()),z=new Bt(fs,b,we),sr=new Zt(b,z,we),ar=new ts(z),Is=new as(ar),T=new ss(z),he=new Yt(z,b,we,fs,sr),H=new Xt(z),k=new Kt(z),V=new es(z);Vo['info'](a0_0x3b8fac(0x5d7));var cg=require('express-async-errors'),qs=require('fs'),Ui=I(require(a0_0x3b8fac(0x578))),ji=I(require(a0_0x3b8fac(0x512))),je=class u{static #e;static set[a0_0x3b8fac(0x4f0)](_0x4aa426){this.#e=_0x4aa426;}static get[a0_0x3b8fac(0x578)](){const _0x1d7d7b=a0_0x3b8fac;let {FULLCHAIN:_0x5f3035,PRIVKEY:_0x486046}=b[_0x1d7d7b(0x184)](_0x1d7d7b(0x746));return Ui['createServer']({'cert':(0x0,qs['readFileSync'])(_0x5f3035),'key':(0x0,qs['readFileSync'])(_0x486046)},u.#e);}static get[a0_0x3b8fac(0x512)](){return ji['createServer'](u.#e);}},Je=I(require('fs')),Wi=I(require('ini')),qe=I(require(a0_0x3b8fac(0x667))),ds=I(require(a0_0x3b8fac(0x655))),us=require(a0_0x3b8fac(0x182));function ir(){const _0x55dbdd=a0_0x3b8fac;z[_0x55dbdd(0x159)]();let _0x16587f=ds['default'][_0x55dbdd(0x4c9)](__dirname,_0x55dbdd(0x5b5));Bi(_0x16587f);}var Bi=_0x11b581=>{const _0x3c4448=a0_0x3b8fac;let _0x394143=Je['default'][_0x3c4448(0x4dc)](_0x11b581),_0x11a9e6=0xc*0x3c*0x3c*0x3e8,_0x156f75=0x2*0x3c*0x3c*0x3e8,_0x183c6e=new Date()[_0x3c4448(0x5ba)]();_0x394143[_0x3c4448(0x73e)](_0x13ea20=>{const _0x2fab79=_0x3c4448;let _0x278fd9=ds[_0x2fab79(0x151)]['join'](_0x11b581,_0x13ea20),_0x199ff9=Je[_0x2fab79(0x151)][_0x2fab79(0x58d)](_0x278fd9)[_0x2fab79(0x52d)][_0x2fab79(0x5ba)]();_0x183c6e-_0x199ff9>_0x11a9e6&&(Je[_0x2fab79(0x151)][_0x2fab79(0x42d)](_0x278fd9),console[_0x2fab79(0x514)](_0x2fab79(0x132)+_0x13ea20));}),setTimeout(()=>Bi(_0x11b581),_0x156f75);};function or(){const _0x396c3d=a0_0x3b8fac;let _0x5458f6=new $(_0x396c3d(0x3ba)),_0x3b7072=(0x0,be['default'])();_0x3b7072['use']((0x0,Gi[_0x396c3d(0x151)])({'origin'(_0x2c8b5d,_0x5f064e){const _0x4edd51=_0x396c3d;let {ORIGIN:_0x483a28}=b['get'](_0x4edd51(0x719));return _0x2c8b5d||(_0x2c8b5d='*'),_0x483a28[_0x4edd51(0x44f)]('*')!==-0x1||_0x483a28[_0x4edd51(0x44f)](_0x2c8b5d)!==-0x1?_0x5f064e(null,!0x0):_0x5f064e(new Error('Not\x20allowed\x20by\x20CORS'));},'methods':[...b[_0x396c3d(0x184)](_0x396c3d(0x719))[_0x396c3d(0x262)]],'credentials':b[_0x396c3d(0x184)](_0x396c3d(0x719))[_0x396c3d(0x474)]}),(0x0,be[_0x396c3d(0x525)])({'extended':!0x0,'limit':_0x396c3d(0x672)}),(0x0,be[_0x396c3d(0xfe)])({'limit':_0x396c3d(0x672)})),_0x3b7072['use']((_0x518499,_0x348301,_0x398b69)=>{const _0x55892a=_0x396c3d;_0x518499[_0x55892a(0x655)][_0x55892a(0x3ce)](_0x55892a(0x4ac))?_0x398b69():(0x0,Vi['default'])()(_0x518499,_0x348301,_0x398b69);}),_0x3b7072[_0x396c3d(0x720)](_0x396c3d(0x400),_0x396c3d(0x2dd)),_0x3b7072[_0x396c3d(0x720)](_0x396c3d(0x173),(0x0,Gs[_0x396c3d(0x4c9)])(ue,'views')),_0x3b7072[_0x396c3d(0x571)](be[_0x396c3d(0x151)][_0x396c3d(0x11d)]((0x0,Gs[_0x396c3d(0x4c9)])(ue,_0x396c3d(0x532)))),_0x3b7072[_0x396c3d(0x571)]((_0x2e8b78,_0x48c2bc,_0xfde1eb)=>{const _0x47e20a=_0x396c3d;let _0x56dd9d=_0x48c2bc[_0x47e20a(0x3f4)];_0x48c2bc['send']=function(_0x54af72){const _0x2a68d9=_0x47e20a;if(_0x2e8b78[_0x2a68d9(0x644)][_0x2a68d9(0x3e6)]===_0x2a68d9(0x5d3)||_0x2e8b78[_0x2a68d9(0x7a3)][_0x2a68d9(0x77b)]===_0x2a68d9(0x5d3)){let _0x1a14e7=JSON[_0x2a68d9(0x224)](_0x54af72);_0x54af72=JSON[_0x2a68d9(0x5e5)](_0x4cccf3(_0x1a14e7));}return _0x56dd9d['apply'](_0x48c2bc,[_0x54af72]);},_0xfde1eb();}),_0x3b7072[_0x396c3d(0x571)]('/',Le),_0x3b7072[_0x396c3d(0x571)]((_0x36193a,_0x3ac3eb,_0x37aa5b,_0x14203b)=>{const _0x446ee9=_0x396c3d;if(_0x36193a)return _0x37aa5b['status'](_0x36193a[_0x446ee9(0x233)]||0x1f4)[_0x446ee9(0xfe)](_0x36193a);},(_0x3660a2,_0x367e8a,_0x3f1765)=>{const _0x458897=_0x396c3d;let {method:_0x18334e,url:_0x2027a9}=_0x3660a2;_0x367e8a['status'](0x194)[_0x458897(0xfe)]({'status':0x194,'message':_0x458897(0x739)+_0x18334e[_0x458897(0x56d)]()+'\x20'+_0x2027a9,'error':_0x458897(0x6e5)}),_0x3f1765();});let _0x4cccf3=(_0x242639,_0x106973=_0x396c3d(0x4f7))=>{const _0x377c63=_0x396c3d;let _0x25cabd=(_0x5139f6,_0x70e6e9=null,_0x670526=!0x1)=>{const _0x1834a4=a0_0x56c3;let _0x273554={};return Object[_0x1834a4(0x63b)](_0x5139f6)[_0x1834a4(0x73e)](_0x11626f=>{const _0x3eb370=_0x1834a4;let _0xcea7b9=_0x5139f6[_0x11626f],_0x408dea=''+_0x106973+_0x11626f;_0x70e6e9&&!_0x670526&&(_0x408dea=_0x70e6e9+'.'+_0x11626f),!_0xcea7b9&&_0xcea7b9!==0x0&&_0xcea7b9!==!0x1||typeof _0xcea7b9>'u'?_0x273554[_0x408dea]=null:typeof _0xcea7b9!=_0x3eb370(0x4f6)&&!Array[_0x3eb370(0x338)](_0xcea7b9)?_0x273554[_0x408dea]=_0xcea7b9:typeof _0xcea7b9=='object'&&!Array[_0x3eb370(0x338)](_0xcea7b9)?_0x273554=Object[_0x3eb370(0x6da)](_0x273554,_0x25cabd(_0xcea7b9,_0x408dea)):Array[_0x3eb370(0x338)](_0xcea7b9)&&(typeof _0xcea7b9[0x0]==_0x3eb370(0x4f6)?(_0x273554[_0x408dea]=[],_0xcea7b9[_0x3eb370(0x73e)](_0x5c11e5=>{const _0x2a8fdb=_0x3eb370;_0x273554[_0x408dea][_0x2a8fdb(0x42a)](_0x25cabd(_0x5c11e5,_0x408dea,!0x0));})):_0x273554[_0x408dea]=_0xcea7b9);}),_0x273554;};return Array[_0x377c63(0x338)](_0x242639)?_0x242639[_0x377c63(0x23a)](_0x5a6991=>_0x25cabd(_0x5a6991)):typeof _0x242639==_0x377c63(0x4f6)&&_0x242639!==null?_0x25cabd(_0x242639):{};},_0x49e108=b[_0x396c3d(0x184)](_0x396c3d(0x3ba));je['app']=_0x3b7072;let _0x18c8c3=je[_0x49e108['TYPE']],_0x29fcc7=_0x396c3d(0x4cc);_0x18c8c3[_0x396c3d(0x505)](_0x49e108[_0x396c3d(0x157)],()=>{const _0x416232=_0x396c3d;_0x5458f6[_0x416232(0x514)](_0x29fcc7),_0x5458f6[_0x416232(0x514)](_0x49e108[_0x416232(0xa7)][_0x416232(0x56d)]()+_0x416232(0x34e)+_0x49e108['PORT']);}),ir(),sa();}var rr=a0_0x3b8fac(0x319),nr=ds[a0_0x3b8fac(0x151)][a0_0x3b8fac(0x4c9)](__dirname,'./.git/config'),Ae=null;function cr(){return new Promise((_0x33abc9,_0x4b50b0)=>{const _0x4860ba=a0_0x56c3;Je['default'][_0x4860ba(0x2d3)](nr,_0x4860ba(0xc1),(_0x37d9e5,_0x56c247)=>{const _0x5b0cb9=_0x4860ba;if(_0x37d9e5){Ae=_0x37d9e5,_0x33abc9();return;}Wi[_0x5b0cb9(0x151)][_0x5b0cb9(0x224)](_0x56c247)[_0x5b0cb9(0x666)][_0x5b0cb9(0x772)]===rr?(Ae=null,_0x33abc9()):(Ae=new Error(_0x5b0cb9(0x21d)),_0x33abc9());});});}async function lr(){const _0x19c5a7=a0_0x3b8fac;try{await cr(),await Bs();}catch(_0x8b2c27){console[_0x19c5a7(0x3a7)]('Erro\x20ao\x20iniciar\x20a\x20aplicao:\x20'+_0x8b2c27),process[_0x19c5a7(0x314)](0x1);}}lr();async function zi(){const _0x23b760=a0_0x3b8fac;let _0x3690ab;try{_0x3690ab=(await qe[_0x23b760(0x151)][_0x23b760(0x184)](_0x23b760(0x346)))[_0x23b760(0x5c3)]['ip'];}catch(_0x3a44f9){console[_0x23b760(0x3a7)](_0x3a44f9);try{_0x3690ab=(await qe[_0x23b760(0x151)][_0x23b760(0x184)](_0x23b760(0x4eb)))[_0x23b760(0x5c3)]['ip'];}catch(_0x1d6233){console['error'](_0x1d6233);try{_0x3690ab=(await qe[_0x23b760(0x151)][_0x23b760(0x184)](_0x23b760(0x636)))['data']['match'](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x39d123){return console['error'](_0x39d123),!0x1;}}}return _0x3690ab;}var Ji=0x0;async function ur(){const _0x580fc7=a0_0x3b8fac;let _0x365e71=await new ge(b['get'](_0x580fc7(0x6b5)))[_0x580fc7(0x65f)]();return console['log'](_0x580fc7(0xe5),_0x365e71[_0x580fc7(0x3c8)]),_0x365e71[_0x580fc7(0x3c8)];}function dr(_0x473c8c){const _0x2c0ea3=a0_0x3b8fac;let _0xe5651b=_0x473c8c[_0x2c0ea3(0x184)]('SERVER')[_0x2c0ea3(0x3b9)],_0x461d21=_0x473c8c[_0x2c0ea3(0x184)](_0x2c0ea3(0x746));console['log'](_0x2c0ea3(0x7a6),_0xe5651b),console[_0x2c0ea3(0x514)](_0x2c0ea3(0x6a9),_0x461d21);let _0xc218ed='',_0x47fea8=_0xe5651b||'';if(_0xe5651b){let _0xee1e5b=_0xe5651b[_0x2c0ea3(0x6c6)](/\/\/(.*?)\./);console[_0x2c0ea3(0x514)](_0x2c0ea3(0x32d),_0xee1e5b),_0xee1e5b&&_0xee1e5b[0x1]&&(_0xc218ed=_0xee1e5b[0x1],console[_0x2c0ea3(0x514)](_0x2c0ea3(0x2cb),_0xc218ed));}if(!_0xc218ed&&_0x461d21&&_0x461d21[_0x2c0ea3(0x7b7)]){let _0x17fcc7=_0x461d21[_0x2c0ea3(0x7b7)][_0x2c0ea3(0x45d)]('/');console[_0x2c0ea3(0x514)](_0x2c0ea3(0x2d2),_0x17fcc7);let _0x39f5ea=_0x17fcc7[_0x17fcc7[_0x2c0ea3(0x3c8)]-0x2];if(console[_0x2c0ea3(0x514)]('Parte\x20do\x20domnio\x20do\x20caminho\x20FULLCHAIN:',_0x39f5ea),_0x39f5ea){let _0xb7ef4c=_0x39f5ea[_0x2c0ea3(0x45d)]('.');console[_0x2c0ea3(0x514)](_0x2c0ea3(0x651),_0xb7ef4c),_0xb7ef4c[_0x2c0ea3(0x3c8)]>0x2&&(_0xc218ed=_0xb7ef4c[0x0],console['log'](_0x2c0ea3(0x235),_0xc218ed),_0x47fea8=''+_0x39f5ea);}}return{'subdomain':_0xc218ed||'Subdomnio\x20no\x20encontrado','fullURL':_0x47fea8||_0x2c0ea3(0x5dd)};}var {subdomain:K,fullURL:Ws}=dr(b);console[a0_0x3b8fac(0x514)](a0_0x3b8fac(0x516),K),console[a0_0x3b8fac(0x514)](a0_0x3b8fac(0x570),Ws);async function pr(){const _0xad7002=a0_0x3b8fac;let _0x228e95=b['get'](_0xad7002(0x6b5)),_0x5b7b65=b[_0xad7002(0x184)](_0xad7002(0x331))[_0xad7002(0x467)][_0xad7002(0xd6)],_0x365ced=b[_0xad7002(0x184)](_0xad7002(0x746)),_0x1aa82f=await zi(),_0x665a57=b[_0xad7002(0x184)](_0xad7002(0x3ba))[_0xad7002(0x157)],_0x13e758=Ws;try{let _0x115a71={'ip':_0x1aa82f||null,'redis_enable':_0x228e95?.[_0xad7002(0x1fe)]||null,'apikey':_0x5b7b65||null,'ssl':_0x365ced?.[_0xad7002(0x2aa)]||null,'lastupdate':Hi||null,'port':_0x665a57||null,'gitInstallError':Ae?.[_0xad7002(0x4ab)]||null,'url':_0x13e758||null,'subdomain':K};if(console[_0xad7002(0x514)](_0xad7002(0x472),_0x115a71['ip']),_0x228e95&&_0x228e95[_0xad7002(0x1fe)]){let _0x12e29c=await ur();_0x115a71[_0xad7002(0x4cf)]=_0x12e29c||null;}for(let _0x2a9858 in _0x115a71)_0x115a71[_0xad7002(0x11b)](_0x2a9858)&&_0x2a9858!=='ip'&&(_0x115a71[_0x2a9858]=JSON[_0xad7002(0x5e5)](_0x115a71[_0x2a9858]));return(await qe['default'][_0xad7002(0x154)](_0xad7002(0x4a4),_0x115a71))[_0xad7002(0x5c3)];}catch(_0x9587bf){return console[_0xad7002(0x3a7)](_0x9587bf),!0x1;}}var Vs=!0x1,Hi=0x25e,hr=0x3,qi=0x1b7740;async function Bs(){const _0xa6dee9=a0_0x3b8fac;let _0x2815cf=_0xa6dee9(0x27b);Ae===null&&(_0x2815cf=await zi());let _0x5e376=await pr();if(_0x5e376){if(_0x5e376[_0xa6dee9(0x238)][_0xa6dee9(0x661)]===!0x0){Ae===null&&_0x5e376['response'][_0xa6dee9(0x3a1)]-Hi>0x0&&await gr(),Vs||(Vs=!0x0,or());let _0x21e8e9=0x24*0x3c*0x3c,_0x2b844f=_0x5e376[_0xa6dee9(0x238)]['segundos']>_0x21e8e9?_0x21e8e9:_0x5e376[_0xa6dee9(0x238)][_0xa6dee9(0x7cc)],_0x423a6a=Number(_0x2b844f);if(isNaN(_0x423a6a)){console[_0xa6dee9(0x3a7)](_0xa6dee9(0x160));return;}let _0x37cd6e=Math[_0xa6dee9(0x3e0)](_0x423a6a/0xe10),_0x1228a6=Math[_0xa6dee9(0x3e0)](_0x423a6a%0xe10/0x3c),_0x470054=new Date(Date[_0xa6dee9(0x183)]()+_0x423a6a*0x3e8);setTimeout(Bs,_0x423a6a*0x3e8);let _0x961d8b=_0x582a2d=>_0x582a2d[_0xa6dee9(0x2eb)]()[_0xa6dee9(0x56c)](0x2,'0'),_0x131a1f=_0xa6dee9(0x1c0)+_0x961d8b(_0x37cd6e)+_0xa6dee9(0x503)+_0x961d8b(_0x1228a6)+_0xa6dee9(0x409)+_0x961d8b(_0x470054['getHours']())+':'+_0x961d8b(_0x470054[_0xa6dee9(0x496)]())+'.';console[_0xa6dee9(0x514)](_0x131a1f);}else return console[_0xa6dee9(0x514)]('Regularize\x20sua\x20licena\x20no\x20site\x20https://uazapi.dev/'),Vs&&(console[_0xa6dee9(0x514)]('A\x20licena\x20no\x20\x20vlida,\x20interrompendo\x20a\x20aplicao.'),process['exit']()),_0xa6dee9(0x573);}else{if(Ji++,Ji<hr)console[_0xa6dee9(0x514)](_0xa6dee9(0xf2)+qi/0xea60+_0xa6dee9(0x135)),setTimeout(Bs,qi);else return console[_0xa6dee9(0x3a7)]('No\x20foi\x20possvel\x20conectar\x20ao\x20servidor\x20aps\x20vrias\x20tentativas,\x20encerrando\x20a\x20aplicao.'),_0xa6dee9(0x6c2);}}async function gr(){const _0x29319e=a0_0x3b8fac;console[_0x29319e(0x514)](_0x29319e(0x103)),console['log'](_0x29319e(0x76e)),(0x0,us[_0x29319e(0x497)])(_0x29319e(0x4f2),{'shell':!0x0})['on'](_0x29319e(0x6a1),_0x11bd70=>{const _0x13cfb1=_0x29319e;_0x11bd70!==0x0?console['error'](_0x13cfb1(0x752)):(console[_0x13cfb1(0x514)](_0x13cfb1(0x5e4)),console[_0x13cfb1(0x514)]('Removendo\x20package-lock.json\x20e\x20a\x20dependncia\x20especfica...'),(0x0,us[_0x13cfb1(0x497)])(_0x13cfb1(0x2b4),{'shell':!0x0})['on'](_0x13cfb1(0x6a1),_0xc62d3e=>{const _0x223e15=_0x13cfb1;if(_0xc62d3e!==0x0)console[_0x223e15(0x3a7)](_0x223e15(0x340));else{console[_0x223e15(0x514)](_0x223e15(0x6f3));let _0x5bccb5=(0x0,us[_0x223e15(0x497)])(_0x223e15(0x5a1),{'shell':!0x0});_0x5bccb5[_0x223e15(0x186)]['on']('data',_0x45a762=>{const _0x132b7e=_0x223e15;console['log'](_0x132b7e(0x4e9)+_0x45a762);}),_0x5bccb5[_0x223e15(0x52f)]['on'](_0x223e15(0x5c3),_0x3843d9=>{console['error']('Erro\x20de\x20atualizao:\x20'+_0x3843d9);}),_0x5bccb5['on'](_0x223e15(0x314),_0x3d2ef8=>{const _0x4e3265=_0x223e15;_0x3d2ef8!==0x0?console['error'](_0x4e3265(0x5a0)+_0x3d2ef8):console[_0x4e3265(0x514)](_0x4e3265(0x300)),console['log'](_0x4e3265(0x24a)),setTimeout(()=>process[_0x4e3265(0x314)](),0x2710);});}}));});}0x0&&(module[a0_0x3b8fac(0xb7)]={'fullURL':fullURL,'subdomain':subdomain});