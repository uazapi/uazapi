const a0_0x5ca8c7=a0_0x5cfa;(function(_0x45c527,_0x7733b3){const _0x437ad9=a0_0x5cfa,_0x32b769=_0x45c527();while(!![]){try{const _0x10846c=-parseInt(_0x437ad9(0x2a0))/0x1*(-parseInt(_0x437ad9(0x522))/0x2)+-parseInt(_0x437ad9(0x475))/0x3+parseInt(_0x437ad9(0x4ae))/0x4+-parseInt(_0x437ad9(0x58a))/0x5*(parseInt(_0x437ad9(0x1ba))/0x6)+parseInt(_0x437ad9(0x518))/0x7+parseInt(_0x437ad9(0x46c))/0x8+parseInt(_0x437ad9(0x612))/0x9*(-parseInt(_0x437ad9(0x2ed))/0xa);if(_0x10846c===_0x7733b3)break;else _0x32b769['push'](_0x32b769['shift']());}catch(_0x1ac516){_0x32b769['push'](_0x32b769['shift']());}}}(a0_0x1091,0xa0f76));var Hi=Object[a0_0x5ca8c7(0x512)],Be=Object[a0_0x5ca8c7(0x108)],Ki=Object['getOwnPropertyDescriptor'],Qi=Object['getOwnPropertyNames'],Yi=Object['getPrototypeOf'],Xi=Object['prototype'][a0_0x5ca8c7(0x689)],Zi=(_0x3d3c11,_0x270d1e)=>{for(var _0x2e5d70 in _0x270d1e)Be(_0x3d3c11,_0x2e5d70,{'get':_0x270d1e[_0x2e5d70],'enumerable':!0x0});},Ws=(_0x2de706,_0x54b5f4,_0x1024c4,_0x5dd622)=>{const _0x3995fb=a0_0x5ca8c7;if(_0x54b5f4&&typeof _0x54b5f4=='object'||typeof _0x54b5f4==_0x3995fb(0x40f)){for(let _0xdad88e of Qi(_0x54b5f4))!Xi['call'](_0x2de706,_0xdad88e)&&_0xdad88e!==_0x1024c4&&Be(_0x2de706,_0xdad88e,{'get':()=>_0x54b5f4[_0xdad88e],'enumerable':!(_0x5dd622=Ki(_0x54b5f4,_0xdad88e))||_0x5dd622[_0x3995fb(0x74e)]});}return _0x2de706;},A=(_0x178dd6,_0x4a11e4,_0x1e5271)=>(_0x1e5271=_0x178dd6!=null?Hi(Yi(_0x178dd6)):{},Ws(_0x4a11e4||!_0x178dd6||!_0x178dd6['__esModule']?Be(_0x1e5271,a0_0x5ca8c7(0x180),{'value':_0x178dd6,'enumerable':!0x0}):_0x1e5271,_0x178dd6)),eo=_0x4b9ef9=>Ws(Be({},'__esModule',{'value':!0x0}),_0x4b9ef9),gr={};Zi(gr,{'fullURL':()=>Gs,'subdomain':()=>K}),module[a0_0x5ca8c7(0x360)]=eo(gr);var qi=A(require(a0_0x5ca8c7(0x5c8))),Hs=require('fs'),Ks=require(a0_0x5ca8c7(0x753)),Qs=require(a0_0x5ca8c7(0x2d9)),We=require('path'),de=process[a0_0x5ca8c7(0x622)](),Me=(0x0,We[a0_0x5ca8c7(0x363)])(de,a0_0x5ca8c7(0x38a)),zs=(0x0,We[a0_0x5ca8c7(0x363)])(de,'src'),an=(0x0,We['join'])(de,a0_0x5ca8c7(0x7e7),'auth'),ps=class{constructor(){this['loadEnv']();}[a0_0x5ca8c7(0x507)](_0x176ee6){const _0x189076=a0_0x5ca8c7;return this[_0x189076(0x54b)][_0x176ee6];}[a0_0x5ca8c7(0x553)](){const _0x74275e=a0_0x5ca8c7;this[_0x74275e(0x54b)]=process[_0x74275e(0x54b)]?.[_0x74275e(0x429)]!==_0x74275e(0x29e)?this[_0x74275e(0x787)]():this[_0x74275e(0x1cc)](),process[_0x74275e(0x54b)]?.[_0x74275e(0x429)]==='true'&&(this[_0x74275e(0x54b)][_0x74275e(0x390)][_0x74275e(0x25b)]=_0x74275e(0x44c),this[_0x74275e(0x54b)]['SERVER'][_0x74275e(0x685)]=Number[_0x74275e(0x10b)](process['env']?.[_0x74275e(0x320)]??_0x74275e(0x426)));}[a0_0x5ca8c7(0x787)](){const _0x1f7331=a0_0x5ca8c7;return(0x0,Ks[_0x1f7331(0x353)])((0x0,Hs[_0x1f7331(0x1f9)])((0x0,Qs[_0x1f7331(0x363)])(zs,_0x1f7331(0x30d)),{'encoding':'utf-8'}));}['envProcess'](){const _0x45efe1=a0_0x5ca8c7;return{'SERVER':{'TYPE':process['env'][_0x45efe1(0x661)],'PORT':Number[_0x45efe1(0x10b)](process[_0x45efe1(0x54b)]['SERVER_PORT']),'URL':process[_0x45efe1(0x54b)][_0x45efe1(0x712)]},'CORS':{'ORIGIN':process[_0x45efe1(0x54b)][_0x45efe1(0x684)][_0x45efe1(0x42a)](','),'METHODS':process[_0x45efe1(0x54b)][_0x45efe1(0x238)][_0x45efe1(0x42a)](','),'CREDENTIALS':process[_0x45efe1(0x54b)]?.[_0x45efe1(0x43d)]===_0x45efe1(0x29e)},'SSL_CONF':{'PRIVKEY':process['env']?.[_0x45efe1(0xe2)],'FULLCHAIN':process[_0x45efe1(0x54b)]?.[_0x45efe1(0x35f)]},'STORE':{'CLEANING_INTERVAL':Number['isInteger'](process[_0x45efe1(0x54b)]?.['STORE_CLEANING_TERMINAL'])?Number[_0x45efe1(0x10b)](process[_0x45efe1(0x54b)][_0x45efe1(0x327)]):void 0x0,'MESSAGES':process[_0x45efe1(0x54b)]?.[_0x45efe1(0x52f)]===_0x45efe1(0x29e),'CONTACTS':process[_0x45efe1(0x54b)]?.['STORE_CONTACTS']==='true','CHATS':process['env']?.[_0x45efe1(0x3ef)]===_0x45efe1(0x29e)},'DATABASE':{'CONNECTION':{'HOST':process[_0x45efe1(0x54b)]?.[_0x45efe1(0x6bf)],'PORT':Number['parseInt'](process[_0x45efe1(0x54b)]?.['DATABASE_CONNECTION_HOST']),'USER':process[_0x45efe1(0x54b)]['DATABASE_CONNECTION_USER'],'PASSWORD':process[_0x45efe1(0x54b)][_0x45efe1(0x103)],'URI':process[_0x45efe1(0x54b)][_0x45efe1(0x351)],'DB_PREFIX_NAME':process[_0x45efe1(0x54b)]['DATABASE_CONNECTION_DB_PREFIX_NAME']},'ENABLED':process[_0x45efe1(0x54b)]?.[_0x45efe1(0x747)]===_0x45efe1(0x29e)},'REDIS':{'ENABLED':process[_0x45efe1(0x54b)]?.['REDIS_ENABLED']==='true','URI':process[_0x45efe1(0x54b)][_0x45efe1(0x19c)]||_0x45efe1(0x17e),'PREFIX_KEY':process[_0x45efe1(0x54b)][_0x45efe1(0x63b)]||_0x45efe1(0x13b)},'LOG':{'LEVEL':process[_0x45efe1(0x54b)]?.[_0x45efe1(0x5ce)][_0x45efe1(0x42a)](','),'COLOR':process[_0x45efe1(0x54b)]?.[_0x45efe1(0x5de)]===_0x45efe1(0x29e)},'PROXY':process[_0x45efe1(0x54b)]?.[_0x45efe1(0x5d8)]===_0x45efe1(0x29e),'AUTHENTICATION':{'TYPE':process[_0x45efe1(0x54b)][_0x45efe1(0x578)],'API_KEY':{'KEY':process[_0x45efe1(0x54b)][_0x45efe1(0xfa)]},'JWT':{'EXPIRIN_IN':Number[_0x45efe1(0x5a7)](process[_0x45efe1(0x54b)]?.[_0x45efe1(0x79f)])?Number[_0x45efe1(0x10b)](process[_0x45efe1(0x54b)]['AUTHENTICATION_JWT_EXPIRIN_IN']):0xe10,'SECRET':process[_0x45efe1(0x54b)][_0x45efe1(0x718)]}}};}},S=new ps(),Vi=A(require('cors')),Se=A(require('express')),qs=require('path'),hs=A(require(a0_0x5ca8c7(0x58d))),gs=(_0x32fe89=>(_0x32fe89[a0_0x5ca8c7(0x48b)]=a0_0x5ca8c7(0x7fa),_0x32fe89[a0_0x5ca8c7(0x205)]=a0_0x5ca8c7(0x5ac),_0x32fe89[a0_0x5ca8c7(0x352)]=a0_0x5ca8c7(0x34d),_0x32fe89[a0_0x5ca8c7(0x4c6)]=a0_0x5ca8c7(0x211),_0x32fe89[a0_0x5ca8c7(0x6ca)]=a0_0x5ca8c7(0x1c9),_0x32fe89[a0_0x5ca8c7(0x5cf)]=a0_0x5ca8c7(0x498),_0x32fe89[a0_0x5ca8c7(0x42c)]=a0_0x5ca8c7(0x61d),_0x32fe89))(gs||{}),Ys=(_0x559721=>(_0x559721[a0_0x5ca8c7(0x48b)]=a0_0x5ca8c7(0x1f4),_0x559721[a0_0x5ca8c7(0x42c)]='\x1b[30m%s\x1b[0m',_0x559721['INFO']=a0_0x5ca8c7(0x587),_0x559721[a0_0x5ca8c7(0x352)]='\x1b[33m%s\x1b[0m',_0x559721[a0_0x5ca8c7(0x4c6)]=a0_0x5ca8c7(0x4fe),_0x559721['DEBUG']='\x1b[36m%s\x1b[0m',_0x559721[a0_0x5ca8c7(0x5cf)]=a0_0x5ca8c7(0x420),_0x559721))(Ys||{}),Xs=(_0x50397e=>(_0x50397e[a0_0x5ca8c7(0x48b)]=a0_0x5ca8c7(0x48b),_0x50397e[a0_0x5ca8c7(0x352)]=a0_0x5ca8c7(0x352),_0x50397e[a0_0x5ca8c7(0x205)]=a0_0x5ca8c7(0x205),_0x50397e[a0_0x5ca8c7(0x42c)]='DARK',_0x50397e[a0_0x5ca8c7(0x4c6)]='ERROR',_0x50397e[a0_0x5ca8c7(0x6ca)]='DEBUG',_0x50397e[a0_0x5ca8c7(0x5cf)]='VERBOSE',_0x50397e))(Xs||{}),Zs=(_0x5866eb=>(_0x5866eb['LOG']='\x1b[42m',_0x5866eb[a0_0x5ca8c7(0x205)]=a0_0x5ca8c7(0x75f),_0x5866eb[a0_0x5ca8c7(0x352)]=a0_0x5ca8c7(0x223),_0x5866eb['DARK']=a0_0x5ca8c7(0x1a8),_0x5866eb[a0_0x5ca8c7(0x4c6)]=a0_0x5ca8c7(0x3c2),_0x5866eb[a0_0x5ca8c7(0x6ca)]=a0_0x5ca8c7(0x35b),_0x5866eb['VERBOSE']=a0_0x5ca8c7(0x7d0),_0x5866eb))(Zs||{}),$=class{constructor(_0x1d88b7=a0_0x5ca8c7(0x5b1)){const _0x557d42=a0_0x5ca8c7;this['context']=_0x1d88b7,this[_0x557d42(0x588)]=S;}[a0_0x5ca8c7(0x195)](_0x50e364){const _0x566baf=a0_0x5ca8c7;this[_0x566baf(0x23b)]=_0x50e364;}['console'](_0x1cb996,_0x37d882){const _0x5a09d5=a0_0x5ca8c7;let _0x396202=[];this[_0x5a09d5(0x588)][_0x5a09d5(0x507)](_0x5a09d5(0x48b))[_0x5a09d5(0x748)]['forEach'](_0x5f1c5a=>_0x396202[_0x5a09d5(0x7cb)](Xs[_0x5f1c5a]));let _0x5cac0e=typeof _0x1cb996;_0x396202['includes'](_0x37d882)&&(S[_0x5a09d5(0x507)]('LOG')[_0x5a09d5(0x174)]?(console[_0x5a09d5(0x5df)]('\x1b[1m'+Ys[_0x37d882],_0x5a09d5(0x7e0),(0x0,hs[_0x5a09d5(0x180)])()[_0x5a09d5(0x6f6)]('DD/MM\x20HH:mm:ss'),'\x1b[0m',gs[_0x37d882]+Zs[_0x37d882]+_0x5a09d5(0x42d),_0x37d882+'\x20\x1b[0m',_0x5a09d5(0x608),this[_0x5a09d5(0x23b)]+'\x1b[0m',gs[_0x37d882],_0x5cac0e!==_0x5a09d5(0x4c4)?_0x1cb996:'',_0x5a09d5(0x1de)),_0x5cac0e===_0x5a09d5(0x4c4)&&console[_0x5a09d5(0x5df)](_0x1cb996,'\x0a')):console[_0x5a09d5(0x5df)]((0x0,hs[_0x5a09d5(0x180)])()[_0x5a09d5(0x6f6)](_0x5a09d5(0x197)),_0x37d882+'\x20',''+this['context'],_0x1cb996));}['log'](_0x5b5a61){const _0xf80f30=a0_0x5ca8c7;this['console'](_0x5b5a61,_0xf80f30(0x48b));}['info'](_0x4535a0){const _0x287741=a0_0x5ca8c7;this[_0x287741(0x5ae)](_0x4535a0,_0x287741(0x205));}[a0_0x5ca8c7(0x7f1)](_0x58342b){const _0x4fafc9=a0_0x5ca8c7;this[_0x4fafc9(0x5ae)](_0x58342b,'WARN');}['error'](_0x172953){const _0x57efda=a0_0x5ca8c7;this[_0x57efda(0x5ae)](_0x172953,'ERROR');}[a0_0x5ca8c7(0x39b)](_0x534dd6){const _0x322c75=a0_0x5ca8c7;this[_0x322c75(0x5ae)](_0x534dd6,_0x322c75(0x5cf));}[a0_0x5ca8c7(0x29d)](_0x180a9e){const _0x19f1b2=a0_0x5ca8c7;this[_0x19f1b2(0x5ae)](_0x180a9e,'DEBUG');}[a0_0x5ca8c7(0x362)](_0x475655){const _0xe30389=a0_0x5ca8c7;this[_0xe30389(0x5ae)](_0x475655,_0xe30389(0x42c));}};function ea(){const _0x36ae55=a0_0x5ca8c7;process['on'](_0x36ae55(0x203),(_0x285f6a,_0x5c89a7)=>{const _0x45058e=_0x36ae55;new $('uncaughtException')[_0x45058e(0x73d)]({'origin':_0x5c89a7,'stderr':process['stderr']['fd'],'error':_0x285f6a});}),process['on'](_0x36ae55(0x60f),(_0x57ca49,_0x37a946)=>{const _0x47830c=_0x36ae55;new $(_0x47830c(0x60f))[_0x47830c(0x73d)]({'origin':_0x37a946,'stderr':process[_0x47830c(0x819)]['fd'],'error':_0x57ca49});});}var ta=A(require(a0_0x5ca8c7(0x6ec))),ms=new ta[(a0_0x5ca8c7(0x180))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Ce=require(a0_0x5ca8c7(0x81d)),Ae=A(require(a0_0x5ca8c7(0x81d))),ze=new $(a0_0x5ca8c7(0x635)),U=S['get'](a0_0x5ca8c7(0x378)),I=U[a0_0x5ca8c7(0x4b7)]?U[a0_0x5ca8c7(0x3d4)][a0_0x5ca8c7(0x55d)]?Ae['default']['createConnection'](U['CONNECTION'][a0_0x5ca8c7(0x55d)],{'dbName':U['CONNECTION'][a0_0x5ca8c7(0x1ab)]+a0_0x5ca8c7(0x673)}):Ae[a0_0x5ca8c7(0x180)][a0_0x5ca8c7(0x70a)](a0_0x5ca8c7(0x218)+U[a0_0x5ca8c7(0x3d4)][a0_0x5ca8c7(0x7fd)]+':'+U[a0_0x5ca8c7(0x3d4)]['PORT']+a0_0x5ca8c7(0x348),{'user':U['CONNECTION']['USER'],'pass':U[a0_0x5ca8c7(0x3d4)]['PASSWORD'],'dbName':U[a0_0x5ca8c7(0x3d4)][a0_0x5ca8c7(0x1ab)]+a0_0x5ca8c7(0x673)}):null;U[a0_0x5ca8c7(0x4b7)]&&ze['info']('ON\x20-\x20dbName:\x20'+I[a0_0x5ca8c7(0x455)]);var pe=U[a0_0x5ca8c7(0x4b7)]?U[a0_0x5ca8c7(0x3d4)][a0_0x5ca8c7(0x55d)]?Ae['default']['createConnection'](U['CONNECTION']['URI'],{'dbName':'cachedData-whatsapp'}):Ae['default'][a0_0x5ca8c7(0x70a)](a0_0x5ca8c7(0x218)+U[a0_0x5ca8c7(0x3d4)]['HOST']+':'+U[a0_0x5ca8c7(0x3d4)]['PORT']+a0_0x5ca8c7(0x348),{'user':U[a0_0x5ca8c7(0x3d4)][a0_0x5ca8c7(0x799)],'pass':U[a0_0x5ca8c7(0x3d4)][a0_0x5ca8c7(0x40c)],'dbName':a0_0x5ca8c7(0x1d3)}):null;pe&&ze[a0_0x5ca8c7(0x611)]('ON\x20-\x20dbName:\x20'+pe['$dbName']),process['on'](a0_0x5ca8c7(0x24e),()=>{const _0x147753=a0_0x5ca8c7;I&&I[_0x147753(0x261)](()=>{const _0x38139d=_0x147753;ze['info'](_0x38139d(0x4ce));}),pe&&pe[_0x147753(0x261)](()=>{const _0x202732=_0x147753;ze['info'](_0x202732(0x65b));});});var to=new Ce[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),so=new Ce[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),ao=new Ce['Schema']({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),io=new Ce[(a0_0x5ca8c7(0x7c2))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[to],'default':[]}},{'_id':!0x1}),oo=new Ce[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':io,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':so},'groupdata':{'type':ao,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),sa=_0x17b45d=>{const _0x5b3293=a0_0x5ca8c7;let _0x2e8636='z_'+_0x17b45d+'_Chats';return I?.['model'](_0x5b3293(0x61b),oo,_0x2e8636);},aa=require(a0_0x5ca8c7(0x81d)),ro=new aa['Schema']({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ia=_0x7d37c2=>{const _0x1f5a4d=a0_0x5ca8c7;let _0x438842='z_'+_0x7d37c2+_0x1f5a4d(0x4ca);return I?.[_0x1f5a4d(0x416)](_0x1f5a4d(0x784),ro,_0x438842);},oa=require(a0_0x5ca8c7(0x81d)),fs=class{},no=new oa[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ra=pe?.[a0_0x5ca8c7(0x416)](fs[a0_0x5ca8c7(0x786)],no,a0_0x5ca8c7(0x281)),na=require(a0_0x5ca8c7(0x81d)),ws=class{},co=new na[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),He=pe?.['model'](ws[a0_0x5ca8c7(0x786)],co,'instances'),ca=require('mongoose'),lo=new ca[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),la=_0xa5b7cb=>{const _0x3a39e7=a0_0x5ca8c7;let _0x5eadff='z_'+_0xa5b7cb+_0x3a39e7(0x4fb);return I?.['model'](_0x3a39e7(0x644),lo,_0x5eadff);},ua=require(a0_0x5ca8c7(0x81d)),ys=class{},uo=new ua[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),da=I?.[a0_0x5ca8c7(0x416)](ys[a0_0x5ca8c7(0x786)],uo,a0_0x5ca8c7(0x594)),pa=require('mongoose'),bs=class{},ha=new pa['Schema']({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ha[a0_0x5ca8c7(0x641)](a0_0x5ca8c7(0x3c4),function(_0x5d09cc){const _0x404833=a0_0x5ca8c7;delete this[_0x404833(0x75a)],delete this[_0x404833(0x21b)],delete this[_0x404833(0x32d)],delete this['flowStopConversation'],delete this[_0x404833(0x5b7)],_0x5d09cc();});var ga=I?.[a0_0x5ca8c7(0x416)](bs[a0_0x5ca8c7(0x786)],ha,'webhook'),P=require(a0_0x5ca8c7(0x81d)),Ss=require('uuid'),Ke=class{},fa=new P[(a0_0x5ca8c7(0x7c2))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Ms=new P[(a0_0x5ca8c7(0x7c2))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),po=new P[(a0_0x5ca8c7(0x7c2))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x5ca8c7(0x1f5)},'footerText':{'type':String},'buttonText':{'type':String,'default':'Selecione'},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x5ca8c7(0x1db)},'pollErrorMessage':{'type':String,'default':a0_0x5ca8c7(0x7d2)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),wa=new P[(a0_0x5ca8c7(0x7c2))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),ho=new P[(a0_0x5ca8c7(0x7c2))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),go=new P['Schema']({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),vs=new P[(a0_0x5ca8c7(0x7c2))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),mo=new P[(a0_0x5ca8c7(0x7c2))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),ya=new P[(a0_0x5ca8c7(0x7c2))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':po},'apirequest':ho,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':mo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),ba=new P['Schema']({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Cs=class{},Sa=new P['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[vs],'blocks':[ya],'groups':[fa],'conditions':[wa],'varedits':[ba],'replyOptions':{'type':[Ms],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x5b8598=a0_0x5ca8c7;return _0x5b8598(0x414)+Math['random']()[_0x5b8598(0x30c)](0x24)[_0x5b8598(0x80c)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':'false'},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});Sa[a0_0x5ca8c7(0x641)](a0_0x5ca8c7(0xd4),function(_0x5b536e){const _0x2275c1=a0_0x5ca8c7;let _0x4247a8=this['getUpdate']();if(_0x4247a8&&typeof _0x4247a8=='object'&&_0x2275c1(0x243)in _0x4247a8){let _0x2e2a08=_0x4247a8[_0x2275c1(0x243)];if(_0x2e2a08){let _0x5361c5=new Set(),_0x30fdcc=new Set(_0x2e2a08[_0x2275c1(0x377)]?.[_0x2275c1(0x726)](_0x52062b=>_0x52062b[_0x2275c1(0x786)])),_0x1aac61=JSON[_0x2275c1(0x79e)](_0x2e2a08),_0x1c5660=/{{(?!_)([^}]*)}}/g,_0x188842;for(;(_0x188842=_0x1c5660[_0x2275c1(0x555)](_0x1aac61))!==null;)_0x30fdcc[_0x2275c1(0x183)](_0x188842[0x1])||_0x5361c5[_0x2275c1(0x6ff)](_0x188842[0x1]);_0x5361c5[_0x2275c1(0x4f5)]>0x0?(console['warn'](_0x2275c1(0x6a8),Array['from'](_0x5361c5)),_0x2e2a08['variablesNotFound']=Array[_0x2275c1(0x298)](_0x5361c5)):_0x2e2a08[_0x2275c1(0xde)]=[],this[_0x2275c1(0x2ee)]({'$set':_0x2e2a08});}}_0x5b536e();});var Ee=I?.[a0_0x5ca8c7(0x416)](Cs[a0_0x5ca8c7(0x786)],Sa,'allFlows'),fo=new P['Schema']({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[vs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[go]},{'_id':!0x1}),wo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[vs],'blocks':[ya],'groups':[fa],'conditions':[wa],'varedits':[ba],'replyOptions':{'type':[Ms],'default':[]},'chatLog':fo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':'open'},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x5ca8c7(0x1db)},'waitingMenu_replyOptions':{'type':[Ms],'default':[]}}),Ma=_0x5cbfe7=>{const _0x3ae647=a0_0x5ca8c7;let _0x3307ba='z_'+_0x5cbfe7+'_FlowHistorico';return I?.['model'](_0x3ae647(0x63d),wo,_0x3307ba);},yo=new P[(a0_0x5ca8c7(0x7c2))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ma=new P[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),bo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'messages':{'type':[ma],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':'scheduled'},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[yo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':ma,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ca=_0xdb183b=>{const _0x322c48=a0_0x5ca8c7;let _0x3a1821='z_'+_0xdb183b+_0x322c48(0x321);return I?.[_0x322c48(0x416)](_0x322c48(0x497),bo,_0x3a1821);},Es=class{},So=new P['Schema']({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),Mo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Co=new P[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Eo=new P['Schema']({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x5ca8c7(0x4e9)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),vo=new P[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),No=new P['Schema']({'_id':{'type':String,'_id':!0x0},'agents':{'type':[vo]},'customFields':{'type':[Co]},'flowConfig':{'type':Eo,'default':{}},'flows':{'type':[Mo],'default':[]},'autoCompleteMessages':{'type':[So],'default':[]}}),Te=I?.[a0_0x5ca8c7(0x416)](Es[a0_0x5ca8c7(0x786)],No,a0_0x5ca8c7(0x4b3)),Ea=require(a0_0x5ca8c7(0x81d)),$o=new Ea[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),va=_0x4d89a5=>{const _0x2405c0=a0_0x5ca8c7;let _0x16cd1e='z_'+_0x4d89a5+_0x2405c0(0x47c);return I?.[_0x2405c0(0x416)]('LabelModel',$o,_0x16cd1e);},O=class{constructor(_0x3a40dd){const _0x37a45e=a0_0x5ca8c7;this[_0x37a45e(0x3b6)]=_0x3a40dd['get'](_0x37a45e(0x378));}};function T(_0x16d1c7){const _0x14e096=a0_0x5ca8c7;let _0x24d0b8={};for(let [_0x12631c,_0x23c06f]of Object[_0x14e096(0x1ce)](_0x16d1c7))if(typeof _0x23c06f==_0x14e096(0x4c4)&&!Array[_0x14e096(0xdc)](_0x23c06f)){for(let [_0x121677,_0x35cb35]of Object[_0x14e096(0x1ce)](_0x23c06f))_0x24d0b8[_0x12631c+'.'+_0x121677]=_0x35cb35;}else _0x24d0b8[_0x12631c]=_0x23c06f;return _0x24d0b8;}var Qe=class{constructor(_0x5b7af6,_0x1ac571,_0x587ee0,_0x367015,_0x2d2d85,_0x4f8ea9,_0x1d32f8,_0x405c5c,_0x88012a,_0x3da1f6,_0x250827,_0x40c5f6,_0x22fee4){const _0x181a83=a0_0x5ca8c7;this[_0x181a83(0x319)]=_0x5b7af6,this[_0x181a83(0x5f1)]=_0x1ac571,this[_0x181a83(0x51e)]=_0x587ee0,this[_0x181a83(0x640)]=_0x367015,this['webhook']=_0x2d2d85,this[_0x181a83(0x772)]=_0x4f8ea9,this[_0x181a83(0x444)]=_0x1d32f8,this[_0x181a83(0x72d)]=_0x405c5c,this['flowConversation']=_0x88012a,this[_0x181a83(0x6a2)]=_0x3da1f6,this[_0x181a83(0x1c4)]=_0x250827,this[_0x181a83(0xec)]=_0x40c5f6,this[_0x181a83(0x12e)]=_0x22fee4;}get['dbServer'](){const _0x496d25=a0_0x5ca8c7;return this[_0x496d25(0x12e)];}},Ye=class{},Xe=class extends O{[a0_0x5ca8c7(0x36e)](_0x45d29c){return la(_0x45d29c);}async['insert'](_0x358322,_0x1bb148){const _0x32e574=a0_0x5ca8c7;if(_0x358322[_0x32e574(0x293)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x32e574(0x36e)](_0x1bb148)['insertMany']([..._0x358322]))[_0x32e574(0x293)]};}catch(_0xd65a72){return _0xd65a72;}}async['find'](_0x44cc71,_0x2a8fe3){const _0x171563=a0_0x5ca8c7;try{let _0x48cf7f=this[_0x171563(0x36e)](_0x2a8fe3),_0x2ee586=T(_0x44cc71['where']);return await _0x48cf7f[_0x171563(0x509)](_0x2ee586)[_0x171563(0x28e)]({'messageTimestamp':-0x1})[_0x171563(0x710)](_0x44cc71?.[_0x171563(0x710)]??0x0)[_0x171563(0x38d)]();}catch{return[];}}async[a0_0x5ca8c7(0x5e3)](_0x254612,_0x4e9e6c){const _0x20de3d=a0_0x5ca8c7;try{let _0x5272af=this[_0x20de3d(0x36e)](_0x4e9e6c),_0x5bbb8f=T(_0x254612['where']);await _0x5272af[_0x20de3d(0x15a)](_0x5bbb8f);}catch(_0x585101){console[_0x20de3d(0x73d)](_0x585101);}}async[a0_0x5ca8c7(0x13d)](_0xd8f0ea,_0x4b6c6c,_0x3aab89){const _0x3b0cdb=a0_0x5ca8c7;try{let _0xa697b8=this[_0x3b0cdb(0x36e)](_0x3aab89),_0x47c11d=T(_0xd8f0ea[_0x3b0cdb(0x73a)]);return await _0xa697b8[_0x3b0cdb(0xd4)](_0x47c11d,{'$set':_0x4b6c6c},{'new':!0x0});}catch(_0x2069e9){throw console[_0x3b0cdb(0x73d)](_0x2069e9),_0x2069e9;}}async[a0_0x5ca8c7(0x631)](_0x59ade9,_0x32c687){const _0x935653=a0_0x5ca8c7;if(_0x59ade9[_0x935653(0x293)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x935653(0x36e)](_0x32c687)[_0x935653(0x631)]([..._0x59ade9]))[_0x935653(0x293)]};}catch(_0x4e6b26){return console[_0x935653(0x5df)](_0x935653(0x4a6),_0x4e6b26),_0x4e6b26;}}async[a0_0x5ca8c7(0x329)](_0x20a183){const _0x1976a8=a0_0x5ca8c7;try{return await this[_0x1976a8(0x36e)](_0x20a183)['collection'][_0x1976a8(0x78f)](),{'success':!0x0};}catch(_0x3ac7b1){return console['error'](_0x3ac7b1),{'success':!0x1,'error':_0x3ac7b1};}}},Ds=A(require(a0_0x5ca8c7(0x80e))),w=A(require(a0_0x5ca8c7(0xf5))),Fe=require('fs'),j=A(require('path')),ee=A(require(a0_0x5ca8c7(0x72e))),Oi=require(a0_0x5ca8c7(0x69c)),xi=A(require(a0_0x5ca8c7(0x61e))),Di=A(require(a0_0x5ca8c7(0x5ab))),Na=['imageMessage',a0_0x5ca8c7(0x1f7),a0_0x5ca8c7(0x240),a0_0x5ca8c7(0x755),a0_0x5ca8c7(0xf7)],$a=[a0_0x5ca8c7(0x5bc),a0_0x5ca8c7(0x2ab),a0_0x5ca8c7(0x574),'viewOnceMessageV2'],Ps=require('os'),Jt=A(require(a0_0x5ca8c7(0x534))),Ue=require(a0_0x5ca8c7(0x3d3)),Pi=require(a0_0x5ca8c7(0x577)),we=A(require(a0_0x5ca8c7(0x81d))),L=require(a0_0x5ca8c7(0x133)),he=class{constructor(_0x58538e,_0x497d4b,_0x5e562b){const _0x16ca4c=a0_0x5ca8c7;this[_0x16ca4c(0x801)]=_0x58538e,this[_0x16ca4c(0x3a1)]=_0x497d4b,this['name']=_0x5e562b;}},Ze=class{},et=class{},_e=class{},tt=class{},st=class{},ve=class{},at=class{},it=class{},ot=class{},rt=class{},kt=A(require('express')),Ra=require('fs'),Ia=require(a0_0x5ca8c7(0x2d9));async function Oe(_0x487c0b){const _0x1cfa53=a0_0x5ca8c7;let _0x599986=z[_0x1cfa53(0x441)][_0x487c0b];if(U['ENABLED']){let _0x131903=I[_0x1cfa53(0x16f)]()['db'](U['CONNECTION'][_0x1cfa53(0x1ab)]+_0x1cfa53(0xcc))[_0x1cfa53(0x733)](_0x487c0b);return _0x599986||(await _0x131903['find']({})[_0x1cfa53(0x338)]())[_0x1cfa53(0x293)]>0x0;}return _0x599986||(0x0,Ra[_0x1cfa53(0x690)])((0x0,Ia[_0x1cfa53(0x363)])(Me,_0x487c0b));}async function Aa(_0x52408d,_0x59ae75,_0xea9d6d){const _0xa8b484=a0_0x5ca8c7;if(_0x52408d[_0xa8b484(0x216)][_0xa8b484(0x253)](_0xa8b484(0xf0))||_0x52408d['originalUrl'][_0xa8b484(0x253)](_0xa8b484(0x676))||_0x52408d[_0xa8b484(0x216)][_0xa8b484(0x253)](_0xa8b484(0x544))||_0x52408d['originalUrl'][_0xa8b484(0x253)](_0xa8b484(0x113))||_0x52408d[_0xa8b484(0x216)][_0xa8b484(0x253)](_0xa8b484(0x137))||_0x52408d[_0xa8b484(0x216)]['includes'](_0xa8b484(0x4ef))||_0x52408d['originalUrl'][_0xa8b484(0x253)](_0xa8b484(0x4ed)))return _0xea9d6d();let _0x397bb6=_0x52408d[_0xa8b484(0x4aa)];if(!_0x397bb6?.['instanceName'])throw new m(_0xa8b484(0x194));if(!await Oe(_0x397bb6[_0xa8b484(0x546)]))throw new G(_0xa8b484(0x75e)+_0x397bb6[_0xa8b484(0x546)]+_0xa8b484(0x457));_0xea9d6d();}async function Ta(_0x1f5ffc,_0x40eb36,_0x57b9c5){const _0x3eaa63=a0_0x5ca8c7;if(_0x1f5ffc['originalUrl'][_0x3eaa63(0x253)](_0x3eaa63(0xf0))){let _0x19338f=_0x1f5ffc['body'];if(await Oe(_0x19338f[_0x3eaa63(0x546)]))throw new se('This\x20name\x20'+_0x19338f['instanceName']+'\x20is\x20already\x20in\x20use.');z[_0x3eaa63(0x441)][_0x19338f['instanceName']]&&delete z['waInstances'][_0x19338f[_0x3eaa63(0x546)]];}_0x57b9c5();}var _a=require(a0_0x5ca8c7(0x133)),Oa=A(require('jsonwebtoken')),nt='uazapi',Io=new $(a0_0x5ca8c7(0x2c1));async function Ao(_0x3b1542,_0x2b18bb,_0x9d99ad){const _0x2f77b4=a0_0x5ca8c7;let _0x13d132=_0x3b1542['get']('apikey');if(_0x13d132&&S[_0x2f77b4(0x507)](_0x2f77b4(0x166))[_0x2f77b4(0x59a)][_0x2f77b4(0x3e4)]!==_0x13d132)throw new ce();if(S[_0x2f77b4(0x507)](_0x2f77b4(0x166))['API_KEY']['KEY']===_0x13d132)return _0x9d99ad();if((_0x3b1542['originalUrl'][_0x2f77b4(0x253)](_0x2f77b4(0xf0))||_0x3b1542[_0x2f77b4(0x216)][_0x2f77b4(0x253)]('/instance/fetchInstances'))&&!_0x13d132)throw new se(_0x2f77b4(0x357),_0x2f77b4(0x66b));let _0x55ed20=S[_0x2f77b4(0x507)]('AUTHENTICATION')['JWT'];try{let [_0x3e807e,_0x5cbef7]=_0x3b1542[_0x2f77b4(0x507)]('authorization')[_0x2f77b4(0x42a)]('\x20');if(_0x3e807e['toLowerCase']()!==_0x2f77b4(0x304))throw new ce();if(!(0x0,_a['isJWT'])(_0x5cbef7))throw new ce();let _0x58081b=_0x3b1542[_0x2f77b4(0x4aa)],_0xc11946=Oa[_0x2f77b4(0x180)][_0x2f77b4(0x650)](_0x5cbef7,_0x55ed20[_0x2f77b4(0x55f)],{'ignoreExpiration':_0x55ed20[_0x2f77b4(0x3ca)]===0x0});if(_0x58081b[_0x2f77b4(0x546)]!==_0xc11946[_0x2f77b4(0x546)]||nt!==_0xc11946[_0x2f77b4(0x613)])throw new ce();return _0x9d99ad();}catch(_0x4750ee){throw Io[_0x2f77b4(0x73d)](_0x4750ee),new ce();}}async function To(_0x3bf7fc,_0x421d2c,_0x37d086){const _0x564016=a0_0x5ca8c7;let _0x187654=S[_0x564016(0x507)](_0x564016(0x166))[_0x564016(0x59a)],_0x18c536=_0x3bf7fc[_0x564016(0x507)](_0x564016(0x790));if(_0x187654[_0x564016(0x3e4)]===_0x18c536)return _0x37d086();if(_0x3bf7fc[_0x564016(0x216)]['includes'](_0x564016(0xf0))){let _0x561b7e=Da,_0x2b1124=_0x3bf7fc[_0x564016(0x3ec)][_0x564016(0x546)];if(_0x561b7e&&_0x2b1124['toLowerCase']()[_0x564016(0x43f)](_0x561b7e['toLowerCase']()))return _0x37d086();if(!_0x18c536)throw new se(_0x564016(0x357),'The\x20global\x20api\x20key\x20must\x20be\x20set');}if(_0x3bf7fc[_0x564016(0x216)][_0x564016(0x253)](_0x564016(0x676))&&!_0x18c536)throw new se('Missing\x20global\x20api\x20key',_0x564016(0x66b));if(_0x3bf7fc[_0x564016(0x216)][_0x564016(0x253)]('/exit')&&!_0x18c536)throw new se(_0x564016(0x357),_0x564016(0x66b));if(_0x3bf7fc[_0x564016(0x216)]['includes'](_0x564016(0x113))&&!_0x18c536)throw new se(_0x564016(0x357),'The\x20global\x20api\x20key\x20must\x20be\x20set');try{let _0x1387f4=_0x3bf7fc[_0x564016(0x4aa)],_0x25a7f3=await ye[_0x564016(0x772)][_0x564016(0x509)](_0x1387f4[_0x564016(0x546)]);if(_0x25a7f3&&_0x25a7f3['apikey']===_0x18c536)return _0x37d086();}catch{}throw new ce();}var xa={'jwt':Ao,'apikey':To},gi=require('express'),v=require('uuid'),E=(..._0x256d74)=>{const _0x48743a=a0_0x5ca8c7;let _0x3ca0ba={};return _0x256d74[_0x48743a(0x57a)](_0x29fb28=>_0x3ca0ba[_0x29fb28]={'minLength':0x1,'description':_0x48743a(0x5a3)+_0x29fb28+_0x48743a(0x417)}),{'if':{'propertyNames':{'enum':[..._0x256d74]}},'then':{'properties':_0x3ca0ba}};},N={'$id':(0x0,v['v4'])(),'type':'object','properties':{'instanceName':{'type':'string'}},...E(a0_0x5ca8c7(0x546))},fc={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'oldToken':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x4a7)],...E(a0_0x5ca8c7(0x4a7))},wc={'properties':{'key':{'type':'object','properties':{'id':{'type':a0_0x5ca8c7(0x7b7)},'remoteJid':{'type':a0_0x5ca8c7(0x7b7)},'fromMe':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]}},'required':['id',a0_0x5ca8c7(0x461),a0_0x5ca8c7(0x79a)],...E('id','remoteJid')},'message':{'type':'object'}}},ae={'properties':{'delay':{'type':a0_0x5ca8c7(0x23d),'description':a0_0x5ca8c7(0x1a1)},'presence':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0x6d4),'available',a0_0x5ca8c7(0x2dd),a0_0x5ca8c7(0x50c),a0_0x5ca8c7(0x552)]}}},X={'type':'string','description':'Invalid\x20format'},Pa={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'options':{...ae},'textMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'text':{'type':'string'}},'required':[a0_0x5ca8c7(0x67e)],...E(a0_0x5ca8c7(0x67e))}},'required':[a0_0x5ca8c7(0x7ad),'number']},ka={'type':a0_0x5ca8c7(0x7b7),'pattern':a0_0x5ca8c7(0x28d),'description':a0_0x5ca8c7(0x742)},yc={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...ka},'options':{...ae},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x67e)],...E('text')}},'required':[a0_0x5ca8c7(0x7ad),a0_0x5ca8c7(0x209)]},bc={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...ka},'options':{...ae},'mediaMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'mediatype':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0xef),a0_0x5ca8c7(0x5e2),a0_0x5ca8c7(0x2b1),a0_0x5ca8c7(0x6cc)]},'media':{'type':'string'},'fileName':{'type':a0_0x5ca8c7(0x7b7)},'caption':{'type':'string'}},'required':['mediatype',a0_0x5ca8c7(0x2fe)],...E(a0_0x5ca8c7(0x208),a0_0x5ca8c7(0x204),'media')}},'required':[a0_0x5ca8c7(0x19a),'number']},La={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'options':{...ae},'stickerMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'image':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0xef)],...E(a0_0x5ca8c7(0xef))}},'required':[a0_0x5ca8c7(0xf7),'number']},Fa={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'statusMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'type':{'type':'string','enum':[a0_0x5ca8c7(0x67e),'image',a0_0x5ca8c7(0x6cc),a0_0x5ca8c7(0x2b1)]},'content':{'type':a0_0x5ca8c7(0x7b7)},'caption':{'type':a0_0x5ca8c7(0x7b7)},'backgroundColor':{'type':a0_0x5ca8c7(0x7b7)},'font':{'type':a0_0x5ca8c7(0x23d),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x5ca8c7(0x3d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca8c7(0x7b7),'pattern':'^\x5cd+','description':a0_0x5ca8c7(0x1da)}},'allContacts':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]}},'required':[a0_0x5ca8c7(0x573),a0_0x5ca8c7(0x12d)],...E(a0_0x5ca8c7(0x573),a0_0x5ca8c7(0x12d))}},'required':['statusMessage']},Ua={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'options':{...ae},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0xef),'document',a0_0x5ca8c7(0x2b1),'audio']},'media':{'type':a0_0x5ca8c7(0x7b7)},'fileName':{'type':a0_0x5ca8c7(0x7b7)},'caption':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x430),'media'],...E(a0_0x5ca8c7(0x208),'caption',a0_0x5ca8c7(0x2fe))}},'required':[a0_0x5ca8c7(0x19a),a0_0x5ca8c7(0x209)]},ja={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'options':{...ae},'audioMessage':{'type':'object','properties':{'audio':{'type':'string'}},'required':[a0_0x5ca8c7(0x6cc)],...E(a0_0x5ca8c7(0x6cc))}},'required':[a0_0x5ca8c7(0x240),a0_0x5ca8c7(0x209)]},Ja={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...X},'pollMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'name':{'type':a0_0x5ca8c7(0x7b7)},'selectableCount':{'type':'number'},'values':{'type':a0_0x5ca8c7(0x3d6),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x5ca8c7(0x786),a0_0x5ca8c7(0x291),a0_0x5ca8c7(0x7f7)],...E(a0_0x5ca8c7(0x786),a0_0x5ca8c7(0x291),a0_0x5ca8c7(0x7f7))}},'required':[a0_0x5ca8c7(0x209),a0_0x5ca8c7(0x33a)]},qa={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'menuMessage':{'type':'object','properties':{'text':{'type':a0_0x5ca8c7(0x7b7)},'choices':{'type':a0_0x5ca8c7(0x3d6),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x5ca8c7(0x67e),a0_0x5ca8c7(0x3fe)],...E(a0_0x5ca8c7(0x67e),a0_0x5ca8c7(0x3fe))}},'required':['number',a0_0x5ca8c7(0x3f1)]},Va={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'options':{...ae},'buttonMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'title':{'type':a0_0x5ca8c7(0x7b7)},'description':{'type':a0_0x5ca8c7(0x7b7)},'footerText':{'type':a0_0x5ca8c7(0x7b7)},'buttons':{'type':a0_0x5ca8c7(0x3d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca8c7(0x4c4),'properties':{'buttonText':{'type':'string'},'buttonId':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x7ac),a0_0x5ca8c7(0x781)],...E(a0_0x5ca8c7(0x7ac),a0_0x5ca8c7(0x781))}},'mediaMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'media':{'type':a0_0x5ca8c7(0x7b7)},'fileName':{'type':a0_0x5ca8c7(0x7b7)},'mediatype':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0xef),a0_0x5ca8c7(0x5e2),a0_0x5ca8c7(0x2b1)]}},'required':[a0_0x5ca8c7(0x2fe),'mediatype'],...E('media',a0_0x5ca8c7(0x208))}},'required':[a0_0x5ca8c7(0x401),'buttons'],...E(a0_0x5ca8c7(0x401),a0_0x5ca8c7(0x134))}},'required':[a0_0x5ca8c7(0x209),a0_0x5ca8c7(0x64e)]},Ga={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'options':{...ae},'locationMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'latitude':{'type':a0_0x5ca8c7(0x209)},'longitude':{'type':a0_0x5ca8c7(0x209)},'name':{'type':a0_0x5ca8c7(0x7b7)},'address':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x803),'longitude'],...E(a0_0x5ca8c7(0x786),a0_0x5ca8c7(0x38b))}},'required':[a0_0x5ca8c7(0x209),a0_0x5ca8c7(0x78b)]},Ba={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'options':{...ae},'listMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'title':{'type':'string'},'description':{'type':'string'},'footerText':{'type':a0_0x5ca8c7(0x7b7)},'buttonText':{'type':a0_0x5ca8c7(0x7b7)},'sections':{'type':a0_0x5ca8c7(0x3d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca8c7(0x4c4),'properties':{'title':{'type':a0_0x5ca8c7(0x7b7)},'rows':{'type':a0_0x5ca8c7(0x3d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':a0_0x5ca8c7(0x7b7)},'description':{'type':a0_0x5ca8c7(0x7b7)},'rowId':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x401),a0_0x5ca8c7(0x2f3)],...E('title',a0_0x5ca8c7(0x2f3))}}},'required':['title','rows'],...E('title')}}},'required':[a0_0x5ca8c7(0x401),'description','buttonText',a0_0x5ca8c7(0x188)],...E('title',a0_0x5ca8c7(0x134),'buttonText',a0_0x5ca8c7(0x55a))}},'required':[a0_0x5ca8c7(0x209),a0_0x5ca8c7(0x5e6)]},Wa={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'options':{...ae},'contactMessage':{'type':a0_0x5ca8c7(0x3d6),'items':{'type':'object','properties':{'fullName':{'type':a0_0x5ca8c7(0x7b7)},'phoneNumber':{'type':a0_0x5ca8c7(0x7b7),'minLength':0xa}},'required':['fullName',a0_0x5ca8c7(0x1ae)],...E(a0_0x5ca8c7(0x7a3))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x5ca8c7(0x209),a0_0x5ca8c7(0x138)]},za={'$id':(0x0,v['v4'])(),'type':'object','properties':{'reactionMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'key':{'type':'object','properties':{'id':{'type':a0_0x5ca8c7(0x7b7)},'remoteJid':{'type':a0_0x5ca8c7(0x7b7)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id',a0_0x5ca8c7(0x461),a0_0x5ca8c7(0x79a)],...E('id',a0_0x5ca8c7(0x461))},'reaction':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x3c3),a0_0x5ca8c7(0x493)],...E('reaction')}},'required':[a0_0x5ca8c7(0x231)]},Ha={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'numbers':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca8c7(0x7b7),'pattern':a0_0x5ca8c7(0x1a5),'description':a0_0x5ca8c7(0x797)}}}},Ka={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'readMessages':{'type':a0_0x5ca8c7(0x3d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':'string'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'remoteJid':{'type':'string'}},'required':['id',a0_0x5ca8c7(0x79a),a0_0x5ca8c7(0x461)],...E('id',a0_0x5ca8c7(0x461))}}},'required':[a0_0x5ca8c7(0x41b)]},Qa={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'privacySettings':{'type':'object','properties':{'readreceipts':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0x793),'none']},'profile':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0x793),'contacts',a0_0x5ca8c7(0x135),'none']},'status':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0x793),a0_0x5ca8c7(0x7ef),a0_0x5ca8c7(0x135),a0_0x5ca8c7(0x472)]},'online':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0x793),a0_0x5ca8c7(0x59b)]},'last':{'type':'string','enum':[a0_0x5ca8c7(0x793),a0_0x5ca8c7(0x7ef),'contact_blacklist',a0_0x5ca8c7(0x472)]},'groupadd':{'type':a0_0x5ca8c7(0x7b7),'enum':['all',a0_0x5ca8c7(0x7ef),a0_0x5ca8c7(0x135),a0_0x5ca8c7(0x472)]}},'required':['readreceipts',a0_0x5ca8c7(0x5b5),a0_0x5ca8c7(0x3e2),a0_0x5ca8c7(0x14b),a0_0x5ca8c7(0x3db),a0_0x5ca8c7(0x619)],...E(a0_0x5ca8c7(0x6cb),a0_0x5ca8c7(0x5b5),a0_0x5ca8c7(0x3e2),a0_0x5ca8c7(0x14b),a0_0x5ca8c7(0x3db),a0_0x5ca8c7(0x619))}},'required':['privacySettings']},Ya={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'lastMessage':{'type':a0_0x5ca8c7(0x4c4),'properties':{'key':{'type':a0_0x5ca8c7(0x4c4),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x5ca8c7(0x7b7)},'fromMe':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]}},'required':['id','fromMe',a0_0x5ca8c7(0x461)],...E('id',a0_0x5ca8c7(0x461))},'messageTimestamp':{'type':a0_0x5ca8c7(0x23d),'minLength':0x1}},'required':['key'],...E(a0_0x5ca8c7(0x4e1))},'archive':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x5ca8c7(0x356),a0_0x5ca8c7(0x109)]},Xa={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'id':{'type':'string'},'fromMe':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x5ca8c7(0x7b7)},'participant':{'type':a0_0x5ca8c7(0x7b7)}},'required':['id','fromMe','remoteJid'],...E('id','remoteJid',a0_0x5ca8c7(0x4bc))},Za={'$id':(0x0,v['v4'])(),'type':'object','properties':{'where':{'type':a0_0x5ca8c7(0x4c4),'properties':{'_id':{'type':a0_0x5ca8c7(0x7b7),'minLength':0x1},'pushName':{'type':a0_0x5ca8c7(0x7b7),'minLength':0x1},'id':{'type':a0_0x5ca8c7(0x7b7),'minLength':0x1}},...E(a0_0x5ca8c7(0x6ae),'id',a0_0x5ca8c7(0x659))}}},ei={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'name':{'type':a0_0x5ca8c7(0x7b7)}},...E(a0_0x5ca8c7(0x786))},ti={'$id':(0x0,v['v4'])(),'type':'object','properties':{'status':{'type':'string'}},...E('status')},xe={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{'type':a0_0x5ca8c7(0x7b7)},'picture':{'type':a0_0x5ca8c7(0x7b7)}}},si={'type':a0_0x5ca8c7(0x4c4),'properties':{'wuid':{'type':a0_0x5ca8c7(0x7b7)},'name':{'type':'string'},'picture':{'type':a0_0x5ca8c7(0x7b7)},'status':{'type':a0_0x5ca8c7(0x7b7)},'isBusiness':{'type':a0_0x5ca8c7(0x69f)}}},ai={'$id':(0x0,v['v4'])(),'type':'object','properties':{'where':{'type':a0_0x5ca8c7(0x4c4),'properties':{'_id':{'type':a0_0x5ca8c7(0x7b7),'minLength':0x1},'key':{'type':'object','if':{'propertyNames':{'enum':[a0_0x5ca8c7(0x79a),a0_0x5ca8c7(0x461),'id']}},'then':{'properties':{'remoteJid':{'type':'string','minLength':0x1,'description':a0_0x5ca8c7(0x334)},'id':{'type':a0_0x5ca8c7(0x7b7),'minLength':0x1,'description':a0_0x5ca8c7(0x334)},'fromMe':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x5ca8c7(0x4c4)}},...E(a0_0x5ca8c7(0x6ae))},'limit':{'type':'integer'}}},Sc={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'where':{'type':a0_0x5ca8c7(0x4c4),'properties':{'_id':{'type':'string'},'remoteJid':{'type':a0_0x5ca8c7(0x7b7)},'id':{'type':a0_0x5ca8c7(0x7b7)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'participant':{'type':a0_0x5ca8c7(0x7b7)},'status':{'type':'string','enum':[a0_0x5ca8c7(0x4c6),'PENDING',a0_0x5ca8c7(0x4cd),'DELIVERY_ACK',a0_0x5ca8c7(0x115),'PLAYED']}},...E(a0_0x5ca8c7(0x6ae),a0_0x5ca8c7(0x461),'id',a0_0x5ca8c7(0x3e2))},'limit':{'type':a0_0x5ca8c7(0x23d)}}},ii={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'number':{...X},'presence':{'type':a0_0x5ca8c7(0x7b7),'enum':['unavailable',a0_0x5ca8c7(0x770),a0_0x5ca8c7(0x2dd),'recording',a0_0x5ca8c7(0x552)]}},'required':[a0_0x5ca8c7(0x4ea),a0_0x5ca8c7(0x209)]},oi={'$id':(0x0,v['v4'])(),'type':'object','properties':{'subject':{'type':a0_0x5ca8c7(0x7b7)},'description':{'type':a0_0x5ca8c7(0x7b7)},'profilePicture':{'type':a0_0x5ca8c7(0x7b7)},'participants':{'type':a0_0x5ca8c7(0x3d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca8c7(0x7b7),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x5ca8c7(0x5d1)}}},'required':[a0_0x5ca8c7(0x20c),a0_0x5ca8c7(0x376)],...E(a0_0x5ca8c7(0x20c),a0_0x5ca8c7(0x134),a0_0x5ca8c7(0x763))},De={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'groupJid':{'type':a0_0x5ca8c7(0x7b7),'pattern':a0_0x5ca8c7(0x325)}},'required':[a0_0x5ca8c7(0x6ee)],...E(a0_0x5ca8c7(0x6ee))},ri={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x5ca8c7(0x7b7)},'action':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0x6ff),a0_0x5ca8c7(0x686),a0_0x5ca8c7(0x785),a0_0x5ca8c7(0x61a),a0_0x5ca8c7(0x23e),a0_0x5ca8c7(0x79b)]},'participants':{'type':a0_0x5ca8c7(0x3d6),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca8c7(0x7b7),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x5ca8c7(0x5d1)}}},'required':[a0_0x5ca8c7(0x6ee),a0_0x5ca8c7(0x2f0),a0_0x5ca8c7(0x376)],...E(a0_0x5ca8c7(0x6ee),a0_0x5ca8c7(0x2f0))},ni={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x5ca8c7(0x7b7)},'expiration':{'type':a0_0x5ca8c7(0x209),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x5ca8c7(0x6ee),'expiration'],...E(a0_0x5ca8c7(0x6ee),'expiration')},ci={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'image':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x6ee),'image'],...E(a0_0x5ca8c7(0x6ee),a0_0x5ca8c7(0xef))},li={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x5ca8c7(0x7b7)},'description':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x6ee),'description'],...E(a0_0x5ca8c7(0x6ee),a0_0x5ca8c7(0x134))},ui={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'groupJid':{'type':a0_0x5ca8c7(0x7b7)},'name':{'type':a0_0x5ca8c7(0x7b7)}},'required':[a0_0x5ca8c7(0x6ee),a0_0x5ca8c7(0x786)],...E('groupJid',a0_0x5ca8c7(0x786))},di={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'groupJid':{'type':a0_0x5ca8c7(0x7b7)},'setting':{'type':a0_0x5ca8c7(0x7b7),'enum':[a0_0x5ca8c7(0x3a2),a0_0x5ca8c7(0x66f),a0_0x5ca8c7(0x64b),a0_0x5ca8c7(0x6ce)]}},'required':[a0_0x5ca8c7(0x6ee),a0_0x5ca8c7(0x1b0)],...E(a0_0x5ca8c7(0x6ee),a0_0x5ca8c7(0x1b0))},pi={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'groupJid':{'type':a0_0x5ca8c7(0x7b7)},'restrict':{'type':a0_0x5ca8c7(0x69f)},'announce':{'type':'boolean'},'memberAddMode':{'type':a0_0x5ca8c7(0x69f)},'joinApprovalMode':{'type':'boolean'},'expiration':{'type':a0_0x5ca8c7(0x23d),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':'string'},'description':{'type':a0_0x5ca8c7(0x7b7)},'image':{'type':a0_0x5ca8c7(0x7b7)}}},Ns={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'inviteCode':{'type':'string'}},'required':[a0_0x5ca8c7(0x5d6)],...E('inviteCode')},hi={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'url':{'type':'string'},'enabled':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]}},'required':[a0_0x5ca8c7(0x123),a0_0x5ca8c7(0x3b1)]},Mc={'$id':(0x0,v['v4'])(),'type':a0_0x5ca8c7(0x4c4),'properties':{'local_map':{'type':'boolean','enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x5ca8c7(0x69f),'enum':[!0x0,!0x1]}},'required':[a0_0x5ca8c7(0x37d),a0_0x5ca8c7(0x7d7),'QRCODE_UPDATED',a0_0x5ca8c7(0x4fa),a0_0x5ca8c7(0x496),a0_0x5ca8c7(0x40e),a0_0x5ca8c7(0x22c),'CONTACTS_SET',a0_0x5ca8c7(0x4e5),a0_0x5ca8c7(0x597),'PRESENCE_UPDATE',a0_0x5ca8c7(0x2f4),'CHATS_UPSERT','CHATS_UPDATE',a0_0x5ca8c7(0x119),a0_0x5ca8c7(0x2d0),a0_0x5ca8c7(0x5d3),a0_0x5ca8c7(0x1ff),a0_0x5ca8c7(0x49e)],...E('local_map',a0_0x5ca8c7(0x7d7),a0_0x5ca8c7(0x2d2),'MESSAGES_SET',a0_0x5ca8c7(0x496),a0_0x5ca8c7(0x40e),a0_0x5ca8c7(0x22c),a0_0x5ca8c7(0x20f),a0_0x5ca8c7(0x4e5),a0_0x5ca8c7(0x597),a0_0x5ca8c7(0x3f4),'CHATS_SET',a0_0x5ca8c7(0x191),a0_0x5ca8c7(0x3d7),a0_0x5ca8c7(0x119),a0_0x5ca8c7(0x2d0),'GROUPS_UPSERT','GROUPS_UPDATE','GROUP_PARTICIPANTS_UPDATE')},ct=class{},lt=class extends O{['getContactModelForOwner'](_0x946950){return ia(_0x946950);}async[a0_0x5ca8c7(0x29c)](_0x34675a){const _0xdb8aa=a0_0x5ca8c7;if(_0x34675a['length']!==0x0)try{return{'insertCount':(await this[_0xdb8aa(0x6c9)](_0x34675a[0x0][_0xdb8aa(0x756)])[_0xdb8aa(0x631)]([..._0x34675a]))[_0xdb8aa(0x293)]};}catch(_0x33e353){return _0x33e353;}}async[a0_0x5ca8c7(0x5e3)](_0x26d2e0,_0x1eefa7){const _0x980da5=a0_0x5ca8c7;try{return{'deletedCount':(await this['getContactModelForOwner'](_0x1eefa7)[_0x980da5(0x15a)]({..._0x26d2e0[_0x980da5(0x73a)]}))[_0x980da5(0x51b)]};}catch(_0x32950f){return{'error':_0x32950f?.[_0x980da5(0x30c)]()};}}async[a0_0x5ca8c7(0x13d)](_0x299824,_0x48734b){const _0x3c5f18=a0_0x5ca8c7;try{if(_0x299824[_0x3c5f18(0x293)]===0x0)return;let _0x56fb9a=this[_0x3c5f18(0x6c9)](_0x48734b),_0x222336=_0x299824[_0x3c5f18(0x726)](_0x71c9c3=>({'updateOne':{'filter':{'_id':_0x71c9c3[_0x3c5f18(0x6ae)],'owner':_0x48734b},'update':{..._0x71c9c3}}})),{modifiedCount:_0x1b6c11}=await _0x56fb9a[_0x3c5f18(0x48e)](_0x222336);return{'insertCount':_0x1b6c11};}catch{return;}}async[a0_0x5ca8c7(0x509)](_0xa00a5d,_0x391c8f){const _0x4dd95c=a0_0x5ca8c7;try{let _0x406feb=this[_0x4dd95c(0x6c9)](_0x391c8f),_0x4084ca=T(_0xa00a5d[_0x4dd95c(0x73a)]);return await _0x406feb[_0x4dd95c(0x509)](_0x4084ca)[_0x4dd95c(0x710)](_0xa00a5d?.[_0x4dd95c(0x710)]??0x0)['lean']();}catch{return[];}}async[a0_0x5ca8c7(0x51f)](_0x57c46d,_0x2081a8){const _0x5082e2=a0_0x5ca8c7;try{let _0x465136=this[_0x5082e2(0x6c9)](_0x2081a8),_0x279e56=T(_0x57c46d[_0x5082e2(0x73a)]);return await _0x465136[_0x5082e2(0x51f)](_0x279e56)[_0x5082e2(0x38d)]();}catch{return null;}}async[a0_0x5ca8c7(0x329)](_0xb27f42){const _0x404978=a0_0x5ca8c7;try{return await this[_0x404978(0x6c9)](_0xb27f42)[_0x404978(0x733)][_0x404978(0x78f)](),{'success':!0x0};}catch(_0x1a1281){return console[_0x404978(0x73d)](_0x1a1281),{'success':!0x1,'error':_0x1a1281};}}},ut=require(a0_0x5ca8c7(0x51d)),Tc=require('express-async-errors'),$s=new $(a0_0x5ca8c7(0x5b2)),W=class{[a0_0x5ca8c7(0x715)](_0xd8c17e,_0x4f7181=!0x0){const _0x1107ed=a0_0x5ca8c7;let _0x489ce6='/'+_0xd8c17e;return _0x4f7181&&(_0x489ce6+=_0x1107ed(0x450)),_0x489ce6;}async[a0_0x5ca8c7(0x25a)](_0x2da17c){const _0x28b988=a0_0x5ca8c7;let {request:_0x58503b,schema:_0x43787f,ClassRef:_0xfce58f,execute:_0x45de11}=_0x2da17c,_0x23f301=new _0xfce58f(),_0x4521e4=_0x58503b[_0x28b988(0x3ec)],_0x466abe=_0x58503b[_0x28b988(0x4aa)];_0x58503b?.['query']&&Object[_0x28b988(0x818)](_0x58503b['query'])[_0x28b988(0x293)]>0x0&&Object[_0x28b988(0x14c)](_0x466abe,_0x58503b[_0x28b988(0x551)]),_0x58503b[_0x28b988(0x216)][_0x28b988(0x253)]('/instance/create')&&Object[_0x28b988(0x14c)](_0x466abe,_0x4521e4),Object['assign'](_0x23f301,_0x4521e4);let _0x23a423=_0x43787f?(0x0,ut[_0x28b988(0x4dc)])(_0x23f301,_0x43787f):{'valid':!0x0,'errors':[]};if(!_0x23a423[_0x28b988(0x813)]){let _0x493355=_0x23a423[_0x28b988(0x6a5)][_0x28b988(0x726)](({property:_0x5c330c,stack:_0x58b12a,schema:_0x206528})=>{const _0x5e5b06=_0x28b988;let _0x4d7a83;return _0x206528[_0x5e5b06(0x134)]?_0x4d7a83=_0x206528[_0x5e5b06(0x134)]:_0x4d7a83=_0x58b12a[_0x5e5b06(0x2cf)]('instance.',''),{'property':_0x5c330c['replace']('instance.',''),'message':_0x4d7a83};});throw $s[_0x28b988(0x73d)]([..._0x493355]),new m(..._0x493355);}return await _0x45de11(_0x466abe,_0x23f301);}async[a0_0x5ca8c7(0x330)](_0xe1e01b){const _0x3c655e=a0_0x5ca8c7;let {request:_0x424fb9,ClassRef:_0xd1ccf3,schema:_0x4816e5,execute:_0x51c604}=_0xe1e01b,_0x3be6b5=_0x424fb9[_0x3c655e(0x551)];if(!_0x3be6b5?.[_0x3c655e(0x6ee)])throw new m(_0x3c655e(0x24d),_0x3c655e(0x674));let _0x38d240=_0x424fb9[_0x3c655e(0x4aa)],_0x4d2694=_0x424fb9[_0x3c655e(0x3ec)],_0xfe8f9c=new _0xd1ccf3();Object['assign'](_0x4d2694,_0x3be6b5),Object['assign'](_0xfe8f9c,_0x4d2694);let _0x134954=(0x0,ut[_0x3c655e(0x4dc)])(_0xfe8f9c,_0x4816e5);if(!_0x134954[_0x3c655e(0x813)]){let _0x34f796=_0x134954[_0x3c655e(0x6a5)][_0x3c655e(0x726)](({property:_0x3ed252,stack:_0x4af0da,schema:_0x540e8f})=>{const _0xdae4fe=_0x3c655e;let _0x3844b4;return _0x540e8f['description']?_0x3844b4=_0x540e8f['description']:_0x3844b4=_0x4af0da[_0xdae4fe(0x2cf)](_0xdae4fe(0x35c),''),{'property':_0x3ed252['replace'](_0xdae4fe(0x35c),''),'message':_0x3844b4};});throw $s[_0x3c655e(0x73d)]([..._0x34f796]),new m(..._0x34f796);}return await _0x51c604(_0x38d240,_0xfe8f9c);}async['joinGroupValidate'](_0x17b83b){const _0x15dc55=a0_0x5ca8c7;let {request:_0x2c5f22,ClassRef:_0x1b0127,schema:_0x1bb0d9,execute:_0x130153}=_0x17b83b,_0x444178=_0x2c5f22[_0x15dc55(0x3ec)];if(!_0x444178?.[_0x15dc55(0x5d6)])throw new m(_0x15dc55(0x72c),_0x15dc55(0x4ab));let _0x5632f8=_0x2c5f22[_0x15dc55(0x4aa)],_0x573ebb=_0x2c5f22[_0x15dc55(0x3ec)],_0x380120=new _0x1b0127();Object[_0x15dc55(0x14c)](_0x573ebb,_0x444178),Object['assign'](_0x380120,_0x573ebb);let _0x587836=(0x0,ut[_0x15dc55(0x4dc)])(_0x380120,_0x1bb0d9);if(!_0x587836[_0x15dc55(0x813)]){let _0x40e3c1=_0x587836['errors'][_0x15dc55(0x726)](({property:_0x26a491,stack:_0x2043b7,schema:_0x38a349})=>{const _0x35f17a=_0x15dc55;let _0x493fb5;return _0x38a349[_0x35f17a(0x134)]?_0x493fb5=_0x38a349['description']:_0x493fb5=_0x2043b7[_0x35f17a(0x2cf)](_0x35f17a(0x35c),''),{'property':_0x26a491[_0x35f17a(0x2cf)]('instance.',''),'message':_0x493fb5};});throw $s[_0x15dc55(0x73d)]([..._0x40e3c1]),new m(..._0x40e3c1);}return await _0x130153(_0x5632f8,_0x380120);}},M=class{},Bc=new $(a0_0x5ca8c7(0x3bb)),dt=class extends W{constructor(..._0x334047){const _0x1ccaa9=a0_0x5ca8c7;super(),this[_0x1ccaa9(0x707)]=(0x0,gi[_0x1ccaa9(0x2f1)])(),this[_0x1ccaa9(0x707)][_0x1ccaa9(0x25c)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x147)),..._0x334047,async(_0x2bb9fa,_0x4e73b5)=>{const _0x5a32cb=_0x1ccaa9;let _0x64fa44=await this[_0x5a32cb(0x25a)]({'request':_0x2bb9fa,'schema':ii,'ClassRef':Ze,'execute':(_0x2938f4,_0x297265)=>k[_0x5a32cb(0x147)](_0x2938f4,_0x297265)});return _0x4e73b5['status'](0xc9)[_0x5a32cb(0x805)](_0x64fa44);})[_0x1ccaa9(0x25c)](this['routerPath']('whatsappNumbers'),..._0x334047,async(_0x24f564,_0x47b2f5)=>{const _0x2a34c3=_0x1ccaa9;let _0x102153=await this[_0x2a34c3(0x25a)]({'request':_0x24f564,'schema':Ha,'ClassRef':et,'execute':(_0x56b8c8,_0x4d62aa)=>k[_0x2a34c3(0x322)](_0x56b8c8,_0x4d62aa)});return _0x47b2f5['status'](0xc9)[_0x2a34c3(0x805)](_0x102153);})['post'](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x2ec)),..._0x334047,async(_0x4270c7,_0x5227d6)=>{const _0x344c58=_0x1ccaa9;let _0x2cdc02=await this[_0x344c58(0x25a)]({'request':_0x4270c7,'schema':N,'ClassRef':M,'execute':(_0xf60cae,_0x508126)=>k[_0x344c58(0x2ec)](_0xf60cae,_0x508126)});return _0x5227d6[_0x344c58(0x3e2)](0xc9)[_0x344c58(0x805)](_0x2cdc02);})[_0x1ccaa9(0x65e)](this['routerPath'](_0x1ccaa9(0x337)),..._0x334047,async(_0x2963d2,_0x46265e)=>{const _0x50be83=_0x1ccaa9;let _0x1ddf2a=await this['dataValidate']({'request':_0x2963d2,'schema':Ka,'ClassRef':at,'execute':(_0x17566b,_0x22ec36)=>k[_0x50be83(0x26b)](_0x17566b,_0x22ec36)});return _0x46265e[_0x50be83(0x3e2)](0xc9)['json'](_0x1ddf2a);})[_0x1ccaa9(0x65e)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x743)),..._0x334047,async(_0x5282ed,_0x16fb8e)=>{const _0x42791a=_0x1ccaa9;let _0x12ac07=await this[_0x42791a(0x25a)]({'request':_0x5282ed,'schema':Ya,'ClassRef':it,'execute':(_0x25f182,_0x582278)=>k[_0x42791a(0x743)](_0x25f182,_0x582278)});return _0x16fb8e[_0x42791a(0x3e2)](0xc9)[_0x42791a(0x805)](_0x12ac07);})['delete'](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x5aa)),..._0x334047,async(_0x201f73,_0x535e05)=>{const _0x264b69=_0x1ccaa9;let _0x4869f6=await this[_0x264b69(0x25a)]({'request':_0x201f73,'schema':Xa,'ClassRef':rt,'execute':(_0x1c93b6,_0x5135b5)=>k['deleteMessage'](_0x1c93b6,_0x5135b5)});return _0x535e05[_0x264b69(0x3e2)](0xc9)['json'](_0x4869f6);})[_0x1ccaa9(0x25c)](this[_0x1ccaa9(0x715)]('fetchProfilePictureUrl'),..._0x334047,async(_0x274e1c,_0x4e6bb6)=>{const _0xcdc0d=_0x1ccaa9;let _0x31f389=await this[_0xcdc0d(0x25a)]({'request':_0x274e1c,'schema':xe,'ClassRef':_e,'execute':(_0x44ed91,_0xd2cecd)=>k[_0xcdc0d(0x77b)](_0x44ed91,_0xd2cecd)});return _0x4e6bb6[_0xcdc0d(0x3e2)](0xc8)[_0xcdc0d(0x805)](_0x31f389);})[_0x1ccaa9(0x25c)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x434)),..._0x334047,async(_0x482ec2,_0x415924)=>{const _0x156b1e=_0x1ccaa9;let _0x16e90d=await this[_0x156b1e(0x25a)]({'request':_0x482ec2,'schema':si,'ClassRef':_e,'execute':(_0x2ff8bb,_0xc4694e)=>k[_0x156b1e(0x434)](_0x2ff8bb,_0xc4694e)});return _0x415924[_0x156b1e(0x3e2)](0xc8)['json'](_0x16e90d);})[_0x1ccaa9(0x25c)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x154)),..._0x334047,async(_0x77938,_0xf2c7ee)=>{const _0x44997a=_0x1ccaa9;let _0x2584f3=await this[_0x44997a(0x25a)]({'request':_0x77938,'schema':Za,'ClassRef':ct,'execute':(_0x1e847c,_0x310cf9)=>k['fetchContacts'](_0x1e847c,_0x310cf9)});return _0xf2c7ee[_0x44997a(0x3e2)](0xc8)[_0x44997a(0x805)](_0x2584f3);})[_0x1ccaa9(0x25c)](this[_0x1ccaa9(0x715)]('getBase64FromMediaMessage'),..._0x334047,async(_0xc715b6,_0xe0e5cc)=>{const _0x2966b6=_0x1ccaa9;let _0x58fa28=await this['dataValidate']({'request':_0xc715b6,'schema':null,'ClassRef':Object,'execute':(_0xc94c65,_0xf51289)=>k[_0x2966b6(0x6f0)](_0xc94c65,_0xf51289)});return _0xe0e5cc[_0x2966b6(0x3e2)](0xc9)[_0x2966b6(0x805)](_0x58fa28);})[_0x1ccaa9(0x25c)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x105)),..._0x334047,async(_0x4a9594,_0xd3fd24)=>{const _0x4cce37=_0x1ccaa9;let _0x473ba3=await this[_0x4cce37(0x25a)]({'request':_0x4a9594,'schema':ai,'ClassRef':Ye,'execute':(_0x20c333,_0x1d314a)=>k[_0x4cce37(0x3df)](_0x20c333,_0x1d314a)});return _0xd3fd24[_0x4cce37(0x3e2)](0xc8)[_0x4cce37(0x805)](_0x473ba3);})[_0x1ccaa9(0x507)](this[_0x1ccaa9(0x715)]('findChats'),..._0x334047,async(_0x8d510a,_0x347e56)=>{const _0x36bd5c=_0x1ccaa9;let _0x465334=await this[_0x36bd5c(0x25a)]({'request':_0x8d510a,'schema':null,'ClassRef':M,'execute':_0x3d92b1=>k[_0x36bd5c(0x6de)](_0x3d92b1)});return _0x347e56['status'](0xc8)[_0x36bd5c(0x805)](_0x465334);})[_0x1ccaa9(0x507)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x1e2)),..._0x334047,async(_0x465747,_0xb7555b)=>{const _0x23db6b=_0x1ccaa9;let _0x371a87=await this['dataValidate']({'request':_0x465747,'schema':null,'ClassRef':M,'execute':_0x186fba=>k[_0x23db6b(0x683)](_0x186fba)});return _0xb7555b[_0x23db6b(0x3e2)](0xc8)[_0x23db6b(0x805)](_0x371a87);})[_0x1ccaa9(0x65e)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x169)),..._0x334047,async(_0x4252e5,_0x424b1b)=>{const _0x679829=_0x1ccaa9;let _0x19cf39=await this[_0x679829(0x25a)]({'request':_0x4252e5,'schema':null,'ClassRef':Array,'execute':(_0x47eb7a,_0x515158)=>k[_0x679829(0x169)](_0x47eb7a,_0x515158)});return _0x424b1b[_0x679829(0x3e2)](0xc8)['json'](_0x19cf39);})[_0x1ccaa9(0x507)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x77f)),..._0x334047,async(_0x5208e7,_0x3f3afc)=>{const _0x22adec=_0x1ccaa9;let _0x4db6e8=await this[_0x22adec(0x25a)]({'request':_0x5208e7,'schema':null,'ClassRef':M,'execute':_0x2b1db0=>k['fetchPrivacySettings'](_0x2b1db0)});return _0x3f3afc[_0x22adec(0x3e2)](0xc8)[_0x22adec(0x805)](_0x4db6e8);})[_0x1ccaa9(0x65e)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x4a5)),..._0x334047,async(_0x2485a5,_0xf35a63)=>{const _0x420a2a=_0x1ccaa9;let _0x580025=await this['dataValidate']({'request':_0x2485a5,'schema':Qa,'ClassRef':ot,'execute':(_0x18f1fa,_0x41bc63)=>k[_0x420a2a(0x4a5)](_0x18f1fa,_0x41bc63)});return _0xf35a63[_0x420a2a(0x3e2)](0xc9)[_0x420a2a(0x805)](_0x580025);})[_0x1ccaa9(0x25c)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x1f8)),..._0x334047,async(_0x5063,_0x29a5f6)=>{const _0x37f6d2=_0x1ccaa9;let _0x2c48d2=await this[_0x37f6d2(0x25a)]({'request':_0x5063,'schema':xe,'ClassRef':ve,'execute':(_0x1c8011,_0x4f354d)=>k[_0x37f6d2(0x1f8)](_0x1c8011,_0x4f354d)});return _0x29a5f6[_0x37f6d2(0x3e2)](0xc8)[_0x37f6d2(0x805)](_0x2c48d2);})[_0x1ccaa9(0x25c)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x60c)),..._0x334047,async(_0x36b0bf,_0x1177f7)=>{const _0x473815=_0x1ccaa9;let _0x139684=await this['dataValidate']({'request':_0x36b0bf,'schema':ei,'ClassRef':tt,'execute':(_0x533b28,_0x22f534)=>k[_0x473815(0x60c)](_0x533b28,_0x22f534)});return _0x1177f7['status'](0xc8)[_0x473815(0x805)](_0x139684);})[_0x1ccaa9(0x25c)](this[_0x1ccaa9(0x715)](_0x1ccaa9(0x120)),..._0x334047,async(_0x33365b,_0x4a26bd)=>{const _0x366900=_0x1ccaa9;let _0x58724f=await this[_0x366900(0x25a)]({'request':_0x33365b,'schema':ti,'ClassRef':st,'execute':(_0x15a232,_0x2ac39a)=>k[_0x366900(0x120)](_0x15a232,_0x2ac39a)});return _0x4a26bd[_0x366900(0x3e2)](0xc8)[_0x366900(0x805)](_0x58724f);})['put'](this['routerPath'](_0x1ccaa9(0x592)),..._0x334047,async(_0x19630a,_0x1374de)=>{const _0x2f8096=_0x1ccaa9;let _0x5cafb1=await this[_0x2f8096(0x25a)]({'request':_0x19630a,'schema':xe,'ClassRef':ve,'execute':(_0x248c98,_0x543d7d)=>k[_0x2f8096(0x592)](_0x248c98,_0x543d7d)});return _0x1374de[_0x2f8096(0x3e2)](0xc8)[_0x2f8096(0x805)](_0x5cafb1);})[_0x1ccaa9(0x5e3)](this['routerPath'](_0x1ccaa9(0x41d)),..._0x334047,async(_0x2eff5b,_0x211f0f)=>{const _0x383e99=_0x1ccaa9;let _0x1257e8=await this['dataValidate']({'request':_0x2eff5b,'schema':xe,'ClassRef':ve,'execute':(_0x27cdf7,_0x20b896)=>k[_0x383e99(0x41d)](_0x27cdf7,_0x20b896)});return _0x211f0f['status'](0xc8)[_0x383e99(0x805)](_0x1257e8);});}},mi=require(a0_0x5ca8c7(0x584)),pt=class{},ht=class{},gt=class{},mt=class{},ft=class{},wt=class{},ie=class{},Pe=class{},yt=class extends ie{},bt=class extends ie{},St=class extends W{constructor(..._0x264bd5){const _0x587136=a0_0x5ca8c7;super(),this[_0x587136(0x707)]=(0x0,mi[_0x587136(0x2f1)])(),this['router'][_0x587136(0x25c)](this[_0x587136(0x715)](_0x587136(0x512)),..._0x264bd5,async(_0x3907bb,_0x36424a)=>{const _0x1a3f1b=_0x587136;let _0x5a77bd=await this[_0x1a3f1b(0x25a)]({'request':_0x3907bb,'schema':oi,'ClassRef':pt,'execute':(_0x4ae1a1,_0x13e746)=>B['createGroup'](_0x4ae1a1,_0x13e746)});_0x36424a[_0x1a3f1b(0x3e2)](0xc9)[_0x1a3f1b(0x805)](_0x5a77bd);})[_0x587136(0x65e)](this[_0x587136(0x715)](_0x587136(0x4ff)),..._0x264bd5,async(_0x36646e,_0xca9f10)=>{const _0x9cb8ec=_0x587136;let _0x1dc3ca=await this[_0x9cb8ec(0x330)]({'request':_0x36646e,'schema':ci,'ClassRef':ht,'execute':(_0x556ac2,_0x2db8de)=>B[_0x9cb8ec(0x4ff)](_0x556ac2,_0x2db8de)});_0xca9f10[_0x9cb8ec(0x3e2)](0xc9)['json'](_0x1dc3ca);})[_0x587136(0x65e)](this[_0x587136(0x715)](_0x587136(0x17c)),..._0x264bd5,async(_0xe1cae3,_0x23fd71)=>{const _0x1632c7=_0x587136;let _0x553f23=await this[_0x1632c7(0x330)]({'request':_0xe1cae3,'schema':li,'ClassRef':gt,'execute':(_0x239b45,_0x1c72e0)=>B[_0x1632c7(0x17c)](_0x239b45,_0x1c72e0)});_0x23fd71['status'](0xc9)[_0x1632c7(0x805)](_0x553f23);})[_0x587136(0x65e)](this[_0x587136(0x715)](_0x587136(0x565)),..._0x264bd5,async(_0x820f9c,_0x252e98)=>{const _0x2147c6=_0x587136;let _0x54e20e=await this['groupValidate']({'request':_0x820f9c,'schema':ui,'ClassRef':mt,'execute':(_0xa220b0,_0xf89a62)=>B[_0x2147c6(0x565)](_0xa220b0,_0xf89a62)});_0x252e98[_0x2147c6(0x3e2)](0xc9)[_0x2147c6(0x805)](_0x54e20e);})[_0x587136(0x65e)](this[_0x587136(0x715)]('groupBetterSetting'),..._0x264bd5,async(_0x4a3b54,_0x140968)=>{const _0x8e87ca=_0x587136;let _0x47700f=await this['groupValidate']({'request':_0x4a3b54,'schema':pi,'ClassRef':wt,'execute':(_0x1492bf,_0x396589)=>B['groupBetterSetting'](_0x1492bf,_0x396589)});_0x140968[_0x8e87ca(0x3e2)](0xc9)[_0x8e87ca(0x805)](_0x47700f);})[_0x587136(0x65e)](this[_0x587136(0x715)](_0x587136(0x388)),..._0x264bd5,async(_0x32dc4d,_0x8ebfdb)=>{const _0x4dec99=_0x587136;let _0x5c4f8f=await this[_0x4dec99(0x330)]({'request':_0x32dc4d,'schema':di,'ClassRef':ft,'execute':(_0x3b5b79,_0x7dfc6d)=>B[_0x4dec99(0x388)](_0x3b5b79,_0x7dfc6d)});_0x8ebfdb[_0x4dec99(0x3e2)](0xc9)[_0x4dec99(0x805)](_0x5c4f8f);})[_0x587136(0x65e)](this['routerPath']('toggleEphemeral'),..._0x264bd5,async(_0x40c2e9,_0x1d371c)=>{const _0x43ebd5=_0x587136;let _0x3beb7f=await this['groupValidate']({'request':_0x40c2e9,'schema':ni,'ClassRef':bt,'execute':(_0x51d1a1,_0x5ddc0e)=>B[_0x43ebd5(0x286)](_0x51d1a1,_0x5ddc0e)});_0x1d371c[_0x43ebd5(0x3e2)](0xc9)[_0x43ebd5(0x805)](_0x3beb7f);})['get'](this[_0x587136(0x715)](_0x587136(0x53b)),..._0x264bd5,async(_0x4529f6,_0x15a58e)=>{const _0x4fdbe8=_0x587136;let _0x50f848=await this['groupValidate']({'request':_0x4529f6,'schema':De,'ClassRef':ie,'execute':(_0x20df56,_0x3a8c70)=>B[_0x4fdbe8(0x2a9)](_0x20df56,_0x3a8c70)});_0x15a58e['status'](0xc8)[_0x4fdbe8(0x805)](_0x50f848);})['get'](this[_0x587136(0x715)](_0x587136(0x287)),..._0x264bd5,async(_0x51fd94,_0x136a48)=>{const _0x3987fa=_0x587136;let _0x44a6f2=await this[_0x3987fa(0x25a)]({'request':_0x51fd94,'schema':N,'ClassRef':M,'execute':_0x7b823a=>B[_0x3987fa(0x287)](_0x7b823a)});_0x136a48[_0x3987fa(0x3e2)](0xc8)[_0x3987fa(0x805)](_0x44a6f2);})['get'](this[_0x587136(0x715)](_0x587136(0x376)),..._0x264bd5,async(_0x33ecc8,_0x16d7f2)=>{const _0x49e152=_0x587136;let _0x1a2ff9=await this[_0x49e152(0x330)]({'request':_0x33ecc8,'schema':De,'ClassRef':ie,'execute':(_0x4fa566,_0x930b80)=>B[_0x49e152(0x1e5)](_0x4fa566,_0x930b80)});_0x16d7f2[_0x49e152(0x3e2)](0xc8)[_0x49e152(0x805)](_0x1a2ff9);})[_0x587136(0x507)](this[_0x587136(0x715)](_0x587136(0x5d6)),..._0x264bd5,async(_0x5236de,_0x36cd8e)=>{const _0x2a6d87=_0x587136;let _0x1240b1=await this[_0x2a6d87(0x330)]({'request':_0x5236de,'schema':De,'ClassRef':ie,'execute':(_0x469c76,_0x5ee1d8)=>B[_0x2a6d87(0x5d6)](_0x469c76,_0x5ee1d8)});_0x36cd8e[_0x2a6d87(0x3e2)](0xc8)[_0x2a6d87(0x805)](_0x1240b1);})[_0x587136(0x25c)](this[_0x587136(0x715)](_0x587136(0x22d)),..._0x264bd5,async(_0x3ed3ee,_0x2bd88c)=>{const _0x20e2b5=_0x587136;let _0x143626=await this[_0x20e2b5(0x2a2)]({'request':_0x3ed3ee,'schema':Ns,'ClassRef':Pe,'execute':(_0x28f642,_0x13f146)=>B[_0x20e2b5(0x516)](_0x28f642,_0x13f146)});_0x2bd88c[_0x20e2b5(0x3e2)](0xc9)[_0x20e2b5(0x805)](_0x143626);})[_0x587136(0x65e)](this[_0x587136(0x715)]('joinGroup'),..._0x264bd5,async(_0x353a3d,_0x7656a6)=>{const _0x3affc0=_0x587136;let _0x27098e=await this[_0x3affc0(0x2a2)]({'request':_0x353a3d,'schema':Ns,'ClassRef':Pe,'execute':(_0x3c2087,_0x2fa427)=>B['joinGroup'](_0x3c2087,_0x2fa427)});_0x7656a6[_0x3affc0(0x3e2)](0xc9)['json'](_0x27098e);})['put'](this[_0x587136(0x715)]('revokeInviteCode'),..._0x264bd5,async(_0x17c6ad,_0x50af14)=>{const _0x1e61e6=_0x587136;let _0x4490c3=await this[_0x1e61e6(0x330)]({'request':_0x17c6ad,'schema':De,'ClassRef':ie,'execute':(_0x24a179,_0x4f8c65)=>B[_0x1e61e6(0x731)](_0x24a179,_0x4f8c65)});_0x50af14['status'](0xc9)[_0x1e61e6(0x805)](_0x4490c3);})[_0x587136(0x65e)](this[_0x587136(0x715)]('updateParticipant'),..._0x264bd5,async(_0x1751ba,_0x31afb7)=>{const _0x2b0870=_0x587136;let _0x10fbf7=await this[_0x2b0870(0x330)]({'request':_0x1751ba,'schema':ri,'ClassRef':yt,'execute':(_0xf2d831,_0xe4051c)=>B[_0x2b0870(0x7cd)](_0xf2d831,_0xe4051c)});_0x31afb7[_0x2b0870(0x3e2)](0xc9)[_0x2b0870(0x805)](_0x10fbf7);})[_0x587136(0x5e3)](this['routerPath']('leaveGroup'),..._0x264bd5,async(_0xaead48,_0x51fdfe)=>{const _0x349e71=_0x587136;let _0x3ff489=await this['groupValidate']({'request':_0xaead48,'schema':{},'ClassRef':ie,'execute':(_0x3665fd,_0x465a27)=>B['leaveGroup'](_0x3665fd,_0x465a27)});_0x51fdfe[_0x349e71(0x3e2)](0xc8)['json'](_0x3ff489);});}},fi=require(a0_0x5ca8c7(0x584)),Mt=class extends W{constructor(_0x18ab18,..._0x18c1a8){const _0x3fb567=a0_0x5ca8c7;super(),this[_0x3fb567(0x588)]=_0x18ab18,this[_0x3fb567(0x707)]=(0x0,fi[_0x3fb567(0x2f1)])();let _0x1bc37b=_0x18ab18[_0x3fb567(0x507)](_0x3fb567(0x166));this[_0x3fb567(0x707)]['post'](_0x3fb567(0x3c0),..._0x18c1a8,async(_0x4b12f9,_0x24e101)=>{const _0x5bb555=_0x3fb567;let {instanceName:_0x13749a,apikey:_0x50763e,number:_0x108fa9}=_0x4b12f9['body'],_0x129844=await ge[_0x5bb555(0x482)]({'instanceName':_0x13749a,'apikey':_0x50763e,'number':_0x108fa9});return _0x24e101[_0x5bb555(0x3e2)](0xc9)[_0x5bb555(0x805)](_0x129844);})[_0x3fb567(0x65e)](this[_0x3fb567(0x715)](_0x3fb567(0x3cf)),..._0x18c1a8,async(_0x3c3f7e,_0x3e11a6)=>{const _0x3c971d=_0x3fb567;let _0x21fa9c=await this['dataValidate']({'request':_0x3c3f7e,'schema':N,'ClassRef':M,'execute':_0x41e334=>ge[_0x3c971d(0x186)](_0x41e334)});return _0x3e11a6['status'](0xc8)[_0x3c971d(0x805)](_0x21fa9c);})[_0x3fb567(0x507)](this[_0x3fb567(0x715)]('connect'),..._0x18c1a8,async(_0x4c1d38,_0x473bcc)=>{const _0x20ae33=_0x3fb567;let _0x2842f3=await this[_0x20ae33(0x25a)]({'request':_0x4c1d38,'schema':N,'ClassRef':M,'execute':_0x3dea3d=>ge[_0x20ae33(0x662)](_0x3dea3d)});return _0x473bcc[_0x20ae33(0x3e2)](0xc8)[_0x20ae33(0x805)](_0x2842f3);})[_0x3fb567(0x507)](this[_0x3fb567(0x715)]('connectionState'),..._0x18c1a8,async(_0xe45d17,_0x133497)=>{const _0x995055=_0x3fb567;let _0x48924a=await this[_0x995055(0x25a)]({'request':_0xe45d17,'schema':N,'ClassRef':M,'execute':_0x58a5fa=>ge[_0x995055(0x20b)](_0x58a5fa)});return _0x133497[_0x995055(0x3e2)](0xc8)[_0x995055(0x805)](_0x48924a);})[_0x3fb567(0x507)](this[_0x3fb567(0x715)](_0x3fb567(0x765),!0x1),..._0x18c1a8,async(_0x5a82e3,_0x37de06)=>{const _0x397f03=_0x3fb567;let _0x4d2886=await this['dataValidate']({'request':_0x5a82e3,'schema':null,'ClassRef':M,'execute':_0x5caa00=>ge[_0x397f03(0x765)](_0x5caa00)});return _0x37de06[_0x397f03(0x3e2)](0xc8)['json'](_0x4d2886);})[_0x3fb567(0x5e3)](this[_0x3fb567(0x715)](_0x3fb567(0x251)),..._0x18c1a8,async(_0x37664a,_0x306543)=>{const _0x40fb84=_0x3fb567;let _0x2c3126=await this[_0x40fb84(0x25a)]({'request':_0x37664a,'schema':N,'ClassRef':M,'execute':_0x197b21=>ge[_0x40fb84(0x251)](_0x197b21)});return _0x306543[_0x40fb84(0x3e2)](0xc8)[_0x40fb84(0x805)](_0x2c3126);})[_0x3fb567(0x5e3)](this[_0x3fb567(0x715)]('delete'),..._0x18c1a8,async(_0x2d26c2,_0x529916)=>{const _0x5b74c2=_0x3fb567;let _0x216b4a=await this[_0x5b74c2(0x25a)]({'request':_0x2d26c2,'schema':N,'ClassRef':M,'execute':_0x2b688e=>ge[_0x5b74c2(0x439)](_0x2b688e)});return _0x529916[_0x5b74c2(0x3e2)](0xc8)[_0x5b74c2(0x805)](_0x216b4a);});}},wi=require(a0_0x5ca8c7(0x584)),Rs=class{},Q=class extends Rs{},Ct=class extends Q{},Et=class extends Q{},vt=class extends Q{},Nt=class extends Q{},ke=class extends Q{},$t=class extends Q{},Rt=class extends Q{},It=class extends Q{},At=class extends Q{},Tt=class extends Q{},_t=class{},Ot=class extends W{constructor(..._0x31a4f5){const _0x38c653=a0_0x5ca8c7;super(),this['router']=(0x0,wi['Router'])(),this[_0x38c653(0x707)][_0x38c653(0x25c)](this[_0x38c653(0x715)](_0x38c653(0x752)),..._0x31a4f5,async(_0x26e69b,_0x57075c)=>{const _0x76099c=_0x38c653;let _0x1a22f9=await this['dataValidate']({'request':_0x26e69b,'schema':Pa,'ClassRef':Ct,'execute':(_0x9257c0,_0x25a18a)=>H[_0x76099c(0x752)](_0x9257c0,_0x25a18a)});return _0x57075c[_0x76099c(0x3e2)](0xc9)[_0x76099c(0x805)](_0x1a22f9);})[_0x38c653(0x25c)](this[_0x38c653(0x715)](_0x38c653(0x303)),..._0x31a4f5,async(_0x2d6dec,_0x1a00bd)=>{const _0x4083e5=_0x38c653;let _0x46a5fd=await this[_0x4083e5(0x25a)]({'request':_0x2d6dec,'schema':Ua,'ClassRef':ke,'execute':(_0x1ad428,_0x1a2faf)=>H[_0x4083e5(0x303)](_0x1ad428,_0x1a2faf)});return _0x1a00bd[_0x4083e5(0x3e2)](0xc9)[_0x4083e5(0x805)](_0x46a5fd);})[_0x38c653(0x25c)](this['routerPath'](_0x38c653(0x76a)),..._0x31a4f5,async(_0x5ea7c1,_0x4123d2)=>{const _0x40fee3=_0x38c653;let _0x3298ce=await this[_0x40fee3(0x25a)]({'request':_0x5ea7c1,'schema':qa,'ClassRef':Nt,'execute':(_0x97859e,_0x5cccfa)=>H[_0x40fee3(0x76a)](_0x97859e,_0x5cccfa)});return _0x4123d2[_0x40fee3(0x3e2)](0xc9)[_0x40fee3(0x805)](_0x3298ce);})[_0x38c653(0x25c)](this['routerPath'](_0x38c653(0x7a1)),..._0x31a4f5,async(_0x6a26d2,_0x4c8643)=>{const _0x24fcb5=_0x38c653;let _0x540df8=await this[_0x24fcb5(0x25a)]({'request':_0x6a26d2,'schema':ja,'ClassRef':ke,'execute':(_0x29203d,_0x4a8730)=>H['sendWhatsAppAudio'](_0x29203d,_0x4a8730)});return _0x4c8643[_0x24fcb5(0x3e2)](0xc9)['json'](_0x540df8);})['post'](this[_0x38c653(0x715)](_0x38c653(0x42f)),..._0x31a4f5,async(_0x2c2285,_0x128fc1)=>{const _0x452b19=_0x38c653;let _0x3d0e31=await this['dataValidate']({'request':_0x2c2285,'schema':Va,'ClassRef':Rt,'execute':(_0x1a83e2,_0xe567a1)=>H[_0x452b19(0x42f)](_0x1a83e2,_0xe567a1)});return _0x128fc1['status'](0xc9)['json'](_0x3d0e31);})[_0x38c653(0x25c)](this['routerPath'](_0x38c653(0x1df)),..._0x31a4f5,async(_0x174656,_0x35e7e3)=>{const _0x381a01=_0x38c653;let _0x3c016b=await this[_0x381a01(0x25a)]({'request':_0x174656,'schema':Ga,'ClassRef':It,'execute':(_0x481e61,_0xb8ca65)=>H[_0x381a01(0x1df)](_0x481e61,_0xb8ca65)});return _0x35e7e3[_0x381a01(0x3e2)](0xc9)['json'](_0x3c016b);})[_0x38c653(0x25c)](this[_0x38c653(0x715)](_0x38c653(0x300)),..._0x31a4f5,async(_0x4b637b,_0x211767)=>{const _0x5e3e20=_0x38c653;let _0x2d5848=await this[_0x5e3e20(0x25a)]({'request':_0x4b637b,'schema':Ba,'ClassRef':At,'execute':(_0x3d66bc,_0x442e72)=>H[_0x5e3e20(0x300)](_0x3d66bc,_0x442e72)});return _0x211767['status'](0xc9)[_0x5e3e20(0x805)](_0x2d5848);})[_0x38c653(0x25c)](this[_0x38c653(0x715)](_0x38c653(0x409)),..._0x31a4f5,async(_0x3fc211,_0x1cdb27)=>{const _0x42f0a6=_0x38c653;let _0x3849ab=await this[_0x42f0a6(0x25a)]({'request':_0x3fc211,'schema':Wa,'ClassRef':Tt,'execute':(_0x1da6b7,_0x5df882)=>H[_0x42f0a6(0x409)](_0x1da6b7,_0x5df882)});return _0x1cdb27['status'](0xc9)[_0x42f0a6(0x805)](_0x3849ab);})[_0x38c653(0x25c)](this[_0x38c653(0x715)](_0x38c653(0x74d)),..._0x31a4f5,async(_0xdd3c1f,_0x131359)=>{const _0x178dc2=_0x38c653;let _0x57ce2d=await this[_0x178dc2(0x25a)]({'request':_0xdd3c1f,'schema':za,'ClassRef':_t,'execute':(_0x423172,_0x97535d)=>H[_0x178dc2(0x74d)](_0x423172,_0x97535d)});return _0x131359[_0x178dc2(0x3e2)](0xc9)['json'](_0x57ce2d);})[_0x38c653(0x25c)](this[_0x38c653(0x715)](_0x38c653(0x7e4)),..._0x31a4f5,async(_0x1760fe,_0x2c12bc)=>{const _0x1d39ab=_0x38c653;let _0xab6746=await this[_0x1d39ab(0x25a)]({'request':_0x1760fe,'schema':Ja,'ClassRef':vt,'execute':(_0x268da0,_0xffe5b2)=>H[_0x1d39ab(0x7e4)](_0x268da0,_0xffe5b2)});return _0x2c12bc[_0x1d39ab(0x3e2)](0xc9)[_0x1d39ab(0x805)](_0xab6746);})[_0x38c653(0x25c)](this['routerPath'](_0x38c653(0x2cc)),..._0x31a4f5,async(_0x19a136,_0x48d4c9)=>{const _0x22596c=_0x38c653;let _0x5e9bd7=await this[_0x22596c(0x25a)]({'request':_0x19a136,'schema':Fa,'ClassRef':Et,'execute':(_0x550ccb,_0x345741)=>H[_0x22596c(0x2cc)](_0x550ccb,_0x345741)});return _0x48d4c9['status'](0xc9)['json'](_0x5e9bd7);})['post'](this['routerPath'](_0x38c653(0x6e1)),..._0x31a4f5,async(_0x5a7b91,_0xf90416)=>{const _0x15f21c=_0x38c653;let _0x4ac239=await this[_0x15f21c(0x25a)]({'request':_0x5a7b91,'schema':La,'ClassRef':$t,'execute':(_0x4e3678,_0x3962ab)=>H[_0x15f21c(0x6e1)](_0x4e3678,_0x3962ab)});return _0xf90416[_0x15f21c(0x3e2)](0xc9)[_0x15f21c(0x805)](_0x4ac239);});}},yi=require(a0_0x5ca8c7(0x584)),xt=class{},Dt=class extends W{constructor(..._0x103de1){const _0x20f10a=a0_0x5ca8c7;super(),this[_0x20f10a(0x707)]=(0x0,yi['Router'])(),this[_0x20f10a(0x707)][_0x20f10a(0x25c)](this[_0x20f10a(0x715)](_0x20f10a(0x548)),..._0x103de1,async(_0x50d78b,_0x4af964)=>{const _0xe4b0a3=_0x20f10a;let _0x507e02=await this[_0xe4b0a3(0x25a)]({'request':_0x50d78b,'schema':hi,'ClassRef':xt,'execute':(_0x12ad72,_0x285a79)=>Is[_0xe4b0a3(0x6b9)](_0x12ad72,_0x285a79)});_0x4af964[_0xe4b0a3(0x3e2)](0xc9)[_0xe4b0a3(0x805)](_0x507e02);})[_0x20f10a(0x507)](this[_0x20f10a(0x715)](_0x20f10a(0x509)),..._0x103de1,async(_0x843ff4,_0x2ba805)=>{const _0x40f260=_0x20f10a;let _0x100b60=await this[_0x40f260(0x25a)]({'request':_0x843ff4,'schema':N,'ClassRef':M,'execute':_0x554b3b=>Is[_0x40f260(0x4f4)](_0x554b3b)});_0x2ba805[_0x40f260(0x3e2)](0xc8)[_0x40f260(0x805)](_0x100b60);});}},bi=require(a0_0x5ca8c7(0x584)),y=new $(a0_0x5ca8c7(0x6f3)),Pt=class extends W{constructor(..._0x5be7f9){const _0x5e1a46=a0_0x5ca8c7;super(),this['router']=(0x0,bi[_0x5e1a46(0x2f1)])(),this[_0x5e1a46(0x707)]['post'](this[_0x5e1a46(0x715)](_0x5e1a46(0x1c4)),..._0x5be7f9,async(_0x58f84d,_0x14e4da)=>{const _0x4c3644=_0x5e1a46;let _0x2e1983=_0x58f84d[_0x4c3644(0x3ec)];y[_0x4c3644(0x39b)](_0x4c3644(0x532)),y['verbose'](_0x4c3644(0x2ae)),y['verbose'](_0x58f84d['body']);let _0x436dd3=await this[_0x4c3644(0x25a)]({'request':_0x58f84d,'schema':N,'ClassRef':M,'execute':_0x41e8f1=>_[_0x4c3644(0x618)](_0x41e8f1,_0x2e1983)});_0x14e4da[_0x4c3644(0x3e2)](0xc8)['json'](_0x436dd3);})['get'](this['routerPath'](_0x5e1a46(0x1c4)),..._0x5be7f9,async(_0x334500,_0xe2ff22)=>{const _0x38c41d=_0x5e1a46;let _0x246a19=await this[_0x38c41d(0x25a)]({'request':_0x334500,'schema':N,'ClassRef':M,'execute':_0x56940a=>_[_0x38c41d(0x1c2)](_0x56940a)});_0xe2ff22['status'](0xc8)[_0x38c41d(0x805)](_0x246a19);})[_0x5e1a46(0x5e3)](this[_0x5e1a46(0x715)](_0x5e1a46(0x6ed)),..._0x5be7f9,async(_0x30ec46,_0x313983)=>{const _0x15d78f=_0x5e1a46;y[_0x15d78f(0x39b)]('request\x20received\x20in\x20deleteDoneMessages');let _0x32456f=await this['dataValidate']({'request':_0x30ec46,'schema':N,'ClassRef':M,'execute':_0x60102f=>_[_0x15d78f(0x6ed)](_0x60102f)});_0x313983[_0x15d78f(0x3e2)](0xc8)[_0x15d78f(0x805)](_0x32456f);})[_0x5e1a46(0x25c)](this['routerPath']('startFlow'),..._0x5be7f9,async(_0xad6e0c,_0x278d75)=>{const _0x570b2a=_0x5e1a46;let _0x29333a=_0xad6e0c['body'];y[_0x570b2a(0x39b)](_0x570b2a(0x1a4)),y[_0x570b2a(0x39b)](_0x570b2a(0x2ae)),y[_0x570b2a(0x39b)](_0xad6e0c['body']);let _0x2c3ea7=await this[_0x570b2a(0x25a)]({'request':_0xad6e0c,'schema':N,'ClassRef':M,'execute':_0x5092ac=>_[_0x570b2a(0x702)](_0x5092ac,_0x29333a)});_0x278d75[_0x570b2a(0x3e2)](0xc8)[_0x570b2a(0x805)](_0x2c3ea7);})[_0x5e1a46(0x507)](this[_0x5e1a46(0x715)]('getAutomateSystem'),..._0x5be7f9,async(_0x1be470,_0x326ff0)=>{const _0x9bdb0b=_0x5e1a46;y[_0x9bdb0b(0x39b)]('request\x20received\x20in\x20getAutomateSystem');let _0x2525fc=await this[_0x9bdb0b(0x25a)]({'request':_0x1be470,'schema':N,'ClassRef':M,'execute':_0x203be1=>_[_0x9bdb0b(0x280)](_0x203be1)});_0x326ff0[_0x9bdb0b(0x3e2)](0xc8)['json'](_0x2525fc);})[_0x5e1a46(0x507)](this['routerPath']('getTicketSystem'),..._0x5be7f9,async(_0xa8a9af,_0x2fad20)=>{const _0x34e934=_0x5e1a46;y[_0x34e934(0x39b)](_0x34e934(0x20a));let _0x44a058=await this[_0x34e934(0x25a)]({'request':_0xa8a9af,'schema':N,'ClassRef':M,'execute':_0x1689af=>_['getAutomateSystem'](_0x1689af)});_0x2fad20['status'](0xc8)['json'](_0x44a058);})[_0x5e1a46(0x25c)](this[_0x5e1a46(0x715)]('updateAgent'),..._0x5be7f9,async(_0xa8bd26,_0x176f04)=>{const _0x5383d4=_0x5e1a46;let _0x28bfcd=_0xa8bd26[_0x5383d4(0x3ec)];y[_0x5383d4(0x39b)](_0x5383d4(0x6d8)),y[_0x5383d4(0x39b)](_0x5383d4(0x2ae)),y[_0x5383d4(0x39b)](_0xa8bd26[_0x5383d4(0x3ec)]);let _0x234ade=await this['dataValidate']({'request':_0xa8bd26,'schema':N,'ClassRef':M,'execute':_0x5ea529=>_['updateAgent'](_0x5ea529,_0x28bfcd)});_0x176f04[_0x5383d4(0x3e2)](0xc8)['json'](_0x234ade);})['post'](this['routerPath'](_0x5e1a46(0x3d8)),..._0x5be7f9,async(_0x57f3e6,_0x460afb)=>{const _0x38402a=_0x5e1a46;let _0x4b895a=_0x57f3e6['body'];y[_0x38402a(0x39b)]('request\x20received\x20in\x20updateCustomFields'),y[_0x38402a(0x39b)]('request\x20body:\x20'),y[_0x38402a(0x39b)](_0x57f3e6[_0x38402a(0x3ec)]);let _0x191ee7=await this[_0x38402a(0x25a)]({'request':_0x57f3e6,'schema':N,'ClassRef':M,'execute':_0x315bb8=>_[_0x38402a(0x3d8)](_0x315bb8,_0x4b895a)});_0x460afb[_0x38402a(0x3e2)](0xc8)['json'](_0x191ee7);})[_0x5e1a46(0x25c)](this[_0x5e1a46(0x715)](_0x5e1a46(0x53a)),..._0x5be7f9,async(_0x3506ed,_0x3ed4f8)=>{const _0x181bc7=_0x5e1a46;let _0xb97b85=_0x3506ed['body'];y[_0x181bc7(0x39b)](_0x181bc7(0x104)),y[_0x181bc7(0x39b)](_0x181bc7(0x2ae)),y[_0x181bc7(0x39b)](_0x3506ed['body']);let _0x2aff2f=await this[_0x181bc7(0x25a)]({'request':_0x3506ed,'schema':N,'ClassRef':M,'execute':_0x25eded=>_[_0x181bc7(0x53a)](_0x25eded,_0xb97b85)});_0x3ed4f8['status'](0xc8)[_0x181bc7(0x805)](_0x2aff2f);})[_0x5e1a46(0x25c)](this['routerPath']('updateFlowConfig'),..._0x5be7f9,async(_0x3a1ef8,_0x538c8d)=>{const _0x3f41c1=_0x5e1a46;let _0x469205=_0x3a1ef8[_0x3f41c1(0x3ec)];y[_0x3f41c1(0x39b)](_0x3f41c1(0x762)),y[_0x3f41c1(0x39b)](_0x3f41c1(0x2ae)),y[_0x3f41c1(0x39b)](_0x3a1ef8[_0x3f41c1(0x3ec)]);let _0x58fd73=await this[_0x3f41c1(0x25a)]({'request':_0x3a1ef8,'schema':N,'ClassRef':M,'execute':_0x3c91ba=>_[_0x3f41c1(0x277)](_0x3c91ba,_0x469205)});_0x538c8d[_0x3f41c1(0x3e2)](0xc8)[_0x3f41c1(0x805)](_0x58fd73);})[_0x5e1a46(0x25c)](this[_0x5e1a46(0x715)](_0x5e1a46(0x16d)),..._0x5be7f9,async(_0x182200,_0x322c0d)=>{const _0x2606e7=_0x5e1a46;let _0x3b317b=_0x182200['body'];y[_0x2606e7(0x39b)](_0x2606e7(0x5f9)),y['verbose']('request\x20body:\x20'),y[_0x2606e7(0x39b)](_0x182200[_0x2606e7(0x3ec)]);let _0x301007=await this[_0x2606e7(0x25a)]({'request':_0x182200,'schema':N,'ClassRef':M,'execute':_0x2c40c6=>_[_0x2606e7(0x16d)](_0x2c40c6,_0x3b317b)});_0x322c0d[_0x2606e7(0x3e2)](0xc8)[_0x2606e7(0x805)](_0x301007);})['post'](this[_0x5e1a46(0x715)](_0x5e1a46(0x7f2)),..._0x5be7f9,async(_0x45f1d6,_0x49eac4)=>{const _0x164ef9=_0x5e1a46;let _0x444abf=_0x45f1d6[_0x164ef9(0x3ec)];y[_0x164ef9(0x39b)]('request\x20received\x20in\x20fetchConversation'),y[_0x164ef9(0x39b)](_0x164ef9(0x2ae)),y[_0x164ef9(0x39b)](_0x45f1d6['body']);let _0x2f400f=await this['dataValidate']({'request':_0x45f1d6,'schema':N,'ClassRef':M,'execute':_0x491cb6=>_[_0x164ef9(0x7f2)](_0x491cb6,_0x444abf)});_0x49eac4['status'](0xc8)[_0x164ef9(0x805)](_0x2f400f);})[_0x5e1a46(0x25c)](this[_0x5e1a46(0x715)](_0x5e1a46(0x524)),..._0x5be7f9,async(_0x55663e,_0x541013)=>{const _0x157c7e=_0x5e1a46;let _0x10a160=_0x55663e['body'];y['verbose']('request\x20received\x20in\x20editConversation'),y['verbose']('request\x20body:\x20'),y[_0x157c7e(0x39b)](_0x55663e[_0x157c7e(0x3ec)]);let _0x1fbd28=await this['dataValidate']({'request':_0x55663e,'schema':N,'ClassRef':M,'execute':_0x3b4ec7=>_[_0x157c7e(0x524)](_0x3b4ec7,_0x10a160)});_0x541013[_0x157c7e(0x3e2)](0xc8)[_0x157c7e(0x805)](_0x1fbd28);})[_0x5e1a46(0x5e3)](this[_0x5e1a46(0x715)]('deleteConversation'),..._0x5be7f9,async(_0x13d044,_0x1d4bc6)=>{const _0x34641f=_0x5e1a46;let _0x49bd94=_0x13d044['body'];y['verbose'](_0x34641f(0x314)),y[_0x34641f(0x39b)](_0x34641f(0x2ae)),y[_0x34641f(0x39b)](_0x13d044[_0x34641f(0x3ec)]);let _0x4fa6a6=await this[_0x34641f(0x25a)]({'request':_0x13d044,'schema':N,'ClassRef':M,'execute':_0xaaed31=>_[_0x34641f(0xce)](_0xaaed31,_0x49bd94)});_0x1d4bc6['status'](0xc8)[_0x34641f(0x805)](_0x4fa6a6);})[_0x5e1a46(0x25c)](this[_0x5e1a46(0x715)]('createflow'),..._0x5be7f9,async(_0x4da51c,_0x46bf4b)=>{const _0x1f47e2=_0x5e1a46;let _0x4a4c50=_0x4da51c['body'],_0x548cdc=_0x4da51c['headers'][_0x1f47e2(0x790)];y[_0x1f47e2(0x39b)](_0x1f47e2(0x4c8)),y['verbose'](_0x1f47e2(0x2ae)),y[_0x1f47e2(0x39b)](_0x4da51c[_0x1f47e2(0x3ec)]);let _0x578883=await this[_0x1f47e2(0x25a)]({'request':_0x4da51c,'schema':N,'ClassRef':M,'execute':_0x3d6ea6=>_[_0x1f47e2(0x533)](_0x3d6ea6,_0x4a4c50,_0x548cdc)});_0x46bf4b[_0x1f47e2(0x3e2)](0xc8)[_0x1f47e2(0x805)](_0x578883);})[_0x5e1a46(0x25c)](this[_0x5e1a46(0x715)](_0x5e1a46(0x2e1)),..._0x5be7f9,async(_0x113977,_0x2dbbfc)=>{const _0x172b1b=_0x5e1a46;let _0x355814=_0x113977['body'],_0x190361=_0x113977[_0x172b1b(0x4b8)][_0x172b1b(0x790)];y['verbose'](_0x172b1b(0x2a8)),y[_0x172b1b(0x39b)](_0x172b1b(0x2ae)),y[_0x172b1b(0x39b)](_0x113977['body']),delete _0x355814[_0x172b1b(0xe6)],delete _0x355814[_0x172b1b(0x377)],delete _0x355814[_0x172b1b(0x15f)],delete _0x355814[_0x172b1b(0x495)];let _0x180c38=await this[_0x172b1b(0x25a)]({'request':_0x113977,'schema':N,'ClassRef':M,'execute':_0x50ac5a=>_['editFlow'](_0x50ac5a,_0x355814,_0x190361)});_0x2dbbfc[_0x172b1b(0x3e2)](0xc8)[_0x172b1b(0x805)](_0x180c38);})[_0x5e1a46(0x25c)](this[_0x5e1a46(0x715)](_0x5e1a46(0x41a)),..._0x5be7f9,async(_0x2adc49,_0x149e19)=>{const _0x1ae6ac=_0x5e1a46;let _0x39e2fe=_0x2adc49['body'];y[_0x1ae6ac(0x39b)](_0x1ae6ac(0x2a8)),y[_0x1ae6ac(0x39b)](_0x1ae6ac(0x2ae)),y[_0x1ae6ac(0x39b)](_0x2adc49['body']);let _0x5e1270=await this[_0x1ae6ac(0x25a)]({'request':_0x2adc49,'schema':N,'ClassRef':M,'execute':_0x176eab=>_['editFlowBlock'](_0x176eab,_0x39e2fe)});_0x149e19['status'](0xc8)[_0x1ae6ac(0x805)](_0x5e1270);})[_0x5e1a46(0x25c)](this['routerPath'](_0x5e1a46(0x3c8)),..._0x5be7f9,async(_0xa4e68c,_0x5ab994)=>{const _0x4e8603=_0x5e1a46;let _0x2cd2ac=_0xa4e68c[_0x4e8603(0x3ec)];y[_0x4e8603(0x39b)]('request\x20received\x20in\x20editFlow'),y[_0x4e8603(0x39b)](_0x4e8603(0x2ae)),y['verbose'](_0xa4e68c[_0x4e8603(0x3ec)]);let _0x593e03=await this[_0x4e8603(0x25a)]({'request':_0xa4e68c,'schema':N,'ClassRef':M,'execute':_0x41ddaf=>_['editFlowReply'](_0x41ddaf,_0x2cd2ac)});_0x5ab994[_0x4e8603(0x3e2)](0xc8)['json'](_0x593e03);})['post'](this[_0x5e1a46(0x715)](_0x5e1a46(0x529)),..._0x5be7f9,async(_0x4cfee0,_0x24d7e8)=>{const _0x5b335f=_0x5e1a46;let _0x522652=_0x4cfee0[_0x5b335f(0x3ec)];y[_0x5b335f(0x39b)]('request\x20received\x20in\x20editFlow'),y[_0x5b335f(0x39b)]('request\x20body:\x20'),y[_0x5b335f(0x39b)](_0x4cfee0['body']);let _0x24da1b=await this['dataValidate']({'request':_0x4cfee0,'schema':N,'ClassRef':M,'execute':_0x4512f7=>_[_0x5b335f(0x6a9)](_0x4512f7,_0x522652)});_0x24d7e8[_0x5b335f(0x3e2)](0xc8)['json'](_0x24da1b);})['post'](this[_0x5e1a46(0x715)](_0x5e1a46(0x405)),..._0x5be7f9,async(_0x13e503,_0x5b55d5)=>{const _0x232e39=_0x5e1a46;let _0x29eb05=_0x13e503[_0x232e39(0x3ec)];y[_0x232e39(0x39b)](_0x232e39(0x777)),y['verbose'](_0x232e39(0x2ae)),y[_0x232e39(0x39b)](_0x13e503['body']);let _0xf0d761=await this[_0x232e39(0x25a)]({'request':_0x13e503,'schema':N,'ClassRef':M,'execute':_0x57e1c5=>_[_0x232e39(0x173)](_0x57e1c5,_0x29eb05)});_0x5b55d5[_0x232e39(0x3e2)](0xc8)[_0x232e39(0x805)](_0xf0d761);})[_0x5e1a46(0x25c)](this[_0x5e1a46(0x715)]('editflowcondition'),..._0x5be7f9,async(_0x4168a6,_0x4ba8bb)=>{const _0x534e79=_0x5e1a46;let _0x1fe33c=_0x4168a6[_0x534e79(0x3ec)];y[_0x534e79(0x39b)]('request\x20received\x20in\x20editFlowcondition'),y[_0x534e79(0x39b)]('request\x20body:\x20'),y[_0x534e79(0x39b)](_0x4168a6[_0x534e79(0x3ec)]);let _0x1f2106=await this[_0x534e79(0x25a)]({'request':_0x4168a6,'schema':N,'ClassRef':M,'execute':_0x11ab32=>_[_0x534e79(0x39e)](_0x11ab32,_0x1fe33c)});_0x4ba8bb['status'](0xc8)[_0x534e79(0x805)](_0x1f2106);})['post'](this[_0x5e1a46(0x715)](_0x5e1a46(0x121)),..._0x5be7f9,async(_0x366b93,_0x3f3527)=>{const _0x1d9236=_0x5e1a46;let _0x2c841b=_0x366b93[_0x1d9236(0x3ec)];y[_0x1d9236(0x39b)](_0x1d9236(0x6aa)),y['verbose'](_0x1d9236(0x2ae)),y[_0x1d9236(0x39b)](_0x366b93[_0x1d9236(0x3ec)]);let _0x50ae2e=await this[_0x1d9236(0x25a)]({'request':_0x366b93,'schema':N,'ClassRef':M,'execute':_0x33fdc2=>_[_0x1d9236(0x38f)](_0x33fdc2,_0x2c841b)});_0x3f3527[_0x1d9236(0x3e2)](0xc8)[_0x1d9236(0x805)](_0x50ae2e);})['post'](this['routerPath'](_0x5e1a46(0x80f)),..._0x5be7f9,async(_0x11a6ee,_0x1b6d44)=>{const _0x7031ba=_0x5e1a46;let _0xcdcb1c=_0x11a6ee[_0x7031ba(0x3ec)];y[_0x7031ba(0x39b)](_0x7031ba(0x50b)),y[_0x7031ba(0x39b)](_0x7031ba(0x2ae)),y[_0x7031ba(0x39b)](_0x11a6ee[_0x7031ba(0x3ec)]);let _0x47c781=await this[_0x7031ba(0x25a)]({'request':_0x11a6ee,'schema':N,'ClassRef':M,'execute':_0x33db8f=>_['getFlow'](_0x33db8f,_0xcdcb1c)});_0x1b6d44['status'](0xc8)[_0x7031ba(0x805)](_0x47c781);})[_0x5e1a46(0x5e3)](this[_0x5e1a46(0x715)](_0x5e1a46(0x5dd)),..._0x5be7f9,async(_0xbfd999,_0x543e33)=>{const _0x3ee90e=_0x5e1a46;let _0x2e187c=_0xbfd999[_0x3ee90e(0x3ec)];y[_0x3ee90e(0x39b)]('request\x20received\x20in\x20deleteFlow'),y[_0x3ee90e(0x39b)]('request\x20body:\x20'),y[_0x3ee90e(0x39b)](_0xbfd999[_0x3ee90e(0x3ec)]);let _0x582446=await this[_0x3ee90e(0x25a)]({'request':_0xbfd999,'schema':N,'ClassRef':M,'execute':_0x46eae6=>_[_0x3ee90e(0x449)](_0x46eae6,_0x2e187c)});_0x543e33[_0x3ee90e(0x3e2)](0xc8)[_0x3ee90e(0x805)](_0x582446);})['get'](this[_0x5e1a46(0x715)]('allflows'),..._0x5be7f9,async(_0x14069d,_0x2cbd5c)=>{const _0x5017cd=_0x5e1a46;y[_0x5017cd(0x39b)](_0x5017cd(0x1b1));let _0x36ff70=await this[_0x5017cd(0x25a)]({'request':_0x14069d,'schema':N,'ClassRef':M,'execute':_0xafac18=>_[_0x5017cd(0x3bf)](_0xafac18)});_0x2cbd5c[_0x5017cd(0x3e2)](0xc8)[_0x5017cd(0x805)](_0x36ff70);});}},Ei=A(require(a0_0x5ca8c7(0x2d9))),oe={};function Si(_0x5ead41,_0x443a97,_0x1a91b6,_0x18897c){oe[_0x5ead41]||(oe[_0x5ead41]={}),oe[_0x5ead41][_0x443a97]={'id':_0x443a97,'response':_0x1a91b6,'events':_0x18897c};}function Mi(_0x52e30a,_0xb7a135){!oe[_0x52e30a]||!oe[_0x52e30a][_0xb7a135]||delete oe[_0x52e30a][_0xb7a135];}function q(_0x894239,_0x3e49d8,_0x3c107a){const _0x368bc7=a0_0x5ca8c7;if(!oe[_0x894239])return;let _0x196704='data:\x20'+JSON[_0x368bc7(0x79e)](_0x3c107a)+'\x0a\x0a';Object[_0x368bc7(0x7f7)](oe[_0x894239])[_0x368bc7(0x57a)](_0x80e68=>{const _0x72fdb8=_0x368bc7;_0x80e68[_0x72fdb8(0x668)]['includes'](_0x3e49d8)&&_0x80e68[_0x72fdb8(0x54f)]['write'](_0x196704);});}function Ci(){const _0x1c2536=a0_0x5ca8c7;let _0x37a7b1={};for(let _0x1923ba in oe)_0x37a7b1[_0x1923ba]=Object[_0x1c2536(0x7f7)](oe[_0x1923ba])[_0x1c2536(0x726)](_0x1cbd15=>({'id':_0x1cbd15['id'],'events':_0x1cbd15[_0x1c2536(0x668)]}));return _0x37a7b1;}var vi=require(a0_0x5ca8c7(0x69c)),Ts=require(a0_0x5ca8c7(0x81d)),As=class{},_o=new Ts['Schema']({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),Oo=new Ts[(a0_0x5ca8c7(0x7c2))]({'_id':{'type':String,'default':'config'},'WebhookGlobal':{'type':_o},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ne=I?.[a0_0x5ca8c7(0x416)](As['name'],Oo,'All_Instances_Config'),xo=Ei['default'][a0_0x5ca8c7(0x363)](__dirname,a0_0x5ca8c7(0x27a)),Le=(0x0,kt[a0_0x5ca8c7(0x2f1)])(),Do=S[a0_0x5ca8c7(0x507)](a0_0x5ca8c7(0x166))[a0_0x5ca8c7(0x25b)],le=[Aa,Ta,xa[Do]];Le['use'](a0_0x5ca8c7(0x43e),kt[a0_0x5ca8c7(0x180)][a0_0x5ca8c7(0x2dc)](xo))[a0_0x5ca8c7(0x507)](a0_0x5ca8c7(0x201),async(_0x22325f,_0x386439)=>{const _0x4eebf9=a0_0x5ca8c7;console[_0x4eebf9(0x5df)](_0x4eebf9(0x5f6));let _0xc470be=_0x22325f['params'][_0x4eebf9(0x444)],_0x158d06=(_0x22325f[_0x4eebf9(0x551)][_0x4eebf9(0x668)]||'')[_0x4eebf9(0x42a)](','),_0x579127=(0x0,vi['v4'])();console['log'](_0x4eebf9(0x1b2),_0xc470be),console['log']('Subscribed\x20Events:',_0x158d06);let _0xd180a5=S[_0x4eebf9(0x507)](_0x4eebf9(0x166))[_0x4eebf9(0x59a)],_0x4607fa=_0x22325f[_0x4eebf9(0x551)]['apikey'];if(console['log'](_0x4eebf9(0x3e1),_0x4607fa),_0xd180a5[_0x4eebf9(0x3e4)]!==_0x4607fa){console[_0x4eebf9(0x5df)](_0x4eebf9(0x73c));try{let _0x2996c9=await ye[_0x4eebf9(0x772)][_0x4eebf9(0x509)](_0xc470be);if(console[_0x4eebf9(0x5df)]('Instance\x20Key\x20from\x20DB:',_0x2996c9),!_0x2996c9||_0x2996c9[_0x4eebf9(0x790)]!==_0x4607fa)return console[_0x4eebf9(0x5df)](_0x4eebf9(0x73f)),_0x386439[_0x4eebf9(0x3e2)](0x191)['send'](_0x4eebf9(0x4a9));}catch(_0x55f2df){return console[_0x4eebf9(0x73d)]('Error\x20retrieving\x20instance\x20or\x20API\x20Key:',_0x55f2df),_0x386439['status'](0x191)['send'](_0x4eebf9(0x81e));}}if(!await Oe(_0xc470be))return _0x386439[_0x4eebf9(0x3e2)](0x194)[_0x4eebf9(0x4d1)](_0x4eebf9(0x379));_0x386439[_0x4eebf9(0x7a2)](_0x4eebf9(0x545),'text/event-stream'),_0x386439[_0x4eebf9(0x7a2)](_0x4eebf9(0x402),_0x4eebf9(0x459)),_0x386439['setHeader'](_0x4eebf9(0x62e),_0x4eebf9(0x260)),_0x386439[_0x4eebf9(0x31c)]();let _0x2fb686='data:\x20'+JSON[_0x4eebf9(0x79e)]({'info':_0x4eebf9(0x5b0)})+'\x0a\x0a';_0x386439[_0x4eebf9(0x647)](_0x2fb686),Si(_0xc470be,_0x579127,_0x386439,_0x158d06),_0x22325f['on'](_0x4eebf9(0x261),()=>{const _0x104254=_0x4eebf9;console[_0x104254(0x5df)](_0x104254(0x364)+_0xc470be),Mi(_0xc470be,_0x579127);});}),Le[a0_0x5ca8c7(0x25c)](a0_0x5ca8c7(0xd9),async(_0x40a3d3,_0x13a96e)=>{const _0x347911=a0_0x5ca8c7;console[_0x347911(0x5df)](_0x347911(0x144));let _0x9426f0=_0x40a3d3[_0x347911(0x4aa)][_0x347911(0x444)],_0x4394c4=_0x40a3d3[_0x347911(0x4aa)]['startID'],_0x4c1057=_0x40a3d3[_0x347911(0x551)][_0x347911(0x461)]||'',_0x3318b8=_0x40a3d3[_0x347911(0x3ec)];console[_0x347911(0x5df)](_0x347911(0x44b),_0x9426f0),console[_0x347911(0x5df)](_0x347911(0x2ca),_0x4394c4),console['log'](_0x347911(0x6d6),_0x4c1057),console[_0x347911(0x5df)](_0x347911(0x691),_0x3318b8);try{if(!await Oe(_0x9426f0))return _0x13a96e[_0x347911(0x3e2)](0x194)[_0x347911(0x4d1)](_0x347911(0x379));let _0x43b077=await _['startFlowWebhook'](_0x9426f0,_0x4394c4,_0x4c1057,_0x3318b8);_0x13a96e[_0x347911(0x4d1)](_0x43b077);}catch(_0x149798){console['error'](_0x149798),_0x13a96e[_0x347911(0x3e2)](0x1f4)[_0x347911(0x4d1)](_0x347911(0x4cc));}}),Le[a0_0x5ca8c7(0x507)](a0_0x5ca8c7(0x7db),(_0x10855b,_0x5dd8a6)=>{const _0x495c11=a0_0x5ca8c7;let _0x56793f=Ci();_0x5dd8a6[_0x495c11(0x805)](_0x56793f);})[a0_0x5ca8c7(0x507)]('/',(_0x4d2be9,_0x1181ea)=>{const _0x1fa2ee=a0_0x5ca8c7;let _0x3ef2e7=S[_0x1fa2ee(0x507)](_0x1fa2ee(0x390))[_0x1fa2ee(0x406)];if(_0x3ef2e7){let _0x515c20=encodeURIComponent(''+_0x3ef2e7);_0x1181ea['redirect'](_0x1fa2ee(0x2d8)+_0x515c20);return;}let _0x15a07a=S[_0x1fa2ee(0x507)](_0x1fa2ee(0x2ad)),_0x3fdd1c=_0x15a07a&&_0x15a07a[_0x1fa2ee(0x6fc)][_0x1fa2ee(0x42a)]('/')[0x4];if(_0x3fdd1c){let _0x24a2a7=encodeURIComponent('https://'+_0x3fdd1c);_0x1181ea[_0x1fa2ee(0x6cf)](_0x1fa2ee(0x2d8)+_0x24a2a7);}else _0x1181ea[_0x1fa2ee(0x6cf)](_0x1fa2ee(0x724));})[a0_0x5ca8c7(0x65e)]('/exit',...le,async(_0x2f31bc,_0xfa1772)=>{const _0xd05641=a0_0x5ca8c7;try{console[_0xd05641(0x5df)](_0xd05641(0x4f8)),_0xfa1772['status'](0xc8)['json']({'message':'API\x20encerrada\x20com\x20sucesso.\x20Ela\x20ser\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos'}),_0xfa1772['on']('finish',()=>process[_0xd05641(0x6e3)](0x0));}catch(_0x301e0f){console['error'](_0xd05641(0x654),_0x301e0f),_0xfa1772[_0xd05641(0x3e2)](0x1f4)['json']({'message':'Erro\x20ao\x20encerrar\x20a\x20API'});}})[a0_0x5ca8c7(0x65e)]('/config',...le,async(_0x2ffaa7,_0x2ebed9)=>{const _0x42c749=a0_0x5ca8c7;try{let _0x723c91=_0x2ffaa7['body'];await Ne['updateOne']({},{'$set':_0x723c91},{'upsert':!0x0});let _0x46e6ce=await Ne[_0x42c749(0x51f)]();_0x2ebed9[_0x42c749(0x805)](_0x46e6ce);}catch(_0x539c1a){_0x2ebed9[_0x42c749(0x3e2)](0x190)[_0x42c749(0x4d1)](_0x539c1a[_0x42c749(0x319)]);}})[a0_0x5ca8c7(0x507)](a0_0x5ca8c7(0x113),...le,async(_0x4183b6,_0x17d8e1)=>{const _0x3c3018=a0_0x5ca8c7;try{let _0x34d029=await Ne[_0x3c3018(0x51f)]();if(!_0x34d029)return _0x17d8e1[_0x3c3018(0x805)]({});_0x17d8e1['json'](_0x34d029);}catch(_0xda1930){_0x17d8e1[_0x3c3018(0x3e2)](0x1f4)[_0x3c3018(0x4d1)](_0xda1930[_0x3c3018(0x319)]);}})['use'](a0_0x5ca8c7(0x35d),new Mt(S,...le)[a0_0x5ca8c7(0x707)])[a0_0x5ca8c7(0x451)](a0_0x5ca8c7(0x32e),new Ot(...le)[a0_0x5ca8c7(0x707)])['use']('/chat',new dt(...le)['router'])[a0_0x5ca8c7(0x451)]('/group',new St(...le)[a0_0x5ca8c7(0x707)])['use'](a0_0x5ca8c7(0x572),new Dt(...le)[a0_0x5ca8c7(0x707)])[a0_0x5ca8c7(0x451)](a0_0x5ca8c7(0x754),new Pt(...le)['router']);var m=class{constructor(..._0x52b38a){const _0x431f02=a0_0x5ca8c7;throw{'status':0x190,'error':'Bad\x20Request','message':_0x52b38a[_0x431f02(0x293)]>0x0?_0x52b38a:void 0x0};}},ce=class{constructor(..._0x4acb36){const _0x6db418=a0_0x5ca8c7;throw{'status':0x191,'error':_0x6db418(0x7dd),'message':_0x4acb36[_0x6db418(0x293)]>0x0?_0x4acb36:void 0x0};}},se=class{constructor(..._0x23402b){throw{'status':0x193,'error':'Forbidden','message':_0x23402b['length']>0x0?_0x23402b:void 0x0};}},G=class{constructor(..._0x27df7d){const _0x23d90b=a0_0x5ca8c7;throw{'status':0x194,'error':_0x23d90b(0x48a),'message':_0x27df7d[_0x23d90b(0x293)]>0x0?_0x27df7d:void 0x0};}},x=class{constructor(..._0x3cb9c4){const _0x388d50=a0_0x5ca8c7;throw{'status':0x1f4,'error':'Internal\x20Server\x20Error','message':_0x3cb9c4[_0x388d50(0x293)]>0x0?_0x3cb9c4:void 0x0};}},be=require(a0_0x5ca8c7(0xf5));async function _s(_0x170125){const _0x1ae6c8=a0_0x5ca8c7;let _0x4ef0f3=new $(_s['name']),_0xb15dbb=I[_0x1ae6c8(0x16f)](),_0x416d14=_0xb15dbb['db'](S[_0x1ae6c8(0x507)](_0x1ae6c8(0x378))[_0x1ae6c8(0x3d4)]['DB_PREFIX_NAME']+_0x1ae6c8(0xcc))['collection'](_0x170125),_0x20fff6=async(_0x56dcc3,_0x569248)=>{const _0x3e00ca=_0x1ae6c8;try{return await _0xb15dbb[_0x3e00ca(0x58c)](),await _0x416d14['replaceOne']({'_id':_0x569248},JSON[_0x3e00ca(0x27e)](JSON[_0x3e00ca(0x79e)](_0x56dcc3,be[_0x3e00ca(0x2c9)][_0x3e00ca(0x4cf)])),{'upsert':!0x0});}catch{}},_0x62a5c3=async _0x1f5638=>{const _0x254ec5=_0x1ae6c8;try{await _0xb15dbb[_0x254ec5(0x58c)]();let _0x628378=await _0x416d14['findOne']({'_id':_0x1f5638}),_0x381b17=JSON[_0x254ec5(0x79e)](_0x628378);return JSON[_0x254ec5(0x27e)](_0x381b17,be[_0x254ec5(0x2c9)][_0x254ec5(0x3b3)]);}catch{}},_0x3d9fd8=async _0x4940f3=>{const _0x1f5f0e=_0x1ae6c8;try{return await _0xb15dbb['connect'](),await _0x416d14[_0x1f5f0e(0x504)]({'_id':_0x4940f3});}catch{}},_0x574736=await _0x62a5c3(_0x1ae6c8(0x7a8))||(0x0,be[_0x1ae6c8(0x807)])();return{'state':{'creds':_0x574736,'keys':{'get':async(_0x61d14e,_0x1e410a)=>{const _0x1a151e=_0x1ae6c8;let _0x168f9b={};return await Promise[_0x1a151e(0x793)](_0x1e410a[_0x1a151e(0x726)](async _0xe71d5d=>{const _0x222574=_0x1a151e;let _0x1a7209=await _0x62a5c3(_0x61d14e+'-'+_0xe71d5d);_0x61d14e===_0x222574(0x1c7)&&_0x1a7209&&(_0x1a7209=be[_0x222574(0x1a3)][_0x222574(0x6c3)][_0x222574(0x18f)][_0x222574(0x526)](_0x1a7209)),_0x168f9b[_0xe71d5d]=_0x1a7209;})),_0x168f9b;},'set':async _0x36d222=>{let _0x46eb37=[];for(let _0x1eda25 in _0x36d222)for(let _0x505707 in _0x36d222[_0x1eda25]){let _0x1f0954=_0x36d222[_0x1eda25][_0x505707],_0x34ea04=_0x1eda25+'-'+_0x505707;_0x46eb37['push'](_0x1f0954?_0x20fff6(_0x1f0954,_0x34ea04):_0x3d9fd8(_0x34ea04));}await Promise['all'](_0x46eb37);}}},'saveCreds':async()=>_0x20fff6(_0x574736,_0x1ae6c8(0x7a8))};}var ks=A(require('long')),Ls=A(require(a0_0x5ca8c7(0x52b))),Ut=require(a0_0x5ca8c7(0xf5)),Ni=require(a0_0x5ca8c7(0x610)),Ft=require(a0_0x5ca8c7(0xf5)),Lt;function Po(_0x26e40d){const _0x33ef0c=a0_0x5ca8c7;return Lt||(Lt=(0x0,Ni[_0x33ef0c(0x4cb)])({'url':_0x26e40d[_0x33ef0c(0x55d)]}),Lt[_0x33ef0c(0x58c)]()),Lt;}var me=class u{constructor(_0x401cda,_0x434103){const _0x5169e6=a0_0x5ca8c7;this[_0x5169e6(0x44a)]=_0x401cda,this[_0x5169e6(0x546)]=_0x434103,this[_0x5169e6(0x6c6)]=new $(u[_0x5169e6(0x786)]),this[_0x5169e6(0x158)]=Po(_0x401cda);}set[a0_0x5ca8c7(0x4de)](_0x168472){const _0x37b186=a0_0x5ca8c7;this[_0x37b186(0x546)]=_0x168472;}async[a0_0x5ca8c7(0x5e5)](){const _0x15c65f=a0_0x5ca8c7;try{return await this[_0x15c65f(0x158)]['sendCommand']([_0x15c65f(0x818),this[_0x15c65f(0x44a)][_0x15c65f(0x7e3)]+':*']);}catch(_0x1e9af1){this[_0x15c65f(0x6c6)][_0x15c65f(0x73d)](_0x1e9af1);}}async[a0_0x5ca8c7(0x26a)](_0x976eb6,_0x3a9b20){const _0x42f9df=a0_0x5ca8c7;try{let _0x517a39=JSON[_0x42f9df(0x79e)](_0x3a9b20,Ft[_0x42f9df(0x2c9)][_0x42f9df(0x4cf)]);return await this['client']['hSet'](this[_0x42f9df(0x44a)][_0x42f9df(0x7e3)]+':'+this[_0x42f9df(0x546)],_0x976eb6,_0x517a39);}catch(_0x367b2f){this[_0x42f9df(0x6c6)][_0x42f9df(0x73d)](_0x367b2f);}}async['getAllData'](){const _0x42b758=a0_0x5ca8c7;try{let _0x1301cf=await this['client']['hGetAll'](this[_0x42b758(0x44a)]['PREFIX_KEY']+':'+this[_0x42b758(0x546)]);if(_0x1301cf){for(let _0x3208bf in _0x1301cf)Object[_0x42b758(0x3dd)][_0x42b758(0x689)][_0x42b758(0x224)](_0x1301cf,_0x3208bf)&&(_0x1301cf[_0x3208bf]=JSON['parse'](_0x1301cf[_0x3208bf],Ft[_0x42b758(0x2c9)]['reviver']));return _0x1301cf;}}catch(_0x801e04){this['logger'][_0x42b758(0x73d)](_0x801e04);}}async[a0_0x5ca8c7(0x56a)](_0x8fb0e4){const _0x41dc13=a0_0x5ca8c7;try{let _0x4629ba=await this['client'][_0x41dc13(0x1af)](this['redisEnv'][_0x41dc13(0x7e3)]+':'+this[_0x41dc13(0x546)],_0x8fb0e4);if(_0x4629ba)return JSON[_0x41dc13(0x27e)](_0x4629ba,Ft[_0x41dc13(0x2c9)][_0x41dc13(0x3b3)]);}catch(_0x3f1714){this['logger'][_0x41dc13(0x73d)](_0x3f1714);}}async['removeData'](_0x266968){const _0x5094d9=a0_0x5ca8c7;try{return await this['client']['hDel'](this['redisEnv'][_0x5094d9(0x7e3)]+':'+this['instanceName'],_0x266968);}catch(_0x52a41f){this['logger']['error'](_0x52a41f);}}async[a0_0x5ca8c7(0x72a)](_0x4a5e6f){const _0x64bf4b=a0_0x5ca8c7;try{return await this['client'][_0x64bf4b(0x628)](_0x4a5e6f||this[_0x64bf4b(0x44a)][_0x64bf4b(0x7e3)]+':'+this[_0x64bf4b(0x546)]);}catch(_0x4ce3a0){this[_0x64bf4b(0x6c6)][_0x64bf4b(0x73d)](_0x4ce3a0);}}};async function Os(_0xbb64ad,_0x6e521e){const _0x4ceb1f=a0_0x5ca8c7;let _0x3886e8=new $(Os[_0x4ceb1f(0x786)]),_0xd75f0c=new me(_0xbb64ad,_0x6e521e),_0x44d1b8=async(_0x44e3a9,_0x1d8756)=>{const _0x3f6349=_0x4ceb1f;try{return await _0xd75f0c[_0x3f6349(0x26a)](_0x1d8756,_0x44e3a9);}catch(_0x34c034){return _0x3886e8[_0x3f6349(0x73d)]({'localError':_0x3f6349(0x26a),'error':_0x34c034});}},_0x3ec09d=async _0xb9da30=>{const _0x12eeeb=_0x4ceb1f;try{return await _0xd75f0c[_0x12eeeb(0x56a)](_0xb9da30);}catch(_0x5ccf86){_0x3886e8[_0x12eeeb(0x73d)]({'readData':_0x12eeeb(0x26a),'error':_0x5ccf86});return;}},_0x4f89d3=async _0x275146=>{const _0x18c2f2=_0x4ceb1f;try{return await _0xd75f0c['removeData'](_0x275146);}catch(_0x5cbc45){_0x3886e8[_0x18c2f2(0x73d)]({'readData':'removeData','error':_0x5cbc45});}},_0x5b9d62=await _0x3ec09d('creds')||(0x0,Ut[_0x4ceb1f(0x807)])();return{'state':{'creds':_0x5b9d62,'keys':{'get':async(_0x181671,_0x58b3ef)=>{const _0x50cd19=_0x4ceb1f;let _0x2d7cea={};return await Promise[_0x50cd19(0x793)](_0x58b3ef['map'](async _0x16e431=>{const _0x3e3233=_0x50cd19;let _0x3f36ed=await _0x3ec09d(_0x181671+'-'+_0x16e431);_0x181671===_0x3e3233(0x1c7)&&_0x3f36ed&&(_0x3f36ed=Ut[_0x3e3233(0x1a3)]['Message'][_0x3e3233(0x18f)][_0x3e3233(0x526)](_0x3f36ed)),_0x2d7cea[_0x16e431]=_0x3f36ed;})),_0x2d7cea;},'set':async _0x17b9dd=>{const _0x4b5db1=_0x4ceb1f;let _0x3cb321=[];for(let _0xcef594 in _0x17b9dd)for(let _0x17d86e in _0x17b9dd[_0xcef594]){let _0x58518e=_0x17b9dd[_0xcef594][_0x17d86e],_0x375437=_0xcef594+'-'+_0x17d86e;_0x3cb321[_0x4b5db1(0x7cb)](_0x58518e?await _0x44d1b8(_0x58518e,_0x375437):await _0x4f89d3(_0x375437));}await Promise[_0x4b5db1(0x793)](_0x3cb321);}}},'saveCreds':async()=>await _0x44d1b8(_0x5b9d62,_0x4ceb1f(0x7a8))};}function a0_0x5cfa(_0x47c3e7,_0x22c15e){const _0x1091a0=a0_0x1091();return a0_0x5cfa=function(_0x5cfacb,_0x500c9f){_0x5cfacb=_0x5cfacb-0xc7;let _0x3a2049=_0x1091a0[_0x5cfacb];return _0x3a2049;},a0_0x5cfa(_0x47c3e7,_0x22c15e);}var F=A(require('fs')),Y=require(a0_0x5ca8c7(0x69c)),qt=A(require(a0_0x5ca8c7(0x2bf))),Vt=require(a0_0x5ca8c7(0x706)),$i=require(a0_0x5ca8c7(0x3d3)),Ri=require(a0_0x5ca8c7(0x2c5)),Ii=A(require(a0_0x5ca8c7(0x72e))),$e=class extends O{constructor(_0x1a316c,_0x287ed9,_0x1d3afd){const _0x482aaf=a0_0x5ca8c7;super(_0x287ed9),this[_0x482aaf(0x1d2)]=_0x1a316c,this[_0x482aaf(0x588)]=_0x287ed9,this['dbConnection']=_0x1d3afd;}async[a0_0x5ca8c7(0x11d)](_0x3bf338,_0x5d0060){const _0x3bb043=a0_0x5ca8c7;try{if(this['dbSettings'][_0x3bb043(0x4b7)]){console['log'](_0x3bb043(0x4f0)+_0x5d0060+_0x3bb043(0x4a3),_0x3bf338);let _0x3128a3=await this[_0x3bb043(0x1d2)][_0x3bb043(0xd4)]({'_id':_0x5d0060},{'$set':_0x3bf338},{'new':!0x0,'upsert':!0x0});return console['log'](_0x3bb043(0x4ec),_0x3128a3),_0x3128a3;}}catch(_0x6bae27){throw console['error'](_0x3bb043(0x22b),_0x6bae27),_0x6bae27;}return null;}async[a0_0x5ca8c7(0x504)](_0x800c6b){const _0xdf87e6=a0_0x5ca8c7;try{let _0x728041=T(_0x800c6b[_0xdf87e6(0x73a)]);return{'deletedCount':(await this[_0xdf87e6(0x1d2)][_0xdf87e6(0x504)](_0x728041))[_0xdf87e6(0x51b)]};}catch(_0x44dbac){return{'error':_0x44dbac?.[_0xdf87e6(0x30c)]()};}}async[a0_0x5ca8c7(0x51f)](_0x56fd98){const _0x393220=a0_0x5ca8c7;try{let _0x1b5a4c=T(_0x56fd98[_0x393220(0x73a)]);return await this[_0x393220(0x1d2)][_0x393220(0x51f)](_0x1b5a4c)[_0x393220(0x38d)]();}catch{return null;}}},jt=(0x0,Ri[a0_0x5ca8c7(0x142)])($i[a0_0x5ca8c7(0x555)]),ko=S[a0_0x5ca8c7(0x507)](a0_0x5ca8c7(0x5d8)),xs=class{constructor(){const _0x55b6b=a0_0x5ca8c7;this[_0x55b6b(0x757)]=new $e(He,S),(!this[_0x55b6b(0x404)]||!this[_0x55b6b(0x681)])&&ko&&this[_0x55b6b(0x711)]()[_0x55b6b(0x775)](()=>{const _0x405afb=_0x55b6b;console[_0x405afb(0x5df)](_0x405afb(0x415)+this['ipv6Prefix']),console[_0x405afb(0x5df)](_0x405afb(0x5db)+this[_0x405afb(0x681)]);})[_0x55b6b(0x66c)](_0x1cdb81=>{const _0x13276f=_0x55b6b;console[_0x13276f(0x73d)]('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20'+_0x1cdb81[_0x13276f(0x319)]);});}async[a0_0x5ca8c7(0x711)](){const _0xbbc344=a0_0x5ca8c7;try{let {stdout:_0x298565}=await jt('ip\x20-br\x20link\x20show');console[_0xbbc344(0x5df)](_0xbbc344(0xed)+_0x298565);let _0x296d86=_0x298565[_0xbbc344(0x42a)]('\x0a')[_0xbbc344(0x726)](_0x5c66a2=>_0x5c66a2[_0xbbc344(0x42a)]('\x20')[0x0])['filter'](_0x1a4dc4=>!_0x1a4dc4[_0xbbc344(0x253)]('lo')&&!_0x1a4dc4[_0xbbc344(0x253)](_0xbbc344(0x193))&&!_0x1a4dc4['includes'](_0xbbc344(0x6d0))&&!_0x1a4dc4[_0xbbc344(0x253)]('wl')&&!_0x1a4dc4[_0xbbc344(0x253)]('@'));if(console['log'](_0xbbc344(0x6f9)+_0x296d86),_0x296d86[_0xbbc344(0x293)]===0x0)throw new Error(_0xbbc344(0x53e));this[_0xbbc344(0x681)]=_0x296d86[0x0];let {stdout:_0x49f349}=await jt(_0xbbc344(0x1ef)+this[_0xbbc344(0x681)]);console[_0xbbc344(0x5df)](_0xbbc344(0x2e9)+_0x49f349);let _0x58fcfd=_0x49f349[_0xbbc344(0x42a)]('\x0a')[_0xbbc344(0x509)](_0x19212c=>_0x19212c[_0xbbc344(0x253)](_0xbbc344(0x6b8))&&_0x19212c[_0xbbc344(0x253)]('global'));if(!_0x58fcfd)throw new Error('No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface');let _0x20e6ee=_0x58fcfd[_0xbbc344(0x33d)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x20e6ee)throw new Error(_0xbbc344(0x15d));let [_0x422ea7,_0x3ca929,_0xfbb5a7]=_0x20e6ee,_0x5ca7ae=Math['floor'](Number(_0xfbb5a7)/0x10),_0x14fc6e=Number(_0xfbb5a7)%0x10,_0x499192=_0x3ca929[_0xbbc344(0x42a)](':')[_0xbbc344(0x80c)](0x0,_0x5ca7ae)['join'](':');if(_0x14fc6e>0x0){let _0x3c5817=_0x3ca929[_0xbbc344(0x42a)](':')[_0x5ca7ae],_0x36fe17=0xffff<<0x10-_0x14fc6e&0xffff,_0xa776e4=(parseInt(_0x3c5817,0x10)&_0x36fe17)[_0xbbc344(0x30c)](0x10)['padStart'](0x4,'0');_0x499192+=':'+_0xa776e4;}this[_0xbbc344(0x404)]=_0x499192+':';}catch(_0x5400f9){console[_0xbbc344(0x73d)](_0xbbc344(0x5f0),_0x5400f9);}}async[a0_0x5ca8c7(0x5ef)](_0x33a563){const _0x3cf34c=a0_0x5ca8c7;let _0x2f2d13=_0x3cf34c(0x411)+_0x33a563+_0x3cf34c(0x11e)+this[_0x3cf34c(0x681)];try{await jt(_0x2f2d13),console['log'](_0x3cf34c(0x3d2)+_0x33a563);}catch(_0x1b0036){console[_0x3cf34c(0x73d)](_0x3cf34c(0x7e9)+_0x1b0036);}}async[a0_0x5ca8c7(0x483)](_0x2d5d9d){const _0x4f01f9=a0_0x5ca8c7;let _0x4a4238='ip\x20-6\x20addr\x20del\x20'+_0x2d5d9d+_0x4f01f9(0x11e)+this[_0x4f01f9(0x681)];try{await jt(_0x4a4238),console[_0x4f01f9(0x5df)](_0x4f01f9(0x274)+_0x2d5d9d);}catch(_0x272832){console[_0x4f01f9(0x73d)](_0x4f01f9(0x476)+_0x272832);}}[a0_0x5ca8c7(0x3e3)](){const _0x17ffc3=a0_0x5ca8c7;return _0x17ffc3(0x279)['replace'](/X/g,()=>'0123456789ABCDEF'[_0x17ffc3(0x35a)](Math['floor'](Math[_0x17ffc3(0x487)]()*0x10)));}[a0_0x5ca8c7(0x60d)](_0x2bbc28,_0xe160b9){const _0x4e78cc=a0_0x5ca8c7;let _0x53c506=_0xe160b9[_0x4e78cc(0x42a)](':');return _0x53c506[0x0]=(parseInt(_0x53c506[0x0],0x10)^0x2)['toString'](0x10)[_0x4e78cc(0x7a5)](0x2,'0'),''+_0x2bbc28+_0x53c506[0x0]+_0x53c506[0x1]+':'+_0x53c506[0x2]+'ff:fe'+_0x53c506[0x3]+':'+_0x53c506[0x4]+_0x53c506[0x5];}[a0_0x5ca8c7(0x6c2)](){const _0x175e9a=a0_0x5ca8c7;let _0x4af31e=this[_0x175e9a(0x404)];_0x4af31e[_0x175e9a(0x339)](':')||(_0x4af31e+=':');let _0x1857ff=this[_0x175e9a(0x3e3)]();return this[_0x175e9a(0x60d)](_0x4af31e,_0x1857ff);}[a0_0x5ca8c7(0x71c)](_0x2ec033){const _0x32acd8=a0_0x5ca8c7;return new RegExp(_0x32acd8(0xdd))[_0x32acd8(0x418)](_0x2ec033);}async[a0_0x5ca8c7(0x5a5)](_0x50d24f){const _0x483c0e=a0_0x5ca8c7;let _0x3cc430=[{'url':_0x483c0e(0x11a),'parse':_0x790c1=>_0x790c1['ip']},{'url':_0x483c0e(0x28a),'parse':_0x4ff61f=>_0x4ff61f['ip']},{'url':_0x483c0e(0x25e),'parse':_0x46c362=>_0x46c362[_0x483c0e(0x80a)]()},{'url':'https://v6.ident.me','parse':_0x4fbe88=>_0x4fbe88[_0x483c0e(0x80a)]()}],_0x3573c8=_0x3cc430[Math[_0x483c0e(0x76b)](Math[_0x483c0e(0x487)]()*_0x3cc430[_0x483c0e(0x293)])];try{let _0x5edd39=await Ii['default'][_0x483c0e(0x507)](_0x3573c8['url'],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x50d24f}}),_0x1112ee=_0x3573c8[_0x483c0e(0x27e)](_0x5edd39['data']);return _0x1112ee['toLowerCase']()===_0x50d24f[_0x483c0e(0x7c7)]()?(console[_0x483c0e(0x5df)](_0x483c0e(0x2ba)+_0x50d24f),!0x0):(console[_0x483c0e(0x73d)]('IP\x20mismatch:\x20configured\x20'+_0x50d24f+_0x483c0e(0x288)+_0x1112ee),!0x1);}catch(_0x3c798f){return console[_0x483c0e(0x73d)]('Error\x20testing\x20IP\x20with\x20'+_0x3573c8['url']+':\x20'+_0x3c798f['message']),!0x1;}}async[a0_0x5ca8c7(0x531)](_0x25f5df,_0x2ace00){const _0x574ccd=a0_0x5ca8c7;if(!this[_0x574ccd(0x404)]||!this[_0x574ccd(0x681)])return console[_0x574ccd(0x73d)]('IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.'),null;let _0xbdbd63;do _0xbdbd63=this['generateRandomIPv6'](),console[_0x574ccd(0x5df)](_0x574ccd(0x5a9)+_0xbdbd63);while(!await this[_0x574ccd(0x111)](_0xbdbd63));await this[_0x574ccd(0x5ef)](_0xbdbd63),console[_0x574ccd(0x5df)](_0x574ccd(0x7fb)+_0xbdbd63);let _0x41ba99={'_id':_0x25f5df+'-'+_0x2ace00,'ip':_0xbdbd63},_0x196c63=await this[_0x574ccd(0x757)][_0x574ccd(0x11d)](_0x41ba99,_0x41ba99[_0x574ccd(0x6ae)]);return console[_0x574ccd(0x5df)]('Cache\x20instance\x20update\x20result:\x20'+_0x196c63),_0xbdbd63;}async[a0_0x5ca8c7(0x111)](_0x36cd64){const _0x134b95=a0_0x5ca8c7;return this[_0x134b95(0x71c)](_0x36cd64)?!await this[_0x134b95(0x757)][_0x134b95(0x51f)]({'where':{'ip':_0x36cd64}}):!0x1;}async[a0_0x5ca8c7(0x68c)](_0x559a73,_0x10ec78){const _0x3a6f48=a0_0x5ca8c7;let _0x7ef1ec=_0x559a73+'-'+_0x10ec78,_0x434ba2=await this[_0x3a6f48(0x757)][_0x3a6f48(0x51f)]({'where':{'_id':_0x7ef1ec}});_0x434ba2&&_0x434ba2['ip']&&(await this['removeIPv6'](_0x434ba2['ip']),await this[_0x3a6f48(0x757)][_0x3a6f48(0x504)]({'where':{'_id':_0x7ef1ec}}));}},Lo=new xs(),re=Lo,Fs='Safari',ki,fe=null,Da=null,Fo=0x3,Uo=null,Ai=S[a0_0x5ca8c7(0x507)](a0_0x5ca8c7(0x166))['API_KEY']['KEY'],Ti=S[a0_0x5ca8c7(0x507)](a0_0x5ca8c7(0x5d8));async function jo(){const _0x4ccad1=a0_0x5ca8c7;let _0x1f900e=await Ne[_0x4ccad1(0x51f)]();fe=_0x1f900e?.[_0x4ccad1(0x4b4)]??null,Uo=_0x1f900e?.[_0x4ccad1(0x3cd)]??null,Fs=_0x1f900e?.[_0x4ccad1(0x49c)]??_0x4ccad1(0x7d5),ki=_0x1f900e?.[_0x4ccad1(0x23f)]??K??_0x4ccad1(0x13b);}async function Jo(){await jo();}Jo();var _i={},ue={},Re=class u{constructor(_0x5c1c0f,_0x105cbd,_0x55cb77){const _0x11dbf0=a0_0x5ca8c7;this[_0x11dbf0(0x588)]=_0x5c1c0f,this[_0x11dbf0(0x6da)]=_0x105cbd,this[_0x11dbf0(0x4b2)]=_0x55cb77,this[_0x11dbf0(0x4b3)]=null,this[_0x11dbf0(0x6c6)]=new $(u[_0x11dbf0(0x786)]),this[_0x11dbf0(0x444)]={},this[_0x11dbf0(0x1f6)]={},this[_0x11dbf0(0x65c)]={'state':_0x11dbf0(0x261)},this[_0x11dbf0(0xfc)]=(0x0,j[_0x11dbf0(0x363)])(de,_0x11dbf0(0x27a)),this[_0x11dbf0(0x4e8)]=new Ls[(_0x11dbf0(0x180))](),this[_0x11dbf0(0x52e)]=new Ls[(_0x11dbf0(0x180))](),this[_0x11dbf0(0x67a)]=!0x1,this[_0x11dbf0(0x542)]={'status.instance':'/wa-connection-update','connection.update':_0x11dbf0(0x4c5),'qrcode.updated':'/wa-qrcode','messages.upsert':'/wa-message','send.message':_0x11dbf0(0x52d),'messages.update':_0x11dbf0(0x59c),'group.upsert':_0x11dbf0(0x54c),'group.update':_0x11dbf0(0x54c),'group-participants.update':_0x11dbf0(0x54c),'messages.set':_0x11dbf0(0x1e6),'contacts.set':'/wa-contacts','contacts.upsert':_0x11dbf0(0x570),'contacts.update':'/wa-contacts','presence.update':'/wa-presence','chats.set':'/wa-chats','chats.update':'/wa-chats','chats.upsert':'/wa-chats','chats.delete':_0x11dbf0(0x3a4)},this['reconnectAttempts']=0x0,this[_0x11dbf0(0x29a)]=[],this[_0x11dbf0(0x583)]=0xea60,this['isRunning']=!0x1,this['chatHandle']={'chats.upsert':async(_0x2786dd,_0x278411)=>{const _0x230789=_0x11dbf0;let _0x395db3=[];for await(let _0x555b61 of _0x2786dd)_0x395db3['push']({'_id':_0x555b61['id'],'owner':this['instance']['wuid'],'group':_0x555b61['id']['endsWith'](_0x230789(0x365)),'name':_0x555b61[_0x230789(0x786)]||_0x555b61[_0x230789(0x502)]||null,'contactname':null,'lastmsg':_0x555b61['conversationTimestamp']&&_0x555b61[_0x230789(0x5a8)]['toString']()['length']<0xd?_0x555b61[_0x230789(0x5a8)]*0x3e8:_0x555b61[_0x230789(0x5a8)]||null,'archived':_0x555b61['archived']||!0x1,'unreadcount':_0x555b61[_0x230789(0x3f9)]||0x0,'ephemeralExpiration':_0x555b61[_0x230789(0x2b2)]||0x0});this['sendDataWebhook'](_0x230789(0x355),_0x395db3);},'chats.update':async(_0x5fcf51,_0x13a8c0)=>{const _0x421470=_0x11dbf0;for(let _0x4d7750 of _0x5fcf51){let _0x477850={'_id':_0x4d7750['id'],'owner':this[_0x421470(0x444)]['wuid'],'archived':_0x4d7750[_0x421470(0x4be)],'muteEndTime':_0x4d7750[_0x421470(0x605)],'ephemeralExpiration':_0x4d7750[_0x421470(0x2b2)]},_0x550681=!0x1,_0x482f28={};_0x477850['archived']!=null&&(this['logger'][_0x421470(0x39b)](this[_0x421470(0x546)]+'\x20('+this[_0x421470(0x444)][_0x421470(0x638)]+_0x421470(0x5a2)+_0x4d7750['id']+_0x421470(0x1e4)+_0x4d7750[_0x421470(0x4be)]),_0x550681=!0x0,_0x482f28[_0x421470(0x4be)]=_0x4d7750[_0x421470(0x4be)]),_0x421470(0x605)in _0x4d7750&&(this[_0x421470(0x6c6)][_0x421470(0x39b)](this[_0x421470(0x546)]+'\x20('+this[_0x421470(0x444)][_0x421470(0x638)]+'):\x20teve\x20mudanas\x20chat.muteEndTime:\x20'+_0x4d7750['id']+_0x421470(0x1e4)+(_0x4d7750[_0x421470(0x605)]??'0')),_0x550681=!0x0,_0x482f28[_0x421470(0x605)]=_0x4d7750[_0x421470(0x605)]??0x0),_0x421470(0x2b2)in _0x4d7750&&(this[_0x421470(0x6c6)]['verbose'](this[_0x421470(0x546)]+'\x20('+this['instance'][_0x421470(0x638)]+_0x421470(0x776)+_0x4d7750['id']+'\x20:\x20'+(_0x4d7750[_0x421470(0x2b2)]!==void 0x0?_0x4d7750['ephemeralExpiration']:_0x421470(0x74a))),_0x482f28[_0x421470(0x2b2)]=_0x4d7750[_0x421470(0x2b2)]===null?0x0:_0x4d7750[_0x421470(0x2b2)],_0x550681=!0x0);let _0x22c3b5;_0x550681&&(_0x22c3b5=await this[_0x421470(0x4b2)][_0x421470(0x5f1)][_0x421470(0x127)]({'where':{'_id':_0x4d7750['id']}},_0x482f28,this[_0x421470(0x444)][_0x421470(0x638)])),_0x22c3b5&&q(this[_0x421470(0x546)],_0x421470(0x2ea),{'chat':_0x22c3b5});}},'chats.delete':async _0x35dcff=>{const _0x1bbc57=_0x11dbf0;for(let _0x365c8b of _0x35dcff)if(_0x365c8b[_0x1bbc57(0x339)]('@g.us')){await this[_0x1bbc57(0x4b2)][_0x1bbc57(0x5f1)][_0x1bbc57(0x5e3)]({'where':{'_id':_0x365c8b}},this[_0x1bbc57(0x444)][_0x1bbc57(0x638)]);let _0x3d164e={'where':{'key':{'remoteJid':_0x365c8b}}};await this['repository'][_0x1bbc57(0x319)][_0x1bbc57(0x5e3)](_0x3d164e,this[_0x1bbc57(0x444)][_0x1bbc57(0x638)]);}else{await this['repository'][_0x1bbc57(0x5f1)]['updateOne']({'where':{'_id':_0x365c8b}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x1bbc57(0x444)][_0x1bbc57(0x638)]);let _0x98647b={'where':{'key':{'remoteJid':_0x365c8b}}};await this[_0x1bbc57(0x4b2)][_0x1bbc57(0x319)]['delete'](_0x98647b,this[_0x1bbc57(0x444)][_0x1bbc57(0x638)]);}this[_0x1bbc57(0x3ce)](_0x1bbc57(0x1cd),[..._0x35dcff]);}},this[_0x11dbf0(0x6ef)]={'contacts.upsert':async(_0x3658b7,_0x349ea0)=>{const _0x51add6=_0x11dbf0;let _0x14a435=await this[_0x51add6(0x4b2)]['contact']['find']({'where':{}},this[_0x51add6(0x444)]['wuid']),_0x38ed1c=[];for await(let _0x1afaaf of _0x3658b7)_0x14a435[_0x51add6(0x509)](_0x1d1766=>_0x1d1766['_id']===_0x1afaaf['id'])||_0x38ed1c[_0x51add6(0x7cb)]({'_id':_0x1afaaf['id'],'pushName':_0x1afaaf?.[_0x51add6(0x786)]||_0x1afaaf?.[_0x51add6(0x151)],'owner':this['instance'][_0x51add6(0x638)]});this['sendDataWebhook'](_0x51add6(0x29b),_0x38ed1c),await this[_0x51add6(0x4b2)][_0x51add6(0x51e)]['insert'](_0x38ed1c);},'contacts.update':async(_0x2c4d82,_0x3ceef5)=>{const _0x1a0526=_0x11dbf0;let _0x48bf9c=[];for await(let _0x2c2201 of _0x2c4d82)_0x48bf9c[_0x1a0526(0x7cb)]({'_id':_0x2c2201['id'],'pushName':_0x2c2201?.[_0x1a0526(0x786)]??_0x2c2201?.[_0x1a0526(0x151)],'owner':this[_0x1a0526(0x444)][_0x1a0526(0x638)]});this['sendDataWebhook'](_0x1a0526(0x3ab),_0x48bf9c);}},this['messageHandle']={'messaging-history.set':async({messages:_0x2fb9b8,chats:_0x2c1263,isLatest:_0x40c44b},_0xeec8e3)=>{const _0x39f84a=_0x11dbf0;if(_0x40c44b){let _0x5362d1=await Promise[_0x39f84a(0x793)](_0x2c1263[_0x39f84a(0x726)](async _0x35074e=>({'_id':_0x35074e['id'],'owner':this[_0x39f84a(0x444)][_0x39f84a(0x638)],'group':_0x35074e['id']['endsWith']('@g.us'),'name':_0x35074e[_0x39f84a(0x786)]||_0x35074e[_0x39f84a(0x502)]||_0x35074e['username']||null,'contactname':null,'lastmsg':_0x35074e[_0x39f84a(0x5a8)]&&_0x35074e['conversationTimestamp'][_0x39f84a(0x30c)]()[_0x39f84a(0x293)]<0xd?_0x35074e['conversationTimestamp']*0x3e8:_0x35074e['conversationTimestamp']||null,'archived':_0x35074e['archived']||!0x1,'unreadcount':_0x35074e['unreadCount']||0x0,'ephemeralExpiration':_0x35074e[_0x39f84a(0x2b2)]||0x0,'muteEndTime':_0x35074e[_0x39f84a(0x605)]||0x0})));this['sendDataWebhook'](_0x39f84a(0x1a9),_0x5362d1),await this[_0x39f84a(0x71d)](_0x5362d1,_0xeec8e3);}let _0x2adf80=[],_0x1641bb=Date[_0x39f84a(0x494)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0xd7a2e1]of Object[_0x39f84a(0x1ce)](_0x2fb9b8)){if(_0xd7a2e1['message']?.[_0x39f84a(0x258)]||_0xd7a2e1[_0x39f84a(0x319)]?.[_0x39f84a(0x11b)]||!_0xd7a2e1['message']||_0xd7a2e1[_0x39f84a(0x3c3)][_0x39f84a(0x461)]===_0x39f84a(0x59d)||(ks[_0x39f84a(0x180)][_0x39f84a(0x249)](_0xd7a2e1?.['messageTimestamp'])&&(_0xd7a2e1['messageTimestamp']=_0xd7a2e1[_0x39f84a(0x4e1)]?.[_0x39f84a(0x696)]()),_0xd7a2e1['messageTimestamp']&&_0xd7a2e1[_0x39f84a(0x4e1)]['toString']()[_0x39f84a(0x293)]<0xd&&(_0xd7a2e1[_0x39f84a(0x4e1)]=_0xd7a2e1['messageTimestamp']*0x3e8),_0xd7a2e1['messageTimestamp']<_0x1641bb))continue;let _0x4ea98a=(0x0,w[_0x39f84a(0x184)])(_0xd7a2e1[_0x39f84a(0x319)]),_0x272ff9=(0x0,w[_0x39f84a(0x2b5)])(_0x4ea98a),{message_normalized:_0x390c73}=this[_0x39f84a(0x501)](_0x4ea98a,_0x272ff9,null);Object['keys'](_0x390c73)[_0x39f84a(0x293)]>0x0&&_0x2adf80[_0x39f84a(0x7cb)]({'_id':_0xd7a2e1[_0x39f84a(0x3c3)]['id'],'key':_0xd7a2e1[_0x39f84a(0x3c3)],'pushName':_0xd7a2e1[_0x39f84a(0x659)],'participant':_0xd7a2e1[_0x39f84a(0x4bc)],'message':_0x4ea98a,'messageType':_0x272ff9,'message_normalized':{'key':_0xd7a2e1[_0x39f84a(0x3c3)],'pushName':_0xd7a2e1[_0x39f84a(0x659)],'messageTimestamp':_0xd7a2e1['messageTimestamp'],..._0x390c73},'messageTimestamp':_0xd7a2e1[_0x39f84a(0x4e1)],'owner':this[_0x39f84a(0x444)][_0x39f84a(0x638)]});}_0xeec8e3[_0x39f84a(0x4b7)]&&_0x2adf80[_0x39f84a(0x293)]>0x0&&(this[_0x39f84a(0x6c6)][_0x39f84a(0x39b)](this[_0x39f84a(0x546)]+'\x20('+this[_0x39f84a(0x444)]['wuid']+'):\x20'+_0x2adf80[_0x39f84a(0x293)]+'\x20mensagens\x20de\x20'+this[_0x39f84a(0x444)]['wuid']+'\x20inseridas\x20no\x20banco\x20de\x20dados...'),await this['repository']['message'][_0x39f84a(0x29c)]([..._0x2adf80],this['instance']['wuid'])),this[_0x39f84a(0x3ce)](_0x39f84a(0x5f5),[..._0x2adf80]),_0x2fb9b8=void 0x0;},'messages.upsert':async({messages:_0x17440b,type:_0x3dadcb},_0xccb5c8)=>{const _0x5eedd6=_0x11dbf0;for(let _0x54ded3 of _0x17440b){if(this[_0x5eedd6(0x1f6)]?.['groups_ignore']&&_0x54ded3['key'][_0x5eedd6(0x461)][_0x5eedd6(0x253)](_0x5eedd6(0x365))){this[_0x5eedd6(0x6c6)][_0x5eedd6(0x39b)](this[_0x5eedd6(0x546)]+'\x20('+this[_0x5eedd6(0x444)][_0x5eedd6(0x638)]+_0x5eedd6(0x735));return;}let _0x156498=_0x54ded3[_0x5eedd6(0x3c3)]['id'],_0x40a54e=_0x54ded3[_0x5eedd6(0x148)]===0x2,_0x28c485=0xb;if(_0x40a54e){if(ue[_0x156498]||(ue[_0x156498]=0x0),ue[_0x156498]++,this['logger'][_0x5eedd6(0x73d)](this[_0x5eedd6(0x546)]+'\x20('+this[_0x5eedd6(0x444)][_0x5eedd6(0x638)]+'):\x20[RETRY]\x20Tentando\x20recuperar\x20mensagem\x20de\x20remotejid='+_0x54ded3[_0x5eedd6(0x3c3)][_0x5eedd6(0x461)]+_0x5eedd6(0x41c)+_0x156498+':\x20'+ue[_0x156498]+'/'+_0x28c485),ue[_0x156498]>=_0x28c485){this[_0x5eedd6(0x6c6)][_0x5eedd6(0x73d)](this[_0x5eedd6(0x546)]+'\x20('+this['instance'][_0x5eedd6(0x638)]+_0x5eedd6(0x222)+_0x54ded3[_0x5eedd6(0x3c3)][_0x5eedd6(0x461)]+'\x20e\x20ID='+_0x156498+'.');let _0xcbe29={'key':{..._0x54ded3[_0x5eedd6(0x3c3)]},'message':{'conversation':_0x5eedd6(0x741)+_0x156498+_0x5eedd6(0x5bd)}};this[_0x5eedd6(0x158)]['ev'][_0x5eedd6(0x5ca)](_0x5eedd6(0x469),{'messages':[_0xcbe29],'type':'notify'}),delete ue[_0x156498];}}else ue[_0x156498]&&(this['logger'][_0x5eedd6(0x7f1)]('[messages.upsert]\x20[SUCESSO]\x20Mensagem\x20descriptografada\x20depois\x20'+ue[_0x156498]+_0x5eedd6(0x268)+_0x54ded3[_0x5eedd6(0x3c3)][_0x5eedd6(0x461)]+'\x20e\x20ID='+_0x156498),delete ue[_0x156498]);if(_0x3dadcb!==_0x5eedd6(0x4b6)||!_0x54ded3?.[_0x5eedd6(0x319)]||_0x54ded3[_0x5eedd6(0x319)]?.[_0x5eedd6(0x258)]||_0x54ded3[_0x5eedd6(0x319)]['senderKeyDistributionMessage']||_0x54ded3[_0x5eedd6(0x3c3)][_0x5eedd6(0x461)]===_0x5eedd6(0x59d))return;let _0x24101d=null,_0x4302dc=null;try{_0x24101d=await this[_0x5eedd6(0x233)](_0x54ded3),_0x4302dc=_0x24101d?_0x24101d[_0x5eedd6(0x363)](','):null;}catch(_0x37b6fe){this[_0x5eedd6(0x6c6)][_0x5eedd6(0x39b)](this['instanceName']+'\x20('+this[_0x5eedd6(0x444)][_0x5eedd6(0x638)]+'):\x20'+(_0x37b6fe instanceof Error?_0x37b6fe[_0x5eedd6(0x319)]:JSON[_0x5eedd6(0x79e)](_0x37b6fe,null,0x2))),_0x4302dc=_0x5eedd6(0x6c1);}this[_0x5eedd6(0x158)][_0x5eedd6(0x6d9)](_0x5eedd6(0x6d4)),ks[_0x5eedd6(0x180)][_0x5eedd6(0x249)](_0x54ded3['messageTimestamp'])&&(_0x54ded3['messageTimestamp']=_0x54ded3[_0x5eedd6(0x4e1)]?.['toNumber']()),_0x54ded3['messageTimestamp']&&_0x54ded3[_0x5eedd6(0x4e1)][_0x5eedd6(0x30c)]()[_0x5eedd6(0x293)]<0xd&&(_0x54ded3[_0x5eedd6(0x4e1)]=_0x54ded3['messageTimestamp']*0x3e8);let _0x2ebbdc=_0x54ded3[_0x5eedd6(0x319)],_0x13c2f8=(0x0,w[_0x5eedd6(0x184)])(_0x2ebbdc),_0x19345b=(0x0,w['getContentType'])(_0x13c2f8),{messageContent:_0x3ab8e0,message_normalized:_0x2dff34}=this['normalizeMessage'](_0x13c2f8,_0x19345b,_0x4302dc);_0x19345b===_0x5eedd6(0x258)&&_0x3ab8e0?.[_0x5eedd6(0x65f)]&&(_0x19345b=_0x5eedd6(0x65f));let _0x1223d9,_0x26eea2=_0x54ded3[_0x5eedd6(0x3c3)][_0x5eedd6(0x461)][_0x5eedd6(0x339)](_0x5eedd6(0x365));if(_0x54ded3[_0x5eedd6(0x3c3)][_0x5eedd6(0x79a)])_0x1223d9=this['instance']['profilePictureUrl'];else{let _0x6aa290=_0x26eea2?_0x54ded3[_0x5eedd6(0x3c3)][_0x5eedd6(0x4bc)]:_0x54ded3[_0x5eedd6(0x3c3)][_0x5eedd6(0x461)];_0x1223d9=(await this[_0x5eedd6(0x2e3)](_0x6aa290,_0x54ded3[_0x5eedd6(0x659)],!0x1))[_0x5eedd6(0x3e0)][_0x5eedd6(0x601)];}let _0x203c99={'_id':_0x54ded3[_0x5eedd6(0x3c3)]['id'],'key':_0x54ded3[_0x5eedd6(0x3c3)],'isGroup':_0x26eea2,'profilePictureUrl':_0x1223d9,'pushName':_0x54ded3[_0x5eedd6(0x659)],'message':_0x13c2f8,'messageType':_0x19345b,'message_normalized':{'key':_0x54ded3[_0x5eedd6(0x3c3)],'pushName':_0x54ded3[_0x5eedd6(0x659)],'messageTimestamp':_0x54ded3['messageTimestamp'],'source':(0x0,w[_0x5eedd6(0x788)])(_0x54ded3[_0x5eedd6(0x3c3)]['id']),..._0x2dff34},'messageTimestamp':_0x54ded3[_0x5eedd6(0x4e1)],'owner':this['instance'][_0x5eedd6(0x638)],'source':(0x0,w[_0x5eedd6(0x788)])(_0x54ded3['key']['id']),'expiration':_0x3ab8e0?.[_0x5eedd6(0x7b3)]?.[_0x5eedd6(0x557)]||0x0};_0x3ab8e0||(this[_0x5eedd6(0x6c6)][_0x5eedd6(0x73d)](_0x5eedd6(0x3eb)),this[_0x5eedd6(0x6c6)][_0x5eedd6(0x73d)](_0x203c99)),this[_0x5eedd6(0x6c6)][_0x5eedd6(0x5df)](this[_0x5eedd6(0x546)]+'\x20('+this[_0x5eedd6(0x444)][_0x5eedd6(0x638)]+_0x5eedd6(0x17a)+(_0x203c99[_0x5eedd6(0x3c3)]?.[_0x5eedd6(0x79a)]?_0x5eedd6(0x687):_0x5eedd6(0x393))+'\x20['+_0x203c99[_0x5eedd6(0x3c3)]?.['remoteJid']['replace'](_0x5eedd6(0x505),'')+_0x5eedd6(0x81f)+_0x203c99[_0x5eedd6(0x30e)]+')'),_0x203c99[_0x5eedd6(0x179)]?.[_0x5eedd6(0x67e)]&&this['logger'][_0x5eedd6(0x5df)](_0x54ded3['key']['id']+':\x20'+_0x203c99[_0x5eedd6(0x179)]?.['text']),await this['repository']['message'][_0x5eedd6(0x29c)]([_0x203c99],this[_0x5eedd6(0x444)][_0x5eedd6(0x638)]),this[_0x5eedd6(0x3ce)](_0x5eedd6(0x469),_0x203c99),q(this[_0x5eedd6(0x546)],'messages',{'message':_0x203c99}),_0x54ded3[_0x5eedd6(0x3c3)][_0x5eedd6(0x461)]!==_0x5eedd6(0x59d)&&await this['updateChatWithMessage'](_0xccb5c8,_0x203c99,'MESSAGES_UPSERT');}},'messages.update':async(_0x369a38,_0x506c0f)=>{const _0x6eb796=_0x11dbf0;let _0x5c4d56={0x0:_0x6eb796(0x4c6),0x1:_0x6eb796(0x4b9),0x2:'SERVER_ACK',0x3:'DELIVERY_ACK',0x4:'READ',0x5:'PLAYED'};for await(let {key:_0x3b42cd,update:_0x11d6fe}of _0x369a38){if(this[_0x6eb796(0x1f6)]?.[_0x6eb796(0x513)]&&_0x3b42cd[_0x6eb796(0x461)][_0x6eb796(0x253)](_0x6eb796(0x365))){this[_0x6eb796(0x6c6)][_0x6eb796(0x39b)](this[_0x6eb796(0x546)]+'\x20('+this[_0x6eb796(0x444)][_0x6eb796(0x638)]+_0x6eb796(0x511));return;}if(_0x3b42cd[_0x6eb796(0x461)]!==_0x6eb796(0x59d)){let _0x47994d=Date[_0x6eb796(0x494)](),_0x462e03;_0x11d6fe[_0x6eb796(0x319)]===null&&_0x11d6fe[_0x6eb796(0x3e2)]===void 0x0?_0x462e03=_0x6eb796(0x5c7):_0x462e03=_0x5c4d56[_0x11d6fe[_0x6eb796(0x3e2)]];let _0x1e4f5c=_0x3b42cd[_0x6eb796(0x461)]['replace'](/:\d{1,2}@/g,'@'),_0x45a72b={..._0x3b42cd,'remoteJid':_0x1e4f5c,'status':_0x462e03,'datetime':_0x47994d,'owner':this[_0x6eb796(0x444)][_0x6eb796(0x638)]};this[_0x6eb796(0x3ce)](_0x6eb796(0x26e),_0x45a72b),await this[_0x6eb796(0x176)](_0x3b42cd,_0x45a72b);}}},'labels.association':async({type:_0x53bbe8,association:_0x5b889f})=>{const _0x1d3db5=_0x11dbf0;if(_0x5b889f[_0x1d3db5(0x573)]===_0x1d3db5(0x4c3)){let _0x42a44e,_0x51abd4=0x0;for(;!_0x42a44e&&_0x51abd4<this[_0x1d3db5(0x3f2)];)_0x42a44e=await this['repository'][_0x1d3db5(0x5f1)]['findOne']({'where':{'_id':_0x5b889f[_0x1d3db5(0x6b5)]}},this[_0x1d3db5(0x444)]['wuid']),_0x42a44e||(_0x51abd4++,this[_0x1d3db5(0x6c6)][_0x1d3db5(0x611)](this['instanceName']+'\x20('+this[_0x1d3db5(0x444)][_0x1d3db5(0x638)]+'):\x20Chat\x20'+_0x5b889f[_0x1d3db5(0x6b5)]+_0x1d3db5(0x7f9)+this[_0x1d3db5(0x5a4)]+_0x1d3db5(0x27d)+_0x51abd4+'/'+this[_0x1d3db5(0x3f2)]+')'),await this[_0x1d3db5(0x2b8)](this[_0x1d3db5(0x5a4)]));if(!_0x42a44e){this[_0x1d3db5(0x6c6)][_0x1d3db5(0x73d)](_0x1d3db5(0x12b)+_0x5b889f[_0x1d3db5(0x6b5)]+_0x1d3db5(0x1be)+this[_0x1d3db5(0x3f2)]+_0x1d3db5(0x32a));return;}switch(_0x53bbe8){case _0x1d3db5(0x6ff):console[_0x1d3db5(0x5df)](_0x5b889f),await this[_0x1d3db5(0x4b2)][_0x1d3db5(0x5f1)]['updateOne']({'where':{'_id':_0x5b889f[_0x1d3db5(0x6b5)]}},{'leadInfo.etiquetas':_0x5b889f[_0x1d3db5(0x3d5)]},this[_0x1d3db5(0x444)][_0x1d3db5(0x638)],void 0x0,_0x1d3db5(0x508));break;case _0x1d3db5(0x686):console[_0x1d3db5(0x5df)](_0x5b889f),await this['repository'][_0x1d3db5(0x5f1)][_0x1d3db5(0x127)]({'where':{'_id':_0x5b889f[_0x1d3db5(0x6b5)]}},{'leadInfo.etiquetas':_0x5b889f[_0x1d3db5(0x3d5)]},this[_0x1d3db5(0x444)]['wuid'],void 0x0,_0x1d3db5(0x26c));break;default:this[_0x1d3db5(0x6c6)][_0x1d3db5(0x73d)](_0x1d3db5(0x7b0)+_0x53bbe8+']');}}},'labels.edit':async _0x27e7a9=>{const _0x17f638=_0x11dbf0;if(!_0x27e7a9||!_0x27e7a9['id']){this['logger'][_0x17f638(0x73d)](_0x17f638(0x4ad));return;}if(!_0x27e7a9[_0x17f638(0x228)]){let _0x1da112=[_0x17f638(0x4df),'#64c4ff','#fed428',_0x17f638(0x716),_0x17f638(0x670),_0x17f638(0x6b1),_0x17f638(0xe0),_0x17f638(0x3f3),'#6f7bcf',_0x17f638(0x7d1),'#01d0e2','#ffc5c7','#92ceac',_0x17f638(0x43a),'#00a1f2',_0x17f638(0x6e6),_0x17f638(0x2da),_0x17f638(0x734),_0x17f638(0x34e),_0x17f638(0x30f)],_0x551777;typeof _0x27e7a9['color']==_0x17f638(0x209)&&_0x27e7a9['color']>=0x0&&_0x27e7a9[_0x17f638(0x637)]<_0x1da112[_0x17f638(0x293)]?_0x551777=_0x1da112[_0x27e7a9['color']]:(this['logger'][_0x17f638(0x73d)](_0x17f638(0x341)+_0x27e7a9[_0x17f638(0x637)]),_0x551777=_0x17f638(0x156));let _0x5f3010={'_id':_0x27e7a9['id'],'colorHex':_0x551777,'color':_0x27e7a9?.['color'],'name':_0x27e7a9?.['name'],'owner':this[_0x17f638(0x444)][_0x17f638(0x638)]};await this[_0x17f638(0x4b2)][_0x17f638(0x6a2)]['updateOne']({'where':{'_id':_0x27e7a9['id']}},_0x5f3010,this[_0x17f638(0x444)][_0x17f638(0x638)]),this[_0x17f638(0x6c6)]['info'](this[_0x17f638(0x546)]+'\x20('+this['instance'][_0x17f638(0x638)]+_0x17f638(0x5d0)+_0x27e7a9);}_0x27e7a9['deleted']&&(await this[_0x17f638(0x4b2)][_0x17f638(0x6a2)][_0x17f638(0x5e3)]({'where':{'_id':_0x27e7a9['id']}},this[_0x17f638(0x444)][_0x17f638(0x638)]),this[_0x17f638(0x6c6)][_0x17f638(0x611)](_0x17f638(0x68e)+_0x27e7a9['id']));}},this[_0x11dbf0(0x6d7)]={'groups.upsert':async _0x5a3d51=>{const _0x22ef8a=_0x11dbf0;this[_0x22ef8a(0x1f6)]?.['groups_ignore']||this[_0x22ef8a(0x3ce)]('groups.upsert',_0x5a3d51);for(let _0x4ab975 of _0x5a3d51)await this[_0x22ef8a(0x225)](_0x4ab975);},'groups.update':async _0x3a02ea=>{const _0x23ed8a=_0x11dbf0;this['localWebhook']?.[_0x23ed8a(0x513)]||this['sendDataWebhook'](_0x23ed8a(0x440),_0x3a02ea);for(let _0x52f822 of _0x3a02ea)await this[_0x23ed8a(0x225)](_0x52f822);},'group-participants.update':async _0x45b3c0=>{const _0x4eb6cc=_0x11dbf0;this[_0x4eb6cc(0x1f6)]?.[_0x4eb6cc(0x513)]||this[_0x4eb6cc(0x3ce)](_0x4eb6cc(0x27f),_0x45b3c0),await this[_0x4eb6cc(0x2fa)](_0x45b3c0);}},this[_0x11dbf0(0x3f2)]=0x5,this['delayChatLabel_RETRY_DELAY_MS']=0x1388,this[_0x11dbf0(0x233)]=async _0x451cae=>{const _0x599b92=_0x11dbf0;if(_0x451cae[_0x599b92(0x319)]?.['pollUpdateMessage']){let _0x5984ba=await this[_0x599b92(0x75d)](_0x451cae['message'][_0x599b92(0x2aa)][_0x599b92(0x780)],!0x0);if(_0x5984ba){let _0x31351b=_0x5984ba[_0x599b92(0x3c3)][_0x599b92(0x79a)]?this['instance'][_0x599b92(0x638)]+_0x599b92(0x505):_0x5984ba[_0x599b92(0x3c3)][_0x599b92(0x4bc)]||_0x5984ba[_0x599b92(0x3c3)][_0x599b92(0x461)],_0x4ce4e9=_0x5984ba['key']['id'],_0x50443a=_0x5984ba[_0x599b92(0x319)],_0x44a987=Buffer[_0x599b92(0x298)](_0x50443a[_0x599b92(0x7c9)][_0x599b92(0x7e8)][_0x599b92(0x30c)]('hex'),_0x599b92(0x585)),_0x54460e=(0x0,w[_0x599b92(0x236)])(_0x451cae[_0x599b92(0x319)][_0x599b92(0x2aa)][_0x599b92(0x7d8)],{'pollCreatorJid':_0x31351b,'pollMsgId':_0x4ce4e9,'pollEncKey':_0x44a987,'voterJid':_0x451cae['key'][_0x599b92(0x79a)]?this['instance']['wuid']+_0x599b92(0x505):_0x451cae['key'][_0x599b92(0x461)][_0x599b92(0x339)](_0x599b92(0x795))?_0x451cae[_0x599b92(0x3c3)][_0x599b92(0x4bc)]:_0x451cae[_0x599b92(0x3c3)][_0x599b92(0x461)]}),_0x3c2208=[],_0x600dae=_0x54460e['selectedOptions']['map'](_0x204824=>Buffer[_0x599b92(0x298)](_0x204824)[_0x599b92(0x30c)](_0x599b92(0x585)));for(let {optionName:_0x4eb9a3}of _0x50443a['pollCreationMessage']?.[_0x599b92(0x1bb)]||_0x50443a['pollCreationMessageV3']?.[_0x599b92(0x1bb)]||_0x50443a[_0x599b92(0x369)]?.[_0x599b92(0x1bb)])_0x600dae[_0x599b92(0x2fc)]((0x0,w[_0x599b92(0x316)])(Buffer[_0x599b92(0x298)](_0x4eb9a3))['toString'](_0x599b92(0x585)))>-0x1&&_0x3c2208['push'](_0x4eb9a3);return _0x3c2208;}}return null;},this[_0x11dbf0(0x501)]=(_0x2eb276,_0x2b8988,_0x2b2a69)=>{const _0x54858=_0x11dbf0;try{let _0x539fc2=_0x2eb276?(0x0,w[_0x54858(0x745)])(_0x2eb276)[_0x2b8988]:void 0x0,_0x13453c={},_0x579b67=null,_0x21e137=null,_0x1a118e=null;_0x2b8988===_0x54858(0x258)&&_0x539fc2?.[_0x54858(0x65f)]&&(_0x2b8988=(0x0,w[_0x54858(0x2b5)])(_0x539fc2[_0x54858(0x65f)]),_0x579b67=_0x2eb276['protocolMessage'][_0x54858(0x3c3)]['id'],_0x539fc2=_0x2eb276[_0x54858(0x258)][_0x54858(0x65f)][_0x2b8988]),_0x2eb276[_0x2b8988]?.[_0x54858(0x7b3)]?.[_0x54858(0x62d)]&&_0x2eb276[_0x2b8988]?.[_0x54858(0x7b3)]?.['quotedMessage']&&(_0x21e137=_0x2eb276[_0x2b8988][_0x54858(0x7b3)]['stanzaId']),_0x2eb276[_0x54858(0x231)]&&(_0x1a118e=_0x2eb276[_0x54858(0x231)][_0x54858(0x3c3)]['id']);let _0x2b0991;if(_0x539fc2&&typeof _0x539fc2=='object'&&_0x54858(0x780)in _0x539fc2&&({pollCreationMessageKey:_0x2b0991}=_0x539fc2),_0x2b8988===_0x54858(0x23a)||_0x2b8988===_0x54858(0x369)||_0x2b8988===_0x54858(0x6a6)){let _0x3d4f17=_0x539fc2['options'][_0x54858(0x726)](_0x55c97f=>_0x55c97f[_0x54858(0x7be)])[_0x54858(0x363)]('|');_0x13453c[_0x54858(0x32f)]=_0x3d4f17;}let _0x182378='';if(_0x539fc2&&(_0x182378+=_0x539fc2[_0x54858(0x786)]?_0x539fc2[_0x54858(0x786)]:'',_0x182378+=_0x539fc2['caption']?'\x20'+_0x539fc2[_0x54858(0x204)]:'',_0x182378+=_0x539fc2[_0x54858(0x642)]?'\x20'+_0x539fc2[_0x54858(0x642)]:'',_0x182378+=_0x539fc2[_0x54858(0x502)]?'\x20'+_0x539fc2[_0x54858(0x502)]:''),_0x2b8988===_0x54858(0x5e6)){_0x182378=(_0x539fc2['title']||'')+'\x0a'+(_0x539fc2[_0x54858(0x134)]||'')+'\x0a'+(_0x539fc2[_0x54858(0x55a)]||'');let _0x195852=this[_0x54858(0x301)](_0x539fc2[_0x54858(0x188)]);_0x13453c['convertedOptions']=_0x195852;}if(_0x2b8988===_0x54858(0x1b7)&&(_0x2b2a69=_0x539fc2[_0x54858(0x401)]),_0x539fc2&&_0x539fc2[_0x54858(0x36b)]){let _0xb56789=this[_0x54858(0x51a)](JSON[_0x54858(0x79e)](_0x539fc2[_0x54858(0x36b)],null,0x2));_0x182378=_0x182378+'\x0a'+_0xb56789;}if(_0x539fc2){let {sections:_0x45aa8a,listType:_0x10b560,displayName:_0x32c99d,vcard:_0x25cb83,contactVcard:_0x4f690d,name:_0x323468,caption:_0x4877e4,conversation:_0x3a0b79,pollCreationMessageKey:_0x288a64,footerText:_0x492d7b,contentText:_0x2fa081,pageCount:_0x57298c,headerType:_0x5c26da,isAvatar:_0x54a98b,isAnimated:_0x64ab12,fallbackLc:_0x4fe862,fallbackLg:_0x351685,namespace:_0x2ea4ba,elementName:_0x1d7411,localizableParams:_0x1fedee,viewOnce:_0x427149,height:_0x15dd30,width:_0x3e87a4,key:_0x48f41f,firstScanLength:_0x39685b,firstScanSidecar:_0x3ca4ea,gifPlayback:_0x43411d,gifAttribution:_0x4c0a7e,midQualityFileSha256:_0x5095c9,scansSidecar:_0x1f7678,streamingSidecar:_0x31a6d1,thumbnailHeight:_0x13eb20,thumbnailWidth:_0x49443d,thumbnailEncSha256:_0x31702b,thumbnailDirectPath:_0x210616,canonicalUrl:_0x2ffad0,matchedText:_0x349554,previewType:_0x313a16,thumbnailSha256:_0x21ac9b,deviceListMetadataVersion:_0x288bb0,inviteLinkGroupTypeV2:_0xde2e8c,interactiveAnnotations:_0x38544f,scanLengths:_0x2a0b21,jpegThumbnail:_0x34cd0d,url:_0x18c5e2,mediaKeyTimestamp:_0xd366fc,waveform:_0x2cac26,stickerSentTs:_0x55f428,firstFrameLength:_0x55f3b1,fileEncSha256:_0x522bae,contextInfo:_0x46d0bb,firstFrameSidecar:_0x1255b1,directPath:_0x1c4732,fileSha256:_0x17622e,mediaKey:_0x480bfb,senderTimestampMs:_0x4e18e9,..._0x473856}=_0x539fc2;(_0x2b8988===_0x54858(0x5e6)||_0x2b8988===_0x54858(0x1b7))&&(delete _0x473856[_0x54858(0x401)],delete _0x473856[_0x54858(0x134)]),typeof _0x539fc2==_0x54858(0x7b7)?_0x13453c={'text':_0x539fc2,'type':_0x2b8988||_0x54858(0x642),..._0x579b67&&{'edited':_0x579b67},..._0x21e137&&{'quoted':_0x21e137},..._0x1a118e&&{'reaction':_0x1a118e}}:_0x13453c={'text':_0x182378,..._0x473856,..._0x2b8988==='pollUpdateMessage'?{'poll_id':_0x539fc2[_0x54858(0x780)]['id'],'quoted':_0x539fc2['pollCreationMessageKey']['id'],'vote':_0x2b2a69}:{},..._0x2b8988===_0x54858(0x1b7)?{'vote':_0x2b2a69}:{},'type':_0x2b8988,..._0x579b67&&{'edited':_0x579b67},..._0x21e137&&{'quoted':_0x21e137},..._0x1a118e&&{'reaction':_0x1a118e},...(_0x2b8988===_0x54858(0x23a)||_0x2b8988===_0x54858(0x369)||_0x2b8988==='pollCreationMessageV3'||_0x2b8988==='listMessage')&&{'convertedOptions':_0x13453c[_0x54858(0x32f)]}};}return{'messageType':_0x2b8988,'messageContent':_0x539fc2,'message_normalized':_0x13453c};}catch(_0x23db5b){return this['logger']['error'](_0x54858(0x391)+_0x23db5b),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x11dbf0(0x358)]=null,this[_0x11dbf0(0x7a4)]=null,(this[_0x11dbf0(0x54a)](),this[_0x11dbf0(0x444)][_0x11dbf0(0x61e)]={'count':0x0},this[_0x11dbf0(0x444)]['ScheduleMessage']={'isConnected':!0x1,'delayMessage':null,'processingGroup_id':null,'lastSend':0x0,'timeout':null,'lastMessage_id':null});}set['instanceName'](_0x2c6330){const _0x409af5=a0_0x5ca8c7;if(!_0x2c6330){this['instance'][_0x409af5(0x786)]=(0x0,Oi['v4'])();return;}this['instance']['name']=_0x2c6330,this[_0x409af5(0x3ce)](_0x409af5(0x311),{'instance':this[_0x409af5(0x444)]['name'],'status':_0x409af5(0x74c)});}get['instanceName'](){const _0x49fddb=a0_0x5ca8c7;return this[_0x49fddb(0x444)][_0x49fddb(0x786)];}get[a0_0x5ca8c7(0x638)](){return this['instance']['wuid'];}async['getProfileName'](){const _0x4ff3e6=a0_0x5ca8c7;let _0x59af60=this['client'][_0x4ff3e6(0x136)]?.['name']??this[_0x4ff3e6(0x158)][_0x4ff3e6(0x136)]?.[_0x4ff3e6(0x151)];if(!_0x59af60){if(this[_0x4ff3e6(0x588)][_0x4ff3e6(0x507)]('DATABASE')['ENABLED']){let _0x10fc61=await I[_0x4ff3e6(0x16f)]()['db'](this['configService']['get'](_0x4ff3e6(0x378))[_0x4ff3e6(0x3d4)][_0x4ff3e6(0x1ab)]+'-instances')['collection'](this[_0x4ff3e6(0x546)])[_0x4ff3e6(0x51f)]({'_id':_0x4ff3e6(0x7a8)});if(_0x10fc61){let _0x172418=JSON[_0x4ff3e6(0x27e)](JSON[_0x4ff3e6(0x79e)](_0x10fc61),w[_0x4ff3e6(0x2c9)][_0x4ff3e6(0x3b3)]);_0x59af60=_0x172418['me']?.[_0x4ff3e6(0x786)]||_0x172418['me']?.['verifiedName'];}}else{if((0x0,Fe['existsSync'])((0x0,j[_0x4ff3e6(0x363)])(Me,this[_0x4ff3e6(0x546)],_0x4ff3e6(0x200)))){let _0x4db8cd=JSON[_0x4ff3e6(0x27e)]((0x0,Fe[_0x4ff3e6(0x1f9)])((0x0,j[_0x4ff3e6(0x363)])(Me,this['instanceName'],'creds.json'),{'encoding':'utf-8'}));_0x59af60=_0x4db8cd['me']?.[_0x4ff3e6(0x786)]||_0x4db8cd['me']?.[_0x4ff3e6(0x151)];}}}return _0x59af60;}get['profilePictureUrl'](){const _0x1e4682=a0_0x5ca8c7;return this[_0x1e4682(0x444)][_0x1e4682(0x554)];}get[a0_0x5ca8c7(0x4b0)](){const _0x2423d3=a0_0x5ca8c7;return this[_0x2423d3(0x444)][_0x2423d3(0x61e)]?.[_0x2423d3(0x367)]?{'pairingCode':this['instance'][_0x2423d3(0x61e)]?.[_0x2423d3(0x367)]}:{'code':this[_0x2423d3(0x444)][_0x2423d3(0x61e)]?.['code'],'base64':this[_0x2423d3(0x444)]['qrcode']?.['base64']};}async[a0_0x5ca8c7(0x128)](){const _0x25c632=a0_0x5ca8c7;let _0x507c83=await this['repository'][_0x25c632(0x527)][_0x25c632(0x509)](this[_0x25c632(0x546)]);this[_0x25c632(0x1f6)][_0x25c632(0x123)]=_0x507c83?.['url'],this[_0x25c632(0x1f6)]['enabled']=_0x507c83?.[_0x25c632(0x3b1)],this[_0x25c632(0x1f6)][_0x25c632(0x37d)]=_0x507c83?.[_0x25c632(0x37d)],this[_0x25c632(0x1f6)][_0x25c632(0x7d7)]=_0x507c83?.['STATUS_INSTANCE'],this['localWebhook']['QRCODE_UPDATED']=_0x507c83?.[_0x25c632(0x2d2)],this[_0x25c632(0x1f6)]['SEND_MESSAGE']=_0x507c83?.['SEND_MESSAGE'],this[_0x25c632(0x1f6)][_0x25c632(0x40e)]=_0x507c83?.[_0x25c632(0x40e)],this[_0x25c632(0x1f6)][_0x25c632(0x496)]=_0x507c83?.[_0x25c632(0x496)],this['localWebhook'][_0x25c632(0x5d3)]=_0x507c83?.['GROUPS_UPSERT'],this[_0x25c632(0x1f6)][_0x25c632(0x1ff)]=_0x507c83?.[_0x25c632(0x1ff)],this[_0x25c632(0x1f6)][_0x25c632(0x49e)]=_0x507c83?.[_0x25c632(0x49e)],this['localWebhook']['CHATS_SET']=_0x507c83?.['CHATS_SET'],this[_0x25c632(0x1f6)][_0x25c632(0x191)]=_0x507c83?.[_0x25c632(0x191)],this[_0x25c632(0x1f6)][_0x25c632(0x3d7)]=_0x507c83?.[_0x25c632(0x3d7)],this[_0x25c632(0x1f6)][_0x25c632(0x119)]=_0x507c83?.[_0x25c632(0x119)],this[_0x25c632(0x1f6)][_0x25c632(0x20f)]=_0x507c83?.[_0x25c632(0x20f)],this['localWebhook']['CONTACTS_UPSERT']=_0x507c83?.[_0x25c632(0x4e5)],this[_0x25c632(0x1f6)][_0x25c632(0x597)]=_0x507c83?.[_0x25c632(0x597)],this[_0x25c632(0x1f6)][_0x25c632(0x3f4)]=_0x507c83?.['PRESENCE_UPDATE'],this['localWebhook'][_0x25c632(0x4fa)]=_0x507c83?.[_0x25c632(0x4fa)],this['localWebhook'][_0x25c632(0x2d0)]=_0x507c83?.[_0x25c632(0x2d0)],this['localWebhook'][_0x25c632(0x513)]=_0x507c83?.['groups_ignore'];}async[a0_0x5ca8c7(0x751)](_0x4650b9){const _0x3638e0=a0_0x5ca8c7;let _0x2c61ba=[_0x3638e0(0x6ae),_0x3638e0(0x123),'enabled',_0x3638e0(0x37d),'STATUS_INSTANCE','QRCODE_UPDATED',_0x3638e0(0x496),_0x3638e0(0x40e),_0x3638e0(0x22c),'GROUPS_UPSERT',_0x3638e0(0x1ff),'GROUP_PARTICIPANTS_UPDATE',_0x3638e0(0x2f4),_0x3638e0(0x191),_0x3638e0(0x3d7),_0x3638e0(0x119),_0x3638e0(0x20f),_0x3638e0(0x4e5),_0x3638e0(0x597),_0x3638e0(0x3f4),_0x3638e0(0x4fa),_0x3638e0(0x2d0),'groups_ignore'],_0x14ab28={};return _0x2c61ba[_0x3638e0(0x57a)](_0x5256a4=>{_0x4650b9[_0x5256a4]!==void 0x0&&(_0x14ab28[_0x5256a4]=_0x4650b9[_0x5256a4]);}),_0x14ab28[_0x3638e0(0x123)]&&(_0x14ab28[_0x3638e0(0x123)]=_0x14ab28[_0x3638e0(0x123)][_0x3638e0(0x80a)]()),await this[_0x3638e0(0x4b2)]['webhook']['create'](_0x14ab28,this[_0x3638e0(0x546)]),Object['assign'](this[_0x3638e0(0x1f6)],_0x14ab28),await this[_0x3638e0(0x4b2)][_0x3638e0(0x527)][_0x3638e0(0x509)](this['instanceName']);}async[a0_0x5ca8c7(0x4f4)](){const _0x4ea461=a0_0x5ca8c7;return await this[_0x4ea461(0x4b2)][_0x4ea461(0x527)][_0x4ea461(0x509)](this[_0x4ea461(0x546)]);}async[a0_0x5ca8c7(0x3ce)](_0x8a501b,_0x2ef428){const _0x194e24=a0_0x5ca8c7;let _0x5cb4e7=_0x8a501b['replace'](/[\.-]/gm,'_')[_0x194e24(0x442)](),_0x5099df=this[_0x194e24(0x1f6)][_0x194e24(0x3b1)]&&(0x0,L['isURL'])(this['localWebhook'][_0x194e24(0x123)])?this['localWebhook']['url']+(this[_0x194e24(0x1f6)]['local_map']?this[_0x194e24(0x542)][_0x8a501b]:''):null,_0xad7234=this[_0x194e24(0x1f6)][_0x5cb4e7],_0x197372=fe&&fe['enabled']&&(0x0,L[_0x194e24(0x510)])(fe[_0x194e24(0x123)])?fe[_0x194e24(0x123)]+(fe[_0x194e24(0x37d)]?this['webhookMap'][_0x8a501b]:''):null,_0x3e48b2=fe?fe[_0x5cb4e7]:null;if(_0xad7234&&_0x5099df)try{await ee[_0x194e24(0x180)][_0x194e24(0x512)]({'baseURL':_0x5099df})[_0x194e24(0x25c)]('',{'event':_0x8a501b,'instance':this[_0x194e24(0x444)][_0x194e24(0x786)],'apikey':this['instance'][_0x194e24(0x790)],'data':_0x2ef428}),this['logger']['log'](this[_0x194e24(0x546)]+'\x20('+this['instance'][_0x194e24(0x638)]+'):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x8a501b+':\x20'+_0x5099df);}catch{this[_0x194e24(0x6c6)]['error'](this[_0x194e24(0x546)]+'\x20('+this[_0x194e24(0x444)][_0x194e24(0x638)]+_0x194e24(0x359)+_0x8a501b+':\x20'+_0x5099df);}if(_0x3e48b2&&_0x197372)try{await ee[_0x194e24(0x180)][_0x194e24(0x512)]({'baseURL':_0x197372})[_0x194e24(0x25c)]('',{'event':_0x8a501b,'instance':this['instance'][_0x194e24(0x786)],'apikey':this[_0x194e24(0x444)][_0x194e24(0x790)],'data':_0x2ef428}),this[_0x194e24(0x6c6)][_0x194e24(0x5df)](this[_0x194e24(0x546)]+'\x20('+this[_0x194e24(0x444)][_0x194e24(0x638)]+'):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20'+_0x8a501b+':\x20'+_0x197372);}catch{this[_0x194e24(0x6c6)][_0x194e24(0x73d)](this[_0x194e24(0x546)]+'\x20('+this['instance'][_0x194e24(0x638)]+'):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20'+_0x8a501b+':\x20'+_0x197372);}}async[a0_0x5ca8c7(0x5f2)]({qr:_0x58228c,connection:_0x30cc3d,lastDisconnect:_0x4498d3,receivedPendingNotifications:_0x1e7908}){const _0x2d570f=a0_0x5ca8c7;if(_0x58228c){if(this[_0x2d570f(0x444)][_0x2d570f(0x61e)][_0x2d570f(0x7bf)]===Fo)return this['sendDataWebhook'](_0x2d570f(0x152),{'message':_0x2d570f(0x170),'statusCode':w[_0x2d570f(0x10d)][_0x2d570f(0x10e)]}),this[_0x2d570f(0x65c)]={'state':_0x2d570f(0x19f),'statusReason':w['DisconnectReason'][_0x2d570f(0x80d)]},this[_0x2d570f(0x3ce)](_0x2d570f(0x816),{'instance':this['instance']['name'],...this[_0x2d570f(0x65c)]}),this['sendDataWebhook'](_0x2d570f(0x311),{'instance':this['instance']['name'],'status':_0x2d570f(0x6a4)}),this['repository']['auth']['delete'](this[_0x2d570f(0x444)][_0x2d570f(0x786)]),this['endSession']=!0x0,re['removeIPv6ById'](K,this[_0x2d570f(0x444)]['name']),this[_0x2d570f(0x6da)][_0x2d570f(0x5ca)](_0x2d570f(0x550),this[_0x2d570f(0x444)][_0x2d570f(0x786)]);this[_0x2d570f(0x444)][_0x2d570f(0x61e)][_0x2d570f(0x7bf)]++;let _0x174fa6={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x2d570f(0x5e0),'dark':_0x2d570f(0x156)}};xi['default'][_0x2d570f(0x713)](_0x58228c,_0x174fa6,(_0x43e8a3,_0x1d996d)=>{const _0x239230=_0x2d570f;if(_0x43e8a3){this[_0x239230(0x6c6)][_0x239230(0x73d)](this[_0x239230(0x546)]+'\x20('+this['instance'][_0x239230(0x638)]+_0x239230(0x3dc)+(_0x43e8a3 instanceof Error?_0x43e8a3[_0x239230(0x319)]:JSON['stringify'](_0x43e8a3,null,0x2)));return;}this[_0x239230(0x444)][_0x239230(0x61e)][_0x239230(0x652)]=_0x1d996d,this['instance'][_0x239230(0x61e)]['code']=_0x58228c,!this[_0x239230(0x1ae)]&&this[_0x239230(0x3ce)](_0x239230(0x152),{'qrcode':{'instance':this[_0x239230(0x444)]['name'],'pairingCode':this[_0x239230(0x444)][_0x239230(0x61e)][_0x239230(0x367)],'code':_0x58228c,'base64':_0x1d996d}});}),this[_0x2d570f(0x1ae)]?this[_0x2d570f(0x444)][_0x2d570f(0x61e)][_0x2d570f(0x367)]||(await(0x0,w[_0x2d570f(0x10a)])(0x7d0),this[_0x2d570f(0x444)][_0x2d570f(0x61e)][_0x2d570f(0x367)]=await this['client'][_0x2d570f(0x78a)](this[_0x2d570f(0x1ae)])):this[_0x2d570f(0x444)][_0x2d570f(0x61e)][_0x2d570f(0x367)]=null,Di['default'][_0x2d570f(0x11f)](_0x58228c,{'small':!0x0},_0x252160=>this[_0x2d570f(0x6c6)][_0x2d570f(0x5df)](_0x2d570f(0x2d1)+this[_0x2d570f(0x444)][_0x2d570f(0x786)]+_0x2d570f(0x503)+this['instance']['qrcode'][_0x2d570f(0x7bf)]+_0x2d570f(0x7f3)+this['instance'][_0x2d570f(0x61e)][_0x2d570f(0x367)]+'\x20}\x0a'+_0x252160));}if(_0x30cc3d&&(this[_0x2d570f(0x65c)]={'state':_0x30cc3d,'statusReason':_0x4498d3?.[_0x2d570f(0x73d)]?.['output']?.['statusCode']??0xc8},this[_0x2d570f(0x3ce)]('connection.update',{'instance':this['instance'][_0x2d570f(0x786)],...this[_0x2d570f(0x65c)]})),_0x30cc3d===_0x2d570f(0x261)){if(this[_0x2d570f(0x7a0)]++,this[_0x2d570f(0x29a)][_0x2d570f(0x7cb)](Date['now']()),this[_0x2d570f(0x29a)]=this[_0x2d570f(0x29a)]['filter'](_0x315550=>Date[_0x2d570f(0x494)]()-_0x315550<this[_0x2d570f(0x583)]),_0x4498d3[_0x2d570f(0x73d)]?.[_0x2d570f(0x2f5)]?.['statusCode']!==w[_0x2d570f(0x10d)][_0x2d570f(0x396)]){let _0xfee929=this[_0x2d570f(0x7a0)]<=0x1?0x0:Math['min'](Math[_0x2d570f(0x4c2)](0x2,this[_0x2d570f(0x7a0)]-0x1)*0x3e8,0x493e0);console[_0x2d570f(0x5df)](this['instanceName']+_0x2d570f(0x2e8)+this[_0x2d570f(0x7a0)]+_0x2d570f(0x809)+_0xfee929/0x3e8+_0x2d570f(0x571)),await new Promise(_0x4d363a=>setTimeout(_0x4d363a,_0xfee929)),console[_0x2d570f(0x5df)](_0x2d570f(0x21d)),await this[_0x2d570f(0x448)]();}else{this[_0x2d570f(0x3ce)](_0x2d570f(0x311),{'instance':this[_0x2d570f(0x444)][_0x2d570f(0x786)],'status':_0x2d570f(0x6a4)}),this['instance'][_0x2d570f(0x153)][_0x2d570f(0x275)]=!0x1,this['repository'][_0x2d570f(0x527)]['delete'](this[_0x2d570f(0x546)]),this['repository'][_0x2d570f(0x772)][_0x2d570f(0x512)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x2d570f(0x494)]()},this[_0x2d570f(0x444)][_0x2d570f(0x786)]),re[_0x2d570f(0x68c)](K,this[_0x2d570f(0x444)][_0x2d570f(0x786)]);try{this[_0x2d570f(0x6c6)][_0x2d570f(0x39b)](this['instanceName']+'\x20('+this['instance'][_0x2d570f(0x638)]+_0x2d570f(0x4db));let _0x18467d=await this[_0x2d570f(0x4b2)][_0x2d570f(0x319)][_0x2d570f(0x329)](this['instance']['wuid']);_0x18467d[_0x2d570f(0x7d6)]?this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x2d570f(0x444)][_0x2d570f(0x638)]+_0x2d570f(0x7b6)):this[_0x2d570f(0x6c6)][_0x2d570f(0x73d)](_0x2d570f(0x50d)+_0x18467d[_0x2d570f(0x73d)]);}catch(_0x1787d3){this['logger']['error']('Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20'+_0x1787d3['message']);}this['instance'][_0x2d570f(0x153)][_0x2d570f(0x6e5)]!==null&&(this[_0x2d570f(0x6c6)][_0x2d570f(0x39b)](this[_0x2d570f(0x546)]+'\x20('+this['instance'][_0x2d570f(0x638)]+_0x2d570f(0x599)),clearInterval(this[_0x2d570f(0x444)][_0x2d570f(0x153)][_0x2d570f(0x6e5)]),this[_0x2d570f(0x444)][_0x2d570f(0x153)][_0x2d570f(0x6e5)]=null),this[_0x2d570f(0x6c6)]['verbose'](this['instanceName']+'\x20('+this[_0x2d570f(0x444)][_0x2d570f(0x638)]+'):\x20Limpando\x20AutomateSystem'),this[_0x2d570f(0x4b3)]=null,this[_0x2d570f(0x6da)][_0x2d570f(0x5ca)]('remove.instance',this['instance'][_0x2d570f(0x786)],'inner'),this[_0x2d570f(0x158)]?.['ws']?.[_0x2d570f(0x261)](),this[_0x2d570f(0x158)]['end'](new Error(_0x2d570f(0x6b6)));}}if(_0x30cc3d===_0x2d570f(0x349)){this[_0x2d570f(0x6c6)][_0x2d570f(0x7f1)](this[_0x2d570f(0x546)]+'\x20('+this['instance'][_0x2d570f(0x638)]+'):\x20this.client.authState.creds?.myAppStateKeyId:\x20'+this[_0x2d570f(0x158)]['authState'][_0x2d570f(0x7a8)]?.[_0x2d570f(0x372)]),this['client'][_0x2d570f(0x276)][_0x2d570f(0x7a8)]?.[_0x2d570f(0x372)]||(this['logger'][_0x2d570f(0x7f1)](this[_0x2d570f(0x546)]+'\x20('+this['instance'][_0x2d570f(0x638)]+_0x2d570f(0x212)),this['client']['ev'][_0x2d570f(0x4d9)]()),this[_0x2d570f(0x1c8)],this[_0x2d570f(0x444)][_0x2d570f(0x638)]=this['client'][_0x2d570f(0x136)]['id']['replace'](/:\d+/,'')[_0x2d570f(0x2cf)]('@s.whatsapp.net',''),this[_0x2d570f(0x444)][_0x2d570f(0x554)]=(await this[_0x2d570f(0x763)](this['instance'][_0x2d570f(0x638)]+_0x2d570f(0x505)))[_0x2d570f(0x554)],this[_0x2d570f(0x4b2)][_0x2d570f(0x772)][_0x2d570f(0x512)]({'online':!0x0,'owner':this[_0x2d570f(0x444)][_0x2d570f(0x638)],'lastDisconnect':null},this['instance'][_0x2d570f(0x786)]);let _0x2e8f23=_0x2d570f(0x307)+this[_0x2d570f(0x444)][_0x2d570f(0x638)],_0x466891=0x28,_0x726474=Math[_0x2d570f(0x76b)]((_0x466891-_0x2e8f23['length'])/0x2),_0x2775b4='\x20'[_0x2d570f(0x1a0)](_0x726474),_0x51ca23='CONECTADO\x20\x20UAZAPI',_0x3a94d5=_0x2d570f(0x45f)+this[_0x2d570f(0x444)][_0x2d570f(0x786)],_0x551901=(''+_0x2775b4+_0x2e8f23+_0x2775b4)[_0x2d570f(0x3c6)](_0x466891,'\x20'),_0x46d259=(''+_0x2775b4+_0x51ca23+_0x2775b4)['padEnd'](_0x466891,'\x20'),_0x1c940f=(''+_0x2775b4+_0x3a94d5+_0x2775b4)['padEnd'](_0x466891,'\x20'),_0x3d7c56=Math[_0x2d570f(0x561)](_0x551901[_0x2d570f(0x293)],_0x46d259['length'],_0x1c940f[_0x2d570f(0x293)]),_0x3f9792=_0x551901[_0x2d570f(0x3c6)](_0x3d7c56,'\x20'),_0x2824f1=_0x46d259[_0x2d570f(0x3c6)](_0x3d7c56,'\x20'),_0x2d61cb=_0x1c940f[_0x2d570f(0x3c6)](_0x3d7c56,'\x20');this[_0x2d570f(0x6c6)][_0x2d570f(0x611)]((_0x2d570f(0x6dd)+''['repeat'](_0x3d7c56)+_0x2d570f(0x56c)+_0x2824f1+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2d61cb+_0x2d570f(0x603)+_0x3f9792+_0x2d570f(0x6db)+''[_0x2d570f(0x1a0)](_0x3d7c56)+'')[_0x2d570f(0x2cf)](/^ +/gm,'\x20\x20')),this['AutomateFunctions'](),this[_0x2d570f(0x444)][_0x2d570f(0x153)][_0x2d570f(0x275)]=!0x0;}}[a0_0x5ca8c7(0x1c8)](){const _0x1de9a7=a0_0x5ca8c7;this['reconnectAttempts']=0x0,this[_0x1de9a7(0x29a)]=[];}async[a0_0x5ca8c7(0x75d)](_0x1172ae,_0x1aa356=!0x1){const _0x3de2c3=a0_0x5ca8c7;try{let _0x1e9b66=await this['repository']['message'][_0x3de2c3(0x509)]({'where':{'_id':_0x1172ae['id']}},this['instance'][_0x3de2c3(0x638)]);return _0x1aa356?_0x1e9b66[0x0]:_0x1e9b66[0x0]['message'];}catch{return{'conversation':''};}}['cleanStore'](){const _0x142b12=a0_0x5ca8c7;let _0x4a4ebc=this[_0x142b12(0x588)][_0x142b12(0x507)]('STORE'),_0x6e7d8=this[_0x142b12(0x588)][_0x142b12(0x507)](_0x142b12(0x378));_0x4a4ebc?.[_0x142b12(0x7d9)]&&!_0x6e7d8[_0x142b12(0x4b7)]&&setInterval(()=>{const _0x51f278=_0x142b12;try{for(let [_0x5cb716,_0x15de81]of Object[_0x51f278(0x1ce)](_0x4a4ebc))_0x15de81===!0x0&&(0x0,Ue[_0x51f278(0x18e)])(_0x51f278(0xd8)+(0x0,j[_0x51f278(0x363)])(this[_0x51f278(0xfc)],_0x5cb716[_0x51f278(0x7c7)](),this['instance'][_0x51f278(0x638)])+_0x51f278(0x5cd));}catch{}},(_0x4a4ebc?.[_0x142b12(0x7d9)]??0xe10)*0x3e8);}async[a0_0x5ca8c7(0x7df)](){const _0x111e2a=a0_0x5ca8c7;let _0xf72ec4=this[_0x111e2a(0x588)][_0x111e2a(0x507)]('DATABASE'),_0x26b46d=this['configService'][_0x111e2a(0x507)]('REDIS');return _0x26b46d?.['ENABLED']?await Os(_0x26b46d,this[_0x111e2a(0x444)][_0x111e2a(0x786)]):_0xf72ec4[_0x111e2a(0x4b7)]?await _s(this[_0x111e2a(0x444)][_0x111e2a(0x786)]):await(0x0,w[_0x111e2a(0x3b2)])((0x0,j[_0x111e2a(0x363)])(Me,this['instance'][_0x111e2a(0x786)]));}async[a0_0x5ca8c7(0x6df)](){const _0x4087fb=a0_0x5ca8c7;let _0x58b97d=()=>Math['floor'](Math[_0x4087fb(0x487)]()*0x4e21)+0x7d0,_0x17036c=async()=>{const _0x195725=_0x4087fb;if(!this[_0x195725(0x444)][_0x195725(0x153)][_0x195725(0x275)]){this[_0x195725(0x6c6)][_0x195725(0x39b)](this[_0x195725(0x546)]+'\x20('+this['instance']['wuid']+_0x195725(0x290)),this['isRunning']=!0x1;return;}if(this[_0x195725(0x444)][_0x195725(0x638)]&&this[_0x195725(0x4b3)]&&this[_0x195725(0x444)]['ScheduleMessage']['delayMessage']!==null&&this[_0x195725(0x444)][_0x195725(0x153)]['delayMessage']!==void 0x0){let _0x1ff4a2=Math['round'](this[_0x195725(0x444)][_0x195725(0x153)][_0x195725(0x6e5)]/0xea60);this[_0x195725(0x6c6)]['verbose'](this['instanceName']+'\x20('+this[_0x195725(0x444)][_0x195725(0x638)]+_0x195725(0x6a3)+_0x1ff4a2+'\x20minutos\x20verificar\x20novas\x20mensagens'),this['isRunning']=!0x1;return;}else this[_0x195725(0x444)][_0x195725(0x638)]&&(this[_0x195725(0x6c6)]['verbose'](this[_0x195725(0x546)]+'\x20('+this[_0x195725(0x444)]['wuid']+_0x195725(0x4da)),this[_0x195725(0x4b3)]||(await this[_0x195725(0x280)](),this['findGroups'](),this[_0x195725(0x3cc)]()),(this[_0x195725(0x444)][_0x195725(0x153)][_0x195725(0x6e5)]===null||this[_0x195725(0x444)][_0x195725(0x153)]['delayMessage']===void 0x0)&&await this[_0x195725(0x629)]());if(this['isRunning']){let _0x5b2d21=_0x58b97d();this['logger']['verbose'](this[_0x195725(0x546)]+':\x20Verificando\x20se\x20h\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20'+_0x5b2d21/0x3e8+_0x195725(0x758)),setTimeout(_0x17036c,_0x5b2d21);}};if(this['isRunning'])return;this['isRunning']=!0x0;let _0x424832=_0x58b97d();setTimeout(_0x17036c,_0x424832);}async[a0_0x5ca8c7(0x3cc)](){const _0x47f6ad=a0_0x5ca8c7;let _0x53237f=this['instance'][_0x47f6ad(0x638)];try{let _0x168c19=await this[_0x47f6ad(0x4b2)][_0x47f6ad(0x72d)][_0x47f6ad(0x6c8)]({'where':{'$or':[{'owner':_0x53237f},{'whoCanUse':{'$in':[_0x53237f]}},{'shareOwners':{'$in':[_0x53237f]}}]}}),_0xbeed24=new Map(this[_0x47f6ad(0x4b3)][_0x47f6ad(0x634)][_0x47f6ad(0x726)](_0x124909=>[_0x124909[_0x47f6ad(0x6ae)],_0x124909])),_0x4c6fdc=_0x168c19[_0x47f6ad(0x726)](_0x2d74d8=>{const _0x50cac8=_0x47f6ad;let _0x257681=_0xbeed24['get'](_0x2d74d8[_0x50cac8(0x6ae)]?.[_0x50cac8(0x30c)]());return{'_id':_0x2d74d8[_0x50cac8(0x6ae)]?.['toString'](),'name':_0x257681?.[_0x50cac8(0x786)]??_0x2d74d8[_0x50cac8(0x786)],'default':_0x257681?.[_0x50cac8(0x180)]??_0x2d74d8['default']??!0x1,'startCommand':_0x257681?.['startCommand']??_0x2d74d8[_0x50cac8(0x6f1)],'minutesToClose':_0x257681?.['minutesToClose']??_0x2d74d8['minutesToClose']??0xa,'readMessages':_0x257681?.[_0x50cac8(0x41b)]??_0x2d74d8[_0x50cac8(0x41b)]??!0x1,'testingWith':_0x257681?.[_0x50cac8(0x6f2)]??_0x2d74d8['testingWith'],'canEdit':_0x2d74d8[_0x50cac8(0x756)]===_0x53237f||(_0x2d74d8[_0x50cac8(0x192)]??[])['includes'](_0x53237f),'usersCount':(_0x2d74d8[_0x50cac8(0x408)]??[])[_0x50cac8(0x293)]??0x0};}),_0x5a920f=!0x1;_0x4c6fdc[_0x47f6ad(0x57a)](_0x1edd1c=>{const _0x300152=_0x47f6ad;_0x1edd1c[_0x300152(0x180)]&&(_0x5a920f?_0x1edd1c[_0x300152(0x180)]=!0x1:_0x5a920f=!0x0);}),this[_0x47f6ad(0x4b3)][_0x47f6ad(0x634)]=_0x4c6fdc;let _0x4bbcd4={'flows':_0x4c6fdc};return await this[_0x47f6ad(0x4b2)][_0x47f6ad(0xec)][_0x47f6ad(0x13d)](_0x4bbcd4,_0x53237f),this[_0x47f6ad(0x6c6)][_0x47f6ad(0x39b)](this[_0x47f6ad(0x546)]+'\x20('+_0x53237f+_0x47f6ad(0x278)),_0x4c6fdc[_0x47f6ad(0x293)];}catch(_0x73eac2){return this[_0x47f6ad(0x6c6)][_0x47f6ad(0x73d)](this[_0x47f6ad(0x546)]+'\x20('+_0x53237f+_0x47f6ad(0x538)+(_0x73eac2 instanceof Error?_0x73eac2['message']:JSON['stringify'](_0x73eac2,null,0x2))),{'message':_0x47f6ad(0x43c)+(_0x73eac2 instanceof Error?_0x73eac2[_0x47f6ad(0x319)]:JSON[_0x47f6ad(0x79e)](_0x73eac2,null,0x2))};}}async[a0_0x5ca8c7(0x448)](_0x1ad762){const _0x3045a6=a0_0x5ca8c7;try{let _0x3345a3=await this[_0x3045a6(0x4b2)]['instance']['findOne']({'where':{'_id':K+'-'+this['instanceName']}}),_0xf59025,_0x16955a=!re['ipv6Prefix']||!re[_0x3045a6(0x681)];console[_0x3045a6(0x5df)](_0x3045a6(0x42e)),console['log'](_0x3045a6(0x164),Ti),console[_0x3045a6(0x5df)](_0x3045a6(0x4bb),this[_0x3045a6(0x7a0)]),console[_0x3045a6(0x5df)](_0x3045a6(0x42e)),Ti&&!_0x16955a&&(this[_0x3045a6(0x7a0)]<0x4||!this[_0x3045a6(0x7a0)]?_0x3345a3&&_0x3345a3['ip']?(_0xf59025=_0x3345a3['ip'],console[_0x3045a6(0x5df)](_0x3045a6(0x30b)+_0xf59025)):(_0xf59025=await re['createIPv6'](K,this[_0x3045a6(0x444)][_0x3045a6(0x786)]),_0xf59025?(console[_0x3045a6(0x5df)](_0x3045a6(0x517)+_0xf59025),await(0x0,w[_0x3045a6(0x10a)])(0x7d0)):console[_0x3045a6(0x73d)](_0x3045a6(0x45e))):this[_0x3045a6(0x7a0)]<0x6&&(await re[_0x3045a6(0x68c)](K,this[_0x3045a6(0x444)]['name']),console[_0x3045a6(0x5df)]('IPv6\x20recriado\x20aps\x20falhas\x20de\x20reconexo.'),_0xf59025=await re[_0x3045a6(0x531)](K,this['instance'][_0x3045a6(0x786)]),_0xf59025?(console[_0x3045a6(0x5df)](_0x3045a6(0x517)+_0xf59025),await(0x0,w[_0x3045a6(0x10a)])(0x7d0)):console[_0x3045a6(0x73d)](_0x3045a6(0x77a)))),this[_0x3045a6(0x128)](),this[_0x3045a6(0x444)][_0x3045a6(0x790)]=(await this[_0x3045a6(0x4b2)][_0x3045a6(0x772)][_0x3045a6(0x509)](this['instance']['name']))[_0x3045a6(0x790)],this[_0x3045a6(0x444)]['authState']=await this['defineAuthState']();let {version:_0x44ef62}=await(0x0,w[_0x3045a6(0xcd)])(),_0x136857=[ki,Fs,(0x0,Ps[_0x3045a6(0x675)])()],_0x4e36db={'localAddress':_0xf59025,'auth':{'creds':this[_0x3045a6(0x444)][_0x3045a6(0x276)][_0x3045a6(0x335)][_0x3045a6(0x7a8)],'keys':(0x0,w[_0x3045a6(0x7a7)])(this[_0x3045a6(0x444)][_0x3045a6(0x276)][_0x3045a6(0x335)][_0x3045a6(0x818)],(0x0,Jt[_0x3045a6(0x180)])({'level':_0x3045a6(0x73d)}))},'logger':(0x0,Jt['default'])({'level':'error'}),'printQRInTerminal':!0x1,'browser':_0x1ad762?[_0x3045a6(0x14a),Fs,(0x0,Ps[_0x3045a6(0x675)])()]:_0x136857,'version':_0x44ef62,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x528fe9=>{const _0x23843a=_0x3045a6;let _0x5ca551=this[_0x23843a(0x1f6)]?.['groups_ignore']&&(0x0,w[_0x23843a(0x3f5)])(_0x528fe9);return(0x0,w['isJidBroadcast'])(_0x528fe9)||_0x5ca551;},'msgRetryCounterCache':this[_0x3045a6(0x4e8)],'getMessage':async _0x558fbb=>await this[_0x3045a6(0x75d)](_0x558fbb),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x3045a6(0x52e)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending':_0x378fdb=>(_0x378fdb[_0x3045a6(0x5e6)]?.['listType']==w[_0x3045a6(0x1a3)]['Message'][_0x3045a6(0x3ba)]['ListType'][_0x3045a6(0x70f)]&&(_0x378fdb=JSON[_0x3045a6(0x27e)](JSON[_0x3045a6(0x79e)](_0x378fdb)),_0x378fdb[_0x3045a6(0x5e6)][_0x3045a6(0x4bf)]=w[_0x3045a6(0x1a3)][_0x3045a6(0x6c3)]['ListMessage'][_0x3045a6(0x71e)][_0x3045a6(0x667)]),_0x378fdb)};return this[_0x3045a6(0x67a)]=!0x1,this[_0x3045a6(0x158)]=(0x0,w[_0x3045a6(0x180)])(_0x4e36db),this['eventHandler'](),this[_0x3045a6(0x1ae)]=_0x1ad762,this[_0x3045a6(0x158)];}catch(_0x367bbc){let _0x1b1933=_0x3045a6(0x4fc),_0x319f77=_0x367bbc instanceof Error?_0x367bbc['message']:typeof _0x367bbc==_0x3045a6(0x4c4)?JSON[_0x3045a6(0x79e)](_0x367bbc):_0x367bbc,_0x24b075=_0x1b1933+':\x20'+_0x319f77;throw this['logger'][_0x3045a6(0x73d)](this[_0x3045a6(0x546)]+'\x20('+this[_0x3045a6(0x444)][_0x3045a6(0x638)]+'):\x20'+_0x24b075),console[_0x3045a6(0x73d)](_0x3045a6(0x72f),_0x367bbc),_0x367bbc instanceof Error&&console[_0x3045a6(0x73d)](_0x3045a6(0x454),_0x367bbc[_0x3045a6(0x2be)]),new x(_0x24b075);}}[a0_0x5ca8c7(0x266)](){const _0x43a359=a0_0x5ca8c7;this['client']['ev'][_0x43a359(0x10f)](_0x6d8746=>{const _0x390c6e=_0x43a359;if(!this[_0x390c6e(0x67a)]){let _0x59b7be=this[_0x390c6e(0x588)]['get']('DATABASE');if(_0x6d8746[_0x390c6e(0x5f8)]){let _0x4e75c0=_0x6d8746[_0x390c6e(0x5f8)];this[_0x390c6e(0x492)]['labels.edit'](_0x4e75c0);}if(_0x6d8746[_0x390c6e(0x5c9)]){let _0x4962a6=_0x6d8746[_0x390c6e(0x5c9)];this[_0x390c6e(0x492)]['labels.association'](_0x4962a6);}if(_0x6d8746[_0x390c6e(0x816)]&&this['connectionUpdate'](_0x6d8746[_0x390c6e(0x816)]),_0x6d8746[_0x390c6e(0x3b8)]&&this[_0x390c6e(0x444)]['authState'][_0x390c6e(0x6fd)](),_0x6d8746[_0x390c6e(0x7ba)]){let _0x4d0754=_0x6d8746['messaging-history.set'];this[_0x390c6e(0x492)][_0x390c6e(0x7ba)](_0x4d0754,_0x59b7be);}if(_0x6d8746[_0x390c6e(0x469)]){let _0x58f095=_0x6d8746[_0x390c6e(0x469)];this['messageHandle'][_0x390c6e(0x469)](_0x58f095,_0x59b7be);}if(_0x6d8746[_0x390c6e(0x26e)]){let _0x5ccd73=_0x6d8746[_0x390c6e(0x26e)];_0x5ccd73[_0x390c6e(0x57a)](_0x123dee=>{const _0xf51f54=_0x390c6e;if(_i[_0x123dee['key']['id']]){this[_0xf51f54(0x158)]['ev'][_0xf51f54(0x5ca)](_0xf51f54(0x469),{'messages':[_0x123dee],'type':'notify'}),delete _i[_0x123dee['key']['id']];return;}}),this[_0x390c6e(0x492)][_0x390c6e(0x26e)](_0x5ccd73,_0x59b7be);}if(_0x6d8746[_0x390c6e(0x7ca)]){let _0x2c9558=_0x6d8746['presence.update'];if(this[_0x390c6e(0x1f6)]?.[_0x390c6e(0x513)]&&_0x2c9558['id']['includes'](_0x390c6e(0x365)))return;this['sendDataWebhook'](_0x390c6e(0x7ca),_0x2c9558);}if(_0x6d8746[_0x390c6e(0x76e)]){let _0x3a859a=_0x6d8746[_0x390c6e(0x76e)];this[_0x390c6e(0x6d7)][_0x390c6e(0x76e)](_0x3a859a);}if(_0x6d8746[_0x390c6e(0x440)]){let _0x3b5cf1=_0x6d8746[_0x390c6e(0x440)];this[_0x390c6e(0x6d7)][_0x390c6e(0x440)](_0x3b5cf1);}if(_0x6d8746[_0x390c6e(0x27f)]){let _0x52a9e2=_0x6d8746[_0x390c6e(0x27f)];this[_0x390c6e(0x6d7)][_0x390c6e(0x27f)](_0x52a9e2);}if(_0x6d8746[_0x390c6e(0x355)]){let _0xa08bee=_0x6d8746[_0x390c6e(0x355)];this[_0x390c6e(0x746)][_0x390c6e(0x355)](_0xa08bee,_0x59b7be);}if(_0x6d8746['chats.update']){let _0x2ab08a=_0x6d8746['chats.update'];this[_0x390c6e(0x746)][_0x390c6e(0x16c)](_0x2ab08a,_0x59b7be);}if(_0x6d8746[_0x390c6e(0x1cd)]){let _0x4f9a3a=_0x6d8746['chats.delete'];this[_0x390c6e(0x746)]['chats.delete'](_0x4f9a3a);}if(_0x6d8746['contacts.upsert']){let _0x27e78a=_0x6d8746['contacts.upsert'];this[_0x390c6e(0x6ef)][_0x390c6e(0x29b)](_0x27e78a,_0x59b7be);}if(_0x6d8746['contacts.update']){let _0x7f927=_0x6d8746[_0x390c6e(0x3ab)];this[_0x390c6e(0x6ef)][_0x390c6e(0x3ab)](_0x7f927,_0x59b7be);}}});}[a0_0x5ca8c7(0x2b8)](_0x538093){return new Promise(_0x1aa3f8=>setTimeout(_0x1aa3f8,_0x538093));}[a0_0x5ca8c7(0x579)](_0x24ea2e){const _0x120c8b=a0_0x5ca8c7;_0x24ea2e=_0x24ea2e[_0x120c8b(0x2cf)](/\D/g,'');let _0x1e1528=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0x24ea2e);if(_0x1e1528&&_0x1e1528[0x1]==='55'){let _0x19eb3b=_0x1e1528[0x2],_0x38ad14=_0x1e1528[0x3],_0x33a092=_0x1e1528[0x4];if(parseInt(_0x19eb3b)>=0x1f&&_0x38ad14==='9')return _0x1e1528[0x1]+_0x19eb3b+_0x33a092;}return _0x24ea2e;}['createJid'](_0x1c0b00){const _0x48fecb=a0_0x5ca8c7;return _0x1c0b00[_0x48fecb(0x253)](_0x48fecb(0x365))||_0x1c0b00[_0x48fecb(0x253)](_0x48fecb(0x505))||_0x1c0b00['includes'](_0x48fecb(0x267))?_0x1c0b00:(_0x1c0b00=_0x1c0b00?.[_0x48fecb(0x2cf)](/\s/g,'')['replace'](/\+/g,'')[_0x48fecb(0x2cf)](/\(/g,'')[_0x48fecb(0x2cf)](/\)/g,'')[_0x48fecb(0x42a)](/\:/)[0x0][_0x48fecb(0x42a)]('@')[0x0],_0x1c0b00['length']>=0x12?(_0x1c0b00=_0x1c0b00[_0x48fecb(0x2cf)](/[^\d-]/g,''),_0x1c0b00+_0x48fecb(0x365)):(_0x1c0b00=_0x1c0b00['replace'](/\D/g,''),_0x1c0b00+'@s.whatsapp.net'));}async[a0_0x5ca8c7(0x147)](_0x3d1c0d){const _0x1fbf52=a0_0x5ca8c7;let _0x5c2292=(await this[_0x1fbf52(0x322)]({'numbers':[_0x3d1c0d[_0x1fbf52(0x209)]]}))[0x0];if(!_0x5c2292[_0x1fbf52(0x3a1)]&&!(0x0,w[_0x1fbf52(0x3f5)])(_0x5c2292['jid'])&&!_0x5c2292['jid'][_0x1fbf52(0x253)](_0x1fbf52(0x267)))throw new m(_0x5c2292);let _0xa6f1da=_0x5c2292[_0x1fbf52(0x801)];try{return await this[_0x1fbf52(0x158)][_0x1fbf52(0x28b)](_0xa6f1da),await this['client'][_0x1fbf52(0x6d9)](_0x3d1c0d[_0x1fbf52(0x4ea)],_0xa6f1da),{'status':0xc8,'presence':_0x3d1c0d[_0x1fbf52(0x4ea)]};}catch(_0xfc8ce3){let _0x19b26e=_0x1fbf52(0x31f),_0x284a72=_0xfc8ce3 instanceof Error?_0xfc8ce3[_0x1fbf52(0x319)]:typeof _0xfc8ce3==_0x1fbf52(0x4c4)?JSON[_0x1fbf52(0x79e)](_0xfc8ce3):_0xfc8ce3,_0x54edd7=_0x19b26e+':\x20'+_0x284a72;throw this[_0x1fbf52(0x6c6)][_0x1fbf52(0x73d)](this['instanceName']+'\x20('+this[_0x1fbf52(0x444)][_0x1fbf52(0x638)]+_0x1fbf52(0x17a)+_0x54edd7),new m(_0x54edd7);}}async['findAndUpdateCacheContact'](_0x59c58e,_0x4dc61e,_0x3900b9,_0x4e99d8=!0x0){const _0x203a6e=a0_0x5ca8c7;let _0x36a29a=await this[_0x203a6e(0x4b2)]['cacheContact'][_0x203a6e(0x51f)]({'where':{'_id':_0x59c58e}});if(!_0x36a29a&&!_0x4e99d8)return;let _0x4a4d74={'lastUpdate':Date['now']()};if(_0x3900b9||!_0x36a29a?.[_0x203a6e(0x488)]||Date[_0x203a6e(0x494)]()-_0x36a29a[_0x203a6e(0x488)]>0x18*0x3c*0x3c*0x3e8)try{let _0x356acc=(await this[_0x203a6e(0x763)](_0x59c58e))[_0x203a6e(0x554)];_0x4a4d74['pictureUrl']=_0x356acc;}catch(_0x35b2d8){let _0x2dbc81=_0x203a6e(0x70d),_0x204619=_0x35b2d8 instanceof Error?_0x35b2d8[_0x203a6e(0x319)]:typeof _0x35b2d8==_0x203a6e(0x4c4)?JSON[_0x203a6e(0x79e)](_0x35b2d8):_0x35b2d8,_0x30e883=_0x2dbc81+':\x20'+_0x204619;throw this[_0x203a6e(0x6c6)][_0x203a6e(0x73d)](this[_0x203a6e(0x546)]+'\x20('+this['instance'][_0x203a6e(0x638)]+_0x203a6e(0x17a)+_0x30e883),new m(_0x30e883);}return _0x4dc61e&&_0x36a29a?.[_0x203a6e(0x786)]!==_0x4dc61e&&(_0x4a4d74['name']=_0x4dc61e),Object[_0x203a6e(0x818)](_0x4a4d74)[_0x203a6e(0x293)]>0x1&&(_0x36a29a?await this['repository'][_0x203a6e(0x640)][_0x203a6e(0x13d)]({'where':{'_id':_0x59c58e}},_0x4a4d74):await this[_0x203a6e(0x4b2)][_0x203a6e(0x640)][_0x203a6e(0x29c)]([{'_id':_0x59c58e,..._0x4a4d74}]),_0x36a29a={..._0x36a29a,..._0x4a4d74}),{'cachedContact':_0x36a29a};}async['profilePicture'](_0x51d008){const _0x33cdbf=a0_0x5ca8c7;let _0x13233e=this[_0x33cdbf(0x543)](_0x51d008);try{return{'wuid':_0x13233e,'profilePictureUrl':await this[_0x33cdbf(0x158)][_0x33cdbf(0x554)](_0x13233e,'image')};}catch{return{'wuid':_0x13233e,'profilePictureUrl':null};}}async[a0_0x5ca8c7(0x46f)](_0x4fc671,_0x2def43,_0x239af5){const _0x3c54a4=a0_0x5ca8c7;let _0x17dbfd;try{let _0x392ca8=(await this['whatsappNumber']({'numbers':[_0x4fc671]}))[0x0];if(!_0x392ca8['exists']&&!(0x0,w[_0x3c54a4(0x3f5)])(_0x392ca8[_0x3c54a4(0x801)])&&!_0x392ca8[_0x3c54a4(0x801)][_0x3c54a4(0x253)](_0x3c54a4(0x267)))throw new m(_0x392ca8);_0x17dbfd=_0x392ca8['jid'];}catch(_0x203489){_0x17dbfd=_0x4fc671,this[_0x3c54a4(0x6c6)][_0x3c54a4(0x7f1)](this['instanceName']+'\x20('+this[_0x3c54a4(0x444)][_0x3c54a4(0x638)]+_0x3c54a4(0x265)+_0x203489[_0x3c54a4(0x319)]),this[_0x3c54a4(0x6c6)][_0x3c54a4(0x7f1)](this['instanceName']+'\x20('+this[_0x3c54a4(0x444)][_0x3c54a4(0x638)]+_0x3c54a4(0x7e2)+_0x17dbfd);}try{if(_0x17dbfd||(_0x17dbfd=_0x4fc671,this['logger'][_0x3c54a4(0x7f1)](this['instanceName']+'\x20('+this['instance'][_0x3c54a4(0x638)]+_0x3c54a4(0x63c)+_0x17dbfd)),_0x239af5||(_0x239af5={}),_0x239af5?.[_0x3c54a4(0x10a)]){await this[_0x3c54a4(0x158)][_0x3c54a4(0x28b)](_0x17dbfd),await this['client'][_0x3c54a4(0x6d9)](_0x239af5?.[_0x3c54a4(0x4ea)]??'composing',_0x17dbfd);let _0x45ddc1=Math['min'](_0x239af5['delay'],0x2710);await(0x0,w[_0x3c54a4(0x10a)])(_0x45ddc1),await this[_0x3c54a4(0x158)]['sendPresenceUpdate']('paused',_0x17dbfd);}let _0x3382c3=_0x239af5?.['linkPreview']!=!0x1?void 0x0:!0x1,_0x47ec06;if(_0x239af5?.[_0x3c54a4(0x354)]){let _0x5d2a0c=_0x239af5?.[_0x3c54a4(0x354)],_0x1d57c3=_0x5d2a0c?.[_0x3c54a4(0x319)]?_0x5d2a0c:await this[_0x3c54a4(0x75d)](_0x5d2a0c[_0x3c54a4(0x3c3)],!0x0);if(!_0x1d57c3)throw _0x3c54a4(0x315);_0x47ec06=_0x1d57c3;}let _0x5359e4;if((0x0,w[_0x3c54a4(0x3f5)])(_0x17dbfd))try{let _0x498cd6=(await this[_0x3c54a4(0x4b2)]['chat'][_0x3c54a4(0x51f)]({'where':{'_id':_0x17dbfd}},this[_0x3c54a4(0x444)][_0x3c54a4(0x638)]))['groupdata'];if(!_0x498cd6)throw new G(_0x3c54a4(0x7e1));_0x239af5?.[_0x3c54a4(0x593)]&&(_0x239af5[_0x3c54a4(0x593)]?.[_0x3c54a4(0x671)]?_0x5359e4=_0x498cd6['participants'][_0x3c54a4(0x726)](_0x54b9b0=>_0x54b9b0['id']):_0x239af5[_0x3c54a4(0x593)]?.['mentioned']?.[_0x3c54a4(0x293)]&&(_0x5359e4=_0x239af5['mentions']['mentioned'][_0x3c54a4(0x726)](_0x5c624f=>{const _0x5508d3=_0x3c54a4;let _0x1e6110=this[_0x5508d3(0x543)](_0x5c624f);return(0x0,w['isJidGroup'])(_0x1e6110)?null:_0x1e6110;})));}catch{throw new G('Group\x20not\x20found');}let _0x173546=await this[_0x3c54a4(0x4b2)][_0x3c54a4(0x5f1)][_0x3c54a4(0x51f)]({'where':{'_id':_0x17dbfd}},this[_0x3c54a4(0x444)][_0x3c54a4(0x638)]),_0x3d81fa=await((async()=>{const _0x44fc96=_0x3c54a4;let _0x49809d={'quoted':_0x47ec06,'ephemeralExpiration':_0x173546?.['ephemeralExpiration']??0x0};if(!_0x2def43[_0x44fc96(0x6cc)]&&!_0x2def43['poll']&&!_0x2def43[_0x44fc96(0x68d)]&&!_0x2def43[_0x44fc96(0x642)]&&_0x17dbfd!=='status@broadcast'&&!_0x2def43[_0x44fc96(0x6cc)])return await this[_0x44fc96(0x158)][_0x44fc96(0x373)](_0x17dbfd,{'forward':{'key':{'remoteJid':this[_0x44fc96(0x444)][_0x44fc96(0x638)],'fromMe':!0x0},'message':_0x2def43},'mentions':_0x5359e4},_0x49809d);if(_0x2def43[_0x44fc96(0x231)])return await this['client'][_0x44fc96(0x373)](_0x17dbfd,{'react':{'text':_0x2def43[_0x44fc96(0x231)][_0x44fc96(0x67e)],'key':_0x2def43[_0x44fc96(0x231)][_0x44fc96(0x3c3)]}},_0x49809d);if(_0x2def43[_0x44fc96(0x642)]){let _0x410da0=_0x2def43[_0x44fc96(0x642)];return _0x239af5?.['changeVariables']&&(_0x410da0=await this[_0x44fc96(0x202)](_0x410da0,_0x17dbfd)),await this[_0x44fc96(0x158)][_0x44fc96(0x373)](_0x17dbfd,{'text':_0x410da0,'mentions':_0x5359e4,'linkPreview':_0x3382c3},_0x49809d);}return _0x17dbfd===_0x44fc96(0x59d)?await this[_0x44fc96(0x158)][_0x44fc96(0x373)](_0x17dbfd,_0x2def43[_0x44fc96(0x3e2)][_0x44fc96(0x12d)],{'backgroundColor':_0x2def43[_0x44fc96(0x3e2)]['option']['backgroundColor'],'font':_0x2def43[_0x44fc96(0x3e2)][_0x44fc96(0x5ba)][_0x44fc96(0x4d0)],'statusJidList':_0x2def43[_0x44fc96(0x3e2)][_0x44fc96(0x5ba)][_0x44fc96(0x28c)]}):await this['client'][_0x44fc96(0x373)](_0x17dbfd,_0x2def43,_0x49809d);})()),_0x326fdd=(0x0,w[_0x3c54a4(0x184)])(_0x3d81fa['message']),_0x54c482=(0x0,w['getContentType'])(_0x326fdd),{message_normalized:_0x4a7efc}=this[_0x3c54a4(0x501)](_0x326fdd,_0x54c482,null),_0x40f766={'_id':_0x3d81fa[_0x3c54a4(0x3c3)]['id'],'key':_0x3d81fa['key'],'pushName':_0x3d81fa[_0x3c54a4(0x659)],'isGroup':_0x3d81fa[_0x3c54a4(0x3c3)][_0x3c54a4(0x461)][_0x3c54a4(0x339)](_0x3c54a4(0x365)),'profilePictureUrl':this['instance']['profilePictureUrl'],'message':_0x326fdd,'messageType':_0x54c482,'message_normalized':{'key':_0x3d81fa[_0x3c54a4(0x3c3)],'pushName':_0x3d81fa[_0x3c54a4(0x659)],'messageTimestamp':_0x3d81fa[_0x3c54a4(0x4e1)]&&_0x3d81fa[_0x3c54a4(0x4e1)]['toString']()['length']<0xd?_0x3d81fa[_0x3c54a4(0x4e1)]*0x3e8:_0x3d81fa[_0x3c54a4(0x4e1)]||null,'source':(0x0,w['getDevice'])(_0x3d81fa['key']['id']),..._0x4a7efc},'messageTimestamp':_0x3d81fa[_0x3c54a4(0x4e1)]&&_0x3d81fa[_0x3c54a4(0x4e1)][_0x3c54a4(0x30c)]()[_0x3c54a4(0x293)]<0xd?_0x3d81fa[_0x3c54a4(0x4e1)]*0x3e8:_0x3d81fa[_0x3c54a4(0x4e1)]||null,'owner':this[_0x3c54a4(0x444)]['wuid'],'source':(0x0,w['getDevice'])(_0x3d81fa[_0x3c54a4(0x3c3)]['id'])};return this['logger'][_0x3c54a4(0x7f1)](this['instanceName']+'\x20('+this[_0x3c54a4(0x444)][_0x3c54a4(0x638)]+'):\x20enviado\x20para\x20['+_0x40f766[_0x3c54a4(0x3c3)]?.['remoteJid'][_0x3c54a4(0x2cf)]('@s.whatsapp.net','')+_0x3c54a4(0x81f)+_0x40f766[_0x3c54a4(0x30e)]+')'),_0x40f766[_0x3c54a4(0x179)]?.[_0x3c54a4(0x67e)]&&this[_0x3c54a4(0x6c6)][_0x3c54a4(0x7f1)](_0x40f766[_0x3c54a4(0x179)]?.[_0x3c54a4(0x67e)]),this[_0x3c54a4(0x3ce)]('send.message',_0x40f766),q(this[_0x3c54a4(0x546)],_0x3c54a4(0x6ba),{'message':_0x40f766}),this[_0x3c54a4(0x4e2)](this[_0x3c54a4(0x588)]['get'](_0x3c54a4(0x378)),_0x40f766,'SEND_MESSAGE',_0x173546),await this[_0x3c54a4(0x4b2)][_0x3c54a4(0x319)][_0x3c54a4(0x29c)]([_0x40f766],this['instance']['wuid']),_0x3d81fa;}catch(_0x29432b){let _0x5a4889=_0x3c54a4(0x6ad)+_0x17dbfd,_0x2dcce2=_0x29432b instanceof Error?_0x29432b[_0x3c54a4(0x319)]:typeof _0x29432b=='object'?JSON[_0x3c54a4(0x79e)](_0x29432b):_0x29432b,_0x1ab444=_0x5a4889+':\x20'+_0x2dcce2;throw this[_0x3c54a4(0x6c6)][_0x3c54a4(0x73d)](this[_0x3c54a4(0x546)]+'\x20('+this['instance'][_0x3c54a4(0x638)]+_0x3c54a4(0x17a)+_0x1ab444),new m(_0x1ab444);}}get['connectionStatus'](){const _0x3666e6=a0_0x5ca8c7;return this[_0x3666e6(0x65c)];}async[a0_0x5ca8c7(0x7ad)](_0x386e39){const _0x750eb1=a0_0x5ca8c7;return await this[_0x750eb1(0x46f)](_0x386e39[_0x750eb1(0x209)],{'conversation':_0x386e39[_0x750eb1(0x7ad)][_0x750eb1(0x67e)]},_0x386e39?.['options']);}async[a0_0x5ca8c7(0x453)](_0x15de92){const _0x3e9417=a0_0x5ca8c7;if(!_0x15de92[_0x3e9417(0x573)])throw new m('Type\x20is\x20required');if(!_0x15de92[_0x3e9417(0x12d)])throw new m('Content\x20is\x20required');if(_0x15de92[_0x3e9417(0x6af)]){let _0x43fdd3=await this[_0x3e9417(0x4b2)]['contact']['find']({'where':{}},this[_0x3e9417(0x444)][_0x3e9417(0x638)]);if(!_0x43fdd3[_0x3e9417(0x293)])throw new m(_0x3e9417(0x540));_0x15de92['statusJidList']=_0x43fdd3[_0x3e9417(0xe1)](_0x4d2596=>_0x4d2596[_0x3e9417(0x659)])['map'](_0x538c33=>_0x538c33[_0x3e9417(0x6ae)]);}if(!_0x15de92['statusJidList']?.[_0x3e9417(0x293)]&&!_0x15de92[_0x3e9417(0x6af)])throw new m('StatusJidList\x20is\x20required');if(_0x15de92[_0x3e9417(0x573)]===_0x3e9417(0x67e)){if(!_0x15de92[_0x3e9417(0x7f4)])throw new m(_0x3e9417(0x709));if(!_0x15de92[_0x3e9417(0x4d0)])throw new m(_0x3e9417(0x317));return{'content':{'text':_0x15de92['content']},'option':{'backgroundColor':_0x15de92['backgroundColor'],'font':_0x15de92['font'],'statusJidList':_0x15de92[_0x3e9417(0x28c)]}};}if(_0x15de92[_0x3e9417(0x573)]===_0x3e9417(0xef))return{'content':{'image':{'url':_0x15de92['content']},'caption':_0x15de92['caption']},'option':{'statusJidList':_0x15de92[_0x3e9417(0x28c)]}};if(_0x15de92['type']===_0x3e9417(0x2b1))return{'content':{'video':{'url':_0x15de92['content']},'caption':_0x15de92['caption']},'option':{'statusJidList':_0x15de92['statusJidList']}};if(_0x15de92['type']===_0x3e9417(0x6cc)){this['logger'][_0x3e9417(0x39b)](this[_0x3e9417(0x546)]+'\x20('+this[_0x3e9417(0x444)]['wuid']+_0x3e9417(0xfe)),this[_0x3e9417(0x6c6)][_0x3e9417(0x39b)](this[_0x3e9417(0x546)]+'\x20('+this['instance'][_0x3e9417(0x638)]+'):Processing\x20audio');let _0x1f9356=await this['convertaudio'](_0x15de92[_0x3e9417(0x12d)]);if(typeof _0x1f9356=='string'){this[_0x3e9417(0x6c6)][_0x3e9417(0x39b)](this['instanceName']+'\x20('+this[_0x3e9417(0x444)][_0x3e9417(0x638)]+'):Audio\x20processed');let _0x2729e1=F['readFileSync'](_0x1f9356)['toString'](_0x3e9417(0x652));return{'content':{'audio':Buffer[_0x3e9417(0x298)](_0x2729e1,_0x3e9417(0x652)),'ptt':!0x0,'mimetype':_0x3e9417(0x4c1)},'option':{'statusJidList':_0x15de92['statusJidList']}};}else throw new x(_0x1f9356);}throw new m(_0x3e9417(0x7cf));}async[a0_0x5ca8c7(0x514)](_0x18cc53){const _0x4c8859=a0_0x5ca8c7;return await this[_0x4c8859(0x46f)]('status@broadcast',{'status':await this[_0x4c8859(0x453)](_0x18cc53[_0x4c8859(0x514)])});}async['prepareMediaMessage'](_0x3b8b22){const _0x51c442=a0_0x5ca8c7;try{let _0x5ab786=await(0x0,w[_0x51c442(0x1fb)])({[_0x3b8b22[_0x51c442(0x430)]]:(0x0,L['isURL'])(_0x3b8b22['media'])?{'url':_0x3b8b22[_0x51c442(0x2fe)]}:Buffer[_0x51c442(0x298)](_0x3b8b22[_0x51c442(0x2fe)],_0x51c442(0x652))},{'upload':this['client'][_0x51c442(0x692)]}),_0x5187db=_0x3b8b22[_0x51c442(0x430)]+_0x51c442(0x6c3);if(_0x3b8b22[_0x51c442(0x430)]===_0x51c442(0x5e2)&&!_0x3b8b22[_0x51c442(0x208)]){let _0x15c5b7=new RegExp(/.*\/(.+?)\./)[_0x51c442(0x555)](_0x3b8b22[_0x51c442(0x2fe)]);_0x3b8b22['fileName']=_0x15c5b7?_0x15c5b7[0x1]:null;}let _0x44395f;return(0x0,L[_0x51c442(0x510)])(_0x3b8b22[_0x51c442(0x2fe)])?_0x44395f=(await ee['default']['get'](_0x3b8b22[_0x51c442(0x2fe)],{'responseType':'arraybuffer'}))[_0x51c442(0x4b8)][_0x51c442(0x456)]:_0x44395f=(0x0,Pi[_0x51c442(0x344)])(_0x3b8b22[_0x51c442(0x208)]),_0x5ab786[_0x5187db]['caption']=_0x3b8b22?.[_0x51c442(0x204)],_0x5ab786[_0x5187db][_0x51c442(0x79c)]=_0x44395f,_0x5ab786[_0x5187db]['fileName']=_0x3b8b22[_0x51c442(0x208)],_0x3b8b22[_0x51c442(0x430)]===_0x51c442(0x2b1)&&(_0x5ab786[_0x5187db][_0x51c442(0x273)]=Uint8Array[_0x51c442(0x298)]((0x0,Fe[_0x51c442(0x1f9)])((0x0,j['join'])(process[_0x51c442(0x622)](),'video-cover.png'))),_0x5ab786[_0x5187db]['gifPlayback']=!0x1),(0x0,w[_0x51c442(0x248)])('',{[_0x5187db]:{..._0x5ab786[_0x5187db]}},{'userJid':this[_0x51c442(0x444)][_0x51c442(0x638)]});}catch(_0x5864cd){let _0x19c2c4=_0x51c442(0x33f),_0x85f1c4=_0x5864cd instanceof Error?_0x5864cd['message']:typeof _0x5864cd==_0x51c442(0x4c4)?JSON[_0x51c442(0x79e)](_0x5864cd):_0x5864cd,_0x5761a9=_0x19c2c4+':\x20'+_0x85f1c4;throw this['logger']['error'](this[_0x51c442(0x546)]+'\x20('+this[_0x51c442(0x444)][_0x51c442(0x638)]+_0x51c442(0x17a)+_0x5761a9),new x(_0x5761a9);}}async['mediaMessage'](_0x3edd7c){const _0x28283e=a0_0x5ca8c7;let _0x396dc2=await this[_0x28283e(0x477)](_0x3edd7c[_0x28283e(0x19a)]);return await this[_0x28283e(0x46f)](_0x3edd7c[_0x28283e(0x209)],{..._0x396dc2[_0x28283e(0x319)]},_0x3edd7c?.['options']);}async['convertToWebP'](_0x3904db,_0x391b76){const _0xe1181d=a0_0x5ca8c7;try{this[_0xe1181d(0x6c6)][_0xe1181d(0x39b)](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)]['wuid']+_0xe1181d(0x45c));let _0x3f909b,_0x128e41=_0x391b76+'-'+new Date()[_0xe1181d(0x51c)]();this[_0xe1181d(0x6c6)]['verbose'](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)][_0xe1181d(0x638)]+_0xe1181d(0x5da)+_0x128e41);let _0x2d30b3=''+(0x0,j[_0xe1181d(0x363)])(this[_0xe1181d(0xfc)],_0x128e41+_0xe1181d(0x738));if(this[_0xe1181d(0x6c6)][_0xe1181d(0x39b)](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)][_0xe1181d(0x638)]+_0xe1181d(0x556)+_0x2d30b3),(0x0,L[_0xe1181d(0x65a)])(_0x3904db)){this[_0xe1181d(0x6c6)]['verbose'](this[_0xe1181d(0x546)]+'\x20('+this['instance']['wuid']+_0xe1181d(0x7b5));let _0x54f92b=_0x3904db[_0xe1181d(0x2cf)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x5a603f=Buffer[_0xe1181d(0x298)](_0x54f92b,_0xe1181d(0x652));_0x3f909b=''+(0x0,j['join'])(this[_0xe1181d(0xfc)],_0xe1181d(0x1bd)+_0x128e41+_0xe1181d(0x246)),this[_0xe1181d(0x6c6)]['verbose'](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)][_0xe1181d(0x638)]+_0xe1181d(0x106)+_0x3f909b),await(0x0,qt[_0xe1181d(0x180)])(_0x5a603f)[_0xe1181d(0x645)](_0x3f909b),this[_0xe1181d(0x6c6)][_0xe1181d(0x39b)](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)][_0xe1181d(0x638)]+_0xe1181d(0x694));}else{this['logger'][_0xe1181d(0x39b)](this[_0xe1181d(0x546)]+'\x20('+this['instance']['wuid']+_0xe1181d(0x761));let _0x11c416=new Date()[_0xe1181d(0x51c)](),_0x4f8989=_0x3904db+'?timestamp='+_0x11c416;this[_0xe1181d(0x6c6)][_0xe1181d(0x39b)](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)][_0xe1181d(0x638)]+_0xe1181d(0x18d)+_0x4f8989);let _0x5d6593=await ee[_0xe1181d(0x180)]['get'](_0x4f8989,{'responseType':_0xe1181d(0x2ef)});this[_0xe1181d(0x6c6)]['verbose'](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)][_0xe1181d(0x638)]+'):Getting\x20image\x20from\x20url');let _0x5690c3=Buffer[_0xe1181d(0x298)](_0x5d6593[_0xe1181d(0x725)],_0xe1181d(0x1d8));_0x3f909b=''+(0x0,j[_0xe1181d(0x363)])(this[_0xe1181d(0xfc)],_0xe1181d(0x1bd)+_0x128e41+_0xe1181d(0x246)),this[_0xe1181d(0x6c6)][_0xe1181d(0x39b)](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)]['wuid']+_0xe1181d(0x106)+_0x3f909b),await(0x0,qt[_0xe1181d(0x180)])(_0x5690c3)[_0xe1181d(0x645)](_0x3f909b),this[_0xe1181d(0x6c6)]['verbose'](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)][_0xe1181d(0x638)]+'):Image\x20created');}return await(0x0,qt[_0xe1181d(0x180)])(_0x3f909b)[_0xe1181d(0x591)]()['toFile'](_0x2d30b3),this[_0xe1181d(0x6c6)][_0xe1181d(0x39b)](this[_0xe1181d(0x546)]+'\x20('+this[_0xe1181d(0x444)][_0xe1181d(0x638)]+_0xe1181d(0x744)),F[_0xe1181d(0x1aa)](_0x3f909b),this[_0xe1181d(0x6c6)][_0xe1181d(0x39b)](this[_0xe1181d(0x546)]+'\x20('+this['instance']['wuid']+_0xe1181d(0x1ea)),_0x2d30b3;}catch(_0x411ee9){let _0x30dc74='Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP',_0x1fbf93=_0x411ee9 instanceof Error?_0x411ee9[_0xe1181d(0x319)]:typeof _0x411ee9==_0xe1181d(0x4c4)?JSON[_0xe1181d(0x79e)](_0x411ee9):_0x411ee9,_0x67de17=_0x30dc74+':\x20'+_0x1fbf93;this[_0xe1181d(0x6c6)][_0xe1181d(0x73d)](this['instanceName']+'\x20('+this[_0xe1181d(0x444)][_0xe1181d(0x638)]+_0xe1181d(0x17a)+_0x67de17);}}async[a0_0x5ca8c7(0x7ed)](_0x168d83){const _0x4ace6b=a0_0x5ca8c7;let _0xafa6e3=await this[_0x4ace6b(0x432)](_0x168d83['stickerMessage'][_0x4ace6b(0xef)],_0x168d83[_0x4ace6b(0x209)]),_0x3dcaca=await this['sendMessageWithTyping'](_0x168d83['number'],{'sticker':{'url':_0xafa6e3}},_0x168d83?.[_0x4ace6b(0x1bb)]);return F['unlinkSync'](_0xafa6e3),this['logger'][_0x4ace6b(0x39b)](this[_0x4ace6b(0x546)]+'\x20('+this[_0x4ace6b(0x444)][_0x4ace6b(0x638)]+'):Converted\x20image\x20deleted'),_0x3dcaca;}async['audioWhatsapp'](_0x2fb44f){const _0x110cae=a0_0x5ca8c7;if(this['logger'][_0x110cae(0x39b)](this['instanceName']+'\x20('+this['instance'][_0x110cae(0x638)]+'):Sending\x20audio\x20whatsapp'),!_0x2fb44f['options']?.[_0x110cae(0x26f)]&&_0x2fb44f['options']?.['encoding']!==!0x1&&(_0x2fb44f[_0x110cae(0x1bb)]['encoding']=!0x0),_0x2fb44f[_0x110cae(0x1bb)]?.[_0x110cae(0x26f)]){let _0x429ee2=await this[_0x110cae(0x4e6)](_0x2fb44f[_0x110cae(0x240)][_0x110cae(0x6cc)]);if(typeof _0x429ee2==_0x110cae(0x7b7)){let _0x39cfbf=F[_0x110cae(0x1f9)](_0x429ee2)[_0x110cae(0x30c)](_0x110cae(0x652));return this[_0x110cae(0x46f)](_0x2fb44f[_0x110cae(0x209)],{'audio':Buffer[_0x110cae(0x298)](_0x39cfbf,_0x110cae(0x652)),'ptt':!0x0,'mimetype':_0x110cae(0x403)},{'presence':'recording','delay':_0x2fb44f?.[_0x110cae(0x1bb)]?.[_0x110cae(0x10a)]});}else throw new x(_0x429ee2);}return await this['sendMessageWithTyping'](_0x2fb44f['number'],{'audio':(0x0,L[_0x110cae(0x510)])(_0x2fb44f[_0x110cae(0x240)][_0x110cae(0x6cc)])?{'url':_0x2fb44f[_0x110cae(0x240)][_0x110cae(0x6cc)]}:Buffer[_0x110cae(0x298)](_0x2fb44f['audioMessage'][_0x110cae(0x6cc)],_0x110cae(0x652)),'ptt':!0x0,'mimetype':_0x110cae(0x403)},{'presence':_0x110cae(0x50c),'delay':_0x2fb44f?.[_0x110cae(0x1bb)]?.[_0x110cae(0x10a)]});}async['convertaudio'](_0x186635){const _0x2c15fc=a0_0x5ca8c7;this[_0x2c15fc(0x6c6)][_0x2c15fc(0x39b)](this[_0x2c15fc(0x546)]+'\x20('+this['instance'][_0x2c15fc(0x638)]+'):Processing\x20audio');let _0x5d58d6=(0x0,L[_0x2c15fc(0x510)])(_0x186635)?(0x0,Vt[_0x2c15fc(0x749)])(_0x2c15fc(0x316))[_0x2c15fc(0x13d)](_0x186635)[_0x2c15fc(0x5c0)]('hex'):(0x0,Vt[_0x2c15fc(0x749)])(_0x2c15fc(0x316))[_0x2c15fc(0x13d)](_0x186635)[_0x2c15fc(0x5c0)](_0x2c15fc(0x585)),_0xb3669a=''+(0x0,j[_0x2c15fc(0x363)])(this[_0x2c15fc(0xfc)],_0x5d58d6+_0x2c15fc(0x199));if(F['existsSync'](_0xb3669a))return this[_0x2c15fc(0x6c6)][_0x2c15fc(0x39b)](this[_0x2c15fc(0x546)]+'\x20('+this[_0x2c15fc(0x444)][_0x2c15fc(0x638)]+_0x2c15fc(0x808)),_0xb3669a;let _0x4d7653=''+(0x0,j[_0x2c15fc(0x363)])(this['storePath'],_0x2c15fc(0x1bd)+(0x0,Y['v4'])()+_0x2c15fc(0x2bc));if((0x0,L[_0x2c15fc(0x510)])(_0x186635)){let _0x5e5fc6=new Date()['getTime'](),_0x4485bf=_0x186635+_0x2c15fc(0x2c4)+_0x5e5fc6,_0x559d55=await ee[_0x2c15fc(0x180)][_0x2c15fc(0x507)](_0x4485bf,{'responseType':_0x2c15fc(0x2ef)});F[_0x2c15fc(0x241)](_0x4d7653,_0x559d55[_0x2c15fc(0x725)]);}else{let _0x4d67c6=Buffer[_0x2c15fc(0x298)](_0x186635,_0x2c15fc(0x652));F[_0x2c15fc(0x241)](_0x4d7653,_0x4d67c6);}return new Promise((_0x10ee42,_0x47f55b)=>{const _0x440441=_0x2c15fc;(0x0,Ue[_0x440441(0x555)])(Ds[_0x440441(0x180)][_0x440441(0x2d9)]+'\x20-i\x20'+_0x4d7653+_0x440441(0x4b1)+_0xb3669a+_0x440441(0x5b8),_0x58dfce=>{const _0x2b12b1=_0x440441;if(F[_0x2b12b1(0x1aa)](_0x4d7653),_0x58dfce){this[_0x2b12b1(0x6c6)][_0x2b12b1(0x39b)](this['instanceName']+'\x20('+this[_0x2b12b1(0x444)]['wuid']+_0x2b12b1(0x56b)),_0x47f55b(_0x58dfce);return;}this[_0x2b12b1(0x6c6)]['verbose'](this[_0x2b12b1(0x546)]+'\x20('+this['instance'][_0x2b12b1(0x638)]+_0x2b12b1(0x6f5)),_0x10ee42(_0xb3669a);});});}async[a0_0x5ca8c7(0x7af)](_0x3518b4){const _0x909c34=a0_0x5ca8c7;this[_0x909c34(0x6c6)]['verbose'](this['instanceName']+'\x20('+this[_0x909c34(0x444)][_0x909c34(0x638)]+_0x909c34(0x2f7));let _0x72774c=(0x0,Vt[_0x909c34(0x749)])(_0x909c34(0x316))[_0x909c34(0x13d)](_0x3518b4)[_0x909c34(0x5c0)]('hex'),_0x49e3c5=''+(0x0,j[_0x909c34(0x363)])(this[_0x909c34(0xfc)],_0x72774c+'.mp3');if(F[_0x909c34(0x690)](_0x49e3c5))return this[_0x909c34(0x6c6)][_0x909c34(0x39b)](this['instanceName']+'\x20('+this[_0x909c34(0x444)][_0x909c34(0x638)]+_0x909c34(0x808)),j[_0x909c34(0x180)]['basename'](_0x49e3c5);let _0x359dfd=''+(0x0,j[_0x909c34(0x363)])(this['storePath'],_0x909c34(0x1bd)+_0x72774c+_0x909c34(0x199));if((0x0,L['isURL'])(_0x3518b4)){let _0x312d56=new Date()[_0x909c34(0x51c)](),_0x5bbd8e=_0x3518b4+_0x909c34(0x2c4)+_0x312d56,_0x694e93=await ee[_0x909c34(0x180)][_0x909c34(0x507)](_0x5bbd8e,{'responseType':_0x909c34(0x2ef)});F['writeFileSync'](_0x359dfd,_0x694e93['data']);}else{let _0x5b21c6=Buffer[_0x909c34(0x298)](_0x3518b4,_0x909c34(0x652));F[_0x909c34(0x241)](_0x359dfd,_0x5b21c6);}return new Promise((_0x9753aa,_0x52c12b)=>{const _0x2aceef=_0x909c34;(0x0,Ue[_0x2aceef(0x555)])(Ds[_0x2aceef(0x180)][_0x2aceef(0x2d9)]+_0x2aceef(0x220)+_0x359dfd+'\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20'+_0x49e3c5+'\x20-y',_0x4ddbb1=>{const _0x18d0b7=_0x2aceef;if(F['unlinkSync'](_0x359dfd),_0x4ddbb1){this[_0x18d0b7(0x6c6)]['verbose'](this[_0x18d0b7(0x546)]+'\x20('+this[_0x18d0b7(0x444)][_0x18d0b7(0x638)]+_0x18d0b7(0x56b)),_0x52c12b(_0x4ddbb1);return;}this[_0x18d0b7(0x6c6)]['verbose'](this[_0x18d0b7(0x546)]+'\x20('+this[_0x18d0b7(0x444)][_0x18d0b7(0x638)]+_0x18d0b7(0x6f5)),_0x9753aa(j[_0x18d0b7(0x180)][_0x18d0b7(0x7ab)](_0x49e3c5));});});}async[a0_0x5ca8c7(0x64e)](_0x17a676){const _0x11cd41=a0_0x5ca8c7;let _0x15e083={},_0x59f8bf=_0x11cd41(0x387);if(_0x17a676['buttonMessage']?.['mediaMessage']){_0x59f8bf=_0x17a676[_0x11cd41(0x64e)][_0x11cd41(0x19a)]?.[_0x11cd41(0x430)]['toUpperCase']()??_0x11cd41(0x387),_0x15e083[_0x11cd41(0x3a9)]=_0x59f8bf[_0x11cd41(0x7c7)]()+_0x11cd41(0x6c3);let _0x2a035a=await this['prepareMediaMessage'](_0x17a676[_0x11cd41(0x64e)]['mediaMessage']);_0x15e083[_0x11cd41(0x319)]=_0x2a035a[_0x11cd41(0x319)][_0x15e083['mediaKey']],_0x15e083[_0x11cd41(0x1c6)]='*'+_0x17a676['buttonMessage'][_0x11cd41(0x401)]+_0x11cd41(0x560)+_0x17a676[_0x11cd41(0x64e)][_0x11cd41(0x134)];}let _0xd41723={'text':_0x17a676[_0x11cd41(0x64e)][_0x11cd41(0x1d4)][_0x11cd41(0x726)](_0x1aeb84=>_0x1aeb84['buttonText']),'ids':_0x17a676[_0x11cd41(0x64e)][_0x11cd41(0x1d4)]['map'](_0x15e877=>_0x15e877['buttonId'])};if(!(0x0,L[_0x11cd41(0x7ee)])(_0xd41723[_0x11cd41(0x67e)])||!(0x0,L[_0x11cd41(0x7ee)])(_0xd41723[_0x11cd41(0x230)]))throw new m('Button\x20texts\x20cannot\x20be\x20repeated',_0x11cd41(0x664));return await this['sendMessageWithTyping'](_0x17a676['number'],{'buttonsMessage':{'text':_0x15e083?.['mediaKey']?void 0x0:_0x17a676[_0x11cd41(0x64e)][_0x11cd41(0x401)],'contentText':_0x15e083?.[_0x11cd41(0x1c6)]??_0x17a676[_0x11cd41(0x64e)][_0x11cd41(0x134)],'footerText':_0x17a676[_0x11cd41(0x64e)]?.[_0x11cd41(0x55a)],'buttons':_0x17a676[_0x11cd41(0x64e)][_0x11cd41(0x1d4)][_0x11cd41(0x726)](_0x395f96=>({'buttonText':{'displayText':_0x395f96[_0x11cd41(0x7ac)]},'buttonId':_0x395f96[_0x11cd41(0x781)],'type':0x1})),'headerType':w[_0x11cd41(0x1a3)][_0x11cd41(0x6c3)]['ButtonsMessage'][_0x11cd41(0x5ed)][_0x59f8bf],[_0x15e083?.[_0x11cd41(0x3a9)]]:_0x15e083?.[_0x11cd41(0x319)]}},_0x17a676?.['options']);}async['locationMessage'](_0xa18a5f){const _0xf19bd9=a0_0x5ca8c7;return await this['sendMessageWithTyping'](_0xa18a5f[_0xf19bd9(0x209)],{'locationMessage':{'degreesLatitude':_0xa18a5f['locationMessage'][_0xf19bd9(0x803)],'degreesLongitude':_0xa18a5f[_0xf19bd9(0x78b)]['longitude'],'name':_0xa18a5f[_0xf19bd9(0x78b)]?.[_0xf19bd9(0x786)],'address':_0xa18a5f['locationMessage']?.[_0xf19bd9(0x257)]}},_0xa18a5f?.[_0xf19bd9(0x1bb)]);}async[a0_0x5ca8c7(0x138)](_0x2a413a){const _0x5951f9=a0_0x5ca8c7;let _0x13be54={},_0x1dd595=async _0x2a4024=>{const _0x10bdcb=a0_0x5cfa;let _0x1e1a41=_0x10bdcb(0x310)+_0x2a4024[_0x10bdcb(0x7a3)]+'\x0aFN:'+_0x2a4024['fullName']+'\x0a';_0x2a4024[_0x10bdcb(0x779)]&&(_0x1e1a41+=_0x10bdcb(0x299)+_0x2a4024[_0x10bdcb(0x779)]+';\x0a'),_0x2a4024[_0x10bdcb(0x232)]&&(_0x1e1a41+='EMAIL:'+_0x2a4024['email']+'\x0a'),_0x2a4024[_0x10bdcb(0x123)]&&(_0x1e1a41+=_0x10bdcb(0x639)+_0x2a4024[_0x10bdcb(0x123)]+'\x0a');let _0x568fc5='',_0x39909=0x1;if(_0x2a4024[_0x10bdcb(0x1ae)]){let _0x4c9570=_0x2a4024[_0x10bdcb(0x1ae)][_0x10bdcb(0x42a)]('|');for(let _0x5a6628 of _0x4c9570){let _0xf3ce9e=await this[_0x10bdcb(0x322)]({'numbers':[_0x5a6628]}),_0x2137e0=(_0xf3ce9e[_0x10bdcb(0x293)]>0x0?_0xf3ce9e[0x0][_0x10bdcb(0x801)]:this[_0x10bdcb(0x543)](_0x5a6628))[_0x10bdcb(0x2cf)](_0x10bdcb(0x505),'');_0x568fc5+=_0x10bdcb(0x41e)+_0x39909+_0x10bdcb(0x701)+_0x2137e0+':'+_0x5a6628+_0x10bdcb(0x32b)+_0x39909+'.X-ABLabel:Celular\x0a',_0x39909++;}}return _0x1e1a41+=_0x568fc5+_0x10bdcb(0x2b4),_0x1e1a41;};return _0x2a413a[_0x5951f9(0x138)][_0x5951f9(0x293)]===0x1?_0x13be54[_0x5951f9(0x138)]={'displayName':_0x2a413a['contactMessage'][0x0][_0x5951f9(0x7a3)],'vcard':await _0x1dd595(_0x2a413a[_0x5951f9(0x138)][0x0])}:_0x13be54[_0x5951f9(0x699)]={'displayName':_0x2a413a['contactMessage'][_0x5951f9(0x293)]+'\x20contacts','contacts':await Promise[_0x5951f9(0x793)](_0x2a413a[_0x5951f9(0x138)][_0x5951f9(0x726)](async _0x8b2599=>({'displayName':_0x8b2599[_0x5951f9(0x7a3)],'vcard':await _0x1dd595(_0x8b2599)})))},await this[_0x5951f9(0x46f)](_0x2a413a[_0x5951f9(0x209)],{..._0x13be54},_0x2a413a?.[_0x5951f9(0x1bb)]);}async[a0_0x5ca8c7(0x231)](_0x506e66){const _0x3f6e0d=a0_0x5ca8c7;return await this[_0x3f6e0d(0x46f)](_0x506e66[_0x3f6e0d(0x231)][_0x3f6e0d(0x3c3)]['remoteJid'],{'reactionMessage':{'key':_0x506e66[_0x3f6e0d(0x231)][_0x3f6e0d(0x3c3)],'text':_0x506e66['reactionMessage']['reaction']}});}async['whatsappNumber'](_0x2cb8f4){const _0x81f48e=a0_0x5ca8c7;let _0x217163=[];for await(let _0x509778 of _0x2cb8f4['numbers']){let _0xa213cd=this['createJid'](_0x509778),_0x4ccc3e=!0x1;try{if((0x0,w[_0x81f48e(0x3f5)])(_0xa213cd)){let _0x188c3=(await this[_0x81f48e(0x4b2)]['chat'][_0x81f48e(0x51f)]({'where':{'_id':_0xa213cd}},this[_0x81f48e(0x444)][_0x81f48e(0x638)]))[_0x81f48e(0x437)];_0x188c3?(_0x4ccc3e=!0x0,_0x217163[_0x81f48e(0x7cb)](new he(_0x188c3['id'],_0x4ccc3e,_0x188c3?.[_0x81f48e(0x20c)]))):(_0x188c3=await this[_0x81f48e(0x6d5)]({'groupJid':_0xa213cd},_0x81f48e(0x40a)),_0x217163[_0x81f48e(0x7cb)](new he(_0x188c3['id'],!!_0x188c3?.['id'],_0x188c3?.['subject'])));}else{if(_0xa213cd[_0x81f48e(0x253)](_0x81f48e(0x267)))_0x217163[_0x81f48e(0x7cb)](new he(_0xa213cd,!0x0));else{let _0x5299dc=(await this[_0x81f48e(0x158)][_0x81f48e(0xf2)](_0xa213cd))[0x0];_0x217163[_0x81f48e(0x7cb)](new he(_0x5299dc[_0x81f48e(0x801)],_0x5299dc['exists']));}}}catch{(0x0,w[_0x81f48e(0x3f5)])(_0xa213cd)||await this[_0x81f48e(0x648)](_0xa213cd),_0x217163[_0x81f48e(0x7cb)](new he(_0x509778,!0x1));}}return _0x217163;}async['deleteImportedChat'](_0x326ab7){const _0x428006=a0_0x5ca8c7;try{await this[_0x428006(0x4b2)][_0x428006(0x5f1)][_0x428006(0x51f)]({'where':{'_id':_0x326ab7,'imported':!0x0}},this[_0x428006(0x444)][_0x428006(0x638)])&&(await this[_0x428006(0x4b2)][_0x428006(0x5f1)][_0x428006(0x773)](_0x326ab7,this[_0x428006(0x444)]['wuid']),this['logger']['info'](_0x428006(0x2e2)+_0x326ab7+_0x428006(0x562)));}catch(_0x1f1ee0){let _0x36d46d=_0x428006(0x17f),_0x527a9b=_0x1f1ee0 instanceof Error?_0x1f1ee0[_0x428006(0x319)]:typeof _0x1f1ee0==_0x428006(0x4c4)?JSON['stringify'](_0x1f1ee0):_0x1f1ee0,_0x8f9e84=_0x36d46d+':\x20'+_0x527a9b;this[_0x428006(0x6c6)][_0x428006(0x73d)](this[_0x428006(0x546)]+'\x20('+this['instance'][_0x428006(0x638)]+'):\x20'+_0x8f9e84);}}async['markMessageAsRead'](_0x4b65d3){const _0x678fe5=a0_0x5ca8c7;try{let _0x31ce28=_0x4b65d3[_0x678fe5(0x41b)][_0x678fe5(0xe1)](_0x2fbbc2=>(0x0,w[_0x678fe5(0x3f5)])(_0x2fbbc2[_0x678fe5(0x461)])||(0x0,w['isJidUser'])(_0x2fbbc2[_0x678fe5(0x461)]))['map'](_0x4afa65=>({'remoteJid':_0x4afa65[_0x678fe5(0x461)],'fromMe':_0x4afa65[_0x678fe5(0x79a)],'id':_0x4afa65['id']}));await this[_0x678fe5(0x158)][_0x678fe5(0x41b)](_0x31ce28);let _0x22a8fe=_0x31ce28['map'](_0x56f4b1=>this[_0x678fe5(0x176)](_0x56f4b1,{'status':'READ','owner':this['instance'][_0x678fe5(0x638)]})),_0xee3408=_0x31ce28[_0x678fe5(0x726)](_0x419051=>this[_0x678fe5(0x4b2)][_0x678fe5(0x5f1)][_0x678fe5(0x127)]({'where':{'_id':_0x419051[_0x678fe5(0x461)]}},{'unreadcount':0x0},this[_0x678fe5(0x444)][_0x678fe5(0x638)])),[_0x8bf237,_0x1576cb]=await Promise[_0x678fe5(0x793)]([Promise[_0x678fe5(0x793)](_0x22a8fe),Promise[_0x678fe5(0x793)](_0xee3408)]);return _0x1576cb[_0x678fe5(0xe1)](_0x2bcced=>_0x2bcced!==null)['forEach'](_0x54897b=>{const _0xffd9a=_0x678fe5;q(this[_0xffd9a(0x546)],'chats',{'chat':_0x54897b});}),{'message':_0x678fe5(0x46d),'read':_0x678fe5(0x7d6)};}catch(_0x55c832){let _0x31439e='Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida',_0x4f8d70=_0x55c832 instanceof Error?_0x55c832['message']:typeof _0x55c832==_0x678fe5(0x4c4)?JSON[_0x678fe5(0x79e)](_0x55c832):_0x55c832,_0x90afca=_0x31439e+':\x20'+_0x4f8d70;throw this[_0x678fe5(0x6c6)][_0x678fe5(0x73d)](this[_0x678fe5(0x546)]+'\x20('+this['instance'][_0x678fe5(0x638)]+_0x678fe5(0x17a)+_0x90afca),new x(_0x90afca);}}async[a0_0x5ca8c7(0x66d)](_0x4e101c){const _0x261b07=a0_0x5ca8c7;let _0x5f17fe={'where':{'key':{'remoteJid':_0x4e101c}},'limit':0x1},_0x65d09d=await this[_0x261b07(0x3df)](_0x5f17fe);return _0x65d09d||(this['logger'][_0x261b07(0x73d)]('Last\x20message\x20not\x20found\x20for\x20number:\x20'+_0x4e101c),null);}async[a0_0x5ca8c7(0x743)](_0x258cd7){const _0x8dfdb5=a0_0x5ca8c7;this[_0x8dfdb5(0x6c6)][_0x8dfdb5(0x39b)](this[_0x8dfdb5(0x546)]+'\x20('+this[_0x8dfdb5(0x444)][_0x8dfdb5(0x638)]+_0x8dfdb5(0xfb));try{let _0x53dccd=_0x258cd7['lastMessage'],_0x4ceff0=_0x258cd7[_0x8dfdb5(0x5f1)];if(!_0x53dccd&&_0x4ceff0?_0x53dccd=await this[_0x8dfdb5(0x66d)](_0x4ceff0):(_0x53dccd=_0x258cd7[_0x8dfdb5(0x356)],_0x53dccd[_0x8dfdb5(0x4e1)]=_0x53dccd?.['messageTimestamp']??Date[_0x8dfdb5(0x494)](),_0x4ceff0=_0x53dccd?.[_0x8dfdb5(0x3c3)]?.[_0x8dfdb5(0x461)]),!_0x53dccd||Object[_0x8dfdb5(0x818)](_0x53dccd)[_0x8dfdb5(0x293)]===0x0)throw new G(_0x8dfdb5(0x1bc));this[_0x8dfdb5(0x6c6)]['verbose'](this[_0x8dfdb5(0x546)]+'\x20('+this['instance'][_0x8dfdb5(0x638)]+'):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x4ceff0);try{await this[_0x8dfdb5(0x158)][_0x8dfdb5(0x6d1)]({'archive':_0x258cd7[_0x8dfdb5(0x109)],'lastMessages':[_0x53dccd]},this[_0x8dfdb5(0x543)](_0x4ceff0));}catch(_0x594cc8){let _0x274e4b='Error\x20in\x20chatModify\x20for\x20number\x20'+_0x4ceff0,_0x598aff=_0x594cc8 instanceof Error?_0x594cc8[_0x8dfdb5(0x319)]:typeof _0x594cc8==_0x8dfdb5(0x4c4)?JSON[_0x8dfdb5(0x79e)](_0x594cc8):_0x594cc8,_0x173a6b=_0x274e4b+':\x20'+_0x598aff;this[_0x8dfdb5(0x6c6)]['error'](this['instanceName']+'\x20('+this[_0x8dfdb5(0x444)]['wuid']+_0x8dfdb5(0x17a)+_0x173a6b);}this[_0x8dfdb5(0x6c6)][_0x8dfdb5(0x39b)](this['instanceName']+'\x20('+this[_0x8dfdb5(0x444)]['wuid']+'):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x4ceff0);let _0x516353=await this[_0x8dfdb5(0x4b2)]['chat'][_0x8dfdb5(0x127)]({'where':{'_id':_0x53dccd?.[_0x8dfdb5(0x3c3)]?.[_0x8dfdb5(0x461)]}},{'archived':_0x258cd7[_0x8dfdb5(0x109)]},this[_0x8dfdb5(0x444)]['wuid']);return _0x516353?(this[_0x8dfdb5(0x6c6)][_0x8dfdb5(0x39b)](this[_0x8dfdb5(0x546)]+'\x20('+this['instance'][_0x8dfdb5(0x638)]+_0x8dfdb5(0x778)+JSON[_0x8dfdb5(0x79e)](_0x516353)),q(this[_0x8dfdb5(0x546)],_0x8dfdb5(0x2ea),{'chat':_0x516353})):this['logger'][_0x8dfdb5(0x73d)](this[_0x8dfdb5(0x546)]+'\x20('+this[_0x8dfdb5(0x444)]['wuid']+_0x8dfdb5(0x48c)+_0x4ceff0),{'chatId':_0x4ceff0,'archived':_0x258cd7[_0x8dfdb5(0x109)]};}catch(_0x244bde){let _0x197da7=_0x8dfdb5(0x567),_0x48f36f=_0x244bde instanceof Error?_0x244bde[_0x8dfdb5(0x319)]:typeof _0x244bde==_0x8dfdb5(0x4c4)?JSON['stringify'](_0x244bde):_0x244bde,_0x1c3bdc=_0x197da7+':\x20'+_0x48f36f;throw this['logger']['error'](this[_0x8dfdb5(0x546)]+'\x20('+this['instance']['wuid']+_0x8dfdb5(0x17a)+_0x1c3bdc),new x(_0x1c3bdc);}}async[a0_0x5ca8c7(0x773)](_0x1901cc){const _0x4377fd=a0_0x5ca8c7;this[_0x4377fd(0x6c6)][_0x4377fd(0x39b)](this[_0x4377fd(0x546)]+'\x20('+this[_0x4377fd(0x444)][_0x4377fd(0x638)]+_0x4377fd(0x7dc));try{let _0x2bad78=await this[_0x4377fd(0x66d)](_0x1901cc);if(!_0x2bad78||Object[_0x4377fd(0x818)](_0x2bad78)[_0x4377fd(0x293)]===0x0)throw new G(_0x4377fd(0x1bc));let _0x5889a6=_0x2bad78[0x0];this[_0x4377fd(0x6c6)]['verbose'](this['instanceName']+'\x20('+this[_0x4377fd(0x444)][_0x4377fd(0x638)]+_0x4377fd(0x539)+_0x1901cc);try{await this[_0x4377fd(0x158)][_0x4377fd(0x6d1)]({'delete':!0x0,'lastMessages':[{'key':_0x5889a6['key'],'messageTimestamp':_0x5889a6[_0x4377fd(0x4e1)]}]},this[_0x4377fd(0x543)](_0x1901cc));}catch(_0x418e14){this[_0x4377fd(0x6c6)][_0x4377fd(0x73d)](_0x4377fd(0x384)+_0x1901cc+':\x20'+_0x418e14[_0x4377fd(0x30c)]());}this['logger'][_0x4377fd(0x39b)](this[_0x4377fd(0x546)]+'\x20('+this['instance']['wuid']+'):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x1901cc);return;}catch(_0x313e8f){throw this[_0x4377fd(0x6c6)][_0x4377fd(0x73d)](this[_0x4377fd(0x546)]+'\x20('+this['instance']['wuid']+'):Error\x20occurred\x20while\x20archiving\x20chat:\x20'+_0x313e8f[_0x4377fd(0x30c)]()),new x({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0x313e8f['toString']()]});}}async[a0_0x5ca8c7(0x703)](_0x2212ee){const _0x5930ca=a0_0x5ca8c7;try{let _0x30fb49=await this[_0x5930ca(0x158)][_0x5930ca(0x373)](_0x2212ee[_0x5930ca(0x461)],{'delete':_0x2212ee});try{let _0x340113=await this[_0x5930ca(0x176)](_0x2212ee,{'status':'DELETED','owner':this[_0x5930ca(0x444)][_0x5930ca(0x638)]});this[_0x5930ca(0x6c6)][_0x5930ca(0x39b)](this[_0x5930ca(0x546)]+'\x20('+this[_0x5930ca(0x444)]['wuid']+_0x5930ca(0x66e)+_0x340113);}catch(_0x511dc1){this[_0x5930ca(0x6c6)][_0x5930ca(0x73d)](_0x5930ca(0x118)+_0x511dc1);}return _0x30fb49;}catch(_0x3d7f93){throw new x(_0x5930ca(0x422),_0x3d7f93?.[_0x5930ca(0x30c)]());}}async[a0_0x5ca8c7(0x6f0)](_0x5c7fd){const _0x213eb3=a0_0x5ca8c7;try{let _0x469d3c=_0x5c7fd?.[_0x213eb3(0x319)]?_0x5c7fd:await this[_0x213eb3(0x75d)](_0x5c7fd[_0x213eb3(0x3c3)],!0x0);for(let _0x21ddc5 of $a)_0x469d3c[_0x213eb3(0x319)][_0x21ddc5]&&(_0x469d3c[_0x213eb3(0x319)]=_0x469d3c[_0x213eb3(0x319)][_0x21ddc5][_0x213eb3(0x319)]);let _0x5e36c3,_0x91791a;for(let _0x4bbf43 of Na)if(_0x5e36c3=_0x469d3c['message'][_0x4bbf43],_0x5e36c3){_0x91791a=_0x4bbf43;break;}if(!_0x5e36c3)throw _0x213eb3(0x1b5);typeof _0x5e36c3[_0x213eb3(0x3a9)]==_0x213eb3(0x4c4)&&(_0x469d3c[_0x213eb3(0x319)]=JSON[_0x213eb3(0x27e)](JSON[_0x213eb3(0x79e)](_0x469d3c[_0x213eb3(0x319)])));let _0x360281=await(0x0,w[_0x213eb3(0x71b)])({'key':_0x469d3c?.[_0x213eb3(0x3c3)],'message':_0x469d3c?.['message']},'buffer',{},{'logger':(0x0,Jt[_0x213eb3(0x180)])({'level':_0x213eb3(0x178)}),'reuploadRequest':this['client']['updateMediaMessage']});if(!(_0x360281 instanceof Buffer))throw new Error(_0x213eb3(0x792));let _0x54c8a2=this[_0x213eb3(0x588)][_0x213eb3(0x507)](_0x213eb3(0x378)),_0x1b1208,_0x41cf92;if(_0x5e36c3[_0x213eb3(0x208)])_0x1b1208=_0x5e36c3[_0x213eb3(0x208)];else{let _0x4d41d5=_0x5e36c3[_0x213eb3(0x79c)]?.['match'](/\/(\w+)/),_0x5636e0=_0x4d41d5?_0x4d41d5[0x1]:null;if(!_0x5636e0)throw new Error('File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message');_0x1b1208=(0x0,Y['v4'])()+'.'+_0x5636e0;}_0x91791a==='audioMessage'?_0x41cf92=_0x213eb3(0x7f0)+await this[_0x213eb3(0x7af)](_0x360281[_0x213eb3(0x30c)](_0x213eb3(0x652))):(await this[_0x213eb3(0x1c0)](_0x360281,_0x1b1208),_0x41cf92=_0x213eb3(0x7f0)+_0x1b1208);let _0x222e1c=this['configService'][_0x213eb3(0x507)]('SERVER')[_0x213eb3(0x406)];if(!_0x222e1c){let _0x16dbf6=this[_0x213eb3(0x588)]['get'](_0x213eb3(0x2ad));_0x222e1c=_0x213eb3(0x714)+(_0x16dbf6&&_0x16dbf6['FULLCHAIN'][_0x213eb3(0x42a)]('/')[0x4]);}_0x41cf92=''+_0x222e1c+_0x41cf92;let _0x672f27=0xc*0x3c*0x3c*0x3e8,_0x23731a={'where':{'_id':_0x469d3c['key']['id']}},_0x418d7d={'message_normalized.fileUrl':_0x41cf92,'message_normalized.expires_fileUrl':Date[_0x213eb3(0x494)]()+_0x672f27};try{let _0x4cd997=await this[_0x213eb3(0x4b2)][_0x213eb3(0x319)][_0x213eb3(0x13d)](_0x23731a,_0x418d7d,this['instance'][_0x213eb3(0x638)]);_0x4cd997&&q(this['instanceName'],'messages',{'message':_0x4cd997});}catch(_0x5ec32b){let _0x3d607f=_0x213eb3(0x5f7),_0x15ae64=_0x5ec32b instanceof Error?_0x5ec32b[_0x213eb3(0x319)]:typeof _0x5ec32b==_0x213eb3(0x4c4)?JSON['stringify'](_0x5ec32b):_0x5ec32b,_0x1048a8=_0x3d607f+':\x20'+_0x15ae64;this[_0x213eb3(0x6c6)][_0x213eb3(0x73d)](this[_0x213eb3(0x546)]+'\x20('+this['instance'][_0x213eb3(0x638)]+'):\x20'+_0x1048a8);}return{'mediaType':_0x91791a,'fileName':_0x5e36c3[_0x213eb3(0x208)],'caption':_0x5e36c3[_0x213eb3(0x204)],'size':{'fileLength':_0x5e36c3[_0x213eb3(0x657)],'height':_0x5e36c3[_0x213eb3(0x4f3)],'width':_0x5e36c3[_0x213eb3(0x643)]},'mimetype':_0x5e36c3['mimetype'],'base64':_0x360281[_0x213eb3(0x30c)]('base64'),'fileUrl':_0x41cf92,'expires_fileUrl':Date[_0x213eb3(0x494)]()+_0x672f27};}catch(_0x3a7d23){let _0x1c6b7c=_0x213eb3(0x381),_0x1f4ee5=_0x3a7d23 instanceof Error?_0x3a7d23[_0x213eb3(0x319)]:typeof _0x3a7d23==_0x213eb3(0x4c4)?JSON['stringify'](_0x3a7d23):_0x3a7d23,_0x1bca97=_0x1c6b7c+':\x20'+_0x1f4ee5;throw this['logger'][_0x213eb3(0x73d)](this[_0x213eb3(0x546)]+'\x20('+this[_0x213eb3(0x444)][_0x213eb3(0x638)]+'):\x20'+_0x1bca97),new m(_0x1bca97);}}async[a0_0x5ca8c7(0x1c0)](_0x50ace5,_0x5909a6){const _0x58c939=a0_0x5ca8c7;let _0x5230a5=j[_0x58c939(0x180)][_0x58c939(0x363)](__dirname,_0x58c939(0x27a));F[_0x58c939(0x690)](_0x5230a5)||F[_0x58c939(0x33c)](_0x5230a5,{'recursive':!0x0});let _0x374578=j['default'][_0x58c939(0x363)](_0x5230a5,_0x5909a6);return new Promise((_0x3484e5,_0x11ea66)=>{const _0xbdd6d0=_0x58c939;F[_0xbdd6d0(0x175)](_0x374578,_0x50ace5,_0x561b7a=>{const _0x2a328e=_0xbdd6d0;_0x561b7a?(this[_0x2a328e(0x6c6)][_0x2a328e(0x73d)](_0x2a328e(0x615)+(_0x561b7a instanceof Error?_0x561b7a[_0x2a328e(0x319)]:JSON['stringify'](_0x561b7a,null,0x2))),_0x11ea66(_0x561b7a)):(this[_0x2a328e(0x6c6)]['log'](_0x2a328e(0x66a)+_0x374578),_0x3484e5(_0x374578));});});}async['fetchContacts'](_0x504456){const _0x36eafd=a0_0x5ca8c7;return await this[_0x36eafd(0x4b2)][_0x36eafd(0x51e)]['find'](_0x504456,this[_0x36eafd(0x444)][_0x36eafd(0x638)]);}async[a0_0x5ca8c7(0x683)](){const _0x237790=a0_0x5ca8c7;return await this[_0x237790(0x4b2)]['label'][_0x237790(0x509)]({'where':{}},this['instance']['wuid']);}async[a0_0x5ca8c7(0x3df)](_0x2d1c15){const _0x5c513b=a0_0x5ca8c7;return await this['repository'][_0x5c513b(0x319)][_0x5c513b(0x509)](_0x2d1c15,this[_0x5c513b(0x444)][_0x5c513b(0x638)]);}async[a0_0x5ca8c7(0x6de)](){const _0x44096e=a0_0x5ca8c7;return this['repository'][_0x44096e(0x5f1)][_0x44096e(0x57f)](this[_0x44096e(0x444)][_0x44096e(0x638)]),this[_0x44096e(0x4b2)][_0x44096e(0x5f1)]['updateMissingEtiquetas'](this[_0x44096e(0x444)]['wuid']),this[_0x44096e(0x4b2)][_0x44096e(0x5f1)]['updateMissingTags'](this[_0x44096e(0x444)][_0x44096e(0x638)]),this[_0x44096e(0x4b2)]['chat'][_0x44096e(0x6a0)](this[_0x44096e(0x444)]['wuid']),await this['repository']['chat']['find']({'where':{}},this[_0x44096e(0x444)][_0x44096e(0x638)]);}async[a0_0x5ca8c7(0x802)](_0x32ba8d){const _0x4d0d9f=a0_0x5ca8c7;try{if(!Array[_0x4d0d9f(0xdc)](_0x32ba8d)||_0x32ba8d['length']===0x0)throw new Error(_0x4d0d9f(0x177));let _0x40fae2=[],_0x2ab4f4=[];for(let _0x33cfe9 of _0x32ba8d){if(_0x33cfe9['_id'])_0x33cfe9[_0x4d0d9f(0x6ae)]=this['createJid'](_0x33cfe9[_0x4d0d9f(0x6ae)]);else continue;await this[_0x4d0d9f(0x4b2)]['chat'][_0x4d0d9f(0x51f)]({'where':{'_id':_0x33cfe9[_0x4d0d9f(0x6ae)]}},this[_0x4d0d9f(0x444)][_0x4d0d9f(0x638)])?_0x2ab4f4[_0x4d0d9f(0x7cb)]({'_id':_0x33cfe9[_0x4d0d9f(0x6ae)],'leadInfo':_0x33cfe9['leadInfo'],'owner':this[_0x4d0d9f(0x444)][_0x4d0d9f(0x638)]}):_0x40fae2[_0x4d0d9f(0x7cb)]({'_id':_0x33cfe9[_0x4d0d9f(0x6ae)],'owner':this['instance'][_0x4d0d9f(0x638)],'leadInfo':_0x33cfe9[_0x4d0d9f(0x3d0)],'imported':!0x0});}return _0x2ab4f4['length']>0x0&&await this[_0x4d0d9f(0x4b2)][_0x4d0d9f(0x5f1)][_0x4d0d9f(0x466)](_0x2ab4f4[_0x4d0d9f(0x726)](_0x3587ce=>({'query':{'where':{'_id':_0x3587ce['_id'],'owner':this[_0x4d0d9f(0x444)]['wuid']}},'update':_0x3587ce}))),_0x40fae2['length']>0x0&&await this[_0x4d0d9f(0x4b2)][_0x4d0d9f(0x5f1)][_0x4d0d9f(0x631)](_0x40fae2,this[_0x4d0d9f(0x444)][_0x4d0d9f(0x638)]),{'updated':_0x2ab4f4[_0x4d0d9f(0x293)],'inserted':_0x40fae2[_0x4d0d9f(0x293)]};}catch(_0x3fc02a){let _0x10a5e2=_0x4d0d9f(0x116),_0x5e2d6e=_0x3fc02a instanceof Error?_0x3fc02a[_0x4d0d9f(0x319)]:typeof _0x3fc02a==_0x4d0d9f(0x4c4)?JSON['stringify'](_0x3fc02a):_0x3fc02a,_0x199881=_0x10a5e2+':\x20'+_0x5e2d6e;throw this[_0x4d0d9f(0x6c6)][_0x4d0d9f(0x73d)](this[_0x4d0d9f(0x546)]+'\x20('+this['instance'][_0x4d0d9f(0x638)]+_0x4d0d9f(0x17a)+_0x199881),new m(_0x199881);}}async[a0_0x5ca8c7(0x169)](_0x12681a){const _0x1ad2e7=a0_0x5ca8c7;try{if(!Array[_0x1ad2e7(0xdc)](_0x12681a)||_0x12681a[_0x1ad2e7(0x293)]===0x0)throw new Error(_0x1ad2e7(0x177));let _0x2e8fe0=0x64,_0x145962=0x0;for(let _0x179928=0x0;_0x179928<_0x12681a[_0x1ad2e7(0x293)];_0x179928+=_0x2e8fe0){let _0x3094d8=_0x12681a[_0x1ad2e7(0x80c)](_0x179928,_0x179928+_0x2e8fe0),{updated:_0x1b391d}=await this[_0x1ad2e7(0x796)](_0x3094d8);_0x145962+=_0x1b391d;}return{'updated':_0x145962};}catch(_0x2b4489){let _0x22dbd7=_0x1ad2e7(0x116),_0x5d34f9=_0x2b4489 instanceof Error?_0x2b4489['message']:typeof _0x2b4489=='object'?JSON['stringify'](_0x2b4489):_0x2b4489,_0x22cba8=_0x22dbd7+':\x20'+_0x5d34f9;throw this[_0x1ad2e7(0x6c6)][_0x1ad2e7(0x73d)](this['instanceName']+'\x20('+this['instance'][_0x1ad2e7(0x638)]+_0x1ad2e7(0x17a)+_0x22cba8),new m(_0x22cba8);}}async[a0_0x5ca8c7(0x796)](_0x38e103){const _0x368f9c=a0_0x5ca8c7;try{let _0xc18ac1=await this['repository'][_0x368f9c(0x6a2)][_0x368f9c(0x509)]({'where':{}},this[_0x368f9c(0x444)]['wuid']),_0x225c8a=new Set(_0xc18ac1[_0x368f9c(0x726)](_0x18f193=>_0x18f193[_0x368f9c(0x6ae)])),_0x186924=[],_0x745e4=[];for(let _0x378baa of _0x38e103){if(!_0x378baa[_0x368f9c(0x6ae)])continue;_0x378baa[_0x368f9c(0x6ae)]=this[_0x368f9c(0x543)](_0x378baa[_0x368f9c(0x6ae)]);let _0x283cd4=await this['repository'][_0x368f9c(0x5f1)]['findOne']({'where':{'_id':_0x378baa[_0x368f9c(0x6ae)]}},this[_0x368f9c(0x444)]['wuid']),_0x4c775f={};if(Object[_0x368f9c(0x1ce)](_0x378baa['leadInfo'])[_0x368f9c(0x57a)](([_0x243248,_0x2ea2ce])=>{const _0x380dfa=_0x368f9c;_0x4c775f[_0x380dfa(0x2af)+_0x243248]=_0x2ea2ce;}),_0x283cd4&&!_0x283cd4[_0x368f9c(0x4ee)]){let _0x42672d=(_0x378baa[_0x368f9c(0x3d0)][_0x368f9c(0xc9)]||[])[_0x368f9c(0xe1)](_0x242469=>_0x225c8a[_0x368f9c(0x183)](_0x242469)),_0x2d961c=new Set(_0x283cd4['leadInfo'][_0x368f9c(0xc9)]||[]),_0x509004=_0x42672d[_0x368f9c(0xe1)](_0x531865=>!_0x2d961c[_0x368f9c(0x183)](_0x531865)),_0x40d3b3=[..._0x2d961c][_0x368f9c(0xe1)](_0x1e2ef8=>!_0x42672d[_0x368f9c(0x253)](_0x1e2ef8));_0x745e4[_0x368f9c(0x7cb)](..._0x509004['map'](_0x4e4d63=>this[_0x368f9c(0x28f)](_0x4e4d63,_0x378baa[_0x368f9c(0x6ae)]))),_0x745e4[_0x368f9c(0x7cb)](..._0x40d3b3[_0x368f9c(0x726)](_0x5d47c7=>this[_0x368f9c(0x5cc)](_0x5d47c7,_0x378baa[_0x368f9c(0x6ae)]))),_0x378baa[_0x368f9c(0x3d0)]['etiquetas']=_0x42672d,_0x186924['push']({'query':{'where':{'_id':_0x378baa[_0x368f9c(0x6ae)],'owner':this[_0x368f9c(0x444)][_0x368f9c(0x638)]}},'update':_0x4c775f});}else _0x4c775f['imported']=!0x0,_0x186924['push']({'query':{'where':{'_id':_0x378baa[_0x368f9c(0x6ae)],'owner':this[_0x368f9c(0x444)][_0x368f9c(0x638)]}},'update':_0x4c775f});}let _0x4731ae=await this[_0x368f9c(0x4b2)][_0x368f9c(0x5f1)][_0x368f9c(0x466)](_0x186924);return await Promise[_0x368f9c(0x793)](_0x745e4),{'updated':_0x4731ae};}catch(_0x25fa7d){let _0x20349d=_0x368f9c(0x116),_0x2ca973=_0x25fa7d instanceof Error?_0x25fa7d[_0x368f9c(0x319)]:typeof _0x25fa7d==_0x368f9c(0x4c4)?JSON[_0x368f9c(0x79e)](_0x25fa7d):_0x25fa7d,_0x316d37=_0x20349d+':\x20'+_0x2ca973;throw this[_0x368f9c(0x6c6)][_0x368f9c(0x73d)](this[_0x368f9c(0x546)]+'\x20('+this[_0x368f9c(0x444)]['wuid']+_0x368f9c(0x17a)+_0x316d37),new m(_0x316d37);}}async[a0_0x5ca8c7(0x77f)](){const _0x11a43d=a0_0x5ca8c7;return await this[_0x11a43d(0x158)][_0x11a43d(0x77f)]();}async[a0_0x5ca8c7(0x4a5)](_0x57b60a){const _0x343df7=a0_0x5ca8c7;try{return await this['client'][_0x343df7(0x62b)](_0x57b60a[_0x343df7(0x239)][_0x343df7(0x6cb)]),await this[_0x343df7(0x158)][_0x343df7(0xee)](_0x57b60a[_0x343df7(0x239)][_0x343df7(0x5b5)]),await this['client'][_0x343df7(0x34a)](_0x57b60a[_0x343df7(0x239)][_0x343df7(0x3e2)]),await this[_0x343df7(0x158)][_0x343df7(0x63f)](_0x57b60a[_0x343df7(0x239)][_0x343df7(0x14b)]),await this[_0x343df7(0x158)][_0x343df7(0x462)](_0x57b60a[_0x343df7(0x239)][_0x343df7(0x3db)]),await this[_0x343df7(0x158)][_0x343df7(0x519)](_0x57b60a[_0x343df7(0x239)]['groupadd']),this[_0x343df7(0x158)]?.['ws']?.[_0x343df7(0x261)](),{'update':_0x343df7(0x7d6),'data':{'readreceipts':_0x57b60a['privacySettings'][_0x343df7(0x6cb)],'profile':_0x57b60a[_0x343df7(0x239)]['profile'],'status':_0x57b60a[_0x343df7(0x239)][_0x343df7(0x3e2)],'online':_0x57b60a[_0x343df7(0x239)][_0x343df7(0x14b)],'last':_0x57b60a[_0x343df7(0x239)][_0x343df7(0x3db)],'groupadd':_0x57b60a['privacySettings'][_0x343df7(0x619)]}};}catch(_0x14fb11){let _0x2df40a='Erro\x20ao\x20alterar\x20privacidade',_0x2aedbe=_0x14fb11 instanceof Error?_0x14fb11[_0x343df7(0x319)]:typeof _0x14fb11==_0x343df7(0x4c4)?JSON[_0x343df7(0x79e)](_0x14fb11):_0x14fb11,_0x178338=_0x2df40a+':\x20'+_0x2aedbe;throw this['logger'][_0x343df7(0x73d)](this['instanceName']+'\x20('+this[_0x343df7(0x444)][_0x343df7(0x638)]+_0x343df7(0x17a)+_0x178338),new m(_0x178338);}}async[a0_0x5ca8c7(0x434)](_0x516b43){const _0x785ff0=a0_0x5ca8c7;let _0xc27ed1=(_0x516b43?this['createJid'](_0x516b43):this[_0x785ff0(0x158)]?.['user']?.['id'])[_0x785ff0(0x2cf)](/:\d{1,2}@/g,'@');this[_0x785ff0(0x6c6)][_0x785ff0(0x39b)](this[_0x785ff0(0x546)]+'\x20('+this[_0x785ff0(0x444)][_0x785ff0(0x638)]+_0x785ff0(0x460)+_0xc27ed1);let _0x411adf=await this[_0x785ff0(0x4b2)][_0x785ff0(0x51e)][_0x785ff0(0x51f)]({'where':{'_id':_0xc27ed1}},this['instance'][_0x785ff0(0x638)]),_0x2ff8d0=_0x411adf?_0x411adf[_0x785ff0(0x659)]:null;try{let _0x2f1222=(await this[_0x785ff0(0x322)]({'numbers':[_0xc27ed1]}))?.[_0x785ff0(0xf6)](),_0x433992=(await this[_0x785ff0(0x2e3)](_0xc27ed1,null,!0x1))[_0x785ff0(0x3e0)][_0x785ff0(0x601)],_0x381f1a=await this[_0x785ff0(0xea)](_0x2f1222?.[_0x785ff0(0x801)]),_0x468097=await this['fetchBusinessProfile'](_0x2f1222?.[_0x785ff0(0x801)]),_0x59baa0=(await this[_0x785ff0(0x2e3)](_0xc27ed1,null,!0x1))[_0x785ff0(0x3e0)][_0x785ff0(0x786)],_0x24ed94=await this['repository'][_0x785ff0(0x5f1)][_0x785ff0(0x51f)]({'where':{'_id':_0xc27ed1}},this['instance'][_0x785ff0(0x638)]),_0x5b8f80={'imagechat':_0x433992,'contactname':_0x2ff8d0||null,'pushName':_0x59baa0,'status':_0x381f1a?.[_0x785ff0(0x3e2)],'isBusiness':_0x468097[_0x785ff0(0x22a)],'email':_0x468097?.[_0x785ff0(0x232)],'description':_0x468097?.[_0x785ff0(0x134)],'website':_0x468097?.[_0x785ff0(0x61f)]?.[_0x785ff0(0xf6)](),'lastcache':Date[_0x785ff0(0x494)](),'imported':!_0x24ed94},_0x5be712=await this['repository'][_0x785ff0(0x5f1)][_0x785ff0(0x127)]({'where':{'_id':_0xc27ed1}},_0x5b8f80,this[_0x785ff0(0x444)]['wuid']),_0x352803={'owner':this[_0x785ff0(0x444)][_0x785ff0(0x638)],'_id':_0xc27ed1,'profilePictureUrl':_0x433992,'status':_0x381f1a?.[_0x785ff0(0x3e2)]};return this[_0x785ff0(0x4b2)][_0x785ff0(0x51e)][_0x785ff0(0x13d)]([_0x352803],this['instance'][_0x785ff0(0x638)]),_0x5be712&&q(this[_0x785ff0(0x546)],_0x785ff0(0x2ea),{'chat':_0x5be712}),{'wuid':_0x2f1222?.[_0x785ff0(0x801)]||_0xc27ed1,'name':_0x2f1222?.['name'],'pushName':_0x59baa0,'numberExists':_0x2f1222?.['exists'],'picture':_0x433992,'status':_0x381f1a?.[_0x785ff0(0x3e2)],'isBusiness':_0x468097['isBusiness'],'email':_0x468097?.[_0x785ff0(0x232)],'description':_0x468097?.[_0x785ff0(0x134)],'website':_0x468097?.[_0x785ff0(0x61f)]?.[_0x785ff0(0xf6)]()};}catch(_0x3be83f){return this[_0x785ff0(0x6c6)]['error'](_0x785ff0(0x680)+(_0x3be83f instanceof Error?_0x3be83f[_0x785ff0(0x319)]:JSON[_0x785ff0(0x79e)](_0x3be83f,null,0x2))),{};}}async[a0_0x5ca8c7(0x1f8)](_0x3ba171){const _0x15c922=a0_0x5ca8c7;this['logger'][_0x15c922(0x39b)](this[_0x15c922(0x546)]+'\x20('+this['instance'][_0x15c922(0x638)]+_0x15c922(0x695));try{let _0x1cd594=_0x3ba171?this[_0x15c922(0x543)](_0x3ba171):this['instance'][_0x15c922(0x638)],_0x28eb2e=await this[_0x15c922(0x158)]['getBusinessProfile'](_0x1cd594);return this[_0x15c922(0x6c6)][_0x15c922(0x39b)](this['instanceName']+'\x20('+this[_0x15c922(0x444)][_0x15c922(0x638)]+_0x15c922(0x331)),_0x28eb2e?(this[_0x15c922(0x6c6)][_0x15c922(0x39b)](this[_0x15c922(0x546)]+'\x20('+this['instance'][_0x15c922(0x638)]+'):Business\x20profile\x20fetched'),{'isBusiness':!0x0,..._0x28eb2e}):{'isBusiness':!0x1,'message':_0x15c922(0x20d),...(await this[_0x15c922(0x322)]({'numbers':[_0x1cd594]}))?.['shift']()};}catch(_0x55af97){let _0x157589=_0x15c922(0x37c),_0x58c767=_0x55af97 instanceof Error?_0x55af97[_0x15c922(0x319)]:typeof _0x55af97==_0x15c922(0x4c4)?JSON[_0x15c922(0x79e)](_0x55af97):_0x55af97,_0x1981f0=_0x157589+':\x20'+_0x58c767;throw this['logger'][_0x15c922(0x73d)](this['instanceName']+'\x20('+this[_0x15c922(0x444)]['wuid']+_0x15c922(0x17a)+_0x1981f0),new x(_0x1981f0);}}async['getStatus'](_0x9b5d38){const _0xa191c5=a0_0x5ca8c7;let _0x15e300=this[_0xa191c5(0x543)](_0x9b5d38);try{return{'wuid':_0x15e300,'status':(await this[_0xa191c5(0x158)][_0xa191c5(0x61c)](_0x15e300))?.['status']};}catch{return{'wuid':_0x15e300,'status':null};}}async[a0_0x5ca8c7(0x60c)](_0x461c32){const _0x306290=a0_0x5ca8c7;try{return await this[_0x306290(0x158)][_0x306290(0x60c)](_0x461c32),{'update':_0x306290(0x7d6)};}catch(_0x5d434d){let _0x285eb7='Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileName',_0x289902=_0x5d434d instanceof Error?_0x5d434d['message']:typeof _0x5d434d==_0x306290(0x4c4)?JSON['stringify'](_0x5d434d):_0x5d434d,_0x196a33=_0x285eb7+':\x20'+_0x289902;throw this[_0x306290(0x6c6)][_0x306290(0x73d)](this[_0x306290(0x546)]+'\x20('+this[_0x306290(0x444)][_0x306290(0x638)]+_0x306290(0x17a)+_0x196a33),new x(_0x196a33);}}async[a0_0x5ca8c7(0x120)](_0x482993){const _0x2a66e6=a0_0x5ca8c7;try{return await this['client'][_0x2a66e6(0x120)](_0x482993),{'update':_0x2a66e6(0x7d6)};}catch(_0x5571ce){let _0x4cc900=_0x2a66e6(0x2f2),_0xa04730=_0x5571ce instanceof Error?_0x5571ce[_0x2a66e6(0x319)]:typeof _0x5571ce==_0x2a66e6(0x4c4)?JSON['stringify'](_0x5571ce):_0x5571ce,_0x38a243=_0x4cc900+':\x20'+_0xa04730;throw this[_0x2a66e6(0x6c6)]['error'](this[_0x2a66e6(0x546)]+'\x20('+this['instance'][_0x2a66e6(0x638)]+'):\x20'+_0x38a243),new x(_0x38a243);}}async[a0_0x5ca8c7(0x592)](_0x1fc30d){const _0x55f0e6=a0_0x5ca8c7;try{let _0x4fcdac;if((0x0,L['isURL'])(_0x1fc30d)){let _0x30b6fc=new Date()[_0x55f0e6(0x51c)](),_0x217f78=_0x1fc30d+_0x55f0e6(0x2c4)+_0x30b6fc;_0x4fcdac=(await ee['default'][_0x55f0e6(0x507)](_0x217f78,{'responseType':_0x55f0e6(0x2ef)}))[_0x55f0e6(0x725)];}else{if((0x0,L[_0x55f0e6(0x65a)])(_0x1fc30d))_0x4fcdac=Buffer[_0x55f0e6(0x298)](_0x1fc30d,_0x55f0e6(0x652));else throw new m(_0x55f0e6(0x2eb));}return await this['client']['updateProfilePicture'](this[_0x55f0e6(0x444)]['wuid'],_0x4fcdac),{'update':_0x55f0e6(0x7d6)};}catch(_0x198c30){let _0x275aae=_0x55f0e6(0x296),_0x37da58=_0x198c30 instanceof Error?_0x198c30[_0x55f0e6(0x319)]:typeof _0x198c30=='object'?JSON[_0x55f0e6(0x79e)](_0x198c30):_0x198c30,_0x1a3fa8=_0x275aae+':\x20'+_0x37da58;throw this[_0x55f0e6(0x6c6)][_0x55f0e6(0x73d)](this[_0x55f0e6(0x546)]+'\x20('+this['instance']['wuid']+_0x55f0e6(0x17a)+_0x1a3fa8),new x(_0x1a3fa8);}}async[a0_0x5ca8c7(0x41d)](){const _0xf84fee=a0_0x5ca8c7;try{return await this[_0xf84fee(0x158)][_0xf84fee(0x41d)](this[_0xf84fee(0x444)]['wuid']),{'update':_0xf84fee(0x7d6)};}catch(_0x5505ca){let _0x48044b=_0xf84fee(0x24f),_0x18828c=_0x5505ca instanceof Error?_0x5505ca[_0xf84fee(0x319)]:typeof _0x5505ca==_0xf84fee(0x4c4)?JSON[_0xf84fee(0x79e)](_0x5505ca):_0x5505ca,_0x7cbc6=_0x48044b+':\x20'+_0x18828c;throw this['logger'][_0xf84fee(0x73d)](this[_0xf84fee(0x546)]+'\x20('+this[_0xf84fee(0x444)][_0xf84fee(0x638)]+_0xf84fee(0x17a)+_0x7cbc6),new x(_0x7cbc6);}}async['createGroup'](_0x4ae387){const _0x1fde3f=a0_0x5ca8c7;try{let _0x4c618b=(await this[_0x1fde3f(0x322)]({'numbers':_0x4ae387[_0x1fde3f(0x376)]}))[_0x1fde3f(0xe1)](_0x3578cc=>_0x3578cc[_0x1fde3f(0x3a1)])['map'](_0x34613c=>_0x34613c['jid']),{id:_0x4dd610}=await this[_0x1fde3f(0x158)][_0x1fde3f(0x45b)](_0x4ae387['subject'],_0x4c618b);_0x4ae387?.[_0x1fde3f(0x134)]&&await this[_0x1fde3f(0x158)][_0x1fde3f(0x53f)](_0x4dd610,_0x4ae387[_0x1fde3f(0x134)]);let _0x1b6d47=await this['client'][_0x1fde3f(0x3ac)](_0x4dd610);return _0x1b6d47['awaitingApproval']=[],{'metadata':_0x1b6d47};}catch(_0xf32228){let _0x281b67='Falha\x20ao\x20processar\x20a\x20solicitao\x20createGroup',_0x2fd183=_0xf32228 instanceof Error?_0xf32228[_0x1fde3f(0x319)]:typeof _0xf32228==_0x1fde3f(0x4c4)?JSON[_0x1fde3f(0x79e)](_0xf32228):_0xf32228,_0x274d37=_0x281b67+':\x20'+_0x2fd183;throw this[_0x1fde3f(0x6c6)][_0x1fde3f(0x73d)](this[_0x1fde3f(0x546)]+'\x20('+this[_0x1fde3f(0x444)]['wuid']+_0x1fde3f(0x17a)+_0x274d37),new x(_0x274d37);}}async[a0_0x5ca8c7(0x1a7)](_0xfd50b6){const _0x10c74d=a0_0x5ca8c7;try{if(_0xfd50b6[_0x10c74d(0x2a3)]===!0x0&&await this['client'][_0x10c74d(0x17b)](_0xfd50b6[_0x10c74d(0x6ee)],_0x10c74d(0x6ce)),_0xfd50b6[_0x10c74d(0x2a3)]===!0x1&&await this[_0x10c74d(0x158)][_0x10c74d(0x17b)](_0xfd50b6[_0x10c74d(0x6ee)],_0x10c74d(0x64b)),_0xfd50b6[_0x10c74d(0x740)]===!0x0&&await this[_0x10c74d(0x158)][_0x10c74d(0x17b)](_0xfd50b6[_0x10c74d(0x6ee)],_0x10c74d(0x3a2)),_0xfd50b6[_0x10c74d(0x740)]===!0x1&&await this[_0x10c74d(0x158)][_0x10c74d(0x17b)](_0xfd50b6[_0x10c74d(0x6ee)],_0x10c74d(0x66f)),_0xfd50b6[_0x10c74d(0x486)]===!0x0&&await this[_0x10c74d(0x158)][_0x10c74d(0x25d)](_0xfd50b6[_0x10c74d(0x6ee)],_0x10c74d(0x46b)),_0xfd50b6[_0x10c74d(0x486)]===!0x1&&await this['client'][_0x10c74d(0x25d)](_0xfd50b6[_0x10c74d(0x6ee)],_0x10c74d(0x705)),_0xfd50b6[_0x10c74d(0x283)]===!0x0&&await this['client']['groupJoinApprovalMode'](_0xfd50b6[_0x10c74d(0x6ee)],'on'),_0xfd50b6[_0x10c74d(0x283)]===!0x1&&await this[_0x10c74d(0x158)][_0x10c74d(0x4d4)](_0xfd50b6[_0x10c74d(0x6ee)],_0x10c74d(0x59f)),typeof _0xfd50b6['expiration']<'u'&&_0xfd50b6[_0x10c74d(0x557)]!==null&&await this[_0x10c74d(0x158)][_0x10c74d(0x3d9)](_0xfd50b6['groupJid'],_0xfd50b6['expiration']),_0xfd50b6[_0x10c74d(0x786)]&&await this['client']['groupUpdateSubject'](_0xfd50b6['groupJid'],_0xfd50b6['name']),_0xfd50b6[_0x10c74d(0x134)]&&await this[_0x10c74d(0x158)]['groupUpdateDescription'](_0xfd50b6['groupJid'],_0xfd50b6[_0x10c74d(0x134)]),_0xfd50b6['image']){let _0x148e31;if((0x0,L[_0x10c74d(0x510)])(_0xfd50b6[_0x10c74d(0xef)])){let _0x1bd78f=new Date()['getTime'](),_0x44d44f=_0xfd50b6[_0x10c74d(0xef)]+_0x10c74d(0x2c4)+_0x1bd78f;_0x148e31=(await ee['default']['get'](_0x44d44f,{'responseType':_0x10c74d(0x2ef)}))['data'];}else{if((0x0,L[_0x10c74d(0x65a)])(_0xfd50b6[_0x10c74d(0xef)]))_0x148e31=Buffer[_0x10c74d(0x298)](_0xfd50b6[_0x10c74d(0xef)],_0x10c74d(0x652));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}await this[_0x10c74d(0x158)][_0x10c74d(0x592)](_0xfd50b6['groupJid'],_0x148e31);}return await this[_0x10c74d(0x6d5)]({'groupJid':_0xfd50b6['groupJid']});}catch(_0x34c197){let _0x779a0c=_0x10c74d(0x604),_0x2d5135=_0x34c197 instanceof Error?_0x34c197[_0x10c74d(0x319)]:typeof _0x34c197==_0x10c74d(0x4c4)?JSON[_0x10c74d(0x79e)](_0x34c197):_0x34c197,_0x32ca0b=_0x779a0c+':\x20'+_0x2d5135;throw this[_0x10c74d(0x6c6)][_0x10c74d(0x73d)](this[_0x10c74d(0x546)]+'\x20('+this['instance'][_0x10c74d(0x638)]+_0x10c74d(0x17a)+_0x32ca0b),new x(_0x32ca0b);}}async[a0_0x5ca8c7(0xd7)](_0x5dc5cb){const _0x230b97=a0_0x5ca8c7;try{if(_0x5dc5cb['action']===_0x230b97(0x79b)||_0x5dc5cb[_0x230b97(0x2f0)]===_0x230b97(0x23e)){let _0x2f4f7b=_0x5dc5cb[_0x230b97(0x376)][_0x230b97(0x726)](_0x162d57=>this[_0x230b97(0x543)](_0x162d57));await this['client']['groupRequestParticipantsUpdate'](_0x5dc5cb[_0x230b97(0x6ee)],_0x2f4f7b,_0x5dc5cb[_0x230b97(0x2f0)]);}else{if(_0x5dc5cb[_0x230b97(0x2f0)]===_0x230b97(0x6ff)){let _0x27dcd8=(await this['whatsappNumber']({'numbers':_0x5dc5cb[_0x230b97(0x376)]}))[_0x230b97(0xe1)](_0x2264c7=>_0x2264c7['exists'])[_0x230b97(0x726)](_0x5c1d8d=>this['createJid'](_0x5c1d8d[_0x230b97(0x801)]));if(_0x27dcd8['length']===0x0)throw new m(_0x230b97(0x77d));await this[_0x230b97(0x158)]['groupParticipantsUpdate'](_0x5dc5cb['groupJid'],_0x27dcd8,'add');}else{let _0x1bd0de=_0x5dc5cb[_0x230b97(0x376)]['map'](_0x1283a6=>this[_0x230b97(0x543)](_0x1283a6));await this[_0x230b97(0x158)][_0x230b97(0x5cb)](_0x5dc5cb[_0x230b97(0x6ee)],_0x1bd0de,_0x5dc5cb[_0x230b97(0x2f0)]);}}return await this['findGroup']({'groupJid':_0x5dc5cb[_0x230b97(0x6ee)]});}catch(_0x5c9acc){let _0x5059f9='Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGParticipant',_0x3dcfda=_0x5c9acc instanceof Error?_0x5c9acc[_0x230b97(0x319)]:typeof _0x5c9acc==_0x230b97(0x4c4)?JSON[_0x230b97(0x79e)](_0x5c9acc):_0x5c9acc,_0x29833c=_0x5059f9+':\x20'+_0x3dcfda;throw this[_0x230b97(0x6c6)][_0x230b97(0x73d)](this[_0x230b97(0x546)]+'\x20('+this['instance']['wuid']+_0x230b97(0x17a)+_0x29833c),new m(_0x29833c);}}async[a0_0x5ca8c7(0x516)](_0x314ae5){const _0x19175b=a0_0x5ca8c7;try{return await this[_0x19175b(0x158)]['groupGetInviteInfo'](_0x314ae5['inviteCode']);}catch(_0x7b652){let _0x58ff5c=_0x19175b(0x523),_0x131fd1=_0x7b652 instanceof Error?_0x7b652['message']:typeof _0x7b652==_0x19175b(0x4c4)?JSON['stringify'](_0x7b652):_0x7b652,_0x40d35e=_0x58ff5c+':\x20'+_0x131fd1;throw this[_0x19175b(0x6c6)][_0x19175b(0x73d)](this['instanceName']+'\x20('+this[_0x19175b(0x444)][_0x19175b(0x638)]+'):\x20'+_0x40d35e),new m(_0x40d35e);}}async[a0_0x5ca8c7(0x6d5)](_0x36d0fb,_0xae405f=a0_0x5ca8c7(0x271)){const _0x1a1be2=a0_0x5ca8c7;try{let _0x1ca046=await this['repository'][_0x1a1be2(0x5f1)]['findOne']({'where':{'_id':_0x36d0fb[_0x1a1be2(0x6ee)]}},this[_0x1a1be2(0x444)]['wuid']),_0x35c009=_0x1ca046?_0x1ca046[_0x1a1be2(0x437)]:null,_0x2c0cb1=0x18*0x3c*0x3c*0x3e8;if(!_0x35c009||_0x35c009[_0x1a1be2(0x488)]&&Date['now']()-_0x35c009[_0x1a1be2(0x488)]>_0x2c0cb1){let _0x4037fa=await this['client']['groupMetadata'](_0x36d0fb[_0x1a1be2(0x6ee)]);if(_0x4037fa['subjectTime']=_0x4037fa?.[_0x1a1be2(0x620)]&&_0x4037fa[_0x1a1be2(0x620)]['toString']()[_0x1a1be2(0x293)]<0xd?_0x4037fa?.['subjectTime']*0x3e8:_0x4037fa?.['subjectTime']||null,_0x4037fa['creation']=_0x4037fa?.[_0x1a1be2(0x3a8)]&&_0x4037fa[_0x1a1be2(0x3a8)]['toString']()[_0x1a1be2(0x293)]<0xd?_0x4037fa?.[_0x1a1be2(0x3a8)]*0x3e8:_0x4037fa?.[_0x1a1be2(0x3a8)]||null,_0x35c009={..._0x4037fa,'lastUpdate':Date[_0x1a1be2(0x494)]()},!_0x4037fa)return;}let _0x55bbf9=_0x35c009[_0x1a1be2(0x376)]['some'](_0x4b5444=>_0x4b5444['id']===this['instance'][_0x1a1be2(0x638)]+_0x1a1be2(0x505)&&_0x4b5444['admin']!=null);!_0x35c009[_0x1a1be2(0x5d6)]&&_0x55bbf9&&(_0x35c009[_0x1a1be2(0x5d6)]=(await this[_0x1a1be2(0x5d6)](_0x36d0fb,!0x1))[_0x1a1be2(0x4d5)]);let _0x146fe2=(!_0x35c009[_0x1a1be2(0x740)]||_0x55bbf9)&&(!_0x35c009[_0x1a1be2(0x624)]||_0x35c009[_0x1a1be2(0x624)]&&_0x35c009[_0x1a1be2(0x81c)]&&_0x55bbf9);_0x35c009[_0x1a1be2(0x800)]=_0x55bbf9,_0x35c009[_0x1a1be2(0x3ed)]=_0x146fe2;let _0x44b12c=[];if(_0x55bbf9&&_0x35c009[_0x1a1be2(0x283)])try{_0x44b12c=await this['client'][_0x1a1be2(0x2c8)](_0x36d0fb['groupJid']),_0x35c009[_0x1a1be2(0x2bb)]=Date[_0x1a1be2(0x494)]();}catch(_0x5bf8ef){this[_0x1a1be2(0x6c6)]['verbose'](this[_0x1a1be2(0x546)]+'\x20('+this['instance'][_0x1a1be2(0x638)]+_0x1a1be2(0x11c)+_0x36d0fb['groupJid']+':\x20'+(_0x5bf8ef instanceof Error?_0x5bf8ef[_0x1a1be2(0x319)]:JSON[_0x1a1be2(0x79e)](_0x5bf8ef,null,0x2)));}try{_0x35c009['image']=(await this[_0x1a1be2(0x2e3)](_0x36d0fb['groupJid'],null,!0x0))[_0x1a1be2(0x3e0)][_0x1a1be2(0x601)];}catch(_0x161944){this[_0x1a1be2(0x6c6)][_0x1a1be2(0x39b)](this['instanceName']+'\x20('+this['instance'][_0x1a1be2(0x638)]+_0x1a1be2(0x226)+_0x36d0fb[_0x1a1be2(0x6ee)]+':\x20'+(_0x161944 instanceof Error?_0x161944['message']:JSON[_0x1a1be2(0x79e)](_0x161944,null,0x2)));}let _0x1778c3=_0x35c009[_0x1a1be2(0x376)][_0x1a1be2(0x726)](_0x590240=>_0x590240['id']),_0x12066f=_0x44b12c[_0x1a1be2(0x726)](_0x2ae366=>_0x2ae366[_0x1a1be2(0x801)]),_0x3546b6=await this[_0x1a1be2(0x4b2)][_0x1a1be2(0x640)][_0x1a1be2(0x536)]([..._0x1778c3,..._0x12066f]);_0x35c009['participants']=_0x35c009['participants'][_0x1a1be2(0x726)](_0x2ecc55=>{const _0x256c6c=_0x1a1be2;let _0x20c415=_0x3546b6[_0x256c6c(0x509)](_0x376cf3=>_0x376cf3['_id']===_0x2ecc55['id']);return{'id':_0x2ecc55['id'],'isAdmin':['admin','superadmin'][_0x256c6c(0x253)](_0x2ecc55[_0x256c6c(0x13c)]),'admin':_0x2ecc55[_0x256c6c(0x13c)],'pushName':_0x20c415?.[_0x256c6c(0x786)],'profilePictureUrl':_0x20c415?.['pictureUrl']};}),_0x35c009[_0x1a1be2(0x76c)]=_0x44b12c['map'](_0x3053a7=>{const _0x1adba7=_0x1a1be2;let _0xebb56c=_0x3546b6['find'](_0x163c71=>_0x163c71[_0x1adba7(0x6ae)]===_0x3053a7['jid']);return{'id':_0x3053a7[_0x1adba7(0x801)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0xebb56c?.[_0x1adba7(0x786)],'profilePictureUrl':_0xebb56c?.[_0x1adba7(0x601)],'request_method':_0x3053a7[_0x1adba7(0x484)],'request_time':_0x3053a7[_0x1adba7(0x665)]};});let _0x4f20fa=await this['repository']['chat'][_0x1a1be2(0x127)]({'where':{'_id':_0x36d0fb[_0x1a1be2(0x6ee)]}},{'imagechat':_0x35c009['image'],'name':_0x35c009[_0x1a1be2(0x20c)],'lastcache':Date[_0x1a1be2(0x494)](),'groupdata':_0x35c009},this[_0x1a1be2(0x444)][_0x1a1be2(0x638)]);return q(this[_0x1a1be2(0x546)],'chats',{'chat':_0x4f20fa}),{'metadata':_0x35c009};}catch(_0x2b50d6){if(_0xae405f===_0x1a1be2(0x40a))return;throw new G('Error\x20fetching\x20group',_0x2b50d6[_0x1a1be2(0x319)][_0x1a1be2(0x30c)]());}}async['findGroups'](){const _0x216e82=a0_0x5ca8c7;try{let _0x589f64=[],_0x3252ae=await this[_0x216e82(0x158)][_0x216e82(0x5e9)](),_0x4b26a0=Object['values'](_0x3252ae),_0x1a885b=_0x4b26a0['filter'](_0x1bd412=>(0x0,w[_0x216e82(0x3f5)])(_0x1bd412?.['id']))[_0x216e82(0x726)](async _0x2eb6b5=>{const _0x3afee0=_0x216e82;try{return await this[_0x3afee0(0x158)][_0x3afee0(0x554)](_0x2eb6b5['id'],'preview');}catch(_0x52c6e5){return this['logger'][_0x3afee0(0x39b)](this[_0x3afee0(0x546)]+'\x20('+this[_0x3afee0(0x444)][_0x3afee0(0x638)]+_0x3afee0(0x226)+_0x2eb6b5['id']+':\x20'+(_0x52c6e5 instanceof Error?_0x52c6e5['message']:JSON[_0x3afee0(0x79e)](_0x52c6e5,null,0x2))),null;}}),_0x3e5b8f=await Promise['all'](_0x1a885b);for(let _0xaadc78=0x0;_0xaadc78<_0x4b26a0['length'];_0xaadc78++){let _0x4cd6ce=_0x4b26a0[_0xaadc78];(0x0,w['isJidGroup'])(_0x4cd6ce?.['id'])&&(_0x589f64[_0x216e82(0x7cb)]({'groupJid':_0x4cd6ce?.['id'],'subject':_0x4cd6ce?.[_0x216e82(0x20c)],'subjectOwner':_0x4cd6ce?.[_0x216e82(0x6a1)]?.[_0x216e82(0x42a)]('@')[0x0],'subjectTime':_0x4cd6ce?.[_0x216e82(0x620)],'creation':_0x4cd6ce?.['creation'],'size':_0x4cd6ce?.[_0x216e82(0x376)]?.[_0x216e82(0x293)],'owner':_0x4cd6ce?.[_0x216e82(0x756)]?.[_0x216e82(0x42a)]('@')[0x0],'desc':_0x4cd6ce?.[_0x216e82(0x3b5)],'restrict':_0x4cd6ce?.[_0x216e82(0x2a3)],'announce':_0x4cd6ce?.[_0x216e82(0x740)],'image':_0x3e5b8f[_0xaadc78],'isCommunity':_0x4cd6ce?.['isCommunity'],'joinApprovalMode':_0x4cd6ce?.[_0x216e82(0x283)],'memberCanAddParticipant':_0x4cd6ce?.[_0x216e82(0x486)],'participants':_0x4cd6ce?.[_0x216e82(0x376)],'descOwner':_0x4cd6ce?.['descOwner'],'descId':_0x4cd6ce?.[_0x216e82(0x425)],'memberAddMode':_0x4cd6ce?.[_0x216e82(0x486)],'isCommunityAnnounce':_0x4cd6ce?.[_0x216e82(0x81c)],'ephemeralDuration':_0x4cd6ce?.[_0x216e82(0x33b)]||0x0,'author':_0x4cd6ce?.[_0x216e82(0x42b)]}),this[_0x216e82(0xd3)](_0x4b26a0[_0xaadc78]));}return _0x589f64;}catch(_0x30ac5b){let _0x53f0b0=_0x216e82(0x60e),_0x3d486c=_0x30ac5b instanceof Error?_0x30ac5b[_0x216e82(0x319)]:typeof _0x30ac5b==_0x216e82(0x4c4)?JSON[_0x216e82(0x79e)](_0x30ac5b):_0x30ac5b,_0x2e7180=_0x53f0b0+':\x20'+_0x3d486c;throw this['logger'][_0x216e82(0x73d)](this['instanceName']+'\x20('+this[_0x216e82(0x444)][_0x216e82(0x638)]+_0x216e82(0x17a)+_0x2e7180),new G(_0x2e7180);}}async[a0_0x5ca8c7(0xd3)](_0x281a56){const _0x2bd4de=a0_0x5ca8c7;let _0x56a028=await this[_0x2bd4de(0x4b2)][_0x2bd4de(0x5f1)][_0x2bd4de(0x51f)]({'where':{'_id':_0x281a56['id']}},this[_0x2bd4de(0x444)][_0x2bd4de(0x638)]);_0x281a56[_0x2bd4de(0x620)]=_0x281a56?.[_0x2bd4de(0x620)]&&_0x281a56[_0x2bd4de(0x620)][_0x2bd4de(0x30c)]()[_0x2bd4de(0x293)]<0xd?_0x281a56?.['subjectTime']*0x3e8:_0x281a56?.[_0x2bd4de(0x620)]||null,_0x281a56[_0x2bd4de(0x3a8)]=_0x281a56?.['creation']&&_0x281a56[_0x2bd4de(0x3a8)][_0x2bd4de(0x30c)]()[_0x2bd4de(0x293)]<0xd?_0x281a56?.[_0x2bd4de(0x3a8)]*0x3e8:_0x281a56?.[_0x2bd4de(0x3a8)]||null;let _0xd0f1fa=_0x56a028?.[_0x2bd4de(0x437)]?.[_0x2bd4de(0x76c)]||[],_0x565926=_0x56a028?.[_0x2bd4de(0x437)]?.[_0x2bd4de(0x2bb)],_0x4b0324=_0x281a56[_0x2bd4de(0x376)][_0x2bd4de(0x726)](_0xb94af1=>{const _0x4b35ca=_0x2bd4de;let _0x59658b=_0x56a028?.[_0x4b35ca(0x437)]?.[_0x4b35ca(0x376)][_0x4b35ca(0x509)](_0x4a653f=>_0x4a653f['id']===_0xb94af1['id']);return{..._0xb94af1,'isAdmin':[_0x4b35ca(0x13c),_0x4b35ca(0x3ae)][_0x4b35ca(0x253)](_0xb94af1[_0x4b35ca(0x13c)]),'admin':_0xb94af1[_0x4b35ca(0x13c)],'name':_0x59658b?.[_0x4b35ca(0x786)]||_0xb94af1['name'],'imgUrl':_0x59658b?.[_0x4b35ca(0x1c3)]||_0xb94af1[_0x4b35ca(0x1c3)]};}),_0x22f45d=_0x4b0324[_0x2bd4de(0xf8)](_0x5c8b98=>_0x5c8b98['id']===this[_0x2bd4de(0x444)][_0x2bd4de(0x638)]+_0x2bd4de(0x505)&&_0x5c8b98['isAdmin']),_0x3b98d7=(!_0x281a56[_0x2bd4de(0x740)]||_0x22f45d)&&(!_0x281a56[_0x2bd4de(0x624)]||_0x281a56[_0x2bd4de(0x624)]&&_0x281a56['isCommunityAnnounce']&&_0x22f45d),_0x53d800={..._0x281a56,'participants':_0x4b0324,'awaitingApproval':_0xd0f1fa,'lastFetchAwaitingApproval':_0x565926,'isAdmin':_0x22f45d,'canSendMessage':_0x3b98d7,'lastUpdate':Date[_0x2bd4de(0x494)]()};await this[_0x2bd4de(0x4b2)]['chat']['updateOne']({'where':{'_id':_0x281a56['id']}},{'name':_0x281a56[_0x2bd4de(0x20c)],'group':!0x0,'groupdata':_0x53d800,'lastcache':Date['now']()},this[_0x2bd4de(0x444)][_0x2bd4de(0x638)]),q(this['instanceName'],_0x2bd4de(0x2ea),{'chat':_0x281a56});}async['updateGroupWebhook'](_0xc53c78){const _0x316966=a0_0x5ca8c7;let _0x3b5c9f=await this[_0x316966(0x4b2)][_0x316966(0x5f1)][_0x316966(0x51f)]({'where':{'_id':_0xc53c78['id']}},this['instance']['wuid']);_0xc53c78['subjectTime']=_0xc53c78?.[_0x316966(0x620)]&&_0xc53c78[_0x316966(0x620)]['toString']()[_0x316966(0x293)]<0xd?_0xc53c78?.[_0x316966(0x620)]*0x3e8:_0xc53c78?.[_0x316966(0x620)]||null,_0xc53c78['creation']=_0xc53c78?.[_0x316966(0x3a8)]&&_0xc53c78[_0x316966(0x3a8)][_0x316966(0x30c)]()[_0x316966(0x293)]<0xd?_0xc53c78?.['creation']*0x3e8:_0xc53c78?.[_0x316966(0x3a8)]||null,_0xc53c78['inviteCode']&&(_0xc53c78[_0x316966(0x5d6)]=_0x316966(0x658)+_0xc53c78[_0x316966(0x5d6)]);let _0x1674d7=_0x3b5c9f?.[_0x316966(0x437)]?{..._0x3b5c9f[_0x316966(0x437)]}:{};Object[_0x316966(0x818)](_0xc53c78)['forEach'](_0x26aa60=>{_0x26aa60!=='id'&&(_0x1674d7[_0x26aa60]=_0xc53c78[_0x26aa60]);});let _0x45832c=_0x1674d7[_0x316966(0x376)]?.[_0x316966(0xf8)](_0x404053=>_0x404053['id']===this[_0x316966(0x444)][_0x316966(0x638)]+_0x316966(0x505)&&_0x404053[_0x316966(0x800)])||!0x1;_0x1674d7[_0x316966(0x800)]=_0x45832c;let _0x3007a8=(!_0x1674d7['announce']||_0x45832c)&&(!_0x1674d7[_0x316966(0x624)]||_0x1674d7[_0x316966(0x624)]&&_0x1674d7[_0x316966(0x81c)]&&_0x45832c);_0x1674d7[_0x316966(0x3ed)]=_0x3007a8;let _0xb392e6={'group':!0x0,'groupdata':_0x1674d7};_0xc53c78[_0x316966(0x20c)]&&(_0xb392e6[_0x316966(0x786)]=_0xc53c78[_0x316966(0x20c)]),await this[_0x316966(0x4b2)][_0x316966(0x5f1)][_0x316966(0x127)]({'where':{'_id':_0xc53c78['id']}},_0xb392e6,this[_0x316966(0x444)][_0x316966(0x638)],{'upsert':!0x0}),q(this[_0x316966(0x546)],_0x316966(0x2ea),{'chat':_0xb392e6});}async[a0_0x5ca8c7(0x2fa)](_0x2483a6){const _0x2943fb=a0_0x5ca8c7;let _0x2e7700=await this[_0x2943fb(0x4b2)][_0x2943fb(0x5f1)][_0x2943fb(0x51f)]({'where':{'_id':_0x2483a6['id']}},this['instance'][_0x2943fb(0x638)]);if(!_0x2e7700||!_0x2e7700[_0x2943fb(0x437)]){this[_0x2943fb(0x6c6)]['info'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x2943fb(0x774)+_0x2483a6['id']);return;}let _0x31fedd=await this[_0x2943fb(0x4b2)][_0x2943fb(0x640)]['findManyByIds'](_0x2483a6[_0x2943fb(0x376)]),_0x2051db=[..._0x2e7700[_0x2943fb(0x437)]?.[_0x2943fb(0x376)]];switch(_0x2483a6[_0x2943fb(0x2f0)]){case _0x2943fb(0x6ff):let _0x46689f=_0x31fedd['map'](_0x3a5343=>({'id':_0x3a5343['_id'],'isAdmin':!0x1,'name':_0x3a5343[_0x2943fb(0x786)],'imgUrl':_0x3a5343['pictureUrl']}));_0x2051db=[..._0x2051db,..._0x46689f];break;case _0x2943fb(0x686):_0x2051db=_0x2051db[_0x2943fb(0xe1)](_0x3d0242=>!_0x2483a6['participants']['includes'](_0x3d0242['id']));break;case _0x2943fb(0x785):case _0x2943fb(0x61a):_0x2051db=_0x2051db['map'](_0x5a3fb9=>_0x2483a6[_0x2943fb(0x376)][_0x2943fb(0x253)](_0x5a3fb9['id'])?{..._0x5a3fb9,'isAdmin':_0x2483a6['action']===_0x2943fb(0x785)}:_0x5a3fb9);break;}let _0x4f06b6=_0x2051db[_0x2943fb(0x293)],_0xffa2bb=_0x2051db[_0x2943fb(0xf8)](_0x2059c2=>_0x2059c2['id']===this[_0x2943fb(0x444)][_0x2943fb(0x638)]+'@s.whatsapp.net'),_0x3ba3b4=_0xffa2bb&&_0x2051db[_0x2943fb(0xf8)](_0x1a2bf8=>_0x1a2bf8['id']===this['instance']['wuid']+_0x2943fb(0x505)&&_0x1a2bf8[_0x2943fb(0x800)]),_0x1ffdb9=_0xffa2bb&&(!_0x2e7700['groupdata'][_0x2943fb(0x740)]||_0x3ba3b4)&&(!_0x2e7700[_0x2943fb(0x437)][_0x2943fb(0x624)]||_0x2e7700['groupdata']['isCommunity']&&_0x3ba3b4);await this[_0x2943fb(0x4b2)][_0x2943fb(0x5f1)][_0x2943fb(0x127)]({'where':{'_id':_0x2483a6['id']}},{'groupdata':{..._0x2e7700['groupdata'],'participants':_0x2051db,'size':_0x4f06b6,'isAdmin':_0x3ba3b4,'canSendMessage':_0x1ffdb9}},this[_0x2943fb(0x444)][_0x2943fb(0x638)]),this['logger'][_0x2943fb(0x611)](this[_0x2943fb(0x546)]+'\x20('+this[_0x2943fb(0x444)][_0x2943fb(0x638)]+'):\x20Grupo\x20'+_0x2483a6['id']+_0x2943fb(0x4c9)+_0x2483a6[_0x2943fb(0x2f0)]+_0x2943fb(0x2ac)+_0x4f06b6+_0x2943fb(0xd1)+_0x3ba3b4+_0x2943fb(0x7eb)+_0x1ffdb9);}async[a0_0x5ca8c7(0x5d6)](_0x886547,_0xbc7c3f=!0x0){const _0x44dc03=a0_0x5ca8c7;try{let _0x1a76f1=await this[_0x44dc03(0x158)][_0x44dc03(0x1e9)](_0x886547[_0x44dc03(0x6ee)]),_0x1af801={'groupdata.inviteCode':_0x44dc03(0x658)+_0x1a76f1};if(_0xbc7c3f){let _0x561bfd=await this[_0x44dc03(0x4b2)][_0x44dc03(0x5f1)]['updateOne']({'where':{'_id':_0x886547['groupJid']}},_0x1af801,this['instance'][_0x44dc03(0x638)]);}return{'inviteUrl':_0x44dc03(0x658)+_0x1a76f1,'inviteCode':_0x1a76f1};}catch(_0x5ca521){let _0xafaa36=_0x44dc03(0x3f6),_0x5ebadc=_0x5ca521 instanceof Error?_0x5ca521['message']:typeof _0x5ca521==_0x44dc03(0x4c4)?JSON[_0x44dc03(0x79e)](_0x5ca521):_0x5ca521,_0x2a4658=_0xafaa36+':\x20'+_0x5ebadc;throw this[_0x44dc03(0x6c6)][_0x44dc03(0x73d)](this[_0x44dc03(0x546)]+'\x20('+this[_0x44dc03(0x444)][_0x44dc03(0x638)]+_0x44dc03(0x17a)+_0x2a4658),new G(_0x2a4658);}}async[a0_0x5ca8c7(0x731)](_0x1acf13){const _0x558d30=a0_0x5ca8c7;try{let _0x1f5f73=await this[_0x558d30(0x158)][_0x558d30(0xe5)](_0x1acf13['groupJid']);return{'revoked':!0x0,'inviteUrl':_0x558d30(0x658)+_0x1f5f73,'inviteCode':_0x1f5f73};}catch(_0x4c8d13){let _0x2a75c3=_0x558d30(0x5e1),_0x3d9060=_0x4c8d13 instanceof Error?_0x4c8d13['message']:typeof _0x4c8d13==_0x558d30(0x4c4)?JSON[_0x558d30(0x79e)](_0x4c8d13):_0x4c8d13,_0x4d168d=_0x2a75c3+':\x20'+_0x3d9060;throw this[_0x558d30(0x6c6)]['error'](this[_0x558d30(0x546)]+'\x20('+this['instance'][_0x558d30(0x638)]+_0x558d30(0x17a)+_0x4d168d),new G(_0x4d168d);}}async['joinGroup'](_0x29cbe6){const _0x4b5111=a0_0x5ca8c7;try{if((0x0,L[_0x4b5111(0x510)])(_0x29cbe6[_0x4b5111(0x5d6)]))var _0x28d347=_0x29cbe6[_0x4b5111(0x5d6)]['split']('/')[0x3];else var _0x28d347=_0x29cbe6[_0x4b5111(0x5d6)];let _0x18fdfe=await this['client'][_0x4b5111(0x607)](_0x28d347);return this[_0x4b5111(0x6c6)][_0x4b5111(0x39b)](this['instanceName']+'\x20('+this[_0x4b5111(0x444)][_0x4b5111(0x638)]+'):\x20'+_0x18fdfe),{'join':!0x0,'inviteCode':_0x28d347,'groupJid':_0x18fdfe};}catch(_0x59f2ff){let _0x548a58=_0x4b5111(0xdf),_0x1851cc=_0x59f2ff instanceof Error?_0x59f2ff[_0x4b5111(0x319)]:typeof _0x59f2ff==_0x4b5111(0x4c4)?JSON[_0x4b5111(0x79e)](_0x59f2ff):_0x59f2ff,_0x501422=_0x548a58+':\x20'+_0x1851cc;throw this[_0x4b5111(0x6c6)][_0x4b5111(0x73d)](this[_0x4b5111(0x546)]+'\x20('+this['instance'][_0x4b5111(0x638)]+_0x4b5111(0x17a)+_0x501422),new G(_0x501422);}}async[a0_0x5ca8c7(0x1e5)](_0xb838d4){const _0x1ac427=a0_0x5ca8c7;try{return{'participants':(await this['repository'][_0x1ac427(0x5f1)][_0x1ac427(0x51f)]({'where':{'_id':_0xb838d4[_0x1ac427(0x6ee)]}},this[_0x1ac427(0x444)][_0x1ac427(0x638)]))[_0x1ac427(0x437)]['participants']};}catch(_0x32e2f0){let _0x50e4d7=_0x1ac427(0x582),_0x5091ed=_0x32e2f0 instanceof Error?_0x32e2f0[_0x1ac427(0x319)]:typeof _0x32e2f0=='object'?JSON[_0x1ac427(0x79e)](_0x32e2f0):_0x32e2f0,_0x115045=_0x50e4d7+':\x20'+_0x5091ed;throw this[_0x1ac427(0x6c6)][_0x1ac427(0x73d)](this['instanceName']+'\x20('+this[_0x1ac427(0x444)][_0x1ac427(0x638)]+_0x1ac427(0x17a)+_0x115045),new G(_0x115045);}}async[a0_0x5ca8c7(0x27b)](_0x541ec0){const _0x5882df=a0_0x5ca8c7;try{return await this[_0x5882df(0x158)][_0x5882df(0x6fe)](_0x541ec0['groupJid']),{'groupJid':_0x541ec0['groupJid'],'leave':!0x0};}catch(_0xa3e2be){let _0x20749d=_0x5882df(0x2fd),_0x245435=_0xa3e2be instanceof Error?_0xa3e2be['message']:typeof _0xa3e2be==_0x5882df(0x4c4)?JSON[_0x5882df(0x79e)](_0xa3e2be):_0xa3e2be,_0x313227=_0x20749d+':\x20'+_0x245435;throw this[_0x5882df(0x6c6)]['error'](this[_0x5882df(0x546)]+'\x20('+this[_0x5882df(0x444)][_0x5882df(0x638)]+_0x5882df(0x17a)+_0x313227),new m(_0x313227);}}async[a0_0x5ca8c7(0x33a)](_0x32ddc3){const _0x399a69=a0_0x5ca8c7;return await this[_0x399a69(0x46f)](_0x32ddc3[_0x399a69(0x209)],{'poll':{'name':_0x32ddc3[_0x399a69(0x33a)]?.['name'],'selectableCount':_0x32ddc3[_0x399a69(0x33a)][_0x399a69(0x291)],'values':_0x32ddc3[_0x399a69(0x33a)][_0x399a69(0x7f7)]}},_0x32ddc3?.['options']);}async[a0_0x5ca8c7(0x5e6)](_0x3c4c87){const _0x4d1f3e=a0_0x5ca8c7;return await this['sendMessageWithTyping'](_0x3c4c87[_0x4d1f3e(0x209)],{'listMessage':{'title':_0x3c4c87['listMessage'][_0x4d1f3e(0x401)],'description':_0x3c4c87[_0x4d1f3e(0x5e6)][_0x4d1f3e(0x134)],'buttonText':_0x3c4c87['listMessage']?.[_0x4d1f3e(0x7ac)],'footerText':_0x3c4c87[_0x4d1f3e(0x5e6)]?.[_0x4d1f3e(0x55a)],'sections':_0x3c4c87[_0x4d1f3e(0x5e6)][_0x4d1f3e(0x188)],'listType':0x2}},_0x3c4c87?.[_0x4d1f3e(0x1bb)]);}async[a0_0x5ca8c7(0x3f1)](_0x29d49b){const _0x1e2b9d=a0_0x5ca8c7;let _0x1874e1;if(_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x573)]===_0x1e2b9d(0x1f5)){let _0x59a231=_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x67e)][_0x1e2b9d(0x2fc)]('\x0a'),_0xa9d4fe='',_0x224f8d='';_0x59a231!==-0x1?(_0xa9d4fe=_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x67e)][_0x1e2b9d(0x263)](0x0,_0x59a231)[_0x1e2b9d(0x80a)](),_0x224f8d=_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x67e)][_0x1e2b9d(0x263)](_0x59a231+0x1)):_0x224f8d=_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x67e)];let _0x19411d=_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x3fe)][_0x1e2b9d(0xe1)](_0x374ce8=>_0x374ce8[_0x1e2b9d(0x80a)]()!==''),_0x7789a9=this[_0x1e2b9d(0x6e0)](_0x19411d);_0x1874e1={'listMessage':{'title':_0xa9d4fe,'description':_0x224f8d,'buttonText':_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x7ac)]||'Selecione','footerText':_0x29d49b['menuMessage'][_0x1e2b9d(0x55a)],'sections':_0x7789a9,'listType':0x2}};}else{if(_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x573)]==='poll'){let _0xfb9ce2=_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x3fe)][_0x1e2b9d(0xe1)](_0x278146=>!(_0x278146[_0x1e2b9d(0x43f)]('[')&&_0x278146['endsWith'](']'))&&_0x278146[_0x1e2b9d(0x80a)]()!=='')[_0x1e2b9d(0x726)](_0x3366fb=>_0x3366fb['split']('\x0a')[0x0]);_0x1874e1={'poll':{'name':_0x29d49b['menuMessage'][_0x1e2b9d(0x67e)],'selectableCount':_0x29d49b[_0x1e2b9d(0x3f1)][_0x1e2b9d(0x291)]||0x1,'values':_0xfb9ce2}};}}return await this[_0x1e2b9d(0x46f)](_0x29d49b[_0x1e2b9d(0x209)],_0x1874e1,_0x29d49b?.[_0x1e2b9d(0x1bb)]);}[a0_0x5ca8c7(0x6e0)](_0x139db5){const _0x5030b5=a0_0x5ca8c7;let _0x3a4cc6=[],_0x11996a={'rows':[]};return _0x139db5[_0x5030b5(0x57a)](_0x23548b=>{const _0x5ae6bf=_0x5030b5;if(_0x23548b[_0x5ae6bf(0x43f)]('[')&&_0x23548b['endsWith'](']'))_0x11996a[_0x5ae6bf(0x2d7)][_0x5ae6bf(0x293)]>0x0&&_0x3a4cc6['push'](_0x11996a),_0x11996a={'title':_0x23548b[_0x5ae6bf(0x80c)](0x1,-0x1),'rows':[]};else{let _0x497477=_0x23548b[_0x5ae6bf(0x42a)]('\x0a')['map'](_0x8c21dd=>_0x8c21dd[_0x5ae6bf(0x80a)]()),_0xe3c1a5=_0x497477[0x0],_0x17ee7e=_0x497477[0x1]||null,_0x5d1d68=_0x497477[0x2]||_0xe3c1a5;_0x11996a['rows']['push']({'title':_0xe3c1a5,'description':_0x17ee7e,'rowId':_0x5d1d68});}}),_0x11996a[_0x5030b5(0x2d7)][_0x5030b5(0x293)]>0x0&&_0x3a4cc6[_0x5030b5(0x7cb)](_0x11996a),_0x3a4cc6;}async[a0_0x5ca8c7(0x176)](_0x421d5c,_0x5d46cd){const _0x3365be=a0_0x5ca8c7;if(await this['getMessage'](_0x421d5c,!0x0)){let _0x468c79={'where':{'_id':_0x421d5c['id']}},_0x2930cc={'status':[_0x5d46cd['status']][0x0]};try{let _0x5d8626=await this[_0x3365be(0x4b2)][_0x3365be(0x319)][_0x3365be(0x13d)](_0x468c79,_0x2930cc,this['instance']['wuid']);_0x5d8626&&q(this[_0x3365be(0x546)],_0x3365be(0x6ba),{'message':_0x5d8626});}catch{}}}[a0_0x5ca8c7(0x301)](_0x1080f6){const _0x11a983=a0_0x5ca8c7;let _0x13d451=[];return _0x1080f6[_0x11a983(0x57a)](_0x553060=>{const _0x558fc1=_0x11a983;_0x553060[_0x558fc1(0x401)]&&_0x13d451[_0x558fc1(0x7cb)]('['+_0x553060[_0x558fc1(0x401)]+']'),_0x553060[_0x558fc1(0x2d7)][_0x558fc1(0x57a)](_0x5c6c63=>{const _0x146a96=_0x558fc1;_0x13d451[_0x146a96(0x7cb)](_0x5c6c63[_0x146a96(0x401)]);});}),_0x13d451['join']('|');}[a0_0x5ca8c7(0x51a)](_0x105872){const _0x38a028=a0_0x5ca8c7;let _0x17617f=_0x105872[_0x38a028(0x2cf)](/\\n/g,'\x0a')[_0x38a028(0x42a)]('\x0a')['filter'](_0x339bce=>_0x339bce['includes'](_0x38a028(0x423))||_0x339bce[_0x38a028(0x253)](_0x38a028(0x21f))),_0x4a9d38='';return _0x17617f['forEach'](_0x128b5a=>{const _0x51582b=_0x38a028;let _0x1ff08f=/TEL(?:.*):(.+)/,_0x445a06=/EMAIL(?:.*):(.+)/,_0x49c036=_0x128b5a['match'](_0x1ff08f),_0x2b4734=_0x128b5a['match'](_0x445a06);if(_0x49c036){let _0x1c8867=_0x49c036[0x1][_0x51582b(0x2cf)](/-| |\+|\(|\)/g,'')[_0x51582b(0x80a)]();_0x4a9d38+=_0x51582b(0x374)+_0x1c8867+'\x0a';}else{if(_0x2b4734){let _0x37c912=_0x2b4734[0x1][_0x51582b(0x80a)]();_0x4a9d38+=_0x51582b(0x1fa)+_0x37c912+'\x0a';}}}),_0x4a9d38['trim']();}async[a0_0x5ca8c7(0x4e2)](_0x565280,_0x40dcd6,_0x172528,_0x26d56c=null){const _0x3a0c8d=a0_0x5ca8c7;if(_0x565280['ENABLED'])try{let _0x50e99c=_0x40dcd6[_0x3a0c8d(0x3c3)][_0x3a0c8d(0x461)][_0x3a0c8d(0x2cf)](/:\d{1,2}@/g,'@'),_0x19dbb5=_0x40dcd6[_0x3a0c8d(0x3c3)]['fromMe'],_0xc776e=_0x50e99c[_0x3a0c8d(0x339)]('@g.us'),_0x204bbd=_0x40dcd6[_0x3a0c8d(0x4bc)]?.[_0x3a0c8d(0x2cf)](/:\d{1,2}@/g,'@')||'',_0x51dd17=_0x40dcd6[_0x3a0c8d(0x179)]?.[_0x3a0c8d(0x67e)]||_0x40dcd6[_0x3a0c8d(0x179)]?.['caption']||_0x40dcd6['message_normalized']?.[_0x3a0c8d(0x7d8)]||_0x40dcd6['message_normalized']?.[_0x3a0c8d(0x786)]||'',_0x926451={'_id':_0x40dcd6[_0x3a0c8d(0x6ae)],'remoteJid':_0x19dbb5?this['instance'][_0x3a0c8d(0x638)]:_0xc776e?_0x204bbd:_0x50e99c,'pushName':_0x19dbb5?this[_0x3a0c8d(0x444)]['profileName']||'Eu':_0x40dcd6[_0x3a0c8d(0x659)],'text':_0x51dd17,'type':_0x40dcd6[_0x3a0c8d(0x30e)],'when':_0x40dcd6[_0x3a0c8d(0x4e1)]||Date[_0x3a0c8d(0x494)]()};_0x26d56c||(_0x26d56c=await this['repository'][_0x3a0c8d(0x5f1)][_0x3a0c8d(0x51f)]({'where':{'_id':_0x50e99c}},this[_0x3a0c8d(0x444)][_0x3a0c8d(0x638)]));let _0x26a965=_0x26d56c?_0x19dbb5?_0x26d56c[_0x3a0c8d(0x2c2)]:(_0x26d56c[_0x3a0c8d(0x2c2)]||0x0)+0x1:_0x19dbb5?0x0:0x1,_0x243c81={'lastmsg':_0x40dcd6['messageTimestamp']||Date[_0x3a0c8d(0x494)](),'ephemeralExpiration':_0x40dcd6[_0x3a0c8d(0x557)],'lastMessage':_0x926451,'unreadcount':_0x26a965,..._0x19dbb5||_0xc776e?{}:{'name':_0x40dcd6[_0x3a0c8d(0x659)]},..._0xc776e?{'group':_0xc776e}:{},...!_0x19dbb5&&!_0xc776e&&_0x40dcd6[_0x3a0c8d(0x554)]?{'imagechat':_0x40dcd6[_0x3a0c8d(0x554)]}:{}};if(!_0xc776e&&(!_0x26d56c?.['leadInfo']||!_0x26d56c[_0x3a0c8d(0x3d0)][_0x3a0c8d(0x182)])&&_0x40dcd6[_0x3a0c8d(0x659)]&&!_0x19dbb5&&(_0x243c81={..._0x243c81,'leadInfo.nome':_0x40dcd6[_0x3a0c8d(0x659)]}),_0x26d56c?.[_0x3a0c8d(0x3d0)][_0x3a0c8d(0xc9)]||(_0x243c81={..._0x243c81,'leadInfo.etiquetas':[]}),_0x26d56c?.['leadInfo'][_0x3a0c8d(0x34f)]||(_0x243c81={..._0x243c81,'leadInfo.customFields':[]}),_0x26d56c?.['leadInfo'][_0x3a0c8d(0x2a7)]||(_0x243c81={..._0x243c81,'leadInfo.tags':[]}),_0x26d56c&&_0x26d56c?.[_0x3a0c8d(0x4ee)]){let _0xee755f=await this[_0x3a0c8d(0x4b2)]['label']['find']({'where':{}},this['instance'][_0x3a0c8d(0x638)]),_0x5895ac=new Set(_0xee755f[_0x3a0c8d(0x726)](_0x4c115=>_0x4c115[_0x3a0c8d(0x6ae)])),_0x31a8d7=(_0x26d56c[_0x3a0c8d(0x3d0)]?.['etiquetas']||[])[_0x3a0c8d(0xe1)](_0x5f0fca=>_0x5895ac[_0x3a0c8d(0x183)](_0x5f0fca));_0x243c81={..._0x243c81,'imported':!0x1,'leadInfo.etiquetas':_0x31a8d7};for(let _0x2703b5 of _0x31a8d7)await this['AddChatLabel'](_0x2703b5,_0x50e99c);}if(!this[_0x3a0c8d(0x4b3)][_0x3a0c8d(0x634)][_0x3a0c8d(0x509)](_0x3c5f2d=>_0x3c5f2d['startCommand']&&_0x51dd17[_0x3a0c8d(0x253)](_0x3c5f2d['startCommand']))&&_0x172528===_0x3a0c8d(0x40e)&&_0x19dbb5&&this['AutomateSystem']?.[_0x3a0c8d(0x2b0)][_0x3a0c8d(0x3b1)]&&_0x51dd17[_0x3a0c8d(0x80a)]()!==this[_0x3a0c8d(0x4b3)]?.[_0x3a0c8d(0x2b0)]['stopConversation'][_0x3a0c8d(0x80a)]()){let _0x4ce8a3=(this['AutomateSystem']?.[_0x3a0c8d(0x2b0)][_0x3a0c8d(0xe7)]||0x0)*0xea60,_0x13324f=Date[_0x3a0c8d(0x494)]()+_0x4ce8a3;_0x26d56c?.[_0x3a0c8d(0x3d0)]?.[_0x3a0c8d(0x284)]===0x0||(_0x243c81={..._0x243c81,'leadInfo.desativadoFluxoAte':_0x13324f},this[_0x3a0c8d(0x6c6)][_0x3a0c8d(0x39b)](this[_0x3a0c8d(0x546)]+'\x20('+this['instance'][_0x3a0c8d(0x638)]+_0x3a0c8d(0x5ee)+_0x13324f+'.'));}if(_0x51dd17['trim']()===this[_0x3a0c8d(0x4b3)]?.[_0x3a0c8d(0x2b0)]['stopConversation']['trim']()){this[_0x3a0c8d(0x6c6)]['verbose'](this[_0x3a0c8d(0x546)]+'\x20('+this['instance']['wuid']+_0x3a0c8d(0x5c1)+_0x51dd17);let _0x327b3c=Date[_0x3a0c8d(0x494)]();this[_0x3a0c8d(0x4b3)]?.[_0x3a0c8d(0x2b0)][_0x3a0c8d(0x815)]===0x0?_0x243c81={..._0x243c81,'leadInfo.desativadoFluxoAte':_0x327b3c+0x7591f6200}:_0x243c81={..._0x243c81,'leadInfo.desativadoFluxoAte':_0x327b3c+this[_0x3a0c8d(0x4b3)]?.[_0x3a0c8d(0x2b0)]['stopMinutes']*0x3c*0x3e8};}if(_0x26d56c=await this[_0x3a0c8d(0x4b2)][_0x3a0c8d(0x5f1)][_0x3a0c8d(0x127)]({'where':{'_id':_0x50e99c}},_0x243c81,this[_0x3a0c8d(0x444)][_0x3a0c8d(0x638)],{'new':!0x0,'upsert':!0x0}),_0x26d56c)q(this['instanceName'],_0x3a0c8d(0x2ea),{'chat':_0x26d56c});else{this[_0x3a0c8d(0x6c6)]['error'](this[_0x3a0c8d(0x546)]+'\x20('+this[_0x3a0c8d(0x444)][_0x3a0c8d(0x638)]+_0x3a0c8d(0x1b4));return;}if(_0x19dbb5)return this[_0x3a0c8d(0x6c6)]['verbose'](this[_0x3a0c8d(0x546)]+'\x20('+this[_0x3a0c8d(0x444)][_0x3a0c8d(0x638)]+_0x3a0c8d(0x5c6)),null;if(!this[_0x3a0c8d(0x4b3)]?.[_0x3a0c8d(0x2b0)]['enabled'])return this[_0x3a0c8d(0x6c6)]['verbose'](this[_0x3a0c8d(0x546)]+'\x20('+this[_0x3a0c8d(0x444)]['wuid']+_0x3a0c8d(0x3cb)),null;if(_0x26d56c['_id']['includes']('@g.us')&&this[_0x3a0c8d(0x4b3)]?.['flowConfig'][_0x3a0c8d(0x4dd)]===!0x0)return this['logger']['verbose'](this[_0x3a0c8d(0x546)]+'\x20('+this[_0x3a0c8d(0x444)]['wuid']+'):\x20Ignoring\x20group\x20messages.'),null;if(_0x26d56c[_0x3a0c8d(0x3d0)]){if(_0x26d56c[_0x3a0c8d(0x3d0)]['desativadoFluxoAte']===0x0||_0x26d56c[_0x3a0c8d(0x3d0)][_0x3a0c8d(0x3e6)])return this[_0x3a0c8d(0x6c6)][_0x3a0c8d(0x39b)](this[_0x3a0c8d(0x546)]+'\x20('+this[_0x3a0c8d(0x444)]['wuid']+'):\x20Os\x20fluxos\x20esto\x20desativados\x20para\x20'+_0x50e99c+',\x20saindo.'),null;if(_0x26d56c[_0x3a0c8d(0x3d0)][_0x3a0c8d(0x284)]>Date['now']()&&!_0x40dcd6['message_normalized']?.[_0x3a0c8d(0x7d8)])return this[_0x3a0c8d(0x6c6)]['verbose'](this[_0x3a0c8d(0x546)]+'\x20('+this['instance']['wuid']+_0x3a0c8d(0x237)+new Date(_0x26d56c[_0x3a0c8d(0x3d0)][_0x3a0c8d(0x284)])[_0x3a0c8d(0x366)]()+_0x3a0c8d(0x2f9)),null;}this['logger'][_0x3a0c8d(0x39b)](this[_0x3a0c8d(0x546)]+'\x20('+this[_0x3a0c8d(0x444)]['wuid']+'):\x20Flow\x20ativado\x20e\x20no\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificaes'),this[_0x3a0c8d(0xd6)](_0x40dcd6,_0x172528);}catch(_0x373e1b){let _0x35a3e2='Erro\x20na\x20funo\x20updateChatWithMessage:\x20',_0x578f6b=_0x373e1b instanceof Error?_0x373e1b['message']:typeof _0x373e1b==_0x3a0c8d(0x4c4)?JSON[_0x3a0c8d(0x79e)](_0x373e1b):_0x373e1b,_0x549a9a=_0x35a3e2+':\x20'+_0x578f6b;return this['logger']['error'](this['instanceName']+'\x20('+this[_0x3a0c8d(0x444)][_0x3a0c8d(0x638)]+_0x3a0c8d(0x17a)+_0x549a9a),null;}}async[a0_0x5ca8c7(0x71d)](_0x4672e8,_0x3717bd){const _0x3d97e3=a0_0x5ca8c7;if(_0x3717bd[_0x3d97e3(0x4b7)]){let _0x7f8adf=_0x4672e8[_0x3d97e3(0x726)](async _0x24f8e2=>{const _0x4b95e4=_0x3d97e3;try{let _0x5c75cb={'_id':_0x24f8e2[_0x4b95e4(0x6ae)],'owner':_0x24f8e2[_0x4b95e4(0x756)],'lastcache':0x0};if(Object[_0x4b95e4(0x818)](_0x24f8e2)[_0x4b95e4(0x57a)](_0x1f9439=>{_0x24f8e2[_0x1f9439]!==null&&(_0x5c75cb[_0x1f9439]=_0x24f8e2[_0x1f9439]);}),_0x5c75cb[_0x4b95e4(0x3a3)]===null&&(_0x5c75cb[_0x4b95e4(0x3a3)]='Imagem\x20no\x20encontrada'),Object[_0x4b95e4(0x818)](_0x5c75cb)[_0x4b95e4(0x293)]>0x0)return await this[_0x4b95e4(0x4b2)][_0x4b95e4(0x5f1)][_0x4b95e4(0x127)]({'where':{'_id':_0x24f8e2[_0x4b95e4(0x6ae)]}},_0x5c75cb,this[_0x4b95e4(0x444)]['wuid']);}catch(_0x302f14){let _0x468647='Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20'+_0x24f8e2[_0x4b95e4(0x6ae)],_0x13c445=_0x302f14 instanceof Error?_0x302f14[_0x4b95e4(0x319)]:typeof _0x302f14==_0x4b95e4(0x4c4)?JSON[_0x4b95e4(0x79e)](_0x302f14):_0x302f14,_0x1ef74f=_0x468647+':\x20'+_0x13c445;return this[_0x4b95e4(0x6c6)][_0x4b95e4(0x73d)](this[_0x4b95e4(0x546)]+'\x20('+this[_0x4b95e4(0x444)][_0x4b95e4(0x638)]+'):\x20'+_0x1ef74f),null;}}),_0x522d5e=(await Promise['all'](_0x7f8adf))['filter'](_0x16b6c1=>_0x16b6c1!==null)['length'];this[_0x3d97e3(0x6c6)]['verbose'](this[_0x3d97e3(0x546)]+'\x20('+this[_0x3d97e3(0x444)][_0x3d97e3(0x638)]+_0x3d97e3(0x17a)+_0x522d5e+_0x3d97e3(0x52a)+this[_0x3d97e3(0x444)][_0x3d97e3(0x638)]+_0x3d97e3(0x767));}}async[a0_0x5ca8c7(0x394)](_0x2e0b53){const _0x4a6d90=a0_0x5ca8c7;this[_0x4a6d90(0x6c6)][_0x4a6d90(0x39b)](this[_0x4a6d90(0x546)]+'\x20('+this[_0x4a6d90(0x444)][_0x4a6d90(0x638)]+_0x4a6d90(0x343));let _0x168f45={'readMessages':[{'remoteJid':_0x2e0b53[_0x4a6d90(0x525)][_0x4a6d90(0x5f3)][_0x4a6d90(0x3c3)][_0x4a6d90(0x461)],'fromMe':_0x2e0b53[_0x4a6d90(0x525)]['lastReceivedMessage'][_0x4a6d90(0x3c3)][_0x4a6d90(0x79a)],'id':_0x2e0b53['chatLog'][_0x4a6d90(0x5f3)][_0x4a6d90(0x3c3)]['id']}]};await this['markMessageAsRead'](_0x168f45);}async['StartBot'](_0x210bcd,_0x14c0cf){const _0x4263b9=a0_0x5ca8c7;try{let {key:_0x1c628b,message_normalized:_0x2a7576}=_0x210bcd,_0x534d6f=_0x2a7576,_0x34aedb=_0x2a7576[_0x4263b9(0x67e)]||_0x2a7576['caption']||_0x2a7576['vote']||_0x2a7576[_0x4263b9(0x786)]||'',_0x4553b8=_0x1c628b['remoteJid'],_0x2ffc61=null,_0x2a7501=this[_0x4263b9(0x4b3)][_0x4263b9(0x634)][_0x4263b9(0x509)](_0x41b567=>_0x41b567[_0x4263b9(0x2cb)]&&_0x34aedb[_0x4263b9(0x253)](_0x41b567[_0x4263b9(0x2cb)]));if(_0x2a7501&&_0x14c0cf==='MESSAGES_UPSERT'){let _0x734165=await this['repository']['flow']['findOne']({'where':{'_id':_0x2a7501['_id']}});if(this['logger'][_0x4263b9(0x39b)](this[_0x4263b9(0x546)]+'\x20('+this[_0x4263b9(0x444)][_0x4263b9(0x638)]+_0x4263b9(0x380)),_0x734165&&_0x734165[_0x4263b9(0x719)]?.[_0x4263b9(0x253)](this[_0x4263b9(0x444)][_0x4263b9(0x638)]))_0x2ffc61=await this[_0x4263b9(0x47e)](_0x734165,_0x1c628b,_0x534d6f);else return this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x4263b9(0x638)]+_0x4263b9(0x295)),null;}else this[_0x4263b9(0x6c6)][_0x4263b9(0x39b)](this[_0x4263b9(0x546)]+'\x20('+this['instance'][_0x4263b9(0x638)]+_0x4263b9(0x21c));if(_0x2ffc61=await this[_0x4263b9(0x589)](_0x4553b8,_0x534d6f),_0x2ffc61){this[_0x4263b9(0x6c6)][_0x4263b9(0x39b)](this[_0x4263b9(0x546)]+'\x20('+this[_0x4263b9(0x444)][_0x4263b9(0x638)]+_0x4263b9(0x213)),!_0x1c628b[_0x4263b9(0x79a)]&&_0x2ffc61[_0x4263b9(0x41b)]&&this['readMessageBot'](_0x2ffc61);let _0x1218ac=await this[_0x4263b9(0x49f)](_0x2ffc61);_0x1218ac&&await this[_0x4263b9(0x697)](_0x2ffc61,_0x1218ac);}}catch(_0x445936){this[_0x4263b9(0x6c6)][_0x4263b9(0x73d)](this['instanceName']+'\x20('+this[_0x4263b9(0x444)][_0x4263b9(0x638)]+_0x4263b9(0x56e)+(_0x445936 instanceof Error?_0x445936[_0x4263b9(0x319)]:JSON[_0x4263b9(0x79e)](_0x445936,null,0x2)));}}[a0_0x5ca8c7(0x67d)](_0x325b64,_0x3b1071='',_0x3dd315={}){const _0x1a2c73=a0_0x5ca8c7;return typeof _0x325b64!=_0x1a2c73(0x4c4)||_0x325b64===null?(_0x3b1071&&(_0x3dd315[_0x3b1071]=_0x325b64),_0x3dd315):(Object[_0x1a2c73(0x1ce)](_0x325b64)[_0x1a2c73(0x57a)](([_0x4fb8b1,_0x12b76f])=>{const _0x22e98d=_0x1a2c73;let _0x45ed44=_0x3b1071?_0x3b1071+'.'+_0x4fb8b1:'_'+_0x4fb8b1;Array[_0x22e98d(0xdc)](_0x12b76f)?_0x12b76f[_0x22e98d(0x57a)]((_0x41c566,_0x40b85b)=>{const _0x948e8=_0x22e98d;this[_0x948e8(0x67d)](_0x41c566,_0x45ed44+'['+_0x40b85b+']',_0x3dd315);}):typeof _0x12b76f==_0x22e98d(0x4c4)&&_0x12b76f!==null?this[_0x22e98d(0x67d)](_0x12b76f,_0x45ed44,_0x3dd315):_0x3dd315[_0x45ed44]=String(_0x12b76f);}),_0x3dd315);}[a0_0x5ca8c7(0x6c0)](_0x537330){const _0x5de7e7=a0_0x5ca8c7;let _0x464c2f={};for(let _0x496d57 of _0x537330)typeof _0x496d57['name']==_0x5de7e7(0x7b7)&&typeof _0x496d57[_0x5de7e7(0x76f)]==_0x5de7e7(0x7b7)&&(_0x464c2f[_0x496d57[_0x5de7e7(0x786)]]=_0x496d57['value']);return _0x464c2f;}async[a0_0x5ca8c7(0x49f)](_0x39e5e6){const _0x47bdba=a0_0x5ca8c7;if(!this[_0x47bdba(0x4b3)]?.[_0x47bdba(0x2b0)]['enabled']||_0x39e5e6[_0x47bdba(0x3e2)]!==_0x47bdba(0x349)&&_0x39e5e6['waitingMenu_id']==='')return null;let _0x12da8b=_0x39e5e6['chatLog'][_0x47bdba(0x67f)]||_0x47bdba(0x282);typeof _0x39e5e6['chatLog']['lastCondition']>'u'&&(_0x39e5e6[_0x47bdba(0x525)][_0x47bdba(0x163)]=!0x0);let _0x14168f=_0x39e5e6[_0x47bdba(0x525)][_0x47bdba(0x163)];this[_0x47bdba(0x6c6)][_0x47bdba(0x39b)](this[_0x47bdba(0x546)]+'\x20('+this['instance']['wuid']+_0x47bdba(0x161)+_0x12da8b+',\x20lastCondition:\x20'+_0x14168f);let _0x3a15af=_0x12da8b===_0x47bdba(0x282)?_0x39e5e6[_0x47bdba(0xe6)][_0x47bdba(0x509)](_0x137c62=>_0x137c62[_0x47bdba(0x573)]===_0x47bdba(0x282)):_0x39e5e6[_0x47bdba(0xe6)]['find'](_0xe6e9a7=>_0xe6e9a7['_id'][_0x47bdba(0x30c)]()===_0x12da8b[_0x47bdba(0x30c)]());if(!_0x3a15af)return this[_0x47bdba(0x6c6)][_0x47bdba(0x73d)](this[_0x47bdba(0x546)]+'\x20('+this[_0x47bdba(0x444)]['wuid']+_0x47bdba(0x24b)+_0x12da8b),null;let _0x801629={'_pushName':_0x39e5e6?.['chatLog']?.['lastReceivedMessage']?.['pushName']||'','_sender':this['instance'][_0x47bdba(0x638)]||'',..._0x39e5e6[_0x47bdba(0x525)][_0x47bdba(0x7ae)]},_0x99695b=null;if(_0x39e5e6['waitingMenu_id']){let _0x2077e3=_0x39e5e6[_0x47bdba(0x525)][_0x47bdba(0x5f3)][_0x47bdba(0x7d8)],_0x2377be=_0x39e5e6[_0x47bdba(0x2a5)][_0x47bdba(0x509)](_0x2285ee=>_0x2285ee['option']===_0x2077e3);if(_0x2377be){let _0x107656=_0x2377be[_0x47bdba(0x31a)];if(_0x99695b=_0x39e5e6[_0x47bdba(0xe6)][_0x47bdba(0x509)](_0x3c60d7=>_0x3c60d7['groupId']===_0x107656&&_0x3c60d7[_0x47bdba(0x294)]===0x1),_0x3a15af[_0x47bdba(0x13b)][_0x47bdba(0x215)]){let _0x10e01b={'id':_0x39e5e6[_0x47bdba(0x6d3)],'remoteJid':_0x39e5e6[_0x47bdba(0x461)],'fromMe':!0x0};await this[_0x47bdba(0x703)](_0x10e01b);}if(_0x3a15af[_0x47bdba(0x13b)][_0x47bdba(0x215)]&&_0x3a15af[_0x47bdba(0x13b)][_0x47bdba(0x185)]&&_0x3a15af[_0x47bdba(0x13b)][_0x47bdba(0x48f)]===_0x47bdba(0x333)){let _0x288759={'number':_0x39e5e6['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x47bdba(0x759)+_0x39e5e6[_0x47bdba(0x5eb)]+_0x47bdba(0x37f)+_0x2077e3}};await this[_0x47bdba(0x7ad)](_0x288759);}_0x39e5e6[_0x47bdba(0x3e2)]=_0x47bdba(0x349),_0x39e5e6[_0x47bdba(0x6d3)]='',_0x39e5e6[_0x47bdba(0x5eb)]='',_0x39e5e6[_0x47bdba(0x2a5)]=[];}else{this[_0x47bdba(0x6c6)]['verbose'](this[_0x47bdba(0x546)]+'\x20('+this[_0x47bdba(0x444)][_0x47bdba(0x638)]+_0x47bdba(0x395));let _0x41fde2={'activatedCount':_0x39e5e6[_0x47bdba(0x525)][_0x47bdba(0x2a1)][_0x47bdba(0xe1)](_0x561e28=>String(_0x561e28['blockId'])===String(_0x12da8b))[_0x47bdba(0x293)],'moreLogs':[_0x47bdba(0x3ff)]};if(_0x3a15af[_0x47bdba(0x13b)][_0x47bdba(0x7e5)]){let _0x297974={'number':_0x39e5e6[_0x47bdba(0x461)],'options':{'delay':0x0},'textMessage':{'text':_0x3a15af[_0x47bdba(0x13b)][_0x47bdba(0x7e5)]}};await this[_0x47bdba(0x7ad)](_0x297974);}if(_0x3a15af[_0x47bdba(0x26d)]!==void 0x0&&_0x41fde2[_0x47bdba(0x783)]>=_0x3a15af[_0x47bdba(0x26d)]){let _0x2d6805=Date['now'](),_0x2dc664=_0x3a15af['stopMinutesMaxActives']??0xa;isNaN(_0x2dc664)&&(_0x2dc664=0xa);let _0x16be5b=_0x2d6805+_0x2dc664*0x3c*0x3e8;_0x41fde2[_0x47bdba(0x3c9)]=_0x16be5b,_0x41fde2[_0x47bdba(0xc8)][_0x47bdba(0x7cb)](_0x47bdba(0x206)),this['updateStopChat'](_0x39e5e6,_0x16be5b),_0x39e5e6[_0x47bdba(0x6d3)]='',_0x39e5e6[_0x47bdba(0x5eb)]='',_0x39e5e6[_0x47bdba(0x2a5)]=[];}return this[_0x47bdba(0x682)](_0x39e5e6,_0x3a15af,_0x41fde2,!0x0),null;}}if(_0x14168f&&_0x3a15af['next_groupId']&&!_0x39e5e6['waitingMenu_id']){let _0x5285e6=_0x39e5e6[_0x47bdba(0xe6)][_0x47bdba(0xe1)](_0x4623d0=>_0x4623d0[_0x47bdba(0x651)][_0x47bdba(0x30c)]()===_0x3a15af[_0x47bdba(0x31a)]['toString']())[_0x47bdba(0x28e)]((_0x82cb27,_0x22b190)=>_0x82cb27['order']-_0x22b190[_0x47bdba(0x294)]);_0x5285e6[_0x47bdba(0x293)]>0x0&&(_0x99695b=_0x5285e6[0x0]);}if(!_0x99695b){let _0x580ac3=_0x3a15af[_0x47bdba(0x651)],_0x5d04c2=_0x39e5e6['blocks'][_0x47bdba(0xe1)](_0x158c29=>_0x158c29[_0x47bdba(0x651)]===_0x580ac3&&_0x158c29[_0x47bdba(0x294)]>_0x3a15af[_0x47bdba(0x294)])['sort']((_0x9bddc0,_0x26692b)=>_0x9bddc0[_0x47bdba(0x294)]-_0x26692b[_0x47bdba(0x294)]);_0x5d04c2[_0x47bdba(0x293)]>0x0&&(_0x99695b=_0x5d04c2[0x0]);}if(!_0x99695b)return _0x39e5e6['status']=_0x47bdba(0x5fb),null;_0x39e5e6[_0x47bdba(0x525)][_0x47bdba(0x7ae)]=_0x801629;let _0xfd0e33=JSON[_0x47bdba(0x27e)](JSON['stringify'](_0x99695b));return this[_0x47bdba(0x17d)](_0xfd0e33,_0x39e5e6[_0x47bdba(0x525)][_0x47bdba(0x7ae)]),_0x39e5e6[_0x47bdba(0x525)][_0x47bdba(0x67f)]=_0xfd0e33['_id'],_0x39e5e6[_0x47bdba(0x525)]['lastCondition']=!0x0,_0xfd0e33;}['replaceVariables'](_0x5a0833,_0x309768){const _0x213c7a=a0_0x5ca8c7;return _0x5a0833[_0x213c7a(0x2cf)](/\{\{([^}]+)\}\}/g,(_0x271193,_0xe1ff7c)=>_0x309768[_0xe1ff7c]||'');}[a0_0x5ca8c7(0x17d)](_0x59a5c1,_0x12c6b7){const _0x5cdea2=a0_0x5ca8c7;for(let _0x340809 in _0x59a5c1)typeof _0x59a5c1[_0x340809]=='string'?_0x59a5c1[_0x340809]=this[_0x5cdea2(0x1bf)](_0x59a5c1[_0x340809],_0x12c6b7):typeof _0x59a5c1[_0x340809]==_0x5cdea2(0x4c4)&&this['replaceVariablesInObject'](_0x59a5c1[_0x340809],_0x12c6b7);}async['goNextblock'](_0x37d3f2,_0x174748){const _0x364f0e=a0_0x5ca8c7;let _0x5b0900=_0x174748[_0x364f0e(0x6ae)];if(_0x37d3f2['chatLog']&&_0x37d3f2['chatLog'][_0x364f0e(0x2a1)]){let _0x4af042=_0x37d3f2[_0x364f0e(0x525)][_0x364f0e(0x2a1)][_0x364f0e(0xe1)](_0x3da3e7=>String(_0x3da3e7[_0x364f0e(0x468)])===String(_0x5b0900))[_0x364f0e(0x3be)]();if(_0x4af042&&_0x4af042[_0x364f0e(0x73d)]&&_0x174748[_0x364f0e(0x626)])return _0x37d3f2[_0x364f0e(0x3e2)]=_0x364f0e(0x5fb),await this[_0x364f0e(0x7c6)](_0x37d3f2),null;}if(_0x174748[_0x364f0e(0x573)]==='uazapi'&&_0x174748[_0x364f0e(0x13b)]['command']===_0x364f0e(0x7e4)&&_0x37d3f2[_0x364f0e(0x6d3)])return _0x37d3f2[_0x364f0e(0x525)][_0x364f0e(0x67f)]=_0x5b0900,await this['saveConversationToDatabase'](_0x37d3f2),null;let _0x3ba671=await this[_0x364f0e(0x49f)](_0x37d3f2);if(_0x37d3f2[_0x364f0e(0x525)]&&_0x37d3f2[_0x364f0e(0x525)][_0x364f0e(0x2a1)]){let _0x4df356=_0x37d3f2[_0x364f0e(0x525)][_0x364f0e(0x2a1)][_0x364f0e(0xe1)](_0x555ee6=>String(_0x555ee6[_0x364f0e(0x468)])===String(_0x5b0900))[_0x364f0e(0x293)];if(_0x174748[_0x364f0e(0x26d)]!==void 0x0&&_0x4df356>=_0x174748['maxActives']){let _0x144749=Date[_0x364f0e(0x494)](),_0x19542a=_0x174748[_0x364f0e(0x47a)]??0xa;isNaN(_0x19542a)&&(_0x19542a=0xa);let _0x52b4a3=_0x144749+_0x19542a*0x3c*0x3e8,_0x54ce01={'newStoppedUntil':_0x52b4a3};return this[_0x364f0e(0x2db)](_0x37d3f2,_0x52b4a3),this[_0x364f0e(0x682)](_0x37d3f2,_0x174748,_0x54ce01,!0x0),null;}}_0x3ba671&&_0x3ba671['type']!==_0x364f0e(0x3c4)&&await this['processblock'](_0x37d3f2,_0x3ba671),_0x3ba671||await this['saveConversationToDatabase'](_0x37d3f2),_0x3ba671&&_0x3ba671[_0x364f0e(0x573)]===_0x364f0e(0x3c4)&&(_0x37d3f2[_0x364f0e(0x525)]['lastBlockId']=_0x5b0900,await this[_0x364f0e(0x7c6)](_0x37d3f2));}async[a0_0x5ca8c7(0x697)](_0x3600a0,_0x36d5a5){const _0x303c38=a0_0x5ca8c7;try{let _0x183db1=_0x36d5a5['type'];this[_0x303c38(0x6c6)][_0x303c38(0x39b)](this[_0x303c38(0x546)]+'\x20('+this[_0x303c38(0x444)][_0x303c38(0x638)]+'):\x20Going\x20to\x20'+_0x183db1);let _0x45cd42={'uazapi':()=>this[_0x303c38(0x3e5)](_0x3600a0,_0x36d5a5),'save':()=>this['saveTextReply'](_0x3600a0,_0x36d5a5),'stop':()=>this[_0x303c38(0x428)](_0x3600a0,_0x36d5a5),'condition':()=>this['processConditions'](_0x3600a0,_0x36d5a5),'varedit':()=>this[_0x303c38(0x370)](_0x3600a0,_0x36d5a5),'apirequest':()=>this[_0x303c38(0xd2)](_0x3600a0,_0x36d5a5),'goToFlow':()=>this[_0x303c38(0x782)](_0x3600a0,_0x36d5a5),'scheduleFlow':()=>this[_0x303c38(0x596)](_0x3600a0,_0x36d5a5),'awaitSeconds':()=>this[_0x303c38(0x1d5)](_0x3600a0,_0x36d5a5),'clearVariables':()=>this[_0x303c38(0x1d6)](_0x3600a0,_0x36d5a5)}[_0x183db1];_0x45cd42&&await _0x45cd42();}catch(_0x1b833e){this['logger'][_0x303c38(0x73d)](this[_0x303c38(0x546)]+'\x20('+this[_0x303c38(0x444)][_0x303c38(0x638)]+'):\x20Error\x20processing\x20the\x20block:\x20'+(_0x1b833e instanceof Error?_0x1b833e['message']:JSON[_0x303c38(0x79e)](_0x1b833e,null,0x2)));}}async[a0_0x5ca8c7(0x1d5)](_0x106922,_0xc421e4){const _0x4eea99=a0_0x5ca8c7;if(this[_0x4eea99(0x6c6)][_0x4eea99(0x39b)](this[_0x4eea99(0x546)]+'\x20('+this[_0x4eea99(0x444)]['wuid']+_0x4eea99(0x5b9)),!_0x106922||!_0xc421e4)return this[_0x4eea99(0x6c6)][_0x4eea99(0x73d)](this[_0x4eea99(0x546)]+'\x20('+this['instance'][_0x4eea99(0x638)]+_0x4eea99(0x74b)),null;let _0x41b8db=+_0xc421e4[_0x4eea99(0x2e4)];isNaN(_0x41b8db)&&(_0x41b8db=0x0),_0x41b8db=Math['min'](_0x41b8db,0x3c),await(0x0,w[_0x4eea99(0x10a)])(_0x41b8db*0x3e8);let _0x15bb3b={'moreLogs':[_0x4eea99(0x21a)+_0x41b8db+_0x4eea99(0x758)]};return await this[_0x4eea99(0x682)](_0x106922,_0xc421e4,_0x15bb3b),_0x41b8db;}async[a0_0x5ca8c7(0x1d6)](_0x5eef60,_0x40782b){const _0x1c5405=a0_0x5ca8c7;if(this[_0x1c5405(0x6c6)][_0x1c5405(0x39b)](this[_0x1c5405(0x546)]+'\x20('+this[_0x1c5405(0x444)]['wuid']+_0x1c5405(0x595)),!_0x5eef60||!_0x40782b)return this[_0x1c5405(0x6c6)]['error'](this[_0x1c5405(0x546)]+'\x20('+this[_0x1c5405(0x444)][_0x1c5405(0x638)]+_0x1c5405(0x74b)),null;let _0x5d6a79=[];if(_0x40782b['clearVariables'][_0x1c5405(0x80a)]()==='[all]'){let _0x59ff7d=[_0x1c5405(0x210),_0x1c5405(0x4a0),_0x1c5405(0x3b0),_0x1c5405(0x190),_0x1c5405(0x6bd),_0x1c5405(0x6ae),_0x1c5405(0x2cd)];_0x5d6a79=Object[_0x1c5405(0x818)](_0x5eef60[_0x1c5405(0x525)][_0x1c5405(0x7ae)])[_0x1c5405(0xe1)](_0xfe736c=>_0xfe736c[_0x1c5405(0x43f)]('_')&&!_0x59ff7d[_0x1c5405(0x253)](_0xfe736c));}else _0x5d6a79=_0x40782b['clearVariables'][_0x1c5405(0x42a)]('|')[_0x1c5405(0x726)](_0x5da6e3=>(_0x5da6e3=_0x5da6e3[_0x1c5405(0x2cf)](/[{}]/g,'')[_0x1c5405(0x80a)](),_0x5da6e3['startsWith']('_')?_0x5da6e3:'_'+_0x5da6e3));let _0x3144df=[];_0x5d6a79[_0x1c5405(0x57a)](_0x6aca6e=>{const _0x44905b=_0x1c5405;_0x6aca6e in _0x5eef60[_0x44905b(0x525)]['realVariables']&&(delete _0x5eef60[_0x44905b(0x525)]['realVariables'][_0x6aca6e],_0x3144df[_0x44905b(0x7cb)](_0x6aca6e));}),_0x3144df[_0x1c5405(0x293)]>0x0?this[_0x1c5405(0x6c6)][_0x1c5405(0x39b)](this[_0x1c5405(0x546)]+'\x20('+this[_0x1c5405(0x444)][_0x1c5405(0x638)]+_0x1c5405(0x4eb)+_0x3144df[_0x1c5405(0x363)](',\x20')):this['logger'][_0x1c5405(0x39b)](this[_0x1c5405(0x546)]+'\x20('+this[_0x1c5405(0x444)]['wuid']+_0x1c5405(0x1cf));let _0x4dd9c8={'moreLogs':[_0x1c5405(0x39a)+_0x3144df[_0x1c5405(0x363)](',\x20')]};return await this['updateConversation'](_0x5eef60,_0x40782b,_0x4dd9c8),null;}async[a0_0x5ca8c7(0x596)](_0xab7a99,_0x3d1fb2){const _0x5356ee=a0_0x5ca8c7;if(this[_0x5356ee(0x6c6)][_0x5356ee(0x39b)](this['instanceName']+'\x20('+this[_0x5356ee(0x444)]['wuid']+'):\x20Entrou\x20na\x20funo\x20scheduleFlow'),!_0xab7a99||!_0x3d1fb2)return this[_0x5356ee(0x6c6)][_0x5356ee(0x73d)](this['instanceName']+'\x20('+this[_0x5356ee(0x444)][_0x5356ee(0x638)]+_0x5356ee(0x74b)),null;let _0x1a0781=_0xab7a99[_0x5356ee(0x461)];_0x3d1fb2[_0x5356ee(0x4c0)][_0x5356ee(0x461)]&&_0x3d1fb2[_0x5356ee(0x4c0)]['remoteJid'][_0x5356ee(0x80a)]()!==''&&(_0x1a0781=_0x3d1fb2['uazapi'][_0x5356ee(0x461)]['trim']());let _0x301e89=_0x3d1fb2['scheduleFlow']['timeInMinutes']*0xea60,_0x254ee0=Date[_0x5356ee(0x494)]()+_0x301e89,_0x256750={'status':_0x5356ee(0x771),'info':_0x5356ee(0x18c)+_0xab7a99[_0x5356ee(0x786)],'remoteJids':[_0x1a0781],'when':_0x254ee0,'delaySecMin':0x0,'delaySecMax':0x0,'type':'flow','flowName':_0x3d1fb2['scheduleFlow']['flowName']};this[_0x5356ee(0x618)](_0x256750);let _0x10478f=await this[_0x5356ee(0x49f)](_0xab7a99);_0x10478f&&await this[_0x5356ee(0x697)](_0xab7a99,_0x10478f);}async[a0_0x5ca8c7(0x782)](_0xa137c,_0x4d6297){const _0x1c8c70=a0_0x5ca8c7;if(this['logger'][_0x1c8c70(0x39b)](this[_0x1c8c70(0x546)]+'\x20('+this['instance'][_0x1c8c70(0x638)]+'):\x20Entrou\x20na\x20funo\x20goToFlow'),!_0xa137c||!_0x4d6297)return this[_0x1c8c70(0x6c6)]['error'](this[_0x1c8c70(0x546)]+'\x20('+this[_0x1c8c70(0x444)][_0x1c8c70(0x638)]+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;await this[_0x1c8c70(0x682)](_0xa137c,_0x4d6297,{},!0x0,!0x0);let _0xb29473=_0x4d6297['goToFlow'];_0xa137c=await this[_0x1c8c70(0x4f9)](_0xb29473,_0xa137c['remoteJid'],_0xa137c['chatLog']['realVariables']);let _0x254876=await this['NextBlock'](_0xa137c);_0x254876&&await this[_0x1c8c70(0x697)](_0xa137c,_0x254876);}async['createConversationforgoToFlow'](_0x24f214,_0x510c7d,_0xdbfeef){const _0x656642=a0_0x5ca8c7;this['logger']['verbose'](this[_0x656642(0x546)]+'\x20('+this[_0x656642(0x444)][_0x656642(0x638)]+_0x656642(0x2b3));try{let _0x22a667=this[_0x656642(0x4b3)][_0x656642(0x634)][_0x656642(0x509)](_0x41722d=>_0x41722d[_0x656642(0x6ae)]===_0x24f214);_0x22a667||this[_0x656642(0x6c6)]['error'](this['instanceName']+'\x20('+this[_0x656642(0x444)]['wuid']+_0x656642(0x6c5)+_0x24f214+_0x656642(0x739));let _0x27a7ba=await this['repository'][_0x656642(0x72d)][_0x656642(0x51f)]({'where':{'_id':_0x22a667['_id']}});if(!_0x27a7ba||!_0x27a7ba[_0x656642(0x719)]?.[_0x656642(0x253)](this[_0x656642(0x444)][_0x656642(0x638)]))throw this['logger'][_0x656642(0x73d)](this[_0x656642(0x546)]+'\x20('+this[_0x656642(0x444)][_0x656642(0x638)]+_0x656642(0x6c5)+_0x24f214+_0x656642(0x727)),new m(_0x656642(0x672)+_0x24f214+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');let _0x342e1e=require(_0x656642(0x1eb))['ObjectId'],_0x84658=Date[_0x656642(0x494)](),_0x55ccbc='start',_0x34c0a9={},_0x46376b={},_0x28ad9a=this[_0x656642(0x4b3)][_0x656642(0x634)][_0x656642(0x509)](_0x57b83f=>_0x57b83f[_0x656642(0x6ae)]===_0x27a7ba[_0x656642(0x6ae)]?.[_0x656642(0x30c)]()),_0x500834=_0x28ad9a?.[_0x656642(0x6cd)]??_0x27a7ba[_0x656642(0x6cd)]??0x0,_0x392ef7=_0x28ad9a?.[_0x656642(0x41b)]??_0x27a7ba['readMessages']??!0x1,_0x413b75={'flowId':_0x22a667[_0x656642(0x6ae)],'readMessages':_0x22a667[_0x656642(0x41b)],..._0x27a7ba,'chatLog':null},_0x1bfd62={'lastReceivedMessage':_0x34c0a9,'lastSendMessage':_0x46376b,'lastBlockId':_0x55ccbc,'lastCondition':!0x0,'realVariables':_0xdbfeef};_0x413b75[_0x656642(0x525)]=_0x1bfd62,_0x413b75[_0x656642(0x525)][_0x656642(0x7ae)]={..._0xdbfeef},delete _0x413b75[_0x656642(0x6ae)],_0x413b75[_0x656642(0x6ae)]=new _0x342e1e(),_0x413b75['lastInteraction']=_0x84658,_0x413b75['status']='open',_0x413b75[_0x656642(0x461)]=_0x510c7d,_0x413b75[_0x656642(0x6cd)]=_0x500834,_0x413b75[_0x656642(0x41b)]=_0x392ef7;let _0x21f5bd=await this[_0x656642(0x4b2)][_0x656642(0x535)][_0x656642(0x127)](_0x413b75[_0x656642(0x6ae)],_0x413b75,this['instance']['wuid']);return this[_0x656642(0x6c6)][_0x656642(0x39b)](this[_0x656642(0x546)]+'\x20('+this['instance']['wuid']+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x21f5bd?_0x413b75:null;}catch(_0x4817d8){let _0xcaac8d=_0x656642(0x324),_0x3f3a31=_0x4817d8 instanceof Error?_0x4817d8['message']:typeof _0x4817d8==_0x656642(0x4c4)?JSON[_0x656642(0x79e)](_0x4817d8):_0x4817d8,_0x442fb2=_0xcaac8d+':\x20'+_0x3f3a31;throw this[_0x656642(0x6c6)][_0x656642(0x73d)](this[_0x656642(0x546)]+'\x20('+this[_0x656642(0x444)][_0x656642(0x638)]+_0x656642(0x17a)+_0x442fb2),new m(_0x442fb2);}}async['processApiRequest'](_0x4a8225,_0x270ae3){const _0x41ca2c=a0_0x5ca8c7;let _0x26e75c,_0xbd95b5;try{let _0x22bbc0=_0x270ae3[_0x41ca2c(0x57c)];if(!_0x22bbc0||!_0x22bbc0[_0x41ca2c(0x123)]||!_0x22bbc0[_0x41ca2c(0x159)])throw new Error(_0x41ca2c(0x6ac));let _0x5cd254;([_0x41ca2c(0x150),_0x41ca2c(0x6fb),_0x41ca2c(0x3de)][_0x41ca2c(0xf8)](_0x3a122b=>_0x22bbc0['url'][_0x41ca2c(0x253)](_0x3a122b))||_0x22bbc0[_0x41ca2c(0x7bb)])&&(_0x5cd254='arraybuffer');let _0x3a892f='\u205f',_0x28113f;try{_0x28113f=JSON['parse'](_0x22bbc0[_0x41ca2c(0x602)][_0x41ca2c(0x2cf)](new RegExp(_0x3a892f,'g'),''));}catch(_0x2aefda){throw _0x2aefda;}let _0x3d665f={'method':_0x22bbc0['method'],'url':_0x22bbc0[_0x41ca2c(0x123)],'headers':_0x22bbc0[_0x41ca2c(0x530)]||{},..._0x22bbc0['method'][_0x41ca2c(0x442)]()!==_0x41ca2c(0x399)&&_0x22bbc0[_0x41ca2c(0x602)]?{'data':JSON[_0x41ca2c(0x27e)](_0x22bbc0[_0x41ca2c(0x602)][_0x41ca2c(0x2cf)](new RegExp(_0x3a892f,'g'),''))}:{},..._0x5cd254&&{'responseType':_0x5cd254}},_0x2a5e48=await(0x0,ee[_0x41ca2c(0x180)])(_0x3d665f),_0x5ffd9=_0x2a5e48[_0x41ca2c(0x4b8)][_0x41ca2c(0x456)];if(_0x5ffd9&&_0x5ffd9[_0x41ca2c(0x253)](_0x41ca2c(0x729))||typeof _0x2a5e48[_0x41ca2c(0x725)]==_0x41ca2c(0x7b7)){if(typeof _0x2a5e48['data']==_0x41ca2c(0x7b7)){let _0x54acc1=_0x2a5e48[_0x41ca2c(0x725)]['replace'](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x41ca2c(0x80a)]();try{_0x26e75c=JSON[_0x41ca2c(0x27e)](_0x54acc1);}catch(_0x40ed1d){this['logger']['error'](_0x41ca2c(0x679)+_0x40ed1d[_0x41ca2c(0x319)]),_0x26e75c={'_apiResponse':_0x2a5e48[_0x41ca2c(0x725)]};}}else _0x26e75c=_0x2a5e48['data'];let _0x345034=_0x4a8225[_0x41ca2c(0x525)][_0x41ca2c(0x7ae)],_0x3c36a4=this[_0x41ca2c(0x67d)](_0x26e75c);return Object[_0x41ca2c(0x14c)](_0x345034,_0x3c36a4),_0x4a8225['chatLog'][_0x41ca2c(0x7ae)]=_0x345034,_0xbd95b5={'error':!0x1,'apiResponse':_0x26e75c},this[_0x41ca2c(0x682)](_0x4a8225,_0x270ae3,_0xbd95b5),_0x26e75c;}if(_0x5ffd9&&(_0x5ffd9['includes'](_0x41ca2c(0x23c))||_0x5ffd9['includes'](_0x41ca2c(0xef))||_0x5ffd9['includes'](_0x41ca2c(0x6cc))||_0x5ffd9['includes'](_0x41ca2c(0x2b1)))){this['logger'][_0x41ca2c(0x39b)](this['instanceName']+'\x20('+this[_0x41ca2c(0x444)][_0x41ca2c(0x638)]+_0x41ca2c(0x63a)+_0x5ffd9);let _0x143732=(0x0,Y['v4'])(),_0x3d9dd5='',_0x2268be={'image/jpeg':_0x41ca2c(0x60b),'image/png':_0x41ca2c(0x246),'image/gif':_0x41ca2c(0x506),'image/webp':_0x41ca2c(0x738),'image/svg+xml':'.svg','audio/mpeg':_0x41ca2c(0x2bc),'audio/ogg':'.ogg','audio/wav':_0x41ca2c(0x101),'video/mp4':'.mp4','video/webm':_0x41ca2c(0x3a7),'video/ogg':_0x41ca2c(0x614),'text/plain':'.txt','application/pdf':_0x41ca2c(0x541),'application/msword':_0x41ca2c(0x129),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':'.docx','application/vnd.ms-excel':_0x41ca2c(0xe9),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':'.xlsx','application/vnd.ms-powerpoint':_0x41ca2c(0x4d3),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x41ca2c(0x407)};_0x2268be[_0x5ffd9]?(_0x3d9dd5=_0x2268be[_0x5ffd9],this['logger'][_0x41ca2c(0x39b)](this[_0x41ca2c(0x546)]+'\x20('+this['instance']['wuid']+'):\x20Extenso\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20'+_0x3d9dd5)):(_0x3d9dd5=_0x41ca2c(0x62f),this[_0x41ca2c(0x6c6)]['verbose'](this[_0x41ca2c(0x546)]+'\x20('+this[_0x41ca2c(0x444)][_0x41ca2c(0x638)]+_0x41ca2c(0xe4)+_0x3d9dd5)),_0x143732+=_0x3d9dd5,this[_0x41ca2c(0x6c6)][_0x41ca2c(0x39b)](this[_0x41ca2c(0x546)]+'\x20('+this[_0x41ca2c(0x444)][_0x41ca2c(0x638)]+_0x41ca2c(0x256)+_0x143732);let _0x30cd44=this[_0x41ca2c(0x588)][_0x41ca2c(0x507)]('SERVER')['URL'];if(!_0x30cd44){let _0x3e60e4=this[_0x41ca2c(0x588)][_0x41ca2c(0x507)](_0x41ca2c(0x2ad));_0x30cd44=_0x41ca2c(0x714)+(_0x3e60e4&&_0x3e60e4[_0x41ca2c(0x6fc)][_0x41ca2c(0x42a)]('/')[0x4]);}let _0x1c6b74=Buffer[_0x41ca2c(0x298)](_0x2a5e48[_0x41ca2c(0x725)]);await this['saveMediaToFile'](_0x1c6b74,_0x143732);let _0x1fefe=_0x41ca2c(0x7f0)+_0x143732;_0x1fefe=''+_0x30cd44+_0x1fefe,_0x26e75c={'fileUrl':_0x1fefe},_0x4a8225[_0x41ca2c(0x525)][_0x41ca2c(0x7ae)][_0x41ca2c(0x37b)]=_0x1fefe;let _0x141c1f=_0x4a8225[_0x41ca2c(0x525)]['realVariables'],_0x1fa533=this['flattenObject'](_0x26e75c);return Object[_0x41ca2c(0x14c)](_0x141c1f,_0x1fa533),_0x4a8225[_0x41ca2c(0x525)][_0x41ca2c(0x7ae)]=_0x141c1f,_0xbd95b5={'error':!0x1,'apiResponse':{'fileUrl':_0x1fefe}},this['updateConversation'](_0x4a8225,_0x270ae3,_0xbd95b5),_0x26e75c;}}catch(_0x506834){this[_0x41ca2c(0x6c6)][_0x41ca2c(0x73d)](_0x41ca2c(0x717)+_0x506834['message']),_0x506834['response']&&(_0x26e75c=_0x506834[_0x41ca2c(0x54f)][_0x41ca2c(0x725)]);let _0x152fc7=_0x4a8225['chatLog'][_0x41ca2c(0x7ae)],_0x375a37=this[_0x41ca2c(0x67d)](_0x26e75c);return Object[_0x41ca2c(0x14c)](_0x152fc7,_0x375a37),_0x4a8225[_0x41ca2c(0x525)][_0x41ca2c(0x7ae)]=_0x152fc7,_0xbd95b5={'error':!0x0,'errorLog':_0x506834['toString'](),'apiResponse':_0x26e75c},this['updateConversation'](_0x4a8225,_0x270ae3,_0xbd95b5),{'success':!0x1};}}[a0_0x5ca8c7(0x728)](_0x408db6,_0x318656){const _0x5e1dcc=a0_0x5ca8c7;let _0x3b927a=_0x245cc3=>{const _0x4279db=a0_0x5cfa;let _0x1af718=_0x245cc3[_0x4279db(0x2cf)](/[^0-9.,-]/g,'')[_0x4279db(0x2cf)](',','.'),_0x38d84c=parseFloat(_0x1af718);return isNaN(_0x38d84c)?null:_0x38d84c;},_0x3caba9=_0x318656[_0x5e1dcc(0x20e)],_0x1d55c9=_0x318656[_0x5e1dcc(0x798)];typeof _0x3caba9==_0x5e1dcc(0x7b7)&&(_0x3caba9=this[_0x5e1dcc(0x1bf)](_0x3caba9,_0x408db6[_0x5e1dcc(0x525)]['realVariables'])??''),typeof _0x1d55c9=='string'&&(_0x1d55c9=this[_0x5e1dcc(0x1bf)](_0x1d55c9,_0x408db6[_0x5e1dcc(0x525)]['realVariables'])??'');let _0x586c5c=null;if(!_0x318656[_0x5e1dcc(0x413)])return null;switch(this[_0x5e1dcc(0x6c6)][_0x5e1dcc(0x39b)](this[_0x5e1dcc(0x546)]+'\x20('+this['instance'][_0x5e1dcc(0x638)]+_0x5e1dcc(0x2e5)+_0x3caba9),this[_0x5e1dcc(0x6c6)][_0x5e1dcc(0x39b)](this['instanceName']+'\x20('+this[_0x5e1dcc(0x444)][_0x5e1dcc(0x638)]+_0x5e1dcc(0x1e0)+_0x1d55c9),_0x318656[_0x5e1dcc(0x413)]){case'+':case'-':case'*':case'/':let _0x3ed18f=_0x3b927a(_0x3caba9||'0'),_0x47c54b=_0x3b927a(_0x1d55c9||'0');if(_0x3ed18f===null)return null;switch(_0x318656[_0x5e1dcc(0x413)]){case'+':_0x586c5c=_0x3ed18f+(_0x47c54b??0x0);break;case'-':_0x586c5c=_0x3ed18f-(_0x47c54b??0x0);break;case'*':_0x586c5c=_0x3ed18f*(_0x47c54b??0x1);break;case'/':_0x47c54b!==0x0&&(_0x586c5c=_0x3ed18f/(_0x47c54b??0x1));break;}break;case'findAndReplace':case _0x5e1dcc(0x141):let _0x35584b=_0x1d55c9,_0x3098a8=_0x318656[_0x5e1dcc(0x471)];if(typeof _0x3098a8==_0x5e1dcc(0x7b7)&&(_0x3098a8=this[_0x5e1dcc(0x1bf)](_0x3098a8,_0x408db6[_0x5e1dcc(0x525)][_0x5e1dcc(0x7ae)])??''),_0x35584b&&_0x3098a8!==void 0x0){let _0x2910be=_0x318656[_0x5e1dcc(0x413)]===_0x5e1dcc(0x6e7)?new RegExp(_0x35584b['replace'](/[-\/\\^$*+?.()|[\]{}]/g,_0x5e1dcc(0x1b9)),'g'):new RegExp(_0x35584b,'g');_0x586c5c=_0x3caba9[_0x5e1dcc(0x2cf)](_0x2910be,_0x3098a8);}else console[_0x5e1dcc(0x7f1)](_0x5e1dcc(0x400));break;case _0x5e1dcc(0x485):_0x586c5c=_0x1d55c9;break;case _0x5e1dcc(0x52c):let _0x18a71f=_0x3caba9['match'](new RegExp(_0x1d55c9||''));_0x586c5c=_0x18a71f?_0x18a71f[0x0]:'';break;case _0x5e1dcc(0x336):_0x586c5c=_0x3caba9[_0x5e1dcc(0x80c)](0x0,parseInt(_0x1d55c9||'0'));break;case _0x5e1dcc(0x55b):let _0x1742b2=parseInt(_0x1d55c9||'0');_0x586c5c=_0x3caba9[_0x5e1dcc(0x80c)](_0x3caba9['length']-_0x1742b2);break;case _0x5e1dcc(0x227):let _0x2c8e4e=_0x3b927a(_0x3caba9),_0x35774b=parseInt(_0x1d55c9||'0');_0x35774b=Math[_0x5e1dcc(0x57b)](_0x35774b),_0x2c8e4e!==null?_0x586c5c=_0x2c8e4e[_0x5e1dcc(0x366)](_0x5e1dcc(0x313),{'minimumFractionDigits':_0x35774b,'maximumFractionDigits':_0x35774b}):(console['warn'](_0x5e1dcc(0x247)+_0x3caba9),_0x586c5c=null);break;case _0x5e1dcc(0x6bb):let _0x50563a=_0x3b927a(_0x3caba9);_0x50563a!==null?_0x586c5c=_0x50563a[_0x5e1dcc(0x366)](_0x5e1dcc(0x313),{'style':_0x5e1dcc(0x53d),'currency':'BRL'}):(console[_0x5e1dcc(0x7f1)](_0x5e1dcc(0x77e)+_0x3caba9),_0x586c5c=null);break;case _0x5e1dcc(0x4f1):_0x586c5c=_0x3caba9['toUpperCase']();break;case'lowerCase':_0x586c5c=_0x3caba9[_0x5e1dcc(0x7c7)]();break;case _0x5e1dcc(0x67b):_0x586c5c=_0x3caba9[_0x5e1dcc(0x42a)]('\x20')[_0x5e1dcc(0x726)](_0x3ca304=>_0x3ca304['charAt'](0x0)[_0x5e1dcc(0x442)]()+_0x3ca304['slice'](0x1)[_0x5e1dcc(0x7c7)]())[_0x5e1dcc(0x363)]('\x20');break;case _0x5e1dcc(0x1dd):_0x586c5c=_0x3caba9[_0x5e1dcc(0x80a)]();break;default:_0x586c5c=_0x3caba9;}return _0x586c5c!==null?_0x586c5c['toString']():null;}async[a0_0x5ca8c7(0x370)](_0x24885a,_0x4491dc){const _0x4a126d=a0_0x5ca8c7;try{let _0x16e726=_0x24885a[_0x4a126d(0x328)]?.[_0x4a126d(0xe1)](_0x20c04c=>_0x20c04c[_0x4a126d(0x468)]===_0x4491dc[_0x4a126d(0x6ae)]?.[_0x4a126d(0x30c)]())||[],_0x23a95d=_0x4491dc['saveVariable'],_0x3bd4ee=null,_0x469ed0=[],_0x55b5c3=_0x24885a['chatLog'][_0x4a126d(0x7ae)][_0x23a95d];_0x469ed0[_0x4a126d(0x7cb)](_0x4a126d(0x7d3)+_0x55b5c3+'\x22');for(let _0x3d72b3 of _0x16e726){_0x3d72b3[_0x4a126d(0x20e)]=_0x55b5c3,_0x3bd4ee=_0x3d72b3['firstValue'];let _0x579a97;try{_0x579a97=this[_0x4a126d(0x728)](_0x24885a,_0x3d72b3);}catch(_0x2e0ba8){this[_0x4a126d(0x6c6)][_0x4a126d(0x73d)](_0x4a126d(0x12c)+_0x2e0ba8[_0x4a126d(0x319)]);continue;}if(_0x579a97!==null){let _0x1ef464=_0x4a126d(0x308)+_0x3d72b3[_0x4a126d(0x413)]+'\x22',_0x38514d=[_0x4a126d(0x6bb),_0x4a126d(0x4f1),'lowerCase',_0x4a126d(0x67b),_0x4a126d(0x1dd)];_0x3d72b3[_0x4a126d(0x413)]===_0x4a126d(0x6e7)||_0x3d72b3[_0x4a126d(0x413)]===_0x4a126d(0x141)?_0x1ef464+=_0x4a126d(0x5c5)+_0x3d72b3[_0x4a126d(0x798)]+'\x22,\x20valor\x20a\x20substituir:\x20\x22'+_0x3d72b3[_0x4a126d(0x471)]+'\x22':!_0x38514d[_0x4a126d(0x253)](_0x3d72b3[_0x4a126d(0x413)])&&_0x3d72b3[_0x4a126d(0x798)]!==null&&_0x3d72b3['secondValue']!==void 0x0&&(_0x1ef464+=_0x4a126d(0x1fc)+_0x3d72b3[_0x4a126d(0x798)]+'\x22'),_0x1ef464+=',\x20resultado:\x20'+_0x579a97+'.',_0x469ed0['push'](_0x1ef464);}_0x579a97!==null&&(_0x55b5c3=_0x579a97);}if(_0x24885a[_0x4a126d(0x525)]['realVariables']&&_0x4491dc[_0x4a126d(0x162)]){_0x24885a[_0x4a126d(0x525)]['realVariables'][_0x4491dc[_0x4a126d(0x162)]]=_0x55b5c3;let _0x38eba2={'variable':_0x4491dc['saveVariable'],'oldValue':_0x3bd4ee,'newValue':_0x55b5c3,'moreLogs':_0x469ed0};try{this[_0x4a126d(0x682)](_0x24885a,_0x4491dc,_0x38eba2);}catch(_0xf1fcdf){this['logger'][_0x4a126d(0x73d)]('Erro\x20ao\x20atualizar\x20conversa:\x20'+_0xf1fcdf[_0x4a126d(0x319)]);}}return _0x23a95d;}catch(_0x3f946c){return this[_0x4a126d(0x6c6)][_0x4a126d(0x73d)](_0x4a126d(0x22f)+_0x3f946c['message']),null;}}async[a0_0x5ca8c7(0x1ed)](_0x14dcac,_0x1eb008){const _0x23b0b5=a0_0x5ca8c7;try{let _0x205d5c=[],_0x58da6a=_0x14dcac[_0x23b0b5(0x495)][_0x23b0b5(0xe1)](_0x596d90=>_0x596d90[_0x23b0b5(0x468)]===_0x1eb008[_0x23b0b5(0x6ae)]['toString']()),_0x5833a1=null,_0x3379c9=!0x1;for(let _0x2c965 of _0x58da6a){let _0x1f378f=this[_0x23b0b5(0x110)](_0x14dcac,_0x2c965);_0x205d5c['push'](_0x23b0b5(0x3e8)+_0x2c965[_0x23b0b5(0x20e)]+_0x23b0b5(0x255)+_0x2c965[_0x23b0b5(0x214)]+_0x23b0b5(0x7c0)+_0x2c965[_0x23b0b5(0x798)]+_0x23b0b5(0x125)+_0x1f378f),_0x5833a1===null?_0x5833a1=_0x1f378f:_0x2c965[_0x23b0b5(0x64d)]==='and'?(_0x5833a1=_0x5833a1&&_0x1f378f,_0x1f378f||(_0x3379c9=!0x0)):_0x2c965[_0x23b0b5(0x64d)]==='or'&&(_0x3379c9||(_0x5833a1=_0x5833a1||_0x1f378f));}_0x5833a1===null&&(_0x5833a1=!0x0);let _0x47e4b1={'moreLogs':_0x205d5c};_0x14dcac[_0x23b0b5(0x525)]['lastCondition']=_0x5833a1,await this[_0x23b0b5(0x682)](_0x14dcac,_0x1eb008,_0x47e4b1);}catch(_0x517ded){this['logger'][_0x23b0b5(0x73d)](this[_0x23b0b5(0x546)]+'\x20('+this['instance'][_0x23b0b5(0x638)]+_0x23b0b5(0x219)+(_0x517ded instanceof Error?_0x517ded[_0x23b0b5(0x319)]:JSON[_0x23b0b5(0x79e)](_0x517ded,null,0x2)));}}[a0_0x5ca8c7(0x110)](_0x48b3f3,_0xa18dee){const _0x5c90a6=a0_0x5ca8c7;let _0x4afa91=_0xa18dee['firstValue'],_0x223875=_0xa18dee[_0x5c90a6(0x798)];typeof _0x4afa91==_0x5c90a6(0x7b7)&&(_0x4afa91=this[_0x5c90a6(0x1bf)](_0x4afa91,_0x48b3f3[_0x5c90a6(0x525)][_0x5c90a6(0x7ae)])??''),typeof _0x223875==_0x5c90a6(0x7b7)&&(_0x223875=this[_0x5c90a6(0x1bf)](_0x223875,_0x48b3f3[_0x5c90a6(0x525)][_0x5c90a6(0x7ae)])??'');try{switch(_0xa18dee[_0x5c90a6(0x214)]){case'equal':return _0x4afa91===_0x223875;case _0x5c90a6(0x458):return _0x4afa91!==_0x223875;case'contains':return this[_0x5c90a6(0x39f)](_0x4afa91,_0x223875);case _0x5c90a6(0x1cb):return!this[_0x5c90a6(0x39f)](_0x4afa91,_0x223875);case'greater':return parseFloat(_0x4afa91)>parseFloat(_0x223875);case _0x5c90a6(0x666):return parseFloat(_0x4afa91)<parseFloat(_0x223875);case'notEmpty':return _0x4afa91!=='';case'empty':return _0x4afa91==='';case'matchRegex':return new RegExp(_0x223875)[_0x5c90a6(0x418)](_0x4afa91);case'notMatchRegex':return!new RegExp(_0x223875)['test'](_0x4afa91);default:return!0x1;}}catch(_0x5ac198){return this['logger'][_0x5c90a6(0x73d)](_0x5c90a6(0x5d4)+_0x5ac198),!0x1;}}[a0_0x5ca8c7(0x39f)](_0x3c982f,_0x569833){const _0x144c2b=a0_0x5ca8c7;if(_0x3c982f===_0x569833&&/^\d+$/[_0x144c2b(0x418)](_0x3c982f))return!0x0;if(this[_0x144c2b(0x1d9)](_0x3c982f)&&/^\d+$/[_0x144c2b(0x418)](_0x569833)){let _0x35514f=_0x3c982f[_0x144c2b(0x42a)](',')[_0x144c2b(0x726)](_0x26bc85=>parseInt(_0x26bc85[_0x144c2b(0x80a)]())),_0x591dd6=parseInt(_0x569833);return _0x35514f[_0x144c2b(0x253)](_0x591dd6);}return _0x3c982f[_0x144c2b(0x253)](_0x569833);}[a0_0x5ca8c7(0x1d9)](_0x30f6b0){const _0x50e306=a0_0x5ca8c7;return/^\d+(,\d+)*$/[_0x50e306(0x418)](_0x30f6b0);}[a0_0x5ca8c7(0x7b2)](_0x59c3bf){const _0x4f8240=a0_0x5ca8c7;let _0x30b23b=!0x0,_0x53be9a=null;for(let _0x49424e of _0x59c3bf){let _0x34ecbd=this['evaluateConditionTest'](_0x49424e);if(_0x53be9a==='or'&&_0x34ecbd){_0x30b23b=!0x0;break;}if(_0x53be9a===_0x4f8240(0x549)&&!_0x34ecbd){_0x30b23b=!0x1;break;}_0x53be9a=_0x49424e['OrAnd'];}return _0x30b23b;}[a0_0x5ca8c7(0x262)](_0x4adb08){const _0x447804=a0_0x5ca8c7;let _0xee528d=_0x4adb08[_0x447804(0x20e)],_0x1b54ed=_0x4adb08['secondValue'];try{switch(_0x4adb08[_0x447804(0x214)]){case _0x447804(0x2ce):return String(_0xee528d)===String(_0x1b54ed);case'notEqual':return String(_0xee528d)!==String(_0x1b54ed);case _0x447804(0x39f):return String(_0xee528d)['includes'](String(_0x1b54ed));case _0x447804(0x1cb):return!String(_0xee528d)[_0x447804(0x253)](String(_0x1b54ed));case _0x447804(0x3a5):return parseFloat(String(_0xee528d))>parseFloat(String(_0x1b54ed));case _0x447804(0x666):return parseFloat(String(_0xee528d))<parseFloat(String(_0x1b54ed));case _0x447804(0x33e):return String(_0xee528d)!=='';case _0x447804(0x600):return String(_0xee528d)==='';case _0x447804(0x107):return new RegExp(String(_0x1b54ed))['test'](String(_0xee528d));case _0x447804(0x4f6):return!new RegExp(String(_0x1b54ed))[_0x447804(0x418)](String(_0xee528d));default:return!0x1;}}catch(_0xdb2aaf){return this['logger']['error'](_0x447804(0x5d4)+_0xdb2aaf),!0x1;}}async[a0_0x5ca8c7(0x720)](_0x11b700,_0x5d5b60){const _0x201d62=a0_0x5ca8c7;if(this[_0x201d62(0x6c6)][_0x201d62(0x39b)](this[_0x201d62(0x546)]+'\x20('+this[_0x201d62(0x444)][_0x201d62(0x638)]+_0x201d62(0x55e)),!_0x11b700||!_0x5d5b60)return this[_0x201d62(0x6c6)][_0x201d62(0x73d)](this[_0x201d62(0x546)]+'\x20('+this['instance'][_0x201d62(0x638)]+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;let _0x5d24c8=_0x11b700['chatLog'][_0x201d62(0x5f3)][_0x201d62(0x3c3)]['id'];this[_0x201d62(0x6c6)][_0x201d62(0x39b)](this[_0x201d62(0x546)]+'\x20('+this[_0x201d62(0x444)][_0x201d62(0x638)]+_0x201d62(0x721)+_0x5d24c8);let _0x43cf31={'key':{'id':_0x5d24c8}},_0x4adc80=_0x5d5b60[_0x201d62(0x162)];_0x11b700[_0x201d62(0x525)][_0x201d62(0x7ae)]['_'+_0x4adc80+_0x201d62(0x791)]=null,_0x11b700[_0x201d62(0x525)][_0x201d62(0x7ae)]['_'+_0x4adc80+'.mimetype']=null,_0x11b700['chatLog'][_0x201d62(0x7ae)]['_'+_0x4adc80+_0x201d62(0xda)]=null,_0x11b700[_0x201d62(0x525)][_0x201d62(0x7ae)]['_'+_0x4adc80+_0x201d62(0x704)]=_0x11b700[_0x201d62(0x525)]['lastReceivedMessage'][_0x201d62(0x573)];try{let _0x1aaf51=await this[_0x201d62(0x6f0)](_0x43cf31);this[_0x201d62(0x6c6)][_0x201d62(0x39b)](this[_0x201d62(0x546)]+'\x20('+this['instance'][_0x201d62(0x638)]+'):\x20Detalhes\x20da\x20mdia\x20obtidos\x20com\x20sucesso.'),_0x11b700[_0x201d62(0x525)]['realVariables']['_'+_0x4adc80+_0x201d62(0x7c3)]=_0x1aaf51['fileUrl'],_0x11b700[_0x201d62(0x525)][_0x201d62(0x7ae)]['_'+_0x4adc80+_0x201d62(0x7b9)]=_0x1aaf51[_0x201d62(0x79c)];let _0x55ddc6=_0x1aaf51[_0x201d62(0x79c)]['match'](/\/(\w+)$/),_0x526d31=_0x55ddc6?_0x55ddc6[0x1]:null;_0x11b700[_0x201d62(0x525)][_0x201d62(0x7ae)]['_'+_0x4adc80+'.extension']=_0x526d31,this['logger'][_0x201d62(0x39b)](this['instanceName']+'\x20('+this[_0x201d62(0x444)][_0x201d62(0x638)]+'):\x20Detalhes\x20da\x20mdia\x20salvos\x20para\x20\x27'+_0x4adc80+'\x27.');}catch(_0x55221b){this[_0x201d62(0x6c6)]['error'](this[_0x201d62(0x546)]+'\x20('+this[_0x201d62(0x444)]['wuid']+_0x201d62(0x81a)+_0x55221b[_0x201d62(0x319)]);}let _0x2292ff=_0x11b700[_0x201d62(0x525)][_0x201d62(0x5f3)]['text']||_0x11b700[_0x201d62(0x525)][_0x201d62(0x5f3)][_0x201d62(0x204)]||_0x11b700[_0x201d62(0x525)][_0x201d62(0x5f3)]['vote'];try{_0x11b700[_0x201d62(0x525)][_0x201d62(0x7ae)]||(_0x11b700['chatLog'][_0x201d62(0x7ae)]={});let _0x323223=_0x11b700[_0x201d62(0x525)][_0x201d62(0x7ae)][_0x4adc80];_0x11b700[_0x201d62(0x525)][_0x201d62(0x7ae)][_0x4adc80]=_0x2292ff;let _0x44ee2a={'variable':_0x4adc80,'oldValue':_0x323223,'newValue':_0x2292ff};this[_0x201d62(0x682)](_0x11b700,_0x5d5b60,_0x44ee2a),this[_0x201d62(0x6c6)][_0x201d62(0x39b)](this[_0x201d62(0x546)]+'\x20('+this['instance'][_0x201d62(0x638)]+'):\x20Conversa\x20atualizada\x20em\x20memria');}catch(_0x4f9ca8){let _0x38f88b={'error':!0x0,'errorLog':_0x4f9ca8['toString']()};return this[_0x201d62(0x682)](_0x11b700,_0x5d5b60,_0x38f88b),this['logger'][_0x201d62(0x73d)](this[_0x201d62(0x546)]+'\x20('+this[_0x201d62(0x444)][_0x201d62(0x638)]+_0x201d62(0x6c7)+(_0x4f9ca8 instanceof Error?_0x4f9ca8['message']:JSON[_0x201d62(0x79e)](_0x4f9ca8,null,0x2))),null;}}async[a0_0x5ca8c7(0x428)](_0x4eba23,_0x5b6c08){const _0x26f9ff=a0_0x5ca8c7;if(this[_0x26f9ff(0x6c6)][_0x26f9ff(0x39b)](this['instanceName']+'\x20('+this[_0x26f9ff(0x444)][_0x26f9ff(0x638)]+_0x26f9ff(0x446)),!_0x4eba23||!_0x5b6c08)return this['logger'][_0x26f9ff(0x73d)](this[_0x26f9ff(0x546)]+'\x20('+this[_0x26f9ff(0x444)][_0x26f9ff(0x638)]+'):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos'),null;let _0x34a014=Date[_0x26f9ff(0x494)](),_0x137233=parseInt(_0x5b6c08[_0x26f9ff(0x815)],0xa);if(isNaN(_0x137233))return this[_0x26f9ff(0x6c6)][_0x26f9ff(0x73d)](this[_0x26f9ff(0x546)]+'\x20('+this[_0x26f9ff(0x444)][_0x26f9ff(0x638)]+_0x26f9ff(0x443)),null;let _0x12dee4={'newStoppedUntil':_0x34a014+_0x137233*0x3c*0x3e8};return await this['updateConversation'](_0x4eba23,_0x5b6c08,_0x12dee4,!0x0),null;}async[a0_0x5ca8c7(0x3e5)](_0x1863e1,_0x132530){const _0x5cef28=a0_0x5ca8c7;try{switch(_0x132530[_0x5cef28(0x13b)][_0x5cef28(0x566)]){case'sendText':await this[_0x5cef28(0x397)](_0x1863e1,_0x132530);break;case _0x5cef28(0x303):await this[_0x5cef28(0x1ac)](_0x1863e1,_0x132530);break;case _0x5cef28(0x1df):await this[_0x5cef28(0x19d)](_0x1863e1,_0x132530);break;case _0x5cef28(0x564):await this[_0x5cef28(0x12a)](_0x1863e1,_0x132530);break;case _0x5cef28(0x409):await this[_0x5cef28(0x58e)](_0x1863e1,_0x132530);break;case _0x5cef28(0x7e4):await this[_0x5cef28(0x490)](_0x1863e1,_0x132530);break;case'sendMenu':await this['uazapiSendMenu'](_0x1863e1,_0x132530);break;case _0x5cef28(0x703):await this[_0x5cef28(0x5d9)](_0x1863e1,_0x132530);break;default:this[_0x5cef28(0x6c6)]['error'](this[_0x5cef28(0x546)]+'\x20('+this['instance'][_0x5cef28(0x638)]+'):\x20Comando\x20desconhecido:\x20'+_0x132530[_0x5cef28(0x13b)]['command']);}}catch(_0x401f6b){this['logger']['error'](this[_0x5cef28(0x546)]+'\x20('+this[_0x5cef28(0x444)][_0x5cef28(0x638)]+_0x5cef28(0x4bd)+(_0x401f6b instanceof Error?_0x401f6b['message']:JSON['stringify'](_0x401f6b,null,0x2)));}}async[a0_0x5ca8c7(0x682)](_0x5a01e7,_0x36e775,_0x36042b,_0x4970dc=!0x1,_0x42f9f4=!0x1){const _0x292ce4=a0_0x5ca8c7;_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x2a1)]||(_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x2a1)]=[]);let _0x31bc1f=(_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x2a1)]?.[_0x292ce4(0x293)]??0x0)+0x1,_0x355d47=_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x2a1)][_0x292ce4(0xe1)](_0x3485d0=>String(_0x3485d0[_0x292ce4(0x468)])===String(_0x36e775[_0x292ce4(0x6ae)]))[_0x292ce4(0x293)]+0x1,_0x4a40a5=_0x36042b?.[_0x292ce4(0x398)]??Date[_0x292ce4(0x494)](),_0x2fbfad=_0x36042b?.['error']?_0x36042b['errorLog']??_0x36042b[_0x292ce4(0x73d)][_0x292ce4(0x30c)]():void 0x0,_0x353178={'onTime':_0x4a40a5,'blockId':_0x36e775[_0x292ce4(0x6ae)],'order':_0x31bc1f,'activatedCount':_0x355d47,'error':_0x36042b?.[_0x292ce4(0x73d)]??!0x1,'messageId':_0x36042b?.[_0x292ce4(0x1f3)],'apiResponse':_0x36042b?.[_0x292ce4(0x452)],'apiResponseString':_0x36042b?.[_0x292ce4(0x452)]?JSON[_0x292ce4(0x79e)](_0x36042b?.[_0x292ce4(0x452)]):void 0x0,'variable':_0x36042b?.[_0x292ce4(0x69b)],'oldValue':_0x36042b?.[_0x292ce4(0x7ce)],'newValue':_0x36042b?.['newValue'],'newStoppedUntil':_0x36042b?.[_0x292ce4(0x3c9)],'moreLogs':_0x36042b?.['moreLogs'],'errorLog':_0x2fbfad};if(_0x36042b[_0x292ce4(0xc8)]&&_0x36042b[_0x292ce4(0xc8)][_0x292ce4(0x293)]>0x0){let _0x2a8e44=_0x36042b[_0x292ce4(0xc8)]['map'](_0x1463fa=>this[_0x292ce4(0x2fb)](_0x1463fa,_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x7ae)]));_0x353178[_0x292ce4(0xc8)]=_0x2a8e44;}if(_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x7ae)]||(_0x5a01e7[_0x292ce4(0x525)]['realVariables']={}),_0x5a01e7['chatLog'][_0x292ce4(0x7ae)][_0x292ce4(0x167)]=String(_0x355d47),_0x5a01e7[_0x292ce4(0x525)]['realVariables'][_0x292ce4(0x3b0)]=String(_0x36042b[_0x292ce4(0x73d)]??!0x1),_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x2a1)][_0x292ce4(0x7cb)](_0x353178),_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x7ae)]['telefone']&&_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x7ae)][_0x292ce4(0x18b)]!==_0x5a01e7[_0x292ce4(0x461)]){let _0x53c2b8=(await this[_0x292ce4(0x322)]({'numbers':[_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x7ae)][_0x292ce4(0x18b)]]}))[0x0][_0x292ce4(0x801)];_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x7ae)]['telefone']=_0x53c2b8,_0x5a01e7['remoteJid']=_0x53c2b8;try{let _0x38fcf6={'_id':{'$ne':_0x5a01e7[_0x292ce4(0x6ae)]},'remoteJid':_0x53c2b8,'status':_0x292ce4(0x349)},_0x37782c={'status':_0x292ce4(0x5fb)};await this[_0x292ce4(0x4b2)][_0x292ce4(0x535)]['updateMany'](_0x38fcf6,_0x37782c,this[_0x292ce4(0x444)][_0x292ce4(0x638)]),this[_0x292ce4(0x6c6)][_0x292ce4(0x39b)](this['instanceName']+'\x20('+this[_0x292ce4(0x444)][_0x292ce4(0x638)]+_0x292ce4(0x57d));}catch(_0x4063d3){this[_0x292ce4(0x6c6)][_0x292ce4(0x73d)](this[_0x292ce4(0x546)]+'\x20('+this[_0x292ce4(0x444)][_0x292ce4(0x638)]+_0x292ce4(0x646)+_0x4063d3[_0x292ce4(0x319)]);}try{let _0x4744d9=_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x7ae)],_0x3b5266=await this[_0x292ce4(0x465)](_0x53c2b8),_0x29686f={..._0x4744d9,..._0x3b5266,'_remoteJid':_0x53c2b8};_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x7ae)]=_0x29686f;}catch(_0x3ea6c7){this['logger']['error'](this['instanceName']+'\x20('+this[_0x292ce4(0x444)][_0x292ce4(0x638)]+_0x292ce4(0x5e7)+_0x3ea6c7[_0x292ce4(0x319)]);}}_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x67f)]=_0x36e775[_0x292ce4(0x6ae)][_0x292ce4(0x30c)](),_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x521)]&&(_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x521)]=_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x521)]),_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x5f3)]&&(_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x5f3)]=_0x5a01e7['chatLog'][_0x292ce4(0x5f3)]),_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x163)]&&(_0x5a01e7['chatLog'][_0x292ce4(0x163)]=_0x5a01e7[_0x292ce4(0x525)][_0x292ce4(0x163)]),_0x42f9f4&&(_0x5a01e7['status']=_0x292ce4(0x5fb)),_0x4970dc?this['saveConversationToDatabase'](_0x5a01e7):this[_0x292ce4(0x140)](_0x5a01e7,_0x36e775);}[a0_0x5ca8c7(0x2fb)](_0x44cac9,_0x474b88){const _0x3f1377=a0_0x5ca8c7;return _0x44cac9[_0x3f1377(0x2cf)](/\{\{([^}]+)\}\}/g,(_0x1578fc,_0x2a46dd)=>_0x474b88[_0x2a46dd]?'{{'+_0x2a46dd+_0x3f1377(0x1f1)+_0x474b88[_0x2a46dd]+'\x22':'{{'+_0x2a46dd+_0x3f1377(0x31b));}async[a0_0x5ca8c7(0x7c6)](_0x5cdb0f){const _0xef995d=a0_0x5ca8c7;try{let _0x56677e=Object[_0xef995d(0x1ce)](_0x5cdb0f[_0xef995d(0x525)][_0xef995d(0x7ae)])[_0xef995d(0x726)](([_0x1b479e,_0x40b920])=>({'name':_0x1b479e,'value':_0x40b920})),_0x4db33c={'status':_0x5cdb0f[_0xef995d(0x3e2)],'remoteJid':_0x5cdb0f[_0xef995d(0x461)],'blocks':_0x5cdb0f[_0xef995d(0xe6)],'waitingMenu_id':_0x5cdb0f[_0xef995d(0x6d3)],'waitingMenu_text':_0x5cdb0f[_0xef995d(0x5eb)],'waitingMenu_replyOptions':_0x5cdb0f[_0xef995d(0x2a5)],'chatLog':{'lastBlockId':_0x5cdb0f[_0xef995d(0x525)][_0xef995d(0x67f)],'lastSendMessage':_0x5cdb0f[_0xef995d(0x525)][_0xef995d(0x521)],'lastReceivedMessage':_0x5cdb0f[_0xef995d(0x525)]['lastReceivedMessage'],'lastCondition':_0x5cdb0f['chatLog'][_0xef995d(0x163)],'chatVariables':_0x56677e,'realVariables':_0x5cdb0f[_0xef995d(0x525)][_0xef995d(0x7ae)],'blockLogs':_0x5cdb0f[_0xef995d(0x525)][_0xef995d(0x2a1)]}},_0x1653d9=await this[_0xef995d(0x4b2)][_0xef995d(0x535)]['updateOne'](_0x5cdb0f['_id'],_0x4db33c,this[_0xef995d(0x444)][_0xef995d(0x638)]);if(_0x1653d9){this[_0xef995d(0x6c6)][_0xef995d(0x39b)](this['instanceName']+'\x20('+this[_0xef995d(0x444)][_0xef995d(0x638)]+_0xef995d(0x198)+_0x1653d9[_0xef995d(0x6ae)]);try{let _0x1e22ba=[_0xef995d(0x182),_0xef995d(0x2e0),_0xef995d(0x232),_0xef995d(0x4e7),_0xef995d(0x3e2),_0xef995d(0x520),_0xef995d(0x77c),_0xef995d(0x2a7),_0xef995d(0xc9),'atendimentoAberto'];if(!this[_0xef995d(0x4b3)]&&(await this['getAutomateSystem'](),!this[_0xef995d(0x4b3)]))throw new Error('AutomateSystem\x20no\x20foi\x20inicializado');let _0x52413d=this['AutomateSystem']?.['customFields'][_0xef995d(0x726)](_0xc7885a=>_0xc7885a[_0xef995d(0x786)]),_0x220da3={};Object[_0xef995d(0x1ce)](_0x5cdb0f[_0xef995d(0x525)][_0xef995d(0x7ae)])[_0xef995d(0x57a)](([_0x433dfb,_0x48cc19])=>{const _0x4839fb=_0xef995d;_0x1e22ba['includes'](_0x433dfb)&&(_0x433dfb===_0x4839fb(0x2a7)&&typeof _0x48cc19==_0x4839fb(0x7b7)?_0x220da3[_0x433dfb]=_0x48cc19[_0x4839fb(0x42a)](',')[_0x4839fb(0x726)](_0x5a39a4=>_0x5a39a4[_0x4839fb(0x80a)]())['filter'](_0x3bb8ea=>_0x3bb8ea!==''):_0x433dfb==='etiquetas'&&typeof _0x48cc19==_0x4839fb(0x7b7)?_0x220da3[_0x433dfb]=_0x48cc19[_0x4839fb(0x42a)](',')[_0x4839fb(0x726)](_0x1bc370=>_0x1bc370[_0x4839fb(0x80a)]())[_0x4839fb(0xe1)](_0x25536d=>_0x25536d!==''):_0x220da3[_0x433dfb]=_0x48cc19);});let _0x4f5a4e=_0x5cdb0f[_0xef995d(0x525)][_0xef995d(0x2a1)][_0x5cdb0f[_0xef995d(0x525)]['blockLogs'][_0xef995d(0x293)]-0x1];if(_0x4f5a4e){let _0x2ed504=_0x4f5a4e['newStoppedUntil'];_0x2ed504!==void 0x0&&(_0x220da3[_0xef995d(0x284)]=_0x2ed504[_0xef995d(0x30c)]());}let _0x474272=_0x56677e[_0xef995d(0xe1)](_0x2a157a=>_0x52413d[_0xef995d(0x253)](_0x2a157a['name']));this['logger'][_0xef995d(0x39b)](this[_0xef995d(0x546)]+'\x20('+this[_0xef995d(0x444)][_0xef995d(0x638)]+_0xef995d(0x447)),this[_0xef995d(0x6c6)][_0xef995d(0x39b)](_0x220da3),this[_0xef995d(0x6c6)]['verbose'](this[_0xef995d(0x546)]+'\x20('+this[_0xef995d(0x444)][_0xef995d(0x638)]+_0xef995d(0x131)),this[_0xef995d(0x6c6)][_0xef995d(0x39b)](_0x474272);let _0x13ce93=_0x474272['map'](_0x12aa08=>{const _0x543f6c=_0xef995d;let _0x204e61=this['AutomateSystem']?.[_0x543f6c(0x34f)][_0x543f6c(0x509)](_0x24eaac=>_0x24eaac[_0x543f6c(0x786)]===_0x12aa08['name']);if(!_0x204e61)throw new Error(_0x543f6c(0x6b7)+_0x12aa08[_0x543f6c(0x786)]);return{'_id':_0x204e61['_id'],'value':_0x12aa08[_0x543f6c(0x76f)]};});this[_0xef995d(0x6c6)][_0xef995d(0x39b)](this[_0xef995d(0x546)]+'\x20('+this[_0xef995d(0x444)][_0xef995d(0x638)]+_0xef995d(0x3fd)),this[_0xef995d(0x6c6)]['verbose'](_0x13ce93),await this[_0xef995d(0xd0)](_0x5cdb0f[_0xef995d(0x461)],_0x220da3,_0x13ce93);}catch(_0x37ab0e){this[_0xef995d(0x6c6)][_0xef995d(0x73d)](this[_0xef995d(0x546)]+'\x20('+this[_0xef995d(0x444)][_0xef995d(0x638)]+_0xef995d(0x656)+(_0x37ab0e instanceof Error?_0x37ab0e[_0xef995d(0x319)]:JSON['stringify'](_0x37ab0e,null,0x2)));}}else this[_0xef995d(0x6c6)][_0xef995d(0x73d)](this['instanceName']+'\x20('+this['instance']['wuid']+_0xef995d(0x78c));}catch(_0x4eb7d8){this[_0xef995d(0x6c6)]['error'](this['instanceName']+'\x20('+this[_0xef995d(0x444)][_0xef995d(0x638)]+_0xef995d(0x3ea)+(_0x4eb7d8 instanceof Error?_0x4eb7d8[_0xef995d(0x319)]:JSON[_0xef995d(0x79e)](_0x4eb7d8,null,0x2)));}}async['saveChatVariables'](_0x5e93be,_0x6d6e58,_0x28b853){const _0x31c7fb=a0_0x5ca8c7;try{let _0x2ccc6a={'leadInfo.leadnome':_0x6d6e58[_0x31c7fb(0x182)],'leadInfo.nomecompleto':_0x6d6e58['nomecompleto'],'leadInfo.email':_0x6d6e58[_0x31c7fb(0x232)],'leadInfo.cpf':_0x6d6e58[_0x31c7fb(0x4e7)],'leadInfo.status':_0x6d6e58['status'],'leadInfo.notas':_0x6d6e58[_0x31c7fb(0x520)],'leadInfo.responsavelid':_0x6d6e58[_0x31c7fb(0x77c)],'leadInfo.tags':_0x6d6e58[_0x31c7fb(0x2a7)],'leadInfo.etiquetas':_0x6d6e58[_0x31c7fb(0xc9)],'leadInfo.customFields':_0x28b853,'leadInfo.atendimentoAberto':_0x6d6e58['atendimentoAberto']},_0x187abb=await this['repository'][_0x31c7fb(0x5f1)][_0x31c7fb(0x51f)]({'where':{'_id':_0x5e93be}},this[_0x31c7fb(0x444)]['wuid']);if(!_0x187abb)return _0x31c7fb(0xd5);let _0x1cc867=new Set(_0x187abb[_0x31c7fb(0x3d0)]['etiquetas']||[]),_0x2c41ce=new Set(_0x6d6e58[_0x31c7fb(0xc9)]||[]),_0x533392=await this[_0x31c7fb(0x4b2)][_0x31c7fb(0x6a2)][_0x31c7fb(0x509)]({'where':{}},this[_0x31c7fb(0x444)]['wuid']),_0x2ef48c=new Set(_0x533392['map'](_0x4ff002=>_0x4ff002[_0x31c7fb(0x6ae)])),_0x265e1d=[..._0x2c41ce][_0x31c7fb(0xe1)](_0x4d44d0=>!_0x1cc867[_0x31c7fb(0x183)](_0x4d44d0)&&_0x2ef48c['has'](_0x4d44d0)),_0x146e36=[..._0x1cc867][_0x31c7fb(0xe1)](_0x1dc702=>!_0x2c41ce[_0x31c7fb(0x183)](_0x1dc702));for(let _0x31db46 of _0x265e1d)await this[_0x31c7fb(0x28f)](_0x31db46,_0x187abb[_0x31c7fb(0x6ae)]),_0x1cc867[_0x31c7fb(0x6ff)](_0x31db46);for(let _0x1f716d of _0x146e36)await this[_0x31c7fb(0x5cc)](_0x1f716d,_0x187abb[_0x31c7fb(0x6ae)]),_0x1cc867[_0x31c7fb(0x5e3)](_0x1f716d);if(_0x31c7fb(0x284)in _0x6d6e58){let _0x59924d=_0x6d6e58[_0x31c7fb(0x284)];_0x2ccc6a[_0x31c7fb(0x16b)]=_0x59924d?Number(_0x59924d):null;}if(_0x31c7fb(0x3e6)in _0x6d6e58){let _0xf1826f=_0x6d6e58[_0x31c7fb(0x3e6)][_0x31c7fb(0x7c7)]();_0x2ccc6a['leadInfo.atendimentoAberto']=_0xf1826f===_0x31c7fb(0x29e)||_0xf1826f==='1'||_0xf1826f===_0x31c7fb(0x37a)||_0xf1826f===_0x31c7fb(0x4af);}let _0x32caee=await this[_0x31c7fb(0x4b2)][_0x31c7fb(0x5f1)][_0x31c7fb(0x127)]({'where':{'_id':_0x5e93be}},_0x2ccc6a,this['instance'][_0x31c7fb(0x638)]);_0x32caee?(this[_0x31c7fb(0x6c6)][_0x31c7fb(0x39b)](this[_0x31c7fb(0x546)]+'\x20('+this[_0x31c7fb(0x444)][_0x31c7fb(0x638)]+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20'+_0x32caee[_0x31c7fb(0x6ae)]),q(this[_0x31c7fb(0x546)],_0x31c7fb(0x2ea),{'chat':_0x32caee})):this['logger'][_0x31c7fb(0x73d)](this['instanceName']+'\x20('+this[_0x31c7fb(0x444)]['wuid']+_0x31c7fb(0x47d));}catch(_0x59726b){this[_0x31c7fb(0x6c6)][_0x31c7fb(0x73d)](this[_0x31c7fb(0x546)]+'\x20('+this['instance'][_0x31c7fb(0x638)]+'):\x20Erro\x20ao\x20salvar\x20variveis\x20do\x20chat\x20no\x20BD:\x20'+(_0x59726b instanceof Error?_0x59726b[_0x31c7fb(0x319)]:JSON[_0x31c7fb(0x79e)](_0x59726b,null,0x2)));}}async[a0_0x5ca8c7(0x2db)](_0xdf2517,_0x5c84c4){const _0x25dc6b=a0_0x5ca8c7;this[_0x25dc6b(0x6c6)][_0x25dc6b(0x39b)](this[_0x25dc6b(0x546)]+'\x20('+this[_0x25dc6b(0x444)][_0x25dc6b(0x638)]+'):\x20atualizao\x20chat:\x20'+_0x5c84c4);try{let _0x58443f=await this['repository'][_0x25dc6b(0x5f1)]['updateOne']({'where':{'_id':_0xdf2517['remoteJid']}},{'leadInfo.desativadoFluxoAte':_0x5c84c4},this[_0x25dc6b(0x444)][_0x25dc6b(0x638)]);this[_0x25dc6b(0x6c6)][_0x25dc6b(0x39b)](this[_0x25dc6b(0x546)]+'\x20('+this[_0x25dc6b(0x444)][_0x25dc6b(0x638)]+_0x25dc6b(0x235)+_0xdf2517[_0x25dc6b(0x6ae)]),this[_0x25dc6b(0x6c6)][_0x25dc6b(0x39b)](this[_0x25dc6b(0x546)]+'\x20('+this['instance'][_0x25dc6b(0x638)]+_0x25dc6b(0x34b)+JSON[_0x25dc6b(0x79e)](_0x58443f,null,0x2)),_0x58443f&&q(this[_0x25dc6b(0x546)],_0x25dc6b(0x2ea),{'chat':_0x58443f});}catch(_0x1b9fa5){this[_0x25dc6b(0x6c6)][_0x25dc6b(0x73d)](this[_0x25dc6b(0x546)]+'\x20('+this[_0x25dc6b(0x444)]['wuid']+_0x25dc6b(0x342)+(_0x1b9fa5 instanceof Error?_0x1b9fa5['message']:JSON[_0x25dc6b(0x79e)](_0x1b9fa5,null,0x2)));}}async[a0_0x5ca8c7(0x4d8)](_0x1e0181){const _0x2edaa9=a0_0x5ca8c7;try{this[_0x2edaa9(0x6c6)][_0x2edaa9(0x39b)](this['instanceName']+'\x20('+this[_0x2edaa9(0x444)]['wuid']+_0x2edaa9(0x7b4));let _0x32d3d8=_0x1e0181[_0x2edaa9(0x2cf)](/\D/g,''),_0x4bb0e3=this[_0x2edaa9(0x4b3)][_0x2edaa9(0x634)][_0x2edaa9(0x509)](_0x54182b=>_0x54182b[_0x2edaa9(0x6f2)]===_0x32d3d8);if(_0x4bb0e3||(this['logger'][_0x2edaa9(0x39b)](this[_0x2edaa9(0x546)]+'\x20('+this[_0x2edaa9(0x444)][_0x2edaa9(0x638)]+_0x2edaa9(0x1c1)),_0x4bb0e3=this[_0x2edaa9(0x4b3)][_0x2edaa9(0x634)][_0x2edaa9(0x509)](_0x3816c0=>_0x3816c0[_0x2edaa9(0x180)]===!0x0)),!_0x4bb0e3)return this[_0x2edaa9(0x6c6)][_0x2edaa9(0x39b)](this[_0x2edaa9(0x546)]+'\x20('+this[_0x2edaa9(0x444)][_0x2edaa9(0x638)]+_0x2edaa9(0x636)),null;let _0xc96a37=await this[_0x2edaa9(0x4b2)]['flow']['findOne']({'where':{'_id':_0x4bb0e3[_0x2edaa9(0x6ae)]}});if(!_0xc96a37||!_0xc96a37['whoCanUse']?.[_0x2edaa9(0x253)](this[_0x2edaa9(0x444)][_0x2edaa9(0x638)]))throw this[_0x2edaa9(0x6c6)][_0x2edaa9(0x73d)](this[_0x2edaa9(0x546)]+'\x20('+this['instance'][_0x2edaa9(0x638)]+_0x2edaa9(0x6c5)+_0xc96a37[_0x2edaa9(0x6ae)]+_0x2edaa9(0x727)),new m(_0x2edaa9(0x672)+_0xc96a37['_id']+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');return _0xc96a37;}catch(_0x5ca5a7){return this['logger'][_0x2edaa9(0x73d)](this[_0x2edaa9(0x546)]+'\x20('+this[_0x2edaa9(0x444)]['wuid']+_0x2edaa9(0x723)+(_0x5ca5a7 instanceof Error?_0x5ca5a7[_0x2edaa9(0x319)]:JSON[_0x2edaa9(0x79e)](_0x5ca5a7,null,0x2))),null;}}async[a0_0x5ca8c7(0x589)](_0x19aac1,_0x23d74d){const _0x4296f7=a0_0x5ca8c7;try{let _0x2565c8=!!_0x23d74d[_0x4296f7(0x7d8)],_0x287453=_0x23d74d[_0x4296f7(0x354)],_0x15e95e=null;if(this[_0x4296f7(0x6c6)]['verbose'](this['instanceName']+'\x20('+this[_0x4296f7(0x444)]['wuid']+_0x4296f7(0x68b)+_0x2565c8+_0x4296f7(0x58b)+_0x287453),_0x2565c8){this[_0x4296f7(0x6c6)][_0x4296f7(0x39b)](this[_0x4296f7(0x546)]+'\x20('+this[_0x4296f7(0x444)][_0x4296f7(0x638)]+'):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto');let _0x1a1362={'where':{'remoteJid':_0x19aac1,'waitingMenu_id':_0x287453}};if(_0x15e95e=await this[_0x4296f7(0x4b2)][_0x4296f7(0x535)][_0x4296f7(0x51f)](_0x1a1362,this[_0x4296f7(0x444)][_0x4296f7(0x638)]),!_0x15e95e)return this[_0x4296f7(0x6c6)][_0x4296f7(0x39b)](this[_0x4296f7(0x546)]+'\x20('+this[_0x4296f7(0x444)][_0x4296f7(0x638)]+_0x4296f7(0x5c4)),null;let _0xd418a8=Date[_0x4296f7(0x494)](),_0x359133=_0x15e95e?.['minutesToClose']||0x0,_0x405bc3=_0xd418a8-_0x359133*0x3c*0x3e8;if(_0x15e95e[_0x4296f7(0x187)]<_0x405bc3){this[_0x4296f7(0x6c6)][_0x4296f7(0x39b)](this['instanceName']+'\x20('+this[_0x4296f7(0x444)][_0x4296f7(0x638)]+_0x4296f7(0x16e));let _0x11371a={'number':_0x15e95e[_0x4296f7(0x461)],'options':{'delay':0x0},'textMessage':{'text':_0x15e95e[_0x4296f7(0x285)]}};await this[_0x4296f7(0x7ad)](_0x11371a);let _0x11ad23={'status':_0x4296f7(0x5fb),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x4296f7(0x4b2)][_0x4296f7(0x535)][_0x4296f7(0x127)](_0x15e95e[_0x4296f7(0x6ae)],_0x11ad23,this[_0x4296f7(0x444)][_0x4296f7(0x638)]),null;}return _0x15e95e['lastInteraction']=Date[_0x4296f7(0x494)](),_0x15e95e[_0x4296f7(0x525)]['lastReceivedMessage']=_0x23d74d,_0x15e95e;}else{this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x4296f7(0x444)][_0x4296f7(0x638)]+_0x4296f7(0x17a)+this[_0x4296f7(0x444)][_0x4296f7(0x638)]+'\x20no\x20\x20um\x20voto\x20enviado\x20pelo\x20usurio'),this[_0x4296f7(0x6c6)][_0x4296f7(0x39b)](this[_0x4296f7(0x546)]+'\x20('+this[_0x4296f7(0x444)][_0x4296f7(0x638)]+'):\x20Procurando\x20conversa');let _0x14931c={'where':{'remoteJid':_0x19aac1,'status':'open'}};if(_0x15e95e=await this['repository'][_0x4296f7(0x535)]['findOne'](_0x14931c,this[_0x4296f7(0x444)][_0x4296f7(0x638)]),!_0x15e95e){let _0x48b5dd=await this[_0x4296f7(0x4d8)](_0x19aac1);if(_0x48b5dd&&(_0x15e95e=await this[_0x4296f7(0x47e)](_0x48b5dd,_0x23d74d[_0x4296f7(0x3c3)],_0x23d74d)),!_0x15e95e)return null;}let _0x2ed5c5=Date['now'](),_0x10a2e5=_0x15e95e?.[_0x4296f7(0x6cd)]||0x0,_0x268a5f=_0x2ed5c5-_0x10a2e5*0x3c*0x3e8;if(this['logger'][_0x4296f7(0x39b)](this[_0x4296f7(0x546)]+'\x20('+this[_0x4296f7(0x444)][_0x4296f7(0x638)]+_0x4296f7(0x157)+_0x2ed5c5+_0x4296f7(0x5ff)+_0x10a2e5+_0x4296f7(0x1f2)+_0x268a5f),this['logger'][_0x4296f7(0x39b)](this[_0x4296f7(0x546)]+'\x20('+this[_0x4296f7(0x444)]['wuid']+_0x4296f7(0x421)),this['logger'][_0x4296f7(0x39b)](this['instanceName']+'\x20('+this[_0x4296f7(0x444)][_0x4296f7(0x638)]+_0x4296f7(0x70e)+_0x15e95e[_0x4296f7(0x187)]),this[_0x4296f7(0x6c6)]['verbose'](this[_0x4296f7(0x546)]+'\x20('+this[_0x4296f7(0x444)]['wuid']+_0x4296f7(0x207)+_0x268a5f),_0x15e95e[_0x4296f7(0x187)]<_0x268a5f){this[_0x4296f7(0x6c6)][_0x4296f7(0x39b)](this[_0x4296f7(0x546)]+'\x20('+this[_0x4296f7(0x444)]['wuid']+'):\x20Conversa\x20est\x20expirada');let _0x4ca96c=await this['findFlow'](_0x19aac1);if(_0x4ca96c===null)return null;_0x15e95e&&await this[_0x4296f7(0x4b2)][_0x4296f7(0x535)]['updateOne'](_0x15e95e[_0x4296f7(0x6ae)],{'status':_0x4296f7(0x5fb)},this[_0x4296f7(0x444)][_0x4296f7(0x638)]),_0x15e95e=await this[_0x4296f7(0x47e)](_0x4ca96c,_0x23d74d[_0x4296f7(0x3c3)],_0x23d74d);}return _0x15e95e[_0x4296f7(0x187)]=_0x2ed5c5,_0x15e95e[_0x4296f7(0x525)][_0x4296f7(0x5f3)]=_0x23d74d,_0x15e95e;}}catch(_0x3f8ae4){return this[_0x4296f7(0x6c6)][_0x4296f7(0x73d)](this[_0x4296f7(0x546)]+'\x20('+this['instance']['wuid']+_0x4296f7(0x55c)+(_0x3f8ae4 instanceof Error?_0x3f8ae4[_0x4296f7(0x319)]:JSON[_0x4296f7(0x79e)](_0x3f8ae4,null,0x2))),null;}}async[a0_0x5ca8c7(0x47e)](_0x497829,_0x4c4ebb,_0x18e1fe){const _0x50e29e=a0_0x5ca8c7;this['logger'][_0x50e29e(0x39b)](this['instanceName']+'\x20('+this[_0x50e29e(0x444)]['wuid']+_0x50e29e(0x189));try{let _0x2c4322=require(_0x50e29e(0x1eb))[_0x50e29e(0xca)],_0x2e767e=Date[_0x50e29e(0x494)](),_0xb623cf='start',_0x442256=_0x4c4ebb['fromMe']?null:_0x18e1fe,_0x47530e=_0x4c4ebb[_0x50e29e(0x79a)]?_0x18e1fe:null,_0x311560=_0x4c4ebb[_0x50e29e(0x461)],_0x3fa192=this[_0x50e29e(0x4b3)]['flows'][_0x50e29e(0x509)](_0x2622cd=>_0x2622cd[_0x50e29e(0x6ae)]===_0x497829[_0x50e29e(0x6ae)]?.[_0x50e29e(0x30c)]()),_0x4e970a=_0x3fa192?.['minutesToClose']??_0x497829[_0x50e29e(0x6cd)]??0x0,_0x56a6b4=_0x3fa192?.[_0x50e29e(0x41b)]??_0x497829[_0x50e29e(0x41b)]??!0x1;await this[_0x50e29e(0x445)](_0x311560);let _0x5793ac={'flowId':_0x497829['_id'],..._0x497829,'chatLog':null},_0x8689ba=await this[_0x50e29e(0x6c0)](_0x5793ac[_0x50e29e(0x377)]),_0x3818e1=await this['getVariablesChat'](_0x311560),_0x29bbd9={..._0x8689ba,..._0x3818e1,'_remoteJid':_0x311560},_0x439c6e={'lastReceivedMessage':_0x442256,'lastSendMessage':_0x47530e,'lastBlockId':_0xb623cf,'lastCondition':!0x0,'realVariables':_0x29bbd9};_0x5793ac[_0x50e29e(0x525)]=_0x439c6e,delete _0x5793ac[_0x50e29e(0x6ae)],_0x5793ac['_id']=new _0x2c4322(),_0x5793ac[_0x50e29e(0x187)]=_0x2e767e,_0x5793ac['status']=_0x50e29e(0x349),_0x5793ac[_0x50e29e(0x461)]=_0x311560,_0x5793ac[_0x50e29e(0x6cd)]=_0x4e970a,_0x5793ac[_0x50e29e(0x41b)]=_0x56a6b4;let _0x3465b9=await this[_0x50e29e(0x4b2)][_0x50e29e(0x535)][_0x50e29e(0x127)](_0x5793ac[_0x50e29e(0x6ae)],_0x5793ac,this[_0x50e29e(0x444)][_0x50e29e(0x638)]);return this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x50e29e(0x444)][_0x50e29e(0x638)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x3465b9?_0x5793ac:null;}catch(_0x5af77a){return this[_0x50e29e(0x6c6)][_0x50e29e(0x73d)](this[_0x50e29e(0x546)]+'\x20('+this[_0x50e29e(0x444)][_0x50e29e(0x638)]+_0x50e29e(0x149)+(_0x5af77a instanceof Error?_0x5af77a[_0x50e29e(0x319)]:JSON[_0x50e29e(0x79e)](_0x5af77a,null,0x2))),_0x5af77a;}}async[a0_0x5ca8c7(0x397)](_0x448f45,_0x3ae657){const _0x33a57a=a0_0x5ca8c7;let _0x81e701=_0x448f45[_0x33a57a(0x461)];_0x3ae657['uazapi'][_0x33a57a(0x461)]&&_0x3ae657[_0x33a57a(0x13b)][_0x33a57a(0x461)][_0x33a57a(0x80a)]()!==''&&(_0x81e701=_0x3ae657[_0x33a57a(0x13b)][_0x33a57a(0x461)]['trim']()),this['logger'][_0x33a57a(0x39b)](this[_0x33a57a(0x546)]+'\x20('+this[_0x33a57a(0x444)]['wuid']+'):\x20Enviando\x20texto');let _0x45a18f={'number':_0x81e701,'options':{'delay':_0x3ae657[_0x33a57a(0x13b)][_0x33a57a(0x10a)],'linkPreview':_0x3ae657[_0x33a57a(0x13b)][_0x33a57a(0x36d)]},'textMessage':{'text':_0x3ae657[_0x33a57a(0x13b)][_0x33a57a(0x67e)]}};try{let _0x54b46a=await this[_0x33a57a(0x7ad)](_0x45a18f);if(_0x54b46a){let _0x5d0f7e={'_id':_0x54b46a[_0x33a57a(0x3c3)]['id'],'_fromMe':_0x54b46a['key'][_0x33a57a(0x79a)],'_remoteJid':_0x54b46a[_0x33a57a(0x3c3)][_0x33a57a(0x461)]},_0x34a81a=(0x0,w['normalizeMessageContent'])(_0x54b46a['message']),_0x5e0589=(0x0,w[_0x33a57a(0x2b5)])(_0x34a81a);_0x448f45[_0x33a57a(0x525)][_0x33a57a(0x67f)]=_0x3ae657[_0x33a57a(0x6ae)][_0x33a57a(0x30c)]();let {message_normalized:_0xf738fe}=this[_0x33a57a(0x501)](_0x34a81a,_0x5e0589,null);_0x448f45[_0x33a57a(0x525)][_0x33a57a(0x521)]=await _0xf738fe;let _0x54976b={'messageId':_0x54b46a[_0x33a57a(0x3c3)]['id']},_0x2efeeb=_0x448f45['chatLog'][_0x33a57a(0x7ae)];Object[_0x33a57a(0x14c)](_0x2efeeb,_0x5d0f7e),_0x448f45[_0x33a57a(0x525)][_0x33a57a(0x7ae)]=_0x2efeeb,this[_0x33a57a(0x682)](_0x448f45,_0x3ae657,_0x54976b);}else{let _0x46ae9c={'error':!0x0};this[_0x33a57a(0x682)](_0x448f45,_0x3ae657,_0x46ae9c),this[_0x33a57a(0x6c6)][_0x33a57a(0x73d)](this['instanceName']+'\x20('+this[_0x33a57a(0x444)][_0x33a57a(0x638)]+_0x33a57a(0x669));}}catch(_0x56c42d){let _0xd04415={'error':!0x0,'errorLog':_0x56c42d[_0x33a57a(0x30c)]()};this[_0x33a57a(0x682)](_0x448f45,_0x3ae657,_0xd04415),this['logger'][_0x33a57a(0x73d)](this[_0x33a57a(0x546)]+'\x20('+this[_0x33a57a(0x444)][_0x33a57a(0x638)]+_0x33a57a(0x581)+(_0x56c42d instanceof Error?_0x56c42d[_0x33a57a(0x319)]:JSON['stringify'](_0x56c42d,null,0x2)));}}async[a0_0x5ca8c7(0x1ac)](_0xaaba6e,_0xcdd0b0){const _0x9b974d=a0_0x5ca8c7;let _0x527f69=_0xaaba6e[_0x9b974d(0x461)];_0xcdd0b0[_0x9b974d(0x13b)][_0x9b974d(0x461)]&&_0xcdd0b0['uazapi']['remoteJid']['trim']()!==''&&(_0x527f69=_0xcdd0b0[_0x9b974d(0x13b)][_0x9b974d(0x461)][_0x9b974d(0x80a)]()),this[_0x9b974d(0x6c6)][_0x9b974d(0x39b)](this['instanceName']+'\x20('+this[_0x9b974d(0x444)][_0x9b974d(0x638)]+_0x9b974d(0x3da));let _0xfae53d={'number':_0x527f69,'options':{'delay':_0xcdd0b0['uazapi'][_0x9b974d(0x10a)],'linkPreview':_0xcdd0b0[_0x9b974d(0x13b)][_0x9b974d(0x36d)]},'mediaMessage':{'mediatype':_0xcdd0b0[_0x9b974d(0x13b)][_0x9b974d(0x430)],'caption':_0xcdd0b0[_0x9b974d(0x13b)]['caption'],'media':_0xcdd0b0['uazapi'][_0x9b974d(0x2fe)],'fileName':_0xcdd0b0[_0x9b974d(0x13b)][_0x9b974d(0x208)]}};try{let _0x19488a=await this[_0x9b974d(0x19a)](_0xfae53d);if(_0x19488a){let _0xbbf0db={'_id':_0x19488a[_0x9b974d(0x3c3)]['id'],'_fromMe':_0x19488a['key'][_0x9b974d(0x79a)],'_remoteJid':_0x19488a[_0x9b974d(0x3c3)]['remoteJid']},_0x251ed6=(0x0,w[_0x9b974d(0x184)])(_0x19488a[_0x9b974d(0x319)]),_0x5dabea=(0x0,w[_0x9b974d(0x2b5)])(_0x251ed6);_0xaaba6e[_0x9b974d(0x525)][_0x9b974d(0x67f)]=_0xcdd0b0[_0x9b974d(0x6ae)][_0x9b974d(0x30c)]();let {message_normalized:_0x6fe37d}=this[_0x9b974d(0x501)](_0x251ed6,_0x5dabea,null);_0xaaba6e['chatLog'][_0x9b974d(0x521)]=await _0x6fe37d;let _0x43e467={'messageId':_0x19488a[_0x9b974d(0x3c3)]['id']},_0x2367a2=_0xaaba6e[_0x9b974d(0x525)]['realVariables'];Object[_0x9b974d(0x14c)](_0x2367a2,_0xbbf0db),_0xaaba6e[_0x9b974d(0x525)]['realVariables']=_0x2367a2,this[_0x9b974d(0x682)](_0xaaba6e,_0xcdd0b0,_0x43e467);}else{let _0x4307df={'error':!0x0};this[_0x9b974d(0x682)](_0xaaba6e,_0xcdd0b0,_0x4307df),this[_0x9b974d(0x6c6)][_0x9b974d(0x73d)](this['instanceName']+'\x20('+this['instance'][_0x9b974d(0x638)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia.');}}catch(_0x54d134){let _0x315280={'error':!0x0,'errorLog':_0x54d134[_0x9b974d(0x30c)]()};this[_0x9b974d(0x682)](_0xaaba6e,_0xcdd0b0,_0x315280),this['logger'][_0x9b974d(0x73d)](this[_0x9b974d(0x546)]+'\x20('+this[_0x9b974d(0x444)][_0x9b974d(0x638)]+_0x9b974d(0x598)+(_0x54d134 instanceof Error?_0x54d134[_0x9b974d(0x319)]:JSON['stringify'](_0x54d134,null,0x2)));}}async['uazapiSendLocation'](_0x4208e7,_0xf88a82){const _0x2031c1=a0_0x5ca8c7;let _0x179ab7=_0x4208e7[_0x2031c1(0x461)];_0xf88a82[_0x2031c1(0x13b)][_0x2031c1(0x461)]&&_0xf88a82['uazapi'][_0x2031c1(0x461)]['trim']()!==''&&(_0x179ab7=_0xf88a82['uazapi'][_0x2031c1(0x461)][_0x2031c1(0x80a)]()),this['logger'][_0x2031c1(0x39b)](this[_0x2031c1(0x546)]+'\x20('+this[_0x2031c1(0x444)][_0x2031c1(0x638)]+_0x2031c1(0x124));let _0x14fd52={'number':_0x179ab7,'options':{'delay':_0xf88a82[_0x2031c1(0x13b)][_0x2031c1(0x10a)]},'locationMessage':{'name':_0xf88a82[_0x2031c1(0x13b)][_0x2031c1(0x786)],'address':_0xf88a82[_0x2031c1(0x13b)][_0x2031c1(0x257)],'latitude':_0xf88a82[_0x2031c1(0x13b)]['latitude'],'longitude':_0xf88a82['uazapi'][_0x2031c1(0x1d1)]}};try{let _0x49c96a=await this['locationMessage'](_0x14fd52);if(_0x49c96a){let _0x3c55e0={'_id':_0x49c96a[_0x2031c1(0x3c3)]['id'],'_fromMe':_0x49c96a['key'][_0x2031c1(0x79a)],'_remoteJid':_0x49c96a['key'][_0x2031c1(0x461)]},_0x390235=(0x0,w['normalizeMessageContent'])(_0x49c96a[_0x2031c1(0x319)]),_0x587eb7=(0x0,w[_0x2031c1(0x2b5)])(_0x390235);_0x4208e7[_0x2031c1(0x525)][_0x2031c1(0x67f)]=_0xf88a82['_id'][_0x2031c1(0x30c)]();let {message_normalized:_0x410c69}=this[_0x2031c1(0x501)](_0x390235,_0x587eb7,null);_0x4208e7[_0x2031c1(0x525)]['lastSendMessage']=await _0x410c69;let _0x5ea06d={'messageId':_0x49c96a[_0x2031c1(0x3c3)]['id']},_0x5c4a7d=_0x4208e7[_0x2031c1(0x525)][_0x2031c1(0x7ae)];Object[_0x2031c1(0x14c)](_0x5c4a7d,_0x3c55e0),_0x4208e7[_0x2031c1(0x525)][_0x2031c1(0x7ae)]=_0x5c4a7d,this[_0x2031c1(0x682)](_0x4208e7,_0xf88a82,_0x5ea06d);}else{let _0x55347b={'error':!0x0};this[_0x2031c1(0x682)](_0x4208e7,_0xf88a82,_0x55347b),this[_0x2031c1(0x6c6)][_0x2031c1(0x73d)](this[_0x2031c1(0x546)]+'\x20('+this['instance'][_0x2031c1(0x638)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao.');}}catch(_0x4012e9){let _0x241428={'error':!0x0,'errorLog':_0x4012e9[_0x2031c1(0x30c)]()};this[_0x2031c1(0x682)](_0x4208e7,_0xf88a82,_0x241428),this['logger'][_0x2031c1(0x73d)](this[_0x2031c1(0x546)]+'\x20('+this[_0x2031c1(0x444)][_0x2031c1(0x638)]+_0x2031c1(0x4a1)+(_0x4012e9 instanceof Error?_0x4012e9[_0x2031c1(0x319)]:JSON[_0x2031c1(0x79e)](_0x4012e9,null,0x2)));}}async[a0_0x5ca8c7(0x12a)](_0x1f764c,_0x3491e9){const _0x28f3ae=a0_0x5ca8c7;let _0x312836=_0x1f764c[_0x28f3ae(0x461)];_0x3491e9[_0x28f3ae(0x13b)]['remoteJid']&&_0x3491e9[_0x28f3ae(0x13b)][_0x28f3ae(0x461)][_0x28f3ae(0x80a)]()!==''&&(_0x312836=_0x3491e9['uazapi'][_0x28f3ae(0x461)][_0x28f3ae(0x80a)]()),this[_0x28f3ae(0x6c6)][_0x28f3ae(0x39b)](this[_0x28f3ae(0x546)]+'\x20('+this['instance'][_0x28f3ae(0x638)]+_0x28f3ae(0x2e7));let _0x46b94f={'number':_0x312836,'options':{'delay':_0x3491e9[_0x28f3ae(0x13b)][_0x28f3ae(0x10a)]},'audioMessage':{'audio':_0x3491e9['uazapi'][_0x28f3ae(0x6cc)]}};try{let _0x2013ca=await this[_0x28f3ae(0x2c6)](_0x46b94f);if(_0x2013ca){let _0x3ff334={'_id':_0x2013ca['key']['id'],'_fromMe':_0x2013ca[_0x28f3ae(0x3c3)][_0x28f3ae(0x79a)],'_remoteJid':_0x2013ca[_0x28f3ae(0x3c3)][_0x28f3ae(0x461)]},_0x2debb=(0x0,w[_0x28f3ae(0x184)])(_0x2013ca[_0x28f3ae(0x319)]),_0x2a4e14=(0x0,w[_0x28f3ae(0x2b5)])(_0x2debb);_0x1f764c['chatLog'][_0x28f3ae(0x67f)]=_0x3491e9[_0x28f3ae(0x6ae)][_0x28f3ae(0x30c)]();let {message_normalized:_0x577472}=this[_0x28f3ae(0x501)](_0x2debb,_0x2a4e14,null);_0x1f764c[_0x28f3ae(0x525)][_0x28f3ae(0x521)]=await _0x577472;let _0x2f284f={'messageId':_0x2013ca[_0x28f3ae(0x3c3)]['id']},_0x17d693=_0x1f764c[_0x28f3ae(0x525)][_0x28f3ae(0x7ae)];Object[_0x28f3ae(0x14c)](_0x17d693,_0x3ff334),_0x1f764c[_0x28f3ae(0x525)][_0x28f3ae(0x7ae)]=_0x17d693,this[_0x28f3ae(0x682)](_0x1f764c,_0x3491e9,_0x2f284f);}else{let _0x141f8e={'error':!0x0};this[_0x28f3ae(0x682)](_0x1f764c,_0x3491e9,_0x141f8e),this[_0x28f3ae(0x6c6)][_0x28f3ae(0x73d)](this[_0x28f3ae(0x546)]+'\x20('+this[_0x28f3ae(0x444)][_0x28f3ae(0x638)]+_0x28f3ae(0x7e6));}}catch(_0x370324){let _0x3dcb55={'error':!0x0,'errorLog':_0x370324[_0x28f3ae(0x30c)]()};this[_0x28f3ae(0x682)](_0x1f764c,_0x3491e9,_0x3dcb55),this[_0x28f3ae(0x6c6)][_0x28f3ae(0x73d)](this[_0x28f3ae(0x546)]+'\x20('+this[_0x28f3ae(0x444)]['wuid']+_0x28f3ae(0x143)+(_0x370324 instanceof Error?_0x370324['message']:JSON[_0x28f3ae(0x79e)](_0x370324,null,0x2)));}}async['uazapiSendContact'](_0x1b2e7a,_0x2f0672){const _0x119db3=a0_0x5ca8c7;let _0xbbb74f=_0x1b2e7a[_0x119db3(0x461)];_0x2f0672[_0x119db3(0x13b)][_0x119db3(0x461)]&&_0x2f0672[_0x119db3(0x13b)]['remoteJid'][_0x119db3(0x80a)]()!==''&&(_0xbbb74f=_0x2f0672[_0x119db3(0x13b)]['remoteJid'][_0x119db3(0x80a)]()),this[_0x119db3(0x6c6)][_0x119db3(0x39b)](this['instanceName']+'\x20('+this[_0x119db3(0x444)]['wuid']+_0x119db3(0x1b8));let _0x11b6d0={'number':_0xbbb74f,'options':{'delay':_0x2f0672[_0x119db3(0x13b)]['delay']},'contactMessage':[{'fullName':_0x2f0672[_0x119db3(0x13b)][_0x119db3(0x7a3)],'phoneNumber':_0x2f0672[_0x119db3(0x13b)][_0x119db3(0x1ae)]}]};try{let _0x509a6e=await this[_0x119db3(0x138)](_0x11b6d0);if(_0x509a6e){let _0x10ec6c={'_id':_0x509a6e[_0x119db3(0x3c3)]['id'],'_fromMe':_0x509a6e[_0x119db3(0x3c3)][_0x119db3(0x79a)],'_remoteJid':_0x509a6e[_0x119db3(0x3c3)][_0x119db3(0x461)]},_0x2e4b9c=(0x0,w['normalizeMessageContent'])(_0x509a6e[_0x119db3(0x319)]),_0x4568fb=(0x0,w[_0x119db3(0x2b5)])(_0x2e4b9c);_0x1b2e7a[_0x119db3(0x525)][_0x119db3(0x67f)]=_0x2f0672[_0x119db3(0x6ae)][_0x119db3(0x30c)]();let {message_normalized:_0x3283a5}=this[_0x119db3(0x501)](_0x2e4b9c,_0x4568fb,null);_0x1b2e7a['chatLog'][_0x119db3(0x521)]=await _0x3283a5;let _0x30b1ee={'messageId':_0x509a6e['key']['id']},_0x2e99f6=_0x1b2e7a[_0x119db3(0x525)][_0x119db3(0x7ae)];Object['assign'](_0x2e99f6,_0x10ec6c),_0x1b2e7a['chatLog'][_0x119db3(0x7ae)]=_0x2e99f6,this[_0x119db3(0x682)](_0x1b2e7a,_0x2f0672,_0x30b1ee);}else{let _0x2fce14={'error':!0x0};this[_0x119db3(0x682)](_0x1b2e7a,_0x2f0672,_0x2fce14),this[_0x119db3(0x6c6)]['error'](this[_0x119db3(0x546)]+'\x20('+this['instance'][_0x119db3(0x638)]+_0x119db3(0x2b9));}}catch(_0x476f53){let _0x15e876={'error':!0x0,'errorLog':_0x476f53[_0x119db3(0x30c)]()};this['updateConversation'](_0x1b2e7a,_0x2f0672,_0x15e876),this[_0x119db3(0x6c6)][_0x119db3(0x73d)](this[_0x119db3(0x546)]+'\x20('+this[_0x119db3(0x444)][_0x119db3(0x638)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20'+(_0x476f53 instanceof Error?_0x476f53[_0x119db3(0x319)]:JSON[_0x119db3(0x79e)](_0x476f53,null,0x2)));}}[a0_0x5ca8c7(0x5ad)](_0x3d6ff8,_0x487e64){const _0x17f885=a0_0x5ca8c7;for(let _0x3bc818 of _0x3d6ff8)_0x3bc818[_0x17f885(0x5ba)]&&(_0x3bc818[_0x17f885(0x5ba)]=this[_0x17f885(0x1bf)](_0x3bc818[_0x17f885(0x5ba)],_0x487e64)),_0x3bc818[_0x17f885(0x606)]&&(_0x3bc818['optionDescription']=this['replaceVariables'](_0x3bc818[_0x17f885(0x606)],_0x487e64));}async[a0_0x5ca8c7(0x490)](_0x166aa7,_0x7c7887){const _0x19b936=a0_0x5ca8c7;let _0x3e50b7=_0x166aa7[_0x19b936(0x461)];_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x461)]&&_0x7c7887[_0x19b936(0x13b)]['remoteJid'][_0x19b936(0x80a)]()!==''&&(_0x3e50b7=_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x461)][_0x19b936(0x80a)]()),this[_0x19b936(0x6c6)][_0x19b936(0x39b)](this[_0x19b936(0x546)]+'\x20('+this['instance']['wuid']+_0x19b936(0x5a6));let _0x1ae7bb=_0x166aa7[_0x19b936(0x431)][_0x19b936(0xe1)](_0x482788=>_0x482788['blockId']===_0x7c7887[_0x19b936(0x6ae)])[_0x19b936(0x28e)]((_0x27c30b,_0x521190)=>_0x27c30b['order']-_0x521190[_0x19b936(0x294)]);this[_0x19b936(0x5ad)](_0x1ae7bb,_0x166aa7[_0x19b936(0x525)]['realVariables']);let _0xe69918=_0x1ae7bb[_0x19b936(0x726)](_0x510f25=>_0x510f25[_0x19b936(0x5ba)]),_0x3675b9={'number':_0x3e50b7,'menuMessage':{'type':_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x48f)]||_0x19b936(0x333),'text':_0x7c7887[_0x19b936(0x13b)]['text']||_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x786)],'footerText':_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x55a)],'buttonText':_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x7ac)],'selectableCount':0x1,'choices':_0xe69918},'options':{'delay':_0x7c7887['uazapi'][_0x19b936(0x10a)]}};try{let _0x1df51c=await this[_0x19b936(0x3f1)](_0x3675b9);if(_0x1df51c){let _0x5f1668={'_id':_0x1df51c[_0x19b936(0x3c3)]['id'],'_fromMe':_0x1df51c[_0x19b936(0x3c3)][_0x19b936(0x79a)],'_remoteJid':_0x1df51c['key'][_0x19b936(0x461)]};_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x305)]===!0x0&&(_0x166aa7[_0x19b936(0x3e2)]=_0x19b936(0x60a),this[_0x19b936(0x6c6)][_0x19b936(0x39b)](this[_0x19b936(0x546)]+'\x20('+this[_0x19b936(0x444)]['wuid']+_0x19b936(0x6dc)+_0x166aa7['status'])),this[_0x19b936(0x6c6)]['verbose'](this[_0x19b936(0x546)]+'\x20('+this['instance'][_0x19b936(0x638)]+_0x19b936(0xf4)+(_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x786)]||_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x67e)])),_0x166aa7[_0x19b936(0x6d3)]=_0x1df51c[_0x19b936(0x3c3)]['id'],_0x166aa7[_0x19b936(0x5eb)]=_0x7c7887[_0x19b936(0x13b)]['name']||_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x67e)],_0x166aa7[_0x19b936(0x2a5)]=_0x1ae7bb,_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x649)]&&(_0x166aa7[_0x19b936(0x285)]=_0x7c7887[_0x19b936(0x13b)][_0x19b936(0x649)]),this[_0x19b936(0x6c6)][_0x19b936(0x39b)](this[_0x19b936(0x546)]+'\x20('+this[_0x19b936(0x444)]['wuid']+_0x19b936(0x289)+_0x166aa7[_0x19b936(0x5eb)]);let _0x4b88af=(0x0,w[_0x19b936(0x184)])(_0x1df51c[_0x19b936(0x319)]),_0x1b54a8=(0x0,w['getContentType'])(_0x4b88af);_0x166aa7[_0x19b936(0x525)][_0x19b936(0x67f)]=_0x7c7887[_0x19b936(0x6ae)]['toString']();let {message_normalized:_0x3f573c}=this[_0x19b936(0x501)](_0x4b88af,_0x1b54a8,null);_0x166aa7[_0x19b936(0x525)]['lastSendMessage']=await _0x3f573c;let _0x59a5bf={'messageId':_0x1df51c[_0x19b936(0x3c3)]['id']},_0x9cd07=_0x166aa7[_0x19b936(0x525)]['realVariables'];Object['assign'](_0x9cd07,_0x5f1668),_0x166aa7[_0x19b936(0x525)][_0x19b936(0x7ae)]=_0x9cd07,this[_0x19b936(0x682)](_0x166aa7,_0x7c7887,_0x59a5bf);}else{let _0x2408e4={'error':!0x0};this[_0x19b936(0x682)](_0x166aa7,_0x7c7887,_0x2408e4),this[_0x19b936(0x6c6)][_0x19b936(0x73d)](this['instanceName']+'\x20('+this[_0x19b936(0x444)][_0x19b936(0x638)]+_0x19b936(0x49a));}}catch(_0x310049){let _0x4ea4e2={'error':!0x0,'errorLog':_0x310049 instanceof Error?_0x310049['message']:JSON[_0x19b936(0x79e)](_0x310049,null,0x2)};this['updateConversation'](_0x166aa7,_0x7c7887,_0x4ea4e2),this[_0x19b936(0x6c6)]['error'](this[_0x19b936(0x546)]+'\x20('+this['instance'][_0x19b936(0x638)]+_0x19b936(0x563)+(_0x310049 instanceof Error?_0x310049[_0x19b936(0x319)]:JSON['stringify'](_0x310049,null,0x2)));}}async[a0_0x5ca8c7(0x5d9)](_0x2f887d,_0x2e67cc){const _0xc77941=a0_0x5ca8c7;this['logger'][_0xc77941(0x39b)](this[_0xc77941(0x546)]+'\x20('+this['instance'][_0xc77941(0x638)]+_0xc77941(0x2d3));let _0x23edb1=_0x2f887d[_0xc77941(0x525)]['blockLogs'][_0xc77941(0x509)](_0x5ddc3b=>_0x5ddc3b[_0xc77941(0x468)]['toString']()===_0x2e67cc[_0xc77941(0x13b)][_0xc77941(0x468)][_0xc77941(0x30c)]()),_0x230b03={'id':_0x23edb1['messageId'],'remoteJid':_0x23edb1[_0xc77941(0x461)],'fromMe':_0x23edb1[_0xc77941(0x79a)]};try{let _0x1ac51e=await this[_0xc77941(0x703)](_0x230b03);if(_0x1ac51e){let _0x3991a4=(0x0,w[_0xc77941(0x184)])(_0x1ac51e['message']),_0x157cc7=(0x0,w[_0xc77941(0x2b5)])(_0x3991a4);_0x2f887d['chatLog']['lastBlockId']=_0x2e67cc[_0xc77941(0x6ae)]['toString']();let {message_normalized:_0x4a1e72}=this[_0xc77941(0x501)](_0x3991a4,_0x157cc7,null);_0x2f887d[_0xc77941(0x525)][_0xc77941(0x521)]=await _0x4a1e72;let _0x11ed74={};this['updateConversation'](_0x2f887d,_0x2e67cc,_0x11ed74);}else{let _0x17f5ff={'error':!0x0};this['updateConversation'](_0x2f887d,_0x2e67cc,_0x17f5ff),this['logger'][_0xc77941(0x73d)](this[_0xc77941(0x546)]+'\x20('+this[_0xc77941(0x444)][_0xc77941(0x638)]+_0xc77941(0x312));}}catch(_0x572486){let _0x302aef={'error':!0x0,'errorLog':_0x572486 instanceof Error?_0x572486[_0xc77941(0x319)]:JSON[_0xc77941(0x79e)](_0x572486,null,0x2)};this[_0xc77941(0x682)](_0x2f887d,_0x2e67cc,_0x302aef),this['logger'][_0xc77941(0x73d)](this['instanceName']+'\x20('+this[_0xc77941(0x444)][_0xc77941(0x638)]+_0xc77941(0x5fc)+(_0x572486 instanceof Error?_0x572486[_0xc77941(0x319)]:JSON[_0xc77941(0x79e)](_0x572486,null,0x2)));}}async[a0_0x5ca8c7(0x533)](_0x3ae3eb,_0x1869d9){const _0x36eab6=a0_0x5ca8c7;if(_0x3ae3eb['name']||(_0x3ae3eb[_0x36eab6(0x786)]=(0x0,Y['v4'])()),_0x1869d9!==Ai&&_0x3ae3eb?.['globalShow'])throw new m(_0x36eab6(0x75c));if(_0x36eab6(0x6ae)in _0x3ae3eb&&_0x36eab6(0x756)in _0x3ae3eb)return this['AddUserFlow'](_0x3ae3eb[_0x36eab6(0x756)],_0x3ae3eb[_0x36eab6(0x6ae)]);this[_0x36eab6(0x6c6)]['verbose'](this[_0x36eab6(0x546)]+'\x20('+this[_0x36eab6(0x444)]['wuid']+_0x36eab6(0x302));let _0x10746e=this['getUniqueFlowName'](_0x3ae3eb[_0x36eab6(0x786)]),_0x5389d9=new we[(_0x36eab6(0x1c5))][(_0x36eab6(0xca))](),_0x56944b={'_id':_0x5389d9,'default':!0x0,'title':_0x36eab6(0x7c1),'x':0x0,'y':0x0},_0x4ff0da={'_id':new we[(_0x36eab6(0x1c5))][(_0x36eab6(0xca))](),'order':0x1,'groupId':_0x5389d9[_0x36eab6(0x30c)](),'type':_0x36eab6(0x282)},_0x4b2eaf=this[_0x36eab6(0x444)][_0x36eab6(0x638)],_0x213b00={'_id':(0x0,Y['v4'])(),'owner':_0x4b2eaf,'name':_0x10746e,'whoCanEdit':[_0x4b2eaf],'whoCanUse':[_0x4b2eaf],'groups':[_0x56944b],'blocks':[_0x4ff0da],..._0x3ae3eb};try{let _0x149ae2=await this[_0x36eab6(0x4b2)][_0x36eab6(0x72d)][_0x36eab6(0x7bc)](_0x213b00);return await this[_0x36eab6(0x3cc)](),_0x149ae2;}catch(_0x42a533){let _0x3151ca=_0x36eab6(0x47b),_0x33a40c=_0x42a533 instanceof Error?_0x42a533['message']:typeof _0x42a533=='object'?JSON[_0x36eab6(0x79e)](_0x42a533):_0x42a533,_0x13d05e=_0x3151ca+':\x20'+_0x33a40c;throw this[_0x36eab6(0x6c6)]['error'](this[_0x36eab6(0x546)]+'\x20('+this[_0x36eab6(0x444)][_0x36eab6(0x638)]+_0x36eab6(0x17a)+_0x13d05e),new m(_0x13d05e);}}async[a0_0x5ca8c7(0x569)](_0x50fb0e,_0x3a08be){const _0x1c92ca=a0_0x5ca8c7;try{this['logger'][_0x1c92ca(0x39b)](this['instanceName']+'\x20('+this[_0x1c92ca(0x444)]['wuid']+_0x1c92ca(0x63e));let _0x376c08=await this[_0x1c92ca(0x4b2)]['flow'][_0x1c92ca(0x51f)]({'where':{'_id':_0x3a08be,'owner':_0x50fb0e}});if(!_0x376c08)throw new m(_0x1c92ca(0x32c));if(_0x376c08[_0x1c92ca(0x78e)]===!0x1&&!_0x376c08[_0x1c92ca(0x515)])throw new m(_0x1c92ca(0x73b));let _0x210857=new Set(_0x376c08[_0x1c92ca(0x719)]??[]);_0x210857[_0x1c92ca(0x6ff)](this[_0x1c92ca(0x444)][_0x1c92ca(0x638)]);let _0x46299c=await this[_0x1c92ca(0x4b2)][_0x1c92ca(0x72d)][_0x1c92ca(0x127)](_0x3a08be,{..._0x376c08,'whoCanUse':Array['from'](_0x210857)});return await this['synchronizeAndMapFlows'](),_0x46299c;}catch(_0x239449){let _0x1eeab9='Erro\x20ao\x20criar\x20fluxo\x20compartilhado',_0x1dcf25=_0x239449 instanceof Error?_0x239449[_0x1c92ca(0x319)]:typeof _0x239449==_0x1c92ca(0x4c4)?JSON[_0x1c92ca(0x79e)](_0x239449):_0x239449,_0x3ee93f=_0x1eeab9+':\x20'+_0x1dcf25;throw this['logger'][_0x1c92ca(0x73d)](this[_0x1c92ca(0x546)]+'\x20('+this[_0x1c92ca(0x444)][_0x1c92ca(0x638)]+_0x1c92ca(0x17a)+_0x3ee93f),new m(_0x3ee93f);}}[a0_0x5ca8c7(0x491)](_0x3607ee){const _0xf5913c=a0_0x5ca8c7;let _0x5a9de8=_0x3607ee,_0x31a310=0x1;for(;this[_0xf5913c(0x4b3)][_0xf5913c(0x634)][_0xf5913c(0xf8)](_0xc2dd27=>_0xc2dd27[_0xf5913c(0x786)]===_0x5a9de8);)_0x31a310++,_0x5a9de8=_0x3607ee+'\x20('+_0x31a310+')';return _0x5a9de8;}async[a0_0x5ca8c7(0x449)](_0x337bdf){const _0x3bea87=a0_0x5ca8c7;try{if(this[_0x3bea87(0x6c6)][_0x3bea87(0x39b)](this[_0x3bea87(0x546)]+'\x20('+this[_0x3bea87(0x444)][_0x3bea87(0x638)]+'):\x20\x27Deletando\x20fluxo,\x20id:\x20'+_0x337bdf[_0x3bea87(0x6ae)]+_0x3bea87(0x463)+_0x337bdf[_0x3bea87(0x586)]),!this[_0x3bea87(0x4b3)][_0x3bea87(0x634)][_0x3bea87(0x509)](_0x65be21=>_0x65be21[_0x3bea87(0x6ae)]===_0x337bdf[_0x3bea87(0x6ae)]))throw this[_0x3bea87(0x6c6)][_0x3bea87(0x39b)](this[_0x3bea87(0x546)]+'\x20('+this[_0x3bea87(0x444)][_0x3bea87(0x638)]+_0x3bea87(0x19e)+_0x337bdf[_0x3bea87(0x6ae)]+_0x3bea87(0x44e)),new m(_0x3bea87(0x2a6));let _0x58ef1d=await this[_0x3bea87(0x4b2)][_0x3bea87(0x72d)][_0x3bea87(0x51f)]({'where':{'_id':_0x337bdf[_0x3bea87(0x6ae)]}});if(!_0x58ef1d)throw new m(_0x3bea87(0x64a));if(this[_0x3bea87(0x444)][_0x3bea87(0x638)]===_0x58ef1d[_0x3bea87(0x756)]){this[_0x3bea87(0x6c6)][_0x3bea87(0x39b)](this[_0x3bea87(0x546)]+'\x20('+this['instance'][_0x3bea87(0x638)]+'):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27'+_0x337bdf['_id']+'\x27\x20do\x20banco\x20de\x20dados...');let _0x313945=await this[_0x3bea87(0x4b2)]['flow'][_0x3bea87(0x504)]({'where':{'_id':_0x337bdf[_0x3bea87(0x6ae)]}});return await this['synchronizeAndMapFlows'](),_0x313945;}return this[_0x3bea87(0x6c6)][_0x3bea87(0x39b)](this[_0x3bea87(0x546)]+'\x20('+this[_0x3bea87(0x444)]['wuid']+_0x3bea87(0x6e9)+this['instance'][_0x3bea87(0x638)]+_0x3bea87(0x272)+_0x337bdf[_0x3bea87(0x6ae)]+_0x3bea87(0x481)),_0x58ef1d['whoCanUse']=(_0x58ef1d[_0x3bea87(0x719)]??[])[_0x3bea87(0xe1)](_0x4631c2=>_0x4631c2!==this[_0x3bea87(0x444)]['wuid']),_0x58ef1d[_0x3bea87(0x192)]=(_0x58ef1d[_0x3bea87(0x192)]??[])['filter'](_0xa3d7c5=>_0xa3d7c5!==this[_0x3bea87(0x444)]['wuid']),_0x58ef1d['whoCanEdit'][_0x3bea87(0x293)]===0x0&&_0x58ef1d['whoCanUse'][_0x3bea87(0x293)]>0x0&&(_0x58ef1d[_0x3bea87(0x192)][_0x3bea87(0x7cb)](_0x58ef1d[_0x3bea87(0x719)][0x0]),this[_0x3bea87(0x6c6)][_0x3bea87(0x39b)](this[_0x3bea87(0x546)]+'\x20('+this[_0x3bea87(0x444)][_0x3bea87(0x638)]+_0x3bea87(0x7bd)+_0x58ef1d['whoCanUse'][0x0]+_0x3bea87(0x168)+_0x337bdf['_id']+_0x3bea87(0x481))),await this[_0x3bea87(0x4b2)][_0x3bea87(0x72d)]['updateOne'](_0x58ef1d[_0x3bea87(0x6ae)],_0x58ef1d),await this[_0x3bea87(0x3cc)](),{'message':'Fluxo\x20\x27'+_0x337bdf[_0x3bea87(0x786)]+_0x3bea87(0x7b1)};}catch(_0x267578){return this[_0x3bea87(0x6c6)]['error'](this[_0x3bea87(0x546)]+'\x20('+this['instance'][_0x3bea87(0x638)]+_0x3bea87(0x5c3)+(_0x267578 instanceof Error?_0x267578[_0x3bea87(0x319)]:JSON[_0x3bea87(0x79e)](_0x267578,null,0x2))),{'message':_0x3bea87(0x309)+(_0x267578 instanceof Error?_0x267578[_0x3bea87(0x319)]:JSON[_0x3bea87(0x79e)](_0x267578,null,0x2))};}}async[a0_0x5ca8c7(0x172)](_0x2ade92){const _0x3f068a=a0_0x5ca8c7;try{if(this['logger']['info'](this[_0x3f068a(0x546)]+'\x20('+this[_0x3f068a(0x444)][_0x3f068a(0x638)]+'):\x20Buscando\x20flow,\x20id:\x20'+_0x2ade92),!this[_0x3f068a(0x4b3)]&&(await this[_0x3f068a(0x280)](),!this[_0x3f068a(0x4b3)]))return null;let _0x7e0fa=await this[_0x3f068a(0x4b2)]['flow']['findOne']({'where':{'_id':_0x2ade92}});if(!_0x7e0fa)throw new m('Fluxo\x20id\x20\x27'+_0x2ade92+_0x3f068a(0x114));if(!(_0x7e0fa[_0x3f068a(0x515)]||_0x7e0fa[_0x3f068a(0x719)]?.[_0x3f068a(0x253)](this['instance'][_0x3f068a(0x638)])))throw new m('Voc\x20no\x20tem\x20permisso\x20para\x20ver\x20o\x20fluxo\x20\x27'+name+'\x27');_0x7e0fa[_0x3f068a(0x515)]&&!_0x7e0fa[_0x3f068a(0x719)]?.[_0x3f068a(0x253)](this[_0x3f068a(0x444)][_0x3f068a(0x638)])&&(_0x7e0fa[_0x3f068a(0x719)]=[..._0x7e0fa[_0x3f068a(0x719)]??[],this[_0x3f068a(0x444)]['wuid']],await this[_0x3f068a(0x4b2)][_0x3f068a(0x72d)][_0x3f068a(0x127)](_0x7e0fa[_0x3f068a(0x6ae)],_0x7e0fa),this[_0x3f068a(0x3cc)]());let _0x436acf=this[_0x3f068a(0x4b3)]?.['customFields']['map'](_0x8a46ae=>_0x8a46ae[_0x3f068a(0x786)]),_0x3af861=[_0x3f068a(0x182),'nomecompleto',_0x3f068a(0x232),_0x3f068a(0x4e7),'status','notas',_0x3f068a(0x77c),_0x3f068a(0x2a7),_0x3f068a(0xc9),_0x3f068a(0x18b),_0x3f068a(0x3e6)];_0x7e0fa[_0x3f068a(0x377)]=_0x7e0fa['variables'][_0x3f068a(0xe1)](_0x357b3b=>!(_0x357b3b['folder']===_0x3f068a(0x3d0)||_0x357b3b[_0x3f068a(0x3d0)])),_0x3af861['forEach'](_0x2263d7=>{const _0xe907cf=_0x3f068a;_0x7e0fa[_0xe907cf(0x377)][_0xe907cf(0x7cb)]({'folder':_0xe907cf(0x3d0),'name':_0x2263d7,'value':'','doc':'','leadInfo':!0x0});}),_0x436acf[_0x3f068a(0x57a)](_0x458119=>{const _0x27822d=_0x3f068a;let _0x59b85a=_0x7e0fa[_0x27822d(0x377)]['findIndex'](_0x25715c=>_0x25715c[_0x27822d(0x786)]===_0x458119);_0x59b85a===-0x1?_0x7e0fa['variables'][_0x27822d(0x7cb)]({'folder':'leadInfo','name':_0x458119,'value':'','doc':'','leadInfo':!0x0}):(_0x7e0fa[_0x27822d(0x377)][_0x59b85a][_0x27822d(0x6d2)]=_0x27822d(0x3d0),_0x7e0fa[_0x27822d(0x377)][_0x59b85a][_0x27822d(0x3d0)]=!0x0);}),_0x7e0fa['blocks']&&_0x7e0fa[_0x3f068a(0xe6)][_0x3f068a(0x293)]>0x0&&_0x7e0fa['blocks'][_0x3f068a(0x57a)](_0x40d0c6=>{const _0x2fff2d=_0x3f068a;_0x40d0c6['groupId']&&_0x40d0c6['next_groupId']&&_0x40d0c6['groupId']===_0x40d0c6[_0x2fff2d(0x31a)]&&(_0x40d0c6[_0x2fff2d(0x31a)]=null);});let _0x2a2f66=await this[_0x3f068a(0x4b2)][_0x3f068a(0x72d)][_0x3f068a(0x127)](_0x7e0fa[_0x3f068a(0x6ae)],_0x7e0fa);if(!_0x2a2f66)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x2a2f66;}catch(_0x104e17){let _0x175b41=_0x3f068a(0x708),_0x3b4a1e=_0x104e17 instanceof Error?_0x104e17[_0x3f068a(0x319)]:typeof _0x104e17==_0x3f068a(0x4c4)?JSON['stringify'](_0x104e17):_0x104e17,_0x51ea2e=_0x175b41+':\x20'+_0x3b4a1e;throw this[_0x3f068a(0x6c6)][_0x3f068a(0x73d)](this[_0x3f068a(0x546)]+'\x20('+this[_0x3f068a(0x444)]['wuid']+_0x3f068a(0x17a)+_0x51ea2e),new m(_0x51ea2e);}}async[a0_0x5ca8c7(0x3bf)](){const _0x3e2d3e=a0_0x5ca8c7;try{this[_0x3e2d3e(0x6c6)][_0x3e2d3e(0x39b)](this[_0x3e2d3e(0x546)]+'\x20('+this[_0x3e2d3e(0x444)][_0x3e2d3e(0x638)]+_0x3e2d3e(0x5fe)),await this[_0x3e2d3e(0x3cc)]();let _0x194cd8=await this['repository'][_0x3e2d3e(0x72d)][_0x3e2d3e(0x6c8)]({'where':{'globalShow':!0x0}});return[...this[_0x3e2d3e(0x4b3)][_0x3e2d3e(0x634)],..._0x194cd8];}catch(_0x3d060d){return this[_0x3e2d3e(0x6c6)][_0x3e2d3e(0x73d)](this[_0x3e2d3e(0x546)]+'\x20('+this[_0x3e2d3e(0x444)][_0x3e2d3e(0x638)]+_0x3e2d3e(0x479)+(_0x3d060d instanceof Error?_0x3d060d[_0x3e2d3e(0x319)]:JSON['stringify'](_0x3d060d,null,0x2))),{'message':_0x3e2d3e(0x1a6)+(_0x3d060d instanceof Error?_0x3d060d[_0x3e2d3e(0x319)]:String(_0x3d060d))};}}async[a0_0x5ca8c7(0x4fd)](_0x3fcd3b,_0x3f1baa){const _0x43521d=a0_0x5ca8c7;try{this[_0x43521d(0x6c6)][_0x43521d(0x39b)](this[_0x43521d(0x546)]+'\x20('+this[_0x43521d(0x444)]['wuid']+_0x43521d(0xcf));let _0x4163da=this[_0x43521d(0x4b3)][_0x43521d(0x634)][_0x43521d(0x509)](_0x17be51=>_0x17be51[_0x43521d(0x6ae)]===_0x3fcd3b[_0x43521d(0x6ae)]);if(!_0x4163da)throw this['logger'][_0x43521d(0x39b)](this[_0x43521d(0x546)]+'\x20('+this[_0x43521d(0x444)][_0x43521d(0x638)]+_0x43521d(0x19e)+_0x3fcd3b[_0x43521d(0x6ae)]+_0x43521d(0x44e)),new m('Fluxo\x20no\x20encontrado\x20na\x20memria.');let _0x10fc2e=await this['repository']['flow'][_0x43521d(0x51f)]({'where':{'_id':_0x3fcd3b[_0x43521d(0x6ae)]}});if(!_0x10fc2e||!_0x10fc2e['whoCanUse']?.['includes'](this[_0x43521d(0x444)][_0x43521d(0x638)]))throw this['logger']['error'](this[_0x43521d(0x546)]+'\x20('+this[_0x43521d(0x444)][_0x43521d(0x638)]+'):\x20Flow\x20\x27'+_0x3fcd3b[_0x43521d(0x6ae)]+_0x43521d(0x727)),new m('Flow\x20\x27'+_0x3fcd3b['_id']+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');let _0x3075ad=this[_0x43521d(0x4b3)][_0x43521d(0x634)][_0x43521d(0x3aa)](_0x553f21=>_0x553f21[_0x43521d(0x6ae)]===_0x4163da['_id']);if(_0x3075ad!==-0x1){let _0x233d57=this[_0x43521d(0x4b3)][_0x43521d(0x634)][_0x3075ad];if(_0x233d57[_0x43521d(0x786)]=_0x3fcd3b[_0x43521d(0x786)]??_0x233d57['name'],_0x233d57[_0x43521d(0x180)]=_0x3fcd3b[_0x43521d(0x180)]??_0x233d57[_0x43521d(0x180)],_0x233d57['testingWith']=_0x3fcd3b['testingWith']??_0x233d57[_0x43521d(0x6f2)],_0x233d57[_0x43521d(0x2cb)]=_0x3fcd3b[_0x43521d(0x6f1)]??_0x233d57['startCommand'],_0x233d57[_0x43521d(0x6cd)]=_0x3fcd3b[_0x43521d(0x6cd)]??_0x233d57[_0x43521d(0x6cd)],_0x233d57['readMessages']=_0x3fcd3b['readMessages']??_0x233d57['readMessages'],_0x3fcd3b['default']&&this[_0x43521d(0x4b3)][_0x43521d(0x634)][_0x43521d(0x57a)]((_0x1bd8bd,_0x3f6584)=>{const _0x53ce3e=_0x43521d;_0x3f6584!==_0x3075ad&&(_0x1bd8bd[_0x53ce3e(0x180)]=!0x1);}),this[_0x43521d(0x4b3)]['flows'][_0x3075ad]=_0x233d57,!await this[_0x43521d(0x4b2)][_0x43521d(0xec)]['update']({'flows':this['AutomateSystem']['flows']},this[_0x43521d(0x444)][_0x43521d(0x638)]))throw new m(_0x43521d(0x789));}let _0x42c786=['global','startID',_0x43521d(0xf3),'shareOwners'];for(let _0x3e99c3 of _0x42c786)delete _0x3fcd3b[_0x3e99c3];if(_0x10fc2e[_0x43521d(0x192)]?.[_0x43521d(0x253)](this['instance'][_0x43521d(0x638)])||(_0x3fcd3b={'_id':_0x3fcd3b[_0x43521d(0x6ae)]}),_0x3f1baa!==Ai&&_0x3fcd3b?.[_0x43521d(0x515)]&&!_0x10fc2e?.[_0x43521d(0x515)])throw new m(_0x43521d(0x64f));let _0x546b1f=new Set(_0x3fcd3b[_0x43521d(0x192)]??_0x10fc2e[_0x43521d(0x192)]);_0x546b1f[_0x43521d(0x6ff)](_0x10fc2e[_0x43521d(0x756)]);let _0x2acd91=new Set(_0x3fcd3b[_0x43521d(0x719)]??_0x10fc2e[_0x43521d(0x719)]??[]);_0x546b1f['forEach'](_0x4e7775=>_0x2acd91['add'](_0x4e7775)),_0x2acd91[_0x43521d(0x6ff)](_0x10fc2e['owner']),this[_0x43521d(0x6c6)][_0x43521d(0x39b)](this[_0x43521d(0x546)]+'\x20('+this['instance'][_0x43521d(0x638)]+_0x43521d(0x5bb)+Array['from'](_0x546b1f)),this[_0x43521d(0x6c6)][_0x43521d(0x39b)](this[_0x43521d(0x546)]+'\x20('+this['instance'][_0x43521d(0x638)]+_0x43521d(0x3bd)+Array[_0x43521d(0x298)](_0x2acd91));let _0x2e2781=await this['getValidWhatsAppNumbers'](Array['from'](_0x2acd91)),_0x3c1b67=Array['from'](_0x546b1f)['filter'](_0x23fb68=>_0x2e2781['includes'](_0x23fb68)),_0xf8d39=Array['from'](_0x2acd91)[_0x43521d(0xe1)](_0x4bfffa=>_0x2e2781[_0x43521d(0x253)](_0x4bfffa));this[_0x43521d(0x6c6)]['verbose'](this[_0x43521d(0x546)]+'\x20('+this[_0x43521d(0x444)][_0x43521d(0x638)]+_0x43521d(0x18a)+_0x3c1b67),this[_0x43521d(0x6c6)][_0x43521d(0x39b)](this[_0x43521d(0x546)]+'\x20('+this['instance']['wuid']+_0x43521d(0x79d)+_0xf8d39);let _0x320ffa={..._0x10fc2e,..._0x3fcd3b,'whoCanEdit':_0x3c1b67,'whoCanUse':_0xf8d39},_0x1caf35=await this['repository'][_0x43521d(0x72d)][_0x43521d(0x127)](_0x10fc2e[_0x43521d(0x6ae)],_0x320ffa);return await this[_0x43521d(0x3cc)](),_0x1caf35;}catch(_0x1e35f1){let _0x161114=_0x43521d(0x7fc),_0x466761=_0x1e35f1 instanceof Error?_0x1e35f1[_0x43521d(0x319)]:typeof _0x1e35f1==_0x43521d(0x4c4)?JSON[_0x43521d(0x79e)](_0x1e35f1):_0x1e35f1,_0x2addcc=_0x161114+':\x20'+_0x466761;throw this[_0x43521d(0x6c6)]['error'](this[_0x43521d(0x546)]+'\x20('+this[_0x43521d(0x444)]['wuid']+_0x43521d(0x17a)+_0x2addcc),new m(_0x2addcc);}}async[a0_0x5ca8c7(0x389)](_0x565286){const _0x260d6f=a0_0x5ca8c7;let _0x509145={'numbers':_0x565286};return(await this[_0x260d6f(0x322)](_0x509145))[_0x260d6f(0xe1)](_0x9e3760=>_0x9e3760['exists'])[_0x260d6f(0x726)](_0x3f78f8=>_0x3f78f8['jid'])[_0x260d6f(0x726)](_0x532103=>this[_0x260d6f(0x5b4)](_0x532103));}[a0_0x5ca8c7(0x5b4)](_0x5006bc){const _0x2eae57=a0_0x5ca8c7;let _0x5730dc=_0x5006bc[_0x2eae57(0x33d)](/\d+/);return _0x5730dc?_0x5730dc[0x0]:'';}async['editFlowBlock'](_0x126438){const _0x48fb81=a0_0x5ca8c7;try{if(this[_0x48fb81(0x6c6)][_0x48fb81(0x39b)](this[_0x48fb81(0x546)]+'\x20('+this[_0x48fb81(0x444)][_0x48fb81(0x638)]+_0x48fb81(0x3af)),!this[_0x48fb81(0x4b3)][_0x48fb81(0x634)]['find'](_0x4da2fb=>_0x4da2fb[_0x48fb81(0x6ae)]===_0x126438[_0x48fb81(0x6ae)]))throw this[_0x48fb81(0x6c6)][_0x48fb81(0x39b)](this[_0x48fb81(0x546)]+'\x20('+this['instance'][_0x48fb81(0x638)]+_0x48fb81(0x19e)+_0x126438[_0x48fb81(0x6ae)]+_0x48fb81(0x44e)),new m(_0x48fb81(0x2a6));let _0xfffcec=await this[_0x48fb81(0x4b2)]['flow']['findOne']({'where':{'_id':_0x126438['_id']}});if(!_0xfffcec||!_0xfffcec[_0x48fb81(0x719)]?.['includes'](this[_0x48fb81(0x444)][_0x48fb81(0x638)]))throw this[_0x48fb81(0x6c6)][_0x48fb81(0x73d)](this[_0x48fb81(0x546)]+'\x20('+this[_0x48fb81(0x444)][_0x48fb81(0x638)]+_0x48fb81(0x6c5)+_0x126438[_0x48fb81(0x6ae)]+_0x48fb81(0x727)),new m(_0x48fb81(0x672)+_0x126438[_0x48fb81(0x6ae)]+_0x48fb81(0x727));if(!_0xfffcec[_0x48fb81(0x192)]?.[_0x48fb81(0x253)](this[_0x48fb81(0x444)][_0x48fb81(0x638)]))throw new m('Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.');let {block:_0x15d98d}=_0x126438;_0x15d98d?.[_0x48fb81(0x499)]?this[_0x48fb81(0x139)](_0xfffcec,_0x126438):_0x15d98d?.[_0x48fb81(0x5e3)]?this[_0x48fb81(0x71f)](_0xfffcec,_0x126438):_0x15d98d[_0x48fb81(0x6ae)]?await this[_0x48fb81(0x6e4)](_0xfffcec,_0x126438):this[_0x48fb81(0x580)](_0xfffcec,_0x126438);let _0x1a3250=await this[_0x48fb81(0x4b2)][_0x48fb81(0x72d)]['updateOne'](_0xfffcec[_0x48fb81(0x6ae)],_0xfffcec);if(!_0x1a3250)throw new Error(_0x48fb81(0x1b6));return _0x1a3250;}catch(_0x1d0e0b){this[_0x48fb81(0x609)](_0x48fb81(0x6be)+_0x1d0e0b[_0x48fb81(0x319)]);}}async[a0_0x5ca8c7(0x139)](_0x2028dd,_0x1d34fe){const _0x5c0067=a0_0x5ca8c7;let _0x125746=_0x1d34fe[_0x5c0067(0x59e)][_0x5c0067(0x6ae)],_0x5445f6=_0x2028dd[_0x5c0067(0xe6)][_0x5c0067(0x509)](_0x596115=>_0x596115[_0x5c0067(0x6ae)]['toString']()===_0x125746);if(!_0x5445f6){this['logger'][_0x5c0067(0x73d)](this['instanceName']+'\x20('+this[_0x5c0067(0x444)]['wuid']+_0x5c0067(0x1fe)+_0x125746+'\x20no\x20encontrado\x20para\x20cpia');return;}this[_0x5c0067(0x6c6)][_0x5c0067(0x39b)](this['instanceName']+'\x20('+this['instance'][_0x5c0067(0x638)]+_0x5c0067(0x5ec)+JSON[_0x5c0067(0x79e)](_0x5445f6));let _0x108655=JSON[_0x5c0067(0x27e)](JSON[_0x5c0067(0x79e)](_0x5445f6));_0x108655[_0x5c0067(0x6ae)]=new we[(_0x5c0067(0x180))][(_0x5c0067(0x1c5))][(_0x5c0067(0xca))](),this[_0x5c0067(0x6c6)][_0x5c0067(0x39b)](this['instanceName']+'\x20('+this[_0x5c0067(0x444)]['wuid']+_0x5c0067(0x75b)+JSON[_0x5c0067(0x79e)](_0x108655)),_0x2028dd[_0x5c0067(0xe6)][_0x5c0067(0x7cb)](_0x108655),this['reorderBlocks'](_0x2028dd[_0x5c0067(0xe6)],_0x108655['groupId']);}['throwAndLogError'](_0x2e93fc){const _0x14ec00=a0_0x5ca8c7;throw this[_0x14ec00(0x6c6)][_0x14ec00(0x73d)](this[_0x14ec00(0x546)]+'\x20('+this[_0x14ec00(0x444)][_0x14ec00(0x638)]+_0x14ec00(0x17a)+_0x2e93fc),new m(_0x2e93fc);}['deleteBlock'](_0x170ddd,_0x4350cb){const _0x5e0ed6=a0_0x5ca8c7;let {block:_0x16c65f}=_0x4350cb;if(_0x16c65f[_0x5e0ed6(0x573)]===_0x5e0ed6(0x282)){this[_0x5e0ed6(0x609)](_0x5e0ed6(0x804));return;}if(!_0x16c65f[_0x5e0ed6(0x6ae)]){this[_0x5e0ed6(0x609)](_0x5e0ed6(0x6eb));return;}let _0x3017da=_0x170ddd['blocks'][_0x5e0ed6(0x509)](_0x4605d3=>_0x4605d3[_0x5e0ed6(0x6ae)][_0x5e0ed6(0x30c)]()===_0x4350cb[_0x5e0ed6(0x59e)][_0x5e0ed6(0x6ae)][_0x5e0ed6(0x30c)]());if(!_0x3017da){this[_0x5e0ed6(0x609)]('Bloco\x20com\x20ID\x20'+_0x16c65f['_id']+_0x5e0ed6(0x632));return;}_0x170ddd[_0x5e0ed6(0xe6)]=_0x170ddd['blocks'][_0x5e0ed6(0xe1)](_0x3454aa=>_0x3454aa[_0x5e0ed6(0x6ae)][_0x5e0ed6(0x30c)]()!==_0x4350cb[_0x5e0ed6(0x59e)]['_id'][_0x5e0ed6(0x30c)]()),_0x170ddd[_0x5e0ed6(0x495)]=_0x170ddd[_0x5e0ed6(0x495)][_0x5e0ed6(0xe1)](_0x4443a8=>_0x4443a8[_0x5e0ed6(0x468)]!==_0x16c65f[_0x5e0ed6(0x6ae)][_0x5e0ed6(0x30c)]()),_0x170ddd[_0x5e0ed6(0x328)]=_0x170ddd[_0x5e0ed6(0x328)][_0x5e0ed6(0xe1)](_0x11a5e7=>_0x11a5e7[_0x5e0ed6(0x468)]!==_0x16c65f[_0x5e0ed6(0x6ae)][_0x5e0ed6(0x30c)]()),_0x170ddd[_0x5e0ed6(0x431)]=_0x170ddd['replyOptions']['filter'](_0x4d66f9=>_0x4d66f9[_0x5e0ed6(0x468)]!==_0x16c65f[_0x5e0ed6(0x6ae)]['toString']()),this[_0x5e0ed6(0x332)](_0x170ddd[_0x5e0ed6(0xe6)],_0x3017da[_0x5e0ed6(0x651)]);}async['updateBlock'](_0x39de9d,_0x3a7e2a){const _0x501f61=a0_0x5ca8c7;let _0xc4df77=_0x39de9d[_0x501f61(0xe6)][_0x501f61(0x3aa)](_0x1c198b=>_0x1c198b[_0x501f61(0x6ae)]['toString']()===_0x3a7e2a['block'][_0x501f61(0x6ae)][_0x501f61(0x30c)]());if(this[_0x501f61(0x6c6)][_0x501f61(0x39b)](this['instanceName']+'\x20('+this[_0x501f61(0x444)][_0x501f61(0x638)]+_0x501f61(0x371)+_0xc4df77),_0xc4df77===-0x1){this['logger']['verbose'](_0x501f61(0x500)+_0x3a7e2a[_0x501f61(0x59e)][_0x501f61(0x6ae)]+_0x501f61(0x36f));return;}if(_0x39de9d['blocks'][_0xc4df77][_0x501f61(0x573)]===_0x501f61(0x282)){let _0x53b53d=Object['keys'](_0x3a7e2a[_0x501f61(0x59e)]);if(_0x53b53d[_0x501f61(0x293)]>0x2||_0x53b53d[_0x501f61(0x293)]===0x2&&!_0x53b53d['includes'](_0x501f61(0x31a))){this[_0x501f61(0x609)](_0x501f61(0x50e));return;}}let _0xf06988=_0x39de9d['blocks'][_0xc4df77][_0x501f61(0x651)];for(let _0x392b28 in _0x3a7e2a[_0x501f61(0x59e)])_0x3a7e2a['block'][_0x501f61(0x689)](_0x392b28)&&(_0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x392b28]=_0x3a7e2a[_0x501f61(0x59e)][_0x392b28]);if(this[_0x501f61(0x6c6)][_0x501f61(0x39b)](this['instanceName']+'\x20('+this[_0x501f61(0x444)]['wuid']+_0x501f61(0x4f7)+JSON[_0x501f61(0x79e)](_0x39de9d[_0x501f61(0xe6)][_0xc4df77])),_0x39de9d['blocks'][_0xc4df77]['apirequest']&&_0x501f61(0x530)in _0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x501f61(0x57c)]){this[_0x501f61(0x6c6)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x501f61(0x638)]+_0x501f61(0x53c));let _0x226f01=JSON[_0x501f61(0x79e)](_0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x501f61(0x57c)][_0x501f61(0x530)],null,0x1);_0x226f01[_0x501f61(0x293)]>0x2&&(_0x226f01=_0x226f01['substring'](0x1,_0x226f01[_0x501f61(0x293)]-0x1)[_0x501f61(0x80a)]()),_0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x501f61(0x57c)][_0x501f61(0x22e)]=_0x226f01;}if(_0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x501f61(0x57c)]&&_0x501f61(0x3ec)in _0x39de9d[_0x501f61(0xe6)][_0xc4df77]['apirequest']&&!(_0x501f61(0x602)in _0x39de9d[_0x501f61(0xe6)][_0xc4df77]['apirequest'])){this['logger'][_0x501f61(0x39b)](this['instanceName']+'\x20('+this[_0x501f61(0x444)][_0x501f61(0x638)]+_0x501f61(0x3f0)),_0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x501f61(0x57c)][_0x501f61(0x6c4)]=!0x1;let _0x380fbc=JSON[_0x501f61(0x79e)](_0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x501f61(0x57c)][_0x501f61(0x3ec)],null,0x2);_0x39de9d['blocks'][_0xc4df77][_0x501f61(0x57c)][_0x501f61(0x602)]=_0x380fbc;}if(_0x39de9d[_0x501f61(0xe6)][_0xc4df77]['apirequest']&&_0x501f61(0x602)in _0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x501f61(0x57c)]){_0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x501f61(0x57c)][_0x501f61(0x6c4)]=!0x1;let _0x1cfa87=_0x39de9d['blocks'][_0xc4df77]['apirequest'][_0x501f61(0x602)],_0x186846=this['beautifyWithPlaceholders'](_0x1cfa87);_0x39de9d[_0x501f61(0xe6)][_0xc4df77]['apirequest'][_0x501f61(0x602)]=_0x186846[_0x501f61(0x24c)],_0x39de9d['blocks'][_0xc4df77][_0x501f61(0x57c)][_0x501f61(0x6c4)]=_0x186846[_0x501f61(0x73d)];}let _0x354b4b=_0x39de9d[_0x501f61(0xe6)][_0xc4df77][_0x501f61(0x651)];_0xf06988!==_0x354b4b?(this[_0x501f61(0x332)](_0x39de9d[_0x501f61(0xe6)],_0xf06988),this[_0x501f61(0x332)](_0x39de9d[_0x501f61(0xe6)],_0x354b4b)):this[_0x501f61(0x332)](_0x39de9d[_0x501f61(0xe6)],_0xf06988);}[a0_0x5ca8c7(0x2d6)](_0x1df5b1){const _0x30ad92=a0_0x5ca8c7;let _0x5883c7='\u205f',_0x53ebf8=!0x1,_0x1e8dc1='';for(let _0x5bb502=0x0;_0x5bb502<_0x1df5b1[_0x30ad92(0x293)];_0x5bb502++){let _0xaca17e=_0x1df5b1[_0x5bb502];_0xaca17e==='\x22'&&(_0x5bb502===0x0||_0x1df5b1[_0x5bb502-0x1]!=='\x5c')&&(_0x53ebf8=!_0x53ebf8),!(!_0x53ebf8&&(_0xaca17e==='\x0a'||_0xaca17e==='\x20'||_0xaca17e===_0x5883c7))&&(_0x1e8dc1+=_0xaca17e);}let _0x283795={},_0x425942=9876543210.1234,_0x5c86a4=_0x1e8dc1[_0x30ad92(0x2cf)](/\{\{([^}]+)\}\}/g,_0x586b8b=>{let _0x3c1815=_0x586b8b,_0x5250a0=''+_0x425942;return _0x283795[_0x5250a0]=_0x3c1815,_0x425942+=0.0001,_0x5250a0;}),_0x2bb8b7='',_0x2796c7=!0x1;try{let _0x1a978a=JSON[_0x30ad92(0x27e)](_0x5c86a4);_0x2bb8b7=JSON['stringify'](_0x1a978a,null,0x2),_0x2bb8b7=_0x2bb8b7[_0x30ad92(0x2cf)](/\n( +)/g,(_0x1838b6,_0x19d4fb)=>{let _0x22486b=_0x19d4fb['length'];return'\x0a'+_0x5883c7['repeat'](_0x22486b*0x2);}),_0x2bb8b7=_0x2bb8b7['replace'](/(\d{10,}\.\d+)/g,_0x326793=>_0x283795[_0x326793]||_0x326793);}catch(_0x327d30){this[_0x30ad92(0x6c6)][_0x30ad92(0x73d)](_0x30ad92(0x229)+_0x327d30),_0x2bb8b7=_0x1df5b1,_0x2796c7=!0x0;}return{'result':_0x2bb8b7,'error':_0x2796c7};}[a0_0x5ca8c7(0x580)](_0x5bee3d,_0xeba19f){const _0x544eaf=a0_0x5ca8c7;if(_0xeba19f[_0x544eaf(0x59e)]['type']==='start'){this[_0x544eaf(0x609)]('No\x20\x20permitido\x20adicionar\x20outro\x20bloco\x20padro');return;}if(_0xeba19f['block']['apirequest']&&_0x544eaf(0x530)in _0xeba19f['block'][_0x544eaf(0x57c)]){this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x544eaf(0x444)]['wuid']+_0x544eaf(0x53c));let _0x2c14f5=JSON['stringify'](_0xeba19f['block']['apirequest'][_0x544eaf(0x530)],null,0x1);_0x2c14f5['length']>0x2&&(_0x2c14f5=_0x2c14f5['substring'](0x1,_0x2c14f5[_0x544eaf(0x293)]-0x1)[_0x544eaf(0x80a)]()),_0xeba19f[_0x544eaf(0x59e)][_0x544eaf(0x57c)][_0x544eaf(0x22e)]=_0x2c14f5;}_0xeba19f[_0x544eaf(0x59e)][_0x544eaf(0x57c)]&&_0x544eaf(0x3ec)in _0xeba19f[_0x544eaf(0x59e)][_0x544eaf(0x57c)]&&(this[_0x544eaf(0x6c6)]['verbose'](this[_0x544eaf(0x546)]+'\x20('+this[_0x544eaf(0x444)]['wuid']+_0x544eaf(0x3f0)),_0xeba19f[_0x544eaf(0x59e)][_0x544eaf(0x57c)][_0x544eaf(0x602)]=JSON[_0x544eaf(0x79e)](_0xeba19f[_0x544eaf(0x59e)][_0x544eaf(0x57c)][_0x544eaf(0x3ec)],null,0x1)['trim']()),_0x5bee3d[_0x544eaf(0xe6)][_0x544eaf(0x7cb)](_0xeba19f['block']),this[_0x544eaf(0x332)](_0x5bee3d[_0x544eaf(0xe6)],_0xeba19f[_0x544eaf(0x59e)][_0x544eaf(0x651)]);}[a0_0x5ca8c7(0x332)](_0x2f8d38,_0x49e177){const _0x3f8377=a0_0x5ca8c7;let _0x80c2ab=_0x2f8d38[_0x3f8377(0xe1)](_0x1711ed=>_0x1711ed[_0x3f8377(0x651)]===_0x49e177);_0x80c2ab['sort']((_0x46035f,_0x3066ed)=>_0x46035f['order']-_0x3066ed['order']),_0x80c2ab[_0x3f8377(0x57a)]((_0xed060c,_0x23d922)=>_0xed060c[_0x3f8377(0x294)]=_0x23d922+0x1);}async[a0_0x5ca8c7(0x40b)](_0x1a9f4c){const _0x473d2d=a0_0x5ca8c7;try{if(this['logger'][_0x473d2d(0x39b)](this['instanceName']+'\x20('+this['instance'][_0x473d2d(0x638)]+'):\x20Editando\x20replyOption...'),!_0x1a9f4c||!_0x1a9f4c[_0x473d2d(0x69e)]){this[_0x473d2d(0x609)](_0x473d2d(0x1fd));return;}if(!this[_0x473d2d(0x4b3)][_0x473d2d(0x634)][_0x473d2d(0x509)](_0x12f87d=>_0x12f87d['_id']===_0x1a9f4c[_0x473d2d(0x6ae)]))throw this[_0x473d2d(0x6c6)][_0x473d2d(0x39b)](this[_0x473d2d(0x546)]+'\x20('+this[_0x473d2d(0x444)][_0x473d2d(0x638)]+'):\x20Fluxo\x20\x27'+_0x1a9f4c[_0x473d2d(0x6ae)]+_0x473d2d(0x44e)),new m(_0x473d2d(0x2a6));let _0x11b9c2=await this[_0x473d2d(0x4b2)]['flow'][_0x473d2d(0x51f)]({'where':{'_id':_0x1a9f4c['_id']}});if(!_0x11b9c2||!_0x11b9c2[_0x473d2d(0x719)]?.[_0x473d2d(0x253)](this[_0x473d2d(0x444)]['wuid']))throw this['logger']['error'](this[_0x473d2d(0x546)]+'\x20('+this[_0x473d2d(0x444)]['wuid']+_0x473d2d(0x6c5)+_0x1a9f4c[_0x473d2d(0x6ae)]+_0x473d2d(0x727)),new m(_0x473d2d(0x672)+_0x1a9f4c[_0x473d2d(0x6ae)]+_0x473d2d(0x727));if(!_0x11b9c2[_0x473d2d(0x192)]?.['includes'](this[_0x473d2d(0x444)][_0x473d2d(0x638)]))throw new m(_0x473d2d(0x2b7));let {replyOption:_0x50bb49}=_0x1a9f4c;_0x50bb49?.[_0x473d2d(0x5e3)]?(this[_0x473d2d(0x464)](_0x11b9c2,_0x1a9f4c),this[_0x473d2d(0x74f)](_0x11b9c2[_0x473d2d(0x431)],_0x1a9f4c[_0x473d2d(0x69e)][_0x473d2d(0x468)])):_0x50bb49['_id']?(await this['updateReplyOption'](_0x11b9c2,_0x1a9f4c),this[_0x473d2d(0x74f)](_0x11b9c2[_0x473d2d(0x431)],_0x1a9f4c[_0x473d2d(0x69e)][_0x473d2d(0x468)])):(this[_0x473d2d(0xf9)](_0x11b9c2,_0x1a9f4c),this[_0x473d2d(0x74f)](_0x11b9c2[_0x473d2d(0x431)],_0x1a9f4c['replyOption'][_0x473d2d(0x468)]));let _0x1e0db9=await this[_0x473d2d(0x4b2)][_0x473d2d(0x72d)][_0x473d2d(0x127)](_0x11b9c2[_0x473d2d(0x6ae)],_0x11b9c2);if(!_0x1e0db9)throw new Error(_0x473d2d(0x1b6));return _0x1e0db9;}catch(_0xf690e6){this[_0x473d2d(0x609)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0xf690e6);}}['reorderReplyOptions'](_0x461bd5,_0x3a0753){const _0x956d34=a0_0x5ca8c7;_0x461bd5[_0x956d34(0x57a)](_0x462fbd=>{_0x462fbd['blockId']===_0x3a0753&&_0x462fbd['order']===void 0x0&&(_0x462fbd['order']=0x270f);});let _0xe74827=_0x461bd5[_0x956d34(0xe1)](_0x490e52=>_0x490e52['blockId']===_0x3a0753);_0xe74827[_0x956d34(0x28e)]((_0x55d9a9,_0x1f6c1b)=>_0x55d9a9[_0x956d34(0x294)]-_0x1f6c1b['order']),_0xe74827['forEach']((_0x1b71ba,_0x126456)=>{_0x1b71ba['order']=_0x126456+0x1;}),_0x461bd5[_0x956d34(0x57a)](_0x32d916=>{const _0x51e838=_0x956d34;if(_0x32d916['blockId']===_0x3a0753){let _0x37cd38=_0xe74827[_0x51e838(0x509)](_0x19807b=>_0x19807b[_0x51e838(0x6ae)]&&_0x32d916[_0x51e838(0x6ae)]&&_0x19807b[_0x51e838(0x6ae)][_0x51e838(0x30c)]()===_0x32d916[_0x51e838(0x6ae)][_0x51e838(0x30c)]());_0x37cd38&&(_0x32d916[_0x51e838(0x294)]=_0x37cd38[_0x51e838(0x294)]);}});}[a0_0x5ca8c7(0x464)](_0x281e06,_0x2fae47){const _0x474344=a0_0x5ca8c7;let {replyOption:_0x43585a}=_0x2fae47;if(!_0x43585a[_0x474344(0x6ae)]){this['throwAndLogError'](_0x474344(0x2c7));return;}if(!_0x281e06[_0x474344(0x431)][_0x474344(0x509)](_0x2b94db=>_0x2b94db[_0x474344(0x6ae)][_0x474344(0x30c)]()===_0x2fae47[_0x474344(0x69e)][_0x474344(0x6ae)][_0x474344(0x30c)]())){this[_0x474344(0x609)]('ReplyOption\x20com\x20ID\x20'+_0x43585a['_id']+'\x20no\x20encontrado');return;}_0x281e06[_0x474344(0x431)]=_0x281e06['replyOptions'][_0x474344(0xe1)](_0x237dbf=>_0x237dbf[_0x474344(0x6ae)][_0x474344(0x30c)]()!==_0x2fae47[_0x474344(0x69e)][_0x474344(0x6ae)][_0x474344(0x30c)]());}async[a0_0x5ca8c7(0x69d)](_0x4f45cf,_0x23db05){const _0x3331b7=a0_0x5ca8c7;let _0x3c2b44=_0x4f45cf['replyOptions']['findIndex'](_0x1809b9=>_0x1809b9[_0x3331b7(0x6ae)]['toString']()===_0x23db05[_0x3331b7(0x69e)]['_id']['toString']());if(_0x3c2b44===-0x1){this['throwAndLogError'](_0x3331b7(0x478)+_0x23db05[_0x3331b7(0x69e)][_0x3331b7(0x6ae)]+_0x3331b7(0x36f));return;}for(let _0x4f1b46 in _0x23db05[_0x3331b7(0x69e)])_0x23db05[_0x3331b7(0x69e)][_0x3331b7(0x689)](_0x4f1b46)&&(_0x4f45cf['replyOptions'][_0x3c2b44][_0x4f1b46]=_0x23db05['replyOption'][_0x4f1b46]);}[a0_0x5ca8c7(0xf9)](_0x54b0ef,_0x3440ff){const _0x47d77d=a0_0x5ca8c7;_0x54b0ef['replyOptions'][_0x47d77d(0x7cb)](_0x3440ff[_0x47d77d(0x69e)]);}async[a0_0x5ca8c7(0x173)](_0x20a25d){const _0x15c873=a0_0x5ca8c7;this[_0x15c873(0x6c6)]['verbose'](this[_0x15c873(0x546)]+'\x20('+this[_0x15c873(0x444)][_0x15c873(0x638)]+_0x15c873(0x1ad)+JSON['stringify'](_0x20a25d,null,0x2));try{if(this[_0x15c873(0x6c6)][_0x15c873(0x39b)](this[_0x15c873(0x546)]+'\x20('+this['instance'][_0x15c873(0x638)]+_0x15c873(0x5b3)),!this[_0x15c873(0x4b3)][_0x15c873(0x634)][_0x15c873(0x509)](_0x1ab7f5=>_0x1ab7f5[_0x15c873(0x6ae)]===_0x20a25d['_id']))throw this[_0x15c873(0x6c6)][_0x15c873(0x39b)](this[_0x15c873(0x546)]+'\x20('+this[_0x15c873(0x444)][_0x15c873(0x638)]+'):\x20Fluxo\x20\x27'+_0x20a25d[_0x15c873(0x6ae)]+_0x15c873(0x44e)),new m('Fluxo\x20no\x20encontrado\x20na\x20memria.');let _0x776539=await this[_0x15c873(0x4b2)][_0x15c873(0x72d)][_0x15c873(0x51f)]({'where':{'_id':_0x20a25d[_0x15c873(0x6ae)]}});if(!_0x776539||!_0x776539[_0x15c873(0x719)]?.[_0x15c873(0x253)](this[_0x15c873(0x444)]['wuid']))throw this[_0x15c873(0x6c6)][_0x15c873(0x73d)](this[_0x15c873(0x546)]+'\x20('+this['instance']['wuid']+'):\x20Flow\x20\x27'+_0x20a25d[_0x15c873(0x6ae)]+_0x15c873(0x727)),new m(_0x15c873(0x672)+_0x20a25d[_0x15c873(0x6ae)]+_0x15c873(0x727));if(!_0x776539['whoCanEdit']?.['includes'](this['instance'][_0x15c873(0x638)]))throw new m(_0x15c873(0x2b7));if(_0x20a25d[_0x15c873(0x1e3)]&&_0x20a25d['group']?.[_0x15c873(0x5e3)]===!0x0){if(this[_0x15c873(0x6c6)][_0x15c873(0x39b)](this[_0x15c873(0x546)]+'\x20('+this['instance']['wuid']+_0x15c873(0x1ca)),_0x20a25d['group'][_0x15c873(0x180)]===!0x0)return{'message':_0x15c873(0x2ff)};if(_0x776539[_0x15c873(0xe6)][_0x15c873(0xf8)](_0x58d3c9=>_0x58d3c9[_0x15c873(0x651)][_0x15c873(0x30c)]()===_0x20a25d[_0x15c873(0x1e3)]['_id']))return this['logger'][_0x15c873(0x39b)](this[_0x15c873(0x546)]+'\x20('+this[_0x15c873(0x444)][_0x15c873(0x638)]+_0x15c873(0x340)),{'message':_0x15c873(0x7ea)};_0x776539['groups']=_0x776539[_0x15c873(0x15f)][_0x15c873(0xe1)](_0x2ac0c2=>_0x2ac0c2[_0x15c873(0x6ae)][_0x15c873(0x30c)]()!==_0x20a25d[_0x15c873(0x1e3)]['_id']);}else{if(_0x20a25d[_0x15c873(0x1e3)]){if(_0x20a25d[_0x15c873(0x1e3)][_0x15c873(0x180)]===!0x0)return{'message':'No\x20\x20permitido\x20adicionar\x20outro\x20grupo\x20padro'};if(_0x20a25d['group']['_id']){let _0x1ce0e5=_0x776539[_0x15c873(0x15f)]['find'](_0x2412e0=>_0x2412e0['_id']['toString']()===_0x20a25d[_0x15c873(0x1e3)][_0x15c873(0x6ae)]);_0x1ce0e5&&(_0x20a25d['group']['x']<0x0&&(_0x20a25d[_0x15c873(0x1e3)]['x']=0x0),_0x20a25d['group']['y']<0x0&&(_0x20a25d['group']['y']=0x0),Object[_0x15c873(0x14c)](_0x1ce0e5,_0x20a25d[_0x15c873(0x1e3)]));}else _0x776539[_0x15c873(0x15f)][_0x15c873(0x7cb)](_0x20a25d[_0x15c873(0x1e3)]);}}let _0x24c0b0=await this[_0x15c873(0x4b2)][_0x15c873(0x72d)][_0x15c873(0x127)](_0x776539[_0x15c873(0x6ae)],_0x776539);if(!_0x24c0b0)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x24c0b0;}catch(_0x1b1904){let _0x286d62=_0x15c873(0x56d),_0x4d2d7f=_0x1b1904 instanceof Error?_0x1b1904[_0x15c873(0x319)]:typeof _0x1b1904==_0x15c873(0x4c4)?JSON['stringify'](_0x1b1904):_0x1b1904,_0x58b85f=_0x286d62+':\x20'+_0x4d2d7f;throw this[_0x15c873(0x6c6)][_0x15c873(0x73d)](this[_0x15c873(0x546)]+'\x20('+this[_0x15c873(0x444)][_0x15c873(0x638)]+_0x15c873(0x17a)+_0x58b85f),new m(_0x58b85f);}}async['editFlowCondition'](_0xa07613){const _0x3c9198=a0_0x5ca8c7;try{if(this[_0x3c9198(0x6c6)]['verbose'](this[_0x3c9198(0x546)]+'\x20('+this[_0x3c9198(0x444)][_0x3c9198(0x638)]+_0x3c9198(0x7cc)),!this[_0x3c9198(0x4b3)][_0x3c9198(0x634)]['find'](_0x31dc76=>_0x31dc76['_id']===_0xa07613[_0x3c9198(0x6ae)]))throw this[_0x3c9198(0x6c6)]['verbose'](this[_0x3c9198(0x546)]+'\x20('+this[_0x3c9198(0x444)][_0x3c9198(0x638)]+_0x3c9198(0x19e)+_0xa07613[_0x3c9198(0x6ae)]+_0x3c9198(0x44e)),new m(_0x3c9198(0x2a6));let _0x2a6068=await this['repository'][_0x3c9198(0x72d)][_0x3c9198(0x51f)]({'where':{'_id':_0xa07613[_0x3c9198(0x6ae)]}});if(!_0x2a6068||!_0x2a6068[_0x3c9198(0x719)]?.[_0x3c9198(0x253)](this[_0x3c9198(0x444)][_0x3c9198(0x638)]))throw this[_0x3c9198(0x6c6)][_0x3c9198(0x73d)](this['instanceName']+'\x20('+this[_0x3c9198(0x444)][_0x3c9198(0x638)]+_0x3c9198(0x6c5)+_0xa07613[_0x3c9198(0x6ae)]+_0x3c9198(0x727)),new m(_0x3c9198(0x672)+_0xa07613[_0x3c9198(0x6ae)]+_0x3c9198(0x727));if(!_0x2a6068[_0x3c9198(0x192)]?.[_0x3c9198(0x253)](this[_0x3c9198(0x444)]['wuid']))throw new m('Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.');let _0x338bc4=!0x1;if(_0xa07613[_0x3c9198(0x663)]?.[_0x3c9198(0x5e3)]===!0x0)_0x2a6068['conditions']=_0x2a6068[_0x3c9198(0x495)][_0x3c9198(0xe1)](_0x212a96=>_0x212a96&&_0xa07613[_0x3c9198(0x663)]&&_0x212a96['_id']&&_0xa07613[_0x3c9198(0x663)][_0x3c9198(0x6ae)]&&_0x212a96[_0x3c9198(0x6ae)][_0x3c9198(0x30c)]()!==_0xa07613['condition'][_0x3c9198(0x6ae)][_0x3c9198(0x30c)]()),_0x338bc4=!0x0;else{let _0x24cb15=_0x2a6068[_0x3c9198(0x495)][_0x3c9198(0x509)](_0x32753b=>_0x32753b&&_0xa07613[_0x3c9198(0x663)]&&_0x32753b[_0x3c9198(0x6ae)]&&_0xa07613[_0x3c9198(0x663)]['_id']&&_0x32753b[_0x3c9198(0x6ae)][_0x3c9198(0x30c)]()===_0xa07613[_0x3c9198(0x663)][_0x3c9198(0x6ae)][_0x3c9198(0x30c)]());_0x24cb15?(_0x338bc4=_0x24cb15['order']!==_0xa07613[_0x3c9198(0x663)][_0x3c9198(0x294)],Object[_0x3c9198(0x14c)](_0x24cb15,_0xa07613[_0x3c9198(0x663)])):(_0x2a6068[_0x3c9198(0x495)][_0x3c9198(0x7cb)](_0xa07613[_0x3c9198(0x663)]),_0x338bc4=!0x0);}if(_0x338bc4){_0x2a6068[_0x3c9198(0x495)]['sort']((_0x1a47a0,_0x1a79f8)=>_0x1a47a0['order']>_0x1a79f8[_0x3c9198(0x294)]?0x1:_0x1a79f8['order']>_0x1a47a0['order']?-0x1:0x0);for(let _0x38c6dd=0x0;_0x38c6dd<_0x2a6068[_0x3c9198(0x495)][_0x3c9198(0x293)];_0x38c6dd++)_0x2a6068[_0x3c9198(0x495)][_0x38c6dd][_0x3c9198(0x294)]=_0x38c6dd+0x1;_0x2a6068['conditions']['length']>0x0&&(_0x2a6068['conditions'][0x0]['OrAnd']=_0x3c9198(0x549));}let _0x27af65=await this[_0x3c9198(0x4b2)][_0x3c9198(0x72d)][_0x3c9198(0x127)](_0x2a6068[_0x3c9198(0x6ae)],_0x2a6068);if(!_0x27af65)throw new Error(_0x3c9198(0x1b6));return _0x27af65;}catch(_0x1bbc45){let _0x316243=_0x3c9198(0x547),_0x4cc3a2=_0x1bbc45 instanceof Error?_0x1bbc45[_0x3c9198(0x319)]:typeof _0x1bbc45=='object'?JSON[_0x3c9198(0x79e)](_0x1bbc45):_0x1bbc45,_0x3cebc5=_0x316243+':\x20'+_0x4cc3a2;throw this[_0x3c9198(0x6c6)][_0x3c9198(0x73d)](this[_0x3c9198(0x546)]+'\x20('+this['instance'][_0x3c9198(0x638)]+_0x3c9198(0x17a)+_0x3cebc5),new m(_0x3cebc5);}}async[a0_0x5ca8c7(0x6a9)](_0x337d73){const _0x31236d=a0_0x5ca8c7;try{if(this[_0x31236d(0x6c6)][_0x31236d(0x39b)](this['instanceName']+'\x20('+this[_0x31236d(0x444)]['wuid']+_0x31236d(0x1ee)),!this[_0x31236d(0x4b3)]['flows'][_0x31236d(0x509)](_0xccbdd3=>_0xccbdd3['_id']===_0x337d73['_id']))throw this[_0x31236d(0x6c6)][_0x31236d(0x39b)](this[_0x31236d(0x546)]+'\x20('+this['instance'][_0x31236d(0x638)]+_0x31236d(0x19e)+_0x337d73[_0x31236d(0x6ae)]+'\x27\x20no\x20encontrado'),new m('Fluxo\x20no\x20encontrado\x20na\x20memria.');let _0x1b8dca=await this[_0x31236d(0x4b2)][_0x31236d(0x72d)][_0x31236d(0x51f)]({'where':{'_id':_0x337d73[_0x31236d(0x6ae)]}});if(!_0x1b8dca||!_0x1b8dca[_0x31236d(0x719)]?.[_0x31236d(0x253)](this[_0x31236d(0x444)]['wuid']))throw this[_0x31236d(0x6c6)][_0x31236d(0x73d)](this[_0x31236d(0x546)]+'\x20('+this['instance']['wuid']+'):\x20Flow\x20\x27'+_0x337d73[_0x31236d(0x6ae)]+_0x31236d(0x727)),new m(_0x31236d(0x672)+_0x337d73[_0x31236d(0x6ae)]+'\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo');if(!_0x1b8dca['whoCanEdit']?.[_0x31236d(0x253)](this[_0x31236d(0x444)][_0x31236d(0x638)]))throw new m('Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.');let _0x446eef=!0x1;if(_0x337d73[_0x31236d(0x292)]?.['delete']===!0x0)_0x1b8dca[_0x31236d(0x328)]=_0x1b8dca['varedits'][_0x31236d(0xe1)](_0x99a8f2=>_0x99a8f2&&_0x337d73[_0x31236d(0x292)]&&_0x99a8f2[_0x31236d(0x6ae)]&&_0x337d73[_0x31236d(0x292)][_0x31236d(0x6ae)]&&_0x99a8f2[_0x31236d(0x6ae)]['toString']()!==_0x337d73[_0x31236d(0x292)][_0x31236d(0x6ae)]['toString']()),_0x446eef=!0x0;else{let _0x290b7c=_0x1b8dca[_0x31236d(0x328)][_0x31236d(0x509)](_0xa9530c=>_0xa9530c&&_0x337d73[_0x31236d(0x292)]&&_0xa9530c['_id']&&_0x337d73['varedit'][_0x31236d(0x6ae)]&&_0xa9530c[_0x31236d(0x6ae)][_0x31236d(0x30c)]()===_0x337d73[_0x31236d(0x292)][_0x31236d(0x6ae)][_0x31236d(0x30c)]());_0x290b7c?(_0x446eef=_0x290b7c[_0x31236d(0x294)]!==_0x337d73[_0x31236d(0x292)][_0x31236d(0x294)],Object[_0x31236d(0x14c)](_0x290b7c,_0x337d73[_0x31236d(0x292)])):(_0x1b8dca[_0x31236d(0x328)]['push'](_0x337d73[_0x31236d(0x292)]),_0x446eef=!0x0);}if(_0x446eef){_0x1b8dca[_0x31236d(0x328)]['sort']((_0x5617db,_0x40539a)=>_0x5617db[_0x31236d(0x294)]>_0x40539a[_0x31236d(0x294)]?0x1:_0x40539a['order']>_0x5617db['order']?-0x1:0x0);for(let _0x1979bc=0x0;_0x1979bc<_0x1b8dca['varedits'][_0x31236d(0x293)];_0x1979bc++)_0x1b8dca['varedits'][_0x1979bc]['order']=_0x1979bc+0x1;}let _0x4350af=await this[_0x31236d(0x4b2)]['flow'][_0x31236d(0x127)](_0x1b8dca[_0x31236d(0x6ae)],_0x1b8dca);if(!_0x4350af)throw new Error(_0x31236d(0x1b6));return _0x4350af;}catch(_0x402aca){let _0x3113e7=_0x31236d(0x547),_0x447b45=_0x402aca instanceof Error?_0x402aca['message']:typeof _0x402aca==_0x31236d(0x4c4)?JSON[_0x31236d(0x79e)](_0x402aca):_0x402aca,_0x584e0d=_0x3113e7+':\x20'+_0x447b45;throw this[_0x31236d(0x6c6)][_0x31236d(0x73d)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x31236d(0x17a)+_0x584e0d),new m(_0x584e0d);}}async['editFlowVariable'](_0x2f22c4){const _0x261b9f=a0_0x5ca8c7;try{if(this[_0x261b9f(0x6c6)][_0x261b9f(0x39b)](this[_0x261b9f(0x546)]+'\x20('+this[_0x261b9f(0x444)][_0x261b9f(0x638)]+_0x261b9f(0x76d)),!this[_0x261b9f(0x4b3)][_0x261b9f(0x634)]['find'](_0xfb390f=>_0xfb390f['_id']===_0x2f22c4['_id']))throw this[_0x261b9f(0x6c6)][_0x261b9f(0x39b)](this[_0x261b9f(0x546)]+'\x20('+this[_0x261b9f(0x444)][_0x261b9f(0x638)]+_0x261b9f(0x19e)+_0x2f22c4['_id']+'\x27\x20no\x20encontrado'),new m(_0x261b9f(0x2a6));let _0x434166=await this[_0x261b9f(0x4b2)]['flow'][_0x261b9f(0x51f)]({'where':{'_id':_0x2f22c4[_0x261b9f(0x6ae)]}});if(!_0x434166||!_0x434166['whoCanUse']?.[_0x261b9f(0x253)](this[_0x261b9f(0x444)]['wuid']))throw this[_0x261b9f(0x6c6)][_0x261b9f(0x73d)](this[_0x261b9f(0x546)]+'\x20('+this['instance']['wuid']+_0x261b9f(0x6c5)+_0x2f22c4['_id']+_0x261b9f(0x727)),new m(_0x261b9f(0x672)+_0x2f22c4[_0x261b9f(0x6ae)]+_0x261b9f(0x727));if(!_0x434166['whoCanEdit']?.[_0x261b9f(0x253)](this[_0x261b9f(0x444)]['wuid']))throw new m(_0x261b9f(0x2b7));_0x2f22c4[_0x261b9f(0x69b)]['name']=_0x2f22c4['variable']['name'][_0x261b9f(0x80a)](),_0x2f22c4['variable'][_0x261b9f(0x786)][_0x261b9f(0x43f)]('_')&&(_0x2f22c4[_0x261b9f(0x69b)][_0x261b9f(0x786)]=_0x2f22c4['variable']['name'][_0x261b9f(0x263)](0x1)),_0x2f22c4['variable']['name']=_0x2f22c4['variable']['name'][_0x261b9f(0x80a)]();let _0xd69632=_0x434166['variables'][_0x261b9f(0x509)](_0x2e4491=>_0x2e4491[_0x261b9f(0x786)]===_0x2f22c4[_0x261b9f(0x69b)]['name']);if(_0xd69632?.[_0x261b9f(0x3d0)]===!0x0)throw new Error('No\x20\x20permitido\x20editar\x20uma\x20varivel\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0x2f22c4[_0x261b9f(0x69b)]?.[_0x261b9f(0x5e3)]===!0x0){if(!_0xd69632)return{'message':_0x261b9f(0x806)};_0x434166[_0x261b9f(0x377)]=_0x434166['variables']['filter'](_0x164b15=>_0x164b15['name']!==_0x2f22c4['variable'][_0x261b9f(0x786)]);}else _0xd69632?Object[_0x261b9f(0x14c)](_0xd69632,_0x2f22c4[_0x261b9f(0x69b)]):_0x434166[_0x261b9f(0x377)]['push'](_0x2f22c4['variable']);let _0x9788dd=await this[_0x261b9f(0x4b2)][_0x261b9f(0x72d)]['updateOne'](_0x434166[_0x261b9f(0x6ae)],_0x434166);if(!_0x9788dd)throw new Error(_0x261b9f(0x1b6));return _0x9788dd;}catch(_0x3a3b1f){let _0x19291f=_0x261b9f(0x7ec),_0x2e2a25=_0x3a3b1f instanceof Error?_0x3a3b1f[_0x261b9f(0x319)]:typeof _0x3a3b1f==_0x261b9f(0x4c4)?JSON[_0x261b9f(0x79e)](_0x3a3b1f):_0x3a3b1f,_0x23cf59=_0x19291f+':\x20'+_0x2e2a25;throw this[_0x261b9f(0x6c6)]['error'](this[_0x261b9f(0x546)]+'\x20('+this['instance'][_0x261b9f(0x638)]+_0x261b9f(0x17a)+_0x23cf59),new m(_0x23cf59);}}async[a0_0x5ca8c7(0x702)](_0x3aad57){const _0x2a1ad6=a0_0x5ca8c7;let _0x3cf0d8=null;try{if(!this[_0x2a1ad6(0x4b3)]?.[_0x2a1ad6(0x2b0)]['enabled'])throw new m(_0x2a1ad6(0x470));this[_0x2a1ad6(0x6c6)][_0x2a1ad6(0x39b)](this[_0x2a1ad6(0x546)]+'\x20('+this[_0x2a1ad6(0x444)]['wuid']+_0x2a1ad6(0x45a));let _0xea5d20=(await this[_0x2a1ad6(0x322)]({'numbers':[_0x3aad57['remoteJid']]}))[0x0];if(!_0xea5d20[_0x2a1ad6(0x3a1)]&&!(0x0,w[_0x2a1ad6(0x3f5)])(_0xea5d20[_0x2a1ad6(0x801)])&&!_0xea5d20[_0x2a1ad6(0x801)][_0x2a1ad6(0x253)]('@broadcast'))throw _0x3cf0d8=JSON[_0x2a1ad6(0x79e)](_0xea5d20,null,0x2),new m(_0xea5d20);let _0x48bd75;if(_0x3aad57[_0x2a1ad6(0x786)][_0x2a1ad6(0x293)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x2a1ad6(0x418)](_0x3aad57[_0x2a1ad6(0x786)])?_0x48bd75=this['AutomateSystem'][_0x2a1ad6(0x634)][_0x2a1ad6(0x509)](_0x4aff75=>_0x4aff75[_0x2a1ad6(0x6ae)]===_0x3aad57['name']):_0x48bd75=this['AutomateSystem'][_0x2a1ad6(0x634)][_0x2a1ad6(0x509)](_0x1b123d=>_0x1b123d[_0x2a1ad6(0x786)]===_0x3aad57[_0x2a1ad6(0x786)]),!_0x48bd75)throw this[_0x2a1ad6(0x6c6)]['verbose'](this[_0x2a1ad6(0x546)]+'\x20('+this['instance']['wuid']+_0x2a1ad6(0x19e)+_0x3aad57[_0x2a1ad6(0x786)]+_0x2a1ad6(0x44e)),new m('Fluxo\x20no\x20encontrado\x20na\x20memria.');let _0x9eea26=await this[_0x2a1ad6(0x4b2)][_0x2a1ad6(0x72d)][_0x2a1ad6(0x51f)]({'where':{'_id':_0x48bd75[_0x2a1ad6(0x6ae)]}});if(!_0x9eea26||!_0x9eea26[_0x2a1ad6(0x719)]?.[_0x2a1ad6(0x253)](this['instance']['wuid']))throw this[_0x2a1ad6(0x6c6)][_0x2a1ad6(0x73d)](this[_0x2a1ad6(0x546)]+'\x20('+this[_0x2a1ad6(0x444)][_0x2a1ad6(0x638)]+'):\x20Flow\x20\x27'+_0x48bd75[_0x2a1ad6(0x6ae)]+_0x2a1ad6(0x727)),_0x3cf0d8='Flow\x20\x27'+_0x48bd75['_id']+_0x2a1ad6(0x727),new m(_0x3cf0d8);let _0x4c2651=await this[_0x2a1ad6(0x15c)](_0x9eea26,_0xea5d20['jid'],_0x3aad57['changeVariables']);if(_0x4c2651){this['logger'][_0x2a1ad6(0x39b)](this[_0x2a1ad6(0x546)]+'\x20('+this[_0x2a1ad6(0x444)][_0x2a1ad6(0x638)]+_0x2a1ad6(0x810));let _0x5a4252=await this['NextBlock'](_0x4c2651);return _0x5a4252&&await this['processblock'](_0x4c2651,_0x5a4252),{'message':_0x2a1ad6(0x5fd)+_0x3aad57[_0x2a1ad6(0x461)]};}}catch(_0x10efb4){if(this[_0x2a1ad6(0x6c6)]['error'](this[_0x2a1ad6(0x546)]+'\x20('+this[_0x2a1ad6(0x444)][_0x2a1ad6(0x638)]+_0x2a1ad6(0x419)+(_0x10efb4 instanceof Error?_0x10efb4[_0x2a1ad6(0x319)]:JSON[_0x2a1ad6(0x79e)](_0x10efb4,null,0x2))),_0x3cf0d8=_0x10efb4 instanceof Error?_0x10efb4[_0x2a1ad6(0x319)]:JSON[_0x2a1ad6(0x79e)](_0x10efb4,null,0x2),_0x3cf0d8)throw new m(_0x2a1ad6(0x4b5)+_0x3cf0d8);}}async[a0_0x5ca8c7(0x3b9)](_0x2fce8a,_0x1659a9,_0x1655d1){const _0x23e628=a0_0x5ca8c7;let _0x458a74=null;try{if(!this[_0x23e628(0x4b3)]?.[_0x23e628(0x2b0)][_0x23e628(0x3b1)])throw new m('Fluxos\x20no\x20esto\x20ativados');if(this[_0x23e628(0x6c6)][_0x23e628(0x39b)](this['instanceName']+'\x20('+this[_0x23e628(0x444)]['wuid']+_0x23e628(0x45a)),_0x1659a9){let _0x284557=(await this[_0x23e628(0x322)]({'numbers':[_0x1659a9]}))[0x0];if(!_0x284557['exists']&&!(0x0,w[_0x23e628(0x3f5)])(_0x284557['jid'])&&!_0x284557[_0x23e628(0x801)][_0x23e628(0x253)]('@broadcast'))throw _0x458a74=JSON[_0x23e628(0x79e)](_0x284557,null,0x2),new m(_0x284557);_0x1659a9=_0x284557[_0x23e628(0x801)];}else _0x1659a9||(_0x1659a9=(0x0,Y['v4'])());let _0x496087=await this[_0x23e628(0x4b2)][_0x23e628(0x72d)][_0x23e628(0x51f)]({'where':{'_id':_0x2fce8a}});if(!_0x496087||!_0x496087[_0x23e628(0x719)]?.[_0x23e628(0x253)](this[_0x23e628(0x444)][_0x23e628(0x638)]))throw this[_0x23e628(0x6c6)][_0x23e628(0x73d)](this['instanceName']+'\x20('+this['instance'][_0x23e628(0x638)]+_0x23e628(0x6c5)+_0x2fce8a+_0x23e628(0x727)),new m(_0x23e628(0x672)+_0x2fce8a+_0x23e628(0x727));let _0x35e574=await this[_0x23e628(0x15c)](_0x496087,_0x1659a9,null);if(_0x35e574){this[_0x23e628(0x6c6)][_0x23e628(0x39b)](this[_0x23e628(0x546)]+'\x20('+this[_0x23e628(0x444)][_0x23e628(0x638)]+_0x23e628(0x6b2));let _0x258990;if(_0x1655d1){let _0x572bcc=_0x35e574[_0x23e628(0x525)][_0x23e628(0x7ae)],_0x47f1c0=this[_0x23e628(0x67d)](_0x1655d1);Object[_0x23e628(0x14c)](_0x572bcc,_0x47f1c0),_0x35e574[_0x23e628(0x525)]['realVariables']=_0x572bcc,_0x258990={'error':!0x1,'apiResponse':_0x1655d1};}let _0x3d9ea1=await this['NextBlock'](_0x35e574);return _0x3d9ea1&&await this[_0x23e628(0x697)](_0x35e574,_0x3d9ea1),{'message':'Flow\x20iniciado'};}}catch(_0x19b499){if(this[_0x23e628(0x6c6)][_0x23e628(0x73d)](this['instanceName']+'\x20('+this['instance'][_0x23e628(0x638)]+_0x23e628(0x419)+(_0x19b499 instanceof Error?_0x19b499[_0x23e628(0x319)]:JSON[_0x23e628(0x79e)](_0x19b499,null,0x2))),_0x458a74=_0x19b499 instanceof Error?_0x19b499[_0x23e628(0x319)]:JSON[_0x23e628(0x79e)](_0x19b499,null,0x2),_0x458a74)throw new m(_0x23e628(0x4b5)+_0x458a74);}}async['closeExistingConversations'](_0xa2d57){const _0x5ca3ae=a0_0x5ca8c7;try{let _0x5b71a0={'remoteJid':_0xa2d57,'status':_0x5ca3ae(0x349)},_0x44c422={'status':'closed'},_0x477571=await this[_0x5ca3ae(0x4b2)][_0x5ca3ae(0x535)][_0x5ca3ae(0x466)](_0x5b71a0,_0x44c422,this[_0x5ca3ae(0x444)][_0x5ca3ae(0x638)]);return this[_0x5ca3ae(0x6c6)][_0x5ca3ae(0x39b)](this[_0x5ca3ae(0x546)]+'\x20('+this[_0x5ca3ae(0x444)][_0x5ca3ae(0x638)]+_0x5ca3ae(0x57d)),_0x477571;}catch(_0x192805){throw this[_0x5ca3ae(0x6c6)][_0x5ca3ae(0x73d)](this[_0x5ca3ae(0x546)]+'\x20('+this[_0x5ca3ae(0x444)]['wuid']+_0x5ca3ae(0x646)+_0x192805[_0x5ca3ae(0x319)]),_0x192805;}}async[a0_0x5ca8c7(0x15c)](_0x145db4,_0x1bfd1a,_0x121ba2){const _0x3ad5f7=a0_0x5ca8c7;this['logger'][_0x3ad5f7(0x39b)](this[_0x3ad5f7(0x546)]+'\x20('+this[_0x3ad5f7(0x444)][_0x3ad5f7(0x638)]+_0x3ad5f7(0x5fa)),await this[_0x3ad5f7(0x445)](_0x1bfd1a);try{let _0x1ca8f9=require('mongodb')[_0x3ad5f7(0xca)],_0x53e059=Date[_0x3ad5f7(0x494)](),_0x473ce5=_0x3ad5f7(0x282),_0x5dc931={},_0x40c944={},_0x2e219e=this[_0x3ad5f7(0x4b3)]['flows'][_0x3ad5f7(0x509)](_0x313a7f=>_0x313a7f['_id']===_0x145db4['_id']?.['toString']()),_0x29c1d7=_0x2e219e?.[_0x3ad5f7(0x6cd)]??_0x145db4[_0x3ad5f7(0x6cd)]??0x0,_0x431d0a=_0x2e219e?.[_0x3ad5f7(0x41b)]??_0x145db4['readMessages']??!0x1,_0x1e4c23={'flowId':_0x145db4[_0x3ad5f7(0x6ae)],..._0x145db4,'chatLog':null},_0x45cf42=await this['variablesToObject'](_0x1e4c23[_0x3ad5f7(0x377)]),_0x2bb362=await this[_0x3ad5f7(0x465)](_0x1bfd1a),_0x863e6b={..._0x45cf42,..._0x2bb362,'_remoteJid':_0x1bfd1a},_0x7c87b2={'lastReceivedMessage':_0x5dc931,'lastSendMessage':_0x40c944,'lastBlockId':_0x473ce5,'lastCondition':!0x0,'realVariables':_0x863e6b};_0x1e4c23[_0x3ad5f7(0x525)]=_0x7c87b2,_0x1e4c23['chatLog'][_0x3ad5f7(0x7ae)]={..._0x863e6b,..._0x121ba2},delete _0x1e4c23[_0x3ad5f7(0x6ae)],_0x1e4c23[_0x3ad5f7(0x6ae)]=new _0x1ca8f9(),_0x1e4c23[_0x3ad5f7(0x187)]=_0x53e059,_0x1e4c23[_0x3ad5f7(0x3e2)]=_0x3ad5f7(0x349),_0x1e4c23[_0x3ad5f7(0x461)]=_0x1bfd1a,_0x1e4c23['minutesToClose']=_0x29c1d7,_0x1e4c23[_0x3ad5f7(0x41b)]=_0x431d0a,_0x1e4c23[_0x3ad5f7(0x6ae)]=_0x145db4[_0x3ad5f7(0x6ae)];let _0xe4eaa7=await this[_0x3ad5f7(0x4b2)][_0x3ad5f7(0x535)][_0x3ad5f7(0x127)](_0x1e4c23['_id'],_0x1e4c23,this['instance'][_0x3ad5f7(0x638)]);return this[_0x3ad5f7(0x6c6)][_0x3ad5f7(0x39b)](this[_0x3ad5f7(0x546)]+'\x20('+this['instance']['wuid']+_0x3ad5f7(0x7aa)),_0xe4eaa7?_0x1e4c23:null;}catch(_0x188646){let _0xfc8d90=_0x3ad5f7(0x324),_0x3de0d8=_0x188646 instanceof Error?_0x188646[_0x3ad5f7(0x319)]:typeof _0x188646=='object'?JSON[_0x3ad5f7(0x79e)](_0x188646):_0x188646,_0x301ac5=_0xfc8d90+':\x20'+_0x3de0d8;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x3ad5f7(0x444)][_0x3ad5f7(0x638)]+_0x3ad5f7(0x17a)+_0x301ac5),new m(_0x301ac5);}}async[a0_0x5ca8c7(0x16d)](_0x3148cf){const _0x4567f9=a0_0x5ca8c7;try{this['logger'][_0x4567f9(0x39b)](this[_0x4567f9(0x546)]+'\x20('+this[_0x4567f9(0x444)][_0x4567f9(0x638)]+_0x4567f9(0xe8)),this[_0x4567f9(0x6c6)][_0x4567f9(0x39b)](this['instanceName']+'\x20('+this[_0x4567f9(0x444)]['wuid']+_0x4567f9(0x5be)+_0x3148cf);let _0x210a24={'where':{'_id':_0x3148cf}};return await this[_0x4567f9(0x4b2)][_0x4567f9(0x535)][_0x4567f9(0x51f)](_0x210a24,this['instance']['wuid']);}catch(_0xa51578){let _0x2511bd=_0x4567f9(0x7f8),_0x218cc2=_0xa51578 instanceof Error?_0xa51578[_0x4567f9(0x319)]:typeof _0xa51578==_0x4567f9(0x4c4)?JSON['stringify'](_0xa51578):_0xa51578,_0x56850a=_0x2511bd+':\x20'+_0x218cc2;throw this['logger']['error'](this[_0x4567f9(0x546)]+'\x20('+this[_0x4567f9(0x444)][_0x4567f9(0x638)]+_0x4567f9(0x17a)+_0x56850a),new m(_0x56850a);}}async[a0_0x5ca8c7(0x7f2)](_0x54e24b){const _0x41eb4a=a0_0x5ca8c7;try{return this[_0x41eb4a(0x6c6)]['verbose'](this[_0x41eb4a(0x546)]+'\x20('+this[_0x41eb4a(0x444)][_0x41eb4a(0x638)]+_0x41eb4a(0x346)),await this[_0x41eb4a(0x4b2)][_0x41eb4a(0x535)][_0x41eb4a(0x509)](_0x54e24b,this['instance'][_0x41eb4a(0x638)]);}catch(_0x2e4c87){let _0x4955dd=_0x41eb4a(0x3b7),_0x51afff=_0x2e4c87 instanceof Error?_0x2e4c87[_0x41eb4a(0x319)]:typeof _0x2e4c87==_0x41eb4a(0x4c4)?JSON[_0x41eb4a(0x79e)](_0x2e4c87):_0x2e4c87,_0x529998=_0x4955dd+':\x20'+_0x51afff;throw this[_0x41eb4a(0x6c6)]['error'](this['instanceName']+'\x20('+this[_0x41eb4a(0x444)][_0x41eb4a(0x638)]+_0x41eb4a(0x17a)+_0x529998),new m(_0x529998);}}async[a0_0x5ca8c7(0xce)](_0x42371e){const _0x30a19d=a0_0x5ca8c7;try{return this[_0x30a19d(0x6c6)][_0x30a19d(0x39b)](this[_0x30a19d(0x546)]+'\x20('+this[_0x30a19d(0x444)][_0x30a19d(0x638)]+'):\x20Deletando\x20conversa...'),this[_0x30a19d(0x6c6)][_0x30a19d(0x39b)](this[_0x30a19d(0x546)]+'\x20('+this[_0x30a19d(0x444)][_0x30a19d(0x638)]+_0x30a19d(0x47f)+_0x42371e),(await this[_0x30a19d(0x4b2)][_0x30a19d(0x535)]['deleteOne']({'where':{'_id':_0x42371e[_0x30a19d(0x6ae)]}},this[_0x30a19d(0x444)][_0x30a19d(0x638)]))[_0x30a19d(0x51b)]===0x0?{'message':_0x30a19d(0x78d)}:{'message':_0x30a19d(0xfd)};}catch(_0x4671c1){let _0x4286d0='Erro\x20ao\x20deletar\x20a\x20conversa',_0x1154f3=_0x4671c1 instanceof Error?_0x4671c1[_0x30a19d(0x319)]:typeof _0x4671c1==_0x30a19d(0x4c4)?JSON['stringify'](_0x4671c1):_0x4671c1,_0x486950=_0x4286d0+':\x20'+_0x1154f3;throw this[_0x30a19d(0x6c6)]['error'](this[_0x30a19d(0x546)]+'\x20('+this[_0x30a19d(0x444)]['wuid']+_0x30a19d(0x17a)+_0x486950),new m(_0x486950);}}async['editConversation'](_0x185ef7){const _0x50a3f0=a0_0x5ca8c7;try{let {_id:_0x45d687,chatLog:_0x2cc7d5,status:_0x2dbcd3}=_0x185ef7;if(!_0x45d687)return{'message':'O\x20campo\x20_id\x20\x20obrigatrio\x20para\x20editar\x20uma\x20conversa.'};let _0x5b4742={};if(_0x2dbcd3!==void 0x0&&(_0x5b4742[_0x50a3f0(0x3e2)]=_0x2dbcd3),Object[_0x50a3f0(0x818)](_0x5b4742)['length']===0x0)return{'message':_0x50a3f0(0x4a2)};let _0x1d18fe=await this[_0x50a3f0(0x4b2)]['flowConversation'][_0x50a3f0(0x127)](_0x45d687,_0x5b4742,this[_0x50a3f0(0x444)][_0x50a3f0(0x638)]);return _0x1d18fe||{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20voc\x20no\x20\x20o\x20proprietrio\x20da\x20conversa.'};}catch(_0x2d8b9d){let _0x142904=_0x50a3f0(0x769),_0x87bf71=_0x2d8b9d instanceof Error?_0x2d8b9d['message']:typeof _0x2d8b9d==_0x50a3f0(0x4c4)?JSON[_0x50a3f0(0x79e)](_0x2d8b9d):_0x2d8b9d,_0x32565b=_0x142904+':\x20'+_0x87bf71;throw this[_0x50a3f0(0x6c6)][_0x50a3f0(0x73d)](this[_0x50a3f0(0x546)]+'\x20('+this[_0x50a3f0(0x444)][_0x50a3f0(0x638)]+_0x50a3f0(0x17a)+_0x32565b),new m(_0x32565b);}}async[a0_0x5ca8c7(0x2ec)](_0x1924b4){const _0x3bd803=a0_0x5ca8c7;try{_0x1924b4[_0x3bd803(0x6ae)]=this[_0x3bd803(0x543)](_0x1924b4[_0x3bd803(0x6ae)]);let _0x45f149=await this[_0x3bd803(0x4b2)][_0x3bd803(0x5f1)][_0x3bd803(0x51f)]({'where':{'_id':_0x1924b4[_0x3bd803(0x6ae)]}},this[_0x3bd803(0x444)][_0x3bd803(0x638)]);if(!_0x45f149)throw new m(_0x3bd803(0x814));let {_id:_0x41883d,leadInfo:_0x185708}=_0x1924b4;if(!_0x41883d)throw new Error('O\x20campo\x20id\x20\x20obrigatrio\x20para\x20editar/criar\x20um\x20chat.');if(_0x1924b4[_0x3bd803(0x5e3)]===_0x3bd803(0x793))return await this[_0x3bd803(0x773)](_0x1924b4[_0x3bd803(0x6ae)]),await this[_0x3bd803(0x4b2)][_0x3bd803(0x5f1)][_0x3bd803(0x5e3)]({'where':{'_id':_0x1924b4[_0x3bd803(0x6ae)]}},this[_0x3bd803(0x444)][_0x3bd803(0x638)]),await this[_0x3bd803(0x4b2)][_0x3bd803(0x319)][_0x3bd803(0x5e3)]({'where':{'key':{'remoteJid':_0x1924b4[_0x3bd803(0x6ae)]}}},this[_0x3bd803(0x444)][_0x3bd803(0x638)]),_0x1924b4=await this[_0x3bd803(0x4b2)][_0x3bd803(0x5f1)]['updateOne']({'where':{'_id':_0x1924b4[_0x3bd803(0x6ae)]}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x3bd803(0x638)]),q(this[_0x3bd803(0x546)],_0x3bd803(0x2ea),{'chat':_0x1924b4}),{'message':_0x3bd803(0x49b)};if(_0x1924b4['delete']===_0x3bd803(0x6ba))return await this[_0x3bd803(0x4b2)][_0x3bd803(0x319)][_0x3bd803(0x5e3)]({'where':{'key':{'remoteJid':_0x1924b4[_0x3bd803(0x6ae)]}}},this[_0x3bd803(0x444)][_0x3bd803(0x638)]),_0x1924b4=await this['repository']['chat'][_0x3bd803(0x127)]({'where':{'_id':_0x1924b4[_0x3bd803(0x6ae)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x3bd803(0x444)][_0x3bd803(0x638)]),q(this['instanceName'],_0x3bd803(0x2ea),{'chat':_0x1924b4}),{'message':_0x3bd803(0x1a2)};let _0x25c658=(_0x21caaf,_0x7cc855,_0x55818e)=>{const _0x133903=_0x3bd803;_0x21caaf&&_0x55818e[_0x133903(0x57a)](_0x4c5aeb=>{const _0x435640=_0x133903;_0x21caaf[_0x4c5aeb]!==void 0x0&&(_0x7cc855[_0x435640(0x2af)+_0x4c5aeb]=_0x21caaf[_0x4c5aeb]);});},_0x3db99c={};if('muteEndTime'in _0x1924b4&&(this[_0x3bd803(0x6c6)][_0x3bd803(0x39b)](this['instanceName']+'\x20('+this[_0x3bd803(0x444)][_0x3bd803(0x638)]+_0x3bd803(0x473)+_0x1924b4[_0x3bd803(0x6ae)]),_0x1924b4[_0x3bd803(0x605)]=_0x1924b4[_0x3bd803(0x605)]===0x0?null:-0x1,await this[_0x3bd803(0x158)]['chatModify']({'mute':_0x1924b4[_0x3bd803(0x605)]},_0x1924b4['_id']),_0x3db99c['muteEndTime']=Number(_0x1924b4[_0x3bd803(0x605)])),_0x185708&&(_0x25c658(_0x185708,_0x3db99c,[_0x3bd803(0x182),_0x3bd803(0x2e0),'email',_0x3bd803(0x4e7),_0x3bd803(0x3e2),_0x3bd803(0x520),_0x3bd803(0x2a7),_0x3bd803(0x3e6),'responsavelid',_0x3bd803(0xc9),_0x3bd803(0x284)]),Array[_0x3bd803(0xdc)](_0x185708[_0x3bd803(0x34f)])&&(_0x3db99c[_0x3bd803(0x385)]=_0x185708[_0x3bd803(0x34f)]['map'](_0x5c9021=>({'_id':_0x5c9021['_id'],'value':_0x5c9021[_0x3bd803(0x76f)]}))),_0x1924b4['leadInfo'][_0x3bd803(0xc9)]!==void 0x0)){let _0x2c9a59=await this[_0x3bd803(0x4b2)][_0x3bd803(0x6a2)][_0x3bd803(0x509)]({'where':{}},this[_0x3bd803(0x444)]['wuid']),_0xd2e449=new Set(_0x1924b4[_0x3bd803(0x3d0)]['etiquetas']||[]),_0x3f0245=new Set(_0x1924b4['leadInfo'][_0x3bd803(0xc9)]),_0x5403c6=new Set(_0x2c9a59[_0x3bd803(0x726)](_0x993447=>_0x993447[_0x3bd803(0x6ae)])),_0x3a929b=[..._0x3f0245][_0x3bd803(0xe1)](_0x1f25e0=>!_0xd2e449['has'](_0x1f25e0)&&_0x5403c6[_0x3bd803(0x183)](_0x1f25e0)),_0x5587b0=[..._0xd2e449][_0x3bd803(0xe1)](_0x5626f8=>!_0x3f0245[_0x3bd803(0x183)](_0x5626f8));if(_0x3db99c['leadInfo.etiquetas']=[..._0xd2e449],_0x45f149&&!_0x45f149[_0x3bd803(0x4ee)]){for(let _0x465712 of _0x3a929b)await this[_0x3bd803(0x28f)](_0x465712,_0x1924b4['_id']),_0xd2e449['add'](_0x465712);for(let _0x1ba98c of _0x5587b0)await this['RemoveChatLabel'](_0x1ba98c,_0x1924b4[_0x3bd803(0x6ae)]),_0xd2e449[_0x3bd803(0x5e3)](_0x1ba98c);}}if(_0x1924b4[_0x3bd803(0x2c2)]!==void 0x0&&(_0x3db99c[_0x3bd803(0x2c2)]=Number(_0x1924b4['unreadcount'])),Object[_0x3bd803(0x818)](_0x3db99c)['length']===0x0)throw new Error(_0x3bd803(0x4a2));let _0x2f71b4=await this['repository'][_0x3bd803(0x5f1)][_0x3bd803(0x127)]({'where':{'_id':_0x1924b4[_0x3bd803(0x6ae)]}},_0x3db99c,this[_0x3bd803(0x444)][_0x3bd803(0x638)]);return _0x2f71b4&&q(this[_0x3bd803(0x546)],_0x3bd803(0x2ea),{'chat':_0x2f71b4}),_0x2f71b4?(this[_0x3bd803(0x6c6)][_0x3bd803(0x39b)](this[_0x3bd803(0x546)]+'\x20('+this[_0x3bd803(0x444)][_0x3bd803(0x638)]+_0x3bd803(0x17a)+JSON[_0x3bd803(0x79e)](_0x2f71b4,null,0x2)),_0x2f71b4):{'message':_0x3bd803(0x196)};}catch(_0x3f4be2){let _0x2c7317=_0x3bd803(0x693),_0x33ba3d=_0x3f4be2 instanceof Error?_0x3f4be2['message']:typeof _0x3f4be2==_0x3bd803(0x4c4)?JSON[_0x3bd803(0x79e)](_0x3f4be2):_0x3f4be2,_0x1090f3=_0x2c7317+':\x20'+_0x33ba3d;throw this[_0x3bd803(0x6c6)][_0x3bd803(0x73d)](this['instanceName']+'\x20('+this['instance'][_0x3bd803(0x638)]+_0x3bd803(0x17a)+_0x1090f3),new m(_0x1090f3);}}async['AddChatLabel'](_0x3bd33d,_0x354aac){const _0x18a5a5=a0_0x5ca8c7;try{await this[_0x18a5a5(0x158)][_0x18a5a5(0x4e0)](_0x354aac,_0x3bd33d),this[_0x18a5a5(0x6c6)][_0x18a5a5(0x611)](this[_0x18a5a5(0x546)]+'\x20('+this[_0x18a5a5(0x444)][_0x18a5a5(0x638)]+_0x18a5a5(0x568)+_0x3bd33d+_0x18a5a5(0x112)+_0x354aac+_0x18a5a5(0x3a6));}catch(_0x35ba90){this[_0x18a5a5(0x6c6)]['error']('Erro\x20ao\x20adicionar\x20label\x20'+_0x3bd33d+'\x20ao\x20chat\x20'+_0x354aac+':\x20'+_0x35ba90);}}async[a0_0x5ca8c7(0x5cc)](_0x4bf1f8,_0x331b2f){const _0x20ba07=a0_0x5ca8c7;try{await this[_0x20ba07(0x158)]['removeChatLabel'](_0x331b2f,_0x4bf1f8),this[_0x20ba07(0x6c6)]['info'](this['instanceName']+'\x20('+this[_0x20ba07(0x444)][_0x20ba07(0x638)]+_0x20ba07(0x568)+_0x4bf1f8+_0x20ba07(0x46e)+_0x331b2f+_0x20ba07(0x3a6));}catch(_0x51d432){this[_0x20ba07(0x6c6)][_0x20ba07(0x73d)](_0x20ba07(0x146)+_0x4bf1f8+_0x20ba07(0x38c)+_0x331b2f+':\x20'+_0x51d432);}}async['updateAgent'](_0x57a13c){const _0x24d8cb=a0_0x5ca8c7;try{let _0x33b0cd=await this[_0x24d8cb(0x4b2)][_0x24d8cb(0xec)][_0x24d8cb(0x30a)](this['instance'][_0x24d8cb(0x638)]),_0x578d34=_0x57a13c[_0x24d8cb(0x6ae)]?_0x33b0cd[_0x24d8cb(0x737)][_0x24d8cb(0x3aa)](_0x3ac123=>_0x3ac123[_0x24d8cb(0x6ae)]===_0x57a13c[_0x24d8cb(0x6ae)]):-0x1;if(_0x57a13c[_0x24d8cb(0x5e3)]&&_0x578d34>-0x1)_0x33b0cd[_0x24d8cb(0x737)][_0x24d8cb(0x2de)](_0x578d34,0x1);else{if(_0x578d34>-0x1){let _0x20db17=_0x33b0cd[_0x24d8cb(0x737)][_0x578d34];_0x57a13c[_0x24d8cb(0x617)]&&(_0x20db17[_0x24d8cb(0x617)]=_0x57a13c[_0x24d8cb(0x617)]),_0x57a13c[_0x24d8cb(0x786)]&&(_0x20db17[_0x24d8cb(0x786)]=_0x57a13c[_0x24d8cb(0x786)]),_0x57a13c[_0x24d8cb(0x232)]&&(_0x20db17['email']=_0x57a13c[_0x24d8cb(0x232)]),_0x57a13c['role']&&(_0x20db17[_0x24d8cb(0x5d2)]=_0x57a13c['role']);}else _0x33b0cd[_0x24d8cb(0x737)][_0x24d8cb(0x7cb)]({'_id':_0x57a13c[_0x24d8cb(0x6ae)]||new we[(_0x24d8cb(0x180))][(_0x24d8cb(0x1c5))][(_0x24d8cb(0xca))]()[_0x24d8cb(0x30c)](),'fone':_0x57a13c[_0x24d8cb(0x617)],'name':_0x57a13c[_0x24d8cb(0x786)],'email':_0x57a13c['email'],'role':_0x57a13c[_0x24d8cb(0x5d2)]});}let _0x3e4697={'agents':_0x33b0cd[_0x24d8cb(0x737)]},_0x270a95=await this[_0x24d8cb(0x4b2)][_0x24d8cb(0xec)][_0x24d8cb(0x13d)](_0x3e4697,this[_0x24d8cb(0x444)][_0x24d8cb(0x638)]);return this[_0x24d8cb(0x4b3)]=_0x270a95,this['logger'][_0x24d8cb(0x39b)](this['instanceName']+'\x20('+this['instance'][_0x24d8cb(0x638)]+_0x24d8cb(0x264)),this[_0x24d8cb(0x6c6)][_0x24d8cb(0x39b)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x24d8cb(0x17a)+this[_0x24d8cb(0x4b3)]),_0x270a95;}catch(_0x36d890){let _0x1b1ef9=_0x24d8cb(0x62a),_0x5d42de=_0x36d890 instanceof Error?_0x36d890[_0x24d8cb(0x319)]:typeof _0x36d890==_0x24d8cb(0x4c4)?JSON['stringify'](_0x36d890):_0x36d890,_0x320757=_0x1b1ef9+':\x20'+_0x5d42de;throw this['logger'][_0x24d8cb(0x73d)](this[_0x24d8cb(0x546)]+'\x20('+this[_0x24d8cb(0x444)][_0x24d8cb(0x638)]+_0x24d8cb(0x17a)+_0x320757),new m(_0x320757);}}async['updateCustomFields'](_0x44f5a2){const _0xa7d80a=a0_0x5ca8c7;try{let _0x497952=await this['repository'][_0xa7d80a(0xec)][_0xa7d80a(0x30a)](this['instance']['wuid']),_0x243cc0=_0x44f5a2[_0xa7d80a(0x6ae)]?_0x497952[_0xa7d80a(0x34f)]['findIndex'](_0x2a7107=>_0x2a7107[_0xa7d80a(0x6ae)]===_0x44f5a2[_0xa7d80a(0x6ae)]):-0x1,_0x4fb342=!0x1,_0x3bfb6f=_0x497952[_0xa7d80a(0x34f)][_0xa7d80a(0xf8)](_0x21a300=>_0x21a300[_0xa7d80a(0x294)]===_0x44f5a2[_0xa7d80a(0x294)]);if(_0x44f5a2[_0xa7d80a(0x5e3)]&&_0x243cc0>-0x1)_0x497952['customFields'][_0xa7d80a(0x2de)](_0x243cc0,0x1),_0x4fb342=!0x0;else{if(_0x243cc0>-0x1){if(_0x497952[_0xa7d80a(0x34f)]['some'](_0x4cd069=>_0x4cd069[_0xa7d80a(0x786)]===_0x44f5a2[_0xa7d80a(0x786)]&&_0x4cd069[_0xa7d80a(0x6ae)]!==_0x44f5a2[_0xa7d80a(0x6ae)]))throw new Error(_0xa7d80a(0x630));let _0x454923=_0x497952[_0xa7d80a(0x34f)][_0x243cc0];_0x44f5a2['order']&&(_0x3bfb6f||!Number[_0xa7d80a(0x5a7)](_0x44f5a2[_0xa7d80a(0x294)]))&&(_0x454923['order']=_0x44f5a2[_0xa7d80a(0x294)],_0x4fb342=!0x0),_0x44f5a2['name']&&(_0x454923[_0xa7d80a(0x786)]=_0x44f5a2[_0xa7d80a(0x786)]);}else{if(_0x497952['customFields'][_0xa7d80a(0xf8)](_0x294569=>_0x294569['name']===_0x44f5a2[_0xa7d80a(0x786)]&&_0x294569[_0xa7d80a(0x6ae)]!==_0x44f5a2[_0xa7d80a(0x6ae)]))throw new Error('Nome\x20do\x20campo\x20personalizado\x20j\x20existe.');_0x497952[_0xa7d80a(0x34f)]['push']({'_id':_0x44f5a2[_0xa7d80a(0x6ae)]||new we['default'][(_0xa7d80a(0x1c5))][(_0xa7d80a(0xca))]()['toString'](),'order':_0x44f5a2['order'],'name':_0x44f5a2[_0xa7d80a(0x786)]}),_0x4fb342=!0x0;}}if(_0x4fb342){_0x497952[_0xa7d80a(0x34f)]['sort']((_0x4fd61b,_0x338686)=>_0x4fd61b[_0xa7d80a(0x294)]>_0x338686['order']?0x1:_0x338686['order']>_0x4fd61b[_0xa7d80a(0x294)]?-0x1:0x0);for(let _0x23a889=0x0;_0x23a889<_0x497952[_0xa7d80a(0x34f)][_0xa7d80a(0x293)];_0x23a889++)_0x497952['customFields'][_0x23a889][_0xa7d80a(0x294)]=_0x23a889+0x1;}let _0x5cc9e1=await this[_0xa7d80a(0x4b2)][_0xa7d80a(0xec)]['update'](_0x497952,this[_0xa7d80a(0x444)][_0xa7d80a(0x638)]);return this['AutomateSystem']=_0x5cc9e1,this[_0xa7d80a(0x6c6)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0xa7d80a(0x638)]+_0xa7d80a(0x100)),this['logger'][_0xa7d80a(0x39b)](this[_0xa7d80a(0x546)]+'\x20('+this[_0xa7d80a(0x444)]['wuid']+_0xa7d80a(0x17a)+this['AutomateSystem']),_0x5cc9e1;}catch(_0x26fbe4){let _0x46ca9b='Erro\x20ao\x20tentar\x20updateCustomFields',_0x5f2efb=_0x26fbe4 instanceof Error?_0x26fbe4[_0xa7d80a(0x319)]:typeof _0x26fbe4=='object'?JSON[_0xa7d80a(0x79e)](_0x26fbe4):_0x26fbe4,_0x30ae3d=_0x46ca9b+':\x20'+_0x5f2efb;throw this[_0xa7d80a(0x6c6)][_0xa7d80a(0x73d)](this[_0xa7d80a(0x546)]+'\x20('+this['instance']['wuid']+_0xa7d80a(0x17a)+_0x30ae3d),new m(_0x30ae3d);}}async[a0_0x5ca8c7(0x53a)](_0xa68412){const _0x19466c=a0_0x5ca8c7;try{let _0x19b370=await this[_0x19466c(0x4b2)][_0x19466c(0xec)][_0x19466c(0x30a)](this['instance'][_0x19466c(0x638)]),_0x277f8e=_0x19b370?.[_0x19466c(0x433)]?.[_0x19466c(0x3aa)](_0x2939b3=>_0x2939b3['_id']===_0xa68412?.[_0x19466c(0x6ae)]);if(_0xa68412?.['delete'])_0x277f8e>-0x1&&_0x19b370?.[_0x19466c(0x433)]?.[_0x19466c(0x2de)](_0x277f8e,0x1);else{if(_0x277f8e>-0x1){let _0x5abe09=_0x19b370[_0x19466c(0x433)][_0x277f8e];_0x5abe09[_0x19466c(0x294)]=_0xa68412?.[_0x19466c(0x294)]||_0x5abe09[_0x19466c(0x294)],_0x5abe09[_0x19466c(0x566)]=_0xa68412?.[_0x19466c(0x566)]||_0x5abe09[_0x19466c(0x566)],_0x5abe09['message']=_0xa68412?.[_0x19466c(0x319)]||_0x5abe09[_0x19466c(0x319)];}else{let _0x365af0={'_id':_0xa68412?.['_id']||new we['default'][(_0x19466c(0x1c5))][(_0x19466c(0xca))]()[_0x19466c(0x30c)](),'order':_0xa68412?.[_0x19466c(0x294)],'command':_0xa68412?.[_0x19466c(0x566)],'message':_0xa68412?.[_0x19466c(0x319)]};_0x19b370?.[_0x19466c(0x433)]?.[_0x19466c(0x7cb)](_0x365af0);}}_0x19b370?.['autoCompleteMessages']?.['sort']((_0xa825bb,_0x19031c)=>_0xa825bb[_0x19466c(0x294)]-_0x19031c[_0x19466c(0x294)]);let _0x48cd87=await this[_0x19466c(0x4b2)][_0x19466c(0xec)]['update'](_0x19b370,this[_0x19466c(0x444)][_0x19466c(0x638)]);return this[_0x19466c(0x4b3)]=_0x48cd87,this[_0x19466c(0x6c6)]['verbose'](this[_0x19466c(0x546)]+'\x20('+this[_0x19466c(0x444)]['wuid']+_0x19466c(0x100)),_0x48cd87;}catch(_0x33e0a2){let _0x4e05ac=_0x19466c(0x3c1),_0x5b270d=_0x33e0a2 instanceof Error?_0x33e0a2['message']:typeof _0x33e0a2==_0x19466c(0x4c4)?JSON[_0x19466c(0x79e)](_0x33e0a2):_0x33e0a2,_0x4b731c=_0x4e05ac+':\x20'+_0x5b270d;throw this[_0x19466c(0x6c6)][_0x19466c(0x73d)](this[_0x19466c(0x546)]+'\x20('+this[_0x19466c(0x444)][_0x19466c(0x638)]+'):\x20'+_0x4b731c),new m(_0x4b731c);}}async[a0_0x5ca8c7(0x277)](_0x1e583c){const _0x17e9f9=a0_0x5ca8c7;try{let _0x5653e3=await this[_0x17e9f9(0x4b2)][_0x17e9f9(0xec)]['findOrCreate'](this[_0x17e9f9(0x444)][_0x17e9f9(0x638)]);if(!_0x5653e3)throw new Error('No\x20foi\x20possvel\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automao.');let _0xf0a207={'_id':_0x5653e3[_0x17e9f9(0x6ae)],'flowConfig':{'enabled':_0x1e583c[_0x17e9f9(0x3b1)]??_0x5653e3[_0x17e9f9(0x2b0)]['enabled'],'ignoreGroups':_0x1e583c['ignoreGroups']??_0x5653e3['flowConfig']['ignoreGroups'],'stopConversation':_0x1e583c['stopConversation'][_0x17e9f9(0x80a)]()??_0x5653e3[_0x17e9f9(0x2b0)]['stopConversation'][_0x17e9f9(0x80a)](),'stopMinutes':_0x1e583c['stopMinutes']??_0x5653e3[_0x17e9f9(0x2b0)]['stopMinutes'],'stopWhenYouSendMsg':_0x1e583c[_0x17e9f9(0xe7)]??_0x5653e3['flowConfig'][_0x17e9f9(0xe7)]}},_0x526f1e=await this[_0x17e9f9(0x4b2)][_0x17e9f9(0xec)]['update'](_0xf0a207,this[_0x17e9f9(0x444)][_0x17e9f9(0x638)]);return this[_0x17e9f9(0x4b3)]=_0x526f1e,this[_0x17e9f9(0x6c6)][_0x17e9f9(0x39b)](this[_0x17e9f9(0x546)]+'\x20('+this[_0x17e9f9(0x444)][_0x17e9f9(0x638)]+_0x17e9f9(0x264)),this['logger'][_0x17e9f9(0x39b)](this[_0x17e9f9(0x546)]+'\x20('+this[_0x17e9f9(0x444)][_0x17e9f9(0x638)]+_0x17e9f9(0x17a)+this['AutomateSystem']),setTimeout(()=>this[_0x17e9f9(0x629)](),0x7d0),_0x526f1e;}catch(_0x2f3602){let _0x7d09a4=_0x17e9f9(0x323),_0x384dc5=_0x2f3602 instanceof Error?_0x2f3602[_0x17e9f9(0x319)]:typeof _0x2f3602=='object'?JSON[_0x17e9f9(0x79e)](_0x2f3602):_0x2f3602,_0x49eecf=_0x7d09a4+':\x20'+_0x384dc5;throw this['logger']['error'](this[_0x17e9f9(0x546)]+'\x20('+this[_0x17e9f9(0x444)][_0x17e9f9(0x638)]+'):\x20'+_0x49eecf),new m(_0x49eecf);}}async[a0_0x5ca8c7(0x280)](){const _0x2205c8=a0_0x5ca8c7;try{let _0x19e754=await this[_0x2205c8(0x4b2)][_0x2205c8(0xec)]['findOrCreate'](this[_0x2205c8(0x444)][_0x2205c8(0x638)]);return this[_0x2205c8(0x4b3)]=_0x19e754,_0x19e754;}catch(_0x3a54b6){let _0x33055b=_0x2205c8(0x4ba),_0x393020=_0x3a54b6 instanceof Error?_0x3a54b6[_0x2205c8(0x319)]:typeof _0x3a54b6==_0x2205c8(0x4c4)?JSON[_0x2205c8(0x79e)](_0x3a54b6):_0x3a54b6,_0x17f2f4=_0x33055b+':\x20'+_0x393020;throw this[_0x2205c8(0x6c6)][_0x2205c8(0x73d)](this[_0x2205c8(0x546)]+'\x20('+this[_0x2205c8(0x444)]['wuid']+_0x2205c8(0x17a)+_0x17f2f4),new m(_0x17f2f4);}}async[a0_0x5ca8c7(0x4d7)](){const _0x3bf814=a0_0x5ca8c7;this['instance'][_0x3bf814(0x153)][_0x3bf814(0x3b4)]&&clearTimeout(this[_0x3bf814(0x444)][_0x3bf814(0x153)][_0x3bf814(0x3b4)]),this[_0x3bf814(0x444)][_0x3bf814(0x153)][_0x3bf814(0x3b4)]=setTimeout(()=>{const _0x468942=_0x3bf814;this[_0x468942(0x7ff)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x5ca8c7(0x7ff)](){const _0x32c072=a0_0x5ca8c7;Date['now']()-this[_0x32c072(0x444)][_0x32c072(0x153)][_0x32c072(0x252)]>=0x1d4c0&&(this['logger'][_0x32c072(0x39b)](this['instanceName']+'\x20('+this[_0x32c072(0x444)][_0x32c072(0x638)]+_0x32c072(0x70b)),this[_0x32c072(0x444)][_0x32c072(0x153)][_0x32c072(0x625)]=null,this[_0x32c072(0x444)]['ScheduleMessage']['lastSend']=0x0,this['instance'][_0x32c072(0x153)]['delayMessage']=0x0,this[_0x32c072(0x358)]=null,this[_0x32c072(0x7a4)]=null,await this['scheduleNextCheck']());}async[a0_0x5ca8c7(0x629)](){const _0x536eea=a0_0x5ca8c7;let _0x4e22c7=!0x1;this['nextMessageId']=null,this['processUUID']=(0x0,Y['v4'])(),await this['transformScheduledMessagesByType']();let _0x2491de=()=>{const _0x17756b=a0_0x5cfa;this[_0x17756b(0x6c6)]['verbose'](this[_0x17756b(0x546)]+'\x20('+this[_0x17756b(0x444)][_0x17756b(0x638)]+'):\x20this.processingGroup_id:\x20'+this[_0x17756b(0x444)][_0x17756b(0x153)]['processingGroup_id']+'\x20saindo\x20da\x20funo');},_0x2bdc50=async()=>{const _0x2c4bba=a0_0x5cfa;this[_0x2c4bba(0x6c6)][_0x2c4bba(0x39b)](this[_0x2c4bba(0x546)]+'\x20('+this[_0x2c4bba(0x444)][_0x2c4bba(0x638)]+_0x2c4bba(0x3d1));let _0xf4b87a=new Date(Date[_0x2c4bba(0x494)]()-0xc*0x3c*0x3c*0x3e8),_0xd166d1={'where':{'status':{'$in':[_0x2c4bba(0x771),_0x2c4bba(0xe3)]},'$or':[{'when':{'$lte':new Date(),'$gte':_0xf4b87a}},{'when':0x0}]}};this[_0x2c4bba(0x6c6)][_0x2c4bba(0x39b)](this[_0x2c4bba(0x546)]+'\x20('+this[_0x2c4bba(0x444)][_0x2c4bba(0x638)]+'):\x20Query\x20para\x20busca:\x20'+JSON[_0x2c4bba(0x79e)](_0xd166d1));let _0x4ac5d6=await this[_0x2c4bba(0x4b2)]['scheduleMessage'][_0x2c4bba(0x509)](_0xd166d1,this[_0x2c4bba(0x444)]['wuid']);return this[_0x2c4bba(0x6c6)][_0x2c4bba(0x39b)](this[_0x2c4bba(0x546)]+'\x20('+this['instance'][_0x2c4bba(0x638)]+_0x2c4bba(0x71a)+_0x4ac5d6[_0x2c4bba(0x293)]),_0x4ac5d6;},_0x529161=async _0x1526b0=>{const _0x4bd11a=a0_0x5cfa;let _0x5996a2=(await this[_0x4bd11a(0x4b2)][_0x4bd11a(0x1c4)][_0x4bd11a(0x46a)](_0x1526b0,this[_0x4bd11a(0x444)]['wuid']))[_0x4bd11a(0x6ba)]['filter'](_0x17eb00=>!_0x17eb00[_0x4bd11a(0x2bd)]);return _0x5996a2[_0x4bd11a(0x293)]===0x0?null:_0x5996a2[_0x4bd11a(0x6f8)]((_0x3dc92a,_0x25e588)=>(_0x3dc92a[_0x4bd11a(0x294)]??Number[_0x4bd11a(0x68a)])<(_0x25e588[_0x4bd11a(0x294)]??Number[_0x4bd11a(0x68a)])?_0x3dc92a:_0x25e588,_0x5996a2[0x0]);},_0x564da9=async _0x2e6c5a=>{const _0x2fefa0=a0_0x5cfa;let _0x1dbd80=Math[_0x2fefa0(0x76b)](Math[_0x2fefa0(0x487)]()*0x1389)+0xbb8;for(let _0x4af88f of _0x2e6c5a){let _0x5d40e6={'_id':_0x4af88f[_0x2fefa0(0x6ae)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x2fefa0(0x494)]()-0x2710}}]},_0x68ece1={'startSend':Date[_0x2fefa0(0x494)](),'processUUID':this[_0x2fefa0(0x7a4)]};if(!await this[_0x2fefa0(0x4b2)][_0x2fefa0(0x1c4)][_0x2fefa0(0x127)](_0x5d40e6,_0x68ece1,this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]))return;if(!this[_0x2fefa0(0x444)][_0x2fefa0(0x153)][_0x2fefa0(0x275)]){this[_0x2fefa0(0x6c6)][_0x2fefa0(0x39b)](this[_0x2fefa0(0x546)]+'\x20('+this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]+_0x2fefa0(0x54e));break;}if(!this[_0x2fefa0(0x358)]){let _0x3bb370=await _0x529161(_0x4af88f[_0x2fefa0(0x6ae)]);this[_0x2fefa0(0x358)]=_0x3bb370?_0x3bb370[_0x2fefa0(0x6ae)]:null,_0x4e22c7=!this['nextMessageId'];}for(;!_0x4e22c7;){if(await this[_0x2fefa0(0x4d7)](),!this[_0x2fefa0(0x358)]){let _0xa5f9e3=await _0x529161(_0x4af88f[_0x2fefa0(0x6ae)]);if(!_0xa5f9e3){_0x4e22c7=!0x0;break;}this[_0x2fefa0(0x358)]=_0xa5f9e3[_0x2fefa0(0x6ae)];}let _0x184ecd=_0x4af88f['messages'][_0x2fefa0(0x509)](_0x19912f=>_0x19912f[_0x2fefa0(0x6ae)]===this['nextMessageId']);if(!_0x184ecd){_0x4e22c7=!0x0;break;}if(this['nextMessageId']&&this[_0x2fefa0(0x358)]!==_0x184ecd[_0x2fefa0(0x6ae)]){this[_0x2fefa0(0x6c6)][_0x2fefa0(0x39b)](this[_0x2fefa0(0x546)]+'\x20('+this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]+_0x2fefa0(0x70c)+_0x184ecd[_0x2fefa0(0x6ae)]+_0x2fefa0(0x306));break;}if(this['instance'][_0x2fefa0(0x153)][_0x2fefa0(0x252)]=Date[_0x2fefa0(0x494)](),this[_0x2fefa0(0x444)][_0x2fefa0(0x153)][_0x2fefa0(0x386)]===_0x184ecd['_id']){this[_0x2fefa0(0x6c6)]['error'](this['instanceName']+'\x20('+this[_0x2fefa0(0x444)]['wuid']+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20para\x20'+_0x184ecd[_0x2fefa0(0x6ae)]+'.\x20Removendo\x20da\x20lista\x20de\x20tentativas.');break;}if(this[_0x2fefa0(0x444)][_0x2fefa0(0x153)][_0x2fefa0(0x386)]=_0x184ecd[_0x2fefa0(0x6ae)],_0x184ecd[_0x2fefa0(0x2bd)]){this[_0x2fefa0(0x6c6)][_0x2fefa0(0x39b)](this[_0x2fefa0(0x546)]+'\x20('+this[_0x2fefa0(0x444)]['wuid']+_0x2fefa0(0x7da)+_0x184ecd[_0x2fefa0(0x461)]+_0x2fefa0(0x6b0));continue;}if(!this['instance'][_0x2fefa0(0x153)][_0x2fefa0(0x275)]){this[_0x2fefa0(0x6c6)][_0x2fefa0(0x39b)](this[_0x2fefa0(0x546)]+'\x20('+this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]+_0x2fefa0(0x347));break;}if(!this['instance']['ScheduleMessage'][_0x2fefa0(0x625)]){this[_0x2fefa0(0x6c6)]['verbose'](this[_0x2fefa0(0x546)]+'\x20('+this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]+_0x2fefa0(0x326)+_0x4af88f[_0x2fefa0(0x6ae)]+_0x2fefa0(0x5e8));break;}if(_0x184ecd['type']===_0x2fefa0(0x72d)&&!this[_0x2fefa0(0x4b3)]?.[_0x2fefa0(0x2b0)][_0x2fefa0(0x3b1)]){this[_0x2fefa0(0x6c6)]['error'](this[_0x2fefa0(0x546)]+'\x20('+this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]+_0x2fefa0(0x4d6));break;}let _0x5b1a11={'idControl':_0x184ecd[_0x2fefa0(0x6ae)],'remoteJid':_0x184ecd[_0x2fefa0(0x461)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0x2fefa0(0x494)]()},_0x325da6=null;try{this[_0x2fefa0(0x6c6)][_0x2fefa0(0x39b)](this[_0x2fefa0(0x546)]+'\x20('+this[_0x2fefa0(0x444)]['wuid']+_0x2fefa0(0x31d)+_0x184ecd[_0x2fefa0(0x461)]);let _0x2286c9=await this[_0x2fefa0(0x3e7)](_0x184ecd[_0x2fefa0(0x461)],_0x184ecd);_0x5b1a11[_0x2fefa0(0x73d)]=_0x2286c9[_0x2fefa0(0x73d)],_0x5b1a11['id']=_0x2286c9[_0x2fefa0(0x73d)]?null:_0x2286c9['id'],_0x5b1a11[_0x2fefa0(0x410)]=_0x2286c9['error']?_0x2286c9[_0x2fefa0(0x436)]?_0x2286c9[_0x2fefa0(0x436)][_0x2fefa0(0x30c)]():'':null;let _0x89bb18=_0x4af88f[_0x2fefa0(0x6ba)][_0x2fefa0(0x3aa)](_0x18527f=>_0x18527f[_0x2fefa0(0x6ae)]===_0x184ecd[_0x2fefa0(0x6ae)]);_0x89bb18!==-0x1&&(_0x4af88f[_0x2fefa0(0x6ba)][_0x89bb18][_0x2fefa0(0x2bd)]=!0x0);let _0x6087ce={'$push':{'messagesSend':_0x5b1a11},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x2fd428=[{'elem._id':_0x184ecd['_id']}];if(this[_0x2fefa0(0x6c6)]['verbose'](this[_0x2fefa0(0x546)]+'\x20('+this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]+'):\x20Atualizando\x20status\x20da\x20mensagem\x20'+_0x184ecd[_0x2fefa0(0x6ae)]),_0x325da6=await this[_0x2fefa0(0x4b2)][_0x2fefa0(0x1c4)][_0x2fefa0(0x127)]({'_id':_0x4af88f[_0x2fefa0(0x6ae)]},_0x6087ce,this[_0x2fefa0(0x444)][_0x2fefa0(0x638)],{'arrayFilters':_0x2fd428}),_0x2286c9[_0x2fefa0(0x73d)]){this[_0x2fefa0(0x6c6)]['error'](this['instanceName']+'\x20('+this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]+'):\x20Erro\x20ao\x20enviar\x20mensagem:\x20'+_0x2286c9['detail']);continue;}let _0x4952ce=this['getDelay'](_0x4af88f[_0x2fefa0(0x660)],_0x4af88f[_0x2fefa0(0x412)]);await this[_0x2fefa0(0x73e)](_0x4952ce);}catch(_0x287e3c){this[_0x2fefa0(0x6c6)]['error'](this[_0x2fefa0(0x546)]+'\x20('+this['instance'][_0x2fefa0(0x638)]+_0x2fefa0(0x3c5)+_0x184ecd[_0x2fefa0(0x461)]+':\x20'+(_0x287e3c instanceof Error?_0x287e3c[_0x2fefa0(0x319)]:JSON['stringify'](_0x287e3c,null,0x2))),_0x5b1a11[_0x2fefa0(0x73d)]=!0x0,_0x5b1a11[_0x2fefa0(0x410)]=_0x287e3c[_0x2fefa0(0x319)];let _0x3ea65c=_0x4af88f[_0x2fefa0(0x6ba)][_0x2fefa0(0x3aa)](_0x22187a=>_0x22187a[_0x2fefa0(0x6ae)]===_0x184ecd[_0x2fefa0(0x6ae)]);_0x3ea65c!==-0x1&&(_0x4af88f[_0x2fefa0(0x6ba)][_0x3ea65c][_0x2fefa0(0x2bd)]=!0x0);let _0x4a50b4={'$push':{'messagesSend':_0x5b1a11},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x3c9797=[{'elem._id':_0x184ecd[_0x2fefa0(0x6ae)]}];this[_0x2fefa0(0x6c6)][_0x2fefa0(0x39b)](this[_0x2fefa0(0x546)]+'\x20('+this['instance']['wuid']+_0x2fefa0(0x4a4)+_0x184ecd['_id']),_0x325da6=await this['repository'][_0x2fefa0(0x1c4)]['updateOne']({'_id':_0x4af88f[_0x2fefa0(0x6ae)]},_0x4a50b4,this[_0x2fefa0(0x444)][_0x2fefa0(0x638)],{'arrayFilters':_0x3c9797});}finally{if(_0x325da6&&_0x325da6[_0x2fefa0(0x3e2)]==='stopped'){this[_0x2fefa0(0x6c6)][_0x2fefa0(0x39b)](this[_0x2fefa0(0x546)]+'\x20('+this[_0x2fefa0(0x444)]['wuid']+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x184ecd['_id']+_0x2fefa0(0x3fb));break;}let _0x4ab95b=_0x325da6[_0x2fefa0(0x6ba)][_0x2fefa0(0x509)](_0x3e8b1d=>_0x3e8b1d['_id']===_0x184ecd['_id']);if(_0x4ab95b&&!_0x4ab95b[_0x2fefa0(0x2bd)]){let _0x4b9b7b={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x1046da=[{'elem._id':_0x184ecd['_id']}];await this['repository']['scheduleMessage'][_0x2fefa0(0x127)]({'_id':_0x325da6[_0x2fefa0(0x6ae)]},_0x4b9b7b,this[_0x2fefa0(0x444)]['wuid'],{'arrayFilters':_0x1046da});}if(this[_0x2fefa0(0x358)]=_0x325da6[_0x2fefa0(0x6ba)]['length']>0x0?_0x325da6[_0x2fefa0(0x6ba)]['filter'](_0x5ee2ef=>!_0x5ee2ef[_0x2fefa0(0x2bd)])[_0x2fefa0(0x6f8)]((_0x5118e0,_0x4b8862)=>(_0x5118e0[_0x2fefa0(0x294)]??Number[_0x2fefa0(0x68a)])<(_0x4b8862[_0x2fefa0(0x294)]??Number[_0x2fefa0(0x68a)])?_0x5118e0:_0x4b8862,_0x325da6['messages'][0x0])[_0x2fefa0(0x6ae)]:null,_0x4e22c7=!this['nextMessageId'],_0x325da6[_0x2fefa0(0x7a4)]!==this[_0x2fefa0(0x7a4)]){this[_0x2fefa0(0x6c6)][_0x2fefa0(0x39b)](this[_0x2fefa0(0x546)]+'\x20('+this['instance'][_0x2fefa0(0x638)]+_0x2fefa0(0x181));break;}}}this[_0x2fefa0(0x358)]=null;let _0x5eee91=await this[_0x2fefa0(0x4b2)][_0x2fefa0(0x1c4)][_0x2fefa0(0x46a)](_0x4af88f[_0x2fefa0(0x6ae)],this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]);if(_0x4e22c7=_0x5eee91[_0x2fefa0(0x6ba)][_0x2fefa0(0x2d4)](_0x44bbed=>_0x44bbed[_0x2fefa0(0x2bd)]),_0x4e22c7&&_0x5eee91[_0x2fefa0(0x3e2)]!==_0x2fefa0(0x3fa)){this['instance'][_0x2fefa0(0x153)][_0x2fefa0(0x386)]=null;let _0x59b677={'$set':{'status':_0x2fefa0(0x67c)}};await this['repository'][_0x2fefa0(0x1c4)][_0x2fefa0(0x7fe)](_0x5eee91[_0x2fefa0(0x6ae)],_0x59b677,this[_0x2fefa0(0x444)][_0x2fefa0(0x638)]);}await new Promise(_0x2ca6fb=>setTimeout(_0x2ca6fb,_0x1dbd80)),global['gc']?global['gc']():console[_0x2fefa0(0x7f1)](_0x2fefa0(0x392));}this[_0x2fefa0(0x358)]=null,this[_0x2fefa0(0x7a4)]=null;},_0x1d9e4e=async()=>{const _0x3f9f6a=a0_0x5cfa;let _0x32373a={'where':{'status':_0x3f9f6a(0x771),'when':{'$gt':Date[_0x3f9f6a(0x494)]()}}},_0x3b7676=await this[_0x3f9f6a(0x4b2)]['scheduleMessage'][_0x3f9f6a(0x51f)](_0x32373a,this['instance'][_0x3f9f6a(0x638)]);_0x3b7676&&_0x3b7676[_0x3f9f6a(0x6b3)]-Date['now']()<=0x6ddd00?this[_0x3f9f6a(0x444)][_0x3f9f6a(0x153)][_0x3f9f6a(0x6e5)]=_0x3b7676[_0x3f9f6a(0x6b3)]-Date[_0x3f9f6a(0x494)]():this[_0x3f9f6a(0x444)]['ScheduleMessage']['delayMessage']=(0x3c+Math[_0x3f9f6a(0x76b)](Math[_0x3f9f6a(0x487)]()*0x3c))*0x3c*0x3e8,this[_0x3f9f6a(0x444)][_0x3f9f6a(0x153)][_0x3f9f6a(0x6e5)]=Math[_0x3f9f6a(0x561)](this['instance'][_0x3f9f6a(0x153)][_0x3f9f6a(0x6e5)],0x1*0x2*0x3e8);let _0x2be4c3=Math['round'](this[_0x3f9f6a(0x444)][_0x3f9f6a(0x153)]['delayMessage']/0xea60);if(_0x3b7676){let _0x5c2ee4=new Date(_0x3b7676[_0x3f9f6a(0x6b3)])[_0x3f9f6a(0x366)]();this[_0x3f9f6a(0x6c6)][_0x3f9f6a(0x39b)](this[_0x3f9f6a(0x546)]+'\x20('+this[_0x3f9f6a(0x444)][_0x3f9f6a(0x638)]+_0x3f9f6a(0x16a)+_0x5c2ee4+',\x20far\x20nova\x20verificao\x20em\x20'+_0x2be4c3+_0x3f9f6a(0x5d7));}else this[_0x3f9f6a(0x6c6)][_0x3f9f6a(0x39b)](this[_0x3f9f6a(0x546)]+'\x20('+this['instance'][_0x3f9f6a(0x638)]+_0x3f9f6a(0x616)+_0x2be4c3+_0x3f9f6a(0x5d7));setTimeout(()=>this['scheduleNextCheck'](),this[_0x3f9f6a(0x444)][_0x3f9f6a(0x153)][_0x3f9f6a(0x6e5)]);};if(this[_0x536eea(0x444)][_0x536eea(0x153)][_0x536eea(0x625)]){await this[_0x536eea(0x4d7)](),_0x2491de();return;}if(!this[_0x536eea(0x444)][_0x536eea(0x153)]['isConnected']){this[_0x536eea(0x6c6)][_0x536eea(0x39b)](this[_0x536eea(0x546)]+'\x20('+this[_0x536eea(0x444)][_0x536eea(0x638)]+_0x536eea(0x245)),this['instance'][_0x536eea(0x153)][_0x536eea(0x625)]=null,this['instance']['ScheduleMessage'][_0x536eea(0x252)]=0x0,this[_0x536eea(0x444)]['ScheduleMessage'][_0x536eea(0x6e5)]=0x0,this['instance']['ScheduleMessage'][_0x536eea(0x386)]=null;return;}try{let _0x28874=await _0x2bdc50();_0x28874[_0x536eea(0x293)]===0x0?this['logger']['verbose'](this[_0x536eea(0x546)]+'\x20('+this[_0x536eea(0x444)][_0x536eea(0x638)]+_0x536eea(0x57e)):(this['instance'][_0x536eea(0x153)]['processingGroup_id']=_0x28874[0x0][_0x536eea(0x6ae)],await _0x564da9(_0x28874)),await _0x1d9e4e(),this[_0x536eea(0x444)][_0x536eea(0x153)][_0x536eea(0x625)]=null,this['instance']['ScheduleMessage'][_0x536eea(0x386)]=null;}catch(_0x5c7103){this[_0x536eea(0x6c6)][_0x536eea(0x73d)]('Error\x20in\x20scheduleNextCheck:\x20'+(_0x5c7103 instanceof Error?_0x5c7103[_0x536eea(0x319)]:JSON[_0x536eea(0x79e)](_0x5c7103,null,0x2)));}}['getDelay'](_0x375a2a,_0x3347fb){const _0xb952cd=a0_0x5ca8c7;return _0x375a2a=Math[_0xb952cd(0x561)](0.5,_0x375a2a),_0x3347fb=Math[_0xb952cd(0x1d0)](Math[_0xb952cd(0x561)](0x3,_0x3347fb),0x78),Math[_0xb952cd(0x76b)](Math[_0xb952cd(0x487)]()*(_0x3347fb-_0x375a2a+0x1)+_0x375a2a)*0x3e8;}[a0_0x5ca8c7(0x73e)](_0x1d451f){return new Promise(_0x17b29a=>setTimeout(_0x17b29a,_0x1d451f));}async[a0_0x5ca8c7(0x465)](_0x567efc){const _0x31adc3=a0_0x5ca8c7;if(!this['AutomateSystem']&&(await this[_0x31adc3(0x280)](),!this[_0x31adc3(0x4b3)]))return null;_0x567efc=this[_0x31adc3(0x543)](_0x567efc);let _0x435082=await this[_0x31adc3(0x4b2)][_0x31adc3(0x5f1)][_0x31adc3(0x51f)]({'where':{'_id':_0x567efc}},this['instance'][_0x31adc3(0x638)]),_0x35a30d={};if(_0x435082&&_0x435082[_0x31adc3(0x3d0)]){let _0x377c02=_0x435082['leadInfo'];typeof _0x377c02[_0x31adc3(0x182)]=='string'&&(_0x35a30d[_0x31adc3(0x182)]=_0x377c02[_0x31adc3(0x182)]),typeof _0x377c02['nomecompleto']==_0x31adc3(0x7b7)&&(_0x35a30d[_0x31adc3(0x2e0)]=_0x377c02[_0x31adc3(0x2e0)]),typeof _0x377c02[_0x31adc3(0x232)]==_0x31adc3(0x7b7)&&(_0x35a30d[_0x31adc3(0x232)]=_0x377c02[_0x31adc3(0x232)]),typeof _0x377c02['cpf']==_0x31adc3(0x7b7)&&(_0x35a30d[_0x31adc3(0x4e7)]=_0x377c02[_0x31adc3(0x4e7)]),typeof _0x377c02[_0x31adc3(0x3e2)]==_0x31adc3(0x7b7)&&(_0x35a30d[_0x31adc3(0x3e2)]=_0x377c02[_0x31adc3(0x3e2)]),typeof _0x377c02[_0x31adc3(0x520)]==_0x31adc3(0x7b7)&&(_0x35a30d[_0x31adc3(0x520)]=_0x377c02[_0x31adc3(0x520)]),typeof _0x377c02[_0x31adc3(0x77c)]==_0x31adc3(0x7b7)&&(_0x35a30d[_0x31adc3(0x77c)]=_0x377c02[_0x31adc3(0x77c)]),Array['isArray'](_0x377c02[_0x31adc3(0x2a7)])&&(_0x35a30d[_0x31adc3(0x2a7)]=_0x377c02['tags'][_0x31adc3(0x363)](',\x20')),Array[_0x31adc3(0xdc)](_0x377c02[_0x31adc3(0xc9)])&&(_0x35a30d[_0x31adc3(0xc9)]=_0x377c02['etiquetas'][_0x31adc3(0x363)](',\x20'));}return _0x435082&&_0x435082[_0x31adc3(0x3d0)]&&_0x435082['leadInfo'][_0x31adc3(0x34f)]&&_0x435082['leadInfo'][_0x31adc3(0x34f)][_0x31adc3(0x57a)](_0x42a1df=>{const _0x1f3d6a=_0x31adc3;let _0x5030d6=this['AutomateSystem']?.[_0x1f3d6a(0x34f)]['find'](_0x2accbd=>_0x2accbd[_0x1f3d6a(0x6ae)]===_0x42a1df['_id']);_0x5030d6&&(_0x35a30d[_0x5030d6[_0x1f3d6a(0x786)]]=_0x42a1df[_0x1f3d6a(0x76f)]);}),_0x35a30d;}async[a0_0x5ca8c7(0x202)](_0x10deb7,_0xb255d4){const _0x2fd106=a0_0x5ca8c7;try{let _0x232d4c=await this[_0x2fd106(0x465)](_0xb255d4);return this[_0x2fd106(0x1bf)](_0x10deb7,_0x232d4c);}catch(_0x281109){return this[_0x2fd106(0x6c6)]['error'](_0x2fd106(0xdb)+_0xb255d4+':\x20'+_0x281109),_0x10deb7;}}async['transformScheduledMessagesByType'](){const _0x4adc3f=a0_0x5ca8c7;let _0x1df035=async(_0x4ee798,_0x1292c4)=>{const _0x25370f=a0_0x5cfa;let _0x5264ee=(await this['repository'][_0x25370f(0x1c4)][_0x25370f(0x509)]({'where':{'type':_0x4ee798}},this['instance'][_0x25370f(0x638)]))[_0x25370f(0x726)](async _0x5814cc=>{const _0x4bc60e=_0x25370f;let _0x2970d0=_0x1292c4(_0x5814cc),_0x2aad7c=_0x2ca6f9=>/^\d+$/[_0x4bc60e(0x418)](_0x2ca6f9),_0x4eb392=_0x5814cc['remoteJids'][_0x4bc60e(0xe1)](_0xdd46f7=>_0xdd46f7[_0x4bc60e(0x339)](_0x4bc60e(0x505))?_0xdd46f7[_0x4bc60e(0x293)]>0x19:_0xdd46f7[_0x4bc60e(0x339)](_0x4bc60e(0x365))?_0xdd46f7[_0x4bc60e(0x293)]>0xf:_0x2aad7c(_0xdd46f7)?_0xdd46f7[_0x4bc60e(0x293)]>=0xb:!0x1)[_0x4bc60e(0x726)](_0x18298d=>({'_id':(0x0,Y['v4'])(),'idSchedule':_0x5814cc[_0x4bc60e(0x6ae)],'type':_0x2970d0,'remoteJid':_0x18298d,'flow':_0x5814cc[_0x4bc60e(0x438)],'text':_0x5814cc[_0x4bc60e(0x319)]?.['text'],'delay':_0x5814cc['message']?.[_0x4bc60e(0x10a)],'urlOrBase64':_0x5814cc['message']?.[_0x4bc60e(0x766)],'linkPreview':_0x5814cc[_0x4bc60e(0x319)]?.[_0x4bc60e(0x36d)],'fileName':_0x5814cc[_0x4bc60e(0x319)]?.[_0x4bc60e(0x208)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x4bc60e(0x4b2)][_0x4bc60e(0x1c4)][_0x4bc60e(0x7fe)](_0x5814cc[_0x4bc60e(0x6ae)],{'$set':{'messages':_0x4eb392},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x4bc60e(0x444)][_0x4bc60e(0x638)]);}catch(_0x27e45c){console['error'](_0x4bc60e(0x1dc)+_0x5814cc['_id']+':',_0x27e45c);}});await Promise['all'](_0x5264ee);};await _0x1df035('text',_0x94617e=>_0x4adc3f(0x67e)),await _0x1df035(_0x4adc3f(0x2fe),_0x1f4b86=>_0x1f4b86[_0x4adc3f(0x319)]?.[_0x4adc3f(0x430)]||_0x4adc3f(0x2fe)),await _0x1df035('audio',_0x232b2c=>_0x4adc3f(0x6cc)),await _0x1df035('flow',_0x10f4bc=>_0x4adc3f(0x72d)),await _0x1df035(_0x4adc3f(0xef),_0x426a7c=>'image'),await _0x1df035('video',_0x2f595d=>'video'),await _0x1df035(_0x4adc3f(0x5e2),_0x3c35cf=>_0x4adc3f(0x5e2)),this[_0x4adc3f(0x6c6)][_0x4adc3f(0x39b)](this['instanceName']+'\x20('+this[_0x4adc3f(0x444)]['wuid']+_0x4adc3f(0x130));}async[a0_0x5ca8c7(0x618)](_0x1b9b96){const _0x2d60d7=a0_0x5ca8c7;try{if(this[_0x2d60d7(0x6c6)][_0x2d60d7(0x39b)](this[_0x2d60d7(0x546)]+'\x20('+this[_0x2d60d7(0x444)]['wuid']+_0x2d60d7(0x3a0)),_0x1b9b96['_id']||(_0x1b9b96[_0x2d60d7(0x6ae)]=(0x0,Y['v4'])()),this[_0x2d60d7(0x444)][_0x2d60d7(0x153)][_0x2d60d7(0x625)]===_0x1b9b96[_0x2d60d7(0x6ae)]?.['toString']()&&_0x1b9b96['status']!=='stopped')throw new Error(_0x2d60d7(0x3fc));if(_0x1b9b96[_0x2d60d7(0x5e3)]&&_0x1b9b96[_0x2d60d7(0x6ae)]){let _0x48c39f=await this['repository'][_0x2d60d7(0x1c4)][_0x2d60d7(0x504)](_0x1b9b96['_id'],this[_0x2d60d7(0x444)][_0x2d60d7(0x638)]);return setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x48c39f;}let _0x3d9ade=null;if(_0x1b9b96[_0x2d60d7(0x6ae)]&&(_0x3d9ade=await this['repository'][_0x2d60d7(0x1c4)][_0x2d60d7(0x46a)](_0x1b9b96['_id'],this[_0x2d60d7(0x444)]['wuid'])),_0x3d9ade){let {_id:_0x2fb347,owner:_0x4ee915,messages:_0x27de2a,..._0xeb3b61}=_0x1b9b96;if(_0x27de2a){let _0x5fdff5=_0x27de2a[_0x2d60d7(0xe1)](_0x4da729=>!_0x4da729[_0x2d60d7(0x6ae)]),_0x5e04ee=_0x27de2a[_0x2d60d7(0xe1)](_0x26398a=>_0x26398a['_id']&&!_0x26398a[_0x2d60d7(0x5e3)]),_0x12d5c8=_0x27de2a[_0x2d60d7(0xe1)](_0x1517c4=>_0x1517c4[_0x2d60d7(0x6ae)]&&_0x1517c4[_0x2d60d7(0x5e3)]);if(_0x5fdff5[_0x2d60d7(0x293)]>0x0&&await this['addMessagesToGroup'](_0x1b9b96[_0x2d60d7(0x6ae)],_0x5fdff5),_0x5e04ee['length']>0x0&&await this['editMessagesInGroup']({'_id':_0x1b9b96[_0x2d60d7(0x6ae)],'messages':_0x5e04ee}),_0x12d5c8['length']>0x0){let _0x4afe4a=_0x12d5c8[_0x2d60d7(0x726)](_0x5a710f=>({'updateOne':{'filter':{'_id':_0x1b9b96[_0x2d60d7(0x6ae)]},'update':{'$pull':{'messages':{'_id':_0x5a710f['_id']}}}}}));await this[_0x2d60d7(0x4b2)][_0x2d60d7(0x1c4)]['bulkWrite'](_0x4afe4a,this[_0x2d60d7(0x444)][_0x2d60d7(0x638)]);}}let _0x3918aa={'$set':{..._0xeb3b61,'status':_0x1b9b96[_0x2d60d7(0x3e2)]||_0x3d9ade[_0x2d60d7(0x3e2)]}},_0x3e00f8=await this['repository'][_0x2d60d7(0x1c4)]['updateOneById'](_0x1b9b96[_0x2d60d7(0x6ae)],_0x3918aa,this['instance'][_0x2d60d7(0x638)]);return _0x3e00f8&&(this[_0x2d60d7(0x5c2)](_0x3e00f8['messages']),await this[_0x2d60d7(0x4b2)][_0x2d60d7(0x1c4)][_0x2d60d7(0x7fe)](_0x3e00f8['_id'],{'$set':{'messages':_0x3e00f8['messages']}},this['instance'][_0x2d60d7(0x638)])),setTimeout(()=>this[_0x2d60d7(0x629)](),0x7d0),await this[_0x2d60d7(0x383)](),_0x3e00f8;}else{_0x1b9b96[_0x2d60d7(0x756)]=this['instance'][_0x2d60d7(0x638)],_0x1b9b96[_0x2d60d7(0x6ba)]&&_0x1b9b96['messages'][_0x2d60d7(0x57a)](_0x2a03d3=>{const _0x181f48=_0x2d60d7;_0x2a03d3['_id']||(_0x2a03d3[_0x181f48(0x6ae)]=(0x0,Y['v4'])()),_0x2a03d3[_0x181f48(0x623)]||(_0x2a03d3[_0x181f48(0x623)]=_0x1b9b96[_0x181f48(0x6ae)]),delete _0x2a03d3['triedToSend'];});let _0x52f9a9=await this[_0x2d60d7(0x4b2)][_0x2d60d7(0x1c4)][_0x2d60d7(0x7bc)](_0x1b9b96,this[_0x2d60d7(0x444)][_0x2d60d7(0x638)]);return _0x52f9a9&&(this[_0x2d60d7(0x5c2)](_0x52f9a9[_0x2d60d7(0x6ba)]),await this[_0x2d60d7(0x4b2)]['scheduleMessage'][_0x2d60d7(0x7fe)](_0x52f9a9['_id'],{'$set':{'messages':_0x52f9a9[_0x2d60d7(0x6ba)]}},this[_0x2d60d7(0x444)]['wuid'])),setTimeout(()=>this[_0x2d60d7(0x629)](),0x7d0),_0x52f9a9;}}catch(_0x4320ac){let _0x58b87a=_0x2d60d7(0x382),_0x221d2e=_0x4320ac instanceof Error?_0x4320ac['message']:typeof _0x4320ac==_0x2d60d7(0x4c4)?JSON[_0x2d60d7(0x79e)](_0x4320ac):_0x4320ac,_0x422ddf=_0x58b87a+':\x20'+_0x221d2e;throw this[_0x2d60d7(0x6c6)]['error'](this[_0x2d60d7(0x546)]+'\x20('+this[_0x2d60d7(0x444)][_0x2d60d7(0x638)]+_0x2d60d7(0x17a)+_0x422ddf),new m(_0x422ddf);}}async['addMessagesToGroup'](_0x297e82,_0x1ef445){const _0x5500dc=a0_0x5ca8c7;try{this[_0x5500dc(0x6c6)][_0x5500dc(0x39b)](this[_0x5500dc(0x546)]+'\x20('+this[_0x5500dc(0x444)]['wuid']+'):\x20Adicionando\x20mensagens\x20ao\x20grupo...'),_0x1ef445['forEach'](_0x266e4a=>{const _0x32ee41=_0x5500dc;_0x266e4a[_0x32ee41(0x6ae)]||(_0x266e4a[_0x32ee41(0x6ae)]=(0x0,Y['v4'])()),_0x266e4a[_0x32ee41(0x623)]||(_0x266e4a[_0x32ee41(0x623)]=_0x297e82),delete _0x266e4a['triedToSend'];});let _0x5193d1={'$push':{'messages':{'$each':_0x1ef445}}},_0x5a3e94=await this[_0x5500dc(0x4b2)][_0x5500dc(0x1c4)][_0x5500dc(0x7fe)](_0x297e82,_0x5193d1,this[_0x5500dc(0x444)][_0x5500dc(0x638)]);return _0x5a3e94&&(this[_0x5500dc(0x5c2)](_0x5a3e94[_0x5500dc(0x6ba)]),await this[_0x5500dc(0x4b2)][_0x5500dc(0x1c4)]['updateOneById'](_0x5a3e94[_0x5500dc(0x6ae)],{'$set':{'messages':_0x5a3e94['messages']}},this[_0x5500dc(0x444)][_0x5500dc(0x638)])),_0x5a3e94;}catch(_0x238f83){let _0xae1d90=_0x5500dc(0x2c0),_0xb7981d=_0x238f83 instanceof Error?_0x238f83[_0x5500dc(0x319)]:typeof _0x238f83==_0x5500dc(0x4c4)?JSON[_0x5500dc(0x79e)](_0x238f83):_0x238f83,_0xc3cfee=_0xae1d90+':\x20'+_0xb7981d;throw this['logger'][_0x5500dc(0x73d)](this['instanceName']+'\x20('+this[_0x5500dc(0x444)]['wuid']+'):\x20'+_0xc3cfee),new m(_0xc3cfee);}}async[a0_0x5ca8c7(0x7f6)](_0x2288f3){const _0xc73500=a0_0x5ca8c7;try{if(this['logger']['verbose'](this[_0xc73500(0x546)]+'\x20('+this['instance'][_0xc73500(0x638)]+_0xc73500(0x768)),!_0x2288f3[_0xc73500(0x6ae)]||!_0x2288f3[_0xc73500(0x6ba)])throw new Error(_0xc73500(0x350));let _0x38c07d=_0x2288f3[_0xc73500(0x6ae)],_0x39838d=_0x2288f3[_0xc73500(0x6ba)],_0x1969d4=_0x39838d['filter'](_0x1e1490=>!_0x1e1490['delete'])[_0xc73500(0x726)](_0xd7d52a=>{const _0x324cad=_0xc73500;let _0x41b397=_0xd7d52a[_0x324cad(0x6ae)];if(!_0x41b397)throw new Error(_0x324cad(0x34c));return _0xd7d52a[_0x324cad(0x623)]||(_0xd7d52a[_0x324cad(0x623)]=_0x38c07d),delete _0xd7d52a[_0x324cad(0x2bd)],{'updateOne':{'filter':{'_id':_0x38c07d,'messages._id':_0x41b397},'update':{'$set':{'messages.$[elem]':_0xd7d52a}},'arrayFilters':[{'elem._id':_0x41b397}]}};}),_0x220354=_0x39838d[_0xc73500(0xe1)](_0x2d7617=>_0x2d7617[_0xc73500(0x5e3)])[_0xc73500(0x726)](_0x54612f=>{const _0x56bddb=_0xc73500;let _0x807c19=_0x54612f[_0x56bddb(0x6ae)];if(!_0x807c19)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20excluso.');return{'updateOne':{'filter':{'_id':_0x38c07d},'update':{'$pull':{'messages':{'_id':_0x807c19}}}}};}),_0x45a63e=[..._0x1969d4,..._0x220354],_0x1c5e60=await this[_0xc73500(0x4b2)][_0xc73500(0x1c4)][_0xc73500(0x48e)](_0x45a63e,this[_0xc73500(0x444)][_0xc73500(0x638)]),_0x3dead0=await this[_0xc73500(0x4b2)][_0xc73500(0x1c4)][_0xc73500(0x46a)](_0x38c07d,this[_0xc73500(0x444)][_0xc73500(0x638)]);return _0x3dead0&&(this['reorderMessages'](_0x3dead0[_0xc73500(0x6ba)]),await this[_0xc73500(0x4b2)]['scheduleMessage'][_0xc73500(0x7fe)](_0x3dead0[_0xc73500(0x6ae)],{'$set':{'messages':_0x3dead0[_0xc73500(0x6ba)]}},this['instance'][_0xc73500(0x638)])),_0x3dead0;}catch(_0x257a9e){let _0x41e828=_0xc73500(0x575),_0x371d6d=_0x257a9e instanceof Error?_0x257a9e[_0xc73500(0x319)]:typeof _0x257a9e==_0xc73500(0x4c4)?JSON[_0xc73500(0x79e)](_0x257a9e):_0x257a9e,_0xb7ac67=_0x41e828+':\x20'+_0x371d6d;throw this[_0xc73500(0x6c6)]['error'](this[_0xc73500(0x546)]+'\x20('+this[_0xc73500(0x444)]['wuid']+_0xc73500(0x17a)+_0xb7ac67),new m(_0xb7ac67);}}async['deleteDoneMessages'](){const _0x5b6136=a0_0x5ca8c7;try{let _0xb5e415={'status':_0x5b6136(0x67c)},_0x3264f5=await this[_0x5b6136(0x4b2)][_0x5b6136(0x1c4)]['deleteMany'](_0xb5e415,this['instance'][_0x5b6136(0x638)]);if(!_0x3264f5[_0x5b6136(0x73d)])this['logger'][_0x5b6136(0x39b)](this[_0x5b6136(0x546)]+'\x20('+this[_0x5b6136(0x444)][_0x5b6136(0x638)]+'):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.');else throw new Error(_0x3264f5[_0x5b6136(0x73d)]['message']||_0x5b6136(0x6a7));return this[_0x5b6136(0x1c2)]();}catch(_0x49a686){let _0xa9ff55=_0x5b6136(0x39d),_0x4d8150=_0x49a686 instanceof Error?_0x49a686[_0x5b6136(0x319)]:typeof _0x49a686=='object'?JSON[_0x5b6136(0x79e)](_0x49a686):_0x49a686,_0x151e25=_0xa9ff55+':\x20'+_0x4d8150;throw this[_0x5b6136(0x6c6)][_0x5b6136(0x73d)](this[_0x5b6136(0x546)]+'\x20('+this[_0x5b6136(0x444)][_0x5b6136(0x638)]+_0x5b6136(0x17a)+_0x151e25),new m(_0x151e25);}}async['getScheduleMessage'](){const _0x10aba6=a0_0x5ca8c7;try{return await this[_0x10aba6(0x4b2)][_0x10aba6(0x1c4)]['find']({'where':{}},this[_0x10aba6(0x444)][_0x10aba6(0x638)]);}catch(_0x437a0d){let _0x43cb49=_0x10aba6(0x678),_0x10d507=_0x437a0d instanceof Error?_0x437a0d[_0x10aba6(0x319)]:typeof _0x437a0d=='object'?JSON[_0x10aba6(0x79e)](_0x437a0d):_0x437a0d,_0x493828=_0x43cb49+':\x20'+_0x10d507;throw this['logger']['error'](this[_0x10aba6(0x546)]+'\x20('+this[_0x10aba6(0x444)][_0x10aba6(0x638)]+'):\x20'+_0x493828),new m(_0x493828);}}[a0_0x5ca8c7(0x5c2)](_0x4425e8){const _0x57f490=a0_0x5ca8c7;_0x4425e8[_0x57f490(0x28e)]((_0x25d851,_0x147458)=>_0x25d851['order']-_0x147458['order']),_0x4425e8['forEach']((_0x40bcb9,_0xaf60f3)=>{const _0x2e4b8a=_0x57f490;_0x40bcb9[_0x2e4b8a(0x294)]=_0xaf60f3+0x1;});}async[a0_0x5ca8c7(0x3e7)](_0x55077d,_0x23420f){const _0x53acc2=a0_0x5ca8c7;try{if(!_0x23420f)return this[_0x53acc2(0x6c6)][_0x53acc2(0x73d)](this['instanceName']+'\x20('+this[_0x53acc2(0x444)]['wuid']+_0x53acc2(0x6ea)),{'error':!0x0,'detail':'Nenhuma\x20mensagem\x20encontrada\x20para\x20envio'};if(_0x23420f[_0x53acc2(0x573)]===_0x53acc2(0x72d)&&!this[_0x53acc2(0x4b3)]?.['flowConfig'][_0x53acc2(0x3b1)])return this['logger'][_0x53acc2(0x73d)](this[_0x53acc2(0x546)]+'\x20('+this[_0x53acc2(0x444)][_0x53acc2(0x638)]+_0x53acc2(0x37e)),{'error':!0x0,'detail':_0x53acc2(0x470)};switch(_0x23420f[_0x53acc2(0x573)]){case'text':return await this[_0x53acc2(0x19b)](_0x23420f,_0x55077d);case _0x53acc2(0x2b1):case _0x53acc2(0xef):case _0x53acc2(0x5e2):return await this[_0x53acc2(0x677)](_0x23420f,_0x55077d);case'audio':return await this[_0x53acc2(0x217)](_0x23420f,_0x55077d);case _0x53acc2(0x72d):let _0x524637=new Ke();return _0x524637[_0x53acc2(0x786)]=_0x23420f[_0x53acc2(0x72d)],_0x524637[_0x53acc2(0x461)]=_0x55077d,await this[_0x53acc2(0x702)](_0x524637);default:return this[_0x53acc2(0x6c6)][_0x53acc2(0x73d)](this[_0x53acc2(0x546)]+'\x20('+this[_0x53acc2(0x444)][_0x53acc2(0x638)]+_0x53acc2(0x3ee)+_0x23420f[_0x53acc2(0x573)]),{'error':!0x0,'detail':_0x53acc2(0x1e7)};}}catch(_0x50f06f){return this[_0x53acc2(0x6c6)][_0x53acc2(0x73d)](this[_0x53acc2(0x546)]+'\x20('+this[_0x53acc2(0x444)][_0x53acc2(0x638)]+_0x53acc2(0x4a8)+(_0x50f06f instanceof Error?_0x50f06f[_0x53acc2(0x319)]:JSON[_0x53acc2(0x79e)](_0x50f06f,null,0x2))),{'error':!0x0,'detail':_0x50f06f['message']};}}async[a0_0x5ca8c7(0x19b)](_0x234298,_0x1c3b83){const _0x425e12=a0_0x5ca8c7;if(this[_0x425e12(0x6c6)][_0x425e12(0x39b)](this[_0x425e12(0x546)]+'\x20('+this[_0x425e12(0x444)][_0x425e12(0x638)]+_0x425e12(0xff)+_0x1c3b83+'\x27'),!_0x234298[_0x425e12(0x67e)]||_0x234298[_0x425e12(0x67e)][_0x425e12(0x293)]===0x0)return{'error':!0x0,'detail':_0x425e12(0x6e2)};let _0x592b0f=await this[_0x425e12(0x202)](_0x234298['text'],_0x1c3b83),_0x39ac40={'number':_0x1c3b83,'options':{'delay':_0x234298['delay'],'linkPreview':_0x234298['linkPreview']},'textMessage':{'text':_0x592b0f}},_0x75eb85=null;try{let _0x14a80d=await this[_0x425e12(0x7ad)](_0x39ac40);if(_0x14a80d&&_0x14a80d['status'])return{'error':!0x1,'id':_0x14a80d['key']['id']};_0x75eb85=JSON['stringify'](_0x14a80d),this[_0x425e12(0x6c6)]['verbose'](this['instanceName']+'\x20('+this[_0x425e12(0x444)][_0x425e12(0x638)]+_0x425e12(0x17a)+_0x75eb85);}catch(_0x1a1f9c){this[_0x425e12(0x6c6)]['error'](this[_0x425e12(0x546)]+'\x20('+this['instance'][_0x425e12(0x638)]+_0x425e12(0x7c8)+(_0x1a1f9c instanceof Error?_0x1a1f9c[_0x425e12(0x319)]:JSON['stringify'](_0x1a1f9c,null,0x2))),_0x75eb85=_0x1a1f9c[_0x425e12(0x319)];}if(_0x75eb85)return{'error':!0x0,'detail':(typeof _0x75eb85==_0x425e12(0x4c4)?JSON['stringify'](_0x75eb85,null,0x2):_0x75eb85)[_0x425e12(0x2cf)](/[\[\]{}\n]/g,'\x20')[_0x425e12(0x2cf)](/  +/g,'\x20')};}async[a0_0x5ca8c7(0x677)](_0x2da189,_0x2a98af){const _0x297851=a0_0x5ca8c7;this['logger'][_0x297851(0x39b)](this[_0x297851(0x546)]+'\x20('+this[_0x297851(0x444)]['wuid']+_0x297851(0x7c4)+_0x2a98af+'\x27');let _0x595a37;_0x2da189['text']&&_0x2da189['text'][_0x297851(0x293)]>0x0&&(_0x595a37=await this[_0x297851(0x202)](_0x2da189[_0x297851(0x67e)],_0x2a98af));let _0x1aaa2c={'number':_0x2a98af,'options':{'delay':_0x2da189[_0x297851(0x10a)],'linkPreview':_0x2da189[_0x297851(0x36d)]},'mediaMessage':{'mediatype':_0x2da189['type'],'caption':_0x595a37,'media':_0x2da189[_0x297851(0x766)]}},_0x13fab6=null;try{let _0x4c89b9=await this['mediaMessage'](_0x1aaa2c);if(_0x4c89b9&&_0x4c89b9[_0x297851(0x3e2)])return{'error':!0x1,'id':_0x4c89b9[_0x297851(0x3c3)]['id']};_0x13fab6=JSON[_0x297851(0x79e)](_0x4c89b9),this[_0x297851(0x6c6)][_0x297851(0x39b)](this[_0x297851(0x546)]+'\x20('+this[_0x297851(0x444)][_0x297851(0x638)]+_0x297851(0x17a)+_0x13fab6);}catch(_0x4733c7){this[_0x297851(0x6c6)][_0x297851(0x73d)](this[_0x297851(0x546)]+'\x20('+this[_0x297851(0x444)]['wuid']+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20'+(_0x4733c7 instanceof Error?_0x4733c7[_0x297851(0x319)]:JSON[_0x297851(0x79e)](_0x4733c7,null,0x2))),_0x13fab6=_0x4733c7[_0x297851(0x319)];}if(_0x13fab6)return{'error':!0x0,'detail':(typeof _0x13fab6=='object'?JSON['stringify'](_0x13fab6,null,0x2):_0x13fab6)[_0x297851(0x2cf)](/[\[\]{}\n]/g,'\x20')[_0x297851(0x2cf)](/  +/g,'\x20')};}async['scheduleSendAudio'](_0x118c73,_0x95e074){const _0x2b1516=a0_0x5ca8c7;this['logger'][_0x2b1516(0x39b)](this[_0x2b1516(0x546)]+'\x20('+this[_0x2b1516(0x444)][_0x2b1516(0x638)]+_0x2b1516(0x25f)+_0x95e074+'\x27');let _0x175528={'number':_0x95e074,'options':{'delay':_0x118c73[_0x2b1516(0x10a)]},'audioMessage':{'audio':_0x118c73['urlOrBase64']}},_0x342fbf=null;try{let _0x10b241=await this[_0x2b1516(0x2c6)](_0x175528);if(_0x10b241&&_0x10b241['status'])return{'error':!0x1,'id':_0x10b241[_0x2b1516(0x3c3)]['id']};_0x342fbf=JSON[_0x2b1516(0x79e)](_0x10b241),this[_0x2b1516(0x6c6)][_0x2b1516(0x39b)](this[_0x2b1516(0x546)]+'\x20('+this['instance'][_0x2b1516(0x638)]+_0x2b1516(0x17a)+_0x342fbf);}catch(_0x53c218){this[_0x2b1516(0x6c6)][_0x2b1516(0x73d)](this['instanceName']+'\x20('+this[_0x2b1516(0x444)][_0x2b1516(0x638)]+_0x2b1516(0x698)+(_0x53c218 instanceof Error?_0x53c218[_0x2b1516(0x319)]:JSON[_0x2b1516(0x79e)](_0x53c218,null,0x2))),_0x342fbf=_0x53c218['message'];}if(_0x342fbf)return{'error':!0x0,'detail':(typeof _0x342fbf==_0x2b1516(0x4c4)?JSON[_0x2b1516(0x79e)](_0x342fbf,null,0x2):_0x342fbf)[_0x2b1516(0x2cf)](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async[a0_0x5ca8c7(0x17c)](_0x432d1c){const _0x5accf6=a0_0x5ca8c7;try{return await this['client'][_0x5accf6(0x53f)](_0x432d1c[_0x5accf6(0x6ee)],_0x432d1c['description']),{'update':_0x5accf6(0x7d6)};}catch(_0x23b66c){let _0x5ec517=_0x5accf6(0x6b4),_0x4839e5=_0x23b66c instanceof Error?_0x23b66c[_0x5accf6(0x319)]:typeof _0x23b66c==_0x5accf6(0x4c4)?JSON[_0x5accf6(0x79e)](_0x23b66c):_0x23b66c,_0x23bef4=_0x5ec517+':\x20'+_0x4839e5;throw this[_0x5accf6(0x6c6)]['error'](this[_0x5accf6(0x546)]+'\x20('+this[_0x5accf6(0x444)][_0x5accf6(0x638)]+_0x5accf6(0x17a)+_0x23bef4),new x(_0x23bef4);}}async[a0_0x5ca8c7(0x565)](_0x990b21){const _0x428815=a0_0x5ca8c7;try{return await this[_0x428815(0x158)]['groupUpdateSubject'](_0x990b21[_0x428815(0x6ee)],_0x990b21[_0x428815(0x786)]),{'update':_0x428815(0x7d6)};}catch(_0xa1f2a1){let _0x1ad73c=_0x428815(0x27c),_0x4be0a5=_0xa1f2a1 instanceof Error?_0xa1f2a1[_0x428815(0x319)]:typeof _0xa1f2a1==_0x428815(0x4c4)?JSON['stringify'](_0xa1f2a1):_0xa1f2a1,_0x51604a=_0x1ad73c+':\x20'+_0x4be0a5;throw this[_0x428815(0x6c6)][_0x428815(0x73d)](this[_0x428815(0x546)]+'\x20('+this[_0x428815(0x444)][_0x428815(0x638)]+'):\x20'+_0x51604a),new x(_0x51604a);}}async[a0_0x5ca8c7(0x286)](_0x20e596){const _0x5aea87=a0_0x5ca8c7;try{let _0x29fb05=await this[_0x5aea87(0x158)][_0x5aea87(0x3d9)](_0x20e596[_0x5aea87(0x6ee)],_0x20e596['expiration']);return{'success':!0x0};}catch(_0x2d624f){let _0x5aa577='Falha\x20ao\x20processar\x20a\x20solicitao\x20toggleEphemeral',_0x251346=_0x2d624f instanceof Error?_0x2d624f[_0x5aea87(0x319)]:typeof _0x2d624f=='object'?JSON[_0x5aea87(0x79e)](_0x2d624f):_0x2d624f,_0x3518db=_0x5aa577+':\x20'+_0x251346;throw this[_0x5aea87(0x6c6)]['error'](this[_0x5aea87(0x546)]+'\x20('+this[_0x5aea87(0x444)][_0x5aea87(0x638)]+_0x5aea87(0x17a)+_0x3518db),new x(_0x3518db);}}async['groupSetting'](_0x4e1356){const _0x49afce=a0_0x5ca8c7;try{return await this[_0x49afce(0x158)][_0x49afce(0x17b)](_0x4e1356[_0x49afce(0x6ee)],_0x4e1356[_0x49afce(0x1b0)]),{'update':_0x49afce(0x7d6)};}catch(_0x4cecdc){let _0x131bf0='Falha\x20ao\x20processar\x20a\x20solicitao\x20groupSetting',_0x1ba01c=_0x4cecdc instanceof Error?_0x4cecdc[_0x49afce(0x319)]:typeof _0x4cecdc==_0x49afce(0x4c4)?JSON[_0x49afce(0x79e)](_0x4cecdc):_0x4cecdc,_0x475522=_0x131bf0+':\x20'+_0x1ba01c;throw this[_0x49afce(0x6c6)][_0x49afce(0x73d)](this[_0x49afce(0x546)]+'\x20('+this[_0x49afce(0x444)][_0x49afce(0x638)]+_0x49afce(0x17a)+_0x475522),new x(_0x475522);}}async[a0_0x5ca8c7(0x4ff)](_0x125bd7){const _0x311c1a=a0_0x5ca8c7;try{let _0x3b8f98;if((0x0,L['isURL'])(_0x125bd7[_0x311c1a(0xef)])){let _0xb2bd80=new Date()[_0x311c1a(0x51c)](),_0x373e10=_0x125bd7[_0x311c1a(0xef)]+_0x311c1a(0x2c4)+_0xb2bd80;_0x3b8f98=(await ee[_0x311c1a(0x180)][_0x311c1a(0x507)](_0x373e10,{'responseType':_0x311c1a(0x2ef)}))['data'];}else{if((0x0,L[_0x311c1a(0x65a)])(_0x125bd7['image']))_0x3b8f98=Buffer[_0x311c1a(0x298)](_0x125bd7['image'],_0x311c1a(0x652));else throw new m(_0x311c1a(0x2eb));}return await this[_0x311c1a(0x158)][_0x311c1a(0x592)](_0x125bd7[_0x311c1a(0x6ee)],_0x3b8f98),{'update':_0x311c1a(0x7d6)};}catch(_0x209a91){let _0x2483a8='Falha\x20ao\x20processar\x20a\x20solicitao\x20updateGroupPicture',_0x145088=_0x209a91 instanceof Error?_0x209a91[_0x311c1a(0x319)]:typeof _0x209a91==_0x311c1a(0x4c4)?JSON[_0x311c1a(0x79e)](_0x209a91):_0x209a91,_0x24a27c=_0x2483a8+':\x20'+_0x145088;throw this[_0x311c1a(0x6c6)][_0x311c1a(0x73d)](this[_0x311c1a(0x546)]+'\x20('+this[_0x311c1a(0x444)][_0x311c1a(0x638)]+_0x311c1a(0x17a)+_0x24a27c),new x(_0x24a27c);}}},Gt=class u{constructor(_0x3a1a6e,_0x18045e,_0x2d3818){const _0x29e3c6=a0_0x5ca8c7;this[_0x29e3c6(0x6da)]=_0x3a1a6e,this[_0x29e3c6(0x588)]=_0x18045e,this['repository']=_0x2d3818,this['db']={},this[_0x29e3c6(0x6fa)]={},this[_0x29e3c6(0x6c6)]=new $(u[_0x29e3c6(0x786)]),this[_0x29e3c6(0x441)]={},(this[_0x29e3c6(0x48d)](),this[_0x29e3c6(0x6ab)](),Object[_0x29e3c6(0x14c)](this['db'],_0x18045e[_0x29e3c6(0x507)](_0x29e3c6(0x378))),Object[_0x29e3c6(0x14c)](this[_0x29e3c6(0x6fa)],_0x18045e['get'](_0x29e3c6(0x3ad))),this[_0x29e3c6(0x244)]=this['db'][_0x29e3c6(0x4b7)]?this[_0x29e3c6(0x4b2)][_0x29e3c6(0x5d5)]?.['db'](this['db']['CONNECTION']['DB_PREFIX_NAME']+'-instances'):void 0x0,this['cache']=this[_0x29e3c6(0x6fa)][_0x29e3c6(0x4b7)]?new me(this['redis']):void 0x0);}async['instanceInfo'](_0x84b7c8){const _0x23c27f=a0_0x5ca8c7;if(_0x84b7c8&&!this[_0x23c27f(0x441)][_0x84b7c8])throw new G(_0x23c27f(0x655)+_0x84b7c8+'\x22\x20not\x20found');let _0x15a3c4=[];for await(let [_0x19d79e,_0x51981a]of Object['entries'](this[_0x23c27f(0x441)]))if(_0x51981a&&_0x51981a[_0x23c27f(0x621)][_0x23c27f(0x335)]===_0x23c27f(0x349)){let _0x2715fb=await this['repository'][_0x23c27f(0x772)][_0x23c27f(0x509)](_0x19d79e);_0x15a3c4[_0x23c27f(0x7cb)]({'instance':{'instanceName':_0x19d79e,'apikey':_0x2715fb[_0x23c27f(0x790)],'owner':_0x51981a[_0x23c27f(0x638)],'profileName':await _0x51981a[_0x23c27f(0x68f)]()||_0x23c27f(0x4f2),'profilePictureUrl':_0x51981a[_0x23c27f(0x554)]}});}return _0x15a3c4[_0x23c27f(0x509)](_0x5587c0=>_0x5587c0[_0x23c27f(0x444)][_0x23c27f(0x546)]===_0x84b7c8)??_0x15a3c4;}async[a0_0x5ca8c7(0x126)](_0x38bea9){const _0x348706=a0_0x5ca8c7;if(this['db']['ENABLED']&&(await this[_0x348706(0x4b2)]['dbServer'][_0x348706(0x58c)](),(await this[_0x348706(0x244)]['collections']())[_0x348706(0x293)]>0x0&&await this[_0x348706(0x244)][_0x348706(0x764)](_0x38bea9)),this[_0x348706(0x6fa)][_0x348706(0x4b7)]){this['cache'][_0x348706(0x4de)]=_0x38bea9,await this[_0x348706(0x165)][_0x348706(0x72a)]();return;}}async['loadInstance'](){const _0x17e054=a0_0x5ca8c7;await this[_0x17e054(0x2df)]();let _0x1ff082=async _0x4ac4f5=>{const _0x3c5faf=_0x17e054;let _0x514909=new Re(this[_0x3c5faf(0x588)],this[_0x3c5faf(0x6da)],this[_0x3c5faf(0x4b2)]);_0x514909[_0x3c5faf(0x546)]=_0x4ac4f5,await _0x514909[_0x3c5faf(0x448)](),this[_0x3c5faf(0x441)][_0x4ac4f5]=_0x514909;};try{if(this[_0x17e054(0x6fa)][_0x17e054(0x4b7)]){let _0x472b69=await this[_0x17e054(0x165)][_0x17e054(0x5e5)]();_0x472b69?.[_0x17e054(0x293)]>0x0&&_0x472b69[_0x17e054(0x57a)](async _0x6f380d=>await _0x1ff082(_0x6f380d[_0x17e054(0x42a)](':')[0x1]));return;}if(this['db']['ENABLED']){await this[_0x17e054(0x4b2)]['dbServer'][_0x17e054(0x58c)]();let _0x1f1afa=await this[_0x17e054(0x244)]['collections']();_0x1f1afa['length']>0x0&&_0x1f1afa[_0x17e054(0x57a)](async _0x216769=>await _0x1ff082(_0x216769[_0x17e054(0x14e)][_0x17e054(0x2cf)](/^[\w-]+\./,'')));return;}}catch(_0x58d787){this['logger'][_0x17e054(0x73d)](_0x58d787);}}async[a0_0x5ca8c7(0x4ac)](){const _0x168072=a0_0x5ca8c7;try{let _0xf37aa=await this[_0x168072(0x4b2)]['auth'][_0x168072(0x31e)]({'online':!0x1});for(let _0x4574e3 of _0xf37aa){let _0x49b070=_0x4574e3['_id'];await re['removeIPv6ById'](K,_0x49b070);}console['log'](_0x168072(0x21e)+_0xf37aa[_0x168072(0x293)]);let _0x452ad5={'online':!0x1},_0x4aa401=await this[_0x168072(0x4b2)]['auth'][_0x168072(0x15a)](_0x452ad5);console['log']('Instncias\x20removidas:\x20'+_0x4aa401[_0x168072(0x760)]);}catch(_0x59e668){console[_0x168072(0x73d)](_0x168072(0x2d5),_0x59e668);}}async[a0_0x5ca8c7(0x2df)](){const _0x207eeb=a0_0x5ca8c7;try{let _0x37f861={'online':!0x1},_0x360ceb={'online':!0x1,'lastDisconnect':Date['now']()},_0x3bd5f8=await this[_0x207eeb(0x4b2)][_0x207eeb(0x772)]['updateAll'](_0x37f861,_0x360ceb);await this['cleanDisconnectedInstances']();}catch(_0x4095a3){console[_0x207eeb(0x73d)](_0x207eeb(0x2e6),_0x4095a3);}}['removeInstance'](){const _0x4a5a6b=a0_0x5ca8c7;this[_0x4a5a6b(0x6da)]['on'](_0x4a5a6b(0x297),async _0x281a1a=>{const _0x526bde=_0x4a5a6b;try{this[_0x526bde(0x441)][_0x281a1a]=void 0x0;}catch{}try{this[_0x526bde(0x126)](_0x281a1a);}finally{this['logger']['warn'](_0x526bde(0x655)+_0x281a1a+_0x526bde(0x1f0));}});}['noConnection'](){const _0x1b7980=a0_0x5ca8c7;this[_0x1b7980(0x6da)]['on'](_0x1b7980(0x550),async _0x23229c=>{const _0x58949c=_0x1b7980;try{this[_0x58949c(0x441)][_0x23229c]=void 0x0;}catch{}try{this[_0x58949c(0x126)](_0x23229c);}finally{this[_0x58949c(0x6c6)][_0x58949c(0x7f1)](_0x58949c(0x655)+_0x23229c+_0x58949c(0x467));}});}},Bt=class extends O{[a0_0x5ca8c7(0x653)](_0x1da7ce){return sa(_0x1da7ce);}async[a0_0x5ca8c7(0x29c)](_0x419dbf){const _0x4574b1=a0_0x5ca8c7;if(_0x419dbf[_0x4574b1(0x293)]!==0x0)try{return{'insertCount':(await this[_0x4574b1(0x653)](_0x419dbf[0x0][_0x4574b1(0x756)])['insertMany']([..._0x419dbf]))[_0x4574b1(0x293)]};}catch(_0x34f226){return _0x34f226;}}async[a0_0x5ca8c7(0x509)](_0x5866b4,_0x3feaf3){const _0x23fc16=a0_0x5ca8c7;try{let _0x3e1fc1=this[_0x23fc16(0x653)](_0x3feaf3),_0x380fff=T(_0x5866b4['where']);return await _0x3e1fc1[_0x23fc16(0x509)](_0x380fff)[_0x23fc16(0x28e)]({'lastmsg':-0x1})['limit'](_0x5866b4?.['limit']??0x0)[_0x23fc16(0x38d)]();}catch{return[];}}async['delete'](_0x5c5d15,_0x1e3ce5){const _0x3d1794=a0_0x5ca8c7;try{return{'deletedCount':(await this[_0x3d1794(0x653)](_0x1e3ce5)[_0x3d1794(0x15a)]({..._0x5c5d15[_0x3d1794(0x73a)]}))[_0x3d1794(0x51b)]};}catch(_0xed9bf3){return{'error':_0xed9bf3?.[_0x3d1794(0x30c)]()};}}async['deleteAll'](_0x24659f,_0x56938e){const _0xbb6402=a0_0x5ca8c7;try{return await this[_0xbb6402(0x653)](_0x56938e)[_0xbb6402(0x15a)]({..._0x24659f[_0xbb6402(0x73a)]}),[];}catch(_0x13e166){return{'error':_0x13e166?.[_0xbb6402(0x30c)]()};}}async[a0_0x5ca8c7(0x51f)](_0x577ed5,_0x3ced71){const _0x748a1a=a0_0x5ca8c7;try{let _0x43b425=this[_0x748a1a(0x653)](_0x3ced71),_0x2bdea3=T(_0x577ed5['where']);return await _0x43b425['findOne'](_0x2bdea3)[_0x748a1a(0x38d)]();}catch{return null;}}async[a0_0x5ca8c7(0x127)](_0x268fca,_0x5360c0,_0x48ad47,_0x37db5b,_0x208e8b='$set'){const _0x5e103a=a0_0x5ca8c7;try{let _0x2ff168={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x37db5b},_0x1c644f=this[_0x5e103a(0x653)](_0x48ad47),_0x590d03=T(_0x268fca[_0x5e103a(0x73a)]);Object[_0x5e103a(0x818)](_0x5360c0)[_0x5e103a(0x57a)](_0x573a0f=>{_0x5360c0[_0x573a0f]==null&&delete _0x5360c0[_0x573a0f];});let _0x4c2c00={};return _0x4c2c00[_0x208e8b]=_0x5360c0,await _0x1c644f[_0x5e103a(0xd4)](_0x590d03,_0x4c2c00,_0x2ff168);}catch(_0x3291a4){return console[_0x5e103a(0x73d)](_0x3291a4),null;}}async[a0_0x5ca8c7(0x466)](_0x2443dd){const _0x26714b=a0_0x5ca8c7;try{let _0x383079=this[_0x26714b(0x653)](_0x2443dd[0x0]['query']['where'][_0x26714b(0x756)]),_0x2ca51b=_0x2443dd[_0x26714b(0x726)](_0x268cbb=>({'updateOne':{'filter':{..._0x268cbb['query']['where']},'update':{'$set':_0x268cbb[_0x26714b(0x13d)]},'upsert':!0x0}})),_0x5216ac=await _0x383079[_0x26714b(0x48e)](_0x2ca51b);return _0x5216ac['modifiedCount']+_0x5216ac[_0x26714b(0x722)];}catch(_0x80eca7){return console[_0x26714b(0x73d)](_0x80eca7),0x0;}}async['removeUnusedChatFields'](_0x5e1196){const _0x45ae18=a0_0x5ca8c7;try{let _0x39286={'group_isCommunity':'','group_announce':'','group_size':''},_0x45e70f={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x2b755f={'$unset':_0x39286};return(await this['getChatModelForOwner'](_0x5e1196)['updateMany'](_0x45e70f,_0x2b755f))['modifiedCount'];}catch(_0x169308){return console[_0x45ae18(0x73d)]('Error\x20removing\x20unused\x20chat\x20fields:',_0x169308),0x0;}}async[a0_0x5ca8c7(0x36a)](_0x3fc2ab){const _0x1e3fc0=a0_0x5ca8c7;try{let _0x1b09c3=this[_0x1e3fc0(0x653)](_0x3fc2ab),_0x182602={'leadInfo.etiquetas':{'$exists':!0x1}},_0x927452={'$set':{'leadInfo.etiquetas':[]}};return(await _0x1b09c3[_0x1e3fc0(0x466)](_0x182602,_0x927452))[_0x1e3fc0(0x7b8)];}catch(_0x38499c){return console[_0x1e3fc0(0x73d)](_0x38499c),0x0;}}async['updateMissingTags'](_0x1c1bcc){const _0x45aa77=a0_0x5ca8c7;try{let _0x11003a=this[_0x45aa77(0x653)](_0x1c1bcc),_0x430d13={'leadInfo.tags':{'$exists':!0x1}},_0x2dec71={'$set':{'leadInfo.tags':[]}};return(await _0x11003a['updateMany'](_0x430d13,_0x2dec71))['modifiedCount'];}catch(_0x1c29ca){return console['error'](_0x1c29ca),0x0;}}async[a0_0x5ca8c7(0x6a0)](_0x19f71a){const _0xf83a0e=a0_0x5ca8c7;try{let _0x23957f=this[_0xf83a0e(0x653)](_0x19f71a),_0x448b09={'leadInfo.customFields':{'$exists':!0x1}},_0x5eb6d5={'$set':{'leadInfo.customFields':[]}};return(await _0x23957f[_0xf83a0e(0x466)](_0x448b09,_0x5eb6d5))[_0xf83a0e(0x7b8)];}catch(_0x24cbdc){return console[_0xf83a0e(0x73d)](_0x24cbdc),0x0;}}async['insertMany'](_0x504e43,_0x47d624){const _0x13d1c8=a0_0x5ca8c7;if(!Array['isArray'](_0x504e43)||_0x504e43[_0x13d1c8(0x293)]===0x0)throw new Error(_0x13d1c8(0x254));try{return(await this['getChatModelForOwner'](_0x47d624)[_0x13d1c8(0x631)](_0x504e43))['length'];}catch(_0x24cc52){throw console[_0x13d1c8(0x73d)](_0x13d1c8(0x559),_0x24cc52),_0x24cc52;}}async['deleteChat'](_0xeaefcf,_0x15170a){const _0x2cc7bf=a0_0x5ca8c7;try{await this[_0x2cc7bf(0x653)](_0x15170a)[_0x2cc7bf(0x504)]({'_id':_0xeaefcf});}catch(_0x394ae9){throw console[_0x2cc7bf(0x73d)](_0x2cc7bf(0x270),_0x394ae9),_0x394ae9;}}},Wt=class extends O{constructor(_0x43ab0c,_0x3fe4f8,_0x1878cb){super(_0x3fe4f8),this['cacheContactModel']=_0x43ab0c,this['configService']=_0x3fe4f8,this['dbConnection']=_0x1878cb;}async[a0_0x5ca8c7(0x29c)](_0x2f93e3){const _0x81e1c0=a0_0x5ca8c7;if(_0x2f93e3[_0x81e1c0(0x293)]!==0x0)try{return{'insertCount':(await this[_0x81e1c0(0x50f)][_0x81e1c0(0x631)]([..._0x2f93e3]))['length']};}catch(_0x2ceffd){return _0x2ceffd;}}async[a0_0x5ca8c7(0x13d)](_0x33d2bf,_0x3375da){const _0x439649=a0_0x5ca8c7;try{let _0x8f1696=T(_0x33d2bf['where']);return{'updatedCount':(await this[_0x439649(0x50f)][_0x439649(0x466)](_0x8f1696,{'$set':_0x3375da}))[_0x439649(0x7b8)]};}catch(_0x17c6ba){return console[_0x439649(0x73d)](_0x439649(0x5f4),_0x17c6ba),{'error':_0x17c6ba[_0x439649(0x30c)]()};}}async[a0_0x5ca8c7(0x536)](_0x52c5f2){const _0xcccea=a0_0x5ca8c7;try{let _0x554177={'_id':{'$in':_0x52c5f2}};return await this[_0xcccea(0x50f)][_0xcccea(0x509)](_0x554177)[_0xcccea(0x38d)]();}catch(_0xdf16be){return console[_0xcccea(0x73d)](_0xcccea(0x576),_0xdf16be),[];}}async['delete'](_0x199ec5){const _0x3c9a16=a0_0x5ca8c7;try{return{'deletedCount':(await this[_0x3c9a16(0x50f)][_0x3c9a16(0x15a)]({..._0x199ec5[_0x3c9a16(0x73a)]}))['deletedCount']};}catch(_0x309a87){return{'error':_0x309a87?.[_0x3c9a16(0x30c)]()};}}async[a0_0x5ca8c7(0x509)](_0x5a8752){const _0x1e8c4c=a0_0x5ca8c7;try{let _0x2b8f2c=T(_0x5a8752[_0x1e8c4c(0x73a)]);return await this['cacheContactModel']['find'](_0x2b8f2c)['limit'](_0x5a8752?.[_0x1e8c4c(0x710)]??0x0)[_0x1e8c4c(0x38d)]();}catch{return[];}}async[a0_0x5ca8c7(0x51f)](_0x3878ca){const _0x1216c8=a0_0x5ca8c7;try{let _0x26c3a8=T(_0x3878ca[_0x1216c8(0x73a)]);return await this['cacheContactModel'][_0x1216c8(0x51f)](_0x26c3a8)[_0x1216c8(0x38d)]();}catch{return null;}}},zt=class extends O{[a0_0x5ca8c7(0x7d4)](_0x4571f0){return va(_0x4571f0);}async[a0_0x5ca8c7(0x127)](_0x5ca289,_0x4b30ef,_0x264dd8,_0x10ba4a){const _0xb4e46c=a0_0x5ca8c7;try{let _0x189bac={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x10ba4a},_0x3572e1=this[_0xb4e46c(0x7d4)](_0x264dd8),_0x4a0562=T(_0x5ca289[_0xb4e46c(0x73a)]);return await _0x3572e1[_0xb4e46c(0xd4)](_0x4a0562,{'$set':_0x4b30ef},_0x189bac);}catch(_0x785da8){return console[_0xb4e46c(0x73d)](_0x785da8),null;}}async[a0_0x5ca8c7(0x509)](_0x724ae3,_0x57f31b){const _0x118e5a=a0_0x5ca8c7;try{let _0x15e2fa=this[_0x118e5a(0x7d4)](_0x57f31b),_0xc79b1c=T(_0x724ae3[_0x118e5a(0x73a)]);return await _0x15e2fa[_0x118e5a(0x509)](_0xc79b1c);}catch(_0x1437fe){console['error'](_0x1437fe);}}async['delete'](_0x361a38,_0x4d2a1c){const _0x24cfaf=a0_0x5ca8c7;try{let _0x49c2fd=this[_0x24cfaf(0x7d4)](_0x4d2a1c),_0x23ef73=T(_0x361a38[_0x24cfaf(0x73a)]);await _0x49c2fd[_0x24cfaf(0x15a)](_0x23ef73);}catch(_0x10103d){console[_0x24cfaf(0x73d)](_0x10103d);}}async[a0_0x5ca8c7(0x329)](_0x33f220){const _0x193802=a0_0x5ca8c7;try{return await this[_0x193802(0x7d4)](_0x33f220)[_0x193802(0x733)][_0x193802(0x78f)](),{'success':!0x0};}catch(_0x81d43c){return console[_0x193802(0x73d)](_0x81d43c),{'success':!0x1,'error':_0x81d43c};}}},Ht=class{constructor(_0x58fe81){const _0x1a72b0=a0_0x5ca8c7;this[_0x1a72b0(0x13f)]=_0x58fe81;}async[a0_0x5ca8c7(0x2ec)]({instanceName:_0x618609},_0x5a8c5b){const _0x3a35df=a0_0x5ca8c7;return await this[_0x3a35df(0x13f)][_0x3a35df(0x441)][_0x618609][_0x3a35df(0x2ec)](_0x5a8c5b);}async[a0_0x5ca8c7(0x322)]({instanceName:_0x40bd27},_0x4b9e10){const _0xf08e92=a0_0x5ca8c7;return await this[_0xf08e92(0x13f)][_0xf08e92(0x441)][_0x40bd27][_0xf08e92(0x322)](_0x4b9e10);}async[a0_0x5ca8c7(0x169)]({instanceName:_0x28e3ac},_0x1a139c){const _0x3c61f1=a0_0x5ca8c7;return await this[_0x3c61f1(0x13f)][_0x3c61f1(0x441)][_0x28e3ac]['importChats'](_0x1a139c);}async[a0_0x5ca8c7(0x26b)]({instanceName:_0xbe1d29},_0xea3a94){const _0x3c5c34=a0_0x5ca8c7;return await this[_0x3c5c34(0x13f)][_0x3c5c34(0x441)][_0xbe1d29][_0x3c5c34(0x337)](_0xea3a94);}async['archiveChat']({instanceName:_0x2c64f1},_0x4843d6){const _0x5b75d4=a0_0x5ca8c7;return await this[_0x5b75d4(0x13f)][_0x5b75d4(0x441)][_0x2c64f1]['archiveChat'](_0x4843d6);}async[a0_0x5ca8c7(0x703)]({instanceName:_0x440a65},_0x1c3cd9){const _0x540965=a0_0x5ca8c7;return await this[_0x540965(0x13f)][_0x540965(0x441)][_0x440a65]['deleteMessage'](_0x1c3cd9);}async[a0_0x5ca8c7(0x77b)]({instanceName:_0x3443f1},_0x48f793){const _0x461ab3=a0_0x5ca8c7;return await this[_0x461ab3(0x13f)][_0x461ab3(0x441)][_0x3443f1][_0x461ab3(0x763)](_0x48f793['number']);}async['fetchProfile']({instanceName:_0x2f4f59},_0x39d797){const _0x1dc4b8=a0_0x5ca8c7;return await this[_0x1dc4b8(0x13f)][_0x1dc4b8(0x441)][_0x2f4f59][_0x1dc4b8(0x434)](_0x39d797['number']);}async[a0_0x5ca8c7(0x147)]({instanceName:_0x10f931},_0x5b8efd){const _0x386b41=a0_0x5ca8c7;return await this[_0x386b41(0x13f)][_0x386b41(0x441)][_0x10f931]['updatePresence'](_0x5b8efd);}async[a0_0x5ca8c7(0x1ec)]({instanceName:_0x1c070a},_0x176143){const _0x5f2735=a0_0x5ca8c7;return await this[_0x5f2735(0x13f)]['waInstances'][_0x1c070a][_0x5f2735(0x1ec)](_0x176143);}async[a0_0x5ca8c7(0x6f0)]({instanceName:_0x158bd4},_0x5b0ebe){const _0x54f6f5=a0_0x5ca8c7;return await this['waMonitor']['waInstances'][_0x158bd4][_0x54f6f5(0x6f0)](_0x5b0ebe);}async[a0_0x5ca8c7(0x3df)]({instanceName:_0x2d2a02},_0x5b998b){const _0x3b9a0e=a0_0x5ca8c7;return await this[_0x3b9a0e(0x13f)]['waInstances'][_0x2d2a02][_0x3b9a0e(0x3df)](_0x5b998b);}async['fetchLabels']({instanceName:_0x3f4bfe}){const _0x54bc2c=a0_0x5ca8c7;return await this['waMonitor'][_0x54bc2c(0x441)][_0x3f4bfe][_0x54bc2c(0x683)]();}async['fetchChats']({instanceName:_0x1e3ab2}){const _0x1180bc=a0_0x5ca8c7;return await this[_0x1180bc(0x13f)][_0x1180bc(0x441)][_0x1e3ab2]['fetchChats']();}async[a0_0x5ca8c7(0x77f)]({instanceName:_0x38287a}){const _0x4bc780=a0_0x5ca8c7;return await this[_0x4bc780(0x13f)][_0x4bc780(0x441)][_0x38287a][_0x4bc780(0x77f)]();}async[a0_0x5ca8c7(0x4a5)]({instanceName:_0x18666f},_0x320ef9){const _0x1d9a9e=a0_0x5ca8c7;return await this['waMonitor'][_0x1d9a9e(0x441)][_0x18666f][_0x1d9a9e(0x4a5)](_0x320ef9);}async[a0_0x5ca8c7(0x1f8)]({instanceName:_0x1d4c41},_0x1ee040){const _0x3151b5=a0_0x5ca8c7;return await this[_0x3151b5(0x13f)]['waInstances'][_0x1d4c41]['fetchBusinessProfile'](_0x1ee040[_0x3151b5(0x209)]);}async['updateProfileName']({instanceName:_0x3e1c6b},_0x1883d8){const _0x5c0eff=a0_0x5ca8c7;return await this[_0x5c0eff(0x13f)][_0x5c0eff(0x441)][_0x3e1c6b][_0x5c0eff(0x60c)](_0x1883d8[_0x5c0eff(0x786)]);}async[a0_0x5ca8c7(0x120)]({instanceName:_0x26987c},_0x266e65){const _0x4a0765=a0_0x5ca8c7;return await this[_0x4a0765(0x13f)]['waInstances'][_0x26987c][_0x4a0765(0x120)](_0x266e65[_0x4a0765(0x3e2)]);}async[a0_0x5ca8c7(0x592)]({instanceName:_0xfd63a8},_0x2181dd){const _0x4875b4=a0_0x5ca8c7;return await this['waMonitor'][_0x4875b4(0x441)][_0xfd63a8][_0x4875b4(0x592)](_0x2181dd[_0x4875b4(0x269)]);}async[a0_0x5ca8c7(0x41d)]({instanceName:_0xa43710},_0x1454b6){const _0x2015bd=a0_0x5ca8c7;return await this[_0x2015bd(0x13f)][_0x2015bd(0x441)][_0xa43710]['removeProfilePicture']();}},Kt=require(a0_0x5ca8c7(0xf5)),Qt=class u{constructor(_0x3842c5,_0x14ba96,_0x1edfa1,_0x20ef5b,_0x398b3b){const _0x3304bc=a0_0x5ca8c7;this[_0x3304bc(0x13f)]=_0x3842c5,this[_0x3304bc(0x588)]=_0x14ba96,this[_0x3304bc(0x4b2)]=_0x1edfa1,this[_0x3304bc(0x6da)]=_0x20ef5b,this['authService']=_0x398b3b,this['logger']=new $(u['name']);}async[a0_0x5ca8c7(0x482)]({instanceName:_0x4d48aa,apikey:_0x11498f,number:_0x5aae11,proxy:_0x3342c2=!0x0}){const _0x529d4d=a0_0x5ca8c7;try{let _0x4b4478=new Re(this[_0x529d4d(0x588)],this['eventEmitter'],this[_0x529d4d(0x4b2)]);_0x4b4478[_0x529d4d(0x546)]=_0x4d48aa,this[_0x529d4d(0x13f)][_0x529d4d(0x441)][_0x4b4478[_0x529d4d(0x546)]]=_0x4b4478;let _0x514ab4={};_0x11498f?(await this[_0x529d4d(0x4b2)][_0x529d4d(0x772)][_0x529d4d(0x512)]({'apikey':_0x11498f},_0x4d48aa),_0x514ab4[_0x529d4d(0x790)]=_0x11498f):_0x514ab4=await this[_0x529d4d(0x2f6)]['generateHash']({'instanceName':_0x4b4478['instanceName']});let _0x599b71;if(_0x5aae11){if(_0x599b71=await this[_0x529d4d(0xeb)](_0x5aae11),_0x599b71['error'])throw new x(_0x599b71[_0x529d4d(0x73d)]['toString']());_0x5aae11=_0x599b71[_0x529d4d(0x209)];}let _0x2c9018;return await _0x4b4478[_0x529d4d(0x448)](_0x5aae11),await(0x0,Kt[_0x529d4d(0x10a)])(0xfa0),_0x5aae11&&await(0x0,Kt['delay'])(0xbb8),_0x2c9018=_0x4b4478['qrCode'],{'instance':{'instanceName':_0x4b4478['instanceName'],'status':_0x529d4d(0x74c)},'hash':_0x514ab4,'qrcode':_0x2c9018};}catch(_0x528459){throw this[_0x529d4d(0x6c6)][_0x529d4d(0x73d)](_0x528459),_0x528459;}}async[a0_0x5ca8c7(0x662)]({instanceName:_0x597bd5,number:_0xee7cef=null}){const _0x5b7148=a0_0x5ca8c7;try{let _0x1b34e7=this[_0x5b7148(0x13f)][_0x5b7148(0x441)][_0x597bd5];switch(_0x1b34e7?.[_0x5b7148(0x621)]?.[_0x5b7148(0x335)]){case _0x5b7148(0x261):return await _0x1b34e7[_0x5b7148(0x448)](_0xee7cef),await(0x0,Kt['delay'])(0x7d0),_0x1b34e7[_0x5b7148(0x4b0)];case _0x5b7148(0x122):return _0x1b34e7['qrCode'];default:return await this[_0x5b7148(0x20b)]({'instanceName':_0x597bd5});}}catch(_0x34529b){this['logger'][_0x5b7148(0x5df)](_0x34529b);}}async[a0_0x5ca8c7(0x20b)]({instanceName:_0x7cdd68}){const _0x22e456=a0_0x5ca8c7;let _0x7cb3a5=this[_0x22e456(0x13f)]['waInstances'][_0x7cdd68][_0x22e456(0x621)],_0x432179=null;_0x7cb3a5[_0x22e456(0x335)]===_0x22e456(0x349)&&_0x7cdd68&&(_0x432179=await this[_0x22e456(0x13f)][_0x22e456(0x40d)](_0x7cdd68));let _0x2e8502=null;return _0x7cb3a5[_0x22e456(0x335)]===_0x22e456(0x122)&&_0x7cdd68&&(_0x2e8502=this[_0x22e456(0x13f)][_0x22e456(0x441)][_0x7cdd68][_0x22e456(0x4b0)]),{'instance':_0x7cdd68,'connectionStatus':_0x7cb3a5,'instanceInfo':_0x432179,'qrcode':_0x2e8502};}async[a0_0x5ca8c7(0xeb)](_0x233368){const _0x422826=a0_0x5ca8c7;_0x233368=_0x233368[_0x422826(0x2cf)](/\D/g,'');let _0x55266e=Object[_0x422826(0x818)](this[_0x422826(0x13f)][_0x422826(0x441)])['filter'](_0x52f100=>{const _0x28bada=_0x422826;let _0x509d98=this[_0x28bada(0x13f)]['waInstances'][_0x52f100];return _0x509d98&&_0x509d98[_0x28bada(0x621)]&&_0x509d98['connectionStatus'][_0x28bada(0x335)]===_0x28bada(0x349);});if(_0x55266e[_0x422826(0x293)]===0x0)return{'number':this['formatBRNumber'](_0x233368)};let _0x485085=Math['floor'](Math[_0x422826(0x487)]()*_0x55266e['length']),_0x23d02d=_0x55266e[_0x485085];try{let _0x6125bd=(await this[_0x422826(0x13f)][_0x422826(0x441)][_0x23d02d][_0x422826(0x322)]({'numbers':[_0x233368]}))[_0x422826(0xf6)]();return _0x6125bd['exists']?{'number':_0x6125bd[_0x422826(0x801)][_0x422826(0x2cf)]('@s.whatsapp.net','')}:{'number':_0x233368,'error':_0x422826(0x736)};}catch(_0x417dd9){return this[_0x422826(0x6c6)][_0x422826(0x73d)]('Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp:'+_0x417dd9),{'number':_0x233368,'error':_0x422826(0x361)};}}[a0_0x5ca8c7(0x579)](_0x4d2061){const _0x51cbe6=a0_0x5ca8c7;let _0x39930d=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x51cbe6(0x555)](_0x4d2061);if(_0x39930d&&_0x39930d[0x1]==='55'){let _0x4a5ec6=_0x39930d[0x2],_0x261471=_0x39930d[0x3],_0x4bf0b3=_0x39930d[0x4];if(parseInt(_0x4a5ec6)>=0x1f&&_0x261471==='9')return _0x39930d[0x1]+_0x4a5ec6+_0x4bf0b3;}return _0x4d2061;}async[a0_0x5ca8c7(0x186)]({instanceName:_0x482fa2}){const _0x422ea9=a0_0x5ca8c7;try{return this[_0x422ea9(0x13f)][_0x422ea9(0x441)][_0x482fa2]?.['client']?.['ws']?.['close'](),{'status':_0x422ea9(0x4d2),'error':!0x1,'response':{'message':_0x422ea9(0x1d7)}};}catch(_0x30e4ba){this[_0x422ea9(0x6c6)][_0x422ea9(0x73d)](_0x30e4ba);}}async[a0_0x5ca8c7(0x765)]({instanceName:_0x3291c6}){const _0xc962fd=a0_0x5ca8c7;return _0x3291c6?this['waMonitor'][_0xc962fd(0x40d)](_0x3291c6):this[_0xc962fd(0x13f)][_0xc962fd(0x40d)]();}async[a0_0x5ca8c7(0x251)]({instanceName:_0x109e01}){const _0x21a976=a0_0x5ca8c7;try{return await this['waMonitor'][_0x21a976(0x441)][_0x109e01]?.[_0x21a976(0x158)]?.[_0x21a976(0x251)]('Log\x20out\x20instance:\x20'+_0x109e01),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x310929){throw new x(_0x310929[_0x21a976(0x30c)]());}}async['deleteInstance']({instanceName:_0x277d29}){const _0x529c53=a0_0x5ca8c7;if((await this['connectionState']({'instanceName':_0x277d29}))['connectionStatus'][_0x529c53(0x335)]==='open')throw new m([_0x529c53(0x14d),'The\x20instance\x20needs\x20to\x20be\x20disconnected']);try{return delete this[_0x529c53(0x13f)][_0x529c53(0x441)][_0x277d29],{'error':!0x1,'message':_0x529c53(0x489)};}catch(_0x494fdc){throw new m(_0x494fdc[_0x529c53(0x30c)]());}}},ne=require(a0_0x5ca8c7(0x133)),Yt=class{constructor(_0x276b4e){const _0x36aa9f=a0_0x5ca8c7;this[_0x36aa9f(0x13f)]=_0x276b4e;}async[a0_0x5ca8c7(0x752)]({instanceName:_0x188a95},_0x34065c){const _0x4b7d7e=a0_0x5ca8c7;return await this[_0x4b7d7e(0x13f)][_0x4b7d7e(0x441)][_0x188a95][_0x4b7d7e(0x7ad)](_0x34065c);}async[a0_0x5ca8c7(0x76a)]({instanceName:_0x3cbc86},_0x4595ce){const _0x1d45be=a0_0x5ca8c7;return await this[_0x1d45be(0x13f)]['waInstances'][_0x3cbc86][_0x1d45be(0x3f1)](_0x4595ce);}async[a0_0x5ca8c7(0x303)]({instanceName:_0x5d985f},_0x1afa1e){const _0x5764a0=a0_0x5ca8c7;if((0x0,ne['isBase64'])(_0x1afa1e?.[_0x5764a0(0x19a)]?.[_0x5764a0(0x2fe)])&&!_0x1afa1e?.['mediaMessage']?.[_0x5764a0(0x208)])throw new m(_0x5764a0(0x43b));if((0x0,ne[_0x5764a0(0x510)])(_0x1afa1e?.['mediaMessage']?.[_0x5764a0(0x2fe)])||(0x0,ne[_0x5764a0(0x65a)])(_0x1afa1e?.[_0x5764a0(0x19a)]?.[_0x5764a0(0x2fe)]))return await this[_0x5764a0(0x13f)][_0x5764a0(0x441)][_0x5d985f][_0x5764a0(0x19a)](_0x1afa1e);throw new m(_0x5764a0(0x56f));}async[a0_0x5ca8c7(0x6e1)]({instanceName:_0xbee6d2},_0xf3b367){const _0x5e19c8=a0_0x5ca8c7;if((0x0,ne[_0x5e19c8(0x510)])(_0xf3b367[_0x5e19c8(0xf7)][_0x5e19c8(0xef)])||(0x0,ne[_0x5e19c8(0x65a)])(_0xf3b367[_0x5e19c8(0xf7)][_0x5e19c8(0xef)]))return await this['waMonitor'][_0x5e19c8(0x441)][_0xbee6d2][_0x5e19c8(0x7ed)](_0xf3b367);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x5ca8c7(0x7a1)]({instanceName:_0x2e004a},_0x2f2ef5){const _0x422462=a0_0x5ca8c7;if((0x0,ne[_0x422462(0x510)])(_0x2f2ef5[_0x422462(0x240)][_0x422462(0x6cc)])||(0x0,ne['isBase64'])(_0x2f2ef5[_0x422462(0x240)][_0x422462(0x6cc)]))return await this[_0x422462(0x13f)][_0x422462(0x441)][_0x2e004a][_0x422462(0x2c6)](_0x2f2ef5);throw new m(_0x422462(0x56f));}async[a0_0x5ca8c7(0x42f)]({instanceName:_0x29c015},_0x3be8f6){const _0x3a51cb=a0_0x5ca8c7;if((0x0,ne[_0x3a51cb(0x65a)])(_0x3be8f6[_0x3a51cb(0x64e)][_0x3a51cb(0x19a)]?.[_0x3a51cb(0x2fe)])&&!_0x3be8f6[_0x3a51cb(0x64e)][_0x3a51cb(0x19a)]?.['fileName'])throw new m(_0x3a51cb(0x43b));return await this[_0x3a51cb(0x13f)][_0x3a51cb(0x441)][_0x29c015][_0x3a51cb(0x64e)](_0x3be8f6);}async[a0_0x5ca8c7(0x1df)]({instanceName:_0x319d76},_0x5aaca4){const _0x4de15e=a0_0x5ca8c7;return await this[_0x4de15e(0x13f)]['waInstances'][_0x319d76]['locationMessage'](_0x5aaca4);}async[a0_0x5ca8c7(0x7e4)]({instanceName:_0x14c013},_0x469be5){const _0x31148b=a0_0x5ca8c7;return await this[_0x31148b(0x13f)][_0x31148b(0x441)][_0x14c013][_0x31148b(0x33a)](_0x469be5);}async[a0_0x5ca8c7(0x300)]({instanceName:_0x2b8586},_0x418baa){const _0x3a35bb=a0_0x5ca8c7;return await this['waMonitor']['waInstances'][_0x2b8586][_0x3a35bb(0x5e6)](_0x418baa);}async[a0_0x5ca8c7(0x409)]({instanceName:_0x385f41},_0x191b09){const _0x194055=a0_0x5ca8c7;return await this['waMonitor'][_0x194055(0x441)][_0x385f41][_0x194055(0x138)](_0x191b09);}async[a0_0x5ca8c7(0x74d)]({instanceName:_0x570720},_0x3fc4ca){const _0x474afd=a0_0x5ca8c7;if(!_0x3fc4ca['reactionMessage'][_0x474afd(0x493)][_0x474afd(0x33d)](/[^\(\)\w\s-"-\+]+/))throw new m('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this['waMonitor']['waInstances'][_0x570720][_0x474afd(0x231)](_0x3fc4ca);}async[a0_0x5ca8c7(0x2cc)]({instanceName:_0x4c4e5b},_0xd32e69){const _0x14c1d4=a0_0x5ca8c7;return await this[_0x14c1d4(0x13f)][_0x14c1d4(0x441)][_0x4c4e5b]['statusMessage'](_0xd32e69);}},Li=require(a0_0x5ca8c7(0x64c)),Us=require(a0_0x5ca8c7(0x69c)),Xt=class u{constructor(_0x50c6cc,_0x436cd,_0x1788e8){const _0x5084df=a0_0x5ca8c7;this[_0x5084df(0x588)]=_0x50c6cc,this[_0x5084df(0x13f)]=_0x436cd,this['repository']=_0x1788e8,this[_0x5084df(0x6c6)]=new $(u[_0x5084df(0x786)]);}async[a0_0x5ca8c7(0x2a4)](_0x2136d9){const _0x172387=a0_0x5ca8c7;let _0x3adbcb=this[_0x172387(0x588)][_0x172387(0x507)](_0x172387(0x166))['JWT'],_0x3fbbe6=(0x0,Li[_0x172387(0x69a)])({'instanceName':_0x2136d9[_0x172387(0x546)],'apiName':nt,'tokenId':(0x0,Us['v4'])()},_0x3adbcb['SECRET'],{'expiresIn':_0x3adbcb[_0x172387(0x3ca)],'encoding':'utf8','subject':'g-t'}),_0x52882f=await this[_0x172387(0x4b2)]['auth']['create']({'jwt':_0x3fbbe6},_0x2136d9[_0x172387(0x546)]);if(_0x52882f[_0x172387(0x73d)])throw this[_0x172387(0x6c6)][_0x172387(0x73d)]({'localError':u[_0x172387(0x786)]+_0x172387(0x5a1),'error':_0x52882f['error']}),new m('Authentication\x20error',_0x52882f[_0x172387(0x73d)]?.[_0x172387(0x30c)]());return{'jwt':_0x3fbbe6};}async[a0_0x5ca8c7(0x790)](_0x4e2b0c){const _0xbbea0a=a0_0x5ca8c7;let _0x3cba04=(0x0,Us['v4'])()[_0xbbea0a(0x442)](),_0x4adb9d=await this[_0xbbea0a(0x4b2)][_0xbbea0a(0x772)][_0xbbea0a(0x512)]({'apikey':_0x3cba04},_0x4e2b0c['instanceName']);if(_0x4adb9d['error'])throw this['logger'][_0xbbea0a(0x73d)]({'localError':u[_0xbbea0a(0x786)]+_0xbbea0a(0x5a1),'error':_0x4adb9d['error']}),new m(_0xbbea0a(0x700),_0x4adb9d[_0xbbea0a(0x73d)]?.[_0xbbea0a(0x30c)]());return{'apikey':_0x3cba04};}async[a0_0x5ca8c7(0x688)](_0x147f3c){const _0x4be1f7=a0_0x5ca8c7;let _0x1408a6=this[_0x4be1f7(0x588)][_0x4be1f7(0x507)](_0x4be1f7(0x166));return await this[_0x1408a6['TYPE']](_0x147f3c);}},Zt=class{constructor(_0x35ff1c){const _0x4a27e5=a0_0x5ca8c7;this[_0x4a27e5(0x13f)]=_0x35ff1c;}async['createGroup'](_0x4978f5,_0x432fb0){const _0x14a8d2=a0_0x5ca8c7;return await this['waMonitor'][_0x14a8d2(0x441)][_0x4978f5['instanceName']][_0x14a8d2(0x5e4)](_0x432fb0);}async[a0_0x5ca8c7(0x4ff)](_0x41d64b,_0x3e8cd1){const _0x14eacd=a0_0x5ca8c7;return await this[_0x14eacd(0x13f)][_0x14eacd(0x441)][_0x41d64b[_0x14eacd(0x546)]][_0x14eacd(0x4ff)](_0x3e8cd1);}async[a0_0x5ca8c7(0x17c)](_0x24ec53,_0x1e2b1b){const _0xf31d78=a0_0x5ca8c7;return await this[_0xf31d78(0x13f)][_0xf31d78(0x441)][_0x24ec53[_0xf31d78(0x546)]]['groupDesc'](_0x1e2b1b);}async[a0_0x5ca8c7(0x565)](_0x1acaf4,_0x1a72ab){const _0x42ced5=a0_0x5ca8c7;return await this[_0x42ced5(0x13f)]['waInstances'][_0x1acaf4[_0x42ced5(0x546)]][_0x42ced5(0x565)](_0x1a72ab);}async['groupBetterSetting'](_0x54c2e2,_0x4d28c8){const _0x4b2ba4=a0_0x5ca8c7;return await this['waMonitor'][_0x4b2ba4(0x441)][_0x54c2e2['instanceName']][_0x4b2ba4(0x1a7)](_0x4d28c8);}async[a0_0x5ca8c7(0x388)](_0x2a309e,_0x45fa9a){const _0x2d68d1=a0_0x5ca8c7;return await this[_0x2d68d1(0x13f)][_0x2d68d1(0x441)][_0x2a309e['instanceName']][_0x2d68d1(0x388)](_0x45fa9a);}async[a0_0x5ca8c7(0x2a9)](_0x3351e0,_0x97254d){const _0x113d5f=a0_0x5ca8c7;return await this[_0x113d5f(0x13f)]['waInstances'][_0x3351e0['instanceName']][_0x113d5f(0x6d5)](_0x97254d);}async[a0_0x5ca8c7(0x287)](_0x65d3a5){const _0x5d75d6=a0_0x5ca8c7;return await this[_0x5d75d6(0x13f)]['waInstances'][_0x65d3a5['instanceName']][_0x5d75d6(0x287)]();}async[a0_0x5ca8c7(0x5d6)](_0x124adc,_0x539f7a){const _0x211c8f=a0_0x5ca8c7;return await this[_0x211c8f(0x13f)][_0x211c8f(0x441)][_0x124adc['instanceName']][_0x211c8f(0x5d6)](_0x539f7a);}async['joinGroup'](_0x57e73d,_0x4c2ef9){const _0x401a09=a0_0x5ca8c7;return await this[_0x401a09(0x13f)]['waInstances'][_0x57e73d[_0x401a09(0x546)]][_0x401a09(0x24a)](_0x4c2ef9);}async[a0_0x5ca8c7(0x516)](_0x359cfe,_0x11e810){const _0x2f9cad=a0_0x5ca8c7;return await this[_0x2f9cad(0x13f)][_0x2f9cad(0x441)][_0x359cfe[_0x2f9cad(0x546)]]['groupGetInviteInfo'](_0x11e810);}async[a0_0x5ca8c7(0x731)](_0xf1e7f9,_0x23cd0e){const _0x177cd7=a0_0x5ca8c7;return await this[_0x177cd7(0x13f)][_0x177cd7(0x441)][_0xf1e7f9['instanceName']][_0x177cd7(0x731)](_0x23cd0e);}async[a0_0x5ca8c7(0x1e5)](_0x101dea,_0xb5e145){const _0x360364=a0_0x5ca8c7;return await this[_0x360364(0x13f)][_0x360364(0x441)][_0x101dea[_0x360364(0x546)]]['findParticipants'](_0xb5e145);}async[a0_0x5ca8c7(0x7cd)](_0x3dda4a,_0x5beb6f){const _0x6aea58=a0_0x5ca8c7;return await this[_0x6aea58(0x13f)][_0x6aea58(0x441)][_0x3dda4a['instanceName']][_0x6aea58(0xd7)](_0x5beb6f);}async[a0_0x5ca8c7(0x286)](_0xa3fad8,_0x225bf3){const _0x4e3920=a0_0x5ca8c7;return await this[_0x4e3920(0x13f)]['waInstances'][_0xa3fad8[_0x4e3920(0x546)]][_0x4e3920(0x286)](_0x225bf3);}async[a0_0x5ca8c7(0x27b)](_0x4b33be,_0x521bca){const _0x3b9df1=a0_0x5ca8c7;return await this['waMonitor'][_0x3b9df1(0x441)][_0x4b33be[_0x3b9df1(0x546)]][_0x3b9df1(0x27b)](_0x521bca);}},es=class{constructor(_0x20cec4){const _0x10f635=a0_0x5ca8c7;this[_0x10f635(0x13f)]=_0x20cec4;}[a0_0x5ca8c7(0x512)](_0x1ddfdd,_0x526a37){const _0x5bdbd2=a0_0x5ca8c7;return this[_0x5bdbd2(0x13f)][_0x5bdbd2(0x441)][_0x1ddfdd[_0x5bdbd2(0x546)]]['setWebhook'](_0x526a37);}async[a0_0x5ca8c7(0x509)](_0x167412){const _0x206a52=a0_0x5ca8c7;try{return await this['waMonitor'][_0x206a52(0x441)][_0x167412['instanceName']][_0x206a52(0x4f4)]();}catch{return{'enabled':null,'url':''};}}},Gp=new $(a0_0x5ca8c7(0x242)),ts=class{constructor(_0xb3d994){this['waMonitor']=_0xb3d994;}async[a0_0x5ca8c7(0x618)](_0x24b68d,_0x2016f1){const _0x424e2b=a0_0x5ca8c7;return await this['waMonitor']['waInstances'][_0x24b68d[_0x424e2b(0x546)]][_0x424e2b(0x618)](_0x2016f1);}async['getScheduleMessage'](_0x5cca54){const _0x1cd33c=a0_0x5ca8c7;return await this[_0x1cd33c(0x13f)]['waInstances'][_0x5cca54['instanceName']]['getScheduleMessage']();}async[a0_0x5ca8c7(0x6ed)](_0x5c1dfb){const _0x206aea=a0_0x5ca8c7;return await this[_0x206aea(0x13f)][_0x206aea(0x441)][_0x5c1dfb['instanceName']][_0x206aea(0x6ed)]();}async[a0_0x5ca8c7(0x280)](_0x416ff9){const _0xc29119=a0_0x5ca8c7;return await this['waMonitor'][_0xc29119(0x441)][_0x416ff9[_0xc29119(0x546)]][_0xc29119(0x280)]();}async[a0_0x5ca8c7(0x5a0)](_0x210f9d,_0x2438d9){const _0x3148da=a0_0x5ca8c7;return await this['waMonitor'][_0x3148da(0x441)][_0x210f9d[_0x3148da(0x546)]][_0x3148da(0x5a0)](_0x2438d9);}async[a0_0x5ca8c7(0x3d8)](_0x2121da,_0x50a7d6){const _0x62c6e=a0_0x5ca8c7;return await this[_0x62c6e(0x13f)][_0x62c6e(0x441)][_0x2121da[_0x62c6e(0x546)]][_0x62c6e(0x3d8)](_0x50a7d6);}async[a0_0x5ca8c7(0x53a)](_0x181bcd,_0x11448d){const _0x30a895=a0_0x5ca8c7;return await this['waMonitor'][_0x30a895(0x441)][_0x181bcd[_0x30a895(0x546)]][_0x30a895(0x53a)](_0x11448d);}async[a0_0x5ca8c7(0x277)](_0x2fdf0a,_0x2ba73b){const _0x5d3ead=a0_0x5ca8c7;return await this['waMonitor']['waInstances'][_0x2fdf0a[_0x5d3ead(0x546)]][_0x5d3ead(0x277)](_0x2ba73b);}async[a0_0x5ca8c7(0x702)](_0x54e82b,_0x14b7bd){const _0x33d6e4=a0_0x5ca8c7;return await this['waMonitor']['waInstances'][_0x54e82b[_0x33d6e4(0x546)]][_0x33d6e4(0x702)](_0x14b7bd);}async[a0_0x5ca8c7(0x3b9)](_0x1c2802,_0x2df921,_0x29c729,_0x2c5bc1){const _0x23a040=a0_0x5ca8c7;return await this[_0x23a040(0x13f)][_0x23a040(0x441)][_0x1c2802]['startFlowWebhook'](_0x2df921,_0x29c729,_0x2c5bc1);}async[a0_0x5ca8c7(0x16d)](_0x1a6ae3,_0x5eed78){const _0x57cbee=a0_0x5ca8c7;return await this[_0x57cbee(0x13f)][_0x57cbee(0x441)][_0x1a6ae3[_0x57cbee(0x546)]][_0x57cbee(0x16d)](_0x5eed78);}async[a0_0x5ca8c7(0x7f2)](_0x564f77,_0x2ebd86){const _0x4de081=a0_0x5ca8c7;return await this[_0x4de081(0x13f)][_0x4de081(0x441)][_0x564f77[_0x4de081(0x546)]]['fetchConversation'](_0x2ebd86);}async[a0_0x5ca8c7(0x524)](_0x5d600b,_0x307dbf){const _0x199d97=a0_0x5ca8c7;return await this[_0x199d97(0x13f)][_0x199d97(0x441)][_0x5d600b['instanceName']][_0x199d97(0x524)](_0x307dbf);}async[a0_0x5ca8c7(0xce)](_0x43769b,_0x47c3cc){const _0x4f8756=a0_0x5ca8c7;return await this[_0x4f8756(0x13f)]['waInstances'][_0x43769b[_0x4f8756(0x546)]][_0x4f8756(0xce)](_0x47c3cc);}async[a0_0x5ca8c7(0x172)](_0x2edb43,_0x24f144){const _0x281786=a0_0x5ca8c7;return await this[_0x281786(0x13f)][_0x281786(0x441)][_0x2edb43[_0x281786(0x546)]][_0x281786(0x172)](_0x24f144[_0x281786(0x6ae)]);}async[a0_0x5ca8c7(0x533)](_0x259e3e,_0x582dc0,_0x2449d4){const _0x2efc0d=a0_0x5ca8c7;return await this['waMonitor'][_0x2efc0d(0x441)][_0x259e3e[_0x2efc0d(0x546)]][_0x2efc0d(0x533)](_0x582dc0,_0x2449d4);}async[a0_0x5ca8c7(0x4fd)](_0x5a61db,_0x46502e,_0x68032b){const _0x541a6a=a0_0x5ca8c7;return await this[_0x541a6a(0x13f)][_0x541a6a(0x441)][_0x5a61db[_0x541a6a(0x546)]][_0x541a6a(0x4fd)](_0x46502e,_0x68032b);}async[a0_0x5ca8c7(0x29f)](_0x32b1a2,_0x9e9175){const _0x55536e=a0_0x5ca8c7;return await this['waMonitor'][_0x55536e(0x441)][_0x32b1a2[_0x55536e(0x546)]][_0x55536e(0x29f)](_0x9e9175);}async[a0_0x5ca8c7(0x40b)](_0x41e9b6,_0xfc8652){const _0x600de7=a0_0x5ca8c7;return await this['waMonitor']['waInstances'][_0x41e9b6[_0x600de7(0x546)]][_0x600de7(0x40b)](_0xfc8652);}async[a0_0x5ca8c7(0x173)](_0x3cc78d,_0x1cb589){const _0x5c1400=a0_0x5ca8c7;return await this['waMonitor'][_0x5c1400(0x441)][_0x3cc78d['instanceName']][_0x5c1400(0x173)](_0x1cb589);}async['editFlowCondition'](_0x1d0aab,_0x4fb76d){const _0x531517=a0_0x5ca8c7;return await this[_0x531517(0x13f)][_0x531517(0x441)][_0x1d0aab[_0x531517(0x546)]][_0x531517(0x39e)](_0x4fb76d);}async[a0_0x5ca8c7(0x6a9)](_0x1f3e39,_0x19f068){const _0x47f2dd=a0_0x5ca8c7;return await this[_0x47f2dd(0x13f)]['waInstances'][_0x1f3e39[_0x47f2dd(0x546)]][_0x47f2dd(0x6a9)](_0x19f068);}async[a0_0x5ca8c7(0x38f)](_0x10fe82,_0x389ab1){const _0x191f03=a0_0x5ca8c7;return await this[_0x191f03(0x13f)][_0x191f03(0x441)][_0x10fe82[_0x191f03(0x546)]]['editFlowVariable'](_0x389ab1);}async[a0_0x5ca8c7(0x449)](_0x3398a4,_0x537ce9){const _0x28a2fd=a0_0x5ca8c7;return await this[_0x28a2fd(0x13f)][_0x28a2fd(0x441)][_0x3398a4[_0x28a2fd(0x546)]][_0x28a2fd(0x449)](_0x537ce9);}async['allFlows'](_0xb24b5){const _0x31f326=a0_0x5ca8c7;return await this[_0x31f326(0x13f)]['waInstances'][_0xb24b5[_0x31f326(0x546)]][_0x31f326(0x3bf)]();}},ss=class{constructor(_0x2e7fe6){this['webhookService']=_0x2e7fe6;}async['createWebhook'](_0xc2a8fb,_0xdc5f23){const _0x73aa3=a0_0x5ca8c7;return this['webhookService'][_0x73aa3(0x512)](_0xc2a8fb,_0xdc5f23);}async['findWebhook'](_0x5e83ed){const _0x5b2799=a0_0x5ca8c7;return this[_0x5b2799(0x3f8)][_0x5b2799(0x509)](_0x5e83ed);}},as=class extends O{constructor(_0x94c6fd,_0x961dc4){const _0x53d7e0=a0_0x5ca8c7;super(_0x961dc4),this[_0x53d7e0(0x7f5)]=_0x94c6fd,this[_0x53d7e0(0x588)]=_0x961dc4;}async['create'](_0x677379,_0x4888d6){const _0xd2a4f=a0_0x5ca8c7;try{return this[_0xd2a4f(0x3b6)]['ENABLED']?{'insertCount':(await this[_0xd2a4f(0x7f5)][_0xd2a4f(0x424)]({'_id':_0x4888d6},{..._0x677379},{'upsert':!0x0}))[_0xd2a4f(0x7b8)]}:{'insertCount':0x1};}catch(_0x599b8d){return _0x599b8d;}}async['delete'](_0x1262d5){const _0x330792=a0_0x5ca8c7;try{if(this[_0x330792(0x3b6)][_0x330792(0x4b7)]){await this[_0x330792(0x7f5)]['deleteOne']({'_id':_0x1262d5});return;}}catch(_0x1731d3){return{'error':_0x1731d3};}}async[a0_0x5ca8c7(0x509)](_0x287ed8){const _0x539b43=a0_0x5ca8c7;try{if(this['dbSettings'][_0x539b43(0x4b7)])return await this['webhookModel'][_0x539b43(0x51f)]({'_id':_0x287ed8});}catch{return{};}}},is=class extends O{constructor(_0x2b5705,_0x4f762c){const _0x23a04d=a0_0x5ca8c7;super(_0x4f762c),this[_0x23a04d(0x80b)]=_0x2b5705,this['configService']=_0x4f762c,this[_0x23a04d(0x772)]=_0x4f762c[_0x23a04d(0x507)]('AUTHENTICATION');}async['create'](_0x5e7116,_0x35cc9b){const _0x21e8ee=a0_0x5ca8c7;try{if(this['dbSettings'][_0x21e8ee(0x4b7)])return{'insertCount':(await this[_0x21e8ee(0x80b)][_0x21e8ee(0x127)]({'_id':_0x35cc9b},{'$set':{..._0x5e7116}},{'upsert':!0x0}))[_0x21e8ee(0x7b8)]};}catch(_0x4f7824){return{'error':_0x4f7824};}}async[a0_0x5ca8c7(0x6bc)](_0x363e0a,_0x15a62f){const _0x1cc153=a0_0x5ca8c7;try{if(this['dbSettings'][_0x1cc153(0x4b7)])return{'insertCount':(await this[_0x1cc153(0x80b)][_0x1cc153(0x466)](_0x363e0a,{'$set':_0x15a62f},{'upsert':!0x1}))[_0x1cc153(0x7b8)]};throw new Error('Database\x20is\x20not\x20enabled');}catch(_0x149686){return{'error':_0x149686};}}async[a0_0x5ca8c7(0x15a)](_0x39742f){const _0x4d6ade=a0_0x5ca8c7;try{if(this[_0x4d6ade(0x3b6)][_0x4d6ade(0x4b7)])return{'insertCount':(await this['authModel'][_0x4d6ade(0x15a)](_0x39742f))['deletedCount']};throw new Error(_0x4d6ade(0x44f));}catch(_0x39066a){return{'error':_0x39066a};}}async[a0_0x5ca8c7(0x5e3)](_0x596c33){const _0x2a4167=a0_0x5ca8c7;try{if(this[_0x2a4167(0x3b6)][_0x2a4167(0x4b7)]){await this[_0x2a4167(0x80b)]['deleteOne']({'_id':_0x596c33});return;}}catch(_0x10f55f){return{'error':_0x10f55f};}}async[a0_0x5ca8c7(0x509)](_0x561ef2){const _0x141903=a0_0x5ca8c7;try{if(this['dbSettings'][_0x141903(0x4b7)])return await this[_0x141903(0x80b)][_0x141903(0x51f)]({'_id':_0x561ef2});}catch{return{};}}async[a0_0x5ca8c7(0x6c8)](){const _0x585dac=a0_0x5ca8c7;try{if(this[_0x585dac(0x3b6)][_0x585dac(0x4b7)])return await this[_0x585dac(0x80b)]['find']();}catch{return[];}}async[a0_0x5ca8c7(0x31e)](_0x4d2dd8){const _0x18b18c=a0_0x5ca8c7;try{if(this[_0x18b18c(0x3b6)][_0x18b18c(0x4b7)])return await this[_0x18b18c(0x80b)][_0x18b18c(0x509)](_0x4d2dd8);}catch{return[];}}},os=class extends O{async[a0_0x5ca8c7(0x504)](_0x558742){const _0x2910a6=a0_0x5ca8c7;try{let _0x42b423=T(_0x558742[_0x2910a6(0x73a)]);return{'deletedCount':(await Ee[_0x2910a6(0x504)](_0x42b423))[_0x2910a6(0x51b)]};}catch(_0x164b92){return{'error':_0x164b92?.[_0x2910a6(0x30c)]()};}}async[a0_0x5ca8c7(0x127)](_0x56ef34,_0x2b8c01){const _0x52e99e=a0_0x5ca8c7;try{let _0x55e468=await Ee[_0x52e99e(0x46a)](_0x56ef34);return _0x55e468?(Object[_0x52e99e(0x14c)](_0x55e468,_0x2b8c01),await _0x55e468[_0x52e99e(0x3c4)]()):(console[_0x52e99e(0x73d)](_0x52e99e(0x13a),_0x56ef34),null);}catch(_0x269d88){return console[_0x52e99e(0x73d)]('Erro\x20ao\x20atualizar\x20o\x20fluxo:',_0x269d88),null;}}async['createAndSave'](_0x42234a){const _0x573063=a0_0x5ca8c7;try{return await new Ee(_0x42234a)[_0x573063(0x3c4)]();}catch(_0x3fd826){return console[_0x573063(0x73d)]('Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:',_0x3fd826),null;}}async[a0_0x5ca8c7(0x6c8)](_0x16aec7){const _0x79b27d=a0_0x5ca8c7;try{let _0x4ab559=_0x16aec7[_0x79b27d(0x73a)]??{};return await Ee[_0x79b27d(0x509)](_0x4ab559)[_0x79b27d(0x710)](_0x16aec7[_0x79b27d(0x710)]??0x0)[_0x79b27d(0x38d)]();}catch(_0x4ec284){return console[_0x79b27d(0x73d)](_0x79b27d(0x234),_0x4ec284),[];}}async[a0_0x5ca8c7(0x51f)](_0x3509f3){const _0x5f3de7=a0_0x5ca8c7;try{let _0x5ded90=T(_0x3509f3[_0x5f3de7(0x73a)]);return await Ee[_0x5f3de7(0x51f)](_0x5ded90)['lean']();}catch{return null;}}},rs=class extends O{[a0_0x5ca8c7(0x3f7)](_0x3a5109){return Ma(_0x3a5109);}async[a0_0x5ca8c7(0x29c)](_0x5446c4){const _0x2e09d5=a0_0x5ca8c7;if(_0x5446c4['length']!==0x0)try{return{'insertCount':(await this[_0x2e09d5(0x3f7)](_0x5446c4[0x0][_0x2e09d5(0x756)])['insertMany']([..._0x5446c4]))[_0x2e09d5(0x293)]};}catch(_0x5142de){return _0x5142de;}}async[a0_0x5ca8c7(0x5e3)](_0x2858e7,_0xc99b3b){const _0x5cf3a1=a0_0x5ca8c7;try{let _0x703e9=this[_0x5cf3a1(0x3f7)](_0xc99b3b),_0x291157=T(_0x2858e7[_0x5cf3a1(0x73a)]);return{'deletedCount':(await _0x703e9['deleteMany'](_0x291157))[_0x5cf3a1(0x51b)]};}catch(_0x29cf2e){return{'error':_0x29cf2e?.[_0x5cf3a1(0x30c)]()};}}async[a0_0x5ca8c7(0x504)](_0x5a6a1d,_0x387c97){const _0x450855=a0_0x5ca8c7;try{let _0x5e66e9=this[_0x450855(0x3f7)](_0x387c97),_0x4024b0=T(_0x5a6a1d[_0x450855(0x73a)]);return{'deletedCount':(await _0x5e66e9['deleteOne'](_0x4024b0))[_0x450855(0x51b)]};}catch(_0x1abace){return{'error':_0x1abace?.[_0x450855(0x30c)]()};}}async[a0_0x5ca8c7(0x13d)](_0x89f3d7,_0x4f0997){const _0x295cbf=a0_0x5ca8c7;try{if(_0x89f3d7[_0x295cbf(0x293)]===0x0)return;let _0x4dddaf=this['getConversationModelForOwner'](_0x4f0997),_0x554b5c=_0x89f3d7[_0x295cbf(0x726)](_0x5836cf=>({'updateOne':{'filter':{'name':_0x5836cf[_0x295cbf(0x786)],'owner':_0x4f0997},'update':{..._0x5836cf}}})),{modifiedCount:_0x6d0e62}=await _0x4dddaf['bulkWrite'](_0x554b5c);return{'insertCount':_0x6d0e62};}catch{return;}}async[a0_0x5ca8c7(0x466)](_0x2f68c2,_0x139111,_0x10913a){const _0x3bd97f=a0_0x5ca8c7;try{return{'modifiedCount':(await this[_0x3bd97f(0x3f7)](_0x10913a)[_0x3bd97f(0x466)](_0x2f68c2,{'$set':_0x139111})[_0x3bd97f(0x555)]())[_0x3bd97f(0x7b8)]};}catch(_0x321870){return console['error'](_0x3bd97f(0x590),_0x321870),{'error':_0x321870};}}async[a0_0x5ca8c7(0x127)](_0x9e7968,_0x23890d,_0xaff251){const _0x14dd7b=a0_0x5ca8c7;try{return await this['getConversationModelForOwner'](_0xaff251)[_0x14dd7b(0xd4)]({'_id':_0x9e7968},{'$set':_0x23890d},{'new':!0x0,'upsert':!0x0})[_0x14dd7b(0x38d)]();}catch(_0x5008a4){return console['error'](_0x5008a4),null;}}async['find'](_0x4c0a92,_0x4e82ae){const _0xeea857=a0_0x5ca8c7;try{return await this[_0xeea857(0x3f7)](_0x4e82ae)[_0xeea857(0x509)](_0x4c0a92)['sort']({'lastInteraction':-0x1})[_0xeea857(0x38d)]();}catch{return[];}}async[a0_0x5ca8c7(0x51f)](_0x2b48c6,_0x1e21e7){const _0x2973d4=a0_0x5ca8c7;try{return await this[_0x2973d4(0x3f7)](_0x1e21e7)[_0x2973d4(0x51f)]({..._0x2b48c6['where']})[_0x2973d4(0x38d)]();}catch{return null;}}async[a0_0x5ca8c7(0x329)](_0x506b82){const _0x3284f7=a0_0x5ca8c7;try{return await this['getConversationModelForOwner'](_0x506b82)['collection'][_0x3284f7(0x78f)](),{'success':!0x0};}catch(_0x23d904){return console['error'](_0x23d904),{'success':!0x1,'error':_0x23d904};}}},ns=class extends O{[a0_0x5ca8c7(0x1b3)](_0x172bee){return Ca(_0x172bee);}async[a0_0x5ca8c7(0x48e)](_0x2689ed,_0x36b540){const _0x4389d5=a0_0x5ca8c7;try{return await this['getScheduleMessageModelForOwner'](_0x36b540)[_0x4389d5(0x48e)](_0x2689ed);}catch(_0x4d002e){return console[_0x4389d5(0x73d)](_0x4389d5(0x730),_0x4d002e),null;}}async['createAndSave'](_0xd91c68,_0x3a6f16){const _0x256480=a0_0x5ca8c7;try{let _0x12c23b=this[_0x256480(0x1b3)](_0x3a6f16);return await new _0x12c23b(_0xd91c68)[_0x256480(0x3c4)]();}catch(_0x16b86f){return console[_0x256480(0x73d)](_0x256480(0x7de),_0x16b86f),null;}}async['deleteOne'](_0x5dbbe4,_0x31cd00){const _0x3e7413=a0_0x5ca8c7;try{return await this[_0x3e7413(0x1b3)](_0x31cd00)[_0x3e7413(0x45d)](_0x5dbbe4),{};}catch(_0x272c87){return{'error':_0x272c87?.[_0x3e7413(0x30c)]()};}}async[a0_0x5ca8c7(0x127)](_0x5f53ab,_0x31b509,_0x1e2297,_0x2de1d0={}){const _0x1daefb=a0_0x5ca8c7;try{return await this[_0x1daefb(0x1b3)](_0x1e2297)[_0x1daefb(0xd4)](_0x5f53ab,_0x31b509,{..._0x2de1d0,'new':!0x0})[_0x1daefb(0x38d)]();}catch(_0x3757f8){return console[_0x1daefb(0x73d)](_0x1daefb(0x5b6),_0x3757f8),null;}}async[a0_0x5ca8c7(0x7fe)](_0x404edf,_0x1e03e1,_0x58937e){const _0x2862a2=a0_0x5ca8c7;try{return await this[_0x2862a2(0x1b3)](_0x58937e)[_0x2862a2(0x14f)](_0x404edf,_0x1e03e1,{'new':!0x0})['lean']();}catch(_0x23e398){return console[_0x2862a2(0x73d)](_0x2862a2(0x5b6),_0x23e398),null;}}async['find'](_0x3bf24b,_0x3e94c5){const _0x2334ed=a0_0x5ca8c7;try{return await this['getScheduleMessageModelForOwner'](_0x3e94c5)['find'](_0x3bf24b[_0x2334ed(0x73a)])[_0x2334ed(0x710)](_0x3bf24b?.[_0x2334ed(0x710)]??0x0)[_0x2334ed(0x28e)]({'when':0x1})[_0x2334ed(0x38d)]();}catch{return[];}}async[a0_0x5ca8c7(0x51f)](_0x35aa44,_0x476fb0){const _0xd72896=a0_0x5ca8c7;try{return await this[_0xd72896(0x1b3)](_0x476fb0)['findOne'](_0x35aa44[_0xd72896(0x73a)])[_0xd72896(0x28e)]({'when':0x1})[_0xd72896(0x38d)]();}catch{return null;}}async[a0_0x5ca8c7(0x46a)](_0x2b6324,_0x9ed350){const _0x1df531=a0_0x5ca8c7;try{return await this[_0x1df531(0x1b3)](_0x9ed350)['findById'](_0x2b6324)[_0x1df531(0x38d)]();}catch{return null;}}async['deleteMany'](_0x3c0e4e,_0x403d8e){const _0x204b3d=a0_0x5ca8c7;try{return{'deletedCount':(await this[_0x204b3d(0x1b3)](_0x403d8e)[_0x204b3d(0x15a)](_0x3c0e4e))[_0x204b3d(0x51b)]};}catch(_0xddfd1){return console[_0x204b3d(0x73d)]('Erro\x20ao\x20deletar\x20mensagens:',_0xddfd1),{'error':_0xddfd1};}}async[a0_0x5ca8c7(0x329)](_0x33a5ef){const _0x5eb4f4=a0_0x5ca8c7;try{return await this[_0x5eb4f4(0x1b3)](_0x33a5ef)[_0x5eb4f4(0x733)][_0x5eb4f4(0x78f)](),{'success':!0x0};}catch(_0x336cce){return console[_0x5eb4f4(0x73d)](_0x336cce),{'success':!0x1,'error':_0x336cce};}}},cs=class extends O{async[a0_0x5ca8c7(0x13d)](_0x418e7a,_0x12bf8b){const _0x4d6dc6=a0_0x5ca8c7;try{if(this[_0x4d6dc6(0x3b6)][_0x4d6dc6(0x4b7)])return await Te[_0x4d6dc6(0xd4)]({'_id':_0x12bf8b},{'$set':_0x418e7a},{'new':!0x0});}catch(_0x22ceb6){throw console[_0x4d6dc6(0x73d)](_0x4d6dc6(0x41f),_0x22ceb6),_0x22ceb6;}}async[a0_0x5ca8c7(0x30a)](_0x156273){const _0x985a04=a0_0x5ca8c7;try{let _0x35895c=await Te[_0x985a04(0x46a)](_0x156273);return _0x35895c?_0x35895c[_0x985a04(0x433)]||(_0x35895c['autoCompleteMessages']=[],await _0x35895c[_0x985a04(0x3c4)]()):(_0x35895c=new Te({'_id':_0x156273,'autoCompleteMessages':[]}),await _0x35895c[_0x985a04(0x3c4)]()),_0x35895c;}catch(_0x44701e){return _0x44701e[_0x985a04(0xcb)]===0x2af8&&_0x44701e['keyPattern']&&_0x44701e[_0x985a04(0x7a9)]['autoCompleteMessages.command']?(console[_0x985a04(0x73d)](_0x985a04(0x1e8)),await Te[_0x985a04(0x733)]['dropIndex'](_0x985a04(0x627)),null):(console[_0x985a04(0x73d)]('Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:',_0x44701e),null);}}},qo=new $('WA\x20MODULE'),Vo=new Xe(S),Go=new Bt(S),Bo=new lt(S),Wo=new Wt(ra,S),zo=new as(ga,S),Ho=new is(da,S),Ko=new $e(He,S),Qo=new os(S),Yo=new zt(S),Xo=new rs(S),Zo=new ns(S),er=new cs(S),ye=new Qe(Vo,Go,Bo,Wo,zo,Ho,Ko,Qo,Xo,Yo,Zo,er,I?.[a0_0x5ca8c7(0x16f)]()),z=new Gt(ms,S,ye),tr=new Xt(S,z,ye),sr=new es(z),Is=new ss(sr),_=new ts(z),ge=new Qt(z,S,ye,ms,tr),H=new Yt(z),k=new Ht(z),B=new Zt(z);qo[a0_0x5ca8c7(0x611)]('Module\x20-\x20ON');var ng=require(a0_0x5ca8c7(0x5ea)),js=require('fs'),Fi=A(require(a0_0x5ca8c7(0x6f7))),Ui=A(require('http')),je=class u{static #e;static set[a0_0x5ca8c7(0xc7)](_0x157ca0){this.#e=_0x157ca0;}static get['https'](){const _0xeab98e=a0_0x5ca8c7;let {FULLCHAIN:_0x562a5e,PRIVKEY:_0x2f8231}=S[_0xeab98e(0x507)]('SSL_CONF');return Fi[_0xeab98e(0x2b6)]({'cert':(0x0,js[_0xeab98e(0x1f9)])(_0x562a5e),'key':(0x0,js[_0xeab98e(0x1f9)])(_0x2f8231)},u.#e);}static get[a0_0x5ca8c7(0x44c)](){const _0x5412ba=a0_0x5ca8c7;return Ui[_0x5412ba(0x2b6)](u.#e);}},Je=A(require('fs')),Bi=A(require(a0_0x5ca8c7(0x117))),qe=A(require(a0_0x5ca8c7(0x72e))),us=A(require(a0_0x5ca8c7(0x2d9))),ls=require(a0_0x5ca8c7(0x3d3));function ar(){const _0x1525d2=a0_0x5ca8c7;z[_0x1525d2(0x132)]();let _0x2c4102=us[_0x1525d2(0x180)][_0x1525d2(0x363)](__dirname,_0x1525d2(0x27a));Gi(_0x2c4102);}var Gi=_0x52665f=>{const _0x5643be=a0_0x5ca8c7;let _0x39d0e2=Je[_0x5643be(0x180)][_0x5643be(0x817)](_0x52665f),_0x4f3706=0xc*0x3c*0x3c*0x3e8,_0x1eeb0d=0x2*0x3c*0x3c*0x3e8,_0xb1665b=new Date()[_0x5643be(0x51c)]();_0x39d0e2[_0x5643be(0x57a)](_0x16fe77=>{const _0x2dc081=_0x5643be;let _0x43c921=us[_0x2dc081(0x180)][_0x2dc081(0x363)](_0x52665f,_0x16fe77),_0x1e9f6f=Je[_0x2dc081(0x180)][_0x2dc081(0x50a)](_0x43c921)[_0x2dc081(0x427)]['getTime']();_0xb1665b-_0x1e9f6f>_0x4f3706&&(Je[_0x2dc081(0x180)]['unlinkSync'](_0x43c921),console[_0x2dc081(0x5df)](_0x2dc081(0x375)+_0x16fe77));}),setTimeout(()=>Gi(_0x52665f),_0x1eeb0d);};function ir(){const _0x2edaf7=a0_0x5ca8c7;let _0xcb4868=new $(_0x2edaf7(0x390)),_0x342160=(0x0,Se['default'])();_0x342160[_0x2edaf7(0x451)]((0x0,Vi['default'])({'origin'(_0x24b4b7,_0x53a085){const _0x31dc53=_0x2edaf7;let {ORIGIN:_0x38f6b2}=S[_0x31dc53(0x507)](_0x31dc53(0x6e8));return _0x24b4b7||(_0x24b4b7='*'),_0x38f6b2[_0x31dc53(0x2fc)]('*')!==-0x1||_0x38f6b2['indexOf'](_0x24b4b7)!==-0x1?_0x53a085(null,!0x0):_0x53a085(new Error(_0x31dc53(0x10c)));},'methods':[...S[_0x2edaf7(0x507)]('CORS')[_0x2edaf7(0x49d)]],'credentials':S['get']('CORS')[_0x2edaf7(0x145)]}),(0x0,Se['urlencoded'])({'extended':!0x0,'limit':_0x2edaf7(0x54d)}),(0x0,Se[_0x2edaf7(0x805)])({'limit':_0x2edaf7(0x54d)})),_0x342160[_0x2edaf7(0x451)]((_0xfdc044,_0x58b8c5,_0x4cf026)=>{const _0x527f53=_0x2edaf7;_0xfdc044[_0x527f53(0x2d9)][_0x527f53(0x43f)](_0x527f53(0x537))?_0x4cf026():(0x0,qi[_0x527f53(0x180)])()(_0xfdc044,_0x58b8c5,_0x4cf026);}),_0x342160['set'](_0x2edaf7(0x81b),_0x2edaf7(0x750)),_0x342160['set'](_0x2edaf7(0x3bc),(0x0,qs[_0x2edaf7(0x363)])(de,_0x2edaf7(0x3bc))),_0x342160[_0x2edaf7(0x451)](Se[_0x2edaf7(0x180)][_0x2edaf7(0x2dc)]((0x0,qs['join'])(de,'public'))),_0x342160[_0x2edaf7(0x451)]((_0x98f3f6,_0x5bae01,_0x4555ab)=>{const _0x28feb9=_0x2edaf7;let _0x491ac7=_0x5bae01['send'];_0x5bae01[_0x28feb9(0x4d1)]=function(_0x40f2f3){const _0x1ca2d5=_0x28feb9;if(_0x98f3f6['query'][_0x1ca2d5(0x15e)]==='true'||_0x98f3f6[_0x1ca2d5(0x4b8)][_0x1ca2d5(0x13b)]===_0x1ca2d5(0x29e)){let _0x3e5397=JSON['parse'](_0x40f2f3);_0x40f2f3=JSON[_0x1ca2d5(0x79e)](_0x480c6e(_0x3e5397));}return _0x491ac7[_0x1ca2d5(0x155)](_0x5bae01,[_0x40f2f3]);},_0x4555ab();}),_0x342160['use']('/',Le),_0x342160[_0x2edaf7(0x451)]((_0x474b54,_0x385bdc,_0x444e6f,_0x375822)=>{const _0x30ed83=_0x2edaf7;if(_0x474b54)return _0x444e6f[_0x30ed83(0x3e2)](_0x474b54['status']||0x1f4)['json'](_0x474b54);},(_0x1685c4,_0x14db1b,_0x37c62a)=>{const _0x4a5229=_0x2edaf7;let {method:_0x2951e8,url:_0x190bf4}=_0x1685c4;_0x14db1b[_0x4a5229(0x3e2)](0x194)[_0x4a5229(0x805)]({'status':0x194,'message':_0x4a5229(0x58f)+_0x2951e8[_0x4a5229(0x442)]()+'\x20'+_0x190bf4,'error':_0x4a5229(0x48a)}),_0x37c62a();});let _0x480c6e=(_0x49dc45,_0x2de80b='_p_')=>{const _0x25717c=_0x2edaf7;let _0x307aa0=(_0x18d355,_0x595c8b=null,_0x555ea4=!0x1)=>{const _0x7b9667=a0_0x5cfa;let _0x306dab={};return Object[_0x7b9667(0x818)](_0x18d355)[_0x7b9667(0x57a)](_0x20c6c8=>{const _0xf34b7e=_0x7b9667;let _0x2d1a91=_0x18d355[_0x20c6c8],_0x5ea843=''+_0x2de80b+_0x20c6c8;_0x595c8b&&!_0x555ea4&&(_0x5ea843=_0x595c8b+'.'+_0x20c6c8),!_0x2d1a91&&_0x2d1a91!==0x0&&_0x2d1a91!==!0x1||typeof _0x2d1a91>'u'?_0x306dab[_0x5ea843]=null:typeof _0x2d1a91!='object'&&!Array['isArray'](_0x2d1a91)?_0x306dab[_0x5ea843]=_0x2d1a91:typeof _0x2d1a91=='object'&&!Array['isArray'](_0x2d1a91)?_0x306dab=Object[_0xf34b7e(0x14c)](_0x306dab,_0x307aa0(_0x2d1a91,_0x5ea843)):Array[_0xf34b7e(0xdc)](_0x2d1a91)&&(typeof _0x2d1a91[0x0]==_0xf34b7e(0x4c4)?(_0x306dab[_0x5ea843]=[],_0x2d1a91[_0xf34b7e(0x57a)](_0x31eafe=>{const _0x53b53f=_0xf34b7e;_0x306dab[_0x5ea843][_0x53b53f(0x7cb)](_0x307aa0(_0x31eafe,_0x5ea843,!0x0));})):_0x306dab[_0x5ea843]=_0x2d1a91);}),_0x306dab;};return Array['isArray'](_0x49dc45)?_0x49dc45[_0x25717c(0x726)](_0x2d81a6=>_0x307aa0(_0x2d81a6)):typeof _0x49dc45==_0x25717c(0x4c4)&&_0x49dc45!==null?_0x307aa0(_0x49dc45):{};},_0x341047=S[_0x2edaf7(0x507)](_0x2edaf7(0x390));je[_0x2edaf7(0xc7)]=_0x342160;let _0x2653a1=je[_0x341047[_0x2edaf7(0x25b)]],_0x5bac52='\x0a\x0a\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20';_0x2653a1[_0x2edaf7(0x435)](_0x341047[_0x2edaf7(0x685)],()=>{const _0x4056d4=_0x2edaf7;_0xcb4868[_0x4056d4(0x5df)](_0x5bac52),_0xcb4868[_0x4056d4(0x5df)](_0x341047[_0x4056d4(0x25b)][_0x4056d4(0x442)]()+_0x4056d4(0x171)+_0x341047['PORT']);}),ar(),ea();}var or=a0_0x5ca8c7(0x528),rr=us['default'][a0_0x5ca8c7(0x363)](__dirname,a0_0x5ca8c7(0x794)),Ie=null;function nr(){return new Promise((_0x1c1c3f,_0x105fb2)=>{const _0x227be5=a0_0x5cfa;Je[_0x227be5(0x180)][_0x227be5(0x3e9)](rr,_0x227be5(0x38e),(_0x53ea55,_0x13834d)=>{const _0x4bbf6e=_0x227be5;if(_0x53ea55){Ie=_0x53ea55,_0x1c1c3f();return;}Bi[_0x4bbf6e(0x180)][_0x4bbf6e(0x27e)](_0x13834d)['remote\x20\x22origin\x22'][_0x4bbf6e(0x123)]===or?(Ie=null,_0x1c1c3f()):(Ie=new Error(_0x4bbf6e(0x474)),_0x1c1c3f());});});}async function cr(){const _0x5c7c44=a0_0x5ca8c7;try{await nr(),await Vs();}catch(_0x495bcd){console[_0x5c7c44(0x73d)](_0x5c7c44(0x480)+_0x495bcd),process['exit'](0x1);}}cr();async function Wi(){const _0x16b52e=a0_0x5ca8c7;let _0xdb6efe;try{_0xdb6efe=(await qe[_0x16b52e(0x180)][_0x16b52e(0x507)](_0x16b52e(0x2f8)))['data']['ip'];}catch(_0x4f8ed4){console[_0x16b52e(0x73d)](_0x4f8ed4);try{_0xdb6efe=(await qe[_0x16b52e(0x180)][_0x16b52e(0x507)]('https://api.ipify.org?format=json'))['data']['ip'];}catch(_0x34bcb7){console[_0x16b52e(0x73d)](_0x34bcb7);try{_0xdb6efe=(await qe[_0x16b52e(0x180)][_0x16b52e(0x507)](_0x16b52e(0x4e4)))[_0x16b52e(0x725)][_0x16b52e(0x33d)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x1c6d38){return console[_0x16b52e(0x73d)](_0x1c6d38),!0x1;}}}return _0xdb6efe;}var ji=0x0;async function lr(){const _0x1a6f55=a0_0x5ca8c7;let _0x14112d=await new me(S['get'](_0x1a6f55(0x3ad)))[_0x1a6f55(0x5e5)]();return console[_0x1a6f55(0x5df)](_0x1a6f55(0x812),_0x14112d[_0x1a6f55(0x293)]),_0x14112d[_0x1a6f55(0x293)];}function ur(_0x36dcc6){const _0x41d0ac=a0_0x5ca8c7;let _0x258a84=_0x36dcc6[_0x41d0ac(0x507)]('SERVER')[_0x41d0ac(0x406)],_0x1f13ef=_0x36dcc6['get'](_0x41d0ac(0x2ad));console[_0x41d0ac(0x5df)](_0x41d0ac(0x558),_0x258a84),console[_0x41d0ac(0x5df)](_0x41d0ac(0xf1),_0x1f13ef);let _0x488639='',_0x29b553=_0x258a84||'';if(_0x258a84){let _0xe1fb00=_0x258a84[_0x41d0ac(0x33d)](/\/\/(.*?)\./);console[_0x41d0ac(0x5df)](_0x41d0ac(0x633),_0xe1fb00),_0xe1fb00&&_0xe1fb00[0x1]&&(_0x488639=_0xe1fb00[0x1],console[_0x41d0ac(0x5df)](_0x41d0ac(0x102),_0x488639));}if(!_0x488639&&_0x1f13ef&&_0x1f13ef[_0x41d0ac(0x6fc)]){let _0x4ecf0f=_0x1f13ef[_0x41d0ac(0x6fc)][_0x41d0ac(0x42a)]('/');console[_0x41d0ac(0x5df)](_0x41d0ac(0x1e1),_0x4ecf0f);let _0x16dbcb=_0x4ecf0f[_0x4ecf0f[_0x41d0ac(0x293)]-0x2];if(console['log']('Parte\x20do\x20domnio\x20do\x20caminho\x20FULLCHAIN:',_0x16dbcb),_0x16dbcb){let _0x389fa2=_0x16dbcb[_0x41d0ac(0x42a)]('.');console[_0x41d0ac(0x5df)](_0x41d0ac(0x5dc),_0x389fa2),_0x389fa2['length']>0x2&&(_0x488639=_0x389fa2[0x0],console[_0x41d0ac(0x5df)](_0x41d0ac(0x72b),_0x488639),_0x29b553=''+_0x16dbcb);}}return{'subdomain':_0x488639||_0x41d0ac(0x732),'fullURL':_0x29b553||_0x41d0ac(0x62c)};}function a0_0x1091(){const _0x536fd5=['sendWhatsAppAudio','setHeader','fullName','processUUID','padStart','last_update','makeCacheableSignalKeyStore','creds','keyPattern','):\x20Conversa\x20inserida\x20com\x20sucesso.','basename','buttonText','textMessage','realVariables','convertaudioMP3','unknown\x20operation\x20type\x20[','\x27\x20removido\x20do\x20AutomateSystem.','processConditionsTest','contextInfo','):\x20Buscando\x20flow...','):Image\x20is\x20base64','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','string','modifiedCount','.mimetype','messaging-history.set','requestFile','createAndSave','):\x20Adicionando\x20\x27','optionName','count',',\x20Segundo\x20Valor:\x20','Incio','Schema','.url','):\x20\x27Enviando\x20mdia\x20para\x20\x27','URL\x20completa:','saveConversationToDatabase','toLowerCase','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','messageContextInfo','presence.update','push','):\x20Editando\x20condio\x20do\x20fluxo...','updateGParticipate','oldValue','Type\x20not\x20found','\x1b[47m','#d8e651','Por\x20favor,\x20responda\x20\x20ltima\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opes\x20disponveis,\x20sem\x20digitar\x20sua\x20resposta.','Valor\x20inicial:\x20\x22','getLabelModelForOwner','Safari','success','STATUS_INSTANCE','vote','CLEANING_INTERVAL','):\x20Mensagem\x20j\x20enviada\x20para\x20','/clients-info','):Delete\x20chat','Unauthorized','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','defineAuthState','\x1b[1m\x1b[37m','Group\x20not\x20found','):\x20sender\x20=\x20number:\x20','PREFIX_KEY','sendPoll','pollErrorMessage','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio.','store','messageSecret','Error\x20adding\x20IPv6\x20address:\x20','No\x20\x20possvel\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.',',\x20canSendMessage:\x20','Erro\x20ao\x20editar\x20varivel\x20do\x20fluxo','mediaSticker','arrayUnique','contacts','/media/','warn','fetchConversation',',\x20pairCode:\x20','backgroundColor','webhookModel','editMessagesInGroup','values','Erro\x20ao\x20buscar\x20a\x20conversa','\x20no\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','\x1b[32m','Configured\x20IPv6:\x20','Erro\x20ao\x20alterar\x20fluxo','HOST','updateOneById','checkAndRestartProcess','isAdmin','jid','importChatsAntigo','latitude','No\x20\x20permitido\x20deletar\x20o\x20bloco\x20padro','json','Varivel\x20no\x20encontrada!','initAuthCreds','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','.\x20Aguardando\x20','trim','authModel','slice','connectionClosed','@ffmpeg-installer/ffmpeg','getflow','):\x20Criou\x20conversa\x20no\x20startFlow','LICENSE_INVALID','instancias:\x20','valid','Chat\x20no\x20existe,\x20use\x20a\x20funo\x20de\x20importar\x20para\x20cri-lo','stopMinutes','connection.update','readdirSync','keys','stderr','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mdia:\x20','view\x20engine','isCommunityAnnounce','mongoose','API\x20Key\x20invlida\x20ou\x20instncia\x20no\x20encontrada.',']\x20(','app','moreLogs','etiquetas','ObjectId','code','-instances','fetchLatestBaileysVersion','deleteConversation','):\x20Alterando\x20fluxo...','saveChatVariables',',\x20isAdmin:\x20','processApiRequest','updateChatGroupData','findOneAndUpdate','chat\x20no\x20encontrado','StartBot','updateGParticipant','rm\x20-rf\x20','/startFlow/:instance/:startID','.extension','Erro\x20ao\x20substituir\x20variveis\x20para\x20','isArray','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','variablesNotFound','Falha\x20ao\x20processar\x20a\x20solicitao\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','#fe9dfe','filter','SSL_CONF_PRIVKEY','sending','):\x20Usando\x20extenso\x20padro:\x20','groupRevokeInvite','blocks','stopWhenYouSendMsg','):\x20Buscando\x20conversa...','.xls','getStatus','verifyWhatsAppNumber','automateSystem','Network\x20interfaces\x20detected:\x20','updateProfilePicturePrivacy','image','/instance/create','Configurao\x20SSL\x20recuperada:','onWhatsApp','sharePass','):\x20nextBlock.uazapi.name','@whiskeysockets/baileys','shift','stickerMessage','some','addReplyOption','AUTHENTICATION_API_KEY','):Archiving\x20chat','storePath','Conversa\x20deletada\x20com\x20sucesso.','):Type\x20defined\x20as\x20audio','):\x20\x27Enviando\x20texto\x20para\x20\x27','):\x20debug\x20alterando\x20this.AutomateSystem','.wav','Subdomnio\x20extrado\x20da\x20URL:','DATABASE_CONNECTION_PASSWORD','request\x20received\x20in\x20updateAutoCompleteMessages','findMessages','):Image\x20path:\x20','matchRegex','defineProperty','archive','delay','parseInt','Not\x20allowed\x20by\x20CORS','DisconnectReason','badSession','process','evaluateCondition','isValidAndUniqueIPv6','\x20adicionado\x20ao\x20chat\x20','/config','\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.','READ','Erro\x20ao\x20importar\x20chats','ini','Error\x20updating\x20message\x20status:','CHATS_DELETE','https://ipv6.jsonip.com','senderKeyDistributionMessage','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','createOrUpdate','/64\x20dev\x20','generate','updateProfileStatus','editflowvariable','connecting','url','):\x20Enviando\x20localizao',',\x20Resultado:\x20','cleaningUp','updateOne','loadWebhook','.doc','uazapiSendAudio','Falhou\x20ao\x20encontrar\x20chat\x20','Erro\x20ao\x20aplicar\x20varedit:\x20','content','dbClient','SERVER_OFFLINE','):\x20Transformao\x20de\x20mensagens\x20agendadas\x20concluda!','):\x20customFieldVariables','loadInstance','class-validator','description','contact_blacklist','user','/instance/connect','contactMessage','copyBlock','Fluxo\x20no\x20encontrado\x20para\x20o\x20ID:','uazapi','admin','update','PRIVKEY','waMonitor','goNextblock','findAndReplaceRegex','promisify','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20udio:\x20','iniciando\x20fluxo\x20router','CREDENTIALS','Erro\x20ao\x20remover\x20label\x20','updatePresence','messageStubType','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','Mac\x20OS','online','assign','Deletion\x20failed','namespace','findByIdAndUpdate','https://api.openai.com/v1/audio/speech','verifiedName','qrcode.updated','ScheduleMessage','findContacts','apply','#000000','):\x20Current\x20Time:\x20','client','method','deleteMany','segundos','createConversationforStartFlow','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','convert','groups','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualizao\x20do\x20git\x20e\x20npm\x20install.','):\x20lastBlockId:\x20','saveVariable','lastCondition','proxy:\x20','cache','AUTHENTICATION','_activatedCount','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','importChats','):\x20encontrado\x20prxima\x20mensagem\x20para\x20','leadInfo.desativadoFluxoAte','chats.update','getConversation','):\x20Conversa\x20est\x20expirada\x20-\x20voto','getClient','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcanada,\x20crie\x20outra\x20instncia...','\x20-\x20ON:\x20','getFlow','editFlowGroup','COLOR','writeFile','updateMessage','Input\x20deve\x20ser\x20um\x20array\x20no\x20vazio\x20de\x20chats.','silent','message_normalized','):\x20','groupSettingUpdate','groupDesc','replaceVariablesInObject','redis://127.0.0.1:6379','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','default','):\x20Envio\x20interrompido\x20devido\x20a\x20UUID\x20de\x20processo\x20no\x20corresponder.','nome','has','normalizeMessageContent','pollMessageOnDelete','restartInstance','lastInteraction','sections','):\x20Criando\x20nova\x20conversa[createNewConversation]','):\x20whoCanEdit\x20after\x20validation:\x20','telefone','Fluxo\x20agendado\x20pelo\x20fluxo\x20','):including\x20timestamp\x20in\x20url:\x20','execSync','AppStateSyncKeyData','_activedCount','CHATS_UPSERT','whoCanEdit','docker','instanceName\x20not\x20provided.','setContext','Nenhum\x20chat\x20encontrado\x20para\x20editar.','HH:mm:ss','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','.ogg','mediaMessage','scheduleSendText','REDIS_URI','uazapiSendLocation','):\x20Fluxo\x20\x27','refused','repeat','Enter\x20a\x20value\x20in\x20milliseconds','Mensagens\x20deletadas\x20com\x20sucesso.','proto','request\x20received\x20in\x20starFlow','^\x5cd+','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','groupBetterSetting','\x1b[40m','chats.set','unlinkSync','DB_PREFIX_NAME','uazapiSendMedia','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','phoneNumber','hGet','setting','request\x20received\x20in\x20allFlows','Instance\x20ID:','getScheduleMessageModelForOwner','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','Erro\x20ao\x20atualizar\x20o\x20flow.','listResponseMessage','):\x20Enviando\x20contato','\x5c$&','4122726mJZRWv','options','Last\x20message\x20not\x20found','temp-','\x20depois\x20','replaceVariables','saveMediaToFile','):\x20No\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padro...','getScheduleMessage','imgUrl','scheduleMessage','Types','contentText','app-state-sync-key','resetReconnectionVariables','\x1b[36m','):\x20delete\x20=\x20true','notContains','envProcess','chats.delete','entries','):\x20Nenhuma\x20varivel\x20especificada\x20foi\x20encontrada\x20para\x20remoo','min','longitude','cacheInstanceModel','cachedContacts-whatsapp','buttons','processawaitSeconds','processclearVariables','Instance\x20restarted','binary','isListOfNumbers','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','Esse\x20fluxo\x20expirou','Erro\x20ao\x20atualizar\x20agendamento\x20','trimmed','\x1b[0m','sendLocation','):\x20newSecondValue\x20aps\x20replaceVariables:','Partes\x20do\x20caminho\x20FULLCHAIN:','findLabels','group','\x20:\x20','findParticipants','/wa-all-message','Comando\x20desconhecido','Erro\x20de\x20duplicidade\x20no\x20ndice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20ndice...','groupInviteCode','):Temp\x20image\x20deleted','mongodb','fetchContacts','processConditions','):\x20Editando\x20edio\x20do\x20fluxo...','ip\x20-6\x20addr\x20show\x20dev\x20','\x22\x20-\x20REMOVED','}}\x20->\x20\x22',',\x20Expiration\x20Time:\x20','messageId','\x1b[32m%s\x1b[0m','list','localWebhook','documentMessage','fetchBusinessProfile','readFileSync','E-mail:\x20','prepareWAMessageMedia',',\x20valor\x20passado:\x20\x22','Data\x20invlida\x20fornecida','):\x20Bloco\x20com\x20ID\x20','GROUPS_UPDATE','creds.json','/events/:instance','replaceVariablesChat','uncaughtException','caption','INFO','Atingido\x20interaes\x20mximas,\x20parando\x20fluxo','):\x20expirationTime:\x20','fileName','number','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','connectionState','subject','Not\x20is\x20business\x20profile','firstValue','CONTACTS_SET','_sender','\x1b[31m','):\x20ev.flush\x20realizado','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','expression','pollOnReplyDelete','originalUrl','scheduleSendAudio','mongodb://','):\x20Error\x20processing\x20conditions:\x20','Pausado\x20por\x20','flowIgnoreGroups','):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','Tentando\x20reconectar...','Instncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','EMAIL','\x20-i\x20','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessrios.','):\x20[ERROR]:\x20No\x20foi\x20possvel\x20recuperar\x20mensagem\x20de\x20remotejid=','\x1b[43m','call','updateGroupWebhook','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','toBrazilianNumberFormat','deleted','Error\x20parsing\x20JSON:','isBusiness','Erro\x20ao\x20atualizar\x20cacheInstance:','SEND_MESSAGE','inviteCodeDetails','headerString','Erro\x20inesperado\x20em\x20processvaredits:\x20','ids','reactionMessage','email','processPollUpdateMessage','Erro\x20ao\x20buscar\x20fluxos:','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','decryptPollVote','):\x20Est\x20configurado\x20para\x20parar\x20at\x20','CORS_METHODS','privacySettings','pollCreationMessage','context','application/octet-stream','integer','reject','connectedName','audioMessage','writeFileSync','FlowController','$set','dbInstance','):\x20Parar\x20funo\x20pois\x20no\x20est\x20conectado','.png','Valor\x20invlido\x20para\x20formatao\x20brasileira:\x20','generateWAMessageFromContent','isLong','joinGroup','):\x20currentBlock\x20\x20null.\x20No\x20foi\x20possvel\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','result','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','beforeExit','Falha\x20ao\x20processar\x20a\x20solicitao\x20removeProfilePicture','Parando\x20aplicao,\x20atualizao\x20recebida','logout','lastSend','includes','Nenhum\x20chat\x20fornecido\x20para\x20insero.',',\x20Comparador:\x20','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','address','protocolMessage','Atualizao:\x20','dataValidate','TYPE','post','groupMemberAddMode','https://ifconfig.me/ip','):\x20\x27Enviando\x20audio\x20para\x20\x27','keep-alive','close','evaluateConditionTest','substring','):\x20alterando\x20this.AutomateSystem','):\x20error:\x20','eventHandler','@broadcast','\x20tentativas:\x20remotejid=','picture','writeData','readMessage','$pull','maxActives','messages.update','encoding','Erro\x20ao\x20deletar\x20chat:','out','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','jpegThumbnail','IPv6\x20address\x20removed:\x20','isConnected','authState','updateFlowConfig','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','XX:XX:XX:XX:XX:XX','downloads','leaveGroup','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupName','ms\x20(tentativa\x20','parse','group-participants.update','getAutomateSystem','ContactsAndGroups','start','joinApprovalMode','desativadoFluxoAte','waitingMenu_ExpiredMessage','toggleEphemeral','findGroups',',\x20received\x20','):\x20conversation.waitingMenu_name','https://api64.ipify.org?format=json','presenceSubscribe','statusJidList','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','sort','AddChatLabel','):Desconectado,\x20parando\x20execuo.','selectableCount','varedit','length','order','):\x20No\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20voc\x20no\x20tem\x20permisso\x20para\x20us-lo','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfilePicture','remove.instance','from','ORG:','reconnectTimestamps','contacts.upsert','insert','debug','true','editFlowBlock','2258bcmhhI','blockLogs','joinGroupValidate','restrict','jwt','waitingMenu_replyOptions','Fluxo\x20no\x20encontrado\x20na\x20memria.','tags','request\x20received\x20in\x20editFlow','findGroupInfo','pollUpdateMessage','documentWithCaptionMessage',',\x20Novo\x20tamanho:\x20','SSL_CONF','request\x20body:\x20','leadInfo.','flowConfig','video','ephemeralExpiration','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','END:VCARD','getContentType','createServer','Voc\x20no\x20tem\x20permisso\x20para\x20editar\x20este\x20fluxo.','delayChatLabel','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','IP\x20confirmed:\x20','lastFetchAwaitingApproval','.mp3','triedToSend','stack','sharp','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','GUARD','unreadcount','Erro\x20de\x20atualizao:\x20','?timestamp=','util','audioWhatsapp','replyOptionId\x20\x20necessrio\x20para\x20deletar\x20um\x20replyOption','groupRequestParticipantsList','BufferJSON','StartID:','startCommand','sendStatus','_fromMe','equal','replace','CONNECTION_UPDATE','\x0a{\x20instance:\x20','QRCODE_UPDATED','):\x20Deletando\x20mensagem','every','Erro\x20ao\x20limpar\x20instncias\x20desconectadas:','beautifyWithPlaceholders','rows','https://uazapi-plugin.bubbleapps.io/?url=','path','#ffae04','updateStopChat','static','composing','splice','InstancesAlterarTodas','nomecompleto','editflow','Chat\x20com\x20ID\x20','findAndUpdateCacheContact','awaitSeconds','):\x20newFirstValue\x20aps\x20replaceVariables:','Erro\x20ao\x20definir\x20instncias\x20como\x20desconectadas:','):\x20Enviando\x20udio','\x20Tentativa\x20de\x20reconexo\x20','IPv6\x20addresses\x20detected:\x20','chats','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','editChat','65480qeZqSo','setUpdate','arraybuffer','action','Router','Falha\x20ao\x20processar\x20a\x20solicitao\x20updateProfileStatus','rowId','CHATS_SET','output','authService','):Processing\x20audio','https://jsonip.com',',\x20saindo.','updateGroupParticipantsWebhook','replaceVariablesLogs','indexOf','Falha\x20ao\x20processar\x20a\x20solicitao\x20leaveGroup','media','No\x20\x20permitido\x20deletar\x20o\x20grupo\x20padro','sendList','sectionsToString','):\x20Criando\x20fluxo...','sendMedia','bearer','menuIgnoreNonVotes','\x20no\x20\x20a\x20esperada.','Nmero:\x20','Operador:\x20\x22','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','findOrCreate','Usando\x20IP\x20existente:\x20','toString','../env.yml','messageType','#9568cf','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','status.instance','):\x20Falha\x20ao\x20deletar\x20mensagem.','pt-BR','request\x20received\x20in\x20deleteConversation','Message\x20not\x20found','sha256','Font\x20is\x20required','pm2\x20flush','message','next_groupId','}}\x20->\x20valor\x20no\x20encontrado','flushHeaders','):\x20Enviando\x20mensagem\x20para\x20','findMany','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20updatePresence','SERVER_PORT','_ScheduleMessages','whatsappNumber','Erro\x20ao\x20editar\x20configurao\x20de\x20fluxos','Erro\x20ao\x20copiar\x20o\x20documento','^\x5cd+([-]\x5cd+)*@g.us$','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','STORE_CLEANING_TERMINAL','varedits','deleteAll','\x20tentativas.','\x0aitem','Nenhum\x20fluxo\x20correspondente\x20encontrado.','flowPrefixCommand','/message','convertedOptions','groupValidate','):Trying\x20to\x20get\x20business\x20profile','reorderBlocks','poll','The\x20property\x20cannot\x20be\x20empty','state','truncatedto','markMessageAsRead','toArray','endsWith','pollMessage','ephemeralDuration','mkdirSync','match','notEmpty','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20prepareMediaMessage','):\x20tem\x20blocks','Nmero\x20da\x20cor\x20invlido\x20ou\x20fora\x20do\x20intervalo:\x20','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','):\x20Ler\x20mensagem','getMIMEType','Removendo\x20package-lock.json\x20e\x20a\x20dependncia\x20especfica...','):\x20Buscando\x20conversas...','):\x20Envio\x20interrompido\x20devido\x20\x20desconexo.','?authSource=admin&readPreference=primary&directConnection=true','open','updateStatusPrivacy','):\x20atualizao\x20chat:\x20','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edio.','\x1b[33m','#9ba6ff','customFields','Dados\x20invlidos\x20para\x20edio\x20de\x20mensagens\x20no\x20grupo.','DATABASE_CONNECTION_URI','WARN','load','quoted','chats.upsert','lastMessage','Missing\x20global\x20api\x20key','nextMessageId','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','charAt','\x1b[46m','instance.','/instance','instanceCount','SSL_CONF_FULLCHAIN','exports','Erro\x20ao\x20verificar\x20o\x20nmero\x20no\x20WhatsApp.','dark','join','Connection\x20closed\x20for\x20instance:\x20','@g.us','toLocaleString','pairingCode','No\x20foi\x20possvel\x20conectar\x20ao\x20servidor\x20aps\x20vrias\x20tentativas,\x20encerrando\x20a\x20aplicao.','pollCreationMessageV2','updateMissingEtiquetas','vcard','\x20minutos...','linkPreview','getMessageModelForOwner','\x20no\x20encontrado\x20para\x20atualizao.','processvaredits','):\x20ndice\x20do\x20bloco\x20a\x20ser\x20atualizado:','myAppStateKeyId','sendMessage','Telefone:\x20','Deleted\x20','participants','variables','DATABASE','Instncia\x20no\x20encontrada.','yes','fileUrl','Falha\x20ao\x20processar\x20fetchBusinessProfile','local_map','):\x20Fluxos\x20no\x20esto\x20ativados','\x0a*Voc\x20respondeu*:\x0a','):\x20Condies\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','Falha\x20ao\x20processar\x20a\x20solicitao','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','transformScheduledMessagesByType','Error\x20in\x20chatModify\x20for\x20number\x20','leadInfo.customFields','lastMessage_id','TEXT','groupSetting','getValidWhatsAppNumbers','instances','addresss','\x20do\x20chat\x20','lean','utf-8','editFlowVariable','SERVER','Erro\x20ao\x20normalizar\x20a\x20mensagem:','Garbage\x20collection\x20no\x20est\x20disponvel.','recebido\x20de','readMessageBot','):\x20no\x20\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','loggedOut','uazapiSendText','onTime','GET','Removidas\x20as\x20variveis:\x20','verbose','interval\x20no\x20\x20um\x20nmero','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','editFlowCondition','contains','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','exists','announcement','imagechat','/wa-chats','greater','\x20com\x20sucesso.','.webm','creation','mediaKey','findIndex','contacts.update','groupMetadata','REDIS','superadmin','):\x20Editando\x20bloco...','_error','enabled','useMultiFileAuthState','reviver','timeout','desc','dbSettings','Erro\x20ao\x20buscar\x20conversas','creds.update','startFlowWebhook','ListMessage','ChatRouter','views','):\x20whoCanUse\x20before\x20validation:\x20','pop','allFlows','/create','Erro\x20ao\x20tentar\x20autoCompleteMessages','\x1b[41m','key','save','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','padEnd','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','editflowreply','newStoppedUntil','EXPIRIN_IN','):\x20Flow\x20desativado','synchronizeAndMapFlows','DaysToDelete','sendDataWebhook','restart','leadInfo','):\x20Procurando\x20mensagens\x20para\x20envio','IPv6\x20address\x20configured:\x20','child_process','CONNECTION','labelId','array','CHATS_UPDATE','updateCustomFields','groupToggleEphemeral','):\x20Enviando\x20mdia','last','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','prototype','https://api.elevenlabs.io/v1/text-to-speech/','fetchMessages','cachedContact','API\x20Key\x20from\x20Request:','status','randomMac','KEY','processUazapi','atendimentoAberto','SendScheduleMessage','Primeiro\x20Valor:\x20','readFile','):\x20Erro\x20na\x20atualizao\x20da\x20conversa\x20no\x20BD:\x20','Mensagem\x20no\x20suportada','body','canSendMessage','):\x20Comando\x20desconhecido:\x20','STORE_CHATS','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','menuMessage','delayChatLabel_MAX_RETRIES','#d3a91f','PRESENCE_UPDATE','isJidGroup','Falha\x20ao\x20processar\x20a\x20solicitao\x20inviteCode','getConversationModelForOwner','webhookService','unreadCount','stopped','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','No\x20\x20possvel\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20est\x20em\x20processamento.','):\x20transformedCustomFieldVariables','choices','No\x20respondeu\x20com\x20a\x20enquete.','Valor\x20de\x20find\x20ou\x20replace\x20ausente','title','Cache-Control','audio/ogg;\x20codecs=opus','ipv6Prefix','editflowgroup','URL','.pptx','shareOwners','sendContact','inner','editFlowReply','PASSWORD','instanceInfo','MESSAGES_UPSERT','function','error_log','ip\x20-6\x20addr\x20add\x20','delaySecMax','editOperator','!cmd_','IPv6\x20Prefix\x20detected:\x20','model','\x22\x20cannot\x20be\x20empty','test','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','editflowblock','readMessages','\x20e\x20ID=','removeProfilePicture','item','Erro\x20ao\x20atualizar\x20AutomateSystem:','\x1b[37m%s\x1b[0m','):\x20A\x20mensagem\x20no\x20foi\x20enviada\x20pelo\x20bot','Error\x20while\x20deleting\x20message\x20for\x20everyone','TEL','replaceOne','descId','8080','birthtime','stopConversation','DOCKER_ENV','split','author','DARK','\x1b[1m','--------------------------------------','sendButtons','mediatype','replyOptions','convertToWebP','autoCompleteMessages','fetchProfile','listen','detail','groupdata','flowName','deleteInstance','#f64847','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','CORS_CREDENTIALS','/media','startsWith','groups.update','waInstances','toUpperCase','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20nmero','instance','closeExistingConversations','):\x20Entrou\x20na\x20funo\x20stop','):\x20leadInfoVariables','connectToWhatsapp','deleteFlow','redisEnv','Instance\x20Name:','http','stdout','\x27\x20no\x20encontrado','[AUTH]\x20Database\x20is\x20not\x20enabled','/:instanceName','use','apiResponse','formatStatusMessage','Stack\x20trace:','$dbName','content-type','\x20instance\x20does\x20not\x20exist','notEqual','no-cache','):\x20Iniciando\x20bot...','groupCreate','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','findByIdAndDelete','Falha\x20ao\x20criar\x20IPv6.','Instncia:\x20','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','remoteJid','updateLastSeenPrivacy',',\x20global:\x20','deleteReplyOption','getVariablesChat','updateMany','\x22\x20-\x20NOT\x20CONNECTION','blockId','messages.upsert','findById','all_member_add','10317024BtQuVV','Read\x20messages','\x20removido\x20do\x20chat\x20','sendMessageWithTyping','Fluxos\x20no\x20esto\x20ativados','replaceValue','none','):Alterar\x20configurao\x20de\x20mudo\x20para\x20o\x20chat:\x20','uazapi\x20no\x20est\x20instalado\x20pelo\x20git','2627889tQQzzY','Error\x20removing\x20IPv6\x20address:\x20','prepareMediaMessage','ReplyOption\x20com\x20ID\x20','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','stopMinutesMaxActives','Erro\x20ao\x20criar\x20fluxo','_Labels','):\x20Falha\x20ao\x20atualizar\x20as\x20variveis\x20do\x20chat\x20no\x20BD','createNewConversation','):\x20Query\x20params:','Erro\x20ao\x20iniciar\x20a\x20aplicao:\x20','\x27...','createInstance','removeIPv6','request_method','setNewValue','memberAddMode','random','lastUpdate','Instance\x20deleted','Not\x20Found','LOG','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','removeInstance','bulkWrite','menuType','uazapiSendMenu','getUniqueFlowName','messageHandle','reaction','now','conditions','MESSAGES_UPDATE','ScheduleMessageModel','\x1b[37m','copy','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','connectedClient','METHODS','GROUP_PARTICIPANTS_UPDATE','NextBlock','_pushName','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localizao:\x20','Nenhum\x20campo\x20vlido\x20para\x20atualizao\x20fornecido.','\x20and\x20data:','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','updatePrivacySettings','ERROR:\x20','oldToken','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','API\x20Key\x20invlida.','params','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','cleanDisconnectedInstances','Rtulo\x20invlido\x20ou\x20sem\x20ID.','2948812einrLR','sim','qrCode','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','repository','AutomateSystem','WebhookGlobal','Erro\x20ao\x20iniciar\x20fluxo:\x20','notify','ENABLED','headers','PENDING','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','this.reconnectAttempts:\x20','participant','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','archived','listType','scheduleFlow','audio/ogg','pow','label_jid','object','/wa-connection-update','ERROR','getMinutes','request\x20received\x20in\x20createFlow','\x20atualizado\x20com\x20sucesso.\x20Ao:\x20','_Contacts','createClient','Erro\x20ao\x20iniciar\x20o\x20fluxo.','SERVER_ACK','Database\x20connection\x20closed.','replacer','font','send','SUCCESS','.ppt','groupJoinApprovalMode','inviteUrl','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20no\x20esto\x20ativados.','setRestartTimeout','findFlow','flush','):\x20condies\x20no\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','validate','ignoreGroups','reference','#ff9484','addChatLabel','messageTimestamp','updateChatWithMessage','spawn','http://checkip.dyndns.org','CONTACTS_UPSERT','convertaudio','cpf','msgRetryCounterCache','!stop','presence','):\x20Encontradas\x20e\x20removidas\x20as\x20variveis:\x20','Database\x20update\x20result:','/instance/delete','imported','/instance/connectionState','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','upperCase','not\x20loaded','height','findWebhook','size','notMatchRegex','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','Encerrando\x20a\x20API\x20por\x20solicitao\x20via\x20rota\x20/exit','createConversationforgoToFlow','MESSAGES_SET','_Messages','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20conectar\x20ao\x20whatsapp','editFlow','\x1b[31m%s\x1b[0m','updateGroupPicture','Bloco\x20com\x20ID\x20','normalizeMessage','displayName',',\x20qrcodeCount:\x20','deleteOne','@s.whatsapp.net','.gif','get','$addToSet','find','statSync','request\x20received\x20in\x20getFlow','recording','Falha\x20ao\x20deletar\x20a\x20coleo\x20de\x20mensagens:\x20','Somente\x20\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padro','cacheContactModel','isURL','):\x20[messages.update]\x20group\x20ignored','create','groups_ignore','statusMessage','globalShow','groupGetInviteInfo','Novo\x20IP\x20criado:\x20','1259797JyHCvB','updateGroupsAddPrivacy','formatVCard','deletedCount','getTime','jsonschema','contact','findOne','notas','lastSendMessage','588iROFBd','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupGetInviteInfo','editConversation','chatLog','fromObject','webhook','https://github.com/uazapi/uazapi.git','editflowvaredit','\x20chats\x20de\x20','node-cache','extractRegex','/wa-message','userDevicesCache','STORE_MESSAGE','header','createIPv6','request\x20received\x20in\x20scheduleMessage','createFlow','pino','flowConversation','findManyByIds','/events','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','updateAutoCompleteMessages','findGroupInfos','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','currency','No\x20suitable\x20network\x20interface\x20found','groupUpdateDescription','Contacts\x20not\x20found','.pdf','webhookMap','createJid','/exit','Content-Type','instanceName','Erro\x20ao\x20editar\x20condio\x20do\x20fluxo','set','and','cleanStore','env','/wa-groups','50mb','):\x20Loop\x20externo\x20interrompido\x20devido\x20\x20flag\x20isConnected','response','no.connection','query','paused','loadEnv','profilePictureUrl','exec','):Output\x20path:\x20','expiration','Valor\x20da\x20URL\x20recuperada:','Erro\x20ao\x20inserir\x20chats:','footerText','truncatedtoEnd','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','URI','):\x20Entrou\x20na\x20funo\x20saveReply','SECRET','*\x0a\x0a','max','\x20foi\x20removido\x20por\x20no\x20ser\x20vlido.','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','sendAudio','groupName','command','Erro\x20ao\x20arquivar\x20chat','):\x20Label\x20','AddUserFlow','readData','):Error\x20in\x20converting\x20audio','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','/wa-contacts','\x20segundos\x20antes\x20de\x20reconectar...','/webhook','type','viewOnceMessage','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','Error\x20finding\x20many\x20contacts:','node-mime-types','AUTHENTICATION_TYPE','formatBRNumber','forEach','abs','apirequest','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','removeUnusedChatFields','addBlock','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','Falha\x20ao\x20processar\x20a\x20solicitao\x20findParticipants','RECONNECT_TIME_FRAME','express','hex','global','\x1b[34m%s\x1b[0m','configService','findConversation','5BcGjVS','\x20quoted:\x20','connect','dayjs','uazapiSendContact','Cannot\x20','Erro\x20ao\x20atualizar\x20mltiplas\x20conversas:','webp','updateProfilePicture','mentions','authentication','):\x20Entrou\x20na\x20funo\x20clearVariables','processScheduleFlow','CONTACTS_UPDATE','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mdia:\x20','):\x20Limpando\x20delayMessage','API_KEY','match_last_seen','/wa-message-update','status@broadcast','block','off','updateAgent','.jwt','):\x20teve\x20mudanas\x20chat.archived:\x20','The\x20\x22','delayChatLabel_RETRY_DELAY_MS','testIPv6','):\x20Enviando\x20enquete','isInteger','conversationTimestamp','Generated\x20IPv6:\x20','deleteMessageForEveryone','qrcode-terminal','\x1b[34m','replaceVariablesInReplyOptions','console','Sistema\x20atualizado\x20com\x20sucesso!','Conexo\x20estabelecida','Logger','Validate','):\x20Editando\x20grupo\x20do\x20fluxo...','extractPhoneNumber','profile','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','flowStopMinutes','\x20-y','):\x20Entrou\x20na\x20funo\x20processawaitSeconds','option','):\x20whoCanEdit\x20before\x20validation:\x20','ephemeralMessage','\x22,\x20porm\x20no\x20foi\x20possvel\x20descriptograf-la,\x20sendo\x20impossvel\x20ver\x20seu\x20contedo.','):\x20Query\x20params:\x20','\x20minutos.\x20Ser\x20s\x20','digest','):\x20A\x20mensagem\x20\x20\x22stopConversation\x22\x20=\x20','reorderMessages','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','):\x20no\x20encontrou',',\x20valor\x20a\x20encontrar:\x20\x22','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','DELETED','compression','labels.association','emit','groupParticipantsUpdate','RemoveChatLabel','/*.json','LOG_LEVEL','VERBOSE','):\x20Rtulo\x20atualizado:\x20','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','role','GROUPS_UPSERT','Erro\x20ao\x20avaliar\x20a\x20condio:\x20','dbServer','inviteCode','\x20minutos','PROXY','uazapiDeleteMessage','):Hash\x20to\x20image\x20name:\x20','Network\x20Interface\x20detected:\x20','Partes\x20do\x20domnio:','deleteflow','LOG_COLOR','log','#ffffff','Falha\x20ao\x20processar\x20a\x20solicitao\x20revokeInviteCode','document','delete','createGroup','instanceKeys','listMessage','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','\x20foi\x20interrompido\x20pelo\x20usurio.','groupFetchAllParticipating','express-async-errors','waitingMenu_text','):\x20Bloco\x20original\x20para\x20cpia:\x20','HeaderType','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20at\x20','configureIPv6','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','chat','connectionUpdate','lastReceivedMessage','Error\x20updating\x20cache\x20contact:','messages.set','bateu\x20events','Falha\x20ao\x20processar\x20a\x20solicitao\x20getBase64FromMediaMessage','labels.edit','request\x20received\x20in\x20getConversation','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','closed','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','Flow\x20iniciado\x20com\x20','):\x20Buscando\x20todos\x20os\x20fluxos...',',\x20Minutes\x20to\x20Close:\x20','empty','pictureUrl','bodyString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupBetterSetting','muteEndTime','optionDescription','groupAcceptInvite','\x1b[33m\x1b[1m','throwAndLogError','waitingForReplyMenu','.jpg','updateProfileName','ip6eui','Falha\x20ao\x20processar\x20a\x20solicitao\x20findGroups','unhandledRejection','@redis/client','info','891SZqNKm','apiName','.ogv','Error\x20writing\x20file:\x20','):\x20no\x20encontrado\x20prxima\x20mensagem,\x20far\x20nova\x20verificao\x20em\x20','fone','editScheduleMessage','groupadd','demote','ChatModel','fetchStatus','\x1b[30m','qrcode','website','subjectTime','connectionStatus','cwd','idSchedule','isCommunity','processingGroup_id','stopIfLastReturnedError','autoCompleteMessages.command_1','del','scheduleNextCheck','Erro\x20ao\x20editar\x20agentes','updateReadReceiptsPrivacy','URL\x20no\x20disponvel','stanzaId','Connection','.error','Nome\x20do\x20campo\x20personalizado\x20j\x20existe.','insertMany','\x20no\x20encontrado','Resultado\x20da\x20correspondncia\x20de\x20URL:','flows','Db\x20Connection','):\x20No\x20achou\x20nenhum\x20flow','color','wuid','URL:','):\x20Tipo\x20de\x20contedo\x20identificado:\x20','REDIS_PREFIX_KEY','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','ConversationModel','):\x20Criando\x20fluxo\x20compartilhado...','updateOnlinePrivacy','cacheContact','pre','conversation','width','MessageModel','toFile','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','write','deleteImportedChat','menuExpiredMessage','Fluxo\x20no\x20encontrado\x20no\x20banco\x20de\x20dados.','unlocked','jsonwebtoken','OrAnd','buttonMessage','Para\x20marcar\x20esse\x20fluxo\x20como\x20visvel\x20globalmente,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20Global.','verify','groupId','base64','getChatModelForOwner','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','Instance\x20\x22','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','fileLength','https://chat.whatsapp.com/','pushName','isBase64','CacheContacts\x20database\x20connection\x20closed.','stateConnection','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','put','editedMessage','delaySecMin','SERVER_TYPE','connectToWhatsappController','condition','Button\x20IDs\x20cannot\x20be\x20repeated.','request_time','less','SINGLE_SELECT','events','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','File\x20written\x20to\x20path:\x20','The\x20global\x20api\x20key\x20must\x20be\x20set','catch','getLastMessage','):\x20updateResult:','not_announcement','#9ab6c1','everyOne','Flow\x20\x27','-whatsapp-api','ex:\x20\x22groupJid=120362@g.us\x22','release','/instance/fetchInstances','scheduleSendMedia','Erro\x20ao\x20buscar\x20Schedule\x20Messages','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','endSession','capitalizedWords','done','flattenObject','text','lastBlockId','Error\x20fetching\x20and\x20updating\x20profile:\x20','networkInterface','updateConversation','fetchLabels','CORS_ORIGIN','PORT','remove','enviado\x20para','generateHash','hasOwnProperty','MAX_SAFE_INTEGER','):\x20isVote:\x20','removeIPv6ById','sticker','Rtulo\x20deletado:\x27,\x20','getProfileName','existsSync','Request\x20Body:','waUploadToServer','Erro\x20ao\x20editar\x20o\x20chat','):Image\x20created','):Fetching\x20business\x20profile','toNumber','processblock','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','contactsArrayMessage','sign','variable','uuid','updateReplyOption','replyOption','boolean','updateMissingCustomFields','subjectOwner','label','):\x20condies\x20atendidas,\x20parando\x20verificao...\x20em\x20','removed','errors','pollCreationMessageV3','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','Variveis\x20no\x20encontradas:','editFlowVaredit','request\x20received\x20in\x20editFlowvariable','noConnection','Falta\x20informao\x20para\x20a\x20chamada\x20API','Falha\x20ao\x20processar\x20a\x20solicitao\x20send_message,\x20numero:\x20','_id','allContacts','.\x20Pulando.','#56ccb4','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','when','Falha\x20ao\x20processar\x20a\x20solicitao\x20groupDesc','chatId','Close\x20connection','Campo\x20personalizado\x20no\x20encontrado\x20para\x20o\x20nome\x20','inet6','createWebhook','messages','toBRL','updateAll','_remoteJid','Erro\x20ao\x20editar\x20o\x20bloco:\x20','DATABASE_CONNECTION_HOST','variablesToObject','error\x20get\x20vote','generateRandomIPv6','Message','bodyStringErrorParse','):\x20Flow\x20\x27','logger','):\x20Erro\x20durante\x20a\x20atualizao:\x20','findAll','getContactModelForOwner','DEBUG','readreceipts','audio','minutesToClose','locked','redirect','vir','chatModify','folder','waitingMenu_id','unavailable','findGroup','RemoteJid:','groupHandler','request\x20received\x20in\x20updateAgent','sendPresenceUpdate','eventEmitter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','):\x20conversation.status:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','fetchChats','AutomateFunctions','createSectionsFromValues','sendSticker','sem\x20texto\x20na\x20mensagem','exit','updateBlock','delayMessage','#83e421','findAndReplace','CORS','):\x20Removendo\x20\x27','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','blockId\x20\x20necessrio\x20para\x20deletar\x20um\x20bloco','eventemitter2','deleteDoneMessages','groupJid','contactHandle','getBase64FromMediaMessage','startCommandWord','testingWith','FlowRouter','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','):Audio\x20converted\x20and\x20stored\x20in\x20cache','format','https','reduce','Filtered\x20network\x20interfaces:\x20','redis','https://api.openai.com/v1/images/generations','FULLCHAIN','saveCreds','groupLeave','add','Authentication\x20error','.TEL;waid=','startFlow','deleteMessage','.type','admin_add','crypto','router','Erro\x20ao\x20buscar\x20o\x20fluxo','Background\x20color\x20is\x20required','createConnection','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','):\x20Deteco\x20de\x20condio\x20de\x20corrida,\x20a\x20mensagem\x20','Falha\x20ao\x20processar\x20a\x20solicitao\x20de\x20findAndUpdateCacheContact','):\x20conversation.lastInteraction:\x20','PRODUCT_LIST','limit','detectIPv6PrefixAndInterface','SERVER_URL','toDataURL','https://','routerPath','#dfaef0','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','AUTHENTICATION_JWT_SECRET','whoCanUse','):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas:\x20','downloadMediaMessage','isValidIPv6Config','upsertChats','ListType','deleteBlock','saveTextReply','):\x20mediaMessageInfoId\x20:\x20','upsertedCount','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','https://uazapi-plugin.bubbleapps.io/','data','map','\x27\x20no\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20voc\x20no\x20pode\x20usar\x20esse\x20fluxo','applyvaredit','application/json','delAll','Subdomnio\x20extrado\x20do\x20caminho\x20SSL:','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','flow','axios','Detalhes\x20do\x20erro:','Erro\x20ao\x20executar\x20bulkWrite:','revokeInviteCode','Subdomnio\x20no\x20encontrado','collection','#b4ebff','):\x20[messages.upsert]\x20group\x20ignored','Nmero\x20no\x20possui\x20WhatsApp.','agents','.webp','\x27\x20no\x20encontrado\x20na\x20memria','where','Esse\x20fluxo\x20no\x20permite\x20importao.','env.KEY\x20!==\x20key','error','sleep','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','announce','[ERROR]:\x20Foi\x20recebida\x20uma\x20mensagem\x20com\x20o\x20id\x20de\x20\x22','Invalid\x20format','archiveChat','):Image\x20converted\x20to\x20WebP','extractMessageContent','chatHandle','DATABASE_ENABLED','LEVEL','createHash','undefined','):\x20Conversa\x20ou\x20prximo\x20bloco\x20no\x20fornecidos','created','sendReaction','enumerable','reorderReplyOptions','hbs','setWebhook','sendText','js-yaml','/automate','videoMessage','owner','cacheInstanceRepository','\x20segundos','*Pergunta*:\x20\x0a','flowActive','):\x20Bloco\x20copiado:\x20','Para\x20criar\x20fluxo\x20global,\x20voc\x20precisa\x20usar\x20a\x20apikey\x20global','getMessage','The\x20','\x1b[44m','insertCount','):Image\x20is\x20url','request\x20received\x20in\x20updateFlowConfig','profilePicture','dropCollection','fetchInstances','urlOrBase64','\x20inseridos\x20no\x20banco\x20de\x20dados...','):\x20Editando\x20mensagens\x20no\x20grupo...','Erro\x20ao\x20editar\x20a\x20conversa','sendMenu','floor','awaitingApproval','):\x20Editando\x20varivel\x20do\x20fluxo...','groups.upsert','value','available','scheduled','auth','deleteChat','):\x20\x27Grupo\x20no\x20encontrado\x20ou\x20groupdata\x20no\x20definido:\x27,\x20','then','):\x20teve\x20mudanas\x20chat.ephemeralExpiration:\x20','request\x20received\x20in\x20editFlowgroup','):Notifying\x20clients\x20for\x20chat:\x20','organization','Falha\x20ao\x20recriar\x20IPv6.','fetchProfilePicture','responsavelid','Nenhum\x20participante\x20vlido\x20encontrado.','Valor\x20invlido\x20para\x20converso\x20em\x20BRL:\x20','fetchPrivacySettings','pollCreationMessageKey','buttonId','processgoToFlow','activatedCount','ContactModel','promote','name','envYaml','getDevice','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','requestPairingCode','locationMessage','):\x20A\x20atualizao\x20no\x20BD\x20da\x20conversa\x20no\x20foi\x20bem\x20sucedida','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','shareFlow','drop','apikey','.fileUrl','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','all','./.git/config','g.us','importChatsBatch','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','secondValue','USER','fromMe','approve','mimetype','):\x20whoCanUse\x20after\x20validation:\x20','stringify','AUTHENTICATION_JWT_EXPIRIN_IN','reconnectAttempts'];a0_0x1091=function(){return _0x536fd5;};return a0_0x1091();}var {subdomain:K,fullURL:Gs}=ur(S);console[a0_0x5ca8c7(0x5df)]('Subdomnio\x20final:',K),console[a0_0x5ca8c7(0x5df)](a0_0x5ca8c7(0x7c5),Gs);async function dr(){const _0x543d3f=a0_0x5ca8c7;let _0x384522=S['get']('REDIS'),_0x1171e9=S[_0x543d3f(0x507)](_0x543d3f(0x166))[_0x543d3f(0x59a)]['KEY'],_0x1c3c72=S[_0x543d3f(0x507)](_0x543d3f(0x2ad)),_0x7becd3=await Wi(),_0x3a395c=S['get'](_0x543d3f(0x390))[_0x543d3f(0x685)],_0x2f4ba6=Gs;try{let _0x2b4912={'ip':_0x7becd3||null,'redis_enable':_0x384522?.[_0x543d3f(0x4b7)]||null,'apikey':_0x1171e9||null,'ssl':_0x1c3c72?.[_0x543d3f(0x13e)]||null,'lastupdate':zi||null,'port':_0x3a395c||null,'gitInstallError':Ie?.['message']||null,'url':_0x2f4ba6||null,'subdomain':K};if(console[_0x543d3f(0x5df)]('ip:\x20',_0x2b4912['ip']),_0x384522&&_0x384522[_0x543d3f(0x4b7)]){let _0x23c0bd=await lr();_0x2b4912[_0x543d3f(0x35e)]=_0x23c0bd||null;}for(let _0x49b00d in _0x2b4912)_0x2b4912[_0x543d3f(0x689)](_0x49b00d)&&_0x49b00d!=='ip'&&(_0x2b4912[_0x49b00d]=JSON[_0x543d3f(0x79e)](_0x2b4912[_0x49b00d]));return(await qe['default']['post'](_0x543d3f(0x3c7),_0x2b4912))[_0x543d3f(0x725)];}catch(_0x10cd97){return console[_0x543d3f(0x73d)](_0x10cd97),!0x1;}}var Js=!0x1,zi=0x25b,pr=0x3,Ji=0x1b7740;async function Vs(){const _0x1ef085=a0_0x5ca8c7;let _0x58e0be='fora\x20do\x20git';Ie===null&&(_0x58e0be=await Wi());let _0x343f35=await dr();if(_0x343f35){if(_0x343f35[_0x1ef085(0x54f)]['licenca']===!0x0){Ie===null&&_0x343f35[_0x1ef085(0x54f)][_0x1ef085(0x7a6)]-zi>0x0&&await hr(),Js||(Js=!0x0,ir());let _0x3b8866=0x24*0x3c*0x3c,_0xd8eac7=_0x343f35[_0x1ef085(0x54f)][_0x1ef085(0x15b)]>_0x3b8866?_0x3b8866:_0x343f35[_0x1ef085(0x54f)][_0x1ef085(0x15b)],_0x5e10a8=Number(_0xd8eac7);if(isNaN(_0x5e10a8)){console[_0x1ef085(0x73d)](_0x1ef085(0x39c));return;}let _0x3909fb=Math['floor'](_0x5e10a8/0xe10),_0x4e1de8=Math[_0x1ef085(0x76b)](_0x5e10a8%0xe10/0x3c),_0x4556be=new Date(Date[_0x1ef085(0x494)]()+_0x5e10a8*0x3e8);setTimeout(Vs,_0x5e10a8*0x3e8);let _0x10228b=_0xaae330=>_0xaae330[_0x1ef085(0x30c)]()[_0x1ef085(0x7a5)](0x2,'0'),_0x38cd4b='Prxima\x20verificao\x20de\x20licena\x20e\x20se\x20tem\x20atualizao\x20em\x20'+_0x10228b(_0x3909fb)+'\x20horas\x20e\x20'+_0x10228b(_0x4e1de8)+_0x1ef085(0x5bf)+_0x10228b(_0x4556be['getHours']())+':'+_0x10228b(_0x4556be[_0x1ef085(0x4c7)]())+'.';console['log'](_0x38cd4b);}else return console[_0x1ef085(0x5df)]('Regularize\x20sua\x20licena\x20no\x20site\x20https://uazapi.dev/'),Js&&(console[_0x1ef085(0x5df)]('A\x20licena\x20no\x20\x20vlida,\x20interrompendo\x20a\x20aplicao.'),process[_0x1ef085(0x6e3)]()),_0x1ef085(0x811);}else{if(ji++,ji<pr)console['log']('Servidor\x20de\x20autenticao\x20offline.\x20Nova\x20tentativa\x20em\x20'+Ji/0xea60+_0x1ef085(0x36c)),setTimeout(Vs,Ji);else return console[_0x1ef085(0x73d)](_0x1ef085(0x368)),_0x1ef085(0x12f);}}async function hr(){const _0x1ae514=a0_0x5ca8c7;console['log'](_0x1ae514(0x250)),console['log']('Limpando\x20logs\x20do\x20PM2...'),(0x0,ls[_0x1ae514(0x4e3)])(_0x1ae514(0x318),{'shell':!0x0})['on'](_0x1ae514(0x261),_0x5ee569=>{const _0x274bc9=_0x1ae514;_0x5ee569!==0x0?console['error'](_0x274bc9(0x65d)):(console[_0x274bc9(0x5df)](_0x274bc9(0x6f4)),console[_0x274bc9(0x5df)](_0x274bc9(0x345)),(0x0,ls[_0x274bc9(0x4e3)])('rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys',{'shell':!0x0})['on'](_0x274bc9(0x261),_0xa33fb4=>{const _0xb98593=_0x274bc9;if(_0xa33fb4!==0x0)console['error'](_0xb98593(0x221));else{console[_0xb98593(0x5df)](_0xb98593(0x160));let _0x24cc79=(0x0,ls[_0xb98593(0x4e3)])('git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm',{'shell':!0x0});_0x24cc79[_0xb98593(0x44d)]['on']('data',_0x4edd4f=>{const _0x5838e6=_0xb98593;console[_0x5838e6(0x5df)](_0x5838e6(0x259)+_0x4edd4f);}),_0x24cc79[_0xb98593(0x819)]['on'](_0xb98593(0x725),_0xe17f11=>{const _0x447af9=_0xb98593;console[_0x447af9(0x73d)](_0x447af9(0x2c3)+_0xe17f11);}),_0x24cc79['on'](_0xb98593(0x6e3),_0x2e9f13=>{const _0x3efdde=_0xb98593;_0x2e9f13!==0x0?console[_0x3efdde(0x73d)]('Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Cdigo\x20de\x20sada\x20'+_0x2e9f13):console[_0x3efdde(0x5df)](_0x3efdde(0x5af)),console[_0x3efdde(0x5df)]('Parando\x20aplicao...'),setTimeout(()=>process[_0x3efdde(0x6e3)](),0x2710);});}}));});}0x0&&(module[a0_0x5ca8c7(0x360)]={'fullURL':fullURL,'subdomain':subdomain});